(function(){"use strict";var ql=document.createElement("style");ql.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-142p4sy{display:none}.selector.svelte-142p4sy{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-142p4sy{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-142p4sy:not(.selected):hover{border:1px solid}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.exclvars.svelte-12e65an{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;inset:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.wrapper.svelte-1di9qjd{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-1di9qjd{grid-area:plot}.plot-controls.svelte-1di9qjd{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-1di9qjd>.control-element{background:transparent}.msg-select.svelte-1di9qjd{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}table.svelte-110ino2{width:100%;border-collapse:collapse}tr.svelte-110ino2{width:100%}th.svelte-110ino2{border-bottom:1px solid #a0a0a0}th.svelte-110ino2,td.svelte-110ino2{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}td.svelte-110ino2:first-of-type{width:25%}.switcher.svelte-110ino2{padding:1em .2em .2em;text-align:center}label.svelte-110ino2{background-color:#e8e8e8;border:solid 1px #708090;color:#607080;padding:.25em .5em;margin-right:.1em;border-radius:.25em;cursor:pointer}label.svelte-110ino2:hover{background-color:#fffef0;color:#607080;border-color:#607080}input.svelte-110ino2{display:none}input.svelte-110ino2:checked+label:where(.svelte-110ino2){background-color:#607080;color:#e8f0f8;border-color:#607080}.control-element.res-switcher{margin-top:1em;margin-bottom:0;padding-bottom:0;justify-content:center;background:transparent;font-size:.8rem}.control-element.res-switcher:hover{background:transparent}.control-element.res-switcher .selector{justify-content:center}.control-element.res-switcher>.selector>.option{background-color:#e8e8e8;border-color:#708090;color:#607080}p.svelte-7klqqw{line-height:1.5em}span.svelte-7klqqw{color:#a0a0a0}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}div.svelte-z3o1sd{width:100%;height:100%}div.svelte-z3o1sd .plot .axes{cursor:crosshair}div.svelte-z3o1sd .plot .axes-content rect{pointer-events:none}.tab-content-train .plot-controls-area>.plot-selector-fom2,.tab-content-train .plot-controls-area>.plot-selector-loadings{margin-top:1em}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mp4dba{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(330px,30%) 1fr}}.info-text.svelte-7h7avz{line-height:1.5em}.info-text.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.tab-content-test .plot-controls-area>.plot-selector-fom2{margin-top:1em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q),.help-text.svelte-1w77c1q>div:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q){border-collapse:collapse}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) thead:where(.svelte-1w77c1q) tr:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q){font-weight:700;background:#f8f4e0}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) tbody:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1w77c1q{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(330px,30%) 1fr}}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q),.help-text.svelte-1rjc99q>div:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q){border-collapse:collapse}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) thead:where(.svelte-1rjc99q) tr:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q){font-weight:700;background:#f8f4e0}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(ql);var mr=typeof document<"u"?document.currentScript:null;const ys=!1;var xs=Array.isArray,ni=Array.prototype.indexOf,cn=Array.prototype.includes,Kn=Array.from,si=Object.defineProperty,Pr=Object.getOwnPropertyDescriptor,zl=Object.getOwnPropertyDescriptors,Il=Object.prototype,li=Array.prototype,Jn=Object.getPrototypeOf,Ol=Object.isExtensible;function un(n){return typeof n=="function"}const wt=()=>{};function oi(n){return typeof n?.then=="function"}function ai(n){return n()}function ks(n){for(var e=0;e<n.length;e++)n[e]()}function Vl(){var n,e,t=new Promise((s,l)=>{n=s,e=l});return{promise:t,resolve:n,reject:e}}function ii(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const t=[];for(const s of n)if(t.push(s),t.length===e)break;return t}const yt=2,Zn=4,Sn=8,Bl=1<<24,lr=16,Kt=32,Dr=64,Es=128,Yt=512,vt=1024,xt=2048,Jt=4096,zt=8192,gr=16384,Qn=32768,pr=65536,Dl=1<<17,Yl=1<<18,fn=1<<19,Wl=1<<20,br=1<<25,Yr=32768,Ss=1<<21,As=1<<22,Tr=1<<23,or=Symbol("$state"),Hl=Symbol("legacy props"),ci=Symbol(""),dn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ul(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ui(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function fi(n,e,t){throw new Error("https://svelte.dev/e/each_key_duplicate")}function di(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function vi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function hi(n){throw new Error("https://svelte.dev/e/effect_orphan")}function mi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function gi(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function pi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function bi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function _i(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function wi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const yi=1,xi=2,Gl=4,ki=8,Ei=16,Si=1,Ai=2,Ci=4,Ni=8,Pi=16,Ti=1,ji=2,Li=4,Xl=1,Mi=2,ht=Symbol(),Ri="http://www.w3.org/1999/xhtml";function Fi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Kl(n){return n===this.v}function qi(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Jl(n){return!qi(n,this.v)}let vn=!1,zi=!1;function Ii(){vn=!0}const Oi=[];function Vi(n,e=!1,t=!1){return $n(n,new Map,"",Oi,null,t)}function $n(n,e,t,s,l=null,o=!1){if(typeof n=="object"&&n!==null){var a=e.get(n);if(a!==void 0)return a;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(xs(n)){var c=Array(n.length);e.set(n,c),l!==null&&e.set(l,c);for(var u=0;u<n.length;u+=1){var f=n[u];u in n&&(c[u]=$n(f,e,t,s,null,o))}return c}if(Jn(n)===Il){c={},e.set(n,c),l!==null&&e.set(l,c);for(var d in n)c[d]=$n(n[d],e,t,s,null,o);return c}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function"&&!o)return $n(n.toJSON(),e,t,s,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}let nt=null;function hn(n){nt=n}function At(n){return Zl().get(n)}function Bi(n,e){return Zl().set(n,e),e}function we(n,e=!1,t){nt={p:nt,i:!1,c:null,e:null,s:n,x:null,l:vn&&!e?{s:null,u:null,$:[]}:null}}function ye(n){var e=nt,t=e.e;if(t!==null){e.e=null;for(var s of t)xo(s)}return e.i=!0,nt=e.p,{}}function Wr(){return!vn||nt!==null&&nt.l===null}function Zl(n){return nt===null&&Ul(),nt.c??=new Map(Di(nt)||void 0)}function Di(n){let e=n.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}let Hr=[];function Ql(){var n=Hr;Hr=[],ks(n)}function It(n){if(Hr.length===0&&!gn){var e=Hr;queueMicrotask(()=>{e===Hr&&Ql()})}Hr.push(n)}function Yi(){for(;Hr.length>0;)Ql()}function $l(n){var e=Ke;if(e===null)return Ge.f|=Tr,n;if((e.f&Qn)===0){if((e.f&Es)===0)throw n;e.b.error(n)}else mn(n,e)}function mn(n,e){for(;e!==null;){if((e.f&Es)!==0)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n}const Wi=-7169;function it(n,e){n.f=n.f&Wi|e}function Cs(n){(n.f&Yt)!==0||n.deps===null?it(n,vt):it(n,Jt)}function eo(n){if(n!==null)for(const e of n)(e.f&yt)===0||(e.f&Yr)===0||(e.f^=Yr,eo(e.deps))}function to(n,e,t){(n.f&xt)!==0?e.add(n):(n.f&Jt)!==0&&t.add(n),eo(n.deps),it(n,vt)}const es=new Set;let $e=null,Ns=null,Zt=null,Lt=[],ts=null,Ps=!1,gn=!1;class _r{committed=!1;current=new Map;previous=new Map;#e=new Set;#n=new Set;#t=0;#s=0;#a=null;#l=new Set;#r=new Set;#o=new Map;is_fork=!1;#i=!1;is_deferred(){return this.is_fork||this.#s>0}skip_effect(e){this.#o.has(e)||this.#o.set(e,{d:[],m:[]})}unskip_effect(e){var t=this.#o.get(e);if(t){this.#o.delete(e);for(var s of t.d)it(s,xt),Qt(s);for(s of t.m)it(s,Jt),Qt(s)}}process(e){Lt=[],this.apply();var t=[],s=[];for(const l of e)this.#c(l,t,s);if(this.is_deferred()){this.#u(s),this.#u(t);for(const[l,o]of this.#o)ao(l,o)}else{for(const l of this.#e)l();this.#e.clear(),this.#t===0&&this.#f(),Ns=this,$e=null,so(s),so(t),Ns=null,this.#a?.resolve()}Zt=null}#c(e,t,s){e.f^=vt;for(var l=e.first,o=null;l!==null;){var a=l.f,c=(a&(Kt|Dr))!==0,u=c&&(a&vt)!==0,f=u||(a&zt)!==0||this.#o.has(l);if(!f&&l.fn!==null){c?l.f^=vt:o!==null&&(a&(Zn|Sn|Bl))!==0?o.b.defer_effect(l):(a&Zn)!==0?t.push(l):Pn(l)&&((a&lr)!==0&&this.#r.add(l),Tn(l));var d=l.first;if(d!==null){l=d;continue}}var v=l.parent;for(l=l.next;l===null&&v!==null;)v===o&&(o=null),l=v.next,v=v.parent}}#u(e){for(var t=0;t<e.length;t+=1)to(e[t],this.#l,this.#r)}capture(e,t){t!==ht&&!this.previous.has(e)&&this.previous.set(e,t),(e.f&Tr)===0&&(this.current.set(e,e.v),Zt?.set(e,e.v))}activate(){$e=this,this.apply()}deactivate(){$e===this&&($e=null,Zt=null)}flush(){if(this.activate(),Lt.length>0){if(no(),$e!==null&&$e!==this)return}else this.#t===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#n)e(this);this.#n.clear()}#f(){if(es.size>1){this.previous.clear();var e=Zt,t=!0;for(const l of es){if(l===this){t=!1;continue}const o=[];for(const[c,u]of this.current){if(l.current.has(c))if(t&&u!==l.current.get(c))l.current.set(c,u);else continue;o.push(c)}if(o.length===0)continue;const a=[...l.current.keys()].filter(c=>!this.current.has(c));if(a.length>0){var s=Lt;Lt=[];const c=new Set,u=new Map;for(const f of o)lo(f,a,c,u);if(Lt.length>0){$e=l,l.apply();for(const f of Lt)l.#c(f,[],[]);l.deactivate()}Lt=s}}$e=null,Zt=e}this.committed=!0,es.delete(this)}increment(e){this.#t+=1,e&&(this.#s+=1)}decrement(e){this.#t-=1,e&&(this.#s-=1),!this.#i&&(this.#i=!0,It(()=>{this.#i=!1,this.is_deferred()?Lt.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#l)this.#r.delete(e),it(e,xt),Qt(e);for(const e of this.#r)it(e,Jt),Qt(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#n.add(e)}settled(){return(this.#a??=Vl()).promise}static ensure(){if($e===null){const e=$e=new _r;es.add($e),gn||It(()=>{$e===e&&e.flush()})}return $e}apply(){}}function ro(n){var e=gn;gn=!0;try{for(var t;;){if(Yi(),Lt.length===0&&($e?.flush(),Lt.length===0))return ts=null,t;no()}}finally{gn=e}}function no(){Ps=!0;var n=null;try{for(var e=0;Lt.length>0;){var t=_r.ensure();if(e++>1e3){var s,l;Hi()}t.process(Lt),jr.clear()}}finally{Lt=[],Ps=!1,ts=null}}function Hi(){try{mi()}catch(n){mn(n,ts)}}let wr=null;function so(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var s=n[t++];if((s.f&(gr|zt))===0&&Pn(s)&&(wr=new Set,Tn(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Ao(s):s.fn=null),wr?.size>0)){jr.clear();for(const l of wr){if((l.f&(gr|zt))!==0)continue;const o=[l];let a=l.parent;for(;a!==null;)wr.has(a)&&(wr.delete(a),o.push(a)),a=a.parent;for(let c=o.length-1;c>=0;c--){const u=o[c];(u.f&(gr|zt))===0&&Tn(u)}}wr.clear()}}wr=null}}function lo(n,e,t,s){if(!t.has(n)&&(t.add(n),n.reactions!==null))for(const l of n.reactions){const o=l.f;(o&yt)!==0?lo(l,e,t,s):(o&(As|lr))!==0&&(o&xt)===0&&oo(l,e,s)&&(it(l,xt),Qt(l))}}function oo(n,e,t){const s=t.get(n);if(s!==void 0)return s;if(n.deps!==null)for(const l of n.deps){if(cn.call(e,l))return!0;if((l.f&yt)!==0&&oo(l,e,t))return t.set(l,!0),!0}return t.set(n,!1),!1}function Qt(n){for(var e=ts=n;e.parent!==null;){e=e.parent;var t=e.f;if(Ps&&e===Ke&&(t&lr)!==0&&(t&Yl)===0)return;if((t&(Dr|Kt))!==0){if((t&vt)===0)return;e.f^=vt}}Lt.push(e)}function ao(n,e){if(!((n.f&Kt)!==0&&(n.f&vt)!==0)){(n.f&xt)!==0?e.d.push(n):(n.f&Jt)!==0&&e.m.push(n),it(n,vt);for(var t=n.first;t!==null;)ao(t,e),t=t.next}}function Ui(n){let e=0,t=yr(0),s;return()=>{Fs()&&(r(t),ns(()=>(e===0&&(s=er(()=>n(()=>Cn(t)))),e+=1,()=>{It(()=>{e-=1,e===0&&(s?.(),s=void 0,Cn(t))})})))}}var Gi=pr|fn|Es;function Xi(n,e,t){new Ki(n,e,t)}class Ki{parent;is_pending=!1;#e;#n=null;#t;#s;#a;#l=null;#r=null;#o=null;#i=null;#c=null;#u=0;#f=0;#h=!1;#v=!1;#m=new Set;#g=new Set;#d=null;#y=Ui(()=>(this.#d=yr(this.#u),()=>{this.#d=null}));constructor(e,t,s){this.#e=e,this.#t=t,this.#s=s,this.parent=Ke.b,this.is_pending=!!this.#t.pending,this.#a=Ur(()=>{Ke.b=this;{var l=this.#_();try{this.#l=Wt(()=>s(l))}catch(o){this.error(o)}this.#f>0?this.#b():this.is_pending=!1}return()=>{this.#c?.remove()}},Gi)}#x(){try{this.#l=Wt(()=>this.#s(this.#e))}catch(e){this.error(e)}}#k(){const e=this.#t.pending;e&&(this.#r=Wt(()=>e(this.#e)),It(()=>{var t=this.#_();this.#l=this.#p(()=>(_r.ensure(),Wt(()=>this.#s(t)))),this.#f>0?this.#b():(Gr(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#_(){var e=this.#e;return this.is_pending&&(this.#c=kr(),this.#e.before(this.#c),e=this.#c),e}defer_effect(e){to(e,this.#m,this.#g)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#t.pending}#p(e){var t=Ke,s=Ge,l=nt;ir(this.#a),Ht(this.#a),hn(this.#a.ctx);try{return e()}catch(o){return $l(o),null}finally{ir(t),Ht(s),hn(l)}}#b(){const e=this.#t.pending;this.#l!==null&&(this.#i=document.createDocumentFragment(),this.#i.append(this.#c),Po(this.#l,this.#i)),this.#r===null&&(this.#r=Wt(()=>e(this.#e)))}#w(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(e);return}if(this.#f+=e,this.#f===0){this.is_pending=!1;for(const t of this.#m)it(t,xt),Qt(t);for(const t of this.#g)it(t,Jt),Qt(t);this.#m.clear(),this.#g.clear(),this.#r&&Gr(this.#r,()=>{this.#r=null}),this.#i&&(this.#e.before(this.#i),this.#i=null)}}update_pending_count(e){this.#w(e),this.#u+=e,!(!this.#d||this.#h)&&(this.#h=!0,It(()=>{this.#h=!1,this.#d&&xr(this.#d,this.#u)}))}get_effect_pending(){return this.#y(),r(this.#d)}error(e){var t=this.#t.onerror;let s=this.#t.failed;if(this.#v||!t&&!s)throw e;this.#l&&(Mt(this.#l),this.#l=null),this.#r&&(Mt(this.#r),this.#r=null),this.#o&&(Mt(this.#o),this.#o=null);var l=!1,o=!1;const a=()=>{if(l){Fi();return}l=!0,o&&wi(),_r.ensure(),this.#u=0,this.#o!==null&&Gr(this.#o,()=>{this.#o=null}),this.is_pending=this.has_pending_snippet(),this.#l=this.#p(()=>(this.#v=!1,Wt(()=>this.#s(this.#e)))),this.#f>0?this.#b():this.is_pending=!1};It(()=>{try{o=!0,t?.(e,a),o=!1}catch(c){mn(c,this.#a&&this.#a.parent)}s&&(this.#o=this.#p(()=>{_r.ensure(),this.#v=!0;try{return Wt(()=>{s(this.#e,()=>e,()=>a)})}catch(c){return mn(c,this.#a.parent),null}finally{this.#v=!1}}))})}}function Ji(n,e,t,s){const l=Wr()?An:Ts;var o=n.filter(h=>!h.settled);if(t.length===0&&o.length===0){s(e.map(l));return}var a=$e,c=Ke,u=io(),f=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(h=>h.promise)):null;function d(h){u();try{s(h)}catch(m){(c.f&gr)===0&&mn(m,c)}a?.deactivate(),rs()}if(t.length===0){f.then(()=>d(e.map(l)));return}function v(){u(),Promise.all(t.map(h=>Zi(h))).then(h=>d([...e.map(l),...h])).catch(h=>mn(h,c))}f?f.then(v):v()}function io(){var n=Ke,e=Ge,t=nt,s=$e;return function(o=!0){ir(n),Ht(e),hn(t),o&&s?.activate()}}function rs(){ir(null),Ht(null),hn(null)}function An(n){var e=yt|xt,t=Ge!==null&&(Ge.f&yt)!==0?Ge:null;return Ke!==null&&(Ke.f|=fn),{ctx:nt,deps:null,effects:null,equals:Kl,f:e,fn:n,reactions:null,rv:0,v:ht,wv:0,parent:t??Ke,ac:null}}function Zi(n,e,t){let s=Ke;s===null&&ui();var l=s.b,o=void 0,a=yr(ht),c=!Ge,u=new Map;return ac(()=>{var f=Vl();o=f.promise;try{Promise.resolve(n()).then(f.resolve,f.reject).then(()=>{d===$e&&d.committed&&d.deactivate(),rs()})}catch(m){f.reject(m),rs()}var d=$e;if(c){var v=l.is_rendered();l.update_pending_count(1),d.increment(v),u.get(d)?.reject(dn),u.delete(d),u.set(d,f)}const h=(m,b=void 0)=>{if(d.activate(),b)b!==dn&&(a.f|=Tr,xr(a,b));else{(a.f&Tr)!==0&&(a.f^=Tr),xr(a,m);for(const[g,_]of u){if(u.delete(g),g===d)break;_.reject(dn)}}c&&(l.update_pending_count(-1),d.decrement(v))};f.promise.then(h,m=>h(null,m||"unknown"))}),qs(()=>{for(const f of u.values())f.reject(dn)}),new Promise(f=>{function d(v){function h(){v===o?f(a):d(o)}v.then(h,h)}d(o)})}function p(n){const e=An(n);return jo(e),e}function Ts(n){const e=An(n);return e.equals=Jl,e}function co(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Mt(e[t])}}function Qi(n){for(var e=n.parent;e!==null;){if((e.f&yt)===0)return(e.f&gr)===0?e:null;e=e.parent}return null}function js(n){var e,t=Ke;ir(Qi(n));try{n.f&=~Yr,co(n),e=qo(n)}finally{ir(t)}return e}function uo(n){var e=js(n);if(!n.equals(e)&&(n.wv=Ro(),(!$e?.is_fork||n.deps===null)&&(n.v=e,n.deps===null))){it(n,vt);return}Lr||(Zt!==null?(Fs()||$e?.is_fork)&&Zt.set(n,e):Cs(n))}let Ls=new Set;const jr=new Map;let fo=!1;function yr(n,e){var t={f:0,v:n,reactions:null,equals:Kl,rv:0,wv:0};return t}function te(n,e){const t=yr(n);return jo(t),t}function Ms(n,e=!1,t=!0){const s=yr(n);return e||(s.equals=Jl),vn&&t&&nt!==null&&nt.l!==null&&(nt.l.s??=[]).push(s),s}function F(n,e,t=!1){Ge!==null&&(!$t||(Ge.f&Dl)!==0)&&Wr()&&(Ge.f&(yt|lr|As|Dl))!==0&&(Ut===null||!cn.call(Ut,n))&&_i();let s=t?Re(e):e;return xr(n,s)}function xr(n,e){if(!n.equals(e)){var t=n.v;Lr?jr.set(n,e):jr.set(n,t),n.v=e;var s=_r.ensure();if(s.capture(n,t),(n.f&yt)!==0){const l=n;(n.f&xt)!==0&&js(l),Cs(l)}n.wv=Ro(),vo(n,xt),Wr()&&Ke!==null&&(Ke.f&vt)!==0&&(Ke.f&(Kt|Dr))===0&&(Gt===null?cc([n]):Gt.push(n)),!s.is_fork&&Ls.size>0&&!fo&&$i()}return e}function $i(){fo=!1;for(const n of Ls)(n.f&vt)!==0&&it(n,Jt),Pn(n)&&Tn(n);Ls.clear()}function Cn(n){F(n,n.v+1)}function vo(n,e){var t=n.reactions;if(t!==null)for(var s=Wr(),l=t.length,o=0;o<l;o++){var a=t[o],c=a.f;if(!(!s&&a===Ke)){var u=(c&xt)===0;if(u&&it(a,e),(c&yt)!==0){var f=a;Zt?.delete(f),(c&Yr)===0&&(c&Yt&&(a.f|=Yr),vo(f,Jt))}else u&&((c&lr)!==0&&wr!==null&&wr.add(a),Qt(a))}}}function Re(n){if(typeof n!="object"||n===null||or in n)return n;const e=Jn(n);if(e!==Il&&e!==li)return n;var t=new Map,s=xs(n),l=te(0),o=Kr,a=c=>{if(Kr===o)return c();var u=Ge,f=Kr;Ht(null),Mo(o);var d=c();return Ht(u),Mo(f),d};return s&&t.set("length",te(n.length)),new Proxy(n,{defineProperty(c,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&pi();var d=t.get(u);return d===void 0?d=a(()=>{var v=te(f.value);return t.set(u,v),v}):F(d,f.value,!0),!0},deleteProperty(c,u){var f=t.get(u);if(f===void 0){if(u in c){const d=a(()=>te(ht));t.set(u,d),Cn(l)}}else F(f,ht),Cn(l);return!0},get(c,u,f){if(u===or)return n;var d=t.get(u),v=u in c;if(d===void 0&&(!v||Pr(c,u)?.writable)&&(d=a(()=>{var m=Re(v?c[u]:ht),b=te(m);return b}),t.set(u,d)),d!==void 0){var h=r(d);return h===ht?void 0:h}return Reflect.get(c,u,f)},getOwnPropertyDescriptor(c,u){var f=Reflect.getOwnPropertyDescriptor(c,u);if(f&&"value"in f){var d=t.get(u);d&&(f.value=r(d))}else if(f===void 0){var v=t.get(u),h=v?.v;if(v!==void 0&&h!==ht)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return f},has(c,u){if(u===or)return!0;var f=t.get(u),d=f!==void 0&&f.v!==ht||Reflect.has(c,u);if(f!==void 0||Ke!==null&&(!d||Pr(c,u)?.writable)){f===void 0&&(f=a(()=>{var h=d?Re(c[u]):ht,m=te(h);return m}),t.set(u,f));var v=r(f);if(v===ht)return!1}return d},set(c,u,f,d){var v=t.get(u),h=u in c;if(s&&u==="length")for(var m=f;m<v.v;m+=1){var b=t.get(m+"");b!==void 0?F(b,ht):m in c&&(b=a(()=>te(ht)),t.set(m+"",b))}if(v===void 0)(!h||Pr(c,u)?.writable)&&(v=a(()=>te(void 0)),F(v,Re(f)),t.set(u,v));else{h=v.v!==ht;var g=a(()=>Re(f));F(v,g)}var _=Reflect.getOwnPropertyDescriptor(c,u);if(_?.set&&_.set.call(d,f),!h){if(s&&typeof u=="string"){var w=t.get("length"),A=Number(u);Number.isInteger(A)&&A>=w.v&&F(w,A+1)}Cn(l)}return!0},ownKeys(c){r(l);var u=Reflect.ownKeys(c).filter(v=>{var h=t.get(v);return h===void 0||h.v!==ht});for(var[f,d]of t)d.v!==ht&&!(f in c)&&u.push(f);return u},setPrototypeOf(){bi()}})}function ho(n){try{if(n!==null&&typeof n=="object"&&or in n)return n[or]}catch{}return n}function ec(n,e){return Object.is(ho(n),ho(e))}var Rs,mo,go,po;function tc(){if(Rs===void 0){Rs=window,mo=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;go=Pr(e,"firstChild").get,po=Pr(e,"nextSibling").get,Ol(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Ol(t)&&(t.__t=void 0)}}function kr(n=""){return document.createTextNode(n)}function Ot(n){return go.call(n)}function Nn(n){return po.call(n)}function H(n,e){return Ot(n)}function Z(n,e=!1){{var t=Ot(n);return t instanceof Comment&&t.data===""?Nn(t):t}}function R(n,e=1,t=!1){let s=n;for(;e--;)s=Nn(s);return s}function rc(n){n.textContent=""}function bo(){return!1}let _o=!1;function nc(){_o||(_o=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function pn(n){var e=Ge,t=Ke;Ht(null),ir(null);try{return n()}finally{Ht(e),ir(t)}}function wo(n,e,t,s=t){n.addEventListener(e,()=>pn(t));const l=n.__on_r;l?n.__on_r=()=>{l(),s(!0)}:n.__on_r=()=>s(!0),nc()}function yo(n){Ke===null&&(Ge===null&&hi(),vi()),Lr&&di()}function sc(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function ar(n,e,t){var s=Ke;s!==null&&(s.f&zt)!==0&&(n|=zt);var l={ctx:nt,deps:null,nodes:null,f:n|xt|Yt,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{Tn(l),l.f|=Qn}catch(c){throw Mt(l),c}else e!==null&&Qt(l);var o=l;if(t&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&fn)===0&&(o=o.first,(n&lr)!==0&&(n&pr)!==0&&o!==null&&(o.f|=pr)),o!==null&&(o.parent=s,s!==null&&sc(o,s),Ge!==null&&(Ge.f&yt)!==0&&(n&Dr)===0)){var a=Ge;(a.effects??=[]).push(o)}return l}function Fs(){return Ge!==null&&!$t}function qs(n){const e=ar(Sn,null,!1);return it(e,vt),e.teardown=n,e}function ge(n){yo();var e=Ke.f,t=!Ge&&(e&Kt)!==0&&(e&Qn)===0;if(t){var s=nt;(s.e??=[]).push(n)}else return xo(n)}function xo(n){return ar(Zn|Wl,n,!1)}function lc(n){return yo(),ar(Sn|Wl,n,!0)}function oc(n){_r.ensure();const e=ar(Dr|fn,n,!0);return(t={})=>new Promise(s=>{t.outro?Gr(e,()=>{Mt(e),s(void 0)}):(Mt(e),s(void 0))})}function zs(n){return ar(Zn,n,!1)}function ac(n){return ar(As|fn,n,!0)}function ns(n,e=0){return ar(Sn|e,n,!0)}function ae(n,e=[],t=[],s=[]){Ji(s,e,t,l=>{ar(Sn,()=>n(...l.map(r)),!0)})}function Ur(n,e=0){var t=ar(lr|e,n,!0);return t}function Wt(n){return ar(Kt|fn,n,!0)}function ko(n){var e=n.teardown;if(e!==null){const t=Lr,s=Ge;To(!0),Ht(null);try{e.call(null)}finally{To(t),Ht(s)}}}function Eo(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const l=t.ac;l!==null&&pn(()=>{l.abort(dn)});var s=t.next;(t.f&Dr)!==0?t.parent=null:Mt(t,e),t=s}}function ic(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&Kt)===0&&Mt(e),e=t}}function Mt(n,e=!0){var t=!1;(e||(n.f&Yl)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(So(n.nodes.start,n.nodes.end),t=!0),Eo(n,e&&!t),ls(n,0),it(n,gr);var s=n.nodes&&n.nodes.t;if(s!==null)for(const o of s)o.stop();ko(n);var l=n.parent;l!==null&&l.first!==null&&Ao(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function So(n,e){for(;n!==null;){var t=n===e?null:Nn(n);n.remove(),n=t}}function Ao(n){var e=n.parent,t=n.prev,s=n.next;t!==null&&(t.next=s),s!==null&&(s.prev=t),e!==null&&(e.first===n&&(e.first=s),e.last===n&&(e.last=t))}function Gr(n,e,t=!0){var s=[];Co(n,s,!0);var l=()=>{t&&Mt(n),e&&e()},o=s.length;if(o>0){var a=()=>--o||l();for(var c of s)c.out(a)}else l()}function Co(n,e,t){if((n.f&zt)===0){n.f^=zt;var s=n.nodes&&n.nodes.t;if(s!==null)for(const c of s)(c.is_global||t)&&e.push(c);for(var l=n.first;l!==null;){var o=l.next,a=(l.f&pr)!==0||(l.f&Kt)!==0&&(n.f&lr)!==0;Co(l,e,a?t:!1),l=o}}}function Is(n){No(n,!0)}function No(n,e){if((n.f&zt)!==0){n.f^=zt,(n.f&vt)===0&&(it(n,xt),Qt(n));for(var t=n.first;t!==null;){var s=t.next,l=(t.f&pr)!==0||(t.f&Kt)!==0;No(t,l?e:!1),t=s}var o=n.nodes&&n.nodes.t;if(o!==null)for(const a of o)(a.is_global||e)&&a.in()}}function Po(n,e){if(n.nodes)for(var t=n.nodes.start,s=n.nodes.end;t!==null;){var l=t===s?null:Nn(t);e.append(t),t=l}}let ss=!1,Lr=!1;function To(n){Lr=n}let Ge=null,$t=!1;function Ht(n){Ge=n}let Ke=null;function ir(n){Ke=n}let Ut=null;function jo(n){Ge!==null&&(Ut===null?Ut=[n]:Ut.push(n))}let Rt=null,Vt=0,Gt=null;function cc(n){Gt=n}let Lo=1,Xr=0,Kr=Xr;function Mo(n){Kr=n}function Ro(){return++Lo}function Pn(n){var e=n.f;if((e&xt)!==0)return!0;if(e&yt&&(n.f&=~Yr),(e&Jt)!==0){for(var t=n.deps,s=t.length,l=0;l<s;l++){var o=t[l];if(Pn(o)&&uo(o),o.wv>n.wv)return!0}(e&Yt)!==0&&Zt===null&&it(n,vt)}return!1}function Fo(n,e,t=!0){var s=n.reactions;if(s!==null&&!(Ut!==null&&cn.call(Ut,n)))for(var l=0;l<s.length;l++){var o=s[l];(o.f&yt)!==0?Fo(o,e,!1):e===o&&(t?it(o,xt):(o.f&vt)!==0&&it(o,Jt),Qt(o))}}function qo(n){var e=Rt,t=Vt,s=Gt,l=Ge,o=Ut,a=nt,c=$t,u=Kr,f=n.f;Rt=null,Vt=0,Gt=null,Ge=(f&(Kt|Dr))===0?n:null,Ut=null,hn(n.ctx),$t=!1,Kr=++Xr,n.ac!==null&&(pn(()=>{n.ac.abort(dn)}),n.ac=null);try{n.f|=Ss;var d=n.fn,v=d(),h=n.deps,m=$e?.is_fork;if(Rt!==null){var b;if(m||ls(n,Vt),h!==null&&Vt>0)for(h.length=Vt+Rt.length,b=0;b<Rt.length;b++)h[Vt+b]=Rt[b];else n.deps=h=Rt;if(Fs()&&(n.f&Yt)!==0)for(b=Vt;b<h.length;b++)(h[b].reactions??=[]).push(n)}else!m&&h!==null&&Vt<h.length&&(ls(n,Vt),h.length=Vt);if(Wr()&&Gt!==null&&!$t&&h!==null&&(n.f&(yt|Jt|xt))===0)for(b=0;b<Gt.length;b++)Fo(Gt[b],n);if(l!==null&&l!==n){if(Xr++,l.deps!==null)for(let g=0;g<t;g+=1)l.deps[g].rv=Xr;if(e!==null)for(const g of e)g.rv=Xr;Gt!==null&&(s===null?s=Gt:s.push(...Gt))}return(n.f&Tr)!==0&&(n.f^=Tr),v}catch(g){return $l(g)}finally{n.f^=Ss,Rt=e,Vt=t,Gt=s,Ge=l,Ut=o,hn(a),$t=c,Kr=u}}function uc(n,e){let t=e.reactions;if(t!==null){var s=ni.call(t,n);if(s!==-1){var l=t.length-1;l===0?t=e.reactions=null:(t[s]=t[l],t.pop())}}if(t===null&&(e.f&yt)!==0&&(Rt===null||!cn.call(Rt,e))){var o=e;(o.f&Yt)!==0&&(o.f^=Yt,o.f&=~Yr),Cs(o),co(o),ls(o,0)}}function ls(n,e){var t=n.deps;if(t!==null)for(var s=e;s<t.length;s++)uc(n,t[s])}function Tn(n){var e=n.f;if((e&gr)===0){it(n,vt);var t=Ke,s=ss;Ke=n,ss=!0;try{(e&(lr|Bl))!==0?ic(n):Eo(n),ko(n);var l=qo(n);n.teardown=typeof l=="function"?l:null,n.wv=Lo;var o;ys&&zi&&(n.f&xt)!==0&&n.deps}finally{ss=s,Ke=t}}}async function fc(){await Promise.resolve(),ro()}function r(n){var e=n.f,t=(e&yt)!==0;if(Ge!==null&&!$t){var s=Ke!==null&&(Ke.f&gr)!==0;if(!s&&(Ut===null||!cn.call(Ut,n))){var l=Ge.deps;if((Ge.f&Ss)!==0)n.rv<Xr&&(n.rv=Xr,Rt===null&&l!==null&&l[Vt]===n?Vt++:Rt===null?Rt=[n]:Rt.push(n));else{(Ge.deps??=[]).push(n);var o=n.reactions;o===null?n.reactions=[Ge]:cn.call(o,Ge)||o.push(Ge)}}}if(Lr&&jr.has(n))return jr.get(n);if(t){var a=n;if(Lr){var c=a.v;return((a.f&vt)===0&&a.reactions!==null||Io(a))&&(c=js(a)),jr.set(a,c),c}var u=(a.f&Yt)===0&&!$t&&Ge!==null&&(ss||(Ge.f&Yt)!==0),f=a.deps===null;Pn(a)&&(u&&(a.f|=Yt),uo(a)),u&&!f&&zo(a)}if(Zt?.has(n))return Zt.get(n);if((n.f&Tr)!==0)throw n.v;return n.v}function zo(n){if(n.deps!==null){n.f|=Yt;for(const e of n.deps)(e.reactions??=[]).push(n),(e.f&yt)!==0&&(e.f&Yt)===0&&zo(e)}}function Io(n){if(n.v===ht)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(jr.has(e)||(e.f&yt)!==0&&Io(e))return!0;return!1}function er(n){var e=$t;try{return $t=!0,n()}finally{$t=e}}function dc(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(or in n)Os(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&or in t&&Os(t)}}}function Os(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let s in n)try{Os(n[s],e)}catch{}const t=Jn(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const s=zl(t);for(let l in s){const o=s[l].get;if(o)try{o.call(n)}catch{}}}}}const vc=["touchstart","touchmove"];function hc(n){return vc.includes(n)}const Oo=new Set,Vs=new Set;function mc(n,e,t,s={}){function l(o){if(s.capture||jn.call(e,o),!o.cancelBubble)return pn(()=>t?.call(this,o))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?It(()=>{e.addEventListener(n,l,s)}):e.addEventListener(n,l,s),l}function Jr(n,e,t,s,l){var o={capture:s,passive:l},a=mc(n,e,t,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&qs(()=>{e.removeEventListener(n,a,o)})}function lt(n){for(var e=0;e<n.length;e++)Oo.add(n[e]);for(var t of Vs)t(n)}let Vo=null;function jn(n){var e=this,t=e.ownerDocument,s=n.type,l=n.composedPath?.()||[],o=l[0]||n.target;Vo=n;var a=0,c=Vo===n&&n.__root;if(c){var u=l.indexOf(c);if(u!==-1&&(e===document||e===window)){n.__root=e;return}var f=l.indexOf(e);if(f===-1)return;u<=f&&(a=u)}if(o=l[a]||n.target,o!==e){si(n,"currentTarget",{configurable:!0,get(){return o||t}});var d=Ge,v=Ke;Ht(null),ir(null);try{for(var h,m=[];o!==null;){var b=o.assignedSlot||o.parentNode||o.host||null;try{var g=o["__"+s];g!=null&&(!o.disabled||n.target===o)&&g.call(o,n)}catch(_){h?m.push(_):h=_}if(n.cancelBubble||b===e||b===null)break;o=b}if(h){for(let _ of m)queueMicrotask(()=>{throw _});throw h}}finally{n.__root=e,delete n.currentTarget,Ht(d),ir(v)}}}function Bs(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function Zr(n,e){var t=Ke;t.nodes===null&&(t.nodes={start:n,end:e,a:null,t:null})}function G(n,e){var t=(e&Xl)!==0,s=(e&Mi)!==0,l,o=!n.startsWith("<!>");return()=>{l===void 0&&(l=Bs(o?n:"<!>"+n),t||(l=Ot(l)));var a=s||mo?document.importNode(l,!0):l.cloneNode(!0);if(t){var c=Ot(a),u=a.lastChild;Zr(c,u)}else Zr(a,a);return a}}function gc(n,e,t="svg"){var s=!n.startsWith("<!>"),l=(e&Xl)!==0,o=`<${t}>${s?n:"<!>"+n}</${t}>`,a;return()=>{if(!a){var c=Bs(o),u=Ot(c);if(l)for(a=document.createDocumentFragment();Ot(u);)a.appendChild(Ot(u));else a=Ot(u)}var f=a.cloneNode(!0);if(l){var d=Ot(f),v=f.lastChild;Zr(d,v)}else Zr(f,f);return f}}function Se(n,e){return gc(n,e,"svg")}function pc(n=""){{var e=kr(n+"");return Zr(e,e),e}}function ve(){var n=document.createDocumentFragment(),e=document.createComment(""),t=kr();return n.append(e,t),Zr(e,t),n}function N(n,e){n!==null&&n.before(e)}let Ds=!0;function Ee(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??=n.nodeValue)&&(n.__t=t,n.nodeValue=t+"")}function bc(n,e){return _c(n,e)}const bn=new Map;function _c(n,{target:e,anchor:t,props:s={},events:l,context:o,intro:a=!0}){tc();var c=new Set,u=v=>{for(var h=0;h<v.length;h++){var m=v[h];if(!c.has(m)){c.add(m);var b=hc(m);e.addEventListener(m,jn,{passive:b});var g=bn.get(m);g===void 0?(document.addEventListener(m,jn,{passive:b}),bn.set(m,1)):bn.set(m,g+1)}}};u(Kn(Oo)),Vs.add(u);var f=void 0,d=oc(()=>{var v=t??e.appendChild(kr());return Xi(v,{pending:()=>{}},h=>{we({});var m=nt;o&&(m.c=o),l&&(s.$$events=l),Ds=a,f=n(h,s)||{},Ds=!0,ye()}),()=>{for(var h of c){e.removeEventListener(h,jn);var m=bn.get(h);--m===0?(document.removeEventListener(h,jn),bn.delete(h)):bn.set(h,m)}Vs.delete(u),v!==t&&v.parentNode?.removeChild(v)}});return wc.set(f,d),f}let wc=new WeakMap;class Ln{anchor;#e=new Map;#n=new Map;#t=new Map;#s=new Set;#a=!0;constructor(e,t=!0){this.anchor=e,this.#a=t}#l=()=>{var e=$e;if(this.#e.has(e)){var t=this.#e.get(e),s=this.#n.get(t);if(s)Is(s),this.#s.delete(t);else{var l=this.#t.get(t);l&&(this.#n.set(t,l.effect),this.#t.delete(t),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[o,a]of this.#e){if(this.#e.delete(o),o===e)break;const c=this.#t.get(a);c&&(Mt(c.effect),this.#t.delete(a))}for(const[o,a]of this.#n){if(o===t||this.#s.has(o))continue;const c=()=>{if(Array.from(this.#e.values()).includes(o)){var f=document.createDocumentFragment();Po(a,f),f.append(kr()),this.#t.set(o,{effect:a,fragment:f})}else Mt(a);this.#s.delete(o),this.#n.delete(o)};this.#a||!s?(this.#s.add(o),Gr(a,c,!1)):c()}}};#r=e=>{this.#e.delete(e);const t=Array.from(this.#e.values());for(const[s,l]of this.#t)t.includes(s)||(Mt(l.effect),this.#t.delete(s))};ensure(e,t){var s=$e,l=bo();if(t&&!this.#n.has(e)&&!this.#t.has(e))if(l){var o=document.createDocumentFragment(),a=kr();o.append(a),this.#t.set(e,{effect:Wt(()=>t(a)),fragment:o})}else this.#n.set(e,Wt(()=>t(this.anchor)));if(this.#e.set(s,e),l){for(const[c,u]of this.#n)c===e?s.unskip_effect(u):s.skip_effect(u);for(const[c,u]of this.#t)c===e?s.unskip_effect(u.effect):s.skip_effect(u.effect);s.oncommit(this.#l),s.ondiscard(this.#r)}else this.#l()}}const yc=0,Ys=1;function Ws(n,e,t,s,l){var o=Wr(),a=ht,c=o?yr(a):Ms(a,!1,!1),u=o?yr(a):Ms(a,!1,!1),f=new Ln(n);Ur(()=>{var d=e(),v=!1;if(oi(d)){var h=io(),m=!1;const b=g=>{if(!v){m=!0,h(!1),_r.ensure();try{g()}finally{rs(),gn||ro()}}};d.then(g=>{b(()=>{xr(c,g),f.ensure(Ys,s&&(_=>s(_,c)))})},g=>{b(()=>{if(xr(u,g),f.ensure(Ys,l&&(_=>l(_,u))),!l)throw u.v})}),It(()=>{m||b(()=>{f.ensure(yc,t)})})}else xr(c,d),f.ensure(Ys,s);return()=>{v=!0}})}function Y(n,e,t=!1){var s=new Ln(n),l=t?pr:0;function o(a,c){s.ensure(a,c)}Ur(()=>{var a=!1;e((c,u=!0)=>{a=!0,o(u,c)}),a||o(!1,null)},l)}const xc=Symbol("NaN");function Qr(n,e,t){var s=new Ln(n),l=!Wr();Ur(()=>{var o=e();o!==o&&(o=xc),l&&o!==null&&typeof o=="object"&&(o={}),s.ensure(o,t)})}function We(n,e){return e}function kc(n,e,t){for(var s=[],l=e.length,o,a=e.length,c=0;c<l;c++){let v=e[c];Gr(v,()=>{if(o){if(o.pending.delete(v),o.done.add(v),o.pending.size===0){var h=n.outrogroups;Hs(Kn(o.done)),h.delete(o),h.size===0&&(n.outrogroups=null)}}else a-=1},!1)}if(a===0){var u=s.length===0&&t!==null;if(u){var f=t,d=f.parentNode;rc(d),d.append(f),n.items.clear()}Hs(e,!u)}else o={pending:new Set(e),done:new Set},(n.outrogroups??=new Set).add(o)}function Hs(n,e=!0){for(var t=0;t<n.length;t++)Mt(n[t],e)}var Bo;function Ve(n,e,t,s,l,o=null){var a=n,c=new Map,u=(e&Gl)!==0;if(u){var f=n;a=f.appendChild(kr())}var d=null,v=Ts(()=>{var w=t();return xs(w)?w:w==null?[]:Kn(w)}),h,m=!0;function b(){_.fallback=d,Ec(_,h,a,e,s),d!==null&&(h.length===0?(d.f&br)===0?Is(d):(d.f^=br,Rn(d,null,a)):Gr(d,()=>{d=null}))}var g=Ur(()=>{h=r(v);for(var w=h.length,A=new Set,k=$e,S=bo(),C=0;C<w;C+=1){var T=h[C],P=s(T,C),j=m?null:c.get(P);j?(j.v&&xr(j.v,T),j.i&&xr(j.i,C),S&&k.unskip_effect(j.e)):(j=Sc(c,m?a:Bo??=kr(),T,P,C,l,e,t),m||(j.e.f|=br),c.set(P,j)),A.add(P)}if(w===0&&o&&!d&&(m?d=Wt(()=>o(a)):(d=Wt(()=>o(Bo??=kr())),d.f|=br)),w>A.size&&fi(),!m)if(S){for(const[q,E]of c)A.has(q)||k.skip_effect(E.e);k.oncommit(b),k.ondiscard(()=>{})}else b();r(v)}),_={effect:g,items:c,outrogroups:null,fallback:d};m=!1}function Mn(n){for(;n!==null&&(n.f&Kt)===0;)n=n.next;return n}function Ec(n,e,t,s,l){var o=(s&ki)!==0,a=e.length,c=n.items,u=Mn(n.effect.first),f,d=null,v,h=[],m=[],b,g,_,w;if(o)for(w=0;w<a;w+=1)b=e[w],g=l(b,w),_=c.get(g).e,(_.f&br)===0&&(_.nodes?.a?.measure(),(v??=new Set).add(_));for(w=0;w<a;w+=1){if(b=e[w],g=l(b,w),_=c.get(g).e,n.outrogroups!==null)for(const E of n.outrogroups)E.pending.delete(_),E.done.delete(_);if((_.f&br)!==0)if(_.f^=br,_===u)Rn(_,null,t);else{var A=d?d.next:u;_===n.effect.last&&(n.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Mr(n,d,_),Mr(n,_,A),Rn(_,A,t),d=_,h=[],m=[],u=Mn(d.next);continue}if((_.f&zt)!==0&&(Is(_),o&&(_.nodes?.a?.unfix(),(v??=new Set).delete(_))),_!==u){if(f!==void 0&&f.has(_)){if(h.length<m.length){var k=m[0],S;d=k.prev;var C=h[0],T=h[h.length-1];for(S=0;S<h.length;S+=1)Rn(h[S],k,t);for(S=0;S<m.length;S+=1)f.delete(m[S]);Mr(n,C.prev,T.next),Mr(n,d,C),Mr(n,T,k),u=k,d=T,w-=1,h=[],m=[]}else f.delete(_),Rn(_,u,t),Mr(n,_.prev,_.next),Mr(n,_,d===null?n.effect.first:d.next),Mr(n,d,_),d=_;continue}for(h=[],m=[];u!==null&&u!==_;)(f??=new Set).add(u),m.push(u),u=Mn(u.next);if(u===null)continue}(_.f&br)===0&&h.push(_),d=_,u=Mn(_.next)}if(n.outrogroups!==null){for(const E of n.outrogroups)E.pending.size===0&&(Hs(Kn(E.done)),n.outrogroups?.delete(E));n.outrogroups.size===0&&(n.outrogroups=null)}if(u!==null||f!==void 0){var P=[];if(f!==void 0)for(_ of f)(_.f&zt)===0&&P.push(_);for(;u!==null;)(u.f&zt)===0&&u!==n.fallback&&P.push(u),u=Mn(u.next);var j=P.length;if(j>0){var q=(s&Gl)!==0&&a===0?t:null;if(o){for(w=0;w<j;w+=1)P[w].nodes?.a?.measure();for(w=0;w<j;w+=1)P[w].nodes?.a?.fix()}kc(n,P,q)}}o&&It(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function Sc(n,e,t,s,l,o,a,c){var u=(a&yi)!==0?(a&Ei)===0?Ms(t,!1,!1):yr(t):null,f=(a&xi)!==0?yr(l):null;return{v:u,i:f,e:Wt(()=>(o(e,u??t,f??l,c),()=>{n.delete(s)}))}}function Rn(n,e,t){if(n.nodes)for(var s=n.nodes.start,l=n.nodes.end,o=e&&(e.f&br)===0?e.nodes.start:t;s!==null;){var a=Nn(s);if(o.before(s),s===l)return;s=a}}function Mr(n,e,t){e===null?n.effect.first=t:e.next=t,t===null?n.effect.last=e:t.prev=e}function mt(n,e,t=!1,s=!1,l=!1){var o=n,a="";ae(()=>{var c=Ke;if(a!==(a=e()??"")&&(c.nodes!==null&&(So(c.nodes.start,c.nodes.end),c.nodes=null),a!=="")){var u=a+"";t?u=`<svg>${u}</svg>`:s&&(u=`<math>${u}</math>`);var f=Bs(u);if((t||s)&&(f=Ot(f)),Zr(Ot(f),f.lastChild),t||s)for(;Ot(f);)o.before(Ot(f));else o.before(f)}})}function Er(n,e,...t){var s=new Ln(n);Ur(()=>{const l=e()??null;s.ensure(l,l&&(o=>l(o,...t)))},pr)}function Fn(n,e,t){var s=new Ln(n);Ur(()=>{var l=e()??null;s.ensure(l,l&&(o=>t(o,l)))},pr)}const Ac=()=>performance.now(),Sr={tick:n=>requestAnimationFrame(n),now:()=>Ac(),tasks:new Set};function Do(){const n=Sr.now();Sr.tasks.forEach(e=>{e.c(n)||(Sr.tasks.delete(e),e.f())}),Sr.tasks.size!==0&&Sr.tick(Do)}function Cc(n){let e;return Sr.tasks.size===0&&Sr.tick(Do),{promise:new Promise(t=>{Sr.tasks.add(e={c:n,f:t})}),abort(){Sr.tasks.delete(e)}}}function os(n,e){pn(()=>{n.dispatchEvent(new CustomEvent(e))})}function Nc(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Yo(n){const e={},t=n.split(";");for(const s of t){const[l,o]=s.split(":");if(!l||o===void 0)break;const a=Nc(l.trim());e[a]=o.trim()}return e}const Pc=n=>n;function Wo(n,e,t,s){var l=(n&Ti)!==0,o=(n&ji)!==0,a=l&&o,c=(n&Li)!==0,u=a?"both":l?"in":"out",f,d=e.inert,v=e.style.overflow,h,m;function b(){return pn(()=>f??=t()(e,s?.()??{},{direction:u}))}var g={is_global:c,in(){if(e.inert=d,!l){m?.abort(),m?.reset?.();return}o||h?.abort(),h=Us(e,b(),m,1,()=>{os(e,"introend"),h?.abort(),h=f=void 0,e.style.overflow=v})},out(k){if(!o){k?.(),f=void 0;return}e.inert=!0,m=Us(e,b(),h,0,()=>{os(e,"outroend"),k?.()})},stop:()=>{h?.abort(),m?.abort()}},_=Ke;if((_.nodes.t??=[]).push(g),l&&Ds){var w=c;if(!w){for(var A=_.parent;A&&(A.f&pr)!==0;)for(;(A=A.parent)&&(A.f&lr)===0;);w=!A||(A.f&Qn)!==0}w&&zs(()=>{er(()=>g.in())})}}function Us(n,e,t,s,l){var o=s===1;if(un(e)){var a,c=!1;return It(()=>{if(!c){var _=e({direction:o?"in":"out"});a=Us(n,_,t,s,l)}}),{abort:()=>{c=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(t?.deactivate(),!e?.duration&&!e?.delay)return os(n,o?"introstart":"outrostart"),l(),{abort:wt,deactivate:wt,reset:wt,t:()=>s};const{delay:u=0,css:f,tick:d,easing:v=Pc}=e;var h=[];if(o&&t===void 0&&(d&&d(0,1),f)){var m=Yo(f(0,1));h.push(m,m)}var b=()=>1-s,g=n.animate(h,{duration:u,fill:"forwards"});return g.onfinish=()=>{g.cancel(),os(n,o?"introstart":"outrostart");var _=t?.t()??1-s;t?.abort();var w=s-_,A=e.duration*Math.abs(w),k=[];if(A>0){var S=!1;if(f)for(var C=Math.ceil(A/16.666666666666668),T=0;T<=C;T+=1){var P=_+w*v(T/C),j=Yo(f(P,1-P));k.push(j),S||=j.overflow==="hidden"}S&&(n.style.overflow="hidden"),b=()=>{var q=g.currentTime;return _+w*v(q/A)},d&&Cc(()=>{if(g.playState!=="running")return!1;var q=b();return d(q,1-q),!0})}g=n.animate(k,{duration:A,fill:"forwards"}),g.onfinish=()=>{b=()=>s,d?.(s,1-s),l()}},{abort:()=>{g&&(g.cancel(),g.effect=null,g.onfinish=wt)},deactivate:()=>{l=wt},reset:()=>{s===0&&d?.(1,0)},t:()=>b()}}function Ho(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var l=n.length;for(e=0;e<l;e++)n[e]&&(t=Ho(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Tc(){for(var n,e,t=0,s="",l=arguments.length;t<l;t++)(n=arguments[t])&&(e=Ho(n))&&(s&&(s+=" "),s+=e);return s}function jc(n){return typeof n=="object"?Tc(n):n??""}const Uo=[...`
\r\f \v\uFEFF`];function Lc(n,e,t){var s=n==null?"":""+n;if(e&&(s=s?s+" "+e:e),t){for(var l in t)if(t[l])s=s?s+" "+l:l;else if(s.length)for(var o=l.length,a=0;(a=s.indexOf(l,a))>=0;){var c=a+o;(a===0||Uo.includes(s[a-1]))&&(c===s.length||Uo.includes(s[c]))?s=(a===0?"":s.substring(0,a))+s.substring(c+1):a=c}}return s===""?null:s}function Mc(n,e){return n==null?null:String(n)}function ct(n,e,t,s,l,o){var a=n.__className;if(a!==t||a===void 0){var c=Lc(t,s,o);c==null?n.removeAttribute("class"):e?n.className=c:n.setAttribute("class",c),n.__className=t}else if(o&&l!==o)for(var u in o){var f=!!o[u];(l==null||f!==!!l[u])&&n.classList.toggle(u,f)}return o}function ot(n,e,t,s){var l=n.__style;if(l!==e){var o=Mc(e);o==null?n.removeAttribute("style"):n.style.cssText=o,n.__style=e}return s}const Rc=Symbol("is custom element"),Fc=Symbol("is html");function B(n,e,t,s){var l=qc(n);l[e]!==(l[e]=t)&&(e==="loading"&&(n[ci]=t),t==null?n.removeAttribute(e):typeof t!="string"&&zc(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function qc(n){return n.__attributes??={[Rc]:n.nodeName.includes("-"),[Fc]:n.namespaceURI===Ri}}var Go=new Map;function zc(n){var e=n.getAttribute("is")||n.nodeName,t=Go.get(e);if(t)return t;Go.set(e,t=[]);for(var s,l=n,o=Element.prototype;o!==l;){s=zl(l);for(var a in s)s[a].set&&t.push(a);l=Jn(l)}return t}function Gs(n,e,t=e){var s=new WeakSet;wo(n,"input",async l=>{var o=l?n.defaultValue:n.value;if(o=Ks(n)?Js(o):o,t(o),$e!==null&&s.add($e),await fc(),o!==(o=e())){var a=n.selectionStart,c=n.selectionEnd,u=n.value.length;if(n.value=o??"",c!==null){var f=n.value.length;a===c&&c===u&&f>u?(n.selectionStart=f,n.selectionEnd=f):(n.selectionStart=a,n.selectionEnd=Math.min(c,f))}}}),er(e)==null&&n.value&&(t(Ks(n)?Js(n.value):n.value),$e!==null&&s.add($e)),ns(()=>{var l=e();if(n===document.activeElement){var o=Ns??$e;if(s.has(o))return}Ks(n)&&l===Js(n.value)||n.type==="date"&&!l&&!n.value||l!==n.value&&(n.value=l??"")})}const Xs=new Set;function Ic(n,e,t,s,l=s){var o=t.getAttribute("type")==="checkbox",a=n;if(e!==null)for(var c of e)a=a[c]??=[];a.push(t),wo(t,"change",()=>{var u=t.__value;o&&(u=Oc(a,u,t.checked)),l(u)},()=>l(o?[]:null)),ns(()=>{var u=s();o?(u=u||[],t.checked=u.includes(t.__value)):t.checked=ec(t.__value,u)}),qs(()=>{var u=a.indexOf(t);u!==-1&&a.splice(u,1)}),Xs.has(a)||(Xs.add(a),It(()=>{a.sort((u,f)=>u.compareDocumentPosition(f)===4?-1:1),Xs.delete(a)})),It(()=>{})}function Oc(n,e,t){for(var s=new Set,l=0;l<n.length;l+=1)n[l].checked&&s.add(n[l].__value);return t||s.delete(e),Array.from(s)}function Ks(n){var e=n.type;return e==="number"||e==="range"}function Js(n){return n===""?null:+n}class Zs{#e=new WeakMap;#n;#t;static entries=new WeakMap;constructor(e){this.#t=e}observe(e,t){var s=this.#e.get(e)||new Set;return s.add(t),this.#e.set(e,s),this.#s().observe(e,this.#t),()=>{var l=this.#e.get(e);l.delete(t),l.size===0&&(this.#e.delete(e),this.#n.unobserve(e))}}#s(){return this.#n??(this.#n=new ResizeObserver(e=>{for(var t of e){Zs.entries.set(t.target,t);for(var s of this.#e.get(t.target)||[])s(t)}}))}}var Vc=new Zs({box:"border-box"});function Xo(n,e,t){var s=Vc.observe(n,()=>t(n[e]));zs(()=>(er(()=>t(n[e])),s))}function Ko(n,e){return n===e||n?.[or]===e}function $r(n={},e,t,s){return zs(()=>{var l,o;return ns(()=>{l=o,o=[],er(()=>{n!==t(...o)&&(e(n,...o),l&&Ko(t(...l),n)&&e(null,...l))})}),()=>{It(()=>{o&&Ko(t(...o),n)&&e(null,...o)})}}),n}function Bc(n=!1){const e=nt,t=e.l.u;if(!t)return;let s=()=>dc(e.s);if(n){let l=0,o={};const a=An(()=>{let c=!1;const u=e.s;for(const f in u)u[f]!==o[f]&&(o[f]=u[f],c=!0);return c&&l++,l});s=()=>r(a)}t.b.length&&lc(()=>{Jo(e,s),ks(t.b)}),ge(()=>{const l=er(()=>t.m.map(ai));return()=>{for(const o of l)typeof o=="function"&&o()}}),t.a.length&&ge(()=>{Jo(e,s),ks(t.a)})}function Jo(n,e){if(n.l.s)for(const t of n.l.s)r(t);e()}let as=!1;function Dc(n){var e=as;try{return as=!1,[n(),as]}finally{as=e}}const Yc={get(n,e){if(!n.exclude.includes(e))return n.props[e]},set(n,e){return!1},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function en(n,e,t){return new Proxy({props:n,exclude:e},Yc)}const Wc={get(n,e){let t=n.props.length;for(;t--;){let s=n.props[t];if(un(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(n,e,t){let s=n.props.length;for(;s--;){let l=n.props[s];un(l)&&(l=l());const o=Pr(l,e);if(o&&o.set)return o.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let s=n.props[t];if(un(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=Pr(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(n,e){if(e===or||e===Hl)return!1;for(let t of n.props)if(un(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(un(t)&&(t=t()),!!t){for(const s in t)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(t))e.includes(s)||e.push(s)}return e}};function Rr(...n){return new Proxy({props:n},Wc)}function V(n,e,t,s){var l=!vn||(t&Ai)!==0,o=(t&Ni)!==0,a=(t&Pi)!==0,c=s,u=!0,f=()=>(u&&(u=!1,c=a?er(s):s),c),d;if(o){var v=or in n||Hl in n;d=Pr(n,e)?.set??(v&&e in n?k=>n[e]=k:void 0)}var h,m=!1;o?[h,m]=Dc(()=>n[e]):h=n[e],h===void 0&&s!==void 0&&(h=f(),d&&(l&&gi(),d(h)));var b;if(l?b=()=>{var k=n[e];return k===void 0?f():(u=!0,k)}:b=()=>{var k=n[e];return k!==void 0&&(c=void 0),k===void 0?c:k},l&&(t&Ci)===0)return b;if(d){var g=n.$$legacy;return(function(k,S){return arguments.length>0?((!l||!S||g||m)&&d(S?b():k),k):b()})}var _=!1,w=((t&Si)!==0?An:Ts)(()=>(_=!1,b()));o&&r(w);var A=Ke;return(function(k,S){if(arguments.length>0){const C=S?r(w):l&&o?Re(k):k;return F(w,C),_=!0,c!==void 0&&(c=C),k}return Lr&&_||(A.f&gr)!==0?w.v:r(w)})}function Hc(n){nt===null&&Ul(),vn&&nt.l!==null?Uc(nt).m.push(n):ge(()=>{const e=er(n);if(typeof e=="function")return e})}function Uc(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}const Gc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Gc),Ii();function Qs(n){return qn(n,.5)}function Xc(n){return qn(n,.75)-qn(n,.25)}function qn(n,e){if(De(n))return qn(n.v,e);if(De(e))return qn(n,e.v);const t=n.length;if(Array.isArray(e)||(e=[e]),!ll(e[0])||Cr(e)<0||cr(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(a,c){const u=(t-1)*c+1,f=Math.floor(u),d=Math.ceil(u);return a[f-1]+(a[d-1]-a[f-1])*(u-Math.floor(u))}const l=cl(n),o=e.map(a=>s(l,a));return e.length==1?o[0]:Fe(o)}function $s(n,e){De(n)&&$s(n.v,e);const t=Fr(n);if(t[0]===t[1])throw new Error('split: values in a vector "x" should vary.');const s=(t[1]-t[0])/e;return be.seq(t[0],t[1],s)}function Zo(n){if(De(n))return Zo(n.v);const e=new be.valuesConstructor(n.length-1);for(let t=0;t<n.length-1;t++)e[t]=n[t+1]-n[t];return new be(e)}function Ar(n,e){if(De(n))return Ar(n.v,e);e===void 0&&(e=.1);const t=Fr(n),s=(t[1]-t[0])*e;return[t[0]-s,t[1]+s]}function Fr(n){if(De(n))return Fr(n.v);let e=n[0],t=n[0];for(let s=1;s<n.length;s++)n[s]<e&&(e=n[s]),n[s]>t&&(t=n[s]);return[e,t]}function is(n,e){return De(n)?is(n.v,e):Math.sqrt(cs(n,e))}function cs(n,e){if(e===void 0&&(e=!1),De(n))return cs(n.v);const t=tn(n);let s=0;for(let l=0;l<n.length;l++){const o=n[l]-t;s=s+o*o}return s/(e?n.length:n.length-1)}function tn(n){return De(n)?tn(n.v):el(n)/n.length}function el(n){if(De(n))return el(n.v);let e=0;for(let t=0;t<n.length;t++)e=e+n[t];return e}function tl(n){if(De(n))return tl(n.v);let e=1;for(let t=0;t<n.length;t++)e=e*n[t];return e}function Cr(n){return De(n)||tr(n)?n.v[rl(n.v)-1]:n[rl(n)-1]}function rl(n){if(De(n)||tr(n))return rl(n.v);let e=1,t=n[0];for(let s=2;s<=n.length;s++)n[s-1]<t&&(e=s,t=n[s-1]);return e}function cr(n){return De(n)||tr(n)?n.v[nl(n.v)-1]:n[nl(n)-1]}function nl(n){if(De(n)||tr(n))return nl(n.v);let e=1,t=n[0];for(let s=2;s<=n.length;s++)n[s-1]>t&&(e=s,t=n[s-1]);return e}const sl=30,Kc=1e-7,Jc=1e-7,Zc=100;function Qc(n,e,t,s,l){l===void 0&&(l=Zc);let o=t,a=s,c=(a-o)/l;for(let u=0;u<l;u++){let f,d;for(let m=0;m<l;m++){f=o+m*c,d=o+(m+1)*c;const b=e(f),g=e(d);if(b<=n&&g>=n)break}const v=(f+d)/2,h=e(v);if(Math.abs(h-n)<Kc||(o=f,a=d,c=(a-o)/l,c/a<Jc))return v}return(o+a)/2}function Qo(n,e=0,t=1){let s=be.zeros(n);for(let l=0;l<n;l++)s.v[l]=e+Math.random()*(t-e);return s}function $o(n,e=0,t=1){let s=be.zeros(n);for(let l=0;l<n;l++){const o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random();s.v[l]=o*Math.sin(a)*t+e}return s}function _n(n,e=0,t=1){if(De(n))return n.apply(l=>_n(l,e,t));const s=(n-e)/t;return Math.exp(-.5*s*s)/(Math.sqrt(2*Math.PI)*t)}function zn(n,e=0,t=1){if(De(n))return n.apply(l=>zn(l,e,t));const s=1/(Math.sqrt(2)*t);return .5*(1+eu((n-e)*s))}function Nr(n,e=0,t=1){if(De(n))return n.apply(O=>Nr(O,e,t));if(e!==0||t!==1)return Nr(n)*t+e;if(n<0||n>1)throw Error('Parameter "p" must be between 0 and 1.');if(n<1e-10)return-1/0;if(n>.9999999999)return 1/0;const s=.425,l=5,o=.180625,a=1.6,c=3.3871327179,u=5.0434271938*10,f=1.5929113202*100,d=5.910937472*10,v=1.7895169469*10,h=7.8757757664*10,m=6.71875636*10,b=1.4234372777,g=2.75681539,_=1.3067284816,w=1.7023821103*.1,A=7.370016425*.1,k=1.2021132975*.1,S=6.657905115,C=3.081226386,T=4.2868294337*.1,P=1.7337203997*.01,j=2.4197894225*.1,q=1.2258202635*.01,E=n-.5;let y;if(Math.abs(E)<=s)return y=o-E*E,E*(((d*y+f)*y+u)*y+c)/(((m*y+h)*y+v)*y+1);y=E<0?n:1-n,y=Math.sqrt(-Math.log(y));let M;return y<=l?(y=y-a,M=(((w*y+_)*y+g)*y+b)/((k*y+A)*y+1)):(y=y-l,M=((P*y+T)*y+C+S)/((q*y+j)*y+1)),E<0?-M:M}function ea(n,e){if(Array.isArray(n))return ea(Fe(n),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const f=u/e,d=Math.pow(f,1/6)-.5*Math.pow(f,1/3)+1/3*Math.pow(f,1/2);return zn(d,t,l)}function a(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:$c(u/2,e/2)/In(e/2)}const c=e>sl?o:a;return De(n)?n.apply(c):c(n)}function wn(n,e){if(Array.isArray(n))return wn(Fe(n),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const f=Nr(u,t,l),d=Math.pow(Math.sqrt(36*f*f-30*f+13)/4+(3*f-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function a(u){return u===0?0:u===1?Inf:e===0?0:Qc(u,d=>ea(d,e),0,sl*10)}const c=e>sl?o:a;return De(n)?n.apply(c):c(n)}function In(n){if(De(n))return n.apply(In);if(n<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(n<.5)return Math.PI/(Math.sin(Math.PI*n)+In(1-n));n=n-1;let t=.9999999999998099;for(let l=0;l<e.length;l++)t=t+e[l]/(n+l+1);const s=n+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,n+.5)*Math.exp(-s)*t}function $c(n,e){let l=0;for(let o=0;o<1e4;o++){const a=Math.pow(n,o)/In(e+o+1);if(isNaN(a)||a<1e-18)break;l+=a}return Math.pow(n,e)*In(e)*Math.exp(-n)*l}function eu(n){const e=n>=0?1:-1;n=Math.abs(n);const t=.254829592,s=-.284496736,l=1.421413741,o=-1.453152027,a=1.061405429,u=1/(1+.3275911*n),f=1-((((a*u+o)*u+l)*u+s)*u+t)*u*Math.exp(-n*n);return e*f}function ta(n){const e=n.nrows,t=n.ncols;if(e<t){const a=ta(n.subset([],He.seq(1,e)));return{Q:a.Q,R:ru(a.Q,n)}}let s=pe.eye(e),l=n.t();for(let a=1;a<=t;a++)for(let c=e;c>=a+1;c--){const u=l.v.subarray((c-2)*t,c*t),f=s.v.subarray((c-2)*e,c*e),d=u.slice(),v=f.slice(),[h,m,b]=tu(d[a-1],d[a-1+t]);for(let g=0;g<t;g++)u[g]=d[g]*h+d[g+t]*m,u[g+t]=d[g]*-m+d[g+t]*h,f[g]=v[g]*h+v[g+e]*m,f[g+e]=v[g]*-m+v[g+e]*h;for(let g=t;g<e;g++)f[g]=v[g]*h+v[g+e]*m,f[g+e]=v[g]*-m+v[g+e]*h}const o=He.seq(1,t);return{Q:e===t?s:s.subset([],o),R:e===t?l.t():l.subset([],o).t()}}function tu(n,e){if(n==0)return[0,1,e];if(Math.abs(n)>Math.abs(e)){const o=e/n,a=Math.sqrt(1+o*o),c=1/a;return[c,o*c,n*a]}const t=n/e,s=Math.sqrt(1+t*t),l=1/s;return[t*l,l,e*s]}function ll(n){return typeof n=="number"}function ra(n,e){e===void 0&&(e=n);const t=n.nrows,s=n.ncols,l=e.nrows;e.ncols;const o=t,a=l,c=s,u=new Float64Array(o*a);for(let f=0;f<c;f++){const d=n.v.subarray(f*t,(f+1)*t),v=e.v.subarray(f*l,(f+1)*l);for(let h=0;h<a;h++){const m=u.subarray(h*o,(h+1)*o);for(let b=0;b<o;b++)m[b]+=d[b]*v[h]}}return new pe(u,o,a)}function ru(n,e){if(e===void 0&&(e=n),!Ft(n)||!Ft(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=n.nrows,s=n.ncols,l=e.nrows,o=e.ncols,a=s,c=o,u=t,f=new Float64Array(a*c);for(let d=0;d<c;d++){const v=e.v.subarray(d*l,(d+1)*l),h=f.subarray(d*a,(d+1)*a);for(let m=0;m<a;m++){const b=n.v.subarray(m*t,(m+1)*t);let g=0;for(let _=0;_<u;_++)g+=b[_]*v[_];h[m]=g}}return new pe(f,a,c)}function Xt(...n){if(n.length===1)return n[0];const e=n.reduce((l,o)=>l+o.length,0),t=new n[0].constructor.valuesConstructor(e);let s=0;for(const l of n)t.set(l.v,s),s+=l.length;return new n[0].constructor(t)}function na(n,e,t){if(t===void 0){if(e!==n.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new be(n.v)}if(n.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new pe(n.v,e,t)}function Ft(n){return n&&n.constructor===pe}function nu(n,e,t){return new pe(new Float64Array(n),e,t)}class pe{static valuesConstructor=Float64Array;static TOLERANCE=Math.pow(10,-9);constructor(e,t,s){if(!ArrayBuffer.isView(e)||e.constructor!==pe.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return pe.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=pe.eye(e),l=pe.eye(e),o=this.t(),a=o.v[(e-1)*e+(e-1)],c=e-1;for(let u=0;u<e;u++)l.v[c*e+u]=s.v[c*e+u]/a;for(let u=e-2;u>=0;u--){let f=s.getcolumn(u+1);const d=o.getcolref(u+1);for(let v=u+1;v<e;v++){const h=l.getcolumn(v+1);f=f.subtract(h.mult(d[v]))}l.v.set(f.divide(d[u]).v,u*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(tl(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=pe.eye(e),o=pe.eye(e),a=this.t(),c=0,u=a.v[0];for(let f=0;f<e;f++)o.v[c*e+f]=l.v[c*e+f]/u;for(let f=1;f<e;f++){let d=l.getcolumn(f+1);const v=a.getcolref(f+1);for(let h=0;h<f;h++){const m=o.getcolumn(h+1);d=d.subtract(m.mult(v[h]))}o.v.set(d.divide(v[f]).v,f*e)}return o.t()}const t=ta(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>pe.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>pe.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let s=0;s<e;s++)t[s]=this.getcolref(s+1)[s];return new be(t)}t(){const e=this.nrows,t=this.ncols,s=new pe.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const o=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let a=0;a<this.nrows;a++)s[a*t+l]=o[a]}return new pe(s,t,e)}for(let l=0;l<this.nrows;l++){const o=s.subarray(l*t,(l+1)*t);for(let a=0;a<this.ncols;a++)o[a]=this.v[a*this.nrows+l]}return new pe(s,t,e)}dot(e){if(De(e))return new pe(il(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Ft(e))return new pe(il(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,s){if(Ft(e))return new pe(ol(this.v,e.v,t),this.nrows,this.ncols);if(ll(e))return new pe(al(this.v,e,t),this.nrows,this.ncols);if(!De(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new pe.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(al(this.getcolref(o+1),e.v[o],t),o*this.nrows);return new pe(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new pe.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(ol(this.getcolref(o+1),e.v,t),o*this.nrows);return new pe(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e,t){if(t===void 0&&(t=2),t==2){const s=this.ncols,l=new pe.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.getcolref(o+1));return new be(l)}if(t==1)return this.t().apply(e,2);if(t==0){const s=this.v.length,l=new pe.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.v[o]);return new pe(l,this.nrows,this.ncols)}}replace(e,t,s){typeof t=="number"&&(t=[t]),t.length===0&&(t=He.seq(1,this.nrows)),tr(t)||(t=rr(t)),typeof s=="number"&&(s=[s]),s.length===0&&(s=He.seq(1,this.ncols)),tr(s)||(s=rr(s));const l=t.length,o=s.length;if(Cr(t)<1||cr(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Cr(s)<1||cr(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==o)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let a=0;a<s.length;a++){const c=e.getcolref(a+1),u=(s.v[a]-1)*this.nrows;for(let f=0;f<t.length;f++){const d=t.v[f];this.v[u+d-1]=c[f]}}return this}copy(){return new pe(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new be.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)t[s]=this.getcolref(s+1)[e-1];return new be(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new be(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=rr([e])),typeof t=="number"&&(t=rr([t])),Array.isArray(e)&&(e=e.length===0?null:rr(e)),Array.isArray(t)&&(t=t.length===0?null:rr(t)),e!==null&&!tr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!tr(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Cr(e)<1||cr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(Cr(t)<1||cr(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const c=t.length,u=this.nrows,f=new pe.valuesConstructor(u*c);for(let d=0;d<t.length;d++)f.set(this.v.slice((t.v[d]-1)*this.nrows,t.v[d]*this.nrows),d*this.nrows);return new pe(f,u,c)}if(t==null)return this.t().subset(t,e).t();const s=e.length,l=t.length,o=new pe.valuesConstructor(s*l);let a=new pe.valuesConstructor(s);for(let c=0;c<l;c++){const u=this.v.subarray((t.v[c]-1)*this.nrows,t.v[c]*this.nrows);for(let f=0;f<s;f++)a[f]=u[e.v[f]-1];o.set(a,c*s)}return new pe(o,s,l)}toString(e){function t(a,c){return" ".repeat(c-a.length)+a}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(cr(this.v))))+e+3;let l="";const o=this.t();for(let a=1;a<=o.ncols;a++)l+=Array.from(o.getcolref(a)).map(c=>t(c.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,t,s,l){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const o=l!=null&&l.length>0,a=s!=null&&s.length>0;if(o&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(a&&s.length!==this.ncols+(o?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const c=this.t();let u=a?s.join(e)+`
`:"";for(let f=1;f<=c.ncols;f++)u=u+(o?l[f-1]+e:"")+c.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,t),u}static randn(e,t,s,l){return na($o(e*t,s,l),e,t)}static rand(e,t,s,l){return na(Qo(e*t,s,l),e,t)}static eye(e,t){t===void 0&&(t=e);const s=new Float64Array(e*t);for(let l=0;l<Math.min(e,t);l++)s[l*e+l]=1;return new pe(s,e,t)}static diagm(e){if(!De(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,s=new Float64Array(t*t);for(let l=0;l<t;l++)s[l*t+l]=e.v[l];return new pe(s,t,t)}static zeros(e,t){return t===void 0&&(t=e),new pe(new Float64Array(e*t),e,t)}static ones(e,t){return pe.fill(1,e,t)}static fill(e,t,s){s===void 0&&(s=t);const l=new Float64Array(t*s);for(let o=0;o<l.length;o++)l[o]=e;return new pe(l,t,s)}static outer(e,t,s){if(Array.isArray(e)&&(e=Fe(e)),Array.isArray(t)&&(t=Fe(t)),!De(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!De(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=pe.zeros(e.length,t.length);for(let o=0;o<t.length;o++){const a=t.v[o],c=l.getcolref(o+1);for(let u=0;u<e.length;u++)c[u]=s(e.v[u],a)}return l}static parseCSV(e,t,s,l){function o(_){return _.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}t===void 0&&(t=",");const a=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let c=e.split(/\n/),u=[],f=0;const d=c[0].split(t);(s||s===void 0&&o(d))&&(u=d,f=1),c=c.filter(_=>_.trim().length>1);let v=[],h=0;l&&(h=1);const m=c.length-f,b=d.length-h;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const g=pe.zeros(b,m);for(let _=f;_<m+f;_++){const w=c[_].split(t);let A;if(l?(v[_-f]=w[0],A=w.slice(1).map(k=>Number.parseFloat(k.trim().replace(a,".")))):A=w.map(k=>Number.parseFloat(k.trim().replace(a,"."))),A.some(k=>Number.isNaN(k)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=b)throw Error("Wrong number of values in row #"+_);g.v.set(new Float64Array(A),(_-f)*b)}return{values:g.t(),header:u,labels:v,sep:t,dec:a}}}function De(n){return n&&n.constructor===be}function Fe(n){return new be(new Float64Array(n))}class be{static valuesConstructor=Float64Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new He.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new He(t.subarray(0,s))}filter(e){const t=new be.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new be(t.subarray(0,s))}shuffle(){return new be(aa(this.v))}sort(e){return new be(cl(this.v,e))}sortind(e){return new He(ia(this.v,e))}rep(e){return la(this,e)}repeach(e){return oa(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=He.seq(1,this.length)),tr(t)||(t=rr(t));const s=t.length;if(Cr(t)<1||cr(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<t.length;l++){const o=t.v[l];this.v[o-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=rr([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?He.bool2ind(e):rr(e)),!tr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=be.zeros(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new be(this.v.slice(e-1,t))}copy(){return new be(this.v.slice())}dot(e){return e===void 0&&(e=this),il(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(De(e))return new be(ol(this.v,e.v,t));if(ll(e))return new be(al(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e){const t=this.v.length,s=be.zeros(t);for(let l=0;l<t;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const t=e.reduce((o,a)=>o+(typeof a=="number"?1:a.length),0),s=new be.valuesConstructor(t);let l=0;for(const o of e)typeof o=="number"?(s[l]=o,l+=1):(s.set(De(o)?o.v:new be.valuesConstructor(o),l),l+=typeof o=="number"?1:o.length);return new be(s)}static seq(e,t,s){return sa(e,t,s,be)}static randn(e,t,s){return $o(e,t,s)}static rand(e,t,s){return Qo(e,t,s)}static zeros(e){return new be(new be.valuesConstructor(e))}static ones(e){return be.fill(1,e)}static fill(e,t){const s=new be.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new be(s)}}function tr(n){return n.constructor===He}function rr(n){return new He(new Int32Array(n))}class He{static valuesConstructor=Int32Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new He.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new He(t.subarray(0,s))}filter(e){const t=new He.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new He(t.subarray(0,s))}shuffle(){return new He(aa(this.v))}sort(e){return new He(cl(this.v,e))}sortind(e){return new He(ia(this.v,e))}rep(e){return la(this,e)}repeach(e){return oa(this,e)}subset(e){if(typeof e=="number"&&(e=rr([e])),Array.isArray(e)&&(e=rr(e)),!tr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=new He.valuesConstructor(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new He(s)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new He(this.v.slice(e-1,t))}static seq(e,t,s){return sa(e,t,s,He)}static ones(e){return He.fill(1,e)}static fill(e,t){const s=new He.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new He(s)}static bool2ind(e){let t=0;const s=new He.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[t]=l+1,t=t+1);return new He(s.subarray(0,t))}}function sa(n,e,t,s){t===void 0&&(t=n<=e?1:-1);const l=Math.floor((e-n)/t)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const o=new s.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=n+a*t;return new s(o)}function la(n,e){const t=n.length*e,s=new n.constructor.valuesConstructor(t);for(let l=1;l<=e;l++)for(let o=0;o<n.length;o++)s[(l-1)*n.length+o]=n.v[o];return new n.constructor(s)}function oa(n,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=n.length*e,s=new n.constructor.valuesConstructor(t);for(let l=0;l<n.length;l++)for(let o=0;o<e;o++)s[l*e+o]=n.v[l];return new n.constructor(s)}function ol(n,e,t){if(n.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(n.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new n.constructor(n.length);for(let l=0;l<n.length;l++)s[l]=t(n[l],e[l]);return s}function al(n,e,t){const s=new n.constructor(n.length);for(let l=0;l<n.length;l++)s[l]=t(n[l],e);return s}function il(n,e,t,s,l,o){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const a=t,c=o,u=s,f=new n.constructor(a*c);for(let d=0;d<c;d++){const v=e.subarray(d*l,(d+1)*l),h=f.subarray(d*a,(d+1)*a);for(let m=0;m<u;m++){const b=v[m],g=n.subarray(m*t,(m+1)*t);for(let _=0;_<a;_++)h[_]+=g[_]*b}}return f}function aa(n){let e=n.slice(),t=e.length,s,l;for(;t;)l=Math.floor(Math.random()*t--),s=e[t],e[t]=e[l],e[l]=s;return e}function cl(n,e=!1){return e?n.slice().sort((t,s)=>s-t):n.slice().sort((t,s)=>t-s)}function ia(n,e=!1){const t=He.seq(1,n.length).v;return e?t.sort((s,l)=>n[l-1]-n[s-1]):t.sort((s,l)=>n[s-1]-n[l-1])}function su(n,e,t){if(!n||!n.class||!n.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=n.ncols,l=n.ncomp;let o,a;switch(e){case"mX":o=2,a=s;break;case"sX":o=2+s,a=s;break;case"loadings":case"xloadings":o=2+2*s+(t-1)*s,a=s;break;case"P":o=2+2*s,a=l*s;break;case"eigenvals":case"xeigenvals":o=2+2*s+s*l,a=l;break;case"cq0":o=2+2*s+s*l+l,a=l;break;case"cNq":o=2+2*s+s*l+2*l,a=l;break;case"rq0":o=2+2*s+s*l+3*l,a=l;break;case"rNq":o=2+2*s+s*l+4*l,a=l;break;case"ch0":o=2+2*s+s*l+5*l,a=l;break;case"cNh":o=2+2*s+s*l+6*l,a=l;break;case"rh0":o=2+2*s+s*l+7*l,a=l;break;case"rNh":o=2+2*s+s*l+8*l,a=l;break;case"cr0":o=2+2*s+s*l+9*l,a=l;break;case"cNr":o=2+2*s+s*l+10*l,a=l;break;case"rr0":o=2+2*s+s*l+11*l,a=l;break;case"rNr":o=2+2*s+s*l+12*l,a=l;break;case"cg0":o=2+2*s+s*l+13*l,a=l;break;case"cNg":o=2+2*s+s*l+14*l,a=l;break;case"rg0":o=2+2*s+s*l+15*l,a=l;break;case"rNg":o=2+2*s+s*l+16*l,a=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return n.v.subarray(o,o+a)}function ca(n,e,t){if(!n||!n.class||!n.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=n.ncols,l=n.nrows,o=n.ncomp;let a,c;switch(e){case"scores":case"xscores":a=(t-1)*l,c=l;break;case"T":a=0,c=l*o;break;case"hdist":a=l*o+(t-1)*l,c=l;break;case"qdist":a=2*l*o+(t-1)*l,c=l;break;case"xcumexpvar":case"cumexpvar":a=3*l*o,c=o;break;case"fdistc":a=3*l*o+o+(t-1)*l,c=l;break;case"fdistr":a=4*l*o+o+(t-1)*l,c=l;break;case"gdist":a=5*l*o+o+(t-1)*s,c=s;break;case"rdist":a=5*l*o+o+s*o+(t-1)*s,c=s;break;case"idistc":a=5*l*o+o+2*s*o+(t-1)*s,c=s;break;case"idistr":a=5*l*o+o+3*s*o+(t-1)*s,c=s;break;case"E":a=5*l*o+o+3*s*o+o*s,c=l*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return n.v.subarray(a,a+c)}function lu(n,e,t,s){return n*t+n*t+n*t+t+n*e*t+n*t+n*t+t+e*t+e*t+e*t+e*t+n*s}function ua(n,e,t){return 3+2*(n+e)+n*t+1*t+4*t+4*t+4*t+n*t+e*t+1*t}function us(n,e,t){if(!n||!n.class||!n.class.includes("plsmodel"))throw new Error('plsmodel_get: parameter "m" must be JSON with PLS model.');const s=n.npred,l=n.nresp,o=n.ncomp;let a,c=ua(s,l,o)-s*o-l*o-2*l;switch(e){case"mY":c=3,a=l;break;case"mX":c=3+l,a=s;break;case"sY":c=3+l+s,a=l;break;case"sX":c=3+l+s+l,a=s;break;case"P":c=3+2*(l+s),a=o*s;break;case"loadings":case"xloadings":c=3+2*(l+s)+(t-1)*s,a=s;break;case"eigenvals":case"xeigenvals":c=3+2*(l+s)+o*s,a=o;break;case"cq0":c=3+2*(l+s)+o*s+o,a=o;break;case"cNq":c=3+2*(l+s)+o*s+2*o,a=o;break;case"rq0":c=3+2*(l+s)+o*s+3*o,a=o;break;case"rNq":c=3+2*(l+s)+o*s+4*o,a=o;break;case"ch0":c=3+2*(l+s)+o*s+5*o,a=o;break;case"cNh":c=3+2*(l+s)+o*s+6*o,a=o;break;case"rh0":c=3+2*(l+s)+o*s+7*o,a=o;break;case"rNh":c=3+2*(l+s)+o*s+8*o,a=o;break;case"cz0":c=3+2*(l+s)+o*s+9*o,a=o;break;case"cNz":c=3+2*(l+s)+o*s+10*o,a=o;break;case"rz0":c=3+2*(l+s)+o*s+11*o,a=o;break;case"rNz":c=3+2*(l+s)+o*s+12*o,a=o;break;case"weights":c=3+2*(l+s)+o*s+13*o+(t-1)*s,a=s;break;case"yloadings":c=3+2*(l+s)+o*s+13*o+o*s+(t-1)*l,a=l;break;case"yeigenvals":c=3+2*(l+s)+o*s+13*o+o*s+o*l,a=o;break;default:throw Error("plsmodel_get: wrong outcome name.")}return n.v.subarray(c,c+a)}function Bt(n,e,t,s){if(!n||!n.class||!n.class.includes("plsres"))throw new Error('plsres_get: parameter "r" must be JSON with PLS results.');s||(s=1);const l=n.nrows,o=n.ncomp,a=n.nresp,c=n.npred,u=n.nresp_model;let f,d=3*l*o+o;switch(e){case"Yp":d=d+(t-1)*u*l+(s-1)*l,f=l;break;case"yscores":d=d+o*u*l+(t-1)*l,f=l;break;case"zdist":d=d+o*u*l+o*l+(t-1)*l,f=l;break;case"ycumexpvar":d=d+o*u*l+o*l+o*l,f=o;break;case"rmse":d=d+o*u*l+o*l+o*l+o,f=u*o;break;case"r2":d=d+o*u*l+o*l+o*l+o+a*o,f=u*o;break;case"bias":d=d+o*u*l+o*l+o*l+o+2*a*o,f=u*o;break;case"slope":d=d+o*u*l+o*l+o*l+o+3*a*o,f=u*o;break;case"E":d=d+o*u*l+o*l+o*l+o+4*a*o,f=l*c;break;case"T":d=0,f=l*o;break;default:return ca(n,e,t)}return n.v.subarray(d,d+f)}function ou(n,e,t,s,l,o,a,c){if(!Ft(e))throw new Error("pls_fit: D must be a matrix.");if(t<1||e.ncols<2+t)throw new Error("pls_fit: training set should have at least 2 predictors and 1 response.");a||(a=[]);const u=a&&Array.isArray(a)?a.length:0;if(!vs(a,0,e.nrows-1))throw new Error('pls_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!vs(c,0,e.ncols-t-1))throw new Error('pls_fit: some indices in "exclvars" array are outside the expected range.');const d=e.nrows-u,v=e.ncols-t-f;if(d<3||v<2)throw new Error("pls_fit: X must have at least 3 rows and 2 predictors.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),s===void 0&&(s=Math.min(d-1,v)),s<1||s>Math.min(d-1,v))throw new Error('pls_fit: the value of "ncomp" does not match the dimension of D.');const h=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(u>0){const M=new Int32Array(a);m=n._malloc(M.length*M.BYTES_PER_ELEMENT),n.HEAP32.set(M,m/M.BYTES_PER_ELEMENT)}let b=null;if(f>0){const M=new Int32Array(c);b=n._malloc(M.length*M.BYTES_PER_ELEMENT),n.HEAP32.set(M,b/M.BYTES_PER_ELEMENT)}const g=ua(v,t,s),_=Float64Array,w=n._malloc(g*_.BYTES_PER_ELEMENT),A=v*t*s,k=Float64Array,S=n._malloc(A*_.BYTES_PER_ELEMENT),C=n._malloc(A*_.BYTES_PER_ELEMENT),T=n._malloc(A*_.BYTES_PER_ELEMENT);if(n.ccall("plsfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols-t,t,s,l,o,w,m,u,b,f,C,S,T])!==1)throw new Error("pls_fit: unexpected error.");const j=n.HEAPF64.slice(w/_.BYTES_PER_ELEMENT,w/_.BYTES_PER_ELEMENT+g),q=n.HEAPF64.slice(C/k.BYTES_PER_ELEMENT,C/k.BYTES_PER_ELEMENT+A),E=n.HEAPF64.slice(S/k.BYTES_PER_ELEMENT,S/k.BYTES_PER_ELEMENT+A),y=n.HEAPF64.slice(T/k.BYTES_PER_ELEMENT,T/k.BYTES_PER_ELEMENT+A);return n._free(h),n._free(w),n._free(C),n._free(S),n._free(T),m&&n._free(m),b&&n._free(b),{class:["plsmodel","pcamodel"],v:j,ncomp:s,nrows:d,npred:v,nresp:t,exclvars:c,center:l,scale:o,coeffs:q,vip:E,sr:y}}function au(n,e,t,s,l){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pls_predict: parameter "m" must be JSON with PLS results.');if(!Ft(t))throw new Error("pls_predict: D must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!vs(l,0,t.nrows-1))throw new Error('pls_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=t.nrows-o;t.ncols-s===e.npred&&(a=0);const u=t.ncols-a-s;if(c<1)throw new Error("pls_predict: D must have at least 1 row.");if(u!==e.npred)throw new Error("pls_predict: D must have the same number of predictors (without excluded ones) as the training set.");const f=n._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);n.HEAPF64.set(t.v,f/t.v.BYTES_PER_ELEMENT);let d=null;if(o>0){const W=new Int32Array(l);d=n._malloc(W.length*W.BYTES_PER_ELEMENT),n.HEAP32.set(W,d/W.BYTES_PER_ELEMENT)}let v=null;if(a>0){const W=new Int32Array(e.exclvars);v=n._malloc(W.length*W.BYTES_PER_ELEMENT),n.HEAP32.set(W,v/W.BYTES_PER_ELEMENT)}const h=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const m=lu(c,e.nresp,e.ncomp,e.npred),b=Float64Array,g=n._malloc(m*b.BYTES_PER_ELEMENT);if(n.ccall("plspredict_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[f,t.nrows,t.ncols-s,s,h,g,d,o,v,a])!==1)throw new Error("pls_predict: unexpected error.");const w=n.HEAPF64.slice(g/b.BYTES_PER_ELEMENT,g/b.BYTES_PER_ELEMENT+m);n._free(f),n._free(h),n._free(g),d&&n._free(d),v&&n._free(v);const A={class:["plsres","pcares"],v:w,ncomp:e.ncomp,nrows:c,npred:u,nresp:s,nresp_model:e.nresp,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},k=new Array(e.ncomp),S=new Array(e.ncomp),C=new Array(e.ncomp),T=new Array(e.ncomp),P=new Array(e.ncomp),j=new Array(e.ncomp),q=new Array(e.ncomp),E=new Array(e.ncomp),y=new Array(e.ncomp),M=Bt(A,"xcumexpvar"),O=Bt(A,"ycumexpvar");if(s>0){k[0]=1,P[0]=M[0],T[0]=1-M[0],S[0]=M[0],C[0]=1-M[0],y[0]=O[0],E[0]=1-O[0],j[0]=O[0],q[0]=1-O[0];for(let U=1;U<e.ncomp;U++)k[U]=U+1,P[U]=M[U],T[U]=1-M[U],S[U]=M[U]-M[U-1],C[U]=1-S[U],y[U]=O[U],E[U]=1-O[U],j[U]=O[U]-O[U-1],q[U]=1-j[U];const W=new pe(Bt(A,"rmse"),e.nresp,e.ncomp),L=new pe(Bt(A,"r2"),e.nresp,e.ncomp),I=new pe(Bt(A,"slope"),e.nresp,e.ncomp),Q=new pe(Bt(A,"bias"),e.nresp,e.ncomp);A.stat={components:k,xresvar:C,xexpvar:S,xcumexpvar:P,xcumresvar:T,yresvar:q,yexpvar:j,ycumexpvar:y,ycumresvar:E,rmse:W.t(),r2:L.t(),slope:I.t(),bias:Q.t()}}else A.stat=null;return A}function iu(n,e,t,s,l,o,a,c,u){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pcvpls: parameter "m" must be JSON with PLS model.');if(!Ft(t))throw new Error("pcvpls: D must be a matrix.");if(s<1)throw new Error("pcvpls: D must have at least one response.");u||(u=[]);const f=u&&Array.isArray(u)?u.length:0;if(!vs(u,0,t.nrows-1))throw new Error('pcvpls: some indices in "outliers" array are outside the expected range.');const d=e.exclvars.length,v=t.nrows-f,h=t.ncols-s-d;if(v<3)throw new Error("plspcv: D must have at least 3 rows.");if(h<2)throw new Error("plspcv: D must have at least 2 predictors.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('plspcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('plspcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('plspcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>v)throw new Error('plspcv: the value of "cv_nseg" is too large for the given X.');if(a===0&&(o=v),!Number.isInteger(l)||l<1)throw new Error('plspcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?v-2:v-Math.ceil(v/o)-1,h,e.ncomp);if(l>m)throw new Error('plspcv: the value of "ncomp" is too large.');const b=n._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);n.HEAPF64.set(t.v,b/t.v.BYTES_PER_ELEMENT);let g=null;if(f>0){const y=new Int32Array(u);g=n._malloc(y.length*y.BYTES_PER_ELEMENT),n.HEAP32.set(y,g/y.BYTES_PER_ELEMENT)}let _=null;if(d>0){const y=new Int32Array(e.exclvars);_=n._malloc(y.length*y.BYTES_PER_ELEMENT),n.HEAP32.set(y,_/y.BYTES_PER_ELEMENT)}const w=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,w/e.v.BYTES_PER_ELEMENT);const A=t.v.constructor,k=v*(s+h),S=n._malloc(k*A.BYTES_PER_ELEMENT),C=o*l,T=t.v.constructor,P=n._malloc(C*T.BYTES_PER_ELEMENT);if(n.ccall("pcvpls_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[b,t.nrows,t.ncols-s,s,l,e.center,e.scale,a,o,c,w,S,P,g,f,_,d])!==1)throw new Error("plspcv: unexpected error.");const q=n.HEAPF64.slice(S/A.BYTES_PER_ELEMENT,S/A.BYTES_PER_ELEMENT+k),E=n.HEAPF64.slice(P/T.BYTES_PER_ELEMENT,P/T.BYTES_PER_ELEMENT+C);return n._free(b),n._free(w),n._free(S),n._free(P),g&&n._free(g),_&&n._free(_),[new pe(q,v,s+h),new pe(E,o,l)]}function cu(n,e){if(e[0]===0){const t=e[1]+2;return 2+n*t+2*n+t}return 3+n}const qr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(n,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(n,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(n,e)=>2*n,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:cu,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(n,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(n,e)=>2+3*n+e[0],mp:[5,5]}];function uu(n){let e="<ul>";for(let t=0;t<n.ml.length;t++){const s=qr[n.ml[t]].title;e=e+"<li>"+s+" <span>"+n.info[t]+"</span></li>"}return e=e+"</ul>",e}function fa(n,e,t){const s=qr.findIndex(v=>v.id==="trim");let l=0,o=n.ncols-e,a=0;for(let v=0;v<t.ml.length;v++){if(t.ml[v]!==s){a+=t.mpl_new[v];continue}l=Math.max(l,t.mp_new[a]),o=Math.min(o,t.mp_new[a+1]),a+=t.mpl_new[v]}const c=n.nrows,f=o-l+e,d=pe.zeros(c,f);return a=0,e>0&&(d.v.set(n.v.slice(0,e*c),a),a+=e*c),d.v.set(n.v.slice((e+l)*c,(e+o)*c),a),[l,o,d]}function fu(n,e){if(!n||!e||typeof e!="object"||Object.keys(e).length===0)return n;const t=qr.findIndex(c=>c.id==="trim");if(e.ml.findIndex(c=>c===t)<0)return n;const[l,o,a]=fa(n.values,n.nresp,e);return n.values=a,n.varlabels=n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varlabels.slice(n.nresp+l,n.nresp+o)):n.varlabels.slice(l,o),n.varindices=n.nresp>0?Dt(0,n.nresp-1).concat(Dt(0,o-l-1)):Dt(0,o-l-1),n.varvalues=n.nresp>0?n.varvalues.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp+l,n.nresp+o)):n.varvalues.slice(l,o),n}function da(n,e,t,s,l=!0,o=[]){if(!Ft(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let a,c;l?(a=e.ncols,c=e.nrows-t):(a=e.nrows,c=e.ncols-t);const u=s.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const f=new Int32Array(u),d=new Int32Array(u),v=new Int32Array(u);let h=0,m=0;for(let M=0;M<s.length;M++){const O=s[M].id,W=s[M].params,L=qr.findIndex(Q=>Q.id==O);if(L<0)throw new Error("prep_fit: wrong method name: "+O+".");const I=qr[L];if(W.length!==I.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+O+".");f[M]=L,d[M]=I.mpl,v[M]=I.get_mpl_new(c,W),h=h+d[M],m=m+v[M]}const b=new Float64Array(h);let g=0;for(let M=0;M<s.length;M++){const O=s[M].id,W=s[M].params;qr.findIndex(L=>L.id==O),b.set(W,g),g=g+d[M]}const _=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,_/e.v.BYTES_PER_ELEMENT);const w=n._malloc(f.length*f.BYTES_PER_ELEMENT);n.HEAP32.set(f,w/f.BYTES_PER_ELEMENT);const A=n._malloc(d.length*d.BYTES_PER_ELEMENT);n.HEAP32.set(d,A/d.BYTES_PER_ELEMENT);const k=n._malloc(v.length*v.BYTES_PER_ELEMENT);n.HEAP32.set(v,k/v.BYTES_PER_ELEMENT);const S=n._malloc(b.length*b.BYTES_PER_ELEMENT);n.HEAPF64.set(b,S/b.BYTES_PER_ELEMENT);const C=n._malloc(m*b.BYTES_PER_ELEMENT),T=new Int32Array(o),P=T.length,j=n._malloc(P*T.BYTES_PER_ELEMENT);if(n.HEAP32.set(T,j/T.BYTES_PER_ELEMENT),n.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[_,a,c,t,u,w,A,S,k,C,l,j,P])!==1)throw new Error("prep_fit: unexpected error.");const E=n.HEAPF64.slice(C/b.BYTES_PER_ELEMENT,C/b.BYTES_PER_ELEMENT+m);return n._free(_),n._free(w),n._free(S),n._free(A),n._free(j),n._free(C),n._free(k),{ml:f,mpl:d,mp:b,mpl_new:v,mp_new:E,npred:c,class:["prepmodel"]}}function ul(n,e,t,s,l=!0,o=!1){if(!Ft(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let a,c;if(l?(a=e.ncols,c=e.nrows-t):(a=e.nrows,c=e.ncols-t),c!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+c+").");const u=s.ml,f=s.mpl_new,d=s.mp_new,v=f.reduce((C,T)=>C+T,0);if(!u||u.length<1||!f||f.length!==u.length||d.length!==v)throw new Error("prep_apply: wrong structure of the model object.");const h=u.length,m=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const b=n._malloc(u.length*u.BYTES_PER_ELEMENT);n.HEAP32.set(u,b/u.BYTES_PER_ELEMENT);const g=n._malloc(f.length*f.BYTES_PER_ELEMENT);n.HEAP32.set(f,g/f.BYTES_PER_ELEMENT);const _=n._malloc(d.length*d.BYTES_PER_ELEMENT);n.HEAPF64.set(d,_/d.BYTES_PER_ELEMENT);const w=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(n.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[m,a,c,t,h,b,g,_,w,l])!==1)throw new Error("prep_apply: unexpected error.");const k=n.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);n._free(m),n._free(b),n._free(g),n._free(_),n._free(w);const S=new pe(k,e.nrows,e.ncols);if(o){const[C,T,P]=fa(S,t,s);return P}return S}function du(n,e,t,s){e===void 0&&(e=!0),t===void 0&&(t=!1),s===void 0&&(s=!1);function l(u,f,d,v){if(typeof f=="boolean")return f?u.apply(d,2):Fe([v]).rep(u.ncols);if(!De(f))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(f.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return f}const o=l(n,e,tn,0),a=l(n,t,is,1),c=pe.zeros(n.nrows,n.ncols);for(let u=1;u<=n.ncols;u++){const f=n.getcolref(u),d=c.getcolref(u),v=o.v[u-1],h=1/a.v[u-1];for(let m=0;m<n.nrows;m++)d[m]=(f[m]-v)*h}return s?[c,o,a]:c}function va(n,e,t){return n<e?["regular","in"]:n>t?["outlier","out"]:["extreme","out"]}function vu(n,e,t,s,l,o,a,c){if(!c||c.length===0)return[0,0];let u=0,f=0;for(let d of c){const v=n[d],[h,m]=va(v,e,t);o[h]+=1,a[m]+=1,s[d]=h,l[d]=m,u=u+(m==="in"),f=f+(m!=="in")}return[u,f]}function ha(n,e,t,s,l,o,a,c,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let f=0,d=0;for(let O of u){const W=n[O],[L,I]=va(W,t,s);c[I]+=1,l[O]="alien",a.alien+=1,o[O]=I,f=f+(I!=="in"),d=d+(I==="in")}const v=u.slice();v.sort((O,W)=>n[O]-n[W]);let h=v.length;const m=v.map(O=>n[O]);let b=-1,g=0,_=0,w=0,A=0;for(;b<0;)g>0&&(l[v[h-1]]="external",a.alien=a.alien-1,a.external=a.external+1,h=h-1,v.pop(),m.pop()),_=tn(m),w=cs(m),A=w/(_*_),b=4-2*e*A,g=g+1;const k=(2+Math.sqrt(b))/A,S=k-e,C=_/k,T=t/C,P=1-2*(e+S)*(e+3*S)/(3*(e+2*S)**2),j=(P-1)*(1-3*P),q=(e+2*S)/(e+S)**2,E=1+P*q*(P-1-.5*(2-P)*j*q),y=P*Math.sqrt(2*q)*(1+.5*j*q),M=zn((Math.pow(T/(e+S),P)-E)/y);return[f,d,M,S,C,P,E,y,e,_]}class fl{#e;get outcomes(){return r(this.#e)}set outcomes(e){F(this.#e,e)}constructor(e,t,s,l,o,a,c){this.d=e,this.ind=t,this.objlabels=s,this.objindices=l,this.classes=o,this.classNames=a,this.nrows=e.length,this.nMembers=t.members.length,this.nStrangers=t.strangers.length,this.nUnknown=t.unknown.length,this.#e=p(()=>c.oCrit&&c.eCrit?this.getOutcomes(c):null)}getOutcomes(e){const t=this.d.apply(q=>q/e.f0*e.Nf).v,s=new Array(this.nrows),l=new Array(this.nrows),o={regular:0,extreme:0,outlier:0,alien:0,external:0},a={in:0,out:0},[c,u]=vu(t,e.eCrit,e.oCrit,l,s,o,a,this.ind.members),[f,d,v,h,m,b,g,_,w,A]=ha(t,e.Nf,e.eCrit,e.oCrit,l,s,o,a,this.ind.strangers);this.nUnknown>0&&ha(t,e.Nf,e.eCrit,e.oCrit,l,s,o,a,this.ind.unknown);const k=c>0?c/(c+u):0,S=f>0?f/(f+d):0,C=1-v,T=Math.sqrt(k*S),P=c>0&&f>0?(c+f)/(c+f+d+u):0,j={sensitivity:k,specificity:S,selectivity:C,efficiency:T,accuracy:P};return{Nf:e.Nf,f:t,decs:s,rols:l,decsNum:a,rolsNum:o,TP:c,FN:u,TN:f,FP:d,beta:v,s:h,f0:m,hz:b,Mz:g,Sz:_,k:w,m:A,stat:j}}toJSON(){return null}static fromJSON(e){return new fl(...e)}}class rn{#e;get alpha(){return r(this.#e)}set alpha(e){F(this.#e,e,!0)}#n;get gamma(){return r(this.#n)}set gamma(e){F(this.#n,e,!0)}#t;get limType(){return r(this.#t)}set limType(e){F(this.#t,e,!0)}#s;get Nf(){return r(this.#s)}set Nf(e){F(this.#s,e)}#a;get f0(){return r(this.#a)}set f0(e){F(this.#a,e)}#l;get eConfLim(){return r(this.#l)}set eConfLim(e){F(this.#l,e)}#r;get oConfLim(){return r(this.#r)}set oConfLim(e){F(this.#r,e)}#o;get eCrit(){return r(this.#o)}set eCrit(e){F(this.#o,e)}#i;get oCrit(){return r(this.#i)}set oCrit(e){F(this.#i,e)}constructor(e,t,s,l,o,a,c,u,f,d,v,h,m,b,g,_="nimca-model"){this.mX=t,this.sX=s,this.nrows=l,this.ncols=o,this.className=e,this.Nfc=a,this.Nfr=c,this.f0c=u,this.f0r=f,this.hash=d,this.class=["nimcamodel"],this.fileName=_,this.center=b,this.scale=g,this.#e=te(Re(v)),this.#n=te(Re(h)),this.#t=te(Re(m)),this.#s=p(()=>this.limType==="classic"?this.Nfc:this.Nfr),this.#a=p(()=>this.limType==="classic"?this.f0c:this.f0r),this.#l=p(()=>1-Number.parseFloat(this.alpha)/100),this.#r=p(()=>Math.pow(1-this.gamma/100,1/l)),this.#o=p(()=>wn(this.eConfLim,this.Nf)),this.#i=p(()=>wn(this.oConfLim,this.Nf))}predict(e){if(!e.values||!Ft(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const t=rn.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let l=0;l<e.classes.length;l++)e.classes[l]===this.className?s.members.push(l):s.strangers.push(l);else s.unknown=Dt(0,e.values.nrows-1);return new fl(t,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,t,s,l={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let o=e.values;const a=e.classNames[0];if(!Ft(o))throw new Error("nimca.fit: X must be a matrix.");const c=t?o.apply(tn,2):be.zeros(o.ncols),u=s?o.apply(is,2):be.ones(o.ncols),f=rn.getDistance(o,c,u),d=tn(f),v=cs(f);let h=Math.round(2*d*d/v);h<1&&(h=1),h>250&&(h=250);const m=Qs(f),b=Xc(f),g=b/m;let _;g>2.685592117?_=1:g<.194565995?_=100:_=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/g),1.185785)));const w=.5*_*(m/wn(.5,_)+b/(wn(.75,_)-wn(.25,_)));return new rn(a,c,u,o.nrows,o.ncols,h,_,d,w,fs(),l.alpha,l.gamma,l.limType,t,s)}static fromJSON(e){const{__type:t,mX:s,sX:l,nrows:o,ncols:a,className:c,Nfc:u,Nfr:f,f0c:d,f0r:v,hash:h,alpha:m,gamma:b,limType:g,fileName:_,center:w,scale:A}=e;return new rn(c,s,l,o,a,u,f,d,v,h,m,b,g,w,A,_)}static getDistance(e,t,s){const l=du(e,t,s),o=l.nrows,a=l.ncols,c=be.zeros(o);for(let u=0;u<a;u++){const f=l.getcolref(u+1);for(let d=0;d<o;d++)c.v[d]+=f[d]**2}return c}}function Dt(n,e,t=1){const s=Math.round((e-n+1)/t),l=Array(s);for(let o=0;o<s;o++)l[o]=n+o*t;return l}function hu(n,e){let t,s,l,o=[];if(e.length>0){const a=n.values.nrows,c=n.objindices,u=a-e.length;t=Array(u),s=Array(u),l=Array(u);let f=0;for(let d=0;d<a;d++)e.includes(d)||(t[f]=c[d],s[f]=n.classes[d],l[f]=n.objlabels[d],(o.length===0||!o.includes(s[f]))&&o.push(s[f]),f=f+1)}else t=n.objindices,l=n.objlabels,s=n.classes,o=n.classNames;return[t,l,s,o]}function fs(){const n=new Date;return`${n.getFullYear()}${(n.getMonth()+1).toString().padStart(2,"0")}${n.getDate().toString().padStart(2,"0")}${n.getHours().toString().padStart(2,"0")}${n.getMinutes().toString().padStart(2,"0")}${n.getSeconds().toString().padStart(2,"0")}${n.getMilliseconds().toString().padStart(3,"0")}`}function dl(n,e,t,s,l=!1){const[o,a]=hu(t,s),c=l&&e.prep&&e.prep.ml&&e.prep.ml.length>0?ul(n,t.values,t.nresp,e.prep,!1,!0):t.values,u=au(n,e,c,t.nresp,s);return u.hash=fs(),u.objindices=o,u.objlabels=a,u.varlabels=e.varlabels,t.nresp>0?u.Yref=s&&s.length>0?t.values.subset(o.map(f=>f+1),He.seq(1,t.nresp)):t.values.subset(null,He.seq(1,t.nresp)):u.Yref=null,u}function mu(n,e="."){return Array.isArray(n)&&n.length>0?e==="."?n.map(t=>Number.parseFloat(t.trim())):n.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(n.trim()):Number.parseFloat(n.trim().replace(e,"."))}function On(n){return n.some(e=>Number.isNaN(e))}function nn(n){return n.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function ma(n){let e=n.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function ga(n,e,t,s,l,o,a,c=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let f=ma(n);if(f.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");f=f.filter(L=>L.replaceAll(e,"").trim().length>0);const d=f[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let v=0,h;const m=t!=="no";(m||m===void 0&&On(firstRow))&&(h=d,v=1);const b=f.length-v;if(b<1)throw new Error("Data file should contain at least 1 row with values.");c===-1&&(c=b);let g,_,w,A=Array(b);s?(g=m?nn(h[0]):"",w=Array(b),_=1):(g="",w=[],_=0);let k,S=[],C;l?(k=m?nn(h[_]):"",C=Array(b),_=_+1):(k="",C=[]);const T=d.length-_;if(T<1)throw new Error("Data file should contain at least 1 column with values.");const P=pe.zeros(T,b);for(let L=v;L<b+v;L++){const I=L-v;A[I]=I;let Q=f[L].split(e);if(s&&(w[I]=Q[0],Q.shift()),l){const K=Q[0];C[I]=K,Q.shift(),(S.length===0||S.indexOf(K)<0)&&S.push(K)}const U=u==="."?Q.map((K,D)=>Number.parseFloat(K.trim())):Q.map((K,D)=>Number.parseFloat(K.trim().replace(u,".")));if(U.some(K=>Number.isNaN(K)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(U.length!=T)throw new Error("Wrong number of values in row #"+L);P.v.set(new Float64Array(U),(L-v)*T)}if(!s||w.length!==b){w=Array(b);for(let L=0;L<b;L++)w[L]="O"+(L+1)}w=w.map(L=>nn(L)),C=C.map(L=>nn(L)),S=S.map(L=>nn(L));let j,q=Array(T),E=Array(T);if(h&&h.length===T+_){j=h.map(L=>nn(L)).slice(_);for(let L=0;L<T;L++)q[L]=L>=c?L-c:L,E[L]=L>=c?L-c+1:L+1}else{j=Array(T);for(let L=0;L<T;L++)q[L]=L>=c?L-c:L,j[L]=L>=c?"V"+(L-c+1):"Y"+(L+1),E[L]=L>=c?L-c+1:L+1}let y;if(t==="values"){if(y=u==="."?j.map((L,I)=>I<c?I:Number.parseFloat(L.trim())):j.map((L,I)=>I<c?I:Number.parseFloat(L.trim().replace(u,"."))),y.some(L=>Number.isNaN(L)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else y=E;Array.isArray(y)||(y=[]),o||(o=""),a||(a=""),o=y.length>0&&o.length>0?o:"Variables",a=y.length>0&&a.length>0?a:"";const M=o+(a.length>0?", "+a:""),O=y[1]<y[0];return{values:P.t(),nresp:c,header:t,hasLabels:s,hasClassNames:l,labelsVarname:g,classLabelsVarname:k,objlabels:w,objindices:A,varlabels:j,varvalues:y,varindices:q,varrev:O,classes:C,classNames:S,sep:e,dec:u,varvaluesName:o,varvaluesUnits:a,varAxisTitle:M}}function gu(n){if(On(n[0].slice(2)))return!0;const e=n[0].length,t=[];for(let s=2;s<e;s++){let l=[];for(let f=1;f<n.length;f++)l.push(n[f][s]);const o=n[0][s],a=tn(l),c=is(l),u=Math.abs((o-a)/c);t.push(u)}return t.every(s=>s>5)}function pu(n){const t=n[0].split(","),s=n[1].split(","),l=t.length,o=s.length,a=";",c=n[0].split(a),u=n[1].split(a),f=c.length,d=u.length;let v,h;if(l>1&&o>1&&l===o&&l>f)h=",",v=l;else if(f>1&&d>1&&f===d)h=a,v=f;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",v]}function bu(n,e=0){const t=ma(n),s=t.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,o,a]=pu(t),c=Math.min(a,5),u=Math.min(s,5);let f=t[0].split(l).length,d=t.slice(0,u).map(q=>q.split(l).slice(0,c));d=d.map(q=>q.map(E=>nn(E)));const v=d.map(q=>mu(q.slice(),o));for(let q=1;q<u;q++)if(On(v[q].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const h=gu(v);let m=0;const b=h?1:0,g=b+1,_=d[b][0],w=d[g][0],A=v[b][0],k=v[g][0],S=v[b][1],C=v[g][1];let T=!1,P=!1;if(Number.isNaN(A)&&Number.isNaN(k)&&_!==w?(T=!0,m=m+1):Number.isNaN(S)&&Number.isNaN(C)&&_!==w&&(T=!0,P=!0,m=m+2),!P){const q=T?1:0,E=v[b][q],y=v[g][q];P=On([E,y]),m=m+P}let j="no";if(h){m>0?d[0].slice(m+e):d[e];const q=m>0?v[0].slice(m+e):v[e];j=On(q)?"labels":"values"}return[l,T,P,j,f]}function _u(n){const e=n.values.t(),t=n.sep,s=n.dec;let l=null;n.header!=="no"&&(l=n.header==="values"?n.nresp&&n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp)):n.varvalues.slice():n.varlabels.slice()),l&&n.hasClassNames&&(l=[n.classLabelsVarname,...l]),l&&n.hasLabels&&(l=[n.labelsVarname,...l]);const o=n.classes&&n.classes.length===e.ncols,a=n.objlabels&&n.objlabels.length===e.ncols;let c=l?l.join(t):"";for(let u=0;u<e.ncols;u++){let f=e.getcolref(u+1).join(t);s!=="."&&(f=f.replace(".",s)),o&&(f=n.classes[u]+n.sep+f),a&&(f=n.objlabels[u]+n.sep+f),c=c+`
`+f}return c=c+`
`,s!=="."&&(c=c.replace(/\./g,s)),c}function wu(n,e){const t=_u(n),s=new Blob([t],{type:"text/csv"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download",`${e}.csv`),o.click()}function Vn(n,e){return Ft(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:De(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof rn?e.asJSON():e}function vl(n,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return nu(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Fe(e.v);if(e.__type==="NIMCA")return rn.fromJSON(e);if(e.__type==="NIMCARes")return null;const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function hl(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),l=String(n.getHours()).padStart(2,"0"),o=String(n.getMinutes()).padStart(2,"0"),a=String(n.getSeconds()).padStart(2,"0");return`${e}${t}${s}${l}${o}${a}`}function pa(n){return Array.from({length:8},(e,t)=>n>>7-t&1).reverse()}function ds(n,e,t){let s="";for(let l=0;l<e;l++){const o=n.getUint8(t++);if(o===0)break;s+=String.fromCharCode(o)}return s}function yu(n){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],t=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],l=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let o=0;const a=n.getUint8(o);o+=1;const c=n.getUint8(o);if(o+=1,c===77)throw new Error("SPC file has old format which is not supported.");const u=c===75,f=n.getUint8(o);o+=1;const d=n.getInt8(o);o+=1;const v=n.getUint32(o,u);o+=4;const h=n.getFloat64(o,u);o+=8;const m=n.getFloat64(o,u);o+=8;const b=n.getUint32(o,u);o+=4;const g=n.getUint8(o);o+=1;const _=n.getUint8(o);o+=1;const w=n.getUint8(o);o+=1;const A=n.getUint8(o);o+=1;const k=n.getUint32(o,u);o+=4;const S=ds(n,9,o);o+=9;const C=ds(n,9,o);o+=9;const T=n.getUint16(o,u);o+=2;const P=Array.from({length:8},()=>{const X=n.getFloat32(o,u);return o+=4,X}),j=ds(n,130,o);o+=130;const q=ds(n,30,o);o+=30;const E=n.getUint32(o,u);o+=4;const[y,M,O,W,L,I,Q,U]=pa(a),K=g===255?t[31]:t[g],D=g===255?e[31]:e[g],z=_<=26?s[_]:_>=128&&_<=131?l[_]:"Unknown";return{ftflgsv:a,ftflgs:{TSPREC:y,TCGRAM:M,TMULTI:O,TRANDM:W,TORDRD:L,TALABS:I,TXYXYS:Q,TXVALS:U},fexper:f,fexp:d,fnpts:v,ffirst:h,flast:m,fnsub:b,fxtype:g,fytype:_,fztype:w,fpost:A,fdate:k,fres:S,fsource:C,fpeakpt:T,fspare:P,fcmnt:j,fcatxt:q,flogoff:E,xaxisName:K,xaxisUnit:D,yaxisName:z}}function xu(n,e){const t=pa(n.getUint8(e));e+=1;const s=n.getInt8(e);e+=1;const l=n.getUint16(e,!0);e+=2;const o=n.getFloat32(e,!0);e+=4;const a=n.getFloat32(e,!0);e+=4;const c=n.getFloat32(e,!0);e+=4;const u=n.getInt32(e,!0);e+=4;const f=n.getInt32(e,!0);e+=4;const d=n.getFloat32(e,!0);return e+=4,{flags:t,exp:s,index:l,time:o,next:a,noise:c,nPoints:u,nScans:f,wAxis:d}}async function ba(n){if(n.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${n.name}).`);const t=n.name.slice(0,-4),s=await n.arrayBuffer(),l=new DataView(s);let o=0;const a=yu(l);o+=512;const c=a.fnpts;if(c<2)throw new Error(`Error reading SPC file (${n.name}).`);let u=new Array(c);if(a.ftflgs.TXVALS)for(let v=0;v<c;v++){const h=l.getFloat32(o,!0);o=o+4,u[v]=h}else{(a.flast-a.ffirst)/(c-1);for(let v=0;v<c;v++)u[v]=a.ffirst+v*a.flast}const f=new Float64Array(c*a.fnsub);for(let v=0;v<a.fnsub;v++){xu(l,o),o=o+32;for(let h=0;h<c;h++){const m=l.getFloat32(o,!0);o=o+4,f[v*c+h]=m}}const d=[];return a.fnsub>1?Dt(1,a.fnsub).forEach(h=>{d.push(t+"_"+h)}):d.push(t),{hdr:a,xvalues:u,yvalues:f,objlabels:d}}async function ku(n){if(!(n instanceof FileList||Array.isArray(n)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=n.length,t=[];let s=[],l=[];const o=await ba(n[0]),a=o.xvalues.length;if(t.push(o.yvalues),s=s.concat(o.objlabels),l.push(o.hdr.fnsub),e>1)for(let b=1;b<e;b++){const g=await ba(n[b]);if(g.xvalues.length!==a)throw new Error("Number of spectral values in SPC files is different.");t.push(g.yvalues),s=s.concat(g.objlabels),l.push(g.hdr.fnsub)}const c=l.reduce((b,g)=>b+g,0),u=new Float64Array(c*a);let f=0;for(let b=0;b<t.length;b++)u.set(t[b].slice(),f),f+=l[b]*a;const d=new pe(u,a,c),v=Dt(0,a-1),h=Dt(0,c-1),m=o.xvalues.map(b=>b.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:h,varlabels:m,varvalues:o.xvalues,varindices:v,varev:o.xvalues[1]<o.xvalues[0],sep:",",dec:".",varvaluesName:o.hdr.xaxisName,varvaluesUnits:o.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}function vs(n,e,t){if(!Array.isArray(n))return!1;if(n.length===0)return!0;for(let s=0;s<n.length;s++){const l=n[s];if(l<e||l>t)return!1}return!0}function Eu(n,e=1){if(!n.classNames||n.classNames.length===0)return n;const t=n.classNames.length-e,s=n.values.ncols,l=n.values.nrows;let o=t*l;const a=pe.zeros(l,s+t);a.v.set(n.values.v,o);for(let d=0;d<t;d++){o=d*l;const v=n.classNames[d];for(let h=0;h<l;h++)a.v[o+h]=n.classes[h]===v?1:-1}const c=[...n.classNames,...n.varlabels],u=[...Dt(1,t),...n.varvalues],f=[...Dt(0,t-1),...n.varindices];return{values:a,nresp:t,varlabels:c,varvalues:u,varindices:f,header:n.header,hasLabels:n.hasLabels,hasClassNames:n.hasClassNames,labelsVarname:n.labelsVarname,classLabelsVarname:n.classLabelsVarname,objlabels:n.objlabels,objindices:n.objindices,varrev:n.varrev,classes:n.classes,classNames:n.classNames,sep:n.sep,dec:n.dec,varvaluesName:n.varvaluesName,varvaluesUnits:n.varvaluesUnits,varAxisTitle:n.varAxisTitle}}var Su=G('<button tabindex="0" class="button svelte-1to1iow"> </button>');function tt(n,e){let t=V(e,"text",3,"button");var s=Su();s.__click=function(...o){e.onclick?.apply(this,o)};var l=H(s);ae(()=>Ee(l,t())),N(n,s)}lt(["click"]);var Au=G('<button tabindex="0"></button>');function sn(n,e){V(e,"disable",3,!1);var t=Au();t.__click=function(...s){e.onclick?.apply(this,s)},ae(()=>{B(t,"title",e.title),B(t,"aria-label",e.title),B(t,"alt",e.title),ct(t,1,`button ${e.className??""}`,"svelte-qbt64")}),N(n,t)}lt(["click"]);function nr(n,e){let t=V(e,"title",3,"Reset");sn(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function Cu(n,e){let t=V(e,"title",3,"Undo");sn(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function Nu(n,e){let t=V(e,"title",3,"Download");sn(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-download"})}function Pu(n,e){let t=V(e,"title",3,"Add");sn(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-add"})}function _a(n,e){let t=V(e,"title",3,"Settings");sn(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-settings"})}function Tu(n,e){let t=V(e,"title",3,"Move up");sn(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-up"})}function ju(n,e){let t=V(e,"title",3,"Move down");sn(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-down"})}function Pt(n){const e={};for(const t of Object.keys(n))e[t]=n[t].default;return e}var Lu=G('<span class="label svelte-1bhp5bp"> </span>'),Mu=G("<div><!> <!></div>");function ie(n,e){let t=V(e,"label",3,null),s=V(e,"name",3,""),l=V(e,"status",3,""),o=V(e,"colors",3,""),a=V(e,"labelWidth",3,12);var c=Mu(),u=H(c);{var f=v=>{var h=Lu(),m=H(h);ae(()=>{ot(h,`flex-basis:${a()??""}ch;`),Ee(m,t())}),N(v,h)};Y(u,v=>{t()&&v(f)})}var d=R(u,2);Er(d,()=>e.children??wt),ae(()=>{ct(c,1,`control-element ${s()??""} ${l()??""}`,"svelte-1bhp5bp"),ot(c,o())}),N(n,c)}var Ru=G('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function zr(n,e){we(e,!0);let t=V(e,"min",7,0),s=V(e,"max",3,100),l=V(e,"value",31,()=>Re(t())),o=V(e,"decNum",3,1),a=V(e,"step",19,()=>+((s()-t())/100).toFixed(4)),c=V(e,"onchange",3,null);ge(()=>{l()<t()&&(l(t()),c()&&c()(l())),l()>s()&&(l(s()),c()&&c()(l())),t()>s()&&t(s())});let u=te(void 0),f=te(void 0),d=te(!1);const v=E=>{const y=t()+E*(s()-t());return+(Math.round(y/a())*a()).toFixed(4)},h=E=>{const y=r(u).getBoundingClientRect(),M=r(f).getBoundingClientRect(),O=y.x,W=M.x+M.width;return(E.clientX-O)/(W-O)},m=E=>{const y=h(E);y<0||y>1||F(d,y*100>r(k)-5&&y*100<r(k)+5,!0)},b=E=>{F(d,!1)},g=E=>{F(d,!1);const y=h(E);y<0||y>1||(l(v(y)),c()&&c()(l()))},_=E=>{let y=l()+a()*E.deltaY*.5;y<t()&&(y=t()),y>s()&&(y=s()),l(+(Math.round(y/a())*a()).toFixed(4)),E.preventDefault(),c()&&c()(l())},w=E=>{if(!r(d))return;const y=h(E);y<0||y>1||(l(v(y)),c()&&c()(l()))},A=E=>{if(E.key==="ArrowLeft"){l(l()-a()<t()?t():l()-a()),c()&&c()(l());return}if(E.key==="ArrowRight"){l(l()+a()>s()?s():l()+a()),c()&&c()(l());return}},k=p(()=>t()===s()?100:(l()-t())/(s()-t())*100);var S=Ru();S.__keydown=A,S.__mousemove=w,S.__mousedown=m,S.__mouseup=g,S.__touchmove=w,S.__touchstart=m,S.__touchend=g;var C=H(S);let T;var P=H(C);let j;var q=H(P);$r(C,E=>F(u,E),()=>r(u)),$r(S,E=>F(f,E),()=>r(f)),ae(E=>{B(S,"aria-valuenow",l()),B(S,"aria-valuemin",t()),B(S,"aria-valuemax",s()),T=ct(C,1,"range-slider svelte-7wycr",null,T,{"range-slider_right":r(k)<50}),ot(C,`width:${r(k)??""}%`),j=ct(P,1,"range-value svelte-7wycr",null,j,{"range-value_right":r(k)<50}),Ee(q,E)},[()=>l().toFixed(o())]),Jr("mousewheel",S,_),Jr("mouseleave",S,b),Jr("touchcancel",S,b),N(n,S),ye()}lt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var Fu=G('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function ur(n,e){we(e,!0);let t=V(e,"min",3,0),s=V(e,"max",3,10),l=V(e,"value",31,()=>Re(t())),o=V(e,"step",3,1);l()<t()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(t())),l()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(s())),t()>s()&&console.error("The min and max values must be distinct.");let a=te(void 0),c=te(void 0),u=te(!1);const f=p(()=>t()===s()?0:(l()-t())/(s()-t()+o())),d=p(()=>o()/(s()-t()+o())),v=p(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${r(d)*100}%, var(--bg-color-light2, #e8e8e8) ${r(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*r(d)}%)`:"background: #f0f0f0"),h=E=>{if(E<0||E>1)return l();let y=l();return Math.round(r(d)/E),E<r(f)&&r(f)>0&&(y=l()-o()*Math.ceil((r(f)-E)/r(d))),E>r(f)+r(d)&&r(f)+r(d)<1&&(y=l()+o()*Math.ceil((E-(r(f)+r(d)))/r(d))),y<t()&&(y=t()),y>s()&&(y=s()),y},m=E=>{const y=r(c).getBoundingClientRect(),M=y.x,O=y.x+y.width;return(E.clientX-M)/(O-M)},b=E=>{const y=m(E);y<0||y>1||F(u,y>r(f)&&y<r(d)+r(f),!0)},g=E=>{F(u,!1)},_=E=>{F(u,!1);const y=m(E);if(y<0||y>1)return;const M=h(y);l()!==M&&l(M)},w=E=>{let y=l()+Math.round(E.deltaY*.5)*o();y<t()&&(y=t()),y>s()&&(y=s()),l(y),E.preventDefault()},A=E=>{if(!r(u))return;const y=m(E);if(y<0||y>1)return;const M=h(y);M!=l()&&l(M)},k=E=>{if(E.key==="ArrowLeft"){l(l()-o()<t()?t():l()-o());return}if(E.key==="ArrowRight"){l(l()+o()>s()?s():l()+o());return}};var S=Fu();S.__keydown=k,S.__mousemove=A,S.__mousedown=b,S.__mouseup=_,S.__touchmove=A,S.__touchstart=b,S.__touchend=_;var C=H(S);let T;var P=H(C);let j;var q=H(P);$r(C,E=>F(a,E),()=>r(a)),$r(S,E=>F(c,E),()=>r(c)),ae(E=>{B(S,"aria-valuenow",l()),B(S,"aria-valuemin",t()),B(S,"aria-valuemax",s()),ot(S,r(v)),T=ct(C,1,"range-slider svelte-1lbks0y",null,T,{"range-slider_left":r(d)<.1&&r(f)<.5,"range-slider_right":r(d)<.1&&r(f)>=.5}),ot(C,`width: max(2px, ${r(d)*100}%);left:${r(f)*100}%;`),j=ct(P,1,"range-value svelte-1lbks0y",null,j,{"range-value_right":r(d)<.1&&r(f)>.5,"range-value_left":r(d)<.1&&r(f)<=.5}),Ee(q,E)},[()=>l().toFixed(0)]),Jr("mousewheel",S,w),Jr("mouseleave",S,g),Jr("touchcancel",S,g),N(n,S),ye()}lt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var qu=G('<button tabindex="-1"><!></button>'),zu=G('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function Xe(n,e){we(e,!0);let t=V(e,"value",31,()=>Re(e.options[0])),s=V(e,"className",3,"");const l=u=>{if(u.key==="ArrowLeft"){const f=e.options.findIndex(d=>d===t());f>0&&t(e.options[f-1]);return}if(u.key==="ArrowRight"){const f=e.options.findIndex(d=>d===t());f<e.options.length-1&&t(e.options[f+1]);return}};var o=zu(),a=Z(o);a.__keydown=l,Ve(a,20,()=>e.options,u=>u,(u,f)=>{var d=qu();d.__click=()=>t(f);let v;var h=H(d);mt(h,()=>f),ae(m=>v=ct(d,1,`option option_${m??""}`,"svelte-bifhtc",v,{selected:f==t()}),[()=>f.toString().replace(".","_")]),N(u,d)});var c=R(a,2);ae(()=>ct(a,1,`selector ${s()??""}`,"svelte-bifhtc")),Gs(c,t),N(n,o),ye()}lt(["keydown","click"]);function fr(n,e){we(e,!0);let t=V(e,"options",19,()=>["no","yes"]),s=V(e,"value",15,!1),l=te(!0);const o=p(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());ge(()=>F(l,s()?t()[1]:t()[0],!0)),ge(()=>s(r(l)===t()[1]));var a=ve(),c=Z(a);{var u=f=>{Xe(f,{get options(){return r(o)},get value(){return r(l)},set value(d){F(l,d,!0)}})};Y(c,f=>{r(o)&&f(u)})}N(n,a),ye()}var Iu=G('<input type="file" multiple class="svelte-xoa0sf"/>'),Ou=G('<input type="file" class="svelte-xoa0sf"/>'),Vu=G('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function hs(n,e){we(e,!0);let t=V(e,"file",15),s=V(e,"message",3,"Select CSV file with dataset"),l=V(e,"acceptType",3,".csv"),o=V(e,"multiple",3,!1),a=te(void 0);function c(k){r(a)&&r(a).files.length>0?t(r(a).files.length===1?r(a).files[0]:r(a).files):t(null)}function u(k){(k.type==="click"||k.type==="keydown"&&(k.code==="Space"||k.code==="Enter"))&&r(a).click()}function f(k){r(a).value=null,t(null)}var d=Vu(),v=Z(d);v.__keydown=u,v.__click=u;let h;var m=H(v),b=R(m);{var g=k=>{var S=Iu();S.__change=c,$r(S,C=>F(a,C),()=>r(a)),ae(()=>B(S,"accept",l())),N(k,S)},_=k=>{var S=Ou();S.__change=c,$r(S,C=>F(a,C),()=>r(a)),ae(()=>B(S,"accept",l())),N(k,S)};Y(b,k=>{o()?k(g):k(_,!1)})}var w=R(v,2);{var A=k=>{nr(k,{onclick:f})};Y(w,k=>{t()&&k(A)})}ae(()=>{h=ct(v,1,"file-selector svelte-xoa0sf",null,h,{selected:t()}),Ee(m,`${(t()?t().length>1?`Selected ${t().length} files`:t().name:s())??""} `)}),N(n,d),ye()}lt(["keydown","click","change"]);var Bu=G('<div class="error-message svelte-11e14eb"> </div>'),Du=G('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function wa(n,e){we(e,!0);let t=V(e,"value",15,""),s=V(e,"className",3,""),l=V(e,"placeholder",3,""),o=V(e,"maxLength",3,25),a=V(e,"validator",3,null),c=te("");function u(){a()&&F(c,a()(t()),!0)}var f=Du();let d;var v=H(f);v.__input=u;var h=R(v,2);{var m=b=>{var g=Bu(),_=H(g);ae(()=>Ee(_,r(c))),N(b,g)};Y(h,b=>{r(c)&&r(c).length>0&&b(m)})}ae(()=>{d=ct(f,1,`textinput ${s()??""}`,"svelte-11e14eb",d,{error:r(c)&&r(c).length>0}),B(v,"placeholder",l()),B(v,"maxlength",o())}),Gs(v,t),N(n,f),ye()}lt(["input"]);var Yu=G('<div class="spinner svelte-wlgijz"></div>');function ml(n){var e=Yu();N(n,e)}var Wu=G('<button tabindex="-1"><!></button>'),Hu=G('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-142p4sy"></div> <input class="svelte-142p4sy"/>',1);function ya(n,e){we(e,!0);let t=V(e,"options",19,()=>["p","l","b","h","qq"]),s=V(e,"value",31,()=>Re(t()[0]));const l=v=>{if(v.key==="ArrowLeft"){const h=t().findIndex(m=>m===s());h>0&&s(t()[h-1]);return}if(v.key==="ArrowRight"){const h=t().findIndex(m=>m===s());h<t().length-1&&s(t()[h+1]);return}},o='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var u=Hu(),f=Z(u);f.__keydown=l,Ve(f,20,t,v=>v,(v,h)=>{var m=Wu();m.__click=()=>s(h);let b;var g=H(m);mt(g,()=>o+a[h]+"</svg>"),ae(()=>{b=ct(m,1,"option svelte-142p4sy",null,b,{selected:h==s()}),B(m,"title",c[h])}),N(v,m)});var d=R(f,2);Gs(d,s),N(n,u),ye()}lt(["keydown","click"]),lt(["keydown","click"]);var Uu=G("<h2> </h2>"),Gu=G("<!> <!>",1),Xu=G('<div class="widget"><!></div>');function Ku(n,e){we(e,!0);let t=V(e,"title",3,""),s=V(e,"value",15),l=V(e,"labelWidth",3,13);function o(f){const d={};for(const v of Object.keys(f))d[v]=f[v].default;return d}ge(()=>{!s()&&e.options&&s(o(e.options))});var a=Xu(),c=H(a);{var u=f=>{var d=Gu(),v=Z(d);{var h=b=>{ie(b,{children:(g,_)=>{var w=Uu(),A=H(w);ae(()=>Ee(A,t())),N(g,w)},$$slots:{default:!0}})};Y(v,b=>{t()&&b(h)})}var m=R(v,2);Ve(m,17,()=>Object.keys(e.options),We,(b,g)=>{const _=p(()=>e.options[r(g)]);var w=ve(),A=Z(w);{var k=S=>{ie(S,{get name(){return r(_).name},get label(){return r(_).label},get labelWidth(){return l()},children:(C,T)=>{var P=ve(),j=Z(P);Fn(j,()=>r(_).el,(q,E)=>{E(q,Rr(()=>r(_).props,{get value(){return s()[r(g)]},set value(y){s(s()[r(g)]=y,!0)}}))}),N(C,P)},$$slots:{default:!0}})};Y(A,S=>{r(_).hidden||S(k)})}N(b,w)}),N(f,d)};Y(c,f=>{s()&&f(u)})}N(n,a),ye()}function Ju(n,e,t,s,l,o){const a=Object.keys(t),c=a[0],u=a[1],f=t[c],d=t[u];let v=0;for(let h of e.v){let m=0;for(let g of f)m+=n[g]>h;s[v]=m/t[c].length;let b=0;for(let g of d)b+=n[g]<=h;l[v]=b/t[u].length,o[v]=Math.sqrt(s[v]*l[v]),v+=1}}function Zu(n,e,t,s,l,o,a,c,u,f,d,v,h){const m=Object.keys(t),b=n.length;for(let g of[0,1]){const _=g==0?(C,T)=>C>=T:(C,T)=>C<T,w=t[m[g]],A=t[m[1-g]];let k=0,S=g==0?-1:1;for(let C of e.v){let T=s[g]+S*C*l[g],P=o[g]+S*C*a[g],j=0,q=0;for(let M of w)j+=_(n[M],T),q+=_(n[M],P);c[k]+=j/b,d[k]+=q/b;let E=0,y=0;for(let M of A)E+=!_(n[M],T),y+=!_(n[M],P);u[k]+=E/b,v[k]+=y/b,k+=1}}for(let g=0;g<e.length;g++)f[g]=Math.sqrt(c[g]*u[g]),h[g]=Math.sqrt(d[g]*v[g])}function gl(n,e,t){const s=n.ncomp;n.nrows;const l=Object.keys(t),o=Xt(be.seq(.9999,.9991,-1e-4),be.seq(.999,.991,-.001),be.seq(.99,.7999,-.01)),a=[1,11,16,20,25,29,34,38],c=["20","10","5","1","0.5","0.1","0.05","0.01"],u=[1,11,21,31,41,51,61,71,81,91,101],f=Dt(-10,10,2).map(P=>(P/10).toFixed(1)),d=Nr(o),v=be.seq(1,-1,-.02),h=d.length,m=v.length,b=pe.zeros(h,s),g=pe.zeros(h,s),_=pe.zeros(h,s),w=pe.zeros(h,s),A=pe.zeros(h,s),k=pe.zeros(h,s),S=pe.zeros(m,s),C=pe.zeros(m,s),T=pe.zeros(m,s);for(let P=1;P<=s;P++){const j=Bt(n,"Yp",P,1),q=e[l[0]].classic,E=q.m[P-1],y=q.s[P-1],M=e[l[0]].robust,O=M.m[P-1],W=M.s[P-1],L=e[l[1]].classic,I=L.m[P-1],Q=L.s[P-1],U=e[l[1]].robust,K=U.m[P-1],D=U.s[P-1];Ju(j,v,t,C.getcolref(P),T.getcolref(P),S.getcolref(P)),Zu(j,d,t,[E,I],[y,Q],[O,K],[W,D],g.getcolref(P),_.getcolref(P),b.getcolref(P),A.getcolref(P),k.getcolref(P),w.getcolref(P))}return{hard:{ticks:u,tickLabels:f,values:v,stat:{sens:C,spec:T,eff:S}},soft:{ticks:a,tickLabels:c,values:o,stat:{classic:{sens:g,spec:_,eff:b},robust:{sens:A,spec:k,eff:w}}}}}function xa(n,e){const t=[],s=[];for(let o=0;o<n.length;o++)n[o]>0?t.push(o):s.push(o);const l={};return l[e[0]]=t,l[e[1]]=s,l}function Qu(n,e,t,s,l){const o=n.length,a=e.classNames,c=s===0?1:0;let u=0,f=0,d=0,v=0;const h=e.params[a[s]][e.limType],m=h.m[l],b=h.s[l],g=new Array(o),_=new Array(o),w=e.alpha/100,A=s==0?C=>zn(C,m,b):C=>1-zn(C,m,b);if(!t){for(let C=0;C<o;C++)_[C]=A(n[C]),g[C]=_[C]>=w;return[u,v,f,d,g,_]}const k=t[a[s]],S=t[a[c]];for(let C of k)_[C]=A(n[C]),g[C]=_[C]>=w,u+=g[C],v+=1-g[C];for(let C of S)_[C]=A(n[C]),g[C]=_[C]>=w,d+=1-g[C],f+=g[C];return[u,v,f,d,g,_]}function $u(n,e,t,s,l){const o=n.length,a=e.threshold,c=e.classNames,u=s===0?1:0;let f=0,d=0,v=0,h=0;const m=new Array(o),b=new Array(o),g=s==0?A=>A>a:A=>A<=a;if(!t){for(let A=0;A<o;A++)m[A]=g(n[A]);return[f,h,d,v,m,b]}const _=t[c[s]],w=t[c[u]];for(let A of _)m[A]=g(n[A]),b[A]=m[A],f+=m[A],h+=1-m[A];for(let A of w)m[A]=g(n[A]),b[A]=m[A],v+=1-m[A],d+=m[A];return[f,h,d,v,m,b]}function ms(n,e,t){const s=n.ncomp,l=n.nrows,o=e.classNames,a=o.length,c={},u=e.rule==="hard"?$u:Qu,f=t!==null,d=new Array(s).fill(0),v=new Array(s).fill(0),h=new Array(s).fill(0),m=new Array(s).fill(0);for(let b=0;b<a;b++){const g=new Array(s),_=new Array(s),w=new Array(s),A=new Array(s),k=new Array(s),C=(f?t[o[b]].length:1)/l,T=1-C;for(let j=0;j<s;j++){const q=Bt(n,"Yp",j+1,1),[E,y,M,O,W,L]=u(q,e,t,b,j);f&&(_[j]=E>0?E/(E+y):0,w[j]=O>0?O/(O+M):0,A[j]=Math.sqrt(_[j]*w[j]),k[j]=E>0&&O>0?(E+O)/(E+O+M+y):0,d[j]+=_[j]*C,v[j]+=w[j]*T),g[j]={TP:E,FN:y,FP:M,TN:O,d:W,p:L,yp:new be(q)}}const P={sensitivity:_,specificity:w,efficiency:A,accuracy:k};c[o[b]]={res:g,stat:P}}for(let b=0;b<s;b++)h[b]=Math.sqrt(d[b]*v[b]),m[b]=d[b]*.5+v[b]*.5;return c.total={stat:{sensitivity:d,specificity:v,efficiency:h,accuracy:m}},{class:["dares"],objlabels:n.objlabels,threshold:e.threshold,rule:e.rule,alpha:e.alpha,crit:e.crit,params:e.params,limType:e.limType,ind:t,nclasses:a,classNames:o,nrows:l,ncomp:s,v:c}}function gs(n,e,t,s){let l=n.pls.outliers,o=n.pls.exclvars;(!l||!Array.isArray(l))&&(l=[]),(!o||!Array.isArray(o))&&(o=[]);const a=e.sep,c=e.values.nrows,u=l.length,f=c-u,d=n.pls.ncomp,v=n.da.classNames,h=n.da.ind!==null,m=Array(d).fill(""),b=Array(d).fill(0).map((q,E)=>"LV"+(E+1));let g="";if(g+=["Number of LVs:",d,...m].join(a)+`
`,g+=["Optinal number of LVs:",s,...m].join(a)+`
`,g+=["Center:",n.pls.center,...m].join(a)+`
`,g+=["Scale:",n.pls.scale,...m].join(a)+`
`,l.length>0&&(g+=["Removed outliers:",l.length,...m].join(a)+`
`),o.length>0&&(g+=["Excluded variables:",o.length,...m].join(a)+`
`),g+=`
`,g+=["Classification rule:",n.da.rule,...m].join(a)+`
`,n.da.rule==="soft"){g+=["Alpha (%):",n.da.alpha,...m].join(a)+`
`,g+=["Limits:",n.da.limType,...m].join(a)+`
`;for(let q of v){const E=n.da.crit[q];g+=`
`,g+=["Class:"+a+q,...m].join(a)+`
`,g+=["Mean:",E[0],...m].join(a)+`
`,g+=["Deviation:",E[1],...m].join(a)+`
`,g+=["Critical value:",E[2],...m].join(a)+`
`}}else g+=["Threshold:",n.da.threshold,...m].join(a)+`
`;if(g+=`
`,h){g+=["Variances:","",...m].join(a)+`
`,g+=["",...b].join(a)+a+`
`,g+=["xexpvar:",...n.pls.stat.xexpvar].join(a)+a+`
`,g+=["xcumexpvar",...n.pls.stat.xcumexpvar].join(a)+a+`
`,g+=["yexpvar:",...n.pls.stat.yexpvar].join(a)+a+`
`,g+=["ycumexpvar:",...n.pls.stat.ycumexpvar].join(a)+a+`
`,g+=["RMSE:",...n.pls.stat.rmse.v].join(a)+a+`
`,g+=`
`;for(let E of v){const y=n.da.v[E].stat;g+=["Class:"+a+E,...m].join(a)+`
`,g+=["FoMs:",...b].join(a)+a+`
`,g+=["Senstivitiy",...y.sensitivity].join(a)+a+`
`,g+=["Specificity",...y.specificity].join(a)+a+`
`,g+=["Efficiency",...y.efficiency].join(a)+a+`
`,g+=["Accuracy",...y.accuracy].join(a)+a+`
`,g+=`
`}const q=n.da.v.total.stat;g+=["Total:"+a,...m].join(a)+`
`,g+=["FoMs:",...b].join(a)+a+`
`,g+=["Senstivitiy",...q.sensitivity].join(a)+a+`
`,g+=["Specificity",...q.specificity].join(a)+a+`
`,g+=["Efficiency",...q.efficiency].join(a)+a+`
`,g+=["Accuracy",...q.accuracy].join(a)+a+`
`,g+=`
`}let _=0;const w=n.pls.objlabels,A=h?n.pls.Yref.getcolref(1):new Array(f).fill("-"),k=n.da.v[v[0]].res[s-1],S=n.da.v[v[1]].res[s-1];if(n.da.rule==="soft"){g+=["object","class","y (reference)","y (predicted)","decision ("+v[0]+")","p-score ("+v[0]+")","decision ("+v[1]+")","p-score ("+v[1]+")"].join(a)+a+`
`;for(let E=0;E<c;E++){if(u>0&&l.includes(E)){g+=[w[E],...Array(7).fill("-")].join(a)+a+`
`;continue}g+=[w[E],e.classes[E],A[_],k.yp.v[E],k.d[E]?"in":"out",k.p[E],S.d[E]?"in":"out",S.p[E]].join(a)+a+`
`,_=_+1}}else{g+=["object","y (predicted)","decision"].join(a)+a+`
`;for(let E=0;E<c;E++){if(u>0&&l.includes(E)){g+=[w[E],...Array(4).fill("-")].join(a)+a+`
`;continue}g+=[w[E],k.yp.v[E],k.d[E]?v[0]:v[1]].join(a)+a+`
`,_=_+1}}g+=`
`,e.dec!=="."&&(g=g.replace(/\./g,e.dec)),g=["Data filename:",e.fileName,...m].join(e.sep)+`
`+g;let C=["PLS1-DA results ("+t+")","https://mda.tools/pls1da/",...m].join(e.sep)+`

`;const T=new Blob([C+g],{type:"text/csv"}),P=window.URL.createObjectURL(T),j=document.createElement("a");j.setAttribute("href",P),j.setAttribute("download",`pls1da-results-${t}.csv`),j.click()}function ka(n,e){n.pls.prep=e;const t=new Blob([JSON.stringify(n,Vn)],{type:"application/json"}),s=window.URL.createObjectURL(t),l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download","pls1da-model.json"),l.click()}var ef=G('<span class="item svelte-igakmm"> </span>'),tf=G('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function pl(n,e){we(e,!0);var t=ve(),s=Z(t);{var l=o=>{ie(o,{children:(a,c)=>{var u=tf(),f=Z(u),d=R(H(f),2);Ve(d,17,()=>e.outliers,We,(b,g)=>{var _=ef(),w=H(_);ae(()=>Ee(w,e.dataset.objlabels[r(g)])),N(b,_)});var v=R(f,2);{var h=b=>{Cu(b,{get onclick(){return e.undoOutliers}})};Y(v,b=>{e.outliers.length>1&&b(h)})}var m=R(v,2);nr(m,{get onclick(){return e.resetOutliers}}),N(a,u)},$$slots:{default:!0}})};Y(s,o=>{e.dataset&&e.outliers&&e.outliers.length>0&&o(l)})}N(n,t),ye()}var rf=G('<p class="exclvars svelte-12e65an"><span style="color:#a0a0a0;">Excluded</span> <span style="color:#504040;"> </span> <span style="color:#a0a0a0;">variables</span></p> <!>',1);function nf(n,e){we(e,!0);var t=ve(),s=Z(t);{var l=o=>{ie(o,{children:(a,c)=>{var u=rf(),f=Z(u),d=R(H(f),2),v=H(d),h=R(f,2);nr(h,{get onclick(){return e.resetExclvars}}),ae(()=>Ee(v,e.exclvars.length)),N(a,u)},$$slots:{default:!0}})};Y(s,o=>{e.exclvars&&e.exclvars.length>0&&o(l)})}N(n,t),ye()}const sf={small:30,medium:40,large:50,xlarge:60},lf={small:5,medium:8,large:12,xlarge:15},of={small:6,medium:10,large:14,xlarge:18},bl={small:4,medium:6,large:8,xlarge:10},af={small:12,medium:15,large:19,xlarge:21},_l={small:11,medium:15,large:17,xlarge:19},yn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},xn=["●","◼","▲","▼","⬥","＋","✳","✕"],cf=.8,Ea=.5,uf={small:5,medium:8,large:12,xlarge:15},ff=12,gt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Sa(n){let e=Array(n);for(let t=0;t<n;t++)e[t]=t+1;return e}function Aa(n,e){return Array.isArray(n)&&n.length===e&&!n.some(t=>t===void 0)&&!n.some(t=>isNaN(t))}function Ca(n,e){if(n!=null&&(Array.isArray(n)&&(n=Fe(n)),!(!De(n)||n.length<1)))return n.apply(t=>xl((t-e[1])*e[0]+e[2])).v}function rt(n,e){return Ca(n,e.coords)}function Bn(n,e){return Ca(n,e.objects)}function Na(n,e){if(n!=null&&(Array.isArray(n)&&(n=Fe(n)),!(!De(n)||n.length<1)))return n.apply(t=>(t-e[2])/e[0]+e[1]).v}function Pa(n,e){return Na(n,e.coords)}function Ta(n,e){return Na(n,e.objects)}function wl(n){return n===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${n.toString()}</tspan>`}function ln(n){if(n===Math.round(n))return n;if(Math.abs(n)>10**6)return Math.round(n);if(Math.abs(n)<10**-6)return n;let e=n.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function yl(n){if(n===void 0)return[0,void 0];if(n.length<1)return[0,void 0];if(n.length===1)return[0,[n[0].toString()]];let e=ln(Math.abs(Cr(Zo(n)))),t=0;if(e>=1)return e<100?[0,Array.from(n).map(o=>o.toFixed(0))]:(t=Math.ceil(ln(Math.log10(e)))-2,[t,Array.from(n).map(o=>(o/Math.pow(10,t)).toFixed(0))]);let s=Math.ceil(-ln(Math.log10(e)));return s<=2?[0,Array.from(n).map(l=>l.toFixed(s))]:(t=s-2,s=2,ln(Math.abs(cr(n)))<=10?[-t,Array.from(n).map(l=>(l*Math.pow(10,t)).toFixed(s))]:[-t,Array.from(n).map(l=>(l/Math.pow(10,t)).toString())])}function kt(n,e,t){return Array.isArray(n)&&(n=Fe(n)),De(n)?n.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&n.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):n:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function ps(n,e,t,s){if(!n||!e||n.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=t.coords,o=s.coords;let a="";for(let c=0;c<n.length;c++){const u=xl((n.v[c]-l[1])*l[0]+l[2]),f=xl((e.v[c]-o[1])*o[0]+o[2]);a+=u+","+f+" "}return a}function ja(n,e){return n?Array.isArray(n)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==n.length?[null,"number of tick labels and values should be the same."]:[n.map(t=>Or(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function La(n,e){if(Array.isArray(n)&&(n=Fe(n)),!De(n))return[null,"tick values must be provided as an array or as a vector."];if(n.v.some(a=>isNaN(a)))return[null,"tick values must be numeric"];const t=new Set(n.v);if(n.length!==t.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],o=n.filter(a=>a>=s&a<=l);return o.length!==n.length?[null,"some of ticks values are outside axis limits."]:[o,""]}function Ma(n,e,t,s,l,o){l==null&&(l=!1),o===void 0&&(o=1e-4);const a=e[0]<e[1]?e:[e[1],e[0]];if(n)return n;if(typeof a!="object"||a[0]===void 0||a[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const c=Math.abs(a[1]-a[0])*o,u=a[1]-a[0]-2*c,f=Math.floor(Math.log10(u)),d=1/Math.pow(10,f-1),v=Math.round(u*d)/d;let h=df(v/t);l&&(Math.abs(a[1]-a[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let m=Math.ceil((a[0]+c)/h)*h,b=Math.floor((a[1]-c)/h)*h;Math.abs(a[0]-m)<h/10&&(m=m+h),Math.abs(a[1]-b)<h/10&&(b=b-h),t=Math.ceil(ln((b-m)/h))+1,n=be.zeros(t);for(let g=0;g<t;g++)n.v[g]=m+h*g;if(Math.abs(h)<1){const g=Math.pow(10,1+Math.round(-Math.log10(h)));n=n.apply(_=>Math.round((_+Number.EPSILON)*g)/g)}return n.filter(g=>g>=a[0]&g<=a[1])}function df(n,e){const t=Math.floor(Math.log10(n)),s=n/Math.pow(10,t);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,t)}function xl(n){return Math.round(n*10)/10}function vf(n,e){return e<300.2||n<400.2?"small":e<400.2||n<700.2?"medium":e<650.2||n<850.2?"large":"xlarge"}function Ra(n,e){return n<400.2?"small":n<700.2?"medium":n<900.2?"large":"xlarge"}function hf(){const n=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;n[e]=t}return n}function mf(n){let e=-1,t=hf();for(let s=0;s<n.length;s++)e=t[(e^n[s])&255]^e>>>8;return e^-1}function gf(n,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const s=mf(t),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;const a=new Uint8Array(54);return a.set(n,0),a.set(o,33),a.set(t,37),a.set(l,50),a}function pf(n,e){const t=n.split(","),s=t[0],l=t[1],o=33/3*4,a=l.substring(0,o),c=l.substring(o),u=atob(a),f=new Uint8Array(u.length);for(let h=0;h<f.length;h++)f[h]=u.charCodeAt(h);const d=gf(f,e),v=btoa(String.fromCharCode(...d));return[s,",",v,c].join("")}function bf(n,e,t,s,l){if(t||(t=10),s||(s=10),l||(l=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!n||!(n instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const o=t/2.54*l,a=s/2.54*l;setTimeout(()=>{const c=n.clientHeight,u=n.clientWidth;let f=Math.max(o/u,a/c),d=1;f<1&&(d=f,f=1);const v=document.createElement("canvas"),h=v.getContext("2d");v.width=u*(d<1?d:f),v.height=c*(d<1?d:f),n.setAttribute("width",u*f),n.setAttribute("height",c*f),h.fillStyle="white",h.fillRect(0,0,v.width,v.height),h.scale(f,f);const m=new XMLSerializer().serializeToString(n),b=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),g=URL.createObjectURL(b),_=new Image;_.onload=function(){d<0&&(_.width=_.width*d,_.height=_.height*d),h.drawImage(_,0,0,v.width,v.height);const w=v.toDataURL("image/png"),A=pf(w,l),k=document.createElement("a");k.href=A,k.download=`${e}.png`,k.click()},_.src=g},20)}function _f(n,e){if(!n||!(n instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=n.clientHeight,s=n.clientWidth;n.setAttribute("width",s+"px"),n.setAttribute("height",t+"px"),n.setAttribute("viewBox",`0 0 ${s} ${t}`);const l=new Blob([n.outerHTML],{type:"image/svg+xml"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.svg`),a.click()}function wf(n,e,t,s){const l=n.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":yf(e,t,s)})]).then(()=>{n.classList.add("copied"),n.textContent="✓ done",setTimeout(()=>{n.classList.remove("copied"),n.textContent=l},500)},o=>{console.error(o),n.classList.add("error"),n.textContent="x copy",setTimeout(()=>{n.classList.remove("error"),n.textContent=l},500)}).catch(o=>console.error(o))}async function yf(n,e,t){const s=n.clientHeight,l=n.clientWidth,o=Math.max(e/l,t/s),a=document.createElement("canvas"),c=a.getContext("2d");return a.width=l*o,a.height=s*o,c.scale(o,o),n.setAttribute("width",a.width),n.setAttribute("height",a.height),await new Promise((f,d)=>{const v=new XMLSerializer().serializeToString(n),h=new Blob([v],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,b=m.createObjectURL(h),g=new Image;g.onload=function(){c.drawImage(g,0,0,a.width,a.height),m.revokeObjectURL(b),a.toBlob(function(_){_?f(_):d(new Error("Failed to create blob"))},"image/png")},g.onerror=function(_){d(_)},g.src=b})}function kl(n,e){return n>16&&(n=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][n-1]}function xf(n,e,t,s,l){let o=l.error?null:l.ticks,a=l.error?null:l.tickLabels,c=0;const u=Ma(o,n,lf[t.x],!0,l.whole),f=u.length,d=Ta([bl[t.plot]],s)[0],v=be.fill(e[0],f),h=v.add(d),m=be.fill(e[1],f);if(a||(o?(c=0,a=o.v.map(j=>ln(j).toString())):[c,a]=yl(u.v)),!a||a.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[u,v],[u,m]],g=[[Fe([n[0]]),Fe([e[0]])],[Fe([n[1]]),Fe([e[0]])]],_=[[u,h],[u,v]],w=(n[1]-n[0])*.01,A=[[null,null],[[n[1]-(c>9?1:0)*w],[v.v[f-1]]]],k=wl(c),S=a.length,C=Math.abs(n[1]>n[0]?n[1]-u.v[S-1]:n[1]-u.v[0]),T=Math.abs(n[1]-n[0]),P=Math.abs(u.v[1]-u.v[0]);if(k.length>0&&C<T*.1&&C<P*.5){const j=n[1]>n[0]?S-1:0;a[j]=" "}return{grid:b,axisLine:g,tickCoords:_,tfCoords:A,ticks:o,tickLabels:a,tickFactor:c,tfLabel:k}}function kf(n,e,t,s,l){let o=l.ticks,a=l.tickLabels,c=0;const u=Ma(l.ticks,e,of[t.y],!0,l.whole),f=u.length,d=Ta([bl[t.plot]],s)[0],v=be.fill(n[0],f),h=v.add(d),m=be.fill(n[1],f);if(a||(o?(c=0,a=o.v.map(P=>ln(P).toString())):[c,a]=yl(u.v)),a.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[v,u],[m,u]],g=[[Fe([n[0]]),Fe([e[0]])],[Fe([n[0]]),Fe([e[1]])]],_=[[v,u],[h,u]],w=[[[],[]],[[h.v[f-1]+(Math.abs(c)>9?3:2)*d],[e[1]]]],A=wl(c),k=a.length,S=Math.abs(e[1]>e[0]?e[1]-u.v[k-1]:e[1]-u.v[0]),C=Math.abs(e[1]-e[0]),T=Math.abs(u.v[1]-u.v[0]);if(A.length>0&&S<C*.1&&S<T*.5){const P=e[1]>e[0]?k-1:0;a[P]=" "}return{grid:b,axisLine:g,tickCoords:_,tfCoords:w,ticks:o,tickLabels:a,tickFactor:c,tfLabel:A}}function Ef(n){if(!n.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=De(n.breaks)?n.breaks.v:n.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!n.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(n.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(n.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=n.colmap;let s,l;if(n.labels?(s=n.labels,l=0):[l,s]=yl(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const o=s.length===t.length;return{colmap:t,breaks:e,labels:s,isCentered:o,labelsFactor:l,fontSize:n.fontSize,labelColor:n.labelColor}}function Sf(n,e,t,s){const l=n.colmap.length,o=e*cf,a=o/l,c=t[1]+(e-o)*.5,u=uf[s.y],f=t[2]+u*Ea,d=f+u*(1+Ea),v=n.isCentered?a/2:0;return{start:c,top:f,height:u,width:a,dxl:v,ltop:d}}function Ir(n,e,t){if(!n||!e||!t||typeof t!="function")return;const s=n.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;t(l),n.stopPropagation()}}function Af(n,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(n.replace(/<(.|\n)*?>/g,"")).width}function Cf(n,e){const t="Arial",s=e/8,l=e*1.5,o=Array(n.length),a=Array(n.length);let c=0,u=0,f=0;for(let v=0;v<n.length;v++){const h=Af("  "+n[v].label+"  ",e+"px "+t);f=h>f?h:f;const m=e*n[v].labelHeight+2*s;o[v]=m,a[v]=c,c=c+m,u=u+m}const d=l+2*s+f;return[a,o,l,s,u,d]}function Nf(n,e,t,s,l){const[o,a,c,u,f,d]=Cf(n.items,s*n.fontSize),v=n.position.includes("left")?e[0]+l:n.position.includes("right")?e[1]-d-l:(e[1]+e[0]-d)*.5,h=n.position.includes("top")?t[1]+l:n.position.includes("bottom")?t[0]-f-l:(t[1]+t[0]-f)*.5;return{lgl:v,lgt:h,lgw:d,lgh:f,ely:o,elh:a,elw:c,elp:u}}function Or(n){if(!n||n.length<1)return n;function e(o){return'<tspan font-size="0.75em" dy="-0.5em">'+o+'</tspan><tspan dy="0.4em"> </tspan>'}function t(o){return'<tspan font-size="0.75em" dy="0.5em">'+o+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<n.length;){const o=n[s];if((o==="^"||o==="_")&&s<n.length-1){const a=o==="^";if(s++,n[s]==="("){let c=s+1;for(;c<n.length&&n[c]!==")";)c++;const u=n.slice(s+1,c);l+=a?e(u):t(u),s=c+1}else if(n[s]==="-"||n[s]==="–"){const c=n.slice(s,s+2);l+=a?e(c):t(c),s=s+2}else l+=a?e(n[s]):t(n[s]),s++}else l+=o,s++}return l}var Pf=Se('<line vector-effect="non-scaling-stroke"></line>'),Tf=Se("<g></g>");function El(n,e){we(e,!0);let t=V(e,"lineCoords",19,()=>[]),s=V(e,"lineColor",19,()=>gt.DARKGRAY),l=V(e,"lineType",3,1),o=V(e,"lineWidth",3,1),a=V(e,"className",3,"");const c=At("axes");let u=p(()=>rt(t()[0][0],c.tX())),f=p(()=>rt(t()[1][0],c.tX())),d=p(()=>rt(t()[0][1],c.tY())),v=p(()=>rt(t()[1][1],c.tY())),h=p(()=>`stroke:${s()};stroke-width: ${o()}px;stroke-dasharray:${yn[c.scales().plot][l()-1]}`);var m=ve(),b=Z(m);{var g=_=>{var w=Tf();Ve(w,21,()=>r(u),We,(A,k,S)=>{var C=Pf();ae(()=>{B(C,"x1",r(u)[S]),B(C,"x2",r(f)[S]),B(C,"y1",r(d)[S]),B(C,"y2",r(v)[S]),ot(C,r(h))}),N(A,C)}),ae(()=>ct(w,0,jc(a()))),N(_,w)};Y(b,_=>{r(u)&&r(d)&&r(f)&&_(g)})}N(n,m),ye()}var jf=Se('<text text-anchor="middle"><!></text>'),Lf=Se("<text><!></text>"),Mf=Se("<text><!></text>"),Rf=Se('<g class="tick-labels"><!></g>');function Fa(n,e){we(e,!0);let t=V(e,"pos",3,1),s=V(e,"las",3,1),l=p(()=>["middle","middle","start","middle","end"][t()]),o=p(()=>`fill:${e.textColor};`);const a=At("axes");let c=p(()=>rt(e.tickCoords[1][0],a.tX())),u=p(()=>rt(e.tickCoords[1][1],a.tY())),f=p(()=>_l[a.scales().plot]),d=p(()=>[0,0,r(f),0,-r(f)][t()]),v=p(()=>[0,r(f),0,-r(f),0][t()]);var h=Rf(),m=H(h);{var b=_=>{var w=ve(),A=Z(w);Ve(A,17,()=>r(c),We,(k,S,C)=>{var T=jf();B(T,"data-id",C),B(T,"dx",0);var P=H(T);mt(P,()=>e.tickLabels[C],!0),ae(()=>{B(T,"x",r(c)[C]),B(T,"y",r(u)[C]),B(T,"dy",r(d)*1.25),B(T,"transform",`rotate(-90, ${r(c)[C]}, ${r(u)[C]})`)}),N(k,T)}),N(_,w)},g=_=>{var w=ve(),A=Z(w);{var k=C=>{var T=ve(),P=Z(T);Ve(P,17,()=>r(c),We,(j,q,E)=>{var y=Lf();B(y,"data-id",E),B(y,"dy",0),B(y,"text-anchor","end");var M=H(y);mt(M,()=>e.tickLabels[E],!0),ae(()=>{B(y,"x",r(c)[E]),B(y,"y",r(u)[E]),B(y,"dx",-r(v)/2),B(y,"transform",`rotate(-90, ${r(c)[E]}, ${r(u)[E]})`)}),N(j,y)}),N(C,T)},S=C=>{var T=ve(),P=Z(T);Ve(P,17,()=>r(c),We,(j,q,E)=>{var y=Mf();B(y,"data-id",E);var M=H(y);mt(M,()=>e.tickLabels[E],!0),ae(()=>{B(y,"x",r(c)[E]),B(y,"y",r(u)[E]),B(y,"dx",r(d)),B(y,"dy",r(v)),B(y,"text-anchor",r(l))}),N(j,y)}),N(C,T)};Y(A,C=>{s()===2&&t()===1?C(k):C(S,!1)},!0)}N(_,w)};Y(m,_=>{s()===2&&t()===4?_(b):_(g,!1)})}ae(()=>ot(h,r(o))),N(n,h),ye()}const Ff=(n,e=wt,t=wt)=>{const s=p(()=>e().colmap.length);var l=Df(),o=Z(l);Ve(o,17,()=>e().colmap,We,(d,v,h)=>{const m=p(()=>t().start+h*t().width);var b=Of(),g=Z(b),_=R(g);B(_,"dy",0);var w=H(_);mt(w,()=>e().labels[h],!0),ae(()=>{B(g,"x",r(m)),B(g,"y",t().top),B(g,"width",t().width),B(g,"height",t().height),B(g,"fill",r(v)),B(_,"x",r(m)),B(_,"y",t().ltop),B(_,"dx",t().dxl),B(_,"fill",e().labelColor),B(_,"font-size",e().fontSize+"em")}),N(d,b)});var a=R(o);{var c=d=>{const v=p(()=>t().start+r(s)*t().width);var h=Vf();B(h,"dx",0),B(h,"dy",0);var m=H(h);mt(m,()=>e().labels[r(s)],!0),ae(()=>{B(h,"x",r(v)),B(h,"y",t().ltop),B(h,"fill",e().labelColor),B(h,"font-size",`${e().fontSize??""}em`)}),N(d,h)};Y(a,d=>{e().isCentered||d(c)})}var u=R(a);{var f=d=>{const v=p(()=>t().start+r(s)*t().width);var h=Bf(),m=H(h);mt(m,()=>wl(e().labelsFactor),!0),ae(()=>{B(h,"x",r(v)),B(h,"y",t().ltop),B(h,"fill",e().labelColor),B(h,"font-size",`${e().fontSize??""}em`)}),N(d,h)};Y(u,d=>{e().labelsFactor!==0&&d(f)})}N(n,l)};var qf=Se('<text fill="crimson" text-anchor="middle"> </text>'),zf=Se('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),If=Se("<!><!><!><!><!>",1),Of=Se('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Vf=Se('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Bf=Se('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Df=Se("<!><!><!>",1),Yf=Se("<line></line>"),Wf=Se('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Hf=Se('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Uf=Se('<svg><rect height="100%" width="100%"></rect><!></svg>'),Gf=Se('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Xf=Se('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Kf=Se('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Jf=Se('<g class="plot-labels"><!><!><!></g>'),Zf=Se('<g class="axis x-axis"><!></g>'),Qf=Se('<g class="axis y-axis"><!></g>'),$f=Se('<rect fill="transparent" id="axes-box"></rect>'),ed=Se('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),td=Se('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),rd=Se('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),nd=Se('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),sd=G('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),ld=G('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),od=G(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Dn(n,e){we(e,!0);const t=(Ce,Ze=wt,Je=wt)=>{var Nt=ve(),qt=Z(Nt);{var sr=Et=>{var st=ve(),Qe=Z(st);{var Tt=dt=>{var at=qf(),hr=H(at);ae(()=>{B(at,"x",r(Le)[0]-10),B(at,"y",r(Ne)),B(at,"transform",`rotate(-90, ${r(Le)[0]-10}, ${r(Ne)})`),Ee(hr,Je().error)}),N(dt,at)},_t=dt=>{var at=zf(),hr=H(at);ae(()=>{B(at,"x",r(Pe)),B(at,"y",r(Ae)[0]),Ee(hr,Je().error)}),N(dt,at)};Y(Qe,dt=>{Je().pos===4?dt(Tt):dt(_t,!1)})}N(Et,st)},Br=Et=>{var st=If(),Qe=Z(st);{var Tt=Me=>{El(Me,{get lineCoords(){return Ze().grid},get lineColor(){return gt.MIDDLEGRAY},lineType:3})};Y(Qe,Me=>{Je().showGrid&&Me(Tt)})}var _t=R(Qe);El(_t,{get lineCoords(){return Ze().axisLine},get lineColor(){return gt.DARKGRAY},lineType:1});var dt=R(_t);El(dt,{get lineCoords(){return Ze().tickCoords},get lineColor(){return gt.DARKGRAY},lineType:1});var at=R(dt);{var hr=Me=>{Fa(Me,{get las(){return Je().las},get pos(){return Je().pos},get tickCoords(){return Ze().tickCoords},get tickLabels(){return Ze().tickLabels},get tickColor(){return gt.DARKGRAY},get hideLast(){return Je().hideLast}})};Y(at,Me=>{Ze().tickCoords.length===2&&Ze().tickLabels.length===Ze().tickCoords[1][0].length&&Me(hr)})}var Xn=R(at);{var et=Me=>{{let jt=p(()=>[Ze().tfLabel]);Fa(Me,{get pos(){return Je().pos},get tickCoords(){return Ze().tfCoords},get tickLabels(){return r(jt)},get textColor(){return gt.DARKGRAY}})}};Y(Xn,Me=>{Ze().tickFactor!==0&&Me(et)})}N(Et,st)};Y(qt,Et=>{Je().error?Et(sr):Et(Br,!1)})}N(Ce,Nt)},s=(Ce,Ze=wt,Je=wt)=>{const Nt=p(()=>Je().elw+2*Je().elp),qt=p(()=>Je().elp),sr=p(()=>Je().elh),Br=p(()=>Je().ely);var Et=Uf(),st=H(Et),Qe=R(st);Ve(Qe,17,()=>Ze().items,We,(Tt,_t,dt)=>{var at=Hf();B(at,"x",0);var hr=H(at);{var Xn=an=>{var St=Yf();ae(()=>{B(St,"x1",r(qt)),B(St,"x2",r(Nt)-r(qt)),B(St,"y1",r(sr)[dt]/2),B(St,"y2",r(sr)[dt]/2),B(St,"stroke",r(_t).line.lineColor),B(St,"stroke-width",r(_t).line.lineWidth),B(St,"stroke-dasharray",r(U)[r(_t).line.lineType-1])}),N(an,St)};Y(hr,an=>{r(_t).line&&an(Xn)})}var et=R(hr);{var Me=an=>{var St=Wf(),p1=H(St);ae(()=>{B(St,"x",r(Nt)/2),B(St,"y",r(sr)[dt]/2),B(St,"fill",r(_t).point.faceColor),B(St,"stroke-width",r(_t).point.lineWidth),B(St,"stroke",r(_t).point.lineColor),B(St,"font-size",`${r(_t).point.markerSize??""}em`),Ee(p1,xn[r(_t).point.marker-1])}),N(an,St)};Y(et,an=>{r(_t).point&&an(Me)})}var jt=R(et),g1=H(jt);mt(g1,()=>r(_t).label,!0),ae(()=>{B(at,"y",r(Br)[dt]),B(at,"width",Je().lgw),B(at,"height",r(sr)[dt]),B(jt,"x",r(Nt)+r(qt)),B(jt,"y",r(sr)[dt]/2),B(jt,"fill",gt.LEGEND),B(jt,"font-size",`${Ze().fontSize??""}em`)}),N(Tt,at)}),ae(()=>{B(Et,"x",Je().lgl),B(Et,"y",Je().lgt),B(Et,"height",Je().lgh),B(Et,"width",Je().lgw),B(st,"fill",Ze().faceColor),B(st,"stroke",Ze().lineColor),B(st,"stroke-width",Ze().lineWidth)}),N(Ce,Et)};let l=V(e,"limX",19,()=>[0,1]),o=V(e,"limY",19,()=>[0,1]),a=V(e,"margins",19,()=>[1,1.1,.55,.6]),c=V(e,"downloadLinks",3,"none"),u=V(e,"fileName",3,"plot"),f=V(e,"pngWidth",3,8),d=V(e,"pngHeight",3,8),v=V(e,"pngRes",3,300),h=V(e,"clipboardWidth",3,1200),m=V(e,"clipboardHeight",3,800),b=V(e,"onclick",3,null),g=V(e,"onmousemove",3,null),_=V(e,"onmousedown",3,null),w=V(e,"onmouseup",3,null);function A(Ce,Ze){if(Ze&&Ce.target.id=="axes-box"){const Je=Pa([Ce.offsetX-r(D)],r(_e))[0],Nt=Pa([Ce.offsetY-r(z)],r(ce))[0];Ze(Je,Nt)}}function k(Ce){Ce.preventDefault(),A(Ce,_())}function S(Ce){Ce.preventDefault(),A(Ce,w())}function C(Ce){Ce.preventDefault(),A(Ce,g())}function T(Ce){Ce.preventDefault(),A(Ce,b())}async function P(Ce){wf(Ce.target,r(y),h(),m())}function j(){_f(r(y),u())}function q(){bf(r(y),u(),f(),d(),v())}const E="plottingArea"+Math.round(Math.random()*1e4);let y=te(0),M=te(0),O=te(0);const W=p(()=>({plot:vf(r(M),r(O)),x:Ra(r(M)),y:Ra(r(O))})),L=p(()=>a().map(Ce=>Ce*sf[r(W).plot])),I=p(()=>af[r(W).plot]),Q=p(()=>bl[r(W).plot]),U=p(()=>yn[r(W).plot]),K=p(()=>r(se).show&&r(se).label!==""?r(I)*1.5:0),D=p(()=>r(he).show&&r(he).label!==""?r(I)*1.5:0),z=p(()=>e.title&&e.title!==""?r(I)*1.5:0),X=p(()=>r(M)>r(D)?r(M)-r(D):0),ee=p(()=>r(O)>r(K)+r(z)?r(O)-r(K)-r(z):0),ne=p(()=>r(ee)-r(L)[0]-r(L)[2]),xe=p(()=>r(X)-r(L)[1]-r(L)[3]),ue=p(()=>Aa(l(),2)&&Aa(o(),2)&&r(X)>r(L)[1]+r(L)[3]&&r(ee)>r(L)[0]+r(L)[2]),_e=p(()=>r(ue)?{coords:[r(xe)/(l()[1]-l()[0]),l()[0],r(L)[1]],objects:[r(xe)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),ce=p(()=>r(ue)?{coords:[-r(ne)/(o()[1]-o()[0]),o()[1],r(L)[2]],objects:[r(ne)/(o()[1]-o()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Ne=p(()=>r(ne)*.5+r(z)+r(L)[2]),Pe=p(()=>r(xe)*.5+r(D)+r(L)[1]),Le=p(()=>r(ue)?rt(l(),r(_e)):[0,1]),Ae=p(()=>r(ue)?rt(o(),r(ce)):[1,0]),je=p(()=>Or(e.title)),le=p(()=>r(je)?r(je).length===e.title.left?1:1.4:0);let oe=te(Re({show:!1})),se=te(Re({show:!1,error:""})),he=te(Re({show:!1,error:""})),me=te(Re({show:!1,colmap:null,breaks:null})),de=te(Re({show:!1,items:null,position:null}));const qe=p(()=>r(ue)&&r(me)&&r(me).show?Ef(r(me)):null),Be=p(()=>r(ue)&&r(se).show?xf(l(),o(),r(W),r(ce),r(se)):null),Ie=p(()=>r(ue)&&r(he).show?kf(l(),o(),r(W),r(_e),r(he)):null),J=p(()=>r(ue)&&r(qe)?Sf(r(qe),r(xe),r(L),r(W)):null),$=p(()=>r(ue)&&r(de)&&r(de).show&&r(Le)?Nf(r(de),r(Le),r(Ae),r(I),r(Q)):null);Bi("axes",{setBox:Ce=>F(oe,Ce,!0),setXAxis:Ce=>F(se,Ce,!0),setYAxis:Ce=>F(he,Ce,!0),setColmapLegend:Ce=>F(me,Ce,!0),setGroupLegend:Ce=>F(de,Ce,!0),scales:()=>r(W),tX:()=>r(_e),tY:()=>r(ce),limX:()=>l(),limY:()=>o()});var re=od();let ke;var fe=H(re),Te=R(H(fe));{var ze=Ce=>{var Ze=Jf(),Je=H(Ze);{var Nt=st=>{var Qe=Gf();B(Qe,"dx",0),B(Qe,"dy",0);var Tt=H(Qe);mt(Tt,()=>r(se).label,!0),ae(()=>{B(Qe,"x",r(Pe)),B(Qe,"y",r(ee)+r(z))}),N(st,Qe)};Y(Je,st=>{r(se).show&&r(se).label&&r(se).label!==""&&st(Nt)})}var qt=R(Je);{var sr=st=>{var Qe=Xf();B(Qe,"dx",0),B(Qe,"dy",0);var Tt=H(Qe);mt(Tt,()=>r(he).label,!0),ae(()=>{B(Qe,"x",r(I)/1.1*r(he).labelHeight),B(Qe,"y",r(Ne)),B(Qe,"transform",`rotate(-90, ${r(I)*r(he).labelHeight/1.1}, ${r(Ne)})`)}),N(st,Qe)};Y(qt,st=>{r(he).show&&r(he).label&&r(he).label!==""&&st(sr)})}var Br=R(qt);{var Et=st=>{var Qe=Kf();B(Qe,"dx",0),B(Qe,"dy",0);var Tt=H(Qe);mt(Tt,()=>r(je),!0),ae(()=>{B(Qe,"x",r(Pe)),B(Qe,"y",r(I)*r(le))}),N(st,Qe)};Y(Br,st=>{r(je)&&r(je)!==""&&st(Et)})}N(Ce,Ze)};Y(Te,Ce=>{r(ue)&&Ce(ze)})}var Oe=R(Te),Ye=H(Oe),Ue=H(Ye),ft=H(Ue),vr=R(Ye);{var Fl=Ce=>{var Ze=nd(),Je=Z(Ze);{var Nt=et=>{var Me=Zf(),jt=H(Me);t(jt,()=>r(Be),()=>r(se)),N(et,Me)};Y(Je,et=>{r(se).show&&r(Be)&&et(Nt)})}var qt=R(Je);{var sr=et=>{var Me=Qf(),jt=H(Me);t(jt,()=>r(Ie),()=>r(he)),N(et,Me)};Y(qt,et=>{r(he).show&&r(Ie)&&et(sr)})}var Br=R(qt),Et=H(Br);{var st=et=>{var Me=$f();Me.__keydown=T,Me.__click=T,Me.__mousemove=C,Me.__mousedown=k,Me.__mouseup=S,ae(()=>{B(Me,"stroke",r(oe).lineColor),B(Me,"stroke-width",`${r(oe).lineWidth??""}px`),B(Me,"x",r(Le)[0]),B(Me,"y",r(Ae)[1]),B(Me,"width",r(Le)[1]-r(Le)[0]),B(Me,"height",r(Ae)[0]-r(Ae)[1])}),N(et,Me)},Qe=et=>{var Me=ed();Me.__keydown=T,Me.__click=T,Me.__mousemove=C,Me.__mousedown=k,Me.__mouseup=S,ae(()=>{B(Me,"x",r(Le)[0]),B(Me,"y",r(Ae)[1]),B(Me,"width",r(Le)[1]-r(Le)[0]),B(Me,"height",r(Ae)[0]-r(Ae)[1])}),N(et,Me)};Y(Et,et=>{r(oe).show?et(st):et(Qe,!1)})}var Tt=R(Br),_t=H(Tt);Er(_t,()=>e.children??wt);var dt=R(Tt);{var at=et=>{var Me=td(),jt=H(Me);Ff(jt,()=>r(qe),()=>r(J)),N(et,Me)};Y(dt,et=>{r(J)&&et(at)})}var hr=R(dt);{var Xn=et=>{var Me=rd(),jt=H(Me);s(jt,()=>r(de),()=>r($)),N(et,Me)};Y(hr,et=>{r($)&&et(Xn)})}ae(()=>B(Tt,"clip-path",`url(#${E})`)),N(Ce,Ze)};Y(vr,Ce=>{r(ue)&&Ce(Fl)})}$r(fe,Ce=>F(y,Ce),()=>r(y));var Ct=R(fe,2);{var bt=Ce=>{var Ze=sd();N(Ce,Ze)},ut=Ce=>{var Ze=ld(),Je=H(Ze);Je.__click=j,Je.__keydown=j;var Nt=R(Je,2);Nt.__click=q,Nt.__keydown=q;var qt=R(Nt,2);qt.__click=P,qt.__keydown=P,N(Ce,Ze)};Y(Ct,Ce=>{r(ue)?Ce(ut,!1):Ce(bt)})}ae(()=>{ke=ct(re,1,`plot-container show-download-links-${c()??""}`,"svelte-1t5q9z1",ke,{"plot-error":!r(ue)}),ot(fe,`font-size:${r(I)??""}px`),B(Oe,"x",r(D)),B(Oe,"y",r(z)),B(Oe,"width",r(X)),B(Oe,"height",r(ee)),B(Ue,"id",E),B(ft,"x",r(Le)[0]),B(ft,"y",r(Ae)[1]),B(ft,"width",r(Le)[1]-r(Le)[0]),B(ft,"height",r(Ae)[0]-r(Ae)[1])}),Xo(fe,"clientWidth",Ce=>F(M,Ce)),Xo(fe,"clientHeight",Ce=>F(O,Ce)),N(n,re),ye()}lt(["keydown","click","mousemove","mousedown","mouseup"]);function Yn(n,e){we(e,!0);let t=V(e,"las",3,1),s=V(e,"whole",3,!1),l=V(e,"show",3,!0),o=V(e,"showGrid",3,!1);const a=At("axes");ge(()=>{const c=Or(e.label),u=c?c.length===e.label.length?1:1.4:0;let f,d="";e.ticks&&([f,d]=La(e.ticks,a.limX()));let v;!d&&e.tickLabels&&([v,d]=ja(e.tickLabels,f)),a.setXAxis({show:l(),error:d,label:c,ticks:f,labelHeight:u,showGrid:o(),las:t(),whole:s(),tickLabels:v})}),ye()}function bs(n,e){we(e,!0);let t=V(e,"las",3,1),s=V(e,"whole",3,!1),l=V(e,"show",3,!0),o=V(e,"showGrid",3,!1);const a=At("axes");ge(()=>{const c=Or(e.label),u=c?c.length===e.label.length?1:1.4:0;let f,d="";e.ticks&&([f,d]=La(e.ticks,a.limY()));let v;!d&&e.tickLabels&&([v,d]=ja(e.tickLabels,f)),a.setYAxis({show:l(),error:d,label:c,ticks:f,labelHeight:u,showGrid:o(),las:t(),whole:s(),tickLabels:v,pos:4})}),ye()}function Wn(n,e){we(e,!0);let t=V(e,"lineWidth",3,1),s=V(e,"lineColor",3,"#606060");const l=At("axes");ge(()=>{l.setBox({show:!0,lineWidth:t(),lineColor:s()})}),ye()}var ad=Se("<rect></rect>"),id=Se("<g></g>");function Hn(n,e){we(e,!0);let t=V(e,"faceColor",19,()=>gt.PRIMARY),s=V(e,"lineColor",19,t),l=V(e,"lineWidth",3,1),o=V(e,"className",3,"series-rect");const a=p(()=>kt(e.left,"Rectangles (left)")),c=p(()=>r(a)?kt(e.top,"Rectangles (top)",r(a).length):null),u=p(()=>r(c)?typeof e.width!="object"?be.fill(e.width,r(a).length):e.width:null),f=p(()=>r(c)?typeof e.height!="object"?be.fill(e.height,r(a).length):e.height:null),d=At("axes"),v=p(()=>r(a)?rt(r(a),d.tX()):null),h=p(()=>r(c)?rt(r(c),d.tY()):null),m=p(()=>r(u)?Bn(r(u),d.tX()):null),b=p(()=>r(f)?Bn(r(f),d.tY()):null),g=p(()=>`fill:${t()};stroke:${s()};stroke-width:${l()}px;`),_=p(()=>r(v)&&r(h)&&r(m)&&r(b)&&r(m).length===r(v).length&&r(b).length===r(v).length);var w=ve(),A=Z(w);{var k=S=>{var C=id();C.__click=T=>Ir(T,"rect",e.onclick),Ve(C,21,()=>e.left,We,(T,P,j)=>{var q=ad();ae(()=>{B(q,"x",r(v)[j]),B(q,"y",r(h)[j]),B(q,"width",r(m)[j]),B(q,"height",r(b)[j])}),N(T,q)}),ae(()=>{ct(C,0,`series ${o()??""}`),ot(C,r(g))}),N(S,C)};Y(A,S=>{r(_)&&S(k)})}N(n,w),ye()}lt(["click"]);var cd=Se("<line></line>"),ud=Se('<g class="series series-segment"></g>');function kn(n,e){we(e,!0);let t=V(e,"lineColor",19,()=>gt.PRIMARY),s=V(e,"lineType",3,1),l=V(e,"lineWidth",3,1);const o=p(()=>kt(e.xStart,"Segments")),a=p(()=>r(o)?kt(e.yStart,"Segments",r(o).length):null),c=p(()=>r(a)?kt(e.xEnd,"Segments",r(o).length):null),u=p(()=>r(c)?kt(e.yEnd,"Segments",r(o).length):null),f=At("axes"),d=p(()=>r(o)?rt(r(o),f.tX()):null),v=p(()=>r(c)?rt(r(c),f.tX()):null),h=p(()=>r(a)?rt(r(a),f.tY()):null),m=p(()=>r(u)?rt(r(u),f.tY()):null),b=p(()=>`stroke:${t()};stroke-width: ${l()}px;stroke-dasharray:${yn[f.scales().plot][s()-1]}`),g=p(()=>r(d)&&r(v)&&r(h)&&r(m));var _=ve(),w=Z(_);{var A=k=>{var S=ud();S.__click=C=>Ir(C,"line",e.onclick),Ve(S,21,()=>r(d),We,(C,T,P)=>{var j=cd();ae(()=>{B(j,"x1",r(d)[P]),B(j,"x2",r(v)[P]),B(j,"y1",r(h)[P]),B(j,"y2",r(m)[P])}),N(C,j)}),ae(()=>ot(S,r(b))),N(k,S)};Y(w,k=>{r(g)&&k(A)})}N(n,_),ye()}lt(["click"]);var fd=Se("<text><!></text>"),dd=Se("<text><!></text>"),vd=Se("<text><!></text>"),hd=Se('<g class="series series-textlabels"><!></g>');function Un(n,e){we(e,!0);let t=V(e,"pos",3,0),s=V(e,"faceColor",19,()=>gt.PRIMARY_TEXT),l=V(e,"lineColor",3,"transparent"),o=V(e,"lineWidth",3,0),a=V(e,"textSize",3,1),c=V(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],f=p(()=>kt(e.xValues,"TextLabels")),d=p(()=>r(f)?kt(e.yValues,"TextLabels",r(f).length):null),v=p(()=>r(d)?Array.isArray(e.labels)&&e.labels.length!==r(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=p(()=>r(v)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),m=At("axes"),b=p(()=>r(f)&&r(h)!==null?rt(r(f),m.tX()):null),g=p(()=>r(d)&&r(b)?rt(r(d),m.tY()):null),_=p(()=>_l[m.scales().plot]),w=p(()=>[0,0,-r(_),0,r(_),r(_)]),A=p(()=>[0,r(_),0,-r(_),0,r(_)]),k=p(()=>`fill:${s()};stroke-width:${o()}px;stroke:${l()};font-size:${a()}em;`),S=p(()=>r(b)&&r(g)&&r(h)!==null&&r(v)&&r(b).length===r(g).length);var C=ve(),T=Z(C);{var P=j=>{var q=hd();q.__click=O=>Ir(O,"text",e.onclick);var E=H(q);{var y=O=>{var W=ve(),L=Z(W);Ve(L,17,()=>r(b),We,(I,Q,U)=>{var K=fd();B(K,"data-id",U);var D=H(K);mt(D,()=>e.labels,!0),ae(()=>{B(K,"x",r(b)[U]),B(K,"y",r(g)[U]),B(K,"dx",r(w)[t()]),B(K,"dy",r(A)[t()]),B(K,"transform",c()!==void 0?`rotate(${c()}, ${r(b)[U]+r(w)[t()]}, ${r(g)[U]+r(A)[t()]})`:""),B(K,"text-anchor",u[t()[U]])}),N(I,K)}),N(O,W)},M=O=>{var W=ve(),L=Z(W);{var I=U=>{var K=ve(),D=Z(K);Ve(D,17,()=>r(b),We,(z,X,ee)=>{var ne=dd();B(ne,"data-id",ee);var xe=H(ne);mt(xe,()=>e.labels[ee],!0),ae(()=>{B(ne,"x",r(b)[ee]),B(ne,"y",r(g)[ee]),B(ne,"dx",r(w)[t()[ee]]),B(ne,"dy",r(A)[t()[ee]]),B(ne,"transform",c()!==void 0?`rotate(${c()}, ${r(b)[ee]+r(w)[t()]}, ${r(g)[ee]+r(A)[t()]})`:""),B(ne,"text-anchor",u[t()[ee]])}),N(z,ne)}),N(U,K)},Q=U=>{var K=ve(),D=Z(K);Ve(D,17,()=>r(b),We,(z,X,ee)=>{var ne=vd();B(ne,"data-id",ee);var xe=H(ne);mt(xe,()=>e.labels[ee],!0),ae(()=>{B(ne,"x",r(b)[ee]),B(ne,"y",r(g)[ee]),B(ne,"dx",r(w)[t()]),B(ne,"dy",r(A)[t()]),B(ne,"transform",c()!==void 0?`rotate(${c()}, ${r(b)[ee]+r(w)[t()]}, ${r(g)[ee]+r(A)[t()]})`:""),B(ne,"text-anchor",u[t()])}),N(z,ne)}),N(U,K)};Y(L,U=>{Array.isArray(t())||ArrayBuffer.isView(t())?U(I):U(Q,!1)},!0)}N(O,W)};Y(E,O=>{typeof e.labels=="string"?O(y):O(M,!1)})}ae(()=>ot(q,r(k))),N(j,q)};Y(T,j=>{r(S)&&j(P)})}N(n,C),ye()}lt(["click"]);var md=Se('<g class="series series-area"><polygon></polygon></g>');function qa(n,e){we(e,!0);let t=V(e,"lineColor",19,()=>gt.PRIMARY),s=V(e,"lineType",3,1),l=V(e,"lineWidth",3,1),o=V(e,"faceColor",3,"transparent"),a=V(e,"opacity",3,1);const c=p(()=>kt(e.xValues,"Area")),u=p(()=>r(c)?kt(e.yValues,"Area",r(c).length):null),f=At("axes"),d=p(()=>r(c)&&r(u)?ps(r(c),r(u),f.tX(),f.tY()):null),v=p(()=>r(u)?rt(r(u).subset(1),f.tY()):null),h=p(()=>r(c)?rt(r(c).subset(1),f.tX()):null),m=p(()=>r(d)&&r(h)&&r(v)?r(h)+","+r(v)+" "+r(d)+" "+r(h)+","+r(v):null),b=p(()=>`opacity:${a()};fill:${o()};stroke:${t()};stroke-width: ${l()}px;stroke-dasharray:${yn[f.scales().plot][s()-1]}`);var g=ve(),_=Z(g);{var w=A=>{var k=md();k.__click=C=>Ir(C,"polygon",e.onclick);var S=H(k);ae(()=>{ot(k,r(b)),B(S,"points",r(m))}),N(A,k)};Y(_,A=>{r(m)&&A(w)})}N(n,g),ye()}lt(["click"]);var gd=Se("<text> </text>"),pd=Se('<g text-anchor="middle"></g>');function _s(n,e){we(e,!0);let t=V(e,"marker",3,1),s=V(e,"faceColor",3,"transparent"),l=V(e,"lineColor",19,()=>gt.PRIMARY),o=V(e,"lineWidth",3,1),a=V(e,"markerSize",3,1);const c=p(()=>typeof t()!="number"||t()<1||t()>xn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+xn.length+"."),null):xn[t()-1]),u=p(()=>kt(e.xValues,"Points")),f=p(()=>r(u)?kt(e.yValues,"Points",r(u).length):null),d=At("axes"),v=p(()=>r(u)?rt(r(u),d.tX()):null),h=p(()=>r(v)&&r(f)?rt(r(f),d.tY()):null),m=p(()=>["＋","✳","✕"].includes(r(c))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${a()}em;`:`fill:${s()};stroke-width:${o()}px;stroke:${l()}; font-size:${a()}em;`),b=p(()=>["◼","⬥","＋","✳","✕"].includes(r(c))?"series-points2":"series-points1"),g=p(()=>r(v)&&r(h)&&r(v).length===r(h).length);var _=ve(),w=Z(_);{var A=k=>{var S=pd();S.__click=C=>Ir(C,"text",e.onclick),Ve(S,21,()=>r(v),We,(C,T,P)=>{var j=gd(),q=H(j);ae(()=>{B(j,"x",r(v)[P]),B(j,"y",r(h)[P]),Ee(q,r(c))}),N(C,j)}),ae(()=>{ct(S,0,`series series-points ${r(b)??""}`),ot(S,r(m))}),N(k,S)};Y(w,k=>{r(g)&&k(A)})}N(n,_),ye()}lt(["click"]);var bd=Se('<g class="series series-line"><polyline class="line"></polyline></g>');function Vr(n,e){we(e,!0);let t=V(e,"lineColor",19,()=>gt.PRIMARY),s=V(e,"lineType",3,1),l=V(e,"lineWidth",3,1);const o=p(()=>kt(e.xValues,"Lines")),a=p(()=>r(o)?kt(e.yValues,"Lines",r(o).length):null),c=At("axes"),u=p(()=>r(o)&&r(a)?ps(r(o),r(a),c.tX(),c.tY()):null),f=p(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${yn[c.scales().plot][s()-1]}`);var d=ve(),v=Z(d);{var h=m=>{var b=bd();b.__click=_=>Ir(_,"polyline",e.onclick);var g=H(b);ae(()=>{ot(b,r(f)),B(g,"points",r(u))}),N(m,b)};Y(v,m=>{r(u)&&m(h)})}N(n,d),ye()}lt(["click"]);var _d=Se('<polyline class="line"></polyline>'),wd=Se('<g class="series series-multiline"></g>');function za(n,e){we(e,!0);let t=V(e,"lineColor",19,()=>gt.PRIMARY),s=V(e,"lineType",3,1),l=V(e,"lineWidth",3,1);const o=p(()=>kt(e.xValues,"Multilines")),a=p(()=>r(o)?Ft(e.yValues)?(r(o).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),c=At("axes"),u=p(()=>{if(!r(o)||!r(a))return null;const m=new Array(r(a).ncols);for(let b=0;b<m.length;b++)m[b]=ps(r(o),r(a).getcolumn(b+1),c.tX(),c.tY());return m}),f=p(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${yn[c.scales().plot][s()-1]}`);var d=ve(),v=Z(d);{var h=m=>{var b=wd();b.__click=g=>Ir(g,"polyline",e.onclick),Ve(b,21,()=>r(u),We,(g,_)=>{var w=_d();ae(()=>B(w,"points",r(_))),N(g,w)}),ae(()=>ot(b,r(f))),N(m,b)};Y(v,m=>{r(u)&&r(u).length>0&&m(h)})}N(n,d),ye()}lt(["click"]);function yd(...n){const e=n.length,t=n.map(a=>a.length);let s=tl(t),l=Array(e),o=1;for(let a=0;a<e;a++){const c=De(n[a])?n[a]:Fe(n[a]),u=c.length;s=s/u,l[a]=c.subset(He.seq(1,u).repeach(o).rep(s)),o=o*u}return l}var xd=Se("<rect></rect>"),kd=Se('<g title="heatmap-group"><!></g>'),Ed=Se('<g class="heatmap" style="stroke:0;stroke-width:0px;"></g>');function Ia(n,e){we(e,!0);let t=V(e,"colmap",3,null),s=p(()=>Ft(e.values)&&e.values.nrows>0&&e.values.ncols>0?e.values:null),l=p(()=>r(s)?e.breaks&&Array.isArray(e.breaks)?e.breaks:e.breaks&&De(e.breaks)?e.breaks.v:$s(r(s).v,ff).v:null),o=p(()=>t()?Array.isArray(t())?t().length!==e.breaks.length-1?(console.error("Heatmap: number of color values in colormap does not match number of intervals defined by breaks."),null):t():(console.error('Heatmap: parameter "colmap" must be array with colors.'),null):kl(r(l).length-1)),a=p(()=>r(s)?Sa(r(s).ncols):null),c=p(()=>r(s)?Sa(r(s).nrows):null),u=p(()=>r(a)&&r(c)?yd(r(c),r(a)):null),f=p(()=>{if(!r(u)||!r(l)||!r(o))return null;const[k,S]=r(u),C=S.length,T=r(l).length,P=Array(T).fill().map(()=>[]),j=Array(T).fill().map(()=>[]),q=r(l).slice(),E=q[1]-q[0];q[0]=q[0]-.1*E,q[T-1]=q[T-1]+.1*E;for(let y=0;y<C;y++){const M=r(s).v[y];for(let O=0;O<T-1;O++)if(M>q[O]&&M<=q[O+1]){P[O].push(S.v[y]-.5),j[O].push(r(s).nrows-k.v[y]+1.5);break}}return{rl:P,rt:j}});const d=At("axes");let v=p(()=>r(f)?r(f).rl.map(k=>k.length>0?rt(k,d.tX()):[]):null),h=p(()=>r(f)?r(f).rt.map(k=>k.length>0?rt(k,d.tY()):[]):null),m=p(()=>Bn([1],d.tX())),b=p(()=>Bn([1],d.tY())),g=p(()=>r(v)&&r(h)&&r(v).length===r(h).length);var _=ve(),w=Z(_);{var A=k=>{var S=Ed();Ve(S,21,()=>r(o),We,(C,T,P)=>{var j=kd(),q=H(j);{var E=y=>{var M=ve(),O=Z(M);Ve(O,17,()=>r(v)[P],We,(W,L,I,Q)=>{var U=xd();ae(()=>{B(U,"x",r(v)[P][I]),B(U,"y",r(h)[P][I]),B(U,"width",r(m)),B(U,"height",r(b))}),N(W,U)}),N(y,M)};Y(q,y=>{r(v)[P].length>0&&y(E)})}ae(()=>ot(j,`fill:${r(T)??""};`)),N(C,j)}),N(k,S)};Y(w,k=>{r(g)&&k(A)})}N(n,_),ye()}function Oa(n,e){we(e,!0);let t=V(e,"show",3,!0),s=V(e,"position",3,"topleft"),l=V(e,"lineColor",19,()=>gt.LEGEND),o=V(e,"lineWidth",3,1),a=V(e,"faceColor",3,"#fff"),c=V(e,"fontSize",3,.85);function u(v){return typeof v!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(v)?v:(console.error('Legend: wrong value of "position" property'),null)}function f(v){if(!v||!Array.isArray(v)||v.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let h=0;h<v.length;h++){const m=v[h];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const b=Or(m.label),g=b.length===m.label?1:1.4;m.label=b,m.labelHeight=g,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(h+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:gt.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=xn.length||console.error('Legend: parameter "marker" for legend item '+(h+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.markerSize=m.point.markerSize?m.point.markerSize:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:gt.PRIMARY)}return v}const d=At("axes");ge(()=>{const v=f(e.items),h=u(s());d.setGroupLegend(v&&h?{show:t(),position:s(),items:e.items,lineColor:l(),faceColor:a(),lineWidth:o(),fontSize:c()}:{show:!1,position:null,items:null})}),ye()}function ws(n,e){we(e,!0);let t=V(e,"show",3,!0),s=V(e,"labels",3,null),l=V(e,"labelColor",19,()=>gt.CLEGEND_LABELS),o=V(e,"fontSize",3,.85);const a=At("axes");ge(()=>{a.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:l(),fontSize:o()})}),ye()}const Sd=n=>n;function Va(n,{delay:e=0,duration:t=400,easing:s=Sd}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:o=>`opacity: ${o*l}`}}var Ad=G('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function Sl(n,e){we(e,!0);let t=V(e,"isDark",3,!1);function s(v){v.key==="Escape"&&e.closeModal()}var l=Ad();Jr("keydown",Rs,s);let o;var a=H(l),c=H(a),u=H(c);u.__click=function(...v){e.closeModal?.apply(this,v)};var f=R(c,2),d=H(f);Er(d,()=>e.children),ae(()=>o=ct(l,1,"drop svelte-oie633",null,o,{isdark:t()})),Wo(7,l,()=>Va),N(n,l),ye()}lt(["click"]);const Cd=[1,1.1,.45,.4],Gn={cal:1,pv:2,test:2,new:2},pt={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},Ba={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Nd={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},Al="#808090",Da="#a0a0a0",Ya="#909090",Cl="#909090",Pd=8,Td=8,jd=8,Ld=600;function Md(n,e,t){const s=e.length,l=new Array(n.length),o=e[1]-e[0];for(let a=0;a<n.length;a++)for(let c=0;c<s-1;c++){const u=n[a]>=e[c],f=c===s-2?n[a]<e[c+1]+o:n[a]<e[c+1];if(u&&f){l[a]=t[c];break}}return l}function Wa(n,e=Nd){return n?n.map(t=>({id:t,label:t,point:{marker:Gn[t],faceColor:e[t],lineColor:pt[t],markerSize:Gn[t]===1?.85:.65,lineWidth:1.5}})):null}function Ha(n,e,t){if(!n)return[0,1];if(e==="p")return Ar(n);if(e==="h")return n.length<20?[.5,n.length+.5]:Ar(n,.05);const s=Ar(n,0),l=Math.abs((s[1]-s[0])*.1);return t?[s[1]+l,s[0]-l]:[s[0]-l,s[1]+l]}var Rd=G("<!> <!> <!> <!>",1);function on(n,e){let t=V(e,"whole",3,!1),s=en(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Dn(n,Rr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return Cd},get pngWidth(){return Td},get pngHeight(){return jd},get pngRes(){return Ld}},()=>s,{children:(l,o)=>{var a=Rd(),c=Z(a);Er(c,()=>e.children);var u=R(c,2);Yn(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var f=R(u,2);bs(f,{showGrid:!0,get label(){return e.yLabel}});var d=R(f,2);Wn(d,{}),N(l,a)},$$slots:{default:!0}}))}var Fd=G("<!> <!> <!>",1),qd=G("<!> <!> <!> <!> <!>",1),zd=G("<div><!></div>"),Id=G('<div class="wrapper svelte-1di9qjd"><div class="plot-container svelte-1di9qjd" role="tooltip"><!></div> <div class="msg-select svelte-1di9qjd">click inside the plot to see a variable label</div> <div class="plot-controls svelte-1di9qjd"><div><!></div> <!></div></div>');function Nl(n,e){we(e,!0);let t=V(e,"outliers",19,()=>[]),s=V(e,"model_getter",3,su),l=V(e,"res_getter",3,ca),o=te("residual"),a=te(-1);const c=p(()=>e.res?Object.keys(e.res):null);let u=te(Re(r(c)?r(c)[0]:null));function f(z){if(z.target.tagName!=="rect"){F(a,-1);return}const X=Array.from(z.target.parentNode.children).indexOf(z.target);if(X<0){F(a,-1);return}r(a)!==X&&F(a,X,!0)}const d=p(()=>{if(!e.model)return null;const z=e.model.nresp?e.model.nresp:0,X=Fe(e.model.varvalues.filter((Ne,Pe)=>Pe>=z)),ee=X.length,ne=(X.v[1]-X.v[0])/2,xe=(X.v[ee-1]-X.v[ee-2])/2,ue=[X.v[0],X.v[ee-1]],_e=[ue[0]-ne,ue[1]+xe],ce=(ue[1]-ue[0])/ee;return{values:X,lim:_e,width:ce,hwidth:ce*.5}}),v=p(()=>r(d)?r(d).values.apply(z=>z-r(d).hwidth):null),h=p(()=>r(u)?e.res[r(u)]:null),m=p(()=>r(h)?new pe(l()(r(h),"T"),r(h).nrows,r(h).ncomp):null),b=p(()=>r(h)?new pe(l()(r(h),"E"),r(h).nrows,r(h).npred).t():null),g=p(()=>e.model?new pe(s()(e.model,"P"),e.model.npred?e.model.npred:e.model.ncols,e.model.ncomp):null),_=p(()=>e.ncomp?He.seq(1,e.ncomp):null),w=p(()=>e.ncomp<e.model.ncomp?He.seq(e.ncomp+1,e.model.ncomp):null),A=p(()=>r(m)&&r(_)?r(m).subset(null,r(_)):null),k=p(()=>r(m)&&r(_)?r(g).subset(null,r(_)):null),S=p(()=>r(m)&&r(w)?r(m).subset(null,r(w)):null),C=p(()=>r(m)&&r(w)?r(g).subset(null,r(w)):null),T=p(()=>r(A)&&r(k)?ra(r(k),r(A)):null),P=p(()=>r(S)&&r(C)?ra(r(C),r(S)).add(r(b)):r(b)),j=p(()=>r(T)&&r(P)?r(T).add(r(P)):null);let q=p(()=>r(T)?r(T).getcolumn(e.selected+1):null),E=p(()=>r(P)?r(P).getcolumn(e.selected+1):null),y=p(()=>r(j)?r(j).getcolumn(e.selected+1):null),M=p(()=>{if(!r(q)||!r(E)||!r(y))return null;const z=r(o)==="explained"?{all:r(T),sel:r(q),label:"Explained part, TP^T"}:r(o)==="residual"?{all:r(P),sel:r(E),label:"Residuals, E"}:{all:r(j),sel:r(y),label:"Preprocessed data, X"},X=Fr(z.all.v),ee=X[1]-X[0],ne=[X[0]-ee/50,X[1]+ee/12],xe=be.fill(X[1],z.sel.length);return z.lim=ne,z.top=xe,z.height=ee,z});const O=p(()=>r(d)&&r(a)>=0?r(d).values.v[r(a)]:null),W=p(()=>r(M)&&r(a)>=0?r(M).sel.v[r(a)]:null),L=p(()=>e.model&&r(a)>=0?e.model.varlabels[r(a)]:null),I=p(()=>r(h)&&e.selected>=0?`Object ${r(h).objlabels[e.selected].replace("_","-")}`:null),Q=p(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var U=ve(),K=Z(U);{var D=z=>{Sl(z,{get closeModal(){return e.closeModal},children:(X,ee)=>{var ne=Id(),xe=H(ne);xe.__click=f;var ue=H(xe);on(ue,{get title(){return r(I)},get yLabel(){return r(M).label},get xLabel(){return r(Q)},get limY(){return r(M).lim},get limX(){return r(d).lim},fileName:"plot-contributions",children:(Ae,je)=>{var le=qd(),oe=Z(le);za(oe,{get xValues(){return r(d).values},get yValues(){return r(M).all},lineColor:"#e0e0e0"});var se=R(oe,2);{var he=Ie=>{var J=ve(),$=Z(J);Ve($,17,t,We,(re,ke)=>{{let fe=p(()=>r(M).all.getcolumn(r(ke)+1));Vr(re,{get xValues(){return r(d).values},get yValues(){return r(fe)},lineColor:"#ffdd88"})}}),N(Ie,J)};Y(se,Ie=>{t().length>0&&Ie(he)})}var me=R(se,2);Vr(me,{get xValues(){return r(d).values},get yValues(){return r(M).sel},lineColor:"crimson"});var de=R(me,2);Hn(de,{get left(){return r(v)},get top(){return r(M).top},get height(){return r(M).height},get width(){return r(d).width},faceColor:"transparent",borderColor:"transparent"});var qe=R(de,2);{var Be=Ie=>{var J=Fd(),$=Z(J);{let fe=p(()=>[r(O)]),Te=p(()=>[r(M).top.v[0]]),ze=p(()=>[r(L)]);Un($,{get xValues(){return r(fe)},get yValues(){return r(Te)},get labels(){return r(ze)},pos:3,textSize:.85})}var re=R($,2);{let fe=p(()=>[r(O)]),Te=p(()=>[r(W)]);_s(re,{get xValues(){return r(fe)},get yValues(){return r(Te)},faceColor:"crimson",lineColor:"crimson"})}var ke=R(re,2);{let fe=p(()=>[r(v).v[r(a)]]),Te=p(()=>[r(M).top.v[r(a)]]);Hn(ke,{get left(){return r(fe)},get top(){return r(Te)},get height(){return r(M).height},get width(){return r(d).width},faceColor:"#ff000015"})}N(Ie,J)};Y(qe,Ie=>{r(a)>=0&&Ie(Be)})}N(Ae,le)},$$slots:{default:!0}});var _e=R(xe,4),ce=H(_e),Ne=H(ce);ie(Ne,{label:"Show",children:(Ae,je)=>{Xe(Ae,{id:"type",options:["full","explained","residual"],get value(){return r(o)},set value(le){F(o,le,!0)}})},$$slots:{default:!0}});var Pe=R(ce,2);{var Le=Ae=>{var je=zd(),le=H(je);ie(le,{label:"For",children:(oe,se)=>{Xe(oe,{id:"type",get options(){return r(c)},get value(){return r(u)},set value(he){F(u,he,!0)}})},$$slots:{default:!0}}),N(Ae,je)};Y(Pe,Ae=>{r(c).length>1&&Ae(Le)})}N(X,ne)},$$slots:{default:!0}})};Y(K,z=>{r(d)&&r(M)&&z(D)})}N(n,U),ye()}lt(["click"]);function Od(n,e){let t=0,s=0;n.nresp>0&&(t=new be(n.values.v.slice(0,n.nresp*n.values.nrows-1)),s=n.nresp);const l=new pe(n.values.v.slice(s*n.values.nrows),n.values.nrows,n.values.ncols-s).t(),o=l.ncols<e?1:Math.round(l.ncols/e),a=He.seq(1,l.ncols,o),c=l.subset(null,a),u=t?t.subset(a):null,f=n.classes?n.classes.filter((d,v)=>a.v.includes(v)):null;return{classNames:n.classNames,classes:f,resp:u,values:c,varvalues:n.varvalues.filter((d,v)=>v>=s),varindices:n.varindices.filter((d,v)=>v>=s),varaxisLabel:n.varvaluesUnits?n.varvaluesName+" "+n.varvaluesUnits:n.varvaluesName,varaxisUnits:n.varvaluesUnits}}function Pl(n,e){return{values:e||n.values.copy(),varvalues:n.varvalues,varindices:n.varindices,varaxisLabel:n.varaxisLabel}}function Vd(n,e){if(!e||e.nrows!==n.values.nrows||e.ncols!==n.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const t=structuredClone(n);return t.values=e,t}var Bd=G('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function Tl(n,e){we(e,!0);var t=ve(),s=Z(t);{var l=a=>{var c=Bd(),u=H(c),f=R(u),d=H(f);mt(d,()=>uu(e.prepmodel)),ae(()=>Ee(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),N(a,c)},o=a=>{var c=pc("skipped");N(a,c)};Y(s,a=>{e.prepmodel.ml?a(l):a(o,!1)})}N(n,t),ye()}var Dd=G('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),Yd=G('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Wd(n,e){we(e,!0);var t=ve(),s=Z(t);{var l=o=>{ie(o,{name:"info",children:(a,c)=>{var u=Yd(),f=Z(u),d=R(H(f),3);{var v=_=>{var w=Dd(),A=R(Z(w),2),k=H(A);ae(()=>{B(A,"title",e.model.fileName),Ee(k,e.model.fileName)}),N(_,w)};Y(d,_=>{e.model.fileName&&_(v)})}var h=R(d),m=R(h,3);Tl(m,{get prepmodel(){return e.model}});var b=R(f,2);{var g=_=>{nr(_,{get onclick(){return e.reset}})};Y(b,_=>{e.reset&&_(g)})}ae(()=>Ee(h,` ${e.model.npred??""} `)),N(a,u)},$$slots:{default:!0}})};Y(s,o=>{e.model&&o(l)})}N(n,t),ye()}var Hd=G("<!> <!>",1),Ud=G("<p><!></p>"),Gd=G("<!> <!>",1);function Xd(n,e){we(e,!0);let t=V(e,"model",15),s=te(""),l=te("neutral"),o=te("");function a(_){try{const w=JSON.parse(_,vl);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");w.fileName=r(f),t(w),F(l,"success"),F(o,"")}catch(w){console.log(w),t(null),F(l,"error"),F(o,w,!0)}}function c(_){const w=new FileReader;w.onload=()=>{a(w.result)},w.readAsText(r(s))}function u(){F(s,""),t(null),F(l,"neutral"),F(o,"")}ge(()=>{r(s)===null?(t(null),F(l,"neutral"),F(o,"")):(F(l,"neutral"),F(o,""))}),ge(()=>{(t()===null||t()===0)&&F(s,"")});let f=p(()=>r(s)?r(s).name.replace(/\.[^/.]+$/,""):"");var d=Gd(),v=Z(d);{var h=_=>{var w=Hd(),A=Z(w);Qr(A,()=>r(s),C=>{ie(C,{name:"file-selector",children:(T,P)=>{hs(T,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return r(s)},set file(j){F(s,j,!0)}})},$$slots:{default:!0}})});var k=R(A,2);{var S=C=>{ie(C,{name:"load-button",label:" ",children:(T,P)=>{tt(T,{onclick:c,text:"Load"})},$$slots:{default:!0}})};Y(k,C=>{r(s)&&C(S)})}N(_,w)},m=_=>{Wd(_,{get model(){return t()},reset:u})};Y(v,_=>{t()?_(m,!1):_(h)})}var b=R(v,2);{var g=_=>{ie(_,{name:"error",status:"error",children:(w,A)=>{var k=Ud(),S=H(k);mt(S,()=>r(o)),N(w,k)},$$slots:{default:!0}})};Y(b,_=>{(r(l)==="error"||r(o))&&_(g)})}N(n,d),ye()}var Kd=G('<p class="title"> </p>'),Jd=G("<!>&nbsp;",1),Zd=G("<!> <!>",1),Qd=G('<div class="method-open svelte-10os93"><!> <!> <!></div>'),$d=G('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function En(n,e){we(e,!0);let t=V(e,"cancel",3,null);var s=ve(),l=Z(s);{var o=c=>{var u=Qd(),f=H(u);ie(f,{children:(h,m)=>{var b=Kd(),g=H(b);ae(()=>Ee(g,e.title)),N(h,b)},$$slots:{default:!0}});var d=R(f,2);Er(d,()=>e.children);var v=R(d,2);ie(v,{label:" ",children:(h,m)=>{var b=Zd(),g=Z(b);{var _=A=>{var k=Jd(),S=Z(k);tt(S,{text:"Cancel",get onclick(){return t()}}),N(A,k)};Y(g,A=>{t()&&A(_)})}var w=R(g,2);tt(w,{text:"Save",get onclick(){return e.apply}}),N(h,b)},$$slots:{default:!0}}),Wo(3,u,()=>Va,()=>({duration:10})),N(c,u)},a=c=>{ie(c,{children:(u,f)=>{var d=$d(),v=Z(d),h=H(v),m=R(h);m.__click=()=>e.open(e.pos);var b=H(m),g=R(v,2);Tu(g,{onclick:()=>e.moveUp(e.pos)});var _=R(g,2);ju(_,{onclick:()=>e.moveDown(e.pos)});var w=R(_,2);nr(w,{onclick:()=>e.remove(e.pos)}),ae(()=>{Ee(h,`${e.title??""} `),Ee(b,e.settings)}),N(u,d)},$$slots:{default:!0}})};Y(l,c=>{e.isOpen?c(o):c(a,!1)})}N(n,s),ye()}lt(["click"]);var ev=G("<!> <!>",1);function tv(n,e){we(e,!0);let t=V(e,"params",31,()=>Re([0,0])),s=V(e,"varind",15),l=V(e,"settings",15),o=V(e,"nvars",3,0),a=en(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const c={snv:0,area:1,length:2,var:3},u=Object.keys(c);let f=te(Re(u[t()[0]])),d=te(t()[1]+1);const v="Normalization";ge(()=>{l(r(f)+(r(f)==="var"?" #"+r(d):""))}),ge(()=>{r(f)==="var"?s(s()[0]=t()[1]>0?t()[1]:1,!0):s(s()[0]=-1,!0)}),ge(()=>{r(f)==="var"&&e.isOpen?s(s()[0]=t()[1],!0):s(s()[0]=-1,!0)}),ge(()=>{r(f)&&t(t()[0]=c[r(f)],!0)}),ge(()=>{r(d)&&t(t()[1]=r(d)-1,!0)}),En(n,Rr({id:"norm",title:v,get settings(){return l()},get isOpen(){return e.isOpen}},()=>a,{children:(h,m)=>{var b=ev(),g=Z(b);ie(g,{label:"Type",children:(A,k)=>{Xe(A,{get options(){return u},get value(){return r(f)},set value(S){F(f,S,!0)}})},$$slots:{default:!0}});var _=R(g,2);{var w=A=>{ie(A,{label:"Variable index",children:(k,S)=>{ur(k,{min:1,get max(){return o()},step:1,get value(){return r(d)},set value(C){F(d,C,!0)}})},$$slots:{default:!0}})};Y(_,A=>{r(f)==="var"&&A(w)})}N(h,b)},$$slots:{default:!0}})),ye()}var rv=G("<!> <!> <!>",1);function nv(n,e){we(e,!0);let t=V(e,"params",31,()=>Re([3,1,0])),s=V(e,"settings",15),l=en(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const o=p(()=>{if(!e.nvars)return 3;const f=Math.round(e.nvars*.25);return f>39?39:f%2<1?f+1:f}),a=p(()=>t()[1]<2?[0,1]:[0,1,2]),c=p(()=>t()[0]<5?[1,2]:[1,2,3]);ge(()=>{t()[0]<5&&t()[1]>2&&t(t()[1]=2,!0)}),ge(()=>{t()[2]>t()[1]&&t(t()[2]=t()[1],!0)}),ge(()=>{s(t()[0]+", "+t()[1]+", "+t()[2])}),En(n,Rr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>l,{children:(f,d)=>{var v=rv(),h=Z(v);ie(h,{label:"Width",children:(g,_)=>{ur(g,{min:3,get max(){return r(o)},step:2,get value(){return t()[0]},set value(w){t(t()[0]=w,!0)}})},$$slots:{default:!0}});var m=R(h,2);ie(m,{label:"Polynomial",children:(g,_)=>{Xe(g,{get options(){return r(c)},get value(){return t()[1]},set value(w){t(t()[1]=w,!0)}})},$$slots:{default:!0}});var b=R(m,2);ie(b,{label:"Derivative",children:(g,_)=>{Xe(g,{get options(){return r(a)},get value(){return t()[2]},set value(w){t(t()[2]=w,!0)}})},$$slots:{default:!0}}),N(f,v)},$$slots:{default:!0}})),ye()}var sv=G("<!> <!>",1);function lv(n,e){we(e,!0);let t=V(e,"params",31,()=>Re([1,0]));V(e,"varind",27,()=>-1);let s=V(e,"settings",15);V(e,"nvars",3,0);let l=en(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o={no:0,mean:1,median:2},a={no:0,sd:1,iqr:2,range:3,pareto:4},c=Object.keys(o),u=Object.keys(a);let f=te(Re(c[t()[0]])),d=te(Re(u[t()[1]]));const v="Scaling";ge(()=>{s(r(f)+"/"+r(d))}),ge(()=>{r(f)&&t(t()[0]=o[r(f)],!0)}),ge(()=>{r(d)&&t(t()[1]=a[r(d)],!0)}),En(n,Rr({id:"scale",title:v,get settings(){return s()}},()=>l,{children:(h,m)=>{var b=sv(),g=Z(b);ie(g,{label:"Center",children:(w,A)=>{Xe(w,{get options(){return c},get value(){return r(f)},set value(k){F(f,k,!0)}})},$$slots:{default:!0}});var _=R(g,2);ie(_,{label:"Scale",children:(w,A)=>{Xe(w,{get options(){return u},get value(){return r(d)},set value(k){F(d,k,!0)}})},$$slots:{default:!0}}),N(h,b)},$$slots:{default:!0}})),ye()}var ov=G("<!> <!> <!>",1),av=G("<!> <!> <!>",1);function iv(n,e){we(e,!0);let t=V(e,"params",31,()=>Re([0,1,.1]));V(e,"varind",27,()=>-1);let s=V(e,"settings",15,"");V(e,"nvars",3,0);let l=en(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Baseline correction",a={emsc:0,als:1},c=Object.keys(a);function u(b){const g=Math.ceil(Math.log10(b));return Math.pow(10,g)}let f=te(Re(c[t()[0]])),d=te(Re(t()[2]>0?u(t()[2]).toString():"0.1")),v=p(()=>parseFloat(r(d))),h=p(()=>r(v)/10),m=p(()=>Math.ceil(-Math.log10(r(v)))+1);ge(()=>{if(r(f)!=="als")return;const b=parseFloat(r(d));(t()[2]<r(h)||t()[2]>b-r(h))&&t(t()[2]=r(h),!0)}),ge(()=>{s(r(f)+" ("+(r(f)=="emsc"?t()[1].toFixed(0):t()[1].toFixed(1)+","+t()[2].toFixed(3))+")")}),ge(()=>{r(f)&&t(t()[0]=a[r(f)],!0)}),En(n,Rr({id:"scale",title:o,get settings(){return s()}},()=>l,{children:(b,g)=>{var _=av(),w=Z(_);ie(w,{label:"Type",children:(T,P)=>{Xe(T,{get options(){return c},get value(){return r(f)},set value(j){F(f,j,!0)}})},$$slots:{default:!0}});var A=R(w,2);{var k=T=>{var P=ov(),j=Z(P);ie(j,{label:"Lambda",children:(y,M)=>{zr(y,{min:1,max:7,step:.1,get value(){return t()[1]},set value(O){t(t()[1]=O,!0)}})},$$slots:{default:!0}});var q=R(j,2);ie(q,{label:"Penalty range",children:(y,M)=>{Xe(y,{options:["1","0.1","0.01"],get value(){return r(d)},set value(O){F(d,O,!0)}})},$$slots:{default:!0}});var E=R(q,2);ie(E,{label:"Penalty",children:(y,M)=>{{let O=p(()=>r(v)-r(h));zr(y,{get min(){return r(h)},get max(){return r(O)},get step(){return r(h)},get decNum(){return r(m)},get value(){return t()[2]},set value(W){t(t()[2]=W,!0)}})}},$$slots:{default:!0}}),N(T,P)};Y(A,T=>{r(f)==="als"&&T(k)})}var S=R(A,2);{var C=T=>{ie(T,{label:"Polynomial",children:(P,j)=>{ur(P,{min:0,max:5,step:1,decNum:0,get value(){return t()[1]},set value(q){t(t()[1]=q,!0)}})},$$slots:{default:!0}})};Y(S,T=>{r(f)==="emsc"&&T(C)})}N(b,_)},$$slots:{default:!0}})),ye()}var cv=G("<!> <!>",1);function uv(n,e){we(e,!0);let t=V(e,"params",15),s=V(e,"varind",15),l=V(e,"settings",15),o=en(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const a="Trim tails";let c=te(!1);const u=p(()=>e.nvars?Math.round(e.nvars*.1):1);ge(()=>{e.isOpen?((t()[0]===void 0||t()[0]===null||t()[0]<e.left||t()[0]>e.right-r(u))&&t(t()[0]=e.left,!0),(t()[1]===void 0||t()[1]===null||t()[1]>e.right||t()[1]<e.left+r(u))&&t(t()[1]=e.right,!0),s(s()[1]=t()[0],!0),s(s()[2]=t()[1],!0),F(c,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),F(c,!1))}),ge(()=>{l("left: "+t()[0]+" right: "+t()[1])}),En(n,Rr({id:"norm",title:a,get settings(){return l()},get isOpen(){return e.isOpen}},()=>o,{children:(f,d)=>{var v=ve(),h=Z(v);{var m=b=>{var g=cv(),_=Z(g);ie(_,{label:"Left",children:(A,k)=>{{let S=p(()=>e.right-r(u));zr(A,{get min(){return e.left},get max(){return r(S)},step:1,decNum:0,get value(){return t()[0]},set value(C){t(t()[0]=C,!0)}})}},$$slots:{default:!0}});var w=R(_,2);ie(w,{label:"Right",children:(A,k)=>{{let S=p(()=>e.left+r(u));zr(A,{get min(){return r(S)},get max(){return e.right},step:1,decNum:0,get value(){return t()[1]},set value(C){t(t()[1]=C,!0)}})}},$$slots:{default:!0}}),N(b,g)};Y(h,b=>{r(c)&&b(m)})}N(f,v)},$$slots:{default:!0}})),ye()}var fv=G("<!> <!>",1);function dv(n,e){we(e,!0);let t=V(e,"params",31,()=>Re([3,5]));V(e,"varind",27,()=>-1);let s=V(e,"settings",15);V(e,"nvars",3,0);let l=en(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Spike removal";ge(()=>{s(t()[0]+"/"+t()[1])}),En(n,Rr({id:"scale",title:o,get settings(){return s()}},()=>l,{children:(a,c)=>{var u=fv(),f=Z(u);ie(f,{label:"Window",children:(v,h)=>{ur(v,{min:3,max:15,step:2,get value(){return t()[0]},set value(m){t(t()[0]=m,!0)}})},$$slots:{default:!0}});var d=R(f,2);ie(d,{label:"Threshold",children:(v,h)=>{ur(v,{min:3,max:50,get value(){return t()[1]},set value(m){t(t()[1]=m,!0)}})},$$slots:{default:!0}}),N(a,u)},$$slots:{default:!0}})),ye()}var vv=G("<h2>Selected methods</h2> <!>",1),hv=G("<p>No methods selected</p>"),mv=G("<p> </p>"),gv=G("<h2>Available methods</h2>"),pv=G("<p>Maximum number of methods is selected.</p>"),bv=G("<p> </p> <!>",1),_v=G('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function wv(n,e){we(e,!0);let t=V(e,"prepobj",31,()=>Re([])),s=V(e,"meta",15),l=V(e,"varind",31,()=>-1),o=V(e,"rawdataShort",15),a=V(e,"prepdataShort",15),c=V(e,"prepmodel",3,null),u=V(e,"reset",3,null),f=V(e,"finalize",3,null);const d=30,v=8,h={savgol:nv,norm:tv,scale:lv,baseline:iv,trim:uv,spikes:dv};let m=te("neutral"),b=te(""),g=te(void 0),_=te(""),w=te(Re([])),A=te(!1),k=te(Re([])),S=te(Re([]));s(new Array(v).fill(""));const C=p(()=>e.rawdata.values.ncols-e.rawdata.nresp);let T=Re(e.rawdata.values.nrows<3?Object.keys(h).filter(le=>le!=="scale"):Object.keys(h));j(),t().length!==0&&P();async function P(){t().length!==0&&F(g,e.WASM().then(le=>{F(m,"applying");const oe=da(le,o().values,0,t(),!0,[]),se=ul(le,o().values,0,oe,!0);a(Pl(o(),se)),F(m,"success")}).catch(le=>{a(Pl(o())),console.error(le),F(m,"error"),F(b,le,!0)}),!0)}function j(){const le=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!t()||t().length<1){e.setLeft(0),e.setRight(le),F(k,[],!0),F(S,[],!0);return}let oe=[],se=[],he=0,me=le;for(let de of t())de.id==="trim"?(oe.push(he),se.push(me),de.params[0]<he&&(de.params[0]=he),de.params[1]>me&&(de.params[1]=me),he=de.params[0]>he?de.params[0]:he,me=de.params[1]>0&&de.params[1]<me?de.params[1]:me):(oe.push(he),se.push(me));F(k,oe,!0),F(S,se,!0),e.setLeft(he),e.setRight(me)}function q(le){const oe=qr.find(se=>se.id===le);oe&&(r(k).push(e.left),r(S).push(e.right),t().push({id:oe.id,params:oe.mp}),F(A,!0),F(_,t().length-1))}function E(){t().length<1||(r(k).pop(),r(S).pop(),t().pop(),F(A,!1),F(_,-1))}function y(le){if(le<=0)return;const oe=t()[le],se=t()[le-1];t(t()[le-1]=oe,!0),t(t()[le]=se,!0),I()}function M(le){if(le<0||le===t().length-1)return;const oe=t()[le],se=t()[le+1];t(t()[le+1]=oe,!0),t(t()[le]=se,!0),I()}function O(le){le<0||le>=t().length||(t(t().filter((oe,se)=>se!==le)),I())}function W(le){F(_,le,!0)}function L(){F(_,null)}function I(){F(m,"neutral"),F(b,""),F(A,!1),F(_,null),c()&&u()(),j(),P(),l(l()[1]=-1,!0),l(l()[2]=-1,!0)}ge(()=>{e.rawdata&&!o()&&o(Od(e.rawdata,d))}),ge(()=>{o()&&!a()&&a(Pl(o()))}),ge(()=>{(!t()||t().length===0)&&(F(w,[],!0),a(null),F(k,[],!0),F(S,[],!0),F(_,""),s(new Array(v).fill("")))});var Q=_v(),U=Z(Q);let K;var D=H(U);ie(D,{label:"",children:(le,oe)=>{var se=vv(),he=R(Z(se),2);{var me=de=>{_a(de,{text:"edit",get onclick(){return u()}})};Y(he,de=>{c()&&u()&&de(me)})}N(le,se)},$$slots:{default:!0}});var z=R(D,2);{var X=le=>{ie(le,{label:"",children:(oe,se)=>{var he=hv();N(oe,he)},$$slots:{default:!0}})},ee=le=>{var oe=ve(),se=Z(oe);Ve(se,17,t,We,(he,me,de)=>{const qe=p(()=>h[r(me).id]);var Be=ve(),Ie=Z(Be);{var J=re=>{var ke=ve(),fe=Z(ke);{let Te=p(()=>de===r(_)),ze=p(()=>r(A)?E:null);Fn(fe,()=>r(qe),(Oe,Ye)=>{Ye(Oe,{get isOpen(){return r(Te)},get left(){return r(k)[de]},get right(){return r(S)[de]},pos:de,get nvars(){return r(C)},moveUp:y,moveDown:M,apply:I,open:W,close:L,remove:O,get cancel(){return r(ze)},get params(){return r(me).params},set params(Ue){r(me).params=Ue},get varind(){return l()},set varind(Ue){l(Ue)},get settings(){return s()[de]},set settings(Ue){s(s()[de]=Ue,!0)}})})}N(re,ke)},$=re=>{var ke=ve(),fe=Z(ke);{let Te=p(()=>de===r(_)),ze=p(()=>r(A)?E:null);Fn(fe,()=>r(qe),(Oe,Ye)=>{Ye(Oe,{pos:de,get isOpen(){return r(Te)},get left(){return r(k)[de]},get right(){return r(S)[de]},get nvars(){return r(C)},moveUp:y,moveDown:M,apply:I,open:W,close:L,remove:O,get cancel(){return r(ze)},get params(){return r(me).params},set params(Ue){r(me).params=Ue},get settings(){return s()[de]},set settings(Ue){s(s()[de]=Ue,!0)}})})}N(re,ke)};Y(Ie,re=>{r(me).id==="norm"||r(me).id==="trim"?re(J):re($,!1)})}N(he,Be)}),N(le,oe)};Y(z,le=>{t().length===0?le(X):le(ee,!1)})}var ne=R(z,2);{var xe=le=>{ie(le,{status:"error",children:(oe,se)=>{var he=mv(),me=H(he);ae(()=>Ee(me,r(b))),N(oe,he)},$$slots:{default:!0}})};Y(ne,le=>{(r(m)==="error"||r(b))&&le(xe)})}var ue=R(U,2),_e=H(ue);{var ce=le=>{ie(le,{label:" ",children:(oe,se)=>{tt(oe,{get onclick(){return f()},text:"Finalize"})},$$slots:{default:!0}})};Y(_e,le=>{!c()&&!r(_)&&t().length>0&&le(ce)})}var Ne=R(ue,2),Pe=H(Ne);ie(Pe,{label:"",children:(le,oe)=>{var se=gv();N(le,se)},$$slots:{default:!0}});var Le=R(Pe,2);{var Ae=le=>{ie(le,{label:"",children:(oe,se)=>{var he=pv();N(oe,he)},$$slots:{default:!0}})},je=le=>{var oe=ve(),se=Z(oe);Ve(se,17,()=>T,We,(he,me)=>{const de=p(()=>qr.find(qe=>qe.id===r(me)));ie(he,{children:(qe,Be)=>{var Ie=bv(),J=Z(Ie),$=H(J),re=R(J,2);Pu(re,{onclick:()=>q(r(de).id)}),ae(()=>Ee($,r(de).title)),N(qe,Ie)},$$slots:{default:!0}})}),N(le,oe)};Y(Le,le=>{t().length>=v?le(Ae):le(je,!1)})}ae(()=>K=ct(U,1,"selected-methods-list svelte-9cg1zq",null,K,{final:c()!==null&&c()!==void 0})),N(n,Q),ye()}var yv=G("<!> <!>",1),xv=G("<!> <!>",1),kv=G("<!> <!>",1),Ev=G("<!> <!> <!> <!> <!> <!> <!> <!>",1),Sv=G("<h2>Plot settings</h2>"),Av=G('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),Cv=G('<div class="plot-panel svelte-5p9gcx"><!></div>');function Nv(n,e){we(e,!0);let t=te(!0),s=te("none"),l=te(!1);const o=p(()=>(r(t)?"Preprocessed":"Raw")+" data (selected rows)"),a=p(()=>r(t)&&e.prepdata?e.prepdata:e.rawdata),c=p(()=>r(a)?r(a).varaxisLabel:"Variables"),u=p(()=>e.rawdata.varaxisUnits),f=p(()=>e.left>=0||e.right>0&&e.right<r(a).values.nrows),d=p(()=>e.left>=0?e.left+1:1),v=p(()=>e.right>0&&e.right<r(a).values.nrows?e.right:r(a).values.nrows),h=p(()=>r(t)&&r(a)&&r(f)?He.seq(r(d),r(v)):null),m=p(()=>r(h)?r(a).varvalues.filter((j,q)=>q>=r(d)-1&&q<r(v)):r(a).varvalues),b=p(()=>r(h)?r(a).values.subset(r(h),null):r(a).values),g=p(()=>r(b)?Ar(r(b).v):null),_=p(()=>r(g)?(r(g)[1]-r(g)[0])*.05:null),w=p(()=>r(g)?[r(g)[0],r(g)[1]+(r(s)!=="none")*r(_)]:[0,1]),A=p(()=>r(a)?Ar(r(a).varvalues,r(l)?.005:.1):[0,1]),k=p(()=>r(l)&&r(f)?[r(a).varvalues[r(d)-1],r(a).varvalues[r(v)-1]]:r(A)),S=p(()=>{if(!e.rawdata)return null;const j={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const q=kl(e.rawdata.classNames.length);j.groups={colors:e.rawdata.classes.map(E=>q[e.rawdata.classNames.findIndex(y=>y===E)]),breaks:Dt(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:q}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const q=$s(e.rawdata.resp,8),E=kl(q.length-1);j.response={colors:Md(e.rawdata.resp.v,q.v,E),labels:null,breaks:q,map:E}}return j});ge(()=>{(e.left<1||e.right<1||e.right>=e.left)&&F(l,!1)});var C=Cv(),T=H(C);{var P=j=>{var q=Av(),E=Z(q),y=H(E),M=H(y);Dn(M,{get title(){return r(o)},get limY(){return r(w)},get limX(){return r(k)},fileName:"plot-preprocessed",children:(D,z)=>{var X=Ev(),ee=Z(X);{var ne=se=>{za(se,{get xValues(){return r(m)},get yValues(){return r(b)}})},xe=se=>{var he=ve(),me=Z(he);Ve(me,17,()=>r(S)[r(s)].colors,We,(de,qe,Be)=>{{let Ie=p(()=>r(b).getcolumn(Be+1));Vr(de,{get xValues(){return r(m)},get yValues(){return r(Ie)},get lineColor(){return r(qe)}})}}),N(se,he)};Y(ee,se=>{r(s)==="none"?se(ne):se(xe,!1)})}var ue=R(ee,2);{var _e=se=>{const he=p(()=>r(a).varvalues[e.varind[0]]);var me=yv(),de=Z(me);{let Be=p(()=>[r(he),r(he)]);Vr(de,{get xValues(){return r(Be)},get yValues(){return r(w)},lineColor:"#00000060"})}var qe=R(de,2);{let Be=p(()=>[r(he)]),Ie=p(()=>[r(w)[1]-r(_)*(r(s)==="none"?1:2)]),J=p(()=>Or(r(he).toFixed(2)+" "+r(u)));Un(qe,{get xValues(){return r(Be)},get yValues(){return r(Ie)},get labels(){return r(J)},textColor:"#a0a0a0",textSize:.8,pos:2})}N(se,me)};Y(ue,se=>{e.varind&&e.varind[0]>0&&se(_e)})}var ce=R(ue,2);{var Ne=se=>{const he=p(()=>r(a).varvalues[e.varind[1]]);var me=xv(),de=Z(me);{let Be=p(()=>[r(k)[0]]),Ie=p(()=>[r(a).varvalues[e.varind[1]]-r(k)[0]]),J=p(()=>[r(w)[1]]),$=p(()=>[r(w)[1]-r(w)[0]]);Hn(de,{get left(){return r(Be)},get width(){return r(Ie)},get top(){return r(J)},get height(){return r($)},lineColor:"transparent",faceColor:"#00000040"})}var qe=R(de,2);{let Be=p(()=>[r(he)]),Ie=p(()=>[r(w)[1]-r(_)*(r(s)==="none"?1:2)]),J=p(()=>Or(r(he).toFixed(2)+" "+r(u)));Un(qe,{get xValues(){return r(Be)},get yValues(){return r(Ie)},get labels(){return r(J)},textColor:"#a0a0a0",textSize:.8,pos:2})}N(se,me)};Y(ce,se=>{e.varind&&e.varind[1]>0&&se(Ne)})}var Pe=R(ce,2);{var Le=se=>{const he=p(()=>r(a).varvalues[e.varind[2]-1]);var me=kv(),de=Z(me);{let Be=p(()=>[r(a).varvalues[e.varind[2]-1]]),Ie=p(()=>[r(k)[1]-r(a).varvalues[e.varind[2]-1]]),J=p(()=>[r(w)[1]]),$=p(()=>[r(w)[1]-r(w)[0]]);Hn(de,{get left(){return r(Be)},get width(){return r(Ie)},get top(){return r(J)},get height(){return r($)},lineColor:"transparent",faceColor:"#00000040"})}var qe=R(de,2);{let Be=p(()=>[r(he)]),Ie=p(()=>[r(w)[1]-r(_)*(r(s)==="none"?1:2)]),J=p(()=>Or(r(he).toFixed(2)+" "+r(u)));Un(qe,{get xValues(){return r(Be)},get yValues(){return r(Ie)},get labels(){return r(J)},textColor:"#a0a0a0",textSize:.8,pos:2})}N(se,me)};Y(Pe,se=>{e.varind&&e.varind[2]<r(a).varvalues.length&&e.varind[2]>0&&se(Le)})}var Ae=R(Pe,2);{let se=p(()=>r(s)!=="none");ws(Ae,{get show(){return r(se)},get labels(){return r(S)[r(s)].labels},get breaks(){return r(S)[r(s)].breaks},get colmap(){return r(S)[r(s)].map}})}var je=R(Ae,2);Yn(je,{get label(){return r(c)},showGrid:!0});var le=R(je,2);bs(le,{showGrid:!0});var oe=R(le,2);Wn(oe,{}),N(D,X)},$$slots:{default:!0}});var O=R(E,2),W=H(O);ie(W,{label:"",children:(D,z)=>{var X=Sv();N(D,X)},$$slots:{default:!0}});var L=R(W,2);ie(L,{label:"Show",children:(D,z)=>{fr(D,{options:["raw","preprocessed"],get value(){return r(t)},set value(X){F(t,X,!0)}})},$$slots:{default:!0}});var I=R(L,2);{var Q=D=>{ie(D,{label:"Color by",children:(z,X)=>{{let ee=p(()=>Object.keys(r(S)));Xe(z,{get options(){return r(ee)},get value(){return r(s)},set value(ne){F(s,ne,!0)}})}},$$slots:{default:!0}})};Y(I,D=>{Object.keys(r(S)).length>1&&D(Q)})}var U=R(I,2);{var K=D=>{ie(D,{label:"Zoom (x-axis)",children:(z,X)=>{fr(z,{options:["off","on"],get value(){return r(l)},set value(ee){F(l,ee,!0)}})},$$slots:{default:!0}})};Y(U,D=>{e.left>0&&e.right>e.left&&D(K)})}N(j,q)};Y(T,j=>{r(m)&&r(b)&&j(P)})}N(n,C),ye()}var Pv=G('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function Tv(n,e){we(e,!0);let t=V(e,"left",15),s=V(e,"right",15),l=V(e,"prepobj",15),o=V(e,"meta",15),a=V(e,"finalize",3,null),c=te(Re([-1,0,0])),u=te(null),f=te(null);function d(k){const S=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&k>=0&&k<S&&k<s()&&t(k)}function v(k){const S=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&k<=S&&k>t()&&s(k)}var h=Pv(),m=H(h),b=H(m),g=H(b);wv(g,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return t()},get right(){return s()},setLeft:d,",":!0,setRight:v,get finalize(){return a()},get varind(){return r(c)},set varind(k){F(c,k,!0)},get prepobj(){return l()},set prepobj(k){l(k)},get rawdataShort(){return r(u)},set rawdataShort(k){F(u,k,!0)},get prepdataShort(){return r(f)},set prepdataShort(k){F(f,k,!0)},get meta(){return o()},set meta(k){o(k)}});var _=R(m,2),w=H(_);{var A=k=>{Nv(k,{get rawdata(){return r(u)},get prepdata(){return r(f)},get left(){return t()},get right(){return s()},get varind(){return r(c)}})};Y(w,k=>{r(u)&&k(A)})}N(n,h),ye()}var jv=G('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),Lv=G("<!> <!> <!>",1),Mv=G('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),Rv=G("<!> <!> <!>",1),Fv=G("<p><strong>Preprocessing model</strong></p>"),qv=G("<!> <!>",1),zv=G("<p> </p>"),Iv=G('<div class="prep-widget"><!></div> <!> <!>',1);function Ov(n,e){we(e,!0);let t=V(e,"prepType",15),s=V(e,"prepobj",15),l=V(e,"prepdata",15),o=V(e,"prepmodel",15),a=V(e,"prepmeta",15),c=te(!1),u=te(0),f=te(Re(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),d=te("neutral"),v=te(""),h=te(void 0);async function m(M,O,W){!O||!M||O.length===0||F(h,e.WASM().then(L=>{F(d,"applying");const I=da(L,M.values,M.nresp,O,!1,W);I.info=a(),o(I)}).catch(L=>{o(null),console.error(L),F(d,"error"),F(v,L,!0)}),!0)}async function b(M,O){if(!O||typeof O!="object"){l(null);return}if(Object.keys(O).length===0){l(M);return}F(h,e.WASM().then(W=>{F(d,"applying");const L=ul(W,M.values,M.nresp,O,!1,!1),I=Vd(Vi(M),L);l(fu(I,O))}).catch(W=>{l(null),console.error(W),F(d,"error"),F(v,W,!0)}),!0)}function g(){t(null),l(null),o(null),s([]),F(u,0),F(f,e.rawdata.values.ncols-e.rawdata.nresp)}function _(){s()&&s().length>0?m(e.rawdata,s(),e.outliers):(t(null),o(null)),F(c,!1)}function w(){t("create"),l(null),o(null),F(c,!0)}function A(){t("skip"),o({})}ge(()=>{o(),e.rawdata&&b(e.rawdata,o())}),ge(()=>{t()==="create"&&s()&&!o()&&m(e.rawdata,s(),e.outliers)}),ge(()=>{t()==="skip"&&l()===null&&(o({}),s([]),l(e.rawdata))});var k=Iv(),S=Z(k),C=H(S);{var T=M=>{ie(M,{name:"info",children:(O,W)=>{var L=Lv(),I=Z(L);{var Q=z=>{var X=jv(),ee=R(H(X),2);Tl(ee,{get prepmodel(){return o()}}),N(z,X)};Y(I,z=>{r(c)||z(Q)})}var U=R(I,2);{var K=z=>{_a(z,{onclick:w})};Y(U,z=>{t()==="create"&&z(K)})}var D=R(U,2);nr(D,{onclick:g}),N(O,L)},$$slots:{default:!0}})},P=M=>{var O=ve(),W=Z(O);{var L=Q=>{ie(Q,{name:"prep-info",children:(U,K)=>{var D=Mv(),z=R(Z(D),2),X=H(z);nr(X,{onclick:g}),N(U,D)},$$slots:{default:!0}})},I=Q=>{var U=ve(),K=Z(U);{var D=X=>{ie(X,{label:"Preprocessing",name:"prep-container",children:(ee,ne)=>{var xe=Rv(),ue=Z(xe);tt(ue,{text:"Skip",onclick:A});var _e=R(ue,2);tt(_e,{text:"Load",onclick:()=>t("file")});var ce=R(_e,2);tt(ce,{text:"Create",onclick:w}),N(ee,xe)},$$slots:{default:!0}})},z=X=>{var ee=ve(),ne=Z(ee);{var xe=ue=>{var _e=qv(),ce=Z(_e);ie(ce,{children:(Pe,Le)=>{var Ae=Fv();N(Pe,Ae)},$$slots:{default:!0}});var Ne=R(ce,2);Xd(Ne,{get model(){return o()},set model(Pe){o(Pe)},get prepobj(){return s()},set prepobj(Pe){s(Pe)},get left(){return r(u)},set left(Pe){F(u,Pe,!0)},get right(){return r(f)},set right(Pe){F(f,Pe,!0)}}),N(ue,_e)};Y(ne,ue=>{t()==="file"&&ue(xe)},!0)}N(X,ee)};Y(K,X=>{t()?X(z,!1):X(D)},!0)}N(Q,U)};Y(W,Q=>{t()==="skip"?Q(L):Q(I,!1)},!0)}N(M,O)};Y(C,M=>{o()&&l()&&o().ml?M(T):M(P,!1)})}var j=R(S,2);{var q=M=>{Sl(M,{closeModal:_,isDark:!0,children:(O,W)=>{Tv(O,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:_,get prepobj(){return s()},set prepobj(L){s(L)},get left(){return r(u)},set left(L){F(u,L,!0)},get right(){return r(f)},set right(L){F(f,L,!0)},get meta(){return a()},set meta(L){a(L)}})},$$slots:{default:!0}})};Y(j,M=>{r(c)&&M(q)})}var E=R(j,2);{var y=M=>{ie(M,{status:"error",children:(O,W)=>{var L=zv(),I=H(L);ae(()=>Ee(I,r(v))),N(O,L)},$$slots:{default:!0}})};Y(E,M=>{(r(d)==="error"||r(v))&&M(y)})}N(n,k),ye()}var Vv=G('<th class="svelte-110ino2"> </th>'),Bv=G('<td class="svelte-110ino2"> </td>'),Dv=G('<tr class="svelte-110ino2"></tr>'),Yv=G('<input type="radio" name="resID" class="svelte-110ino2"/> <label class="svelte-110ino2"> </label>',1),Wv=G('<div class="switcher svelte-110ino2"></div>'),Hv=G('<table class="svelte-110ino2"><thead><tr class="svelte-110ino2"></tr></thead><tbody></tbody></table> <!>',1);function Ua(n,e){we(e,!0);const t=[],s=["TN","FP","TP","FN"],l=["Sensitivity","Specificity","Efficiency","Accuracy"],o=p(()=>Object.keys(e.res));let a=te(0),c=p(()=>{if(!e.res)return null;const v=e.res[r(o)[r(a)]],h=e.model.rule==="soft"?["",...e.model.classNames,"total"]:["",...e.model.classNames];let m=[];for(let b of s){let g=[b],_=0;for(let w of e.model.classNames){const A=v.v[w].res[e.model.ncomp-1][b];_+=A,g.push(A)}e.model.rule==="soft"&&g.push(_),m.push(g)}for(let b of l){let g=[b];const _=b.toLowerCase();for(let w of v.classNames){const A=v.v[w].stat[_][e.model.ncomp-1];g.push(A.toFixed(3))}if(e.model.rule==="soft"){const w=v.v.total.stat[_][e.model.ncomp-1];g.push(w.toFixed(3))}m.push(g)}return{header:h,rows:m}});var u=ve(),f=Z(u);{var d=v=>{var h=Hv(),m=Z(h),b=H(m),g=H(b);Ve(g,21,()=>r(c).header,We,(k,S)=>{var C=Vv(),T=H(C);ae(()=>Ee(T,r(S))),N(k,C)});var _=R(b);Ve(_,21,()=>r(c).rows,We,(k,S)=>{var C=Dv();Ve(C,21,()=>r(S),We,(T,P)=>{var j=Bv(),q=H(j);ae(()=>Ee(q,r(P))),N(T,j)}),N(k,C)});var w=R(m,2);{var A=k=>{var S=Wv();Ve(S,21,()=>r(o),We,(C,T,P)=>{var j=Yv(),q=Z(j);q.value=q.__value=P;var E=R(q,2),y=H(E);ae(()=>{B(q,"id",r(T)),B(E,"for",r(T)),Ee(y,r(T))}),Ic(t,[],q,()=>r(a),M=>F(a,M)),N(C,j)}),N(k,S)};Y(w,k=>{r(o).length>1&&k(A)})}N(v,h)};Y(f,v=>{r(c)&&v(d)})}N(n,u),ye()}var Uv=G("<!> <!> <!> <!>",1),Gv=G("<p> </p>"),Xv=G("<!> <p>Computing global model...</p>",1),Kv=G('<p><span style="color:#a0a0a0;">PLS model:</span> </p> <!>',1),Jv=G('<div class="buttons"><!> <!></div>'),Zv=G("<!> <!>",1),Qv=G("<p> </p>"),$v=G("<!> <!> <!> <!>",1);function eh(n,e){we(e,!0);let t=V(e,"outliers",19,()=>[]),s=V(e,"exclvars",19,()=>[]),l=V(e,"resobj",15),o=V(e,"model",15),a=V(e,"downloadModel",3,null),c=V(e,"downloadResults",3,null),u=te("neutral"),f=te(""),d=te(1),v=te(!0),h=te(!1),m=te(void 0);async function b(y,M,O,W){const L=y.nresp,I=y.varindices;F(m,e.WASM().then(Q=>{F(u,"computing");const U=ou(Q,y.values,L,M,O,W,t(),s());U.hash=fs(),U.varlabels=y.varlabels.filter((D,z)=>z<L||!s().includes(I[z])),U.varindices=y.varindices.filter((D,z)=>z<L||!s().includes(I[z])),U.varvalues=y.varvalues.filter((D,z)=>z<L||!s().includes(I[z])),U.xvarlabels=U.varlabels.filter((D,z)=>z+1>L),U.xvarvalues=U.varvalues.filter((D,z)=>z+1>L),U.xvarindices=U.varindices.filter((D,z)=>z+1>L).map(D=>D+1),U.varvaluesName=y.varvaluesName,U.varvaluesUnits=y.varvaluesUnits,U.varrev=y.varrev,U.prep=null;const K=dl(Q,U,y,t());U.stat={xexpvar:K.stat.xexpvar,yexpvar:K.stat.yexpvar},o(U),l(K),F(u,"success")}).catch(Q=>{console.error(Q),o(null),F(u,"error"),F(f,Q,!0)}),!0)}function g(y){F(u,"neutral"),F(f,null),b(e.dataset,r(d),r(v),r(h))}function _(){F(u,"neutral"),F(m,null),l(null),o(null),F(f,null)}let w=p(()=>e.dataset?Math.min(e.dataset.values.nrows-2-t().length,e.dataset.values.ncols-e.dataset.nresp-s().length-1,50):null);ge(()=>{e.dataset===null&&_()}),ge(()=>{F(d,r(w)?Math.min(r(w),20):null,!0)});var A=$v(),k=Z(A);{var S=y=>{var M=Uv(),O=Z(M);{var W=U=>{ie(U,{name:"ncomp",label:"# of LVs",children:(K,D)=>{zr(K,{id:"ncomp",min:1,get max(){return r(w)},step:1,decNum:0,get value(){return r(d)},set value(z){F(d,z,!0)}})},$$slots:{default:!0}})};Y(O,U=>{r(d)&&r(w)&&U(W)})}var L=R(O,2);ie(L,{name:"center",label:"Center",children:(U,K)=>{fr(U,{id:"center",options:["no","yes"],get value(){return r(v)},set value(D){F(v,D,!0)}})},$$slots:{default:!0}});var I=R(L,2);ie(I,{name:"scale",label:"Scale",children:(U,K)=>{fr(U,{id:"scale",options:["no","yes"],get value(){return r(h)},set value(D){F(h,D,!0)}})},$$slots:{default:!0}});var Q=R(I,2);ie(Q,{name:"create-model",label:" ",children:(U,K)=>{tt(U,{onclick:g,text:"Create model"})},$$slots:{default:!0}}),N(y,M)};Y(k,y=>{e.dataset&&!o()&&r(u)!=="computing"&&y(S)})}var C=R(k,2);{var T=y=>{var M=ve(),O=Z(M);Ws(O,()=>r(m),W=>{ie(W,{name:"spinner",children:(L,I)=>{var Q=Xv(),U=Z(Q);ml(U),N(L,Q)},$$slots:{default:!0}})},void 0,(W,L)=>{ie(W,{name:"error",status:"error",children:(I,Q)=>{var U=Gv(),K=H(U);ae(()=>Ee(K,r(L))),N(I,U)},$$slots:{default:!0}})}),N(y,M)};Y(C,y=>{r(m)&&y(T)})}var P=R(C,2);{var j=y=>{var M=Zv(),O=Z(M);ie(O,{name:"info",children:(I,Q)=>{var U=Kv(),K=Z(U),D=R(H(K)),z=R(K,2);nr(z,{onclick:_}),ae(()=>Ee(D,` ${o().ncomp??""} LVs${o().center?", centered":""}${o().scale?", scaled":""}`)),N(I,U)},$$slots:{default:!0}});var W=R(O,2);{var L=I=>{ie(I,{name:"download-buttons",label:"Download",children:(Q,U)=>{var K=Jv(),D=H(K);tt(D,{onclick:()=>c()(l(),e.dataset,"train",t()),text:"Results"});var z=R(D,2);tt(z,{onclick:()=>a()(o()),text:"Model"}),N(Q,K)},$$slots:{default:!0}})};Y(W,I=>{a()&&c()&&I(L)})}N(y,M)};Y(P,y=>{o()&&o().ncomp&&y(j)})}var q=R(P,2);{var E=y=>{ie(y,{name:"error",status:"error",children:(M,O)=>{var W=Qv(),L=H(W);ae(()=>Ee(L,r(f))),N(M,W)},$$slots:{default:!0}})};Y(q,y=>{(r(u)==="error"||r(f))&&y(E)})}N(n,A),ye()}var th=G("<!> <!> <!>",1),rh=G('<p class="svelte-7klqqw"> </p>'),nh=G('<!> <p class="svelte-7klqqw">Computing PV-set...</p>',1),sh=G('<p class="svelte-7klqqw"><span class="svelte-7klqqw">PV-set:</span> <br/> <span class="svelte-7klqqw">Size:</span> <span class="svelte-7klqqw">(X)</span> <span class="svelte-7klqqw">(Y)</span>,</p> <!> <!>',1),lh=G('<p class="svelte-7klqqw"> </p>'),oh=G("<!> <!> <!> <!>",1);function ah(n,e){we(e,!0);let t=V(e,"outliers",19,()=>[]),s=V(e,"pvset",15),l=V(e,"pvres",15),o=V(e,"pvscalars",15),a=te("neutral"),c=te(""),u=te(Re(["ven","rand","loo"])),f=te("ven"),d=te(void 0),v=e.calset.values.nrows-t().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(E=>E>=v/(v-e.model.ncomp-1)&&E<=v/2):[],m=te(Re(h.length>0?h[0]:0));ge(()=>{h.length===0&&(F(u,["loo"],!0),F(f,"loo"))});async function b(E,y,M,O){F(d,e.WASM().then(W=>{const L=M.type=="loo"?0:M.type=="rand"?2:1,[I,Q]=iu(W,y,E.values,E.nresp,y.ncomp,M.nseg,L,0,O);s({classLabelsVarname:E.classLabelsVarname,classNames:E.classNames,classes:E.classes,dec:E.dec,fileName:E.fileName+"-pcv",hasClassNames:E.hasClassNames,hasLabels:E.hasLabels,header:E.header,labelsVarname:E.labelsVarname,objindices:e.calres.objindices,objlabels:e.calres.objlabels,sep:E.sep,values:I,varAxisTitle:E.varAxisTitle,varindices:y.varindices,varlabels:y.varlabels,varrev:y.varrev,varvalues:y.varvalues,varvaluesName:y.varvaluesName,varvaluesUnits:y.varvaluesUnits,nresp:y.nresp}),l(dl(W,y,s(),[])),o(Q)}).catch(W=>{console.error(W),s(null),l(null),F(a,"error"),F(c,W,!0)}),!0)}function g(E){F(a,"neutral"),F(c,""),b(e.calset,e.model,{type:r(f),nseg:r(m)},t())}function _(){F(a,"neutral"),F(c,""),F(d,null),s(null),l(null)}ge(()=>{e.model===null&&_()});var w=oh(),A=Z(w);{var k=E=>{var y=th(),M=Z(y);ie(M,{name:"split",label:"Split type:",children:(I,Q)=>{Xe(I,{id:"cvType",get options(){return r(u)},get value(){return r(f)},set value(U){F(f,U,!0)}})},$$slots:{default:!0}});var O=R(M,2);{var W=I=>{ie(I,{name:"nseg",label:"Segments:",children:(Q,U)=>{Xe(Q,{id:"nseg",get options(){return h},get value(){return r(m)},set value(K){F(m,K,!0)}})},$$slots:{default:!0}})};Y(O,I=>{r(f)!=="loo"&&I(W)})}var L=R(O,2);ie(L,{name:"run-button",label:" ",children:(I,Q)=>{tt(I,{onclick:g,text:"Compute PV-set"})},$$slots:{default:!0}}),N(E,y)};Y(A,E=>{e.model&&!s()&&r(a)!=="busy"&&E(k)})}var S=R(A,2);{var C=E=>{var y=ve(),M=Z(y);Ws(M,()=>r(d),O=>{ie(O,{name:"spinner",children:(W,L)=>{var I=nh(),Q=Z(I);ml(Q),N(W,I)},$$slots:{default:!0}})},void 0,(O,W)=>{ie(O,{name:"error",status:"error",children:(L,I)=>{var Q=rh(),U=H(Q);ae(()=>Ee(U,r(W))),N(L,Q)},$$slots:{default:!0}})}),N(E,y)};Y(S,E=>{r(d)&&E(C)})}var T=R(S,2);{var P=E=>{ie(E,{name:"info",children:(y,M)=>{var O=sh(),W=Z(O),L=R(H(W)),I=R(L,4),Q=R(I,2),U=R(W,2);Nu(U,{onclick:()=>wu(s(),e.calset.fileName+"-pv")});var K=R(U,2);nr(K,{onclick:_}),ae(()=>{Ee(L,` ${r(f)??""}
      ${r(f)!=="loo"?r(m)+" seg":""}`),Ee(I,` ${s().values.nrows??""}×${s().values.ncols-s().nresp} `),Ee(Q,`,
      ${s().values.nrows??""}×${s().nresp??""} `)}),N(y,O)},$$slots:{default:!0}})};Y(T,E=>{s()&&E(P)})}var j=R(T,2);{var q=E=>{ie(E,{name:"error",status:"error",children:(y,M)=>{var O=lh(),W=H(O);ae(()=>Ee(W,r(c))),N(y,O)},$$slots:{default:!0}})};Y(j,E=>{r(a)==="error"&&r(c)&&E(q)})}N(n,w),ye()}var ih=G("<!> <!> <!> <!>",1),ch=G("<!> <!> <!>",1);function Ga(n,e){we(e,!0);let t=V(e,"damodel",15);const s=p(()=>Object.keys(e.ind));let l=te(1),o=te(10),a=te(10),c=te(1),u=te(2);function f(b,g,_){const w=r(s).length,A={};for(let k=0;k<w;k++){const S=r(s)[k],C=g[S],T=C.length,P=new Array(b.ncomp),j=new Array(b.ncomp),q=new Array(b.ncomp),E=new Array(b.ncomp);for(let y=1;y<=b.ncomp;y++){const M=Bt(b,"Yp",y,1),O=be.zeros(T);let W=0,L=0;for(let D of C)W+=M[D],O.v[L]=M[D],L+=1;W=W/T;const I=Qs(O);let Q=0,U=0;L=0;const K=be.zeros(T);for(let D of C)Q+=(M[D]-W)**2,K.v[L]=Math.abs(M[D]-I),L+=1;Q=Math.sqrt(Q/(T-1)),U=1.25*Qs(K),P[y-1]=W,j[y-1]=Q,q[y-1]=I,E[y-1]=U}A[S]={classic:{m:P,s:j},robust:{m:q,s:E}}}return A}ge(()=>{if(t()||!e.plsmodel||!e.plsres||!e.ind)return;const b=5,g=1,_=0,w="hard",A="classic",k=f(e.plsres,e.ind),S=Object.keys(e.ind).map(C=>e.ind[C].length);t({ncomp:e.ncomp,rule:w,limType:A,threshold:_,alpha:b,gamma:g,classNames:r(s),params:k,ind:e.ind,crit:null,dof:S,hash:fs()})});const d=p(()=>t()&&t().limType?[t().params[t().classNames[0]][t().limType],t().params[t().classNames[1]][t().limType]]:null);ge(()=>{if(!(!r(d)||t().rule==="hard")&&t().ncomp){const b=Number.parseFloat(t().alpha)/100,g=r(d)[0].m[t().ncomp-1],_=r(d)[1].m[t().ncomp-1],w=r(d)[0].s[t().ncomp-1],A=r(d)[1].s[t().ncomp-1],k=Nr(b,g,w),S=Nr(1-b,_,A),C=Number.parseFloat(t().gamma)/100,T=1-Math.pow(1-C,1/t().dof[0]),P=1-Math.pow(1-C,1/t().dof[1]),j=Nr(T,g,w),q=Nr(1-P,_,A),E={};E[t().classNames[0]]=[g,w,k,j],E[t().classNames[1]]=[_,A,S,q],t(t().crit=E,!0)}}),ge(()=>{if(t()&&r(o)){const b=Number.parseFloat(r(o));F(l,b>10?10:b/10,!0),F(c,b>10?1:b/10,!0),F(a,b,!0),F(u,Math.round(Math.abs(Math.log10(r(c)))),!0),t(t().alpha=r(l),!0)}});var v=ve(),h=Z(v);{var m=b=>{var g=ch(),_=Z(g);ie(_,{name:"ncomp",label:"# of LVs",children:(C,T)=>{zr(C,{min:1,get max(){return e.plsmodel.ncomp},step:1,decNum:0,get value(){return t().ncomp},set value(P){t(t().ncomp=P,!0)}})},$$slots:{default:!0}});var w=R(_,2);ie(w,{name:"rule",label:"Rule",children:(C,T)=>{Xe(C,{options:["hard","soft"],get value(){return t().rule},set value(P){t(t().rule=P,!0)}})},$$slots:{default:!0}});var A=R(w,2);{var k=C=>{ie(C,{name:"threshold",label:"Threshold",children:(T,P)=>{zr(T,{min:-1,max:1,step:.02,decNum:2,get value(){return t().threshold},set value(j){t(t().threshold=j,!0)}})},$$slots:{default:!0}})},S=C=>{var T=ih(),P=Z(T);ie(P,{name:"alpha",label:"Alpha range",children:(y,M)=>{Xe(y,{options:["20","10","1","0.1"],get value(){return r(o)},set value(O){F(o,O,!0)}})},$$slots:{default:!0}});var j=R(P,2);ie(j,{name:"alpha",label:"Alpha, %",children:(y,M)=>{zr(y,{get min(){return r(l)},get max(){return r(a)},get step(){return r(c)},get decNum(){return r(u)},get value(){return t().alpha},set value(O){t(t().alpha=O,!0)}})},$$slots:{default:!0}});var q=R(j,2);ie(q,{name:"limits",label:"Limits",children:(y,M)=>{Xe(y,{options:["classic","robust"],get value(){return t().limType},set value(O){t(t().limType=O,!0)}})},$$slots:{default:!0}});var E=R(q,2);ie(E,{name:"gamma",label:"Gamma, %",children:(y,M)=>{Xe(y,{options:["5","1","0.1","0.01"],get value(){return t().gamma},set value(O){t(t().gamma=O,!0)}})},$$slots:{default:!0}}),N(C,T)};Y(A,C=>{t().rule==="hard"?C(k):C(S,!1)})}N(b,g)};Y(h,b=>{t()&&b(m)})}N(n,v),ye()}var uh=G('<span style="font-weight:bold"> </span><br/>',1),fh=G('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),dh=G('<span class="file-size svelte-1uxd0r7"> </span>'),vh=G('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function hh(n,e){we(e,!0);let t=V(e,"title",3,"");var s=ve(),l=Z(s);{var o=a=>{ie(a,{children:(c,u)=>{var f=vh(),d=Z(f),v=H(d);{var h=k=>{var S=uh(),C=Z(S),T=H(C);ae(()=>Ee(T,t())),N(k,S)};Y(v,k=>{t()&&t()!==""&&k(h)})}var m=R(v,4),b=H(m),g=R(m,5);{var _=k=>{var S=fh(),C=Z(S),T=H(C),P=R(C,4),j=H(P);ae(()=>{Ee(T,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),Ee(j,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),N(k,S)},w=k=>{var S=dh(),C=H(S);ae(()=>Ee(C,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),N(k,S)};Y(g,k=>{e.dataset.nresp&&e.dataset.nresp>0?k(_):k(w,!1)})}var A=R(d,2);nr(A,{get onclick(){return e.reset}}),ae(()=>{B(m,"title",e.dataset.fileName),Ee(b,e.dataset.fileName)}),N(c,f)},$$slots:{default:!0}})};Y(l,a=>{e.dataset&&a(o)})}N(n,s),ye()}var mh=G("<!> <!>",1),gh=G("<!> <!> <!> <!> <!>",1),ph=G("<!> <!>",1),bh=G("<p> </p>"),_h=G("<!> <p> </p>",1),wh=G("<p> </p>"),yh=G("<!> <!> <!>",1);function jl(n,e){we(e,!0);let t=V(e,"model",3,null),s=V(e,"outliers",19,()=>[]),l=V(e,"classMandatory",3,!1),o=V(e,"title",3,""),a=V(e,"dataset",15),c=V(e,"resobj",15);const u=[",",";"],f=p(()=>t()?["no","yes"]:["no","labels","values"]);let d=te(void 0),v=te(""),h=te(""),m=te(Re(l())),b=te(","),g=te("no"),_=te(!1),w=te(null),A=te("neutral"),k=te("");function S(z){F(A,"error"),F(k,z,!0),console.error(z)}function C(){F(A,"neural"),F(k,"")}function T(){F(A,"success"),F(k,"")}function P(z,X,ee){c()||F(w,e.WASM().then(ne=>{c(dl(ne,z,X,ee,!0)),T()}).catch(ne=>{c(null),S(ne)}),!0)}function j(z,X){if(!z||z.size<10)return;const ne=z.slice(0,1e5),xe=new FileReader;xe.onload=()=>{const ue=xe.result;!ue||ue.length<0||((_e=>{var ce=ii(_e,4);F(b,ce[0],!0),F(_,ce[1],!0),F(m,ce[2],!0),F(g,ce[3],!0)})(bu(ue)),X&&r(g)!=="no"&&F(g,"yes"),T())},xe.onerror=function(ue){csvString=null,S("Error reading CSV file. "+ue)},xe.readAsText(ne)}function q(z){try{const X=l()?Eu(ga(z,r(b),r(g)==="yes"?"labels":r(g),r(_),r(m),r(v),r(h),0)):ga(z,r(b),r(g)==="yes"?"labels":r(g),r(_),r(m),r(v),r(h),0);if(X.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(X.values.ncols<2)throw new Error("Dataset should have at least two predictors.");if(l()&&(!X.classNames||X.classNames.length!==2))throw new Error("Dataset should have two classes.");if(!l()&&X.classNames&&X.classNames.length>0)throw new Error("New data should not contain class labels.");if(t()){const ee=t().prep&&t().prep.npred?t().prep.npred:t().npred+t().exclvars.length,ne=l()?ee+t().nresp:ee;if(X.values.ncols!==ne)throw console.log(X),new Error("Dataset has different number of columns than the training set.");X.varrev=t().varrev,X.header=t().header,X.varlabels=t().varlabels,X.varvalues=t().varvalues,X.varindices=t().varindices,X.varvaluesName=t().varvaluesName,X.varvaluesUnits=t().varvaluesUnits}X.fileName=r(d).name.replace(/\.[^/.]+$/,""),a(X),T()}catch(X){a(null),S(X)}}function E(z){const X=new FileReader;X.onload=()=>{q(X.result)},X.readAsText(r(d))}async function y(z){try{const X=r(d)instanceof FileList?r(d):[r(d)];a(await ku(X)),T()}catch(X){S("Failed to read SPC file: "+X)}}function M(){F(d,""),a(null),c(null),F(v,""),F(h,""),C()}ge(()=>{if(!(r(d)===0||r(d)===void 0||a())){if(r(d)===null||r(d)===""){M();return}if(Array.isArray(r(d))){if(r(d).filter(z=>z.slice(-4)===".spc").length!==r(d).length){S("Multiple file selection is allowed only for SPC files.");return}y(r(d));return}r(d)&&(r(d).type==="text/csv"||r(d).type==="application/vnd.ms-excel")?(j(r(d),t()),C()):y([r(d)])}}),ge(()=>{r(b)&&C()}),ge(()=>{if(a()&&t()&&!c()&&!r(k))try{P(t(),a(),s()),T()}catch(z){a(null),c(null),S(z)}});var O=yh(),W=Z(O);{var L=z=>{var X=ph(),ee=Z(X);Qr(ee,()=>r(d)===void 0,ue=>{ie(ue,{children:(_e,ce)=>{var Ne=ve(),Pe=Z(Ne);{var Le=je=>{hs(je,{id:"dataFile",message:"Select CSV file with dataset",get file(){return r(d)},set file(le){F(d,le,!0)}})},Ae=je=>{hs(je,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return r(d)},set file(le){F(d,le,!0)}})};Y(Pe,je=>{l()?je(Le):je(Ae,!1)})}N(_e,Ne)},$$slots:{default:!0}})});var ne=R(ee,2);{var xe=ue=>{var _e=gh(),ce=Z(_e);ie(ce,{label:"Delimiter",children:(le,oe)=>{Xe(le,{id:"sep",get options(){return u},get value(){return r(b)},set value(se){F(b,se,!0)}})},$$slots:{default:!0}});var Ne=R(ce,2);ie(Ne,{label:"Row labels",children:(le,oe)=>{fr(le,{id:"hasLabels",options:["no","yes"],get value(){return r(_)},set value(se){F(_,se,!0)}})},$$slots:{default:!0}});var Pe=R(Ne,2);ie(Pe,{label:"Header",children:(le,oe)=>{Xe(le,{id:"header",get options(){return r(f)},get value(){return r(g)},set value(se){F(g,se,!0)}})},$$slots:{default:!0}});var Le=R(Pe,2);{var Ae=le=>{var oe=mh(),se=Z(oe);ie(se,{label:"Header name (predictors)",children:(me,de)=>{wa(me,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return r(v)},set value(qe){F(v,qe,!0)}})},$$slots:{default:!0}});var he=R(se,2);ie(he,{label:"Header units (predictors)",children:(me,de)=>{wa(me,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return r(h)},set value(qe){F(h,qe,!0)}})},$$slots:{default:!0}}),N(le,oe)};Y(Le,le=>{r(g)==="values"&&le(Ae)})}var je=R(Le,2);ie(je,{label:" ",children:(le,oe)=>{tt(le,{text:"Load",onclick:E})},$$slots:{default:!0}}),N(ue,_e)};Y(ne,ue=>{r(d)&&!Array.isArray(r(d))&&(r(d).type==="text/csv"||r(d).type==="application/vnd.ms-excel")&&ue(xe)})}N(z,X)},I=z=>{var X=ve(),ee=Z(X);{var ne=xe=>{var ue=ve(),_e=Z(ue);Ws(_e,()=>r(w),ce=>{ie(ce,{children:(Ne,Pe)=>{var Le=_h(),Ae=Z(Le);ml(Ae);var je=R(Ae,2),le=H(je);ae(()=>Ee(le,t()?"Loading data and apply model...":"Loading data...")),N(Ne,Le)},$$slots:{default:!0}})},void 0,(ce,Ne)=>{ie(ce,{status:"error",children:(Pe,Le)=>{var Ae=bh(),je=H(Ae);ae(()=>Ee(je,r(Ne))),N(Pe,Ae)},$$slots:{default:!0}})}),N(xe,ue)};Y(ee,xe=>{r(w)&&xe(ne)})}N(z,X)};Y(W,z=>{a()?z(I,!1):z(L)})}var Q=R(W,2);{var U=z=>{hh(z,{get dataset(){return a()},reset:M,get title(){return o()}})};Y(Q,z=>{a()&&z(U)})}var K=R(Q,2);{var D=z=>{ie(z,{status:"error",children:(X,ee)=>{var ne=wh(),xe=H(ne);ae(()=>Ee(xe,r(k))),N(X,ne)},$$slots:{default:!0}})};Y(K,z=>{(r(A)==="error"||r(k))&&z(D)})}N(n,O),ye()}var xh=G('<div class="msg-select"> </div>'),kh=G('<div class="msg-select"> </div>'),Eh=G('<div class="msg-select"> </div>'),Sh=G('<div class="msg-select"> </div>'),Ah=G('<div class="selected-buttons svelte-188sk7n"><!></div>'),Ch=G('<div class="selected-buttons svelte-188sk7n"><!></div>'),Nh=G("<!> <!> <!>",1),Ph=G("<button> </button>"),Th=G('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Ll(n,e){we(e,!0);let t=V(e,"selobjText",3,"Click to select an object..."),s=V(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=V(e,"clearText",3,"Click anywhere to remove selection..."),o=V(e,"params",15),a=Re({objects:-1,variables:[]}),c=te(Re(Object.keys(e.plots)[0]));function u(q,E){a.objects=E?E[q]:q}function f(q){a.objects=-1}function d(q){a.variables=q}function v(q){a.variables=[]}let h={objects:{select:u,unselect:f},variables:{select:d,unselect:v},stats:{}},m=p(()=>r(c)?e.plots[r(c)]:null),b=p(()=>r(m)?r(m).component:null);var g=Th(),_=H(g),w=H(_),A=H(w);Fn(A,()=>r(b),(q,E)=>{E(q,{get params(){return o()[r(c)]},get callbacks(){return h[r(m).scope]},get selected(){return a[r(m).scope]},get props(){return e.props}})});var k=R(w,2),S=H(k);{var C=q=>{var E=ve(),y=Z(E);{var M=W=>{var L=xh(),I=H(L);ae(()=>Ee(I,t())),N(W,L)},O=W=>{var L=kh(),I=H(L);ae(()=>Ee(I,l())),N(W,L)};Y(y,W=>{a[r(m).scope]<0?W(M):W(O,!1)})}N(q,E)};Y(S,q=>{r(m).scope==="objects"&&o()[r(c)].plotType!=="l"&&t().length>0&&q(C)})}var T=R(S,2);{var P=q=>{var E=ve(),y=Z(E);{var M=W=>{var L=Eh(),I=H(L);ae(()=>Ee(I,s())),N(W,L)},O=W=>{var L=Sh(),I=H(L);ae(()=>Ee(I,l())),N(W,L)};Y(y,W=>{a[r(m).scope].length===0?W(M):W(O,!1)})}N(q,E)};Y(T,q=>{r(m).scope==="variables"&&o()[r(c)].plotType!=="l"&&s().length>0&&q(P)})}var j=R(_,2);Ve(j,21,()=>Object.keys(e.plots),We,(q,E)=>{var y=ve(),M=Z(y);{var O=L=>{var I=Nh(),Q=Z(I);Ku(Q,{get title(){return r(m).label},labelWidth:12,get options(){return e.controls[r(c)]},get value(){return o()[r(c)]},set value(X){o(o()[r(c)]=X,!0)}});var U=R(Q,2);{var K=X=>{var ee=Ah(),ne=H(ee);Er(ne,()=>r(m).buttons,()=>a.objects),N(X,ee)};Y(U,X=>{r(m).scope==="objects"&&r(m).buttons&&a.objects>=0&&X(K)})}var D=R(U,2);{var z=X=>{var ee=Ch(),ne=H(ee);Er(ne,()=>r(m).buttons,()=>a.variables),N(X,ee)};Y(D,X=>{r(m).scope==="variables"&&r(m).buttons&&a.variables.length>0&&X(z)})}N(L,I)},W=L=>{var I=Ph();I.__keydown=()=>switchPlot(i),I.__click=()=>F(c,r(E),!0);var Q=H(I);ae(()=>{ct(I,1,`plot-selector plot-selector-${r(E)??""}`,"svelte-188sk7n"),Ee(Q,e.plots[r(E)].label)}),N(L,I)};Y(M,L=>{r(m)&&r(c)===r(E)?L(O):L(W,!1)})}N(q,y)}),N(n,g),ye()}lt(["keydown","click"]);var jh=Se("<text> </text>"),Lh=Se('<g class="series series-textlabels"></g>'),Mh=Se('<g class="series series-line"><polyline class="line"></polyline></g>'),Rh=Se("<rect></rect>"),Fh=Se('<g class="series series-bar"></g>'),qh=Se("<text> </text>"),zh=Se('<g class="series series-points series-points1"></g>'),Ih=Se('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),Oh=Se('<g class="series series-points series-points1"><text> </text></g>'),Vh=Se('<g class="series series-bar"><rect></rect></g>'),Bh=Se('<g class="series series-text"><text> </text></g>'),Dh=Se("<!><!><!>",1),Yh=Se("<!><!><!><!><!>",1);function dr(n,e){we(e,!0);let t=V(e,"shortenLabels",3,!0),s=V(e,"lineWidth",3,1),l=V(e,"nBars",3,1),o=V(e,"barNum",3,1),a=V(e,"markerSize",3,null),c=V(e,"markerWidth",3,2),u=V(e,"marker",3,1),f=V(e,"colors",3,void 0),d=V(e,"filled",3,void 0),v=V(e,"mainColor",19,()=>pt.cal),h=V(e,"faceColor",3,null),m=V(e,"lineColor",19,v),b=V(e,"selected",19,()=>-1),g=V(e,"maskSelected",3,!0),_=V(e,"xRange",15),w=V(e,"yRange",15),A=V(e,"ind",3,null);function k(oe){!e.callbacks||!e.callbacks.select||Ir(oe,oe.target.tagName,se=>e.callbacks.select(se,A()))}function S(oe){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const C=At("axes"),T=p(()=>kt(e.xValues,"PlotSeries")),P=p(()=>r(T)?kt(e.yValues,"PlotSeries",r(T).length):null);ge(()=>{if(A()){const oe=A().map(se=>se+1);_(r(T)?Fr(r(T).subset(oe)):null),w(r(P)?Fr(r(P).subset(oe)):null)}else _(r(T)?Fr(r(T)):null),w(r(P)?Fr(r(P)):null)});const j=p(()=>h()===null?e.plotType==="p"?"transparent":"white":h()),q=[1,.8,.8,.8,.8,.8,.8,.8],E=[.85,.65,.65,.65,.65,.65,.65,.65],y=p(()=>a()?a():e.plotType==="p"?q[u()-1]:E[u()-1]),M=p(()=>xn[u()-1]),O=p(()=>_l[C.scales().plot]),W=p(()=>rt([0],C.tY())[0]),L=p(()=>Bn([.8],C.tX())[0]),I=p(()=>e.plotType==="h"?r(L)/l():0),Q=p(()=>e.plotType==="h"?r(L)/2-(o()-1)*r(I):0),U=p(()=>r(O));let K=p(()=>e.plotType==="l"||e.plotType==="b"?ps(r(T),r(P),C.tX(),C.tY()):null),D=p(()=>r(T)?rt(r(T),C.tX()):null),z=p(()=>r(P)?rt(r(P),C.tY()):null),X=p(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(oe=>oe.slice(0,Pd)):e.labels:null);const ee=p(()=>A()?A():Dt(0,r(D).length-1));let ne=p(()=>f()&&f().length===r(T).length?f():Array(r(T).length).fill(v())),xe=p(()=>d()&&d().length===r(T).length?d().map(oe=>oe?"ff":"30"):Array(r(T).length).fill("30")),ue=p(()=>f()&&f().length===r(T).length?f().map((oe,se)=>oe+r(xe)[se]):Array(r(T).length).fill(h()));const _e=p(()=>`font-size:${r(y)}em;fill:${r(j)};cursor:default;text-anchor:middle;stroke-width:${c()}px;user-select:none;`),ce=`font-size:0.85em;fill:${Da};cursor:default;text-anchor:middle;stroke:${Da};stroke-width:0.1px;user-select:none;`,Ne=p(()=>`font-size:${r(y)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),Pe=p(()=>`fill:transparent;stroke-width:${s()}px;`),Le=p(()=>`stroke-width:${s()}px;stroke:${m()}`);ge(()=>{b()&&A()&&A().indexOf(b())<0&&e.callbacks.unselect()});var Ae=ve(),je=Z(Ae);{var le=oe=>{var se=Yh(),he=Z(se);{var me=fe=>{var Te=Lh();Ve(Te,21,()=>r(ee),We,(ze,Oe)=>{var Ye=jh(),Ue=H(Ye);ae(()=>{B(Ye,"opacity",r(Oe)===b()),B(Ye,"x",r(D)[r(Oe)]-r(Q)+r(I)/2),B(Ye,"y",r(z)[r(Oe)]),B(Ye,"dy",r(P).v[r(Oe)]<0?r(U):-r(U)),Ee(Ue,r(X)[r(Oe)])}),N(ze,Ye)}),ae(()=>ot(Te,ce+(b()>=0?"opacity:0.2;":""))),N(fe,Te)};Y(he,fe=>{e.showLabels&&r(X)&&fe(me)})}var de=R(he);{var qe=fe=>{var Te=Mh(),ze=H(Te);ae(()=>{ot(Te,r(Pe)),B(ze,"points",r(K)),B(ze,"stroke",v())}),N(fe,Te)};Y(de,fe=>{(e.plotType==="l"||e.plotType==="b")&&fe(qe)})}var Be=R(de);{var Ie=fe=>{var Te=Fh();Te.__click=k,Ve(Te,21,()=>r(ee),We,(ze,Oe)=>{var Ye=Rh();ae(()=>{B(Ye,"x",r(D)[r(Oe)]-r(Q)),B(Ye,"y",r(P).v[r(Oe)]<0?r(W):r(z)[r(Oe)]),B(Ye,"fill",r(ne)[r(Oe)]),B(Ye,"width",r(I)),B(Ye,"height",r(P).v[r(Oe)]<0?r(z)[r(Oe)]-r(W):r(W)-r(z)[r(Oe)])}),N(ze,Ye)}),ae(()=>ot(Te,r(Le)+(b()>=0?"opacity:0.2;":""))),N(fe,Te)};Y(Be,fe=>{e.plotType==="h"&&fe(Ie)})}var J=R(Be);{var $=fe=>{var Te=zh();Te.__click=k,Ve(Te,21,()=>r(ee),We,(ze,Oe)=>{var Ye=qh(),Ue=H(Ye);ae(()=>{B(Ye,"x",r(D)[r(Oe)]),B(Ye,"y",r(z)[r(Oe)]),B(Ye,"fill",r(ue)[r(Oe)]),B(Ye,"stroke",r(ne)[r(Oe)]),Ee(Ue,r(M))}),N(ze,Ye)}),ae(()=>ot(Te,r(_e)+(b()>=0?"opacity:0.2;":""))),N(fe,Te)};Y(J,fe=>{(e.plotType==="p"||e.plotType==="b")&&fe($)})}var re=R(J);{var ke=fe=>{var Te=Dh(),ze=Z(Te);{var Oe=Ct=>{var bt=Ih();B(bt,"x",0),B(bt,"y",0),bt.__click=S,N(Ct,bt)};Y(ze,Ct=>{g()&&Ct(Oe)})}var Ye=R(ze);{var Ue=Ct=>{var bt=Oh(),ut=H(bt),Ce=H(ut);ae(()=>{ot(bt,r(Ne)),B(ut,"x",r(D)[b()]),B(ut,"y",r(z)[b()]),B(ut,"stroke",r(ne)[b()]),B(ut,"fill",r(ue)[b()]),Ee(Ce,r(M))}),N(Ct,bt)},ft=Ct=>{var bt=Vh(),ut=H(bt);ae(()=>{ot(bt,r(Le)),B(ut,"stroke",r(ne)[b()]),B(ut,"fill",r(ne)[b()]),B(ut,"x",r(D)[b()]-r(Q)),B(ut,"y",r(P).v[b()]<0?r(W):r(z)[b()]),B(ut,"width",r(I)),B(ut,"height",r(P).v[b()]<0?r(z)[b()]-r(W):r(W)-r(z)[b()])}),N(Ct,bt)};Y(Ye,Ct=>{e.plotType!=="h"?Ct(Ue):Ct(ft,!1)})}var vr=R(Ye);{var Fl=Ct=>{var bt=Bh(),ut=H(bt),Ce=H(ut);ae(()=>{ot(bt,ce),B(ut,"stroke",Ya),B(ut,"fill",Ya),B(ut,"x",r(D)[b()]),B(ut,"y",r(z)[b()]),B(ut,"dy",r(P).v[b()]<0?r(U):-r(U)),Ee(Ce,r(X)[b()])}),N(Ct,bt)};Y(vr,Ct=>{e.showLabels&&r(X)&&r(X).length>0&&Ct(Fl)})}N(fe,Te)};Y(re,fe=>{b()>=0&&fe(ke)})}N(oe,se)};Y(je,oe=>{r(D)&&r(z)&&oe(le)})}N(n,Ae),ye()}lt(["click"]);var Wh=G("<!> <!> <!> <!>",1);function Xa(n,e){we(e,!0);const t={sens:"Sensitivity",spec:"Specificity",eff:"Efficiency",acc:"Accuracy"},s={sens:"sensitivity",spec:"specificity",eff:"efficiency",acc:"accuracy"};let l=p(()=>e.props?e.props.classres:null),o=p(()=>r(l)?Object.keys(r(l)):null),a=p(()=>e.params&&e.params.resID&&r(o)?e.params.resID==="both"?r(o):[e.params.resID]:null),c=p(()=>r(a)?r(l)[r(a)[0]]:null),u=p(()=>e.params?t[e.params.fom]:""),f=p(()=>e.params?t[e.params.fom]+" ("+e.params.className+")":""),d=p(()=>r(c).ncomp>1?1-r(c).ncomp*.065:-.1),v=p(()=>r(c).ncomp>1?r(c).ncomp*1.065:2.1),h=p(()=>[r(d),r(v)]),m=p(()=>r(c)?Dt(1,r(c).ncomp,1):null),b=p(()=>{if(!r(a))return null;let S=0,C=Number.NEGATIVE_INFINITY,T=[];for(let P of r(a)){const j=r(l)[P].v[e.params.className].stat[s[e.params.fom]];S=Math.min(S,Cr(j)),C=Math.max(C,cr(j)),T.push({yValues:Fe(j),labels:Array.from(j).map(q=>q.toFixed(q<.1?3:2)),faceColor:Ba[P],mainColor:pt[P],marker:Gn[P]})}return{yMin:S,yMax:C,values:T}}),g=p(()=>Wa(r(a)));const _=[0,1.1];var w=ve(),A=Z(w);{var k=S=>{{let C=p(()=>"plot-"+e.params.fom);on(S,{get title(){return r(f)},get limX(){return r(h)},get limY(){return _},get yLabel(){return r(u)},xLabel:"Number of LVs",get fileName(){return r(C)},whole:!0,children:(T,P)=>{var j=Wh(),q=Z(j);{var E=L=>{{let I=p(()=>[e.props.ncomp]),Q=p(()=>[e.props.ncomp]),U=p(()=>[_[0]]),K=p(()=>[_[1]]);kn(L,{get xStart(){return r(I)},get xEnd(){return r(Q)},get yStart(){return r(U)},get yEnd(){return r(K)},lineColor:"#a0a0a0"})}};Y(q,L=>{e.props.ncomp&&L(E)})}var y=R(q,2);Ve(y,17,()=>r(b).values,We,(L,I)=>{dr(L,{get xValues(){return r(m)},get yValues(){return r(I).yValues},get labels(){return r(I).labels},get faceColor(){return r(I).faceColor},get mainColor(){return r(I).mainColor},get marker(){return r(I).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var M=R(y,2);{var O=L=>{var I=ve(),Q=Z(I);Ve(Q,17,()=>r(b).values,We,(U,K)=>{{let D=p(()=>[r(m)[e.props.ncomp-1]]),z=p(()=>[r(K).yValues.v[e.props.ncomp-1]]);dr(U,{get xValues(){return r(D)},get yValues(){return r(z)},get faceColor(){return r(K).mainColor},get mainColor(){return r(K).mainColor},get marker(){return r(K).marker},plotType:"b",get showLabels(){return e.params.showLabels},markerWidth:3})}}),N(L,I)};Y(M,L=>{e.props.ncomp&&L(O)})}var W=R(M,2);Oa(W,{get items(){return r(g)}}),N(T,j)},$$slots:{default:!0}})}};Y(A,S=>{r(m)&&r(b)&&S(k)})}N(n,w),ye()}var Hh=G("<!> <!> <!> <!>",1);function Ka(n,e){we(e,!0);const t={rmse:"RMSE",r2:"R^2",slope:"Slope"};let s=p(()=>e.props?e.props.res:null),l=p(()=>r(s)?Object.keys(r(s)):null),o=p(()=>e.params&&e.params.resID&&r(l)?e.params.resID==="both"?r(l):[e.params.resID]:null),a=p(()=>r(o)?r(s)[r(o)[0]]:null),c=p(()=>e.params?t[e.params.fom]:""),u=p(()=>e.params?t[e.params.fom]+" ("+r(a).varlabels[e.params.resp-1]+")":""),f=p(()=>r(a).ncomp>1?1-r(a).ncomp*.065:-.1),d=p(()=>r(a).ncomp>1?r(a).ncomp*1.065:2.1),v=p(()=>[r(f),r(d)]),h=p(()=>r(a)?r(a).stat.components:null),m=p(()=>{if(!r(o))return null;let S=0,C=Number.NEGATIVE_INFINITY,T=[];for(let P of r(o)){const j=r(s)[P].stat[e.params.fom].getcolref(e.params.resp);S=Math.min(S,Cr(j)),C=Math.max(C,cr(j)),T.push({yValues:Fe(j),labels:Array.from(j).map(q=>q.toFixed(q<.1?3:2)),faceColor:Ba[P],mainColor:pt[P],marker:Gn[P]})}return{yMin:S,yMax:C,values:T}}),b=p(()=>Wa(r(o)));const g=p(()=>r(m)?(r(m).yMax-r(m).yMin)*.05:0),_=p(()=>r(m)?[r(m).yMin-r(g),r(m).yMax+4*r(g)]:[0,1]);var w=ve(),A=Z(w);{var k=S=>{{let C=p(()=>"plot-"+e.params.fom);on(S,{get title(){return r(u)},get limX(){return r(v)},get limY(){return r(_)},get yLabel(){return r(c)},xLabel:"Number of LVs",get fileName(){return r(C)},whole:!0,children:(T,P)=>{var j=Hh(),q=Z(j);{var E=L=>{{let I=p(()=>[e.props.ncomp]),Q=p(()=>[e.props.ncomp]),U=p(()=>[r(_)[0]]),K=p(()=>[r(_)[1]]);kn(L,{get xStart(){return r(I)},get xEnd(){return r(Q)},get yStart(){return r(U)},get yEnd(){return r(K)},lineColor:"#a0a0a0"})}};Y(q,L=>{e.props.ncomp&&L(E)})}var y=R(q,2);Ve(y,17,()=>r(m).values,We,(L,I)=>{dr(L,{get xValues(){return r(h)},get yValues(){return r(I).yValues},get labels(){return r(I).labels},get faceColor(){return r(I).faceColor},get mainColor(){return r(I).mainColor},get marker(){return r(I).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var M=R(y,2);{var O=L=>{var I=ve(),Q=Z(I);Ve(Q,17,()=>r(m).values,We,(U,K)=>{{let D=p(()=>[r(h)[e.props.ncomp-1]]),z=p(()=>[r(K).yValues.v[e.props.ncomp-1]]);dr(U,{get xValues(){return r(D)},get yValues(){return r(z)},get faceColor(){return r(K).mainColor},get mainColor(){return r(K).mainColor},get marker(){return r(K).marker},plotType:"b",get showLabels(){return e.params.showLabels},markerWidth:3})}}),N(L,I)};Y(M,L=>{e.props.ncomp&&L(O)})}var W=R(M,2);Oa(W,{get items(){return r(b)}}),N(T,j)},$$slots:{default:!0}})}};Y(A,S=>{r(h)&&r(m)&&S(k)})}N(n,w),ye()}var Uh=G("<!> <!>",1),Gh=G("<!> <!>",1),Xh=G("<!> <!> <!> <!> <!> <!> <!>",1);function Ml(n,e){we(e,!0);const t=p(()=>e.props?e.props.classmodel:null),s=p(()=>e.props?e.props.classres:null),l=p(()=>r(s)?Object.keys(r(s)):null),o=p(()=>e.params.resID&&r(l)?r(s)[e.params.resID]:null),a=p(()=>r(o)?r(o).classNames:null),c=p(()=>r(o)?r(o).nrows:1);function u(K,D){if(!K.ind)return new Array(K.nrows).fill(.5);const z=new Array(K.nrows).fill(1);for(let X of K.ind[D])z[X]=2;return z}function f(K,D,z){if(!K.ind){const ee=new Array(K.nrows).fill(pt[e.params.resID]);for(let ne=0;ne<K.nrows;ne++)z.d[ne]||(ee[ne]="#aaaaaa");return ee}const X=new Array(K.nrows).fill("#aaaaaa");for(let ee of K.ind[D])X[ee]=pt[e.params.resID];return X}const d=p(()=>e.props.ncomp?"Predictions (A = "+e.props.ncomp+")":""),v=p(()=>r(t).classNames[0]==e.params.className?0:1),h=p(()=>r(a)?Object.fromEntries(r(a).map(K=>[K,r(o).v[K].res[e.props.ncomp-1]])):null),m=p(()=>r(h)?r(h)[e.params.className]:null),b=p(()=>r(o)?u(r(o),e.params.className):null),g=p(()=>r(m)?r(m).yp:null),_=p(()=>r(o)?r(o).objlabels:null),w=p(()=>r(o)?f(r(o),e.params.className,r(m)):null),A=p(()=>r(t)&&r(t).crit?r(t).crit[e.params.className]:null),k=p(()=>r(o)?Ar(r(g)):[0,1]),S=[0,3],C=p(()=>{if(!r(t)||r(t).rule==="hard"||!r(t).crit)return null;const K={};for(let D of r(t).classNames){const z=D===e.params.className?2:1;K[D]={xValues:e.props.zscores.apply(X=>X*r(t).crit[D][1]+r(t).crit[D][0]),yValues:e.props.densnorm.apply(X=>X+z+.05),lineColor:D===e.params.className?pt[e.params.resID]:"#aaaaaa"}}return K}),T=p(()=>r(A)?_n((r(A)[2]-r(A)[0])/r(A)[1])+2.05:null),P=p(()=>r(A)?_n((r(A)[3]-r(A)[0])/r(A)[1])+2.05:null),j=p(()=>{if(r(t).rule==="hard")return r(v)==1?{xValues:[r(k)[0],r(k)[0],r(t).threshold,r(t).threshold],yValues:[S[0],S[1],S[1],S[0]]}:{xValues:[r(t).threshold,r(t).threshold,r(k)[1],r(k)[1]],yValues:[S[0],S[1],S[1],S[0]]};if(!r(C))return null;const K=r(C)[e.params.className];if(r(v)==1){const D=K.xValues.which(z=>z<r(A)[2]);return{xValues:Xt(Fe([K.xValues.v[0]]),K.xValues.subset(D),Fe([r(A)[2],r(A)[2]])),yValues:Xt(Fe([S[0]]),K.yValues.subset(D),Fe([r(T),S[0]]))}}else{const D=K.xValues.length,z=K.xValues.which(X=>X>=r(A)[2]);return{xValues:Xt(Fe([r(A)[2],r(A)[2]]),K.xValues.subset(z),Fe([K.xValues.v[D-1]])),yValues:Xt(Fe([S[0],r(T)]),K.yValues.subset(z),Fe([S[0]]))}}}),q=p(()=>{if(r(t).rule==="hard"||!r(C))return null;const K=r(C)[e.params.className];if(r(v)==1){const D=K.xValues.which(z=>z<r(A)[3]);return{xValues:Xt(Fe([K.xValues.v[0]]),K.xValues.subset(D),Fe([r(A)[3],r(A)[3]])),yValues:Xt(Fe([S[0]]),K.yValues.subset(D),Fe([r(T),S[0]]))}}else{const D=K.xValues.length,z=K.xValues.which(X=>X>=r(A)[3]);return{xValues:Xt(Fe([r(A)[3],r(A)[3]]),K.xValues.subset(z),Fe([K.xValues.v[D-1]])),yValues:Xt(Fe([S[0],r(P)]),K.yValues.subset(z),Fe([S[0]]))}}});let E=te(null),y=te(null),M=te(null);ge(()=>{if(!r(o)){F(E,null),F(y,null),F(M,null);return}let K,D;if(r(o).ind){D=[],K=[];for(let z of Object.keys(r(o).ind))z===e.params.className?(K.push(pt[e.params.resID]),D.push(z+" (TP: "+r(m).TP+", FN: "+r(m).FN+")")):(K.push("#aaaaaa"),D.push(z+" (TN: "+r(m).TN+", FP: "+r(m).FP+")"))}else{const z=el(r(m).d),X=r(o).nrows-z;K=[pt[e.params.resID],"#aaaaaa"],D=["In: "+z,"Out: "+X]}F(E,K,!0),F(M,D,!0),F(y,[0,1,2],!0)});const O=p(()=>Gn[e.params.resID]),W=p(()=>r(O)==1?[1,.8]:[.8,.6]),L=p(()=>r(O)==1?[2,1.2]:[2,1.2]);var I=ve(),Q=Z(I);{var U=K=>{Dn(K,{get title(){return r(d)},get limX(){return r(k)},get limY(){return S},fileName:"plot-predictions",get onclick(){return e.callbacks.unselectObject},children:(D,z)=>{var X=Xh(),ee=Z(X);{var ne=oe=>{var se=Uh(),he=Z(se);{let de=p(()=>pt[e.params.resID]+"10");qa(he,{get xValues(){return r(q).xValues},get yValues(){return r(q).yValues},get faceColor(){return r(de)},lineColor:"transparent"})}var me=R(he,2);{let de=p(()=>[r(A)[3],r(A)[3]]),qe=p(()=>[r(P),S[0]]);Vr(me,{get xValues(){return r(de)},get yValues(){return r(qe)},get lineColor(){return pt[e.params.resID]},lineType:3})}N(oe,se)};Y(ee,oe=>{r(q)&&oe(ne)})}var xe=R(ee,2);{var ue=oe=>{{let se=p(()=>pt[e.params.resID]+"15");qa(oe,{get xValues(){return r(j).xValues},get yValues(){return r(j).yValues},get faceColor(){return r(se)},lineColor:"transparent"})}};Y(xe,oe=>{r(j)&&oe(ue)})}var _e=R(xe,2);{var ce=oe=>{{let se=p(()=>[r(t).threshold,r(t).threshold]);Vr(oe,{get yValues(){return S},get xValues(){return r(se)},lineType:2,get lineColor(){return pt[e.params.resID]}})}},Ne=oe=>{var se=ve(),he=Z(se);{var me=de=>{var qe=Gh(),Be=Z(qe);Ve(Be,17,()=>r(a),We,(J,$,re,ke)=>{Vr(J,{get xValues(){return r(C)[r($)].xValues},get yValues(){return r(C)[r($)].yValues},get lineColor(){return r(C)[r($)].lineColor}})});var Ie=R(Be,2);{let J=p(()=>[r(A)[2],r(A)[2]]),$=p(()=>[r(T),S[0]]);Vr(Ie,{get xValues(){return r(J)},get yValues(){return r($)},get lineColor(){return pt[e.params.resID]},lineType:2})}N(de,qe)};Y(he,de=>{r(C)&&de(me)},!0)}N(oe,se)};Y(_e,oe=>{r(t).rule==="hard"?oe(ce):oe(Ne,!1)})}var Pe=R(_e,2);{let oe=p(()=>e.params.showLabels!=="hide");dr(Pe,{get xValues(){return r(g)},get yValues(){return r(b)},get colors(){return r(w)},get labels(){return r(_)},get selected(){return e.selected},get callbacks(){return e.callbacks},get marker(){return r(O)},get showLabels(){return r(oe)},get markerSize(){return r(W)[r(c)>100?1:0]},get markerWidth(){return r(L)[r(c)>100?1:0]},plotType:"p"})}var Le=R(Pe,2);{var Ae=oe=>{{let se=p(()=>r(y)!==null);ws(oe,{get show(){return r(se)},get colmap(){return r(E)},get breaks(){return r(y)},get labels(){return r(M)}})}};Y(Le,oe=>{r(y)&&r(E)&&r(M)&&oe(Ae)})}var je=R(Le,2);Yn(je,{label:"Predicted y-values",showGrid:!0});var le=R(je,2);Wn(le,{}),N(D,X)},$$slots:{default:!0}})};Y(Q,K=>{r(h)&&K(U)})}N(n,I),ye()}var Kh=G("<!> <!> <!> <!> <!>",1);function Ja(n,e){we(e,!0);const t="1 – specificity, β",s="Sensitivity, 1 – ɑ",l="plot-roc",o=[-.05,1.05],a=[-.05,1.05],c=p(()=>e.params?e.params.resID:null),u=p(()=>e.props?e.props.classmodel:null),f=p(()=>r(u)?r(u).classNames:null),d=p(()=>e.props&&r(c)&&e.props.res?e.props.res[r(c)]:null),v=p(()=>e.props&&r(c)&&e.props.classres?e.props.classres[r(c)]:null),h=Xt(be.seq(1e-4,9e-4,1e-4),be.seq(.001,.009,.001),be.seq(.01,.99,.01),be.seq(.991,.999,.001),be.seq(.9991,.9999,1e-4)),m=Nr(h),b=be.seq(1,-1,-.02),g=p(()=>r(d)?Bt(r(d),"Yp",r(u).ncomp,1):null);function _(y,M,O){const W=be.zeros(M.length),L=be.zeros(M.length),I=r(f)[0],Q=r(f)[1],U=O[I],K=O[Q];let D=0;for(let ee of M.v){let ne=0;for(let ue of U)ne+=y[ue]>ee;L.v[D]+=ne;let xe=0;for(let ue of K)xe+=y[ue]<=ee;W.v[D]+=xe,D+=1}const z=1/O[Q].length,X=1/O[I].length;return[W,L,z,X,M]}function w(y,M,O,W,L){const I=be.zeros(M.length),Q=be.zeros(M.length);for(let K of[0,1]){const D=r(u).params[r(f)[K]][W],z=D.m[L-1],X=D.s[L-1],ee=K==0?(ce,Ne)=>ce>=Ne:(ce,Ne)=>ce<Ne,ne=O[r(f)[K]],xe=O[r(f)[1-K]];let ue=0,_e=K==0?-1:1;for(let ce of M.v){let Ne=z+_e*ce*X,Pe=0;for(let Ae of ne)Pe+=ee(y[Ae],Ne);Q.v[ue]+=Pe;let Le=0;for(let Ae of xe)Le+=!ee(y[Ae],Ne);I.v[ue]+=Le,ue+=1}}const U=1/y.length;return[I,Q,U,U,h]}function A(y,M,O,W,L){const I=M==="hard"?b:m,[Q,U,K,D,z]=M==="hard"?_(y,I,L.ind):w(y,I,L.ind,O,W);let X=0,ee=2;for(let ce=0;ce<Q.length;ce++){Q.v[ce]=1-Q.v[ce]*K,U.v[ce]=U.v[ce]*D;const Ne=Q.v[ce]**2+(1-U.v[ce])**2;Ne<ee&&(ee=Ne,X=ce)}Q.v[0]=0,U.v[0]=0,Q.v[I.length-1]=1,U.v[I.length-1]=1;let ne=0;for(let ce=0;ce<Q.length-1;ce++){const Ne=Math.abs(Q.v[ce+1]-Q.v[ce]);ne+=(U.v[ce]+U.v[ce+1])*Ne/2}const xe=Q.v[X],ue=U.v[X],_e=z.v[X];return{x:Q,y:U,auc:ne,alpha:h,xBest:xe,yBest:ue,aBest:M==="soft"?`⍺ = ${((1-_e)*100).toFixed(1-_e<.001?2:1)}%`:`τ = ${_e.toFixed(2)}`}}const k=p(()=>A(r(g),r(u).rule,r(u).limType,r(u).ncomp,r(v))),S=p(()=>r(u).ncomp?`ROC (A = ${r(u).ncomp}, AUC = ${r(k).auc.toFixed(4)})`:""),C=p(()=>r(u).rule==="soft"?"total":r(f)[0]),T=p(()=>r(v).v[r(C)].stat.sensitivity[r(u).ncomp-1]),P=p(()=>r(v).v[r(C)].stat.specificity[r(u).ncomp-1]);var j=ve(),q=Z(j);{var E=y=>{on(y,{get title(){return r(S)},xLabel:t,yLabel:s,get limX(){return o},get limY(){return a},fileName:l,children:(M,O)=>{var W=Kh(),L=Z(W);kn(L,{xStart:[0],xEnd:[1],yStart:[0],yEnd:[1],lineColor:"#a0a0a0",lineType:3});var I=R(L,2);dr(I,{get xValues(){return r(k).x},get yValues(){return r(k).y},plotType:"l",showLabels:!1,get mainColor(){return pt[r(c)]},lineWidth:1.5});var Q=R(I,2);{let D=p(()=>[r(k).xBest]),z=p(()=>[r(k).yBest]);_s(Q,{marker:5,get xValues(){return r(D)},get yValues(){return r(z)},get lineColor(){return pt[e.params.resID]},lineWidth:2,faceColor:"yellow"})}var U=R(Q,2);{let D=p(()=>[r(k).xBest]),z=p(()=>[r(k).yBest]),X=p(()=>[r(k).aBest]);Un(U,{get xValues(){return r(D)},get yValues(){return r(z)},get labels(){return r(X)},pos:3,textSize:.8})}var K=R(U,2);{let D=p(()=>[1-r(P)]),z=p(()=>[r(T)]);_s(K,{get xValues(){return r(D)},get yValues(){return r(z)},get lineColor(){return pt[e.params.resID]},lineWidth:2,get faceColor(){return pt[e.params.resID]}})}N(M,W)},$$slots:{default:!0}})};Y(q,y=>{r(k)&&y(E)})}N(n,j),ye()}var Jh=G("<!> <!> <!> <!> <!> <!>",1);function Za(n,e){we(e,!0);let t=p(()=>e.props?e.props.classmodel:null),s=p(()=>e.props?e.props.statMat[e.params.resID][r(t).rule]:null),l=p(()=>r(s)?r(s).stat:null),o=p(()=>r(s)?r(s).ticks:null),a=p(()=>r(s)?r(s).tickLabels:null),c=p(()=>r(s)?r(s).values:null),u=p(()=>r(t).rule==="hard"?r(t).threshold:1-Number.parseFloat(r(t).alpha)/100),f=p(()=>r(c)?r(c).length-r(c).v.findIndex(j=>Math.abs(j-r(u))<1e-5):null),d=p(()=>r(l)?r(t).rule==="hard"?r(l)[e.params.fom]:r(l)[r(t).limType][e.params.fom]:null);const v=[0,.2,.3,.4,.5,.6,.7,.8,.9,.95,.99,1],h=["#6200DF","#6923FF","#648FFF","#8CCDFD","#D2ECFF","#FFF5E5","#FFE5BE","#FFCE85","#FFA34E","#FF8024","#CF5903"],m={sens:"Sensitivity",spec:"Specificity",eff:"Efficiency"},b=v.map(j=>j.toFixed(j>.9?2:1)),g=p(()=>r(d)?r(d).nrows/8:1),_=p(()=>r(d)?[0,r(d).ncols+.6]:[0,1]),w=p(()=>r(d)?[0,r(d).nrows+Math.max(.9,r(g))]:[0,1]),A=p(()=>m[e.params.fom]+" ("+e.params.resID+")"),k=p(()=>r(t).rule==="hard"?"Threshold":"Aplpha, %"),S="Components";var C=ve(),T=Z(C);{var P=j=>{Dn(j,{get limX(){return r(_)},get limY(){return r(w)},get title(){return r(A)},fileName:"plot-statheatmap",children:(q,E)=>{var y=Jh(),M=Z(y);Ia(M,{get values(){return r(d)},get breaks(){return v},get colmap(){return h}});var O=R(M,2);ws(O,{get breaks(){return v},get colmap(){return h},get labels(){return b}});var W=R(O,2);{let U=p(()=>[r(t).ncomp]),K=p(()=>[r(f)]);_s(W,{get xValues(){return r(U)},get yValues(){return r(K)},marker:8,markerSize:.7,markerWidth:4,lineColor:"black"})}var L=R(W,2);Yn(L,{label:S,whole:!0});var I=R(L,2);bs(I,{get label(){return r(k)},whole:!0,get ticks(){return r(o)},get tickLabels(){return r(a)}});var Q=R(I,2);Wn(Q,{}),N(q,y)},$$slots:{default:!0}})};Y(T,j=>{r(d)&&j(P)})}N(n,C),ye()}var Zh=G("<!> <!> <!>",1);function Qh(n,e){we(e,!0);let t=p(()=>e.props?e.props.model:null);function s(P,j,q){return!P||!j||j<1||j>P.ncomp?null:new be(us(P,q,j))}let l=te(void 0),o=te(void 0);const a=p(()=>r(t)?Fe(r(t).xvarvalues):null),c=p(()=>r(t)?Fe(r(t).xvarindices):null),u=p(()=>r(t)?r(t).xvarlabels:null),f=p(()=>r(t)?s(r(t),e.params.comp2,e.params.statType):null),d=p(()=>r(t)?s(r(t),e.params.comp1,e.params.statType):null),v=p(()=>!r(t)||!e.params.comp1?null:e.params.plotType==="p"?{values:r(d),label:`LV${e.params.comp1}`}:e.params.plotType==="l"&&r(a)?{values:r(a),label:r(t).varvaluesName+(r(t).varvaluesUnits?", "+r(t).varvaluesUnits:"")}:{values:r(c),label:"Predictors"}),h=p(()=>r(v)?r(v).values:null),m=p(()=>r(v)?r(v).label:null),b=p(()=>r(f)),g=p(()=>`LV${e.params.comp2}`),_=p(()=>{if(r(o)&&r(o)[0]<Number.POSITIVE_INFINITY&&r(o)[1]>Number.NEGATIVE_INFINITY){const P=(r(o)[1]-r(o)[0])*.1;return[r(o)[0]-2*P,r(o)[1]+P]}else return[0,1]}),w=p(()=>{if(r(l)&&r(l)[0]<Number.POSITIVE_INFINITY&&r(l)[1]>Number.NEGATIVE_INFINITY){const P=Math.abs((r(l)[1]-r(l)[0])*.1);return e.params.plotType==="l"&&r(t).varrev?[r(l)[1]+P,r(l)[0]-P]:[r(l)[0]-P,r(l)[1]+P]}else return[0,1]}),A=p(()=>e.params.statType==="xloadings"?"X-loadings":"Weights"),k=p(()=>"plot-"+e.params.statType);var S=ve(),C=Z(S);{var T=P=>{on(P,{get xLabel(){return r(m)},get yLabel(){return r(g)},get title(){return r(A)},get fileName(){return r(k)},get limX(){return r(w)},get limY(){return r(_)},children:(j,q)=>{var E=Zh(),y=Z(E);{let L=p(()=>[r(w)[0]]),I=p(()=>[r(w)[1]]);kn(y,{get xStart(){return r(L)},get xEnd(){return r(I)},yStart:[0],yEnd:[0],get lineColor(){return Cl}})}var M=R(y,2);{var O=L=>{{let I=p(()=>[r(_)[0]]),Q=p(()=>[r(_)[1]]);kn(L,{xStart:[0],xEnd:[0],get yStart(){return r(I)},get yEnd(){return r(Q)},get lineColor(){return Cl}})}};Y(M,L=>{e.params.plotType==="p"&&L(O)})}var W=R(M,2);dr(W,{get xValues(){return r(h)},get yValues(){return r(b)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return r(u)},shortenLabels:!1,get mainColor(){return Al},markerWidth:2,get xRange(){return r(l)},set xRange(L){F(l,L,!0)},get yRange(){return r(o)},set yRange(L){F(o,L,!0)}}),N(j,E)},$$slots:{default:!0}})};Y(C,P=>{r(h)&&r(b)&&P(T)})}N(n,S),ye()}var $h=G("<!> <!>",1);function em(n,e){we(e,!0);let t=p(()=>e.props?e.props.model:null);const s=p(()=>e.props.ncomp?e.props.ncomp:1);let l=p(()=>r(t)&&r(s)>0?r(t).coeffs.subarray((r(s)-1)*r(t).npred*r(t).nresp,(r(s)-1)*r(t).npred*r(t).nresp+r(t).npred*r(t).nresp):null),o=p(()=>r(l)?new pe(r(l),r(t).npred,r(t).nresp):null);const a=p(()=>r(t)?Fe(r(t).xvarvalues):null),c=p(()=>r(t)?Fe(r(t).xvarindices):null),u=p(()=>r(t)?r(t).xvarlabels:null),f=p(()=>r(t)?r(t).varvaluesName+(r(t).varvaluesUnits?", "+r(t).varvaluesUnits:""):""),d=p(()=>e.params.plotType==="h"?r(c):r(a)),v=p(()=>r(o)?r(o).getcolumn(e.params.resp):null),h=p(()=>e.params.plotType==="h"?"Predictors":r(f)),m=p(()=>e.props.ncomp?" (A = "+e.props.ncomp+")":""),b=p(()=>r(t)?"Regression coefficients for "+r(t).varlabels[e.params.resp-1]+r(m):""),g=p(()=>Ha(r(d),e.params.plotType,r(t).varrev)),_=p(()=>r(v)?Ar(r(v),.075):[0,1]),w="Coefficients";var A=ve(),k=Z(A);{var S=C=>{{let T=p(()=>e.params.plotType==="h");on(C,{get xLabel(){return r(h)},yLabel:w,get limX(){return r(g)},get limY(){return r(_)},get title(){return r(b)},get whole(){return r(T)},fileName:"plot-regcoeffs",children:(P,j)=>{var q=$h(),E=Z(q);{let M=p(()=>[r(g)[0]]),O=p(()=>[r(g)[1]]);kn(E,{get xStart(){return r(M)},get xEnd(){return r(O)},yStart:[0],yEnd:[0],get lineColor(){return Cl}})}var y=R(E,2);dr(y,{get xValues(){return r(d)},get yValues(){return r(v)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Al},get labels(){return r(u)},shortenLabels:!1}),N(P,q)},$$slots:{default:!0}})}};Y(k,C=>{r(d)&&r(v)&&C(S)})}N(n,A),ye()}var tm=G("<!> <!> <!>",1),rm=G('<div class="svelte-z3o1sd"><!></div>');function nm(n,e){we(e,!0);let t=p(()=>!0),s=te(!1),l=te(null),o=te(null),a=te(null),c=te(null);const u=p(()=>r(l)!==null&&r(a)!==null?Math.min(r(l),r(a)):null),f=p(()=>r(o)!==null&&r(c)!==null?Math.max(r(o),r(c)):null),d=p(()=>r(l)!==null&&r(a)!==null?Math.abs(r(l)-r(a)):null),v=p(()=>r(o)!==null&&r(c)!==null?Math.abs(r(o)-r(c)):null),h=p(()=>e.props?e.props.model:null),m=p(()=>e.props&&e.props.ncomp>0?e.props.ncomp:1),b=p(()=>r(h)&&r(m)>0?(r(m)-1)*r(h).npred*r(h).nresp:null),g=p(()=>r(b)!==null?r(b)+r(h).npred*r(h).nresp:null),_=p(()=>r(g)!==null?new pe(r(h).sr.subarray(r(b),r(g)),r(h).npred,r(h).nresp):null),w=p(()=>r(g)!==null?new pe(r(h).vip.subarray(r(b),r(g)),r(h).npred,r(h).nresp):null),A=p(()=>r(h)?Fe(r(h).xvarvalues):null),k=p(()=>r(h)?Fe(r(h).xvarindices):null),S=p(()=>r(h)?r(h).xvarlabels:null),C=p(()=>r(A)&&r(k)&&r(w)?{values:r(A),indices:r(k),vip:r(w).getcolumn(e.params.resp)}:null),T=p(()=>r(w)&&r(_)?{vip:r(w).getcolumn(e.params.resp),selratio:r(_).getcolumn(e.params.resp)}:null),P=p(()=>r(h)?{values:r(h).varvaluesName+(r(h).varvaluesUnits?", "+r(h).varvaluesUnits:""),indices:"Predictors",vip:"VIP scores"}:null),j=p(()=>r(h)?{vip:"VIP scores",selratio:"Selectivity ratio"}:null),q=p(()=>r(C)?r(C)[e.params.xset]:null),E=p(()=>r(T)?r(T)[e.params.yset]:null),y=p(()=>r(P)?r(P)[e.params.xset]:null),M=p(()=>r(j)?r(j)[e.params.yset]:null),O=p(()=>"Variable importance (A = "+r(m)+")"),W=p(()=>Ha(r(q),"l",r(h).varrev)),L=p(()=>r(E)?Ar(r(E),.075):[0,1]),I=p(()=>r(h)?r(h).npred<30?1:r(h).npred>200?.5:.8:1),Q=p(()=>e.selected&&e.selected.length>0?Fe(e.selected.map(_e=>r(q).v[_e])):null),U=p(()=>e.selected&&e.selected.length>0?Fe(e.selected.map(_e=>r(E).v[_e])):null);function K(){const _e=r(f)-r(v),ce=r(u)+r(d),Ne=[];for(let Pe=0;Pe<=r(q).length;Pe++){const Le=r(q).v[Pe],Ae=r(E).v[Pe];Le>=r(u)&&Le<=ce&&Ae>=_e&&Ae<=r(f)&&Ne.push(Pe)}Ne.length>0&&e.callbacks.select(Ne),F(l,null),F(o,null),F(a,null),F(c,null)}function D(_e,ce){e.callbacks.unselect(),F(s,!0),F(l,_e,!0),F(o,ce,!0),F(a,_e,!0),F(c,ce,!0)}function z(_e,ce){F(s,!1),F(t,!0),K()}function X(_e,ce){r(s)&&(F(a,_e,!0),F(c,ce,!0))}function ee(){if(r(t)){F(t,!1);return}F(s,!1),F(l,null),F(o,null),F(a,null),F(c,null),e.callbacks.unselect()}var ne=ve(),xe=Z(ne);{var ue=_e=>{var ce=rm(),Ne=H(ce);on(Ne,{get xLabel(){return r(y)},get yLabel(){return r(M)},get limX(){return r(W)},get limY(){return r(L)},get title(){return r(O)},onmousedown:D,onmouseup:z,onmousemove:X,onclick:ee,fileName:"plot-varimp",children:(Pe,Le)=>{var Ae=tm(),je=Z(Ae);{let me=p(()=>Al+(e.selected&&e.selected.length>0?"80":""));dr(je,{get xValues(){return r(q)},get yValues(){return r(E)},get markerSize(){return r(I)},get mainColor(){return r(me)},plotType:"p",get showLabels(){return e.params.showLabels},get labels(){return r(S)},shortenLabels:!1})}var le=R(je,2);{var oe=me=>{{let de=p(()=>[r(u)]),qe=p(()=>[r(f)]),Be=p(()=>[r(d)]),Ie=p(()=>[r(v)]);Hn(me,{get left(){return r(de)},get top(){return r(qe)},get width(){return r(Be)},get height(){return r(Ie)},faceColor:"#ff000040"})}};Y(le,me=>{r(u)&&r(f)&&r(s)&&me(oe)})}var se=R(le,2);{var he=me=>{dr(me,{get xValues(){return r(Q)},get yValues(){return r(U)},get markerSize(){return r(I)},mainColor:"red",plotType:"p",shortenLabels:!1})};Y(se,me=>{r(Q)&&r(U)&&me(he)})}N(Pe,Ae)},$$slots:{default:!0}}),N(_e,ce)};Y(xe,_e=>{r(q)&&r(E)&&_e(ue)})}N(n,ne),ye()}var sm=G("<!> <!> <!> <!> <!>",1);function lm(n,e){we(e,!0);let t=p(()=>e.props?e.props.scalars:null);const s=[-99999,-2,-1,0,.2,.5,.8,1.2,1.5,1.8,2,2.5,3,99999],l=["#6200DF","#6923FF","#648FFF","#8CCDFD","#D2ECFF","#E8F5FF","#fefeff","#FFF5E5","#FFE5BE","#FFCE85","#FFA34E","#FF8024","#CF5903"],o=s.map(g=>g.toFixed(1));o[0]="&minus;&infin;",o[o.length-1]="&infin;";const a=p(()=>r(t)?r(t).nrows/8:1),c=p(()=>r(t)?[.45,r(t).ncols+.6]:[0,1]),u=p(()=>r(t)?[.45,r(t).nrows+Math.max(.9,r(a))]:[0,1]),f="PV-scalars",d="Segments, k",v="Components, A";var h=ve(),m=Z(h);{var b=g=>{Dn(g,{get limX(){return r(c)},get limY(){return r(u)},title:f,fileName:"plot-pvscalars",children:(_,w)=>{var A=sm(),k=Z(A);Ia(k,{get values(){return r(t)},get breaks(){return s},get colmap(){return l}});var S=R(k,2);ws(S,{get breaks(){return s},get colmap(){return l},get labels(){return o}});var C=R(S,2);Yn(C,{label:v,whole:!0});var T=R(C,2);bs(T,{label:d,whole:!0});var P=R(T,2);Wn(P,{}),N(_,A)},$$slots:{default:!0}})};Y(m,g=>{r(t)&&g(b)})}N(n,h),ye()}function Qa(n,e,t=["rmse","r2","slope"]){const s=Object.keys(n),l=s.length>1?[...s,"both"]:s,o=s.length>1?"both":s[0];return{resID:{el:Xe,hidden:s.length==1,default:o,label:"Show",props:{options:l}},fom:{el:Xe,hidden:t.length==1,default:t[0],label:"FoM",props:{options:t}},resp:{el:ur,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showLabels:{el:fr,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function om(n,e){return{statType:{el:Xe,hidden:!1,default:"xloadings",label:"Show",props:{options:["xloadings","weights"]}},plotType:{el:ya,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:ur,hidden:!1,default:n.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:n.ncomp}},comp1:{el:ur,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:n.ncomp}},showLabels:{el:fr,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function am(n){return{plotType:{el:ya,hidden:!1,default:"l",label:"Plot type",props:{options:["l","h"]}},resp:{el:ur,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:fr,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function im(n){return{yset:{el:Xe,hidden:!1,default:"vip",label:"Y-axis",props:{options:["vip","selratio"]}},xset:{el:Xe,hidden:!1,default:"values",label:"X-axis",props:{options:["values","indices","vip"]}},resp:{el:ur,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:fr,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function cm(){return{}}function $a(n,e){const t=Object.keys(n),s=t.length>1?[...t,"both"]:t,l=["sens","spec","eff","acc"],o=t.length>1?"both":t[0],a=[...e,"total"];return{resID:{el:Xe,hidden:t.length==1,default:o,label:"Show",props:{options:s}},fom:{el:Xe,hidden:!1,default:"sens",label:"FoM",props:{options:l}},className:{el:Xe,hidden:!1,default:e[0],label:"Class",props:{options:a}},showLabels:{el:fr,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Rl(n,e){return{resID:{el:Xe,hidden:n.length==1,default:n[0],label:"Show",props:{options:n}},className:{el:Xe,hidden:!1,default:e[0],label:"Class",props:{options:e}},showLabels:{el:Xe,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","show"]}}}}function ei(n){return{resID:{el:Xe,hidden:n.length==1,default:n[0],label:"Show",props:{options:n}}}}function ti(n){return{resID:{el:Xe,hidden:n.length==1,default:n[0],label:"Show",props:{options:n}},fom:{el:Xe,hidden:!1,default:"eff",label:"FoM",props:{options:["sens","spec","eff"]}}}}var um=G("<!> <!>",1),fm=G("<p>can not exclude</p>");function dm(n,e){we(e,!0);const t=(g,_=wt)=>{ie(g,{label:"Selected",children:(w,A)=>{var k=um(),S=Z(k);tt(S,{onclick:()=>e.showContributions(_()),text:"plot"});var C=R(S,2);{var T=P=>{tt(P,{onclick:()=>e.markOutlier(_()),text:"remove"})};Y(C,P=>{_()>=0&&P(T)})}N(w,k)},$$slots:{default:!0}})},s=(g,_=wt)=>{ie(g,{label:"Selected",children:(w,A)=>{var k=ve(),S=Z(k);{var C=P=>{tt(P,{onclick:()=>e.excludeVars(_()),get text(){return`exclude ${_().length??""} variables`}})},T=P=>{var j=fm();N(P,j)};Y(S,P=>{r(o).cal.npred-_().length>=2?P(C):P(T,!1)})}N(w,k)},$$slots:{default:!0}})},l=1,o=p(()=>({cal:e.res.cal.pls,pv:e.res.pv.pls})),a=p(()=>({cal:e.res.cal.da,pv:e.res.pv.da})),c=p(()=>e.model.da.ncomp),u=p(()=>({pred:{label:"Predictions",scope:"objects",component:Ml,buttons:t},fom:{label:"Figures of merit (plots)",scope:"stats",component:Xa},fomhm:{label:"Figures of merit (heatmap)",scope:"stats",component:Za},roc:{label:"ROC curve",scope:"stats",component:Ja},loadings:{label:"X-loadings and weights",scope:"stats",component:Qh},regcoeffs:{label:"Regression coefficients",scope:"stats",component:em},varsel:{label:"Variable importance",scope:"variables",component:nm,buttons:s},fom2:{label:"RMSE",scope:"stats",component:Ka},scalars:{label:"PV scalars",scope:"stats",component:lm}})),f=Re({pred:Rl(["cal","pv"],e.model.da.classNames),fom:$a(r(a),e.model.da.classNames),fomhm:ti(["cal","pv"]),roc:ei(["cal","pv"]),loadings:om(e.model.pls,r(c)),regcoeffs:am(l),varsel:im(l),fom2:Qa(r(o),1,["rmse"]),scalars:cm(r(o))});let d=te(Re({pred:Pt(f.pred),fom:Pt(f.fom),fomhm:Pt(f.fomhm),roc:Pt(f.roc),loadings:Pt(f.loadings),regcoeffs:Pt(f.regcoeffs),varsel:Pt(f.varsel),fom2:Pt(f.fom2),scalars:Pt(f.scalars)}));ge(()=>{r(d).loadings.plotType!=="p"?f.loadings.comp1.hidden=!0:f.loadings.comp1.hidden=!1});const v=Xt(be.seq(-10,-3,.5),be.seq(-3,3,.01),be.seq(3,10,.5)),h=_n(v),m=p(()=>({res:r(o),classres:r(a),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:r(c),scalars:e.scalars,zscores:v,densnorm:h,statMat:e.statMat})),b={markOutlier:e.markOutlier};Ll(n,{get plots(){return r(u)},get props(){return r(m)},get controls(){return f},get callbacks(){return b},get params(){return r(d)},set params(g){F(d,g,!0)}}),ye()}var vm=G('<div class="outliers-pane svelte-1mp4dba"><!></div>'),hm=G('<div class="exclvars-pane svelte-1mp4dba"><!></div>'),mm=G('<div class="model-calculator svelte-1mp4dba"><!></div>'),gm=G('<div class="pcv-calculator svelte-1mp4dba"><!></div>'),pm=G('<div class="buttons"><!> <!> <!></div>'),bm=G('<div class="ncomp-selector svelte-1mp4dba"><!> <!></div>'),_m=G('<div class="result-stats svelte-1mp4dba"><!></div>'),wm=G(`<p class="svelte-1mp4dba">This tab lets you train a PLS1-DA classification model and optimize it using Procrustes cross-validation.
               After that you can save the model to a file, apply it to a test set (tab <strong>Test</strong>)
               or to a new set of samples whose response us unknown (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training/calibration set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows
               correspond to observations or objects, columns — to variables (both response and predictors).</p> <p class="svelte-1mp4dba">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed
               that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If x-variables
               are signals, e.g. spectra, this part of header can content numeric values, e.g. wavelength or wavenumbers.
               If this is the case, select <em>values</em> option for the header. This will let you to specify
               name of the values (e.g. <em>Wavelength</em>) and the units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1mp4dba">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — if so, just set
               the corresponding options after selecting the file.</p> <p class="svelte-1mp4dba">The column with class labels should be located right after the column with object/row labels. If there are no
               object labels, the response variable is expected to be in the first column. <strong>The column with class
                  labels is mandatory in the training set and it must contain labels for two classes.</strong></p> <p class="svelte-1mp4dba">Here is an example how data structure may look like (note, that row labels and header are optional):</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">Red</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">Blue</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">Red</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">Blue</td><td class="svelte-1mp4dba">12.2</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">14.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),ym=G(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to decide how to preprocess the data. You can either skip preprocessing (in the model settings you
               will be able to apply centering and scaling), create the chain of preprocessing methods in special constructor
               (use <em>Create</em> to load the constructor) or load already built preprocessing model from a file. Make your choice.</p>`,1),xm=G(`<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Now you can create a global PLS model for the training set. Use more components/latent variables (LVs) than
               you expect to be optimal. You will have possibility to select the optimal number of components later.</p>`,1),km=G(`<p class="svelte-1mp4dba"><strong>Step 4</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set,
               which will help you to optimize PLS-DA model parameters. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">After this step PLS-DA model will be created automatically and you will be able to explore it and tune
               its parameters.</p>`,1),Em=G("<!> <!> <!>",1),Sm=G('<div class="help-text svelte-1mp4dba"><!></div>'),Am=G('<div class="app-container svelte-1mp4dba"><!> <div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function Cm(n,e){we(e,!0);const t=p(()=>e.session.train);let s=te(-1),l=te(!1);function o(D){if(D.length<1)return;const z=D.map(X=>r(t).model.pls.varindices[X+r(t).model.pls.nresp]);if(z.length>0){const X=new Set(r(t).exclvars),ee=[...new Set(z)].filter(ne=>!X.has(ne));r(t).exclvars=r(t).exclvars.concat(ee),r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1}}function a(){r(t).exclvars=[],r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1}function c(D){if(D<0||D>r(t).calres.pls.nrows-1)return;const z=r(t).calres.pls.objindices[D];z>=0&&!r(t).outliers.includes(z)&&(r(t).outliers.push(z),r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1)}function u(){r(t).outliers=[],r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1}function f(){r(t).outliers.pop(),r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1}function d(D,z){D<0||(F(s,D,!0),F(l,!0))}function v(){F(l,!1),F(s,-1)}ge(()=>{r(t).calset===null&&(r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).pvset=null,r(t).calsetp=null,r(t).prepmodel=null,r(t).prepobj=[],r(t).prepType=null,r(t).outliers=[],r(t).exclvars=[],r(t).ind=null,r(t).ncomp_selected=1,r(t).model={pls:null,da:null})}),ge(()=>{r(t).model.pls===null&&(r(t).model.da=null,r(t).calres={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).pvset=null)}),ge(()=>{r(t).prepmodel||(r(t).calres={pls:null,da:null},r(t).calsetp=null,r(t).exclvars=[])}),ge(()=>{r(t).pvset===null&&(r(t).pvres={pls:null,da:null})}),ge(()=>{r(t).calsetp||(r(t).model={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).pvres={pls:null,da:null})}),ge(()=>{r(t).calres&&r(t).calres.pls&&(r(t).ind=xa(r(t).calres.pls.Yref.getcolref(1),r(t).calset.classNames))}),ge(()=>{if(r(t).model.pls&&r(t).model.ncomp&&r(t).pvres.pls&&r(t).pvres.pls.stat){const D=r(t).pvres.pls.stat.rmse.getcolref(1),X=D.map((ee,ne)=>ne>0?1-ee*ee/D[ne-1]**2:1).findIndex(ee=>ee<=.0975);r(t).ncomp_selected=X<0?r(t).model.ncomp:X}}),ge(()=>{r(t).calres.pls&&r(t).model.da&&(r(t).statmat.cal=gl(r(t).calres.pls,r(t).model.da.params,r(t).ind))}),ge(()=>{r(t).pvres.pls&&r(t).model.da&&(r(t).statmat.pv=gl(r(t).pvres.pls,r(t).model.da.params,r(t).ind))}),ge(()=>{r(t).pvres.pls&&r(t).model.da&&(r(t).pvres.da=ms(r(t).pvres.pls,r(t).model.da,r(t).ind))}),ge(()=>{r(t).calres.pls&&r(t).model.da&&(r(t).calres.da=ms(r(t).calres.pls,r(t).model.da,r(t).ind))}),ge(()=>{const D=er(()=>JSON.stringify(e.session,Vn));e.backupSession(D,r(t).calset,r(t).calsetp,r(t).pvres.pls,r(t).pvres.da)});var h=Am(),m=H(h);{var b=D=>{{let z=p(()=>({cal:r(t).calres.pls,pv:r(t).pvres.pls}));Nl(D,{get model_getter(){return us},get res_getter(){return Bt},get model(){return r(t).model.pls},get res(){return r(z)},get ncomp(){return r(t).model.da.ncomp},get selected(){return r(s)},closeModal:v})}};Y(m,D=>{r(l)&&D(b)})}var g=R(m,2),_=H(g),w=H(_);jl(w,{classMandatory:!0,get dataset(){return r(t).calset},set dataset(D){r(t).calset=D}});var A=R(_,2);{var k=D=>{var z=vm(),X=H(z);pl(X,{get outliers(){return r(t).outliers},get dataset(){return r(t).calset},resetOutliers:u,undoOutliers:f}),N(D,z)};Y(A,D=>{r(t).outliers&&r(t).outliers.length>0&&D(k)})}var S=R(A,2);{var C=D=>{Ov(D,{get WASM(){return e.WASM},get rawdata(){return r(t).calset},get outliers(){return r(t).outliers},get prepType(){return r(t).prepType},set prepType(z){r(t).prepType=z},get prepobj(){return r(t).prepobj},set prepobj(z){r(t).prepobj=z},get prepdata(){return r(t).calsetp},set prepdata(z){r(t).calsetp=z},get prepmeta(){return r(t).prepmeta},set prepmeta(z){r(t).prepmeta=z},get prepmodel(){return r(t).prepmodel},set prepmodel(z){r(t).prepmodel=z}})};Y(S,D=>{r(t).calset&&D(C)})}var T=R(S,2);{var P=D=>{var z=hm(),X=H(z);nf(X,{get exclvars(){return r(t).exclvars},get dataset(){return r(t).calset},resetExclvars:a}),N(D,z)};Y(T,D=>{r(t).exclvars&&r(t).exclvars.length>0&&D(P)})}var j=R(T,2);{var q=D=>{var z=mm(),X=H(z);eh(X,{get WASM(){return e.WASM},get dataset(){return r(t).calsetp},get outliers(){return r(t).outliers},get exclvars(){return r(t).exclvars},get model(){return r(t).model.pls},set model(ee){r(t).model.pls=ee},get resobj(){return r(t).calres.pls},set resobj(ee){r(t).calres.pls=ee}}),N(D,z)};Y(j,D=>{r(t).calsetp&&D(q)})}var E=R(j,2);{var y=D=>{var z=gm(),X=H(z);ah(X,{get WASM(){return e.WASM},get calset(){return r(t).calsetp},get outliers(){return r(t).outliers},get model(){return r(t).model.pls},get calres(){return r(t).calres.pls},get pvset(){return r(t).pvset},set pvset(ee){r(t).pvset=ee},get pvres(){return r(t).pvres.pls},set pvres(ee){r(t).pvres.pls=ee},get pvscalars(){return r(t).pvscalars},set pvscalars(ee){r(t).pvscalars=ee}}),N(D,z)};Y(E,D=>{r(t).calsetp&&r(t).model.pls&&D(y)})}var M=R(E,2);{var O=D=>{var z=bm(),X=H(z);Ga(X,{get plsmodel(){return r(t).model.pls},get plsres(){return r(t).calres.pls},get ind(){return r(t).ind},get ncomp(){return r(t).ncomp_selected},get damodel(){return r(t).model.da},set damodel(ne){r(t).model.da=ne}});var ee=R(X,2);ie(ee,{label:"Download",children:(ne,xe)=>{var ue=pm(),_e=H(ue);tt(_e,{onclick:()=>gs(r(t).calres,r(t).calset,"train",r(t).model.da.ncomp),text:"Res (cal)"});var ce=R(_e,2);tt(ce,{onclick:()=>gs(r(t).pvres,r(t).pvset,"PV",r(t).model.da.ncomp),text:"Res (pv)"});var Ne=R(ce,2);tt(Ne,{onclick:()=>ka(r(t).model,r(t).prepmodel),text:"Model"}),N(ne,ue)},$$slots:{default:!0}}),N(D,z)};Y(M,D=>{r(t).model.pls&&r(t).calres.pls&&r(t).pvres.pls&&r(t).ncomp_selected&&D(O)})}var W=R(M,2);{var L=D=>{var z=_m(),X=H(z);{let ee=p(()=>({cal:r(t).calres.da,pv:r(t).pvres.da}));Ua(X,{get res(){return r(ee)},get model(){return r(t).model.da}})}N(D,z)};Y(W,D=>{r(t).calres.da&&r(t).pvres.da&&r(t).model.da&&D(L)})}var I=R(g,2),Q=H(I);{var U=D=>{var z=Sm(),X=H(z);{var ee=xe=>{var ue=wm();N(xe,ue)},ne=xe=>{var ue=Em(),_e=Z(ue);{var ce=je=>{var le=ym();N(je,le)};Y(_e,je=>{r(t).calset&&!r(t).prepmodel&&je(ce)})}var Ne=R(_e,2);{var Pe=je=>{var le=xm();N(je,le)};Y(Ne,je=>{r(t).prepmodel&&!r(t).model.pls&&je(Pe)})}var Le=R(Ne,2);{var Ae=je=>{var le=km();N(je,le)};Y(Le,je=>{r(t).model&&r(t).model.pls&&!r(t).pvset&&je(Ae)})}N(xe,ue)};Y(X,xe=>{r(t).calset?xe(ne,!1):xe(ee)})}N(D,z)},K=D=>{var z=ve(),X=Z(z);Qr(X,()=>r(t).pvres&&r(t).model,ee=>{var ne=ve(),xe=Z(ne);{var ue=_e=>{{let ce=p(()=>({cal:r(t).calset,pv:r(t).pvset})),Ne=p(()=>({cal:r(t).calres,pv:r(t).pvres}));dm(_e,{markOutlier:c,showContributions:d,excludeVars:o,get data(){return r(ce)},get res(){return r(Ne)},get scalars(){return r(t).pvscalars},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected},get statMat(){return r(t).statmat}})}};Y(xe,_e=>{r(t).calres&&r(t).pvres&&r(t).model.pls&&r(t).model.da&&r(t).calset&&r(t).pvset&&_e(ue)})}N(ee,ne)}),N(D,z)};Y(Q,D=>{!r(t).calres.da||!r(t).pvres.da||!r(t).model?D(U):D(K,!1)})}N(n,h),ye()}var Nm=G("<!> <!>",1),Pm=G('<br/><span style="color:#a0a0a0;">Optimal LVs:</span> <span style="color:#606060;"> </span>',1),Tm=G('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),jm=G('<br/><span style="color:#a0a0a0;">Excluded</span> <span style="color:#a0a0a0;">variables.</span>',1),Lm=G('<p class="info-text svelte-7h7avz"><span>Model file:</span> <span style="color:#606060;" class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model info:</span> <!> <br/><span style="color:#a0a0a0;">Classes:</span> <!> <!></p> <!>',1),Mm=G("<p><!></p>"),Rm=G("<!> <!>",1);function ri(n,e){we(e,!0);let t=V(e,"model",15),s=te(""),l=te("neutral"),o=te("");function a(_){try{const w=JSON.parse(_,vl);if(Array.isArray(w.pls.v)&&(w.pls.v=Float64Array.from(w.pls.v)),!(w.pls.class[0]==="plsmodel"&&w.pls.nresp===1&&Object.keys(w).includes("da")))throw Error("The JSON file you selected does not contain PLS1-DA model.");w.pls.fileName=r(f),t(w),F(l,"success"),F(o,"")}catch(w){console.error(w),t(null),F(l,"error"),F(o,w,!0)}}function c(_){const w=new FileReader;w.onload=()=>{a(w.result)},w.readAsText(r(s))}function u(){F(s,""),t(null),F(l,"neutral"),F(o,"")}ge(()=>{r(s)===null?(t(null),F(l,"neutral"),F(o,"")):(F(l,"neutral"),F(o,""))});let f=p(()=>r(s)?r(s).name.replace(/\.[^/.]+$/,""):"");var d=Rm(),v=Z(d);{var h=_=>{var w=Nm(),A=Z(w);Qr(A,()=>r(s),C=>{ie(C,{name:"file-selector",children:(T,P)=>{hs(T,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return r(s)},set file(j){F(s,j,!0)}})},$$slots:{default:!0}})});var k=R(A,2);{var S=C=>{ie(C,{name:"load-button",label:" ",children:(T,P)=>{tt(T,{onclick:c,text:"Load"})},$$slots:{default:!0}})};Y(k,C=>{r(s)&&C(S)})}N(_,w)},m=_=>{ie(_,{name:"info",class:"info",children:(w,A)=>{var k=Lm(),S=Z(k),C=R(H(S),2),T=H(C),P=R(C,4),j=R(P);{var q=I=>{var Q=Pm(),U=R(Z(Q),3),K=H(U);ae(()=>Ee(K,t().da.ncomp)),N(I,Q)};Y(j,I=>{t().da.ncomp&&I(q)})}var E=R(j,4),y=R(E);{var M=I=>{var Q=Tm(),U=R(Z(Q),3);Tl(U,{get prepmodel(){return t().pls.prep}}),N(I,Q)};Y(y,I=>{t().pls.prep&&I(M)})}var O=R(y,2);{var W=I=>{var Q=jm(),U=R(Z(Q),2);ae(()=>Ee(U,` ${t().pls.exclvars.length??""} `)),N(I,Q)};Y(O,I=>{t().pls.exclvars.length>0&&I(W)})}var L=R(S,2);nr(L,{onclick:u}),ae(I=>{B(C,"title",t().pls.fileName),Ee(T,t().pls.fileName),Ee(P,` ${t().pls.ncomp??""} LVs${t().pls.center?", centered":""}${t().pls.scale?", scaled":""} `),Ee(E,` ${I??""} `)},[()=>t().da.classNames.join(", ")]),N(w,k)},$$slots:{default:!0}})};Y(v,_=>{t()?_(m,!1):_(h)})}var b=R(v,2);{var g=_=>{ie(_,{name:"error",status:"error",children:(w,A)=>{var k=Mm(),S=H(k);mt(S,()=>r(o)),N(w,k)},$$slots:{default:!0}})};Y(b,_=>{(r(l)==="error"||r(o))&&_(g)})}N(n,d),ye()}var Fm=G("<!> <!>",1);function qm(n,e){we(e,!0);const t=(m,b=wt)=>{ie(m,{label:"Selected",children:(g,_)=>{var w=Fm(),A=Z(w);tt(A,{onclick:()=>e.showContributions(b()),text:"plot"});var k=R(A,2);{var S=C=>{tt(C,{onclick:()=>e.markOutlier(b()),text:"remove"})};Y(k,C=>{b()>=0&&C(S)})}N(g,w)},$$slots:{default:!0}})},s=p(()=>({test:e.res.test.pls})),l=p(()=>({test:e.res.test.da})),o=p(()=>e.model.da.ncomp),a=p(()=>({pred:{label:"Predictions",scope:"objects",component:Ml,buttons:t},fom:{label:"Figures of merit (plots)",scope:"stats",component:Xa},fomhm:{label:"Figures of merit (heatmap)",scope:"stats",component:Za},roc:{label:"ROC curve",scope:"stats",component:Ja},fom2:{label:"RMSE",scope:"stats",component:Ka}})),c=Re({pred:Rl(["test"],e.model.da.classNames),fom:$a(r(l),e.model.da.classNames),fomhm:ti(["test"]),roc:ei(["test"],e.model.da.classNames),fom2:Qa(r(s),1,["rmse"])});let u=te(Re({pred:Pt(c.pred),fom:Pt(c.fom),fomhm:Pt(c.fomhm),fom2:Pt(c.fom2),roc:Pt(c.roc)}));const f=Xt(be.seq(-10,-3,.5),be.seq(-3,3,.01),be.seq(3,10,.5)),d=_n(f),v=p(()=>({res:r(s),classres:r(l),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:r(o),scalars:e.scalars,zscores:f,densnorm:d,statMat:e.statMat})),h={markOutlier:e.markOutlier};Ll(n,{get plots(){return r(a)},get props(){return r(v)},get controls(){return c},get callbacks(){return h},get params(){return r(u)},set params(m){F(u,m,!0)}}),ye()}var zm=G('<div class="outliers-pane svelte-1w77c1q"><!></div>'),Im=G('<div class="buttons"><!> <!></div>'),Om=G('<div class="result-stats svelte-1w77c1q"><!></div>'),Vm=G('<div class="ncomp-selector svelte-1w77c1q"><!> <!></div> <!>',1),Bm=G('<div class="data-loader svelte-1w77c1q"><!></div> <!> <!>',1),Dm=G(`<p class="svelte-1w77c1q">In this tab you can test a PLS1-DA classification model developed in <strong>Train</strong> tab by
               applying it to a test set, which contains both predictors and responses.</p> <p class="svelte-1w77c1q"><strong>Step 1.</strong></p> <p class="svelte-1w77c1q">Load the previously developed PLS1-DA model from a JSON file.</p>`,1),Ym=G(`<p class="svelte-1w77c1q"><strong>Step 2.</strong></p> <p class="svelte-1w77c1q">Load your test set from a CSV file. The file structure should be the same as the training/calibration set.
               The column with class labels is mandatory and it should contain the same classes your model was trained for.
               Here is an example how data structure may look like (note, that row labels
               and header are optional):</p> <div class="svelte-1w77c1q"><table class="svelte-1w77c1q"><thead class="svelte-1w77c1q"><tr class="svelte-1w77c1q"><td class="svelte-1w77c1q">Name</td><td class="svelte-1w77c1q">Class</td><td class="svelte-1w77c1q">x1</td><td class="svelte-1w77c1q">x2</td><td class="svelte-1w77c1q">x3</td></tr></thead><tbody class="svelte-1w77c1q"><tr><td class="svelte-1w77c1q">O1</td><td class="svelte-1w77c1q">Red</td><td class="svelte-1w77c1q">3.8</td><td class="svelte-1w77c1q">1.3</td><td class="svelte-1w77c1q">13.6</td></tr><tr><td class="svelte-1w77c1q">O2</td><td class="svelte-1w77c1q">Red</td><td class="svelte-1w77c1q">11.1</td><td class="svelte-1w77c1q">12.3</td><td class="svelte-1w77c1q">3.3</td></tr><tr><td class="svelte-1w77c1q">O3</td><td class="svelte-1w77c1q">Blue</td><td class="svelte-1w77c1q">1.2</td><td class="svelte-1w77c1q">2.3</td><td class="svelte-1w77c1q">4.2</td></tr></tbody></table></div> <p class="svelte-1w77c1q"></p>`,1),Wm=G('<div class="help-text svelte-1w77c1q"><!></div>'),Hm=G('<div class="app-container svelte-1w77c1q"><!> <div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function Um(n,e){we(e,!0);const t=p(()=>e.session.test);let s=te(-1),l=te(!1);function o(T){if(T<0||T>r(t).testres.pls.nrows-1)return;const P=r(t).testres.pls.objindices[T];P>=0&&!r(t).outliers.includes(P)&&(r(t).outliers.push(P),r(t).testres={pls:null,da:null},r(t).ind=null)}function a(){r(t).outliers=[],r(t).testres={pls:null,da:null},r(t).ind=null}function c(){r(t).outliers.pop(),r(t).testres={pls:null,da:null},r(t).ind=null}function u(T){T<0||(F(s,T,!0),F(l,!0))}function f(){F(l,!1),F(s,-1)}ge(()=>{r(t).testset===null&&(r(t).outliers=[],r(t).testres={pls:null,da:null},r(t).ind=null),r(t).model===null&&(r(t).testres={pls:null,da:null},r(t).ind=null,r(t).testset=null)}),ge(()=>{r(t).testres&&r(t).testres.pls&&(r(t).ind=xa(r(t).testres.pls.Yref.getcolref(1),r(t).testset.classNames))}),ge(()=>{r(t).testres.pls&&r(t).model.da&&(r(t).statmat.test=gl(r(t).testres.pls,r(t).model.da.params,r(t).ind))}),ge(()=>{r(t).testres.pls&&r(t).model.da&&(r(t).testres.da=ms(r(t).testres.pls,r(t).model.da,r(t).ind))}),ge(()=>{const T=er(()=>JSON.stringify(e.session,Vn));e.backupSession(T,r(t).testset,r(t).model,r(t).testres.da)});var d=Hm(),v=H(d);{var h=T=>{{let P=p(()=>({test:r(t).testres.pls}));Nl(T,{get model_getter(){return us},get res_getter(){return Bt},get model(){return r(t).model.pls},get res(){return r(P)},get ncomp(){return r(t).model.da.ncomp},get selected(){return r(s)},closeModal:f})}};Y(v,T=>{r(l)&&T(h)})}var m=R(v,2),b=H(m),g=H(b);ri(g,{get model(){return r(t).model},set model(T){r(t).model=T}});var _=R(b,2);{var w=T=>{var P=Bm(),j=Z(P),q=H(j);jl(q,{get WASM(){return e.WASM},get outliers(){return r(t).outliers},get model(){return r(t).model.pls},classMandatory:!0,get dataset(){return r(t).testset},set dataset(W){r(t).testset=W},get resobj(){return r(t).testres.pls},set resobj(W){r(t).testres.pls=W}});var E=R(j,2);{var y=W=>{var L=zm(),I=H(L);pl(I,{get outliers(){return r(t).outliers},get dataset(){return r(t).testset},resetOutliers:a,undoOutliers:c}),N(W,L)};Y(E,W=>{r(t).outliers&&r(t).outliers.length>0&&W(y)})}var M=R(E,2);{var O=W=>{var L=Vm(),I=Z(L),Q=H(I);Ga(Q,{get plsmodel(){return r(t).model.pls},get plsres(){return r(t).calres.pls},get ind(){return r(t).ind},get ncomp(){return r(t).ncomp_selected},get damodel(){return r(t).model.da},set damodel(z){r(t).model.da=z}});var U=R(Q,2);ie(U,{label:"Download",children:(z,X)=>{var ee=Im(),ne=H(ee);tt(ne,{onclick:()=>gs(r(t).testres,r(t).testset,"test",r(t).model.da.ncomp),text:"Res (test)"});var xe=R(ne,2);tt(xe,{onclick:()=>ka(r(t).model,r(t).model.da.ncomp),text:"Model"}),N(z,ee)},$$slots:{default:!0}});var K=R(I,2);{var D=z=>{var X=Om(),ee=H(X);{let ne=p(()=>({test:r(t).testres.da}));Ua(ee,{get res(){return r(ne)},get model(){return r(t).model.da}})}N(z,X)};Y(K,z=>{r(t).testres.da&&z(D)})}N(W,L)};Y(M,W=>{r(t).model.pls&&r(t).testres.pls&&W(O)})}N(T,P)};Y(_,T=>{r(t).model&&r(t).model.pls&&T(w)})}var A=R(m,2),k=H(A);{var S=T=>{var P=Wm(),j=H(P);{var q=y=>{var M=Dm();N(y,M)},E=y=>{var M=ve(),O=Z(M);{var W=L=>{var I=Ym();N(L,I)};Y(O,L=>{r(t).testset||L(W)},!0)}N(y,M)};Y(j,y=>{r(t).model?y(E,!1):y(q)})}N(T,P)},C=T=>{var P=ve(),j=Z(P);Qr(j,()=>r(t).testres.pls&&r(t).model,q=>{var E=ve(),y=Z(E);{var M=O=>{{let W=p(()=>({test:r(t).testset})),L=p(()=>({test:r(t).testres}));qm(O,{markOutlier:o,showContributions:u,get data(){return r(W)},get res(){return r(L)},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected},get statMat(){return r(t).statmat}})}};Y(y,O=>{r(t).testres&&r(t).testres.pls&&r(t).testres.da&&r(t).model&&r(t).model.pls&&r(t).model.da&&O(M)})}N(q,E)}),N(T,P)};Y(k,T=>{r(t).testres.da?T(C,!1):T(S)})}N(n,d),ye()}var Gm=G("<!> <!>",1);function Xm(n,e){we(e,!0);const t=(m,b=wt)=>{ie(m,{label:"Selected",children:(g,_)=>{var w=Gm(),A=Z(w);tt(A,{onclick:()=>e.showContributions(b()),text:"plot"});var k=R(A,2);{var S=C=>{tt(C,{onclick:()=>e.markOutlier(b()),text:"remove"})};Y(k,C=>{b()>=0&&C(S)})}N(g,w)},$$slots:{default:!0}})},s=p(()=>({new:e.res.new.pls})),l=p(()=>({new:e.res.new.da})),o=p(()=>e.model.da.ncomp),a=p(()=>({pred:{label:"Predictions",scope:"objects",component:Ml,buttons:t}})),c=Re({pred:Rl(["new"],e.model.da.classNames)});let u=te(Re({pred:Pt(c.pred)}));const f=be.seq(-10,10,.1),d=_n(f),v=p(()=>({res:r(s),classres:r(l),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:r(o),scalars:e.scalars,zscores:f,densnorm:d})),h={markOutlier:e.markOutlier};Ll(n,{get plots(){return r(a)},get props(){return r(v)},get controls(){return c},get callbacks(){return h},get params(){return r(u)},set params(m){F(u,m,!0)}}),ye()}var Km=G('<div class="data-loader svelte-1rjc99q"><!></div>'),Jm=G('<div class="outliers-pane svelte-1rjc99q"><!></div>'),Zm=G('<div class="buttons"><!></div>'),Qm=G('<div class="ncomp-selector svelte-1rjc99q"><!></div>'),$m=G(`<p class="svelte-1rjc99q">In this tab you can apply a PLS1-DA classification model developed in <strong>Train</strong> tab to
               new set of measurements without known class labels.</p> <p class="svelte-1rjc99q"><strong>Step 1.</strong></p> <p class="svelte-1rjc99q">Load the previously developed PLS1-DA model from a JSON file.</p>`,1),e1=G(`<p class="svelte-1rjc99q"><strong>Step 2.</strong></p> <p class="svelte-1rjc99q">Load your new set. In this case, because dataset should not contain the class labels, you
            can load it either from a CSV file or from SPC files.</p> <p class="svelte-1rjc99q">If you load data from a <strong>CSV file</strong>, the file structure should be the same as the training/calibration set but <strong>without the column with class labels</strong> (only predictors). Here is an example how data structure may look like
               (note, that row labels and header are optional):</p> <div class="svelte-1rjc99q"><table class="svelte-1rjc99q"><thead class="svelte-1rjc99q"><tr class="svelte-1rjc99q"><td class="svelte-1rjc99q">Name</td><td class="svelte-1rjc99q">x1</td><td class="svelte-1rjc99q">x2</td><td class="svelte-1rjc99q">x3</td></tr></thead><tbody><tr><td class="svelte-1rjc99q">O1</td><td class="svelte-1rjc99q">3.8</td><td class="svelte-1rjc99q">1.3</td><td class="svelte-1rjc99q">13.6</td></tr><tr><td class="svelte-1rjc99q">O2</td><td class="svelte-1rjc99q">11.1</td><td class="svelte-1rjc99q">12.3</td><td class="svelte-1rjc99q">3.3</td></tr><tr><td class="svelte-1rjc99q">O3</td><td class="svelte-1rjc99q">1.2</td><td class="svelte-1rjc99q">2.3</td><td class="svelte-1rjc99q">4.2</td></tr></tbody></table> <p>If your model uses spectra as predictors, you can also load spectral data directly
                  from Galactic Industries <strong>SPC files</strong>. The app supports both single spectrum in a file and
                  files with multiple spectra, however only 2-way datasets can be loaded. You can select several
                  SPC files to load (hold Ctrl or Shift when selecting), in this case they will be combined together
                  into the same dataset.</p></div> <p class="svelte-1rjc99q"></p>`,1),t1=G('<div class="help-text svelte-1rjc99q"><!></div>'),r1=G('<div class="app-container svelte-1rjc99q"><!> <div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function n1(n,e){we(e,!0);const t=p(()=>e.session.new);let s=te(-1),l=te(!1);function o(E){if(E<0||E>r(t).newres.pls.nrows-1)return;const y=r(t).newres.pls.objindices[E];y>=0&&!r(t).outliers.includes(y)&&(r(t).outliers.push(y),r(t).newres={pls:null,da:null})}function a(){r(t).outliers=[],r(t).newres={pls:null,da:null}}function c(){r(t).outliers.pop(),r(t).newres={pls:null,da:null}}function u(E){E<0||(F(s,E,!0),F(l,!0))}function f(){F(l,!1),F(s,-1)}ge(()=>{r(t).newset===null&&(r(t).outliers=[],r(t).newres={pls:null,da:null}),r(t).model===null&&(r(t).newres={pls:null,da:null},r(t).newset=null)}),ge(()=>{r(t).newres.pls&&r(t).model.da&&(r(t).newres.da=ms(r(t).newres.pls,r(t).model.da,null))}),ge(()=>{const E=er(()=>JSON.stringify(e.session,Vn));e.backupSession(E,r(t).model,r(t).newres.da)});var d=r1(),v=H(d);{var h=E=>{{let y=p(()=>({new:r(t).newres.pls}));Nl(E,{get model_getter(){return us},get res_getter(){return Bt},get model(){return r(t).model.pls},get res(){return r(y)},get ncomp(){return r(t).model.da.ncomp},get selected(){return r(s)},closeModal:f})}};Y(v,E=>{r(l)&&E(h)})}var m=R(v,2),b=H(m),g=H(b);ri(g,{get model(){return r(t).model},set model(E){r(t).model=E}});var _=R(b,2);{var w=E=>{var y=Km(),M=H(y);jl(M,{get WASM(){return e.WASM},get outliers(){return r(t).outliers},get model(){return r(t).model.pls},classMandatory:!1,get dataset(){return r(t).newset},set dataset(O){r(t).newset=O},get resobj(){return r(t).newres.pls},set resobj(O){r(t).newres.pls=O}}),N(E,y)};Y(_,E=>{r(t).model&&E(w)})}var A=R(_,2);{var k=E=>{var y=Jm(),M=H(y);pl(M,{get outliers(){return r(t).outliers},get dataset(){return r(t).newset},resetOutliers:a,undoOutliers:c}),N(E,y)};Y(A,E=>{r(t).outliers&&r(t).outliers.length>0&&E(k)})}var S=R(A,2);{var C=E=>{var y=Qm(),M=H(y);ie(M,{label:"Download",children:(O,W)=>{var L=Zm(),I=H(L);tt(I,{onclick:()=>gs(r(t).newres,r(t).newset,"new",r(t).model.da.ncomp),text:"Res (new)"}),N(O,L)},$$slots:{default:!0}}),N(E,y)};Y(S,E=>{r(t).newres.da&&E(C)})}var T=R(m,2),P=H(T);{var j=E=>{var y=t1(),M=H(y);{var O=L=>{var I=$m();N(L,I)},W=L=>{var I=ve(),Q=Z(I);{var U=K=>{var D=e1();N(K,D)};Y(Q,K=>{r(t).newset||K(U)},!0)}N(L,I)};Y(M,L=>{r(t).model?L(W,!1):L(O)})}N(E,y)},q=E=>{var y=ve(),M=Z(y);Qr(M,()=>r(t).newres&&r(t).model,O=>{var W=ve(),L=Z(W);{var I=Q=>{{let U=p(()=>({new:r(t).newset})),K=p(()=>({new:r(t).newres}));Xm(Q,{markOutlier:o,showContributions:u,get data(){return r(U)},get res(){return r(K)},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected}})}};Y(L,Q=>{r(t).newres&&r(t).newres.da&&r(t).model&&r(t).model.da&&Q(I)})}N(O,W)}),N(E,y)};Y(P,E=>{r(t).newres.da?E(q,!1):E(j)})}N(n,d),ye()}var s1=G('<sup style="color:red">β</sup>'),l1=G('<li><button class="svelte-1josccy"> </button></li>'),o1=G("<div><!></div>"),a1=G('<div class="info-container svelte-1josccy"><!></div>'),i1=G('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function c1(n,e){we(e,!0);let t=V(e,"tabs",19,()=>[]),s=V(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let o=te(!1),a=te(void 0),c=te("Current session "),u=te(!1);function f(P){F(c,P,!0),F(u,!0),setTimeout(()=>{F(c,"Current session "),F(u,!1)},1e3)}function d(){F(o,!0)}function v(){F(o,!1)}function h(P){r(a).tab=P}function m(){const P=indexedDB.open(l,1);P.onsuccess=j=>{const E=j.target.result.transaction(e.appID,"readwrite");E.objectStore(e.appID).delete("session"),E.oncomplete=()=>{F(a,e.initSession(),!0),f("Session was reinitialzed.")},E.onerror=()=>console.error("Failed to session from DB.")}}function b(P,j){window.localStorage.removeItem(e.appID+"-blocked");const q=indexedDB.open(l,1);q.onsuccess=E=>{const O=E.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);O.put(P,"session"),O.put(hl(new Date),"session-update")}}function g(){new Promise((P,j)=>{const q=indexedDB.open(l,1);q.onsuccess=E=>{const W=E.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");W.onsuccess=()=>P(W.result),W.onerror=()=>j(W.error)}}).then(P=>{_(P),F(c,"Last session is restored "),F(u,!0),setTimeout(()=>{F(c,"Current session "),F(u,!1)},1500)}).catch(P=>{console.error(P),F(a,e.initSession(),!0)})}function _(P){if(!P||P==="undefined"){F(a,e.initSession(),!0);return}const j=JSON.parse(P,vl);F(a,e.checkSession(j)?j:e.initSession(e.appID),!0)}function w(){const P=hl(new Date),j=e.appID+"-session-"+P+".json";r(a).date=P;const q=JSON.stringify(r(a),Vn),E=new Blob([q],{type:"text/json"}),y=window.URL.createObjectURL(E),M=document.createElement("a");M.setAttribute("href",y),M.setAttribute("download",j),M.click()}function A(P){const j=new FileReader;j.onload=()=>{_(j.result),P.target.value=""},j.readAsText(P.target.files[0])}function k(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&m()}Hc(()=>{const P=e.appID,j=indexedDB.open(l,1);j.onupgradeneeded=q=>{const E=q.target.result;E.objectStoreNames.contains(P)||E.createObjectStore(P)},j.onsuccess=q=>{g()}});var S=ve(),C=Z(S);{var T=P=>{var j=i1(),q=H(j),E=H(q),y=H(E),M=R(y,2),O=H(M),W=R(O);{var L=oe=>{var se=s1();N(oe,se)};Y(W,oe=>{s()&&oe(L)})}var I=R(M,2),Q=H(I),U=R(E,2);Ve(U,21,t,We,(oe,se,he)=>{var me=l1();let de;var qe=H(me);qe.__click=()=>h(he),qe.__keydown=()=>h(he);var Be=H(qe);ae(()=>{de=ct(me,1,"nav-item svelte-1josccy",null,de,{selected:r(a).tab===he}),Ee(Be,r(se).name)}),N(oe,me)});var K=R(q,2),D=H(K);Qr(D,()=>r(a).date,oe=>{var se=ve(),he=Z(se);Ve(he,17,t,We,(me,de,qe)=>{var Be=o1();let Ie;var J=H(Be);Fn(J,()=>r(de).component,($,re)=>{re($,{get WASM(){return e.WASM},get session(){return r(a)},backupSession:b})}),ae(()=>Ie=ct(Be,1,`tab-content tab-content-${r(de).label??""}`,"svelte-1josccy",Ie,{hidden:r(a).tab!==qe})),N(me,Be)}),N(oe,se)});var z=R(K,2),X=H(z);let ee;var ne=H(X),xe=H(ne),ue=R(ne,2),_e=H(ue);_e.__change=A;var ce=R(ue,2);ce.__click=w;var Ne=R(ce,2);Ne.__click=k;var Pe=R(X,2),Le=H(Pe);Le.__click=d,Le.__keydown=d;var Ae=R(Le,2);Er(Ae,()=>e.footer);var je=R(z,2);{var le=oe=>{Sl(oe,{closeModal:v,children:(se,he)=>{var me=a1(),de=H(me);Er(de,()=>e.info),N(se,me)},$$slots:{default:!0}})};Y(je,oe=>{r(o)&&oe(le)})}ae(()=>{B(y,"alt",e.appShortTitle),Ee(O,e.appTitle),Ee(Q,e.appSlogan),ee=ct(X,1,"session svelte-1josccy",null,ee,{"no-buttons":r(u)}),Ee(xe,r(c))}),N(P,j)};Y(C,P=>{r(a)&&P(T)})}N(n,S),ye()}lt(["click","keydown","change"]);const b1="modulepreload",_1=function(n){return"/"+n},w1={},u1=function(e,t,s){let l=Promise.resolve();function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return l.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};async function f1(n={}){var e,t=n,s=!!globalThis.window,l=!!globalThis.WorkerGlobalScope,o=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer";if(o){const{createRequire:J}=await u1(async()=>{const{createRequire:$}=await Promise.resolve().then(()=>m1);return{createRequire:$}},void 0);var a=J(mr&&mr.tagName.toUpperCase()==="SCRIPT"&&mr.src||new URL("pls1da.js",document.baseURI).href)}var c="./this.program",u=(J,$)=>{throw $},f=mr&&mr.tagName.toUpperCase()==="SCRIPT"&&mr.src||new URL("pls1da.js",document.baseURI).href,d="",v,h;if(o){var m=a("fs");f.startsWith("file:")&&(d=a("path").dirname(a("url").fileURLToPath(f))+"/"),h=J=>(J=k(J)?new URL(J):J,m.readFileSync(J)),v=async J=>(J=k(J)?new URL(J):J,m.readFileSync(J,void 0)),1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),u=(J,$)=>{throw process.exitCode=J,$}}else if(s||l){try{d=new URL(".",f).href}catch{}l&&(h=J=>{var $=new XMLHttpRequest;return $.open("GET",J,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}),v=async J=>{if(k(J))return new Promise((re,ke)=>{var fe=new XMLHttpRequest;fe.open("GET",J,!0),fe.responseType="arraybuffer",fe.onload=()=>{fe.status==200||fe.status==0&&fe.response?re(fe.response):ke(fe.status)},fe.onerror=ke,fe.send(null)});var $=await fetch(J,{credentials:"same-origin"});if($.ok)return $.arrayBuffer();throw Error($.status+" : "+$.url)}}var b=console.log.bind(console),g=console.error.bind(console),_,w=!1,A,k=J=>J.startsWith("file://"),S,C,T,P,j,q=!1;function E(){var J=qe.buffer;T=new Int8Array(J),P=new Uint8Array(J),t.HEAP32=new Int32Array(J),j=new Uint32Array(J),t.HEAPF64=new Float64Array(J),new BigInt64Array(J),new BigUint64Array(J)}function y(J){throw t.onAbort?.(J),J="Aborted("+J+")",g(J),w=!0,J=new WebAssembly.RuntimeError(J+". Build with -sASSERTIONS for more info."),C?.(J),J}var M;async function O(J){if(!_)try{var $=await v(J);return new Uint8Array($)}catch{}if(J==M&&_)J=new Uint8Array(_);else if(h)J=h(J);else throw"both async and sync fetching of the wasm failed";return J}async function W(J,$){try{var re=await O(J);return await WebAssembly.instantiate(re,$)}catch(ke){g(`failed to asynchronously prepare wasm: ${ke}`),y(ke)}}async function L(J){var $=M;if(!_&&!k($)&&!o)try{var re=fetch($,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(re,J)}catch(ke){g(`wasm streaming compile failed: ${ke}`),g("falling back to ArrayBuffer instantiation")}return W($,J)}class I{name="ExitStatus";constructor($){this.message=`Program terminated with exit(${$})`,this.status=$}}var Q=J=>{for(;0<J.length;)J.shift()(t)},U=[],K=[],D=()=>{var J=t.preRun.shift();K.push(J)},z=!0,X=0,ee={},ne=J=>{A=J,z||0<X||(t.onExit?.(J),w=!0),u(J,new I(J))},xe=J=>{if(!w)try{if(J(),!(z||0<X))try{A=J=A,ne(J)}catch($){$ instanceof I||$=="unwind"||u(1,$)}}catch($){$ instanceof I||$=="unwind"||u(1,$)}},ue=globalThis.TextDecoder&&new TextDecoder,_e=(J,$=0)=>{for(var re=$,ke=re+void 0;J[re]&&!(re>=ke);)++re;if(16<re-$&&J.buffer&&ue)return ue.decode(J.subarray($,re));for(ke="";$<re;){var fe=J[$++];if(fe&128){var Te=J[$++]&63;if((fe&224)==192)ke+=String.fromCharCode((fe&31)<<6|Te);else{var ze=J[$++]&63;fe=(fe&240)==224?(fe&15)<<12|Te<<6|ze:(fe&7)<<18|Te<<12|ze<<6|J[$++]&63,65536>fe?ke+=String.fromCharCode(fe):(fe-=65536,ke+=String.fromCharCode(55296|fe>>10,56320|fe&1023))}}else ke+=String.fromCharCode(fe)}return ke},ce={},Ne=()=>{if(!Pe){var J={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:c||"./this.program"},$;for($ in ce)ce[$]===void 0?delete J[$]:J[$]=ce[$];var re=[];for($ in J)re.push(`${$}=${J[$]}`);Pe=re}return Pe},Pe,Le=(J,$,re)=>{var ke=P;if(!(0<re))return 0;var fe=$;re=$+re-1;for(var Te=0;Te<J.length;++Te){var ze=J.codePointAt(Te);if(127>=ze){if($>=re)break;ke[$++]=ze}else if(2047>=ze){if($+1>=re)break;ke[$++]=192|ze>>6,ke[$++]=128|ze&63}else if(65535>=ze){if($+2>=re)break;ke[$++]=224|ze>>12,ke[$++]=128|ze>>6&63,ke[$++]=128|ze&63}else{if($+3>=re)break;ke[$++]=240|ze>>18,ke[$++]=128|ze>>12&63,ke[$++]=128|ze>>6&63,ke[$++]=128|ze&63,Te++}}return ke[$]=0,$-fe},Ae=J=>{for(var $=0,re=0;re<J.length;++re){var ke=J.charCodeAt(re);127>=ke?$++:2047>=ke?$+=2:55296<=ke&&57343>=ke?($+=4,++re):$+=3}return $},je=[null,[],[]],le=()=>{if(o){var J=a("crypto");return $=>J.randomFillSync($)}return $=>crypto.getRandomValues($)},oe=J=>{(oe=le())(J)};if(t.noExitRuntime&&(z=t.noExitRuntime),t.print&&(b=t.print),t.printErr&&(g=t.printErr),t.wasmBinary&&(_=t.wasmBinary),t.thisProgram&&(c=t.thisProgram),t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.shift()();t.ccall=(J,$,re,ke)=>{var fe={string:Ue=>{var ft=0;if(Ue!=null&&Ue!==0){ft=Ae(Ue)+1;var vr=me(ft);Le(Ue,vr,ft),ft=vr}return ft},array:Ue=>{var ft=me(Ue.length);return T.set(Ue,ft),ft}};J=t["_"+J];var Te=[],ze=0;if(ke)for(var Oe=0;Oe<ke.length;Oe++){var Ye=fe[re[Oe]];Ye?(ze===0&&(ze=de()),Te[Oe]=Ye(ke[Oe])):Te[Oe]=ke[Oe]}return re=J(...Te),re=(function(Ue){return ze!==0&&he(ze),$==="string"?Ue?_e(P,Ue):"":$==="boolean"?!!Ue:Ue})(re)};var se,he,me,de,qe,Be={g:()=>y(""),j:()=>{z=!1,X=0},k:(J,$)=>{if(ee[J]&&(clearTimeout(ee[J].id),delete ee[J]),!$)return 0;var re=setTimeout(()=>{delete ee[J],xe(()=>se(J,performance.now()))},$);return ee[J]={id:re,U:$},0},a:()=>Date.now(),c:J=>g(J?_e(P,J):""),b:()=>performance.now(),l:J=>{var $=P.length;if(J>>>=0,2147483648<J)return!1;for(var re=1;4>=re;re*=2){var ke=$*(1+.2/re);ke=Math.min(ke,J+100663296);e:{ke=(Math.min(2147483648,65536*Math.ceil(Math.max(J,ke)/65536))-qe.buffer.byteLength+65535)/65536|0;try{qe.grow(ke),E();var fe=1;break e}catch{}fe=void 0}if(fe)return!0}return!1},e:(J,$)=>{var re=0,ke=0,fe;for(fe of Ne()){var Te=$+re;j[J+ke>>2]=Te,re+=Le(fe,Te,1/0)+1,ke+=4}return 0},f:(J,$)=>{var re=Ne();j[J>>2]=re.length,J=0;for(var ke of re)J+=Ae(ke)+1;return j[$>>2]=J,0},h:(J,$,re,ke)=>{for(var fe=0,Te=0;Te<re;Te++){var ze=j[$>>2],Oe=j[$+4>>2];$+=8;for(var Ye=0;Ye<Oe;Ye++){var Ue=J,ft=P[ze+Ye],vr=je[Ue];ft===0||ft===10?((Ue===1?b:g)(_e(vr)),vr.length=0):vr.push(ft)}fe+=Oe}return j[ke>>2]=fe,0},i:ne,d:(J,$)=>(oe(P.subarray(J,J+$)),0)},Ie;return Ie=await(async function(){function J(re){return re=Ie=re.exports,t._plsfit_wasm=re.o,t._free=re.p,t._malloc=re.q,t._plspredict_wasm=re.r,t._pcvpls_wasm=re.s,t._prepapply_wasm=re.t,t._prepfit_wasm=re.u,se=re.v,t._strdup=re.w,t._strndup=re.x,t.__ZdaPv=re.y,t.__ZdaPvm=re.z,t.__ZdlPv=re.A,t.__ZdlPvm=re.B,t.__Znaj=re.C,t.__ZnajSt11align_val_t=re.D,t.__Znwj=re.E,t.__ZnwjSt11align_val_t=re.F,t.___libc_calloc=re.G,t.___libc_free=re.H,t.___libc_malloc=re.I,t.___libc_realloc=re.J,t._emscripten_builtin_malloc=re.K,t._emscripten_builtin_calloc=re.L,t._emscripten_builtin_free=re.M,t._emscripten_builtin_realloc=re.N,t._malloc_size=re.O,t._malloc_usable_size=re.P,t._reallocf=re.Q,he=re.R,me=re.S,de=re.T,qe=re.m,E(),Ie}var $={a:Be};return t.instantiateWasm?new Promise(re=>{t.instantiateWasm($,(ke,fe)=>{re(J(ke))})}):(M??=t.locateFile?t.locateFile?t.locateFile("pls_wasm.wasm",d):d+"pls_wasm.wasm":new URL("/pls1da/pls1da.wasm",mr&&mr.tagName.toUpperCase()==="SCRIPT"&&mr.src||new URL("pls1da.js",document.baseURI).href).href,J((await L($)).instance))})(),(function(){function J(){if(t.calledRun=!0,!w){if(q=!0,Ie.n(),S?.(t),t.onRuntimeInitialized?.(),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var $=t.postRun.shift();U.push($)}Q(U)}}if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)D();Q(K),t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),J()},1)):J()})(),q?e=t:e=new Promise((J,$)=>{S=J,C=$}),e}var d1=G('<p>Current release: <span>1.2.0</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PLS1-DA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="" download=""></a> | <a href="">video lessons</a></p>'),v1=G(`<h2>PLS1 Discriminant Analysis (binary version)</h2> <p>Interactive web-application for creating, testing and applying PLS1-DA models for
      discriminant analysis between two classes (binary version). The app implements both conventional
      method based on threshold (hard) as well as soft method based on distributions (soft),
      described in <a href="https://doi.org/10.1016/j.microc.2025.113329">this paper</a>.
      Like any other mda.tools web-apps it does not send any information to the server,
      all calculations are done locally on your device.</p> <p>The application uses <a href="https://doi.org/10.1016/j.aca.2023.341096">Procrustes cross-validation</a> for optimization and quality check on the training stage.</p> <p>Check out YouTube <a href="">video-lessons</a> for more details.</p> <h3>v. 1.2.0</h3> <p class="release-info">released 12/02/2026</p> <ul><li>Added FoM heatmap plot.</li> <li>Adjusted range list for alpha.</li></ul> <h3>v. 1.1.0</h3> <p class="release-info">released 11/02/2026</p> <ul><li>Improvements to ROC curve.</li> <li>Refactoring of GUI and plots.</li></ul>`,1);function h1(n,e){we(e,!1);function t(o){const a=Object.keys(o);if(!["date","tab","train","test","new"].every(m=>a.includes(m)))return!1;const c=["model","calset","calsetp","calres","pvset","pvres","outliers","exclvars","ncomp_selected","pvscalars","prepType","prepmodel","prepmeta","prepobj"],u=Object.keys(o.train);if(!c.every(m=>u.includes(m)))return!1;const f=["model","testset","testres","outliers","ncomp_selected"],d=Object.keys(o.test);if(!f.every(m=>d.includes(m)))return!1;const v=["model","newset","newres","outliers","ncomp_selected"],h=Object.keys(o.new);return!!v.every(m=>h.includes(m))}function s(){return{date:hl(new Date),tab:0,train:{model:{pls:0,da:0},calset:0,calsetp:0,pvset:0,ind:0,calres:{pls:0,da:0},pvres:{pls:0,da:0},statmat:{cal:0,pv:0},outliers:[],exclvars:[],ncomp_selected:1,pvscalars:0,prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{model:0,damodel:0,testset:0,testres:{pls:0,da:0},statmat:{test:0},outliers:[],ncomp_selected:1},new:{model:0,damodel:0,newset:0,newres:{pls:0,da:0},outliers:[],ncomp_selected:1}}}const l=[{name:"Train",label:"train",component:Cm},{name:"Test",label:"test",component:Um},{name:"Predict",label:"new",component:n1}];Bc(),c1(n,{appID:"plsda",appTitle:"PLS1-DA",appShortTitle:"PLS1-DA",appSlogan:"PLS1 Discriminant Analysis (binary)",get WASM(){return f1},get tabs(){return l},initSession:s,checkSession:t,footer:c=>{var u=d1();N(c,u)},info:c=>{var u=v1();N(c,u)},$$slots:{footer:!0,info:!0}}),ye()}bc(h1,{target:document.body});const m1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pls1da.js.map
