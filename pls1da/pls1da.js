(function(){"use strict";var Dl=document.createElement("style");Dl.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-142p4sy{display:none}.selector.svelte-142p4sy{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-142p4sy{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-142p4sy:not(.selected):hover{border:1px solid}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.exclvars.svelte-12e65an{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;inset:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.wrapper.svelte-1di9qjd{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-1di9qjd{grid-area:plot}.plot-controls.svelte-1di9qjd{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-1di9qjd>.control-element{background:transparent}.msg-select.svelte-1di9qjd{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}table.svelte-110ino2{width:100%;border-collapse:collapse}tr.svelte-110ino2{width:100%}th.svelte-110ino2{border-bottom:1px solid #a0a0a0}th.svelte-110ino2,td.svelte-110ino2{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}td.svelte-110ino2:first-of-type{width:25%}.switcher.svelte-110ino2{padding:1em .2em .2em;text-align:center}label.svelte-110ino2{background-color:#e8e8e8;border:solid 1px #708090;color:#607080;padding:.25em .5em;margin-right:.1em;border-radius:.25em;cursor:pointer}label.svelte-110ino2:hover{background-color:#fffef0;color:#607080;border-color:#607080}input.svelte-110ino2{display:none}input.svelte-110ino2:checked+label:where(.svelte-110ino2){background-color:#607080;color:#e8f0f8;border-color:#607080}.control-element.res-switcher{margin-top:1em;margin-bottom:0;padding-bottom:0;justify-content:center;background:transparent;font-size:.8rem}.control-element.res-switcher:hover{background:transparent}.control-element.res-switcher .selector{justify-content:center}.control-element.res-switcher>.selector>.option{background-color:#e8e8e8;border-color:#708090;color:#607080}p.svelte-7klqqw{line-height:1.5em}span.svelte-7klqqw{color:#a0a0a0}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}div.svelte-z3o1sd{width:100%;height:100%}div.svelte-z3o1sd .plot .axes{cursor:crosshair}div.svelte-z3o1sd .plot .axes-content rect{pointer-events:none}.tab-content-train .plot-controls-area>.plot-selector-fom2,.tab-content-train .plot-controls-area>.plot-selector-loadings{margin-top:1em}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mp4dba{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(330px,30%) 1fr}}.info-text.svelte-7h7avz{line-height:1.5em}.info-text.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.tab-content-test .plot-controls-area>.plot-selector-fom2{margin-top:1em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q),.help-text.svelte-1w77c1q>div:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q){border-collapse:collapse}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) thead:where(.svelte-1w77c1q) tr:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q){font-weight:700;background:#f8f4e0}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) tbody:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1w77c1q{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(330px,30%) 1fr}}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q),.help-text.svelte-1rjc99q>div:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q){border-collapse:collapse}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) thead:where(.svelte-1rjc99q) tr:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q){font-weight:700;background:#f8f4e0}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Dl);var wr=typeof document<"u"?document.currentScript:null;const ys=!1;var xs=Array.isArray,gi=Array.prototype.indexOf,pn=Array.prototype.includes,es=Array.from,pi=Object.defineProperty,Rr=Object.getOwnPropertyDescriptor,Yl=Object.getOwnPropertyDescriptors,Hl=Object.prototype,bi=Array.prototype,ts=Object.getPrototypeOf,Wl=Object.isExtensible;function bn(n){return typeof n=="function"}const it=()=>{};function wi(n){return typeof n?.then=="function"}function _i(n){return n()}function ks(n){for(var e=0;e<n.length;e++)n[e]()}function Ul(){var n,e,r=new Promise((s,l)=>{n=s,e=l});return{promise:r,resolve:n,reject:e}}function yi(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const r=[];for(const s of n)if(r.push(s),r.length===e)break;return r}const yt=2,Tn=4,Pn=8,Xl=1<<24,dr=16,er=32,Gr=64,Es=128,Wt=512,gt=1024,xt=2048,tr=4096,It=8192,_r=16384,qr=32768,yr=65536,Gl=1<<17,Kl=1<<18,wn=1<<19,Jl=1<<20,xr=1<<25,Kr=65536,Ss=1<<21,As=1<<22,Fr=1<<23,vr=Symbol("$state"),Zl=Symbol("legacy props"),xi=Symbol(""),Jr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ql(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ki(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ei(n,e,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function Si(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ai(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ci(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Ni(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ti(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Pi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ji(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Li(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Mi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ri=1,qi=2,$l=4,Fi=8,zi=16,Oi=1,Ii=2,Vi=4,Bi=8,Di=16,Yi=1,Hi=2,Wi=4,eo=1,Ui=2,pt=Symbol(),to="http://www.w3.org/1999/xhtml",Xi="http://www.w3.org/2000/svg",Gi="http://www.w3.org/1998/Math/MathML";function Ki(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function ro(n){return n===this.v}function Ji(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function no(n){return!Ji(n,this.v)}let _n=!1,Zi=!1;function Qi(){_n=!0}const $i=[];function ec(n,e=!1,r=!1){return rs(n,new Map,"",$i,null,r)}function rs(n,e,r,s,l=null,o=!1){if(typeof n=="object"&&n!==null){var a=e.get(n);if(a!==void 0)return a;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(xs(n)){var c=Array(n.length);e.set(n,c),l!==null&&e.set(l,c);for(var u=0;u<n.length;u+=1){var f=n[u];u in n&&(c[u]=rs(f,e,r,s,null,o))}return c}if(ts(n)===Hl){c={},e.set(n,c),l!==null&&e.set(l,c);for(var d of Object.keys(n))c[d]=rs(n[d],e,r,s,null,o);return c}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function"&&!o)return rs(n.toJSON(),e,r,s,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}let nt=null;function yn(n){nt=n}function Pt(n){return so().get(n)}function tc(n,e){return so().set(n,e),e}function _e(n,e=!1,r){nt={p:nt,i:!1,c:null,e:null,s:n,x:null,l:_n&&!e?{s:null,u:null,$:[]}:null}}function ye(n){var e=nt,r=e.e;if(r!==null){e.e=null;for(var s of r)Po(s)}return e.i=!0,nt=e.p,{}}function Zr(){return!_n||nt!==null&&nt.l===null}function so(n){return nt===null&&Ql(),nt.c??=new Map(rc(nt)||void 0)}function rc(n){let e=n.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let Qr=[];function lo(){var n=Qr;Qr=[],ks(n)}function Vt(n){if(Qr.length===0&&!xn){var e=Qr;queueMicrotask(()=>{e===Qr&&lo()})}Qr.push(n)}function nc(){for(;Qr.length>0;)lo()}function oo(n){var e=Xe;if(e===null)return Ue.f|=Fr,n;if((e.f&qr)===0&&(e.f&Tn)===0)throw n;zr(n,e)}function zr(n,e){for(;e!==null;){if((e.f&Es)!==0){if((e.f&qr)===0)throw n;try{e.b.error(n);return}catch(r){n=r}}e=e.parent}throw n}const sc=-7169;function ft(n,e){n.f=n.f&sc|e}function Cs(n){(n.f&Wt)!==0||n.deps===null?ft(n,gt):ft(n,tr)}function ao(n){if(n!==null)for(const e of n)(e.f&yt)===0||(e.f&Kr)===0||(e.f^=Kr,ao(e.deps))}function io(n,e,r){(n.f&xt)!==0?e.add(n):(n.f&tr)!==0&&r.add(n),ao(n.deps),ft(n,gt)}const ns=new Set;let et=null,Ns=null,rr=null,Rt=[],ss=null,Ts=!1,xn=!1;class kr{current=new Map;previous=new Map;#e=new Set;#s=new Set;#t=0;#l=0;#r=null;#a=new Set;#n=new Set;#o=new Map;is_fork=!1;#i=!1;#u(){return this.is_fork||this.#l>0}skip_effect(e){this.#o.has(e)||this.#o.set(e,{d:[],m:[]})}unskip_effect(e){var r=this.#o.get(e);if(r){this.#o.delete(e);for(var s of r.d)ft(s,xt),nr(s);for(s of r.m)ft(s,tr),nr(s)}}process(e){Rt=[],this.apply();var r=[],s=[];for(const l of e)this.#c(l,r,s);if(this.#u()){this.#f(s),this.#f(r);for(const[l,o]of this.#o)mo(l,o)}else{for(const l of this.#e)l();this.#e.clear(),this.#t===0&&this.#v(),Ns=this,et=null,fo(s),fo(r),Ns=null,this.#r?.resolve()}rr=null}#c(e,r,s){e.f^=gt;for(var l=e.first;l!==null;){var o=l.f,a=(o&(er|Gr))!==0,c=a&&(o&gt)!==0,u=c||(o&It)!==0||this.#o.has(l);if(!u&&l.fn!==null){a?l.f^=gt:(o&Tn)!==0?r.push(l):Rn(l)&&((o&dr)!==0&&this.#n.add(l),En(l));var f=l.first;if(f!==null){l=f;continue}}for(;l!==null;){var d=l.next;if(d!==null){l=d;break}l=l.parent}}}#f(e){for(var r=0;r<e.length;r+=1)io(e[r],this.#a,this.#n)}capture(e,r){r!==pt&&!this.previous.has(e)&&this.previous.set(e,r),(e.f&Fr)===0&&(this.current.set(e,e.v),rr?.set(e,e.v))}activate(){et=this,this.apply()}deactivate(){et===this&&(et=null,rr=null)}flush(){if(this.activate(),Rt.length>0){if(uo(),et!==null&&et!==this)return}else this.#t===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#s)e(this);this.#s.clear()}#v(){if(ns.size>1){this.previous.clear();var e=rr,r=!0;for(const l of ns){if(l===this){r=!1;continue}const o=[];for(const[c,u]of this.current){if(l.current.has(c))if(r&&u!==l.current.get(c))l.current.set(c,u);else continue;o.push(c)}if(o.length===0)continue;const a=[...l.current.keys()].filter(c=>!this.current.has(c));if(a.length>0){var s=Rt;Rt=[];const c=new Set,u=new Map;for(const f of o)vo(f,a,c,u);if(Rt.length>0){et=l,l.apply();for(const f of Rt)l.#c(f,[],[]);l.deactivate()}Rt=s}}et=null,rr=e}ns.delete(this)}increment(e){this.#t+=1,e&&(this.#l+=1)}decrement(e){this.#t-=1,e&&(this.#l-=1),!this.#i&&(this.#i=!0,Vt(()=>{this.#i=!1,this.#u()?Rt.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#a)this.#n.delete(e),ft(e,xt),nr(e);for(const e of this.#n)ft(e,tr),nr(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#s.add(e)}settled(){return(this.#r??=Ul()).promise}static ensure(){if(et===null){const e=et=new kr;ns.add(et),xn||Vt(()=>{et===e&&e.flush()})}return et}apply(){}}function co(n){var e=xn;xn=!0;try{for(var r;;){if(nc(),Rt.length===0&&(et?.flush(),Rt.length===0))return ss=null,r;uo()}}finally{xn=e}}function uo(){Ts=!0;var n=null;try{for(var e=0;Rt.length>0;){var r=kr.ensure();if(e++>1e3){var s,l;lc()}r.process(Rt),Or.clear()}}finally{Rt=[],Ts=!1,ss=null}}function lc(){try{Ni()}catch(n){zr(n,ss)}}let Er=null;function fo(n){var e=n.length;if(e!==0){for(var r=0;r<e;){var s=n[r++];if((s.f&(_r|It))===0&&Rn(s)&&(Er=new Set,En(s),s.deps===null&&s.first===null&&s.nodes===null&&s.teardown===null&&s.ac===null&&Mo(s),Er?.size>0)){Or.clear();for(const l of Er){if((l.f&(_r|It))!==0)continue;const o=[l];let a=l.parent;for(;a!==null;)Er.has(a)&&(Er.delete(a),o.push(a)),a=a.parent;for(let c=o.length-1;c>=0;c--){const u=o[c];(u.f&(_r|It))===0&&En(u)}}Er.clear()}}Er=null}}function vo(n,e,r,s){if(!r.has(n)&&(r.add(n),n.reactions!==null))for(const l of n.reactions){const o=l.f;(o&yt)!==0?vo(l,e,r,s):(o&(As|dr))!==0&&(o&xt)===0&&ho(l,e,s)&&(ft(l,xt),nr(l))}}function ho(n,e,r){const s=r.get(n);if(s!==void 0)return s;if(n.deps!==null)for(const l of n.deps){if(pn.call(e,l))return!0;if((l.f&yt)!==0&&ho(l,e,r))return r.set(l,!0),!0}return r.set(n,!1),!1}function nr(n){var e=ss=n,r=e.b;if(r?.is_pending&&(n.f&(Tn|Pn|Xl))!==0&&(n.f&qr)===0){r.defer_effect(n);return}for(;e.parent!==null;){e=e.parent;var s=e.f;if(Ts&&e===Xe&&(s&dr)!==0&&(s&Kl)===0&&(s&qr)!==0)return;if((s&(Gr|er))!==0){if((s&gt)===0)return;e.f^=gt}}Rt.push(e)}function mo(n,e){if(!((n.f&er)!==0&&(n.f&gt)!==0)){(n.f&xt)!==0?e.d.push(n):(n.f&tr)!==0&&e.m.push(n),ft(n,gt);for(var r=n.first;r!==null;)mo(r,e),r=r.next}}function oc(n){let e=0,r=Sr(0),s;return()=>{qs()&&(t(r),os(()=>(e===0&&(s=lr(()=>n(()=>Ln(r)))),e+=1,()=>{Vt(()=>{e-=1,e===0&&(s?.(),s=void 0,Ln(r))})})))}}var ac=yr|wn;function ic(n,e,r,s){new cc(n,e,r,s)}class cc{parent;is_pending=!1;transform_error;#e;#s=null;#t;#l;#r;#a=null;#n=null;#o=null;#i=null;#u=0;#c=0;#f=!1;#v=new Set;#h=new Set;#d=null;#w=oc(()=>(this.#d=Sr(this.#u),()=>{this.#d=null}));constructor(e,r,s,l){this.#e=e,this.#t=r,this.#l=o=>{var a=Xe;a.b=this,a.f|=Es,s(o)},this.parent=Xe.b,this.transform_error=l??this.parent?.transform_error??(o=>o),this.#r=$r(()=>{this.#p()},ac)}#_(){try{this.#a=Xt(()=>this.#l(this.#e))}catch(e){this.error(e)}}#y(e){const r=this.#t.failed;r&&(this.#o=Xt(()=>{r(this.#e,()=>e,()=>()=>{})}))}#x(){const e=this.#t.pending;e&&(this.is_pending=!0,this.#n=Xt(()=>e(this.#e)),Vt(()=>{var r=this.#i=document.createDocumentFragment(),s=Cr();r.append(s),this.#a=this.#g(()=>(kr.ensure(),Xt(()=>this.#l(s)))),this.#c===0&&(this.#e.before(r),this.#i=null,en(this.#n,()=>{this.#n=null}),this.#m())}))}#p(){try{if(this.is_pending=this.has_pending_snippet(),this.#c=0,this.#u=0,this.#a=Xt(()=>{this.#l(this.#e)}),this.#c>0){var e=this.#i=document.createDocumentFragment();Fo(this.#a,e);const r=this.#t.pending;this.#n=Xt(()=>r(this.#e))}else this.#m()}catch(r){this.error(r)}}#m(){this.is_pending=!1;for(const e of this.#v)ft(e,xt),nr(e);for(const e of this.#h)ft(e,tr),nr(e);this.#v.clear(),this.#h.clear()}defer_effect(e){io(e,this.#v,this.#h)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#t.pending}#g(e){var r=Xe,s=Ue,l=nt;mr(this.#r),Gt(this.#r),yn(this.#r.ctx);try{return e()}catch(o){return oo(o),null}finally{mr(r),Gt(s),yn(l)}}#b(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(e);return}this.#c+=e,this.#c===0&&(this.#m(),this.#n&&en(this.#n,()=>{this.#n=null}),this.#i&&(this.#e.before(this.#i),this.#i=null))}update_pending_count(e){this.#b(e),this.#u+=e,!(!this.#d||this.#f)&&(this.#f=!0,Vt(()=>{this.#f=!1,this.#d&&Ar(this.#d,this.#u)}))}get_effect_pending(){return this.#w(),t(this.#d)}error(e){var r=this.#t.onerror;let s=this.#t.failed;if(!r&&!s)throw e;this.#a&&(qt(this.#a),this.#a=null),this.#n&&(qt(this.#n),this.#n=null),this.#o&&(qt(this.#o),this.#o=null);var l=!1,o=!1;const a=()=>{if(l){Ki();return}l=!0,o&&Mi(),this.#o!==null&&en(this.#o,()=>{this.#o=null}),this.#g(()=>{kr.ensure(),this.#p()})},c=u=>{try{o=!0,r?.(u,a),o=!1}catch(f){zr(f,this.#r&&this.#r.parent)}s&&(this.#o=this.#g(()=>{kr.ensure();try{return Xt(()=>{var f=Xe;f.b=this,f.f|=Es,s(this.#e,()=>u,()=>a)})}catch(f){return zr(f,this.#r.parent),null}}))};Vt(()=>{var u;try{u=this.transform_error(e)}catch(f){zr(f,this.#r&&this.#r.parent);return}u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(c,f=>zr(f,this.#r&&this.#r.parent)):c(u)})}}function uc(n,e,r,s){const l=Zr()?jn:Ps;var o=n.filter(v=>!v.settled);if(r.length===0&&o.length===0){s(e.map(l));return}var a=Xe,c=go(),u=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(v=>v.promise)):null;function f(v){c();try{s(v)}catch(g){(a.f&_r)===0&&zr(g,a)}ls()}if(r.length===0){u.then(()=>f(e.map(l)));return}function d(){c(),Promise.all(r.map(v=>dc(v))).then(v=>f([...e.map(l),...v])).catch(v=>zr(v,a))}u?u.then(d):d()}function go(){var n=Xe,e=Ue,r=nt,s=et;return function(o=!0){mr(n),Gt(e),yn(r),o&&s?.activate()}}function ls(n=!0){mr(null),Gt(null),yn(null),n&&et?.deactivate()}function fc(){var n=Xe.b,e=et,r=n.is_rendered();return n.update_pending_count(1),e.increment(r),()=>{n.update_pending_count(-1),e.decrement(r)}}function jn(n){var e=yt|xt,r=Ue!==null&&(Ue.f&yt)!==0?Ue:null;return Xe!==null&&(Xe.f|=wn),{ctx:nt,deps:null,effects:null,equals:ro,f:e,fn:n,reactions:null,rv:0,v:pt,wv:0,parent:r??Xe,ac:null}}function dc(n,e,r){Xe===null&&ki();var l=void 0,o=Sr(pt),a=!Ue,c=new Map;return Ec(()=>{var u=Ul();l=u.promise;try{Promise.resolve(n()).then(u.resolve,u.reject).finally(ls)}catch(g){u.reject(g),ls()}var f=et;if(a){var d=fc();c.get(f)?.reject(Jr),c.delete(f),c.set(f,u)}const v=(g,m=void 0)=>{if(f.activate(),m)m!==Jr&&(o.f|=Fr,Ar(o,m));else{(o.f&Fr)!==0&&(o.f^=Fr),Ar(o,g);for(const[w,p]of c){if(c.delete(w),w===f)break;p.reject(Jr)}}d&&d()};u.promise.then(v,g=>v(null,g||"unknown"))}),Fs(()=>{for(const u of c.values())u.reject(Jr)}),new Promise(u=>{function f(d){function v(){d===l?u(o):f(l)}d.then(v,v)}f(l)})}function h(n){const e=jn(n);return Oo(e),e}function Ps(n){const e=jn(n);return e.equals=no,e}function vc(n){var e=n.effects;if(e!==null){n.effects=null;for(var r=0;r<e.length;r+=1)qt(e[r])}}function hc(n){for(var e=n.parent;e!==null;){if((e.f&yt)===0)return(e.f&_r)===0?e:null;e=e.parent}return null}function js(n){var e,r=Xe;mr(hc(n));try{n.f&=~Kr,vc(n),e=Yo(n)}finally{mr(r)}return e}function po(n){var e=js(n);if(!n.equals(e)&&(n.wv=Bo(),(!et?.is_fork||n.deps===null)&&(n.v=e,n.deps===null))){ft(n,gt);return}Ir||(rr!==null?(qs()||et?.is_fork)&&rr.set(n,e):Cs(n))}function mc(n){if(n.effects!==null)for(const e of n.effects)(e.teardown||e.ac)&&(e.teardown?.(),e.ac?.abort(Jr),e.teardown=it,e.ac=null,qn(e,0),Os(e))}function bo(n){if(n.effects!==null)for(const e of n.effects)e.teardown&&En(e)}let Ls=new Set;const Or=new Map;let wo=!1;function Sr(n,e){var r={f:0,v:n,reactions:null,equals:ro,rv:0,wv:0};return r}function re(n,e){const r=Sr(n);return Oo(r),r}function Ms(n,e=!1,r=!0){const s=Sr(n);return e||(s.equals=no),_n&&r&&nt!==null&&nt.l!==null&&(nt.l.s??=[]).push(s),s}function z(n,e,r=!1){Ue!==null&&(!sr||(Ue.f&Gl)!==0)&&Zr()&&(Ue.f&(yt|dr|As|Gl))!==0&&(Kt===null||!pn.call(Kt,n))&&Li();let s=r?Re(e):e;return Ar(n,s)}function Ar(n,e){if(!n.equals(e)){var r=n.v;Ir?Or.set(n,e):Or.set(n,r),n.v=e;var s=kr.ensure();if(s.capture(n,r),(n.f&yt)!==0){const l=n;(n.f&xt)!==0&&js(l),Cs(l)}n.wv=Bo(),_o(n,xt),Zr()&&Xe!==null&&(Xe.f&gt)!==0&&(Xe.f&(er|Gr))===0&&(Jt===null?Ac([n]):Jt.push(n)),!s.is_fork&&Ls.size>0&&!wo&&gc()}return e}function gc(){wo=!1;for(const n of Ls)(n.f&gt)!==0&&ft(n,tr),Rn(n)&&En(n);Ls.clear()}function Ln(n){z(n,n.v+1)}function _o(n,e){var r=n.reactions;if(r!==null)for(var s=Zr(),l=r.length,o=0;o<l;o++){var a=r[o],c=a.f;if(!(!s&&a===Xe)){var u=(c&xt)===0;if(u&&ft(a,e),(c&yt)!==0){var f=a;rr?.delete(f),(c&Kr)===0&&(c&Wt&&(a.f|=Kr),_o(f,tr))}else u&&((c&dr)!==0&&Er!==null&&Er.add(a),nr(a))}}}function Re(n){if(typeof n!="object"||n===null||vr in n)return n;const e=ts(n);if(e!==Hl&&e!==bi)return n;var r=new Map,s=xs(n),l=re(0),o=rn,a=c=>{if(rn===o)return c();var u=Ue,f=rn;Gt(null),Vo(o);var d=c();return Gt(u),Vo(f),d};return s&&r.set("length",re(n.length)),new Proxy(n,{defineProperty(c,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Pi();var d=r.get(u);return d===void 0?a(()=>{var v=re(f.value);return r.set(u,v),v}):z(d,f.value,!0),!0},deleteProperty(c,u){var f=r.get(u);if(f===void 0){if(u in c){const d=a(()=>re(pt));r.set(u,d),Ln(l)}}else z(f,pt),Ln(l);return!0},get(c,u,f){if(u===vr)return n;var d=r.get(u),v=u in c;if(d===void 0&&(!v||Rr(c,u)?.writable)&&(d=a(()=>{var m=Re(v?c[u]:pt),w=re(m);return w}),r.set(u,d)),d!==void 0){var g=t(d);return g===pt?void 0:g}return Reflect.get(c,u,f)},getOwnPropertyDescriptor(c,u){var f=Reflect.getOwnPropertyDescriptor(c,u);if(f&&"value"in f){var d=r.get(u);d&&(f.value=t(d))}else if(f===void 0){var v=r.get(u),g=v?.v;if(v!==void 0&&g!==pt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return f},has(c,u){if(u===vr)return!0;var f=r.get(u),d=f!==void 0&&f.v!==pt||Reflect.has(c,u);if(f!==void 0||Xe!==null&&(!d||Rr(c,u)?.writable)){f===void 0&&(f=a(()=>{var g=d?Re(c[u]):pt,m=re(g);return m}),r.set(u,f));var v=t(f);if(v===pt)return!1}return d},set(c,u,f,d){var v=r.get(u),g=u in c;if(s&&u==="length")for(var m=f;m<v.v;m+=1){var w=r.get(m+"");w!==void 0?z(w,pt):m in c&&(w=a(()=>re(pt)),r.set(m+"",w))}if(v===void 0)(!g||Rr(c,u)?.writable)&&(v=a(()=>re(void 0)),z(v,Re(f)),r.set(u,v));else{g=v.v!==pt;var p=a(()=>Re(f));z(v,p)}var b=Reflect.getOwnPropertyDescriptor(c,u);if(b?.set&&b.set.call(d,f),!g){if(s&&typeof u=="string"){var _=r.get("length"),S=Number(u);Number.isInteger(S)&&S>=_.v&&z(_,S+1)}Ln(l)}return!0},ownKeys(c){t(l);var u=Reflect.ownKeys(c).filter(v=>{var g=r.get(v);return g===void 0||g.v!==pt});for(var[f,d]of r)d.v!==pt&&!(f in c)&&u.push(f);return u},setPrototypeOf(){ji()}})}function yo(n){try{if(n!==null&&typeof n=="object"&&vr in n)return n[vr]}catch{}return n}function pc(n,e){return Object.is(yo(n),yo(e))}var Rs,xo,ko,Eo;function bc(){if(Rs===void 0){Rs=window,xo=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,r=Text.prototype;ko=Rr(e,"firstChild").get,Eo=Rr(e,"nextSibling").get,Wl(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Wl(r)&&(r.__t=void 0)}}function Cr(n=""){return document.createTextNode(n)}function Ut(n){return ko.call(n)}function Mn(n){return Eo.call(n)}function X(n,e){return Ut(n)}function K(n,e=!1){{var r=Ut(n);return r instanceof Comment&&r.data===""?Mn(r):r}}function R(n,e=1,r=!1){let s=n;for(;e--;)s=Mn(s);return s}function wc(n){n.textContent=""}function So(){return!1}function Ao(n,e,r){return document.createElementNS(e??to,n,void 0)}let Co=!1;function _c(){Co||(Co=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function kn(n){var e=Ue,r=Xe;Gt(null),mr(null);try{return n()}finally{Gt(e),mr(r)}}function No(n,e,r,s=r){n.addEventListener(e,()=>kn(r));const l=n.__on_r;l?n.__on_r=()=>{l(),s(!0)}:n.__on_r=()=>s(!0),_c()}function To(n){Xe===null&&(Ue===null&&Ci(),Ai()),Ir&&Si()}function yc(n,e){var r=e.last;r===null?e.last=e.first=n:(r.next=n,n.prev=r,e.last=n)}function hr(n,e,r){var s=Xe;s!==null&&(s.f&It)!==0&&(n|=It);var l={ctx:nt,deps:null,nodes:null,f:n|xt|Wt,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{En(l)}catch(c){throw qt(l),c}else e!==null&&nr(l);var o=l;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&wn)===0&&(o=o.first,(n&dr)!==0&&(n&yr)!==0&&o!==null&&(o.f|=yr)),o!==null&&(o.parent=s,s!==null&&yc(o,s),Ue!==null&&(Ue.f&yt)!==0&&(n&Gr)===0)){var a=Ue;(a.effects??=[]).push(o)}return l}function qs(){return Ue!==null&&!sr}function Fs(n){const e=hr(Pn,null,!1);return ft(e,gt),e.teardown=n,e}function pe(n){To();var e=Xe.f,r=!Ue&&(e&er)!==0&&(e&qr)===0;if(r){var s=nt;(s.e??=[]).push(n)}else return Po(n)}function Po(n){return hr(Tn|Jl,n,!1)}function xc(n){return To(),hr(Pn|Jl,n,!0)}function kc(n){kr.ensure();const e=hr(Gr|wn,n,!0);return(r={})=>new Promise(s=>{r.outro?en(e,()=>{qt(e),s(void 0)}):(qt(e),s(void 0))})}function zs(n){return hr(Tn,n,!1)}function Ec(n){return hr(As|wn,n,!0)}function os(n,e=0){return hr(Pn|e,n,!0)}function oe(n,e=[],r=[],s=[]){uc(s,e,r,l=>{hr(Pn,()=>n(...l.map(t)),!0)})}function $r(n,e=0){var r=hr(dr|e,n,!0);return r}function Xt(n){return hr(er|wn,n,!0)}function jo(n){var e=n.teardown;if(e!==null){const r=Ir,s=Ue;zo(!0),Gt(null);try{e.call(null)}finally{zo(r),Gt(s)}}}function Os(n,e=!1){var r=n.first;for(n.first=n.last=null;r!==null;){const l=r.ac;l!==null&&kn(()=>{l.abort(Jr)});var s=r.next;(r.f&Gr)!==0?r.parent=null:qt(r,e),r=s}}function Sc(n){for(var e=n.first;e!==null;){var r=e.next;(e.f&er)===0&&qt(e),e=r}}function qt(n,e=!0){var r=!1;(e||(n.f&Kl)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(Lo(n.nodes.start,n.nodes.end),r=!0),Os(n,e&&!r),qn(n,0),ft(n,_r);var s=n.nodes&&n.nodes.t;if(s!==null)for(const o of s)o.stop();jo(n);var l=n.parent;l!==null&&l.first!==null&&Mo(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function Lo(n,e){for(;n!==null;){var r=n===e?null:Mn(n);n.remove(),n=r}}function Mo(n){var e=n.parent,r=n.prev,s=n.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===n&&(e.first=s),e.last===n&&(e.last=r))}function en(n,e,r=!0){var s=[];Ro(n,s,!0);var l=()=>{r&&qt(n),e&&e()},o=s.length;if(o>0){var a=()=>--o||l();for(var c of s)c.out(a)}else l()}function Ro(n,e,r){if((n.f&It)===0){n.f^=It;var s=n.nodes&&n.nodes.t;if(s!==null)for(const c of s)(c.is_global||r)&&e.push(c);for(var l=n.first;l!==null;){var o=l.next,a=(l.f&yr)!==0||(l.f&er)!==0&&(n.f&dr)!==0;Ro(l,e,a?r:!1),l=o}}}function Is(n){qo(n,!0)}function qo(n,e){if((n.f&It)!==0){n.f^=It,(n.f&gt)===0&&(ft(n,xt),nr(n));for(var r=n.first;r!==null;){var s=r.next,l=(r.f&yr)!==0||(r.f&er)!==0;qo(r,l?e:!1),r=s}var o=n.nodes&&n.nodes.t;if(o!==null)for(const a of o)(a.is_global||e)&&a.in()}}function Fo(n,e){if(n.nodes)for(var r=n.nodes.start,s=n.nodes.end;r!==null;){var l=r===s?null:Mn(r);e.append(r),r=l}}let as=!1,Ir=!1;function zo(n){Ir=n}let Ue=null,sr=!1;function Gt(n){Ue=n}let Xe=null;function mr(n){Xe=n}let Kt=null;function Oo(n){Ue!==null&&(Kt===null?Kt=[n]:Kt.push(n))}let Ft=null,Bt=0,Jt=null;function Ac(n){Jt=n}let Io=1,tn=0,rn=tn;function Vo(n){rn=n}function Bo(){return++Io}function Rn(n){var e=n.f;if((e&xt)!==0)return!0;if(e&yt&&(n.f&=~Kr),(e&tr)!==0){for(var r=n.deps,s=r.length,l=0;l<s;l++){var o=r[l];if(Rn(o)&&po(o),o.wv>n.wv)return!0}(e&Wt)!==0&&rr===null&&ft(n,gt)}return!1}function Do(n,e,r=!0){var s=n.reactions;if(s!==null&&!(Kt!==null&&pn.call(Kt,n)))for(var l=0;l<s.length;l++){var o=s[l];(o.f&yt)!==0?Do(o,e,!1):e===o&&(r?ft(o,xt):(o.f&gt)!==0&&ft(o,tr),nr(o))}}function Yo(n){var e=Ft,r=Bt,s=Jt,l=Ue,o=Kt,a=nt,c=sr,u=rn,f=n.f;Ft=null,Bt=0,Jt=null,Ue=(f&(er|Gr))===0?n:null,Kt=null,yn(n.ctx),sr=!1,rn=++tn,n.ac!==null&&(kn(()=>{n.ac.abort(Jr)}),n.ac=null);try{n.f|=Ss;var d=n.fn,v=d();n.f|=qr;var g=n.deps,m=et?.is_fork;if(Ft!==null){var w;if(m||qn(n,Bt),g!==null&&Bt>0)for(g.length=Bt+Ft.length,w=0;w<Ft.length;w++)g[Bt+w]=Ft[w];else n.deps=g=Ft;if(qs()&&(n.f&Wt)!==0)for(w=Bt;w<g.length;w++)(g[w].reactions??=[]).push(n)}else!m&&g!==null&&Bt<g.length&&(qn(n,Bt),g.length=Bt);if(Zr()&&Jt!==null&&!sr&&g!==null&&(n.f&(yt|tr|xt))===0)for(w=0;w<Jt.length;w++)Do(Jt[w],n);if(l!==null&&l!==n){if(tn++,l.deps!==null)for(let p=0;p<r;p+=1)l.deps[p].rv=tn;if(e!==null)for(const p of e)p.rv=tn;Jt!==null&&(s===null?s=Jt:s.push(...Jt))}return(n.f&Fr)!==0&&(n.f^=Fr),v}catch(p){return oo(p)}finally{n.f^=Ss,Ft=e,Bt=r,Jt=s,Ue=l,Kt=o,yn(a),sr=c,rn=u}}function Cc(n,e){let r=e.reactions;if(r!==null){var s=gi.call(r,n);if(s!==-1){var l=r.length-1;l===0?r=e.reactions=null:(r[s]=r[l],r.pop())}}if(r===null&&(e.f&yt)!==0&&(Ft===null||!pn.call(Ft,e))){var o=e;(o.f&Wt)!==0&&(o.f^=Wt,o.f&=~Kr),Cs(o),mc(o),qn(o,0)}}function qn(n,e){var r=n.deps;if(r!==null)for(var s=e;s<r.length;s++)Cc(n,r[s])}function En(n){var e=n.f;if((e&_r)===0){ft(n,gt);var r=Xe,s=as;Xe=n,as=!0;try{(e&(dr|Xl))!==0?Sc(n):Os(n),jo(n);var l=Yo(n);n.teardown=typeof l=="function"?l:null,n.wv=Io;var o;ys&&Zi&&(n.f&xt)!==0&&n.deps}finally{as=s,Xe=r}}}async function Nc(){await Promise.resolve(),co()}function t(n){var e=n.f,r=(e&yt)!==0;if(Ue!==null&&!sr){var s=Xe!==null&&(Xe.f&_r)!==0;if(!s&&(Kt===null||!pn.call(Kt,n))){var l=Ue.deps;if((Ue.f&Ss)!==0)n.rv<tn&&(n.rv=tn,Ft===null&&l!==null&&l[Bt]===n?Bt++:Ft===null?Ft=[n]:Ft.push(n));else{(Ue.deps??=[]).push(n);var o=n.reactions;o===null?n.reactions=[Ue]:pn.call(o,Ue)||o.push(Ue)}}}if(Ir&&Or.has(n))return Or.get(n);if(r){var a=n;if(Ir){var c=a.v;return((a.f&gt)===0&&a.reactions!==null||Wo(a))&&(c=js(a)),Or.set(a,c),c}var u=(a.f&Wt)===0&&!sr&&Ue!==null&&(as||(Ue.f&Wt)!==0),f=(a.f&qr)===0;Rn(a)&&(u&&(a.f|=Wt),po(a)),u&&!f&&(bo(a),Ho(a))}if(rr?.has(n))return rr.get(n);if((n.f&Fr)!==0)throw n.v;return n.v}function Ho(n){if(n.f|=Wt,n.deps!==null)for(const e of n.deps)(e.reactions??=[]).push(n),(e.f&yt)!==0&&(e.f&Wt)===0&&(bo(e),Ho(e))}function Wo(n){if(n.v===pt)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Or.has(e)||(e.f&yt)!==0&&Wo(e))return!0;return!1}function lr(n){var e=sr;try{return sr=!0,n()}finally{sr=e}}function Tc(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(vr in n)Vs(n);else if(!Array.isArray(n))for(let e in n){const r=n[e];typeof r=="object"&&r&&vr in r&&Vs(r)}}}function Vs(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let s in n)try{Vs(n[s],e)}catch{}const r=ts(n);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=Yl(r);for(let l in s){const o=s[l].get;if(o)try{o.call(n)}catch{}}}}}const Pc=["touchstart","touchmove"];function jc(n){return Pc.includes(n)}const Fn=Symbol("events"),Uo=new Set,Bs=new Set;function Lc(n,e,r,s={}){function l(o){if(s.capture||Ds.call(e,o),!o.cancelBubble)return kn(()=>r?.call(this,o))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Vt(()=>{e.addEventListener(n,l,s)}):e.addEventListener(n,l,s),l}function nn(n,e,r,s,l){var o={capture:s,passive:l},a=Lc(n,e,r,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Fs(()=>{e.removeEventListener(n,a,o)})}function Ne(n,e,r){(e[Fn]??={})[n]=r}function st(n){for(var e=0;e<n.length;e++)Uo.add(n[e]);for(var r of Bs)r(n)}let Xo=null;function Ds(n){var e=this,r=e.ownerDocument,s=n.type,l=n.composedPath?.()||[],o=l[0]||n.target;Xo=n;var a=0,c=Xo===n&&n[Fn];if(c){var u=l.indexOf(c);if(u!==-1&&(e===document||e===window)){n[Fn]=e;return}var f=l.indexOf(e);if(f===-1)return;u<=f&&(a=u)}if(o=l[a]||n.target,o!==e){pi(n,"currentTarget",{configurable:!0,get(){return o||r}});var d=Ue,v=Xe;Gt(null),mr(null);try{for(var g,m=[];o!==null;){var w=o.assignedSlot||o.parentNode||o.host||null;try{var p=o[Fn]?.[s];p!=null&&(!o.disabled||n.target===o)&&p.call(o,n)}catch(b){g?m.push(b):g=b}if(n.cancelBubble||w===e||w===null)break;o=w}if(g){for(let b of m)queueMicrotask(()=>{throw b});throw g}}finally{n[Fn]=e,delete n.currentTarget,Gt(d),mr(v)}}}const Mc=globalThis?.window?.trustedTypes&&globalThis.window.trustedTypes.createPolicy("svelte-trusted-html",{createHTML:n=>n});function Rc(n){return Mc?.createHTML(n)??n}function Go(n){var e=Ao("template");return e.innerHTML=Rc(n.replaceAll("<!>","<!---->")),e.content}function sn(n,e){var r=Xe;r.nodes===null&&(r.nodes={start:n,end:e,a:null,t:null})}function U(n,e){var r=(e&eo)!==0,s=(e&Ui)!==0,l,o=!n.startsWith("<!>");return()=>{l===void 0&&(l=Go(o?n:"<!>"+n),r||(l=Ut(l)));var a=s||xo?document.importNode(l,!0):l.cloneNode(!0);if(r){var c=Ut(a),u=a.lastChild;sn(c,u)}else sn(a,a);return a}}function qc(n,e,r="svg"){var s=!n.startsWith("<!>"),l=(e&eo)!==0,o=`<${r}>${s?n:"<!>"+n}</${r}>`,a;return()=>{if(!a){var c=Go(o),u=Ut(c);if(l)for(a=document.createDocumentFragment();Ut(u);)a.appendChild(Ut(u));else a=Ut(u)}var f=a.cloneNode(!0);if(l){var d=Ut(f),v=f.lastChild;sn(d,v)}else sn(f,f);return f}}function je(n,e){return qc(n,e,"svg")}function Fc(n=""){{var e=Cr(n+"");return sn(e,e),e}}function Ae(){var n=document.createDocumentFragment(),e=document.createComment(""),r=Cr();return n.append(e,r),sn(e,r),n}function C(n,e){n!==null&&n.before(e)}let Ys=!0;function Te(n,e){var r=e==null?"":typeof e=="object"?`${e}`:e;r!==(n.__t??=n.nodeValue)&&(n.__t=r,n.nodeValue=`${r}`)}function zc(n,e){return Oc(n,e)}const is=new Map;function Oc(n,{target:e,anchor:r,props:s={},events:l,context:o,intro:a=!0,transformError:c}){bc();var u=void 0,f=kc(()=>{var d=r??e.appendChild(Cr());ic(d,{pending:()=>{}},m=>{_e({});var w=nt;o&&(w.c=o),l&&(s.$$events=l),Ys=a,u=n(m,s)||{},Ys=!0,ye()},c);var v=new Set,g=m=>{for(var w=0;w<m.length;w++){var p=m[w];if(!v.has(p)){v.add(p);var b=jc(p);for(const k of[e,document]){var _=is.get(k);_===void 0&&(_=new Map,is.set(k,_));var S=_.get(p);S===void 0?(k.addEventListener(p,Ds,{passive:b}),_.set(p,1)):_.set(p,S+1)}}}};return g(es(Uo)),Bs.add(g),()=>{for(var m of v)for(const b of[e,document]){var w=is.get(b),p=w.get(m);--p==0?(b.removeEventListener(m,Ds),w.delete(m),w.size===0&&is.delete(b)):w.set(m,p)}Bs.delete(g),d!==r&&d.parentNode?.removeChild(d)}});return Ic.set(u,f),u}let Ic=new WeakMap;class zn{anchor;#e=new Map;#s=new Map;#t=new Map;#l=new Set;#r=!0;constructor(e,r=!0){this.anchor=e,this.#r=r}#a=()=>{var e=et;if(this.#e.has(e)){var r=this.#e.get(e),s=this.#s.get(r);if(s)Is(s),this.#l.delete(r);else{var l=this.#t.get(r);l&&(this.#s.set(r,l.effect),this.#t.delete(r),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[o,a]of this.#e){if(this.#e.delete(o),o===e)break;const c=this.#t.get(a);c&&(qt(c.effect),this.#t.delete(a))}for(const[o,a]of this.#s){if(o===r||this.#l.has(o))continue;const c=()=>{if(Array.from(this.#e.values()).includes(o)){var f=document.createDocumentFragment();Fo(a,f),f.append(Cr()),this.#t.set(o,{effect:a,fragment:f})}else qt(a);this.#l.delete(o),this.#s.delete(o)};this.#r||!s?(this.#l.add(o),en(a,c,!1)):c()}}};#n=e=>{this.#e.delete(e);const r=Array.from(this.#e.values());for(const[s,l]of this.#t)r.includes(s)||(qt(l.effect),this.#t.delete(s))};ensure(e,r){var s=et,l=So();if(r&&!this.#s.has(e)&&!this.#t.has(e))if(l){var o=document.createDocumentFragment(),a=Cr();o.append(a),this.#t.set(e,{effect:Xt(()=>r(a)),fragment:o})}else this.#s.set(e,Xt(()=>r(this.anchor)));if(this.#e.set(s,e),l){for(const[c,u]of this.#s)c===e?s.unskip_effect(u):s.skip_effect(u);for(const[c,u]of this.#t)c===e?s.unskip_effect(u.effect):s.skip_effect(u.effect);s.oncommit(this.#a),s.ondiscard(this.#n)}else this.#a()}}const Vc=0,Ko=1,Bc=2;function Hs(n,e,r,s,l){var o=Zr(),a=pt,c=o?Sr(a):Ms(a,!1,!1),u=o?Sr(a):Ms(a,!1,!1),f=new zn(n);$r(()=>{var d=e(),v=!1;if(wi(d)){var g=go(),m=!1;const w=p=>{if(!v){m=!0,g(!1),kr.ensure();try{p()}finally{ls(!1),xn||co()}}};d.then(p=>{w(()=>{Ar(c,p),f.ensure(Ko,s&&(b=>s(b,c)))})},p=>{w(()=>{if(Ar(u,p),f.ensure(Bc,l&&(b=>l(b,u))),!l)throw u.v})}),Vt(()=>{m||w(()=>{f.ensure(Vc,r)})})}else Ar(c,d),f.ensure(Ko,s);return()=>{v=!0}})}function Y(n,e,r=!1){var s=new zn(n),l=r?yr:0;function o(a,c){s.ensure(a,c)}$r(()=>{var a=!1;e((c,u=0)=>{a=!0,o(u,c)}),a||o(!1,null)},l)}const Dc=Symbol("NaN");function ln(n,e,r){var s=new zn(n),l=!Zr();$r(()=>{var o=e();o!==o&&(o=Dc),l&&o!==null&&typeof o=="object"&&(o={}),s.ensure(o,r)})}function We(n,e){return e}function Yc(n,e,r){for(var s=[],l=e.length,o,a=e.length,c=0;c<l;c++){let v=e[c];en(v,()=>{if(o){if(o.pending.delete(v),o.done.add(v),o.pending.size===0){var g=n.outrogroups;Ws(es(o.done)),g.delete(o),g.size===0&&(n.outrogroups=null)}}else a-=1},!1)}if(a===0){var u=s.length===0&&r!==null;if(u){var f=r,d=f.parentNode;wc(d),d.append(f),n.items.clear()}Ws(e,!u)}else o={pending:new Set(e),done:new Set},(n.outrogroups??=new Set).add(o)}function Ws(n,e=!0){for(var r=0;r<n.length;r++)qt(n[r],e)}var Jo;function Ve(n,e,r,s,l,o=null){var a=n,c=new Map,u=(e&$l)!==0;if(u){var f=n;a=f.appendChild(Cr())}var d=null,v=Ps(()=>{var _=r();return xs(_)?_:_==null?[]:es(_)}),g,m=!0;function w(){b.fallback=d,Hc(b,g,a,e,s),d!==null&&(g.length===0?(d.f&xr)===0?Is(d):(d.f^=xr,In(d,null,a)):en(d,()=>{d=null}))}var p=$r(()=>{g=t(v);for(var _=g.length,S=new Set,k=et,A=So(),N=0;N<_;N+=1){var M=g[N],T=s(M,N),P=m?null:c.get(T);P?(P.v&&Ar(P.v,M),P.i&&Ar(P.i,N),A&&k.unskip_effect(P.e)):(P=Wc(c,m?a:Jo??=Cr(),M,T,N,l,e,r),m||(P.e.f|=xr),c.set(T,P)),S.add(T)}if(_===0&&o&&!d&&(m?d=Xt(()=>o(a)):(d=Xt(()=>o(Jo??=Cr())),d.f|=xr)),_>S.size&&Ei(),!m)if(A){for(const[L,E]of c)S.has(L)||k.skip_effect(E.e);k.oncommit(w),k.ondiscard(()=>{})}else w();t(v)}),b={effect:p,items:c,outrogroups:null,fallback:d};m=!1}function On(n){for(;n!==null&&(n.f&er)===0;)n=n.next;return n}function Hc(n,e,r,s,l){var o=(s&Fi)!==0,a=e.length,c=n.items,u=On(n.effect.first),f,d=null,v,g=[],m=[],w,p,b,_;if(o)for(_=0;_<a;_+=1)w=e[_],p=l(w,_),b=c.get(p).e,(b.f&xr)===0&&(b.nodes?.a?.measure(),(v??=new Set).add(b));for(_=0;_<a;_+=1){if(w=e[_],p=l(w,_),b=c.get(p).e,n.outrogroups!==null)for(const E of n.outrogroups)E.pending.delete(b),E.done.delete(b);if((b.f&xr)!==0)if(b.f^=xr,b===u)In(b,null,r);else{var S=d?d.next:u;b===n.effect.last&&(n.effect.last=b.prev),b.prev&&(b.prev.next=b.next),b.next&&(b.next.prev=b.prev),Vr(n,d,b),Vr(n,b,S),In(b,S,r),d=b,g=[],m=[],u=On(d.next);continue}if((b.f&It)!==0&&(Is(b),o&&(b.nodes?.a?.unfix(),(v??=new Set).delete(b))),b!==u){if(f!==void 0&&f.has(b)){if(g.length<m.length){var k=m[0],A;d=k.prev;var N=g[0],M=g[g.length-1];for(A=0;A<g.length;A+=1)In(g[A],k,r);for(A=0;A<m.length;A+=1)f.delete(m[A]);Vr(n,N.prev,M.next),Vr(n,d,N),Vr(n,M,k),u=k,d=M,_-=1,g=[],m=[]}else f.delete(b),In(b,u,r),Vr(n,b.prev,b.next),Vr(n,b,d===null?n.effect.first:d.next),Vr(n,d,b),d=b;continue}for(g=[],m=[];u!==null&&u!==b;)(f??=new Set).add(u),m.push(u),u=On(u.next);if(u===null)continue}(b.f&xr)===0&&g.push(b),d=b,u=On(b.next)}if(n.outrogroups!==null){for(const E of n.outrogroups)E.pending.size===0&&(Ws(es(E.done)),n.outrogroups?.delete(E));n.outrogroups.size===0&&(n.outrogroups=null)}if(u!==null||f!==void 0){var T=[];if(f!==void 0)for(b of f)(b.f&It)===0&&T.push(b);for(;u!==null;)(u.f&It)===0&&u!==n.fallback&&T.push(u),u=On(u.next);var P=T.length;if(P>0){var L=(s&$l)!==0&&a===0?r:null;if(o){for(_=0;_<P;_+=1)T[_].nodes?.a?.measure();for(_=0;_<P;_+=1)T[_].nodes?.a?.fix()}Yc(n,T,L)}}o&&Vt(()=>{if(v!==void 0)for(b of v)b.nodes?.a?.apply()})}function Wc(n,e,r,s,l,o,a,c){var u=(a&Ri)!==0?(a&zi)===0?Ms(r,!1,!1):Sr(r):null,f=(a&qi)!==0?Sr(l):null;return{v:u,i:f,e:Xt(()=>(o(e,u??r,f??l,c),()=>{n.delete(s)}))}}function In(n,e,r){if(n.nodes)for(var s=n.nodes.start,l=n.nodes.end,o=e&&(e.f&xr)===0?e.nodes.start:r;s!==null;){var a=Mn(s);if(o.before(s),s===l)return;s=a}}function Vr(n,e,r){e===null?n.effect.first=r:e.next=r,r===null?n.effect.last=e:r.prev=e}function bt(n,e,r=!1,s=!1,l=!1){var o=n,a="";oe(()=>{var c=Xe;if(a!==(a=e()??"")&&(c.nodes!==null&&(Lo(c.nodes.start,c.nodes.end),c.nodes=null),a!=="")){var u=r?Xi:s?Gi:void 0,f=Ao(r?"svg":s?"math":"template",u);f.innerHTML=a;var d=r||s?f:f.content;if(sn(Ut(d),d.lastChild),r||s)for(;Ut(d);)o.before(Ut(d));else o.before(d)}})}function gr(n,e,...r){var s=new zn(n);$r(()=>{const l=e()??null;s.ensure(l,l&&(o=>l(o,...r)))},yr)}function Vn(n,e,r){var s=new zn(n);$r(()=>{var l=e()??null;s.ensure(l,l&&(o=>r(o,l)))},yr)}const Uc=()=>performance.now(),Nr={tick:n=>requestAnimationFrame(n),now:()=>Uc(),tasks:new Set};function Zo(){const n=Nr.now();Nr.tasks.forEach(e=>{e.c(n)||(Nr.tasks.delete(e),e.f())}),Nr.tasks.size!==0&&Nr.tick(Zo)}function Xc(n){let e;return Nr.tasks.size===0&&Nr.tick(Zo),{promise:new Promise(r=>{Nr.tasks.add(e={c:n,f:r})}),abort(){Nr.tasks.delete(e)}}}function cs(n,e){kn(()=>{n.dispatchEvent(new CustomEvent(e))})}function Gc(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Qo(n){const e={},r=n.split(";");for(const s of r){const[l,o]=s.split(":");if(!l||o===void 0)break;const a=Gc(l.trim());e[a]=o.trim()}return e}const Kc=n=>n;function $o(n,e,r,s){var l=(n&Yi)!==0,o=(n&Hi)!==0,a=l&&o,c=(n&Wi)!==0,u=a?"both":l?"in":"out",f,d=e.inert,v=e.style.overflow,g,m;function w(){return kn(()=>f??=r()(e,s?.()??{},{direction:u}))}var p={is_global:c,in(){if(e.inert=d,!l){m?.abort(),m?.reset?.();return}o||g?.abort(),g=Us(e,w(),m,1,()=>{cs(e,"introend"),g?.abort(),g=f=void 0,e.style.overflow=v})},out(k){if(!o){k?.(),f=void 0;return}e.inert=!0,m=Us(e,w(),g,0,()=>{cs(e,"outroend"),k?.()})},stop:()=>{g?.abort(),m?.abort()}},b=Xe;if((b.nodes.t??=[]).push(p),l&&Ys){var _=c;if(!_){for(var S=b.parent;S&&(S.f&yr)!==0;)for(;(S=S.parent)&&(S.f&dr)===0;);_=!S||(S.f&qr)!==0}_&&zs(()=>{lr(()=>p.in())})}}function Us(n,e,r,s,l){var o=s===1;if(bn(e)){var a,c=!1;return Vt(()=>{if(!c){var b=e({direction:o?"in":"out"});a=Us(n,b,r,s,l)}}),{abort:()=>{c=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r?.deactivate(),!e?.duration&&!e?.delay)return cs(n,o?"introstart":"outrostart"),l(),{abort:it,deactivate:it,reset:it,t:()=>s};const{delay:u=0,css:f,tick:d,easing:v=Kc}=e;var g=[];if(o&&r===void 0&&(d&&d(0,1),f)){var m=Qo(f(0,1));g.push(m,m)}var w=()=>1-s,p=n.animate(g,{duration:u,fill:"forwards"});return p.onfinish=()=>{p.cancel(),cs(n,o?"introstart":"outrostart");var b=r?.t()??1-s;r?.abort();var _=s-b,S=e.duration*Math.abs(_),k=[];if(S>0){var A=!1;if(f)for(var N=Math.ceil(S/16.666666666666668),M=0;M<=N;M+=1){var T=b+_*v(M/N),P=Qo(f(T,1-T));k.push(P),A||=P.overflow==="hidden"}A&&(n.style.overflow="hidden"),w=()=>{var L=p.currentTime;return b+_*v(L/S)},d&&Xc(()=>{if(p.playState!=="running")return!1;var L=w();return d(L,1-L),!0})}p=n.animate(k,{duration:S,fill:"forwards"}),p.onfinish=()=>{w=()=>s,d?.(s,1-s),l()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=it)},deactivate:()=>{l=it},reset:()=>{s===0&&d?.(1,0)},t:()=>w()}}function ea(n){var e,r,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var l=n.length;for(e=0;e<l;e++)n[e]&&(r=ea(n[e]))&&(s&&(s+=" "),s+=r)}else for(r in n)n[r]&&(s&&(s+=" "),s+=r);return s}function Jc(){for(var n,e,r=0,s="",l=arguments.length;r<l;r++)(n=arguments[r])&&(e=ea(n))&&(s&&(s+=" "),s+=e);return s}function Zc(n){return typeof n=="object"?Jc(n):n??""}const ta=[...`
\r\f \v\uFEFF`];function Qc(n,e,r){var s=n==null?"":""+n;if(e&&(s=s?s+" "+e:e),r){for(var l of Object.keys(r))if(r[l])s=s?s+" "+l:l;else if(s.length)for(var o=l.length,a=0;(a=s.indexOf(l,a))>=0;){var c=a+o;(a===0||ta.includes(s[a-1]))&&(c===s.length||ta.includes(s[c]))?s=(a===0?"":s.substring(0,a))+s.substring(c+1):a=c}}return s===""?null:s}function $c(n,e){return n==null?null:String(n)}function dt(n,e,r,s,l,o){var a=n.__className;if(a!==r||a===void 0){var c=Qc(r,s,o);c==null?n.removeAttribute("class"):e?n.className=c:n.setAttribute("class",c),n.__className=r}else if(o&&l!==o)for(var u in o){var f=!!o[u];(l==null||f!==!!l[u])&&n.classList.toggle(u,f)}return o}function ct(n,e,r,s){var l=n.__style;if(l!==e){var o=$c(e);o==null?n.removeAttribute("style"):n.style.cssText=o,n.__style=e}return s}const eu=Symbol("is custom element"),tu=Symbol("is html");function B(n,e,r,s){var l=ru(n);l[e]!==(l[e]=r)&&(e==="loading"&&(n[xi]=r),r==null?n.removeAttribute(e):typeof r!="string"&&nu(n).includes(e)?n[e]=r:n.setAttribute(e,r))}function ru(n){return n.__attributes??={[eu]:n.nodeName.includes("-"),[tu]:n.namespaceURI===to}}var ra=new Map;function nu(n){var e=n.getAttribute("is")||n.nodeName,r=ra.get(e);if(r)return r;ra.set(e,r=[]);for(var s,l=n,o=Element.prototype;o!==l;){s=Yl(l);for(var a in s)s[a].set&&r.push(a);l=ts(l)}return r}function Xs(n,e,r=e){var s=new WeakSet;No(n,"input",async l=>{var o=l?n.defaultValue:n.value;if(o=Ks(n)?Js(o):o,r(o),et!==null&&s.add(et),await Nc(),o!==(o=e())){var a=n.selectionStart,c=n.selectionEnd,u=n.value.length;if(n.value=o??"",c!==null){var f=n.value.length;a===c&&c===u&&f>u?(n.selectionStart=f,n.selectionEnd=f):(n.selectionStart=a,n.selectionEnd=Math.min(c,f))}}}),lr(e)==null&&n.value&&(r(Ks(n)?Js(n.value):n.value),et!==null&&s.add(et)),os(()=>{var l=e();if(n===document.activeElement){var o=Ns??et;if(s.has(o))return}Ks(n)&&l===Js(n.value)||n.type==="date"&&!l&&!n.value||l!==n.value&&(n.value=l??"")})}const Gs=new Set;function su(n,e,r,s,l=s){var o=r.getAttribute("type")==="checkbox",a=n;if(e!==null)for(var c of e)a=a[c]??=[];a.push(r),No(r,"change",()=>{var u=r.__value;o&&(u=lu(a,u,r.checked)),l(u)},()=>l(o?[]:null)),os(()=>{var u=s();o?(u=u||[],r.checked=u.includes(r.__value)):r.checked=pc(r.__value,u)}),Fs(()=>{var u=a.indexOf(r);u!==-1&&a.splice(u,1)}),Gs.has(a)||(Gs.add(a),Vt(()=>{a.sort((u,f)=>u.compareDocumentPosition(f)===4?-1:1),Gs.delete(a)})),Vt(()=>{})}function lu(n,e,r){for(var s=new Set,l=0;l<n.length;l+=1)n[l].checked&&s.add(n[l].__value);return r||s.delete(e),Array.from(s)}function Ks(n){var e=n.type;return e==="number"||e==="range"}function Js(n){return n===""?null:+n}class Zs{#e=new WeakMap;#s;#t;static entries=new WeakMap;constructor(e){this.#t=e}observe(e,r){var s=this.#e.get(e)||new Set;return s.add(r),this.#e.set(e,s),this.#l().observe(e,this.#t),()=>{var l=this.#e.get(e);l.delete(r),l.size===0&&(this.#e.delete(e),this.#s.unobserve(e))}}#l(){return this.#s??(this.#s=new ResizeObserver(e=>{for(var r of e){Zs.entries.set(r.target,r);for(var s of this.#e.get(r.target)||[])s(r)}}))}}var ou=new Zs({box:"border-box"});function na(n,e,r){var s=ou.observe(n,()=>r(n[e]));zs(()=>(lr(()=>r(n[e])),s))}function sa(n,e){return n===e||n?.[vr]===e}function on(n={},e,r,s){return zs(()=>{var l,o;return os(()=>{l=o,o=[],lr(()=>{n!==r(...o)&&(e(n,...o),l&&sa(r(...l),n)&&e(null,...l))})}),()=>{Vt(()=>{o&&sa(r(...o),n)&&e(null,...o)})}}),n}function au(n=!1){const e=nt,r=e.l.u;if(!r)return;let s=()=>Tc(e.s);if(n){let l=0,o={};const a=jn(()=>{let c=!1;const u=e.s;for(const f in u)u[f]!==o[f]&&(o[f]=u[f],c=!0);return c&&l++,l});s=()=>t(a)}r.b.length&&xc(()=>{la(e,s),ks(r.b)}),pe(()=>{const l=lr(()=>r.m.map(_i));return()=>{for(const o of l)typeof o=="function"&&o()}}),r.a.length&&pe(()=>{la(e,s),ks(r.a)})}function la(n,e){if(n.l.s)for(const r of n.l.s)t(r);e()}let us=!1;function iu(n){var e=us;try{return us=!1,[n(),us]}finally{us=e}}const cu={get(n,e){if(!n.exclude.includes(e))return n.props[e]},set(n,e){return!1},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function an(n,e,r){return new Proxy({props:n,exclude:e},cu)}const uu={get(n,e){let r=n.props.length;for(;r--;){let s=n.props[r];if(bn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(n,e,r){let s=n.props.length;for(;s--;){let l=n.props[s];bn(l)&&(l=l());const o=Rr(l,e);if(o&&o.set)return o.set(r),!0}return!1},getOwnPropertyDescriptor(n,e){let r=n.props.length;for(;r--;){let s=n.props[r];if(bn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=Rr(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(n,e){if(e===vr||e===Zl)return!1;for(let r of n.props)if(bn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(n){const e=[];for(let r of n.props)if(bn(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function Tr(...n){return new Proxy({props:n},uu)}function D(n,e,r,s){var l=!_n||(r&Ii)!==0,o=(r&Bi)!==0,a=(r&Di)!==0,c=s,u=!0,f=()=>(u&&(u=!1,c=a?lr(s):s),c),d;if(o){var v=vr in n||Zl in n;d=Rr(n,e)?.set??(v&&e in n?k=>n[e]=k:void 0)}var g,m=!1;o?[g,m]=iu(()=>n[e]):g=n[e],g===void 0&&s!==void 0&&(g=f(),d&&(l&&Ti(),d(g)));var w;if(l?w=()=>{var k=n[e];return k===void 0?f():(u=!0,k)}:w=()=>{var k=n[e];return k!==void 0&&(c=void 0),k===void 0?c:k},l&&(r&Vi)===0)return w;if(d){var p=n.$$legacy;return(function(k,A){return arguments.length>0?((!l||!A||p||m)&&d(A?w():k),k):w()})}var b=!1,_=((r&Oi)!==0?jn:Ps)(()=>(b=!1,w()));o&&t(_);var S=Xe;return(function(k,A){if(arguments.length>0){const N=A?t(_):l&&o?Re(k):k;return z(_,N),b=!0,c!==void 0&&(c=N),k}return Ir&&b||(S.f&_r)!==0?_.v:t(_)})}function fu(n){nt===null&&Ql(),_n&&nt.l!==null?du(nt).m.push(n):pe(()=>{const e=lr(n);if(typeof e=="function")return e})}function du(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}const vu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(vu),Qi();function Qs(n){return Bn(n,.5)}function hu(n){return Bn(n,.75)-Bn(n,.25)}function Bn(n,e){if(Be(n))return Bn(n.v,e);if(Be(e))return Bn(n,e.v);const r=n.length;if(Array.isArray(e)||(e=[e]),!sl(e[0])||Pr(e)<0||Zt(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(a,c){const u=(r-1)*c+1,f=Math.floor(u),d=Math.ceil(u);return a[f-1]+(a[d-1]-a[f-1])*(u-Math.floor(u))}const l=cl(n),o=e.map(a=>s(l,a));return e.length==1?o[0]:Ge(o)}function $s(n,e){Be(n)&&$s(n.v,e);const r=Br(n);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const s=(r[1]-r[0])/e;return Ce.seq(r[0],r[1],s)}function oa(n){if(Be(n))return oa(n.v);const e=new Ce.valuesConstructor(n.length-1);for(let r=0;r<n.length-1;r++)e[r]=n[r+1]-n[r];return new Ce(e)}function or(n,e){if(Be(n))return or(n.v,e);e===void 0&&(e=.1);const r=Br(n),s=(r[1]-r[0])*e;return[r[0]-s,r[1]+s]}function Br(n){if(Be(n))return Br(n.v);let e=n[0],r=n[0];for(let s=1;s<n.length;s++)n[s]<e&&(e=n[s]),n[s]>r&&(r=n[s]);return[e,r]}function fs(n,e){return Be(n)?fs(n.v,e):Math.sqrt(ds(n,e))}function ds(n,e){if(e===void 0&&(e=!1),Be(n))return ds(n.v);const r=cn(n);let s=0;for(let l=0;l<n.length;l++){const o=n[l]-r;s=s+o*o}return s/(e?n.length:n.length-1)}function cn(n){return Be(n)?cn(n.v):aa(n)/n.length}function aa(n){if(Be(n))return aa(n.v);let e=0;for(let r=0;r<n.length;r++)e=e+n[r];return e}function el(n){if(Be(n))return el(n.v);let e=1;for(let r=0;r<n.length;r++)e=e*n[r];return e}function Pr(n){return Be(n)||ar(n)?n.v[tl(n.v)-1]:n[tl(n)-1]}function tl(n){if(Be(n)||ar(n))return tl(n.v);let e=1,r=n[0];for(let s=2;s<=n.length;s++)n[s-1]<r&&(e=s,r=n[s-1]);return e}function Zt(n){return Be(n)||ar(n)?n.v[rl(n.v)-1]:n[rl(n)-1]}function rl(n){if(Be(n)||ar(n))return rl(n.v);let e=1,r=n[0];for(let s=2;s<=n.length;s++)n[s-1]>r&&(e=s,r=n[s-1]);return e}const nl=30,mu=1e-7,gu=1e-7,pu=100;function bu(n,e,r,s,l){l===void 0&&(l=pu);let o=r,a=s,c=(a-o)/l;for(let u=0;u<l;u++){let f,d;for(let m=0;m<l;m++){f=o+m*c,d=o+(m+1)*c;const w=e(f),p=e(d);if(w<=n&&p>=n)break}const v=(f+d)/2,g=e(v);if(Math.abs(g-n)<mu||(o=f,a=d,c=(a-o)/l,c/a<gu))return v}return(o+a)/2}function ia(n,e=0,r=1){let s=Ce.zeros(n);for(let l=0;l<n;l++)s.v[l]=e+Math.random()*(r-e);return s}function ca(n,e=0,r=1){let s=Ce.zeros(n);for(let l=0;l<n;l++){const o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random();s.v[l]=o*Math.sin(a)*r+e}return s}function vs(n,e=0,r=1){if(Be(n))return n.apply(l=>vs(l,e,r));const s=(n-e)/r;return Math.exp(-.5*s*s)/(Math.sqrt(2*Math.PI)*r)}function Dn(n,e=0,r=1){if(Be(n))return n.apply(l=>Dn(l,e,r));const s=1/(Math.sqrt(2)*r);return .5*(1+_u((n-e)*s))}function jr(n,e=0,r=1){if(Be(n))return n.apply(H=>jr(H,e,r));if(e!==0||r!==1)return jr(n)*r+e;if(n<0||n>1)throw Error('Parameter "p" must be between 0 and 1.');if(n<1e-10)return-1/0;if(n>.9999999999)return 1/0;const s=.425,l=5,o=.180625,a=1.6,c=3.3871327179,u=5.0434271938*10,f=1.5929113202*100,d=5.910937472*10,v=1.7895169469*10,g=7.8757757664*10,m=6.71875636*10,w=1.4234372777,p=2.75681539,b=1.3067284816,_=1.7023821103*.1,S=7.370016425*.1,k=1.2021132975*.1,A=6.657905115,N=3.081226386,M=4.2868294337*.1,T=1.7337203997*.01,P=2.4197894225*.1,L=1.2258202635*.01,E=n-.5;let y;if(Math.abs(E)<=s)return y=o-E*E,E*(((d*y+f)*y+u)*y+c)/(((m*y+g)*y+v)*y+1);y=E<0?n:1-n,y=Math.sqrt(-Math.log(y));let F;return y<=l?(y=y-a,F=(((_*y+b)*y+p)*y+w)/((k*y+S)*y+1)):(y=y-l,F=((T*y+M)*y+N+A)/((L*y+P)*y+1)),E<0?-F:F}function ua(n,e){if(Array.isArray(n))return ua(Ge(n),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const f=u/e,d=Math.pow(f,1/6)-.5*Math.pow(f,1/3)+1/3*Math.pow(f,1/2);return Dn(d,r,l)}function a(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:wu(u/2,e/2)/Yn(e/2)}const c=e>nl?o:a;return Be(n)?n.apply(c):c(n)}function un(n,e){if(Array.isArray(n))return un(Ge(n),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const f=jr(u,r,l),d=Math.pow(Math.sqrt(36*f*f-30*f+13)/4+(3*f-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function a(u){return u===0?0:u===1?Inf:e===0?0:bu(u,d=>ua(d,e),0,nl*10)}const c=e>nl?o:a;return Be(n)?n.apply(c):c(n)}function Yn(n){if(Be(n))return n.apply(Yn);if(n<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(n<.5)return Math.PI/(Math.sin(Math.PI*n)+Yn(1-n));n=n-1;let r=.9999999999998099;for(let l=0;l<e.length;l++)r=r+e[l]/(n+l+1);const s=n+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,n+.5)*Math.exp(-s)*r}function wu(n,e){let l=0;for(let o=0;o<1e4;o++){const a=Math.pow(n,o)/Yn(e+o+1);if(isNaN(a)||a<1e-18)break;l+=a}return Math.pow(n,e)*Yn(e)*Math.exp(-n)*l}function _u(n){const e=n>=0?1:-1;n=Math.abs(n);const r=.254829592,s=-.284496736,l=1.421413741,o=-1.453152027,a=1.061405429,u=1/(1+.3275911*n),f=1-((((a*u+o)*u+l)*u+s)*u+r)*u*Math.exp(-n*n);return e*f}function fa(n){const e=n.nrows,r=n.ncols;if(e<r){const a=fa(n.subset([],De.seq(1,e)));return{Q:a.Q,R:xu(a.Q,n)}}let s=xe.eye(e),l=n.t();for(let a=1;a<=r;a++)for(let c=e;c>=a+1;c--){const u=l.v.subarray((c-2)*r,c*r),f=s.v.subarray((c-2)*e,c*e),d=u.slice(),v=f.slice(),[g,m,w]=yu(d[a-1],d[a-1+r]);for(let p=0;p<r;p++)u[p]=d[p]*g+d[p+r]*m,u[p+r]=d[p]*-m+d[p+r]*g,f[p]=v[p]*g+v[p+e]*m,f[p+e]=v[p]*-m+v[p+e]*g;for(let p=r;p<e;p++)f[p]=v[p]*g+v[p+e]*m,f[p+e]=v[p]*-m+v[p+e]*g}const o=De.seq(1,r);return{Q:e===r?s:s.subset([],o),R:e===r?l.t():l.subset([],o).t()}}function yu(n,e){if(n==0)return[0,1,e];if(Math.abs(n)>Math.abs(e)){const o=e/n,a=Math.sqrt(1+o*o),c=1/a;return[c,o*c,n*a]}const r=n/e,s=Math.sqrt(1+r*r),l=1/s;return[r*l,l,e*s]}function sl(n){return typeof n=="number"}function da(n,e){e===void 0&&(e=n);const r=n.nrows,s=n.ncols,l=e.nrows;e.ncols;const o=r,a=l,c=s,u=new Float64Array(o*a);for(let f=0;f<c;f++){const d=n.v.subarray(f*r,(f+1)*r),v=e.v.subarray(f*l,(f+1)*l);for(let g=0;g<a;g++){const m=u.subarray(g*o,(g+1)*o);for(let w=0;w<o;w++)m[w]+=d[w]*v[g]}}return new xe(u,o,a)}function xu(n,e){if(e===void 0&&(e=n),!zt(n)||!zt(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=n.nrows,s=n.ncols,l=e.nrows,o=e.ncols,a=s,c=o,u=r,f=new Float64Array(a*c);for(let d=0;d<c;d++){const v=e.v.subarray(d*l,(d+1)*l),g=f.subarray(d*a,(d+1)*a);for(let m=0;m<a;m++){const w=n.v.subarray(m*r,(m+1)*r);let p=0;for(let b=0;b<u;b++)p+=w[b]*v[b];g[m]=p}}return new xe(f,a,c)}function ll(...n){if(n.length===1)return n[0];const e=n.reduce((l,o)=>l+o.length,0),r=new n[0].constructor.valuesConstructor(e);let s=0;for(const l of n)r.set(l.v,s),s+=l.length;return new n[0].constructor(r)}function va(n,e,r){if(r===void 0){if(e!==n.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ce(n.v)}if(n.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new xe(n.v,e,r)}function zt(n){return n&&n.constructor===xe}function ku(n,e,r){return new xe(new Float64Array(n),e,r)}class xe{static valuesConstructor=Float64Array;static TOLERANCE=Math.pow(10,-9);constructor(e,r,s){if(!ArrayBuffer.isView(e)||e.constructor!==xe.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return xe.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=xe.eye(e),l=xe.eye(e),o=this.t(),a=o.v[(e-1)*e+(e-1)],c=e-1;for(let u=0;u<e;u++)l.v[c*e+u]=s.v[c*e+u]/a;for(let u=e-2;u>=0;u--){let f=s.getcolumn(u+1);const d=o.getcolref(u+1);for(let v=u+1;v<e;v++){const g=l.getcolumn(v+1);f=f.subtract(g.mult(d[v]))}l.v.set(f.divide(d[u]).v,u*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(el(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=xe.eye(e),o=xe.eye(e),a=this.t(),c=0,u=a.v[0];for(let f=0;f<e;f++)o.v[c*e+f]=l.v[c*e+f]/u;for(let f=1;f<e;f++){let d=l.getcolumn(f+1);const v=a.getcolref(f+1);for(let g=0;g<f;g++){const m=o.getcolumn(g+1);d=d.subtract(m.mult(v[g]))}o.v.set(d.divide(v[f]).v,f*e)}return o.t()}const r=fa(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>xe.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>xe.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let s=0;s<e;s++)r[s]=this.getcolref(s+1)[s];return new Ce(r)}t(){const e=this.nrows,r=this.ncols,s=new xe.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const o=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let a=0;a<this.nrows;a++)s[a*r+l]=o[a]}return new xe(s,r,e)}for(let l=0;l<this.nrows;l++){const o=s.subarray(l*r,(l+1)*r);for(let a=0;a<this.ncols;a++)o[a]=this.v[a*this.nrows+l]}return new xe(s,r,e)}dot(e){if(Be(e))return new xe(il(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(zt(e))return new xe(il(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,s){if(zt(e))return new xe(ol(this.v,e.v,r),this.nrows,this.ncols);if(sl(e))return new xe(al(this.v,e,r),this.nrows,this.ncols);if(!Be(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new xe.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(al(this.getcolref(o+1),e.v[o],r),o*this.nrows);return new xe(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new xe.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(ol(this.getcolref(o+1),e.v,r),o*this.nrows);return new xe(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e,r){if(r===void 0&&(r=2),r==2){const s=this.ncols,l=new xe.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.getcolref(o+1));return new Ce(l)}if(r==1)return this.t().apply(e,2);if(r==0){const s=this.v.length,l=new xe.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.v[o]);return new xe(l,this.nrows,this.ncols)}}replace(e,r,s){typeof r=="number"&&(r=[r]),r.length===0&&(r=De.seq(1,this.nrows)),ar(r)||(r=ir(r)),typeof s=="number"&&(s=[s]),s.length===0&&(s=De.seq(1,this.ncols)),ar(s)||(s=ir(s));const l=r.length,o=s.length;if(Pr(r)<1||Zt(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Pr(s)<1||Zt(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==o)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let a=0;a<s.length;a++){const c=e.getcolref(a+1),u=(s.v[a]-1)*this.nrows;for(let f=0;f<r.length;f++){const d=r.v[f];this.v[u+d-1]=c[f]}}return this}copy(){return new xe(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Ce.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)r[s]=this.getcolref(s+1)[e-1];return new Ce(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ce(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=ir([e])),typeof r=="number"&&(r=ir([r])),Array.isArray(e)&&(e=e.length===0?null:ir(e)),Array.isArray(r)&&(r=r.length===0?null:ir(r)),e!==null&&!ar(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!ar(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Pr(e)<1||Zt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Pr(r)<1||Zt(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const c=r.length,u=this.nrows,f=new xe.valuesConstructor(u*c);for(let d=0;d<r.length;d++)f.set(this.v.slice((r.v[d]-1)*this.nrows,r.v[d]*this.nrows),d*this.nrows);return new xe(f,u,c)}if(r==null)return this.t().subset(r,e).t();const s=e.length,l=r.length,o=new xe.valuesConstructor(s*l);let a=new xe.valuesConstructor(s);for(let c=0;c<l;c++){const u=this.v.subarray((r.v[c]-1)*this.nrows,r.v[c]*this.nrows);for(let f=0;f<s;f++)a[f]=u[e.v[f]-1];o.set(a,c*s)}return new xe(o,s,l)}toString(e){function r(a,c){return" ".repeat(c-a.length)+a}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Zt(this.v))))+e+3;let l="";const o=this.t();for(let a=1;a<=o.ncols;a++)l+=Array.from(o.getcolref(a)).map(c=>r(c.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,r,s,l){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const o=l!=null&&l.length>0,a=s!=null&&s.length>0;if(o&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(a&&s.length!==this.ncols+(o?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const c=this.t();let u=a?s.join(e)+`
`:"";for(let f=1;f<=c.ncols;f++)u=u+(o?l[f-1]+e:"")+c.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,s,l){return va(ca(e*r,s,l),e,r)}static rand(e,r,s,l){return va(ia(e*r,s,l),e,r)}static eye(e,r){r===void 0&&(r=e);const s=new Float64Array(e*r);for(let l=0;l<Math.min(e,r);l++)s[l*e+l]=1;return new xe(s,e,r)}static diagm(e){if(!Be(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,s=new Float64Array(r*r);for(let l=0;l<r;l++)s[l*r+l]=e.v[l];return new xe(s,r,r)}static zeros(e,r){return r===void 0&&(r=e),new xe(new Float64Array(e*r),e,r)}static ones(e,r){return xe.fill(1,e,r)}static fill(e,r,s){s===void 0&&(s=r);const l=new Float64Array(r*s);for(let o=0;o<l.length;o++)l[o]=e;return new xe(l,r,s)}static outer(e,r,s){if(Array.isArray(e)&&(e=Ge(e)),Array.isArray(r)&&(r=Ge(r)),!Be(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Be(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=xe.zeros(e.length,r.length);for(let o=0;o<r.length;o++){const a=r.v[o],c=l.getcolref(o+1);for(let u=0;u<e.length;u++)c[u]=s(e.v[u],a)}return l}static parseCSV(e,r,s,l){function o(b){return b.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}r===void 0&&(r=",");const a=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let c=e.split(/\n/),u=[],f=0;const d=c[0].split(r);(s||s===void 0&&o(d))&&(u=d,f=1),c=c.filter(b=>b.trim().length>1);let v=[],g=0;l&&(g=1);const m=c.length-f,w=d.length-g;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(w<1)throw Error("Data file should contain at least 1 column with values.");const p=xe.zeros(w,m);for(let b=f;b<m+f;b++){const _=c[b].split(r);let S;if(l?(v[b-f]=_[0],S=_.slice(1).map(k=>Number.parseFloat(k.trim().replace(a,".")))):S=_.map(k=>Number.parseFloat(k.trim().replace(a,"."))),S.some(k=>Number.isNaN(k)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(S.length!=w)throw Error("Wrong number of values in row #"+b);p.v.set(new Float64Array(S),(b-f)*w)}return{values:p.t(),header:u,labels:v,sep:r,dec:a}}}function Be(n){return n&&n.constructor===Ce}function Ge(n){return new Ce(new Float64Array(n))}class Ce{static valuesConstructor=Float64Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new De.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=l+1,s=s+1);return new De(r.subarray(0,s))}filter(e){const r=new Ce.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=this.v[l],s=s+1);return new Ce(r.subarray(0,s))}shuffle(){return new Ce(pa(this.v))}sort(e){return new Ce(cl(this.v,e))}sortind(e){return new De(ba(this.v,e))}rep(e){return ma(this,e)}repeach(e){return ga(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=De.seq(1,this.length)),ar(r)||(r=ir(r));const s=r.length;if(Pr(r)<1||Zt(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<r.length;l++){const o=r.v[l];this.v[o-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=ir([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?De.bool2ind(e):ir(e)),!ar(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=Ce.zeros(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new Ce(this.v.slice(e-1,r))}copy(){return new Ce(this.v.slice())}dot(e){return e===void 0&&(e=this),il(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Be(e))return new Ce(ol(this.v,e.v,r));if(sl(e))return new Ce(al(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e){const r=this.v.length,s=Ce.zeros(r);for(let l=0;l<r;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const r=e.reduce((o,a)=>o+(typeof a=="number"?1:a.length),0),s=new Ce.valuesConstructor(r);let l=0;for(const o of e)typeof o=="number"?(s[l]=o,l+=1):(s.set(Be(o)?o.v:new Ce.valuesConstructor(o),l),l+=typeof o=="number"?1:o.length);return new Ce(s)}static seq(e,r,s){return ha(e,r,s,Ce)}static randn(e,r,s){return ca(e,r,s)}static rand(e,r,s){return ia(e,r,s)}static zeros(e){return new Ce(new Ce.valuesConstructor(e))}static ones(e){return Ce.fill(1,e)}static fill(e,r){const s=new Ce.valuesConstructor(r);for(let l=0;l<s.length;l++)s[l]=e;return new Ce(s)}}function ar(n){return n.constructor===De}function ir(n){return new De(new Int32Array(n))}class De{static valuesConstructor=Int32Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new De.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=l+1,s=s+1);return new De(r.subarray(0,s))}filter(e){const r=new De.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=this.v[l],s=s+1);return new De(r.subarray(0,s))}shuffle(){return new De(pa(this.v))}sort(e){return new De(cl(this.v,e))}sortind(e){return new De(ba(this.v,e))}rep(e){return ma(this,e)}repeach(e){return ga(this,e)}subset(e){if(typeof e=="number"&&(e=ir([e])),Array.isArray(e)&&(e=ir(e)),!ar(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=new De.valuesConstructor(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new De(s)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new De(this.v.slice(e-1,r))}static seq(e,r,s){return ha(e,r,s,De)}static ones(e){return De.fill(1,e)}static fill(e,r){const s=new De.valuesConstructor(r);for(let l=0;l<s.length;l++)s[l]=e;return new De(s)}static bool2ind(e){let r=0;const s=new De.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[r]=l+1,r=r+1);return new De(s.subarray(0,r))}}function ha(n,e,r,s){r===void 0&&(r=n<=e?1:-1);const l=Math.floor((e-n)/r)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const o=new s.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=n+a*r;return new s(o)}function ma(n,e){const r=n.length*e,s=new n.constructor.valuesConstructor(r);for(let l=1;l<=e;l++)for(let o=0;o<n.length;o++)s[(l-1)*n.length+o]=n.v[o];return new n.constructor(s)}function ga(n,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=n.length*e,s=new n.constructor.valuesConstructor(r);for(let l=0;l<n.length;l++)for(let o=0;o<e;o++)s[l*e+o]=n.v[l];return new n.constructor(s)}function ol(n,e,r){if(n.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(n.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new n.constructor(n.length);for(let l=0;l<n.length;l++)s[l]=r(n[l],e[l]);return s}function al(n,e,r){const s=new n.constructor(n.length);for(let l=0;l<n.length;l++)s[l]=r(n[l],e);return s}function il(n,e,r,s,l,o){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const a=r,c=o,u=s,f=new n.constructor(a*c);for(let d=0;d<c;d++){const v=e.subarray(d*l,(d+1)*l),g=f.subarray(d*a,(d+1)*a);for(let m=0;m<u;m++){const w=v[m],p=n.subarray(m*r,(m+1)*r);for(let b=0;b<a;b++)g[b]+=p[b]*w}}return f}function pa(n){let e=n.slice(),r=e.length,s,l;for(;r;)l=Math.floor(Math.random()*r--),s=e[r],e[r]=e[l],e[l]=s;return e}function cl(n,e=!1){return e?n.slice().sort((r,s)=>s-r):n.slice().sort((r,s)=>r-s)}function ba(n,e=!1){const r=De.seq(1,n.length).v;return e?r.sort((s,l)=>n[l-1]-n[s-1]):r.sort((s,l)=>n[s-1]-n[l-1])}function Eu(n,e,r){if(!n||!n.class||!n.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=n.ncols,l=n.ncomp;let o,a;switch(e){case"mX":o=2,a=s;break;case"sX":o=2+s,a=s;break;case"loadings":case"xloadings":o=2+2*s+(r-1)*s,a=s;break;case"P":o=2+2*s,a=l*s;break;case"eigenvals":case"xeigenvals":o=2+2*s+s*l,a=l;break;case"cq0":o=2+2*s+s*l+l,a=l;break;case"cNq":o=2+2*s+s*l+2*l,a=l;break;case"rq0":o=2+2*s+s*l+3*l,a=l;break;case"rNq":o=2+2*s+s*l+4*l,a=l;break;case"ch0":o=2+2*s+s*l+5*l,a=l;break;case"cNh":o=2+2*s+s*l+6*l,a=l;break;case"rh0":o=2+2*s+s*l+7*l,a=l;break;case"rNh":o=2+2*s+s*l+8*l,a=l;break;case"cr0":o=2+2*s+s*l+9*l,a=l;break;case"cNr":o=2+2*s+s*l+10*l,a=l;break;case"rr0":o=2+2*s+s*l+11*l,a=l;break;case"rNr":o=2+2*s+s*l+12*l,a=l;break;case"cg0":o=2+2*s+s*l+13*l,a=l;break;case"cNg":o=2+2*s+s*l+14*l,a=l;break;case"rg0":o=2+2*s+s*l+15*l,a=l;break;case"rNg":o=2+2*s+s*l+16*l,a=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return n.v.subarray(o,o+a)}function wa(n,e,r){if(!n||!n.class||!n.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=n.ncols,l=n.nrows,o=n.ncomp;let a,c;switch(e){case"scores":case"xscores":a=(r-1)*l,c=l;break;case"T":a=0,c=l*o;break;case"hdist":a=l*o+(r-1)*l,c=l;break;case"qdist":a=2*l*o+(r-1)*l,c=l;break;case"xcumexpvar":case"cumexpvar":a=3*l*o,c=o;break;case"fdistc":a=3*l*o+o+(r-1)*l,c=l;break;case"fdistr":a=4*l*o+o+(r-1)*l,c=l;break;case"gdist":a=5*l*o+o+(r-1)*s,c=s;break;case"rdist":a=5*l*o+o+s*o+(r-1)*s,c=s;break;case"idistc":a=5*l*o+o+2*s*o+(r-1)*s,c=s;break;case"idistr":a=5*l*o+o+3*s*o+(r-1)*s,c=s;break;case"E":a=5*l*o+o+3*s*o+o*s,c=l*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return n.v.subarray(a,a+c)}function Su(n,e,r,s){return n*r+n*r+n*r+r+n*e*r+n*r+n*r+r+e*r+e*r+e*r+e*r+n*s}function _a(n,e,r){return 3+2*(n+e)+n*r+1*r+4*r+4*r+4*r+n*r+e*r+1*r}function Ct(n,e,r){if(!n||!n.class||!n.class.includes("plsmodel"))throw new Error('plsmodel_get: parameter "m" must be JSON with PLS model.');const s=n.npred,l=n.nresp,o=n.ncomp;let a,c=_a(s,l,o)-s*o-l*o-2*l;switch(e){case"mY":c=3,a=l;break;case"mX":c=3+l,a=s;break;case"sY":c=3+l+s,a=l;break;case"sX":c=3+l+s+l,a=s;break;case"P":c=3+2*(l+s),a=o*s;break;case"loadings":case"xloadings":c=3+2*(l+s)+(r-1)*s,a=s;break;case"eigenvals":case"xeigenvals":c=3+2*(l+s)+o*s,a=o;break;case"cq0":c=3+2*(l+s)+o*s+o,a=o;break;case"cNq":c=3+2*(l+s)+o*s+2*o,a=o;break;case"rq0":c=3+2*(l+s)+o*s+3*o,a=o;break;case"rNq":c=3+2*(l+s)+o*s+4*o,a=o;break;case"ch0":c=3+2*(l+s)+o*s+5*o,a=o;break;case"cNh":c=3+2*(l+s)+o*s+6*o,a=o;break;case"rh0":c=3+2*(l+s)+o*s+7*o,a=o;break;case"rNh":c=3+2*(l+s)+o*s+8*o,a=o;break;case"cz0":c=3+2*(l+s)+o*s+9*o,a=o;break;case"cNz":c=3+2*(l+s)+o*s+10*o,a=o;break;case"rz0":c=3+2*(l+s)+o*s+11*o,a=o;break;case"rNz":c=3+2*(l+s)+o*s+12*o,a=o;break;case"weights":c=3+2*(l+s)+o*s+13*o+(r-1)*s,a=s;break;case"yloadings":c=3+2*(l+s)+o*s+13*o+o*s+(r-1)*l,a=l;break;case"yeigenvals":c=3+2*(l+s)+o*s+13*o+o*s+o*l,a=o;break;default:throw Error("plsmodel_get: wrong outcome name.")}return n.v.subarray(c,c+a)}function kt(n,e,r,s){if(!n||!n.class||!n.class.includes("plsres"))throw new Error('plsres_get: parameter "r" must be JSON with PLS results.');s||(s=1);const l=n.nrows,o=n.ncomp,a=n.nresp,c=n.npred,u=n.nresp_model;let f,d=3*l*o+o;switch(e){case"Yp":d=d+(r-1)*u*l+(s-1)*l,f=l;break;case"yscores":d=d+o*u*l+(r-1)*l,f=l;break;case"zdist":d=d+o*u*l+o*l+(r-1)*l,f=l;break;case"ycumexpvar":d=d+o*u*l+o*l+o*l,f=o;break;case"rmse":d=d+o*u*l+o*l+o*l+o,f=u*o;break;case"r2":d=d+o*u*l+o*l+o*l+o+a*o,f=u*o;break;case"bias":d=d+o*u*l+o*l+o*l+o+2*a*o,f=u*o;break;case"slope":d=d+o*u*l+o*l+o*l+o+3*a*o,f=u*o;break;case"E":d=d+o*u*l+o*l+o*l+o+4*a*o,f=l*c;break;case"T":d=0,f=l*o;break;default:return wa(n,e,r)}return n.v.subarray(d,d+f)}function Au(n,e,r,s,l,o,a,c){if(!zt(e))throw new Error("pls_fit: D must be a matrix.");if(r<1||e.ncols<2+r)throw new Error("pls_fit: training set should have at least 2 predictors and 1 response.");a||(a=[]);const u=a&&Array.isArray(a)?a.length:0;if(!gs(a,0,e.nrows-1))throw new Error('pls_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!gs(c,0,e.ncols-r-1))throw new Error('pls_fit: some indices in "exclvars" array are outside the expected range.');const d=e.nrows-u,v=e.ncols-r-f;if(d<3||v<2)throw new Error("pls_fit: X must have at least 3 rows and 2 predictors.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),s===void 0&&(s=Math.min(d-1,v)),s<1||s>Math.min(d-1,v))throw new Error('pls_fit: the value of "ncomp" does not match the dimension of D.');const g=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);let m=null;if(u>0){const F=new Int32Array(a);m=n._malloc(F.length*F.BYTES_PER_ELEMENT),n.HEAP32.set(F,m/F.BYTES_PER_ELEMENT)}let w=null;if(f>0){const F=new Int32Array(c);w=n._malloc(F.length*F.BYTES_PER_ELEMENT),n.HEAP32.set(F,w/F.BYTES_PER_ELEMENT)}const p=_a(v,r,s),b=Float64Array,_=n._malloc(p*b.BYTES_PER_ELEMENT),S=v*r*s,k=Float64Array,A=n._malloc(S*b.BYTES_PER_ELEMENT),N=n._malloc(S*b.BYTES_PER_ELEMENT),M=n._malloc(S*b.BYTES_PER_ELEMENT);if(n.ccall("plsfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,e.nrows,e.ncols-r,r,s,l,o,_,m,u,w,f,N,A,M])!==1)throw new Error("pls_fit: unexpected error.");const P=n.HEAPF64.slice(_/b.BYTES_PER_ELEMENT,_/b.BYTES_PER_ELEMENT+p),L=n.HEAPF64.slice(N/k.BYTES_PER_ELEMENT,N/k.BYTES_PER_ELEMENT+S),E=n.HEAPF64.slice(A/k.BYTES_PER_ELEMENT,A/k.BYTES_PER_ELEMENT+S),y=n.HEAPF64.slice(M/k.BYTES_PER_ELEMENT,M/k.BYTES_PER_ELEMENT+S);return n._free(g),n._free(_),n._free(N),n._free(A),n._free(M),m&&n._free(m),w&&n._free(w),{class:["plsmodel","pcamodel"],v:P,ncomp:s,nrows:d,npred:v,nresp:r,exclvars:c,center:l,scale:o,coeffs:L,vip:E,sr:y}}function Cu(n,e,r,s,l){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pls_predict: parameter "m" must be JSON with PLS results.');if(!zt(r))throw new Error("pls_predict: D must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!gs(l,0,r.nrows-1))throw new Error('pls_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=r.nrows-o;r.ncols-s===e.npred&&(a=0);const u=r.ncols-a-s;if(c<1)throw new Error("pls_predict: D must have at least 1 row.");if(u!==e.npred)throw new Error("pls_predict: D must have the same number of predictors (without excluded ones) as the training set.");const f=n._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);n.HEAPF64.set(r.v,f/r.v.BYTES_PER_ELEMENT);let d=null;if(o>0){const q=new Int32Array(l);d=n._malloc(q.length*q.BYTES_PER_ELEMENT),n.HEAP32.set(q,d/q.BYTES_PER_ELEMENT)}let v=null;if(a>0){const q=new Int32Array(e.exclvars);v=n._malloc(q.length*q.BYTES_PER_ELEMENT),n.HEAP32.set(q,v/q.BYTES_PER_ELEMENT)}const g=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const m=Su(c,e.nresp,e.ncomp,e.npred),w=Float64Array,p=n._malloc(m*w.BYTES_PER_ELEMENT);if(n.ccall("plspredict_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[f,r.nrows,r.ncols-s,s,g,p,d,o,v,a])!==1)throw new Error("pls_predict: unexpected error.");const _=n.HEAPF64.slice(p/w.BYTES_PER_ELEMENT,p/w.BYTES_PER_ELEMENT+m);n._free(f),n._free(g),n._free(p),d&&n._free(d),v&&n._free(v);const S={class:["plsres","pcares"],v:_,ncomp:e.ncomp,nrows:c,npred:u,nresp:s,nresp_model:e.nresp,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},k=new Array(e.ncomp),A=new Array(e.ncomp),N=new Array(e.ncomp),M=new Array(e.ncomp),T=new Array(e.ncomp),P=new Array(e.ncomp),L=new Array(e.ncomp),E=new Array(e.ncomp),y=new Array(e.ncomp),F=kt(S,"xcumexpvar"),H=kt(S,"ycumexpvar");if(s>0){k[0]=1,T[0]=F[0],M[0]=1-F[0],A[0]=F[0],N[0]=1-F[0],y[0]=H[0],E[0]=1-H[0],P[0]=H[0],L[0]=1-H[0];for(let V=1;V<e.ncomp;V++)k[V]=V+1,T[V]=F[V],M[V]=1-F[V],A[V]=F[V]-F[V-1],N[V]=1-A[V],y[V]=H[V],E[V]=1-H[V],P[V]=H[V]-H[V-1],L[V]=1-P[V];const q=new xe(kt(S,"rmse"),e.nresp,e.ncomp),j=new xe(kt(S,"r2"),e.nresp,e.ncomp),O=new xe(kt(S,"slope"),e.nresp,e.ncomp),G=new xe(kt(S,"bias"),e.nresp,e.ncomp);S.stat={components:k,xresvar:N,xexpvar:A,xcumexpvar:T,xcumresvar:M,yresvar:L,yexpvar:P,ycumexpvar:y,ycumresvar:E,rmse:q.t(),r2:j.t(),slope:O.t(),bias:G.t()}}else S.stat=null;return S}function Nu(n,e,r,s,l,o,a,c,u){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pcvpls: parameter "m" must be JSON with PLS model.');if(!zt(r))throw new Error("pcvpls: D must be a matrix.");if(s<1)throw new Error("pcvpls: D must have at least one response.");u||(u=[]);const f=u&&Array.isArray(u)?u.length:0;if(!gs(u,0,r.nrows-1))throw new Error('pcvpls: some indices in "outliers" array are outside the expected range.');const d=e.exclvars.length,v=r.nrows-f,g=r.ncols-s-d;if(v<3)throw new Error("plspcv: D must have at least 3 rows.");if(g<2)throw new Error("plspcv: D must have at least 2 predictors.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('plspcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('plspcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('plspcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>v)throw new Error('plspcv: the value of "cv_nseg" is too large for the given X.');if(a===0&&(o=v),!Number.isInteger(l)||l<1)throw new Error('plspcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?v-2:v-Math.ceil(v/o)-1,g,e.ncomp);if(l>m)throw new Error('plspcv: the value of "ncomp" is too large.');const w=n._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);n.HEAPF64.set(r.v,w/r.v.BYTES_PER_ELEMENT);let p=null;if(f>0){const y=new Int32Array(u);p=n._malloc(y.length*y.BYTES_PER_ELEMENT),n.HEAP32.set(y,p/y.BYTES_PER_ELEMENT)}let b=null;if(d>0){const y=new Int32Array(e.exclvars);b=n._malloc(y.length*y.BYTES_PER_ELEMENT),n.HEAP32.set(y,b/y.BYTES_PER_ELEMENT)}const _=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,_/e.v.BYTES_PER_ELEMENT);const S=r.v.constructor,k=v*(s+g),A=n._malloc(k*S.BYTES_PER_ELEMENT),N=o*l,M=r.v.constructor,T=n._malloc(N*M.BYTES_PER_ELEMENT);if(n.ccall("pcvpls_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[w,r.nrows,r.ncols-s,s,l,e.center,e.scale,a,o,c,_,A,T,p,f,b,d])!==1)throw new Error("plspcv: unexpected error.");const L=n.HEAPF64.slice(A/S.BYTES_PER_ELEMENT,A/S.BYTES_PER_ELEMENT+k),E=n.HEAPF64.slice(T/M.BYTES_PER_ELEMENT,T/M.BYTES_PER_ELEMENT+N);return n._free(w),n._free(_),n._free(A),n._free(T),p&&n._free(p),b&&n._free(b),[new xe(L,v,s+g),new xe(E,o,l)]}function Tu(n,e){if(e[0]===0){const r=e[1]+2;return 2+n*r+2*n+r}return 3+n}const Dr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(n,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(n,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(n,e)=>2*n,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:Tu,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(n,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(n,e)=>2+3*n+e[0],mp:[5,5]}];function Pu(n){let e="<ul>";for(let r=0;r<n.ml.length;r++){const s=Dr[n.ml[r]].title;e=e+"<li>"+s+" <span>"+n.info[r]+"</span></li>"}return e=e+"</ul>",e}function ya(n,e,r){const s=Dr.findIndex(v=>v.id==="trim");let l=0,o=n.ncols-e,a=0;for(let v=0;v<r.ml.length;v++){if(r.ml[v]!==s){a+=r.mpl_new[v];continue}l=Math.max(l,r.mp_new[a]),o=Math.min(o,r.mp_new[a+1]),a+=r.mpl_new[v]}const c=n.nrows,f=o-l+e,d=xe.zeros(c,f);return a=0,e>0&&(d.v.set(n.v.slice(0,e*c),a),a+=e*c),d.v.set(n.v.slice((e+l)*c,(e+o)*c),a),[l,o,d]}function ju(n,e){if(!n||!e||typeof e!="object"||Object.keys(e).length===0)return n;const r=Dr.findIndex(c=>c.id==="trim");if(e.ml.findIndex(c=>c===r)<0)return n;const[l,o,a]=ya(n.values,n.nresp,e);return n.values=a,n.varlabels=n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varlabels.slice(n.nresp+l,n.nresp+o)):n.varlabels.slice(l,o),n.varindices=n.nresp>0?Dt(0,n.nresp-1).concat(Dt(0,o-l-1)):Dt(0,o-l-1),n.varvalues=n.nresp>0?n.varvalues.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp+l,n.nresp+o)):n.varvalues.slice(l,o),n}function xa(n,e,r,s,l=!0,o=[]){if(!zt(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let a,c;l?(a=e.ncols,c=e.nrows-r):(a=e.nrows,c=e.ncols-r);const u=s.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const f=new Int32Array(u),d=new Int32Array(u),v=new Int32Array(u);let g=0,m=0;for(let F=0;F<s.length;F++){const H=s[F].id,q=s[F].params,j=Dr.findIndex(G=>G.id==H);if(j<0)throw new Error("prep_fit: wrong method name: "+H+".");const O=Dr[j];if(q.length!==O.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+H+".");f[F]=j,d[F]=O.mpl,v[F]=O.get_mpl_new(c,q),g=g+d[F],m=m+v[F]}const w=new Float64Array(g);let p=0;for(let F=0;F<s.length;F++){const H=s[F].id,q=s[F].params;Dr.findIndex(j=>j.id==H),w.set(q,p),p=p+d[F]}const b=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,b/e.v.BYTES_PER_ELEMENT);const _=n._malloc(f.length*f.BYTES_PER_ELEMENT);n.HEAP32.set(f,_/f.BYTES_PER_ELEMENT);const S=n._malloc(d.length*d.BYTES_PER_ELEMENT);n.HEAP32.set(d,S/d.BYTES_PER_ELEMENT);const k=n._malloc(v.length*v.BYTES_PER_ELEMENT);n.HEAP32.set(v,k/v.BYTES_PER_ELEMENT);const A=n._malloc(w.length*w.BYTES_PER_ELEMENT);n.HEAPF64.set(w,A/w.BYTES_PER_ELEMENT);const N=n._malloc(m*w.BYTES_PER_ELEMENT),M=new Int32Array(o),T=M.length,P=n._malloc(T*M.BYTES_PER_ELEMENT);if(n.HEAP32.set(M,P/M.BYTES_PER_ELEMENT),n.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[b,a,c,r,u,_,S,A,k,N,l,P,T])!==1)throw new Error("prep_fit: unexpected error.");const E=n.HEAPF64.slice(N/w.BYTES_PER_ELEMENT,N/w.BYTES_PER_ELEMENT+m);return n._free(b),n._free(_),n._free(A),n._free(S),n._free(P),n._free(N),n._free(k),{ml:f,mpl:d,mp:w,mpl_new:v,mp_new:E,npred:c,class:["prepmodel"]}}function ul(n,e,r,s,l=!0,o=!1){if(!zt(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let a,c;if(l?(a=e.ncols,c=e.nrows-r):(a=e.nrows,c=e.ncols-r),c!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+c+").");const u=s.ml,f=s.mpl_new,d=s.mp_new,v=f.reduce((N,M)=>N+M,0);if(!u||u.length<1||!f||f.length!==u.length||d.length!==v)throw new Error("prep_apply: wrong structure of the model object.");const g=u.length,m=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const w=n._malloc(u.length*u.BYTES_PER_ELEMENT);n.HEAP32.set(u,w/u.BYTES_PER_ELEMENT);const p=n._malloc(f.length*f.BYTES_PER_ELEMENT);n.HEAP32.set(f,p/f.BYTES_PER_ELEMENT);const b=n._malloc(d.length*d.BYTES_PER_ELEMENT);n.HEAPF64.set(d,b/d.BYTES_PER_ELEMENT);const _=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(n.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[m,a,c,r,g,w,p,b,_,l])!==1)throw new Error("prep_apply: unexpected error.");const k=n.HEAPF64.slice(_/e.v.BYTES_PER_ELEMENT,_/e.v.BYTES_PER_ELEMENT+e.v.length);n._free(m),n._free(w),n._free(p),n._free(b),n._free(_);const A=new xe(k,e.nrows,e.ncols);if(o){const[N,M,T]=ya(A,r,s);return T}return A}function Lu(n,e,r,s){e===void 0&&(e=!0),r===void 0&&(r=!1),s===void 0&&(s=!1);function l(u,f,d,v){if(typeof f=="boolean")return f?u.apply(d,2):Ge([v]).rep(u.ncols);if(!Be(f))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(f.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return f}const o=l(n,e,cn,0),a=l(n,r,fs,1),c=xe.zeros(n.nrows,n.ncols);for(let u=1;u<=n.ncols;u++){const f=n.getcolref(u),d=c.getcolref(u),v=o.v[u-1],g=1/a.v[u-1];for(let m=0;m<n.nrows;m++)d[m]=(f[m]-v)*g}return s?[c,o,a]:c}function ka(n,e,r){return n<e?["regular","in"]:n>r?["outlier","out"]:["extreme","out"]}function Mu(n,e,r,s,l,o,a,c){if(!c||c.length===0)return[0,0];let u=0,f=0;for(let d of c){const v=n[d],[g,m]=ka(v,e,r);o[g]+=1,a[m]+=1,s[d]=g,l[d]=m,u=u+(m==="in"),f=f+(m!=="in")}return[u,f]}function Ea(n,e,r,s,l,o,a,c,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let f=0,d=0;for(let H of u){const q=n[H],[j,O]=ka(q,r,s);c[O]+=1,l[H]="alien",a.alien+=1,o[H]=O,f=f+(O!=="in"),d=d+(O==="in")}const v=u.slice();v.sort((H,q)=>n[H]-n[q]);let g=v.length;const m=v.map(H=>n[H]);let w=-1,p=0,b=0,_=0,S=0;for(;w<0;)p>0&&(l[v[g-1]]="external",a.alien=a.alien-1,a.external=a.external+1,g=g-1,v.pop(),m.pop()),b=cn(m),_=ds(m),S=_/(b*b),w=4-2*e*S,p=p+1;const k=(2+Math.sqrt(w))/S,A=k-e,N=b/k,M=r/N,T=1-2*(e+A)*(e+3*A)/(3*(e+2*A)**2),P=(T-1)*(1-3*T),L=(e+2*A)/(e+A)**2,E=1+T*L*(T-1-.5*(2-T)*P*L),y=T*Math.sqrt(2*L)*(1+.5*P*L),F=Dn((Math.pow(M/(e+A),T)-E)/y);return[f,d,F,A,N,T,E,y,e,b]}class fl{#e;get outcomes(){return t(this.#e)}set outcomes(e){z(this.#e,e)}constructor(e,r,s,l,o,a,c){this.d=e,this.ind=r,this.objlabels=s,this.objindices=l,this.classes=o,this.classNames=a,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,this.#e=h(()=>c.oCrit&&c.eCrit?this.getOutcomes(c):null)}getOutcomes(e){const r=this.d.apply(L=>L/e.f0*e.Nf).v,s=new Array(this.nrows),l=new Array(this.nrows),o={regular:0,extreme:0,outlier:0,alien:0,external:0},a={in:0,out:0},[c,u]=Mu(r,e.eCrit,e.oCrit,l,s,o,a,this.ind.members),[f,d,v,g,m,w,p,b,_,S]=Ea(r,e.Nf,e.eCrit,e.oCrit,l,s,o,a,this.ind.strangers);this.nUnknown>0&&Ea(r,e.Nf,e.eCrit,e.oCrit,l,s,o,a,this.ind.unknown);const k=c>0?c/(c+u):0,A=f>0?f/(f+d):0,N=1-v,M=Math.sqrt(k*A),T=c>0&&f>0?(c+f)/(c+f+d+u):0,P={sensitivity:k,specificity:A,selectivity:N,efficiency:M,accuracy:T};return{Nf:e.Nf,f:r,decs:s,rols:l,decsNum:a,rolsNum:o,TP:c,FN:u,TN:f,FP:d,beta:v,s:g,f0:m,hz:w,Mz:p,Sz:b,k:_,m:S,stat:P}}toJSON(){return null}static fromJSON(e){return new fl(...e)}}class fn{#e;get alpha(){return t(this.#e)}set alpha(e){z(this.#e,e,!0)}#s;get gamma(){return t(this.#s)}set gamma(e){z(this.#s,e,!0)}#t;get limType(){return t(this.#t)}set limType(e){z(this.#t,e,!0)}#l;get Nf(){return t(this.#l)}set Nf(e){z(this.#l,e)}#r;get f0(){return t(this.#r)}set f0(e){z(this.#r,e)}#a;get eConfLim(){return t(this.#a)}set eConfLim(e){z(this.#a,e)}#n;get oConfLim(){return t(this.#n)}set oConfLim(e){z(this.#n,e)}#o;get eCrit(){return t(this.#o)}set eCrit(e){z(this.#o,e)}#i;get oCrit(){return t(this.#i)}set oCrit(e){z(this.#i,e)}constructor(e,r,s,l,o,a,c,u,f,d,v,g,m,w,p,b="nimca-model"){this.mX=r,this.sX=s,this.nrows=l,this.ncols=o,this.className=e,this.Nfc=a,this.Nfr=c,this.f0c=u,this.f0r=f,this.hash=d,this.class=["nimcamodel"],this.fileName=b,this.center=w,this.scale=p,this.#e=re(Re(v)),this.#s=re(Re(g)),this.#t=re(Re(m)),this.#l=h(()=>this.limType==="classic"?this.Nfc:this.Nfr),this.#r=h(()=>this.limType==="classic"?this.f0c:this.f0r),this.#a=h(()=>1-Number.parseFloat(this.alpha)/100),this.#n=h(()=>Math.pow(1-this.gamma/100,1/l)),this.#o=h(()=>un(this.eConfLim,this.Nf)),this.#i=h(()=>un(this.oConfLim,this.Nf))}predict(e){if(!e.values||!zt(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=fn.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let l=0;l<e.classes.length;l++)e.classes[l]===this.className?s.members.push(l):s.strangers.push(l);else s.unknown=Dt(0,e.values.nrows-1);return new fl(r,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r,s,l={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let o=e.values;const a=e.classNames[0];if(!zt(o))throw new Error("nimca.fit: X must be a matrix.");const c=r?o.apply(cn,2):Ce.zeros(o.ncols),u=s?o.apply(fs,2):Ce.ones(o.ncols),f=fn.getDistance(o,c,u),d=cn(f),v=ds(f);let g=Math.round(2*d*d/v);g<1&&(g=1),g>250&&(g=250);const m=Qs(f),w=hu(f),p=w/m;let b;p>2.685592117?b=1:p<.194565995?b=100:b=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/p),1.185785)));const _=.5*b*(m/un(.5,b)+w/(un(.75,b)-un(.25,b)));return new fn(a,c,u,o.nrows,o.ncols,g,b,d,_,hs(),l.alpha,l.gamma,l.limType,r,s)}static fromJSON(e){const{__type:r,mX:s,sX:l,nrows:o,ncols:a,className:c,Nfc:u,Nfr:f,f0c:d,f0r:v,hash:g,alpha:m,gamma:w,limType:p,fileName:b,center:_,scale:S}=e;return new fn(c,s,l,o,a,u,f,d,v,g,m,w,p,_,S,b)}static getDistance(e,r,s){const l=Lu(e,r,s),o=l.nrows,a=l.ncols,c=Ce.zeros(o);for(let u=0;u<a;u++){const f=l.getcolref(u+1);for(let d=0;d<o;d++)c.v[d]+=f[d]**2}return c}}function Dt(n,e,r=1){const s=Math.round((e-n+1)/r),l=Array(s);for(let o=0;o<s;o++)l[o]=n+o*r;return l}function Ru(n,e){let r,s,l,o=[];if(e.length>0){const a=n.values.nrows,c=n.objindices,u=a-e.length;r=Array(u),s=Array(u),l=Array(u);let f=0;for(let d=0;d<a;d++)e.includes(d)||(r[f]=c[d],s[f]=n.classes[d],l[f]=n.objlabels[d],(o.length===0||!o.includes(s[f]))&&o.push(s[f]),f=f+1)}else r=n.objindices,l=n.objlabels,s=n.classes,o=n.classNames;return[r,l,s,o]}function hs(){const n=new Date;return`${n.getFullYear()}${(n.getMonth()+1).toString().padStart(2,"0")}${n.getDate().toString().padStart(2,"0")}${n.getHours().toString().padStart(2,"0")}${n.getMinutes().toString().padStart(2,"0")}${n.getSeconds().toString().padStart(2,"0")}${n.getMilliseconds().toString().padStart(3,"0")}`}function dl(n,e,r,s,l=!1){const[o,a]=Ru(r,s),c=l&&e.prep&&e.prep.ml&&e.prep.ml.length>0?ul(n,r.values,r.nresp,e.prep,!1,!0):r.values,u=Cu(n,e,c,r.nresp,s);return u.hash=hs(),u.objindices=o,u.objlabels=a,u.varlabels=e.varlabels,r.nresp>0?u.Yref=s&&s.length>0?r.values.subset(o.map(f=>f+1),De.seq(1,r.nresp)):r.values.subset(null,De.seq(1,r.nresp)):u.Yref=null,u}function qu(n,e="."){return Array.isArray(n)&&n.length>0?e==="."?n.map(r=>Number.parseFloat(r.trim())):n.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(n.trim()):Number.parseFloat(n.trim().replace(e,"."))}function Hn(n){return n.some(e=>Number.isNaN(e))}function dn(n){return n.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Sa(n){let e=n.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Aa(n,e,r,s,l,o,a,c=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let f=Sa(n);if(f.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");f=f.filter(j=>j.replaceAll(e,"").trim().length>0);const d=f[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let v=0,g;const m=r!=="no";(m||m===void 0&&Hn(firstRow))&&(g=d,v=1);const w=f.length-v;if(w<1)throw new Error("Data file should contain at least 1 row with values.");c===-1&&(c=w);let p,b,_,S=Array(w);s?(p=m?dn(g[0]):"",_=Array(w),b=1):(p="",_=[],b=0);let k,A=[],N;l?(k=m?dn(g[b]):"",N=Array(w),b=b+1):(k="",N=[]);const M=d.length-b;if(M<1)throw new Error("Data file should contain at least 1 column with values.");const T=xe.zeros(M,w);for(let j=v;j<w+v;j++){const O=j-v;S[O]=O;let G=f[j].split(e);if(s&&(_[O]=G[0],G.shift()),l){const Q=G[0];N[O]=Q,G.shift(),(A.length===0||A.indexOf(Q)<0)&&A.push(Q)}const V=u==="."?G.map((Q,J)=>Number.parseFloat(Q.trim())):G.map((Q,J)=>Number.parseFloat(Q.trim().replace(u,".")));if(V.some(Q=>Number.isNaN(Q)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(V.length!=M)throw new Error("Wrong number of values in row #"+j);T.v.set(new Float64Array(V),(j-v)*M)}if(!s||_.length!==w){_=Array(w);for(let j=0;j<w;j++)_[j]="O"+(j+1)}_=_.map(j=>dn(j)),N=N.map(j=>dn(j)),A=A.map(j=>dn(j));let P,L=Array(M),E=Array(M);if(g&&g.length===M+b){P=g.map(j=>dn(j)).slice(b);for(let j=0;j<M;j++)L[j]=j>=c?j-c:j,E[j]=j>=c?j-c+1:j+1}else{P=Array(M);for(let j=0;j<M;j++)L[j]=j>=c?j-c:j,P[j]=j>=c?"V"+(j-c+1):"Y"+(j+1),E[j]=j>=c?j-c+1:j+1}let y;if(r==="values"){if(y=u==="."?P.map((j,O)=>O<c?O:Number.parseFloat(j.trim())):P.map((j,O)=>O<c?O:Number.parseFloat(j.trim().replace(u,"."))),y.some(j=>Number.isNaN(j)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else y=E;Array.isArray(y)||(y=[]),o||(o=""),a||(a=""),o=y.length>0&&o.length>0?o:"Variables",a=y.length>0&&a.length>0?a:"";const F=o+(a.length>0?", "+a:""),H=y[1]<y[0];return{values:T.t(),nresp:c,header:r,hasLabels:s,hasClassNames:l,labelsVarname:p,classLabelsVarname:k,objlabels:_,objindices:S,varlabels:P,varvalues:y,varindices:L,varrev:H,classes:N,classNames:A,sep:e,dec:u,varvaluesName:o,varvaluesUnits:a,varAxisTitle:F}}function Fu(n){if(Hn(n[0].slice(2)))return!0;const e=n[0].length,r=[];for(let s=2;s<e;s++){let l=[];for(let f=1;f<n.length;f++)l.push(n[f][s]);const o=n[0][s],a=cn(l),c=fs(l),u=Math.abs((o-a)/c);r.push(u)}return r.every(s=>s>5)}function zu(n){const r=n[0].split(","),s=n[1].split(","),l=r.length,o=s.length,a=";",c=n[0].split(a),u=n[1].split(a),f=c.length,d=u.length;let v,g;if(l>1&&o>1&&l===o&&l>f)g=",",v=l;else if(f>1&&d>1&&f===d)g=a,v=f;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[g,g===","?".":",",v]}function Ou(n,e=0){const r=Sa(n),s=r.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,o,a]=zu(r),c=Math.min(a,5),u=Math.min(s,5);let f=r[0].split(l).length,d=r.slice(0,u).map(L=>L.split(l).slice(0,c));d=d.map(L=>L.map(E=>dn(E)));const v=d.map(L=>qu(L.slice(),o));for(let L=1;L<u;L++)if(Hn(v[L].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const g=Fu(v);let m=0;const w=g?1:0,p=w+1,b=d[w][0],_=d[p][0],S=v[w][0],k=v[p][0],A=v[w][1],N=v[p][1];let M=!1,T=!1;if(Number.isNaN(S)&&Number.isNaN(k)&&b!==_?(M=!0,m=m+1):Number.isNaN(A)&&Number.isNaN(N)&&b!==_&&(M=!0,T=!0,m=m+2),!T){const L=M?1:0,E=v[w][L],y=v[p][L];T=Hn([E,y]),m=m+T}let P="no";if(g){m>0?d[0].slice(m+e):d[e];const L=m>0?v[0].slice(m+e):v[e];P=Hn(L)?"labels":"values"}return[l,M,T,P,f]}function Iu(n){const e=n.values.t(),r=n.sep,s=n.dec;let l=null;n.header!=="no"&&(l=n.header==="values"?n.nresp&&n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp)):n.varvalues.slice():n.varlabels.slice()),l&&n.hasClassNames&&(l=[n.classLabelsVarname,...l]),l&&n.hasLabels&&(l=[n.labelsVarname,...l]);const o=n.classes&&n.classes.length===e.ncols,a=n.objlabels&&n.objlabels.length===e.ncols;let c=l?l.join(r):"";for(let u=0;u<e.ncols;u++){let f=e.getcolref(u+1).join(r);s!=="."&&(f=f.replace(".",s)),o&&(f=n.classes[u]+n.sep+f),a&&(f=n.objlabels[u]+n.sep+f),c=c+`
`+f}return c=c+`
`,s!=="."&&(c=c.replace(/\./g,s)),c}function Vu(n,e){const r=Iu(n),s=new Blob([r],{type:"text/csv"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download",`${e}.csv`),o.click()}function Wn(n,e){return zt(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Be(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof fn?e.asJSON():e}function vl(n,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return ku(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Ge(e.v);if(e.__type==="NIMCA")return fn.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function hl(n){const e=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),l=String(n.getHours()).padStart(2,"0"),o=String(n.getMinutes()).padStart(2,"0"),a=String(n.getSeconds()).padStart(2,"0");return`${e}${r}${s}${l}${o}${a}`}function Ca(n){return Array.from({length:8},(e,r)=>n>>7-r&1).reverse()}function ms(n,e,r){let s="";for(let l=0;l<e;l++){const o=n.getUint8(r++);if(o===0)break;s+=String.fromCharCode(o)}return s}function Bu(n){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],l=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let o=0;const a=n.getUint8(o);o+=1;const c=n.getUint8(o);if(o+=1,c===77)throw new Error("SPC file has old format which is not supported.");const u=c===75,f=n.getUint8(o);o+=1;const d=n.getInt8(o);o+=1;const v=n.getUint32(o,u);o+=4;const g=n.getFloat64(o,u);o+=8;const m=n.getFloat64(o,u);o+=8;const w=n.getUint32(o,u);o+=4;const p=n.getUint8(o);o+=1;const b=n.getUint8(o);o+=1;const _=n.getUint8(o);o+=1;const S=n.getUint8(o);o+=1;const k=n.getUint32(o,u);o+=4;const A=ms(n,9,o);o+=9;const N=ms(n,9,o);o+=9;const M=n.getUint16(o,u);o+=2;const T=Array.from({length:8},()=>{const W=n.getFloat32(o,u);return o+=4,W}),P=ms(n,130,o);o+=130;const L=ms(n,30,o);o+=30;const E=n.getUint32(o,u);o+=4;const[y,F,H,q,j,O,G,V]=Ca(a),Q=p===255?r[31]:r[p],J=p===255?e[31]:e[p],I=b<=26?s[b]:b>=128&&b<=131?l[b]:"Unknown";return{ftflgsv:a,ftflgs:{TSPREC:y,TCGRAM:F,TMULTI:H,TRANDM:q,TORDRD:j,TALABS:O,TXYXYS:G,TXVALS:V},fexper:f,fexp:d,fnpts:v,ffirst:g,flast:m,fnsub:w,fxtype:p,fytype:b,fztype:_,fpost:S,fdate:k,fres:A,fsource:N,fpeakpt:M,fspare:T,fcmnt:P,fcatxt:L,flogoff:E,xaxisName:Q,xaxisUnit:J,yaxisName:I}}function Du(n,e){const r=Ca(n.getUint8(e));e+=1;const s=n.getInt8(e);e+=1;const l=n.getUint16(e,!0);e+=2;const o=n.getFloat32(e,!0);e+=4;const a=n.getFloat32(e,!0);e+=4;const c=n.getFloat32(e,!0);e+=4;const u=n.getInt32(e,!0);e+=4;const f=n.getInt32(e,!0);e+=4;const d=n.getFloat32(e,!0);return e+=4,{flags:r,exp:s,index:l,time:o,next:a,noise:c,nPoints:u,nScans:f,wAxis:d}}async function Na(n){if(n.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${n.name}).`);const r=n.name.slice(0,-4),s=await n.arrayBuffer(),l=new DataView(s);let o=0;const a=Bu(l);o+=512;const c=a.fnpts;if(c<2)throw new Error(`Error reading SPC file (${n.name}).`);let u=new Array(c);if(a.ftflgs.TXVALS)for(let v=0;v<c;v++){const g=l.getFloat32(o,!0);o=o+4,u[v]=g}else{(a.flast-a.ffirst)/(c-1);for(let v=0;v<c;v++)u[v]=a.ffirst+v*a.flast}const f=new Float64Array(c*a.fnsub);for(let v=0;v<a.fnsub;v++){Du(l,o),o=o+32;for(let g=0;g<c;g++){const m=l.getFloat32(o,!0);o=o+4,f[v*c+g]=m}}const d=[];return a.fnsub>1?Dt(1,a.fnsub).forEach(g=>{d.push(r+"_"+g)}):d.push(r),{hdr:a,xvalues:u,yvalues:f,objlabels:d}}async function Yu(n){if(!(n instanceof FileList||Array.isArray(n)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=n.length,r=[];let s=[],l=[];const o=await Na(n[0]),a=o.xvalues.length;if(r.push(o.yvalues),s=s.concat(o.objlabels),l.push(o.hdr.fnsub),e>1)for(let w=1;w<e;w++){const p=await Na(n[w]);if(p.xvalues.length!==a)throw new Error("Number of spectral values in SPC files is different.");r.push(p.yvalues),s=s.concat(p.objlabels),l.push(p.hdr.fnsub)}const c=l.reduce((w,p)=>w+p,0),u=new Float64Array(c*a);let f=0;for(let w=0;w<r.length;w++)u.set(r[w].slice(),f),f+=l[w]*a;const d=new xe(u,a,c),v=Dt(0,a-1),g=Dt(0,c-1),m=o.xvalues.map(w=>w.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:g,varlabels:m,varvalues:o.xvalues,varindices:v,varev:o.xvalues[1]<o.xvalues[0],sep:",",dec:".",varvaluesName:o.hdr.xaxisName,varvaluesUnits:o.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}function gs(n,e,r){if(!Array.isArray(n))return!1;if(n.length===0)return!0;for(let s=0;s<n.length;s++){const l=n[s];if(l<e||l>r)return!1}return!0}function Hu(n,e=1){if(!n.classNames||n.classNames.length===0)return n;const r=n.classNames.length-e,s=n.values.ncols,l=n.values.nrows;let o=r*l;const a=xe.zeros(l,s+r);a.v.set(n.values.v,o);for(let d=0;d<r;d++){o=d*l;const v=n.classNames[d];for(let g=0;g<l;g++)a.v[o+g]=n.classes[g]===v?1:-1}const c=[...n.classNames,...n.varlabels],u=[...Dt(1,r),...n.varvalues],f=[...Dt(0,r-1),...n.varindices];return{values:a,nresp:r,varlabels:c,varvalues:u,varindices:f,header:n.header,hasLabels:n.hasLabels,hasClassNames:n.hasClassNames,labelsVarname:n.labelsVarname,classLabelsVarname:n.classLabelsVarname,objlabels:n.objlabels,objindices:n.objindices,varrev:n.varrev,classes:n.classes,classNames:n.classNames,sep:n.sep,dec:n.dec,varvaluesName:n.varvaluesName,varvaluesUnits:n.varvaluesUnits,varAxisTitle:n.varAxisTitle}}var Wu=U('<button tabindex="0" class="button svelte-1to1iow"> </button>');function tt(n,e){let r=D(e,"text",3,"button");var s=Wu(),l=X(s);oe(()=>Te(l,r())),Ne("click",s,function(...o){e.onclick?.apply(this,o)}),C(n,s)}st(["click"]);var Uu=U('<button tabindex="0"></button>');function vn(n,e){D(e,"disable",3,!1);var r=Uu();oe(()=>{B(r,"title",e.title),B(r,"aria-label",e.title),B(r,"alt",e.title),dt(r,1,`button ${e.className??""}`,"svelte-qbt64")}),Ne("click",r,function(...s){e.onclick?.apply(this,s)}),C(n,r)}st(["click"]);function cr(n,e){let r=D(e,"title",3,"Reset");vn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function Xu(n,e){let r=D(e,"title",3,"Undo");vn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function Gu(n,e){let r=D(e,"title",3,"Download");vn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function Ku(n,e){let r=D(e,"title",3,"Add");vn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function Ta(n,e){let r=D(e,"title",3,"Settings");vn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function Ju(n,e){let r=D(e,"title",3,"Move up");vn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function Zu(n,e){let r=D(e,"title",3,"Move down");vn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}function vt(n){const e={};for(const r of Object.keys(n))e[r]=n[r].default;return e}var Qu=U('<span class="label svelte-1bhp5bp"> </span>'),$u=U("<div><!> <!></div>");function ce(n,e){let r=D(e,"label",3,null),s=D(e,"name",3,""),l=D(e,"status",3,""),o=D(e,"colors",3,""),a=D(e,"labelWidth",3,12);var c=$u(),u=X(c);{var f=v=>{var g=Qu(),m=X(g);oe(()=>{ct(g,`flex-basis:${a()??""}ch;`),Te(m,r())}),C(v,g)};Y(u,v=>{r()&&v(f)})}var d=R(u,2);gr(d,()=>e.children??it),oe(()=>{dt(c,1,`control-element ${s()??""} ${l()??""}`,"svelte-1bhp5bp"),ct(c,o())}),C(n,c)}var ef=U('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function Yr(n,e){_e(e,!0);let r=D(e,"min",7,0),s=D(e,"max",3,100),l=D(e,"value",31,()=>Re(r())),o=D(e,"decNum",3,1),a=D(e,"step",19,()=>+((s()-r())/100).toFixed(4)),c=D(e,"onchange",3,null);pe(()=>{l()<r()&&(l(r()),c()&&c()(l())),l()>s()&&(l(s()),c()&&c()(l())),r()>s()&&r(s())});let u=re(void 0),f=re(void 0),d=re(!1);const v=E=>{const y=r()+E*(s()-r());return+(Math.round(y/a())*a()).toFixed(4)},g=E=>{const y=t(u).getBoundingClientRect(),F=t(f).getBoundingClientRect(),H=y.x,q=F.x+F.width;return(E.clientX-H)/(q-H)},m=E=>{const y=g(E);y<0||y>1||z(d,y*100>t(k)-5&&y*100<t(k)+5,!0)},w=E=>{z(d,!1)},p=E=>{z(d,!1);const y=g(E);y<0||y>1||(l(v(y)),c()&&c()(l()))},b=E=>{let y=l()+a()*E.deltaY*.5;y<r()&&(y=r()),y>s()&&(y=s()),l(+(Math.round(y/a())*a()).toFixed(4)),E.preventDefault(),c()&&c()(l())},_=E=>{if(!t(d))return;const y=g(E);y<0||y>1||(l(v(y)),c()&&c()(l()))},S=E=>{if(E.key==="ArrowLeft"){l(l()-a()<r()?r():l()-a()),c()&&c()(l());return}if(E.key==="ArrowRight"){l(l()+a()>s()?s():l()+a()),c()&&c()(l());return}},k=h(()=>r()===s()?100:(l()-r())/(s()-r())*100);var A=ef(),N=X(A);let M;var T=X(N);let P;var L=X(T);on(N,E=>z(u,E),()=>t(u)),on(A,E=>z(f,E),()=>t(f)),oe(E=>{B(A,"aria-valuenow",l()),B(A,"aria-valuemin",r()),B(A,"aria-valuemax",s()),M=dt(N,1,"range-slider svelte-7wycr",null,M,{"range-slider_right":t(k)<50}),ct(N,`width:${t(k)??""}%`),P=dt(T,1,"range-value svelte-7wycr",null,P,{"range-value_right":t(k)<50}),Te(L,E)},[()=>l().toFixed(o())]),Ne("keydown",A,S),nn("mousewheel",A,b),Ne("mousemove",A,_),Ne("mousedown",A,m),nn("mouseleave",A,w),Ne("mouseup",A,p),Ne("touchmove",A,_),Ne("touchstart",A,m),nn("touchcancel",A,w),Ne("touchend",A,p),C(n,A),ye()}st(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var tf=U('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function Qt(n,e){_e(e,!0);let r=D(e,"min",3,0),s=D(e,"max",3,10),l=D(e,"value",31,()=>Re(r())),o=D(e,"step",3,1);l()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(r())),l()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(s())),r()>s()&&console.error("The min and max values must be distinct.");let a=re(void 0),c=re(void 0),u=re(!1);const f=h(()=>r()===s()?0:(l()-r())/(s()-r()+o())),d=h(()=>o()/(s()-r()+o())),v=h(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${t(d)*100}%, var(--bg-color-light2, #e8e8e8) ${t(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*t(d)}%)`:"background: #f0f0f0"),g=E=>{if(E<0||E>1)return l();let y=l();return Math.round(t(d)/E),E<t(f)&&t(f)>0&&(y=l()-o()*Math.ceil((t(f)-E)/t(d))),E>t(f)+t(d)&&t(f)+t(d)<1&&(y=l()+o()*Math.ceil((E-(t(f)+t(d)))/t(d))),y<r()&&(y=r()),y>s()&&(y=s()),y},m=E=>{const y=t(c).getBoundingClientRect(),F=y.x,H=y.x+y.width;return(E.clientX-F)/(H-F)},w=E=>{const y=m(E);y<0||y>1||z(u,y>t(f)&&y<t(d)+t(f),!0)},p=E=>{z(u,!1)},b=E=>{z(u,!1);const y=m(E);if(y<0||y>1)return;const F=g(y);l()!==F&&l(F)},_=E=>{let y=l()+Math.round(E.deltaY*.5)*o();y<r()&&(y=r()),y>s()&&(y=s()),l(y),E.preventDefault()},S=E=>{if(!t(u))return;const y=m(E);if(y<0||y>1)return;const F=g(y);F!=l()&&l(F)},k=E=>{if(E.key==="ArrowLeft"){l(l()-o()<r()?r():l()-o());return}if(E.key==="ArrowRight"){l(l()+o()>s()?s():l()+o());return}};var A=tf(),N=X(A);let M;var T=X(N);let P;var L=X(T);on(N,E=>z(a,E),()=>t(a)),on(A,E=>z(c,E),()=>t(c)),oe(E=>{B(A,"aria-valuenow",l()),B(A,"aria-valuemin",r()),B(A,"aria-valuemax",s()),ct(A,t(v)),M=dt(N,1,"range-slider svelte-1lbks0y",null,M,{"range-slider_left":t(d)<.1&&t(f)<.5,"range-slider_right":t(d)<.1&&t(f)>=.5}),ct(N,`width: max(2px, ${t(d)*100}%);left:${t(f)*100}%;`),P=dt(T,1,"range-value svelte-1lbks0y",null,P,{"range-value_right":t(d)<.1&&t(f)>.5,"range-value_left":t(d)<.1&&t(f)<=.5}),Te(L,E)},[()=>l().toFixed(0)]),Ne("keydown",A,k),nn("mousewheel",A,_),Ne("mousemove",A,S),Ne("mousedown",A,w),nn("mouseleave",A,p),Ne("mouseup",A,b),Ne("touchmove",A,S),Ne("touchstart",A,w),nn("touchcancel",A,p),Ne("touchend",A,b),C(n,A),ye()}st(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var rf=U('<button tabindex="-1"><!></button>'),nf=U('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function Ye(n,e){_e(e,!0);let r=D(e,"value",31,()=>Re(e.options[0])),s=D(e,"className",3,"");const l=u=>{if(u.key==="ArrowLeft"){const f=e.options.findIndex(d=>d===r());f>0&&r(e.options[f-1]);return}if(u.key==="ArrowRight"){const f=e.options.findIndex(d=>d===r());f<e.options.length-1&&r(e.options[f+1]);return}};var o=nf(),a=K(o);Ve(a,20,()=>e.options,u=>u,(u,f)=>{var d=rf();let v;var g=X(d);bt(g,()=>f),oe(m=>v=dt(d,1,`option option_${m??""}`,"svelte-bifhtc",v,{selected:f==r()}),[()=>f.toString().replace(".","_")]),Ne("click",d,()=>r(f)),C(u,d)});var c=R(a,2);oe(()=>dt(a,1,`selector ${s()??""}`,"svelte-bifhtc")),Ne("keydown",a,l),Xs(c,r),C(n,o),ye()}st(["keydown","click"]);function Yt(n,e){_e(e,!0);let r=D(e,"options",19,()=>["no","yes"]),s=D(e,"value",15,!1),l=re(!0);const o=h(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());pe(()=>z(l,s()?r()[1]:r()[0],!0)),pe(()=>s(t(l)===r()[1]));var a=Ae(),c=K(a);{var u=f=>{Ye(f,{get options(){return t(o)},get value(){return t(l)},set value(d){z(l,d,!0)}})};Y(c,f=>{t(o)&&f(u)})}C(n,a),ye()}var sf=U('<input type="file" multiple="" class="svelte-xoa0sf"/>'),lf=U('<input type="file" class="svelte-xoa0sf"/>'),of=U('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function ps(n,e){_e(e,!0);let r=D(e,"file",15),s=D(e,"message",3,"Select CSV file with dataset"),l=D(e,"acceptType",3,".csv"),o=D(e,"multiple",3,!1),a=re(void 0);function c(k){t(a)&&t(a).files.length>0?r(t(a).files.length===1?t(a).files[0]:t(a).files):r(null)}function u(k){(k.type==="click"||k.type==="keydown"&&(k.code==="Space"||k.code==="Enter"))&&t(a).click()}function f(k){t(a).value=null,r(null)}var d=of(),v=K(d);let g;var m=X(v),w=R(m);{var p=k=>{var A=sf();on(A,N=>z(a,N),()=>t(a)),oe(()=>B(A,"accept",l())),Ne("change",A,c),C(k,A)},b=k=>{var A=lf();on(A,N=>z(a,N),()=>t(a)),oe(()=>B(A,"accept",l())),Ne("change",A,c),C(k,A)};Y(w,k=>{o()?k(p):k(b,!1)})}var _=R(v,2);{var S=k=>{cr(k,{onclick:f})};Y(_,k=>{r()&&k(S)})}oe(()=>{g=dt(v,1,"file-selector svelte-xoa0sf",null,g,{selected:r()}),Te(m,`${(r()?r().length>1?`Selected ${r().length} files`:r().name:s())??""} `)}),Ne("keydown",v,u),Ne("click",v,u),C(n,d),ye()}st(["keydown","click","change"]);var af=U('<div class="error-message svelte-11e14eb"> </div>'),cf=U('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function Pa(n,e){_e(e,!0);let r=D(e,"value",15,""),s=D(e,"className",3,""),l=D(e,"placeholder",3,""),o=D(e,"maxLength",3,25),a=D(e,"validator",3,null),c=re("");function u(){a()&&z(c,a()(r()),!0)}var f=cf();let d;var v=X(f),g=R(v,2);{var m=w=>{var p=af(),b=X(p);oe(()=>Te(b,t(c))),C(w,p)};Y(g,w=>{t(c)&&t(c).length>0&&w(m)})}oe(()=>{d=dt(f,1,`textinput ${s()??""}`,"svelte-11e14eb",d,{error:t(c)&&t(c).length>0}),B(v,"placeholder",l()),B(v,"maxlength",o())}),Ne("input",v,u),Xs(v,r),C(n,f),ye()}st(["input"]);var uf=U('<div class="spinner svelte-wlgijz"></div>');function ml(n){var e=uf();C(n,e)}var ff=U('<button tabindex="-1"><!></button>'),df=U('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-142p4sy"></div> <input class="svelte-142p4sy"/>',1);function ja(n,e){_e(e,!0);let r=D(e,"options",19,()=>["p","l","b","h","qq"]),s=D(e,"value",31,()=>Re(r()[0]));const l=v=>{if(v.key==="ArrowLeft"){const g=r().findIndex(m=>m===s());g>0&&s(r()[g-1]);return}if(v.key==="ArrowRight"){const g=r().findIndex(m=>m===s());g<r().length-1&&s(r()[g+1]);return}},o='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var u=df(),f=K(u);Ve(f,20,r,v=>v,(v,g)=>{var m=ff();let w;var p=X(m);bt(p,()=>o+a[g]+"</svg>"),oe(()=>{w=dt(m,1,"option svelte-142p4sy",null,w,{selected:g==s()}),B(m,"title",c[g])}),Ne("click",m,()=>s(g)),C(v,m)});var d=R(f,2);Ne("keydown",f,l),Xs(d,s),C(n,u),ye()}st(["keydown","click"]),st(["keydown","click"]);var vf=U("<h2> </h2>"),hf=U("<!> <!>",1),mf=U('<div class="widget"><!></div>');function gf(n,e){_e(e,!0);let r=D(e,"title",3,""),s=D(e,"value",15),l=D(e,"labelWidth",3,13);function o(f){const d={};for(const v of Object.keys(f))d[v]=f[v].default;return d}pe(()=>{!s()&&e.options&&s(o(e.options))});var a=mf(),c=X(a);{var u=f=>{var d=hf(),v=K(d);{var g=w=>{ce(w,{children:(p,b)=>{var _=vf(),S=X(_);oe(()=>Te(S,r())),C(p,_)},$$slots:{default:!0}})};Y(v,w=>{r()&&w(g)})}var m=R(v,2);Ve(m,17,()=>Object.keys(e.options),We,(w,p)=>{const b=h(()=>e.options[t(p)]);var _=Ae(),S=K(_);{var k=A=>{ce(A,{get name(){return t(b).name},get label(){return t(b).label},get labelWidth(){return l()},children:(N,M)=>{var T=Ae(),P=K(T);Vn(P,()=>t(b).el,(L,E)=>{E(L,Tr(()=>t(b).props,{get value(){return s()[t(p)]},set value(y){s(s()[t(p)]=y,!0)}}))}),C(N,T)},$$slots:{default:!0}})};Y(S,A=>{t(b).hidden||A(k)})}C(w,_)}),C(f,d)};Y(c,f=>{s()&&f(u)})}C(n,a),ye()}function pf(n,e,r,s,l,o){const a=Object.keys(r),c=a[0],u=a[1],f=r[c],d=r[u];let v=0;for(let g of e.v){let m=0;for(let p of f)m+=n[p]>g;s[v]=m/r[c].length;let w=0;for(let p of d)w+=n[p]<=g;l[v]=w/r[u].length,o[v]=Math.sqrt(s[v]*l[v]),v+=1}}function bf(n,e,r,s,l,o,a,c,u,f,d,v,g){const m=Object.keys(r),w=n.length;for(let p of[0,1]){const b=p==0?(N,M)=>N>=M:(N,M)=>N<M,_=r[m[p]],S=r[m[1-p]];let k=0,A=p==0?-1:1;for(let N of e.v){let M=s[p]+A*N*l[p],T=o[p]+A*N*a[p],P=0,L=0;for(let F of _)P+=b(n[F],M),L+=b(n[F],T);c[k]+=P/w,d[k]+=L/w;let E=0,y=0;for(let F of S)E+=!b(n[F],M),y+=!b(n[F],T);u[k]+=E/w,v[k]+=y/w,k+=1}}for(let p=0;p<e.length;p++)f[p]=Math.sqrt(c[p]*u[p]),g[p]=Math.sqrt(d[p]*v[p])}function gl(n,e,r){const s=n.ncomp;n.nrows;const l=Object.keys(r),o=Ce.seq(.99,.499,-.01),a=[1,6,11,16,21,26,31,36,41,46,50],c=["50","45","40","35","30","25","20","15","10","5","1"],u=[1,11,21,31,41,51,61,71,81,91,101],f=Dt(-10,10,2).map(T=>(T/10).toFixed(1)),d=jr(o),v=Ce.seq(1,-1,-.02),g=d.length,m=v.length,w=xe.zeros(g,s),p=xe.zeros(g,s),b=xe.zeros(g,s),_=xe.zeros(g,s),S=xe.zeros(g,s),k=xe.zeros(g,s),A=xe.zeros(m,s),N=xe.zeros(m,s),M=xe.zeros(m,s);for(let T=1;T<=s;T++){const P=kt(n,"Yp",T,1),L=e[l[0]].classic,E=L.m[T-1],y=L.s[T-1],F=e[l[0]].robust,H=F.m[T-1],q=F.s[T-1],j=e[l[1]].classic,O=j.m[T-1],G=j.s[T-1],V=e[l[1]].robust,Q=V.m[T-1],J=V.s[T-1];pf(P,v,r,N.getcolref(T),M.getcolref(T),A.getcolref(T)),bf(P,d,r,[E,O],[y,G],[H,Q],[q,J],p.getcolref(T),b.getcolref(T),w.getcolref(T),S.getcolref(T),k.getcolref(T),_.getcolref(T))}return{hard:{ticks:u,tickLabels:f,values:v,stat:{sens:N,spec:M,eff:A}},soft:{ticks:a,tickLabels:c,values:o,stat:{classic:{sens:p,spec:b,eff:w},robust:{sens:S,spec:k,eff:_}}}}}function La(n,e){const r=[],s=[];for(let o=0;o<n.length;o++)n[o]>0?r.push(o):s.push(o);const l={};return l[e[0]]=r,l[e[1]]=s,l}function wf(n,e,r,s,l){const o=n.length,a=e.classNames,c=s===0?1:0;let u=0,f=0,d=0,v=0;const g=e.params[a[s]][e.limType],m=g.m[l],w=g.s[l],p=new Array(o),b=new Array(o),_=e.alpha/100,S=s==0?N=>Dn(N,m,w):N=>1-Dn(N,m,w);if(!r){for(let N=0;N<o;N++)b[N]=S(n[N]),p[N]=b[N]>=_;return[u,v,f,d,p,b]}const k=r[a[s]],A=r[a[c]];for(let N of k)b[N]=S(n[N]),p[N]=b[N]>=_,u+=p[N],v+=1-p[N];for(let N of A)b[N]=S(n[N]),p[N]=b[N]>=_,d+=1-p[N],f+=p[N];return[u,v,f,d,p,b]}function _f(n,e,r,s,l){const o=n.length,a=e.threshold,c=e.classNames,u=s===0?1:0;let f=0,d=0,v=0,g=0;const m=new Array(o),w=new Array(o),p=s==0?S=>S>a:S=>S<=a;if(!r){for(let S=0;S<o;S++)m[S]=p(n[S]);return[f,g,d,v,m,w]}const b=r[c[s]],_=r[c[u]];for(let S of b)m[S]=p(n[S]),w[S]=m[S],f+=m[S],g+=1-m[S];for(let S of _)m[S]=p(n[S]),w[S]=m[S],v+=1-m[S],d+=m[S];return[f,g,d,v,m,w]}function bs(n,e,r){const s=n.ncomp,l=n.nrows,o=e.classNames,a=o.length,c={},u=e.rule==="hard"?_f:wf,f=r!==null,d=new Array(s).fill(0),v=new Array(s).fill(0),g=new Array(s).fill(0),m=new Array(s).fill(0);for(let w=0;w<a;w++){const p=new Array(s),b=new Array(s),_=new Array(s),S=new Array(s),k=new Array(s),N=(f?r[o[w]].length:1)/l,M=1-N;for(let P=0;P<s;P++){const L=kt(n,"Yp",P+1,1),[E,y,F,H,q,j]=u(L,e,r,w,P);f&&(b[P]=E>0?E/(E+y):0,_[P]=H>0?H/(H+F):0,S[P]=Math.sqrt(b[P]*_[P]),k[P]=E>0&&H>0?(E+H)/(E+H+F+y):0,d[P]+=b[P]*N,v[P]+=_[P]*M),p[P]={TP:E,FN:y,FP:F,TN:H,d:q,p:j,yp:new Ce(L)}}const T={sensitivity:b,specificity:_,efficiency:S,accuracy:k};c[o[w]]={res:p,stat:T}}for(let w=0;w<s;w++)g[w]=Math.sqrt(d[w]*v[w]),m[w]=(d[w]+v[w])/2;return c.total={stat:{sensitivity:d,specificity:v,efficiency:g,accuracy:m}},{class:["dares"],objlabels:n.objlabels,threshold:e.threshold,rule:e.rule,alpha:e.alpha,crit:e.crit,params:e.params,limType:e.limType,ind:r,nclasses:a,classNames:o,nrows:l,ncomp:s,v:c}}function ws(n,e,r,s){let l=n.pls.outliers,o=n.pls.exclvars;(!l||!Array.isArray(l))&&(l=[]),(!o||!Array.isArray(o))&&(o=[]);const a=e.sep,c=e.values.nrows,u=l.length,f=c-u,d=n.pls.ncomp,v=n.da.classNames,g=n.da.ind!==null,m=Array(d).fill(""),w=Array(d).fill(0).map((L,E)=>"LV"+(E+1));let p="";if(p+=["Number of LVs:",d,...m].join(a)+`
`,p+=["Optinal number of LVs:",s,...m].join(a)+`
`,p+=["Center:",n.pls.center,...m].join(a)+`
`,p+=["Scale:",n.pls.scale,...m].join(a)+`
`,l.length>0&&(p+=["Removed outliers:",l.length,...m].join(a)+`
`),o.length>0&&(p+=["Excluded variables:",o.length,...m].join(a)+`
`),p+=`
`,p+=["Classification rule:",n.da.rule,...m].join(a)+`
`,n.da.rule==="soft"){p+=["Alpha (%):",n.da.alpha,...m].join(a)+`
`,p+=["Limits:",n.da.limType,...m].join(a)+`
`;for(let L of v){const E=n.da.crit[L];p+=`
`,p+=["Class:"+a+L,...m].join(a)+`
`,p+=["Mean:",E[0],...m].join(a)+`
`,p+=["Deviation:",E[1],...m].join(a)+`
`,p+=["Critical value:",E[2],...m].join(a)+`
`}}else p+=["Threshold:",n.da.threshold,...m].join(a)+`
`;if(p+=`
`,g){p+=["Variances:","",...m].join(a)+`
`,p+=["",...w].join(a)+a+`
`,p+=["xexpvar:",...n.pls.stat.xexpvar].join(a)+a+`
`,p+=["xcumexpvar",...n.pls.stat.xcumexpvar].join(a)+a+`
`,p+=["yexpvar:",...n.pls.stat.yexpvar].join(a)+a+`
`,p+=["ycumexpvar:",...n.pls.stat.ycumexpvar].join(a)+a+`
`,p+=["RMSE:",...n.pls.stat.rmse.v].join(a)+a+`
`,p+=`
`;for(let E of v){const y=n.da.v[E].stat;p+=["Class:"+a+E,...m].join(a)+`
`,p+=["FoMs:",...w].join(a)+a+`
`,p+=["Senstivitiy",...y.sensitivity].join(a)+a+`
`,p+=["Specificity",...y.specificity].join(a)+a+`
`,p+=["Efficiency",...y.efficiency].join(a)+a+`
`,p+=["Accuracy",...y.accuracy].join(a)+a+`
`,p+=`
`}const L=n.da.v.total.stat;p+=["Total:"+a,...m].join(a)+`
`,p+=["FoMs:",...w].join(a)+a+`
`,p+=["Senstivitiy",...L.sensitivity].join(a)+a+`
`,p+=["Specificity",...L.specificity].join(a)+a+`
`,p+=["Efficiency",...L.efficiency].join(a)+a+`
`,p+=["Accuracy",...L.accuracy].join(a)+a+`
`,p+=`
`}let b=0;const _=e.objlabels,S=g?n.pls.Yref.getcolref(1):new Array(f).fill("-"),k=n.da.v[v[0]].res[s-1],A=n.da.v[v[1]].res[s-1];if(n.da.rule==="soft"){p+=["object","class","y (reference)","y (predicted)","decision ("+v[0]+")","p-score ("+v[0]+")","decision ("+v[1]+")","p-score ("+v[1]+")"].join(a)+a+`
`;for(let E=0;E<c;E++){if(u>0&&l.includes(E)){p+=[_[E],...Array(7).fill("-")].join(a)+a+`
`;continue}p+=[_[E],e.classes[E],S[b],k.yp.v[b],k.d[b]?"in":"out",k.p[b],A.d[b]?"in":"out",A.p[b]].join(a)+a+`
`,b=b+1}}else{p+=["object","class","y (reference)","y (predicted)","decision"].join(a)+a+`
`;for(let E=0;E<c;E++){if(u>0&&l.includes(E)){p+=[_[E],...Array(4).fill("-")].join(a)+a+`
`;continue}p+=[_[E],e.classes[E],S[b],k.yp.v[b],k.d[b]?v[0]:v[1]].join(a)+a+`
`,b=b+1}}p+=`
`,e.dec!=="."&&(p=p.replace(/\./g,e.dec)),p=["Data filename:",e.fileName,...m].join(e.sep)+`
`+p;let N=["PLS1-DA results ("+r+")","https://mda.tools/pls1da/",...m].join(e.sep)+`

`;const M=new Blob([N+p],{type:"text/csv"}),T=window.URL.createObjectURL(M),P=document.createElement("a");P.setAttribute("href",T),P.setAttribute("download",`pls1da-results-${r}.csv`),P.click()}function Ma(n,e){n.pls.prep=e;const r=new Blob([JSON.stringify(n,Wn)],{type:"application/json"}),s=window.URL.createObjectURL(r),l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download","pls1da-model.json"),l.click()}var yf=U('<span class="item svelte-igakmm"> </span>'),xf=U('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function pl(n,e){_e(e,!0);var r=Ae(),s=K(r);{var l=o=>{ce(o,{children:(a,c)=>{var u=xf(),f=K(u),d=R(X(f),2);Ve(d,17,()=>e.outliers,We,(w,p)=>{var b=yf(),_=X(b);oe(()=>Te(_,e.dataset.objlabels[t(p)])),C(w,b)});var v=R(f,2);{var g=w=>{Xu(w,{get onclick(){return e.undoOutliers}})};Y(v,w=>{e.outliers.length>1&&w(g)})}var m=R(v,2);cr(m,{get onclick(){return e.resetOutliers}}),C(a,u)},$$slots:{default:!0}})};Y(s,o=>{e.dataset&&e.outliers&&e.outliers.length>0&&o(l)})}C(n,r),ye()}var kf=U('<p class="exclvars svelte-12e65an"><span style="color:#a0a0a0;">Excluded</span> <span style="color:#504040;"> </span> <span style="color:#a0a0a0;">variables</span></p> <!>',1);function Ef(n,e){_e(e,!0);var r=Ae(),s=K(r);{var l=o=>{ce(o,{children:(a,c)=>{var u=kf(),f=K(u),d=R(X(f),2),v=X(d),g=R(f,2);cr(g,{get onclick(){return e.resetExclvars}}),oe(()=>Te(v,e.exclvars.length)),C(a,u)},$$slots:{default:!0}})};Y(s,o=>{e.exclvars&&e.exclvars.length>0&&o(l)})}C(n,r),ye()}const Sf={small:30,medium:40,large:50,xlarge:60},Af={small:5,medium:8,large:12,xlarge:15},Cf={small:6,medium:10,large:14,xlarge:18},bl={small:4,medium:6,large:8,xlarge:10},Nf={small:12,medium:15,large:19,xlarge:21},wl={small:11,medium:15,large:17,xlarge:19},Un={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Sn=["●","◼","▲","▼","⬥","＋","✳","✕"],Tf=.8,Ra=.5,Pf={small:5,medium:8,large:12,xlarge:15},jf=12,Et={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function qa(n){let e=Array(n);for(let r=0;r<n;r++)e[r]=r+1;return e}function Fa(n,e){return Array.isArray(n)&&n.length===e&&!n.some(r=>r===void 0)&&!n.some(r=>isNaN(r))}function za(n,e){if(n!=null&&(Array.isArray(n)&&(n=Ge(n)),!(!Be(n)||n.length<1)))return n.apply(r=>kl((r-e[1])*e[0]+e[2])).v}function ot(n,e){return za(n,e.coords)}function Xn(n,e){return za(n,e.objects)}function Oa(n,e){if(n!=null&&(Array.isArray(n)&&(n=Ge(n)),!(!Be(n)||n.length<1)))return n.apply(r=>(r-e[2])/e[0]+e[1]).v}function Ia(n,e){return Oa(n,e.coords)}function Va(n,e){return Oa(n,e.objects)}function _l(n){return n===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${n.toString()}</tspan>`}function Lr(n){if(n===Math.round(n))return n;if(Math.abs(n)>10**6)return Math.round(n);if(Math.abs(n)<10**-6)return n;let e=n.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function yl(n){if(n===void 0)return[0,void 0];if(n.length<1)return[0,void 0];if(n.length===1)return[0,[n[0].toString()]];let e=Lr(Math.abs(Pr(oa(n)))),r=0;if(e>=1)return e<100?[0,Array.from(n).map(o=>o.toFixed(0))]:(r=Math.ceil(Lr(Math.log10(e)))-2,[r,Array.from(n).map(o=>(o/Math.pow(10,r)).toFixed(0))]);let s=Math.ceil(-Lr(Math.log10(e)));return s<=2?[0,Array.from(n).map(l=>l.toFixed(s))]:(r=s-2,s=2,Lr(Math.abs(Zt(n)))<=10?[-r,Array.from(n).map(l=>(l*Math.pow(10,r)).toFixed(s))]:[-r,Array.from(n).map(l=>(l/Math.pow(10,r)).toString())])}function jt(n,e,r){return Array.isArray(n)&&(n=Ge(n)),Be(n)?n.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&n.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):n:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function xl(n,e,r,s){if(!n||!e||n.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=r.coords,o=s.coords;let a="";for(let c=0;c<n.length;c++){const u=kl((n.v[c]-l[1])*l[0]+l[2]),f=kl((e.v[c]-o[1])*o[0]+o[2]);a+=u+","+f+" "}return a}function Ba(n,e){return n?Array.isArray(n)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==n.length?[null,"number of tick labels and values should be the same."]:[n.map(r=>Hr(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Da(n,e){if(Array.isArray(n)&&(n=Ge(n)),!Be(n))return[null,"tick values must be provided as an array or as a vector."];if(n.v.some(a=>isNaN(a)))return[null,"tick values must be numeric"];const r=new Set(n.v);if(n.length!==r.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],o=n.filter(a=>a>=s&a<=l);return o.length!==n.length?[null,"some of ticks values are outside axis limits."]:[o,""]}function Ya(n,e,r,s,l,o){l==null&&(l=!1),o===void 0&&(o=1e-4);const a=e[0]<e[1]?e:[e[1],e[0]];if(n)return n;if(typeof a!="object"||a[0]===void 0||a[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const c=Math.abs(a[1]-a[0])*o,u=a[1]-a[0]-2*c,f=Math.floor(Math.log10(u)),d=1/Math.pow(10,f-1),v=Math.round(u*d)/d;let g=Lf(v/r);l&&(Math.abs(a[1]-a[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(g<1&&(g=1),g=Math.round(g)));let m=Math.ceil((a[0]+c)/g)*g,w=Math.floor((a[1]-c)/g)*g;Math.abs(a[0]-m)<g/10&&(m=m+g),Math.abs(a[1]-w)<g/10&&(w=w-g),r=Math.ceil(Lr((w-m)/g))+1,n=Ce.zeros(r);for(let p=0;p<r;p++)n.v[p]=m+g*p;if(Math.abs(g)<1){const p=Math.pow(10,1+Math.round(-Math.log10(g)));n=n.apply(b=>Math.round((b+Number.EPSILON)*p)/p)}return n.filter(p=>p>=a[0]&p<=a[1])}function Lf(n,e){const r=Math.floor(Math.log10(n)),s=n/Math.pow(10,r);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,r)}function kl(n){return Math.round(n*10)/10}function Mf(n,e){return e<300.2||n<400.2?"small":e<400.2||n<700.2?"medium":e<650.2||n<850.2?"large":"xlarge"}function Ha(n,e){return n<400.2?"small":n<700.2?"medium":n<900.2?"large":"xlarge"}function Rf(){const n=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;n[e]=r}return n}function qf(n){let e=-1,r=Rf();for(let s=0;s<n.length;s++)e=r[(e^n[s])&255]^e>>>8;return e^-1}function Ff(n,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const s=qf(r),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;const a=new Uint8Array(54);return a.set(n,0),a.set(o,33),a.set(r,37),a.set(l,50),a}function zf(n,e){const r=n.split(","),s=r[0],l=r[1],o=33/3*4,a=l.substring(0,o),c=l.substring(o),u=atob(a),f=new Uint8Array(u.length);for(let g=0;g<f.length;g++)f[g]=u.charCodeAt(g);const d=Ff(f,e),v=btoa(String.fromCharCode(...d));return[s,",",v,c].join("")}function Of(n,e,r,s,l){if(r||(r=10),s||(s=10),l||(l=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!n||!(n instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const o=r/2.54*l,a=s/2.54*l;setTimeout(()=>{const c=n.clientHeight,u=n.clientWidth;let f=Math.max(o/u,a/c),d=1;f<1&&(d=f,f=1);const v=document.createElement("canvas"),g=v.getContext("2d");v.width=u*(d<1?d:f),v.height=c*(d<1?d:f),n.setAttribute("width",u*f),n.setAttribute("height",c*f),g.fillStyle="white",g.fillRect(0,0,v.width,v.height),g.scale(f,f);const m=new XMLSerializer().serializeToString(n),w=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(w),b=new Image;b.onload=function(){d<0&&(b.width=b.width*d,b.height=b.height*d),g.drawImage(b,0,0,v.width,v.height);const _=v.toDataURL("image/png"),S=zf(_,l),k=document.createElement("a");k.href=S,k.download=`${e}.png`,k.click()},b.src=p},20)}function If(n,e){if(!n||!(n instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=n.clientHeight,s=n.clientWidth;n.setAttribute("width",s+"px"),n.setAttribute("height",r+"px"),n.setAttribute("viewBox",`0 0 ${s} ${r}`);const l=new Blob([n.outerHTML],{type:"image/svg+xml"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.svg`),a.click()}function Vf(n,e,r,s){const l=n.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Bf(e,r,s)})]).then(()=>{n.classList.add("copied"),n.textContent="✓ done",setTimeout(()=>{n.classList.remove("copied"),n.textContent=l},500)},o=>{console.error(o),n.classList.add("error"),n.textContent="x copy",setTimeout(()=>{n.classList.remove("error"),n.textContent=l},500)}).catch(o=>console.error(o))}async function Bf(n,e,r){const s=n.clientHeight,l=n.clientWidth,o=Math.max(e/l,r/s),a=document.createElement("canvas"),c=a.getContext("2d");return a.width=l*o,a.height=s*o,c.scale(o,o),n.setAttribute("width",a.width),n.setAttribute("height",a.height),await new Promise((f,d)=>{const v=new XMLSerializer().serializeToString(n),g=new Blob([v],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,w=m.createObjectURL(g),p=new Image;p.onload=function(){c.drawImage(p,0,0,a.width,a.height),m.revokeObjectURL(w),a.toBlob(function(b){b?f(b):d(new Error("Failed to create blob"))},"image/png")},p.onerror=function(b){d(b)},p.src=w})}function El(n,e){return n>16&&(n=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][n-1]}function Df(n,e,r,s,l){let o=l.error?null:l.ticks,a=l.error?null:l.tickLabels,c=0;const u=Ya(o,n,Af[r.x],!0,l.whole),f=u.length,d=Va([bl[r.plot]],s)[0],v=Ce.fill(e[0],f),g=v.add(d),m=Ce.fill(e[1],f);if(a||(o?(c=0,a=o.v.map(P=>Lr(P).toString())):[c,a]=yl(u.v)),!a||a.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const w=[[u,v],[u,m]],p=[[Ge([n[0]]),Ge([e[0]])],[Ge([n[1]]),Ge([e[0]])]],b=[[u,g],[u,v]],_=(n[1]-n[0])*.01,S=[[null,null],[[n[1]-(c>9?1:0)*_],[v.v[f-1]]]],k=_l(c),A=a.length,N=Math.abs(n[1]>n[0]?n[1]-u.v[A-1]:n[1]-u.v[0]),M=Math.abs(n[1]-n[0]),T=Math.abs(u.v[1]-u.v[0]);if(k.length>0&&N<M*.1&&N<T*.5){const P=n[1]>n[0]?A-1:0;a[P]=" "}return{grid:w,axisLine:p,tickCoords:b,tfCoords:S,ticks:o,tickLabels:a,tickFactor:c,tfLabel:k}}function Yf(n,e,r,s,l){let o=l.ticks,a=l.tickLabels,c=0;const u=Ya(l.ticks,e,Cf[r.y],!0,l.whole),f=u.length,d=Va([bl[r.plot]],s)[0],v=Ce.fill(n[0],f),g=v.add(d),m=Ce.fill(n[1],f);if(a||(o?(c=0,a=o.v.map(T=>Lr(T).toString())):[c,a]=yl(u.v)),a.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const w=[[v,u],[m,u]],p=[[Ge([n[0]]),Ge([e[0]])],[Ge([n[0]]),Ge([e[1]])]],b=[[v,u],[g,u]],_=[[[],[]],[[g.v[f-1]+(Math.abs(c)>9?3:2)*d],[e[1]]]],S=_l(c),k=a.length,A=Math.abs(e[1]>e[0]?e[1]-u.v[k-1]:e[1]-u.v[0]),N=Math.abs(e[1]-e[0]),M=Math.abs(u.v[1]-u.v[0]);if(S.length>0&&A<N*.1&&A<M*.5){const T=e[1]>e[0]?k-1:0;a[T]=" "}return{grid:w,axisLine:p,tickCoords:b,tfCoords:_,ticks:o,tickLabels:a,tickFactor:c,tfLabel:S}}function Hf(n){if(!n.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Be(n.breaks)?n.breaks.v:n.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!n.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(n.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(n.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=n.colmap;let s,l;if(n.labels?(s=n.labels,l=0):[l,s]=yl(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const o=s.length===r.length;return{colmap:r,breaks:e,labels:s,isCentered:o,labelsFactor:l,fontSize:n.fontSize,labelColor:n.labelColor}}function Wf(n,e,r,s){const l=n.colmap.length,o=e*Tf,a=o/l,c=r[1]+(e-o)*.5,u=Pf[s.y],f=r[2]+u*Ra,d=f+u*(1+Ra),v=n.isCentered?a/2:0;return{start:c,top:f,height:u,width:a,dxl:v,ltop:d}}function hn(n,e,r){if(!n||!e||!r||typeof r!="function")return;const s=n.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;r(l),n.stopPropagation()}}function Uf(n,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(n.replace(/<(.|\n)*?>/g,"")).width}function Xf(n,e){const r="Arial",s=e/8,l=e*1.5,o=Array(n.length),a=Array(n.length);let c=0,u=0,f=0;for(let v=0;v<n.length;v++){const g=Uf("  "+n[v].label+"  ",e+"px "+r);f=g>f?g:f;const m=e*n[v].labelHeight+2*s;o[v]=m,a[v]=c,c=c+m,u=u+m}const d=l+2*s+f;return[a,o,l,s,u,d]}function Gf(n,e,r,s,l){const[o,a,c,u,f,d]=Xf(n.items,s*n.fontSize),v=n.position.includes("left")?e[0]+l:n.position.includes("right")?e[1]-d-l:(e[1]+e[0]-d)*.5,g=n.position.includes("top")?r[1]+l:n.position.includes("bottom")?r[0]-f-l:(r[1]+r[0]-f)*.5;return{lgl:v,lgt:g,lgw:d,lgh:f,ely:o,elh:a,elw:c,elp:u}}function Hr(n){if(!n||n.length<1)return n;function e(o){return'<tspan font-size="0.75em" dy="-0.5em">'+o+'</tspan><tspan dy="0.4em"> </tspan>'}function r(o){return'<tspan font-size="0.75em" dy="0.5em">'+o+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<n.length;){const o=n[s];if((o==="^"||o==="_")&&s<n.length-1){const a=o==="^";if(s++,n[s]==="("){let c=s+1;for(;c<n.length&&n[c]!==")";)c++;const u=n.slice(s+1,c);l+=a?e(u):r(u),s=c+1}else if(n[s]==="-"||n[s]==="–"){const c=n.slice(s,s+2);l+=a?e(c):r(c),s=s+2}else l+=a?e(n[s]):r(n[s]),s++}else l+=o,s++}return l}var Kf=je('<line vector-effect="non-scaling-stroke"></line>'),Jf=je("<g></g>");function Sl(n,e){_e(e,!0);let r=D(e,"lineCoords",19,()=>[]),s=D(e,"lineColor",19,()=>Et.DARKGRAY),l=D(e,"lineType",3,1),o=D(e,"lineWidth",3,1),a=D(e,"className",3,"");const c=Pt("axes");let u=h(()=>ot(r()[0][0],c.tX())),f=h(()=>ot(r()[1][0],c.tX())),d=h(()=>ot(r()[0][1],c.tY())),v=h(()=>ot(r()[1][1],c.tY())),g=h(()=>`stroke:${s()};stroke-width: ${o()}px;stroke-dasharray:${Un[c.scales().plot][l()-1]}`);var m=Ae(),w=K(m);{var p=b=>{var _=Jf();Ve(_,21,()=>t(u),We,(S,k,A)=>{var N=Kf();oe(()=>{B(N,"x1",t(u)[A]),B(N,"x2",t(f)[A]),B(N,"y1",t(d)[A]),B(N,"y2",t(v)[A]),ct(N,t(g))}),C(S,N)}),oe(()=>dt(_,0,Zc(a()))),C(b,_)};Y(w,b=>{t(u)&&t(d)&&t(f)&&b(p)})}C(n,m),ye()}var Zf=je('<text text-anchor="middle"><!></text>'),Qf=je("<text><!></text>"),$f=je("<text><!></text>"),ed=je('<g class="tick-labels"><!></g>');function Wa(n,e){_e(e,!0);let r=D(e,"pos",3,1),s=D(e,"las",3,1),l=h(()=>["middle","middle","start","middle","end"][r()]),o=h(()=>`fill:${e.textColor};`);const a=Pt("axes");let c=h(()=>ot(e.tickCoords[1][0],a.tX())),u=h(()=>ot(e.tickCoords[1][1],a.tY())),f=h(()=>wl[a.scales().plot]),d=h(()=>[0,0,t(f),0,-t(f)][r()]),v=h(()=>[0,t(f),0,-t(f),0][r()]);var g=ed(),m=X(g);{var w=_=>{var S=Ae(),k=K(S);Ve(k,17,()=>t(c),We,(A,N,M)=>{var T=Zf();B(T,"data-id",M),B(T,"dx",0);var P=X(T);bt(P,()=>e.tickLabels[M],!0),oe(()=>{B(T,"x",t(c)[M]),B(T,"y",t(u)[M]),B(T,"dy",t(d)*1.25),B(T,"transform",`rotate(-90, ${t(c)[M]}, ${t(u)[M]})`)}),C(A,T)}),C(_,S)},p=_=>{var S=Ae(),k=K(S);Ve(k,17,()=>t(c),We,(A,N,M)=>{var T=Qf();B(T,"data-id",M),B(T,"dy",0),B(T,"text-anchor","end");var P=X(T);bt(P,()=>e.tickLabels[M],!0),oe(()=>{B(T,"x",t(c)[M]),B(T,"y",t(u)[M]),B(T,"dx",-t(v)/2),B(T,"transform",`rotate(-90, ${t(c)[M]}, ${t(u)[M]})`)}),C(A,T)}),C(_,S)},b=_=>{var S=Ae(),k=K(S);Ve(k,17,()=>t(c),We,(A,N,M)=>{var T=$f();B(T,"data-id",M);var P=X(T);bt(P,()=>e.tickLabels[M],!0),oe(()=>{B(T,"x",t(c)[M]),B(T,"y",t(u)[M]),B(T,"dx",t(d)),B(T,"dy",t(v)),B(T,"text-anchor",t(l))}),C(A,T)}),C(_,S)};Y(m,_=>{s()===2&&r()===4?_(w):s()===2&&r()===1?_(p,1):_(b,!1)})}oe(()=>ct(g,t(o))),C(n,g),ye()}const td=(n,e=it,r=it)=>{const s=h(()=>e().colmap.length);var l=id(),o=K(l);Ve(o,17,()=>e().colmap,We,(d,v,g)=>{const m=h(()=>r().start+g*r().width);var w=ld(),p=K(w),b=R(p);B(b,"dy",0);var _=X(b);bt(_,()=>e().labels[g],!0),oe(()=>{B(p,"x",t(m)),B(p,"y",r().top),B(p,"width",r().width),B(p,"height",r().height),B(p,"fill",t(v)),B(b,"x",t(m)),B(b,"y",r().ltop),B(b,"dx",r().dxl),B(b,"fill",e().labelColor),B(b,"font-size",e().fontSize+"em")}),C(d,w)});var a=R(o);{var c=d=>{const v=h(()=>r().start+t(s)*r().width);var g=od();B(g,"dx",0),B(g,"dy",0);var m=X(g);bt(m,()=>e().labels[t(s)],!0),oe(()=>{B(g,"x",t(v)),B(g,"y",r().ltop),B(g,"fill",e().labelColor),B(g,"font-size",`${e().fontSize??""}em`)}),C(d,g)};Y(a,d=>{e().isCentered||d(c)})}var u=R(a);{var f=d=>{const v=h(()=>r().start+t(s)*r().width);var g=ad(),m=X(g);bt(m,()=>_l(e().labelsFactor),!0),oe(()=>{B(g,"x",t(v)),B(g,"y",r().ltop),B(g,"fill",e().labelColor),B(g,"font-size",`${e().fontSize??""}em`)}),C(d,g)};Y(u,d=>{e().labelsFactor!==0&&d(f)})}C(n,l)};var rd=je('<text fill="crimson" text-anchor="middle"> </text>'),nd=je('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),sd=je("<!><!><!><!><!>",1),ld=je('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),od=je('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),ad=je('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),id=je("<!><!><!>",1),cd=je("<line></line>"),ud=je('<text dominant-baseline="middle" text-anchor="middle"> </text>'),fd=je('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),dd=je('<svg><rect height="100%" width="100%"></rect><!></svg>'),vd=je('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),hd=je('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),md=je('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),gd=je('<g class="plot-labels"><!><!><!></g>'),pd=je('<g class="axis x-axis"><!></g>'),bd=je('<g class="axis y-axis"><!></g>'),wd=je('<rect fill="transparent" id="axes-box"></rect>'),_d=je('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),yd=je('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),xd=je('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),kd=je('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),Ed=U('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),Sd=U('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),Ad=U(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Gn(n,e){_e(e,!0);const r=(Pe,Qe=it,Ze=it)=>{var Tt=Ae(),Ot=K(Tt);{var fr=St=>{var lt=Ae(),$e=K(lt);{var Lt=mt=>{var ut=rd(),br=X(ut);oe(()=>{B(ut,"x",t(Ee)[0]-10),B(ut,"y",t(de)),B(ut,"transform",`rotate(-90, ${t(Ee)[0]-10}, ${t(de)})`),Te(br,Ze().error)}),C(mt,ut)},_t=mt=>{var ut=nd(),br=X(ut);oe(()=>{B(ut,"x",t(ke)),B(ut,"y",t(Se)[0]),Te(br,Ze().error)}),C(mt,ut)};Y($e,mt=>{Ze().pos===4?mt(Lt):mt(_t,!1)})}C(St,lt)},Xr=St=>{var lt=sd(),$e=K(lt);{var Lt=Me=>{Sl(Me,{get lineCoords(){return Qe().grid},get lineColor(){return Et.MIDDLEGRAY},lineType:3})};Y($e,Me=>{Ze().showGrid&&Me(Lt)})}var _t=R($e);Sl(_t,{get lineCoords(){return Qe().axisLine},get lineColor(){return Et.DARKGRAY},lineType:1});var mt=R(_t);Sl(mt,{get lineCoords(){return Qe().tickCoords},get lineColor(){return Et.DARKGRAY},lineType:1});var ut=R(mt);{var br=Me=>{Wa(Me,{get las(){return Ze().las},get pos(){return Ze().pos},get tickCoords(){return Qe().tickCoords},get tickLabels(){return Qe().tickLabels},get tickColor(){return Et.DARKGRAY},get hideLast(){return Ze().hideLast}})};Y(ut,Me=>{Qe().tickCoords.length===2&&Qe().tickLabels.length===Qe().tickCoords[1][0].length&&Me(br)})}var $n=R(ut);{var rt=Me=>{{let Mt=h(()=>[Qe().tfLabel]);Wa(Me,{get pos(){return Ze().pos},get tickCoords(){return Qe().tfCoords},get tickLabels(){return t(Mt)},get textColor(){return Et.DARKGRAY}})}};Y($n,Me=>{Qe().tickFactor!==0&&Me(rt)})}C(St,lt)};Y(Ot,St=>{Ze().error?St(fr):St(Xr,!1)})}C(Pe,Tt)},s=(Pe,Qe=it,Ze=it)=>{const Tt=h(()=>Ze().elw+2*Ze().elp),Ot=h(()=>Ze().elp),fr=h(()=>Ze().elh),Xr=h(()=>Ze().ely);var St=dd(),lt=X(St),$e=R(lt);Ve($e,17,()=>Qe().items,We,(Lt,_t,mt)=>{var ut=fd();B(ut,"x",0);var br=X(ut);{var $n=gn=>{var At=cd();oe(()=>{B(At,"x1",t(Ot)),B(At,"x2",t(Tt)-t(Ot)),B(At,"y1",t(fr)[mt]/2),B(At,"y2",t(fr)[mt]/2),B(At,"stroke",t(_t).line.lineColor),B(At,"stroke-width",t(_t).line.lineWidth),B(At,"stroke-dasharray",t(V)[t(_t).line.lineType-1])}),C(gn,At)};Y(br,gn=>{t(_t).line&&gn($n)})}var rt=R(br);{var Me=gn=>{var At=ud(),X1=X(At);oe(()=>{B(At,"x",t(Tt)/2),B(At,"y",t(fr)[mt]/2),B(At,"fill",t(_t).point.faceColor),B(At,"stroke-width",t(_t).point.lineWidth),B(At,"stroke",t(_t).point.lineColor),B(At,"font-size",`${t(_t).point.markerSize??""}em`),Te(X1,Sn[t(_t).point.marker-1])}),C(gn,At)};Y(rt,gn=>{t(_t).point&&gn(Me)})}var Mt=R(rt),U1=X(Mt);bt(U1,()=>t(_t).label,!0),oe(()=>{B(ut,"y",t(Xr)[mt]),B(ut,"width",Ze().lgw),B(ut,"height",t(fr)[mt]),B(Mt,"x",t(Tt)+t(Ot)),B(Mt,"y",t(fr)[mt]/2),B(Mt,"fill",Et.LEGEND),B(Mt,"font-size",`${Qe().fontSize??""}em`)}),C(Lt,ut)}),oe(()=>{B(St,"x",Ze().lgl),B(St,"y",Ze().lgt),B(St,"height",Ze().lgh),B(St,"width",Ze().lgw),B(lt,"fill",Qe().faceColor),B(lt,"stroke",Qe().lineColor),B(lt,"stroke-width",Qe().lineWidth)}),C(Pe,St)};let l=D(e,"limX",19,()=>[0,1]),o=D(e,"limY",19,()=>[0,1]),a=D(e,"margins",19,()=>[1,1.1,.55,.6]),c=D(e,"downloadLinks",3,"none"),u=D(e,"fileName",3,"plot"),f=D(e,"pngWidth",3,8),d=D(e,"pngHeight",3,8),v=D(e,"pngRes",3,300),g=D(e,"clipboardWidth",3,1200),m=D(e,"clipboardHeight",3,800),w=D(e,"onclick",3,null),p=D(e,"onmousemove",3,null),b=D(e,"onmousedown",3,null),_=D(e,"onmouseup",3,null);function S(Pe,Qe){if(Qe&&Pe.target.id=="axes-box"){const Ze=Ia([Pe.offsetX-t(J)],t(ue))[0],Tt=Ia([Pe.offsetY-t(I)],t(se))[0];Qe(Ze,Tt)}}function k(Pe){Pe.preventDefault(),S(Pe,b())}function A(Pe){Pe.preventDefault(),S(Pe,_())}function N(Pe){Pe.preventDefault(),S(Pe,p())}function M(Pe){Pe.preventDefault(),S(Pe,w())}async function T(Pe){Vf(Pe.target,t(y),g(),m())}function P(){If(t(y),u())}function L(){Of(t(y),u(),f(),d(),v())}const E="plottingArea"+Math.round(Math.random()*1e4);let y=re(0),F=re(0),H=re(0);const q=h(()=>({plot:Mf(t(F),t(H)),x:Ha(t(F)),y:Ha(t(H))})),j=h(()=>a().map(Pe=>Pe*Sf[t(q).plot])),O=h(()=>Nf[t(q).plot]),G=h(()=>bl[t(q).plot]),V=h(()=>Un[t(q).plot]),Q=h(()=>t(he).show&&t(he).label!==""?t(O)*1.5:0),J=h(()=>t(ve).show&&t(ve).label!==""?t(O)*1.5:0),I=h(()=>e.title&&e.title!==""?t(O)*1.5:0),W=h(()=>t(F)>t(J)?t(F)-t(J):0),$=h(()=>t(H)>t(Q)+t(I)?t(H)-t(Q)-t(I):0),te=h(()=>t($)-t(j)[0]-t(j)[2]),ae=h(()=>t(W)-t(j)[1]-t(j)[3]),fe=h(()=>Fa(l(),2)&&Fa(o(),2)&&t(W)>t(j)[1]+t(j)[3]&&t($)>t(j)[0]+t(j)[2]),ue=h(()=>t(fe)?{coords:[t(ae)/(l()[1]-l()[0]),l()[0],t(j)[1]],objects:[t(ae)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),se=h(()=>t(fe)?{coords:[-t(te)/(o()[1]-o()[0]),o()[1],t(j)[2]],objects:[t(te)/(o()[1]-o()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),de=h(()=>t(te)*.5+t(I)+t(j)[2]),ke=h(()=>t(ae)*.5+t(J)+t(j)[1]),Ee=h(()=>t(fe)?ot(l(),t(ue)):[0,1]),Se=h(()=>t(fe)?ot(o(),t(se)):[1,0]),Ke=h(()=>Hr(e.title)),ie=h(()=>t(Ke)?t(Ke).length===e.title.left?1:1.4:0);let le=re(Re({show:!1})),he=re(Re({show:!1,error:""})),ve=re(Re({show:!1,error:""})),be=re(Re({show:!1,colmap:null,breaks:null})),we=re(Re({show:!1,items:null,position:null}));const Ie=h(()=>t(fe)&&t(be)&&t(be).show?Hf(t(be)):null),Je=h(()=>t(fe)&&t(he).show?Df(l(),o(),t(q),t(se),t(he)):null),He=h(()=>t(fe)&&t(ve).show?Yf(l(),o(),t(q),t(ue),t(ve)):null),Z=h(()=>t(fe)&&t(Ie)?Wf(t(Ie),t(ae),t(j),t(q)):null),ee=h(()=>t(fe)&&t(we)&&t(we).show&&t(Ee)?Gf(t(we),t(Ee),t(Se),t(O),t(G)):null);tc("axes",{setBox:Pe=>z(le,Pe,!0),setXAxis:Pe=>z(he,Pe,!0),setYAxis:Pe=>z(ve,Pe,!0),setColmapLegend:Pe=>z(be,Pe,!0),setGroupLegend:Pe=>z(we,Pe,!0),scales:()=>t(q),tX:()=>t(ue),tY:()=>t(se),limX:()=>l(),limY:()=>o()});var ne=Ad();let me;var ge=X(ne),Le=R(X(ge));{var qe=Pe=>{var Qe=gd(),Ze=X(Qe);{var Tt=lt=>{var $e=vd();B($e,"dx",0),B($e,"dy",0);var Lt=X($e);bt(Lt,()=>t(he).label,!0),oe(()=>{B($e,"x",t(ke)),B($e,"y",t($)+t(I))}),C(lt,$e)};Y(Ze,lt=>{t(he).show&&t(he).label&&t(he).label!==""&&lt(Tt)})}var Ot=R(Ze);{var fr=lt=>{var $e=hd();B($e,"dx",0),B($e,"dy",0);var Lt=X($e);bt(Lt,()=>t(ve).label,!0),oe(()=>{B($e,"x",t(O)/1.1*t(ve).labelHeight),B($e,"y",t(de)),B($e,"transform",`rotate(-90, ${t(O)*t(ve).labelHeight/1.1}, ${t(de)})`)}),C(lt,$e)};Y(Ot,lt=>{t(ve).show&&t(ve).label&&t(ve).label!==""&&lt(fr)})}var Xr=R(Ot);{var St=lt=>{var $e=md();B($e,"dx",0),B($e,"dy",0);var Lt=X($e);bt(Lt,()=>t(Ke),!0),oe(()=>{B($e,"x",t(ke)),B($e,"y",t(O)*t(ie))}),C(lt,$e)};Y(Xr,lt=>{t(Ke)&&t(Ke)!==""&&lt(St)})}C(Pe,Qe)};Y(Le,Pe=>{t(fe)&&Pe(qe)})}var Fe=R(Le),ze=X(Fe),Oe=X(ze),at=X(Oe),pr=R(ze);{var Bl=Pe=>{var Qe=kd(),Ze=K(Qe);{var Tt=rt=>{var Me=pd(),Mt=X(Me);r(Mt,()=>t(Je),()=>t(he)),C(rt,Me)};Y(Ze,rt=>{t(he).show&&t(Je)&&rt(Tt)})}var Ot=R(Ze);{var fr=rt=>{var Me=bd(),Mt=X(Me);r(Mt,()=>t(He),()=>t(ve)),C(rt,Me)};Y(Ot,rt=>{t(ve).show&&t(He)&&rt(fr)})}var Xr=R(Ot),St=X(Xr);{var lt=rt=>{var Me=wd();oe(()=>{B(Me,"stroke",t(le).lineColor),B(Me,"stroke-width",`${t(le).lineWidth??""}px`),B(Me,"x",t(Ee)[0]),B(Me,"y",t(Se)[1]),B(Me,"width",t(Ee)[1]-t(Ee)[0]),B(Me,"height",t(Se)[0]-t(Se)[1])}),Ne("keydown",Me,M),Ne("click",Me,M),Ne("mousemove",Me,N),Ne("mousedown",Me,k),Ne("mouseup",Me,A),C(rt,Me)},$e=rt=>{var Me=_d();oe(()=>{B(Me,"x",t(Ee)[0]),B(Me,"y",t(Se)[1]),B(Me,"width",t(Ee)[1]-t(Ee)[0]),B(Me,"height",t(Se)[0]-t(Se)[1])}),Ne("keydown",Me,M),Ne("click",Me,M),Ne("mousemove",Me,N),Ne("mousedown",Me,k),Ne("mouseup",Me,A),C(rt,Me)};Y(St,rt=>{t(le).show?rt(lt):rt($e,!1)})}var Lt=R(Xr),_t=X(Lt);gr(_t,()=>e.children??it);var mt=R(Lt);{var ut=rt=>{var Me=yd(),Mt=X(Me);td(Mt,()=>t(Ie),()=>t(Z)),C(rt,Me)};Y(mt,rt=>{t(Z)&&rt(ut)})}var br=R(mt);{var $n=rt=>{var Me=xd(),Mt=X(Me);s(Mt,()=>t(we),()=>t(ee)),C(rt,Me)};Y(br,rt=>{t(ee)&&rt($n)})}oe(()=>B(Lt,"clip-path",`url(#${E})`)),C(Pe,Qe)};Y(pr,Pe=>{t(fe)&&Pe(Bl)})}on(ge,Pe=>z(y,Pe),()=>t(y));var Nt=R(ge,2);{var wt=Pe=>{var Qe=Ed();C(Pe,Qe)},ht=Pe=>{var Qe=Sd(),Ze=X(Qe),Tt=R(Ze,2),Ot=R(Tt,2);Ne("click",Ze,P),Ne("keydown",Ze,P),Ne("click",Tt,L),Ne("keydown",Tt,L),Ne("click",Ot,T),Ne("keydown",Ot,T),C(Pe,Qe)};Y(Nt,Pe=>{t(fe)?Pe(ht,!1):Pe(wt)})}oe(()=>{me=dt(ne,1,`plot-container show-download-links-${c()??""}`,"svelte-1t5q9z1",me,{"plot-error":!t(fe)}),ct(ge,`font-size:${t(O)??""}px`),B(Fe,"x",t(J)),B(Fe,"y",t(I)),B(Fe,"width",t(W)),B(Fe,"height",t($)),B(Oe,"id",E),B(at,"x",t(Ee)[0]),B(at,"y",t(Se)[1]),B(at,"width",t(Ee)[1]-t(Ee)[0]),B(at,"height",t(Se)[0]-t(Se)[1])}),na(ge,"clientWidth",Pe=>z(F,Pe)),na(ge,"clientHeight",Pe=>z(H,Pe)),C(n,ne),ye()}st(["keydown","click","mousemove","mousedown","mouseup"]);function Kn(n,e){_e(e,!0);let r=D(e,"las",3,1),s=D(e,"whole",3,!1),l=D(e,"show",3,!0),o=D(e,"showGrid",3,!1);const a=Pt("axes");pe(()=>{const c=Hr(e.label),u=c?c.length===e.label.length?1:1.4:0;let f,d="";e.ticks&&([f,d]=Da(e.ticks,a.limX()));let v;!d&&e.tickLabels&&([v,d]=Ba(e.tickLabels,f)),a.setXAxis({show:l(),error:d,label:c,ticks:f,labelHeight:u,showGrid:o(),las:r(),whole:s(),tickLabels:v})}),ye()}function _s(n,e){_e(e,!0);let r=D(e,"las",3,1),s=D(e,"whole",3,!1),l=D(e,"show",3,!0),o=D(e,"showGrid",3,!1);const a=Pt("axes");pe(()=>{const c=Hr(e.label),u=c?c.length===e.label.length?1:1.4:0;let f,d="";e.ticks&&([f,d]=Da(e.ticks,a.limY()));let v;!d&&e.tickLabels&&([v,d]=Ba(e.tickLabels,f)),a.setYAxis({show:l(),error:d,label:c,ticks:f,labelHeight:u,showGrid:o(),las:r(),whole:s(),tickLabels:v,pos:4})}),ye()}function Jn(n,e){_e(e,!0);let r=D(e,"lineWidth",3,1),s=D(e,"lineColor",3,"#606060");const l=Pt("axes");pe(()=>{l.setBox({show:!0,lineWidth:r(),lineColor:s()})}),ye()}var Cd=je("<rect></rect>"),Nd=je("<g></g>");function Ht(n,e){_e(e,!0);let r=D(e,"faceColor",19,()=>Et.PRIMARY),s=D(e,"lineColor",19,r),l=D(e,"lineWidth",3,1),o=D(e,"className",3,"series-rect");const a=h(()=>jt(e.left,"Rectangles (left)")),c=h(()=>t(a)?jt(e.top,"Rectangles (top)",t(a).length):null),u=h(()=>t(c)?typeof e.width!="object"?Ce.fill(e.width,t(a).length):e.width:null),f=h(()=>t(c)?typeof e.height!="object"?Ce.fill(e.height,t(a).length):e.height:null),d=Pt("axes"),v=h(()=>t(a)?ot(t(a),d.tX()):null),g=h(()=>t(c)?ot(t(c),d.tY()):null),m=h(()=>t(u)?Xn(t(u),d.tX()):null),w=h(()=>t(f)?Xn(t(f),d.tY()):null),p=h(()=>`fill:${r()};stroke:${s()};stroke-width:${l()}px;`),b=h(()=>t(v)&&t(g)&&t(m)&&t(w)&&t(m).length===t(v).length&&t(w).length===t(v).length);var _=Ae(),S=K(_);{var k=A=>{var N=Nd();Ve(N,21,()=>e.left,We,(M,T,P)=>{var L=Cd();oe(()=>{B(L,"x",t(v)[P]),B(L,"y",t(g)[P]),B(L,"width",t(m)[P]),B(L,"height",t(w)[P])}),C(M,L)}),oe(()=>{dt(N,0,`series ${o()??""}`),ct(N,t(p))}),Ne("click",N,M=>hn(M,"rect",e.onclick)),C(A,N)};Y(S,A=>{t(b)&&A(k)})}C(n,_),ye()}st(["click"]);var Td=je("<line></line>"),Pd=je('<g class="series series-segment"></g>');function Wr(n,e){_e(e,!0);let r=D(e,"lineColor",19,()=>Et.PRIMARY),s=D(e,"lineType",3,1),l=D(e,"lineWidth",3,1);const o=h(()=>jt(e.xStart,"Segments")),a=h(()=>t(o)?jt(e.yStart,"Segments",t(o).length):null),c=h(()=>t(a)?jt(e.xEnd,"Segments",t(o).length):null),u=h(()=>t(c)?jt(e.yEnd,"Segments",t(o).length):null),f=Pt("axes"),d=h(()=>t(o)?ot(t(o),f.tX()):null),v=h(()=>t(c)?ot(t(c),f.tX()):null),g=h(()=>t(a)?ot(t(a),f.tY()):null),m=h(()=>t(u)?ot(t(u),f.tY()):null),w=h(()=>`stroke:${r()};stroke-width: ${l()}px;stroke-dasharray:${Un[f.scales().plot][s()-1]}`),p=h(()=>t(d)&&t(v)&&t(g)&&t(m));var b=Ae(),_=K(b);{var S=k=>{var A=Pd();Ve(A,21,()=>t(d),We,(N,M,T)=>{var P=Td();oe(()=>{B(P,"x1",t(d)[T]),B(P,"x2",t(v)[T]),B(P,"y1",t(g)[T]),B(P,"y2",t(m)[T])}),C(N,P)}),oe(()=>ct(A,t(w))),Ne("click",A,N=>hn(N,"line",e.onclick)),C(k,A)};Y(_,k=>{t(p)&&k(S)})}C(n,b),ye()}st(["click"]);var jd=je("<text><!></text>"),Ld=je("<text><!></text>"),Md=je("<text><!></text>"),Rd=je('<g class="series series-textlabels"><!></g>');function An(n,e){_e(e,!0);let r=D(e,"pos",3,0),s=D(e,"faceColor",19,()=>Et.PRIMARY_TEXT),l=D(e,"lineColor",3,"transparent"),o=D(e,"lineWidth",3,0),a=D(e,"textSize",3,1),c=D(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],f=h(()=>jt(e.xValues,"TextLabels")),d=h(()=>t(f)?jt(e.yValues,"TextLabels",t(f).length):null),v=h(()=>t(d)?Array.isArray(e.labels)&&e.labels.length!==t(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),g=h(()=>t(v)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),m=Pt("axes"),w=h(()=>t(f)&&t(g)!==null?ot(t(f),m.tX()):null),p=h(()=>t(d)&&t(w)?ot(t(d),m.tY()):null),b=h(()=>wl[m.scales().plot]),_=h(()=>[0,0,-t(b),0,t(b),t(b)]),S=h(()=>[0,t(b),0,-t(b),0,t(b)]),k=h(()=>`fill:${s()};stroke-width:${o()}px;stroke:${l()};font-size:${a()}em;`),A=h(()=>t(w)&&t(p)&&t(g)!==null&&t(v)&&t(w).length===t(p).length);var N=Ae(),M=K(N);{var T=P=>{var L=Rd(),E=X(L);{var y=j=>{var O=Ae(),G=K(O);Ve(G,17,()=>t(w),We,(V,Q,J)=>{var I=jd();B(I,"data-id",J);var W=X(I);bt(W,()=>e.labels,!0),oe(()=>{B(I,"x",t(w)[J]),B(I,"y",t(p)[J]),B(I,"dx",t(_)[r()]),B(I,"dy",t(S)[r()]),B(I,"transform",c()!==void 0?`rotate(${c()}, ${t(w)[J]+t(_)[r()]}, ${t(p)[J]+t(S)[r()]})`:""),B(I,"text-anchor",u[r()[J]])}),C(V,I)}),C(j,O)},F=j=>{var O=Ae(),G=K(O);Ve(G,17,()=>t(w),We,(V,Q,J)=>{var I=Ld();B(I,"data-id",J);var W=X(I);bt(W,()=>e.labels[J],!0),oe(()=>{B(I,"x",t(w)[J]),B(I,"y",t(p)[J]),B(I,"dx",t(_)[r()[J]]),B(I,"dy",t(S)[r()[J]]),B(I,"transform",c()!==void 0?`rotate(${c()}, ${t(w)[J]+t(_)[r()]}, ${t(p)[J]+t(S)[r()]})`:""),B(I,"text-anchor",u[r()[J]])}),C(V,I)}),C(j,O)},H=h(()=>Array.isArray(r())||ArrayBuffer.isView(r())),q=j=>{var O=Ae(),G=K(O);Ve(G,17,()=>t(w),We,(V,Q,J)=>{var I=Md();B(I,"data-id",J);var W=X(I);bt(W,()=>e.labels[J],!0),oe(()=>{B(I,"x",t(w)[J]),B(I,"y",t(p)[J]),B(I,"dx",t(_)[r()]),B(I,"dy",t(S)[r()]),B(I,"transform",c()!==void 0?`rotate(${c()}, ${t(w)[J]+t(_)[r()]}, ${t(p)[J]+t(S)[r()]})`:""),B(I,"text-anchor",u[r()])}),C(V,I)}),C(j,O)};Y(E,j=>{typeof e.labels=="string"?j(y):t(H)?j(F,1):j(q,!1)})}oe(()=>ct(L,t(k))),Ne("click",L,j=>hn(j,"text",e.onclick)),C(P,L)};Y(M,P=>{t(A)&&P(T)})}C(n,N),ye()}st(["click"]),st(["click"]);var qd=je("<text> </text>"),Fd=je('<g text-anchor="middle"></g>');function Al(n,e){_e(e,!0);let r=D(e,"marker",3,1),s=D(e,"faceColor",3,"transparent"),l=D(e,"lineColor",19,()=>Et.PRIMARY),o=D(e,"lineWidth",3,1),a=D(e,"markerSize",3,1);const c=h(()=>typeof r()!="number"||r()<1||r()>Sn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+Sn.length+"."),null):Sn[r()-1]),u=h(()=>jt(e.xValues,"Points")),f=h(()=>t(u)?jt(e.yValues,"Points",t(u).length):null),d=Pt("axes"),v=h(()=>t(u)?ot(t(u),d.tX()):null),g=h(()=>t(v)&&t(f)?ot(t(f),d.tY()):null),m=h(()=>["＋","✳","✕"].includes(t(c))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${a()}em;`:`fill:${s()};stroke-width:${o()}px;stroke:${l()}; font-size:${a()}em;`),w=h(()=>["◼","⬥","＋","✳","✕"].includes(t(c))?"series-points2":"series-points1"),p=h(()=>t(v)&&t(g)&&t(v).length===t(g).length);var b=Ae(),_=K(b);{var S=k=>{var A=Fd();Ve(A,21,()=>t(v),We,(N,M,T)=>{var P=qd(),L=X(P);oe(()=>{B(P,"x",t(v)[T]),B(P,"y",t(g)[T]),Te(L,t(c))}),C(N,P)}),oe(()=>{dt(A,0,`series series-points ${t(w)??""}`),ct(A,t(m))}),Ne("click",A,N=>hn(N,"text",e.onclick)),C(k,A)};Y(_,k=>{t(p)&&k(S)})}C(n,b),ye()}st(["click"]);var zd=je('<g class="series series-line"><polyline class="line"></polyline></g>');function ur(n,e){_e(e,!0);let r=D(e,"lineColor",19,()=>Et.PRIMARY),s=D(e,"lineType",3,1),l=D(e,"lineWidth",3,1);const o=h(()=>jt(e.xValues,"Lines")),a=h(()=>t(o)?jt(e.yValues,"Lines",t(o).length):null),c=Pt("axes"),u=h(()=>t(o)&&t(a)?xl(t(o),t(a),c.tX(),c.tY()):null),f=h(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${Un[c.scales().plot][s()-1]}`);var d=Ae(),v=K(d);{var g=m=>{var w=zd(),p=X(w);oe(()=>{ct(w,t(f)),B(p,"points",t(u))}),Ne("click",w,b=>hn(b,"polyline",e.onclick)),C(m,w)};Y(v,m=>{t(u)&&m(g)})}C(n,d),ye()}st(["click"]);var Od=je('<polyline class="line"></polyline>'),Id=je('<g class="series series-multiline"></g>');function Cl(n,e){_e(e,!0);let r=D(e,"lineColor",19,()=>Et.PRIMARY),s=D(e,"lineType",3,1),l=D(e,"lineWidth",3,1);const o=h(()=>jt(e.xValues,"Multilines")),a=h(()=>t(o)?zt(e.yValues)?(t(o).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),c=Pt("axes"),u=h(()=>{if(!t(o)||!t(a))return null;const m=new Array(t(a).ncols);for(let w=0;w<m.length;w++)m[w]=xl(t(o),t(a).getcolumn(w+1),c.tX(),c.tY());return m}),f=h(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${Un[c.scales().plot][s()-1]}`);var d=Ae(),v=K(d);{var g=m=>{var w=Id();Ve(w,21,()=>t(u),We,(p,b)=>{var _=Od();oe(()=>B(_,"points",t(b))),C(p,_)}),oe(()=>ct(w,t(f))),Ne("click",w,p=>hn(p,"polyline",e.onclick)),C(m,w)};Y(v,m=>{t(u)&&t(u).length>0&&m(g)})}C(n,d),ye()}st(["click"]);function Vd(...n){const e=n.length,r=n.map(a=>a.length);let s=el(r),l=Array(e),o=1;for(let a=0;a<e;a++){const c=Be(n[a])?n[a]:Ge(n[a]),u=c.length;s=s/u,l[a]=c.subset(De.seq(1,u).repeach(o).rep(s)),o=o*u}return l}var Bd=je("<rect></rect>"),Dd=je('<g title="heatmap-group"><!></g>'),Yd=je('<g class="heatmap" style="stroke:0;stroke-width:0px;"></g>');function Ua(n,e){_e(e,!0);let r=D(e,"colmap",3,null),s=D(e,"onclick",3,null),l=h(()=>zt(e.values)&&e.values.nrows>0&&e.values.ncols>0?e.values:null),o=h(()=>t(l)?e.breaks&&Array.isArray(e.breaks)?e.breaks:e.breaks&&Be(e.breaks)?e.breaks.v:$s(t(l).v,jf).v:null),a=h(()=>r()?Array.isArray(r())?r().length!==e.breaks.length-1?(console.error("Heatmap: number of color values in colormap does not match number of intervals defined by breaks."),null):r():(console.error('Heatmap: parameter "colmap" must be array with colors.'),null):El(t(o).length-1)),c=h(()=>t(l)?qa(t(l).ncols):null),u=h(()=>t(l)?qa(t(l).nrows):null),f=h(()=>t(c)&&t(u)?Vd(t(u),t(c)):null),d=h(()=>{if(!t(f)||!t(o)||!t(a))return null;const[N,M]=t(f),T=M.length,P=t(o).length,L=Array(P).fill().map(()=>[]),E=Array(P).fill().map(()=>[]),y=t(o).slice(),F=y[1]-y[0];y[0]=y[0]-.1*F,y[P-1]=y[P-1]+.1*F;for(let H=0;H<T;H++){const q=t(l).v[H];for(let j=0;j<P-1;j++)if(q>y[j]&&q<=y[j+1]){L[j].push(M.v[H]-.5),E[j].push(t(l).nrows-N.v[H]+1.5);break}}return{rl:L,rt:E}});const v=Pt("axes");let g=h(()=>t(d)?t(d).rl.map(N=>N.length>0?ot(N,v.tX()):[]):null),m=h(()=>t(d)?t(d).rt.map(N=>N.length>0?ot(N,v.tY()):[]):null),w=h(()=>Xn([1],v.tX())),p=h(()=>Xn([1],v.tY()));function b(N){if(!s()||typeof s()!="function")return;const M=N.target;if(M.tagName!=="rect")return;const P=M.parentNode.parentNode.getBoundingClientRect(),L=M.getBoundingClientRect(),E=L.x-P.x+L.width*.2,y=L.y-P.y+L.height*.2;s()(Math.abs(Math.round(y/L.height)),Math.abs(Math.round(E/L.width))),N.stopPropagation()}let _=h(()=>t(g)&&t(m)&&t(g).length===t(m).length);var S=Ae(),k=K(S);{var A=N=>{var M=Yd();Ve(M,21,()=>t(a),We,(T,P,L)=>{var E=Dd(),y=X(E);{var F=H=>{var q=Ae(),j=K(q);Ve(j,17,()=>t(g)[L],We,(O,G,V,Q)=>{var J=Bd();oe(()=>{B(J,"x",t(g)[L][V]),B(J,"y",t(m)[L][V]),B(J,"width",t(w)),B(J,"height",t(p))}),C(O,J)}),C(H,q)};Y(y,H=>{t(g)[L].length>0&&H(F)})}oe(()=>ct(E,`fill:${t(P)??""};`)),C(T,E)}),Ne("click",M,b),C(N,M)};Y(k,N=>{t(_)&&N(A)})}C(n,S),ye()}st(["click"]);function Xa(n,e){_e(e,!0);let r=D(e,"show",3,!0),s=D(e,"position",3,"topleft"),l=D(e,"lineColor",19,()=>Et.LEGEND),o=D(e,"lineWidth",3,1),a=D(e,"faceColor",3,"#fff"),c=D(e,"fontSize",3,.85);function u(v){return typeof v!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(v)?v:(console.error('Legend: wrong value of "position" property'),null)}function f(v){if(!v||!Array.isArray(v)||v.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let g=0;g<v.length;g++){const m=v[g];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const w=Hr(m.label),p=w.length===m.label?1:1.4;m.label=w,m.labelHeight=p,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(g+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:Et.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=Sn.length||console.error('Legend: parameter "marker" for legend item '+(g+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.markerSize=m.point.markerSize?m.point.markerSize:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:Et.PRIMARY)}return v}const d=Pt("axes");pe(()=>{const v=f(e.items),g=u(s());d.setGroupLegend(v&&g?{show:r(),position:s(),items:e.items,lineColor:l(),faceColor:a(),lineWidth:o(),fontSize:c()}:{show:!1,position:null,items:null})}),ye()}function Cn(n,e){_e(e,!0);let r=D(e,"show",3,!0),s=D(e,"labels",3,null),l=D(e,"labelColor",19,()=>Et.CLEGEND_LABELS),o=D(e,"fontSize",3,.85);const a=Pt("axes");pe(()=>{a.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:l(),fontSize:o()})}),ye()}const Hd=n=>n;function Ga(n,{delay:e=0,duration:r=400,easing:s=Hd}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:r,easing:s,css:o=>`opacity: ${o*l}`}}var Wd=U('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function Nl(n,e){_e(e,!0);let r=D(e,"isDark",3,!1);function s(v){v.key==="Escape"&&e.closeModal()}var l=Wd();nn("keydown",Rs,s);let o;var a=X(l),c=X(a),u=X(c),f=R(c,2),d=X(f);gr(d,()=>e.children),oe(()=>o=dt(l,1,"drop svelte-oie633",null,o,{isdark:r()})),Ne("click",u,function(...v){e.closeModal?.apply(this,v)}),$o(7,l,()=>Ga),C(n,l),ye()}st(["click"]);const Ud=[1,1.1,.45,.4],mn={cal:1,pv:2,test:2,new:2},Ur={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},Ka={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Xd={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},Tl="#808090",Ja="#a0a0a0",Za="#909090",Zn="#909090",Qa=8,Gd=8,Kd=8,Jd=600;function Zd(n,e,r){const s=e.length,l=new Array(n.length),o=e[1]-e[0];for(let a=0;a<n.length;a++)for(let c=0;c<s-1;c++){const u=n[a]>=e[c],f=c===s-2?n[a]<e[c+1]+o:n[a]<e[c+1];if(u&&f){l[a]=r[c];break}}return l}function $a(n,e,r,s){if(!n||!e)return null;const l=n.length;let o=Ce.zeros(l),a=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;if(s==="log")for(let u=0;u<l;u++){const f=Math.log(1+n[u]/r);o.v[u]=f,a=Math.max(a,f),c=Math.min(c,f)}else for(let u=0;u<l;u++){const f=n[u]/r;o.v[u]=f,a=Math.max(a,f),c=Math.min(c,f)}return{values:o,min:c,max:a}}function ei(n,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[n]+", "+(e==="log"?"log(1 + "+n+"/"+n+"0)":n+"/"+n+"0")}function ti(n,e,r,s){const o=e+r,c=un(n,o)/r,u=-e/r,f=-c/u,d=Ce.seq(0,f*1,f/100),v=d.apply(g=>g*u+c);return{x:s==="log"?d.apply(g=>Math.log(1+g)):d,y:s==="log"?v.apply(g=>Math.log(1+g)):v}}function ri(n,e=Xd){return n?n.map(r=>({id:r,label:r,point:{marker:mn[r],faceColor:e[r],lineColor:Ur[r],markerSize:mn[r]===1?.85:.65,lineWidth:1.5}})):null}function ni(n,e,r){if(!n)return[0,1];if(e==="p")return or(n);if(e==="h")return n.length<20?[.5,n.length+.5]:or(n,.05);const s=or(n,0),l=Math.abs((s[1]-s[0])*.1);return r?[s[1]+l,s[0]-l]:[s[0]-l,s[1]+l]}var Qd=U("<!> <!> <!> <!>",1);function Mr(n,e){let r=D(e,"whole",3,!1),s=an(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Gn(n,Tr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return Ud},get pngWidth(){return Gd},get pngHeight(){return Kd},get pngRes(){return Jd}},()=>s,{children:(l,o)=>{var a=Qd(),c=K(a);gr(c,()=>e.children);var u=R(c,2);Kn(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var f=R(u,2);_s(f,{showGrid:!0,get label(){return e.yLabel}});var d=R(f,2);Jn(d,{}),C(l,a)},$$slots:{default:!0}}))}var $d=U("<!> <!> <!>",1),ev=U("<!> <!> <!> <!> <!>",1),tv=U("<div><!></div>"),rv=U('<div class="wrapper svelte-1di9qjd"><div class="plot-container svelte-1di9qjd" role="tooltip"><!></div> <div class="msg-select svelte-1di9qjd">click inside the plot to see a variable label</div> <div class="plot-controls svelte-1di9qjd"><div><!></div> <!></div></div>');function Pl(n,e){_e(e,!0);let r=D(e,"outliers",19,()=>[]),s=D(e,"ind",3,null),l=D(e,"model_getter",3,Eu),o=D(e,"res_getter",3,wa),a=re("residual"),c=re(-1);const u=h(()=>e.res?Object.keys(e.res):null);let f=re(Re(t(u)?t(u)[0]:null));function d($){if($.target.tagName!=="rect"){z(c,-1);return}const te=Array.from($.target.parentNode.children).indexOf($.target);if(te<0){z(c,-1);return}t(c)!==te&&z(c,te,!0)}const v=h(()=>{if(!e.model)return null;const $=e.model.nresp?e.model.nresp:0,te=Ge(e.model.varvalues.filter((Ee,Se)=>Se>=$)),ae=te.length,fe=(te.v[1]-te.v[0])/2,ue=(te.v[ae-1]-te.v[ae-2])/2,se=[te.v[0],te.v[ae-1]],de=[se[0]-fe,se[1]+ue],ke=(se[1]-se[0])/ae;return{values:te,lim:de,width:ke,hwidth:ke*.5}}),g=h(()=>t(v)?t(v).values.apply($=>$-t(v).hwidth):null),m=h(()=>t(f)?e.res[t(f)]:null),w=h(()=>t(m)?new xe(o()(t(m),"T"),t(m).nrows,t(m).ncomp):null),p=h(()=>t(m)?new xe(o()(t(m),"E"),t(m).nrows,t(m).npred).t():null),b=h(()=>e.model?new xe(l()(e.model,"P"),e.model.npred?e.model.npred:e.model.ncols,e.model.ncomp):null),_=h(()=>e.ncomp?De.seq(1,e.ncomp):null),S=h(()=>e.ncomp<e.model.ncomp?De.seq(e.ncomp+1,e.model.ncomp):null),k=h(()=>s()?s():De.seq(1,t(m).nrows)),A=h(()=>t(w)&&t(_)?t(w).subset(null,t(_)):null),N=h(()=>t(w)&&t(_)?t(b).subset(null,t(_)):null),M=h(()=>t(w)&&t(S)?t(w).subset(null,t(S)):null),T=h(()=>t(w)&&t(S)?t(b).subset(null,t(S)):null),P=h(()=>t(A)&&t(N)?da(t(N),t(A)):null),L=h(()=>t(M)&&t(T)?da(t(T),t(M)).add(t(p)):t(p)),E=h(()=>t(P)&&t(L)?t(P).add(t(L)):null);let y=h(()=>t(P)?t(P).getcolumn(e.selected+1):null),F=h(()=>t(L)?t(L).getcolumn(e.selected+1):null),H=h(()=>t(E)?t(E).getcolumn(e.selected+1):null),q=h(()=>{if(!t(y)||!t(F)||!t(H))return null;const $=t(a)==="explained"?{all:t(P),sel:t(y),label:"Explained part, TP^T"}:t(a)==="residual"?{all:t(L),sel:t(F),label:"Residuals, E"}:{all:t(E),sel:t(H),label:"Preprocessed data, X"},te=Br($.all.v),ae=te[1]-te[0],fe=[te[0]-ae/50,te[1]+ae/12],ue=Ce.fill(te[1],$.sel.length);return $.lim=fe,$.top=ue,$.height=ae,$});const j=h(()=>t(v)&&t(c)>=0?t(v).values.v[t(c)]:null),O=h(()=>t(q)&&t(c)>=0?t(q).sel.v[t(c)]:null),G=h(()=>e.model&&t(c)>=0?e.model.varlabels[t(c)]:null),V=h(()=>t(m)&&e.selected>=0?`Object ${t(m).objlabels[e.selected].replace("_","-")}`:null),Q=h(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var J=Ae(),I=K(J);{var W=$=>{Nl($,{get closeModal(){return e.closeModal},children:(te,ae)=>{var fe=rv(),ue=X(fe),se=X(ue);Mr(se,{get title(){return t(V)},get yLabel(){return t(q).label},get xLabel(){return t(Q)},get limY(){return t(q).lim},get limX(){return t(v).lim},fileName:"plot-contributions",children:(ie,le)=>{var he=ev(),ve=K(he);{var be=me=>{{let ge=h(()=>t(q).all.subset(null,t(k)));Cl(me,{get xValues(){return t(v).values},get yValues(){return t(ge)},lineColor:"#e0e0e0"})}},we=me=>{Cl(me,{get xValues(){return t(v).values},get yValues(){return t(q).all},lineColor:"#e0e0e0"})};Y(ve,me=>{t(k)?me(be):me(we,!1)})}var Ie=R(ve,2);{var Je=me=>{var ge=Ae(),Le=K(ge);Ve(Le,17,r,We,(qe,Fe,ze,Oe)=>{{let at=h(()=>t(q).all.getcolumn(t(Fe)+1));ur(qe,{get xValues(){return t(v).values},get yValues(){return t(at)},lineColor:"#ffdd88"})}}),C(me,ge)};Y(Ie,me=>{r().length>0&&me(Je)})}var He=R(Ie,2);ur(He,{get xValues(){return t(v).values},get yValues(){return t(q).sel},lineColor:"crimson"});var Z=R(He,2);Ht(Z,{get left(){return t(g)},get top(){return t(q).top},get height(){return t(q).height},get width(){return t(v).width},faceColor:"transparent",borderColor:"transparent"});var ee=R(Z,2);{var ne=me=>{var ge=$d(),Le=K(ge);{let ze=h(()=>[t(j)]),Oe=h(()=>[t(q).top.v[0]]),at=h(()=>[t(G)]);An(Le,{get xValues(){return t(ze)},get yValues(){return t(Oe)},get labels(){return t(at)},pos:3,textSize:.85})}var qe=R(Le,2);{let ze=h(()=>[t(j)]),Oe=h(()=>[t(O)]);Al(qe,{get xValues(){return t(ze)},get yValues(){return t(Oe)},faceColor:"crimson",lineColor:"crimson"})}var Fe=R(qe,2);{let ze=h(()=>[t(g).v[t(c)]]),Oe=h(()=>[t(q).top.v[t(c)]]);Ht(Fe,{get left(){return t(ze)},get top(){return t(Oe)},get height(){return t(q).height},get width(){return t(v).width},faceColor:"#ff000015"})}C(me,ge)};Y(ee,me=>{t(c)>=0&&me(ne)})}C(ie,he)},$$slots:{default:!0}});var de=R(ue,4),ke=X(de),Ee=X(ke);ce(Ee,{label:"Show",children:(ie,le)=>{Ye(ie,{id:"type",options:["full","explained","residual"],get value(){return t(a)},set value(he){z(a,he,!0)}})},$$slots:{default:!0}});var Se=R(ke,2);{var Ke=ie=>{var le=tv(),he=X(le);ce(he,{label:"For",children:(ve,be)=>{Ye(ve,{id:"type",get options(){return t(u)},get value(){return t(f)},set value(we){z(f,we,!0)}})},$$slots:{default:!0}}),C(ie,le)};Y(Se,ie=>{t(u).length>1&&ie(Ke)})}Ne("click",ue,d),C(te,fe)},$$slots:{default:!0}})};Y(I,$=>{t(v)&&t(q)&&$(W)})}C(n,J),ye()}st(["click"]);function nv(n,e){let r=0,s=0;n.nresp>0&&(r=new Ce(n.values.v.slice(0,n.nresp*n.values.nrows)),s=n.nresp);const l=new xe(n.values.v.slice(s*n.values.nrows),n.values.nrows,n.values.ncols-s).t(),o=l.ncols<e?1:Math.round(l.ncols/e),a=De.seq(1,l.ncols,o),c=l.subset(null,a),u=r?r.subset(a):null,f=n.classes?n.classes.filter((d,v)=>a.v.includes(v)):null;return{classNames:n.classNames,classes:f,resp:u,values:c,varvalues:n.varvalues.filter((d,v)=>v>=s),varindices:n.varindices.filter((d,v)=>v>=s),varaxisLabel:n.varvaluesUnits?n.varvaluesName+" "+n.varvaluesUnits:n.varvaluesName,varaxisUnits:n.varvaluesUnits}}function jl(n,e){return{values:e||n.values.copy(),varvalues:n.varvalues,varindices:n.varindices,varaxisLabel:n.varaxisLabel}}function sv(n,e){if(!e||e.nrows!==n.values.nrows||e.ncols!==n.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(n);return r.values=e,r}var lv=U('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function Ll(n,e){_e(e,!0);var r=Ae(),s=K(r);{var l=a=>{var c=lv(),u=X(c),f=R(u),d=X(f);bt(d,()=>Pu(e.prepmodel)),oe(()=>Te(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),C(a,c)},o=a=>{var c=Fc("skipped");C(a,c)};Y(s,a=>{e.prepmodel.ml?a(l):a(o,!1)})}C(n,r),ye()}var ov=U('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),av=U('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function iv(n,e){_e(e,!0);var r=Ae(),s=K(r);{var l=o=>{ce(o,{name:"info",children:(a,c)=>{var u=av(),f=K(u),d=R(X(f),3);{var v=b=>{var _=ov(),S=R(K(_),2),k=X(S);oe(()=>{B(S,"title",e.model.fileName),Te(k,e.model.fileName)}),C(b,_)};Y(d,b=>{e.model.fileName&&b(v)})}var g=R(d),m=R(g,3);Ll(m,{get prepmodel(){return e.model}});var w=R(f,2);{var p=b=>{cr(b,{get onclick(){return e.reset}})};Y(w,b=>{e.reset&&b(p)})}oe(()=>Te(g,` ${e.model.npred??""} `)),C(a,u)},$$slots:{default:!0}})};Y(s,o=>{e.model&&o(l)})}C(n,r),ye()}var cv=U("<!> <!>",1),uv=U("<p><!></p>"),fv=U("<!> <!>",1);function dv(n,e){_e(e,!0);let r=D(e,"model",15),s=re(""),l=re("neutral"),o=re("");function a(b){try{const _=JSON.parse(b,vl);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),!Object.keys(_).includes("class")||_.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");_.fileName=t(f),r(_),z(l,"success"),z(o,"")}catch(_){console.log(_),r(null),z(l,"error"),z(o,_,!0)}}function c(b){const _=new FileReader;_.onload=()=>{a(_.result)},_.readAsText(t(s))}function u(){z(s,""),r(null),z(l,"neutral"),z(o,"")}pe(()=>{t(s)===null?(r(null),z(l,"neutral"),z(o,"")):(z(l,"neutral"),z(o,""))}),pe(()=>{(r()===null||r()===0)&&z(s,"")});let f=h(()=>t(s)?t(s).name.replace(/\.[^/.]+$/,""):"");var d=fv(),v=K(d);{var g=b=>{var _=cv(),S=K(_);ln(S,()=>t(s),N=>{ce(N,{name:"file-selector",children:(M,T)=>{ps(M,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return t(s)},set file(P){z(s,P,!0)}})},$$slots:{default:!0}})});var k=R(S,2);{var A=N=>{ce(N,{name:"load-button",label:" ",children:(M,T)=>{tt(M,{onclick:c,text:"Load"})},$$slots:{default:!0}})};Y(k,N=>{t(s)&&N(A)})}C(b,_)},m=b=>{iv(b,{get model(){return r()},reset:u})};Y(v,b=>{r()?b(m,!1):b(g)})}var w=R(v,2);{var p=b=>{ce(b,{name:"error",status:"error",children:(_,S)=>{var k=uv(),A=X(k);bt(A,()=>t(o)),C(_,k)},$$slots:{default:!0}})};Y(w,b=>{(t(l)==="error"||t(o))&&b(p)})}C(n,d),ye()}var vv=U('<p class="title"> </p>'),hv=U("<!>&nbsp;",1),mv=U("<!> <!>",1),gv=U('<div class="method-open svelte-10os93"><!> <!> <!></div>'),pv=U('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function Nn(n,e){_e(e,!0);let r=D(e,"cancel",3,null);var s=Ae(),l=K(s);{var o=c=>{var u=gv(),f=X(u);ce(f,{children:(g,m)=>{var w=vv(),p=X(w);oe(()=>Te(p,e.title)),C(g,w)},$$slots:{default:!0}});var d=R(f,2);gr(d,()=>e.children);var v=R(d,2);ce(v,{label:" ",children:(g,m)=>{var w=mv(),p=K(w);{var b=S=>{var k=hv(),A=K(k);tt(A,{text:"Cancel",get onclick(){return r()}}),C(S,k)};Y(p,S=>{r()&&S(b)})}var _=R(p,2);tt(_,{text:"Save",get onclick(){return e.apply}}),C(g,w)},$$slots:{default:!0}}),$o(3,u,()=>Ga,()=>({duration:10})),C(c,u)},a=c=>{ce(c,{children:(u,f)=>{var d=pv(),v=K(d),g=X(v),m=R(g),w=X(m),p=R(v,2);Ju(p,{onclick:()=>e.moveUp(e.pos)});var b=R(p,2);Zu(b,{onclick:()=>e.moveDown(e.pos)});var _=R(b,2);cr(_,{onclick:()=>e.remove(e.pos)}),oe(()=>{Te(g,`${e.title??""} `),Te(w,e.settings)}),Ne("click",m,()=>e.open(e.pos)),C(u,d)},$$slots:{default:!0}})};Y(l,c=>{e.isOpen?c(o):c(a,!1)})}C(n,s),ye()}st(["click"]);var bv=U("<!> <!>",1);function wv(n,e){_e(e,!0);let r=D(e,"params",31,()=>Re([0,0])),s=D(e,"varind",15),l=D(e,"settings",15),o=D(e,"nvars",3,0),a=an(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const c={snv:0,area:1,length:2,var:3},u=Object.keys(c);let f=re(Re(u[r()[0]])),d=re(r()[1]+1);const v="Normalization";pe(()=>{l(t(f)+(t(f)==="var"?" #"+t(d):""))}),pe(()=>{t(f)==="var"?s(s()[0]=r()[1]>0?r()[1]:1,!0):s(s()[0]=-1,!0)}),pe(()=>{t(f)==="var"&&e.isOpen?s(s()[0]=r()[1],!0):s(s()[0]=-1,!0)}),pe(()=>{t(f)&&r(r()[0]=c[t(f)],!0)}),pe(()=>{t(d)&&r(r()[1]=t(d)-1,!0)}),Nn(n,Tr({id:"norm",title:v,get settings(){return l()},get isOpen(){return e.isOpen}},()=>a,{children:(g,m)=>{var w=bv(),p=K(w);ce(p,{label:"Type",children:(S,k)=>{Ye(S,{get options(){return u},get value(){return t(f)},set value(A){z(f,A,!0)}})},$$slots:{default:!0}});var b=R(p,2);{var _=S=>{ce(S,{label:"Variable index",children:(k,A)=>{Qt(k,{min:1,get max(){return o()},step:1,get value(){return t(d)},set value(N){z(d,N,!0)}})},$$slots:{default:!0}})};Y(b,S=>{t(f)==="var"&&S(_)})}C(g,w)},$$slots:{default:!0}})),ye()}var _v=U("<!> <!> <!>",1);function yv(n,e){_e(e,!0);let r=D(e,"params",31,()=>Re([3,1,0])),s=D(e,"settings",15),l=an(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const o=h(()=>{if(!e.nvars)return 3;const f=Math.round(e.nvars*.25);return f>39?39:f%2<1?f+1:f}),a=h(()=>r()[1]<2?[0,1]:[0,1,2]),c=h(()=>r()[0]<5?[1,2]:[1,2,3]);pe(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),pe(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),pe(()=>{s(r()[0]+", "+r()[1]+", "+r()[2])}),Nn(n,Tr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>l,{children:(f,d)=>{var v=_v(),g=K(v);ce(g,{label:"Width",children:(p,b)=>{Qt(p,{min:3,get max(){return t(o)},step:2,get value(){return r()[0]},set value(_){r(r()[0]=_,!0)}})},$$slots:{default:!0}});var m=R(g,2);ce(m,{label:"Polynomial",children:(p,b)=>{Ye(p,{get options(){return t(c)},get value(){return r()[1]},set value(_){r(r()[1]=_,!0)}})},$$slots:{default:!0}});var w=R(m,2);ce(w,{label:"Derivative",children:(p,b)=>{Ye(p,{get options(){return t(a)},get value(){return r()[2]},set value(_){r(r()[2]=_,!0)}})},$$slots:{default:!0}}),C(f,v)},$$slots:{default:!0}})),ye()}var xv=U("<!> <!>",1);function kv(n,e){_e(e,!0);let r=D(e,"params",31,()=>Re([1,0]));D(e,"varind",27,()=>-1);let s=D(e,"settings",15);D(e,"nvars",3,0);let l=an(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o={no:0,mean:1,median:2},a={no:0,sd:1,iqr:2,range:3,pareto:4},c=Object.keys(o),u=Object.keys(a);let f=re(Re(c[r()[0]])),d=re(Re(u[r()[1]]));const v="Scaling";pe(()=>{s(t(f)+"/"+t(d))}),pe(()=>{t(f)&&r(r()[0]=o[t(f)],!0)}),pe(()=>{t(d)&&r(r()[1]=a[t(d)],!0)}),Nn(n,Tr({id:"scale",title:v,get settings(){return s()}},()=>l,{children:(g,m)=>{var w=xv(),p=K(w);ce(p,{label:"Center",children:(_,S)=>{Ye(_,{get options(){return c},get value(){return t(f)},set value(k){z(f,k,!0)}})},$$slots:{default:!0}});var b=R(p,2);ce(b,{label:"Scale",children:(_,S)=>{Ye(_,{get options(){return u},get value(){return t(d)},set value(k){z(d,k,!0)}})},$$slots:{default:!0}}),C(g,w)},$$slots:{default:!0}})),ye()}var Ev=U("<!> <!> <!>",1),Sv=U("<!> <!> <!>",1);function Av(n,e){_e(e,!0);let r=D(e,"params",31,()=>Re([0,1,.1]));D(e,"varind",27,()=>-1);let s=D(e,"settings",15,"");D(e,"nvars",3,0);let l=an(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Baseline correction",a={emsc:0,als:1},c=Object.keys(a);function u(w){const p=Math.ceil(Math.log10(w));return Math.pow(10,p)}let f=re(Re(c[r()[0]])),d=re(Re(r()[2]>0?u(r()[2]).toString():"0.1")),v=h(()=>parseFloat(t(d))),g=h(()=>t(v)/10),m=h(()=>Math.ceil(-Math.log10(t(v)))+1);pe(()=>{if(t(f)!=="als")return;const w=parseFloat(t(d));(r()[2]<t(g)||r()[2]>w-t(g))&&r(r()[2]=t(g),!0)}),pe(()=>{s(t(f)+" ("+(t(f)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),pe(()=>{t(f)&&r(r()[0]=a[t(f)],!0)}),Nn(n,Tr({id:"scale",title:o,get settings(){return s()}},()=>l,{children:(w,p)=>{var b=Sv(),_=K(b);ce(_,{label:"Type",children:(M,T)=>{Ye(M,{get options(){return c},get value(){return t(f)},set value(P){z(f,P,!0)}})},$$slots:{default:!0}});var S=R(_,2);{var k=M=>{var T=Ev(),P=K(T);ce(P,{label:"Lambda",children:(y,F)=>{Yr(y,{min:1,max:7,step:.1,get value(){return r()[1]},set value(H){r(r()[1]=H,!0)}})},$$slots:{default:!0}});var L=R(P,2);ce(L,{label:"Penalty range",children:(y,F)=>{Ye(y,{options:["1","0.1","0.01"],get value(){return t(d)},set value(H){z(d,H,!0)}})},$$slots:{default:!0}});var E=R(L,2);ce(E,{label:"Penalty",children:(y,F)=>{{let H=h(()=>t(v)-t(g));Yr(y,{get min(){return t(g)},get max(){return t(H)},get step(){return t(g)},get decNum(){return t(m)},get value(){return r()[2]},set value(q){r(r()[2]=q,!0)}})}},$$slots:{default:!0}}),C(M,T)};Y(S,M=>{t(f)==="als"&&M(k)})}var A=R(S,2);{var N=M=>{ce(M,{label:"Polynomial",children:(T,P)=>{Qt(T,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(L){r(r()[1]=L,!0)}})},$$slots:{default:!0}})};Y(A,M=>{t(f)==="emsc"&&M(N)})}C(w,b)},$$slots:{default:!0}})),ye()}var Cv=U("<!> <!>",1);function Nv(n,e){_e(e,!0);let r=D(e,"params",15),s=D(e,"varind",15),l=D(e,"settings",15),o=an(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const a="Trim tails";let c=re(!1);const u=h(()=>e.nvars?Math.round(e.nvars*.1):1);pe(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-t(u))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+t(u))&&r(r()[1]=e.right,!0),s(s()[1]=r()[0],!0),s(s()[2]=r()[1],!0),z(c,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),z(c,!1))}),pe(()=>{l("left: "+r()[0]+" right: "+r()[1])}),Nn(n,Tr({id:"norm",title:a,get settings(){return l()},get isOpen(){return e.isOpen}},()=>o,{children:(f,d)=>{var v=Ae(),g=K(v);{var m=w=>{var p=Cv(),b=K(p);ce(b,{label:"Left",children:(S,k)=>{{let A=h(()=>e.right-t(u));Yr(S,{get min(){return e.left},get max(){return t(A)},step:1,decNum:0,get value(){return r()[0]},set value(N){r(r()[0]=N,!0)}})}},$$slots:{default:!0}});var _=R(b,2);ce(_,{label:"Right",children:(S,k)=>{{let A=h(()=>e.left+t(u));Yr(S,{get min(){return t(A)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(N){r(r()[1]=N,!0)}})}},$$slots:{default:!0}}),C(w,p)};Y(g,w=>{t(c)&&w(m)})}C(f,v)},$$slots:{default:!0}})),ye()}var Tv=U("<!> <!>",1);function Pv(n,e){_e(e,!0);let r=D(e,"params",31,()=>Re([3,5]));D(e,"varind",27,()=>-1);let s=D(e,"settings",15);D(e,"nvars",3,0);let l=an(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Spike removal";pe(()=>{s(r()[0]+"/"+r()[1])}),Nn(n,Tr({id:"scale",title:o,get settings(){return s()}},()=>l,{children:(a,c)=>{var u=Tv(),f=K(u);ce(f,{label:"Window",children:(v,g)=>{Qt(v,{min:3,max:15,step:2,get value(){return r()[0]},set value(m){r(r()[0]=m,!0)}})},$$slots:{default:!0}});var d=R(f,2);ce(d,{label:"Threshold",children:(v,g)=>{Qt(v,{min:3,max:50,get value(){return r()[1]},set value(m){r(r()[1]=m,!0)}})},$$slots:{default:!0}}),C(a,u)},$$slots:{default:!0}})),ye()}var jv=U("<h2>Selected methods</h2> <!>",1),Lv=U("<p>No methods selected</p>"),Mv=U("<p> </p>"),Rv=U("<h2>Available methods</h2>"),qv=U("<p>Maximum number of methods is selected.</p>"),Fv=U("<p> </p> <!>",1),zv=U('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function Ov(n,e){_e(e,!0);let r=D(e,"prepobj",31,()=>Re([])),s=D(e,"meta",15),l=D(e,"varind",31,()=>-1),o=D(e,"rawdataShort",15),a=D(e,"prepdataShort",15),c=D(e,"prepmodel",3,null),u=D(e,"reset",3,null),f=D(e,"finalize",3,null);const d=30,v=8,g={savgol:yv,norm:wv,scale:kv,baseline:Av,trim:Nv,spikes:Pv};let m=re("neutral"),w=re(""),p=re(void 0),b=re(""),_=re(Re([])),S=re(!1),k=re(Re([])),A=re(Re([]));s(new Array(v).fill(""));const N=h(()=>e.rawdata.values.ncols-e.rawdata.nresp);let M=Re(e.rawdata.values.nrows<3?Object.keys(g).filter(ie=>ie!=="scale"):Object.keys(g));P(),r().length!==0&&T();async function T(){r().length!==0&&z(p,e.WASM().then(ie=>{z(m,"applying");const le=xa(ie,o().values,0,r(),!0,[]),he=ul(ie,o().values,0,le,!0);a(jl(o(),he)),z(m,"success")}).catch(ie=>{a(jl(o())),console.error(ie),z(m,"error"),z(w,ie,!0)}),!0)}function P(){const ie=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(ie),z(k,[],!0),z(A,[],!0);return}let le=[],he=[],ve=0,be=ie;for(let we of r())we.id==="trim"?(le.push(ve),he.push(be),we.params[0]<ve&&(we.params[0]=ve),we.params[1]>be&&(we.params[1]=be),ve=we.params[0]>ve?we.params[0]:ve,be=we.params[1]>0&&we.params[1]<be?we.params[1]:be):(le.push(ve),he.push(be));z(k,le,!0),z(A,he,!0),e.setLeft(ve),e.setRight(be)}function L(ie){const le=Dr.find(he=>he.id===ie);le&&(t(k).push(e.left),t(A).push(e.right),r().push({id:le.id,params:le.mp}),z(S,!0),z(b,r().length-1))}function E(){r().length<1||(t(k).pop(),t(A).pop(),r().pop(),z(S,!1),z(b,-1))}function y(ie){if(ie<=0)return;const le=r()[ie],he=r()[ie-1];r(r()[ie-1]=le,!0),r(r()[ie]=he,!0),O()}function F(ie){if(ie<0||ie===r().length-1)return;const le=r()[ie],he=r()[ie+1];r(r()[ie+1]=le,!0),r(r()[ie]=he,!0),O()}function H(ie){ie<0||ie>=r().length||(r(r().filter((le,he)=>he!==ie)),O())}function q(ie){z(b,ie,!0)}function j(){z(b,null)}function O(){z(m,"neutral"),z(w,""),z(S,!1),z(b,null),c()&&u()(),P(),T(),l(l()[1]=-1,!0),l(l()[2]=-1,!0)}pe(()=>{e.rawdata&&!o()&&o(nv(e.rawdata,d))}),pe(()=>{o()&&!a()&&a(jl(o()))}),pe(()=>{(!r()||r().length===0)&&(z(_,[],!0),a(null),z(k,[],!0),z(A,[],!0),z(b,""),s(new Array(v).fill("")))});var G=zv(),V=K(G);let Q;var J=X(V);ce(J,{label:"",children:(ie,le)=>{var he=jv(),ve=R(K(he),2);{var be=we=>{Ta(we,{text:"edit",get onclick(){return u()}})};Y(ve,we=>{c()&&u()&&we(be)})}C(ie,he)},$$slots:{default:!0}});var I=R(J,2);{var W=ie=>{ce(ie,{label:"",children:(le,he)=>{var ve=Lv();C(le,ve)},$$slots:{default:!0}})},$=ie=>{var le=Ae(),he=K(le);Ve(he,17,r,We,(ve,be,we)=>{const Ie=h(()=>g[t(be).id]);var Je=Ae(),He=K(Je);{var Z=ne=>{var me=Ae(),ge=K(me);{let Le=h(()=>we===t(b)),qe=h(()=>t(S)?E:null);Vn(ge,()=>t(Ie),(Fe,ze)=>{ze(Fe,{get isOpen(){return t(Le)},get left(){return t(k)[we]},get right(){return t(A)[we]},pos:we,get nvars(){return t(N)},moveUp:y,moveDown:F,apply:O,open:q,close:j,remove:H,get cancel(){return t(qe)},get params(){return t(be).params},set params(Oe){t(be).params=Oe},get varind(){return l()},set varind(Oe){l(Oe)},get settings(){return s()[we]},set settings(Oe){s(s()[we]=Oe,!0)}})})}C(ne,me)},ee=ne=>{var me=Ae(),ge=K(me);{let Le=h(()=>we===t(b)),qe=h(()=>t(S)?E:null);Vn(ge,()=>t(Ie),(Fe,ze)=>{ze(Fe,{pos:we,get isOpen(){return t(Le)},get left(){return t(k)[we]},get right(){return t(A)[we]},get nvars(){return t(N)},moveUp:y,moveDown:F,apply:O,open:q,close:j,remove:H,get cancel(){return t(qe)},get params(){return t(be).params},set params(Oe){t(be).params=Oe},get settings(){return s()[we]},set settings(Oe){s(s()[we]=Oe,!0)}})})}C(ne,me)};Y(He,ne=>{t(be).id==="norm"||t(be).id==="trim"?ne(Z):ne(ee,!1)})}C(ve,Je)}),C(ie,le)};Y(I,ie=>{r().length===0?ie(W):ie($,!1)})}var te=R(I,2);{var ae=ie=>{ce(ie,{status:"error",children:(le,he)=>{var ve=Mv(),be=X(ve);oe(()=>Te(be,t(w))),C(le,ve)},$$slots:{default:!0}})};Y(te,ie=>{(t(m)==="error"||t(w))&&ie(ae)})}var fe=R(V,2),ue=X(fe);{var se=ie=>{ce(ie,{label:" ",children:(le,he)=>{tt(le,{get onclick(){return f()},text:"Finalize"})},$$slots:{default:!0}})};Y(ue,ie=>{!c()&&!t(b)&&r().length>0&&ie(se)})}var de=R(fe,2),ke=X(de);ce(ke,{label:"",children:(ie,le)=>{var he=Rv();C(ie,he)},$$slots:{default:!0}});var Ee=R(ke,2);{var Se=ie=>{ce(ie,{label:"",children:(le,he)=>{var ve=qv();C(le,ve)},$$slots:{default:!0}})},Ke=ie=>{var le=Ae(),he=K(le);Ve(he,17,()=>M,We,(ve,be)=>{const we=h(()=>Dr.find(Ie=>Ie.id===t(be)));ce(ve,{children:(Ie,Je)=>{var He=Fv(),Z=K(He),ee=X(Z),ne=R(Z,2);Ku(ne,{onclick:()=>L(t(we).id)}),oe(()=>Te(ee,t(we).title)),C(Ie,He)},$$slots:{default:!0}})}),C(ie,le)};Y(Ee,ie=>{r().length>=v?ie(Se):ie(Ke,!1)})}oe(()=>Q=dt(V,1,"selected-methods-list svelte-9cg1zq",null,Q,{final:c()!==null&&c()!==void 0})),C(n,G),ye()}var Iv=U("<!> <!>",1),Vv=U("<!> <!>",1),Bv=U("<!> <!>",1),Dv=U("<!> <!> <!> <!> <!> <!> <!> <!>",1),Yv=U("<h2>Plot settings</h2>"),Hv=U('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),Wv=U('<div class="plot-panel svelte-5p9gcx"><!></div>');function Uv(n,e){_e(e,!0);let r=re(!0),s=re("none"),l=re(!1);const o=h(()=>(t(r)?"Preprocessed":"Raw")+" data (selected rows)"),a=h(()=>t(r)&&e.prepdata?e.prepdata:e.rawdata),c=h(()=>t(a)?t(a).varaxisLabel:"Variables"),u=h(()=>e.rawdata.varaxisUnits),f=h(()=>e.left>=0||e.right>0&&e.right<t(a).values.nrows),d=h(()=>e.left>=0?e.left+1:1),v=h(()=>e.right>0&&e.right<t(a).values.nrows?e.right:t(a).values.nrows),g=h(()=>t(r)&&t(a)&&t(f)?De.seq(t(d),t(v)):null),m=h(()=>t(g)?t(a).varvalues.filter((P,L)=>L>=t(d)-1&&L<t(v)):t(a).varvalues),w=h(()=>t(g)?t(a).values.subset(t(g),null):t(a).values),p=h(()=>t(w)?or(t(w).v):null),b=h(()=>t(p)?(t(p)[1]-t(p)[0])*.05:null),_=h(()=>t(p)?[t(p)[0],t(p)[1]+(t(s)!=="none")*t(b)]:[0,1]),S=h(()=>t(a)?or(t(a).varvalues,t(l)?.005:.1):[0,1]),k=h(()=>t(l)&&t(f)?[t(a).varvalues[t(d)-1],t(a).varvalues[t(v)-1]]:t(S)),A=h(()=>{if(!e.rawdata)return null;const P={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const L=El(e.rawdata.classNames.length);P.groups={colors:e.rawdata.classes.map(E=>L[e.rawdata.classNames.findIndex(y=>y===E)]),breaks:Dt(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:L}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const L=$s(e.rawdata.resp,8),E=El(L.length-1);P.response={colors:Zd(e.rawdata.resp.v,L.v,E),labels:null,breaks:L,map:E}}return P});pe(()=>{(e.left<1||e.right<1||e.right>=e.left)&&z(l,!1)});var N=Wv(),M=X(N);{var T=P=>{var L=Hv(),E=K(L),y=X(E),F=X(y);Gn(F,{get title(){return t(o)},get limY(){return t(_)},get limX(){return t(k)},fileName:"plot-preprocessed",children:(I,W)=>{var $=Dv(),te=K($);{var ae=ve=>{Cl(ve,{get xValues(){return t(m)},get yValues(){return t(w)}})},fe=ve=>{var be=Ae(),we=K(be);Ve(we,17,()=>t(A)[t(s)].colors,We,(Ie,Je,He)=>{{let Z=h(()=>t(w).getcolumn(He+1));ur(Ie,{get xValues(){return t(m)},get yValues(){return t(Z)},get lineColor(){return t(Je)}})}}),C(ve,be)};Y(te,ve=>{t(s)==="none"?ve(ae):ve(fe,!1)})}var ue=R(te,2);{var se=ve=>{const be=h(()=>t(a).varvalues[e.varind[0]]);var we=Iv(),Ie=K(we);{let He=h(()=>[t(be),t(be)]);ur(Ie,{get xValues(){return t(He)},get yValues(){return t(_)},lineColor:"#00000060"})}var Je=R(Ie,2);{let He=h(()=>[t(be)]),Z=h(()=>[t(_)[1]-t(b)*(t(s)==="none"?1:2)]),ee=h(()=>Hr(t(be).toFixed(2)+" "+t(u)));An(Je,{get xValues(){return t(He)},get yValues(){return t(Z)},get labels(){return t(ee)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(ve,we)};Y(ue,ve=>{e.varind&&e.varind[0]>0&&ve(se)})}var de=R(ue,2);{var ke=ve=>{const be=h(()=>t(a).varvalues[e.varind[1]]);var we=Vv(),Ie=K(we);{let He=h(()=>[t(k)[0]]),Z=h(()=>[t(a).varvalues[e.varind[1]]-t(k)[0]]),ee=h(()=>[t(_)[1]]),ne=h(()=>[t(_)[1]-t(_)[0]]);Ht(Ie,{get left(){return t(He)},get width(){return t(Z)},get top(){return t(ee)},get height(){return t(ne)},lineColor:"transparent",faceColor:"#00000040"})}var Je=R(Ie,2);{let He=h(()=>[t(be)]),Z=h(()=>[t(_)[1]-t(b)*(t(s)==="none"?1:2)]),ee=h(()=>Hr(t(be).toFixed(2)+" "+t(u)));An(Je,{get xValues(){return t(He)},get yValues(){return t(Z)},get labels(){return t(ee)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(ve,we)};Y(de,ve=>{e.varind&&e.varind[1]>0&&ve(ke)})}var Ee=R(de,2);{var Se=ve=>{const be=h(()=>t(a).varvalues[e.varind[2]-1]);var we=Bv(),Ie=K(we);{let He=h(()=>[t(a).varvalues[e.varind[2]-1]]),Z=h(()=>[t(k)[1]-t(a).varvalues[e.varind[2]-1]]),ee=h(()=>[t(_)[1]]),ne=h(()=>[t(_)[1]-t(_)[0]]);Ht(Ie,{get left(){return t(He)},get width(){return t(Z)},get top(){return t(ee)},get height(){return t(ne)},lineColor:"transparent",faceColor:"#00000040"})}var Je=R(Ie,2);{let He=h(()=>[t(be)]),Z=h(()=>[t(_)[1]-t(b)*(t(s)==="none"?1:2)]),ee=h(()=>Hr(t(be).toFixed(2)+" "+t(u)));An(Je,{get xValues(){return t(He)},get yValues(){return t(Z)},get labels(){return t(ee)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(ve,we)};Y(Ee,ve=>{e.varind&&e.varind[2]<t(a).varvalues.length&&e.varind[2]>0&&ve(Se)})}var Ke=R(Ee,2);{let ve=h(()=>t(s)!=="none");Cn(Ke,{get show(){return t(ve)},get labels(){return t(A)[t(s)].labels},get breaks(){return t(A)[t(s)].breaks},get colmap(){return t(A)[t(s)].map}})}var ie=R(Ke,2);Kn(ie,{get label(){return t(c)},showGrid:!0});var le=R(ie,2);_s(le,{showGrid:!0});var he=R(le,2);Jn(he,{}),C(I,$)},$$slots:{default:!0}});var H=R(E,2),q=X(H);ce(q,{label:"",children:(I,W)=>{var $=Yv();C(I,$)},$$slots:{default:!0}});var j=R(q,2);ce(j,{label:"Show",children:(I,W)=>{Yt(I,{options:["raw","preprocessed"],get value(){return t(r)},set value($){z(r,$,!0)}})},$$slots:{default:!0}});var O=R(j,2);{var G=I=>{ce(I,{label:"Color by",children:(W,$)=>{{let te=h(()=>Object.keys(t(A)));Ye(W,{get options(){return t(te)},get value(){return t(s)},set value(ae){z(s,ae,!0)}})}},$$slots:{default:!0}})},V=h(()=>Object.keys(t(A)).length>1);Y(O,I=>{t(V)&&I(G)})}var Q=R(O,2);{var J=I=>{ce(I,{label:"Zoom (x-axis)",children:(W,$)=>{Yt(W,{options:["off","on"],get value(){return t(l)},set value(te){z(l,te,!0)}})},$$slots:{default:!0}})};Y(Q,I=>{e.left>0&&e.right>e.left&&I(J)})}C(P,L)};Y(M,P=>{t(m)&&t(w)&&P(T)})}C(n,N),ye()}var Xv=U('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function Gv(n,e){_e(e,!0);let r=D(e,"left",15),s=D(e,"right",15),l=D(e,"prepobj",15),o=D(e,"meta",15),a=D(e,"finalize",3,null),c=re(Re([-1,0,0])),u=re(null),f=re(null);function d(k){const A=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&k>=0&&k<A&&k<s()&&r(k)}function v(k){const A=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&k<=A&&k>r()&&s(k)}var g=Xv(),m=X(g),w=X(m),p=X(w);Ov(p,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return r()},get right(){return s()},setLeft:d,",":!0,setRight:v,get finalize(){return a()},get varind(){return t(c)},set varind(k){z(c,k,!0)},get prepobj(){return l()},set prepobj(k){l(k)},get rawdataShort(){return t(u)},set rawdataShort(k){z(u,k,!0)},get prepdataShort(){return t(f)},set prepdataShort(k){z(f,k,!0)},get meta(){return o()},set meta(k){o(k)}});var b=R(m,2),_=X(b);{var S=k=>{Uv(k,{get rawdata(){return t(u)},get prepdata(){return t(f)},get left(){return r()},get right(){return s()},get varind(){return t(c)}})};Y(_,k=>{t(u)&&k(S)})}C(n,g),ye()}var Kv=U('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),Jv=U("<!> <!> <!>",1),Zv=U('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),Qv=U("<!> <!> <!>",1),$v=U("<p><strong>Preprocessing model</strong></p>"),eh=U("<!> <!>",1),th=U("<p> </p>"),rh=U('<div class="prep-widget"><!></div> <!> <!>',1);function nh(n,e){_e(e,!0);let r=D(e,"prepType",15),s=D(e,"prepobj",15),l=D(e,"prepdata",15),o=D(e,"prepmodel",15),a=D(e,"prepmeta",15),c=re(!1),u=re(0),f=re(Re(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),d=re("neutral"),v=re(""),g=re(void 0);async function m(q,j,O){!j||!q||j.length===0||z(g,e.WASM().then(G=>{z(d,"applying");const V=xa(G,q.values,q.nresp,j,!1,O);V.info=a(),o(V)}).catch(G=>{o(null),console.error(G),z(d,"error"),z(v,G,!0)}),!0)}async function w(q,j){if(!j||typeof j!="object"){l(null);return}if(Object.keys(j).length===0){l(q);return}z(g,e.WASM().then(O=>{z(d,"applying");const G=ul(O,q.values,q.nresp,j,!1,!1),V=sv(ec(q),G);l(ju(V,j))}).catch(O=>{l(null),console.error(O),z(d,"error"),z(v,O,!0)}),!0)}function p(){r(null),l(null),o(null),s([]),z(u,0),z(f,e.rawdata.values.ncols-e.rawdata.nresp)}function b(){s()&&s().length>0?m(e.rawdata,s(),e.outliers):(r(null),o(null)),z(c,!1)}function _(){r("create"),l(null),o(null),z(c,!0)}function S(){r("skip"),o({})}pe(()=>{o(),e.rawdata&&w(e.rawdata,o())}),pe(()=>{r()==="create"&&s()&&!o()&&m(e.rawdata,s(),e.outliers)}),pe(()=>{r()==="skip"&&l()===null&&(o({}),s([]),l(e.rawdata))});var k=rh(),A=K(k),N=X(A);{var M=q=>{ce(q,{name:"info",children:(j,O)=>{var G=Jv(),V=K(G);{var Q=$=>{var te=Kv(),ae=R(X(te),2);Ll(ae,{get prepmodel(){return o()}}),C($,te)};Y(V,$=>{t(c)||$(Q)})}var J=R(V,2);{var I=$=>{Ta($,{onclick:_})};Y(J,$=>{r()==="create"&&$(I)})}var W=R(J,2);cr(W,{onclick:p}),C(j,G)},$$slots:{default:!0}})},T=q=>{ce(q,{name:"prep-info",children:(j,O)=>{var G=Zv(),V=R(K(G),2),Q=X(V);cr(Q,{onclick:p}),C(j,G)},$$slots:{default:!0}})},P=q=>{ce(q,{label:"Preprocessing",name:"prep-container",children:(j,O)=>{var G=Qv(),V=K(G);tt(V,{text:"Skip",onclick:S});var Q=R(V,2);tt(Q,{text:"Load",onclick:()=>r("file")});var J=R(Q,2);tt(J,{text:"Create",onclick:_}),C(j,G)},$$slots:{default:!0}})},L=q=>{var j=eh(),O=K(j);ce(O,{children:(V,Q)=>{var J=$v();C(V,J)},$$slots:{default:!0}});var G=R(O,2);dv(G,{get model(){return o()},set model(V){o(V)},get prepobj(){return s()},set prepobj(V){s(V)},get left(){return t(u)},set left(V){z(u,V,!0)},get right(){return t(f)},set right(V){z(f,V,!0)}}),C(q,j)};Y(N,q=>{o()&&l()&&o().ml?q(M):r()==="skip"?q(T,1):r()?r()==="file"&&q(L,3):q(P,2)})}var E=R(A,2);{var y=q=>{Nl(q,{closeModal:b,isDark:!0,children:(j,O)=>{Gv(j,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:b,get prepobj(){return s()},set prepobj(G){s(G)},get left(){return t(u)},set left(G){z(u,G,!0)},get right(){return t(f)},set right(G){z(f,G,!0)},get meta(){return a()},set meta(G){a(G)}})},$$slots:{default:!0}})};Y(E,q=>{t(c)&&q(y)})}var F=R(E,2);{var H=q=>{ce(q,{status:"error",children:(j,O)=>{var G=th(),V=X(G);oe(()=>Te(V,t(v))),C(j,G)},$$slots:{default:!0}})};Y(F,q=>{(t(d)==="error"||t(v))&&q(H)})}C(n,k),ye()}var sh=U('<th class="svelte-110ino2"> </th>'),lh=U('<td class="svelte-110ino2"> </td>'),oh=U('<tr class="svelte-110ino2"></tr>'),ah=U('<input type="radio" name="resID" class="svelte-110ino2"/> <label class="svelte-110ino2"> </label>',1),ih=U('<div class="switcher svelte-110ino2"></div>'),ch=U('<table class="svelte-110ino2"><thead><tr class="svelte-110ino2"></tr></thead><tbody></tbody></table> <!>',1);function si(n,e){_e(e,!0);const r=[],s=["TN","FP","TP","FN"],l=["Sensitivity","Specificity","Efficiency","Accuracy"],o=h(()=>Object.keys(e.res));let a=re(0),c=h(()=>{if(!e.res)return null;const v=e.res[t(o)[t(a)]],g=e.model.rule==="soft"?["",...e.model.classNames,"total"]:["",...e.model.classNames];let m=[];for(let w of s){let p=[w],b=0;for(let _ of e.model.classNames){const S=v.v[_].res[e.model.ncomp-1][w];b+=S,p.push(S)}e.model.rule==="soft"&&p.push(b),m.push(p)}for(let w of l){let p=[w];const b=w.toLowerCase();for(let _ of v.classNames){const S=v.v[_].stat[b][e.model.ncomp-1];p.push(S.toFixed(3))}if(e.model.rule==="soft"){const _=v.v.total.stat[b][e.model.ncomp-1];p.push(_.toFixed(3))}m.push(p)}return{header:g,rows:m}});var u=Ae(),f=K(u);{var d=v=>{var g=ch(),m=K(g),w=X(m),p=X(w);Ve(p,21,()=>t(c).header,We,(k,A)=>{var N=sh(),M=X(N);oe(()=>Te(M,t(A))),C(k,N)});var b=R(w);Ve(b,21,()=>t(c).rows,We,(k,A)=>{var N=oh();Ve(N,21,()=>t(A),We,(M,T)=>{var P=lh(),L=X(P);oe(()=>Te(L,t(T))),C(M,P)}),C(k,N)});var _=R(m,2);{var S=k=>{var A=ih();Ve(A,21,()=>t(o),We,(N,M,T)=>{var P=ah(),L=K(P);L.value=L.__value=T;var E=R(L,2),y=X(E);oe(()=>{B(L,"id",t(M)),B(E,"for",t(M)),Te(y,t(M))}),su(r,[],L,()=>t(a),F=>z(a,F)),C(N,P)}),C(k,A)};Y(_,k=>{t(o).length>1&&k(S)})}C(v,g)};Y(f,v=>{t(c)&&v(d)})}C(n,u),ye()}var uh=U("<!> <!> <!> <!>",1),fh=U("<p> </p>"),dh=U("<!> <p>Computing global model...</p>",1),vh=U('<p><span style="color:#a0a0a0;">PLS model:</span> </p> <!>',1),hh=U('<div class="buttons"><!> <!></div>'),mh=U("<!> <!>",1),gh=U("<p> </p>"),ph=U("<!> <!> <!> <!>",1);function bh(n,e){_e(e,!0);let r=D(e,"outliers",19,()=>[]),s=D(e,"exclvars",19,()=>[]),l=D(e,"resobj",15),o=D(e,"model",15),a=D(e,"downloadModel",3,null),c=D(e,"downloadResults",3,null),u=re("neutral"),f=re(""),d=re(1),v=re(!0),g=re(!1),m=re(void 0);async function w(y,F,H,q){const j=y.nresp,O=y.varindices;z(m,e.WASM().then(G=>{z(u,"computing");const V=Au(G,y.values,j,F,H,q,r(),s());V.hash=hs(),V.varlabels=y.varlabels.filter((J,I)=>I<j||!s().includes(O[I])),V.varindices=y.varindices.filter((J,I)=>I<j||!s().includes(O[I])),V.varvalues=y.varvalues.filter((J,I)=>I<j||!s().includes(O[I])),V.xvarlabels=V.varlabels.filter((J,I)=>I+1>j),V.xvarvalues=V.varvalues.filter((J,I)=>I+1>j),V.xvarindices=V.varindices.filter((J,I)=>I+1>j).map(J=>J+1),V.varvaluesName=y.varvaluesName,V.varvaluesUnits=y.varvaluesUnits,V.varrev=y.varrev,V.prep=null;const Q=dl(G,V,y,r());V.stat={xexpvar:Q.stat.xexpvar,yexpvar:Q.stat.yexpvar},o(V),l(Q),z(u,"success")}).catch(G=>{console.error(G),o(null),z(u,"error"),z(f,G,!0)}),!0)}function p(y){z(u,"neutral"),z(f,null),w(e.dataset,t(d),t(v),t(g))}function b(){z(u,"neutral"),z(m,null),l(null),o(null),z(f,null)}let _=h(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-e.dataset.nresp-s().length-1,50):null);pe(()=>{e.dataset===null&&b()}),pe(()=>{z(d,t(_)?Math.min(t(_),20):null,!0)});var S=ph(),k=K(S);{var A=y=>{var F=uh(),H=K(F);{var q=V=>{ce(V,{name:"ncomp",label:"# of LVs",children:(Q,J)=>{Yr(Q,{id:"ncomp",min:1,get max(){return t(_)},step:1,decNum:0,get value(){return t(d)},set value(I){z(d,I,!0)}})},$$slots:{default:!0}})};Y(H,V=>{t(d)&&t(_)&&V(q)})}var j=R(H,2);ce(j,{name:"center",label:"Center",children:(V,Q)=>{Yt(V,{id:"center",options:["no","yes"],get value(){return t(v)},set value(J){z(v,J,!0)}})},$$slots:{default:!0}});var O=R(j,2);ce(O,{name:"scale",label:"Scale",children:(V,Q)=>{Yt(V,{id:"scale",options:["no","yes"],get value(){return t(g)},set value(J){z(g,J,!0)}})},$$slots:{default:!0}});var G=R(O,2);ce(G,{name:"create-model",label:" ",children:(V,Q)=>{tt(V,{onclick:p,text:"Create model"})},$$slots:{default:!0}}),C(y,F)};Y(k,y=>{e.dataset&&!o()&&t(u)!=="computing"&&y(A)})}var N=R(k,2);{var M=y=>{var F=Ae(),H=K(F);Hs(H,()=>t(m),q=>{ce(q,{name:"spinner",children:(j,O)=>{var G=dh(),V=K(G);ml(V),C(j,G)},$$slots:{default:!0}})},void 0,(q,j)=>{ce(q,{name:"error",status:"error",children:(O,G)=>{var V=fh(),Q=X(V);oe(()=>Te(Q,t(j))),C(O,V)},$$slots:{default:!0}})}),C(y,F)};Y(N,y=>{t(m)&&y(M)})}var T=R(N,2);{var P=y=>{var F=mh(),H=K(F);ce(H,{name:"info",children:(O,G)=>{var V=vh(),Q=K(V),J=R(X(Q)),I=R(Q,2);cr(I,{onclick:b}),oe(()=>Te(J,` ${o().ncomp??""} LVs${o().center?", centered":""}${o().scale?", scaled":""}`)),C(O,V)},$$slots:{default:!0}});var q=R(H,2);{var j=O=>{ce(O,{name:"download-buttons",label:"Download",children:(G,V)=>{var Q=hh(),J=X(Q);tt(J,{onclick:()=>c()(l(),e.dataset,"train",r()),text:"Results"});var I=R(J,2);tt(I,{onclick:()=>a()(o()),text:"Model"}),C(G,Q)},$$slots:{default:!0}})};Y(q,O=>{a()&&c()&&O(j)})}C(y,F)};Y(T,y=>{o()&&o().ncomp&&y(P)})}var L=R(T,2);{var E=y=>{ce(y,{name:"error",status:"error",children:(F,H)=>{var q=gh(),j=X(q);oe(()=>Te(j,t(f))),C(F,q)},$$slots:{default:!0}})};Y(L,y=>{(t(u)==="error"||t(f))&&y(E)})}C(n,S),ye()}var wh=U("<!> <!> <!>",1),_h=U('<p class="svelte-7klqqw"> </p>'),yh=U('<!> <p class="svelte-7klqqw">Computing PV-set...</p>',1),xh=U('<p class="svelte-7klqqw"><span class="svelte-7klqqw">PV-set:</span> <br/> <span class="svelte-7klqqw">Size:</span> <span class="svelte-7klqqw">(X)</span> <span class="svelte-7klqqw">(Y)</span>,</p> <!> <!>',1),kh=U('<p class="svelte-7klqqw"> </p>'),Eh=U("<!> <!> <!> <!>",1);function Sh(n,e){_e(e,!0);let r=D(e,"outliers",19,()=>[]),s=D(e,"pvset",15),l=D(e,"pvres",15),o=D(e,"pvscalars",15),a=re("neutral"),c=re(""),u=re(Re(["ven","rand","loo"])),f=re("ven"),d=re(void 0),v=e.calset.values.nrows-r().length,g=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(E=>E>=v/(v-e.model.ncomp-1)&&E<=v/2):[],m=re(Re(g.length>0?g[0]:0));pe(()=>{g.length===0&&(z(u,["loo"],!0),z(f,"loo"))});async function w(E,y,F,H){z(d,e.WASM().then(q=>{const j=F.type=="loo"?0:F.type=="rand"?2:1,[O,G]=Nu(q,y,E.values,E.nresp,y.ncomp,F.nseg,j,0,H);s({classLabelsVarname:E.classLabelsVarname,classNames:E.classNames,classes:E.classes,dec:E.dec,fileName:E.fileName+"-pcv",hasClassNames:E.hasClassNames,hasLabels:E.hasLabels,header:E.header,labelsVarname:E.labelsVarname,objindices:e.calres.objindices,objlabels:e.calres.objlabels,sep:E.sep,values:O,varAxisTitle:E.varAxisTitle,varindices:y.varindices,varlabels:y.varlabels,varrev:y.varrev,varvalues:y.varvalues,varvaluesName:y.varvaluesName,varvaluesUnits:y.varvaluesUnits,nresp:y.nresp}),l(dl(q,y,s(),[])),o(G)}).catch(q=>{console.error(q),s(null),l(null),z(a,"error"),z(c,q,!0)}),!0)}function p(E){z(a,"neutral"),z(c,""),w(e.calset,e.model,{type:t(f),nseg:t(m)},r())}function b(){z(a,"neutral"),z(c,""),z(d,null),s(null),l(null)}pe(()=>{e.model===null&&b()});var _=Eh(),S=K(_);{var k=E=>{var y=wh(),F=K(y);ce(F,{name:"split",label:"Split type:",children:(O,G)=>{Ye(O,{id:"cvType",get options(){return t(u)},get value(){return t(f)},set value(V){z(f,V,!0)}})},$$slots:{default:!0}});var H=R(F,2);{var q=O=>{ce(O,{name:"nseg",label:"Segments:",children:(G,V)=>{Ye(G,{id:"nseg",get options(){return g},get value(){return t(m)},set value(Q){z(m,Q,!0)}})},$$slots:{default:!0}})};Y(H,O=>{t(f)!=="loo"&&O(q)})}var j=R(H,2);ce(j,{name:"run-button",label:" ",children:(O,G)=>{tt(O,{onclick:p,text:"Compute PV-set"})},$$slots:{default:!0}}),C(E,y)};Y(S,E=>{e.model&&!s()&&t(a)!=="busy"&&E(k)})}var A=R(S,2);{var N=E=>{var y=Ae(),F=K(y);Hs(F,()=>t(d),H=>{ce(H,{name:"spinner",children:(q,j)=>{var O=yh(),G=K(O);ml(G),C(q,O)},$$slots:{default:!0}})},void 0,(H,q)=>{ce(H,{name:"error",status:"error",children:(j,O)=>{var G=_h(),V=X(G);oe(()=>Te(V,t(q))),C(j,G)},$$slots:{default:!0}})}),C(E,y)};Y(A,E=>{t(d)&&E(N)})}var M=R(A,2);{var T=E=>{ce(E,{name:"info",children:(y,F)=>{var H=xh(),q=K(H),j=R(X(q)),O=R(j,4),G=R(O,2),V=R(q,2);Gu(V,{onclick:()=>Vu(s(),e.calset.fileName+"-pv")});var Q=R(V,2);cr(Q,{onclick:b}),oe(()=>{Te(j,` ${t(f)??""}
      ${t(f)!=="loo"?t(m)+" seg":""}`),Te(O,` ${s().values.nrows??""}×${s().values.ncols-s().nresp} `),Te(G,`,
      ${s().values.nrows??""}×${s().nresp??""} `)}),C(y,H)},$$slots:{default:!0}})};Y(M,E=>{s()&&E(T)})}var P=R(M,2);{var L=E=>{ce(E,{name:"error",status:"error",children:(y,F)=>{var H=kh(),q=X(H);oe(()=>Te(q,t(c))),C(y,H)},$$slots:{default:!0}})};Y(P,E=>{t(a)==="error"&&t(c)&&E(L)})}C(n,_),ye()}var Ah=U("<!> <!> <!>",1),Ch=U("<!> <!> <!>",1);function li(n,e){_e(e,!0);let r=D(e,"damodel",15);const s=h(()=>Object.keys(e.ind));function l(f,d,v){const g=t(s).length,m={};for(let w=0;w<g;w++){const p=t(s)[w],b=d[p],_=b.length,S=new Array(f.ncomp),k=new Array(f.ncomp),A=new Array(f.ncomp),N=new Array(f.ncomp);for(let M=1;M<=f.ncomp;M++){const T=kt(f,"Yp",M,1),P=Ce.zeros(_);let L=0,E=0;for(let j of b)L+=T[j],P.v[E]=T[j],E+=1;L=L/_;const y=Qs(P);let F=0,H=0;E=0;const q=Ce.zeros(_);for(let j of b)F+=(T[j]-L)**2,q.v[E]=Math.abs(T[j]-y),E+=1;F=Math.sqrt(F/(_-1)),H=1.25*Qs(q),S[M-1]=L,k[M-1]=F,A[M-1]=y,N[M-1]=H}m[p]={classic:{m:S,s:k},robust:{m:A,s:N}}}return m}pe(()=>{if(r()||!e.plsmodel||!e.plsres||!e.ind)return;const f=5,d=1,v=0,g="hard",m="classic",w=l(e.plsres,e.ind),p=Object.keys(e.ind).map(b=>e.ind[b].length);r({ncomp:e.ncomp,rule:g,limType:m,threshold:v,alpha:f,gamma:d,classNames:t(s),params:w,ind:e.ind,crit:null,dof:p,hash:hs()})});const o=h(()=>r()&&r().limType?[r().params[r().classNames[0]][r().limType],r().params[r().classNames[1]][r().limType]]:null);pe(()=>{if(!(!t(o)||r().rule==="hard")&&r().ncomp){const f=Number.parseFloat(r().alpha)/100,d=t(o)[0].m[r().ncomp-1],v=t(o)[1].m[r().ncomp-1],g=t(o)[0].s[r().ncomp-1],m=t(o)[1].s[r().ncomp-1],w=jr(f,d,g),p=jr(1-f,v,m),b=Number.parseFloat(r().gamma)/100,_=1-Math.pow(1-b,1/r().dof[0]),S=1-Math.pow(1-b,1/r().dof[1]),k=jr(_,d,g),A=jr(1-S,v,m),N={};N[r().classNames[0]]=[d,g,w,k],N[r().classNames[1]]=[v,m,p,A],r(r().crit=N,!0)}});var a=Ae(),c=K(a);{var u=f=>{var d=Ch(),v=K(d);ce(v,{name:"ncomp",label:"# of LVs",children:(b,_)=>{Yr(b,{min:1,get max(){return e.plsmodel.ncomp},step:1,decNum:0,get value(){return r().ncomp},set value(S){r(r().ncomp=S,!0)}})},$$slots:{default:!0}});var g=R(v,2);ce(g,{name:"rule",label:"Rule",children:(b,_)=>{Ye(b,{options:["hard","soft"],get value(){return r().rule},set value(S){r(r().rule=S,!0)}})},$$slots:{default:!0}});var m=R(g,2);{var w=b=>{ce(b,{name:"threshold",label:"Threshold",children:(_,S)=>{Yr(_,{min:-1,max:1,step:.02,decNum:2,get value(){return r().threshold},set value(k){r(r().threshold=k,!0)}})},$$slots:{default:!0}})},p=b=>{var _=Ah(),S=K(_);ce(S,{name:"alpha",label:"Alpha, %",children:(N,M)=>{Yr(N,{min:1,max:50,step:1,decNum:0,get value(){return r().alpha},set value(T){r(r().alpha=T,!0)}})},$$slots:{default:!0}});var k=R(S,2);ce(k,{name:"limits",label:"Limits",children:(N,M)=>{Ye(N,{options:["classic","robust"],get value(){return r().limType},set value(T){r(r().limType=T,!0)}})},$$slots:{default:!0}});var A=R(k,2);ce(A,{name:"gamma",label:"Gamma, %",children:(N,M)=>{Ye(N,{options:["5","1","0.1","0.01"],get value(){return r().gamma},set value(T){r(r().gamma=T,!0)}})},$$slots:{default:!0}}),C(b,_)};Y(m,b=>{r().rule==="hard"?b(w):b(p,!1)})}C(f,d)};Y(c,f=>{r()&&f(u)})}C(n,a),ye()}var Nh=U('<span style="font-weight:bold"> </span><br/>',1),Th=U('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),Ph=U('<span class="file-size svelte-1uxd0r7"> </span>'),jh=U('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Lh(n,e){_e(e,!0);let r=D(e,"title",3,"");var s=Ae(),l=K(s);{var o=a=>{ce(a,{children:(c,u)=>{var f=jh(),d=K(f),v=X(d);{var g=k=>{var A=Nh(),N=K(A),M=X(N);oe(()=>Te(M,r())),C(k,A)};Y(v,k=>{r()&&r()!==""&&k(g)})}var m=R(v,4),w=X(m),p=R(m,5);{var b=k=>{var A=Th(),N=K(A),M=X(N),T=R(N,4),P=X(T);oe(()=>{Te(M,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),Te(P,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),C(k,A)},_=k=>{var A=Ph(),N=X(A);oe(()=>Te(N,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),C(k,A)};Y(p,k=>{e.dataset.nresp&&e.dataset.nresp>0?k(b):k(_,!1)})}var S=R(d,2);cr(S,{get onclick(){return e.reset}}),oe(()=>{B(m,"title",e.dataset.fileName),Te(w,e.dataset.fileName)}),C(c,f)},$$slots:{default:!0}})};Y(l,a=>{e.dataset&&a(o)})}C(n,s),ye()}var Mh=U("<!> <!>",1),Rh=U("<!> <!> <!> <!> <!>",1),qh=U("<!> <!>",1),Fh=U("<p> </p>"),zh=U("<!> <p> </p>",1),Oh=U("<p> </p>"),Ih=U("<!> <!> <!>",1);function Ml(n,e){_e(e,!0);let r=D(e,"model",3,null),s=D(e,"outliers",19,()=>[]),l=D(e,"classMandatory",3,!1),o=D(e,"title",3,""),a=D(e,"dataset",15),c=D(e,"resobj",15);const u=[",",";"],f=h(()=>r()?["no","yes"]:["no","labels","values"]);let d=re(void 0),v=re(""),g=re(""),m=re(Re(l())),w=re(","),p=re("no"),b=re(!1),_=re(null),S=re("neutral"),k=re("");function A(I){z(S,"error"),z(k,I,!0),console.error(I)}function N(){z(S,"neural"),z(k,"")}function M(){z(S,"success"),z(k,"")}function T(I,W,$){c()||z(_,e.WASM().then(te=>{c(dl(te,I,W,$,!0)),M()}).catch(te=>{c(null),A(te)}),!0)}function P(I,W){if(!I||I.size<10)return;const te=I.slice(0,1e5),ae=new FileReader;ae.onload=()=>{const fe=ae.result;!fe||fe.length<0||((ue=>{var se=yi(ue,4);z(w,se[0],!0),z(b,se[1],!0),z(m,se[2],!0),z(p,se[3],!0)})(Ou(fe)),W&&t(p)!=="no"&&z(p,"yes"),M())},ae.onerror=function(fe){csvString=null,A("Error reading CSV file. "+fe)},ae.readAsText(te)}function L(I){try{const W=l()?Hu(Aa(I,t(w),t(p)==="yes"?"labels":t(p),t(b),t(m),t(v),t(g),0)):Aa(I,t(w),t(p)==="yes"?"labels":t(p),t(b),t(m),t(v),t(g),0);if(W.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(W.values.ncols<2)throw new Error("Dataset should have at least two predictors.");if(l()&&(!W.classNames||W.classNames.length!==2))throw new Error("Dataset should have two classes.");if(!l()&&W.classNames&&W.classNames.length>0)throw new Error("New data should not contain class labels.");if(r()){const $=r().prep&&r().prep.npred?r().prep.npred:r().npred+r().exclvars.length,te=l()?$+r().nresp:$;if(W.values.ncols!==te)throw console.log(W),new Error("Dataset has different number of columns than the training set.");W.varrev=r().varrev,W.header=r().header,W.varlabels=r().varlabels,W.varvalues=r().varvalues,W.varindices=r().varindices,W.varvaluesName=r().varvaluesName,W.varvaluesUnits=r().varvaluesUnits}W.fileName=t(d).name.replace(/\.[^/.]+$/,""),a(W),M()}catch(W){a(null),A(W)}}function E(I){const W=new FileReader;W.onload=()=>{L(W.result)},W.readAsText(t(d))}async function y(I){try{const W=t(d)instanceof FileList?t(d):[t(d)];a(await Yu(W)),M()}catch(W){A("Failed to read SPC file: "+W)}}function F(){z(d,""),a(null),c(null),z(v,""),z(g,""),N()}pe(()=>{if(!(t(d)===0||t(d)===void 0||a())){if(t(d)===null||t(d)===""){F();return}if(Array.isArray(t(d))){if(t(d).filter(I=>I.slice(-4)===".spc").length!==t(d).length){A("Multiple file selection is allowed only for SPC files.");return}y(t(d));return}t(d)&&(t(d).type==="text/csv"||t(d).type==="application/vnd.ms-excel")?(P(t(d),r()),N()):y([t(d)])}}),pe(()=>{t(w)&&N()}),pe(()=>{if(a()&&r()&&!c()&&!t(k))try{T(r(),a(),s()),M()}catch(I){a(null),c(null),A(I)}});var H=Ih(),q=K(H);{var j=I=>{var W=qh(),$=K(W);ln($,()=>t(d)===void 0,ue=>{ce(ue,{children:(se,de)=>{var ke=Ae(),Ee=K(ke);{var Se=ie=>{ps(ie,{id:"dataFile",message:"Select CSV file with dataset",get file(){return t(d)},set file(le){z(d,le,!0)}})},Ke=ie=>{ps(ie,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return t(d)},set file(le){z(d,le,!0)}})};Y(Ee,ie=>{l()?ie(Se):ie(Ke,!1)})}C(se,ke)},$$slots:{default:!0}})});var te=R($,2);{var ae=ue=>{var se=Rh(),de=K(se);ce(de,{label:"Delimiter",children:(le,he)=>{Ye(le,{id:"sep",get options(){return u},get value(){return t(w)},set value(ve){z(w,ve,!0)}})},$$slots:{default:!0}});var ke=R(de,2);ce(ke,{label:"Row labels",children:(le,he)=>{Yt(le,{id:"hasLabels",options:["no","yes"],get value(){return t(b)},set value(ve){z(b,ve,!0)}})},$$slots:{default:!0}});var Ee=R(ke,2);ce(Ee,{label:"Header",children:(le,he)=>{Ye(le,{id:"header",get options(){return t(f)},get value(){return t(p)},set value(ve){z(p,ve,!0)}})},$$slots:{default:!0}});var Se=R(Ee,2);{var Ke=le=>{var he=Mh(),ve=K(he);ce(ve,{label:"Header name (predictors)",children:(we,Ie)=>{Pa(we,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return t(v)},set value(Je){z(v,Je,!0)}})},$$slots:{default:!0}});var be=R(ve,2);ce(be,{label:"Header units (predictors)",children:(we,Ie)=>{Pa(we,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return t(g)},set value(Je){z(g,Je,!0)}})},$$slots:{default:!0}}),C(le,he)};Y(Se,le=>{t(p)==="values"&&le(Ke)})}var ie=R(Se,2);ce(ie,{label:" ",children:(le,he)=>{tt(le,{text:"Load",onclick:E})},$$slots:{default:!0}}),C(ue,se)},fe=h(()=>t(d)&&!Array.isArray(t(d))&&(t(d).type==="text/csv"||t(d).type==="application/vnd.ms-excel"));Y(te,ue=>{t(fe)&&ue(ae)})}C(I,W)},O=I=>{var W=Ae(),$=K(W);{var te=ae=>{var fe=Ae(),ue=K(fe);Hs(ue,()=>t(_),se=>{ce(se,{children:(de,ke)=>{var Ee=zh(),Se=K(Ee);ml(Se);var Ke=R(Se,2),ie=X(Ke);oe(()=>Te(ie,r()?"Loading data and apply model...":"Loading data...")),C(de,Ee)},$$slots:{default:!0}})},void 0,(se,de)=>{ce(se,{status:"error",children:(ke,Ee)=>{var Se=Fh(),Ke=X(Se);oe(()=>Te(Ke,t(de))),C(ke,Se)},$$slots:{default:!0}})}),C(ae,fe)};Y($,ae=>{t(_)&&ae(te)})}C(I,W)};Y(q,I=>{a()?I(O,!1):I(j)})}var G=R(q,2);{var V=I=>{Lh(I,{get dataset(){return a()},reset:F,get title(){return o()}})};Y(G,I=>{a()&&I(V)})}var Q=R(G,2);{var J=I=>{ce(I,{status:"error",children:(W,$)=>{var te=Oh(),ae=X(te);oe(()=>Te(ae,t(k))),C(W,te)},$$slots:{default:!0}})};Y(Q,I=>{(t(S)==="error"||t(k))&&I(J)})}C(n,H),ye()}var Vh=U('<div class="msg-select"> </div>'),Bh=U('<div class="msg-select"> </div>'),Dh=U('<div class="msg-select"> </div>'),Yh=U('<div class="msg-select"> </div>'),Hh=U('<div class="msg-select"> </div>'),Wh=U('<div class="msg-select"> </div>'),Uh=U('<div class="selected-buttons svelte-188sk7n"><!></div>'),Xh=U('<div class="selected-buttons svelte-188sk7n"><!></div>'),Gh=U('<div class="selected-buttons svelte-188sk7n"><!></div>'),Kh=U("<!> <!> <!> <!>",1),Jh=U("<button> </button>"),Zh=U('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Rl(n,e){_e(e,!0);let r=D(e,"selobjText",3,"Click to select an object..."),s=D(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=D(e,"seloptText",3,"Click to select an option..."),o=D(e,"clearText",3,"Click anywhere to remove selection..."),a=D(e,"params",15),c=Re({objects:-1,variables:[],options:-1}),u=re(Re(Object.keys(e.plots)[0]));function f(q,j){c.objects=j?j[q]:q}function d(q){c.objects=-1}function v(q){c.variables=q}function g(q){c.variables=[]}function m(q){c.options=q}function w(q){c.options=[]}let p={objects:{select:f,unselect:d},variables:{select:v,unselect:g},options:{select:m,unselect:w},stats:{}},b=h(()=>t(u)?e.plots[t(u)]:null),_=h(()=>t(b)?t(b).component:null);var S=Zh(),k=X(S),A=X(k),N=X(A);Vn(N,()=>t(_),(q,j)=>{j(q,{get params(){return a()[t(u)]},get callbacks(){return p[t(b).scope]},get selected(){return c[t(b).scope]},get props(){return e.props}})});var M=R(A,2),T=X(M);{var P=q=>{var j=Ae(),O=K(j);{var G=Q=>{var J=Vh(),I=X(J);oe(()=>Te(I,r())),C(Q,J)},V=Q=>{var J=Bh(),I=X(J);oe(()=>Te(I,o())),C(Q,J)};Y(O,Q=>{c[t(b).scope]<0?Q(G):Q(V,!1)})}C(q,j)};Y(T,q=>{t(b).scope==="objects"&&a()[t(u)].plotType!=="l"&&r().length>0&&q(P)})}var L=R(T,2);{var E=q=>{var j=Ae(),O=K(j);{var G=Q=>{var J=Dh(),I=X(J);oe(()=>Te(I,s())),C(Q,J)},V=Q=>{var J=Yh(),I=X(J);oe(()=>Te(I,o())),C(Q,J)};Y(O,Q=>{c[t(b).scope].length===0?Q(G):Q(V,!1)})}C(q,j)};Y(L,q=>{t(b).scope==="variables"&&a()[t(u)].plotType!=="l"&&s().length>0&&q(E)})}var y=R(L,2);{var F=q=>{var j=Ae(),O=K(j);{var G=Q=>{var J=Hh(),I=X(J);oe(()=>Te(I,l())),C(Q,J)},V=Q=>{var J=Wh(),I=X(J);oe(()=>Te(I,o())),C(Q,J)};Y(O,Q=>{c[t(b).scope].length===0?Q(G):Q(V,!1)})}C(q,j)};Y(y,q=>{t(b).scope==="options"&&a()[t(u)].plotType!=="l"&&s().length>0&&q(F)})}var H=R(k,2);Ve(H,21,()=>Object.keys(e.plots),We,(q,j)=>{var O=Ae(),G=K(O);{var V=J=>{var I=Kh(),W=K(I);gf(W,{get title(){return t(b).label},labelWidth:12,get options(){return e.controls[t(u)]},get value(){return a()[t(u)]},set value(de){a(a()[t(u)]=de,!0)}});var $=R(W,2);{var te=de=>{var ke=Uh(),Ee=X(ke);gr(Ee,()=>t(b).buttons,()=>c.objects),C(de,ke)};Y($,de=>{t(b).scope==="objects"&&t(b).buttons&&c.objects>=0&&de(te)})}var ae=R($,2);{var fe=de=>{var ke=Xh(),Ee=X(ke);gr(Ee,()=>t(b).buttons,()=>c.variables),C(de,ke)};Y(ae,de=>{t(b).scope==="variables"&&t(b).buttons&&c.variables.length>0&&de(fe)})}var ue=R(ae,2);{var se=de=>{var ke=Gh(),Ee=X(ke);gr(Ee,()=>t(b).buttons,()=>c.options),C(de,ke)};Y(ue,de=>{t(b).scope==="options"&&t(b).buttons&&c.options.length>0&&de(se)})}C(J,I)},Q=J=>{var I=Jh(),W=X(I);oe(()=>{dt(I,1,`plot-selector plot-selector-${t(j)??""}`,"svelte-188sk7n"),Te(W,e.plots[t(j)].label)}),Ne("keydown",I,()=>switchPlot(i)),Ne("click",I,()=>z(u,t(j),!0)),C(J,I)};Y(G,J=>{t(b)&&t(u)===t(j)?J(V):J(Q,!1)})}C(q,O)}),C(n,S),ye()}st(["keydown","click"]);var Qh=je("<text> </text>"),$h=je('<g class="series series-textlabels"></g>'),em=je('<g class="series series-line"><polyline class="line"></polyline></g>'),tm=je("<rect></rect>"),rm=je('<g class="series series-bar"></g>'),nm=je("<text> </text>"),sm=je('<g class="series series-points series-points1"></g>'),lm=je('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),om=je('<g class="series series-points series-points1"><text> </text></g>'),am=je('<g class="series series-bar"><rect></rect></g>'),im=je('<g class="series series-text"><text> </text></g>'),cm=je("<!><!><!>",1),um=je("<!><!><!><!><!>",1);function $t(n,e){_e(e,!0);let r=D(e,"shortenLabels",3,!0),s=D(e,"lineWidth",3,1),l=D(e,"nBars",3,1),o=D(e,"barNum",3,1),a=D(e,"markerSize",3,null),c=D(e,"markerWidth",3,2),u=D(e,"marker",3,1),f=D(e,"colors",3,void 0),d=D(e,"filled",3,void 0),v=D(e,"mainColor",19,()=>Ur.cal),g=D(e,"faceColor",3,null),m=D(e,"lineColor",19,v),w=D(e,"selected",19,()=>-1),p=D(e,"maskSelected",3,!0),b=D(e,"xRange",15),_=D(e,"yRange",15),S=D(e,"ind",3,null);function k(le){!e.callbacks||!e.callbacks.select||hn(le,le.target.tagName,he=>e.callbacks.select(he,S()))}function A(le){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const N=Pt("axes"),M=h(()=>jt(e.xValues,"PlotSeries")),T=h(()=>t(M)?jt(e.yValues,"PlotSeries",t(M).length):null);pe(()=>{if(S()){const le=S().map(he=>he+1);b(t(M)?Br(t(M).subset(le)):null),_(t(T)?Br(t(T).subset(le)):null)}else b(t(M)?Br(t(M)):null),_(t(T)?Br(t(T)):null)});const P=h(()=>g()===null?e.plotType==="p"?"transparent":"white":g()),L=[1,.8,.8,.8,.8,.8,.8,.8],E=[.85,.65,.65,.65,.65,.65,.65,.65],y=h(()=>a()?a():e.plotType==="p"?L[u()-1]:E[u()-1]),F=h(()=>Sn[u()-1]),H=h(()=>wl[N.scales().plot]),q=h(()=>ot([0],N.tY())[0]),j=h(()=>Xn([.8],N.tX())[0]),O=h(()=>e.plotType==="h"?t(j)/l():0),G=h(()=>e.plotType==="h"?t(j)/2-(o()-1)*t(O):0),V=h(()=>t(H));let Q=h(()=>e.plotType==="l"||e.plotType==="b"?xl(t(M),t(T),N.tX(),N.tY()):null),J=h(()=>t(M)?ot(t(M),N.tX()):null),I=h(()=>t(T)?ot(t(T),N.tY()):null),W=h(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(le=>le.slice(0,Qa)):e.labels:null);const $=h(()=>S()?S():Dt(0,t(J).length-1));let te=h(()=>f()&&f().length===t(M).length?f():Array(t(M).length).fill(v())),ae=h(()=>d()&&d().length===t(M).length?d().map(le=>le?"ff":"20"):Array(t(M).length).fill("20")),fe=h(()=>f()&&f().length===t(M).length?f().map((le,he)=>le+t(ae)[he]):Array(t(M).length).fill(g()));const ue=h(()=>`font-size:${t(y)}em;fill:${t(P)};cursor:default;text-anchor:middle;stroke-width:${c()}px;user-select:none;`),se=`font-size:0.85em;fill:${Ja};cursor:default;text-anchor:middle;stroke:${Ja};stroke-width:0.1px;user-select:none;`,de=h(()=>`font-size:${t(y)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),ke=h(()=>`fill:transparent;stroke-width:${s()}px;`),Ee=h(()=>`stroke-width:${s()}px;stroke:${m()}`);pe(()=>{w()&&S()&&S().indexOf(w())<0&&e.callbacks.unselect()});var Se=Ae(),Ke=K(Se);{var ie=le=>{var he=um(),ve=K(he);{var be=ge=>{var Le=$h();Ve(Le,21,()=>t($),We,(qe,Fe)=>{var ze=Qh(),Oe=X(ze);oe(()=>{B(ze,"opacity",t(Fe)===w()),B(ze,"x",t(J)[t(Fe)]-t(G)+t(O)/2),B(ze,"y",t(I)[t(Fe)]),B(ze,"dy",t(T).v[t(Fe)]<0?t(V):-t(V)),Te(Oe,t(W)[t(Fe)])}),C(qe,ze)}),oe(()=>ct(Le,se+(w()>=0?"opacity:0.2;":""))),C(ge,Le)};Y(ve,ge=>{e.showLabels&&t(W)&&ge(be)})}var we=R(ve);{var Ie=ge=>{var Le=em(),qe=X(Le);oe(()=>{ct(Le,t(ke)),B(qe,"points",t(Q)),B(qe,"stroke",v())}),C(ge,Le)};Y(we,ge=>{(e.plotType==="l"||e.plotType==="b")&&ge(Ie)})}var Je=R(we);{var He=ge=>{var Le=rm();Ve(Le,21,()=>t($),We,(qe,Fe)=>{var ze=tm();oe(()=>{B(ze,"x",t(J)[t(Fe)]-t(G)),B(ze,"y",t(T).v[t(Fe)]<0?t(q):t(I)[t(Fe)]),B(ze,"fill",t(te)[t(Fe)]),B(ze,"width",t(O)),B(ze,"height",t(T).v[t(Fe)]<0?t(I)[t(Fe)]-t(q):t(q)-t(I)[t(Fe)])}),C(qe,ze)}),oe(()=>ct(Le,t(Ee)+(w()>=0?"opacity:0.2;":""))),Ne("click",Le,k),C(ge,Le)};Y(Je,ge=>{e.plotType==="h"&&ge(He)})}var Z=R(Je);{var ee=ge=>{var Le=sm();Ve(Le,21,()=>t($),We,(qe,Fe)=>{var ze=nm(),Oe=X(ze);oe(()=>{B(ze,"x",t(J)[t(Fe)]),B(ze,"y",t(I)[t(Fe)]),B(ze,"fill",t(fe)[t(Fe)]),B(ze,"stroke",t(te)[t(Fe)]),Te(Oe,t(F))}),C(qe,ze)}),oe(()=>ct(Le,t(ue)+(w()>=0?"opacity:0.2;":""))),Ne("click",Le,k),C(ge,Le)};Y(Z,ge=>{(e.plotType==="p"||e.plotType==="b")&&ge(ee)})}var ne=R(Z);{var me=ge=>{var Le=cm(),qe=K(Le);{var Fe=Nt=>{var wt=lm();B(wt,"x",0),B(wt,"y",0),Ne("click",wt,A),C(Nt,wt)};Y(qe,Nt=>{p()&&Nt(Fe)})}var ze=R(qe);{var Oe=Nt=>{var wt=om(),ht=X(wt),Pe=X(ht);oe(()=>{ct(wt,t(de)),B(ht,"x",t(J)[w()]),B(ht,"y",t(I)[w()]),B(ht,"stroke",t(te)[w()]),B(ht,"fill",t(fe)[w()]),Te(Pe,t(F))}),C(Nt,wt)},at=Nt=>{var wt=am(),ht=X(wt);oe(()=>{ct(wt,t(Ee)),B(ht,"stroke",t(te)[w()]),B(ht,"fill",t(te)[w()]),B(ht,"x",t(J)[w()]-t(G)),B(ht,"y",t(T).v[w()]<0?t(q):t(I)[w()]),B(ht,"width",t(O)),B(ht,"height",t(T).v[w()]<0?t(I)[w()]-t(q):t(q)-t(I)[w()])}),C(Nt,wt)};Y(ze,Nt=>{e.plotType!=="h"?Nt(Oe):Nt(at,!1)})}var pr=R(ze);{var Bl=Nt=>{var wt=im(),ht=X(wt),Pe=X(ht);oe(()=>{ct(wt,se),B(ht,"stroke",Za),B(ht,"fill",Za),B(ht,"x",t(J)[w()]),B(ht,"y",t(I)[w()]),B(ht,"dy",t(T).v[w()]<0?t(V):-t(V)),Te(Pe,t(W)[w()])}),C(Nt,wt)};Y(pr,Nt=>{e.showLabels&&t(W)&&t(W).length>0&&Nt(Bl)})}C(ge,Le)};Y(ne,ge=>{w()>=0&&ge(me)})}C(le,he)};Y(Ke,le=>{t(J)&&t(I)&&le(ie)})}C(n,Se),ye()}st(["click"]);var fm=U("<!> <!> <!> <!>",1);function oi(n,e){_e(e,!0);const r={sens:"Sensitivity",spec:"Specificity",eff:"Efficiency",acc:"Accuracy"},s={sens:"sensitivity",spec:"specificity",eff:"efficiency",acc:"accuracy"};let l=h(()=>e.props?e.props.classres:null),o=h(()=>t(l)?Object.keys(t(l)):null),a=h(()=>e.params&&e.params.resID&&t(o)?e.params.resID==="both"?t(o):[e.params.resID]:null),c=h(()=>t(a)?t(l)[t(a)[0]]:null),u=h(()=>e.params?r[e.params.fom]:""),f=h(()=>e.params?r[e.params.fom]+" ("+e.params.className+")":""),d=h(()=>t(c).ncomp>1?1-t(c).ncomp*.065:-.1),v=h(()=>t(c).ncomp>1?t(c).ncomp*1.065:2.1),g=h(()=>[t(d),t(v)]),m=h(()=>t(c)?Dt(1,t(c).ncomp,1):null),w=h(()=>{if(!t(a))return null;let A=0,N=Number.NEGATIVE_INFINITY,M=[];for(let T of t(a)){const P=t(l)[T].v[e.params.className].stat[s[e.params.fom]];A=Math.min(A,Pr(P)),N=Math.max(N,Zt(P)),M.push({yValues:Ge(P),labels:Array.from(P).map(L=>L.toFixed(L<.1?3:2)),faceColor:Ka[T],mainColor:Ur[T],marker:mn[T]})}return{yMin:A,yMax:N,values:M}}),p=h(()=>ri(t(a)));const b=[0,1.1];var _=Ae(),S=K(_);{var k=A=>{{let N=h(()=>"plot-"+e.params.fom);Mr(A,{get title(){return t(f)},get limX(){return t(g)},get limY(){return b},get yLabel(){return t(u)},xLabel:"Number of LVs, A",get fileName(){return t(N)},whole:!0,children:(M,T)=>{var P=fm(),L=K(P);{var E=j=>{{let O=h(()=>[e.props.ncomp]),G=h(()=>[e.props.ncomp]),V=h(()=>[b[0]]),Q=h(()=>[b[1]]);Wr(j,{get xStart(){return t(O)},get xEnd(){return t(G)},get yStart(){return t(V)},get yEnd(){return t(Q)},lineColor:"#a0a0a0"})}};Y(L,j=>{e.props.ncomp&&j(E)})}var y=R(L,2);Ve(y,17,()=>t(w).values,We,(j,O)=>{$t(j,{get xValues(){return t(m)},get yValues(){return t(O).yValues},get labels(){return t(O).labels},get faceColor(){return t(O).faceColor},get mainColor(){return t(O).mainColor},get marker(){return t(O).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var F=R(y,2);{var H=j=>{var O=Ae(),G=K(O);Ve(G,17,()=>t(w).values,We,(V,Q)=>{{let J=h(()=>[t(m)[e.props.ncomp-1]]),I=h(()=>[t(Q).yValues.v[e.props.ncomp-1]]);$t(V,{get xValues(){return t(J)},get yValues(){return t(I)},get faceColor(){return t(Q).mainColor},get mainColor(){return t(Q).mainColor},get marker(){return t(Q).marker},plotType:"b",get showLabels(){return e.params.showLabels},markerWidth:3})}}),C(j,O)};Y(F,j=>{e.props.ncomp&&j(H)})}var q=R(F,2);Xa(q,{get items(){return t(p)}}),C(M,P)},$$slots:{default:!0}})}};Y(S,A=>{t(m)&&t(w)&&A(k)})}C(n,_),ye()}var dm=U("<!> <!> <!>",1),vm=U("<!> <!> <!>",1),hm=U("<!> <!> <!>",1),mm=U("<!> <!>",1),gm=U("<!> <!>",1),pm=U("<!> <!>",1),bm=U("<!> <!> <!> <!> <!>",1);function ql(n,e){_e(e,!0);const r=(L,E=it)=>{const y=h(()=>t(u)[E()]),F=h(()=>t(l).crit[t(y)]);var H=dm(),q=K(H);{var j=Q=>{{let J=h(()=>[t(F)[3]]),I=h(()=>[t(S)[1]-t(F)[3]]),W=h(()=>t(p)[t(y)].lineColor+"10");Ht(Q,{top:[2.6],get left(){return t(J)},height:[2.6],get width(){return t(I)},get faceColor(){return t(W)},lineColor:"transparent"})}},O=Q=>{{let J=h(()=>[t(S)[0]]),I=h(()=>[t(F)[3]-t(S)[0]]),W=h(()=>t(p)[t(y)].lineColor+"10");Ht(Q,{top:[2.6],get left(){return t(J)},height:[2.6],get width(){return t(I)},get faceColor(){return t(W)},lineColor:"transparent"})}};Y(q,Q=>{E()===0?Q(j):Q(O,!1)})}var G=R(q,2);ur(G,{get xValues(){return t(p)[t(y)].xValues},get yValues(){return t(p)[t(y)].yValues},get lineColor(){return t(p)[t(y)].lineColor}});var V=R(G,2);{let Q=h(()=>[t(F)[3],t(F)[3]]),J=h(()=>t(p)[t(y)].lineColor+"80");ur(V,{get xValues(){return t(Q)},yValues:[0,2.6],get lineColor(){return t(J)},lineType:3})}C(L,H)},s=(L,E=it)=>{const y=h(()=>t(u)[E()]),F=h(()=>t(l).crit[t(y)]);var H=vm(),q=K(H);{var j=Q=>{{let J=h(()=>[t(F)[2]]),I=h(()=>[t(S)[1]-t(F)[2]]),W=h(()=>t(p)[t(y)].lineColor+"20");Ht(Q,{top:[2.6],get left(){return t(J)},height:[2.6],get width(){return t(I)},get faceColor(){return t(W)},lineColor:"transparent"})}},O=Q=>{{let J=h(()=>[t(S)[0]]),I=h(()=>[t(F)[2]-t(S)[0]]),W=h(()=>t(p)[t(y)].lineColor+"20");Ht(Q,{top:[2.6],get left(){return t(J)},height:[2.6],get width(){return t(I)},get faceColor(){return t(W)},lineColor:"transparent"})}};Y(q,Q=>{E()===0?Q(j):Q(O,!1)})}var G=R(q,2);ur(G,{get xValues(){return t(p)[t(y)].xValues},get yValues(){return t(p)[t(y)].yValues},get lineColor(){return t(p)[t(y)].lineColor}});var V=R(G,2);{let Q=h(()=>[t(F)[2],t(F)[2]]);ur(V,{get xValues(){return t(Q)},yValues:[0,2.6],get lineColor(){return t(p)[t(y)].lineColor},lineType:2})}C(L,H)},l=h(()=>e.props?e.props.classmodel:null),o=h(()=>e.props?e.props.classres:null),a=h(()=>t(o)?Object.keys(t(o)):null),c=h(()=>e.params.resID&&t(a)?t(o)[e.params.resID]:null),u=h(()=>t(c)?t(c).classNames:null),f=h(()=>t(c)?t(c).nrows:1),d=h(()=>{if(!t(u))return null;const L={};return L[t(u)[0]]=["#7b3294","#a6dba0"],L[t(u)[1]]=["#c2a5cf","#008837"],L.both=["#7b3294","#008837"],L}),v=h(()=>t(d)?t(d)[e.params.className]:null),g=h(()=>e.props.ncomp?"Discrimination (A = "+e.props.ncomp+")":""),m=h(()=>t(c)?t(c).objlabels:null),w=[0,3],p=h(()=>{if(!t(l)||t(l).rule==="hard"||!t(l).crit)return null;const L={};let E=0;for(let y of t(l).classNames)L[y]={xValues:e.props.zscores.apply(F=>F*t(l).crit[y][1]+t(l).crit[y][0]),yValues:e.props.densnorm.apply(F=>F+E+1.05),lineColor:t(v)[E]},E+=1;return L});function b(L,E){const y=E.nrows,F=E.v[E.classNames[0]].res[L-1],H=F.yp;if(!E.ind){const V=Ce.zeros(y).add(.5),Q=new Array(y).fill("#747573"),J=new Array(y).fill(!1);return{xValues:H,yValues:V,colors:Q,filled:J}}const q=Ce.zeros(y),j=new Array(y),O=new Array(y);let G=0;for(let V of E.classNames){const Q=G===0?(W,$)=>W<$:(W,$)=>W>$,J=t(l).crit?t(l).crit[V]:99999,I=t(v)[G];for(let W of E.ind[V])q.v[W]=G+1,j[W]=I,O[W]=t(l).rule==="hard"?!1:Q(F.yp.v[W],J[3]);G=G+1}return{xValues:H,yValues:q,colors:j,filled:O}}const _=h(()=>b(e.props.ncomp,t(c))),S=h(()=>t(_)?or(t(_).xValues):[0,1]),k=h(()=>mn[e.params.resID]),A=h(()=>t(k)==1?[1,.8]:[.8,.6]),N=h(()=>t(k)==1?[2,1.2]:[2,1.2]);var M=Ae(),T=K(M);{var P=L=>{Gn(L,{get title(){return t(g)},get limX(){return t(S)},get limY(){return w},fileName:"plot-predictions",get onclick(){return e.callbacks.unselectObject},children:(E,y)=>{var F=bm(),H=K(F);{var q=I=>{var W=hm(),$=K(W);{let se=h(()=>[t(l).threshold,t(l).threshold]),de=h(()=>e.params.className==="both"?"#909090":t(v)[t(u).findIndex(ke=>ke===e.params.className)]);ur($,{yValues:[0,2.6],get xValues(){return t(se)},lineType:2,get lineColor(){return t(de)}})}var te=R($,2);{var ae=se=>{{let de=h(()=>[t(l).threshold]),ke=h(()=>[t(S)[1]-t(l).threshold]),Ee=h(()=>t(v)[0]+"20");Ht(se,{top:[2.6],get left(){return t(de)},height:[2.6],get width(){return t(ke)},get faceColor(){return t(Ee)},lineColor:"transparent"})}};Y(te,se=>{(e.params.className===t(u)[0]||e.params.className==="both")&&se(ae)})}var fe=R(te,2);{var ue=se=>{{let de=h(()=>[t(S)[0]]),ke=h(()=>[t(l).threshold-t(S)[0]]),Ee=h(()=>t(v)[1]+"20");Ht(se,{top:[2.6],get left(){return t(de)},height:[2.6],get width(){return t(ke)},get faceColor(){return t(Ee)},lineColor:"transparent"})}};Y(fe,se=>{(e.params.className===t(u)[1]||e.params.className==="both")&&se(ue)})}C(I,W)},j=I=>{var W=pm(),$=K(W);{var te=ue=>{var se=mm(),de=K(se);{var ke=Se=>{r(Se,()=>0)};Y(de,Se=>{e.params.showOutliers&&Se(ke)})}var Ee=R(de,2);s(Ee,()=>0),C(ue,se)};Y($,ue=>{(e.params.className===t(u)[0]||e.params.className==="both")&&ue(te)})}var ae=R($,2);{var fe=ue=>{var se=gm(),de=K(se);{var ke=Se=>{r(Se,()=>1)};Y(de,Se=>{e.params.showOutliers&&Se(ke)})}var Ee=R(de,2);s(Ee,()=>1),C(ue,se)};Y(ae,ue=>{(e.params.className===t(u)[1]||e.params.className==="both")&&ue(fe)})}C(I,W)};Y(H,I=>{t(l).rule==="hard"?I(q):t(p)&&I(j,1)})}var O=R(H,2);{let I=h(()=>e.params.showLabels!=="hide");$t(O,Tr(()=>t(_),{get labels(){return t(m)},get selected(){return e.selected},get callbacks(){return e.callbacks},get marker(){return t(k)},get showLabels(){return t(I)},get markerSize(){return t(A)[t(f)>100?1:0]},get markerWidth(){return t(N)[t(f)>100?1:0]},plotType:"p"}))}var G=R(O,2);{var V=I=>{{let W=h(()=>[t(v)[1],t(v)[0]]),$=h(()=>[t(u)[1],t(u)[0]]);Cn(I,{get colmap(){return t(W)},breaks:[0,1,2],get labels(){return t($)}})}};Y(G,I=>{t(u)&&I(V)})}var Q=R(G,2);Kn(Q,{label:"Predicted y-values",showGrid:!0});var J=R(Q,2);Jn(J,{}),C(E,F)},$$slots:{default:!0}})};Y(T,L=>{t(_)&&L(P)})}C(n,M),ye()}var wm=U("<!> <!> <!> <!> <!>",1);function ai(n,e){_e(e,!0);const r="1 – Specificity (total)",s="Sensitivity (total)",l="plot-roc",o=[-.1,1.05],a=[-.05,1.1],c=h(()=>e.params?e.params.resID:null),u=h(()=>e.props?e.props.classmodel:null),f=h(()=>t(u)?t(u).classNames:null),d=h(()=>e.props&&t(c)&&e.props.res?e.props.res[t(c)]:null),v=h(()=>e.props&&t(c)&&e.props.classres?e.props.classres[t(c)]:null),g=ll(Ge([.005]),Ce.seq(.01,.99,.01),Ge([.995])),m=jr(g),w=Ce.seq(1,-1,-.02),p=h(()=>t(d)?kt(t(d),"Yp",t(u).ncomp,1):null);function b(y,F,H){const q=Ce.zeros(F.length),j=Ce.zeros(F.length),O=t(f)[0],G=t(f)[1],V=H[O],Q=H[G];let J=0;for(let $ of F.v){let te=0;for(let fe of V)te+=y[fe]>$;j.v[J]+=te;let ae=0;for(let fe of Q)ae+=y[fe]<=$;q.v[J]+=ae,J+=1}const I=1/H[G].length,W=1/H[O].length;return[q,j,I,W,F]}function _(y,F,H,q,j){const O=Ce.zeros(F.length),G=Ce.zeros(F.length);for(let Q of[0,1]){const J=t(u).params[t(f)[Q]][q],I=J.m[j-1],W=J.s[j-1],$=Q==0?(se,de)=>se>=de:(se,de)=>se<de,te=H[t(f)[Q]],ae=H[t(f)[1-Q]];let fe=0,ue=Q==0?-1:1;for(let se of F.v){let de=I+ue*se*W,ke=0;for(let Se of te)ke+=$(y[Se],de);G.v[fe]+=ke;let Ee=0;for(let Se of ae)Ee+=!$(y[Se],de);O.v[fe]+=Ee,fe+=1}}const V=1/y.length;return[O,G,V,V,g]}function S(y,F,H,q,j){const O=F==="hard"?w:m,[G,V,Q,J,I]=F==="hard"?b(y,O,j.ind):_(y,O,j.ind,H,q);let W=0,$=2;for(let se=0;se<G.length;se++){G.v[se]=1-G.v[se]*Q,V.v[se]=V.v[se]*J;const de=G.v[se]**2+(1-V.v[se])**2;de<$&&($=de,W=se)}G.v[0]=0,V.v[0]=0,G.v[O.length-1]=1,V.v[O.length-1]=1;let te=0;for(let se=0;se<G.length-1;se++){const de=Math.abs(G.v[se+1]-G.v[se]);te+=(V.v[se]+V.v[se+1])*de/2}const ae=G.v[W],fe=V.v[W],ue=I.v[W];return{x:G,y:V,auc:te,alpha:g,xBest:ae,yBest:fe,aBest:F==="soft"?`⍺ = ${((1-ue)*100).toFixed(0)}%`:`τ = ${ue.toFixed(2)}`}}const k=h(()=>S(t(p),t(u).rule,t(u).limType,t(u).ncomp,t(v))),A=h(()=>t(u).ncomp?`ROC (A = ${t(u).ncomp}, AUC = ${t(k).auc.toFixed(4)})`:""),N=h(()=>t(u).rule==="soft"?"total":t(f)[0]),M=h(()=>t(v).v[t(N)].stat.sensitivity[t(u).ncomp-1]),T=h(()=>t(v).v[t(N)].stat.specificity[t(u).ncomp-1]);var P=Ae(),L=K(P);{var E=y=>{Mr(y,{get title(){return t(A)},xLabel:r,yLabel:s,get limX(){return o},get limY(){return a},fileName:l,children:(F,H)=>{var q=wm(),j=K(q);Wr(j,{xStart:[0],xEnd:[1],yStart:[0],yEnd:[1],lineColor:"#a0a0a0",lineType:3});var O=R(j,2);$t(O,{get xValues(){return t(k).x},get yValues(){return t(k).y},plotType:"l",showLabels:!1,get mainColor(){return Ur[t(c)]},lineWidth:1.5});var G=R(O,2);{let J=h(()=>[t(k).xBest]),I=h(()=>[t(k).yBest]);Al(G,{marker:5,get xValues(){return t(J)},get yValues(){return t(I)},get lineColor(){return Ur[e.params.resID]},lineWidth:2,faceColor:"yellow"})}var V=R(G,2);{let J=h(()=>[t(k).xBest]),I=h(()=>[t(k).yBest]),W=h(()=>[t(k).aBest]);An(V,{get xValues(){return t(J)},get yValues(){return t(I)},get labels(){return t(W)},pos:3,textSize:.8})}var Q=R(V,2);{let J=h(()=>[1-t(T)]),I=h(()=>[t(M)]);Al(Q,{get xValues(){return t(J)},get yValues(){return t(I)},get lineColor(){return Ur[e.params.resID]},lineWidth:2,get faceColor(){return Ur[e.params.resID]}})}C(F,q)},$$slots:{default:!0}})};Y(L,y=>{t(k)&&y(E)})}C(n,P),ye()}var _m=U("<!> <!>",1),ym=U("<!> <!> <!> <!> <!> <!> <!>",1);function ii(n,e){_e(e,!0);let r=h(()=>e.props?e.props.classmodel:null),s=h(()=>e.props?e.props.statMat[e.params.resID][t(r).rule]:null),l=h(()=>t(s)?t(s).stat:null),o=h(()=>t(s)?t(s).ticks:null),a=h(()=>t(s)?t(s).tickLabels:null),c=h(()=>t(s)?t(s).values:null),u=h(()=>t(r).rule==="hard"?t(r).threshold:1-Number.parseFloat(t(r).alpha)/100),f=h(()=>t(c)?t(c).length-t(c).v.findIndex(y=>Math.abs(y-t(u))<1e-5):null),d=h(()=>t(l)?t(r).rule==="hard"?t(l)[e.params.fom]:t(l)[t(r).limType][e.params.fom]:null);const v=[0,.2,.3,.4,.5,.6,.7,.8,.9,.95,.99,1],g=["#6200DF","#6923FF","#648FFF","#8CCDFD","#D2ECFF","#FFF5E5","#FFE5BE","#FFCE85","#FFA34E","#FF8024","#CF5903"],m={sens:"Sensitivity",spec:"Specificity",eff:"Efficiency"},w=v.map(y=>y.toFixed(y>.9?2:1)),p=h(()=>t(d)?t(d).nrows/8:1),b=h(()=>t(d)?[0,t(d).ncols+.6]:[0,1]),_=h(()=>t(d)?[-t(p)/2,t(d).nrows+Math.max(.9,t(p))]:[0,1]),S=h(()=>m[e.params.fom]+" (total)"),k=h(()=>t(r).rule==="hard"?"Threshold":"Aplpha, %"),A="Number of LVs, A";let N=re(Re([0,0])),M=re(0);pe(()=>{e.selected||z(N,[0,0],!0)}),pe(()=>{t(r).rule&&e.callbacks.unselect()});function T(y,F){t(N)[1]=t(d).nrows-y+.5,t(N)[0]=F+.5;const H=F+1,q=t(r).rule==="hard"?t(c).v[y]:100*(1-t(c).v[y]);z(M,t(d).v[F*t(d).nrows+y].toFixed(3),!0),e.callbacks.select([Lr(H),Lr(q)])}var P=Ae(),L=K(P);{var E=y=>{Gn(y,{get limX(){return t(b)},get limY(){return t(_)},get title(){return t(S)},fileName:"plot-statheatmap",get onclick(){return e.callbacks.unselect},children:(F,H)=>{var q=ym(),j=K(q);Ua(j,{get values(){return t(d)},get breaks(){return v},get colmap(){return g},onclick:T});var O=R(j,2);Cn(O,{get breaks(){return v},get colmap(){return g},get labels(){return w}});var G=R(O,2);Kn(G,{label:A,whole:!0});var V=R(G,2);_s(V,{get label(){return t(k)},whole:!0,get ticks(){return t(o)},get tickLabels(){return t(a)}});var Q=R(V,2);{let $=h(()=>[t(r).ncomp-.5]),te=h(()=>[t(f)+.5]);Ht(Q,{get left(){return t($)},get top(){return t(te)},width:[1],height:[1],faceColor:"transparent",lineColor:"#221110",lineWidth:1.2})}var J=R(Q,2);{var I=$=>{var te=_m(),ae=K(te);{let ue=h(()=>[t(N)[0]]),se=h(()=>[t(N)[1]]);Ht(ae,{get left(){return t(ue)},get top(){return t(se)},width:[1],height:[1],lineWidth:2,faceColor:"transparent",lineColor:"#221100"})}var fe=R(ae,2);{let ue=h(()=>[t(N)[0]]),se=h(()=>[t(N)[1]-.5]);An(fe,{get xValues(){return t(ue)},get yValues(){return t(se)},get labels(){return t(M)},pos:1,textSize:.8,faceColor:"#221100"})}C($,te)};Y(J,$=>{e.selected&&e.selected.length===2&&$(I)})}var W=R(J,2);Jn(W,{}),C(F,q)},$$slots:{default:!0}})};Y(L,y=>{t(d)&&y(E)})}C(n,P),ye()}const Qn=["#7b3294","#008837"];function ci(n){if(!n.ind)return new Array(n.nrows).fill("#747573");const e=new Array(n.nrows);let r=0;for(let s of n.classNames){const l=Qn[r];for(let o of n.ind[s])e[o]=l;r=r+1}return e}function ui(n,e){const r=Object.keys(n),s=r.length>1?[...r,"both"]:r,l=["sens","spec","eff","acc"],o=r.length>1?"both":r[0],a=[...e,"total"];return{resID:{el:Ye,hidden:r.length==1,default:o,label:"Show",props:{options:s}},fom:{el:Ye,hidden:!1,default:"sens",label:"FoM",props:{options:l}},className:{el:Ye,hidden:!1,default:e[0],label:"Class",props:{options:a}},showLabels:{el:Yt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Fl(n,e){const r=[...e,"both"];return{resID:{el:Ye,hidden:n.length==1,default:n[0],label:"Show",props:{options:n}},className:{el:Ye,hidden:!1,default:e[0],label:"Class",props:{options:r}},showOutliers:{el:Yt,hidden:!1,default:!1,label:"Outliers zone",props:{options:["hide","show"]}},showLabels:{el:Ye,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","show"]}}}}function fi(n){return{resID:{el:Ye,hidden:n.length==1,default:n[0],label:"Show",props:{options:n}}}}function di(n){return{resID:{el:Ye,hidden:n.length==1,default:n[0],label:"Show",props:{options:n}},fom:{el:Ye,hidden:!1,default:"eff",label:"FoM",props:{options:["sens","spec","eff"]}}}}function zl(n){const e=Object.keys(n),r=n[e[0]];return{resID:{el:Ye,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},comp2:{el:Qt,hidden:!1,default:r.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:Qt,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:Yt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Ol(n){const e=Object.keys(n),r=n[e[0]];return{resID:{el:Ye,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},distType:{el:Ye,hidden:r.Yref===null,default:"h/q",label:"Distance",props:{options:["h/q","f/z"]}},transType:{el:Ye,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:Ye,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Yt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}var xm=U("<!> <!> <!> <!>",1);function Il(n,e){_e(e,!0);const r=h(()=>e.props&&e.params&&e.props.res&&e.params.resID?e.props.res[e.params.resID]:null),s=h(()=>e.props&&e.params&&e.props.classres&&e.params.resID?e.props.classres[e.params.resID]:null);function l(A,N){if(!(!A||!N||N<1||N>A.ncomp))return new Ce(kt(A,"xscores",N))}let o=h(()=>l(t(r),e.params.comp1)),a=h(()=>l(t(r),e.params.comp2)),c=h(()=>ci(t(s))),u=h(()=>mn[e.params.resID]),f=h(()=>t(r)?t(r).objlabels:null),d=h(()=>"LV"+e.params.comp1),v=h(()=>"LV"+e.params.comp2),g=h(()=>or(t(o))),m=h(()=>or(t(a))),w=h(()=>t(m)?(t(m)[1]-t(m)[0])*.1:0),p=h(()=>t(m)?[t(m)[0],t(m)[1]+t(w)]:[0,1]),b="X-scores";var _=Ae(),S=K(_);{var k=A=>{Mr(A,{title:b,get limX(){return t(g)},get limY(){return t(p)},get xLabel(){return t(d)},get yLabel(){return t(v)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(N,M)=>{var T=xm(),P=K(T);{let H=h(()=>[t(g)[0]]),q=h(()=>[t(g)[1]]);Wr(P,{get xStart(){return t(H)},get xEnd(){return t(q)},yStart:[0],yEnd:[0],get lineColor(){return Zn}})}var L=R(P,2);{let H=h(()=>[t(p)[0]]),q=h(()=>[t(p)[1]]);Wr(L,{xStart:[0],xEnd:[0],get yStart(){return t(H)},get yEnd(){return t(q)},get lineColor(){return Zn}})}var E=R(L,2);$t(E,{get xValues(){return t(o)},get yValues(){return t(a)},get labels(){return t(f)},get marker(){return t(u)},plotType:"p",get showLabels(){return e.params.showLabels},get colors(){return t(c)},get selected(){return e.selected},get callbacks(){return e.callbacks}});var y=R(E,2);{var F=H=>{{let q=h(()=>[Qn[1],Qn[0]]),j=h(()=>[t(s).classNames[1],t(s).classNames[0]]);Cn(H,{get colmap(){return t(q)},breaks:[0,1,2],get labels(){return t(j)}})}};Y(y,H=>{t(s)&&t(s).ind&&H(F)})}C(N,T)},$$slots:{default:!0}})};Y(S,A=>{t(o)&&t(a)&&A(k)})}C(n,_),ye()}var km=U("<!> <!> <!> <!>",1);function Vl(n,e){_e(e,!0);let r=h(()=>e.props&&e.props.model?e.props.model:null),s=h(()=>e.props&&e.props.res&&e.params.resID?e.props.res[e.params.resID]:null),l=h(()=>e.props&&e.props.classres&&e.params.resID?e.props.classres[e.params.resID]:null);const o="#909090",a=h(()=>t(r)?e.params.limType==="classic"?{h:Ct(t(r),"cNh"),q:Ct(t(r),"cNq"),z:Ct(t(r),"cNz")}:{h:Ct(t(r),"rNh"),q:Ct(t(r),"rNq"),z:Ct(t(r),"rNz")}:null),c=h(()=>t(r)?e.params.limType==="classic"?{h:Ct(t(r),"ch0"),q:Ct(t(r),"cq0"),z:Ct(t(r),"cz0")}:{h:Ct(t(r),"rh0"),q:Ct(t(r),"rq0"),z:Ct(t(r),"cz0")}:null),u=h(()=>t(a)?{h:t(a).h[e.props.ncomp-1],q:t(a).q[e.props.ncomp-1],z:t(a).z[e.props.ncomp-1]}:null),f=h(()=>t(c)?{h:t(c).h[e.props.ncomp-1],q:t(c).q[e.props.ncomp-1],z:t(c).z[e.props.ncomp-1]}:null),d=h(()=>t(u)?e.params.distType==="h/q"?t(u).h:t(u).h+t(u).q:null),v=h(()=>t(u)?e.params.distType==="h/q"?t(u).q:t(u).z:null),g=h(()=>t(f)?e.params.distType==="h/q"?t(f).h:t(u).h+t(u).q:null),m=h(()=>t(f)?e.params.distType==="h/q"?t(f).q:t(f).z:null),w=h(()=>e.params.alpha?1-e.params.alpha/100:.95),p=h(()=>e.params.gamma?1-e.params.gamma/100:.99);let b=h(()=>t(u)?ti(t(w),t(d),t(v),e.params.transType):null),_=h(()=>t(u)?ti(Math.pow(t(p),1/t(r).nrows),t(d),t(v),e.params.transType):null),S=h(()=>t(s)?kt(t(s),"hdist",e.props.ncomp):null),k=h(()=>t(s)?kt(t(s),"qdist",e.props.ncomp):null),A=h(()=>t(s)?kt(t(s),"zdist",e.props.ncomp):null),N=h(()=>t(S)&&t(k)?t(S).map((I,W)=>I/t(f).h*t(u).h+t(k)[W]/t(f).q*t(u).q):null),M=h(()=>e.params.distType==="h/q"?t(S):t(N)),T=h(()=>e.params.distType==="h/q"?t(k):t(A));const P=h(()=>t(M)?$a(t(M),t(d),t(g),e.params.transType):null),L=h(()=>t(T)?$a(t(T),t(v),t(m),e.params.transType):null),E=h(()=>t(s)?t(s).objlabels.map(I=>I.slice(0,Qa)):null);let y=h(()=>ci(t(l))),F=h(()=>mn[e.params.resID]),H=h(()=>"Distances (A = "+e.props.ncomp+")"),q=h(()=>ei(e.params.distType[0],e.params.transType)),j=h(()=>ei(e.params.distType[2],e.params.transType)),O=h(()=>[0,Math.max(t(P).max,Zt(t(_).x))*1.1]),G=h(()=>[0,Math.max(t(L).max,Zt(t(_).y))*1.2]);var V=Ae(),Q=K(V);{var J=I=>{Mr(I,{get title(){return t(H)},get limX(){return t(O)},get limY(){return t(G)},get xLabel(){return t(q)},get yLabel(){return t(j)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(W,$)=>{var te=km(),ae=K(te);{var fe=Se=>{ur(Se,{get xValues(){return t(b).x},get yValues(){return t(b).y},lineColor:o,lineType:2})};Y(ae,Se=>{t(b)&&Se(fe)})}var ue=R(ae,2);{var se=Se=>{ur(Se,{get xValues(){return t(_).x},get yValues(){return t(_).y},lineColor:o,lineType:3})};Y(ue,Se=>{t(_)&&Se(se)})}var de=R(ue,2);$t(de,{get selected(){return e.selected},get callbacks(){return e.callbacks},get labels(){return t(E)},get colors(){return t(y)},get marker(){return t(F)},get xValues(){return t(P).values},get yValues(){return t(L).values},plotType:"p",get showLabels(){return e.params.showLabels}});var ke=R(de,2);{var Ee=Se=>{{let Ke=h(()=>[Qn[1],Qn[0]]),ie=h(()=>[t(l).classNames[1],t(l).classNames[0]]);Cn(Se,{get colmap(){return t(Ke)},breaks:[0,1,2],get labels(){return t(ie)}})}};Y(ke,Se=>{t(l)&&t(l).ind&&Se(Ee)})}C(W,te)},$$slots:{default:!0}})};Y(Q,I=>{t(P)&&t(L)&&I(J)})}C(n,V),ye()}var Em=U("<!> <!> <!> <!>",1);function vi(n,e){_e(e,!0);const r={rmse:"RMSE",r2:"R^2",slope:"Slope"};let s=h(()=>e.props?e.props.res:null),l=h(()=>t(s)?Object.keys(t(s)):null),o=h(()=>e.params&&e.params.resID&&t(l)?e.params.resID==="both"?t(l):[e.params.resID]:null),a=h(()=>t(o)?t(s)[t(o)[0]]:null),c=h(()=>e.params?r[e.params.fom]:""),u=h(()=>e.params?r[e.params.fom]+(t(a).nresp>1?" ("+t(a).varlabels[e.params.resp-1]+")":""):""),f=h(()=>t(a).ncomp>1?1-t(a).ncomp*.065:-.1),d=h(()=>t(a).ncomp>1?t(a).ncomp*1.065:2.1),v=h(()=>[t(f),t(d)]),g=h(()=>t(a)?t(a).stat.components:null),m=h(()=>{if(!t(o))return null;let A=0,N=Number.NEGATIVE_INFINITY,M=[];for(let T of t(o)){const P=t(s)[T].stat[e.params.fom].getcolref(e.params.resp);A=Math.min(A,Pr(P)),N=Math.max(N,Zt(P)),M.push({yValues:Ge(P),labels:Array.from(P).map(L=>L.toFixed(L<.1?3:2)),faceColor:Ka[T],mainColor:Ur[T],marker:mn[T]})}return{yMin:A,yMax:N,values:M}}),w=h(()=>ri(t(o)));const p=h(()=>t(m)?(t(m).yMax-t(m).yMin)*.05:0),b=h(()=>t(m)?[t(m).yMin-t(p),t(m).yMax+4*t(p)]:[0,1]);var _=Ae(),S=K(_);{var k=A=>{{let N=h(()=>"plot-"+e.params.fom);Mr(A,{get title(){return t(u)},get limX(){return t(v)},get limY(){return t(b)},get yLabel(){return t(c)},xLabel:"Number of LVs, A",get fileName(){return t(N)},whole:!0,children:(M,T)=>{var P=Em(),L=K(P);{var E=j=>{{let O=h(()=>[e.props.ncomp]),G=h(()=>[e.props.ncomp]),V=h(()=>[t(b)[0]]),Q=h(()=>[t(b)[1]]);Wr(j,{get xStart(){return t(O)},get xEnd(){return t(G)},get yStart(){return t(V)},get yEnd(){return t(Q)},lineColor:"#a0a0a0"})}};Y(L,j=>{e.props.ncomp&&j(E)})}var y=R(L,2);Ve(y,17,()=>t(m).values,We,(j,O)=>{$t(j,{get xValues(){return t(g)},get yValues(){return t(O).yValues},get labels(){return t(O).labels},get faceColor(){return t(O).faceColor},get mainColor(){return t(O).mainColor},get marker(){return t(O).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var F=R(y,2);{var H=j=>{var O=Ae(),G=K(O);Ve(G,17,()=>t(m).values,We,(V,Q)=>{{let J=h(()=>[t(g)[e.props.ncomp-1]]),I=h(()=>[t(Q).yValues.v[e.props.ncomp-1]]);$t(V,{get xValues(){return t(J)},get yValues(){return t(I)},get faceColor(){return t(Q).mainColor},get mainColor(){return t(Q).mainColor},get marker(){return t(Q).marker},plotType:"b",get showLabels(){return e.params.showLabels},markerWidth:3})}}),C(j,O)};Y(F,j=>{e.props.ncomp&&j(H)})}var q=R(F,2);Xa(q,{get items(){return t(w)}}),C(M,P)},$$slots:{default:!0}})}};Y(S,A=>{t(g)&&t(m)&&A(k)})}C(n,_),ye()}var Sm=U("<!> <!> <!>",1);function Am(n,e){_e(e,!0);let r=h(()=>e.props?e.props.model:null);function s(T,P,L){return!T||!P||P<1||P>T.ncomp?null:new Ce(Ct(T,L,P))}let l=re(void 0),o=re(void 0);const a=h(()=>t(r)?Ge(t(r).xvarvalues):null),c=h(()=>t(r)?Ge(t(r).xvarindices):null),u=h(()=>t(r)?t(r).xvarlabels:null),f=h(()=>t(r)?s(t(r),e.params.comp2,e.params.statType):null),d=h(()=>t(r)?s(t(r),e.params.comp1,e.params.statType):null),v=h(()=>!t(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:t(d),label:`LV${e.params.comp1}`}:e.params.plotType==="l"&&t(a)?{values:t(a),label:t(r).varvaluesName+(t(r).varvaluesUnits?", "+t(r).varvaluesUnits:"")}:{values:t(c),label:"Predictors"}),g=h(()=>t(v)?t(v).values:null),m=h(()=>t(v)?t(v).label:null),w=h(()=>t(f)),p=h(()=>`LV${e.params.comp2}`),b=h(()=>{if(t(o)&&t(o)[0]<Number.POSITIVE_INFINITY&&t(o)[1]>Number.NEGATIVE_INFINITY){const T=(t(o)[1]-t(o)[0])*.1;return[t(o)[0]-2*T,t(o)[1]+T]}else return[0,1]}),_=h(()=>{if(t(l)&&t(l)[0]<Number.POSITIVE_INFINITY&&t(l)[1]>Number.NEGATIVE_INFINITY){const T=Math.abs((t(l)[1]-t(l)[0])*.1);return e.params.plotType==="l"&&t(r).varrev?[t(l)[1]+T,t(l)[0]-T]:[t(l)[0]-T,t(l)[1]+T]}else return[0,1]}),S=h(()=>e.params.statType==="xloadings"?"X-loadings":"Weights"),k=h(()=>"plot-"+e.params.statType);var A=Ae(),N=K(A);{var M=T=>{Mr(T,{get xLabel(){return t(m)},get yLabel(){return t(p)},get title(){return t(S)},get fileName(){return t(k)},get limX(){return t(_)},get limY(){return t(b)},children:(P,L)=>{var E=Sm(),y=K(E);{let j=h(()=>[t(_)[0]]),O=h(()=>[t(_)[1]]);Wr(y,{get xStart(){return t(j)},get xEnd(){return t(O)},yStart:[0],yEnd:[0],get lineColor(){return Zn}})}var F=R(y,2);{var H=j=>{{let O=h(()=>[t(b)[0]]),G=h(()=>[t(b)[1]]);Wr(j,{xStart:[0],xEnd:[0],get yStart(){return t(O)},get yEnd(){return t(G)},get lineColor(){return Zn}})}};Y(F,j=>{e.params.plotType==="p"&&j(H)})}var q=R(F,2);$t(q,{get xValues(){return t(g)},get yValues(){return t(w)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return t(u)},shortenLabels:!1,get mainColor(){return Tl},markerWidth:2,get xRange(){return t(l)},set xRange(j){z(l,j,!0)},get yRange(){return t(o)},set yRange(j){z(o,j,!0)}}),C(P,E)},$$slots:{default:!0}})};Y(N,T=>{t(g)&&t(w)&&T(M)})}C(n,A),ye()}var Cm=U("<!> <!>",1);function Nm(n,e){_e(e,!0);let r=h(()=>e.props?e.props.model:null);const s=h(()=>e.props.ncomp?e.props.ncomp:1);let l=h(()=>t(r)&&t(s)>0?t(r).coeffs.subarray((t(s)-1)*t(r).npred*t(r).nresp,(t(s)-1)*t(r).npred*t(r).nresp+t(r).npred*t(r).nresp):null),o=h(()=>t(l)?new xe(t(l),t(r).npred,t(r).nresp):null);const a=h(()=>t(r)?Ge(t(r).xvarvalues):null),c=h(()=>t(r)?Ge(t(r).xvarindices):null),u=h(()=>t(r)?t(r).xvarlabels:null),f=h(()=>t(r)?t(r).varvaluesName+(t(r).varvaluesUnits?", "+t(r).varvaluesUnits:""):""),d=h(()=>e.params.plotType==="h"?t(c):t(a)),v=h(()=>t(o)?t(o).getcolumn(e.params.resp):null),g=h(()=>e.params.plotType==="h"?"Predictors":t(f)),m=h(()=>e.props.ncomp?" (A = "+e.props.ncomp+")":""),w=h(()=>t(r)?"Regression coefficients for "+t(r).varlabels[e.params.resp-1]+t(m):""),p=h(()=>ni(t(d),e.params.plotType,t(r).varrev)),b=h(()=>t(v)?or(t(v),.075):[0,1]),_="Coefficients";var S=Ae(),k=K(S);{var A=N=>{{let M=h(()=>e.params.plotType==="h");Mr(N,{get xLabel(){return t(g)},yLabel:_,get limX(){return t(p)},get limY(){return t(b)},get title(){return t(w)},get whole(){return t(M)},fileName:"plot-regcoeffs",children:(T,P)=>{var L=Cm(),E=K(L);{let F=h(()=>[t(p)[0]]),H=h(()=>[t(p)[1]]);Wr(E,{get xStart(){return t(F)},get xEnd(){return t(H)},yStart:[0],yEnd:[0],get lineColor(){return Zn}})}var y=R(E,2);$t(y,{get xValues(){return t(d)},get yValues(){return t(v)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Tl},get labels(){return t(u)},shortenLabels:!1}),C(T,L)},$$slots:{default:!0}})}};Y(k,N=>{t(d)&&t(v)&&N(A)})}C(n,S),ye()}var Tm=U("<!> <!> <!>",1),Pm=U('<div class="svelte-z3o1sd"><!></div>');function jm(n,e){_e(e,!0);let r=h(()=>!0),s=re(!1),l=re(null),o=re(null),a=re(null),c=re(null);const u=h(()=>e.props?e.props.model:null),f=h(()=>e.props&&e.props.ncomp>0?e.props.ncomp:1),d=h(()=>t(u)&&t(f)>0?(t(f)-1)*t(u).npred*t(u).nresp:null),v=h(()=>t(d)!==null?t(d)+t(u).npred*t(u).nresp:null),g=h(()=>t(v)!==null?new xe(t(u).sr.subarray(t(d),t(v)),t(u).npred,t(u).nresp):null),m=h(()=>t(v)!==null?new xe(t(u).vip.subarray(t(d),t(v)),t(u).npred,t(u).nresp):null),w=h(()=>t(l)!==null&&t(a)!==null?t(u).varrev&&e.params.xaxis==="values"?Math.max(t(l),t(a)):Math.min(t(l),t(a)):null),p=h(()=>t(o)!==null&&t(c)!==null?Math.max(t(o),t(c)):null),b=h(()=>t(l)!==null&&t(a)!==null?Math.abs(t(l)-t(a)):null),_=h(()=>t(o)!==null&&t(c)!==null?Math.abs(t(o)-t(c)):null),S=h(()=>t(u)?Ge(t(u).xvarvalues):null),k=h(()=>t(u)?Ge(t(u).xvarindices):null),A=h(()=>t(u)?t(u).xvarlabels:null),N=h(()=>t(S)&&t(k)&&t(m)?{values:t(S),indices:t(k),vip:t(m).getcolumn(e.params.resp)}:null),M=h(()=>t(m)&&t(g)?{vip:t(m).getcolumn(e.params.resp),selratio:t(g).getcolumn(e.params.resp)}:null),T=h(()=>t(u)?{values:t(u).varvaluesName+(t(u).varvaluesUnits?", "+t(u).varvaluesUnits:""),indices:"Predictors",vip:"VIP scores"}:null),P=h(()=>t(u)?{vip:"VIP scores",selratio:"Selectivity ratio"}:null),L=h(()=>t(N)?t(N)[e.params.xset]:null),E=h(()=>t(M)?t(M)[e.params.yset]:null),y=h(()=>t(T)?t(T)[e.params.xset]:null),F=h(()=>t(P)?t(P)[e.params.yset]:null),H=h(()=>"Variable importance (A = "+t(f)+")"),q=h(()=>ni(t(L),"l",t(u).varrev&&e.params.xaxis==="values")),j=h(()=>t(E)?or(t(E),.075):[0,1]),O=h(()=>t(u)?t(u).npred<30?1:t(u).npred>200?.5:.8:1),G=h(()=>e.selected&&e.selected.length>0?Ge(e.selected.map(ue=>t(L).v[ue])):null),V=h(()=>e.selected&&e.selected.length>0?Ge(e.selected.map(ue=>t(E).v[ue])):null);function Q(){const ue=t(p)-t(_),se=t(w)+t(b),de=[];for(let ke=0;ke<=t(L).length;ke++){const Ee=t(L).v[ke],Se=t(E).v[ke];Ee>=t(w)&&Ee<=se&&Se>=ue&&Se<=t(p)&&de.push(ke)}de.length>0&&e.callbacks.select(de),z(l,null),z(o,null),z(a,null),z(c,null)}function J(ue,se){e.callbacks.unselect(),z(s,!0),z(l,ue,!0),z(o,se,!0),z(a,ue,!0),z(c,se,!0)}function I(ue,se){z(s,!1),z(r,!0),Q()}function W(ue,se){t(s)&&(z(a,ue,!0),z(c,se,!0))}function $(){if(t(r)){z(r,!1);return}z(s,!1),z(l,null),z(o,null),z(a,null),z(c,null),e.callbacks.unselect()}var te=Ae(),ae=K(te);{var fe=ue=>{var se=Pm(),de=X(se);Mr(de,{get xLabel(){return t(y)},get yLabel(){return t(F)},get limX(){return t(q)},get limY(){return t(j)},get title(){return t(H)},onmousedown:J,onmouseup:I,onmousemove:W,onclick:$,fileName:"plot-varimp",children:(ke,Ee)=>{var Se=Tm(),Ke=K(Se);{let be=h(()=>Tl+(e.selected&&e.selected.length>0?"80":""));$t(Ke,{get xValues(){return t(L)},get yValues(){return t(E)},get markerSize(){return t(O)},get mainColor(){return t(be)},plotType:"p",get showLabels(){return e.params.showLabels},get labels(){return t(A)},shortenLabels:!1})}var ie=R(Ke,2);{var le=be=>{{let we=h(()=>[t(w)]),Ie=h(()=>[t(p)]),Je=h(()=>[t(b)]),He=h(()=>[t(_)]);Ht(be,{get left(){return t(we)},get top(){return t(Ie)},get width(){return t(Je)},get height(){return t(He)},faceColor:"#ff000040"})}};Y(ie,be=>{t(w)&&t(p)&&t(s)&&be(le)})}var he=R(ie,2);{var ve=be=>{$t(be,{get xValues(){return t(G)},get yValues(){return t(V)},get markerSize(){return t(O)},mainColor:"red",plotType:"p",shortenLabels:!1})};Y(he,be=>{t(G)&&t(V)&&be(ve)})}C(ke,Se)},$$slots:{default:!0}}),C(ue,se)};Y(ae,ue=>{t(L)&&t(E)&&ue(fe)})}C(n,te),ye()}var Lm=U("<!> <!> <!> <!> <!>",1);function Mm(n,e){_e(e,!0);let r=h(()=>e.props?e.props.scalars:null);const s=[-99999,-2,-1,0,.2,.5,.8,1.2,1.5,1.8,2,2.5,3,99999],l=["#6200DF","#6923FF","#648FFF","#8CCDFD","#D2ECFF","#E8F5FF","#fefeff","#FFF5E5","#FFE5BE","#FFCE85","#FFA34E","#FF8024","#CF5903"],o=s.map(p=>p.toFixed(1));o[0]="&minus;&infin;",o[o.length-1]="&infin;";const a=h(()=>t(r)?t(r).nrows/8:1),c=h(()=>t(r)?[.45,t(r).ncols+.6]:[0,1]),u=h(()=>t(r)?[.45,t(r).nrows+Math.max(.9,t(a))]:[0,1]),f="PV-scalars",d="Segments, k",v="Number of LVs, A";var g=Ae(),m=K(g);{var w=p=>{Gn(p,{get limX(){return t(c)},get limY(){return t(u)},title:f,fileName:"plot-pvscalars",children:(b,_)=>{var S=Lm(),k=K(S);Ua(k,{get values(){return t(r)},get breaks(){return s},get colmap(){return l}});var A=R(k,2);Cn(A,{get breaks(){return s},get colmap(){return l},get labels(){return o}});var N=R(A,2);Kn(N,{label:v,whole:!0});var M=R(N,2);_s(M,{label:d,whole:!0});var T=R(M,2);Jn(T,{}),C(b,S)},$$slots:{default:!0}})};Y(m,p=>{t(r)&&p(w)})}C(n,g),ye()}function hi(n,e,r=["rmse","r2","slope"]){const s=Object.keys(n),l=s.length>1?[...s,"both"]:s,o=s.length>1?"both":s[0];return{resID:{el:Ye,hidden:s.length==1,default:o,label:"Show",props:{options:l}},fom:{el:Ye,hidden:r.length==1,default:r[0],label:"FoM",props:{options:r}},resp:{el:Qt,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showLabels:{el:Yt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Rm(n,e){return{statType:{el:Ye,hidden:!1,default:"xloadings",label:"Show",props:{options:["xloadings","weights"]}},plotType:{el:ja,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:Qt,hidden:!1,default:n.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:n.ncomp}},comp1:{el:Qt,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:n.ncomp}},showLabels:{el:Yt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function qm(n){return{plotType:{el:ja,hidden:!1,default:"l",label:"Plot type",props:{options:["l","h"]}},resp:{el:Qt,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:Yt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Fm(n){return{yset:{el:Ye,hidden:!1,default:"vip",label:"Y-axis",props:{options:["vip","selratio"]}},xset:{el:Ye,hidden:!1,default:"values",label:"X-axis",props:{options:["values","indices","vip"]}},resp:{el:Qt,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:Yt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function zm(){return{}}var Om=U("<!> <!>",1),Im=U("<p>can not exclude</p>"),Vm=U('<!> <button style="visibility:hidden;"></button>',1);function Bm(n,e){_e(e,!0);const r=(_,S=it)=>{ce(_,{label:"Selected",children:(k,A)=>{var N=Om(),M=K(N);tt(M,{onclick:()=>e.showContributions(S()),text:"plot"});var T=R(M,2);{var P=L=>{tt(L,{onclick:()=>e.markOutlier(S()),text:"remove"})};Y(T,L=>{S()>=0&&L(P)})}C(k,N)},$$slots:{default:!0}})},s=(_,S=it)=>{ce(_,{label:"Selected",children:(k,A)=>{var N=Ae(),M=K(N);{var T=L=>{tt(L,{onclick:()=>e.excludeVars(S()),get text(){return`exclude ${S().length??""} variables`}})},P=L=>{var E=Im();C(L,E)};Y(M,L=>{t(c).cal.npred-S().length>=2?L(T):L(P,!1)})}C(k,N)},$$slots:{default:!0}})},l=(_,S=it)=>{{let k=h(()=>S()[0]),A=h(()=>t(b)),N=h(()=>S()[1].toFixed(0));ce(_,{labelWidth:"auto",get label(){return`Selected: nLV = ${t(k)??""}, ${t(A)??""} = ${t(N)??""}%`},children:(M,T)=>{var P=Vm(),L=K(P);tt(L,{onclick:()=>e.setModelParams(S()),text:"Set"}),C(M,P)},$$slots:{default:!0}})}},o=["cal","pv"],a=1,c=h(()=>({cal:e.res.cal.pls,pv:e.res.pv.pls})),u=h(()=>({cal:e.res.cal.da,pv:e.res.pv.da})),f=h(()=>e.model.da.ncomp),d=h(()=>({pred:{label:"Discrimination",scope:"objects",component:ql,buttons:r},fom:{label:"Figures of merit (plots)",scope:"stats",component:oi},fomhm:{label:"Figures of merit (heatmap)",scope:"options",component:ii,buttons:l},roc:{label:"ROC curve",scope:"stats",component:ai},loadings:{label:"X-loadings and weights",scope:"stats",component:Am},regcoeffs:{label:"Regression coefficients",scope:"stats",component:Nm},varsel:{label:"Variable importance",scope:"variables",component:jm,buttons:s},fom2:{label:"RMSE",scope:"stats",component:vi},scores:{label:"Scores",scope:"objects",component:Il,buttons:r},distance:{label:"Distance",scope:"objects",component:Vl,buttons:r},scalars:{label:"PV scalars",scope:"stats",component:Mm}})),v=Re({pred:Fl(o,e.model.da.classNames,e.model.da),fom:ui(t(u),e.model.da.classNames),fomhm:di(["cal","pv"]),roc:fi(["cal","pv"]),loadings:Rm(e.model.pls,t(f)),regcoeffs:qm(a),varsel:Fm(a),fom2:hi(t(c),1,["rmse"]),scores:zl(t(c)),distance:Ol(t(c)),scalars:zm(t(c))});let g=re(Re({pred:vt(v.pred),fom:vt(v.fom),fomhm:vt(v.fomhm),roc:vt(v.roc),loadings:vt(v.loadings),regcoeffs:vt(v.regcoeffs),varsel:vt(v.varsel),fom2:vt(v.fom2),scores:vt(v.scores),distance:vt(v.distance),scalars:vt(v.scalars)}));pe(()=>{t(g).loadings.plotType!=="p"?v.loadings.comp1.hidden=!0:v.loadings.comp1.hidden=!1}),pe(()=>{e.model.da.rule==="hard"?v.pred.showOutliers.hidden=!0:v.pred.showOutliers.hidden=!1});const m=ll(Ce.seq(-10,-3,.5),Ce.seq(-3,3,.01),Ce.seq(3,10,.5)),w=vs(m),p=h(()=>({res:t(c),classres:t(u),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:t(f),scalars:e.scalars,zscores:m,densnorm:w,statMat:e.statMat})),b=h(()=>e.model.da.rule==="hard"?"tau":"alpha");Rl(n,{get plots(){return t(d)},get props(){return t(p)},get controls(){return v},get params(){return t(g)},set params(_){z(g,_,!0)}}),ye()}var Dm=U('<div class="outliers-pane svelte-1mp4dba"><!></div>'),Ym=U('<div class="exclvars-pane svelte-1mp4dba"><!></div>'),Hm=U('<div class="model-calculator svelte-1mp4dba"><!></div>'),Wm=U('<div class="pcv-calculator svelte-1mp4dba"><!></div>'),Um=U('<div class="buttons"><!> <!> <!></div>'),Xm=U('<div class="ncomp-selector svelte-1mp4dba"><!> <!></div>'),Gm=U('<div class="result-stats svelte-1mp4dba"><!></div>'),Km=U(`<p class="svelte-1mp4dba">This tab lets you train a PLS1-DA classification model and optimize it using Procrustes cross-validation.
               After that you can save the model to a file, apply it to a test set (tab <strong>Test</strong>)
               or to a new set of samples whose response us unknown (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training/calibration set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows
               correspond to observations or objects, columns — to variables (both response and predictors).</p> <p class="svelte-1mp4dba">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed
               that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If x-variables
               are signals, e.g. spectra, this part of header can content numeric values, e.g. wavelength or wavenumbers.
               If this is the case, select <em>values</em> option for the header. This will let you to specify
               name of the values (e.g. <em>Wavelength</em>) and the units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1mp4dba">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — if so, just set
               the corresponding options after selecting the file.</p> <p class="svelte-1mp4dba">The column with class labels should be located right after the column with object/row labels. If there are no
               object labels, the response variable is expected to be in the first column. <strong>The column with class
                  labels is mandatory in the training set and it must contain labels for two classes.</strong></p> <p class="svelte-1mp4dba">Here is an example how data structure may look like (note, that row labels and header are optional):</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">Red</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">Blue</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">Red</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">Blue</td><td class="svelte-1mp4dba">12.2</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">14.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),Jm=U(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to decide how to preprocess the data. You can either skip preprocessing (in the model settings you
               will be able to apply centering and scaling), create the chain of preprocessing methods in special constructor
               (use <em>Create</em> to load the constructor) or load already built preprocessing model from a file. Make your choice.</p>`,1),Zm=U(`<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Now you can create a global PLS model for the training set. Use more components/latent variables (LVs) than
               you expect to be optimal. You will have possibility to select the optimal number of components later.</p>`,1),Qm=U(`<p class="svelte-1mp4dba"><strong>Step 4</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set,
               which will help you to optimize PLS-DA model parameters. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">After this step PLS-DA model will be created automatically and you will be able to explore it and tune
               its parameters.</p>`,1),$m=U("<!> <!> <!>",1),e1=U('<div class="help-text svelte-1mp4dba"><!></div>'),t1=U('<div class="app-container svelte-1mp4dba"><!> <div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function r1(n,e){_e(e,!0);const r=h(()=>e.session.train);let s=re(-1),l=re(!1);function o(W){if(W.length<1)return;const $=W.map(te=>t(r).model.pls.varindices[te+t(r).model.pls.nresp]);if($.length>0){const te=new Set(t(r).exclvars),ae=[...new Set($)].filter(fe=>!te.has(fe));t(r).exclvars=t(r).exclvars.concat(ae),t(r).model={pls:null,da:null},t(r).pvres={pls:null,da:null},t(r).calres={pls:null,da:null},t(r).pvset=null,t(r).ind=null,t(r).ncomp_selected=1}}function a(){t(r).exclvars=[],t(r).model={pls:null,da:null},t(r).pvres={pls:null,da:null},t(r).calres={pls:null,da:null},t(r).pvset=null,t(r).ind=null,t(r).ncomp_selected=1}function c(W){if(W<0||W>t(r).calres.pls.nrows-1)return;const $=t(r).calres.pls.objindices[W];$>=0&&!t(r).outliers.includes($)&&(t(r).outliers.push($),t(r).model={pls:null,da:null},t(r).pvres={pls:null,da:null},t(r).calres={pls:null,da:null},t(r).calsetp=null,t(r).prepmodel=null,t(r).pvset=null,t(r).ind=null,t(r).ncomp_selected=1)}function u(){t(r).outliers=[],t(r).model={pls:null,da:null},t(r).pvres={pls:null,da:null},t(r).calres={pls:null,da:null},t(r).calsetp=null,t(r).prepmodel=null,t(r).pvset=null,t(r).ind=null,t(r).ncomp_selected=1}function f(){t(r).outliers.pop(),t(r).model={pls:null,da:null},t(r).pvres={pls:null,da:null},t(r).calres={pls:null,da:null},t(r).calsetp=null,t(r).prepmodel=null,t(r).pvset=null,t(r).ind=null,t(r).ncomp_selected=1}function d(W,$){W<0||(z(s,W,!0),z(l,!0))}function v(){z(l,!1),z(s,-1)}function g(W){t(r).model.da.ncomp=W[0],t(r).model.da.rule==="hard"?t(r).model.da.threshold=W[1]:t(r).model.da.alpha=W[1]}pe(()=>{t(r).calset===null&&(t(r).pvres={pls:null,da:null},t(r).calres={pls:null,da:null},t(r).pvset=null,t(r).calsetp=null,t(r).prepmodel=null,t(r).prepobj=[],t(r).prepType=null,t(r).outliers=[],t(r).exclvars=[],t(r).ind=null,t(r).ncomp_selected=1,t(r).model={pls:null,da:null})}),pe(()=>{t(r).model.pls===null&&(t(r).model.da=null,t(r).calres={pls:null,da:null},t(r).pvres={pls:null,da:null},t(r).pvset=null)}),pe(()=>{t(r).prepmodel||(t(r).calres={pls:null,da:null},t(r).calsetp=null,t(r).exclvars=[])}),pe(()=>{t(r).pvset===null&&(t(r).pvres={pls:null,da:null})}),pe(()=>{t(r).calsetp||(t(r).model={pls:null,da:null},t(r).calres={pls:null,da:null},t(r).pvres={pls:null,da:null})}),pe(()=>{t(r).calres&&t(r).calres.pls&&(t(r).ind=La(t(r).calres.pls.Yref.getcolref(1),t(r).calset.classNames))}),pe(()=>{if(t(r).model.pls&&t(r).model.ncomp&&t(r).pvres.pls&&t(r).pvres.pls.stat){const W=t(r).pvres.pls.stat.rmse.getcolref(1),te=W.map((ae,fe)=>fe>0?1-ae*ae/W[fe-1]**2:1).findIndex(ae=>ae<=.0975);t(r).ncomp_selected=te<0?t(r).model.ncomp:te}}),pe(()=>{t(r).calres.pls&&t(r).model.da&&(t(r).statmat.cal=gl(t(r).calres.pls,t(r).model.da.params,t(r).ind))}),pe(()=>{t(r).pvres.pls&&t(r).model.da&&(t(r).statmat.pv=gl(t(r).pvres.pls,t(r).model.da.params,t(r).ind))}),pe(()=>{t(r).pvres.pls&&t(r).model.da&&(t(r).pvres.da=bs(t(r).pvres.pls,t(r).model.da,t(r).ind))}),pe(()=>{t(r).calres.pls&&t(r).model.da&&(t(r).calres.da=bs(t(r).calres.pls,t(r).model.da,t(r).ind))}),pe(()=>{const W=lr(()=>JSON.stringify(e.session,Wn));e.backupSession(W,t(r).calset,t(r).calsetp,t(r).pvres.pls,t(r).pvres.da)});const m=h(()=>{if(t(s)<0||!t(r).calres.pls||!t(r).calres.pls.Yref)return null;const $=t(r).calres.pls.Yref.v[t(s)]>0?0:1,te=t(r).model.da.classNames[$];return t(r).ind[[te]].map(ae=>ae+1)});var w=t1(),p=X(w);{var b=W=>{{let $=h(()=>({cal:t(r).calres.pls,pv:t(r).pvres.pls}));Pl(W,{get model_getter(){return Ct},get res_getter(){return kt},get model(){return t(r).model.pls},get res(){return t($)},get ncomp(){return t(r).model.da.ncomp},get selected(){return t(s)},get ind(){return t(m)},closeModal:v})}};Y(p,W=>{t(l)&&W(b)})}var _=R(p,2),S=X(_),k=X(S);Ml(k,{classMandatory:!0,get dataset(){return t(r).calset},set dataset(W){t(r).calset=W}});var A=R(S,2);{var N=W=>{var $=Dm(),te=X($);pl(te,{get outliers(){return t(r).outliers},get dataset(){return t(r).calset},resetOutliers:u,undoOutliers:f}),C(W,$)};Y(A,W=>{t(r).outliers&&t(r).outliers.length>0&&W(N)})}var M=R(A,2);{var T=W=>{nh(W,{get WASM(){return e.WASM},get rawdata(){return t(r).calset},get outliers(){return t(r).outliers},get prepType(){return t(r).prepType},set prepType($){t(r).prepType=$},get prepobj(){return t(r).prepobj},set prepobj($){t(r).prepobj=$},get prepdata(){return t(r).calsetp},set prepdata($){t(r).calsetp=$},get prepmeta(){return t(r).prepmeta},set prepmeta($){t(r).prepmeta=$},get prepmodel(){return t(r).prepmodel},set prepmodel($){t(r).prepmodel=$}})};Y(M,W=>{t(r).calset&&W(T)})}var P=R(M,2);{var L=W=>{var $=Ym(),te=X($);Ef(te,{get exclvars(){return t(r).exclvars},get dataset(){return t(r).calset},resetExclvars:a}),C(W,$)};Y(P,W=>{t(r).exclvars&&t(r).exclvars.length>0&&W(L)})}var E=R(P,2);{var y=W=>{var $=Hm(),te=X($);bh(te,{get WASM(){return e.WASM},get dataset(){return t(r).calsetp},get outliers(){return t(r).outliers},get exclvars(){return t(r).exclvars},get model(){return t(r).model.pls},set model(ae){t(r).model.pls=ae},get resobj(){return t(r).calres.pls},set resobj(ae){t(r).calres.pls=ae}}),C(W,$)};Y(E,W=>{t(r).calsetp&&W(y)})}var F=R(E,2);{var H=W=>{var $=Wm(),te=X($);Sh(te,{get WASM(){return e.WASM},get calset(){return t(r).calsetp},get outliers(){return t(r).outliers},get model(){return t(r).model.pls},get calres(){return t(r).calres.pls},get pvset(){return t(r).pvset},set pvset(ae){t(r).pvset=ae},get pvres(){return t(r).pvres.pls},set pvres(ae){t(r).pvres.pls=ae},get pvscalars(){return t(r).pvscalars},set pvscalars(ae){t(r).pvscalars=ae}}),C(W,$)};Y(F,W=>{t(r).calsetp&&t(r).model.pls&&W(H)})}var q=R(F,2);{var j=W=>{var $=Xm(),te=X($);li(te,{get plsmodel(){return t(r).model.pls},get plsres(){return t(r).calres.pls},get ind(){return t(r).ind},get ncomp(){return t(r).ncomp_selected},get damodel(){return t(r).model.da},set damodel(fe){t(r).model.da=fe}});var ae=R(te,2);ce(ae,{label:"Download",children:(fe,ue)=>{var se=Um(),de=X(se);tt(de,{onclick:()=>ws(t(r).calres,t(r).calset,"train",t(r).model.da.ncomp),text:"Res (cal)"});var ke=R(de,2);tt(ke,{onclick:()=>ws(t(r).pvres,t(r).pvset,"PV",t(r).model.da.ncomp),text:"Res (pv)"});var Ee=R(ke,2);tt(Ee,{onclick:()=>Ma(t(r).model,t(r).prepmodel),text:"Model"}),C(fe,se)},$$slots:{default:!0}}),C(W,$)};Y(q,W=>{t(r).model.pls&&t(r).calres.pls&&t(r).pvres.pls&&t(r).ncomp_selected&&W(j)})}var O=R(q,2);{var G=W=>{var $=Gm(),te=X($);{let ae=h(()=>({cal:t(r).calres.da,pv:t(r).pvres.da}));si(te,{get res(){return t(ae)},get model(){return t(r).model.da}})}C(W,$)};Y(O,W=>{t(r).calres.da&&t(r).pvres.da&&t(r).model.da&&W(G)})}var V=R(_,2),Q=X(V);{var J=W=>{var $=e1(),te=X($);{var ae=ue=>{var se=Km();C(ue,se)},fe=ue=>{var se=$m(),de=K(se);{var ke=le=>{var he=Jm();C(le,he)};Y(de,le=>{t(r).calset&&!t(r).prepmodel&&le(ke)})}var Ee=R(de,2);{var Se=le=>{var he=Zm();C(le,he)};Y(Ee,le=>{t(r).prepmodel&&!t(r).model.pls&&le(Se)})}var Ke=R(Ee,2);{var ie=le=>{var he=Qm();C(le,he)};Y(Ke,le=>{t(r).model&&t(r).model.pls&&!t(r).pvset&&le(ie)})}C(ue,se)};Y(te,ue=>{t(r).calset?ue(fe,!1):ue(ae)})}C(W,$)},I=W=>{var $=Ae(),te=K($);ln(te,()=>t(r).pvres&&t(r).model,ae=>{var fe=Ae(),ue=K(fe);{var se=de=>{{let ke=h(()=>({cal:t(r).calset,pv:t(r).pvset})),Ee=h(()=>({cal:t(r).calres,pv:t(r).pvres}));Bm(de,{markOutlier:c,showContributions:d,excludeVars:o,setModelParams:g,get data(){return t(ke)},get res(){return t(Ee)},get scalars(){return t(r).pvscalars},get model(){return t(r).model},get ncomp(){return t(r).ncomp_selected},get statMat(){return t(r).statmat}})}};Y(ue,de=>{t(r).calres&&t(r).pvres&&t(r).model.pls&&t(r).model.da&&t(r).calset&&t(r).pvset&&de(se)})}C(ae,fe)}),C(W,$)};Y(Q,W=>{!t(r).calres.da||!t(r).pvres.da||!t(r).model?W(J):W(I,!1)})}C(n,w),ye()}var n1=U("<!> <!>",1),s1=U('<br/><span style="color:#a0a0a0;">Optimal LVs:</span> <span style="color:#606060;"> </span>',1),l1=U('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),o1=U('<br/><span style="color:#a0a0a0;">Excluded</span> <span style="color:#a0a0a0;">variables.</span>',1),a1=U('<p class="info-text svelte-7h7avz"><span>Model file:</span> <span style="color:#606060;" class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model info:</span> <!> <br/><span style="color:#a0a0a0;">Classes:</span> <!> <!></p> <!>',1),i1=U("<p><!></p>"),c1=U("<!> <!>",1);function mi(n,e){_e(e,!0);let r=D(e,"model",15),s=re(""),l=re("neutral"),o=re("");function a(b){try{const _=JSON.parse(b,vl);if(Array.isArray(_.pls.v)&&(_.pls.v=Float64Array.from(_.pls.v)),!(_.pls.class[0]==="plsmodel"&&_.pls.nresp===1&&Object.keys(_).includes("da")))throw Error("The JSON file you selected does not contain PLS1-DA model.");_.pls.fileName=t(f),r(_),z(l,"success"),z(o,"")}catch(_){console.error(_),r(null),z(l,"error"),z(o,_,!0)}}function c(b){const _=new FileReader;_.onload=()=>{a(_.result)},_.readAsText(t(s))}function u(){z(s,""),r(null),z(l,"neutral"),z(o,"")}pe(()=>{t(s)===null?(r(null),z(l,"neutral"),z(o,"")):(z(l,"neutral"),z(o,""))});let f=h(()=>t(s)?t(s).name.replace(/\.[^/.]+$/,""):"");var d=c1(),v=K(d);{var g=b=>{var _=n1(),S=K(_);ln(S,()=>t(s),N=>{ce(N,{name:"file-selector",children:(M,T)=>{ps(M,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return t(s)},set file(P){z(s,P,!0)}})},$$slots:{default:!0}})});var k=R(S,2);{var A=N=>{ce(N,{name:"load-button",label:" ",children:(M,T)=>{tt(M,{onclick:c,text:"Load"})},$$slots:{default:!0}})};Y(k,N=>{t(s)&&N(A)})}C(b,_)},m=b=>{ce(b,{name:"info",class:"info",children:(_,S)=>{var k=a1(),A=K(k),N=R(X(A),2),M=X(N),T=R(N,4),P=R(T);{var L=O=>{var G=s1(),V=R(K(G),3),Q=X(V);oe(()=>Te(Q,r().da.ncomp)),C(O,G)};Y(P,O=>{r().da.ncomp&&O(L)})}var E=R(P,4),y=R(E);{var F=O=>{var G=l1(),V=R(K(G),3);Ll(V,{get prepmodel(){return r().pls.prep}}),C(O,G)};Y(y,O=>{r().pls.prep&&O(F)})}var H=R(y,2);{var q=O=>{var G=o1(),V=R(K(G),2);oe(()=>Te(V,` ${r().pls.exclvars.length??""} `)),C(O,G)};Y(H,O=>{r().pls.exclvars.length>0&&O(q)})}var j=R(A,2);cr(j,{onclick:u}),oe(O=>{B(N,"title",r().pls.fileName),Te(M,r().pls.fileName),Te(T,` ${r().pls.ncomp??""} LVs${r().pls.center?", centered":""}${r().pls.scale?", scaled":""} `),Te(E,` ${O??""} `)},[()=>r().da.classNames.join(", ")]),C(_,k)},$$slots:{default:!0}})};Y(v,b=>{r()?b(m,!1):b(g)})}var w=R(v,2);{var p=b=>{ce(b,{name:"error",status:"error",children:(_,S)=>{var k=i1(),A=X(k);bt(A,()=>t(o)),C(_,k)},$$slots:{default:!0}})};Y(w,b=>{(t(l)==="error"||t(o))&&b(p)})}C(n,d),ye()}var u1=U("<!> <!>",1),f1=U('<!> <button style="visibility:hidden;"></button>',1);function d1(n,e){_e(e,!0);const r=(w,p=it)=>{ce(w,{label:"Selected",children:(b,_)=>{var S=u1(),k=K(S);tt(k,{onclick:()=>e.showContributions(p()),text:"plot"});var A=R(k,2);{var N=M=>{tt(M,{onclick:()=>e.markOutlier(p()),text:"remove"})};Y(A,M=>{p()>=0&&M(N)})}C(b,S)},$$slots:{default:!0}})},s=(w,p=it)=>{{let b=h(()=>p()[0]),_=h(()=>t(m)),S=h(()=>p()[1].toFixed(0));ce(w,{labelWidth:"auto",get label(){return`Selected: nLV = ${t(b)??""}, ${t(_)??""} = ${t(S)??""}%`},children:(k,A)=>{var N=f1(),M=K(N);tt(M,{onclick:()=>e.setModelParams(p()),text:"Set"}),C(k,N)},$$slots:{default:!0}})}},l=h(()=>({test:e.res.test.pls})),o=h(()=>({test:e.res.test.da})),a=h(()=>e.model.da.ncomp),c=h(()=>({pred:{label:"Discrimination",scope:"objects",component:ql,buttons:r},fom:{label:"Figures of merit (plots)",scope:"stats",component:oi},fomhm:{label:"Figures of merit (heatmap)",scope:"options",component:ii,buttons:s},roc:{label:"ROC curve",scope:"stats",component:ai},fom2:{label:"RMSE",scope:"stats",component:vi},scores:{label:"Scores",scope:"objects",component:Il,buttons:r},distance:{label:"Distance",scope:"objects",component:Vl,buttons:r}})),u=Re({pred:Fl(["test"],e.model.da.classNames,e.model.da),fom:ui(t(o),e.model.da.classNames),fomhm:di(["test"]),roc:fi(["test"],e.model.da.classNames),fom2:hi(t(l),1,["rmse"]),scores:zl(t(l)),distance:Ol(t(l))});let f=re(Re({pred:vt(u.pred),fom:vt(u.fom),fomhm:vt(u.fomhm),roc:vt(u.roc),fom2:vt(u.fom2),scores:vt(u.scores),distance:vt(u.distance)}));pe(()=>{e.model.da.rule==="hard"?u.pred.showOutliers.hidden=!0:u.pred.showOutliers.hidden=!1});const d=ll(Ce.seq(-10,-3,.5),Ce.seq(-3,3,.01),Ce.seq(3,10,.5)),v=vs(d),g=h(()=>({res:t(l),classres:t(o),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:t(a),scalars:e.scalars,zscores:d,densnorm:v,statMat:e.statMat})),m=h(()=>e.model.da.rule==="hard"?"tau":"alpha");Rl(n,{get plots(){return t(c)},get props(){return t(g)},get controls(){return u},get params(){return t(f)},set params(w){z(f,w,!0)}}),ye()}var v1=U('<div class="outliers-pane svelte-1w77c1q"><!></div>'),h1=U('<div class="buttons"><!> <!></div>'),m1=U('<div class="result-stats svelte-1w77c1q"><!></div>'),g1=U('<div class="ncomp-selector svelte-1w77c1q"><!> <!></div> <!>',1),p1=U('<div class="data-loader svelte-1w77c1q"><!></div> <!> <!>',1),b1=U(`<p class="svelte-1w77c1q">In this tab you can test a PLS1-DA classification model developed in <strong>Train</strong> tab by
               applying it to a test set, which contains both predictors and responses.</p> <p class="svelte-1w77c1q"><strong>Step 1.</strong></p> <p class="svelte-1w77c1q">Load the previously developed PLS1-DA model from a JSON file.</p>`,1),w1=U(`<p class="svelte-1w77c1q"><strong>Step 2.</strong></p> <p class="svelte-1w77c1q">Load your test set from a CSV file. The file structure should be the same as the training/calibration set.
               The column with class labels is mandatory and it should contain the same classes your model was trained for.
               Here is an example how data structure may look like (note, that row labels
               and header are optional):</p> <div class="svelte-1w77c1q"><table class="svelte-1w77c1q"><thead class="svelte-1w77c1q"><tr class="svelte-1w77c1q"><td class="svelte-1w77c1q">Name</td><td class="svelte-1w77c1q">Class</td><td class="svelte-1w77c1q">x1</td><td class="svelte-1w77c1q">x2</td><td class="svelte-1w77c1q">x3</td></tr></thead><tbody class="svelte-1w77c1q"><tr><td class="svelte-1w77c1q">O1</td><td class="svelte-1w77c1q">Red</td><td class="svelte-1w77c1q">3.8</td><td class="svelte-1w77c1q">1.3</td><td class="svelte-1w77c1q">13.6</td></tr><tr><td class="svelte-1w77c1q">O2</td><td class="svelte-1w77c1q">Red</td><td class="svelte-1w77c1q">11.1</td><td class="svelte-1w77c1q">12.3</td><td class="svelte-1w77c1q">3.3</td></tr><tr><td class="svelte-1w77c1q">O3</td><td class="svelte-1w77c1q">Blue</td><td class="svelte-1w77c1q">1.2</td><td class="svelte-1w77c1q">2.3</td><td class="svelte-1w77c1q">4.2</td></tr></tbody></table></div> <p class="svelte-1w77c1q"></p>`,1),_1=U('<div class="help-text svelte-1w77c1q"><!></div>'),y1=U('<div class="app-container svelte-1w77c1q"><!> <div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function x1(n,e){_e(e,!0);const r=h(()=>e.session.test);let s=re(-1),l=re(!1);function o(P){if(P<0||P>t(r).testres.pls.nrows-1)return;const L=t(r).testres.pls.objindices[P];L>=0&&!t(r).outliers.includes(L)&&(t(r).outliers.push(L),t(r).testres={pls:null,da:null},t(r).ind=null)}function a(){t(r).outliers=[],t(r).testres={pls:null,da:null},t(r).ind=null}function c(){t(r).outliers.pop(),t(r).testres={pls:null,da:null},t(r).ind=null}function u(P){P<0||(z(s,P,!0),z(l,!0))}function f(){z(l,!1),z(s,-1)}function d(P){t(r).model.da.ncomp=P[0],t(r).model.da.rule==="hard"?t(r).model.da.threshold=P[1]:t(r).model.da.alpha=P[1]}pe(()=>{t(r).testset===null&&(t(r).outliers=[],t(r).testres={pls:null,da:null},t(r).ind=null),t(r).model===null&&(t(r).testres={pls:null,da:null},t(r).ind=null,t(r).testset=null)}),pe(()=>{t(r).testres&&t(r).testres.pls&&(t(r).ind=La(t(r).testres.pls.Yref.getcolref(1),t(r).testset.classNames))}),pe(()=>{t(r).testres.pls&&t(r).model.da&&(t(r).statmat.test=gl(t(r).testres.pls,t(r).model.da.params,t(r).ind))}),pe(()=>{t(r).testres.pls&&t(r).model.da&&(t(r).testres.da=bs(t(r).testres.pls,t(r).model.da,t(r).ind))}),pe(()=>{const P=lr(()=>JSON.stringify(e.session,Wn));e.backupSession(P,t(r).testset,t(r).model,t(r).testres.da)});const v=h(()=>{if(t(s)<0||!t(r).testres.pls||!t(r).testres.pls.Yref)return null;const L=t(r).testres.pls.Yref.v[t(s)]>0?0:1,E=t(r).model.da.classNames[L];return t(r).ind[[E]].map(y=>y+1)});var g=y1(),m=X(g);{var w=P=>{{let L=h(()=>({test:t(r).testres.pls}));Pl(P,{get model_getter(){return Ct},get res_getter(){return kt},get model(){return t(r).model.pls},get res(){return t(L)},get ncomp(){return t(r).model.da.ncomp},get selected(){return t(s)},get ind(){return t(v)},closeModal:f})}};Y(m,P=>{t(l)&&P(w)})}var p=R(m,2),b=X(p),_=X(b);mi(_,{get model(){return t(r).model},set model(P){t(r).model=P}});var S=R(b,2);{var k=P=>{var L=p1(),E=K(L),y=X(E);Ml(y,{get WASM(){return e.WASM},get outliers(){return t(r).outliers},get model(){return t(r).model.pls},classMandatory:!0,get dataset(){return t(r).testset},set dataset(O){t(r).testset=O},get resobj(){return t(r).testres.pls},set resobj(O){t(r).testres.pls=O}});var F=R(E,2);{var H=O=>{var G=v1(),V=X(G);pl(V,{get outliers(){return t(r).outliers},get dataset(){return t(r).testset},resetOutliers:a,undoOutliers:c}),C(O,G)};Y(F,O=>{t(r).outliers&&t(r).outliers.length>0&&O(H)})}var q=R(F,2);{var j=O=>{var G=g1(),V=K(G),Q=X(V);li(Q,{get plsmodel(){return t(r).model.pls},get plsres(){return t(r).calres.pls},get ind(){return t(r).ind},get ncomp(){return t(r).ncomp_selected},get damodel(){return t(r).model.da},set damodel($){t(r).model.da=$}});var J=R(Q,2);ce(J,{label:"Download",children:($,te)=>{var ae=h1(),fe=X(ae);tt(fe,{onclick:()=>ws(t(r).testres,t(r).testset,"test",t(r).model.da.ncomp),text:"Res (test)"});var ue=R(fe,2);tt(ue,{onclick:()=>Ma(t(r).model,t(r).model.da.ncomp),text:"Model"}),C($,ae)},$$slots:{default:!0}});var I=R(V,2);{var W=$=>{var te=m1(),ae=X(te);{let fe=h(()=>({test:t(r).testres.da}));si(ae,{get res(){return t(fe)},get model(){return t(r).model.da}})}C($,te)};Y(I,$=>{t(r).testres.da&&$(W)})}C(O,G)};Y(q,O=>{t(r).model.pls&&t(r).testres.pls&&O(j)})}C(P,L)};Y(S,P=>{t(r).model&&t(r).model.pls&&P(k)})}var A=R(p,2),N=X(A);{var M=P=>{var L=_1(),E=X(L);{var y=H=>{var q=b1();C(H,q)},F=H=>{var q=w1();C(H,q)};Y(E,H=>{t(r).model?t(r).testset||H(F,1):H(y)})}C(P,L)},T=P=>{var L=Ae(),E=K(L);ln(E,()=>t(r).testres.pls&&t(r).model,y=>{var F=Ae(),H=K(F);{var q=j=>{{let O=h(()=>({test:t(r).testset})),G=h(()=>({test:t(r).testres}));d1(j,{markOutlier:o,showContributions:u,setModelParams:d,get data(){return t(O)},get res(){return t(G)},get model(){return t(r).model},get ncomp(){return t(r).ncomp_selected},get statMat(){return t(r).statmat}})}};Y(H,j=>{t(r).testres&&t(r).testres.pls&&t(r).testres.da&&t(r).model&&t(r).model.pls&&t(r).model.da&&j(q)})}C(y,F)}),C(P,L)};Y(N,P=>{t(r).testres.da?P(T,!1):P(M)})}C(n,g),ye()}var k1=U("<!> <!>",1);function E1(n,e){_e(e,!0);const r=(g,m=it)=>{ce(g,{label:"Selected",children:(w,p)=>{var b=k1(),_=K(b);tt(_,{onclick:()=>e.showContributions(m()),text:"plot"});var S=R(_,2);{var k=A=>{tt(A,{onclick:()=>e.markOutlier(m()),text:"remove"})};Y(S,A=>{m()>=0&&A(k)})}C(w,b)},$$slots:{default:!0}})},s=h(()=>({new:e.res.new.pls})),l=h(()=>({new:e.res.new.da})),o=h(()=>e.model.da.ncomp),a=h(()=>({pred:{label:"Discrimination",scope:"objects",component:ql,buttons:r},scores:{label:"Scores",scope:"objects",component:Il,buttons:r},distance:{label:"Distance",scope:"objects",component:Vl,buttons:r}})),c=Re({pred:Fl(["new"],e.model.da.classNames),scores:zl(t(s)),distance:Ol(t(s))});let u=re(Re({pred:vt(c.pred),scores:vt(c.scores),distance:vt(c.distance)}));pe(()=>{e.model.da.rule==="hard"?c.pred.showOutliers.hidden=!0:c.pred.showOutliers.hidden=!1});const f=Ce.seq(-10,10,.1),d=vs(f),v=h(()=>({res:t(s),classres:t(l),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:t(o),scalars:e.scalars,zscores:f,densnorm:d}));Rl(n,{get plots(){return t(a)},get props(){return t(v)},get controls(){return c},get params(){return t(u)},set params(g){z(u,g,!0)}}),ye()}var S1=U('<div class="data-loader svelte-1rjc99q"><!></div>'),A1=U('<div class="outliers-pane svelte-1rjc99q"><!></div>'),C1=U('<div class="buttons"><!></div>'),N1=U('<div class="ncomp-selector svelte-1rjc99q"><!></div>'),T1=U(`<p class="svelte-1rjc99q">In this tab you can apply a PLS1-DA classification model developed in <strong>Train</strong> tab to
               new set of measurements without known class labels.</p> <p class="svelte-1rjc99q"><strong>Step 1.</strong></p> <p class="svelte-1rjc99q">Load the previously developed PLS1-DA model from a JSON file.</p>`,1),P1=U(`<p class="svelte-1rjc99q"><strong>Step 2.</strong></p> <p class="svelte-1rjc99q">Load your new set. In this case, because dataset should not contain the class labels, you
            can load it either from a CSV file or from SPC files.</p> <p class="svelte-1rjc99q">If you load data from a <strong>CSV file</strong>, the file structure should be the same as the training/calibration set but <strong>without the column with class labels</strong> (only predictors). Here is an example how data structure may look like
               (note, that row labels and header are optional):</p> <div class="svelte-1rjc99q"><table class="svelte-1rjc99q"><thead class="svelte-1rjc99q"><tr class="svelte-1rjc99q"><td class="svelte-1rjc99q">Name</td><td class="svelte-1rjc99q">x1</td><td class="svelte-1rjc99q">x2</td><td class="svelte-1rjc99q">x3</td></tr></thead><tbody><tr><td class="svelte-1rjc99q">O1</td><td class="svelte-1rjc99q">3.8</td><td class="svelte-1rjc99q">1.3</td><td class="svelte-1rjc99q">13.6</td></tr><tr><td class="svelte-1rjc99q">O2</td><td class="svelte-1rjc99q">11.1</td><td class="svelte-1rjc99q">12.3</td><td class="svelte-1rjc99q">3.3</td></tr><tr><td class="svelte-1rjc99q">O3</td><td class="svelte-1rjc99q">1.2</td><td class="svelte-1rjc99q">2.3</td><td class="svelte-1rjc99q">4.2</td></tr></tbody></table> <p>If your model uses spectra as predictors, you can also load spectral data directly
                  from Galactic Industries <strong>SPC files</strong>. The app supports both single spectrum in a file and
                  files with multiple spectra, however only 2-way datasets can be loaded. You can select several
                  SPC files to load (hold Ctrl or Shift when selecting), in this case they will be combined together
                  into the same dataset.</p></div> <p class="svelte-1rjc99q"></p>`,1),j1=U('<div class="help-text svelte-1rjc99q"><!></div>'),L1=U('<div class="app-container svelte-1rjc99q"><!> <div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function M1(n,e){_e(e,!0);const r=h(()=>e.session.new);let s=re(-1),l=re(!1);function o(E){if(E<0||E>t(r).newres.pls.nrows-1)return;const y=t(r).newres.pls.objindices[E];y>=0&&!t(r).outliers.includes(y)&&(t(r).outliers.push(y),t(r).newres={pls:null,da:null})}function a(){t(r).outliers=[],t(r).newres={pls:null,da:null}}function c(){t(r).outliers.pop(),t(r).newres={pls:null,da:null}}function u(E){E<0||(z(s,E,!0),z(l,!0))}function f(){z(l,!1),z(s,-1)}pe(()=>{t(r).newset===null&&(t(r).outliers=[],t(r).newres={pls:null,da:null}),t(r).model===null&&(t(r).newres={pls:null,da:null},t(r).newset=null)}),pe(()=>{t(r).newres.pls&&t(r).model.da&&(t(r).newres.da=bs(t(r).newres.pls,t(r).model.da,null))}),pe(()=>{const E=lr(()=>JSON.stringify(e.session,Wn));e.backupSession(E,t(r).model,t(r).newres.da)});var d=L1(),v=X(d);{var g=E=>{{let y=h(()=>({new:t(r).newres.pls}));Pl(E,{get model_getter(){return Ct},get res_getter(){return kt},get model(){return t(r).model.pls},get res(){return t(y)},get ncomp(){return t(r).model.da.ncomp},get selected(){return t(s)},closeModal:f})}};Y(v,E=>{t(l)&&E(g)})}var m=R(v,2),w=X(m),p=X(w);mi(p,{get model(){return t(r).model},set model(E){t(r).model=E}});var b=R(w,2);{var _=E=>{var y=S1(),F=X(y);Ml(F,{get WASM(){return e.WASM},get outliers(){return t(r).outliers},get model(){return t(r).model.pls},classMandatory:!1,get dataset(){return t(r).newset},set dataset(H){t(r).newset=H},get resobj(){return t(r).newres.pls},set resobj(H){t(r).newres.pls=H}}),C(E,y)};Y(b,E=>{t(r).model&&E(_)})}var S=R(b,2);{var k=E=>{var y=A1(),F=X(y);pl(F,{get outliers(){return t(r).outliers},get dataset(){return t(r).newset},resetOutliers:a,undoOutliers:c}),C(E,y)};Y(S,E=>{t(r).outliers&&t(r).outliers.length>0&&E(k)})}var A=R(S,2);{var N=E=>{var y=N1(),F=X(y);ce(F,{label:"Download",children:(H,q)=>{var j=C1(),O=X(j);tt(O,{onclick:()=>ws(t(r).newres,t(r).newset,"new",t(r).model.da.ncomp),text:"Res (new)"}),C(H,j)},$$slots:{default:!0}}),C(E,y)};Y(A,E=>{t(r).newres.da&&E(N)})}var M=R(m,2),T=X(M);{var P=E=>{var y=j1(),F=X(y);{var H=j=>{var O=T1();C(j,O)},q=j=>{var O=P1();C(j,O)};Y(F,j=>{t(r).model?t(r).newset||j(q,1):j(H)})}C(E,y)},L=E=>{var y=Ae(),F=K(y);ln(F,()=>t(r).newres&&t(r).model,H=>{var q=Ae(),j=K(q);{var O=G=>{{let V=h(()=>({new:t(r).newset})),Q=h(()=>({new:t(r).newres}));E1(G,{markOutlier:o,showContributions:u,get data(){return t(V)},get res(){return t(Q)},get model(){return t(r).model},get ncomp(){return t(r).ncomp_selected}})}};Y(j,G=>{t(r).newres&&t(r).newres.da&&t(r).model&&t(r).model.da&&G(O)})}C(H,q)}),C(E,y)};Y(T,E=>{t(r).newres.da?E(L,!1):E(P)})}C(n,d),ye()}var R1=U('<sup style="color:red">β</sup>'),q1=U('<li><button class="svelte-1josccy"> </button></li>'),F1=U("<div><!></div>"),z1=U('<div class="info-container svelte-1josccy"><!></div>'),O1=U('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function I1(n,e){_e(e,!0);let r=D(e,"tabs",19,()=>[]),s=D(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let o=re(!1),a=re(void 0),c=re("Current session "),u=re(!1);function f(T){z(c,T,!0),z(u,!0),setTimeout(()=>{z(c,"Current session "),z(u,!1)},1e3)}function d(){z(o,!0)}function v(){z(o,!1)}function g(T){t(a).tab=T}function m(){const T=indexedDB.open(l,1);T.onsuccess=P=>{const E=P.target.result.transaction(e.appID,"readwrite");E.objectStore(e.appID).delete("session"),E.oncomplete=()=>{z(a,e.initSession(),!0),f("Session was reinitialzed.")},E.onerror=()=>console.error("Failed to session from DB.")}}function w(T,P){window.localStorage.removeItem(e.appID+"-blocked");const L=indexedDB.open(l,1);L.onsuccess=E=>{const H=E.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);H.put(T,"session"),H.put(hl(new Date),"session-update")}}function p(){new Promise((T,P)=>{const L=indexedDB.open(l,1);L.onsuccess=E=>{const q=E.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");q.onsuccess=()=>T(q.result),q.onerror=()=>P(q.error)}}).then(T=>{b(T),z(c,"Last session is restored "),z(u,!0),setTimeout(()=>{z(c,"Current session "),z(u,!1)},1500)}).catch(T=>{console.error(T),z(a,e.initSession(),!0)})}function b(T){if(!T||T==="undefined"){z(a,e.initSession(),!0);return}const P=JSON.parse(T,vl);z(a,e.checkSession(P)?P:e.initSession(e.appID),!0)}function _(){const T=hl(new Date),P=e.appID+"-session-"+T+".json";t(a).date=T;const L=JSON.stringify(t(a),Wn),E=new Blob([L],{type:"text/json"}),y=window.URL.createObjectURL(E),F=document.createElement("a");F.setAttribute("href",y),F.setAttribute("download",P),F.click()}function S(T){const P=new FileReader;P.onload=()=>{b(P.result),T.target.value=""},P.readAsText(T.target.files[0])}function k(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&m()}fu(()=>{const T=e.appID,P=indexedDB.open(l,1);P.onupgradeneeded=L=>{const E=L.target.result;E.objectStoreNames.contains(T)||E.createObjectStore(T)},P.onsuccess=L=>{p()}});var A=Ae(),N=K(A);{var M=T=>{var P=O1(),L=X(P),E=X(L),y=X(E),F=R(y,2),H=X(F),q=R(H);{var j=le=>{var he=R1();C(le,he)};Y(q,le=>{s()&&le(j)})}var O=R(F,2),G=X(O),V=R(E,2);Ve(V,21,r,We,(le,he,ve)=>{var be=q1();let we;var Ie=X(be),Je=X(Ie);oe(()=>{we=dt(be,1,"nav-item svelte-1josccy",null,we,{selected:t(a).tab===ve}),Te(Je,t(he).name)}),Ne("click",Ie,()=>g(ve)),Ne("keydown",Ie,()=>g(ve)),C(le,be)});var Q=R(L,2),J=X(Q);ln(J,()=>t(a).date,le=>{var he=Ae(),ve=K(he);Ve(ve,17,r,We,(be,we,Ie)=>{var Je=F1();let He;var Z=X(Je);Vn(Z,()=>t(we).component,(ee,ne)=>{ne(ee,{get WASM(){return e.WASM},get session(){return t(a)},backupSession:w})}),oe(()=>He=dt(Je,1,`tab-content tab-content-${t(we).label??""}`,"svelte-1josccy",He,{hidden:t(a).tab!==Ie})),C(be,Je)}),C(le,he)});var I=R(Q,2),W=X(I);let $;var te=X(W),ae=X(te),fe=R(te,2),ue=X(fe),se=R(fe,2),de=R(se,2),ke=R(W,2),Ee=X(ke),Se=R(Ee,2);gr(Se,()=>e.footer);var Ke=R(I,2);{var ie=le=>{Nl(le,{closeModal:v,children:(he,ve)=>{var be=z1(),we=X(be);gr(we,()=>e.info),C(he,be)},$$slots:{default:!0}})};Y(Ke,le=>{t(o)&&le(ie)})}oe(()=>{B(y,"alt",e.appShortTitle),Te(H,e.appTitle),Te(G,e.appSlogan),$=dt(W,1,"session svelte-1josccy",null,$,{"no-buttons":t(u)}),Te(ae,t(c))}),Ne("change",ue,S),Ne("click",se,_),Ne("click",de,k),Ne("click",Ee,d),Ne("keydown",Ee,d),C(T,P)};Y(N,T=>{t(a)&&T(M)})}C(n,A),ye()}st(["click","keydown","change"]);const G1="modulepreload",K1=function(n){return"/"+n},J1={},V1=function(e,r,s){let l=Promise.resolve();function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return l.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};async function B1(n={}){var e,r=n,s=!!globalThis.window,l=!!globalThis.WorkerGlobalScope,o=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer";if(o){const{createRequire:Z}=await V1(async()=>{const{createRequire:ee}=await Promise.resolve().then(()=>W1);return{createRequire:ee}},void 0);var a=Z(wr&&wr.tagName.toUpperCase()==="SCRIPT"&&wr.src||new URL("pls1da.js",document.baseURI).href)}var c="./this.program",u=(Z,ee)=>{throw ee},f=wr&&wr.tagName.toUpperCase()==="SCRIPT"&&wr.src||new URL("pls1da.js",document.baseURI).href,d="",v,g;if(o){var m=a("node:fs");f.startsWith("file:")&&(d=a("node:path").dirname(a("node:url").fileURLToPath(f))+"/"),g=Z=>(Z=k(Z)?new URL(Z):Z,m.readFileSync(Z)),v=async Z=>(Z=k(Z)?new URL(Z):Z,m.readFileSync(Z,void 0)),1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),u=(Z,ee)=>{throw process.exitCode=Z,ee}}else if(s||l){try{d=new URL(".",f).href}catch{}l&&(g=Z=>{var ee=new XMLHttpRequest;return ee.open("GET",Z,!1),ee.responseType="arraybuffer",ee.send(null),new Uint8Array(ee.response)}),v=async Z=>{if(k(Z))return new Promise((ne,me)=>{var ge=new XMLHttpRequest;ge.open("GET",Z,!0),ge.responseType="arraybuffer",ge.onload=()=>{ge.status==200||ge.status==0&&ge.response?ne(ge.response):me(ge.status)},ge.onerror=me,ge.send(null)});var ee=await fetch(Z,{credentials:"same-origin"});if(ee.ok)return ee.arrayBuffer();throw Error(ee.status+" : "+ee.url)}}var w=console.log.bind(console),p=console.error.bind(console),b,_=!1,S,k=Z=>Z.startsWith("file://"),A,N,M,T,P,L=!1;function E(){var Z=Ie.buffer;M=new Int8Array(Z),T=new Uint8Array(Z),r.HEAP32=new Int32Array(Z),P=new Uint32Array(Z),r.HEAPF64=new Float64Array(Z),new BigInt64Array(Z),new BigUint64Array(Z)}function y(Z){throw r.onAbort?.(Z),Z="Aborted("+Z+")",p(Z),_=!0,Z=new WebAssembly.RuntimeError(Z+". Build with -sASSERTIONS for more info."),N?.(Z),Z}var F;async function H(Z){if(!b)try{var ee=await v(Z);return new Uint8Array(ee)}catch{}if(Z==F&&b)Z=new Uint8Array(b);else if(g)Z=g(Z);else throw"both async and sync fetching of the wasm failed";return Z}async function q(Z,ee){try{var ne=await H(Z);return await WebAssembly.instantiate(ne,ee)}catch(me){p(`failed to asynchronously prepare wasm: ${me}`),y(me)}}async function j(Z){var ee=F;if(!b&&!k(ee)&&!o)try{var ne=fetch(ee,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(ne,Z)}catch(me){p(`wasm streaming compile failed: ${me}`),p("falling back to ArrayBuffer instantiation")}return q(ee,Z)}class O{name="ExitStatus";constructor(ee){this.message=`Program terminated with exit(${ee})`,this.status=ee}}var G=Z=>{for(;0<Z.length;)Z.shift()(r)},V=[],Q=[],J=()=>{var Z=r.preRun.shift();Q.push(Z)},I=!0,W=0,$={},te=Z=>{S=Z,I||0<W||(r.onExit?.(Z),_=!0),u(Z,new O(Z))},ae=Z=>{if(!_)try{Z()}catch(ee){ee instanceof O||ee=="unwind"||u(1,ee)}finally{if(!(I||0<W))try{S=Z=S,te(Z)}catch(ee){ee instanceof O||ee=="unwind"||u(1,ee)}}},fe=globalThis.TextDecoder&&new TextDecoder,ue=(Z,ee=0)=>{for(var ne=ee,me=ne+void 0;Z[ne]&&!(ne>=me);)++ne;if(16<ne-ee&&Z.buffer&&fe)return fe.decode(Z.subarray(ee,ne));for(me="";ee<ne;){var ge=Z[ee++];if(ge&128){var Le=Z[ee++]&63;if((ge&224)==192)me+=String.fromCharCode((ge&31)<<6|Le);else{var qe=Z[ee++]&63;ge=(ge&240)==224?(ge&15)<<12|Le<<6|qe:(ge&7)<<18|Le<<12|qe<<6|Z[ee++]&63,65536>ge?me+=String.fromCharCode(ge):(ge-=65536,me+=String.fromCharCode(55296|ge>>10,56320|ge&1023))}}else me+=String.fromCharCode(ge)}return me},se={},de=()=>{if(!ke){var Z={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(globalThis.navigator?.language??"C").replace("-","_")+".UTF-8",_:c||"./this.program"},ee;for(ee in se)se[ee]===void 0?delete Z[ee]:Z[ee]=se[ee];var ne=[];for(ee in Z)ne.push(`${ee}=${Z[ee]}`);ke=ne}return ke},ke,Ee=(Z,ee,ne)=>{var me=T;if(!(0<ne))return 0;var ge=ee;ne=ee+ne-1;for(var Le=0;Le<Z.length;++Le){var qe=Z.codePointAt(Le);if(127>=qe){if(ee>=ne)break;me[ee++]=qe}else if(2047>=qe){if(ee+1>=ne)break;me[ee++]=192|qe>>6,me[ee++]=128|qe&63}else if(65535>=qe){if(ee+2>=ne)break;me[ee++]=224|qe>>12,me[ee++]=128|qe>>6&63,me[ee++]=128|qe&63}else{if(ee+3>=ne)break;me[ee++]=240|qe>>18,me[ee++]=128|qe>>12&63,me[ee++]=128|qe>>6&63,me[ee++]=128|qe&63,Le++}}return me[ee]=0,ee-ge},Se=Z=>{for(var ee=0,ne=0;ne<Z.length;++ne){var me=Z.charCodeAt(ne);127>=me?ee++:2047>=me?ee+=2:55296<=me&&57343>=me?(ee+=4,++ne):ee+=3}return ee},Ke=[null,[],[]],ie=()=>{if(o){var Z=a("node:crypto");return ee=>Z.randomFillSync(ee)}return ee=>crypto.getRandomValues(ee)},le=Z=>{(le=ie())(Z)};if(r.noExitRuntime&&(I=r.noExitRuntime),r.print&&(w=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(b=r.wasmBinary),r.thisProgram&&(c=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.shift()();r.ccall=(Z,ee,ne,me)=>{var ge={string:Oe=>{var at=0;if(Oe!=null&&Oe!==0){at=Se(Oe)+1;var pr=be(at);Ee(Oe,pr,at),at=pr}return at},array:Oe=>{var at=be(Oe.length);return M.set(Oe,at),at}};Z=r["_"+Z];var Le=[],qe=0;if(me)for(var Fe=0;Fe<me.length;Fe++){var ze=ge[ne[Fe]];ze?(qe===0&&(qe=we()),Le[Fe]=ze(me[Fe])):Le[Fe]=me[Fe]}return ne=Z(...Le),ne=(function(Oe){return qe!==0&&ve(qe),ee==="string"?Oe?ue(T,Oe):"":ee==="boolean"?!!Oe:Oe})(ne)};var he,ve,be,we,Ie,Je={g:()=>y(""),j:()=>{I=!1,W=0},k:(Z,ee)=>{if($[Z]&&(clearTimeout($[Z].id),delete $[Z]),!ee)return 0;var ne=setTimeout(()=>{delete $[Z],ae(()=>he(Z,performance.now()))},ee);return $[Z]={id:ne,U:ee},0},a:()=>Date.now(),c:Z=>p(Z?ue(T,Z):""),b:()=>performance.now(),l:Z=>{var ee=T.length;if(Z>>>=0,2147483648<Z)return!1;for(var ne=1;4>=ne;ne*=2){var me=ee*(1+.2/ne);me=Math.min(me,Z+100663296);e:{me=(Math.min(2147483648,65536*Math.ceil(Math.max(Z,me)/65536))-Ie.buffer.byteLength+65535)/65536|0;try{Ie.grow(me),E();var ge=1;break e}catch{}ge=void 0}if(ge)return!0}return!1},e:(Z,ee)=>{var ne=0,me=0,ge;for(ge of de()){var Le=ee+ne;P[Z+me>>2]=Le,ne+=Ee(ge,Le,1/0)+1,me+=4}return 0},f:(Z,ee)=>{var ne=de();P[Z>>2]=ne.length,Z=0;for(var me of ne)Z+=Se(me)+1;return P[ee>>2]=Z,0},h:(Z,ee,ne,me)=>{for(var ge=0,Le=0;Le<ne;Le++){var qe=P[ee>>2],Fe=P[ee+4>>2];ee+=8;for(var ze=0;ze<Fe;ze++){var Oe=Z,at=T[qe+ze],pr=Ke[Oe];at===0||at===10?((Oe===1?w:p)(ue(pr)),pr.length=0):pr.push(at)}ge+=Fe}return P[me>>2]=ge,0},i:te,d:(Z,ee)=>(le(T.subarray(Z,Z+ee)),0)},He;return He=await(async function(){function Z(ne){return ne=He=ne.exports,r._plsfit_wasm=ne.o,r._free=ne.p,r._malloc=ne.q,r._plspredict_wasm=ne.r,r._pcvpls_wasm=ne.s,r._prepapply_wasm=ne.t,r._prepfit_wasm=ne.u,he=ne.v,r._strdup=ne.w,r._strndup=ne.x,r.__ZdaPv=ne.y,r.__ZdaPvm=ne.z,r.__ZdlPv=ne.A,r.__ZdlPvm=ne.B,r.__Znaj=ne.C,r.__ZnajSt11align_val_t=ne.D,r.__Znwj=ne.E,r.__ZnwjSt11align_val_t=ne.F,r.___libc_calloc=ne.G,r.___libc_free=ne.H,r.___libc_malloc=ne.I,r.___libc_realloc=ne.J,r._emscripten_builtin_malloc=ne.K,r._emscripten_builtin_calloc=ne.L,r._emscripten_builtin_free=ne.M,r._emscripten_builtin_realloc=ne.N,r._malloc_size=ne.O,r._malloc_usable_size=ne.P,r._reallocf=ne.Q,ve=ne.R,be=ne.S,we=ne.T,Ie=ne.m,E(),He}var ee={a:Je};return r.instantiateWasm?new Promise(ne=>{r.instantiateWasm(ee,(me,ge)=>{ne(Z(me))})}):(F??=r.locateFile?r.locateFile?r.locateFile("pls_wasm.wasm",d):d+"pls_wasm.wasm":new URL("/pls1da/pls1da.wasm",wr&&wr.tagName.toUpperCase()==="SCRIPT"&&wr.src||new URL("pls1da.js",document.baseURI).href).href,Z((await j(ee)).instance))})(),(function(){function Z(){if(r.calledRun=!0,!_){if(L=!0,He.n(),A?.(r),r.onRuntimeInitialized?.(),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var ee=r.postRun.shift();V.push(ee)}G(V)}}if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)J();G(Q),r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),Z()},1)):Z()})(),L?e=r:e=new Promise((Z,ee)=>{A=Z,N=ee}),e}var D1=U('<p>Current release: <span>1.3.1</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PLS1-DA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="" download=""></a> | <a href="">video lessons</a></p>'),Y1=U(`<h2>PLS1 Discriminant Analysis (binary version)</h2> <p>Interactive web-application for creating, testing and applying PLS1-DA models for
      discriminant analysis between two classes (binary version). The app implements both conventional
      method based on threshold (hard) as well as soft method based on distributions (soft),
      described in <a href="https://doi.org/10.1016/j.microc.2025.113329">this paper</a>.
      Like any other mda.tools web-apps it does not send any information to the server,
      all calculations are done locally on your device.</p> <p>The application uses <a href="https://doi.org/10.1016/j.aca.2023.341096">Procrustes cross-validation</a> for optimization and quality check on the training stage.</p> <p>Check out YouTube <a href="">video-lessons</a> for more details.</p> <h3>v. 1.3.1</h3> <p class="release-info">released 26/02/2026</p> <ul><li>Many small improvements to plots and interface.</li></ul> <h3>v. 1.3.0</h3> <p class="release-info">released 24/02/2026</p> <ul><li>Heatmap plot can be used for selection of model parameters.</li> <li>Added scores and distance plots.</li> <li>Improvements to look and feel of the other plots.</li> <li>Fixed a bug in result downloader.</li></ul>`,1);function H1(n,e){_e(e,!1);function r(o){const a=Object.keys(o);if(!["date","tab","train","test","new"].every(m=>a.includes(m)))return!1;const c=["model","calset","calsetp","calres","pvset","pvres","outliers","exclvars","ncomp_selected","pvscalars","prepType","prepmodel","prepmeta","prepobj"],u=Object.keys(o.train);if(!c.every(m=>u.includes(m)))return!1;const f=["model","testset","testres","outliers","ncomp_selected"],d=Object.keys(o.test);if(!f.every(m=>d.includes(m)))return!1;const v=["model","newset","newres","outliers","ncomp_selected"],g=Object.keys(o.new);return!!v.every(m=>g.includes(m))}function s(){return{date:hl(new Date),tab:0,train:{model:{pls:0,da:0},calset:0,calsetp:0,pvset:0,ind:0,calres:{pls:0,da:0},pvres:{pls:0,da:0},statmat:{cal:0,pv:0},outliers:[],exclvars:[],ncomp_selected:1,pvscalars:0,prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{model:0,damodel:0,testset:0,testres:{pls:0,da:0},statmat:{test:0},outliers:[],ncomp_selected:1},new:{model:0,damodel:0,newset:0,newres:{pls:0,da:0},outliers:[],ncomp_selected:1}}}const l=[{name:"Train",label:"train",component:r1},{name:"Test",label:"test",component:x1},{name:"Predict",label:"new",component:M1}];au(),I1(n,{appID:"plsda",appTitle:"PLS1-DA",appShortTitle:"PLS1-DA",appSlogan:"PLS1 Discriminant Analysis (binary)",get WASM(){return B1},get tabs(){return l},initSession:s,checkSession:r,footer:c=>{var u=D1();C(c,u)},info:c=>{var u=Y1();C(c,u)},$$slots:{footer:!0,info:!0}}),ye()}zc(H1,{target:document.body});const W1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pls1da.js.map
