(function(){"use strict";var Vl=document.createElement("style");Vl.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-142p4sy{display:none}.selector.svelte-142p4sy{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-142p4sy{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-142p4sy:not(.selected):hover{border:1px solid}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.exclvars.svelte-12e65an{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;inset:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.wrapper.svelte-1di9qjd{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-1di9qjd{grid-area:plot}.plot-controls.svelte-1di9qjd{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-1di9qjd>.control-element{background:transparent}.msg-select.svelte-1di9qjd{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}table.svelte-110ino2{width:100%;border-collapse:collapse}tr.svelte-110ino2{width:100%}th.svelte-110ino2{border-bottom:1px solid #a0a0a0}th.svelte-110ino2,td.svelte-110ino2{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}td.svelte-110ino2:first-of-type{width:25%}.switcher.svelte-110ino2{padding:1em .2em .2em;text-align:center}label.svelte-110ino2{background-color:#e8e8e8;border:solid 1px #708090;color:#607080;padding:.25em .5em;margin-right:.1em;border-radius:.25em;cursor:pointer}label.svelte-110ino2:hover{background-color:#fffef0;color:#607080;border-color:#607080}input.svelte-110ino2{display:none}input.svelte-110ino2:checked+label:where(.svelte-110ino2){background-color:#607080;color:#e8f0f8;border-color:#607080}.control-element.res-switcher{margin-top:1em;margin-bottom:0;padding-bottom:0;justify-content:center;background:transparent;font-size:.8rem}.control-element.res-switcher:hover{background:transparent}.control-element.res-switcher .selector{justify-content:center}.control-element.res-switcher>.selector>.option{background-color:#e8e8e8;border-color:#708090;color:#607080}p.svelte-7klqqw{line-height:1.5em}span.svelte-7klqqw{color:#a0a0a0}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}div.svelte-z3o1sd{width:100%;height:100%}div.svelte-z3o1sd .plot .axes{cursor:crosshair}div.svelte-z3o1sd .plot .axes-content rect{pointer-events:none}.tab-content-train .plot-controls-area>.plot-selector-fom2,.tab-content-train .plot-controls-area>.plot-selector-loadings{margin-top:1em}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mp4dba{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(330px,30%) 1fr}}.info-text.svelte-7h7avz{line-height:1.5em}.info-text.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.tab-content-test .plot-controls-area>.plot-selector-fom2{margin-top:1em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q),.help-text.svelte-1w77c1q>div:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q){border-collapse:collapse}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) thead:where(.svelte-1w77c1q) tr:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q){font-weight:700;background:#f8f4e0}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) tbody:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1w77c1q{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(330px,30%) 1fr}}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q),.help-text.svelte-1rjc99q>div:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q){border-collapse:collapse}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) thead:where(.svelte-1rjc99q) tr:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q){font-weight:700;background:#f8f4e0}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Vl);var mr=typeof document<"u"?document.currentScript:null;const ys=!1;var xs=Array.isArray,si=Array.prototype.indexOf,fn=Array.prototype.includes,Un=Array.from,li=Object.defineProperty,Tr=Object.getOwnPropertyDescriptor,Ol=Object.getOwnPropertyDescriptors,Bl=Object.prototype,oi=Array.prototype,Xn=Object.getPrototypeOf,Dl=Object.isExtensible;function dn(n){return typeof n=="function"}const yt=()=>{};function ai(n){return typeof n?.then=="function"}function ii(n){return n()}function ks(n){for(var e=0;e<n.length;e++)n[e]()}function Yl(){var n,e,t=new Promise((s,l)=>{n=s,e=l});return{promise:t,resolve:n,reject:e}}function ci(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const t=[];for(const s of n)if(t.push(s),t.length===e)break;return t}const xt=2,Gn=4,An=8,Wl=1<<24,cr=16,$t=32,Yr=64,Es=128,Wt=512,ht=1024,kt=2048,er=4096,It=8192,gr=16384,Kn=32768,pr=65536,Hl=1<<17,Ul=1<<18,vn=1<<19,Xl=1<<20,br=1<<25,Wr=32768,Ss=1<<21,As=1<<22,jr=1<<23,ur=Symbol("$state"),Gl=Symbol("legacy props"),ui=Symbol(""),hn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Kl(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function fi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function di(n,e,t){throw new Error("https://svelte.dev/e/each_key_duplicate")}function vi(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function hi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function mi(n){throw new Error("https://svelte.dev/e/effect_orphan")}function gi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function pi(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function bi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _i(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function wi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function yi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const xi=1,ki=2,Jl=4,Ei=8,Si=16,Ai=1,Ci=2,Ni=4,Pi=8,Ti=16,ji=1,Li=2,Ri=4,Zl=1,Mi=2,mt=Symbol(),Fi="http://www.w3.org/1999/xhtml";function qi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ql(n){return n===this.v}function zi(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function $l(n){return!zi(n,this.v)}let mn=!1,Ii=!1;function Vi(){mn=!0}const Oi=[];function Bi(n,e=!1,t=!1){return Jn(n,new Map,"",Oi,null,t)}function Jn(n,e,t,s,l=null,o=!1){if(typeof n=="object"&&n!==null){var a=e.get(n);if(a!==void 0)return a;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(xs(n)){var c=Array(n.length);e.set(n,c),l!==null&&e.set(l,c);for(var f=0;f<n.length;f+=1){var u=n[f];f in n&&(c[f]=Jn(u,e,t,s,null,o))}return c}if(Xn(n)===Bl){c={},e.set(n,c),l!==null&&e.set(l,c);for(var d in n)c[d]=Jn(n[d],e,t,s,null,o);return c}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function"&&!o)return Jn(n.toJSON(),e,t,s,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}let nt=null;function gn(n){nt=n}function Ct(n){return eo().get(n)}function Di(n,e){return eo().set(n,e),e}function ge(n,e=!1,t){nt={p:nt,i:!1,c:null,e:null,s:n,x:null,l:mn&&!e?{s:null,u:null,$:[]}:null}}function pe(n){var e=nt,t=e.e;if(t!==null){e.e=null;for(var s of t)So(s)}return e.i=!0,nt=e.p,{}}function Hr(){return!mn||nt!==null&&nt.l===null}function eo(n){return nt===null&&Kl(),nt.c??=new Map(Yi(nt)||void 0)}function Yi(n){let e=n.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}let Ur=[];function to(){var n=Ur;Ur=[],ks(n)}function Vt(n){if(Ur.length===0&&!bn){var e=Ur;queueMicrotask(()=>{e===Ur&&to()})}Ur.push(n)}function Wi(){for(;Ur.length>0;)to()}function ro(n){var e=Ke;if(e===null)return Ge.f|=jr,n;if((e.f&Kn)===0){if((e.f&Es)===0)throw n;e.b.error(n)}else pn(n,e)}function pn(n,e){for(;e!==null;){if((e.f&Es)!==0)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n}const Hi=-7169;function it(n,e){n.f=n.f&Hi|e}function Cs(n){(n.f&Wt)!==0||n.deps===null?it(n,ht):it(n,er)}function no(n){if(n!==null)for(const e of n)(e.f&xt)===0||(e.f&Wr)===0||(e.f^=Wr,no(e.deps))}function so(n,e,t){(n.f&kt)!==0?e.add(n):(n.f&er)!==0&&t.add(n),no(n.deps),it(n,ht)}const Zn=new Set;let $e=null,Ns=null,tr=null,Rt=[],Qn=null,Ps=!1,bn=!1;class _r{committed=!1;current=new Map;previous=new Map;#e=new Set;#n=new Set;#t=0;#s=0;#a=null;#l=new Set;#r=new Set;#o=new Map;is_fork=!1;#i=!1;is_deferred(){return this.is_fork||this.#s>0}skip_effect(e){this.#o.has(e)||this.#o.set(e,{d:[],m:[]})}unskip_effect(e){var t=this.#o.get(e);if(t){this.#o.delete(e);for(var s of t.d)it(s,kt),rr(s);for(s of t.m)it(s,er),rr(s)}}process(e){Rt=[],this.apply();var t=[],s=[];for(const l of e)this.#c(l,t,s);if(this.is_deferred()){this.#u(s),this.#u(t);for(const[l,o]of this.#o)uo(l,o)}else{for(const l of this.#e)l();this.#e.clear(),this.#t===0&&this.#f(),Ns=this,$e=null,ao(s),ao(t),Ns=null,this.#a?.resolve()}tr=null}#c(e,t,s){e.f^=ht;for(var l=e.first,o=null;l!==null;){var a=l.f,c=(a&($t|Yr))!==0,f=c&&(a&ht)!==0,u=f||(a&It)!==0||this.#o.has(l);if(!u&&l.fn!==null){c?l.f^=ht:o!==null&&(a&(Gn|An|Wl))!==0?o.b.defer_effect(l):(a&Gn)!==0?t.push(l):Tn(l)&&((a&cr)!==0&&this.#r.add(l),jn(l));var d=l.first;if(d!==null){l=d;continue}}var v=l.parent;for(l=l.next;l===null&&v!==null;)v===o&&(o=null),l=v.next,v=v.parent}}#u(e){for(var t=0;t<e.length;t+=1)so(e[t],this.#l,this.#r)}capture(e,t){t!==mt&&!this.previous.has(e)&&this.previous.set(e,t),(e.f&jr)===0&&(this.current.set(e,e.v),tr?.set(e,e.v))}activate(){$e=this,this.apply()}deactivate(){$e===this&&($e=null,tr=null)}flush(){if(this.activate(),Rt.length>0){if(oo(),$e!==null&&$e!==this)return}else this.#t===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#n)e(this);this.#n.clear()}#f(){if(Zn.size>1){this.previous.clear();var e=tr,t=!0;for(const l of Zn){if(l===this){t=!1;continue}const o=[];for(const[c,f]of this.current){if(l.current.has(c))if(t&&f!==l.current.get(c))l.current.set(c,f);else continue;o.push(c)}if(o.length===0)continue;const a=[...l.current.keys()].filter(c=>!this.current.has(c));if(a.length>0){var s=Rt;Rt=[];const c=new Set,f=new Map;for(const u of o)io(u,a,c,f);if(Rt.length>0){$e=l,l.apply();for(const u of Rt)l.#c(u,[],[]);l.deactivate()}Rt=s}}$e=null,tr=e}this.committed=!0,Zn.delete(this)}increment(e){this.#t+=1,e&&(this.#s+=1)}decrement(e){this.#t-=1,e&&(this.#s-=1),!this.#i&&(this.#i=!0,Vt(()=>{this.#i=!1,this.is_deferred()?Rt.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#l)this.#r.delete(e),it(e,kt),rr(e);for(const e of this.#r)it(e,er),rr(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#n.add(e)}settled(){return(this.#a??=Yl()).promise}static ensure(){if($e===null){const e=$e=new _r;Zn.add($e),bn||Vt(()=>{$e===e&&e.flush()})}return $e}apply(){}}function lo(n){var e=bn;bn=!0;try{for(var t;;){if(Wi(),Rt.length===0&&($e?.flush(),Rt.length===0))return Qn=null,t;oo()}}finally{bn=e}}function oo(){Ps=!0;var n=null;try{for(var e=0;Rt.length>0;){var t=_r.ensure();if(e++>1e3){var s,l;Ui()}t.process(Rt),Lr.clear()}}finally{Rt=[],Ps=!1,Qn=null}}function Ui(){try{gi()}catch(n){pn(n,Qn)}}let wr=null;function ao(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var s=n[t++];if((s.f&(gr|It))===0&&Tn(s)&&(wr=new Set,jn(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Po(s):s.fn=null),wr?.size>0)){Lr.clear();for(const l of wr){if((l.f&(gr|It))!==0)continue;const o=[l];let a=l.parent;for(;a!==null;)wr.has(a)&&(wr.delete(a),o.push(a)),a=a.parent;for(let c=o.length-1;c>=0;c--){const f=o[c];(f.f&(gr|It))===0&&jn(f)}}wr.clear()}}wr=null}}function io(n,e,t,s){if(!t.has(n)&&(t.add(n),n.reactions!==null))for(const l of n.reactions){const o=l.f;(o&xt)!==0?io(l,e,t,s):(o&(As|cr))!==0&&(o&kt)===0&&co(l,e,s)&&(it(l,kt),rr(l))}}function co(n,e,t){const s=t.get(n);if(s!==void 0)return s;if(n.deps!==null)for(const l of n.deps){if(fn.call(e,l))return!0;if((l.f&xt)!==0&&co(l,e,t))return t.set(l,!0),!0}return t.set(n,!1),!1}function rr(n){for(var e=Qn=n;e.parent!==null;){e=e.parent;var t=e.f;if(Ps&&e===Ke&&(t&cr)!==0&&(t&Ul)===0)return;if((t&(Yr|$t))!==0){if((t&ht)===0)return;e.f^=ht}}Rt.push(e)}function uo(n,e){if(!((n.f&$t)!==0&&(n.f&ht)!==0)){(n.f&kt)!==0?e.d.push(n):(n.f&er)!==0&&e.m.push(n),it(n,ht);for(var t=n.first;t!==null;)uo(t,e),t=t.next}}function Xi(n){let e=0,t=yr(0),s;return()=>{Fs()&&(r(t),es(()=>(e===0&&(s=sr(()=>n(()=>Nn(t)))),e+=1,()=>{Vt(()=>{e-=1,e===0&&(s?.(),s=void 0,Nn(t))})})))}}var Gi=pr|vn|Es;function Ki(n,e,t){new Ji(n,e,t)}class Ji{parent;is_pending=!1;#e;#n=null;#t;#s;#a;#l=null;#r=null;#o=null;#i=null;#c=null;#u=0;#f=0;#h=!1;#v=!1;#m=new Set;#g=new Set;#d=null;#y=Xi(()=>(this.#d=yr(this.#u),()=>{this.#d=null}));constructor(e,t,s){this.#e=e,this.#t=t,this.#s=s,this.parent=Ke.b,this.is_pending=!!this.#t.pending,this.#a=Xr(()=>{Ke.b=this;{var l=this.#_();try{this.#l=Ht(()=>s(l))}catch(o){this.error(o)}this.#f>0?this.#b():this.is_pending=!1}return()=>{this.#c?.remove()}},Gi)}#x(){try{this.#l=Ht(()=>this.#s(this.#e))}catch(e){this.error(e)}}#k(){const e=this.#t.pending;e&&(this.#r=Ht(()=>e(this.#e)),Vt(()=>{var t=this.#_();this.#l=this.#p(()=>(_r.ensure(),Ht(()=>this.#s(t)))),this.#f>0?this.#b():(Gr(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#_(){var e=this.#e;return this.is_pending&&(this.#c=kr(),this.#e.before(this.#c),e=this.#c),e}defer_effect(e){so(e,this.#m,this.#g)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#t.pending}#p(e){var t=Ke,s=Ge,l=nt;dr(this.#a),Ut(this.#a),gn(this.#a.ctx);try{return e()}catch(o){return ro(o),null}finally{dr(t),Ut(s),gn(l)}}#b(){const e=this.#t.pending;this.#l!==null&&(this.#i=document.createDocumentFragment(),this.#i.append(this.#c),Lo(this.#l,this.#i)),this.#r===null&&(this.#r=Ht(()=>e(this.#e)))}#w(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(e);return}if(this.#f+=e,this.#f===0){this.is_pending=!1;for(const t of this.#m)it(t,kt),rr(t);for(const t of this.#g)it(t,er),rr(t);this.#m.clear(),this.#g.clear(),this.#r&&Gr(this.#r,()=>{this.#r=null}),this.#i&&(this.#e.before(this.#i),this.#i=null)}}update_pending_count(e){this.#w(e),this.#u+=e,!(!this.#d||this.#h)&&(this.#h=!0,Vt(()=>{this.#h=!1,this.#d&&xr(this.#d,this.#u)}))}get_effect_pending(){return this.#y(),r(this.#d)}error(e){var t=this.#t.onerror;let s=this.#t.failed;if(this.#v||!t&&!s)throw e;this.#l&&(Mt(this.#l),this.#l=null),this.#r&&(Mt(this.#r),this.#r=null),this.#o&&(Mt(this.#o),this.#o=null);var l=!1,o=!1;const a=()=>{if(l){qi();return}l=!0,o&&yi(),_r.ensure(),this.#u=0,this.#o!==null&&Gr(this.#o,()=>{this.#o=null}),this.is_pending=this.has_pending_snippet(),this.#l=this.#p(()=>(this.#v=!1,Ht(()=>this.#s(this.#e)))),this.#f>0?this.#b():this.is_pending=!1};Vt(()=>{try{o=!0,t?.(e,a),o=!1}catch(c){pn(c,this.#a&&this.#a.parent)}s&&(this.#o=this.#p(()=>{_r.ensure(),this.#v=!0;try{return Ht(()=>{s(this.#e,()=>e,()=>a)})}catch(c){return pn(c,this.#a.parent),null}finally{this.#v=!1}}))})}}function Zi(n,e,t,s){const l=Hr()?Cn:Ts;var o=n.filter(h=>!h.settled);if(t.length===0&&o.length===0){s(e.map(l));return}var a=$e,c=Ke,f=fo(),u=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(h=>h.promise)):null;function d(h){f();try{s(h)}catch(m){(c.f&gr)===0&&pn(m,c)}a?.deactivate(),$n()}if(t.length===0){u.then(()=>d(e.map(l)));return}function v(){f(),Promise.all(t.map(h=>Qi(h))).then(h=>d([...e.map(l),...h])).catch(h=>pn(h,c))}u?u.then(v):v()}function fo(){var n=Ke,e=Ge,t=nt,s=$e;return function(o=!0){dr(n),Ut(e),gn(t),o&&s?.activate()}}function $n(){dr(null),Ut(null),gn(null)}function Cn(n){var e=xt|kt,t=Ge!==null&&(Ge.f&xt)!==0?Ge:null;return Ke!==null&&(Ke.f|=vn),{ctx:nt,deps:null,effects:null,equals:Ql,f:e,fn:n,reactions:null,rv:0,v:mt,wv:0,parent:t??Ke,ac:null}}function Qi(n,e,t){let s=Ke;s===null&&fi();var l=s.b,o=void 0,a=yr(mt),c=!Ge,f=new Map;return ic(()=>{var u=Yl();o=u.promise;try{Promise.resolve(n()).then(u.resolve,u.reject).then(()=>{d===$e&&d.committed&&d.deactivate(),$n()})}catch(m){u.reject(m),$n()}var d=$e;if(c){var v=l.is_rendered();l.update_pending_count(1),d.increment(v),f.get(d)?.reject(hn),f.delete(d),f.set(d,u)}const h=(m,_=void 0)=>{if(d.activate(),_)_!==hn&&(a.f|=jr,xr(a,_));else{(a.f&jr)!==0&&(a.f^=jr),xr(a,m);for(const[b,p]of f){if(f.delete(b),b===d)break;p.reject(hn)}}c&&(l.update_pending_count(-1),d.decrement(v))};u.promise.then(h,m=>h(null,m||"unknown"))}),qs(()=>{for(const u of f.values())u.reject(hn)}),new Promise(u=>{function d(v){function h(){v===o?u(a):d(o)}v.then(h,h)}d(o)})}function g(n){const e=Cn(n);return Mo(e),e}function Ts(n){const e=Cn(n);return e.equals=$l,e}function vo(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)Mt(e[t])}}function $i(n){for(var e=n.parent;e!==null;){if((e.f&xt)===0)return(e.f&gr)===0?e:null;e=e.parent}return null}function js(n){var e,t=Ke;dr($i(n));try{n.f&=~Wr,vo(n),e=Vo(n)}finally{dr(t)}return e}function ho(n){var e=js(n);if(!n.equals(e)&&(n.wv=zo(),(!$e?.is_fork||n.deps===null)&&(n.v=e,n.deps===null))){it(n,ht);return}Rr||(tr!==null?(Fs()||$e?.is_fork)&&tr.set(n,e):Cs(n))}let Ls=new Set;const Lr=new Map;let mo=!1;function yr(n,e){var t={f:0,v:n,reactions:null,equals:Ql,rv:0,wv:0};return t}function te(n,e){const t=yr(n);return Mo(t),t}function Rs(n,e=!1,t=!0){const s=yr(n);return e||(s.equals=$l),mn&&t&&nt!==null&&nt.l!==null&&(nt.l.s??=[]).push(s),s}function q(n,e,t=!1){Ge!==null&&(!nr||(Ge.f&Hl)!==0)&&Hr()&&(Ge.f&(xt|cr|As|Hl))!==0&&(Xt===null||!fn.call(Xt,n))&&wi();let s=t?Fe(e):e;return xr(n,s)}function xr(n,e){if(!n.equals(e)){var t=n.v;Rr?Lr.set(n,e):Lr.set(n,t),n.v=e;var s=_r.ensure();if(s.capture(n,t),(n.f&xt)!==0){const l=n;(n.f&kt)!==0&&js(l),Cs(l)}n.wv=zo(),go(n,kt),Hr()&&Ke!==null&&(Ke.f&ht)!==0&&(Ke.f&($t|Yr))===0&&(Gt===null?uc([n]):Gt.push(n)),!s.is_fork&&Ls.size>0&&!mo&&ec()}return e}function ec(){mo=!1;for(const n of Ls)(n.f&ht)!==0&&it(n,er),Tn(n)&&jn(n);Ls.clear()}function Nn(n){q(n,n.v+1)}function go(n,e){var t=n.reactions;if(t!==null)for(var s=Hr(),l=t.length,o=0;o<l;o++){var a=t[o],c=a.f;if(!(!s&&a===Ke)){var f=(c&kt)===0;if(f&&it(a,e),(c&xt)!==0){var u=a;tr?.delete(u),(c&Wr)===0&&(c&Wt&&(a.f|=Wr),go(u,er))}else f&&((c&cr)!==0&&wr!==null&&wr.add(a),rr(a))}}}function Fe(n){if(typeof n!="object"||n===null||ur in n)return n;const e=Xn(n);if(e!==Bl&&e!==oi)return n;var t=new Map,s=xs(n),l=te(0),o=Jr,a=c=>{if(Jr===o)return c();var f=Ge,u=Jr;Ut(null),qo(o);var d=c();return Ut(f),qo(u),d};return s&&t.set("length",te(n.length)),new Proxy(n,{defineProperty(c,f,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&bi();var d=t.get(f);return d===void 0?d=a(()=>{var v=te(u.value);return t.set(f,v),v}):q(d,u.value,!0),!0},deleteProperty(c,f){var u=t.get(f);if(u===void 0){if(f in c){const d=a(()=>te(mt));t.set(f,d),Nn(l)}}else q(u,mt),Nn(l);return!0},get(c,f,u){if(f===ur)return n;var d=t.get(f),v=f in c;if(d===void 0&&(!v||Tr(c,f)?.writable)&&(d=a(()=>{var m=Fe(v?c[f]:mt),_=te(m);return _}),t.set(f,d)),d!==void 0){var h=r(d);return h===mt?void 0:h}return Reflect.get(c,f,u)},getOwnPropertyDescriptor(c,f){var u=Reflect.getOwnPropertyDescriptor(c,f);if(u&&"value"in u){var d=t.get(f);d&&(u.value=r(d))}else if(u===void 0){var v=t.get(f),h=v?.v;if(v!==void 0&&h!==mt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(c,f){if(f===ur)return!0;var u=t.get(f),d=u!==void 0&&u.v!==mt||Reflect.has(c,f);if(u!==void 0||Ke!==null&&(!d||Tr(c,f)?.writable)){u===void 0&&(u=a(()=>{var h=d?Fe(c[f]):mt,m=te(h);return m}),t.set(f,u));var v=r(u);if(v===mt)return!1}return d},set(c,f,u,d){var v=t.get(f),h=f in c;if(s&&f==="length")for(var m=u;m<v.v;m+=1){var _=t.get(m+"");_!==void 0?q(_,mt):m in c&&(_=a(()=>te(mt)),t.set(m+"",_))}if(v===void 0)(!h||Tr(c,f)?.writable)&&(v=a(()=>te(void 0)),q(v,Fe(u)),t.set(f,v));else{h=v.v!==mt;var b=a(()=>Fe(u));q(v,b)}var p=Reflect.getOwnPropertyDescriptor(c,f);if(p?.set&&p.set.call(d,u),!h){if(s&&typeof f=="string"){var w=t.get("length"),A=Number(f);Number.isInteger(A)&&A>=w.v&&q(w,A+1)}Nn(l)}return!0},ownKeys(c){r(l);var f=Reflect.ownKeys(c).filter(v=>{var h=t.get(v);return h===void 0||h.v!==mt});for(var[u,d]of t)d.v!==mt&&!(u in c)&&f.push(u);return f},setPrototypeOf(){_i()}})}function po(n){try{if(n!==null&&typeof n=="object"&&ur in n)return n[ur]}catch{}return n}function tc(n,e){return Object.is(po(n),po(e))}var Ms,bo,_o,wo;function rc(){if(Ms===void 0){Ms=window,bo=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;_o=Tr(e,"firstChild").get,wo=Tr(e,"nextSibling").get,Dl(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Dl(t)&&(t.__t=void 0)}}function kr(n=""){return document.createTextNode(n)}function Ot(n){return _o.call(n)}function Pn(n){return wo.call(n)}function W(n,e){return Ot(n)}function K(n,e=!1){{var t=Ot(n);return t instanceof Comment&&t.data===""?Pn(t):t}}function M(n,e=1,t=!1){let s=n;for(;e--;)s=Pn(s);return s}function nc(n){n.textContent=""}function yo(){return!1}let xo=!1;function sc(){xo||(xo=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function _n(n){var e=Ge,t=Ke;Ut(null),dr(null);try{return n()}finally{Ut(e),dr(t)}}function ko(n,e,t,s=t){n.addEventListener(e,()=>_n(t));const l=n.__on_r;l?n.__on_r=()=>{l(),s(!0)}:n.__on_r=()=>s(!0),sc()}function Eo(n){Ke===null&&(Ge===null&&mi(),hi()),Rr&&vi()}function lc(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function fr(n,e,t){var s=Ke;s!==null&&(s.f&It)!==0&&(n|=It);var l={ctx:nt,deps:null,nodes:null,f:n|kt|Wt,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(t)try{jn(l),l.f|=Kn}catch(c){throw Mt(l),c}else e!==null&&rr(l);var o=l;if(t&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&vn)===0&&(o=o.first,(n&cr)!==0&&(n&pr)!==0&&o!==null&&(o.f|=pr)),o!==null&&(o.parent=s,s!==null&&lc(o,s),Ge!==null&&(Ge.f&xt)!==0&&(n&Yr)===0)){var a=Ge;(a.effects??=[]).push(o)}return l}function Fs(){return Ge!==null&&!nr}function qs(n){const e=fr(An,null,!1);return it(e,ht),e.teardown=n,e}function me(n){Eo();var e=Ke.f,t=!Ge&&(e&$t)!==0&&(e&Kn)===0;if(t){var s=nt;(s.e??=[]).push(n)}else return So(n)}function So(n){return fr(Gn|Xl,n,!1)}function oc(n){return Eo(),fr(An|Xl,n,!0)}function ac(n){_r.ensure();const e=fr(Yr|vn,n,!0);return(t={})=>new Promise(s=>{t.outro?Gr(e,()=>{Mt(e),s(void 0)}):(Mt(e),s(void 0))})}function zs(n){return fr(Gn,n,!1)}function ic(n){return fr(As|vn,n,!0)}function es(n,e=0){return fr(An|e,n,!0)}function ae(n,e=[],t=[],s=[]){Zi(s,e,t,l=>{fr(An,()=>n(...l.map(r)),!0)})}function Xr(n,e=0){var t=fr(cr|e,n,!0);return t}function Ht(n){return fr($t|vn,n,!0)}function Ao(n){var e=n.teardown;if(e!==null){const t=Rr,s=Ge;Ro(!0),Ut(null);try{e.call(null)}finally{Ro(t),Ut(s)}}}function Co(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const l=t.ac;l!==null&&_n(()=>{l.abort(hn)});var s=t.next;(t.f&Yr)!==0?t.parent=null:Mt(t,e),t=s}}function cc(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&$t)===0&&Mt(e),e=t}}function Mt(n,e=!0){var t=!1;(e||(n.f&Ul)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(No(n.nodes.start,n.nodes.end),t=!0),Co(n,e&&!t),rs(n,0),it(n,gr);var s=n.nodes&&n.nodes.t;if(s!==null)for(const o of s)o.stop();Ao(n);var l=n.parent;l!==null&&l.first!==null&&Po(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function No(n,e){for(;n!==null;){var t=n===e?null:Pn(n);n.remove(),n=t}}function Po(n){var e=n.parent,t=n.prev,s=n.next;t!==null&&(t.next=s),s!==null&&(s.prev=t),e!==null&&(e.first===n&&(e.first=s),e.last===n&&(e.last=t))}function Gr(n,e,t=!0){var s=[];To(n,s,!0);var l=()=>{t&&Mt(n),e&&e()},o=s.length;if(o>0){var a=()=>--o||l();for(var c of s)c.out(a)}else l()}function To(n,e,t){if((n.f&It)===0){n.f^=It;var s=n.nodes&&n.nodes.t;if(s!==null)for(const c of s)(c.is_global||t)&&e.push(c);for(var l=n.first;l!==null;){var o=l.next,a=(l.f&pr)!==0||(l.f&$t)!==0&&(n.f&cr)!==0;To(l,e,a?t:!1),l=o}}}function Is(n){jo(n,!0)}function jo(n,e){if((n.f&It)!==0){n.f^=It,(n.f&ht)===0&&(it(n,kt),rr(n));for(var t=n.first;t!==null;){var s=t.next,l=(t.f&pr)!==0||(t.f&$t)!==0;jo(t,l?e:!1),t=s}var o=n.nodes&&n.nodes.t;if(o!==null)for(const a of o)(a.is_global||e)&&a.in()}}function Lo(n,e){if(n.nodes)for(var t=n.nodes.start,s=n.nodes.end;t!==null;){var l=t===s?null:Pn(t);e.append(t),t=l}}let ts=!1,Rr=!1;function Ro(n){Rr=n}let Ge=null,nr=!1;function Ut(n){Ge=n}let Ke=null;function dr(n){Ke=n}let Xt=null;function Mo(n){Ge!==null&&(Xt===null?Xt=[n]:Xt.push(n))}let Ft=null,Bt=0,Gt=null;function uc(n){Gt=n}let Fo=1,Kr=0,Jr=Kr;function qo(n){Jr=n}function zo(){return++Fo}function Tn(n){var e=n.f;if((e&kt)!==0)return!0;if(e&xt&&(n.f&=~Wr),(e&er)!==0){for(var t=n.deps,s=t.length,l=0;l<s;l++){var o=t[l];if(Tn(o)&&ho(o),o.wv>n.wv)return!0}(e&Wt)!==0&&tr===null&&it(n,ht)}return!1}function Io(n,e,t=!0){var s=n.reactions;if(s!==null&&!(Xt!==null&&fn.call(Xt,n)))for(var l=0;l<s.length;l++){var o=s[l];(o.f&xt)!==0?Io(o,e,!1):e===o&&(t?it(o,kt):(o.f&ht)!==0&&it(o,er),rr(o))}}function Vo(n){var e=Ft,t=Bt,s=Gt,l=Ge,o=Xt,a=nt,c=nr,f=Jr,u=n.f;Ft=null,Bt=0,Gt=null,Ge=(u&($t|Yr))===0?n:null,Xt=null,gn(n.ctx),nr=!1,Jr=++Kr,n.ac!==null&&(_n(()=>{n.ac.abort(hn)}),n.ac=null);try{n.f|=Ss;var d=n.fn,v=d(),h=n.deps,m=$e?.is_fork;if(Ft!==null){var _;if(m||rs(n,Bt),h!==null&&Bt>0)for(h.length=Bt+Ft.length,_=0;_<Ft.length;_++)h[Bt+_]=Ft[_];else n.deps=h=Ft;if(Fs()&&(n.f&Wt)!==0)for(_=Bt;_<h.length;_++)(h[_].reactions??=[]).push(n)}else!m&&h!==null&&Bt<h.length&&(rs(n,Bt),h.length=Bt);if(Hr()&&Gt!==null&&!nr&&h!==null&&(n.f&(xt|er|kt))===0)for(_=0;_<Gt.length;_++)Io(Gt[_],n);if(l!==null&&l!==n){if(Kr++,l.deps!==null)for(let b=0;b<t;b+=1)l.deps[b].rv=Kr;if(e!==null)for(const b of e)b.rv=Kr;Gt!==null&&(s===null?s=Gt:s.push(...Gt))}return(n.f&jr)!==0&&(n.f^=jr),v}catch(b){return ro(b)}finally{n.f^=Ss,Ft=e,Bt=t,Gt=s,Ge=l,Xt=o,gn(a),nr=c,Jr=f}}function fc(n,e){let t=e.reactions;if(t!==null){var s=si.call(t,n);if(s!==-1){var l=t.length-1;l===0?t=e.reactions=null:(t[s]=t[l],t.pop())}}if(t===null&&(e.f&xt)!==0&&(Ft===null||!fn.call(Ft,e))){var o=e;(o.f&Wt)!==0&&(o.f^=Wt,o.f&=~Wr),Cs(o),vo(o),rs(o,0)}}function rs(n,e){var t=n.deps;if(t!==null)for(var s=e;s<t.length;s++)fc(n,t[s])}function jn(n){var e=n.f;if((e&gr)===0){it(n,ht);var t=Ke,s=ts;Ke=n,ts=!0;try{(e&(cr|Wl))!==0?cc(n):Co(n),Ao(n);var l=Vo(n);n.teardown=typeof l=="function"?l:null,n.wv=Fo;var o;ys&&Ii&&(n.f&kt)!==0&&n.deps}finally{ts=s,Ke=t}}}async function dc(){await Promise.resolve(),lo()}function r(n){var e=n.f,t=(e&xt)!==0;if(Ge!==null&&!nr){var s=Ke!==null&&(Ke.f&gr)!==0;if(!s&&(Xt===null||!fn.call(Xt,n))){var l=Ge.deps;if((Ge.f&Ss)!==0)n.rv<Kr&&(n.rv=Kr,Ft===null&&l!==null&&l[Bt]===n?Bt++:Ft===null?Ft=[n]:Ft.push(n));else{(Ge.deps??=[]).push(n);var o=n.reactions;o===null?n.reactions=[Ge]:fn.call(o,Ge)||o.push(Ge)}}}if(Rr&&Lr.has(n))return Lr.get(n);if(t){var a=n;if(Rr){var c=a.v;return((a.f&ht)===0&&a.reactions!==null||Bo(a))&&(c=js(a)),Lr.set(a,c),c}var f=(a.f&Wt)===0&&!nr&&Ge!==null&&(ts||(Ge.f&Wt)!==0),u=a.deps===null;Tn(a)&&(f&&(a.f|=Wt),ho(a)),f&&!u&&Oo(a)}if(tr?.has(n))return tr.get(n);if((n.f&jr)!==0)throw n.v;return n.v}function Oo(n){if(n.deps!==null){n.f|=Wt;for(const e of n.deps)(e.reactions??=[]).push(n),(e.f&xt)!==0&&(e.f&Wt)===0&&Oo(e)}}function Bo(n){if(n.v===mt)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Lr.has(e)||(e.f&xt)!==0&&Bo(e))return!0;return!1}function sr(n){var e=nr;try{return nr=!0,n()}finally{nr=e}}function vc(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(ur in n)Vs(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&ur in t&&Vs(t)}}}function Vs(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let s in n)try{Vs(n[s],e)}catch{}const t=Xn(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const s=Ol(t);for(let l in s){const o=s[l].get;if(o)try{o.call(n)}catch{}}}}}const hc=["touchstart","touchmove"];function mc(n){return hc.includes(n)}const Do=new Set,Os=new Set;function gc(n,e,t,s={}){function l(o){if(s.capture||Ln.call(e,o),!o.cancelBubble)return _n(()=>t?.call(this,o))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Vt(()=>{e.addEventListener(n,l,s)}):e.addEventListener(n,l,s),l}function Zr(n,e,t,s,l){var o={capture:s,passive:l},a=gc(n,e,t,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&qs(()=>{e.removeEventListener(n,a,o)})}function lt(n){for(var e=0;e<n.length;e++)Do.add(n[e]);for(var t of Os)t(n)}let Yo=null;function Ln(n){var e=this,t=e.ownerDocument,s=n.type,l=n.composedPath?.()||[],o=l[0]||n.target;Yo=n;var a=0,c=Yo===n&&n.__root;if(c){var f=l.indexOf(c);if(f!==-1&&(e===document||e===window)){n.__root=e;return}var u=l.indexOf(e);if(u===-1)return;f<=u&&(a=f)}if(o=l[a]||n.target,o!==e){li(n,"currentTarget",{configurable:!0,get(){return o||t}});var d=Ge,v=Ke;Ut(null),dr(null);try{for(var h,m=[];o!==null;){var _=o.assignedSlot||o.parentNode||o.host||null;try{var b=o["__"+s];b!=null&&(!o.disabled||n.target===o)&&b.call(o,n)}catch(p){h?m.push(p):h=p}if(n.cancelBubble||_===e||_===null)break;o=_}if(h){for(let p of m)queueMicrotask(()=>{throw p});throw h}}finally{n.__root=e,delete n.currentTarget,Ut(d),dr(v)}}}function Bs(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function Qr(n,e){var t=Ke;t.nodes===null&&(t.nodes={start:n,end:e,a:null,t:null})}function U(n,e){var t=(e&Zl)!==0,s=(e&Mi)!==0,l,o=!n.startsWith("<!>");return()=>{l===void 0&&(l=Bs(o?n:"<!>"+n),t||(l=Ot(l)));var a=s||bo?document.importNode(l,!0):l.cloneNode(!0);if(t){var c=Ot(a),f=a.lastChild;Qr(c,f)}else Qr(a,a);return a}}function pc(n,e,t="svg"){var s=!n.startsWith("<!>"),l=(e&Zl)!==0,o=`<${t}>${s?n:"<!>"+n}</${t}>`,a;return()=>{if(!a){var c=Bs(o),f=Ot(c);if(l)for(a=document.createDocumentFragment();Ot(f);)a.appendChild(Ot(f));else a=Ot(f)}var u=a.cloneNode(!0);if(l){var d=Ot(u),v=u.lastChild;Qr(d,v)}else Qr(u,u);return u}}function Ce(n,e){return pc(n,e,"svg")}function bc(n=""){{var e=kr(n+"");return Qr(e,e),e}}function de(){var n=document.createDocumentFragment(),e=document.createComment(""),t=kr();return n.append(e,t),Qr(e,t),n}function C(n,e){n!==null&&n.before(e)}let Ds=!0;function Se(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??=n.nodeValue)&&(n.__t=t,n.nodeValue=t+"")}function _c(n,e){return wc(n,e)}const wn=new Map;function wc(n,{target:e,anchor:t,props:s={},events:l,context:o,intro:a=!0}){rc();var c=new Set,f=v=>{for(var h=0;h<v.length;h++){var m=v[h];if(!c.has(m)){c.add(m);var _=mc(m);e.addEventListener(m,Ln,{passive:_});var b=wn.get(m);b===void 0?(document.addEventListener(m,Ln,{passive:_}),wn.set(m,1)):wn.set(m,b+1)}}};f(Un(Do)),Os.add(f);var u=void 0,d=ac(()=>{var v=t??e.appendChild(kr());return Ki(v,{pending:()=>{}},h=>{ge({});var m=nt;o&&(m.c=o),l&&(s.$$events=l),Ds=a,u=n(h,s)||{},Ds=!0,pe()}),()=>{for(var h of c){e.removeEventListener(h,Ln);var m=wn.get(h);--m===0?(document.removeEventListener(h,Ln),wn.delete(h)):wn.set(h,m)}Os.delete(f),v!==t&&v.parentNode?.removeChild(v)}});return yc.set(u,d),u}let yc=new WeakMap;class Rn{anchor;#e=new Map;#n=new Map;#t=new Map;#s=new Set;#a=!0;constructor(e,t=!0){this.anchor=e,this.#a=t}#l=()=>{var e=$e;if(this.#e.has(e)){var t=this.#e.get(e),s=this.#n.get(t);if(s)Is(s),this.#s.delete(t);else{var l=this.#t.get(t);l&&(this.#n.set(t,l.effect),this.#t.delete(t),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[o,a]of this.#e){if(this.#e.delete(o),o===e)break;const c=this.#t.get(a);c&&(Mt(c.effect),this.#t.delete(a))}for(const[o,a]of this.#n){if(o===t||this.#s.has(o))continue;const c=()=>{if(Array.from(this.#e.values()).includes(o)){var u=document.createDocumentFragment();Lo(a,u),u.append(kr()),this.#t.set(o,{effect:a,fragment:u})}else Mt(a);this.#s.delete(o),this.#n.delete(o)};this.#a||!s?(this.#s.add(o),Gr(a,c,!1)):c()}}};#r=e=>{this.#e.delete(e);const t=Array.from(this.#e.values());for(const[s,l]of this.#t)t.includes(s)||(Mt(l.effect),this.#t.delete(s))};ensure(e,t){var s=$e,l=yo();if(t&&!this.#n.has(e)&&!this.#t.has(e))if(l){var o=document.createDocumentFragment(),a=kr();o.append(a),this.#t.set(e,{effect:Ht(()=>t(a)),fragment:o})}else this.#n.set(e,Ht(()=>t(this.anchor)));if(this.#e.set(s,e),l){for(const[c,f]of this.#n)c===e?s.unskip_effect(f):s.skip_effect(f);for(const[c,f]of this.#t)c===e?s.unskip_effect(f.effect):s.skip_effect(f.effect);s.oncommit(this.#l),s.ondiscard(this.#r)}else this.#l()}}const xc=0,Ys=1;function Ws(n,e,t,s,l){var o=Hr(),a=mt,c=o?yr(a):Rs(a,!1,!1),f=o?yr(a):Rs(a,!1,!1),u=new Rn(n);Xr(()=>{var d=e(),v=!1;if(ai(d)){var h=fo(),m=!1;const _=b=>{if(!v){m=!0,h(!1),_r.ensure();try{b()}finally{$n(),bn||lo()}}};d.then(b=>{_(()=>{xr(c,b),u.ensure(Ys,s&&(p=>s(p,c)))})},b=>{_(()=>{if(xr(f,b),u.ensure(Ys,l&&(p=>l(p,f))),!l)throw f.v})}),Vt(()=>{m||_(()=>{u.ensure(xc,t)})})}else xr(c,d),u.ensure(Ys,s);return()=>{v=!0}})}function B(n,e,t=!1){var s=new Rn(n),l=t?pr:0;function o(a,c){s.ensure(a,c)}Xr(()=>{var a=!1;e((c,f=!0)=>{a=!0,o(f,c)}),a||o(!1,null)},l)}const kc=Symbol("NaN");function $r(n,e,t){var s=new Rn(n),l=!Hr();Xr(()=>{var o=e();o!==o&&(o=kc),l&&o!==null&&typeof o=="object"&&(o={}),s.ensure(o,t)})}function De(n,e){return e}function Ec(n,e,t){for(var s=[],l=e.length,o,a=e.length,c=0;c<l;c++){let v=e[c];Gr(v,()=>{if(o){if(o.pending.delete(v),o.done.add(v),o.pending.size===0){var h=n.outrogroups;Hs(Un(o.done)),h.delete(o),h.size===0&&(n.outrogroups=null)}}else a-=1},!1)}if(a===0){var f=s.length===0&&t!==null;if(f){var u=t,d=u.parentNode;nc(d),d.append(u),n.items.clear()}Hs(e,!f)}else o={pending:new Set(e),done:new Set},(n.outrogroups??=new Set).add(o)}function Hs(n,e=!0){for(var t=0;t<n.length;t++)Mt(n[t],e)}var Wo;function Ve(n,e,t,s,l,o=null){var a=n,c=new Map,f=(e&Jl)!==0;if(f){var u=n;a=u.appendChild(kr())}var d=null,v=Ts(()=>{var w=t();return xs(w)?w:w==null?[]:Un(w)}),h,m=!0;function _(){p.fallback=d,Sc(p,h,a,e,s),d!==null&&(h.length===0?(d.f&br)===0?Is(d):(d.f^=br,Fn(d,null,a)):Gr(d,()=>{d=null}))}var b=Xr(()=>{h=r(v);for(var w=h.length,A=new Set,y=$e,k=yo(),N=0;N<w;N+=1){var T=h[N],P=s(T,N),L=m?null:c.get(P);L?(L.v&&xr(L.v,T),L.i&&xr(L.i,N),k&&y.unskip_effect(L.e)):(L=Ac(c,m?a:Wo??=kr(),T,P,N,l,e,t),m||(L.e.f|=br),c.set(P,L)),A.add(P)}if(w===0&&o&&!d&&(m?d=Ht(()=>o(a)):(d=Ht(()=>o(Wo??=kr())),d.f|=br)),w>A.size&&di(),!m)if(k){for(const[F,E]of c)A.has(F)||y.skip_effect(E.e);y.oncommit(_),y.ondiscard(()=>{})}else _();r(v)}),p={effect:b,items:c,outrogroups:null,fallback:d};m=!1}function Mn(n){for(;n!==null&&(n.f&$t)===0;)n=n.next;return n}function Sc(n,e,t,s,l){var o=(s&Ei)!==0,a=e.length,c=n.items,f=Mn(n.effect.first),u,d=null,v,h=[],m=[],_,b,p,w;if(o)for(w=0;w<a;w+=1)_=e[w],b=l(_,w),p=c.get(b).e,(p.f&br)===0&&(p.nodes?.a?.measure(),(v??=new Set).add(p));for(w=0;w<a;w+=1){if(_=e[w],b=l(_,w),p=c.get(b).e,n.outrogroups!==null)for(const E of n.outrogroups)E.pending.delete(p),E.done.delete(p);if((p.f&br)!==0)if(p.f^=br,p===f)Fn(p,null,t);else{var A=d?d.next:f;p===n.effect.last&&(n.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Mr(n,d,p),Mr(n,p,A),Fn(p,A,t),d=p,h=[],m=[],f=Mn(d.next);continue}if((p.f&It)!==0&&(Is(p),o&&(p.nodes?.a?.unfix(),(v??=new Set).delete(p))),p!==f){if(u!==void 0&&u.has(p)){if(h.length<m.length){var y=m[0],k;d=y.prev;var N=h[0],T=h[h.length-1];for(k=0;k<h.length;k+=1)Fn(h[k],y,t);for(k=0;k<m.length;k+=1)u.delete(m[k]);Mr(n,N.prev,T.next),Mr(n,d,N),Mr(n,T,y),f=y,d=T,w-=1,h=[],m=[]}else u.delete(p),Fn(p,f,t),Mr(n,p.prev,p.next),Mr(n,p,d===null?n.effect.first:d.next),Mr(n,d,p),d=p;continue}for(h=[],m=[];f!==null&&f!==p;)(u??=new Set).add(f),m.push(f),f=Mn(f.next);if(f===null)continue}(p.f&br)===0&&h.push(p),d=p,f=Mn(p.next)}if(n.outrogroups!==null){for(const E of n.outrogroups)E.pending.size===0&&(Hs(Un(E.done)),n.outrogroups?.delete(E));n.outrogroups.size===0&&(n.outrogroups=null)}if(f!==null||u!==void 0){var P=[];if(u!==void 0)for(p of u)(p.f&It)===0&&P.push(p);for(;f!==null;)(f.f&It)===0&&f!==n.fallback&&P.push(f),f=Mn(f.next);var L=P.length;if(L>0){var F=(s&Jl)!==0&&a===0?t:null;if(o){for(w=0;w<L;w+=1)P[w].nodes?.a?.measure();for(w=0;w<L;w+=1)P[w].nodes?.a?.fix()}Ec(n,P,F)}}o&&Vt(()=>{if(v!==void 0)for(p of v)p.nodes?.a?.apply()})}function Ac(n,e,t,s,l,o,a,c){var f=(a&xi)!==0?(a&Si)===0?Rs(t,!1,!1):yr(t):null,u=(a&ki)!==0?yr(l):null;return{v:f,i:u,e:Ht(()=>(o(e,f??t,u??l,c),()=>{n.delete(s)}))}}function Fn(n,e,t){if(n.nodes)for(var s=n.nodes.start,l=n.nodes.end,o=e&&(e.f&br)===0?e.nodes.start:t;s!==null;){var a=Pn(s);if(o.before(s),s===l)return;s=a}}function Mr(n,e,t){e===null?n.effect.first=t:e.next=t,t===null?n.effect.last=e:t.prev=e}function gt(n,e,t=!1,s=!1,l=!1){var o=n,a="";ae(()=>{var c=Ke;if(a!==(a=e()??"")&&(c.nodes!==null&&(No(c.nodes.start,c.nodes.end),c.nodes=null),a!=="")){var f=a+"";t?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var u=Bs(f);if((t||s)&&(u=Ot(u)),Qr(Ot(u),u.lastChild),t||s)for(;Ot(u);)o.before(Ot(u));else o.before(u)}})}function Er(n,e,...t){var s=new Rn(n);Xr(()=>{const l=e()??null;s.ensure(l,l&&(o=>l(o,...t)))},pr)}function qn(n,e,t){var s=new Rn(n);Xr(()=>{var l=e()??null;s.ensure(l,l&&(o=>t(o,l)))},pr)}const Cc=()=>performance.now(),Sr={tick:n=>requestAnimationFrame(n),now:()=>Cc(),tasks:new Set};function Ho(){const n=Sr.now();Sr.tasks.forEach(e=>{e.c(n)||(Sr.tasks.delete(e),e.f())}),Sr.tasks.size!==0&&Sr.tick(Ho)}function Nc(n){let e;return Sr.tasks.size===0&&Sr.tick(Ho),{promise:new Promise(t=>{Sr.tasks.add(e={c:n,f:t})}),abort(){Sr.tasks.delete(e)}}}function ns(n,e){_n(()=>{n.dispatchEvent(new CustomEvent(e))})}function Pc(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function Uo(n){const e={},t=n.split(";");for(const s of t){const[l,o]=s.split(":");if(!l||o===void 0)break;const a=Pc(l.trim());e[a]=o.trim()}return e}const Tc=n=>n;function Xo(n,e,t,s){var l=(n&ji)!==0,o=(n&Li)!==0,a=l&&o,c=(n&Ri)!==0,f=a?"both":l?"in":"out",u,d=e.inert,v=e.style.overflow,h,m;function _(){return _n(()=>u??=t()(e,s?.()??{},{direction:f}))}var b={is_global:c,in(){if(e.inert=d,!l){m?.abort(),m?.reset?.();return}o||h?.abort(),h=Us(e,_(),m,1,()=>{ns(e,"introend"),h?.abort(),h=u=void 0,e.style.overflow=v})},out(y){if(!o){y?.(),u=void 0;return}e.inert=!0,m=Us(e,_(),h,0,()=>{ns(e,"outroend"),y?.()})},stop:()=>{h?.abort(),m?.abort()}},p=Ke;if((p.nodes.t??=[]).push(b),l&&Ds){var w=c;if(!w){for(var A=p.parent;A&&(A.f&pr)!==0;)for(;(A=A.parent)&&(A.f&cr)===0;);w=!A||(A.f&Kn)!==0}w&&zs(()=>{sr(()=>b.in())})}}function Us(n,e,t,s,l){var o=s===1;if(dn(e)){var a,c=!1;return Vt(()=>{if(!c){var p=e({direction:o?"in":"out"});a=Us(n,p,t,s,l)}}),{abort:()=>{c=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(t?.deactivate(),!e?.duration&&!e?.delay)return ns(n,o?"introstart":"outrostart"),l(),{abort:yt,deactivate:yt,reset:yt,t:()=>s};const{delay:f=0,css:u,tick:d,easing:v=Tc}=e;var h=[];if(o&&t===void 0&&(d&&d(0,1),u)){var m=Uo(u(0,1));h.push(m,m)}var _=()=>1-s,b=n.animate(h,{duration:f,fill:"forwards"});return b.onfinish=()=>{b.cancel(),ns(n,o?"introstart":"outrostart");var p=t?.t()??1-s;t?.abort();var w=s-p,A=e.duration*Math.abs(w),y=[];if(A>0){var k=!1;if(u)for(var N=Math.ceil(A/16.666666666666668),T=0;T<=N;T+=1){var P=p+w*v(T/N),L=Uo(u(P,1-P));y.push(L),k||=L.overflow==="hidden"}k&&(n.style.overflow="hidden"),_=()=>{var F=b.currentTime;return p+w*v(F/A)},d&&Nc(()=>{if(b.playState!=="running")return!1;var F=_();return d(F,1-F),!0})}b=n.animate(y,{duration:A,fill:"forwards"}),b.onfinish=()=>{_=()=>s,d?.(s,1-s),l()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=yt)},deactivate:()=>{l=yt},reset:()=>{s===0&&d?.(1,0)},t:()=>_()}}function Go(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var l=n.length;for(e=0;e<l;e++)n[e]&&(t=Go(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function jc(){for(var n,e,t=0,s="",l=arguments.length;t<l;t++)(n=arguments[t])&&(e=Go(n))&&(s&&(s+=" "),s+=e);return s}function Lc(n){return typeof n=="object"?jc(n):n??""}const Ko=[...`
\r\f \v\uFEFF`];function Rc(n,e,t){var s=n==null?"":""+n;if(e&&(s=s?s+" "+e:e),t){for(var l in t)if(t[l])s=s?s+" "+l:l;else if(s.length)for(var o=l.length,a=0;(a=s.indexOf(l,a))>=0;){var c=a+o;(a===0||Ko.includes(s[a-1]))&&(c===s.length||Ko.includes(s[c]))?s=(a===0?"":s.substring(0,a))+s.substring(c+1):a=c}}return s===""?null:s}function Mc(n,e){return n==null?null:String(n)}function ct(n,e,t,s,l,o){var a=n.__className;if(a!==t||a===void 0){var c=Rc(t,s,o);c==null?n.removeAttribute("class"):e?n.className=c:n.setAttribute("class",c),n.__className=t}else if(o&&l!==o)for(var f in o){var u=!!o[f];(l==null||u!==!!l[f])&&n.classList.toggle(f,u)}return o}function ot(n,e,t,s){var l=n.__style;if(l!==e){var o=Mc(e);o==null?n.removeAttribute("style"):n.style.cssText=o,n.__style=e}return s}const Fc=Symbol("is custom element"),qc=Symbol("is html");function V(n,e,t,s){var l=zc(n);l[e]!==(l[e]=t)&&(e==="loading"&&(n[ui]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Ic(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function zc(n){return n.__attributes??={[Fc]:n.nodeName.includes("-"),[qc]:n.namespaceURI===Fi}}var Jo=new Map;function Ic(n){var e=n.getAttribute("is")||n.nodeName,t=Jo.get(e);if(t)return t;Jo.set(e,t=[]);for(var s,l=n,o=Element.prototype;o!==l;){s=Ol(l);for(var a in s)s[a].set&&t.push(a);l=Xn(l)}return t}function Xs(n,e,t=e){var s=new WeakSet;ko(n,"input",async l=>{var o=l?n.defaultValue:n.value;if(o=Ks(n)?Js(o):o,t(o),$e!==null&&s.add($e),await dc(),o!==(o=e())){var a=n.selectionStart,c=n.selectionEnd,f=n.value.length;if(n.value=o??"",c!==null){var u=n.value.length;a===c&&c===f&&u>f?(n.selectionStart=u,n.selectionEnd=u):(n.selectionStart=a,n.selectionEnd=Math.min(c,u))}}}),sr(e)==null&&n.value&&(t(Ks(n)?Js(n.value):n.value),$e!==null&&s.add($e)),es(()=>{var l=e();if(n===document.activeElement){var o=Ns??$e;if(s.has(o))return}Ks(n)&&l===Js(n.value)||n.type==="date"&&!l&&!n.value||l!==n.value&&(n.value=l??"")})}const Gs=new Set;function Vc(n,e,t,s,l=s){var o=t.getAttribute("type")==="checkbox",a=n;if(e!==null)for(var c of e)a=a[c]??=[];a.push(t),ko(t,"change",()=>{var f=t.__value;o&&(f=Oc(a,f,t.checked)),l(f)},()=>l(o?[]:null)),es(()=>{var f=s();o?(f=f||[],t.checked=f.includes(t.__value)):t.checked=tc(t.__value,f)}),qs(()=>{var f=a.indexOf(t);f!==-1&&a.splice(f,1)}),Gs.has(a)||(Gs.add(a),Vt(()=>{a.sort((f,u)=>f.compareDocumentPosition(u)===4?-1:1),Gs.delete(a)})),Vt(()=>{})}function Oc(n,e,t){for(var s=new Set,l=0;l<n.length;l+=1)n[l].checked&&s.add(n[l].__value);return t||s.delete(e),Array.from(s)}function Ks(n){var e=n.type;return e==="number"||e==="range"}function Js(n){return n===""?null:+n}class Zs{#e=new WeakMap;#n;#t;static entries=new WeakMap;constructor(e){this.#t=e}observe(e,t){var s=this.#e.get(e)||new Set;return s.add(t),this.#e.set(e,s),this.#s().observe(e,this.#t),()=>{var l=this.#e.get(e);l.delete(t),l.size===0&&(this.#e.delete(e),this.#n.unobserve(e))}}#s(){return this.#n??(this.#n=new ResizeObserver(e=>{for(var t of e){Zs.entries.set(t.target,t);for(var s of this.#e.get(t.target)||[])s(t)}}))}}var Bc=new Zs({box:"border-box"});function Zo(n,e,t){var s=Bc.observe(n,()=>t(n[e]));zs(()=>(sr(()=>t(n[e])),s))}function Qo(n,e){return n===e||n?.[ur]===e}function en(n={},e,t,s){return zs(()=>{var l,o;return es(()=>{l=o,o=[],sr(()=>{n!==t(...o)&&(e(n,...o),l&&Qo(t(...l),n)&&e(null,...l))})}),()=>{Vt(()=>{o&&Qo(t(...o),n)&&e(null,...o)})}}),n}function Dc(n=!1){const e=nt,t=e.l.u;if(!t)return;let s=()=>vc(e.s);if(n){let l=0,o={};const a=Cn(()=>{let c=!1;const f=e.s;for(const u in f)f[u]!==o[u]&&(o[u]=f[u],c=!0);return c&&l++,l});s=()=>r(a)}t.b.length&&oc(()=>{$o(e,s),ks(t.b)}),me(()=>{const l=sr(()=>t.m.map(ii));return()=>{for(const o of l)typeof o=="function"&&o()}}),t.a.length&&me(()=>{$o(e,s),ks(t.a)})}function $o(n,e){if(n.l.s)for(const t of n.l.s)r(t);e()}let ss=!1;function Yc(n){var e=ss;try{return ss=!1,[n(),ss]}finally{ss=e}}const Wc={get(n,e){if(!n.exclude.includes(e))return n.props[e]},set(n,e){return!1},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function tn(n,e,t){return new Proxy({props:n,exclude:e},Wc)}const Hc={get(n,e){let t=n.props.length;for(;t--;){let s=n.props[t];if(dn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(n,e,t){let s=n.props.length;for(;s--;){let l=n.props[s];dn(l)&&(l=l());const o=Tr(l,e);if(o&&o.set)return o.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let s=n.props[t];if(dn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=Tr(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(n,e){if(e===ur||e===Gl)return!1;for(let t of n.props)if(dn(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(dn(t)&&(t=t()),!!t){for(const s in t)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(t))e.includes(s)||e.push(s)}return e}};function Fr(...n){return new Proxy({props:n},Hc)}function I(n,e,t,s){var l=!mn||(t&Ci)!==0,o=(t&Pi)!==0,a=(t&Ti)!==0,c=s,f=!0,u=()=>(f&&(f=!1,c=a?sr(s):s),c),d;if(o){var v=ur in n||Gl in n;d=Tr(n,e)?.set??(v&&e in n?y=>n[e]=y:void 0)}var h,m=!1;o?[h,m]=Yc(()=>n[e]):h=n[e],h===void 0&&s!==void 0&&(h=u(),d&&(l&&pi(),d(h)));var _;if(l?_=()=>{var y=n[e];return y===void 0?u():(f=!0,y)}:_=()=>{var y=n[e];return y!==void 0&&(c=void 0),y===void 0?c:y},l&&(t&Ni)===0)return _;if(d){var b=n.$$legacy;return(function(y,k){return arguments.length>0?((!l||!k||b||m)&&d(k?_():y),y):_()})}var p=!1,w=((t&Ai)!==0?Cn:Ts)(()=>(p=!1,_()));o&&r(w);var A=Ke;return(function(y,k){if(arguments.length>0){const N=k?r(w):l&&o?Fe(y):y;return q(w,N),p=!0,c!==void 0&&(c=N),y}return Rr&&p||(A.f&gr)!==0?w.v:r(w)})}function Uc(n){nt===null&&Kl(),mn&&nt.l!==null?Xc(nt).m.push(n):me(()=>{const e=sr(n);if(typeof e=="function")return e})}function Xc(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}const Gc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Gc),Vi();function Qs(n){return zn(n,.5)}function Kc(n){return zn(n,.75)-zn(n,.25)}function zn(n,e){if(We(n))return zn(n.v,e);if(We(e))return zn(n,e.v);const t=n.length;if(Array.isArray(e)||(e=[e]),!ll(e[0])||Dt(e)<0||Kt(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(a,c){const f=(t-1)*c+1,u=Math.floor(f),d=Math.ceil(f);return a[u-1]+(a[d-1]-a[u-1])*(f-Math.floor(f))}const l=cl(n),o=e.map(a=>s(l,a));return e.length==1?o[0]:Re(o)}function $s(n,e){We(n)&&$s(n.v,e);const t=qr(n);if(t[0]===t[1])throw new Error('split: values in a vector "x" should vary.');const s=(t[1]-t[0])/e;return ke.seq(t[0],t[1],s)}function ea(n){if(We(n))return ea(n.v);const e=new ke.valuesConstructor(n.length-1);for(let t=0;t<n.length-1;t++)e[t]=n[t+1]-n[t];return new ke(e)}function Ar(n,e){if(We(n))return Ar(n.v,e);e===void 0&&(e=.1);const t=qr(n),s=(t[1]-t[0])*e;return[t[0]-s,t[1]+s]}function qr(n){if(We(n))return qr(n.v);let e=n[0],t=n[0];for(let s=1;s<n.length;s++)n[s]<e&&(e=n[s]),n[s]>t&&(t=n[s]);return[e,t]}function ls(n,e){return We(n)?ls(n.v,e):Math.sqrt(os(n,e))}function os(n,e){if(e===void 0&&(e=!1),We(n))return os(n.v);const t=rn(n);let s=0;for(let l=0;l<n.length;l++){const o=n[l]-t;s=s+o*o}return s/(e?n.length:n.length-1)}function rn(n){return We(n)?rn(n.v):el(n)/n.length}function el(n){if(We(n))return el(n.v);let e=0;for(let t=0;t<n.length;t++)e=e+n[t];return e}function tl(n){if(We(n))return tl(n.v);let e=1;for(let t=0;t<n.length;t++)e=e*n[t];return e}function Dt(n){return We(n)||lr(n)?n.v[rl(n.v)-1]:n[rl(n)-1]}function rl(n){if(We(n)||lr(n))return rl(n.v);let e=1,t=n[0];for(let s=2;s<=n.length;s++)n[s-1]<t&&(e=s,t=n[s-1]);return e}function Kt(n){return We(n)||lr(n)?n.v[nl(n.v)-1]:n[nl(n)-1]}function nl(n){if(We(n)||lr(n))return nl(n.v);let e=1,t=n[0];for(let s=2;s<=n.length;s++)n[s-1]>t&&(e=s,t=n[s-1]);return e}const sl=30,Jc=1e-7,Zc=1e-7,Qc=100;function $c(n,e,t,s,l){l===void 0&&(l=Qc);let o=t,a=s,c=(a-o)/l;for(let f=0;f<l;f++){let u,d;for(let m=0;m<l;m++){u=o+m*c,d=o+(m+1)*c;const _=e(u),b=e(d);if(_<=n&&b>=n)break}const v=(u+d)/2,h=e(v);if(Math.abs(h-n)<Jc||(o=u,a=d,c=(a-o)/l,c/a<Zc))return v}return(o+a)/2}function ta(n,e=0,t=1){let s=ke.zeros(n);for(let l=0;l<n;l++)s.v[l]=e+Math.random()*(t-e);return s}function ra(n,e=0,t=1){let s=ke.zeros(n);for(let l=0;l<n;l++){const o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random();s.v[l]=o*Math.sin(a)*t+e}return s}function yn(n,e=0,t=1){if(We(n))return n.apply(l=>yn(l,e,t));const s=(n-e)/t;return Math.exp(-.5*s*s)/(Math.sqrt(2*Math.PI)*t)}function In(n,e=0,t=1){if(We(n))return n.apply(l=>In(l,e,t));const s=1/(Math.sqrt(2)*t);return .5*(1+tu((n-e)*s))}function zr(n,e=0,t=1){if(We(n))return n.apply(D=>zr(D,e,t));if(e!==0||t!==1)return zr(n)*t+e;if(n<0||n>1)throw Error('Parameter "p" must be between 0 and 1.');if(n<1e-10)return-1/0;if(n>.9999999999)return 1/0;const s=.425,l=5,o=.180625,a=1.6,c=3.3871327179,f=5.0434271938*10,u=1.5929113202*100,d=5.910937472*10,v=1.7895169469*10,h=7.8757757664*10,m=6.71875636*10,_=1.4234372777,b=2.75681539,p=1.3067284816,w=1.7023821103*.1,A=7.370016425*.1,y=1.2021132975*.1,k=6.657905115,N=3.081226386,T=4.2868294337*.1,P=1.7337203997*.01,L=2.4197894225*.1,F=1.2258202635*.01,E=n-.5;let S;if(Math.abs(E)<=s)return S=o-E*E,E*(((d*S+u)*S+f)*S+c)/(((m*S+h)*S+v)*S+1);S=E<0?n:1-n,S=Math.sqrt(-Math.log(S));let R;return S<=l?(S=S-a,R=(((w*S+p)*S+b)*S+_)/((y*S+A)*S+1)):(S=S-l,R=((P*S+T)*S+N+k)/((F*S+L)*S+1)),E<0?-R:R}function na(n,e){if(Array.isArray(n))return na(Re(n),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const u=f/e,d=Math.pow(u,1/6)-.5*Math.pow(u,1/3)+1/3*Math.pow(u,1/2);return In(d,t,l)}function a(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:eu(f/2,e/2)/Vn(e/2)}const c=e>sl?o:a;return We(n)?n.apply(c):c(n)}function xn(n,e){if(Array.isArray(n))return xn(Re(n),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const u=zr(f,t,l),d=Math.pow(Math.sqrt(36*u*u-30*u+13)/4+(3*u-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function a(f){return f===0?0:f===1?Inf:e===0?0:$c(f,d=>na(d,e),0,sl*10)}const c=e>sl?o:a;return We(n)?n.apply(c):c(n)}function Vn(n){if(We(n))return n.apply(Vn);if(n<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(n<.5)return Math.PI/(Math.sin(Math.PI*n)+Vn(1-n));n=n-1;let t=.9999999999998099;for(let l=0;l<e.length;l++)t=t+e[l]/(n+l+1);const s=n+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,n+.5)*Math.exp(-s)*t}function eu(n,e){let l=0;for(let o=0;o<1e4;o++){const a=Math.pow(n,o)/Vn(e+o+1);if(isNaN(a)||a<1e-18)break;l+=a}return Math.pow(n,e)*Vn(e)*Math.exp(-n)*l}function tu(n){const e=n>=0?1:-1;n=Math.abs(n);const t=.254829592,s=-.284496736,l=1.421413741,o=-1.453152027,a=1.061405429,f=1/(1+.3275911*n),u=1-((((a*f+o)*f+l)*f+s)*f+t)*f*Math.exp(-n*n);return e*u}function sa(n){const e=n.nrows,t=n.ncols;if(e<t){const a=sa(n.subset([],Ue.seq(1,e)));return{Q:a.Q,R:nu(a.Q,n)}}let s=Ee.eye(e),l=n.t();for(let a=1;a<=t;a++)for(let c=e;c>=a+1;c--){const f=l.v.subarray((c-2)*t,c*t),u=s.v.subarray((c-2)*e,c*e),d=f.slice(),v=u.slice(),[h,m,_]=ru(d[a-1],d[a-1+t]);for(let b=0;b<t;b++)f[b]=d[b]*h+d[b+t]*m,f[b+t]=d[b]*-m+d[b+t]*h,u[b]=v[b]*h+v[b+e]*m,u[b+e]=v[b]*-m+v[b+e]*h;for(let b=t;b<e;b++)u[b]=v[b]*h+v[b+e]*m,u[b+e]=v[b]*-m+v[b+e]*h}const o=Ue.seq(1,t);return{Q:e===t?s:s.subset([],o),R:e===t?l.t():l.subset([],o).t()}}function ru(n,e){if(n==0)return[0,1,e];if(Math.abs(n)>Math.abs(e)){const o=e/n,a=Math.sqrt(1+o*o),c=1/a;return[c,o*c,n*a]}const t=n/e,s=Math.sqrt(1+t*t),l=1/s;return[t*l,l,e*s]}function ll(n){return typeof n=="number"}function la(n,e){e===void 0&&(e=n);const t=n.nrows,s=n.ncols,l=e.nrows;e.ncols;const o=t,a=l,c=s,f=new Float64Array(o*a);for(let u=0;u<c;u++){const d=n.v.subarray(u*t,(u+1)*t),v=e.v.subarray(u*l,(u+1)*l);for(let h=0;h<a;h++){const m=f.subarray(h*o,(h+1)*o);for(let _=0;_<o;_++)m[_]+=d[_]*v[h]}}return new Ee(f,o,a)}function nu(n,e){if(e===void 0&&(e=n),!qt(n)||!qt(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=n.nrows,s=n.ncols,l=e.nrows,o=e.ncols,a=s,c=o,f=t,u=new Float64Array(a*c);for(let d=0;d<c;d++){const v=e.v.subarray(d*l,(d+1)*l),h=u.subarray(d*a,(d+1)*a);for(let m=0;m<a;m++){const _=n.v.subarray(m*t,(m+1)*t);let b=0;for(let p=0;p<f;p++)b+=_[p]*v[p];h[m]=b}}return new Ee(u,a,c)}function Cr(...n){if(n.length===1)return n[0];const e=n.reduce((l,o)=>l+o.length,0),t=new n[0].constructor.valuesConstructor(e);let s=0;for(const l of n)t.set(l.v,s),s+=l.length;return new n[0].constructor(t)}function oa(n,e,t){if(t===void 0){if(e!==n.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new ke(n.v)}if(n.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ee(n.v,e,t)}function qt(n){return n&&n.constructor===Ee}function su(n,e,t){return new Ee(new Float64Array(n),e,t)}class Ee{static valuesConstructor=Float64Array;static TOLERANCE=Math.pow(10,-9);constructor(e,t,s){if(!ArrayBuffer.isView(e)||e.constructor!==Ee.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Ee.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const s=Ee.eye(e),l=Ee.eye(e),o=this.t(),a=o.v[(e-1)*e+(e-1)],c=e-1;for(let f=0;f<e;f++)l.v[c*e+f]=s.v[c*e+f]/a;for(let f=e-2;f>=0;f--){let u=s.getcolumn(f+1);const d=o.getcolref(f+1);for(let v=f+1;v<e;v++){const h=l.getcolumn(v+1);u=u.subtract(h.mult(d[v]))}l.v.set(u.divide(d[f]).v,f*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(tl(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=Ee.eye(e),o=Ee.eye(e),a=this.t(),c=0,f=a.v[0];for(let u=0;u<e;u++)o.v[c*e+u]=l.v[c*e+u]/f;for(let u=1;u<e;u++){let d=l.getcolumn(u+1);const v=a.getcolref(u+1);for(let h=0;h<u;h++){const m=o.getcolumn(h+1);d=d.subtract(m.mult(v[h]))}o.v.set(d.divide(v[u]).v,u*e)}return o.t()}const t=sa(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Ee.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Ee.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let s=0;s<e;s++)t[s]=this.getcolref(s+1)[s];return new ke(t)}t(){const e=this.nrows,t=this.ncols,s=new Ee.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const o=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let a=0;a<this.nrows;a++)s[a*t+l]=o[a]}return new Ee(s,t,e)}for(let l=0;l<this.nrows;l++){const o=s.subarray(l*t,(l+1)*t);for(let a=0;a<this.ncols;a++)o[a]=this.v[a*this.nrows+l]}return new Ee(s,t,e)}dot(e){if(We(e))return new Ee(il(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(qt(e))return new Ee(il(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,s){if(qt(e))return new Ee(ol(this.v,e.v,t),this.nrows,this.ncols);if(ll(e))return new Ee(al(this.v,e,t),this.nrows,this.ncols);if(!We(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new Ee.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(al(this.getcolref(o+1),e.v[o],t),o*this.nrows);return new Ee(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new Ee.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(ol(this.getcolref(o+1),e.v,t),o*this.nrows);return new Ee(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e,t){if(t===void 0&&(t=2),t==2){const s=this.ncols,l=new Ee.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.getcolref(o+1));return new ke(l)}if(t==1)return this.t().apply(e,2);if(t==0){const s=this.v.length,l=new Ee.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.v[o]);return new Ee(l,this.nrows,this.ncols)}}replace(e,t,s){typeof t=="number"&&(t=[t]),t.length===0&&(t=Ue.seq(1,this.nrows)),lr(t)||(t=or(t)),typeof s=="number"&&(s=[s]),s.length===0&&(s=Ue.seq(1,this.ncols)),lr(s)||(s=or(s));const l=t.length,o=s.length;if(Dt(t)<1||Kt(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Dt(s)<1||Kt(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==o)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let a=0;a<s.length;a++){const c=e.getcolref(a+1),f=(s.v[a]-1)*this.nrows;for(let u=0;u<t.length;u++){const d=t.v[u];this.v[f+d-1]=c[u]}}return this}copy(){return new Ee(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new ke.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)t[s]=this.getcolref(s+1)[e-1];return new ke(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new ke(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=or([e])),typeof t=="number"&&(t=or([t])),Array.isArray(e)&&(e=e.length===0?null:or(e)),Array.isArray(t)&&(t=t.length===0?null:or(t)),e!==null&&!lr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!lr(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Dt(e)<1||Kt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(Dt(t)<1||Kt(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const c=t.length,f=this.nrows,u=new Ee.valuesConstructor(f*c);for(let d=0;d<t.length;d++)u.set(this.v.slice((t.v[d]-1)*this.nrows,t.v[d]*this.nrows),d*this.nrows);return new Ee(u,f,c)}if(t==null)return this.t().subset(t,e).t();const s=e.length,l=t.length,o=new Ee.valuesConstructor(s*l);let a=new Ee.valuesConstructor(s);for(let c=0;c<l;c++){const f=this.v.subarray((t.v[c]-1)*this.nrows,t.v[c]*this.nrows);for(let u=0;u<s;u++)a[u]=f[e.v[u]-1];o.set(a,c*s)}return new Ee(o,s,l)}toString(e){function t(a,c){return" ".repeat(c-a.length)+a}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Kt(this.v))))+e+3;let l="";const o=this.t();for(let a=1;a<=o.ncols;a++)l+=Array.from(o.getcolref(a)).map(c=>t(c.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,t,s,l){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const o=l!=null&&l.length>0,a=s!=null&&s.length>0;if(o&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(a&&s.length!==this.ncols+(o?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const c=this.t();let f=a?s.join(e)+`
`:"";for(let u=1;u<=c.ncols;u++)f=f+(o?l[u-1]+e:"")+c.getcolref(u).join(e)+`
`;return f=f.replace(/\./g,t),f}static randn(e,t,s,l){return oa(ra(e*t,s,l),e,t)}static rand(e,t,s,l){return oa(ta(e*t,s,l),e,t)}static eye(e,t){t===void 0&&(t=e);const s=new Float64Array(e*t);for(let l=0;l<Math.min(e,t);l++)s[l*e+l]=1;return new Ee(s,e,t)}static diagm(e){if(!We(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,s=new Float64Array(t*t);for(let l=0;l<t;l++)s[l*t+l]=e.v[l];return new Ee(s,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Ee(new Float64Array(e*t),e,t)}static ones(e,t){return Ee.fill(1,e,t)}static fill(e,t,s){s===void 0&&(s=t);const l=new Float64Array(t*s);for(let o=0;o<l.length;o++)l[o]=e;return new Ee(l,t,s)}static outer(e,t,s){if(Array.isArray(e)&&(e=Re(e)),Array.isArray(t)&&(t=Re(t)),!We(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!We(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=Ee.zeros(e.length,t.length);for(let o=0;o<t.length;o++){const a=t.v[o],c=l.getcolref(o+1);for(let f=0;f<e.length;f++)c[f]=s(e.v[f],a)}return l}static parseCSV(e,t,s,l){function o(p){return p.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}t===void 0&&(t=",");const a=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let c=e.split(/\n/),f=[],u=0;const d=c[0].split(t);(s||s===void 0&&o(d))&&(f=d,u=1),c=c.filter(p=>p.trim().length>1);let v=[],h=0;l&&(h=1);const m=c.length-u,_=d.length-h;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(_<1)throw Error("Data file should contain at least 1 column with values.");const b=Ee.zeros(_,m);for(let p=u;p<m+u;p++){const w=c[p].split(t);let A;if(l?(v[p-u]=w[0],A=w.slice(1).map(y=>Number.parseFloat(y.trim().replace(a,".")))):A=w.map(y=>Number.parseFloat(y.trim().replace(a,"."))),A.some(y=>Number.isNaN(y)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=_)throw Error("Wrong number of values in row #"+p);b.v.set(new Float64Array(A),(p-u)*_)}return{values:b.t(),header:f,labels:v,sep:t,dec:a}}}function We(n){return n&&n.constructor===ke}function Re(n){return new ke(new Float64Array(n))}class ke{static valuesConstructor=Float64Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new Ue.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new Ue(t.subarray(0,s))}filter(e){const t=new ke.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new ke(t.subarray(0,s))}shuffle(){return new ke(ua(this.v))}sort(e){return new ke(cl(this.v,e))}sortind(e){return new Ue(fa(this.v,e))}rep(e){return ia(this,e)}repeach(e){return ca(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=Ue.seq(1,this.length)),lr(t)||(t=or(t));const s=t.length;if(Dt(t)<1||Kt(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<t.length;l++){const o=t.v[l];this.v[o-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=or([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Ue.bool2ind(e):or(e)),!lr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=ke.zeros(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new ke(this.v.slice(e-1,t))}copy(){return new ke(this.v.slice())}dot(e){return e===void 0&&(e=this),il(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(We(e))return new ke(ol(this.v,e.v,t));if(ll(e))return new ke(al(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e){const t=this.v.length,s=ke.zeros(t);for(let l=0;l<t;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const t=e.reduce((o,a)=>o+(typeof a=="number"?1:a.length),0),s=new ke.valuesConstructor(t);let l=0;for(const o of e)typeof o=="number"?(s[l]=o,l+=1):(s.set(We(o)?o.v:new ke.valuesConstructor(o),l),l+=typeof o=="number"?1:o.length);return new ke(s)}static seq(e,t,s){return aa(e,t,s,ke)}static randn(e,t,s){return ra(e,t,s)}static rand(e,t,s){return ta(e,t,s)}static zeros(e){return new ke(new ke.valuesConstructor(e))}static ones(e){return ke.fill(1,e)}static fill(e,t){const s=new ke.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new ke(s)}}function lr(n){return n.constructor===Ue}function or(n){return new Ue(new Int32Array(n))}class Ue{static valuesConstructor=Int32Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new Ue.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new Ue(t.subarray(0,s))}filter(e){const t=new Ue.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new Ue(t.subarray(0,s))}shuffle(){return new Ue(ua(this.v))}sort(e){return new Ue(cl(this.v,e))}sortind(e){return new Ue(fa(this.v,e))}rep(e){return ia(this,e)}repeach(e){return ca(this,e)}subset(e){if(typeof e=="number"&&(e=or([e])),Array.isArray(e)&&(e=or(e)),!lr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=new Ue.valuesConstructor(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new Ue(s)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new Ue(this.v.slice(e-1,t))}static seq(e,t,s){return aa(e,t,s,Ue)}static ones(e){return Ue.fill(1,e)}static fill(e,t){const s=new Ue.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new Ue(s)}static bool2ind(e){let t=0;const s=new Ue.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[t]=l+1,t=t+1);return new Ue(s.subarray(0,t))}}function aa(n,e,t,s){t===void 0&&(t=n<=e?1:-1);const l=Math.floor((e-n)/t)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const o=new s.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=n+a*t;return new s(o)}function ia(n,e){const t=n.length*e,s=new n.constructor.valuesConstructor(t);for(let l=1;l<=e;l++)for(let o=0;o<n.length;o++)s[(l-1)*n.length+o]=n.v[o];return new n.constructor(s)}function ca(n,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=n.length*e,s=new n.constructor.valuesConstructor(t);for(let l=0;l<n.length;l++)for(let o=0;o<e;o++)s[l*e+o]=n.v[l];return new n.constructor(s)}function ol(n,e,t){if(n.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(n.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new n.constructor(n.length);for(let l=0;l<n.length;l++)s[l]=t(n[l],e[l]);return s}function al(n,e,t){const s=new n.constructor(n.length);for(let l=0;l<n.length;l++)s[l]=t(n[l],e);return s}function il(n,e,t,s,l,o){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const a=t,c=o,f=s,u=new n.constructor(a*c);for(let d=0;d<c;d++){const v=e.subarray(d*l,(d+1)*l),h=u.subarray(d*a,(d+1)*a);for(let m=0;m<f;m++){const _=v[m],b=n.subarray(m*t,(m+1)*t);for(let p=0;p<a;p++)h[p]+=b[p]*_}}return u}function ua(n){let e=n.slice(),t=e.length,s,l;for(;t;)l=Math.floor(Math.random()*t--),s=e[t],e[t]=e[l],e[l]=s;return e}function cl(n,e=!1){return e?n.slice().sort((t,s)=>s-t):n.slice().sort((t,s)=>t-s)}function fa(n,e=!1){const t=Ue.seq(1,n.length).v;return e?t.sort((s,l)=>n[l-1]-n[s-1]):t.sort((s,l)=>n[s-1]-n[l-1])}function lu(n,e,t){if(!n||!n.class||!n.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=n.ncols,l=n.ncomp;let o,a;switch(e){case"mX":o=2,a=s;break;case"sX":o=2+s,a=s;break;case"loadings":case"xloadings":o=2+2*s+(t-1)*s,a=s;break;case"P":o=2+2*s,a=l*s;break;case"eigenvals":case"xeigenvals":o=2+2*s+s*l,a=l;break;case"cq0":o=2+2*s+s*l+l,a=l;break;case"cNq":o=2+2*s+s*l+2*l,a=l;break;case"rq0":o=2+2*s+s*l+3*l,a=l;break;case"rNq":o=2+2*s+s*l+4*l,a=l;break;case"ch0":o=2+2*s+s*l+5*l,a=l;break;case"cNh":o=2+2*s+s*l+6*l,a=l;break;case"rh0":o=2+2*s+s*l+7*l,a=l;break;case"rNh":o=2+2*s+s*l+8*l,a=l;break;case"cr0":o=2+2*s+s*l+9*l,a=l;break;case"cNr":o=2+2*s+s*l+10*l,a=l;break;case"rr0":o=2+2*s+s*l+11*l,a=l;break;case"rNr":o=2+2*s+s*l+12*l,a=l;break;case"cg0":o=2+2*s+s*l+13*l,a=l;break;case"cNg":o=2+2*s+s*l+14*l,a=l;break;case"rg0":o=2+2*s+s*l+15*l,a=l;break;case"rNg":o=2+2*s+s*l+16*l,a=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return n.v.subarray(o,o+a)}function da(n,e,t){if(!n||!n.class||!n.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=n.ncols,l=n.nrows,o=n.ncomp;let a,c;switch(e){case"scores":case"xscores":a=(t-1)*l,c=l;break;case"T":a=0,c=l*o;break;case"hdist":a=l*o+(t-1)*l,c=l;break;case"qdist":a=2*l*o+(t-1)*l,c=l;break;case"xcumexpvar":case"cumexpvar":a=3*l*o,c=o;break;case"fdistc":a=3*l*o+o+(t-1)*l,c=l;break;case"fdistr":a=4*l*o+o+(t-1)*l,c=l;break;case"gdist":a=5*l*o+o+(t-1)*s,c=s;break;case"rdist":a=5*l*o+o+s*o+(t-1)*s,c=s;break;case"idistc":a=5*l*o+o+2*s*o+(t-1)*s,c=s;break;case"idistr":a=5*l*o+o+3*s*o+(t-1)*s,c=s;break;case"E":a=5*l*o+o+3*s*o+o*s,c=l*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return n.v.subarray(a,a+c)}function ou(n,e,t,s){return n*t+n*t+n*t+t+n*e*t+n*t+n*t+t+e*t+e*t+e*t+e*t+n*s}function va(n,e,t){return 3+2*(n+e)+n*t+1*t+4*t+4*t+4*t+n*t+e*t+1*t}function as(n,e,t){if(!n||!n.class||!n.class.includes("plsmodel"))throw new Error('plsmodel_get: parameter "m" must be JSON with PLS model.');const s=n.npred,l=n.nresp,o=n.ncomp;let a,c=va(s,l,o)-s*o-l*o-2*l;switch(e){case"mY":c=3,a=l;break;case"mX":c=3+l,a=s;break;case"sY":c=3+l+s,a=l;break;case"sX":c=3+l+s+l,a=s;break;case"P":c=3+2*(l+s),a=o*s;break;case"loadings":case"xloadings":c=3+2*(l+s)+(t-1)*s,a=s;break;case"eigenvals":case"xeigenvals":c=3+2*(l+s)+o*s,a=o;break;case"cq0":c=3+2*(l+s)+o*s+o,a=o;break;case"cNq":c=3+2*(l+s)+o*s+2*o,a=o;break;case"rq0":c=3+2*(l+s)+o*s+3*o,a=o;break;case"rNq":c=3+2*(l+s)+o*s+4*o,a=o;break;case"ch0":c=3+2*(l+s)+o*s+5*o,a=o;break;case"cNh":c=3+2*(l+s)+o*s+6*o,a=o;break;case"rh0":c=3+2*(l+s)+o*s+7*o,a=o;break;case"rNh":c=3+2*(l+s)+o*s+8*o,a=o;break;case"cz0":c=3+2*(l+s)+o*s+9*o,a=o;break;case"cNz":c=3+2*(l+s)+o*s+10*o,a=o;break;case"rz0":c=3+2*(l+s)+o*s+11*o,a=o;break;case"rNz":c=3+2*(l+s)+o*s+12*o,a=o;break;case"weights":c=3+2*(l+s)+o*s+13*o+(t-1)*s,a=s;break;case"yloadings":c=3+2*(l+s)+o*s+13*o+o*s+(t-1)*l,a=l;break;case"yeigenvals":c=3+2*(l+s)+o*s+13*o+o*s+o*l,a=o;break;default:throw Error("plsmodel_get: wrong outcome name.")}return n.v.subarray(c,c+a)}function Nt(n,e,t,s){if(!n||!n.class||!n.class.includes("plsres"))throw new Error('plsres_get: parameter "r" must be JSON with PLS results.');s||(s=1);const l=n.nrows,o=n.ncomp,a=n.nresp,c=n.npred,f=n.nresp_model;let u,d=3*l*o+o;switch(e){case"Yp":d=d+(t-1)*f*l+(s-1)*l,u=l;break;case"yscores":d=d+o*f*l+(t-1)*l,u=l;break;case"zdist":d=d+o*f*l+o*l+(t-1)*l,u=l;break;case"ycumexpvar":d=d+o*f*l+o*l+o*l,u=o;break;case"rmse":d=d+o*f*l+o*l+o*l+o,u=f*o;break;case"r2":d=d+o*f*l+o*l+o*l+o+a*o,u=f*o;break;case"bias":d=d+o*f*l+o*l+o*l+o+2*a*o,u=f*o;break;case"slope":d=d+o*f*l+o*l+o*l+o+3*a*o,u=f*o;break;case"E":d=d+o*f*l+o*l+o*l+o+4*a*o,u=l*c;break;case"T":d=0,u=l*o;break;default:return da(n,e,t)}return n.v.subarray(d,d+u)}function au(n,e,t,s,l,o,a,c){if(!qt(e))throw new Error("pls_fit: D must be a matrix.");if(t<1||e.ncols<2+t)throw new Error("pls_fit: training set should have at least 2 predictors and 1 response.");a||(a=[]);const f=a&&Array.isArray(a)?a.length:0;if(!us(a,0,e.nrows-1))throw new Error('pls_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!us(c,0,e.ncols-t-1))throw new Error('pls_fit: some indices in "exclvars" array are outside the expected range.');const d=e.nrows-f,v=e.ncols-t-u;if(d<3||v<2)throw new Error("pls_fit: X must have at least 3 rows and 2 predictors.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),s===void 0&&(s=Math.min(d-1,v)),s<1||s>Math.min(d-1,v))throw new Error('pls_fit: the value of "ncomp" does not match the dimension of D.');const h=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(f>0){const R=new Int32Array(a);m=n._malloc(R.length*R.BYTES_PER_ELEMENT),n.HEAP32.set(R,m/R.BYTES_PER_ELEMENT)}let _=null;if(u>0){const R=new Int32Array(c);_=n._malloc(R.length*R.BYTES_PER_ELEMENT),n.HEAP32.set(R,_/R.BYTES_PER_ELEMENT)}const b=va(v,t,s),p=Float64Array,w=n._malloc(b*p.BYTES_PER_ELEMENT),A=v*t*s,y=Float64Array,k=n._malloc(A*p.BYTES_PER_ELEMENT),N=n._malloc(A*p.BYTES_PER_ELEMENT),T=n._malloc(A*p.BYTES_PER_ELEMENT);if(n.ccall("plsfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols-t,t,s,l,o,w,m,f,_,u,N,k,T])!==1)throw new Error("pls_fit: unexpected error.");const L=n.HEAPF64.slice(w/p.BYTES_PER_ELEMENT,w/p.BYTES_PER_ELEMENT+b),F=n.HEAPF64.slice(N/y.BYTES_PER_ELEMENT,N/y.BYTES_PER_ELEMENT+A),E=n.HEAPF64.slice(k/y.BYTES_PER_ELEMENT,k/y.BYTES_PER_ELEMENT+A),S=n.HEAPF64.slice(T/y.BYTES_PER_ELEMENT,T/y.BYTES_PER_ELEMENT+A);return n._free(h),n._free(w),n._free(N),n._free(k),n._free(T),m&&n._free(m),_&&n._free(_),{class:["plsmodel","pcamodel"],v:L,ncomp:s,nrows:d,npred:v,nresp:t,exclvars:c,center:l,scale:o,coeffs:F,vip:E,sr:S}}function iu(n,e,t,s,l){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pls_predict: parameter "m" must be JSON with PLS results.');if(!qt(t))throw new Error("pls_predict: D must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!us(l,0,t.nrows-1))throw new Error('pls_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=t.nrows-o;t.ncols-s===e.npred&&(a=0);const f=t.ncols-a-s;if(c<1)throw new Error("pls_predict: D must have at least 1 row.");if(f!==e.npred)throw new Error("pls_predict: D must have the same number of predictors (without excluded ones) as the training set.");const u=n._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);n.HEAPF64.set(t.v,u/t.v.BYTES_PER_ELEMENT);let d=null;if(o>0){const Y=new Int32Array(l);d=n._malloc(Y.length*Y.BYTES_PER_ELEMENT),n.HEAP32.set(Y,d/Y.BYTES_PER_ELEMENT)}let v=null;if(a>0){const Y=new Int32Array(e.exclvars);v=n._malloc(Y.length*Y.BYTES_PER_ELEMENT),n.HEAP32.set(Y,v/Y.BYTES_PER_ELEMENT)}const h=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const m=ou(c,e.nresp,e.ncomp,e.npred),_=Float64Array,b=n._malloc(m*_.BYTES_PER_ELEMENT);if(n.ccall("plspredict_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[u,t.nrows,t.ncols-s,s,h,b,d,o,v,a])!==1)throw new Error("pls_predict: unexpected error.");const w=n.HEAPF64.slice(b/_.BYTES_PER_ELEMENT,b/_.BYTES_PER_ELEMENT+m);n._free(u),n._free(h),n._free(b),d&&n._free(d),v&&n._free(v);const A={class:["plsres","pcares"],v:w,ncomp:e.ncomp,nrows:c,npred:f,nresp:s,nresp_model:e.nresp,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},y=new Array(e.ncomp),k=new Array(e.ncomp),N=new Array(e.ncomp),T=new Array(e.ncomp),P=new Array(e.ncomp),L=new Array(e.ncomp),F=new Array(e.ncomp),E=new Array(e.ncomp),S=new Array(e.ncomp),R=Nt(A,"xcumexpvar"),D=Nt(A,"ycumexpvar");if(s>0){y[0]=1,P[0]=R[0],T[0]=1-R[0],k[0]=R[0],N[0]=1-R[0],S[0]=D[0],E[0]=1-D[0],L[0]=D[0],F[0]=1-D[0];for(let Z=1;Z<e.ncomp;Z++)y[Z]=Z+1,P[Z]=R[Z],T[Z]=1-R[Z],k[Z]=R[Z]-R[Z-1],N[Z]=1-k[Z],S[Z]=D[Z],E[Z]=1-D[Z],L[Z]=D[Z]-D[Z-1],F[Z]=1-L[Z];const Y=new Ee(Nt(A,"rmse"),e.nresp,e.ncomp),j=new Ee(Nt(A,"r2"),e.nresp,e.ncomp),O=new Ee(Nt(A,"slope"),e.nresp,e.ncomp),ee=new Ee(Nt(A,"bias"),e.nresp,e.ncomp);A.stat={components:y,xresvar:N,xexpvar:k,xcumexpvar:P,xcumresvar:T,yresvar:F,yexpvar:L,ycumexpvar:S,ycumresvar:E,rmse:Y.t(),r2:j.t(),slope:O.t(),bias:ee.t()}}else A.stat=null;return A}function cu(n,e,t,s,l,o,a,c,f){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pcvpls: parameter "m" must be JSON with PLS model.');if(!qt(t))throw new Error("pcvpls: D must be a matrix.");if(s<1)throw new Error("pcvpls: D must have at least one response.");f||(f=[]);const u=f&&Array.isArray(f)?f.length:0;if(!us(f,0,t.nrows-1))throw new Error('pcvpls: some indices in "outliers" array are outside the expected range.');const d=e.exclvars.length,v=t.nrows-u,h=t.ncols-s-d;if(v<3)throw new Error("plspcv: D must have at least 3 rows.");if(h<2)throw new Error("plspcv: D must have at least 2 predictors.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('plspcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('plspcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('plspcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>v)throw new Error('plspcv: the value of "cv_nseg" is too large for the given X.');if(a===0&&(o=v),!Number.isInteger(l)||l<1)throw new Error('plspcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?v-2:v-Math.ceil(v/o)-1,h,e.ncomp);if(l>m)throw new Error('plspcv: the value of "ncomp" is too large.');const _=n._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);n.HEAPF64.set(t.v,_/t.v.BYTES_PER_ELEMENT);let b=null;if(u>0){const S=new Int32Array(f);b=n._malloc(S.length*S.BYTES_PER_ELEMENT),n.HEAP32.set(S,b/S.BYTES_PER_ELEMENT)}let p=null;if(d>0){const S=new Int32Array(e.exclvars);p=n._malloc(S.length*S.BYTES_PER_ELEMENT),n.HEAP32.set(S,p/S.BYTES_PER_ELEMENT)}const w=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,w/e.v.BYTES_PER_ELEMENT);const A=t.v.constructor,y=v*(s+h),k=n._malloc(y*A.BYTES_PER_ELEMENT),N=o*l,T=t.v.constructor,P=n._malloc(N*T.BYTES_PER_ELEMENT);if(n.ccall("pcvpls_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[_,t.nrows,t.ncols-s,s,l,e.center,e.scale,a,o,c,w,k,P,b,u,p,d])!==1)throw new Error("plspcv: unexpected error.");const F=n.HEAPF64.slice(k/A.BYTES_PER_ELEMENT,k/A.BYTES_PER_ELEMENT+y),E=n.HEAPF64.slice(P/T.BYTES_PER_ELEMENT,P/T.BYTES_PER_ELEMENT+N);return n._free(_),n._free(w),n._free(k),n._free(P),b&&n._free(b),p&&n._free(p),[new Ee(F,v,s+h),new Ee(E,o,l)]}function uu(n,e){if(e[0]===0){const t=e[1]+2;return 2+n*t+2*n+t}return 3+n}const Ir=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(n,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(n,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(n,e)=>2*n,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:uu,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(n,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(n,e)=>2+3*n+e[0],mp:[5,5]}];function fu(n){let e="<ul>";for(let t=0;t<n.ml.length;t++){const s=Ir[n.ml[t]].title;e=e+"<li>"+s+" <span>"+n.info[t]+"</span></li>"}return e=e+"</ul>",e}function ha(n,e,t){const s=Ir.findIndex(v=>v.id==="trim");let l=0,o=n.ncols-e,a=0;for(let v=0;v<t.ml.length;v++){if(t.ml[v]!==s){a+=t.mpl_new[v];continue}l=Math.max(l,t.mp_new[a]),o=Math.min(o,t.mp_new[a+1]),a+=t.mpl_new[v]}const c=n.nrows,u=o-l+e,d=Ee.zeros(c,u);return a=0,e>0&&(d.v.set(n.v.slice(0,e*c),a),a+=e*c),d.v.set(n.v.slice((e+l)*c,(e+o)*c),a),[l,o,d]}function du(n,e){if(!n||!e||typeof e!="object"||Object.keys(e).length===0)return n;const t=Ir.findIndex(c=>c.id==="trim");if(e.ml.findIndex(c=>c===t)<0)return n;const[l,o,a]=ha(n.values,n.nresp,e);return n.values=a,n.varlabels=n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varlabels.slice(n.nresp+l,n.nresp+o)):n.varlabels.slice(l,o),n.varindices=n.nresp>0?Jt(0,n.nresp-1).concat(Jt(0,o-l-1)):Jt(0,o-l-1),n.varvalues=n.nresp>0?n.varvalues.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp+l,n.nresp+o)):n.varvalues.slice(l,o),n}function ma(n,e,t,s,l=!0,o=[]){if(!qt(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let a,c;l?(a=e.ncols,c=e.nrows-t):(a=e.nrows,c=e.ncols-t);const f=s.length;if(f<1)throw new Error("prep_fit: no preprocessing methods are provided.");const u=new Int32Array(f),d=new Int32Array(f),v=new Int32Array(f);let h=0,m=0;for(let R=0;R<s.length;R++){const D=s[R].id,Y=s[R].params,j=Ir.findIndex(ee=>ee.id==D);if(j<0)throw new Error("prep_fit: wrong method name: "+D+".");const O=Ir[j];if(Y.length!==O.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+D+".");u[R]=j,d[R]=O.mpl,v[R]=O.get_mpl_new(c,Y),h=h+d[R],m=m+v[R]}const _=new Float64Array(h);let b=0;for(let R=0;R<s.length;R++){const D=s[R].id,Y=s[R].params;Ir.findIndex(j=>j.id==D),_.set(Y,b),b=b+d[R]}const p=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const w=n._malloc(u.length*u.BYTES_PER_ELEMENT);n.HEAP32.set(u,w/u.BYTES_PER_ELEMENT);const A=n._malloc(d.length*d.BYTES_PER_ELEMENT);n.HEAP32.set(d,A/d.BYTES_PER_ELEMENT);const y=n._malloc(v.length*v.BYTES_PER_ELEMENT);n.HEAP32.set(v,y/v.BYTES_PER_ELEMENT);const k=n._malloc(_.length*_.BYTES_PER_ELEMENT);n.HEAPF64.set(_,k/_.BYTES_PER_ELEMENT);const N=n._malloc(m*_.BYTES_PER_ELEMENT),T=new Int32Array(o),P=T.length,L=n._malloc(P*T.BYTES_PER_ELEMENT);if(n.HEAP32.set(T,L/T.BYTES_PER_ELEMENT),n.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[p,a,c,t,f,w,A,k,y,N,l,L,P])!==1)throw new Error("prep_fit: unexpected error.");const E=n.HEAPF64.slice(N/_.BYTES_PER_ELEMENT,N/_.BYTES_PER_ELEMENT+m);return n._free(p),n._free(w),n._free(k),n._free(A),n._free(L),n._free(N),n._free(y),{ml:u,mpl:d,mp:_,mpl_new:v,mp_new:E,npred:c,class:["prepmodel"]}}function ul(n,e,t,s,l=!0,o=!1){if(!qt(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let a,c;if(l?(a=e.ncols,c=e.nrows-t):(a=e.nrows,c=e.ncols-t),c!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+c+").");const f=s.ml,u=s.mpl_new,d=s.mp_new,v=u.reduce((N,T)=>N+T,0);if(!f||f.length<1||!u||u.length!==f.length||d.length!==v)throw new Error("prep_apply: wrong structure of the model object.");const h=f.length,m=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const _=n._malloc(f.length*f.BYTES_PER_ELEMENT);n.HEAP32.set(f,_/f.BYTES_PER_ELEMENT);const b=n._malloc(u.length*u.BYTES_PER_ELEMENT);n.HEAP32.set(u,b/u.BYTES_PER_ELEMENT);const p=n._malloc(d.length*d.BYTES_PER_ELEMENT);n.HEAPF64.set(d,p/d.BYTES_PER_ELEMENT);const w=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(n.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[m,a,c,t,h,_,b,p,w,l])!==1)throw new Error("prep_apply: unexpected error.");const y=n.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);n._free(m),n._free(_),n._free(b),n._free(p),n._free(w);const k=new Ee(y,e.nrows,e.ncols);if(o){const[N,T,P]=ha(k,t,s);return P}return k}function vu(n,e,t,s){e===void 0&&(e=!0),t===void 0&&(t=!1),s===void 0&&(s=!1);function l(f,u,d,v){if(typeof u=="boolean")return u?f.apply(d,2):Re([v]).rep(f.ncols);if(!We(u))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(u.length!==f.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return u}const o=l(n,e,rn,0),a=l(n,t,ls,1),c=Ee.zeros(n.nrows,n.ncols);for(let f=1;f<=n.ncols;f++){const u=n.getcolref(f),d=c.getcolref(f),v=o.v[f-1],h=1/a.v[f-1];for(let m=0;m<n.nrows;m++)d[m]=(u[m]-v)*h}return s?[c,o,a]:c}function ga(n,e,t){return n<e?["regular","in"]:n>t?["outlier","out"]:["extreme","out"]}function hu(n,e,t,s,l,o,a,c){if(!c||c.length===0)return[0,0];let f=0,u=0;for(let d of c){const v=n[d],[h,m]=ga(v,e,t);o[h]+=1,a[m]+=1,s[d]=h,l[d]=m,f=f+(m==="in"),u=u+(m!=="in")}return[f,u]}function pa(n,e,t,s,l,o,a,c,f){if(!f||f.length===0)return[0,0,0,0,0,0,0,0,0,0];let u=0,d=0;for(let D of f){const Y=n[D],[j,O]=ga(Y,t,s);c[O]+=1,l[D]="alien",a.alien+=1,o[D]=O,u=u+(O!=="in"),d=d+(O==="in")}const v=f.slice();v.sort((D,Y)=>n[D]-n[Y]);let h=v.length;const m=v.map(D=>n[D]);let _=-1,b=0,p=0,w=0,A=0;for(;_<0;)b>0&&(l[v[h-1]]="external",a.alien=a.alien-1,a.external=a.external+1,h=h-1,v.pop(),m.pop()),p=rn(m),w=os(m),A=w/(p*p),_=4-2*e*A,b=b+1;const y=(2+Math.sqrt(_))/A,k=y-e,N=p/y,T=t/N,P=1-2*(e+k)*(e+3*k)/(3*(e+2*k)**2),L=(P-1)*(1-3*P),F=(e+2*k)/(e+k)**2,E=1+P*F*(P-1-.5*(2-P)*L*F),S=P*Math.sqrt(2*F)*(1+.5*L*F),R=In((Math.pow(T/(e+k),P)-E)/S);return[u,d,R,k,N,P,E,S,e,p]}class fl{#e;get outcomes(){return r(this.#e)}set outcomes(e){q(this.#e,e)}constructor(e,t,s,l,o,a,c){this.d=e,this.ind=t,this.objlabels=s,this.objindices=l,this.classes=o,this.classNames=a,this.nrows=e.length,this.nMembers=t.members.length,this.nStrangers=t.strangers.length,this.nUnknown=t.unknown.length,this.#e=g(()=>c.oCrit&&c.eCrit?this.getOutcomes(c):null)}getOutcomes(e){const t=this.d.apply(F=>F/e.f0*e.Nf).v,s=new Array(this.nrows),l=new Array(this.nrows),o={regular:0,extreme:0,outlier:0,alien:0,external:0},a={in:0,out:0},[c,f]=hu(t,e.eCrit,e.oCrit,l,s,o,a,this.ind.members),[u,d,v,h,m,_,b,p,w,A]=pa(t,e.Nf,e.eCrit,e.oCrit,l,s,o,a,this.ind.strangers);this.nUnknown>0&&pa(t,e.Nf,e.eCrit,e.oCrit,l,s,o,a,this.ind.unknown);const y=c>0?c/(c+f):0,k=u>0?u/(u+d):0,N=1-v,T=Math.sqrt(y*k),P=c>0&&u>0?(c+u)/(c+u+d+f):0,L={sensitivity:y,specificity:k,selectivity:N,efficiency:T,accuracy:P};return{Nf:e.Nf,f:t,decs:s,rols:l,decsNum:a,rolsNum:o,TP:c,FN:f,TN:u,FP:d,beta:v,s:h,f0:m,hz:_,Mz:b,Sz:p,k:w,m:A,stat:L}}toJSON(){return null}static fromJSON(e){return new fl(...e)}}class nn{#e;get alpha(){return r(this.#e)}set alpha(e){q(this.#e,e,!0)}#n;get gamma(){return r(this.#n)}set gamma(e){q(this.#n,e,!0)}#t;get limType(){return r(this.#t)}set limType(e){q(this.#t,e,!0)}#s;get Nf(){return r(this.#s)}set Nf(e){q(this.#s,e)}#a;get f0(){return r(this.#a)}set f0(e){q(this.#a,e)}#l;get eConfLim(){return r(this.#l)}set eConfLim(e){q(this.#l,e)}#r;get oConfLim(){return r(this.#r)}set oConfLim(e){q(this.#r,e)}#o;get eCrit(){return r(this.#o)}set eCrit(e){q(this.#o,e)}#i;get oCrit(){return r(this.#i)}set oCrit(e){q(this.#i,e)}constructor(e,t,s,l,o,a,c,f,u,d,v,h,m,_,b,p="nimca-model"){this.mX=t,this.sX=s,this.nrows=l,this.ncols=o,this.className=e,this.Nfc=a,this.Nfr=c,this.f0c=f,this.f0r=u,this.hash=d,this.class=["nimcamodel"],this.fileName=p,this.center=_,this.scale=b,this.#e=te(Fe(v)),this.#n=te(Fe(h)),this.#t=te(Fe(m)),this.#s=g(()=>this.limType==="classic"?this.Nfc:this.Nfr),this.#a=g(()=>this.limType==="classic"?this.f0c:this.f0r),this.#l=g(()=>1-Number.parseFloat(this.alpha)/100),this.#r=g(()=>Math.pow(1-this.gamma/100,1/l)),this.#o=g(()=>xn(this.eConfLim,this.Nf)),this.#i=g(()=>xn(this.oConfLim,this.Nf))}predict(e){if(!e.values||!qt(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const t=nn.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let l=0;l<e.classes.length;l++)e.classes[l]===this.className?s.members.push(l):s.strangers.push(l);else s.unknown=Jt(0,e.values.nrows-1);return new fl(t,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,t,s,l={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let o=e.values;const a=e.classNames[0];if(!qt(o))throw new Error("nimca.fit: X must be a matrix.");const c=t?o.apply(rn,2):ke.zeros(o.ncols),f=s?o.apply(ls,2):ke.ones(o.ncols),u=nn.getDistance(o,c,f),d=rn(u),v=os(u);let h=Math.round(2*d*d/v);h<1&&(h=1),h>250&&(h=250);const m=Qs(u),_=Kc(u),b=_/m;let p;b>2.685592117?p=1:b<.194565995?p=100:p=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/b),1.185785)));const w=.5*p*(m/xn(.5,p)+_/(xn(.75,p)-xn(.25,p)));return new nn(a,c,f,o.nrows,o.ncols,h,p,d,w,is(),l.alpha,l.gamma,l.limType,t,s)}static fromJSON(e){const{__type:t,mX:s,sX:l,nrows:o,ncols:a,className:c,Nfc:f,Nfr:u,f0c:d,f0r:v,hash:h,alpha:m,gamma:_,limType:b,fileName:p,center:w,scale:A}=e;return new nn(c,s,l,o,a,f,u,d,v,h,m,_,b,w,A,p)}static getDistance(e,t,s){const l=vu(e,t,s),o=l.nrows,a=l.ncols,c=ke.zeros(o);for(let f=0;f<a;f++){const u=l.getcolref(f+1);for(let d=0;d<o;d++)c.v[d]+=u[d]**2}return c}}function Jt(n,e,t=1){const s=Math.round((e-n+1)/t),l=Array(s);for(let o=0;o<s;o++)l[o]=n+o*t;return l}function mu(n,e){let t,s,l,o=[];if(e.length>0){const a=n.values.nrows,c=n.objindices,f=a-e.length;t=Array(f),s=Array(f),l=Array(f);let u=0;for(let d=0;d<a;d++)e.includes(d)||(t[u]=c[d],s[u]=n.classes[d],l[u]=n.objlabels[d],(o.length===0||!o.includes(s[u]))&&o.push(s[u]),u=u+1)}else t=n.objindices,l=n.objlabels,s=n.classes,o=n.classNames;return[t,l,s,o]}function is(){const n=new Date;return`${n.getFullYear()}${(n.getMonth()+1).toString().padStart(2,"0")}${n.getDate().toString().padStart(2,"0")}${n.getHours().toString().padStart(2,"0")}${n.getMinutes().toString().padStart(2,"0")}${n.getSeconds().toString().padStart(2,"0")}${n.getMilliseconds().toString().padStart(3,"0")}`}function dl(n,e,t,s,l=!1){const[o,a]=mu(t,s),c=l&&e.prep&&e.prep.ml&&e.prep.ml.length>0?ul(n,t.values,t.nresp,e.prep,!1,!0):t.values,f=iu(n,e,c,t.nresp,s);return f.hash=is(),f.objindices=o,f.objlabels=a,f.varlabels=e.varlabels,t.nresp>0?f.Yref=s&&s.length>0?t.values.subset(o.map(u=>u+1),Ue.seq(1,t.nresp)):t.values.subset(null,Ue.seq(1,t.nresp)):f.Yref=null,f}function gu(n,e="."){return Array.isArray(n)&&n.length>0?e==="."?n.map(t=>Number.parseFloat(t.trim())):n.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(n.trim()):Number.parseFloat(n.trim().replace(e,"."))}function On(n){return n.some(e=>Number.isNaN(e))}function sn(n){return n.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function ba(n){let e=n.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function _a(n,e,t,s,l,o,a,c=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let u=ba(n);if(u.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");u=u.filter(j=>j.replaceAll(e,"").trim().length>0);const d=u[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let v=0,h;const m=t!=="no";(m||m===void 0&&On(firstRow))&&(h=d,v=1);const _=u.length-v;if(_<1)throw new Error("Data file should contain at least 1 row with values.");c===-1&&(c=_);let b,p,w,A=Array(_);s?(b=m?sn(h[0]):"",w=Array(_),p=1):(b="",w=[],p=0);let y,k=[],N;l?(y=m?sn(h[p]):"",N=Array(_),p=p+1):(y="",N=[]);const T=d.length-p;if(T<1)throw new Error("Data file should contain at least 1 column with values.");const P=Ee.zeros(T,_);for(let j=v;j<_+v;j++){const O=j-v;A[O]=O;let ee=u[j].split(e);if(s&&(w[O]=ee[0],ee.shift()),l){const J=ee[0];N[O]=J,ee.shift(),(k.length===0||k.indexOf(J)<0)&&k.push(J)}const Z=f==="."?ee.map((J,H)=>Number.parseFloat(J.trim())):ee.map((J,H)=>Number.parseFloat(J.trim().replace(f,".")));if(Z.some(J=>Number.isNaN(J)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(Z.length!=T)throw new Error("Wrong number of values in row #"+j);P.v.set(new Float64Array(Z),(j-v)*T)}if(!s||w.length!==_){w=Array(_);for(let j=0;j<_;j++)w[j]="O"+(j+1)}w=w.map(j=>sn(j)),N=N.map(j=>sn(j)),k=k.map(j=>sn(j));let L,F=Array(T),E=Array(T);if(h&&h.length===T+p){L=h.map(j=>sn(j)).slice(p);for(let j=0;j<T;j++)F[j]=j>=c?j-c:j,E[j]=j>=c?j-c+1:j+1}else{L=Array(T);for(let j=0;j<T;j++)F[j]=j>=c?j-c:j,L[j]=j>=c?"V"+(j-c+1):"Y"+(j+1),E[j]=j>=c?j-c+1:j+1}let S;if(t==="values"){if(S=f==="."?L.map((j,O)=>O<c?O:Number.parseFloat(j.trim())):L.map((j,O)=>O<c?O:Number.parseFloat(j.trim().replace(f,"."))),S.some(j=>Number.isNaN(j)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else S=E;Array.isArray(S)||(S=[]),o||(o=""),a||(a=""),o=S.length>0&&o.length>0?o:"Variables",a=S.length>0&&a.length>0?a:"";const R=o+(a.length>0?", "+a:""),D=S[1]<S[0];return{values:P.t(),nresp:c,header:t,hasLabels:s,hasClassNames:l,labelsVarname:b,classLabelsVarname:y,objlabels:w,objindices:A,varlabels:L,varvalues:S,varindices:F,varrev:D,classes:N,classNames:k,sep:e,dec:f,varvaluesName:o,varvaluesUnits:a,varAxisTitle:R}}function pu(n){if(On(n[0].slice(2)))return!0;const e=n[0].length,t=[];for(let s=2;s<e;s++){let l=[];for(let u=1;u<n.length;u++)l.push(n[u][s]);const o=n[0][s],a=rn(l),c=ls(l),f=Math.abs((o-a)/c);t.push(f)}return t.every(s=>s>5)}function bu(n){const t=n[0].split(","),s=n[1].split(","),l=t.length,o=s.length,a=";",c=n[0].split(a),f=n[1].split(a),u=c.length,d=f.length;let v,h;if(l>1&&o>1&&l===o&&l>u)h=",",v=l;else if(u>1&&d>1&&u===d)h=a,v=u;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",v]}function _u(n,e=0){const t=ba(n),s=t.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,o,a]=bu(t),c=Math.min(a,5),f=Math.min(s,5);let u=t[0].split(l).length,d=t.slice(0,f).map(F=>F.split(l).slice(0,c));d=d.map(F=>F.map(E=>sn(E)));const v=d.map(F=>gu(F.slice(),o));for(let F=1;F<f;F++)if(On(v[F].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const h=pu(v);let m=0;const _=h?1:0,b=_+1,p=d[_][0],w=d[b][0],A=v[_][0],y=v[b][0],k=v[_][1],N=v[b][1];let T=!1,P=!1;if(Number.isNaN(A)&&Number.isNaN(y)&&p!==w?(T=!0,m=m+1):Number.isNaN(k)&&Number.isNaN(N)&&p!==w&&(T=!0,P=!0,m=m+2),!P){const F=T?1:0,E=v[_][F],S=v[b][F];P=On([E,S]),m=m+P}let L="no";if(h){m>0?d[0].slice(m+e):d[e];const F=m>0?v[0].slice(m+e):v[e];L=On(F)?"labels":"values"}return[l,T,P,L,u]}function wu(n){const e=n.values.t(),t=n.sep,s=n.dec;let l=null;n.header!=="no"&&(l=n.header==="values"?n.nresp&&n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp)):n.varvalues.slice():n.varlabels.slice()),l&&n.hasClassNames&&(l=[n.classLabelsVarname,...l]),l&&n.hasLabels&&(l=[n.labelsVarname,...l]);const o=n.classes&&n.classes.length===e.ncols,a=n.objlabels&&n.objlabels.length===e.ncols;let c=l?l.join(t):"";for(let f=0;f<e.ncols;f++){let u=e.getcolref(f+1).join(t);s!=="."&&(u=u.replace(".",s)),o&&(u=n.classes[f]+n.sep+u),a&&(u=n.objlabels[f]+n.sep+u),c=c+`
`+u}return c=c+`
`,s!=="."&&(c=c.replace(/\./g,s)),c}function yu(n,e){const t=wu(n),s=new Blob([t],{type:"text/csv"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download",`${e}.csv`),o.click()}function Bn(n,e){return qt(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:We(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof nn?e.asJSON():e}function vl(n,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return su(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Re(e.v);if(e.__type==="NIMCA")return nn.fromJSON(e);if(e.__type==="NIMCARes")return null;const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function hl(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),l=String(n.getHours()).padStart(2,"0"),o=String(n.getMinutes()).padStart(2,"0"),a=String(n.getSeconds()).padStart(2,"0");return`${e}${t}${s}${l}${o}${a}`}function wa(n){return Array.from({length:8},(e,t)=>n>>7-t&1).reverse()}function cs(n,e,t){let s="";for(let l=0;l<e;l++){const o=n.getUint8(t++);if(o===0)break;s+=String.fromCharCode(o)}return s}function xu(n){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],t=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],l=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let o=0;const a=n.getUint8(o);o+=1;const c=n.getUint8(o);if(o+=1,c===77)throw new Error("SPC file has old format which is not supported.");const f=c===75,u=n.getUint8(o);o+=1;const d=n.getInt8(o);o+=1;const v=n.getUint32(o,f);o+=4;const h=n.getFloat64(o,f);o+=8;const m=n.getFloat64(o,f);o+=8;const _=n.getUint32(o,f);o+=4;const b=n.getUint8(o);o+=1;const p=n.getUint8(o);o+=1;const w=n.getUint8(o);o+=1;const A=n.getUint8(o);o+=1;const y=n.getUint32(o,f);o+=4;const k=cs(n,9,o);o+=9;const N=cs(n,9,o);o+=9;const T=n.getUint16(o,f);o+=2;const P=Array.from({length:8},()=>{const X=n.getFloat32(o,f);return o+=4,X}),L=cs(n,130,o);o+=130;const F=cs(n,30,o);o+=30;const E=n.getUint32(o,f);o+=4;const[S,R,D,Y,j,O,ee,Z]=wa(a),J=b===255?t[31]:t[b],H=b===255?e[31]:e[b],z=p<=26?s[p]:p>=128&&p<=131?l[p]:"Unknown";return{ftflgsv:a,ftflgs:{TSPREC:S,TCGRAM:R,TMULTI:D,TRANDM:Y,TORDRD:j,TALABS:O,TXYXYS:ee,TXVALS:Z},fexper:u,fexp:d,fnpts:v,ffirst:h,flast:m,fnsub:_,fxtype:b,fytype:p,fztype:w,fpost:A,fdate:y,fres:k,fsource:N,fpeakpt:T,fspare:P,fcmnt:L,fcatxt:F,flogoff:E,xaxisName:J,xaxisUnit:H,yaxisName:z}}function ku(n,e){const t=wa(n.getUint8(e));e+=1;const s=n.getInt8(e);e+=1;const l=n.getUint16(e,!0);e+=2;const o=n.getFloat32(e,!0);e+=4;const a=n.getFloat32(e,!0);e+=4;const c=n.getFloat32(e,!0);e+=4;const f=n.getInt32(e,!0);e+=4;const u=n.getInt32(e,!0);e+=4;const d=n.getFloat32(e,!0);return e+=4,{flags:t,exp:s,index:l,time:o,next:a,noise:c,nPoints:f,nScans:u,wAxis:d}}async function ya(n){if(n.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${n.name}).`);const t=n.name.slice(0,-4),s=await n.arrayBuffer(),l=new DataView(s);let o=0;const a=xu(l);o+=512;const c=a.fnpts;if(c<2)throw new Error(`Error reading SPC file (${n.name}).`);let f=new Array(c);if(a.ftflgs.TXVALS)for(let v=0;v<c;v++){const h=l.getFloat32(o,!0);o=o+4,f[v]=h}else{(a.flast-a.ffirst)/(c-1);for(let v=0;v<c;v++)f[v]=a.ffirst+v*a.flast}const u=new Float64Array(c*a.fnsub);for(let v=0;v<a.fnsub;v++){ku(l,o),o=o+32;for(let h=0;h<c;h++){const m=l.getFloat32(o,!0);o=o+4,u[v*c+h]=m}}const d=[];return a.fnsub>1?Jt(1,a.fnsub).forEach(h=>{d.push(t+"_"+h)}):d.push(t),{hdr:a,xvalues:f,yvalues:u,objlabels:d}}async function Eu(n){if(!(n instanceof FileList||Array.isArray(n)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=n.length,t=[];let s=[],l=[];const o=await ya(n[0]),a=o.xvalues.length;if(t.push(o.yvalues),s=s.concat(o.objlabels),l.push(o.hdr.fnsub),e>1)for(let _=1;_<e;_++){const b=await ya(n[_]);if(b.xvalues.length!==a)throw new Error("Number of spectral values in SPC files is different.");t.push(b.yvalues),s=s.concat(b.objlabels),l.push(b.hdr.fnsub)}const c=l.reduce((_,b)=>_+b,0),f=new Float64Array(c*a);let u=0;for(let _=0;_<t.length;_++)f.set(t[_].slice(),u),u+=l[_]*a;const d=new Ee(f,a,c),v=Jt(0,a-1),h=Jt(0,c-1),m=o.xvalues.map(_=>_.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:h,varlabels:m,varvalues:o.xvalues,varindices:v,varev:o.xvalues[1]<o.xvalues[0],sep:",",dec:".",varvaluesName:o.hdr.xaxisName,varvaluesUnits:o.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}function us(n,e,t){if(!Array.isArray(n))return!1;if(n.length===0)return!0;for(let s=0;s<n.length;s++){const l=n[s];if(l<e||l>t)return!1}return!0}function Su(n,e=1){if(!n.classNames||n.classNames.length===0)return n;const t=n.classNames.length-e,s=n.values.ncols,l=n.values.nrows;let o=t*l;const a=Ee.zeros(l,s+t);a.v.set(n.values.v,o);for(let d=0;d<t;d++){o=d*l;const v=n.classNames[d];for(let h=0;h<l;h++)a.v[o+h]=n.classes[h]===v?1:-1}const c=[...n.classNames,...n.varlabels],f=[...Jt(1,t),...n.varvalues],u=[...Jt(0,t-1),...n.varindices];return{values:a,nresp:t,varlabels:c,varvalues:f,varindices:u,header:n.header,hasLabels:n.hasLabels,hasClassNames:n.hasClassNames,labelsVarname:n.labelsVarname,classLabelsVarname:n.classLabelsVarname,objlabels:n.objlabels,objindices:n.objindices,varrev:n.varrev,classes:n.classes,classNames:n.classNames,sep:n.sep,dec:n.dec,varvaluesName:n.varvaluesName,varvaluesUnits:n.varvaluesUnits,varAxisTitle:n.varAxisTitle}}var Au=U('<button tabindex="0" class="button svelte-1to1iow"> </button>');function tt(n,e){let t=I(e,"text",3,"button");var s=Au();s.__click=function(...o){e.onclick?.apply(this,o)};var l=W(s);ae(()=>Se(l,t())),C(n,s)}lt(["click"]);var Cu=U('<button tabindex="0"></button>');function ln(n,e){I(e,"disable",3,!1);var t=Cu();t.__click=function(...s){e.onclick?.apply(this,s)},ae(()=>{V(t,"title",e.title),V(t,"aria-label",e.title),V(t,"alt",e.title),ct(t,1,`button ${e.className??""}`,"svelte-qbt64")}),C(n,t)}lt(["click"]);function ar(n,e){let t=I(e,"title",3,"Reset");ln(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function Nu(n,e){let t=I(e,"title",3,"Undo");ln(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function Pu(n,e){let t=I(e,"title",3,"Download");ln(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-download"})}function Tu(n,e){let t=I(e,"title",3,"Add");ln(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-add"})}function xa(n,e){let t=I(e,"title",3,"Settings");ln(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-settings"})}function ju(n,e){let t=I(e,"title",3,"Move up");ln(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-up"})}function Lu(n,e){let t=I(e,"title",3,"Move down");ln(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-down"})}function pt(n){const e={};for(const t of Object.keys(n))e[t]=n[t].default;return e}var Ru=U('<span class="label svelte-1bhp5bp"> </span>'),Mu=U("<div><!> <!></div>");function ue(n,e){let t=I(e,"label",3,null),s=I(e,"name",3,""),l=I(e,"status",3,""),o=I(e,"colors",3,""),a=I(e,"labelWidth",3,12);var c=Mu(),f=W(c);{var u=v=>{var h=Ru(),m=W(h);ae(()=>{ot(h,`flex-basis:${a()??""}ch;`),Se(m,t())}),C(v,h)};B(f,v=>{t()&&v(u)})}var d=M(f,2);Er(d,()=>e.children??yt),ae(()=>{ct(c,1,`control-element ${s()??""} ${l()??""}`,"svelte-1bhp5bp"),ot(c,o())}),C(n,c)}var Fu=U('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function on(n,e){ge(e,!0);let t=I(e,"min",7,0),s=I(e,"max",3,100),l=I(e,"value",31,()=>Fe(t())),o=I(e,"decNum",3,1),a=I(e,"step",19,()=>+((s()-t())/100).toFixed(4)),c=I(e,"onchange",3,null);me(()=>{l()<t()&&(l(t()),c()&&c()(l())),l()>s()&&(l(s()),c()&&c()(l())),t()>s()&&t(s())});let f=te(void 0),u=te(void 0),d=te(!1);const v=E=>{const S=t()+E*(s()-t());return+(Math.round(S/a())*a()).toFixed(4)},h=E=>{const S=r(f).getBoundingClientRect(),R=r(u).getBoundingClientRect(),D=S.x,Y=R.x+R.width;return(E.clientX-D)/(Y-D)},m=E=>{const S=h(E);S<0||S>1||q(d,S*100>r(y)-5&&S*100<r(y)+5,!0)},_=E=>{q(d,!1)},b=E=>{q(d,!1);const S=h(E);S<0||S>1||(l(v(S)),c()&&c()(l()))},p=E=>{let S=l()+a()*E.deltaY*.5;S<t()&&(S=t()),S>s()&&(S=s()),l(+(Math.round(S/a())*a()).toFixed(4)),E.preventDefault(),c()&&c()(l())},w=E=>{if(!r(d))return;const S=h(E);S<0||S>1||(l(v(S)),c()&&c()(l()))},A=E=>{if(E.key==="ArrowLeft"){l(l()-a()<t()?t():l()-a()),c()&&c()(l());return}if(E.key==="ArrowRight"){l(l()+a()>s()?s():l()+a()),c()&&c()(l());return}},y=g(()=>t()===s()?100:(l()-t())/(s()-t())*100);var k=Fu();k.__keydown=A,k.__mousemove=w,k.__mousedown=m,k.__mouseup=b,k.__touchmove=w,k.__touchstart=m,k.__touchend=b;var N=W(k);let T;var P=W(N);let L;var F=W(P);en(N,E=>q(f,E),()=>r(f)),en(k,E=>q(u,E),()=>r(u)),ae(E=>{V(k,"aria-valuenow",l()),V(k,"aria-valuemin",t()),V(k,"aria-valuemax",s()),T=ct(N,1,"range-slider svelte-7wycr",null,T,{"range-slider_right":r(y)<50}),ot(N,`width:${r(y)??""}%`),L=ct(P,1,"range-value svelte-7wycr",null,L,{"range-value_right":r(y)<50}),Se(F,E)},[()=>l().toFixed(o())]),Zr("mousewheel",k,p),Zr("mouseleave",k,_),Zr("touchcancel",k,_),C(n,k),pe()}lt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var qu=U('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function Zt(n,e){ge(e,!0);let t=I(e,"min",3,0),s=I(e,"max",3,10),l=I(e,"value",31,()=>Fe(t())),o=I(e,"step",3,1);l()<t()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(t())),l()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(s())),t()>s()&&console.error("The min and max values must be distinct.");let a=te(void 0),c=te(void 0),f=te(!1);const u=g(()=>t()===s()?0:(l()-t())/(s()-t()+o())),d=g(()=>o()/(s()-t()+o())),v=g(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${r(d)*100}%, var(--bg-color-light2, #e8e8e8) ${r(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*r(d)}%)`:"background: #f0f0f0"),h=E=>{if(E<0||E>1)return l();let S=l();return Math.round(r(d)/E),E<r(u)&&r(u)>0&&(S=l()-o()*Math.ceil((r(u)-E)/r(d))),E>r(u)+r(d)&&r(u)+r(d)<1&&(S=l()+o()*Math.ceil((E-(r(u)+r(d)))/r(d))),S<t()&&(S=t()),S>s()&&(S=s()),S},m=E=>{const S=r(c).getBoundingClientRect(),R=S.x,D=S.x+S.width;return(E.clientX-R)/(D-R)},_=E=>{const S=m(E);S<0||S>1||q(f,S>r(u)&&S<r(d)+r(u),!0)},b=E=>{q(f,!1)},p=E=>{q(f,!1);const S=m(E);if(S<0||S>1)return;const R=h(S);l()!==R&&l(R)},w=E=>{let S=l()+Math.round(E.deltaY*.5)*o();S<t()&&(S=t()),S>s()&&(S=s()),l(S),E.preventDefault()},A=E=>{if(!r(f))return;const S=m(E);if(S<0||S>1)return;const R=h(S);R!=l()&&l(R)},y=E=>{if(E.key==="ArrowLeft"){l(l()-o()<t()?t():l()-o());return}if(E.key==="ArrowRight"){l(l()+o()>s()?s():l()+o());return}};var k=qu();k.__keydown=y,k.__mousemove=A,k.__mousedown=_,k.__mouseup=p,k.__touchmove=A,k.__touchstart=_,k.__touchend=p;var N=W(k);let T;var P=W(N);let L;var F=W(P);en(N,E=>q(a,E),()=>r(a)),en(k,E=>q(c,E),()=>r(c)),ae(E=>{V(k,"aria-valuenow",l()),V(k,"aria-valuemin",t()),V(k,"aria-valuemax",s()),ot(k,r(v)),T=ct(N,1,"range-slider svelte-1lbks0y",null,T,{"range-slider_left":r(d)<.1&&r(u)<.5,"range-slider_right":r(d)<.1&&r(u)>=.5}),ot(N,`width: max(2px, ${r(d)*100}%);left:${r(u)*100}%;`),L=ct(P,1,"range-value svelte-1lbks0y",null,L,{"range-value_right":r(d)<.1&&r(u)>.5,"range-value_left":r(d)<.1&&r(u)<=.5}),Se(F,E)},[()=>l().toFixed(0)]),Zr("mousewheel",k,w),Zr("mouseleave",k,b),Zr("touchcancel",k,b),C(n,k),pe()}lt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var zu=U('<button tabindex="-1"><!></button>'),Iu=U('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function Ye(n,e){ge(e,!0);let t=I(e,"value",31,()=>Fe(e.options[0])),s=I(e,"className",3,"");const l=f=>{if(f.key==="ArrowLeft"){const u=e.options.findIndex(d=>d===t());u>0&&t(e.options[u-1]);return}if(f.key==="ArrowRight"){const u=e.options.findIndex(d=>d===t());u<e.options.length-1&&t(e.options[u+1]);return}};var o=Iu(),a=K(o);a.__keydown=l,Ve(a,20,()=>e.options,f=>f,(f,u)=>{var d=zu();d.__click=()=>t(u);let v;var h=W(d);gt(h,()=>u),ae(m=>v=ct(d,1,`option option_${m??""}`,"svelte-bifhtc",v,{selected:u==t()}),[()=>u.toString().replace(".","_")]),C(f,d)});var c=M(a,2);ae(()=>ct(a,1,`selector ${s()??""}`,"svelte-bifhtc")),Xs(c,t),C(n,o),pe()}lt(["keydown","click"]);function Qt(n,e){ge(e,!0);let t=I(e,"options",19,()=>["no","yes"]),s=I(e,"value",15,!1),l=te(!0);const o=g(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());me(()=>q(l,s()?t()[1]:t()[0],!0)),me(()=>s(r(l)===t()[1]));var a=de(),c=K(a);{var f=u=>{Ye(u,{get options(){return r(o)},get value(){return r(l)},set value(d){q(l,d,!0)}})};B(c,u=>{r(o)&&u(f)})}C(n,a),pe()}var Vu=U('<input type="file" multiple class="svelte-xoa0sf"/>'),Ou=U('<input type="file" class="svelte-xoa0sf"/>'),Bu=U('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function fs(n,e){ge(e,!0);let t=I(e,"file",15),s=I(e,"message",3,"Select CSV file with dataset"),l=I(e,"acceptType",3,".csv"),o=I(e,"multiple",3,!1),a=te(void 0);function c(y){r(a)&&r(a).files.length>0?t(r(a).files.length===1?r(a).files[0]:r(a).files):t(null)}function f(y){(y.type==="click"||y.type==="keydown"&&(y.code==="Space"||y.code==="Enter"))&&r(a).click()}function u(y){r(a).value=null,t(null)}var d=Bu(),v=K(d);v.__keydown=f,v.__click=f;let h;var m=W(v),_=M(m);{var b=y=>{var k=Vu();k.__change=c,en(k,N=>q(a,N),()=>r(a)),ae(()=>V(k,"accept",l())),C(y,k)},p=y=>{var k=Ou();k.__change=c,en(k,N=>q(a,N),()=>r(a)),ae(()=>V(k,"accept",l())),C(y,k)};B(_,y=>{o()?y(b):y(p,!1)})}var w=M(v,2);{var A=y=>{ar(y,{onclick:u})};B(w,y=>{t()&&y(A)})}ae(()=>{h=ct(v,1,"file-selector svelte-xoa0sf",null,h,{selected:t()}),Se(m,`${(t()?t().length>1?`Selected ${t().length} files`:t().name:s())??""} `)}),C(n,d),pe()}lt(["keydown","click","change"]);var Du=U('<div class="error-message svelte-11e14eb"> </div>'),Yu=U('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function ka(n,e){ge(e,!0);let t=I(e,"value",15,""),s=I(e,"className",3,""),l=I(e,"placeholder",3,""),o=I(e,"maxLength",3,25),a=I(e,"validator",3,null),c=te("");function f(){a()&&q(c,a()(t()),!0)}var u=Yu();let d;var v=W(u);v.__input=f;var h=M(v,2);{var m=_=>{var b=Du(),p=W(b);ae(()=>Se(p,r(c))),C(_,b)};B(h,_=>{r(c)&&r(c).length>0&&_(m)})}ae(()=>{d=ct(u,1,`textinput ${s()??""}`,"svelte-11e14eb",d,{error:r(c)&&r(c).length>0}),V(v,"placeholder",l()),V(v,"maxlength",o())}),Xs(v,t),C(n,u),pe()}lt(["input"]);var Wu=U('<div class="spinner svelte-wlgijz"></div>');function ml(n){var e=Wu();C(n,e)}var Hu=U('<button tabindex="-1"><!></button>'),Uu=U('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-142p4sy"></div> <input class="svelte-142p4sy"/>',1);function Ea(n,e){ge(e,!0);let t=I(e,"options",19,()=>["p","l","b","h","qq"]),s=I(e,"value",31,()=>Fe(t()[0]));const l=v=>{if(v.key==="ArrowLeft"){const h=t().findIndex(m=>m===s());h>0&&s(t()[h-1]);return}if(v.key==="ArrowRight"){const h=t().findIndex(m=>m===s());h<t().length-1&&s(t()[h+1]);return}},o='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var f=Uu(),u=K(f);u.__keydown=l,Ve(u,20,t,v=>v,(v,h)=>{var m=Hu();m.__click=()=>s(h);let _;var b=W(m);gt(b,()=>o+a[h]+"</svg>"),ae(()=>{_=ct(m,1,"option svelte-142p4sy",null,_,{selected:h==s()}),V(m,"title",c[h])}),C(v,m)});var d=M(u,2);Xs(d,s),C(n,f),pe()}lt(["keydown","click"]),lt(["keydown","click"]);var Xu=U("<h2> </h2>"),Gu=U("<!> <!>",1),Ku=U('<div class="widget"><!></div>');function Ju(n,e){ge(e,!0);let t=I(e,"title",3,""),s=I(e,"value",15),l=I(e,"labelWidth",3,13);function o(u){const d={};for(const v of Object.keys(u))d[v]=u[v].default;return d}me(()=>{!s()&&e.options&&s(o(e.options))});var a=Ku(),c=W(a);{var f=u=>{var d=Gu(),v=K(d);{var h=_=>{ue(_,{children:(b,p)=>{var w=Xu(),A=W(w);ae(()=>Se(A,t())),C(b,w)},$$slots:{default:!0}})};B(v,_=>{t()&&_(h)})}var m=M(v,2);Ve(m,17,()=>Object.keys(e.options),De,(_,b)=>{const p=g(()=>e.options[r(b)]);var w=de(),A=K(w);{var y=k=>{ue(k,{get name(){return r(p).name},get label(){return r(p).label},get labelWidth(){return l()},children:(N,T)=>{var P=de(),L=K(P);qn(L,()=>r(p).el,(F,E)=>{E(F,Fr(()=>r(p).props,{get value(){return s()[r(b)]},set value(S){s(s()[r(b)]=S,!0)}}))}),C(N,P)},$$slots:{default:!0}})};B(A,k=>{r(p).hidden||k(y)})}C(_,w)}),C(u,d)};B(c,u=>{s()&&u(f)})}C(n,a),pe()}function Sa(n,e){const t=[],s=[];for(let o=0;o<n.length;o++)n[o]>0?t.push(o):s.push(o);const l={};return l[e[0]]=t,l[e[1]]=s,l}function Zu(n,e,t,s,l){const o=n.length,a=e.classNames,c=s===0?1:0;let f=0,u=0,d=0,v=0;const h=e.params[a[s]][e.limType],m=h.m[l],_=h.s[l],b=new Array(o),p=new Array(o),w=e.alpha/100,A=s==0?N=>In(N,m,_):N=>1-In(N,m,_);if(!t){for(let N=0;N<o;N++)p[N]=A(n[N]),b[N]=p[N]>w;return[f,v,u,d,b,p]}const y=t[a[s]],k=t[a[c]];for(let N of y)p[N]=A(n[N]),b[N]=p[N]>w,f+=b[N],v+=1-b[N];for(let N of k)p[N]=A(n[N]),b[N]=p[N]>w,d+=1-b[N],u+=b[N];return[f,v,u,d,b,p]}function Qu(n,e,t,s,l){const o=n.length,a=e.threshold,c=e.classNames,f=s===0?1:0;let u=0,d=0,v=0,h=0;const m=new Array(o),_=new Array(o),b=s==0?A=>A>a:A=>A<=a;if(!t){for(let A=0;A<o;A++)m[A]=b(n[A]);return[u,h,d,v,m,_]}const p=t[c[s]],w=t[c[f]];for(let A of p)m[A]=b(n[A]),_[A]=m[A],u+=m[A],h+=1-m[A];for(let A of w)m[A]=b(n[A]),_[A]=m[A],v+=1-m[A],d+=m[A];return[u,h,d,v,m,_]}function ds(n,e,t){const s=n.ncomp,l=n.nrows,o=e.classNames,a=o.length,c={},f=e.rule==="hard"?Qu:Zu,u=t!==null,d=new Array(s).fill(0),v=new Array(s).fill(0),h=new Array(s).fill(0),m=new Array(s).fill(0);for(let _=0;_<a;_++){const b=new Array(s),p=new Array(s),w=new Array(s),A=new Array(s),y=new Array(s),k=u?t[o[_]].length:0;for(let T=0;T<s;T++){const P=Nt(n,"Yp",T+1,1),[L,F,E,S,R,D]=f(P,e,t,_,T);u&&(p[T]=L>0?L/(L+F):0,w[T]=S>0?S/(S+E):0,A[T]=Math.sqrt(p[T]*w[T]),y[T]=L>0&&S>0?(L+S)/(L+S+E+F):0,d[T]+=p[T]*k/l,v[T]+=w[T]*k/l,h[T]+=A[T]*k/l,m[T]+=y[T]*k/l),b[T]={TP:L,FN:F,FP:E,TN:S,d:R,p:D,yp:new ke(P)}}const N={sensitivity:p,specificity:w,efficiency:A,accuracy:y};c[o[_]]={res:b,stat:N}}return c.total={stat:{sensitivity:d,specificity:v,efficiency:h,accuracy:m}},{class:["dares"],objlabels:n.objlabels,threshold:e.threshold,rule:e.rule,alpha:e.alpha,crit:e.crit,params:e.params,limType:e.limType,ind:t,nclasses:a,classNames:o,nrows:l,ncomp:s,v:c}}function vs(n,e,t,s){let l=n.pls.outliers,o=n.pls.exclvars;(!l||!Array.isArray(l))&&(l=[]),(!o||!Array.isArray(o))&&(o=[]);const a=e.sep,c=e.values.nrows,f=l.length,u=c-f,d=n.pls.ncomp,v=n.da.classNames,h=n.da.ind!==null,m=Array(d).fill(""),_=Array(d).fill(0).map((F,E)=>"LV"+(E+1));let b="";if(b+=["Number of LVs:",d,...m].join(a)+`
`,b+=["Optinal number of LVs:",s,...m].join(a)+`
`,b+=["Center:",n.pls.center,...m].join(a)+`
`,b+=["Scale:",n.pls.scale,...m].join(a)+`
`,l.length>0&&(b+=["Removed outliers:",l.length,...m].join(a)+`
`),o.length>0&&(b+=["Excluded variables:",o.length,...m].join(a)+`
`),b+=`
`,b+=["Classification rule:",n.da.rule,...m].join(a)+`
`,n.da.rule==="soft"){b+=["Alpha (%):",n.da.alpha,...m].join(a)+`
`,b+=["Limits:",n.da.limType,...m].join(a)+`
`;for(let F of v){const E=n.da.crit[F];b+=`
`,b+=["Class:"+a+F,...m].join(a)+`
`,b+=["Mean:",E[0],...m].join(a)+`
`,b+=["Deviation:",E[1],...m].join(a)+`
`,b+=["Critical value:",E[2],...m].join(a)+`
`}}else b+=["Threshold:",n.da.threshold,...m].join(a)+`
`;if(b+=`
`,h){b+=["Variances:","",...m].join(a)+`
`,b+=["",..._].join(a)+a+`
`,b+=["xexpvar:",...n.pls.stat.xexpvar].join(a)+a+`
`,b+=["xcumexpvar",...n.pls.stat.xcumexpvar].join(a)+a+`
`,b+=["yexpvar:",...n.pls.stat.yexpvar].join(a)+a+`
`,b+=["ycumexpvar:",...n.pls.stat.ycumexpvar].join(a)+a+`
`,b+=["RMSE:",...n.pls.stat.rmse.v].join(a)+a+`
`,b+=`
`;for(let E of v){const S=n.da.v[E].stat;b+=["Class:"+a+E,...m].join(a)+`
`,b+=["FoMs:",..._].join(a)+a+`
`,b+=["Senstivitiy",...S.sensitivity].join(a)+a+`
`,b+=["Specificity",...S.specificity].join(a)+a+`
`,b+=["Efficiency",...S.efficiency].join(a)+a+`
`,b+=["Accuracy",...S.accuracy].join(a)+a+`
`,b+=`
`}const F=n.da.v.total.stat;b+=["Total:"+a,...m].join(a)+`
`,b+=["FoMs:",..._].join(a)+a+`
`,b+=["Senstivitiy",...F.sensitivity].join(a)+a+`
`,b+=["Specificity",...F.specificity].join(a)+a+`
`,b+=["Efficiency",...F.efficiency].join(a)+a+`
`,b+=["Accuracy",...F.accuracy].join(a)+a+`
`,b+=`
`}let p=0;const w=n.pls.objlabels,A=h?n.pls.Yref.getcolref(1):new Array(u).fill("-"),y=n.da.v[v[0]].res[s-1],k=n.da.v[v[1]].res[s-1];if(n.da.rule==="soft"){b+=["object","class","y (reference)","y (predicted)","decision ("+v[0]+")","p-score ("+v[0]+")","decision ("+v[1]+")","p-score ("+v[1]+")"].join(a)+a+`
`;for(let E=0;E<c;E++){if(f>0&&l.includes(E)){b+=[w[E],...Array(7).fill("-")].join(a)+a+`
`;continue}b+=[w[E],e.classes[E],A[p],y.yp.v[E],y.d[E]?"in":"out",y.p[E],k.d[E]?"in":"out",k.p[E]].join(a)+a+`
`,p=p+1}}else{b+=["object","y (predicted)","decision"].join(a)+a+`
`;for(let E=0;E<c;E++){if(f>0&&l.includes(E)){b+=[w[E],...Array(4).fill("-")].join(a)+a+`
`;continue}b+=[w[E],y.yp.v[E],y.d[E]?v[0]:v[1]].join(a)+a+`
`,p=p+1}}b+=`
`,e.dec!=="."&&(b=b.replace(/\./g,e.dec)),b=["Data filename:",e.fileName,...m].join(e.sep)+`
`+b;let N=["PLS1-DA results ("+t+")","https://mda.tools/pls1da/",...m].join(e.sep)+`

`;const T=new Blob([N+b],{type:"text/csv"}),P=window.URL.createObjectURL(T),L=document.createElement("a");L.setAttribute("href",P),L.setAttribute("download",`pls1da-results-${t}.csv`),L.click()}function Aa(n,e){n.pls.prep=e;const t=new Blob([JSON.stringify(n,Bn)],{type:"application/json"}),s=window.URL.createObjectURL(t),l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download","pls1da-model.json"),l.click()}var $u=U('<span class="item svelte-igakmm"> </span>'),ef=U('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function gl(n,e){ge(e,!0);var t=de(),s=K(t);{var l=o=>{ue(o,{children:(a,c)=>{var f=ef(),u=K(f),d=M(W(u),2);Ve(d,17,()=>e.outliers,De,(_,b)=>{var p=$u(),w=W(p);ae(()=>Se(w,e.dataset.objlabels[r(b)])),C(_,p)});var v=M(u,2);{var h=_=>{Nu(_,{get onclick(){return e.undoOutliers}})};B(v,_=>{e.outliers.length>1&&_(h)})}var m=M(v,2);ar(m,{get onclick(){return e.resetOutliers}}),C(a,f)},$$slots:{default:!0}})};B(s,o=>{e.dataset&&e.outliers&&e.outliers.length>0&&o(l)})}C(n,t),pe()}var tf=U('<p class="exclvars svelte-12e65an"><span style="color:#a0a0a0;">Excluded</span> <span style="color:#504040;"> </span> <span style="color:#a0a0a0;">variables</span></p> <!>',1);function rf(n,e){ge(e,!0);var t=de(),s=K(t);{var l=o=>{ue(o,{children:(a,c)=>{var f=tf(),u=K(f),d=M(W(u),2),v=W(d),h=M(u,2);ar(h,{get onclick(){return e.resetExclvars}}),ae(()=>Se(v,e.exclvars.length)),C(a,f)},$$slots:{default:!0}})};B(s,o=>{e.exclvars&&e.exclvars.length>0&&o(l)})}C(n,t),pe()}const nf={small:30,medium:40,large:50,xlarge:60},sf={small:5,medium:8,large:12,xlarge:15},lf={small:6,medium:10,large:14,xlarge:18},pl={small:4,medium:6,large:8,xlarge:10},of={small:12,medium:15,large:19,xlarge:21},bl={small:11,medium:15,large:17,xlarge:19},kn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},En=["●","◼","▲","▼","⬥","＋","✳","✕"],af=.8,Ca=.5,cf={small:5,medium:8,large:12,xlarge:15},uf=12,bt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Na(n){let e=Array(n);for(let t=0;t<n;t++)e[t]=t+1;return e}function Pa(n,e){return Array.isArray(n)&&n.length===e&&!n.some(t=>t===void 0)&&!n.some(t=>isNaN(t))}function Ta(n,e){if(n!=null&&(Array.isArray(n)&&(n=Re(n)),!(!We(n)||n.length<1)))return n.apply(t=>yl((t-e[1])*e[0]+e[2])).v}function rt(n,e){return Ta(n,e.coords)}function Dn(n,e){return Ta(n,e.objects)}function ja(n,e){if(n!=null&&(Array.isArray(n)&&(n=Re(n)),!(!We(n)||n.length<1)))return n.apply(t=>(t-e[2])/e[0]+e[1]).v}function La(n,e){return ja(n,e.coords)}function Ra(n,e){return ja(n,e.objects)}function _l(n){return n===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${n.toString()}</tspan>`}function an(n){if(n===Math.round(n))return n;if(Math.abs(n)>10**6)return Math.round(n);if(Math.abs(n)<10**-6)return n;let e=n.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function wl(n){if(n===void 0)return[0,void 0];if(n.length<1)return[0,void 0];if(n.length===1)return[0,[n[0].toString()]];let e=an(Math.abs(Dt(ea(n)))),t=0;if(e>=1)return e<100?[0,Array.from(n).map(o=>o.toFixed(0))]:(t=Math.ceil(an(Math.log10(e)))-2,[t,Array.from(n).map(o=>(o/Math.pow(10,t)).toFixed(0))]);let s=Math.ceil(-an(Math.log10(e)));return s<=2?[0,Array.from(n).map(l=>l.toFixed(s))]:(t=s-2,s=2,an(Math.abs(Kt(n)))<=10?[-t,Array.from(n).map(l=>(l*Math.pow(10,t)).toFixed(s))]:[-t,Array.from(n).map(l=>(l/Math.pow(10,t)).toString())])}function Et(n,e,t){return Array.isArray(n)&&(n=Re(n)),We(n)?n.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&n.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):n:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function hs(n,e,t,s){if(!n||!e||n.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=t.coords,o=s.coords;let a="";for(let c=0;c<n.length;c++){const f=yl((n.v[c]-l[1])*l[0]+l[2]),u=yl((e.v[c]-o[1])*o[0]+o[2]);a+=f+","+u+" "}return a}function Ma(n,e){return n?Array.isArray(n)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==n.length?[null,"number of tick labels and values should be the same."]:[n.map(t=>Or(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Fa(n,e){if(Array.isArray(n)&&(n=Re(n)),!We(n))return[null,"tick values must be provided as an array or as a vector."];if(n.v.some(a=>isNaN(a)))return[null,"tick values must be numeric"];const t=new Set(n.v);if(n.length!==t.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],o=n.filter(a=>a>=s&a<=l);return o.length!==n.length?[null,"some of ticks values are outside axis limits."]:[o,""]}function qa(n,e,t,s,l,o){l==null&&(l=!1),o===void 0&&(o=1e-4);const a=e[0]<e[1]?e:[e[1],e[0]];if(n)return n;if(typeof a!="object"||a[0]===void 0||a[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const c=Math.abs(a[1]-a[0])*o,f=a[1]-a[0]-2*c,u=Math.floor(Math.log10(f)),d=1/Math.pow(10,u-1),v=Math.round(f*d)/d;let h=ff(v/t);l&&(Math.abs(a[1]-a[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let m=Math.ceil((a[0]+c)/h)*h,_=Math.floor((a[1]-c)/h)*h;Math.abs(a[0]-m)<h/10&&(m=m+h),Math.abs(a[1]-_)<h/10&&(_=_-h),t=Math.ceil(an((_-m)/h))+1,n=ke.zeros(t);for(let b=0;b<t;b++)n.v[b]=m+h*b;if(Math.abs(h)<1){const b=Math.pow(10,1+Math.round(-Math.log10(h)));n=n.apply(p=>Math.round((p+Number.EPSILON)*b)/b)}return n.filter(b=>b>=a[0]&b<=a[1])}function ff(n,e){const t=Math.floor(Math.log10(n)),s=n/Math.pow(10,t);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,t)}function yl(n){return Math.round(n*10)/10}function df(n,e){return e<300.2||n<400.2?"small":e<400.2||n<700.2?"medium":e<650.2||n<850.2?"large":"xlarge"}function za(n,e){return n<400.2?"small":n<700.2?"medium":n<900.2?"large":"xlarge"}function vf(){const n=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;n[e]=t}return n}function hf(n){let e=-1,t=vf();for(let s=0;s<n.length;s++)e=t[(e^n[s])&255]^e>>>8;return e^-1}function mf(n,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const s=hf(t),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;const a=new Uint8Array(54);return a.set(n,0),a.set(o,33),a.set(t,37),a.set(l,50),a}function gf(n,e){const t=n.split(","),s=t[0],l=t[1],o=33/3*4,a=l.substring(0,o),c=l.substring(o),f=atob(a),u=new Uint8Array(f.length);for(let h=0;h<u.length;h++)u[h]=f.charCodeAt(h);const d=mf(u,e),v=btoa(String.fromCharCode(...d));return[s,",",v,c].join("")}function pf(n,e,t,s,l){if(t||(t=10),s||(s=10),l||(l=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!n||!(n instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const o=t/2.54*l,a=s/2.54*l;setTimeout(()=>{const c=n.clientHeight,f=n.clientWidth;let u=Math.max(o/f,a/c),d=1;u<1&&(d=u,u=1);const v=document.createElement("canvas"),h=v.getContext("2d");v.width=f*(d<1?d:u),v.height=c*(d<1?d:u),n.setAttribute("width",f*u),n.setAttribute("height",c*u),h.fillStyle="white",h.fillRect(0,0,v.width,v.height),h.scale(u,u);const m=new XMLSerializer().serializeToString(n),_=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(_),p=new Image;p.onload=function(){d<0&&(p.width=p.width*d,p.height=p.height*d),h.drawImage(p,0,0,v.width,v.height);const w=v.toDataURL("image/png"),A=gf(w,l),y=document.createElement("a");y.href=A,y.download=`${e}.png`,y.click()},p.src=b},20)}function bf(n,e){if(!n||!(n instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=n.clientHeight,s=n.clientWidth;n.setAttribute("width",s+"px"),n.setAttribute("height",t+"px"),n.setAttribute("viewBox",`0 0 ${s} ${t}`);const l=new Blob([n.outerHTML],{type:"image/svg+xml"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.svg`),a.click()}function _f(n,e,t,s){const l=n.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":wf(e,t,s)})]).then(()=>{n.classList.add("copied"),n.textContent="✓ done",setTimeout(()=>{n.classList.remove("copied"),n.textContent=l},500)},o=>{console.error(o),n.classList.add("error"),n.textContent="x copy",setTimeout(()=>{n.classList.remove("error"),n.textContent=l},500)}).catch(o=>console.error(o))}async function wf(n,e,t){const s=n.clientHeight,l=n.clientWidth,o=Math.max(e/l,t/s),a=document.createElement("canvas"),c=a.getContext("2d");return a.width=l*o,a.height=s*o,c.scale(o,o),n.setAttribute("width",a.width),n.setAttribute("height",a.height),await new Promise((u,d)=>{const v=new XMLSerializer().serializeToString(n),h=new Blob([v],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,_=m.createObjectURL(h),b=new Image;b.onload=function(){c.drawImage(b,0,0,a.width,a.height),m.revokeObjectURL(_),a.toBlob(function(p){p?u(p):d(new Error("Failed to create blob"))},"image/png")},b.onerror=function(p){d(p)},b.src=_})}function xl(n,e){return n>16&&(n=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][n-1]}function yf(n,e,t,s,l){let o=l.error?null:l.ticks,a=l.error?null:l.tickLabels,c=0;const f=qa(o,n,sf[t.x],!0,l.whole),u=f.length,d=Ra([pl[t.plot]],s)[0],v=ke.fill(e[0],u),h=v.add(d),m=ke.fill(e[1],u);if(a||(o?(c=0,a=o.v.map(L=>an(L).toString())):[c,a]=wl(f.v)),!a||a.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const _=[[f,v],[f,m]],b=[[Re([n[0]]),Re([e[0]])],[Re([n[1]]),Re([e[0]])]],p=[[f,h],[f,v]],w=(n[1]-n[0])*.01,A=[[null,null],[[n[1]-(c>9?1:0)*w],[v.v[u-1]]]],y=_l(c),k=a.length,N=Math.abs(n[1]>n[0]?n[1]-f.v[k-1]:n[1]-f.v[0]),T=Math.abs(n[1]-n[0]),P=Math.abs(f.v[1]-f.v[0]);if(y.length>0&&N<T*.1&&N<P*.5){const L=n[1]>n[0]?k-1:0;a[L]=" "}return{grid:_,axisLine:b,tickCoords:p,tfCoords:A,ticks:o,tickLabels:a,tickFactor:c,tfLabel:y}}function xf(n,e,t,s,l){let o=l.ticks,a=l.tickLabels,c=0;const f=qa(l.ticks,e,lf[t.y],!0,l.whole),u=f.length,d=Ra([pl[t.plot]],s)[0],v=ke.fill(n[0],u),h=v.add(d),m=ke.fill(n[1],u);if(a||(o?(c=0,a=o.v.map(P=>an(P).toString())):[c,a]=wl(f.v)),a.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const _=[[v,f],[m,f]],b=[[Re([n[0]]),Re([e[0]])],[Re([n[0]]),Re([e[1]])]],p=[[v,f],[h,f]],w=[[[],[]],[[h.v[u-1]+(Math.abs(c)>9?3:2)*d],[e[1]]]],A=_l(c),y=a.length,k=Math.abs(e[1]>e[0]?e[1]-f.v[y-1]:e[1]-f.v[0]),N=Math.abs(e[1]-e[0]),T=Math.abs(f.v[1]-f.v[0]);if(A.length>0&&k<N*.1&&k<T*.5){const P=e[1]>e[0]?y-1:0;a[P]=" "}return{grid:_,axisLine:b,tickCoords:p,tfCoords:w,ticks:o,tickLabels:a,tickFactor:c,tfLabel:A}}function kf(n){if(!n.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=We(n.breaks)?n.breaks.v:n.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!n.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(n.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(n.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=n.colmap;let s,l;if(n.labels?(s=n.labels,l=0):[l,s]=wl(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const o=s.length===t.length;return{colmap:t,breaks:e,labels:s,isCentered:o,labelsFactor:l,fontSize:n.fontSize,labelColor:n.labelColor}}function Ef(n,e,t,s){const l=n.colmap.length,o=e*af,a=o/l,c=t[1]+(e-o)*.5,f=cf[s.y],u=t[2]+f*Ca,d=u+f*(1+Ca),v=n.isCentered?a/2:0;return{start:c,top:u,height:f,width:a,dxl:v,ltop:d}}function Vr(n,e,t){if(!n||!e||!t||typeof t!="function")return;const s=n.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;t(l),n.stopPropagation()}}function Sf(n,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(n.replace(/<(.|\n)*?>/g,"")).width}function Af(n,e){const t="Arial",s=e/8,l=e*1.5,o=Array(n.length),a=Array(n.length);let c=0,f=0,u=0;for(let v=0;v<n.length;v++){const h=Sf("  "+n[v].label+"  ",e+"px "+t);u=h>u?h:u;const m=e*n[v].labelHeight+2*s;o[v]=m,a[v]=c,c=c+m,f=f+m}const d=l+2*s+u;return[a,o,l,s,f,d]}function Cf(n,e,t,s,l){const[o,a,c,f,u,d]=Af(n.items,s*n.fontSize),v=n.position.includes("left")?e[0]+l:n.position.includes("right")?e[1]-d-l:(e[1]+e[0]-d)*.5,h=n.position.includes("top")?t[1]+l:n.position.includes("bottom")?t[0]-u-l:(t[1]+t[0]-u)*.5;return{lgl:v,lgt:h,lgw:d,lgh:u,ely:o,elh:a,elw:c,elp:f}}function Or(n){if(!n||n.length<1)return n;function e(o){return'<tspan font-size="0.75em" dy="-0.5em">'+o+'</tspan><tspan dy="0.4em"> </tspan>'}function t(o){return'<tspan font-size="0.75em" dy="0.5em">'+o+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<n.length;){const o=n[s];if((o==="^"||o==="_")&&s<n.length-1){const a=o==="^";if(s++,n[s]==="("){let c=s+1;for(;c<n.length&&n[c]!==")";)c++;const f=n.slice(s+1,c);l+=a?e(f):t(f),s=c+1}else if(n[s]==="-"||n[s]==="–"){const c=n.slice(s,s+2);l+=a?e(c):t(c),s=s+2}else l+=a?e(n[s]):t(n[s]),s++}else l+=o,s++}return l}var Nf=Ce('<line vector-effect="non-scaling-stroke"></line>'),Pf=Ce("<g></g>");function kl(n,e){ge(e,!0);let t=I(e,"lineCoords",19,()=>[]),s=I(e,"lineColor",19,()=>bt.DARKGRAY),l=I(e,"lineType",3,1),o=I(e,"lineWidth",3,1),a=I(e,"className",3,"");const c=Ct("axes");let f=g(()=>rt(t()[0][0],c.tX())),u=g(()=>rt(t()[1][0],c.tX())),d=g(()=>rt(t()[0][1],c.tY())),v=g(()=>rt(t()[1][1],c.tY())),h=g(()=>`stroke:${s()};stroke-width: ${o()}px;stroke-dasharray:${kn[c.scales().plot][l()-1]}`);var m=de(),_=K(m);{var b=p=>{var w=Pf();Ve(w,21,()=>r(f),De,(A,y,k)=>{var N=Nf();ae(()=>{V(N,"x1",r(f)[k]),V(N,"x2",r(u)[k]),V(N,"y1",r(d)[k]),V(N,"y2",r(v)[k]),ot(N,r(h))}),C(A,N)}),ae(()=>ct(w,0,Lc(a()))),C(p,w)};B(_,p=>{r(f)&&r(d)&&r(u)&&p(b)})}C(n,m),pe()}var Tf=Ce('<text text-anchor="middle"><!></text>'),jf=Ce("<text><!></text>"),Lf=Ce("<text><!></text>"),Rf=Ce('<g class="tick-labels"><!></g>');function Ia(n,e){ge(e,!0);let t=I(e,"pos",3,1),s=I(e,"las",3,1),l=g(()=>["middle","middle","start","middle","end"][t()]),o=g(()=>`fill:${e.textColor};`);const a=Ct("axes");let c=g(()=>rt(e.tickCoords[1][0],a.tX())),f=g(()=>rt(e.tickCoords[1][1],a.tY())),u=g(()=>bl[a.scales().plot]),d=g(()=>[0,0,r(u),0,-r(u)][t()]),v=g(()=>[0,r(u),0,-r(u),0][t()]);var h=Rf(),m=W(h);{var _=p=>{var w=de(),A=K(w);Ve(A,17,()=>r(c),De,(y,k,N)=>{var T=Tf();V(T,"data-id",N),V(T,"dx",0);var P=W(T);gt(P,()=>e.tickLabels[N],!0),ae(()=>{V(T,"x",r(c)[N]),V(T,"y",r(f)[N]),V(T,"dy",r(d)*1.25),V(T,"transform",`rotate(-90, ${r(c)[N]}, ${r(f)[N]})`)}),C(y,T)}),C(p,w)},b=p=>{var w=de(),A=K(w);{var y=N=>{var T=de(),P=K(T);Ve(P,17,()=>r(c),De,(L,F,E)=>{var S=jf();V(S,"data-id",E),V(S,"dy",0),V(S,"text-anchor","end");var R=W(S);gt(R,()=>e.tickLabels[E],!0),ae(()=>{V(S,"x",r(c)[E]),V(S,"y",r(f)[E]),V(S,"dx",-r(v)/2),V(S,"transform",`rotate(-90, ${r(c)[E]}, ${r(f)[E]})`)}),C(L,S)}),C(N,T)},k=N=>{var T=de(),P=K(T);Ve(P,17,()=>r(c),De,(L,F,E)=>{var S=Lf();V(S,"data-id",E);var R=W(S);gt(R,()=>e.tickLabels[E],!0),ae(()=>{V(S,"x",r(c)[E]),V(S,"y",r(f)[E]),V(S,"dx",r(d)),V(S,"dy",r(v)),V(S,"text-anchor",r(l))}),C(L,S)}),C(N,T)};B(A,N=>{s()===2&&t()===1?N(y):N(k,!1)},!0)}C(p,w)};B(m,p=>{s()===2&&t()===4?p(_):p(b,!1)})}ae(()=>ot(h,r(o))),C(n,h),pe()}const Mf=(n,e=yt,t=yt)=>{const s=g(()=>e().colmap.length);var l=Bf(),o=K(l);Ve(o,17,()=>e().colmap,De,(d,v,h)=>{const m=g(()=>t().start+h*t().width);var _=If(),b=K(_),p=M(b);V(p,"dy",0);var w=W(p);gt(w,()=>e().labels[h],!0),ae(()=>{V(b,"x",r(m)),V(b,"y",t().top),V(b,"width",t().width),V(b,"height",t().height),V(b,"fill",r(v)),V(p,"x",r(m)),V(p,"y",t().ltop),V(p,"dx",t().dxl),V(p,"fill",e().labelColor),V(p,"font-size",e().fontSize+"em")}),C(d,_)});var a=M(o);{var c=d=>{const v=g(()=>t().start+r(s)*t().width);var h=Vf();V(h,"dx",0),V(h,"dy",0);var m=W(h);gt(m,()=>e().labels[r(s)],!0),ae(()=>{V(h,"x",r(v)),V(h,"y",t().ltop),V(h,"fill",e().labelColor),V(h,"font-size",`${e().fontSize??""}em`)}),C(d,h)};B(a,d=>{e().isCentered||d(c)})}var f=M(a);{var u=d=>{const v=g(()=>t().start+r(s)*t().width);var h=Of(),m=W(h);gt(m,()=>_l(e().labelsFactor),!0),ae(()=>{V(h,"x",r(v)),V(h,"y",t().ltop),V(h,"fill",e().labelColor),V(h,"font-size",`${e().fontSize??""}em`)}),C(d,h)};B(f,d=>{e().labelsFactor!==0&&d(u)})}C(n,l)};var Ff=Ce('<text fill="crimson" text-anchor="middle"> </text>'),qf=Ce('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),zf=Ce("<!><!><!><!><!>",1),If=Ce('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Vf=Ce('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Of=Ce('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Bf=Ce("<!><!><!>",1),Df=Ce("<line></line>"),Yf=Ce('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Wf=Ce('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Hf=Ce('<svg><rect height="100%" width="100%"></rect><!></svg>'),Uf=Ce('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Xf=Ce('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Gf=Ce('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Kf=Ce('<g class="plot-labels"><!><!><!></g>'),Jf=Ce('<g class="axis x-axis"><!></g>'),Zf=Ce('<g class="axis y-axis"><!></g>'),Qf=Ce('<rect fill="transparent" id="axes-box"></rect>'),$f=Ce('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),ed=Ce('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),td=Ce('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),rd=Ce('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),nd=U('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),sd=U('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),ld=U(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function ms(n,e){ge(e,!0);const t=(Ne,Ze=yt,Je=yt)=>{var Tt=de(),zt=K(Tt);{var ir=St=>{var st=de(),Qe=K(st);{var jt=vt=>{var at=Ff(),hr=W(at);ae(()=>{V(at,"x",r(Ae)[0]-10),V(at,"y",r(qe)),V(at,"transform",`rotate(-90, ${r(Ae)[0]-10}, ${r(qe)})`),Se(hr,Je().error)}),C(vt,at)},wt=vt=>{var at=qf(),hr=W(at);ae(()=>{V(at,"x",r(xe)),V(at,"y",r(Pe)[0]),Se(hr,Je().error)}),C(vt,at)};B(Qe,vt=>{Je().pos===4?vt(jt):vt(wt,!1)})}C(St,st)},Dr=St=>{var st=zf(),Qe=K(st);{var jt=Me=>{kl(Me,{get lineCoords(){return Ze().grid},get lineColor(){return bt.MIDDLEGRAY},lineType:3})};B(Qe,Me=>{Je().showGrid&&Me(jt)})}var wt=M(Qe);kl(wt,{get lineCoords(){return Ze().axisLine},get lineColor(){return bt.DARKGRAY},lineType:1});var vt=M(wt);kl(vt,{get lineCoords(){return Ze().tickCoords},get lineColor(){return bt.DARKGRAY},lineType:1});var at=M(vt);{var hr=Me=>{Ia(Me,{get las(){return Je().las},get pos(){return Je().pos},get tickCoords(){return Ze().tickCoords},get tickLabels(){return Ze().tickLabels},get tickColor(){return bt.DARKGRAY},get hideLast(){return Je().hideLast}})};B(at,Me=>{Ze().tickCoords.length===2&&Ze().tickLabels.length===Ze().tickCoords[1][0].length&&Me(hr)})}var Hn=M(at);{var et=Me=>{{let Lt=g(()=>[Ze().tfLabel]);Ia(Me,{get pos(){return Je().pos},get tickCoords(){return Ze().tfCoords},get tickLabels(){return r(Lt)},get textColor(){return bt.DARKGRAY}})}};B(Hn,Me=>{Ze().tickFactor!==0&&Me(et)})}C(St,st)};B(zt,St=>{Je().error?St(ir):St(Dr,!1)})}C(Ne,Tt)},s=(Ne,Ze=yt,Je=yt)=>{const Tt=g(()=>Je().elw+2*Je().elp),zt=g(()=>Je().elp),ir=g(()=>Je().elh),Dr=g(()=>Je().ely);var St=Hf(),st=W(St),Qe=M(st);Ve(Qe,17,()=>Ze().items,De,(jt,wt,vt)=>{var at=Wf();V(at,"x",0);var hr=W(at);{var Hn=un=>{var At=Df();ae(()=>{V(At,"x1",r(zt)),V(At,"x2",r(Tt)-r(zt)),V(At,"y1",r(ir)[vt]/2),V(At,"y2",r(ir)[vt]/2),V(At,"stroke",r(wt).line.lineColor),V(At,"stroke-width",r(wt).line.lineWidth),V(At,"stroke-dasharray",r(Z)[r(wt).line.lineType-1])}),C(un,At)};B(hr,un=>{r(wt).line&&un(Hn)})}var et=M(hr);{var Me=un=>{var At=Yf(),b1=W(At);ae(()=>{V(At,"x",r(Tt)/2),V(At,"y",r(ir)[vt]/2),V(At,"fill",r(wt).point.faceColor),V(At,"stroke-width",r(wt).point.lineWidth),V(At,"stroke",r(wt).point.lineColor),V(At,"font-size",`${r(wt).point.markerSize??""}em`),Se(b1,En[r(wt).point.marker-1])}),C(un,At)};B(et,un=>{r(wt).point&&un(Me)})}var Lt=M(et),p1=W(Lt);gt(p1,()=>r(wt).label,!0),ae(()=>{V(at,"y",r(Dr)[vt]),V(at,"width",Je().lgw),V(at,"height",r(ir)[vt]),V(Lt,"x",r(Tt)+r(zt)),V(Lt,"y",r(ir)[vt]/2),V(Lt,"fill",bt.LEGEND),V(Lt,"font-size",`${Ze().fontSize??""}em`)}),C(jt,at)}),ae(()=>{V(St,"x",Je().lgl),V(St,"y",Je().lgt),V(St,"height",Je().lgh),V(St,"width",Je().lgw),V(st,"fill",Ze().faceColor),V(st,"stroke",Ze().lineColor),V(st,"stroke-width",Ze().lineWidth)}),C(Ne,St)};let l=I(e,"limX",19,()=>[0,1]),o=I(e,"limY",19,()=>[0,1]),a=I(e,"margins",19,()=>[1,1.1,.55,.6]),c=I(e,"downloadLinks",3,"none"),f=I(e,"fileName",3,"plot"),u=I(e,"pngWidth",3,8),d=I(e,"pngHeight",3,8),v=I(e,"pngRes",3,300),h=I(e,"clipboardWidth",3,1200),m=I(e,"clipboardHeight",3,800),_=I(e,"onclick",3,null),b=I(e,"onmousemove",3,null),p=I(e,"onmousedown",3,null),w=I(e,"onmouseup",3,null);function A(Ne,Ze){if(Ze&&Ne.target.id=="axes-box"){const Je=La([Ne.offsetX-r(H)],r(be))[0],Tt=La([Ne.offsetY-r(z)],r(ye))[0];Ze(Je,Tt)}}function y(Ne){Ne.preventDefault(),A(Ne,p())}function k(Ne){Ne.preventDefault(),A(Ne,w())}function N(Ne){Ne.preventDefault(),A(Ne,b())}function T(Ne){Ne.preventDefault(),A(Ne,_())}async function P(Ne){_f(Ne.target,r(S),h(),m())}function L(){bf(r(S),f())}function F(){pf(r(S),f(),u(),d(),v())}const E="plottingArea"+Math.round(Math.random()*1e4);let S=te(0),R=te(0),D=te(0);const Y=g(()=>({plot:df(r(R),r(D)),x:za(r(R)),y:za(r(D))})),j=g(()=>a().map(Ne=>Ne*nf[r(Y).plot])),O=g(()=>of[r(Y).plot]),ee=g(()=>pl[r(Y).plot]),Z=g(()=>kn[r(Y).plot]),J=g(()=>r(re).show&&r(re).label!==""?r(O)*1.5:0),H=g(()=>r(fe).show&&r(fe).label!==""?r(O)*1.5:0),z=g(()=>e.title&&e.title!==""?r(O)*1.5:0),X=g(()=>r(R)>r(H)?r(R)-r(H):0),$=g(()=>r(D)>r(J)+r(z)?r(D)-r(J)-r(z):0),le=g(()=>r($)-r(j)[0]-r(j)[2]),we=g(()=>r(X)-r(j)[1]-r(j)[3]),ie=g(()=>Pa(l(),2)&&Pa(o(),2)&&r(X)>r(j)[1]+r(j)[3]&&r($)>r(j)[0]+r(j)[2]),be=g(()=>r(ie)?{coords:[r(we)/(l()[1]-l()[0]),l()[0],r(j)[1]],objects:[r(we)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),ye=g(()=>r(ie)?{coords:[-r(le)/(o()[1]-o()[0]),o()[1],r(j)[2]],objects:[r(le)/(o()[1]-o()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),qe=g(()=>r(le)*.5+r(z)+r(j)[2]),xe=g(()=>r(we)*.5+r(H)+r(j)[1]),Ae=g(()=>r(ie)?rt(l(),r(be)):[0,1]),Pe=g(()=>r(ie)?rt(o(),r(ye)):[1,0]),Te=g(()=>Or(e.title)),se=g(()=>r(Te)?r(Te).length===e.title.left?1:1.4:0);let oe=te(Fe({show:!1})),re=te(Fe({show:!1,error:""})),fe=te(Fe({show:!1,error:""})),ve=te(Fe({show:!1,colmap:null,breaks:null})),ce=te(Fe({show:!1,items:null,position:null}));const je=g(()=>r(ie)&&r(ve)&&r(ve).show?kf(r(ve)):null),Oe=g(()=>r(ie)&&r(re).show?yf(l(),o(),r(Y),r(ye),r(re)):null),ze=g(()=>r(ie)&&r(fe).show?xf(l(),o(),r(Y),r(be),r(fe)):null),G=g(()=>r(ie)&&r(je)?Ef(r(je),r(we),r(j),r(Y)):null),Q=g(()=>r(ie)&&r(ce)&&r(ce).show&&r(Ae)?Cf(r(ce),r(Ae),r(Pe),r(O),r(ee)):null);Di("axes",{setBox:Ne=>q(oe,Ne,!0),setXAxis:Ne=>q(re,Ne,!0),setYAxis:Ne=>q(fe,Ne,!0),setColmapLegend:Ne=>q(ve,Ne,!0),setGroupLegend:Ne=>q(ce,Ne,!0),scales:()=>r(Y),tX:()=>r(be),tY:()=>r(ye),limX:()=>l(),limY:()=>o()});var ne=ld();let _e;var he=W(ne),Le=M(W(he));{var Ie=Ne=>{var Ze=Kf(),Je=W(Ze);{var Tt=st=>{var Qe=Uf();V(Qe,"dx",0),V(Qe,"dy",0);var jt=W(Qe);gt(jt,()=>r(re).label,!0),ae(()=>{V(Qe,"x",r(xe)),V(Qe,"y",r($)+r(z))}),C(st,Qe)};B(Je,st=>{r(re).show&&r(re).label&&r(re).label!==""&&st(Tt)})}var zt=M(Je);{var ir=st=>{var Qe=Xf();V(Qe,"dx",0),V(Qe,"dy",0);var jt=W(Qe);gt(jt,()=>r(fe).label,!0),ae(()=>{V(Qe,"x",r(O)/1.1*r(fe).labelHeight),V(Qe,"y",r(qe)),V(Qe,"transform",`rotate(-90, ${r(O)*r(fe).labelHeight/1.1}, ${r(qe)})`)}),C(st,Qe)};B(zt,st=>{r(fe).show&&r(fe).label&&r(fe).label!==""&&st(ir)})}var Dr=M(zt);{var St=st=>{var Qe=Gf();V(Qe,"dx",0),V(Qe,"dy",0);var jt=W(Qe);gt(jt,()=>r(Te),!0),ae(()=>{V(Qe,"x",r(xe)),V(Qe,"y",r(O)*r(se))}),C(st,Qe)};B(Dr,st=>{r(Te)&&r(Te)!==""&&st(St)})}C(Ne,Ze)};B(Le,Ne=>{r(ie)&&Ne(Ie)})}var Be=M(Le),He=W(Be),Xe=W(He),dt=W(Xe),vr=M(He);{var Il=Ne=>{var Ze=rd(),Je=K(Ze);{var Tt=et=>{var Me=Jf(),Lt=W(Me);t(Lt,()=>r(Oe),()=>r(re)),C(et,Me)};B(Je,et=>{r(re).show&&r(Oe)&&et(Tt)})}var zt=M(Je);{var ir=et=>{var Me=Zf(),Lt=W(Me);t(Lt,()=>r(ze),()=>r(fe)),C(et,Me)};B(zt,et=>{r(fe).show&&r(ze)&&et(ir)})}var Dr=M(zt),St=W(Dr);{var st=et=>{var Me=Qf();Me.__keydown=T,Me.__click=T,Me.__mousemove=N,Me.__mousedown=y,Me.__mouseup=k,ae(()=>{V(Me,"stroke",r(oe).lineColor),V(Me,"stroke-width",`${r(oe).lineWidth??""}px`),V(Me,"x",r(Ae)[0]),V(Me,"y",r(Pe)[1]),V(Me,"width",r(Ae)[1]-r(Ae)[0]),V(Me,"height",r(Pe)[0]-r(Pe)[1])}),C(et,Me)},Qe=et=>{var Me=$f();Me.__keydown=T,Me.__click=T,Me.__mousemove=N,Me.__mousedown=y,Me.__mouseup=k,ae(()=>{V(Me,"x",r(Ae)[0]),V(Me,"y",r(Pe)[1]),V(Me,"width",r(Ae)[1]-r(Ae)[0]),V(Me,"height",r(Pe)[0]-r(Pe)[1])}),C(et,Me)};B(St,et=>{r(oe).show?et(st):et(Qe,!1)})}var jt=M(Dr),wt=W(jt);Er(wt,()=>e.children??yt);var vt=M(jt);{var at=et=>{var Me=ed(),Lt=W(Me);Mf(Lt,()=>r(je),()=>r(G)),C(et,Me)};B(vt,et=>{r(G)&&et(at)})}var hr=M(vt);{var Hn=et=>{var Me=td(),Lt=W(Me);s(Lt,()=>r(ce),()=>r(Q)),C(et,Me)};B(hr,et=>{r(Q)&&et(Hn)})}ae(()=>V(jt,"clip-path",`url(#${E})`)),C(Ne,Ze)};B(vr,Ne=>{r(ie)&&Ne(Il)})}en(he,Ne=>q(S,Ne),()=>r(S));var Pt=M(he,2);{var _t=Ne=>{var Ze=nd();C(Ne,Ze)},ut=Ne=>{var Ze=sd(),Je=W(Ze);Je.__click=L,Je.__keydown=L;var Tt=M(Je,2);Tt.__click=F,Tt.__keydown=F;var zt=M(Tt,2);zt.__click=P,zt.__keydown=P,C(Ne,Ze)};B(Pt,Ne=>{r(ie)?Ne(ut,!1):Ne(_t)})}ae(()=>{_e=ct(ne,1,`plot-container show-download-links-${c()??""}`,"svelte-1t5q9z1",_e,{"plot-error":!r(ie)}),ot(he,`font-size:${r(O)??""}px`),V(Be,"x",r(H)),V(Be,"y",r(z)),V(Be,"width",r(X)),V(Be,"height",r($)),V(Xe,"id",E),V(dt,"x",r(Ae)[0]),V(dt,"y",r(Pe)[1]),V(dt,"width",r(Ae)[1]-r(Ae)[0]),V(dt,"height",r(Pe)[0]-r(Pe)[1])}),Zo(he,"clientWidth",Ne=>q(R,Ne)),Zo(he,"clientHeight",Ne=>q(D,Ne)),C(n,ne),pe()}lt(["keydown","click","mousemove","mousedown","mouseup"]);function gs(n,e){ge(e,!0);let t=I(e,"las",3,1),s=I(e,"whole",3,!1),l=I(e,"show",3,!0),o=I(e,"showGrid",3,!1);const a=Ct("axes");me(()=>{const c=Or(e.label),f=c?c.length===e.label.length?1:1.4:0;let u,d="";e.ticks&&([u,d]=Fa(e.ticks,a.limX()));let v;!d&&e.tickLabels&&([v,d]=Ma(e.tickLabels,u)),a.setXAxis({show:l(),error:d,label:c,ticks:u,labelHeight:f,showGrid:o(),las:t(),whole:s(),tickLabels:v})}),pe()}function El(n,e){ge(e,!0);let t=I(e,"las",3,1),s=I(e,"whole",3,!1),l=I(e,"show",3,!0),o=I(e,"showGrid",3,!1);const a=Ct("axes");me(()=>{const c=Or(e.label),f=c?c.length===e.label.length?1:1.4:0;let u,d="";e.ticks&&([u,d]=Fa(e.ticks,a.limY()));let v;!d&&e.tickLabels&&([v,d]=Ma(e.tickLabels,u)),a.setYAxis({show:l(),error:d,label:c,ticks:u,labelHeight:f,showGrid:o(),las:t(),whole:s(),tickLabels:v,pos:4})}),pe()}function ps(n,e){ge(e,!0);let t=I(e,"lineWidth",3,1),s=I(e,"lineColor",3,"#606060");const l=Ct("axes");me(()=>{l.setBox({show:!0,lineWidth:t(),lineColor:s()})}),pe()}var od=Ce("<rect></rect>"),ad=Ce("<g></g>");function Yn(n,e){ge(e,!0);let t=I(e,"faceColor",19,()=>bt.PRIMARY),s=I(e,"lineColor",19,t),l=I(e,"lineWidth",3,1),o=I(e,"className",3,"series-rect");const a=g(()=>Et(e.left,"Rectangles (left)")),c=g(()=>r(a)?Et(e.top,"Rectangles (top)",r(a).length):null),f=g(()=>r(c)?typeof e.width!="object"?ke.fill(e.width,r(a).length):e.width:null),u=g(()=>r(c)?typeof e.height!="object"?ke.fill(e.height,r(a).length):e.height:null),d=Ct("axes"),v=g(()=>r(a)?rt(r(a),d.tX()):null),h=g(()=>r(c)?rt(r(c),d.tY()):null),m=g(()=>r(f)?Dn(r(f),d.tX()):null),_=g(()=>r(u)?Dn(r(u),d.tY()):null),b=g(()=>`fill:${t()};stroke:${s()};stroke-width:${l()}px;`),p=g(()=>r(v)&&r(h)&&r(m)&&r(_)&&r(m).length===r(v).length&&r(_).length===r(v).length);var w=de(),A=K(w);{var y=k=>{var N=ad();N.__click=T=>Vr(T,"rect",e.onclick),Ve(N,21,()=>e.left,De,(T,P,L)=>{var F=od();ae(()=>{V(F,"x",r(v)[L]),V(F,"y",r(h)[L]),V(F,"width",r(m)[L]),V(F,"height",r(_)[L])}),C(T,F)}),ae(()=>{ct(N,0,`series ${o()??""}`),ot(N,r(b))}),C(k,N)};B(A,k=>{r(p)&&k(y)})}C(n,w),pe()}lt(["click"]);var id=Ce("<line></line>"),cd=Ce('<g class="series series-segment"></g>');function Nr(n,e){ge(e,!0);let t=I(e,"lineColor",19,()=>bt.PRIMARY),s=I(e,"lineType",3,1),l=I(e,"lineWidth",3,1);const o=g(()=>Et(e.xStart,"Segments")),a=g(()=>r(o)?Et(e.yStart,"Segments",r(o).length):null),c=g(()=>r(a)?Et(e.xEnd,"Segments",r(o).length):null),f=g(()=>r(c)?Et(e.yEnd,"Segments",r(o).length):null),u=Ct("axes"),d=g(()=>r(o)?rt(r(o),u.tX()):null),v=g(()=>r(c)?rt(r(c),u.tX()):null),h=g(()=>r(a)?rt(r(a),u.tY()):null),m=g(()=>r(f)?rt(r(f),u.tY()):null),_=g(()=>`stroke:${t()};stroke-width: ${l()}px;stroke-dasharray:${kn[u.scales().plot][s()-1]}`),b=g(()=>r(d)&&r(v)&&r(h)&&r(m));var p=de(),w=K(p);{var A=y=>{var k=cd();k.__click=N=>Vr(N,"line",e.onclick),Ve(k,21,()=>r(d),De,(N,T,P)=>{var L=id();ae(()=>{V(L,"x1",r(d)[P]),V(L,"x2",r(v)[P]),V(L,"y1",r(h)[P]),V(L,"y2",r(m)[P])}),C(N,L)}),ae(()=>ot(k,r(_))),C(y,k)};B(w,y=>{r(b)&&y(A)})}C(n,p),pe()}lt(["click"]);var ud=Ce("<text><!></text>"),fd=Ce("<text><!></text>"),dd=Ce("<text><!></text>"),vd=Ce('<g class="series series-textlabels"><!></g>');function bs(n,e){ge(e,!0);let t=I(e,"pos",3,0),s=I(e,"faceColor",19,()=>bt.PRIMARY_TEXT),l=I(e,"lineColor",3,"transparent"),o=I(e,"lineWidth",3,0),a=I(e,"textSize",3,1),c=I(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],u=g(()=>Et(e.xValues,"TextLabels")),d=g(()=>r(u)?Et(e.yValues,"TextLabels",r(u).length):null),v=g(()=>r(d)?Array.isArray(e.labels)&&e.labels.length!==r(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=g(()=>r(v)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),m=Ct("axes"),_=g(()=>r(u)&&r(h)!==null?rt(r(u),m.tX()):null),b=g(()=>r(d)&&r(_)?rt(r(d),m.tY()):null),p=g(()=>bl[m.scales().plot]),w=g(()=>[0,0,-r(p),0,r(p),r(p)]),A=g(()=>[0,r(p),0,-r(p),0,r(p)]),y=g(()=>`fill:${s()};stroke-width:${o()}px;stroke:${l()};font-size:${a()}em;`),k=g(()=>r(_)&&r(b)&&r(h)!==null&&r(v)&&r(_).length===r(b).length);var N=de(),T=K(N);{var P=L=>{var F=vd();F.__click=D=>Vr(D,"text",e.onclick);var E=W(F);{var S=D=>{var Y=de(),j=K(Y);Ve(j,17,()=>r(_),De,(O,ee,Z)=>{var J=ud();V(J,"data-id",Z);var H=W(J);gt(H,()=>e.labels,!0),ae(()=>{V(J,"x",r(_)[Z]),V(J,"y",r(b)[Z]),V(J,"dx",r(w)[t()]),V(J,"dy",r(A)[t()]),V(J,"transform",c()!==void 0?`rotate(${c()}, ${r(_)[Z]+r(w)[t()]}, ${r(b)[Z]+r(A)[t()]})`:""),V(J,"text-anchor",f[t()[Z]])}),C(O,J)}),C(D,Y)},R=D=>{var Y=de(),j=K(Y);{var O=Z=>{var J=de(),H=K(J);Ve(H,17,()=>r(_),De,(z,X,$)=>{var le=fd();V(le,"data-id",$);var we=W(le);gt(we,()=>e.labels[$],!0),ae(()=>{V(le,"x",r(_)[$]),V(le,"y",r(b)[$]),V(le,"dx",r(w)[t()[$]]),V(le,"dy",r(A)[t()[$]]),V(le,"transform",c()!==void 0?`rotate(${c()}, ${r(_)[$]+r(w)[t()]}, ${r(b)[$]+r(A)[t()]})`:""),V(le,"text-anchor",f[t()[$]])}),C(z,le)}),C(Z,J)},ee=Z=>{var J=de(),H=K(J);Ve(H,17,()=>r(_),De,(z,X,$)=>{var le=dd();V(le,"data-id",$);var we=W(le);gt(we,()=>e.labels[$],!0),ae(()=>{V(le,"x",r(_)[$]),V(le,"y",r(b)[$]),V(le,"dx",r(w)[t()]),V(le,"dy",r(A)[t()]),V(le,"transform",c()!==void 0?`rotate(${c()}, ${r(_)[$]+r(w)[t()]}, ${r(b)[$]+r(A)[t()]})`:""),V(le,"text-anchor",f[t()])}),C(z,le)}),C(Z,J)};B(j,Z=>{Array.isArray(t())||ArrayBuffer.isView(t())?Z(O):Z(ee,!1)},!0)}C(D,Y)};B(E,D=>{typeof e.labels=="string"?D(S):D(R,!1)})}ae(()=>ot(F,r(y))),C(L,F)};B(T,L=>{r(k)&&L(P)})}C(n,N),pe()}lt(["click"]);var hd=Ce('<g class="series series-area"><polygon></polygon></g>');function Va(n,e){ge(e,!0);let t=I(e,"lineColor",19,()=>bt.PRIMARY),s=I(e,"lineType",3,1),l=I(e,"lineWidth",3,1),o=I(e,"faceColor",3,"transparent"),a=I(e,"opacity",3,1);const c=g(()=>Et(e.xValues,"Area")),f=g(()=>r(c)?Et(e.yValues,"Area",r(c).length):null),u=Ct("axes"),d=g(()=>r(c)&&r(f)?hs(r(c),r(f),u.tX(),u.tY()):null),v=g(()=>r(f)?rt(r(f).subset(1),u.tY()):null),h=g(()=>r(c)?rt(r(c).subset(1),u.tX()):null),m=g(()=>r(d)&&r(h)&&r(v)?r(h)+","+r(v)+" "+r(d)+" "+r(h)+","+r(v):null),_=g(()=>`opacity:${a()};fill:${o()};stroke:${t()};stroke-width: ${l()}px;stroke-dasharray:${kn[u.scales().plot][s()-1]}`);var b=de(),p=K(b);{var w=A=>{var y=hd();y.__click=N=>Vr(N,"polygon",e.onclick);var k=W(y);ae(()=>{ot(y,r(_)),V(k,"points",r(m))}),C(A,y)};B(p,A=>{r(m)&&A(w)})}C(n,b),pe()}lt(["click"]);var md=Ce("<text> </text>"),gd=Ce('<g text-anchor="middle"></g>');function Oa(n,e){ge(e,!0);let t=I(e,"marker",3,1),s=I(e,"faceColor",3,"transparent"),l=I(e,"lineColor",19,()=>bt.PRIMARY),o=I(e,"lineWidth",3,1),a=I(e,"markerSize",3,1);const c=g(()=>typeof t()!="number"||t()<1||t()>En.length?(console.error('Points: parameter "marker" must be a number from 1 to '+En.length+"."),null):En[t()-1]),f=g(()=>Et(e.xValues,"Points")),u=g(()=>r(f)?Et(e.yValues,"Points",r(f).length):null),d=Ct("axes"),v=g(()=>r(f)?rt(r(f),d.tX()):null),h=g(()=>r(v)&&r(u)?rt(r(u),d.tY()):null),m=g(()=>["＋","✳","✕"].includes(r(c))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${a()}em;`:`fill:${s()};stroke-width:${o()}px;stroke:${l()}; font-size:${a()}em;`),_=g(()=>["◼","⬥","＋","✳","✕"].includes(r(c))?"series-points2":"series-points1"),b=g(()=>r(v)&&r(h)&&r(v).length===r(h).length);var p=de(),w=K(p);{var A=y=>{var k=gd();k.__click=N=>Vr(N,"text",e.onclick),Ve(k,21,()=>r(v),De,(N,T,P)=>{var L=md(),F=W(L);ae(()=>{V(L,"x",r(v)[P]),V(L,"y",r(h)[P]),Se(F,r(c))}),C(N,L)}),ae(()=>{ct(k,0,`series series-points ${r(_)??""}`),ot(k,r(m))}),C(y,k)};B(w,y=>{r(b)&&y(A)})}C(n,p),pe()}lt(["click"]);var pd=Ce('<g class="series series-line"><polyline class="line"></polyline></g>');function Br(n,e){ge(e,!0);let t=I(e,"lineColor",19,()=>bt.PRIMARY),s=I(e,"lineType",3,1),l=I(e,"lineWidth",3,1);const o=g(()=>Et(e.xValues,"Lines")),a=g(()=>r(o)?Et(e.yValues,"Lines",r(o).length):null),c=Ct("axes"),f=g(()=>r(o)&&r(a)?hs(r(o),r(a),c.tX(),c.tY()):null),u=g(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${kn[c.scales().plot][s()-1]}`);var d=de(),v=K(d);{var h=m=>{var _=pd();_.__click=p=>Vr(p,"polyline",e.onclick);var b=W(_);ae(()=>{ot(_,r(u)),V(b,"points",r(f))}),C(m,_)};B(v,m=>{r(f)&&m(h)})}C(n,d),pe()}lt(["click"]);var bd=Ce('<polyline class="line"></polyline>'),_d=Ce('<g class="series series-multiline"></g>');function Ba(n,e){ge(e,!0);let t=I(e,"lineColor",19,()=>bt.PRIMARY),s=I(e,"lineType",3,1),l=I(e,"lineWidth",3,1);const o=g(()=>Et(e.xValues,"Multilines")),a=g(()=>r(o)?qt(e.yValues)?(r(o).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),c=Ct("axes"),f=g(()=>{if(!r(o)||!r(a))return null;const m=new Array(r(a).ncols);for(let _=0;_<m.length;_++)m[_]=hs(r(o),r(a).getcolumn(_+1),c.tX(),c.tY());return m}),u=g(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${kn[c.scales().plot][s()-1]}`);var d=de(),v=K(d);{var h=m=>{var _=_d();_.__click=b=>Vr(b,"polyline",e.onclick),Ve(_,21,()=>r(f),De,(b,p)=>{var w=bd();ae(()=>V(w,"points",r(p))),C(b,w)}),ae(()=>ot(_,r(u))),C(m,_)};B(v,m=>{r(f)&&r(f).length>0&&m(h)})}C(n,d),pe()}lt(["click"]);function wd(...n){const e=n.length,t=n.map(a=>a.length);let s=tl(t),l=Array(e),o=1;for(let a=0;a<e;a++){const c=We(n[a])?n[a]:Re(n[a]),f=c.length;s=s/f,l[a]=c.subset(Ue.seq(1,f).repeach(o).rep(s)),o=o*f}return l}var yd=Ce("<rect></rect>"),xd=Ce('<g title="heatmap-group"><!></g>'),kd=Ce('<g class="heatmap" style="stroke:0;stroke-width:0px;"></g>');function Ed(n,e){ge(e,!0);let t=I(e,"colmap",3,null),s=g(()=>qt(e.values)&&e.values.nrows>0&&e.values.ncols>0?e.values:null),l=g(()=>r(s)?e.breaks&&Array.isArray(e.breaks)?e.breaks:e.breaks&&We(e.breaks)?e.breaks.v:$s(r(s).v,uf).v:null),o=g(()=>t()?Array.isArray(t())?t().length!==e.breaks.length-1?(console.error("Heatmap: number of color values in colormap does not match number of intervals defined by breaks."),null):t():(console.error('Heatmap: parameter "colmap" must be array with colors.'),null):xl(r(l).length-1)),a=g(()=>r(s)?Na(r(s).ncols):null),c=g(()=>r(s)?Na(r(s).nrows):null),f=g(()=>r(a)&&r(c)?wd(r(c),r(a)):null),u=g(()=>{if(!r(f)||!r(l)||!r(o))return null;const[y,k]=r(f),N=k.length,T=r(l).length,P=Array(T).fill().map(()=>[]),L=Array(T).fill().map(()=>[]),F=r(l).slice(),E=F[1]-F[0];F[0]=F[0]-.1*E,F[T-1]=F[T-1]+.1*E;for(let S=0;S<N;S++){const R=r(s).v[S];for(let D=0;D<T-1;D++)if(R>F[D]&&R<=F[D+1]){P[D].push(k.v[S]-.5),L[D].push(r(s).nrows-y.v[S]+1.5);break}}return{rl:P,rt:L}});const d=Ct("axes");let v=g(()=>r(u)?r(u).rl.map(y=>y.length>0?rt(y,d.tX()):[]):null),h=g(()=>r(u)?r(u).rt.map(y=>y.length>0?rt(y,d.tY()):[]):null),m=g(()=>Dn([1],d.tX())),_=g(()=>Dn([1],d.tY())),b=g(()=>r(v)&&r(h)&&r(v).length===r(h).length);var p=de(),w=K(p);{var A=y=>{var k=kd();Ve(k,21,()=>r(o),De,(N,T,P)=>{var L=xd(),F=W(L);{var E=S=>{var R=de(),D=K(R);Ve(D,17,()=>r(v)[P],De,(Y,j,O,ee)=>{var Z=yd();ae(()=>{V(Z,"x",r(v)[P][O]),V(Z,"y",r(h)[P][O]),V(Z,"width",r(m)),V(Z,"height",r(_))}),C(Y,Z)}),C(S,R)};B(F,S=>{r(v)[P].length>0&&S(E)})}ae(()=>ot(L,`fill:${r(T)??""};`)),C(N,L)}),C(y,k)};B(w,y=>{r(b)&&y(A)})}C(n,p),pe()}function _s(n,e){ge(e,!0);let t=I(e,"show",3,!0),s=I(e,"position",3,"topleft"),l=I(e,"lineColor",19,()=>bt.LEGEND),o=I(e,"lineWidth",3,1),a=I(e,"faceColor",3,"#fff"),c=I(e,"fontSize",3,.85);function f(v){return typeof v!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(v)?v:(console.error('Legend: wrong value of "position" property'),null)}function u(v){if(!v||!Array.isArray(v)||v.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let h=0;h<v.length;h++){const m=v[h];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const _=Or(m.label),b=_.length===m.label?1:1.4;m.label=_,m.labelHeight=b,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(h+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:bt.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=En.length||console.error('Legend: parameter "marker" for legend item '+(h+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.markerSize=m.point.markerSize?m.point.markerSize:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:bt.PRIMARY)}return v}const d=Ct("axes");me(()=>{const v=u(e.items),h=f(s());d.setGroupLegend(v&&h?{show:t(),position:s(),items:e.items,lineColor:l(),faceColor:a(),lineWidth:o(),fontSize:c()}:{show:!1,position:null,items:null})}),pe()}function Sl(n,e){ge(e,!0);let t=I(e,"show",3,!0),s=I(e,"labels",3,null),l=I(e,"labelColor",19,()=>bt.CLEGEND_LABELS),o=I(e,"fontSize",3,.85);const a=Ct("axes");me(()=>{a.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:l(),fontSize:o()})}),pe()}const Sd=n=>n;function Da(n,{delay:e=0,duration:t=400,easing:s=Sd}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:o=>`opacity: ${o*l}`}}var Ad=U('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function Al(n,e){ge(e,!0);let t=I(e,"isDark",3,!1);function s(v){v.key==="Escape"&&e.closeModal()}var l=Ad();Zr("keydown",Ms,s);let o;var a=W(l),c=W(a),f=W(c);f.__click=function(...v){e.closeModal?.apply(this,v)};var u=M(c,2),d=W(u);Er(d,()=>e.children),ae(()=>o=ct(l,1,"drop svelte-oie633",null,o,{isdark:t()})),Xo(7,l,()=>Da),C(n,l),pe()}lt(["click"]);const Cd=[1,1.1,.45,.4],cn={cal:1,pv:2,test:2,new:2},ft={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},Cl={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Ya={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},Nl="#808090",Wa="#a0a0a0",Ha="#909090",Wn="#909090",Nd=8,Pd=8,Td=8,jd=600;function Ld(n,e,t){const s=e.length,l=new Array(n.length),o=e[1]-e[0];for(let a=0;a<n.length;a++)for(let c=0;c<s-1;c++){const f=n[a]>=e[c],u=c===s-2?n[a]<e[c+1]+o:n[a]<e[c+1];if(f&&u){l[a]=t[c];break}}return l}function ws(n,e=Ya){return n?n.map(t=>({id:t,label:t,point:{marker:cn[t],faceColor:e[t],lineColor:ft[t],markerSize:cn[t]===1?.85:.65,lineWidth:1.5}})):null}function Ua(n,e,t){if(!n)return[0,1];if(e==="p")return Ar(n);if(e==="h")return n.length<20?[.5,n.length+.5]:Ar(n,.05);const s=Ar(n,0),l=Math.abs((s[1]-s[0])*.1);return t?[s[1]+l,s[0]-l]:[s[0]-l,s[1]+l]}var Rd=U("<!> <!> <!> <!>",1);function Pr(n,e){let t=I(e,"whole",3,!1),s=tn(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);ms(n,Fr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return Cd},get pngWidth(){return Pd},get pngHeight(){return Td},get pngRes(){return jd}},()=>s,{children:(l,o)=>{var a=Rd(),c=K(a);Er(c,()=>e.children);var f=M(c,2);gs(f,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var u=M(f,2);El(u,{showGrid:!0,get label(){return e.yLabel}});var d=M(u,2);ps(d,{}),C(l,a)},$$slots:{default:!0}}))}var Md=U("<!> <!> <!>",1),Fd=U("<!> <!> <!> <!> <!>",1),qd=U("<div><!></div>"),zd=U('<div class="wrapper svelte-1di9qjd"><div class="plot-container svelte-1di9qjd" role="tooltip"><!></div> <div class="msg-select svelte-1di9qjd">click inside the plot to see a variable label</div> <div class="plot-controls svelte-1di9qjd"><div><!></div> <!></div></div>');function Pl(n,e){ge(e,!0);let t=I(e,"outliers",19,()=>[]),s=I(e,"model_getter",3,lu),l=I(e,"res_getter",3,da),o=te("residual"),a=te(-1);const c=g(()=>e.res?Object.keys(e.res):null);let f=te(Fe(r(c)?r(c)[0]:null));function u(z){if(z.target.tagName!=="rect"){q(a,-1);return}const X=Array.from(z.target.parentNode.children).indexOf(z.target);if(X<0){q(a,-1);return}r(a)!==X&&q(a,X,!0)}const d=g(()=>{if(!e.model)return null;const z=e.model.nresp?e.model.nresp:0,X=Re(e.model.varvalues.filter((qe,xe)=>xe>=z)),$=X.length,le=(X.v[1]-X.v[0])/2,we=(X.v[$-1]-X.v[$-2])/2,ie=[X.v[0],X.v[$-1]],be=[ie[0]-le,ie[1]+we],ye=(ie[1]-ie[0])/$;return{values:X,lim:be,width:ye,hwidth:ye*.5}}),v=g(()=>r(d)?r(d).values.apply(z=>z-r(d).hwidth):null),h=g(()=>r(f)?e.res[r(f)]:null),m=g(()=>r(h)?new Ee(l()(r(h),"T"),r(h).nrows,r(h).ncomp):null),_=g(()=>r(h)?new Ee(l()(r(h),"E"),r(h).nrows,r(h).npred).t():null),b=g(()=>e.model?new Ee(s()(e.model,"P"),e.model.npred?e.model.npred:e.model.ncols,e.model.ncomp):null),p=g(()=>e.ncomp?Ue.seq(1,e.ncomp):null),w=g(()=>e.ncomp<e.model.ncomp?Ue.seq(e.ncomp+1,e.model.ncomp):null),A=g(()=>r(m)&&r(p)?r(m).subset(null,r(p)):null),y=g(()=>r(m)&&r(p)?r(b).subset(null,r(p)):null),k=g(()=>r(m)&&r(w)?r(m).subset(null,r(w)):null),N=g(()=>r(m)&&r(w)?r(b).subset(null,r(w)):null),T=g(()=>r(A)&&r(y)?la(r(y),r(A)):null),P=g(()=>r(k)&&r(N)?la(r(N),r(k)).add(r(_)):r(_)),L=g(()=>r(T)&&r(P)?r(T).add(r(P)):null);let F=g(()=>r(T)?r(T).getcolumn(e.selected+1):null),E=g(()=>r(P)?r(P).getcolumn(e.selected+1):null),S=g(()=>r(L)?r(L).getcolumn(e.selected+1):null),R=g(()=>{if(!r(F)||!r(E)||!r(S))return null;const z=r(o)==="explained"?{all:r(T),sel:r(F),label:"Explained part, TP^T"}:r(o)==="residual"?{all:r(P),sel:r(E),label:"Residuals, E"}:{all:r(L),sel:r(S),label:"Preprocessed data, X"},X=qr(z.all.v),$=X[1]-X[0],le=[X[0]-$/50,X[1]+$/12],we=ke.fill(X[1],z.sel.length);return z.lim=le,z.top=we,z.height=$,z});const D=g(()=>r(d)&&r(a)>=0?r(d).values.v[r(a)]:null),Y=g(()=>r(R)&&r(a)>=0?r(R).sel.v[r(a)]:null),j=g(()=>e.model&&r(a)>=0?e.model.varlabels[r(a)]:null),O=g(()=>r(h)&&e.selected>=0?`Object ${r(h).objlabels[e.selected].replace("_","-")}`:null),ee=g(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var Z=de(),J=K(Z);{var H=z=>{Al(z,{get closeModal(){return e.closeModal},children:(X,$)=>{var le=zd(),we=W(le);we.__click=u;var ie=W(we);Pr(ie,{get title(){return r(O)},get yLabel(){return r(R).label},get xLabel(){return r(ee)},get limY(){return r(R).lim},get limX(){return r(d).lim},fileName:"plot-contributions",children:(Pe,Te)=>{var se=Fd(),oe=K(se);Ba(oe,{get xValues(){return r(d).values},get yValues(){return r(R).all},lineColor:"#e0e0e0"});var re=M(oe,2);{var fe=ze=>{var G=de(),Q=K(G);Ve(Q,17,t,De,(ne,_e)=>{{let he=g(()=>r(R).all.getcolumn(r(_e)+1));Br(ne,{get xValues(){return r(d).values},get yValues(){return r(he)},lineColor:"#ffdd88"})}}),C(ze,G)};B(re,ze=>{t().length>0&&ze(fe)})}var ve=M(re,2);Br(ve,{get xValues(){return r(d).values},get yValues(){return r(R).sel},lineColor:"crimson"});var ce=M(ve,2);Yn(ce,{get left(){return r(v)},get top(){return r(R).top},get height(){return r(R).height},get width(){return r(d).width},faceColor:"transparent",borderColor:"transparent"});var je=M(ce,2);{var Oe=ze=>{var G=Md(),Q=K(G);{let he=g(()=>[r(D)]),Le=g(()=>[r(R).top.v[0]]),Ie=g(()=>[r(j)]);bs(Q,{get xValues(){return r(he)},get yValues(){return r(Le)},get labels(){return r(Ie)},pos:3,textSize:.85})}var ne=M(Q,2);{let he=g(()=>[r(D)]),Le=g(()=>[r(Y)]);Oa(ne,{get xValues(){return r(he)},get yValues(){return r(Le)},faceColor:"crimson",lineColor:"crimson"})}var _e=M(ne,2);{let he=g(()=>[r(v).v[r(a)]]),Le=g(()=>[r(R).top.v[r(a)]]);Yn(_e,{get left(){return r(he)},get top(){return r(Le)},get height(){return r(R).height},get width(){return r(d).width},faceColor:"#ff000015"})}C(ze,G)};B(je,ze=>{r(a)>=0&&ze(Oe)})}C(Pe,se)},$$slots:{default:!0}});var be=M(we,4),ye=W(be),qe=W(ye);ue(qe,{label:"Show",children:(Pe,Te)=>{Ye(Pe,{id:"type",options:["full","explained","residual"],get value(){return r(o)},set value(se){q(o,se,!0)}})},$$slots:{default:!0}});var xe=M(ye,2);{var Ae=Pe=>{var Te=qd(),se=W(Te);ue(se,{label:"For",children:(oe,re)=>{Ye(oe,{id:"type",get options(){return r(c)},get value(){return r(f)},set value(fe){q(f,fe,!0)}})},$$slots:{default:!0}}),C(Pe,Te)};B(xe,Pe=>{r(c).length>1&&Pe(Ae)})}C(X,le)},$$slots:{default:!0}})};B(J,z=>{r(d)&&r(R)&&z(H)})}C(n,Z),pe()}lt(["click"]);function Id(n,e){let t=0,s=0;n.nresp>0&&(t=new ke(n.values.v.slice(0,n.nresp*n.values.nrows-1)),s=n.nresp);const l=new Ee(n.values.v.slice(s*n.values.nrows),n.values.nrows,n.values.ncols-s).t(),o=l.ncols<e?1:Math.round(l.ncols/e),a=Ue.seq(1,l.ncols,o),c=l.subset(null,a),f=t?t.subset(a):null,u=n.classes?n.classes.filter((d,v)=>a.v.includes(v)):null;return{classNames:n.classNames,classes:u,resp:f,values:c,varvalues:n.varvalues.filter((d,v)=>v>=s),varindices:n.varindices.filter((d,v)=>v>=s),varaxisLabel:n.varvaluesUnits?n.varvaluesName+" "+n.varvaluesUnits:n.varvaluesName,varaxisUnits:n.varvaluesUnits}}function Tl(n,e){return{values:e||n.values.copy(),varvalues:n.varvalues,varindices:n.varindices,varaxisLabel:n.varaxisLabel}}function Vd(n,e){if(!e||e.nrows!==n.values.nrows||e.ncols!==n.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const t=structuredClone(n);return t.values=e,t}var Od=U('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function jl(n,e){ge(e,!0);var t=de(),s=K(t);{var l=a=>{var c=Od(),f=W(c),u=M(f),d=W(u);gt(d,()=>fu(e.prepmodel)),ae(()=>Se(f,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),C(a,c)},o=a=>{var c=bc("skipped");C(a,c)};B(s,a=>{e.prepmodel.ml?a(l):a(o,!1)})}C(n,t),pe()}var Bd=U('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),Dd=U('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Yd(n,e){ge(e,!0);var t=de(),s=K(t);{var l=o=>{ue(o,{name:"info",children:(a,c)=>{var f=Dd(),u=K(f),d=M(W(u),3);{var v=p=>{var w=Bd(),A=M(K(w),2),y=W(A);ae(()=>{V(A,"title",e.model.fileName),Se(y,e.model.fileName)}),C(p,w)};B(d,p=>{e.model.fileName&&p(v)})}var h=M(d),m=M(h,3);jl(m,{get prepmodel(){return e.model}});var _=M(u,2);{var b=p=>{ar(p,{get onclick(){return e.reset}})};B(_,p=>{e.reset&&p(b)})}ae(()=>Se(h,` ${e.model.npred??""} `)),C(a,f)},$$slots:{default:!0}})};B(s,o=>{e.model&&o(l)})}C(n,t),pe()}var Wd=U("<!> <!>",1),Hd=U("<p><!></p>"),Ud=U("<!> <!>",1);function Xd(n,e){ge(e,!0);let t=I(e,"model",15),s=te(""),l=te("neutral"),o=te("");function a(p){try{const w=JSON.parse(p,vl);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");w.fileName=r(u),t(w),q(l,"success"),q(o,"")}catch(w){console.log(w),t(null),q(l,"error"),q(o,w,!0)}}function c(p){const w=new FileReader;w.onload=()=>{a(w.result)},w.readAsText(r(s))}function f(){q(s,""),t(null),q(l,"neutral"),q(o,"")}me(()=>{r(s)===null?(t(null),q(l,"neutral"),q(o,"")):(q(l,"neutral"),q(o,""))}),me(()=>{(t()===null||t()===0)&&q(s,"")});let u=g(()=>r(s)?r(s).name.replace(/\.[^/.]+$/,""):"");var d=Ud(),v=K(d);{var h=p=>{var w=Wd(),A=K(w);$r(A,()=>r(s),N=>{ue(N,{name:"file-selector",children:(T,P)=>{fs(T,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return r(s)},set file(L){q(s,L,!0)}})},$$slots:{default:!0}})});var y=M(A,2);{var k=N=>{ue(N,{name:"load-button",label:" ",children:(T,P)=>{tt(T,{onclick:c,text:"Load"})},$$slots:{default:!0}})};B(y,N=>{r(s)&&N(k)})}C(p,w)},m=p=>{Yd(p,{get model(){return t()},reset:f})};B(v,p=>{t()?p(m,!1):p(h)})}var _=M(v,2);{var b=p=>{ue(p,{name:"error",status:"error",children:(w,A)=>{var y=Hd(),k=W(y);gt(k,()=>r(o)),C(w,y)},$$slots:{default:!0}})};B(_,p=>{(r(l)==="error"||r(o))&&p(b)})}C(n,d),pe()}var Gd=U('<p class="title"> </p>'),Kd=U("<!>&nbsp;",1),Jd=U("<!> <!>",1),Zd=U('<div class="method-open svelte-10os93"><!> <!> <!></div>'),Qd=U('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function Sn(n,e){ge(e,!0);let t=I(e,"cancel",3,null);var s=de(),l=K(s);{var o=c=>{var f=Zd(),u=W(f);ue(u,{children:(h,m)=>{var _=Gd(),b=W(_);ae(()=>Se(b,e.title)),C(h,_)},$$slots:{default:!0}});var d=M(u,2);Er(d,()=>e.children);var v=M(d,2);ue(v,{label:" ",children:(h,m)=>{var _=Jd(),b=K(_);{var p=A=>{var y=Kd(),k=K(y);tt(k,{text:"Cancel",get onclick(){return t()}}),C(A,y)};B(b,A=>{t()&&A(p)})}var w=M(b,2);tt(w,{text:"Save",get onclick(){return e.apply}}),C(h,_)},$$slots:{default:!0}}),Xo(3,f,()=>Da,()=>({duration:10})),C(c,f)},a=c=>{ue(c,{children:(f,u)=>{var d=Qd(),v=K(d),h=W(v),m=M(h);m.__click=()=>e.open(e.pos);var _=W(m),b=M(v,2);ju(b,{onclick:()=>e.moveUp(e.pos)});var p=M(b,2);Lu(p,{onclick:()=>e.moveDown(e.pos)});var w=M(p,2);ar(w,{onclick:()=>e.remove(e.pos)}),ae(()=>{Se(h,`${e.title??""} `),Se(_,e.settings)}),C(f,d)},$$slots:{default:!0}})};B(l,c=>{e.isOpen?c(o):c(a,!1)})}C(n,s),pe()}lt(["click"]);var $d=U("<!> <!>",1);function ev(n,e){ge(e,!0);let t=I(e,"params",31,()=>Fe([0,0])),s=I(e,"varind",15),l=I(e,"settings",15),o=I(e,"nvars",3,0),a=tn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const c={snv:0,area:1,length:2,var:3},f=Object.keys(c);let u=te(Fe(f[t()[0]])),d=te(t()[1]+1);const v="Normalization";me(()=>{l(r(u)+(r(u)==="var"?" #"+r(d):""))}),me(()=>{r(u)==="var"?s(s()[0]=t()[1]>0?t()[1]:1,!0):s(s()[0]=-1,!0)}),me(()=>{r(u)==="var"&&e.isOpen?s(s()[0]=t()[1],!0):s(s()[0]=-1,!0)}),me(()=>{r(u)&&t(t()[0]=c[r(u)],!0)}),me(()=>{r(d)&&t(t()[1]=r(d)-1,!0)}),Sn(n,Fr({id:"norm",title:v,get settings(){return l()},get isOpen(){return e.isOpen}},()=>a,{children:(h,m)=>{var _=$d(),b=K(_);ue(b,{label:"Type",children:(A,y)=>{Ye(A,{get options(){return f},get value(){return r(u)},set value(k){q(u,k,!0)}})},$$slots:{default:!0}});var p=M(b,2);{var w=A=>{ue(A,{label:"Variable index",children:(y,k)=>{Zt(y,{min:1,get max(){return o()},step:1,get value(){return r(d)},set value(N){q(d,N,!0)}})},$$slots:{default:!0}})};B(p,A=>{r(u)==="var"&&A(w)})}C(h,_)},$$slots:{default:!0}})),pe()}var tv=U("<!> <!> <!>",1);function rv(n,e){ge(e,!0);let t=I(e,"params",31,()=>Fe([3,1,0])),s=I(e,"settings",15),l=tn(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const o=g(()=>{if(!e.nvars)return 3;const u=Math.round(e.nvars*.25);return u>39?39:u%2<1?u+1:u}),a=g(()=>t()[1]<2?[0,1]:[0,1,2]),c=g(()=>t()[0]<5?[1,2]:[1,2,3]);me(()=>{t()[0]<5&&t()[1]>2&&t(t()[1]=2,!0)}),me(()=>{t()[2]>t()[1]&&t(t()[2]=t()[1],!0)}),me(()=>{s(t()[0]+", "+t()[1]+", "+t()[2])}),Sn(n,Fr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>l,{children:(u,d)=>{var v=tv(),h=K(v);ue(h,{label:"Width",children:(b,p)=>{Zt(b,{min:3,get max(){return r(o)},step:2,get value(){return t()[0]},set value(w){t(t()[0]=w,!0)}})},$$slots:{default:!0}});var m=M(h,2);ue(m,{label:"Polynomial",children:(b,p)=>{Ye(b,{get options(){return r(c)},get value(){return t()[1]},set value(w){t(t()[1]=w,!0)}})},$$slots:{default:!0}});var _=M(m,2);ue(_,{label:"Derivative",children:(b,p)=>{Ye(b,{get options(){return r(a)},get value(){return t()[2]},set value(w){t(t()[2]=w,!0)}})},$$slots:{default:!0}}),C(u,v)},$$slots:{default:!0}})),pe()}var nv=U("<!> <!>",1);function sv(n,e){ge(e,!0);let t=I(e,"params",31,()=>Fe([1,0]));I(e,"varind",27,()=>-1);let s=I(e,"settings",15);I(e,"nvars",3,0);let l=tn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o={no:0,mean:1,median:2},a={no:0,sd:1,iqr:2,range:3,pareto:4},c=Object.keys(o),f=Object.keys(a);let u=te(Fe(c[t()[0]])),d=te(Fe(f[t()[1]]));const v="Scaling";me(()=>{s(r(u)+"/"+r(d))}),me(()=>{r(u)&&t(t()[0]=o[r(u)],!0)}),me(()=>{r(d)&&t(t()[1]=a[r(d)],!0)}),Sn(n,Fr({id:"scale",title:v,get settings(){return s()}},()=>l,{children:(h,m)=>{var _=nv(),b=K(_);ue(b,{label:"Center",children:(w,A)=>{Ye(w,{get options(){return c},get value(){return r(u)},set value(y){q(u,y,!0)}})},$$slots:{default:!0}});var p=M(b,2);ue(p,{label:"Scale",children:(w,A)=>{Ye(w,{get options(){return f},get value(){return r(d)},set value(y){q(d,y,!0)}})},$$slots:{default:!0}}),C(h,_)},$$slots:{default:!0}})),pe()}var lv=U("<!> <!> <!>",1),ov=U("<!> <!> <!>",1);function av(n,e){ge(e,!0);let t=I(e,"params",31,()=>Fe([0,1,.1]));I(e,"varind",27,()=>-1);let s=I(e,"settings",15,"");I(e,"nvars",3,0);let l=tn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Baseline correction",a={emsc:0,als:1},c=Object.keys(a);function f(_){const b=Math.ceil(Math.log10(_));return Math.pow(10,b)}let u=te(Fe(c[t()[0]])),d=te(Fe(t()[2]>0?f(t()[2]).toString():"0.1")),v=g(()=>parseFloat(r(d))),h=g(()=>r(v)/10),m=g(()=>Math.ceil(-Math.log10(r(v)))+1);me(()=>{if(r(u)!=="als")return;const _=parseFloat(r(d));(t()[2]<r(h)||t()[2]>_-r(h))&&t(t()[2]=r(h),!0)}),me(()=>{s(r(u)+" ("+(r(u)=="emsc"?t()[1].toFixed(0):t()[1].toFixed(1)+","+t()[2].toFixed(3))+")")}),me(()=>{r(u)&&t(t()[0]=a[r(u)],!0)}),Sn(n,Fr({id:"scale",title:o,get settings(){return s()}},()=>l,{children:(_,b)=>{var p=ov(),w=K(p);ue(w,{label:"Type",children:(T,P)=>{Ye(T,{get options(){return c},get value(){return r(u)},set value(L){q(u,L,!0)}})},$$slots:{default:!0}});var A=M(w,2);{var y=T=>{var P=lv(),L=K(P);ue(L,{label:"Lambda",children:(S,R)=>{on(S,{min:1,max:7,step:.1,get value(){return t()[1]},set value(D){t(t()[1]=D,!0)}})},$$slots:{default:!0}});var F=M(L,2);ue(F,{label:"Penalty range",children:(S,R)=>{Ye(S,{options:["1","0.1","0.01"],get value(){return r(d)},set value(D){q(d,D,!0)}})},$$slots:{default:!0}});var E=M(F,2);ue(E,{label:"Penalty",children:(S,R)=>{{let D=g(()=>r(v)-r(h));on(S,{get min(){return r(h)},get max(){return r(D)},get step(){return r(h)},get decNum(){return r(m)},get value(){return t()[2]},set value(Y){t(t()[2]=Y,!0)}})}},$$slots:{default:!0}}),C(T,P)};B(A,T=>{r(u)==="als"&&T(y)})}var k=M(A,2);{var N=T=>{ue(T,{label:"Polynomial",children:(P,L)=>{Zt(P,{min:0,max:5,step:1,decNum:0,get value(){return t()[1]},set value(F){t(t()[1]=F,!0)}})},$$slots:{default:!0}})};B(k,T=>{r(u)==="emsc"&&T(N)})}C(_,p)},$$slots:{default:!0}})),pe()}var iv=U("<!> <!>",1);function cv(n,e){ge(e,!0);let t=I(e,"params",15),s=I(e,"varind",15),l=I(e,"settings",15),o=tn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const a="Trim tails";let c=te(!1);const f=g(()=>e.nvars?Math.round(e.nvars*.1):1);me(()=>{e.isOpen?((t()[0]===void 0||t()[0]===null||t()[0]<e.left||t()[0]>e.right-r(f))&&t(t()[0]=e.left,!0),(t()[1]===void 0||t()[1]===null||t()[1]>e.right||t()[1]<e.left+r(f))&&t(t()[1]=e.right,!0),s(s()[1]=t()[0],!0),s(s()[2]=t()[1],!0),q(c,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),q(c,!1))}),me(()=>{l("left: "+t()[0]+" right: "+t()[1])}),Sn(n,Fr({id:"norm",title:a,get settings(){return l()},get isOpen(){return e.isOpen}},()=>o,{children:(u,d)=>{var v=de(),h=K(v);{var m=_=>{var b=iv(),p=K(b);ue(p,{label:"Left",children:(A,y)=>{{let k=g(()=>e.right-r(f));on(A,{get min(){return e.left},get max(){return r(k)},step:1,decNum:0,get value(){return t()[0]},set value(N){t(t()[0]=N,!0)}})}},$$slots:{default:!0}});var w=M(p,2);ue(w,{label:"Right",children:(A,y)=>{{let k=g(()=>e.left+r(f));on(A,{get min(){return r(k)},get max(){return e.right},step:1,decNum:0,get value(){return t()[1]},set value(N){t(t()[1]=N,!0)}})}},$$slots:{default:!0}}),C(_,b)};B(h,_=>{r(c)&&_(m)})}C(u,v)},$$slots:{default:!0}})),pe()}var uv=U("<!> <!>",1);function fv(n,e){ge(e,!0);let t=I(e,"params",31,()=>Fe([3,5]));I(e,"varind",27,()=>-1);let s=I(e,"settings",15);I(e,"nvars",3,0);let l=tn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Spike removal";me(()=>{s(t()[0]+"/"+t()[1])}),Sn(n,Fr({id:"scale",title:o,get settings(){return s()}},()=>l,{children:(a,c)=>{var f=uv(),u=K(f);ue(u,{label:"Window",children:(v,h)=>{Zt(v,{min:3,max:15,step:2,get value(){return t()[0]},set value(m){t(t()[0]=m,!0)}})},$$slots:{default:!0}});var d=M(u,2);ue(d,{label:"Threshold",children:(v,h)=>{Zt(v,{min:3,max:50,get value(){return t()[1]},set value(m){t(t()[1]=m,!0)}})},$$slots:{default:!0}}),C(a,f)},$$slots:{default:!0}})),pe()}var dv=U("<h2>Selected methods</h2> <!>",1),vv=U("<p>No methods selected</p>"),hv=U("<p> </p>"),mv=U("<h2>Available methods</h2>"),gv=U("<p>Maximum number of methods is selected.</p>"),pv=U("<p> </p> <!>",1),bv=U('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function _v(n,e){ge(e,!0);let t=I(e,"prepobj",31,()=>Fe([])),s=I(e,"meta",15),l=I(e,"varind",31,()=>-1),o=I(e,"rawdataShort",15),a=I(e,"prepdataShort",15),c=I(e,"prepmodel",3,null),f=I(e,"reset",3,null),u=I(e,"finalize",3,null);const d=30,v=8,h={savgol:rv,norm:ev,scale:sv,baseline:av,trim:cv,spikes:fv};let m=te("neutral"),_=te(""),b=te(void 0),p=te(""),w=te(Fe([])),A=te(!1),y=te(Fe([])),k=te(Fe([]));s(new Array(v).fill(""));const N=g(()=>e.rawdata.values.ncols-e.rawdata.nresp);let T=Fe(e.rawdata.values.nrows<3?Object.keys(h).filter(se=>se!=="scale"):Object.keys(h));L(),t().length!==0&&P();async function P(){t().length!==0&&q(b,e.WASM().then(se=>{q(m,"applying");const oe=ma(se,o().values,0,t(),!0,[]),re=ul(se,o().values,0,oe,!0);a(Tl(o(),re)),q(m,"success")}).catch(se=>{a(Tl(o())),console.error(se),q(m,"error"),q(_,se,!0)}),!0)}function L(){const se=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!t()||t().length<1){e.setLeft(0),e.setRight(se),q(y,[],!0),q(k,[],!0);return}let oe=[],re=[],fe=0,ve=se;for(let ce of t())ce.id==="trim"?(oe.push(fe),re.push(ve),ce.params[0]<fe&&(ce.params[0]=fe),ce.params[1]>ve&&(ce.params[1]=ve),fe=ce.params[0]>fe?ce.params[0]:fe,ve=ce.params[1]>0&&ce.params[1]<ve?ce.params[1]:ve):(oe.push(fe),re.push(ve));q(y,oe,!0),q(k,re,!0),e.setLeft(fe),e.setRight(ve)}function F(se){const oe=Ir.find(re=>re.id===se);oe&&(r(y).push(e.left),r(k).push(e.right),t().push({id:oe.id,params:oe.mp}),q(A,!0),q(p,t().length-1))}function E(){t().length<1||(r(y).pop(),r(k).pop(),t().pop(),q(A,!1),q(p,-1))}function S(se){if(se<=0)return;const oe=t()[se],re=t()[se-1];t(t()[se-1]=oe,!0),t(t()[se]=re,!0),O()}function R(se){if(se<0||se===t().length-1)return;const oe=t()[se],re=t()[se+1];t(t()[se+1]=oe,!0),t(t()[se]=re,!0),O()}function D(se){se<0||se>=t().length||(t(t().filter((oe,re)=>re!==se)),O())}function Y(se){q(p,se,!0)}function j(){q(p,null)}function O(){q(m,"neutral"),q(_,""),q(A,!1),q(p,null),c()&&f()(),L(),P(),l(l()[1]=-1,!0),l(l()[2]=-1,!0)}me(()=>{e.rawdata&&!o()&&o(Id(e.rawdata,d))}),me(()=>{o()&&!a()&&a(Tl(o()))}),me(()=>{(!t()||t().length===0)&&(q(w,[],!0),a(null),q(y,[],!0),q(k,[],!0),q(p,""),s(new Array(v).fill("")))});var ee=bv(),Z=K(ee);let J;var H=W(Z);ue(H,{label:"",children:(se,oe)=>{var re=dv(),fe=M(K(re),2);{var ve=ce=>{xa(ce,{text:"edit",get onclick(){return f()}})};B(fe,ce=>{c()&&f()&&ce(ve)})}C(se,re)},$$slots:{default:!0}});var z=M(H,2);{var X=se=>{ue(se,{label:"",children:(oe,re)=>{var fe=vv();C(oe,fe)},$$slots:{default:!0}})},$=se=>{var oe=de(),re=K(oe);Ve(re,17,t,De,(fe,ve,ce)=>{const je=g(()=>h[r(ve).id]);var Oe=de(),ze=K(Oe);{var G=ne=>{var _e=de(),he=K(_e);{let Le=g(()=>ce===r(p)),Ie=g(()=>r(A)?E:null);qn(he,()=>r(je),(Be,He)=>{He(Be,{get isOpen(){return r(Le)},get left(){return r(y)[ce]},get right(){return r(k)[ce]},pos:ce,get nvars(){return r(N)},moveUp:S,moveDown:R,apply:O,open:Y,close:j,remove:D,get cancel(){return r(Ie)},get params(){return r(ve).params},set params(Xe){r(ve).params=Xe},get varind(){return l()},set varind(Xe){l(Xe)},get settings(){return s()[ce]},set settings(Xe){s(s()[ce]=Xe,!0)}})})}C(ne,_e)},Q=ne=>{var _e=de(),he=K(_e);{let Le=g(()=>ce===r(p)),Ie=g(()=>r(A)?E:null);qn(he,()=>r(je),(Be,He)=>{He(Be,{pos:ce,get isOpen(){return r(Le)},get left(){return r(y)[ce]},get right(){return r(k)[ce]},get nvars(){return r(N)},moveUp:S,moveDown:R,apply:O,open:Y,close:j,remove:D,get cancel(){return r(Ie)},get params(){return r(ve).params},set params(Xe){r(ve).params=Xe},get settings(){return s()[ce]},set settings(Xe){s(s()[ce]=Xe,!0)}})})}C(ne,_e)};B(ze,ne=>{r(ve).id==="norm"||r(ve).id==="trim"?ne(G):ne(Q,!1)})}C(fe,Oe)}),C(se,oe)};B(z,se=>{t().length===0?se(X):se($,!1)})}var le=M(z,2);{var we=se=>{ue(se,{status:"error",children:(oe,re)=>{var fe=hv(),ve=W(fe);ae(()=>Se(ve,r(_))),C(oe,fe)},$$slots:{default:!0}})};B(le,se=>{(r(m)==="error"||r(_))&&se(we)})}var ie=M(Z,2),be=W(ie);{var ye=se=>{ue(se,{label:" ",children:(oe,re)=>{tt(oe,{get onclick(){return u()},text:"Finalize"})},$$slots:{default:!0}})};B(be,se=>{!c()&&!r(p)&&t().length>0&&se(ye)})}var qe=M(ie,2),xe=W(qe);ue(xe,{label:"",children:(se,oe)=>{var re=mv();C(se,re)},$$slots:{default:!0}});var Ae=M(xe,2);{var Pe=se=>{ue(se,{label:"",children:(oe,re)=>{var fe=gv();C(oe,fe)},$$slots:{default:!0}})},Te=se=>{var oe=de(),re=K(oe);Ve(re,17,()=>T,De,(fe,ve)=>{const ce=g(()=>Ir.find(je=>je.id===r(ve)));ue(fe,{children:(je,Oe)=>{var ze=pv(),G=K(ze),Q=W(G),ne=M(G,2);Tu(ne,{onclick:()=>F(r(ce).id)}),ae(()=>Se(Q,r(ce).title)),C(je,ze)},$$slots:{default:!0}})}),C(se,oe)};B(Ae,se=>{t().length>=v?se(Pe):se(Te,!1)})}ae(()=>J=ct(Z,1,"selected-methods-list svelte-9cg1zq",null,J,{final:c()!==null&&c()!==void 0})),C(n,ee),pe()}var wv=U("<!> <!>",1),yv=U("<!> <!>",1),xv=U("<!> <!>",1),kv=U("<!> <!> <!> <!> <!> <!> <!> <!>",1),Ev=U("<h2>Plot settings</h2>"),Sv=U('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),Av=U('<div class="plot-panel svelte-5p9gcx"><!></div>');function Cv(n,e){ge(e,!0);let t=te(!0),s=te("none"),l=te(!1);const o=g(()=>(r(t)?"Preprocessed":"Raw")+" data (selected rows)"),a=g(()=>r(t)&&e.prepdata?e.prepdata:e.rawdata),c=g(()=>r(a)?r(a).varaxisLabel:"Variables"),f=g(()=>e.rawdata.varaxisUnits),u=g(()=>e.left>=0||e.right>0&&e.right<r(a).values.nrows),d=g(()=>e.left>=0?e.left+1:1),v=g(()=>e.right>0&&e.right<r(a).values.nrows?e.right:r(a).values.nrows),h=g(()=>r(t)&&r(a)&&r(u)?Ue.seq(r(d),r(v)):null),m=g(()=>r(h)?r(a).varvalues.filter((L,F)=>F>=r(d)-1&&F<r(v)):r(a).varvalues),_=g(()=>r(h)?r(a).values.subset(r(h),null):r(a).values),b=g(()=>r(_)?Ar(r(_).v):null),p=g(()=>r(b)?(r(b)[1]-r(b)[0])*.05:null),w=g(()=>r(b)?[r(b)[0],r(b)[1]+(r(s)!=="none")*r(p)]:[0,1]),A=g(()=>r(a)?Ar(r(a).varvalues,r(l)?.005:.1):[0,1]),y=g(()=>r(l)&&r(u)?[r(a).varvalues[r(d)-1],r(a).varvalues[r(v)-1]]:r(A)),k=g(()=>{if(!e.rawdata)return null;const L={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const F=xl(e.rawdata.classNames.length);L.groups={colors:e.rawdata.classes.map(E=>F[e.rawdata.classNames.findIndex(S=>S===E)]),breaks:Jt(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:F}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const F=$s(e.rawdata.resp,8),E=xl(F.length-1);L.response={colors:Ld(e.rawdata.resp.v,F.v,E),labels:null,breaks:F,map:E}}return L});me(()=>{(e.left<1||e.right<1||e.right>=e.left)&&q(l,!1)});var N=Av(),T=W(N);{var P=L=>{var F=Sv(),E=K(F),S=W(E),R=W(S);ms(R,{get title(){return r(o)},get limY(){return r(w)},get limX(){return r(y)},fileName:"plot-preprocessed",children:(H,z)=>{var X=kv(),$=K(X);{var le=re=>{Ba(re,{get xValues(){return r(m)},get yValues(){return r(_)}})},we=re=>{var fe=de(),ve=K(fe);Ve(ve,17,()=>r(k)[r(s)].colors,De,(ce,je,Oe)=>{{let ze=g(()=>r(_).getcolumn(Oe+1));Br(ce,{get xValues(){return r(m)},get yValues(){return r(ze)},get lineColor(){return r(je)}})}}),C(re,fe)};B($,re=>{r(s)==="none"?re(le):re(we,!1)})}var ie=M($,2);{var be=re=>{const fe=g(()=>r(a).varvalues[e.varind[0]]);var ve=wv(),ce=K(ve);{let Oe=g(()=>[r(fe),r(fe)]);Br(ce,{get xValues(){return r(Oe)},get yValues(){return r(w)},lineColor:"#00000060"})}var je=M(ce,2);{let Oe=g(()=>[r(fe)]),ze=g(()=>[r(w)[1]-r(p)*(r(s)==="none"?1:2)]),G=g(()=>Or(r(fe).toFixed(2)+" "+r(f)));bs(je,{get xValues(){return r(Oe)},get yValues(){return r(ze)},get labels(){return r(G)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(re,ve)};B(ie,re=>{e.varind&&e.varind[0]>0&&re(be)})}var ye=M(ie,2);{var qe=re=>{const fe=g(()=>r(a).varvalues[e.varind[1]]);var ve=yv(),ce=K(ve);{let Oe=g(()=>[r(y)[0]]),ze=g(()=>[r(a).varvalues[e.varind[1]]-r(y)[0]]),G=g(()=>[r(w)[1]]),Q=g(()=>[r(w)[1]-r(w)[0]]);Yn(ce,{get left(){return r(Oe)},get width(){return r(ze)},get top(){return r(G)},get height(){return r(Q)},lineColor:"transparent",faceColor:"#00000040"})}var je=M(ce,2);{let Oe=g(()=>[r(fe)]),ze=g(()=>[r(w)[1]-r(p)*(r(s)==="none"?1:2)]),G=g(()=>Or(r(fe).toFixed(2)+" "+r(f)));bs(je,{get xValues(){return r(Oe)},get yValues(){return r(ze)},get labels(){return r(G)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(re,ve)};B(ye,re=>{e.varind&&e.varind[1]>0&&re(qe)})}var xe=M(ye,2);{var Ae=re=>{const fe=g(()=>r(a).varvalues[e.varind[2]-1]);var ve=xv(),ce=K(ve);{let Oe=g(()=>[r(a).varvalues[e.varind[2]-1]]),ze=g(()=>[r(y)[1]-r(a).varvalues[e.varind[2]-1]]),G=g(()=>[r(w)[1]]),Q=g(()=>[r(w)[1]-r(w)[0]]);Yn(ce,{get left(){return r(Oe)},get width(){return r(ze)},get top(){return r(G)},get height(){return r(Q)},lineColor:"transparent",faceColor:"#00000040"})}var je=M(ce,2);{let Oe=g(()=>[r(fe)]),ze=g(()=>[r(w)[1]-r(p)*(r(s)==="none"?1:2)]),G=g(()=>Or(r(fe).toFixed(2)+" "+r(f)));bs(je,{get xValues(){return r(Oe)},get yValues(){return r(ze)},get labels(){return r(G)},textColor:"#a0a0a0",textSize:.8,pos:2})}C(re,ve)};B(xe,re=>{e.varind&&e.varind[2]<r(a).varvalues.length&&e.varind[2]>0&&re(Ae)})}var Pe=M(xe,2);{let re=g(()=>r(s)!=="none");Sl(Pe,{get show(){return r(re)},get labels(){return r(k)[r(s)].labels},get breaks(){return r(k)[r(s)].breaks},get colmap(){return r(k)[r(s)].map}})}var Te=M(Pe,2);gs(Te,{get label(){return r(c)},showGrid:!0});var se=M(Te,2);El(se,{showGrid:!0});var oe=M(se,2);ps(oe,{}),C(H,X)},$$slots:{default:!0}});var D=M(E,2),Y=W(D);ue(Y,{label:"",children:(H,z)=>{var X=Ev();C(H,X)},$$slots:{default:!0}});var j=M(Y,2);ue(j,{label:"Show",children:(H,z)=>{Qt(H,{options:["raw","preprocessed"],get value(){return r(t)},set value(X){q(t,X,!0)}})},$$slots:{default:!0}});var O=M(j,2);{var ee=H=>{ue(H,{label:"Color by",children:(z,X)=>{{let $=g(()=>Object.keys(r(k)));Ye(z,{get options(){return r($)},get value(){return r(s)},set value(le){q(s,le,!0)}})}},$$slots:{default:!0}})};B(O,H=>{Object.keys(r(k)).length>1&&H(ee)})}var Z=M(O,2);{var J=H=>{ue(H,{label:"Zoom (x-axis)",children:(z,X)=>{Qt(z,{options:["off","on"],get value(){return r(l)},set value($){q(l,$,!0)}})},$$slots:{default:!0}})};B(Z,H=>{e.left>0&&e.right>e.left&&H(J)})}C(L,F)};B(T,L=>{r(m)&&r(_)&&L(P)})}C(n,N),pe()}var Nv=U('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function Pv(n,e){ge(e,!0);let t=I(e,"left",15),s=I(e,"right",15),l=I(e,"prepobj",15),o=I(e,"meta",15),a=I(e,"finalize",3,null),c=te(Fe([-1,0,0])),f=te(null),u=te(null);function d(y){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&y>=0&&y<k&&y<s()&&t(y)}function v(y){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&y<=k&&y>t()&&s(y)}var h=Nv(),m=W(h),_=W(m),b=W(_);_v(b,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return t()},get right(){return s()},setLeft:d,",":!0,setRight:v,get finalize(){return a()},get varind(){return r(c)},set varind(y){q(c,y,!0)},get prepobj(){return l()},set prepobj(y){l(y)},get rawdataShort(){return r(f)},set rawdataShort(y){q(f,y,!0)},get prepdataShort(){return r(u)},set prepdataShort(y){q(u,y,!0)},get meta(){return o()},set meta(y){o(y)}});var p=M(m,2),w=W(p);{var A=y=>{Cv(y,{get rawdata(){return r(f)},get prepdata(){return r(u)},get left(){return t()},get right(){return s()},get varind(){return r(c)}})};B(w,y=>{r(f)&&y(A)})}C(n,h),pe()}var Tv=U('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),jv=U("<!> <!> <!>",1),Lv=U('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),Rv=U("<!> <!> <!>",1),Mv=U("<p><strong>Preprocessing model</strong></p>"),Fv=U("<!> <!>",1),qv=U("<p> </p>"),zv=U('<div class="prep-widget"><!></div> <!> <!>',1);function Iv(n,e){ge(e,!0);let t=I(e,"prepType",15),s=I(e,"prepobj",15),l=I(e,"prepdata",15),o=I(e,"prepmodel",15),a=I(e,"prepmeta",15),c=te(!1),f=te(0),u=te(Fe(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),d=te("neutral"),v=te(""),h=te(void 0);async function m(R,D,Y){!D||!R||D.length===0||q(h,e.WASM().then(j=>{q(d,"applying");const O=ma(j,R.values,R.nresp,D,!1,Y);O.info=a(),o(O)}).catch(j=>{o(null),console.error(j),q(d,"error"),q(v,j,!0)}),!0)}async function _(R,D){if(!D||typeof D!="object"){l(null);return}if(Object.keys(D).length===0){l(R);return}q(h,e.WASM().then(Y=>{q(d,"applying");const j=ul(Y,R.values,R.nresp,D,!1,!1),O=Vd(Bi(R),j);l(du(O,D))}).catch(Y=>{l(null),console.error(Y),q(d,"error"),q(v,Y,!0)}),!0)}function b(){t(null),l(null),o(null),s([]),q(f,0),q(u,e.rawdata.values.ncols-e.rawdata.nresp)}function p(){s()&&s().length>0?m(e.rawdata,s(),e.outliers):(t(null),o(null)),q(c,!1)}function w(){t("create"),l(null),o(null),q(c,!0)}function A(){t("skip"),o({})}me(()=>{o(),e.rawdata&&_(e.rawdata,o())}),me(()=>{t()==="create"&&s()&&!o()&&m(e.rawdata,s(),e.outliers)}),me(()=>{t()==="skip"&&l()===null&&(o({}),s([]),l(e.rawdata))});var y=zv(),k=K(y),N=W(k);{var T=R=>{ue(R,{name:"info",children:(D,Y)=>{var j=jv(),O=K(j);{var ee=z=>{var X=Tv(),$=M(W(X),2);jl($,{get prepmodel(){return o()}}),C(z,X)};B(O,z=>{r(c)||z(ee)})}var Z=M(O,2);{var J=z=>{xa(z,{onclick:w})};B(Z,z=>{t()==="create"&&z(J)})}var H=M(Z,2);ar(H,{onclick:b}),C(D,j)},$$slots:{default:!0}})},P=R=>{var D=de(),Y=K(D);{var j=ee=>{ue(ee,{name:"prep-info",children:(Z,J)=>{var H=Lv(),z=M(K(H),2),X=W(z);ar(X,{onclick:b}),C(Z,H)},$$slots:{default:!0}})},O=ee=>{var Z=de(),J=K(Z);{var H=X=>{ue(X,{label:"Preprocessing",name:"prep-container",children:($,le)=>{var we=Rv(),ie=K(we);tt(ie,{text:"Skip",onclick:A});var be=M(ie,2);tt(be,{text:"Load",onclick:()=>t("file")});var ye=M(be,2);tt(ye,{text:"Create",onclick:w}),C($,we)},$$slots:{default:!0}})},z=X=>{var $=de(),le=K($);{var we=ie=>{var be=Fv(),ye=K(be);ue(ye,{children:(xe,Ae)=>{var Pe=Mv();C(xe,Pe)},$$slots:{default:!0}});var qe=M(ye,2);Xd(qe,{get model(){return o()},set model(xe){o(xe)},get prepobj(){return s()},set prepobj(xe){s(xe)},get left(){return r(f)},set left(xe){q(f,xe,!0)},get right(){return r(u)},set right(xe){q(u,xe,!0)}}),C(ie,be)};B(le,ie=>{t()==="file"&&ie(we)},!0)}C(X,$)};B(J,X=>{t()?X(z,!1):X(H)},!0)}C(ee,Z)};B(Y,ee=>{t()==="skip"?ee(j):ee(O,!1)},!0)}C(R,D)};B(N,R=>{o()&&l()&&o().ml?R(T):R(P,!1)})}var L=M(k,2);{var F=R=>{Al(R,{closeModal:p,isDark:!0,children:(D,Y)=>{Pv(D,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:p,get prepobj(){return s()},set prepobj(j){s(j)},get left(){return r(f)},set left(j){q(f,j,!0)},get right(){return r(u)},set right(j){q(u,j,!0)},get meta(){return a()},set meta(j){a(j)}})},$$slots:{default:!0}})};B(L,R=>{r(c)&&R(F)})}var E=M(L,2);{var S=R=>{ue(R,{status:"error",children:(D,Y)=>{var j=qv(),O=W(j);ae(()=>Se(O,r(v))),C(D,j)},$$slots:{default:!0}})};B(E,R=>{(r(d)==="error"||r(v))&&R(S)})}C(n,y),pe()}var Vv=U('<th class="svelte-110ino2"> </th>'),Ov=U('<td class="svelte-110ino2"> </td>'),Bv=U('<tr class="svelte-110ino2"></tr>'),Dv=U('<input type="radio" name="resID" class="svelte-110ino2"/> <label class="svelte-110ino2"> </label>',1),Yv=U('<div class="switcher svelte-110ino2"></div>'),Wv=U('<table class="svelte-110ino2"><thead><tr class="svelte-110ino2"></tr></thead><tbody></tbody></table> <!>',1);function Xa(n,e){ge(e,!0);const t=[],s=["TN","FP","TP","FN"],l=["Sensitivity","Specificity","Efficiency","Accuracy"],o=g(()=>Object.keys(e.res));let a=te(0),c=g(()=>{if(!e.res)return null;const v=e.res[r(o)[r(a)]],h=["",...e.model.classNames,"total"];let m=[];for(let _ of s){let b=[_];for(let p of e.model.classNames){const w=v.v[p].res[e.model.ncomp-1][_];b.push(w)}b.push("-"),m.push(b)}for(let _ of l){let b=[_];const p=_.toLowerCase();for(let A of v.classNames){const y=v.v[A].stat[p][e.model.ncomp-1];b.push(y.toFixed(3))}const w=v.v.total.stat[p][e.model.ncomp-1];b.push(w.toFixed(3)),m.push(b)}return{header:h,rows:m}});var f=de(),u=K(f);{var d=v=>{var h=Wv(),m=K(h),_=W(m),b=W(_);Ve(b,21,()=>r(c).header,De,(y,k)=>{var N=Vv(),T=W(N);ae(()=>Se(T,r(k))),C(y,N)});var p=M(_);Ve(p,21,()=>r(c).rows,De,(y,k)=>{var N=Bv();Ve(N,21,()=>r(k),De,(T,P)=>{var L=Ov(),F=W(L);ae(()=>Se(F,r(P))),C(T,L)}),C(y,N)});var w=M(m,2);{var A=y=>{var k=Yv();Ve(k,21,()=>r(o),De,(N,T,P)=>{var L=Dv(),F=K(L);F.value=F.__value=P;var E=M(F,2),S=W(E);ae(()=>{V(F,"id",r(T)),V(E,"for",r(T)),Se(S,r(T))}),Vc(t,[],F,()=>r(a),R=>q(a,R)),C(N,L)}),C(y,k)};B(w,y=>{r(o).length>1&&y(A)})}C(v,h)};B(u,v=>{r(c)&&v(d)})}C(n,f),pe()}var Hv=U("<!> <!> <!> <!>",1),Uv=U("<p> </p>"),Xv=U("<!> <p>Computing global model...</p>",1),Gv=U('<p><span style="color:#a0a0a0;">PLS model:</span> </p> <!>',1),Kv=U('<div class="buttons"><!> <!></div>'),Jv=U("<!> <!>",1),Zv=U("<p> </p>"),Qv=U("<!> <!> <!> <!>",1);function $v(n,e){ge(e,!0);let t=I(e,"outliers",19,()=>[]),s=I(e,"exclvars",19,()=>[]),l=I(e,"resobj",15),o=I(e,"model",15),a=I(e,"downloadModel",3,null),c=I(e,"downloadResults",3,null),f=te("neutral"),u=te(""),d=te(1),v=te(!0),h=te(!1),m=te(void 0);async function _(S,R,D,Y){const j=S.nresp,O=S.varindices;q(m,e.WASM().then(ee=>{q(f,"computing");const Z=au(ee,S.values,j,R,D,Y,t(),s());Z.hash=is(),Z.varlabels=S.varlabels.filter((H,z)=>z<j||!s().includes(O[z])),Z.varindices=S.varindices.filter((H,z)=>z<j||!s().includes(O[z])),Z.varvalues=S.varvalues.filter((H,z)=>z<j||!s().includes(O[z])),Z.xvarlabels=Z.varlabels.filter((H,z)=>z+1>j),Z.xvarvalues=Z.varvalues.filter((H,z)=>z+1>j),Z.xvarindices=Z.varindices.filter((H,z)=>z+1>j).map(H=>H+1),Z.varvaluesName=S.varvaluesName,Z.varvaluesUnits=S.varvaluesUnits,Z.varrev=S.varrev,Z.prep=null;const J=dl(ee,Z,S,t());Z.stat={xexpvar:J.stat.xexpvar,yexpvar:J.stat.yexpvar},o(Z),l(J),q(f,"success")}).catch(ee=>{console.error(ee),o(null),q(f,"error"),q(u,ee,!0)}),!0)}function b(S){q(f,"neutral"),q(u,null),_(e.dataset,r(d),r(v),r(h))}function p(){q(f,"neutral"),q(m,null),l(null),o(null),q(u,null)}let w=g(()=>e.dataset?Math.min(e.dataset.values.nrows-2-t().length,e.dataset.values.ncols-e.dataset.nresp-s().length-1,50):null);me(()=>{e.dataset===null&&p()}),me(()=>{q(d,r(w)?Math.min(r(w),20):null,!0)});var A=Qv(),y=K(A);{var k=S=>{var R=Hv(),D=K(R);{var Y=Z=>{ue(Z,{name:"ncomp",label:"# of LVs",children:(J,H)=>{on(J,{id:"ncomp",min:1,get max(){return r(w)},step:1,decNum:0,get value(){return r(d)},set value(z){q(d,z,!0)}})},$$slots:{default:!0}})};B(D,Z=>{r(d)&&r(w)&&Z(Y)})}var j=M(D,2);ue(j,{name:"center",label:"Center",children:(Z,J)=>{Qt(Z,{id:"center",options:["no","yes"],get value(){return r(v)},set value(H){q(v,H,!0)}})},$$slots:{default:!0}});var O=M(j,2);ue(O,{name:"scale",label:"Scale",children:(Z,J)=>{Qt(Z,{id:"scale",options:["no","yes"],get value(){return r(h)},set value(H){q(h,H,!0)}})},$$slots:{default:!0}});var ee=M(O,2);ue(ee,{name:"create-model",label:" ",children:(Z,J)=>{tt(Z,{onclick:b,text:"Create model"})},$$slots:{default:!0}}),C(S,R)};B(y,S=>{e.dataset&&!o()&&r(f)!=="computing"&&S(k)})}var N=M(y,2);{var T=S=>{var R=de(),D=K(R);Ws(D,()=>r(m),Y=>{ue(Y,{name:"spinner",children:(j,O)=>{var ee=Xv(),Z=K(ee);ml(Z),C(j,ee)},$$slots:{default:!0}})},void 0,(Y,j)=>{ue(Y,{name:"error",status:"error",children:(O,ee)=>{var Z=Uv(),J=W(Z);ae(()=>Se(J,r(j))),C(O,Z)},$$slots:{default:!0}})}),C(S,R)};B(N,S=>{r(m)&&S(T)})}var P=M(N,2);{var L=S=>{var R=Jv(),D=K(R);ue(D,{name:"info",children:(O,ee)=>{var Z=Gv(),J=K(Z),H=M(W(J)),z=M(J,2);ar(z,{onclick:p}),ae(()=>Se(H,` ${o().ncomp??""} LVs${o().center?", centered":""}${o().scale?", scaled":""}`)),C(O,Z)},$$slots:{default:!0}});var Y=M(D,2);{var j=O=>{ue(O,{name:"download-buttons",label:"Download",children:(ee,Z)=>{var J=Kv(),H=W(J);tt(H,{onclick:()=>c()(l(),e.dataset,"train",t()),text:"Results"});var z=M(H,2);tt(z,{onclick:()=>a()(o()),text:"Model"}),C(ee,J)},$$slots:{default:!0}})};B(Y,O=>{a()&&c()&&O(j)})}C(S,R)};B(P,S=>{o()&&o().ncomp&&S(L)})}var F=M(P,2);{var E=S=>{ue(S,{name:"error",status:"error",children:(R,D)=>{var Y=Zv(),j=W(Y);ae(()=>Se(j,r(u))),C(R,Y)},$$slots:{default:!0}})};B(F,S=>{(r(f)==="error"||r(u))&&S(E)})}C(n,A),pe()}var eh=U("<!> <!> <!>",1),th=U('<p class="svelte-7klqqw"> </p>'),rh=U('<!> <p class="svelte-7klqqw">Computing PV-set...</p>',1),nh=U('<p class="svelte-7klqqw"><span class="svelte-7klqqw">PV-set:</span> <br/> <span class="svelte-7klqqw">Size:</span> <span class="svelte-7klqqw">(X)</span> <span class="svelte-7klqqw">(Y)</span>,</p> <!> <!>',1),sh=U('<p class="svelte-7klqqw"> </p>'),lh=U("<!> <!> <!> <!>",1);function oh(n,e){ge(e,!0);let t=I(e,"outliers",19,()=>[]),s=I(e,"pvset",15),l=I(e,"pvres",15),o=I(e,"pvscalars",15),a=te("neutral"),c=te(""),f=te(Fe(["ven","rand","loo"])),u=te("ven"),d=te(void 0),v=e.calset.values.nrows-t().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(E=>E>=v/(v-e.model.ncomp-1)&&E<=v/2):[],m=te(Fe(h.length>0?h[0]:0));me(()=>{h.length===0&&(q(f,["loo"],!0),q(u,"loo"))});async function _(E,S,R,D){q(d,e.WASM().then(Y=>{const j=R.type=="loo"?0:R.type=="rand"?2:1,[O,ee]=cu(Y,S,E.values,E.nresp,S.ncomp,R.nseg,j,0,D);s({classLabelsVarname:E.classLabelsVarname,classNames:E.classNames,classes:E.classes,dec:E.dec,fileName:E.fileName+"-pcv",hasClassNames:E.hasClassNames,hasLabels:E.hasLabels,header:E.header,labelsVarname:E.labelsVarname,objindices:e.calres.objindices,objlabels:e.calres.objlabels,sep:E.sep,values:O,varAxisTitle:E.varAxisTitle,varindices:S.varindices,varlabels:S.varlabels,varrev:S.varrev,varvalues:S.varvalues,varvaluesName:S.varvaluesName,varvaluesUnits:S.varvaluesUnits,nresp:S.nresp}),l(dl(Y,S,s(),[])),o(ee)}).catch(Y=>{console.error(Y),s(null),l(null),q(a,"error"),q(c,Y,!0)}),!0)}function b(E){q(a,"neutral"),q(c,""),_(e.calset,e.model,{type:r(u),nseg:r(m)},t())}function p(){q(a,"neutral"),q(c,""),q(d,null),s(null),l(null)}me(()=>{e.model===null&&p()});var w=lh(),A=K(w);{var y=E=>{var S=eh(),R=K(S);ue(R,{name:"split",label:"Split type:",children:(O,ee)=>{Ye(O,{id:"cvType",get options(){return r(f)},get value(){return r(u)},set value(Z){q(u,Z,!0)}})},$$slots:{default:!0}});var D=M(R,2);{var Y=O=>{ue(O,{name:"nseg",label:"Segments:",children:(ee,Z)=>{Ye(ee,{id:"nseg",get options(){return h},get value(){return r(m)},set value(J){q(m,J,!0)}})},$$slots:{default:!0}})};B(D,O=>{r(u)!=="loo"&&O(Y)})}var j=M(D,2);ue(j,{name:"run-button",label:" ",children:(O,ee)=>{tt(O,{onclick:b,text:"Compute PV-set"})},$$slots:{default:!0}}),C(E,S)};B(A,E=>{e.model&&!s()&&r(a)!=="busy"&&E(y)})}var k=M(A,2);{var N=E=>{var S=de(),R=K(S);Ws(R,()=>r(d),D=>{ue(D,{name:"spinner",children:(Y,j)=>{var O=rh(),ee=K(O);ml(ee),C(Y,O)},$$slots:{default:!0}})},void 0,(D,Y)=>{ue(D,{name:"error",status:"error",children:(j,O)=>{var ee=th(),Z=W(ee);ae(()=>Se(Z,r(Y))),C(j,ee)},$$slots:{default:!0}})}),C(E,S)};B(k,E=>{r(d)&&E(N)})}var T=M(k,2);{var P=E=>{ue(E,{name:"info",children:(S,R)=>{var D=nh(),Y=K(D),j=M(W(Y)),O=M(j,4),ee=M(O,2),Z=M(Y,2);Pu(Z,{onclick:()=>yu(s(),e.calset.fileName+"-pv")});var J=M(Z,2);ar(J,{onclick:p}),ae(()=>{Se(j,` ${r(u)??""}
      ${r(u)!=="loo"?r(m)+" seg":""}`),Se(O,` ${s().values.nrows??""}×${s().values.ncols-s().nresp} `),Se(ee,`,
      ${s().values.nrows??""}×${s().nresp??""} `)}),C(S,D)},$$slots:{default:!0}})};B(T,E=>{s()&&E(P)})}var L=M(T,2);{var F=E=>{ue(E,{name:"error",status:"error",children:(S,R)=>{var D=sh(),Y=W(D);ae(()=>Se(Y,r(c))),C(S,D)},$$slots:{default:!0}})};B(L,E=>{r(a)==="error"&&r(c)&&E(F)})}C(n,w),pe()}var ah=U("<!> <!> <!>",1),ih=U("<!> <!> <!>",1);function Ga(n,e){ge(e,!0);let t=I(e,"damodel",15);const s=g(()=>Object.keys(e.ind));function l(u,d,v){const h=r(s).length,m={};for(let _=0;_<h;_++){const b=r(s)[_],p=d[b],w=p.length,A=new Array(u.ncomp),y=new Array(u.ncomp),k=new Array(u.ncomp),N=new Array(u.ncomp);for(let T=1;T<=u.ncomp;T++){const P=Nt(u,"Yp",T,1),L=ke.zeros(w);let F=0,E=0;for(let j of p)F+=P[j],L.v[E]=P[j],E+=1;F=F/w;const S=Qs(L);let R=0,D=0;E=0;const Y=ke.zeros(w);for(let j of p)R+=(P[j]-F)**2,Y.v[E]=Math.abs(P[j]-S),E+=1;R=Math.sqrt(R/(w-1)),D=1.25*Qs(Y),A[T-1]=F,y[T-1]=R,k[T-1]=S,N[T-1]=D}m[b]={classic:{m:A,s:y},robust:{m:k,s:N}}}return m}me(()=>{if(t()||!e.plsmodel||!e.plsres||!e.ind)return;const u=5,d=1,v=0,h="hard",m="classic",_=l(e.plsres,e.ind),b=Object.keys(e.ind).map(p=>e.ind[p].length);t({ncomp:e.ncomp,rule:h,limType:m,threshold:v,alpha:u,gamma:d,classNames:r(s),params:_,ind:e.ind,crit:null,dof:b,hash:is()})});const o=g(()=>t()&&t().limType?[t().params[t().classNames[0]][t().limType],t().params[t().classNames[1]][t().limType]]:null);me(()=>{if(!(!r(o)||t().rule==="hard")&&t().ncomp){const u=Number.parseFloat(t().alpha)/100,d=r(o)[0].m[t().ncomp-1],v=r(o)[1].m[t().ncomp-1],h=r(o)[0].s[t().ncomp-1],m=r(o)[1].s[t().ncomp-1],_=zr(u,d,h),b=zr(1-u,v,m),p=Number.parseFloat(t().gamma)/100,w=1-Math.pow(1-p,1/t().dof[0]),A=1-Math.pow(1-p,1/t().dof[1]),y=zr(w,d,h),k=zr(1-A,v,m),N={};N[t().classNames[0]]=[d,h,_,y],N[t().classNames[1]]=[v,m,b,k],t(t().crit=N,!0)}});var a=de(),c=K(a);{var f=u=>{var d=ih(),v=K(d);ue(v,{name:"ncomp",label:"# of LVs",children:(p,w)=>{on(p,{min:1,get max(){return e.plsmodel.ncomp},step:1,decNum:0,get value(){return t().ncomp},set value(A){t(t().ncomp=A,!0)}})},$$slots:{default:!0}});var h=M(v,2);ue(h,{name:"rule",label:"Rule:",children:(p,w)=>{Ye(p,{options:["hard","soft"],get value(){return t().rule},set value(A){t(t().rule=A,!0)}})},$$slots:{default:!0}});var m=M(h,2);{var _=p=>{ue(p,{name:"threshold",label:"Threshold",children:(w,A)=>{on(w,{min:-1,max:1,step:.1,decNum:1,get value(){return t().threshold},set value(y){t(t().threshold=y,!0)}})},$$slots:{default:!0}})},b=p=>{var w=ah(),A=K(w);ue(A,{name:"alpha",label:"Alpha, %:",children:(N,T)=>{Ye(N,{options:["10","5","1","0.1"],get value(){return t().alpha},set value(P){t(t().alpha=P,!0)}})},$$slots:{default:!0}});var y=M(A,2);ue(y,{name:"gamma",label:"Gamma, %:",children:(N,T)=>{Ye(N,{options:["5","1","0.1","0.01"],get value(){return t().gamma},set value(P){t(t().gamma=P,!0)}})},$$slots:{default:!0}});var k=M(y,2);ue(k,{name:"limits",label:"Limits:",children:(N,T)=>{Ye(N,{options:["classic","robust"],get value(){return t().limType},set value(P){t(t().limType=P,!0)}})},$$slots:{default:!0}}),C(p,w)};B(m,p=>{t().rule==="hard"?p(_):p(b,!1)})}C(u,d)};B(c,u=>{t()&&u(f)})}C(n,a),pe()}var ch=U('<span style="font-weight:bold"> </span><br/>',1),uh=U('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),fh=U('<span class="file-size svelte-1uxd0r7"> </span>'),dh=U('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function vh(n,e){ge(e,!0);let t=I(e,"title",3,"");var s=de(),l=K(s);{var o=a=>{ue(a,{children:(c,f)=>{var u=dh(),d=K(u),v=W(d);{var h=y=>{var k=ch(),N=K(k),T=W(N);ae(()=>Se(T,t())),C(y,k)};B(v,y=>{t()&&t()!==""&&y(h)})}var m=M(v,4),_=W(m),b=M(m,5);{var p=y=>{var k=uh(),N=K(k),T=W(N),P=M(N,4),L=W(P);ae(()=>{Se(T,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),Se(L,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),C(y,k)},w=y=>{var k=fh(),N=W(k);ae(()=>Se(N,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),C(y,k)};B(b,y=>{e.dataset.nresp&&e.dataset.nresp>0?y(p):y(w,!1)})}var A=M(d,2);ar(A,{get onclick(){return e.reset}}),ae(()=>{V(m,"title",e.dataset.fileName),Se(_,e.dataset.fileName)}),C(c,u)},$$slots:{default:!0}})};B(l,a=>{e.dataset&&a(o)})}C(n,s),pe()}var hh=U("<!> <!>",1),mh=U("<!> <!> <!> <!> <!>",1),gh=U("<!> <!>",1),ph=U("<p> </p>"),bh=U("<!> <p> </p>",1),_h=U("<p> </p>"),wh=U("<!> <!> <!>",1);function Ll(n,e){ge(e,!0);let t=I(e,"model",3,null),s=I(e,"outliers",19,()=>[]),l=I(e,"classMandatory",3,!1),o=I(e,"title",3,""),a=I(e,"dataset",15),c=I(e,"resobj",15);const f=[",",";"],u=g(()=>t()?["no","yes"]:["no","labels","values"]);let d=te(void 0),v=te(""),h=te(""),m=te(Fe(l())),_=te(","),b=te("no"),p=te(!1),w=te(null),A=te("neutral"),y=te("");function k(z){q(A,"error"),q(y,z,!0),console.error(z)}function N(){q(A,"neural"),q(y,"")}function T(){q(A,"success"),q(y,"")}function P(z,X,$){c()||q(w,e.WASM().then(le=>{c(dl(le,z,X,$,!0)),T()}).catch(le=>{c(null),k(le)}),!0)}function L(z,X){if(!z||z.size<10)return;const le=z.slice(0,1e5),we=new FileReader;we.onload=()=>{const ie=we.result;!ie||ie.length<0||((be=>{var ye=ci(be,4);q(_,ye[0],!0),q(p,ye[1],!0),q(m,ye[2],!0),q(b,ye[3],!0)})(_u(ie)),X&&r(b)!=="no"&&q(b,"yes"),T())},we.onerror=function(ie){csvString=null,k("Error reading CSV file. "+ie)},we.readAsText(le)}function F(z){try{const X=l()?Su(_a(z,r(_),r(b)==="yes"?"labels":r(b),r(p),r(m),r(v),r(h),0)):_a(z,r(_),r(b)==="yes"?"labels":r(b),r(p),r(m),r(v),r(h),0);if(X.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(X.values.ncols<2)throw new Error("Dataset should have at least two predictors.");if(l()&&(!X.classNames||X.classNames.length!==2))throw new Error("Dataset should have two classes.");if(!l()&&X.classNames&&X.classNames.length>0)throw new Error("New data should not contain class labels.");if(t()){const $=t().prep&&t().prep.npred?t().prep.npred:t().npred+t().exclvars.length,le=l()?$+t().nresp:$;if(X.values.ncols!==le)throw console.log(X),new Error("Dataset has different number of columns than the training set.");X.varrev=t().varrev,X.header=t().header,X.varlabels=t().varlabels,X.varvalues=t().varvalues,X.varindices=t().varindices,X.varvaluesName=t().varvaluesName,X.varvaluesUnits=t().varvaluesUnits}X.fileName=r(d).name.replace(/\.[^/.]+$/,""),a(X),T()}catch(X){a(null),k(X)}}function E(z){const X=new FileReader;X.onload=()=>{F(X.result)},X.readAsText(r(d))}async function S(z){try{const X=r(d)instanceof FileList?r(d):[r(d)];a(await Eu(X)),T()}catch(X){k("Failed to read SPC file: "+X)}}function R(){q(d,""),a(null),c(null),q(v,""),q(h,""),N()}me(()=>{if(!(r(d)===0||r(d)===void 0||a())){if(r(d)===null||r(d)===""){R();return}if(Array.isArray(r(d))){if(r(d).filter(z=>z.slice(-4)===".spc").length!==r(d).length){k("Multiple file selection is allowed only for SPC files.");return}S(r(d));return}r(d)&&(r(d).type==="text/csv"||r(d).type==="application/vnd.ms-excel")?(L(r(d),t()),N()):S([r(d)])}}),me(()=>{r(_)&&N()}),me(()=>{if(a()&&t()&&!c()&&!r(y))try{P(t(),a(),s()),T()}catch(z){a(null),c(null),k(z)}});var D=wh(),Y=K(D);{var j=z=>{var X=gh(),$=K(X);$r($,()=>r(d)===void 0,ie=>{ue(ie,{children:(be,ye)=>{var qe=de(),xe=K(qe);{var Ae=Te=>{fs(Te,{id:"dataFile",message:"Select CSV file with dataset",get file(){return r(d)},set file(se){q(d,se,!0)}})},Pe=Te=>{fs(Te,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return r(d)},set file(se){q(d,se,!0)}})};B(xe,Te=>{l()?Te(Ae):Te(Pe,!1)})}C(be,qe)},$$slots:{default:!0}})});var le=M($,2);{var we=ie=>{var be=mh(),ye=K(be);ue(ye,{label:"Delimiter",children:(se,oe)=>{Ye(se,{id:"sep",get options(){return f},get value(){return r(_)},set value(re){q(_,re,!0)}})},$$slots:{default:!0}});var qe=M(ye,2);ue(qe,{label:"Row labels",children:(se,oe)=>{Qt(se,{id:"hasLabels",options:["no","yes"],get value(){return r(p)},set value(re){q(p,re,!0)}})},$$slots:{default:!0}});var xe=M(qe,2);ue(xe,{label:"Header",children:(se,oe)=>{Ye(se,{id:"header",get options(){return r(u)},get value(){return r(b)},set value(re){q(b,re,!0)}})},$$slots:{default:!0}});var Ae=M(xe,2);{var Pe=se=>{var oe=hh(),re=K(oe);ue(re,{label:"Header name (predictors)",children:(ve,ce)=>{ka(ve,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return r(v)},set value(je){q(v,je,!0)}})},$$slots:{default:!0}});var fe=M(re,2);ue(fe,{label:"Header units (predictors)",children:(ve,ce)=>{ka(ve,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return r(h)},set value(je){q(h,je,!0)}})},$$slots:{default:!0}}),C(se,oe)};B(Ae,se=>{r(b)==="values"&&se(Pe)})}var Te=M(Ae,2);ue(Te,{label:" ",children:(se,oe)=>{tt(se,{text:"Load",onclick:E})},$$slots:{default:!0}}),C(ie,be)};B(le,ie=>{r(d)&&!Array.isArray(r(d))&&(r(d).type==="text/csv"||r(d).type==="application/vnd.ms-excel")&&ie(we)})}C(z,X)},O=z=>{var X=de(),$=K(X);{var le=we=>{var ie=de(),be=K(ie);Ws(be,()=>r(w),ye=>{ue(ye,{children:(qe,xe)=>{var Ae=bh(),Pe=K(Ae);ml(Pe);var Te=M(Pe,2),se=W(Te);ae(()=>Se(se,t()?"Loading data and apply model...":"Loading data...")),C(qe,Ae)},$$slots:{default:!0}})},void 0,(ye,qe)=>{ue(ye,{status:"error",children:(xe,Ae)=>{var Pe=ph(),Te=W(Pe);ae(()=>Se(Te,r(qe))),C(xe,Pe)},$$slots:{default:!0}})}),C(we,ie)};B($,we=>{r(w)&&we(le)})}C(z,X)};B(Y,z=>{a()?z(O,!1):z(j)})}var ee=M(Y,2);{var Z=z=>{vh(z,{get dataset(){return a()},reset:R,get title(){return o()}})};B(ee,z=>{a()&&z(Z)})}var J=M(ee,2);{var H=z=>{ue(z,{status:"error",children:(X,$)=>{var le=_h(),we=W(le);ae(()=>Se(we,r(y))),C(X,le)},$$slots:{default:!0}})};B(J,z=>{(r(A)==="error"||r(y))&&z(H)})}C(n,D),pe()}var yh=U('<div class="msg-select"> </div>'),xh=U('<div class="msg-select"> </div>'),kh=U('<div class="msg-select"> </div>'),Eh=U('<div class="msg-select"> </div>'),Sh=U('<div class="selected-buttons svelte-188sk7n"><!></div>'),Ah=U('<div class="selected-buttons svelte-188sk7n"><!></div>'),Ch=U("<!> <!> <!>",1),Nh=U("<button> </button>"),Ph=U('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Rl(n,e){ge(e,!0);let t=I(e,"selobjText",3,"Click to select an object..."),s=I(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=I(e,"clearText",3,"Click anywhere to remove selection..."),o=I(e,"params",15),a=Fe({objects:-1,variables:[]}),c=te(Fe(Object.keys(e.plots)[0]));function f(F,E){a.objects=E?E[F]:F}function u(F){a.objects=-1}function d(F){a.variables=F}function v(F){a.variables=[]}let h={objects:{select:f,unselect:u},variables:{select:d,unselect:v},stats:{}},m=g(()=>r(c)?e.plots[r(c)]:null),_=g(()=>r(m)?r(m).component:null);var b=Ph(),p=W(b),w=W(p),A=W(w);qn(A,()=>r(_),(F,E)=>{E(F,{get params(){return o()[r(c)]},get callbacks(){return h[r(m).scope]},get selected(){return a[r(m).scope]},get props(){return e.props}})});var y=M(w,2),k=W(y);{var N=F=>{var E=de(),S=K(E);{var R=Y=>{var j=yh(),O=W(j);ae(()=>Se(O,t())),C(Y,j)},D=Y=>{var j=xh(),O=W(j);ae(()=>Se(O,l())),C(Y,j)};B(S,Y=>{a[r(m).scope]<0?Y(R):Y(D,!1)})}C(F,E)};B(k,F=>{r(m).scope==="objects"&&o()[r(c)].plotType!=="l"&&t().length>0&&F(N)})}var T=M(k,2);{var P=F=>{var E=de(),S=K(E);{var R=Y=>{var j=kh(),O=W(j);ae(()=>Se(O,s())),C(Y,j)},D=Y=>{var j=Eh(),O=W(j);ae(()=>Se(O,l())),C(Y,j)};B(S,Y=>{a[r(m).scope].length===0?Y(R):Y(D,!1)})}C(F,E)};B(T,F=>{r(m).scope==="variables"&&o()[r(c)].plotType!=="l"&&s().length>0&&F(P)})}var L=M(p,2);Ve(L,21,()=>Object.keys(e.plots),De,(F,E)=>{var S=de(),R=K(S);{var D=j=>{var O=Ch(),ee=K(O);Ju(ee,{get title(){return r(m).label},labelWidth:12,get options(){return e.controls[r(c)]},get value(){return o()[r(c)]},set value(X){o(o()[r(c)]=X,!0)}});var Z=M(ee,2);{var J=X=>{var $=Sh(),le=W($);Er(le,()=>r(m).buttons,()=>a.objects),C(X,$)};B(Z,X=>{r(m).scope==="objects"&&r(m).buttons&&a.objects>=0&&X(J)})}var H=M(Z,2);{var z=X=>{var $=Ah(),le=W($);Er(le,()=>r(m).buttons,()=>a.variables),C(X,$)};B(H,X=>{r(m).scope==="variables"&&r(m).buttons&&a.variables.length>0&&X(z)})}C(j,O)},Y=j=>{var O=Nh();O.__keydown=()=>switchPlot(i),O.__click=()=>q(c,r(E),!0);var ee=W(O);ae(()=>{ct(O,1,`plot-selector plot-selector-${r(E)??""}`,"svelte-188sk7n"),Se(ee,e.plots[r(E)].label)}),C(j,O)};B(R,j=>{r(m)&&r(c)===r(E)?j(D):j(Y,!1)})}C(F,S)}),C(n,b),pe()}lt(["keydown","click"]);var Th=Ce("<text> </text>"),jh=Ce('<g class="series series-textlabels"></g>'),Lh=Ce('<g class="series series-line"><polyline class="line"></polyline></g>'),Rh=Ce("<rect></rect>"),Mh=Ce('<g class="series series-bar"></g>'),Fh=Ce("<text> </text>"),qh=Ce('<g class="series series-points series-points1"></g>'),zh=Ce('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),Ih=Ce('<g class="series series-points series-points1"><text> </text></g>'),Vh=Ce('<g class="series series-bar"><rect></rect></g>'),Oh=Ce('<g class="series series-text"><text> </text></g>'),Bh=Ce("<!><!><!>",1),Dh=Ce("<!><!><!><!><!>",1);function Yt(n,e){ge(e,!0);let t=I(e,"shortenLabels",3,!0),s=I(e,"lineWidth",3,1),l=I(e,"nBars",3,1),o=I(e,"barNum",3,1),a=I(e,"markerSize",3,null),c=I(e,"markerWidth",3,2),f=I(e,"marker",3,1),u=I(e,"colors",3,void 0),d=I(e,"filled",3,void 0),v=I(e,"mainColor",19,()=>ft.cal),h=I(e,"faceColor",3,null),m=I(e,"lineColor",19,v),_=I(e,"selected",19,()=>-1),b=I(e,"maskSelected",3,!0),p=I(e,"xRange",15),w=I(e,"yRange",15),A=I(e,"ind",3,null);function y(oe){!e.callbacks||!e.callbacks.select||Vr(oe,oe.target.tagName,re=>e.callbacks.select(re,A()))}function k(oe){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const N=Ct("axes"),T=g(()=>Et(e.xValues,"PlotSeries")),P=g(()=>r(T)?Et(e.yValues,"PlotSeries",r(T).length):null);me(()=>{if(A()){const oe=A().map(re=>re+1);p(r(T)?qr(r(T).subset(oe)):null),w(r(P)?qr(r(P).subset(oe)):null)}else p(r(T)?qr(r(T)):null),w(r(P)?qr(r(P)):null)});const L=g(()=>h()===null?e.plotType==="p"?"transparent":"white":h()),F=[1,.8,.8,.8,.8,.8,.8,.8],E=[.85,.65,.65,.65,.65,.65,.65,.65],S=g(()=>a()?a():e.plotType==="p"?F[f()-1]:E[f()-1]),R=g(()=>En[f()-1]),D=g(()=>bl[N.scales().plot]),Y=g(()=>rt([0],N.tY())[0]),j=g(()=>Dn([.8],N.tX())[0]),O=g(()=>e.plotType==="h"?r(j)/l():0),ee=g(()=>e.plotType==="h"?r(j)/2-(o()-1)*r(O):0),Z=g(()=>r(D));let J=g(()=>e.plotType==="l"||e.plotType==="b"?hs(r(T),r(P),N.tX(),N.tY()):null),H=g(()=>r(T)?rt(r(T),N.tX()):null),z=g(()=>r(P)?rt(r(P),N.tY()):null),X=g(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(oe=>oe.slice(0,Nd)):e.labels:null);const $=g(()=>A()?A():Jt(0,r(H).length-1));let le=g(()=>u()&&u().length===r(T).length?u():Array(r(T).length).fill(v())),we=g(()=>d()&&d().length===r(T).length?d().map(oe=>oe?"ff":"30"):Array(r(T).length).fill("30")),ie=g(()=>u()&&u().length===r(T).length?u().map((oe,re)=>oe+r(we)[re]):Array(r(T).length).fill(h()));const be=g(()=>`font-size:${r(S)}em;fill:${r(L)};cursor:default;text-anchor:middle;stroke-width:${c()}px;user-select:none;`),ye=`font-size:0.85em;fill:${Wa};cursor:default;text-anchor:middle;stroke:${Wa};stroke-width:0.1px;user-select:none;`,qe=g(()=>`font-size:${r(S)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),xe=g(()=>`fill:transparent;stroke-width:${s()}px;`),Ae=g(()=>`stroke-width:${s()}px;stroke:${m()}`);me(()=>{_()&&A()&&A().indexOf(_())<0&&e.callbacks.unselect()});var Pe=de(),Te=K(Pe);{var se=oe=>{var re=Dh(),fe=K(re);{var ve=he=>{var Le=jh();Ve(Le,21,()=>r($),De,(Ie,Be)=>{var He=Th(),Xe=W(He);ae(()=>{V(He,"opacity",r(Be)===_()),V(He,"x",r(H)[r(Be)]-r(ee)+r(O)/2),V(He,"y",r(z)[r(Be)]),V(He,"dy",r(P).v[r(Be)]<0?r(Z):-r(Z)),Se(Xe,r(X)[r(Be)])}),C(Ie,He)}),ae(()=>ot(Le,ye+(_()>=0?"opacity:0.2;":""))),C(he,Le)};B(fe,he=>{e.showLabels&&r(X)&&he(ve)})}var ce=M(fe);{var je=he=>{var Le=Lh(),Ie=W(Le);ae(()=>{ot(Le,r(xe)),V(Ie,"points",r(J)),V(Ie,"stroke",v())}),C(he,Le)};B(ce,he=>{(e.plotType==="l"||e.plotType==="b")&&he(je)})}var Oe=M(ce);{var ze=he=>{var Le=Mh();Le.__click=y,Ve(Le,21,()=>r($),De,(Ie,Be)=>{var He=Rh();ae(()=>{V(He,"x",r(H)[r(Be)]-r(ee)),V(He,"y",r(P).v[r(Be)]<0?r(Y):r(z)[r(Be)]),V(He,"fill",r(le)[r(Be)]),V(He,"width",r(O)),V(He,"height",r(P).v[r(Be)]<0?r(z)[r(Be)]-r(Y):r(Y)-r(z)[r(Be)])}),C(Ie,He)}),ae(()=>ot(Le,r(Ae)+(_()>=0?"opacity:0.2;":""))),C(he,Le)};B(Oe,he=>{e.plotType==="h"&&he(ze)})}var G=M(Oe);{var Q=he=>{var Le=qh();Le.__click=y,Ve(Le,21,()=>r($),De,(Ie,Be)=>{var He=Fh(),Xe=W(He);ae(()=>{V(He,"x",r(H)[r(Be)]),V(He,"y",r(z)[r(Be)]),V(He,"fill",r(ie)[r(Be)]),V(He,"stroke",r(le)[r(Be)]),Se(Xe,r(R))}),C(Ie,He)}),ae(()=>ot(Le,r(be)+(_()>=0?"opacity:0.2;":""))),C(he,Le)};B(G,he=>{(e.plotType==="p"||e.plotType==="b")&&he(Q)})}var ne=M(G);{var _e=he=>{var Le=Bh(),Ie=K(Le);{var Be=Pt=>{var _t=zh();V(_t,"x",0),V(_t,"y",0),_t.__click=k,C(Pt,_t)};B(Ie,Pt=>{b()&&Pt(Be)})}var He=M(Ie);{var Xe=Pt=>{var _t=Ih(),ut=W(_t),Ne=W(ut);ae(()=>{ot(_t,r(qe)),V(ut,"x",r(H)[_()]),V(ut,"y",r(z)[_()]),V(ut,"stroke",r(le)[_()]),V(ut,"fill",r(ie)[_()]),Se(Ne,r(R))}),C(Pt,_t)},dt=Pt=>{var _t=Vh(),ut=W(_t);ae(()=>{ot(_t,r(Ae)),V(ut,"stroke",r(le)[_()]),V(ut,"fill",r(le)[_()]),V(ut,"x",r(H)[_()]-r(ee)),V(ut,"y",r(P).v[_()]<0?r(Y):r(z)[_()]),V(ut,"width",r(O)),V(ut,"height",r(P).v[_()]<0?r(z)[_()]-r(Y):r(Y)-r(z)[_()])}),C(Pt,_t)};B(He,Pt=>{e.plotType!=="h"?Pt(Xe):Pt(dt,!1)})}var vr=M(He);{var Il=Pt=>{var _t=Oh(),ut=W(_t),Ne=W(ut);ae(()=>{ot(_t,ye),V(ut,"stroke",Ha),V(ut,"fill",Ha),V(ut,"x",r(H)[_()]),V(ut,"y",r(z)[_()]),V(ut,"dy",r(P).v[_()]<0?r(Z):-r(Z)),Se(Ne,r(X)[_()])}),C(Pt,_t)};B(vr,Pt=>{e.showLabels&&r(X)&&r(X).length>0&&Pt(Il)})}C(he,Le)};B(ne,he=>{_()>=0&&he(_e)})}C(oe,re)};B(Te,oe=>{r(H)&&r(z)&&oe(se)})}C(n,Pe),pe()}lt(["click"]);var Yh=U("<!> <!> <!> <!>",1);function Ka(n,e){ge(e,!0);let t=g(()=>e.props?e.props.res:null),s=g(()=>r(t)?Object.keys(r(t)):null),l=g(()=>e.params&&e.params.resID&&r(s)?e.params.resID==="both"?r(s):[e.params.resID]:null),o=g(()=>r(l)?r(t)[r(l)[0]]:null);const a={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"},c=g(()=>e.params.varSet==="X"?"x":"y"),f=g(()=>e.params.varForm==="cumulative"?"cum":""),u=g(()=>e.params.varType==="explained"?"exp":"res"),d=g(()=>r(f)+r(u)+"var"),v=g(()=>r(c)+r(f)+r(u)+"var"),h=g(()=>r(d)?a[r(d)]+" ("+e.params.varSet+")":""),m=g(()=>r(o).ncomp>1?1-r(o).ncomp*.065:-.1),_=g(()=>r(o).ncomp>1?r(o).ncomp*1.065:2.1),b=g(()=>[r(m),r(_)]),p=g(()=>r(o)?r(o).stat.components:null),w=g(()=>r(l)?r(l).map(L=>{const F=r(t)[L].stat[r(v)];return{yValues:Re(F),labels:Array.from(F).map(E=>E.toFixed(E<.1?3:2)),faceColor:Cl[L],mainColor:ft[L],marker:cn[L]}}):null),A=g(()=>r(w)?Dt(r(w).map(L=>Math.min(-.05,Dt(L.yValues)))):0),y=g(()=>[r(A)*1.1,1.1]),k=g(()=>ws(r(l)));var N=de(),T=K(N);{var P=L=>{{let F=g(()=>"plot-"+r(v));Pr(L,{get title(){return r(h)},get limX(){return r(b)},get limY(){return r(y)},xLabel:"Number of LVs",yLabel:"Variance",get fileName(){return r(F)},whole:!0,children:(E,S)=>{var R=Yh(),D=K(R);{var Y=J=>{{let H=g(()=>[e.props.ncomp]),z=g(()=>[e.props.ncomp]),X=g(()=>[r(y)[0]]),$=g(()=>[r(y)[1]]);Nr(J,{get xStart(){return r(H)},get xEnd(){return r(z)},get yStart(){return r(X)},get yEnd(){return r($)},lineColor:"#a0a0a0"})}};B(D,J=>{e.props.ncomp&&J(Y)})}var j=M(D,2);Ve(j,17,()=>r(w),De,(J,H)=>{Yt(J,{get xValues(){return r(p)},get yValues(){return r(H).yValues},get labels(){return r(H).labels},get faceColor(){return r(H).faceColor},get mainColor(){return r(H).mainColor},get marker(){return r(H).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var O=M(j,2);{var ee=J=>{var H=de(),z=K(H);Ve(z,17,()=>r(w),De,(X,$)=>{{let le=g(()=>[r(p)[e.props.ncomp-1]]),we=g(()=>[r($).yValues.v[e.props.ncomp-1]]);Yt(X,{get xValues(){return r(le)},get yValues(){return r(we)},get faceColor(){return r($).faceColor},get mainColor(){return r($).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},get marker(){return r($).marker},markerWidth:3})}}),C(J,H)};B(O,J=>{e.props.ncomp&&J(ee)})}var Z=M(O,2);_s(Z,{get items(){return r(k)}}),C(E,R)},$$slots:{default:!0}})}};B(T,L=>{r(p)&&r(w)&&L(P)})}C(n,N),pe()}var Wh=U("<!> <!> <!> <!>",1);function Ja(n,e){ge(e,!0);const t={sens:"Sensitivity",spec:"Specificity",eff:"Efficiency",acc:"Accuracy"},s={sens:"sensitivity",spec:"specificity",eff:"efficiency",acc:"accuracy"};let l=g(()=>e.props?e.props.classres:null),o=g(()=>r(l)?Object.keys(r(l)):null),a=g(()=>e.params&&e.params.resID&&r(o)?e.params.resID==="both"?r(o):[e.params.resID]:null),c=g(()=>r(a)?r(l)[r(a)[0]]:null),f=g(()=>e.params?t[e.params.fom]:""),u=g(()=>e.params?t[e.params.fom]+" ("+e.params.className+")":""),d=g(()=>r(c).ncomp>1?1-r(c).ncomp*.065:-.1),v=g(()=>r(c).ncomp>1?r(c).ncomp*1.065:2.1),h=g(()=>[r(d),r(v)]),m=g(()=>r(c)?Jt(1,r(c).ncomp,1):null),_=g(()=>{if(!r(a))return null;let k=0,N=Number.NEGATIVE_INFINITY,T=[];for(let P of r(a)){const L=r(l)[P].v[e.params.className].stat[s[e.params.fom]];k=Math.min(k,Dt(L)),N=Math.max(N,Kt(L)),T.push({yValues:Re(L),labels:Array.from(L).map(F=>F.toFixed(F<.1?3:2)),faceColor:Cl[P],mainColor:ft[P],marker:cn[P]})}return{yMin:k,yMax:N,values:T}}),b=g(()=>ws(r(a)));const p=[0,1.1];var w=de(),A=K(w);{var y=k=>{{let N=g(()=>"plot-"+e.params.fom);Pr(k,{get title(){return r(u)},get limX(){return r(h)},get limY(){return p},get yLabel(){return r(f)},xLabel:"Number of LVs",get fileName(){return r(N)},whole:!0,children:(T,P)=>{var L=Wh(),F=K(L);{var E=j=>{{let O=g(()=>[e.props.ncomp]),ee=g(()=>[e.props.ncomp]),Z=g(()=>[p[0]]),J=g(()=>[p[1]]);Nr(j,{get xStart(){return r(O)},get xEnd(){return r(ee)},get yStart(){return r(Z)},get yEnd(){return r(J)},lineColor:"#a0a0a0"})}};B(F,j=>{e.props.ncomp&&j(E)})}var S=M(F,2);Ve(S,17,()=>r(_).values,De,(j,O)=>{Yt(j,{get xValues(){return r(m)},get yValues(){return r(O).yValues},get labels(){return r(O).labels},get faceColor(){return r(O).faceColor},get mainColor(){return r(O).mainColor},get marker(){return r(O).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var R=M(S,2);{var D=j=>{var O=de(),ee=K(O);Ve(ee,17,()=>r(_).values,De,(Z,J)=>{{let H=g(()=>[r(m)[e.props.ncomp-1]]),z=g(()=>[r(J).yValues.v[e.props.ncomp-1]]);Yt(Z,{get xValues(){return r(H)},get yValues(){return r(z)},get faceColor(){return r(J).mainColor},get mainColor(){return r(J).mainColor},get marker(){return r(J).marker},plotType:"b",get showLabels(){return e.params.showLabels},markerWidth:3})}}),C(j,O)};B(R,j=>{e.props.ncomp&&j(D)})}var Y=M(R,2);_s(Y,{get items(){return r(b)}}),C(T,L)},$$slots:{default:!0}})}};B(A,k=>{r(m)&&r(_)&&k(y)})}C(n,w),pe()}var Hh=U("<!> <!> <!> <!>",1);function Za(n,e){ge(e,!0);const t={rmse:"RMSE",r2:"R^2",slope:"Slope"};let s=g(()=>e.props?e.props.res:null),l=g(()=>r(s)?Object.keys(r(s)):null),o=g(()=>e.params&&e.params.resID&&r(l)?e.params.resID==="both"?r(l):[e.params.resID]:null),a=g(()=>r(o)?r(s)[r(o)[0]]:null),c=g(()=>e.params?t[e.params.fom]:""),f=g(()=>e.params?t[e.params.fom]+" ("+r(a).varlabels[e.params.resp-1]+")":""),u=g(()=>r(a).ncomp>1?1-r(a).ncomp*.065:-.1),d=g(()=>r(a).ncomp>1?r(a).ncomp*1.065:2.1),v=g(()=>[r(u),r(d)]),h=g(()=>r(a)?r(a).stat.components:null),m=g(()=>{if(!r(o))return null;let k=0,N=Number.NEGATIVE_INFINITY,T=[];for(let P of r(o)){const L=r(s)[P].stat[e.params.fom].getcolref(e.params.resp);k=Math.min(k,Dt(L)),N=Math.max(N,Kt(L)),T.push({yValues:Re(L),labels:Array.from(L).map(F=>F.toFixed(F<.1?3:2)),faceColor:Cl[P],mainColor:ft[P],marker:cn[P]})}return{yMin:k,yMax:N,values:T}}),_=g(()=>ws(r(o)));const b=g(()=>r(m)?(r(m).yMax-r(m).yMin)*.05:0),p=g(()=>r(m)?[r(m).yMin-r(b),r(m).yMax+4*r(b)]:[0,1]);var w=de(),A=K(w);{var y=k=>{{let N=g(()=>"plot-"+e.params.fom);Pr(k,{get title(){return r(f)},get limX(){return r(v)},get limY(){return r(p)},get yLabel(){return r(c)},xLabel:"Number of LVs",get fileName(){return r(N)},whole:!0,children:(T,P)=>{var L=Hh(),F=K(L);{var E=j=>{{let O=g(()=>[e.props.ncomp]),ee=g(()=>[e.props.ncomp]),Z=g(()=>[r(p)[0]]),J=g(()=>[r(p)[1]]);Nr(j,{get xStart(){return r(O)},get xEnd(){return r(ee)},get yStart(){return r(Z)},get yEnd(){return r(J)},lineColor:"#a0a0a0"})}};B(F,j=>{e.props.ncomp&&j(E)})}var S=M(F,2);Ve(S,17,()=>r(m).values,De,(j,O)=>{Yt(j,{get xValues(){return r(h)},get yValues(){return r(O).yValues},get labels(){return r(O).labels},get faceColor(){return r(O).faceColor},get mainColor(){return r(O).mainColor},get marker(){return r(O).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var R=M(S,2);{var D=j=>{var O=de(),ee=K(O);Ve(ee,17,()=>r(m).values,De,(Z,J)=>{{let H=g(()=>[r(h)[e.props.ncomp-1]]),z=g(()=>[r(J).yValues.v[e.props.ncomp-1]]);Yt(Z,{get xValues(){return r(H)},get yValues(){return r(z)},get faceColor(){return r(J).mainColor},get mainColor(){return r(J).mainColor},get marker(){return r(J).marker},plotType:"b",get showLabels(){return e.params.showLabels},markerWidth:3})}}),C(j,O)};B(R,j=>{e.props.ncomp&&j(D)})}var Y=M(R,2);_s(Y,{get items(){return r(_)}}),C(T,L)},$$slots:{default:!0}})}};B(A,k=>{r(h)&&r(m)&&k(y)})}C(n,w),pe()}var Uh=U("<!> <!>",1),Xh=U("<!> <!>",1),Gh=U("<!> <!> <!> <!> <!> <!> <!>",1);function Ml(n,e){ge(e,!0);const t=g(()=>e.props?e.props.classmodel:null),s=g(()=>e.props?e.props.classres:null),l=g(()=>r(s)?Object.keys(r(s)):null),o=g(()=>e.params.resID&&r(l)?r(s)[e.params.resID]:null),a=g(()=>r(o)?r(o).classNames:null),c=g(()=>r(o)?r(o).nrows:1);function f(J,H){if(!J.ind)return new Array(J.nrows).fill(.5);const z=new Array(J.nrows).fill(1);for(let X of J.ind[H])z[X]=2;return z}function u(J,H,z){if(!J.ind){const $=new Array(J.nrows).fill(ft[e.params.resID]);for(let le=0;le<J.nrows;le++)z.d[le]||($[le]="#aaaaaa");return $}const X=new Array(J.nrows).fill("#aaaaaa");for(let $ of J.ind[H])X[$]=ft[e.params.resID];return X}const d=g(()=>e.props.ncomp?"Predictions (A = "+e.props.ncomp+")":""),v=g(()=>r(t).classNames[0]==e.params.className?0:1),h=g(()=>r(a)?Object.fromEntries(r(a).map(J=>[J,r(o).v[J].res[e.props.ncomp-1]])):null),m=g(()=>r(h)?r(h)[e.params.className]:null),_=g(()=>r(o)?f(r(o),e.params.className):null),b=g(()=>r(m)?r(m).yp:null),p=g(()=>r(o)?r(o).objlabels:null),w=g(()=>r(o)?u(r(o),e.params.className,r(m)):null),A=g(()=>r(t)&&r(t).crit?r(t).crit[e.params.className]:null),y=g(()=>r(o)?Ar(r(b)):[0,1]),k=[0,3],N=g(()=>{if(!r(t)||r(t).rule==="hard"||!r(t).crit)return null;const J={};for(let H of r(t).classNames){const z=H===e.params.className?2:1;J[H]={xValues:e.props.zscores.apply(X=>X*r(t).crit[H][1]+r(t).crit[H][0]),yValues:e.props.densnorm.apply(X=>X+z+.05),lineColor:H===e.params.className?ft[e.params.resID]:"#aaaaaa"}}return J}),T=g(()=>r(A)?yn((r(A)[2]-r(A)[0])/r(A)[1])+2.05:null),P=g(()=>r(A)?yn((r(A)[3]-r(A)[0])/r(A)[1])+2.05:null),L=g(()=>{if(r(t).rule==="hard")return r(v)==1?{xValues:[r(y)[0],r(y)[0],r(t).threshold,r(t).threshold],yValues:[k[0],k[1],k[1],k[0]]}:{xValues:[r(t).threshold,r(t).threshold,r(y)[1],r(y)[1]],yValues:[k[0],k[1],k[1],k[0]]};if(!r(N))return null;const J=r(N)[e.params.className];if(r(v)==1){const H=J.xValues.which(z=>z<r(A)[2]);return{xValues:Cr(Re([J.xValues.v[0]]),J.xValues.subset(H),Re([r(A)[2],r(A)[2]])),yValues:Cr(Re([k[0]]),J.yValues.subset(H),Re([r(T),k[0]]))}}else{const H=J.xValues.length,z=J.xValues.which(X=>X>=r(A)[2]);return{xValues:Cr(Re([r(A)[2],r(A)[2]]),J.xValues.subset(z),Re([J.xValues.v[H-1]])),yValues:Cr(Re([k[0],r(T)]),J.yValues.subset(z),Re([k[0]]))}}}),F=g(()=>{if(r(t).rule==="hard"||!r(N))return null;const J=r(N)[e.params.className];if(r(v)==1){const H=J.xValues.which(z=>z<r(A)[3]);return{xValues:Cr(Re([J.xValues.v[0]]),J.xValues.subset(H),Re([r(A)[3],r(A)[3]])),yValues:Cr(Re([k[0]]),J.yValues.subset(H),Re([r(T),k[0]]))}}else{const H=J.xValues.length,z=J.xValues.which(X=>X>=r(A)[3]);return{xValues:Cr(Re([r(A)[3],r(A)[3]]),J.xValues.subset(z),Re([J.xValues.v[H-1]])),yValues:Cr(Re([k[0],r(P)]),J.yValues.subset(z),Re([k[0]]))}}});let E=te(null),S=te(null),R=te(null);me(()=>{if(!r(o)){q(E,null),q(S,null),q(R,null);return}let J,H;if(r(o).ind){H=[],J=[];for(let z of Object.keys(r(o).ind))z===e.params.className?(J.push(ft[e.params.resID]),H.push(z+" (TP: "+r(m).TP+", FN: "+r(m).FN+")")):(J.push("#aaaaaa"),H.push(z+" (TN: "+r(m).TN+", FP: "+r(m).FP+")"))}else{const z=el(r(m).d),X=r(o).nrows-z;J=[ft[e.params.resID],"#aaaaaa"],H=["In: "+z,"Out: "+X]}q(E,J,!0),q(R,H,!0),q(S,[0,1,2],!0)});const D=g(()=>cn[e.params.resID]),Y=g(()=>r(D)==1?[1,.8]:[.8,.6]),j=g(()=>r(D)==1?[2,1.2]:[2,1.2]);var O=de(),ee=K(O);{var Z=J=>{ms(J,{get title(){return r(d)},get limX(){return r(y)},get limY(){return k},fileName:"plot-predictions",get onclick(){return e.callbacks.unselectObject},children:(H,z)=>{var X=Gh(),$=K(X);{var le=oe=>{var re=Uh(),fe=K(re);{let ce=g(()=>ft[e.params.resID]+"10");Va(fe,{get xValues(){return r(F).xValues},get yValues(){return r(F).yValues},get faceColor(){return r(ce)},lineColor:"transparent"})}var ve=M(fe,2);{let ce=g(()=>[r(A)[3],r(A)[3]]),je=g(()=>[r(P),k[0]]);Br(ve,{get xValues(){return r(ce)},get yValues(){return r(je)},get lineColor(){return ft[e.params.resID]},lineType:3})}C(oe,re)};B($,oe=>{r(F)&&oe(le)})}var we=M($,2);{var ie=oe=>{{let re=g(()=>ft[e.params.resID]+"15");Va(oe,{get xValues(){return r(L).xValues},get yValues(){return r(L).yValues},get faceColor(){return r(re)},lineColor:"transparent"})}};B(we,oe=>{r(L)&&oe(ie)})}var be=M(we,2);{var ye=oe=>{{let re=g(()=>[r(t).threshold,r(t).threshold]);Br(oe,{get yValues(){return k},get xValues(){return r(re)},lineType:2,get lineColor(){return ft[e.params.resID]}})}},qe=oe=>{var re=de(),fe=K(re);{var ve=ce=>{var je=Xh(),Oe=K(je);Ve(Oe,17,()=>r(a),De,(G,Q,ne,_e)=>{Br(G,{get xValues(){return r(N)[r(Q)].xValues},get yValues(){return r(N)[r(Q)].yValues},get lineColor(){return r(N)[r(Q)].lineColor}})});var ze=M(Oe,2);{let G=g(()=>[r(A)[2],r(A)[2]]),Q=g(()=>[r(T),k[0]]);Br(ze,{get xValues(){return r(G)},get yValues(){return r(Q)},get lineColor(){return ft[e.params.resID]},lineType:2})}C(ce,je)};B(fe,ce=>{r(N)&&ce(ve)},!0)}C(oe,re)};B(be,oe=>{r(t).rule==="hard"?oe(ye):oe(qe,!1)})}var xe=M(be,2);{let oe=g(()=>e.params.showLabels!=="hide");Yt(xe,{get xValues(){return r(b)},get yValues(){return r(_)},get colors(){return r(w)},get labels(){return r(p)},get selected(){return e.selected},get callbacks(){return e.callbacks},get marker(){return r(D)},get showLabels(){return r(oe)},get markerSize(){return r(Y)[r(c)>100?1:0]},get markerWidth(){return r(j)[r(c)>100?1:0]},plotType:"p"})}var Ae=M(xe,2);{var Pe=oe=>{{let re=g(()=>r(S)!==null);Sl(oe,{get show(){return r(re)},get colmap(){return r(E)},get breaks(){return r(S)},get labels(){return r(R)}})}};B(Ae,oe=>{r(S)&&r(E)&&r(R)&&oe(Pe)})}var Te=M(Ae,2);gs(Te,{label:"Predicted y-values",showGrid:!0});var se=M(Te,2);ps(se,{}),C(H,X)},$$slots:{default:!0}})};B(ee,J=>{r(h)&&J(Z)})}C(n,O),pe()}var Kh=U("<!> <!>",1),Jh=U("<!> <!> <!>",1);function Fl(n,e){ge(e,!0);let t=g(()=>e.props?e.props.model:null),s=g(()=>e.props?e.props.res:null),l=g(()=>r(s)?Object.keys(r(s)):null),o=g(()=>e.params&&e.params.resID&&r(l)?e.params.resID==="both"?r(l):[e.params.resID]:null),a=g(()=>r(o)?r(s)[r(o)[0]]:null);const c="Scores";function f(A,y){return A==="X"?"X":A==="Y"?"Y":y==="x"?"X":"Y"}function u(A,y,k,N){return(A==="X"||A==="Y")&&N==="x"?y:k}function d(A,y){const k=f(A.varSet,y),N=u(A.varSet,A.comp1,A.comp2,y),T=r(t).stat[k.toLocaleLowerCase()+"expvar"][N-1]*100;return k+"-scores (LV"+N+", "+T.toFixed(T>1?1:2)+"%)"}let v=g(()=>{if(!r(o)||!r(a))return null;let A=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,N=Number.NEGATIVE_INFINITY,T=[];for(let S of r(o)){const R=r(s)[S],D=e.params.varSet==="X"|e.params.varSet==="XY"?Nt(R,"xscores",e.params.varSet==="XY"?e.params.comp2:e.params.comp1):Nt(R,"yscores",e.params.comp1),Y=e.params.varSet==="X"?Nt(R,"xscores",e.params.comp2):Nt(R,"yscores",e.params.comp2);A=Math.min(A,Dt(D)),y=Math.min(y,Dt(Y)),k=Math.max(k,Kt(D)),N=Math.max(N,Kt(Y)),T.push({xValues:Re(D),yValues:Re(Y),labels:R.objlabels,marker:cn[S],faceColor:Ya[S],mainColor:ft[S]})}const P=(k-A)*.05,L=(N-y)*.05,F=[A-P,k+P],E=[y-L,N+L];return{limX:F,limY:E,values:T}});const h=g(()=>d(e.params,"x")),m=g(()=>d(e.params,"y"));let _=g(()=>ws(r(o)));var b=de(),p=K(b);{var w=A=>{{let y=g(()=>"plot-"+e.params.varSet.toLowerCase()+"scores");Pr(A,{title:c,get xLabel(){return r(h)},get yLabel(){return r(m)},get limX(){return r(v).limX},get limY(){return r(v).limY},get fileName(){return r(y)},get onclick(){return e.callbacks.unselectObject},children:(k,N)=>{var T=Jh(),P=K(T);{var L=S=>{var R=Kh(),D=K(R);{let j=g(()=>[r(v).limY[0]]),O=g(()=>[r(v).limY[1]]);Nr(D,{xStart:[0],xEnd:[0],get yStart(){return r(j)},get yEnd(){return r(O)},get lineColor(){return Wn}})}var Y=M(D,2);{let j=g(()=>[r(v).limX[0]]),O=g(()=>[r(v).limX[1]]);Nr(Y,{yStart:[0],yEnd:[0],get xStart(){return r(j)},get xEnd(){return r(O)},get lineColor(){return Wn}})}C(S,R)};B(P,S=>{e.props.ncomp&&S(L)})}var F=M(P,2);Ve(F,17,()=>r(v).values,De,(S,R)=>{Yt(S,{get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return r(R).xValues},get yValues(){return r(R).yValues},get faceColor(){return r(R).faceColor},get mainColor(){return r(R).mainColor},get marker(){return r(R).marker},get labels(){return r(R).labels},get showLabels(){return e.params.showLabels},plotType:"p",lineWidth:1.5})});var E=M(F,2);_s(E,{get items(){return r(_)}}),C(k,T)},$$slots:{default:!0}})}};B(p,A=>{r(v)&&A(w)})}C(n,b),pe()}var Zh=U("<!> <!> <!>",1);function Qa(n,e){ge(e,!0);const t="1 – specificity, β",s="Sensitivity, 1 – ɑ",l="plot-roc",o=[-.05,1.05],a=[-.05,1.05],c=g(()=>e.props&&e.props.res?e.props.res:null),f=g(()=>e.props&&e.props.classres?e.props.classres:null),u=g(()=>e.params?e.params.resID:null),d=g(()=>e.props?e.props.classmodel:null),v=g(()=>r(d)?r(d).classNames:null),h=Cr(ke.seq(1e-4,9e-4,1e-4),ke.seq(.001,.009,.001),ke.seq(.01,.98,.01),ke.seq(.99,.998,.001),ke.seq(.999,.9999,1e-4)),m=zr(h),_=ke.seq(-1,1,.01);function b(P,L,F,E,S,R){const D=Nt(P,"Yp",E,1),Y=L==="hard"?_:m,j={};for(let ie of[0,1]){const be=S[r(v)[ie]][F],ye=be.m[E-1],qe=be.s[E-1],xe=ke.zeros(Y.length),Ae=ke.zeros(Y.length),Pe=ie==0?(ce,je)=>ce>=je:(ce,je)=>ce<je,Te=R[r(v)[ie]],se=R[r(v)[1-ie]],oe=Te.length,re=se.length;let fe=0,ve=0;for(let ce of Y.v){let je=0,Oe=0,ze=L==="hard"?ce:ce*qe+ye;for(let G of Te)je+=Pe(D[G],ze);Ae.v[fe]=je/oe;for(let G of se)Oe+=!Pe(D[G],ze);xe.v[fe]=1-Oe/re,fe+=1}ie==0?(xe.v[0]=1,Ae.v[0]=1,xe.v[xe.length-1]=0,Ae.v[Ae.length-1]=0):(xe.v[0]=0,Ae.v[0]=0,xe.v[xe.length-1]=1,Ae.v[Ae.length-1]=1);for(let ce=0;ce<xe.length-1;ce++){const je=Math.abs(xe.v[ce+1]-xe.v[ce]);ve+=(Ae.v[ce]+Ae.v[ce+1])*je/2}j[r(v)[ie]]={x:xe,y:Ae,auc:Math.abs(ve)}}const O=r(v)[0],ee=r(v)[1],Z=ke.zeros(Y.length),J=ke.zeros(Y.length),H=R[O],z=R[ee],X=H.length,$=z.length,le=X+$;for(let ie=0;ie<Y.length;ie++)Z.v[ie]=j[ee].x.v[ie]*X/le+j[O].x.v[Y.length-ie-1]*$/le,J.v[ie]=j[ee].y.v[ie]*X/le+j[O].y.v[Y.length-ie-1]*$/le;let we=0;for(let ie=0;ie<Z.length-1;ie++){const be=Math.abs(Z.v[ie+1]-Z.v[ie]);we+=(J.v[ie]+J.v[ie+1])*be/2}return j.total={x:Z,y:J,auc:we},j}const p=g(()=>b(r(c)[r(u)],r(d).rule,r(d).limType,r(d).ncomp,r(d).params,r(f)[r(u)].ind));let w=g(()=>r(d).ncomp?`ROC (A = ${r(d).ncomp}, AUC = ${r(p)[e.params.className].auc.toFixed(4)})`:""),A=g(()=>r(f)[r(u)].v[e.params.className].stat.sensitivity[r(d).ncomp-1]),y=g(()=>r(f)[r(u)].v[e.params.className].stat.specificity[r(d).ncomp-1]);var k=de(),N=K(k);{var T=P=>{Pr(P,{get title(){return r(w)},xLabel:t,yLabel:s,get limX(){return o},get limY(){return a},fileName:l,children:(L,F)=>{var E=Zh(),S=K(E);Nr(S,{xStart:[0],xEnd:[1],yStart:[0],yEnd:[1],lineColor:"#a0a0a0",lineType:3});var R=M(S,2);Yt(R,{get xValues(){return r(p)[e.params.className].x},get yValues(){return r(p)[e.params.className].y},plotType:"l",showLabels:!1,get mainColor(){return ft[r(u)]},lineWidth:1.5});var D=M(R,2);{let Y=g(()=>[1-r(y)]),j=g(()=>[r(A)]);Oa(D,{get xValues(){return r(Y)},get yValues(){return r(j)},get lineColor(){return ft[e.params.resID]},lineWidth:2,get faceColor(){return ft[e.params.resID]}})}C(L,E)},$$slots:{default:!0}})};B(N,P=>{r(p)&&P(T)})}C(n,k),pe()}var Qh=U("<!> <!> <!>",1);function $h(n,e){ge(e,!0);let t=g(()=>e.props?e.props.model:null);function s(P,L,F){return!P||!L||L<1||L>P.ncomp?null:new ke(as(P,F,L))}let l=te(void 0),o=te(void 0);const a=g(()=>r(t)?Re(r(t).xvarvalues):null),c=g(()=>r(t)?Re(r(t).xvarindices):null),f=g(()=>r(t)?r(t).xvarlabels:null),u=g(()=>r(t)?s(r(t),e.params.comp2,e.params.statType):null),d=g(()=>r(t)?s(r(t),e.params.comp1,e.params.statType):null),v=g(()=>!r(t)||!e.params.comp1?null:e.params.plotType==="p"?{values:r(d),label:`LV${e.params.comp1}`}:e.params.plotType==="l"&&r(a)?{values:r(a),label:r(t).varvaluesName+(r(t).varvaluesUnits?", "+r(t).varvaluesUnits:"")}:{values:r(c),label:"Predictors"}),h=g(()=>r(v)?r(v).values:null),m=g(()=>r(v)?r(v).label:null),_=g(()=>r(u)),b=g(()=>`LV${e.params.comp2}`),p=g(()=>{if(r(o)&&r(o)[0]<Number.POSITIVE_INFINITY&&r(o)[1]>Number.NEGATIVE_INFINITY){const P=(r(o)[1]-r(o)[0])*.1;return[r(o)[0]-2*P,r(o)[1]+P]}else return[0,1]}),w=g(()=>{if(r(l)&&r(l)[0]<Number.POSITIVE_INFINITY&&r(l)[1]>Number.NEGATIVE_INFINITY){const P=Math.abs((r(l)[1]-r(l)[0])*.1);return e.params.plotType==="l"&&r(t).varrev?[r(l)[1]+P,r(l)[0]-P]:[r(l)[0]-P,r(l)[1]+P]}else return[0,1]}),A=g(()=>e.params.statType==="xloadings"?"X-loadings":"Weights"),y=g(()=>"plot-"+e.params.statType);var k=de(),N=K(k);{var T=P=>{Pr(P,{get xLabel(){return r(m)},get yLabel(){return r(b)},get title(){return r(A)},get fileName(){return r(y)},get limX(){return r(w)},get limY(){return r(p)},children:(L,F)=>{var E=Qh(),S=K(E);{let j=g(()=>[r(w)[0]]),O=g(()=>[r(w)[1]]);Nr(S,{get xStart(){return r(j)},get xEnd(){return r(O)},yStart:[0],yEnd:[0],get lineColor(){return Wn}})}var R=M(S,2);{var D=j=>{{let O=g(()=>[r(p)[0]]),ee=g(()=>[r(p)[1]]);Nr(j,{xStart:[0],xEnd:[0],get yStart(){return r(O)},get yEnd(){return r(ee)},get lineColor(){return Wn}})}};B(R,j=>{e.params.plotType==="p"&&j(D)})}var Y=M(R,2);Yt(Y,{get xValues(){return r(h)},get yValues(){return r(_)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return r(f)},shortenLabels:!1,get mainColor(){return Nl},markerWidth:2,get xRange(){return r(l)},set xRange(j){q(l,j,!0)},get yRange(){return r(o)},set yRange(j){q(o,j,!0)}}),C(L,E)},$$slots:{default:!0}})};B(N,P=>{r(h)&&r(_)&&P(T)})}C(n,k),pe()}var em=U("<!> <!>",1);function tm(n,e){ge(e,!0);let t=g(()=>e.props?e.props.model:null);const s=g(()=>e.props.ncomp?e.props.ncomp:1);let l=g(()=>r(t)&&r(s)>0?r(t).coeffs.subarray((r(s)-1)*r(t).npred*r(t).nresp,(r(s)-1)*r(t).npred*r(t).nresp+r(t).npred*r(t).nresp):null),o=g(()=>r(l)?new Ee(r(l),r(t).npred,r(t).nresp):null);const a=g(()=>r(t)?Re(r(t).xvarvalues):null),c=g(()=>r(t)?Re(r(t).xvarindices):null),f=g(()=>r(t)?r(t).xvarlabels:null),u=g(()=>r(t)?r(t).varvaluesName+(r(t).varvaluesUnits?", "+r(t).varvaluesUnits:""):""),d=g(()=>e.params.plotType==="h"?r(c):r(a)),v=g(()=>r(o)?r(o).getcolumn(e.params.resp):null),h=g(()=>e.params.plotType==="h"?"Predictors":r(u)),m=g(()=>e.props.ncomp?" (A = "+e.props.ncomp+")":""),_=g(()=>r(t)?"Regression coefficients for "+r(t).varlabels[e.params.resp-1]+r(m):""),b=g(()=>Ua(r(d),e.params.plotType,r(t).varrev)),p=g(()=>r(v)?Ar(r(v),.075):[0,1]),w="Coefficients";var A=de(),y=K(A);{var k=N=>{{let T=g(()=>e.params.plotType==="h");Pr(N,{get xLabel(){return r(h)},yLabel:w,get limX(){return r(b)},get limY(){return r(p)},get title(){return r(_)},get whole(){return r(T)},fileName:"plot-regcoeffs",children:(P,L)=>{var F=em(),E=K(F);{let R=g(()=>[r(b)[0]]),D=g(()=>[r(b)[1]]);Nr(E,{get xStart(){return r(R)},get xEnd(){return r(D)},yStart:[0],yEnd:[0],get lineColor(){return Wn}})}var S=M(E,2);Yt(S,{get xValues(){return r(d)},get yValues(){return r(v)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Nl},get labels(){return r(f)},shortenLabels:!1}),C(P,F)},$$slots:{default:!0}})}};B(y,N=>{r(d)&&r(v)&&N(k)})}C(n,A),pe()}var rm=U("<!> <!> <!>",1),nm=U('<div class="svelte-z3o1sd"><!></div>');function sm(n,e){ge(e,!0);let t=g(()=>!0),s=te(!1),l=te(null),o=te(null),a=te(null),c=te(null);const f=g(()=>r(l)!==null&&r(a)!==null?Math.min(r(l),r(a)):null),u=g(()=>r(o)!==null&&r(c)!==null?Math.max(r(o),r(c)):null),d=g(()=>r(l)!==null&&r(a)!==null?Math.abs(r(l)-r(a)):null),v=g(()=>r(o)!==null&&r(c)!==null?Math.abs(r(o)-r(c)):null),h=g(()=>e.props?e.props.model:null),m=g(()=>e.props&&e.props.ncomp>0?e.props.ncomp:1),_=g(()=>r(h)&&r(m)>0?(r(m)-1)*r(h).npred*r(h).nresp:null),b=g(()=>r(_)!==null?r(_)+r(h).npred*r(h).nresp:null),p=g(()=>r(b)!==null?new Ee(r(h).sr.subarray(r(_),r(b)),r(h).npred,r(h).nresp):null),w=g(()=>r(b)!==null?new Ee(r(h).vip.subarray(r(_),r(b)),r(h).npred,r(h).nresp):null),A=g(()=>r(h)?Re(r(h).xvarvalues):null),y=g(()=>r(h)?Re(r(h).xvarindices):null),k=g(()=>r(h)?r(h).xvarlabels:null),N=g(()=>r(A)&&r(y)&&r(w)?{values:r(A),indices:r(y),vip:r(w).getcolumn(e.params.resp)}:null),T=g(()=>r(w)&&r(p)?{vip:r(w).getcolumn(e.params.resp),selratio:r(p).getcolumn(e.params.resp)}:null),P=g(()=>r(h)?{values:r(h).varvaluesName+(r(h).varvaluesUnits?", "+r(h).varvaluesUnits:""),indices:"Predictors",vip:"VIP scores"}:null),L=g(()=>r(h)?{vip:"VIP scores",selratio:"Selectivity ratio"}:null),F=g(()=>r(N)?r(N)[e.params.xset]:null),E=g(()=>r(T)?r(T)[e.params.yset]:null),S=g(()=>r(P)?r(P)[e.params.xset]:null),R=g(()=>r(L)?r(L)[e.params.yset]:null),D=g(()=>"Variable importance (A = "+r(m)+")"),Y=g(()=>Ua(r(F),"l",r(h).varrev)),j=g(()=>r(E)?Ar(r(E),.075):[0,1]),O=g(()=>r(h)?r(h).npred<30?1:r(h).npred>200?.5:.8:1),ee=g(()=>e.selected&&e.selected.length>0?Re(e.selected.map(be=>r(F).v[be])):null),Z=g(()=>e.selected&&e.selected.length>0?Re(e.selected.map(be=>r(E).v[be])):null);function J(){const be=r(u)-r(v),ye=r(f)+r(d),qe=[];for(let xe=0;xe<=r(F).length;xe++){const Ae=r(F).v[xe],Pe=r(E).v[xe];Ae>=r(f)&&Ae<=ye&&Pe>=be&&Pe<=r(u)&&qe.push(xe)}qe.length>0&&e.callbacks.select(qe),q(l,null),q(o,null),q(a,null),q(c,null)}function H(be,ye){e.callbacks.unselect(),q(s,!0),q(l,be,!0),q(o,ye,!0),q(a,be,!0),q(c,ye,!0)}function z(be,ye){q(s,!1),q(t,!0),J()}function X(be,ye){r(s)&&(q(a,be,!0),q(c,ye,!0))}function $(){if(r(t)){q(t,!1);return}q(s,!1),q(l,null),q(o,null),q(a,null),q(c,null),e.callbacks.unselect()}var le=de(),we=K(le);{var ie=be=>{var ye=nm(),qe=W(ye);Pr(qe,{get xLabel(){return r(S)},get yLabel(){return r(R)},get limX(){return r(Y)},get limY(){return r(j)},get title(){return r(D)},onmousedown:H,onmouseup:z,onmousemove:X,onclick:$,fileName:"plot-varimp",children:(xe,Ae)=>{var Pe=rm(),Te=K(Pe);{let ve=g(()=>Nl+(e.selected&&e.selected.length>0?"80":""));Yt(Te,{get xValues(){return r(F)},get yValues(){return r(E)},get markerSize(){return r(O)},get mainColor(){return r(ve)},plotType:"p",get showLabels(){return e.params.showLabels},get labels(){return r(k)},shortenLabels:!1})}var se=M(Te,2);{var oe=ve=>{{let ce=g(()=>[r(f)]),je=g(()=>[r(u)]),Oe=g(()=>[r(d)]),ze=g(()=>[r(v)]);Yn(ve,{get left(){return r(ce)},get top(){return r(je)},get width(){return r(Oe)},get height(){return r(ze)},faceColor:"#ff000040"})}};B(se,ve=>{r(f)&&r(u)&&r(s)&&ve(oe)})}var re=M(se,2);{var fe=ve=>{Yt(ve,{get xValues(){return r(ee)},get yValues(){return r(Z)},get markerSize(){return r(O)},mainColor:"red",plotType:"p",shortenLabels:!1})};B(re,ve=>{r(ee)&&r(Z)&&ve(fe)})}C(xe,Pe)},$$slots:{default:!0}}),C(be,ye)};B(we,be=>{r(F)&&r(E)&&be(ie)})}C(n,le),pe()}var lm=U("<!> <!> <!> <!> <!>",1);function om(n,e){ge(e,!0);let t=g(()=>e.props?e.props.scalars:null);const s=[-99999,-2,-1,0,.2,.5,.8,1.2,1.5,1.8,2,2.5,3,99999],l=["#6200DF","#6923FF","#648FFF","#8CCDFD","#D2ECFF","#E8F5FF","#fefeff","#FFF5E5","#FFE5BE","#FFCE85","#FFA34E","#FF8024","#CF5903"],o=s.map(b=>b.toFixed(1));o[0]="&minus;&infin;",o[o.length-1]="&infin;";const a=g(()=>r(t)?r(t).nrows/8:1),c=g(()=>r(t)?[.45,r(t).ncols+.6]:[0,1]),f=g(()=>r(t)?[.45,r(t).nrows+Math.max(.9,r(a))]:[0,1]),u="PV-scalars",d="Segments, k",v="Components, A";var h=de(),m=K(h);{var _=b=>{ms(b,{get limX(){return r(c)},get limY(){return r(f)},title:u,fileName:"plot-pvscalars",children:(p,w)=>{var A=lm(),y=K(A);Ed(y,{get values(){return r(t)},get breaks(){return s},get colmap(){return l}});var k=M(y,2);Sl(k,{get breaks(){return s},get colmap(){return l},get labels(){return o}});var N=M(k,2);gs(N,{label:v,whole:!0});var T=M(N,2);El(T,{label:d,whole:!0});var P=M(T,2);ps(P,{}),C(p,A)},$$slots:{default:!0}})};B(m,b=>{r(t)&&b(_)})}C(n,h),pe()}function $a(n){const e=Object.keys(n),t=e.length>1?[...e,"both"]:e,s=e.length>1?"both":e[0];return{resID:{el:Ye,hidden:e.length==1,default:s,label:"Show",props:{options:t}},varSet:{el:Ye,hidden:!1,default:"X",label:"Variance for",props:{options:["X","Y"]}},varType:{el:Ye,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:Ye,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function ei(n,e){const t=Object.keys(n),s=t.length>1?[...t,"both"]:t,l=["rmse","r2","slope"],o=t.length>1?"both":t[0];return{resID:{el:Ye,hidden:t.length==1,default:o,label:"Show",props:{options:s}},fom:{el:Ye,hidden:!1,default:"rmse",label:"FoM",props:{options:l}},resp:{el:Zt,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function ql(n){const e=Object.keys(n),t=e.length>1?[...e,"both"]:e,s=n[e[0]],l=s.Yref?["X","Y","XY"]:["X"],o=e.length>1?"both":e[0];return{resID:{el:Ye,hidden:e.length===1,default:o,label:"Show",props:{options:t}},varSet:{el:Ye,hidden:s.Yref===null,default:"X",label:"Scores for",props:{options:l}},comp2:{el:Zt,hidden:!1,default:s.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:s.ncomp}},comp1:{el:Zt,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:s.ncomp}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function am(n,e){return{statType:{el:Ye,hidden:!1,default:"xloadings",label:"Show",props:{options:["xloadings","weights"]}},plotType:{el:Ea,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:Zt,hidden:!1,default:n.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:n.ncomp}},comp1:{el:Zt,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:n.ncomp}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function im(n){return{plotType:{el:Ea,hidden:!1,default:"l",label:"Plot type",props:{options:["l","h"]}},resp:{el:Zt,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function cm(n){return{yset:{el:Ye,hidden:!1,default:"vip",label:"Y-axis",props:{options:["vip","selratio"]}},xset:{el:Ye,hidden:!1,default:"values",label:"X-axis",props:{options:["values","indices","vip"]}},resp:{el:Zt,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function um(){return{}}function ti(n,e){const t=Object.keys(n),s=t.length>1?[...t,"both"]:t,l=["sens","spec","eff","acc"],o=t.length>1?"both":t[0],a=[...e,"total"];return{resID:{el:Ye,hidden:t.length==1,default:o,label:"Show",props:{options:s}},fom:{el:Ye,hidden:!1,default:"sens",label:"FoM",props:{options:l}},className:{el:Ye,hidden:!1,default:e[0],label:"Class",props:{options:a}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function zl(n,e){return{resID:{el:Ye,hidden:n.length==1,default:n[0],label:"Show",props:{options:n}},className:{el:Ye,hidden:!1,default:e[0],label:"Class",props:{options:e}},showLabels:{el:Ye,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","show"]}}}}function ri(n,e){const t=e;return{resID:{el:Ye,hidden:n.length==1,default:n[0],label:"Show",props:{options:n}},className:{el:Ye,hidden:!1,default:e[0],label:"Class",props:{options:t}}}}var fm=U("<!> <!>",1),dm=U("<p>can not exclude</p>");function vm(n,e){ge(e,!0);const t=(b,p=yt)=>{ue(b,{label:"Selected",children:(w,A)=>{var y=fm(),k=K(y);tt(k,{onclick:()=>e.showContributions(p()),text:"plot"});var N=M(k,2);{var T=P=>{tt(P,{onclick:()=>e.markOutlier(p()),text:"remove"})};B(N,P=>{p()>=0&&P(T)})}C(w,y)},$$slots:{default:!0}})},s=(b,p=yt)=>{ue(b,{label:"Selected",children:(w,A)=>{var y=de(),k=K(y);{var N=P=>{tt(P,{onclick:()=>e.excludeVars(p()),get text(){return`exclude ${p().length??""} variables`}})},T=P=>{var L=dm();C(P,L)};B(k,P=>{r(o).cal.npred-p().length>=2?P(N):P(T,!1)})}C(w,y)},$$slots:{default:!0}})},l=1,o=g(()=>({cal:e.res.cal.pls,pv:e.res.pv.pls})),a=g(()=>({cal:e.res.cal.da,pv:e.res.pv.da})),c=g(()=>e.model.da.ncomp),f=g(()=>({pred:{label:"Predictions",scope:"objects",component:Ml,buttons:t},fom:{label:"Figures of merit (classification)",scope:"stats",component:Ja},roc:{label:"ROC curve",scope:"stats",component:Qa},loadings:{label:"X-loadings and weights",scope:"stats",component:$h},regcoeffs:{label:"Regression coefficients",scope:"stats",component:tm},varsel:{label:"Variable importance",scope:"variables",component:sm,buttons:s},fom2:{label:"Figures of merit (regression)",scope:"stats",component:Za},scores:{label:"Scores",scope:"objects",component:Fl,buttons:t},variance:{label:"Variance",scope:"stats",component:Ka},scalars:{label:"PV scalars",scope:"stats",component:om}})),u=Fe({pred:zl(["cal","pv"],e.model.da.classNames),fom:ti(r(a),e.model.da.classNames),fom2:ei(r(o),1),roc:ri(["cal","pv"],e.model.da.classNames),scores:ql(r(o)),loadings:am(e.model.pls,r(c)),regcoeffs:im(l),varsel:cm(l),variance:$a(r(o)),scalars:um(r(o))});let d=te(Fe({pred:pt(u.pred),fom:pt(u.fom),fom2:pt(u.fom2),roc:pt(u.roc),scores:pt(u.scores),loadings:pt(u.loadings),regcoeffs:pt(u.regcoeffs),varsel:pt(u.varsel),variance:pt(u.variance),scalars:pt(u.scalars)}));me(()=>{r(d).scores.varSet==="XY"?(u.scores.comp1.hidden=!0,u.scores.comp2.label="LV"):(u.scores.comp2.label="LV (y-axis)",u.scores.comp1.hidden=!1)}),me(()=>{r(d).loadings.plotType!=="p"?u.loadings.comp1.hidden=!0:u.loadings.comp1.hidden=!1});const v=ke.seq(-10,10,.1),h=yn(v),m=g(()=>({res:r(o),classres:r(a),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:r(c),scalars:e.scalars,zscores:v,densnorm:h})),_={markOutlier:e.markOutlier};Rl(n,{get plots(){return r(f)},get props(){return r(m)},get controls(){return u},get callbacks(){return _},get params(){return r(d)},set params(b){q(d,b,!0)}}),pe()}var hm=U('<div class="outliers-pane svelte-1mp4dba"><!></div>'),mm=U('<div class="exclvars-pane svelte-1mp4dba"><!></div>'),gm=U('<div class="model-calculator svelte-1mp4dba"><!></div>'),pm=U('<div class="pcv-calculator svelte-1mp4dba"><!></div>'),bm=U('<div class="buttons"><!> <!> <!></div>'),_m=U('<div class="ncomp-selector svelte-1mp4dba"><!> <!></div>'),wm=U('<div class="result-stats svelte-1mp4dba"><!></div>'),ym=U(`<p class="svelte-1mp4dba">This tab lets you train a PLS1-DA classification model and optimize it using Procrustes cross-validation.
               After that you can save the model to a file, apply it to a test set (tab <strong>Test</strong>)
               or to a new set of samples whose response us unknown (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training/calibration set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows
               correspond to observations or objects, columns — to variables (both response and predictors).</p> <p class="svelte-1mp4dba">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed
               that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If x-variables
               are signals, e.g. spectra, this part of header can content numeric values, e.g. wavelength or wavenumbers.
               If this is the case, select <em>values</em> option for the header. This will let you to specify
               name of the values (e.g. <em>Wavelength</em>) and the units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1mp4dba">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — if so, just set
               the corresponding options after selecting the file.</p> <p class="svelte-1mp4dba">The column with class labels should be located right after the column with object/row labels. If there are no
               object labels, the response variable is expected to be in the first column. <strong>The column with class
                  labels is mandatory in the training set and it must contain labels for two classes.</strong></p> <p class="svelte-1mp4dba">Here is an example how data structure may look like (note, that row labels and header are optional):</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">Red</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">Blue</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">Red</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">Blue</td><td class="svelte-1mp4dba">12.2</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">14.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),xm=U(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to decide how to preprocess the data. You can either skip preprocessing (in the model settings you
               will be able to apply centering and scaling), create the chain of preprocessing methods in special constructor
               (use <em>Create</em> to load the constructor) or load already built preprocessing model from a file. Make your choice.</p>`,1),km=U(`<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Now you can create a global PLS model for the training set. Use more components/latent variables (LVs) than
               you expect to be optimal. You will have possibility to select the optimal number of components later.</p>`,1),Em=U(`<p class="svelte-1mp4dba"><strong>Step 4</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set,
               which will help you to optimize PLS-DA model parameters. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">After this step PLS-DA model will be created automatically and you will be able to explore it and tune
               its parameters.</p>`,1),Sm=U("<!> <!> <!>",1),Am=U('<div class="help-text svelte-1mp4dba"><!></div>'),Cm=U('<div class="app-container svelte-1mp4dba"><!> <div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function Nm(n,e){ge(e,!0);const t=g(()=>e.session.train);let s=te(-1),l=te(!1);function o(H){if(H.length<1)return;const z=H.map(X=>r(t).model.pls.varindices[X+r(t).model.pls.nresp]);if(z.length>0){const X=new Set(r(t).exclvars),$=[...new Set(z)].filter(le=>!X.has(le));r(t).exclvars=r(t).exclvars.concat($),r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1}}function a(){r(t).exclvars=[],r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1}function c(H){if(H<0||H>r(t).calres.pls.nrows-1)return;const z=r(t).calres.pls.objindices[H];z>=0&&!r(t).outliers.includes(z)&&(r(t).outliers.push(z),r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1)}function f(){r(t).outliers=[],r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1}function u(){r(t).outliers.pop(),r(t).model={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).calsetp=null,r(t).prepmodel=null,r(t).pvset=null,r(t).ind=null,r(t).ncomp_selected=1}function d(H,z){H<0||(q(s,H,!0),q(l,!0))}function v(){q(l,!1),q(s,-1)}me(()=>{r(t).calset===null&&(r(t).pvres={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).pvset=null,r(t).calsetp=null,r(t).prepmodel=null,r(t).prepobj=[],r(t).prepType=null,r(t).outliers=[],r(t).exclvars=[],r(t).ind=null,r(t).ncomp_selected=1,r(t).model={pls:null,da:null})}),me(()=>{r(t).model.pls===null&&(r(t).model.da=null,r(t).calres={pls:null,da:null},r(t).pvres={pls:null,da:null},r(t).pvset=null)}),me(()=>{r(t).prepmodel||(r(t).calres={pls:null,da:null},r(t).calsetp=null,r(t).exclvars=[])}),me(()=>{r(t).pvset===null&&(r(t).pvres={pls:null,da:null})}),me(()=>{r(t).calsetp||(r(t).model={pls:null,da:null},r(t).calres={pls:null,da:null},r(t).pvres={pls:null,da:null})}),me(()=>{r(t).calres&&r(t).calres.pls&&(r(t).ind=Sa(r(t).calres.pls.Yref.getcolref(1),r(t).calset.classNames))}),me(()=>{if(r(t).model.pls&&r(t).model.ncomp&&r(t).pvres.pls&&r(t).pvres.pls.stat){const H=r(t).pvres.pls.stat.rmse.getcolref(1),X=H.map(($,le)=>le>0?1-$*$/H[le-1]**2:1).findIndex($=>$<=.0975);r(t).ncomp_selected=X<0?r(t).model.ncomp:X}}),me(()=>{r(t).calres.pls&&r(t).model.da&&(r(t).calres.da=ds(r(t).calres.pls,r(t).model.da,r(t).ind))}),me(()=>{r(t).pvres.pls&&r(t).model.da&&(r(t).pvres.da=ds(r(t).pvres.pls,r(t).model.da,r(t).ind))}),me(()=>{const H=sr(()=>JSON.stringify(e.session,Bn));e.backupSession(H,r(t).calset,r(t).calsetp,r(t).pvres.pls,r(t).pvres.da)});var h=Cm(),m=W(h);{var _=H=>{{let z=g(()=>({cal:r(t).calres.pls,pv:r(t).pvres.pls}));Pl(H,{get model_getter(){return as},get res_getter(){return Nt},get model(){return r(t).model.pls},get res(){return r(z)},get ncomp(){return r(t).model.da.ncomp},get selected(){return r(s)},closeModal:v})}};B(m,H=>{r(l)&&H(_)})}var b=M(m,2),p=W(b),w=W(p);Ll(w,{classMandatory:!0,get dataset(){return r(t).calset},set dataset(H){r(t).calset=H}});var A=M(p,2);{var y=H=>{var z=hm(),X=W(z);gl(X,{get outliers(){return r(t).outliers},get dataset(){return r(t).calset},resetOutliers:f,undoOutliers:u}),C(H,z)};B(A,H=>{r(t).outliers&&r(t).outliers.length>0&&H(y)})}var k=M(A,2);{var N=H=>{Iv(H,{get WASM(){return e.WASM},get rawdata(){return r(t).calset},get outliers(){return r(t).outliers},get prepType(){return r(t).prepType},set prepType(z){r(t).prepType=z},get prepobj(){return r(t).prepobj},set prepobj(z){r(t).prepobj=z},get prepdata(){return r(t).calsetp},set prepdata(z){r(t).calsetp=z},get prepmeta(){return r(t).prepmeta},set prepmeta(z){r(t).prepmeta=z},get prepmodel(){return r(t).prepmodel},set prepmodel(z){r(t).prepmodel=z}})};B(k,H=>{r(t).calset&&H(N)})}var T=M(k,2);{var P=H=>{var z=mm(),X=W(z);rf(X,{get exclvars(){return r(t).exclvars},get dataset(){return r(t).calset},resetExclvars:a}),C(H,z)};B(T,H=>{r(t).exclvars&&r(t).exclvars.length>0&&H(P)})}var L=M(T,2);{var F=H=>{var z=gm(),X=W(z);$v(X,{get WASM(){return e.WASM},get dataset(){return r(t).calsetp},get outliers(){return r(t).outliers},get exclvars(){return r(t).exclvars},get model(){return r(t).model.pls},set model($){r(t).model.pls=$},get resobj(){return r(t).calres.pls},set resobj($){r(t).calres.pls=$}}),C(H,z)};B(L,H=>{r(t).calsetp&&H(F)})}var E=M(L,2);{var S=H=>{var z=pm(),X=W(z);oh(X,{get WASM(){return e.WASM},get calset(){return r(t).calsetp},get outliers(){return r(t).outliers},get model(){return r(t).model.pls},get calres(){return r(t).calres.pls},get pvset(){return r(t).pvset},set pvset($){r(t).pvset=$},get pvres(){return r(t).pvres.pls},set pvres($){r(t).pvres.pls=$},get pvscalars(){return r(t).pvscalars},set pvscalars($){r(t).pvscalars=$}}),C(H,z)};B(E,H=>{r(t).calsetp&&r(t).model.pls&&H(S)})}var R=M(E,2);{var D=H=>{var z=_m(),X=W(z);Ga(X,{get plsmodel(){return r(t).model.pls},get plsres(){return r(t).calres.pls},get ind(){return r(t).ind},get ncomp(){return r(t).ncomp_selected},get damodel(){return r(t).model.da},set damodel(le){r(t).model.da=le}});var $=M(X,2);ue($,{label:"Download",children:(le,we)=>{var ie=bm(),be=W(ie);tt(be,{onclick:()=>vs(r(t).calres,r(t).calset,"train",r(t).model.da.ncomp),text:"Res (cal)"});var ye=M(be,2);tt(ye,{onclick:()=>vs(r(t).pvres,r(t).pvset,"PV",r(t).model.da.ncomp),text:"Res (pv)"});var qe=M(ye,2);tt(qe,{onclick:()=>Aa(r(t).model,r(t).prepmodel),text:"Model"}),C(le,ie)},$$slots:{default:!0}}),C(H,z)};B(R,H=>{r(t).model.pls&&r(t).calres.pls&&r(t).pvres.pls&&r(t).ncomp_selected&&H(D)})}var Y=M(R,2);{var j=H=>{var z=wm(),X=W(z);{let $=g(()=>({cal:r(t).calres.da,pv:r(t).pvres.da}));Xa(X,{get res(){return r($)},get model(){return r(t).model.da}})}C(H,z)};B(Y,H=>{r(t).calres.da&&r(t).pvres.da&&r(t).model.da&&H(j)})}var O=M(b,2),ee=W(O);{var Z=H=>{var z=Am(),X=W(z);{var $=we=>{var ie=ym();C(we,ie)},le=we=>{var ie=Sm(),be=K(ie);{var ye=Te=>{var se=xm();C(Te,se)};B(be,Te=>{r(t).calset&&!r(t).prepmodel&&Te(ye)})}var qe=M(be,2);{var xe=Te=>{var se=km();C(Te,se)};B(qe,Te=>{r(t).prepmodel&&!r(t).model.pls&&Te(xe)})}var Ae=M(qe,2);{var Pe=Te=>{var se=Em();C(Te,se)};B(Ae,Te=>{r(t).model&&r(t).model.pls&&!r(t).pvset&&Te(Pe)})}C(we,ie)};B(X,we=>{r(t).calset?we(le,!1):we($)})}C(H,z)},J=H=>{var z=de(),X=K(z);$r(X,()=>r(t).pvres&&r(t).model,$=>{var le=de(),we=K(le);{var ie=be=>{{let ye=g(()=>({cal:r(t).calset,pv:r(t).pvset})),qe=g(()=>({cal:r(t).calres,pv:r(t).pvres}));vm(be,{markOutlier:c,showContributions:d,excludeVars:o,get data(){return r(ye)},get res(){return r(qe)},get scalars(){return r(t).pvscalars},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected}})}};B(we,be=>{r(t).calres&&r(t).pvres&&r(t).model.pls&&r(t).model.da&&r(t).calset&&r(t).pvset&&be(ie)})}C($,le)}),C(H,z)};B(ee,H=>{!r(t).calres.da||!r(t).pvres.da||!r(t).model?H(Z):H(J,!1)})}C(n,h),pe()}var Pm=U("<!> <!>",1),Tm=U('<br/><span style="color:#a0a0a0;">Optimal LVs:</span> <span style="color:#606060;"> </span>',1),jm=U('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),Lm=U('<br/><span style="color:#a0a0a0;">Excluded</span> <span style="color:#a0a0a0;">variables.</span>',1),Rm=U('<p class="info-text svelte-7h7avz"><span>Model file:</span> <span style="color:#606060;" class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model info:</span> <!> <br/><span style="color:#a0a0a0;">Classes:</span> <!> <!></p> <!>',1),Mm=U("<p><!></p>"),Fm=U("<!> <!>",1);function ni(n,e){ge(e,!0);let t=I(e,"model",15),s=te(""),l=te("neutral"),o=te("");function a(p){try{const w=JSON.parse(p,vl);if(Array.isArray(w.pls.v)&&(w.pls.v=Float64Array.from(w.pls.v)),!(w.pls.class[0]==="plsmodel"&&w.pls.nresp===1&&Object.keys(w).includes("da")))throw Error("The JSON file you selected does not contain PLS1-DA model.");w.pls.fileName=r(u),t(w),q(l,"success"),q(o,"")}catch(w){console.error(w),t(null),q(l,"error"),q(o,w,!0)}}function c(p){const w=new FileReader;w.onload=()=>{a(w.result)},w.readAsText(r(s))}function f(){q(s,""),t(null),q(l,"neutral"),q(o,"")}me(()=>{r(s)===null?(t(null),q(l,"neutral"),q(o,"")):(q(l,"neutral"),q(o,""))});let u=g(()=>r(s)?r(s).name.replace(/\.[^/.]+$/,""):"");var d=Fm(),v=K(d);{var h=p=>{var w=Pm(),A=K(w);$r(A,()=>r(s),N=>{ue(N,{name:"file-selector",children:(T,P)=>{fs(T,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return r(s)},set file(L){q(s,L,!0)}})},$$slots:{default:!0}})});var y=M(A,2);{var k=N=>{ue(N,{name:"load-button",label:" ",children:(T,P)=>{tt(T,{onclick:c,text:"Load"})},$$slots:{default:!0}})};B(y,N=>{r(s)&&N(k)})}C(p,w)},m=p=>{ue(p,{name:"info",class:"info",children:(w,A)=>{var y=Rm(),k=K(y),N=M(W(k),2),T=W(N),P=M(N,4),L=M(P);{var F=O=>{var ee=Tm(),Z=M(K(ee),3),J=W(Z);ae(()=>Se(J,t().da.ncomp)),C(O,ee)};B(L,O=>{t().da.ncomp&&O(F)})}var E=M(L,4),S=M(E);{var R=O=>{var ee=jm(),Z=M(K(ee),3);jl(Z,{get prepmodel(){return t().pls.prep}}),C(O,ee)};B(S,O=>{t().pls.prep&&O(R)})}var D=M(S,2);{var Y=O=>{var ee=Lm(),Z=M(K(ee),2);ae(()=>Se(Z,` ${t().pls.exclvars.length??""} `)),C(O,ee)};B(D,O=>{t().pls.exclvars.length>0&&O(Y)})}var j=M(k,2);ar(j,{onclick:f}),ae(O=>{V(N,"title",t().pls.fileName),Se(T,t().pls.fileName),Se(P,` ${t().pls.ncomp??""} LVs${t().pls.center?", centered":""}${t().pls.scale?", scaled":""} `),Se(E,` ${O??""} `)},[()=>t().da.classNames.join(", ")]),C(w,y)},$$slots:{default:!0}})};B(v,p=>{t()?p(m,!1):p(h)})}var _=M(v,2);{var b=p=>{ue(p,{name:"error",status:"error",children:(w,A)=>{var y=Mm(),k=W(y);gt(k,()=>r(o)),C(w,y)},$$slots:{default:!0}})};B(_,p=>{(r(l)==="error"||r(o))&&p(b)})}C(n,d),pe()}var qm=U("<!> <!>",1);function zm(n,e){ge(e,!0);const t=(m,_=yt)=>{ue(m,{label:"Selected",children:(b,p)=>{var w=qm(),A=K(w);tt(A,{onclick:()=>e.showContributions(_()),text:"plot"});var y=M(A,2);{var k=N=>{tt(N,{onclick:()=>e.markOutlier(_()),text:"remove"})};B(y,N=>{_()>=0&&N(k)})}C(b,w)},$$slots:{default:!0}})},s=g(()=>({test:e.res.test.pls})),l=g(()=>({test:e.res.test.da})),o=g(()=>e.model.da.ncomp),a=g(()=>({pred:{label:"Predictions",scope:"objects",component:Ml,buttons:t},fom:{label:"Figures of merit (classification)",scope:"stats",component:Ja},roc:{label:"ROC curve",scope:"stats",component:Qa},fom2:{label:"Figures of merit (regression)",scope:"stats",component:Za},scores:{label:"Scores",scope:"objects",component:Fl,buttons:t},variance:{label:"Variance",scope:"stats",component:Ka}})),c=Fe({pred:zl(["test"],e.model.da.classNames),fom:ti(r(l),e.model.da.classNames),roc:ri(["test"],e.model.da.classNames),fom2:ei(r(s),1),scores:ql(r(s)),variance:$a(r(s))});let f=te(Fe({pred:pt(c.pred),fom:pt(c.fom),fom2:pt(c.fom2),roc:pt(c.roc),scores:pt(c.scores),variance:pt(c.variance)}));me(()=>{r(f).scores.varSet==="XY"?(c.scores.comp1.hidden=!0,c.scores.comp2.label="LV"):(c.scores.comp2.label="LV (y-axis)",c.scores.comp1.hidden=!1)});const u=ke.seq(-10,10,.1),d=yn(u),v=g(()=>({res:r(s),classres:r(l),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:r(o),scalars:e.scalars,zscores:u,densnorm:d})),h={markOutlier:e.markOutlier};Rl(n,{get plots(){return r(a)},get props(){return r(v)},get controls(){return c},get callbacks(){return h},get params(){return r(f)},set params(m){q(f,m,!0)}}),pe()}var Im=U('<div class="outliers-pane svelte-1w77c1q"><!></div>'),Vm=U('<div class="buttons"><!> <!></div>'),Om=U('<div class="result-stats svelte-1w77c1q"><!></div>'),Bm=U('<div class="ncomp-selector svelte-1w77c1q"><!> <!></div> <!>',1),Dm=U('<div class="data-loader svelte-1w77c1q"><!></div> <!> <!>',1),Ym=U(`<p class="svelte-1w77c1q">In this tab you can test a PLS1-DA classification model developed in <strong>Train</strong> tab by
               applying it to a test set, which contains both predictors and responses.</p> <p class="svelte-1w77c1q"><strong>Step 1.</strong></p> <p class="svelte-1w77c1q">Load the previously developed PLS1-DA model from a JSON file.</p>`,1),Wm=U(`<p class="svelte-1w77c1q"><strong>Step 2.</strong></p> <p class="svelte-1w77c1q">Load your test set from a CSV file. The file structure should be the same as the training/calibration set.
               The column with class labels is mandatory and it should contain the same classes your model was trained for.
               Here is an example how data structure may look like (note, that row labels
               and header are optional):</p> <div class="svelte-1w77c1q"><table class="svelte-1w77c1q"><thead class="svelte-1w77c1q"><tr class="svelte-1w77c1q"><td class="svelte-1w77c1q">Name</td><td class="svelte-1w77c1q">Class</td><td class="svelte-1w77c1q">x1</td><td class="svelte-1w77c1q">x2</td><td class="svelte-1w77c1q">x3</td></tr></thead><tbody class="svelte-1w77c1q"><tr><td class="svelte-1w77c1q">O1</td><td class="svelte-1w77c1q">Red</td><td class="svelte-1w77c1q">3.8</td><td class="svelte-1w77c1q">1.3</td><td class="svelte-1w77c1q">13.6</td></tr><tr><td class="svelte-1w77c1q">O2</td><td class="svelte-1w77c1q">Red</td><td class="svelte-1w77c1q">11.1</td><td class="svelte-1w77c1q">12.3</td><td class="svelte-1w77c1q">3.3</td></tr><tr><td class="svelte-1w77c1q">O3</td><td class="svelte-1w77c1q">Blue</td><td class="svelte-1w77c1q">1.2</td><td class="svelte-1w77c1q">2.3</td><td class="svelte-1w77c1q">4.2</td></tr></tbody></table></div> <p class="svelte-1w77c1q"></p>`,1),Hm=U('<div class="help-text svelte-1w77c1q"><!></div>'),Um=U('<div class="app-container svelte-1w77c1q"><!> <div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function Xm(n,e){ge(e,!0);const t=g(()=>e.session.test);let s=te(-1),l=te(!1);function o(T){if(T<0||T>r(t).testres.pls.nrows-1)return;const P=r(t).testres.pls.objindices[T];P>=0&&!r(t).outliers.includes(P)&&(r(t).outliers.push(P),r(t).testres={pls:null,da:null},r(t).ind=null)}function a(){r(t).outliers=[],r(t).testres={pls:null,da:null},r(t).ind=null}function c(){r(t).outliers.pop(),r(t).testres={pls:null,da:null},r(t).ind=null}function f(T){T<0||(q(s,T,!0),q(l,!0))}function u(){q(l,!1),q(s,-1)}me(()=>{r(t).testset===null&&(r(t).outliers=[],r(t).testres={pls:null,da:null},r(t).ind=null),r(t).model===null&&(r(t).testres={pls:null,da:null},r(t).ind=null,r(t).testset=null)}),me(()=>{r(t).testres&&r(t).testres.pls&&(r(t).ind=Sa(r(t).testres.pls.Yref.getcolref(1),r(t).testset.classNames))}),me(()=>{r(t).testres.pls&&r(t).model.da&&(r(t).testres.da=ds(r(t).testres.pls,r(t).model.da,r(t).ind))}),me(()=>{const T=sr(()=>JSON.stringify(e.session,Bn));e.backupSession(T,r(t).testset,r(t).model,r(t).testres.da)});var d=Um(),v=W(d);{var h=T=>{{let P=g(()=>({test:r(t).testres.pls}));Pl(T,{get model_getter(){return as},get res_getter(){return Nt},get model(){return r(t).model.pls},get res(){return r(P)},get ncomp(){return r(t).model.da.ncomp},get selected(){return r(s)},closeModal:u})}};B(v,T=>{r(l)&&T(h)})}var m=M(v,2),_=W(m),b=W(_);ni(b,{get model(){return r(t).model},set model(T){r(t).model=T}});var p=M(_,2);{var w=T=>{var P=Dm(),L=K(P),F=W(L);Ll(F,{get WASM(){return e.WASM},get outliers(){return r(t).outliers},get model(){return r(t).model.pls},classMandatory:!0,get dataset(){return r(t).testset},set dataset(Y){r(t).testset=Y},get resobj(){return r(t).testres.pls},set resobj(Y){r(t).testres.pls=Y}});var E=M(L,2);{var S=Y=>{var j=Im(),O=W(j);gl(O,{get outliers(){return r(t).outliers},get dataset(){return r(t).testset},resetOutliers:a,undoOutliers:c}),C(Y,j)};B(E,Y=>{r(t).outliers&&r(t).outliers.length>0&&Y(S)})}var R=M(E,2);{var D=Y=>{var j=Bm(),O=K(j),ee=W(O);Ga(ee,{get plsmodel(){return r(t).model.pls},get plsres(){return r(t).calres.pls},get ind(){return r(t).ind},get ncomp(){return r(t).ncomp_selected},get damodel(){return r(t).model.da},set damodel(z){r(t).model.da=z}});var Z=M(ee,2);ue(Z,{label:"Download",children:(z,X)=>{var $=Vm(),le=W($);tt(le,{onclick:()=>vs(r(t).testres,r(t).testset,"test",r(t).model.da.ncomp),text:"Res (test)"});var we=M(le,2);tt(we,{onclick:()=>Aa(r(t).model,r(t).model.da.ncomp),text:"Model"}),C(z,$)},$$slots:{default:!0}});var J=M(O,2);{var H=z=>{var X=Om(),$=W(X);{let le=g(()=>({test:r(t).testres.da}));Xa($,{get res(){return r(le)},get model(){return r(t).model.da}})}C(z,X)};B(J,z=>{r(t).testres.da&&z(H)})}C(Y,j)};B(R,Y=>{r(t).model.pls&&r(t).testres.pls&&Y(D)})}C(T,P)};B(p,T=>{r(t).model&&r(t).model.pls&&T(w)})}var A=M(m,2),y=W(A);{var k=T=>{var P=Hm(),L=W(P);{var F=S=>{var R=Ym();C(S,R)},E=S=>{var R=de(),D=K(R);{var Y=j=>{var O=Wm();C(j,O)};B(D,j=>{r(t).testset||j(Y)},!0)}C(S,R)};B(L,S=>{r(t).model?S(E,!1):S(F)})}C(T,P)},N=T=>{var P=de(),L=K(P);$r(L,()=>r(t).testres.pls&&r(t).model,F=>{var E=de(),S=K(E);{var R=D=>{{let Y=g(()=>({test:r(t).testset})),j=g(()=>({test:r(t).testres}));zm(D,{markOutlier:o,showContributions:f,get data(){return r(Y)},get res(){return r(j)},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected}})}};B(S,D=>{r(t).testres&&r(t).testres.pls&&r(t).testres.da&&r(t).model&&r(t).model.pls&&r(t).model.da&&D(R)})}C(F,E)}),C(T,P)};B(y,T=>{r(t).testres.da?T(N,!1):T(k)})}C(n,d),pe()}var Gm=U("<!> <!>",1);function Km(n,e){ge(e,!0);const t=(m,_=yt)=>{ue(m,{label:"Selected",children:(b,p)=>{var w=Gm(),A=K(w);tt(A,{onclick:()=>e.showContributions(_()),text:"plot"});var y=M(A,2);{var k=N=>{tt(N,{onclick:()=>e.markOutlier(_()),text:"remove"})};B(y,N=>{_()>=0&&N(k)})}C(b,w)},$$slots:{default:!0}})},s=g(()=>({new:e.res.new.pls})),l=g(()=>({new:e.res.new.da})),o=g(()=>e.model.da.ncomp),a=g(()=>({pred:{label:"Predictions",scope:"objects",component:Ml,buttons:t},scores:{label:"Scores",scope:"objects",component:Fl,buttons:t}})),c=Fe({pred:zl(["new"],e.model.da.classNames),scores:ql(r(s))});let f=te(Fe({pred:pt(c.pred),scores:pt(c.scores)}));me(()=>{r(f).scores.varSet==="XY"?(c.scores.comp1.hidden=!0,c.scores.comp2.label="LV"):(c.scores.comp2.label="LV (y-axis)",c.scores.comp1.hidden=!1)});const u=ke.seq(-10,10,.1),d=yn(u),v=g(()=>({res:r(s),classres:r(l),model:e.model.pls,classmodel:e.model.da,data:e.data,ncomp:r(o),scalars:e.scalars,zscores:u,densnorm:d})),h={markOutlier:e.markOutlier};Rl(n,{get plots(){return r(a)},get props(){return r(v)},get controls(){return c},get callbacks(){return h},get params(){return r(f)},set params(m){q(f,m,!0)}}),pe()}var Jm=U('<div class="data-loader svelte-1rjc99q"><!></div>'),Zm=U('<div class="outliers-pane svelte-1rjc99q"><!></div>'),Qm=U('<div class="buttons"><!></div>'),$m=U('<div class="ncomp-selector svelte-1rjc99q"><!></div>'),e1=U(`<p class="svelte-1rjc99q">In this tab you can apply a PLS1-DA classification model developed in <strong>Train</strong> tab to
               new set of measurements without known class labels.</p> <p class="svelte-1rjc99q"><strong>Step 1.</strong></p> <p class="svelte-1rjc99q">Load the previously developed PLS1-DA model from a JSON file.</p>`,1),t1=U(`<p class="svelte-1rjc99q"><strong>Step 2.</strong></p> <p class="svelte-1rjc99q">Load your new set. In this case, because dataset should not contain the class labels, you
            can load it either from a CSV file or from SPC files.</p> <p class="svelte-1rjc99q">If you load data from a <strong>CSV file</strong>, the file structure should be the same as the training/calibration set but <strong>without the column with class labels</strong> (only predictors). Here is an example how data structure may look like
               (note, that row labels and header are optional):</p> <div class="svelte-1rjc99q"><table class="svelte-1rjc99q"><thead class="svelte-1rjc99q"><tr class="svelte-1rjc99q"><td class="svelte-1rjc99q">Name</td><td class="svelte-1rjc99q">x1</td><td class="svelte-1rjc99q">x2</td><td class="svelte-1rjc99q">x3</td></tr></thead><tbody><tr><td class="svelte-1rjc99q">O1</td><td class="svelte-1rjc99q">3.8</td><td class="svelte-1rjc99q">1.3</td><td class="svelte-1rjc99q">13.6</td></tr><tr><td class="svelte-1rjc99q">O2</td><td class="svelte-1rjc99q">11.1</td><td class="svelte-1rjc99q">12.3</td><td class="svelte-1rjc99q">3.3</td></tr><tr><td class="svelte-1rjc99q">O3</td><td class="svelte-1rjc99q">1.2</td><td class="svelte-1rjc99q">2.3</td><td class="svelte-1rjc99q">4.2</td></tr></tbody></table> <p>If your model uses spectra as predictors, you can also load spectral data directly
                  from Galactic Industries <strong>SPC files</strong>. The app supports both single spectrum in a file and
                  files with multiple spectra, however only 2-way datasets can be loaded. You can select several
                  SPC files to load (hold Ctrl or Shift when selecting), in this case they will be combined together
                  into the same dataset.</p></div> <p class="svelte-1rjc99q"></p>`,1),r1=U('<div class="help-text svelte-1rjc99q"><!></div>'),n1=U('<div class="app-container svelte-1rjc99q"><!> <div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function s1(n,e){ge(e,!0);const t=g(()=>e.session.new);let s=te(-1),l=te(!1);function o(E){if(E<0||E>r(t).newres.pls.nrows-1)return;const S=r(t).newres.pls.objindices[E];S>=0&&!r(t).outliers.includes(S)&&(r(t).outliers.push(S),r(t).newres={pls:null,da:null})}function a(){r(t).outliers=[],r(t).newres={pls:null,da:null}}function c(){r(t).outliers.pop(),r(t).newres={pls:null,da:null}}function f(E){E<0||(q(s,E,!0),q(l,!0))}function u(){q(l,!1),q(s,-1)}me(()=>{r(t).newset===null&&(r(t).outliers=[],r(t).newres={pls:null,da:null}),r(t).model===null&&(r(t).newres={pls:null,da:null},r(t).newset=null)}),me(()=>{r(t).newres.pls&&r(t).model.da&&(r(t).newres.da=ds(r(t).newres.pls,r(t).model.da,null))}),me(()=>{const E=sr(()=>JSON.stringify(e.session,Bn));e.backupSession(E,r(t).model,r(t).newres.da)});var d=n1(),v=W(d);{var h=E=>{{let S=g(()=>({new:r(t).newres.pls}));Pl(E,{get model_getter(){return as},get res_getter(){return Nt},get model(){return r(t).model.pls},get res(){return r(S)},get ncomp(){return r(t).model.da.ncomp},get selected(){return r(s)},closeModal:u})}};B(v,E=>{r(l)&&E(h)})}var m=M(v,2),_=W(m),b=W(_);ni(b,{get model(){return r(t).model},set model(E){r(t).model=E}});var p=M(_,2);{var w=E=>{var S=Jm(),R=W(S);Ll(R,{get WASM(){return e.WASM},get outliers(){return r(t).outliers},get model(){return r(t).model.pls},classMandatory:!1,get dataset(){return r(t).newset},set dataset(D){r(t).newset=D},get resobj(){return r(t).newres.pls},set resobj(D){r(t).newres.pls=D}}),C(E,S)};B(p,E=>{r(t).model&&E(w)})}var A=M(p,2);{var y=E=>{var S=Zm(),R=W(S);gl(R,{get outliers(){return r(t).outliers},get dataset(){return r(t).newset},resetOutliers:a,undoOutliers:c}),C(E,S)};B(A,E=>{r(t).outliers&&r(t).outliers.length>0&&E(y)})}var k=M(A,2);{var N=E=>{var S=$m(),R=W(S);ue(R,{label:"Download",children:(D,Y)=>{var j=Qm(),O=W(j);tt(O,{onclick:()=>vs(r(t).newres,r(t).newset,"new",r(t).model.da.ncomp),text:"Res (new)"}),C(D,j)},$$slots:{default:!0}}),C(E,S)};B(k,E=>{r(t).newres.da&&E(N)})}var T=M(m,2),P=W(T);{var L=E=>{var S=r1(),R=W(S);{var D=j=>{var O=e1();C(j,O)},Y=j=>{var O=de(),ee=K(O);{var Z=J=>{var H=t1();C(J,H)};B(ee,J=>{r(t).newset||J(Z)},!0)}C(j,O)};B(R,j=>{r(t).model?j(Y,!1):j(D)})}C(E,S)},F=E=>{var S=de(),R=K(S);$r(R,()=>r(t).newres&&r(t).model,D=>{var Y=de(),j=K(Y);{var O=ee=>{{let Z=g(()=>({new:r(t).newset})),J=g(()=>({new:r(t).newres}));Km(ee,{markOutlier:o,showContributions:f,get data(){return r(Z)},get res(){return r(J)},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected}})}};B(j,ee=>{r(t).newres&&r(t).newres.da&&r(t).model&&r(t).model.da&&ee(O)})}C(D,Y)}),C(E,S)};B(P,E=>{r(t).newres.da?E(F,!1):E(L)})}C(n,d),pe()}var l1=U('<sup style="color:red">β</sup>'),o1=U('<li><button class="svelte-1josccy"> </button></li>'),a1=U("<div><!></div>"),i1=U('<div class="info-container svelte-1josccy"><!></div>'),c1=U('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function u1(n,e){ge(e,!0);let t=I(e,"tabs",19,()=>[]),s=I(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let o=te(!1),a=te(void 0),c=te("Current session "),f=te(!1);function u(P){q(c,P,!0),q(f,!0),setTimeout(()=>{q(c,"Current session "),q(f,!1)},1e3)}function d(){q(o,!0)}function v(){q(o,!1)}function h(P){r(a).tab=P}function m(){const P=indexedDB.open(l,1);P.onsuccess=L=>{const E=L.target.result.transaction(e.appID,"readwrite");E.objectStore(e.appID).delete("session"),E.oncomplete=()=>{q(a,e.initSession(),!0),u("Session was reinitialzed.")},E.onerror=()=>console.error("Failed to session from DB.")}}function _(P,L){window.localStorage.removeItem(e.appID+"-blocked");const F=indexedDB.open(l,1);F.onsuccess=E=>{const D=E.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);D.put(P,"session"),D.put(hl(new Date),"session-update")}}function b(){new Promise((P,L)=>{const F=indexedDB.open(l,1);F.onsuccess=E=>{const Y=E.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");Y.onsuccess=()=>P(Y.result),Y.onerror=()=>L(Y.error)}}).then(P=>{p(P),q(c,"Last session is restored "),q(f,!0),setTimeout(()=>{q(c,"Current session "),q(f,!1)},1500)}).catch(P=>{console.error(P),q(a,e.initSession(),!0)})}function p(P){if(!P||P==="undefined"){q(a,e.initSession(),!0);return}const L=JSON.parse(P,vl);q(a,e.checkSession(L)?L:e.initSession(e.appID),!0)}function w(){const P=hl(new Date),L=e.appID+"-session-"+P+".json";r(a).date=P;const F=JSON.stringify(r(a),Bn),E=new Blob([F],{type:"text/json"}),S=window.URL.createObjectURL(E),R=document.createElement("a");R.setAttribute("href",S),R.setAttribute("download",L),R.click()}function A(P){const L=new FileReader;L.onload=()=>{p(L.result),P.target.value=""},L.readAsText(P.target.files[0])}function y(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&m()}Uc(()=>{const P=e.appID,L=indexedDB.open(l,1);L.onupgradeneeded=F=>{const E=F.target.result;E.objectStoreNames.contains(P)||E.createObjectStore(P)},L.onsuccess=F=>{b()}});var k=de(),N=K(k);{var T=P=>{var L=c1(),F=W(L),E=W(F),S=W(E),R=M(S,2),D=W(R),Y=M(D);{var j=oe=>{var re=l1();C(oe,re)};B(Y,oe=>{s()&&oe(j)})}var O=M(R,2),ee=W(O),Z=M(E,2);Ve(Z,21,t,De,(oe,re,fe)=>{var ve=o1();let ce;var je=W(ve);je.__click=()=>h(fe),je.__keydown=()=>h(fe);var Oe=W(je);ae(()=>{ce=ct(ve,1,"nav-item svelte-1josccy",null,ce,{selected:r(a).tab===fe}),Se(Oe,r(re).name)}),C(oe,ve)});var J=M(F,2),H=W(J);$r(H,()=>r(a).date,oe=>{var re=de(),fe=K(re);Ve(fe,17,t,De,(ve,ce,je)=>{var Oe=a1();let ze;var G=W(Oe);qn(G,()=>r(ce).component,(Q,ne)=>{ne(Q,{get WASM(){return e.WASM},get session(){return r(a)},backupSession:_})}),ae(()=>ze=ct(Oe,1,`tab-content tab-content-${r(ce).label??""}`,"svelte-1josccy",ze,{hidden:r(a).tab!==je})),C(ve,Oe)}),C(oe,re)});var z=M(J,2),X=W(z);let $;var le=W(X),we=W(le),ie=M(le,2),be=W(ie);be.__change=A;var ye=M(ie,2);ye.__click=w;var qe=M(ye,2);qe.__click=y;var xe=M(X,2),Ae=W(xe);Ae.__click=d,Ae.__keydown=d;var Pe=M(Ae,2);Er(Pe,()=>e.footer);var Te=M(z,2);{var se=oe=>{Al(oe,{closeModal:v,children:(re,fe)=>{var ve=i1(),ce=W(ve);Er(ce,()=>e.info),C(re,ve)},$$slots:{default:!0}})};B(Te,oe=>{r(o)&&oe(se)})}ae(()=>{V(S,"alt",e.appShortTitle),Se(D,e.appTitle),Se(ee,e.appSlogan),$=ct(X,1,"session svelte-1josccy",null,$,{"no-buttons":r(f)}),Se(we,r(c))}),C(P,L)};B(N,P=>{r(a)&&P(T)})}C(n,k),pe()}lt(["click","keydown","change"]);const _1="modulepreload",w1=function(n){return"/"+n},y1={},f1=function(e,t,s){let l=Promise.resolve();function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return l.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};async function d1(n={}){var e,t=n,s=!!globalThis.window,l=!!globalThis.WorkerGlobalScope,o=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer";if(o){const{createRequire:G}=await f1(async()=>{const{createRequire:Q}=await Promise.resolve().then(()=>g1);return{createRequire:Q}},void 0);var a=G(mr&&mr.tagName.toUpperCase()==="SCRIPT"&&mr.src||new URL("pls1da.js",document.baseURI).href)}var c="./this.program",f=(G,Q)=>{throw Q},u=mr&&mr.tagName.toUpperCase()==="SCRIPT"&&mr.src||new URL("pls1da.js",document.baseURI).href,d="",v,h;if(o){var m=a("fs");u.startsWith("file:")&&(d=a("path").dirname(a("url").fileURLToPath(u))+"/"),h=G=>(G=y(G)?new URL(G):G,m.readFileSync(G)),v=async G=>(G=y(G)?new URL(G):G,m.readFileSync(G,void 0)),1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),f=(G,Q)=>{throw process.exitCode=G,Q}}else if(s||l){try{d=new URL(".",u).href}catch{}l&&(h=G=>{var Q=new XMLHttpRequest;return Q.open("GET",G,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),v=async G=>{if(y(G))return new Promise((ne,_e)=>{var he=new XMLHttpRequest;he.open("GET",G,!0),he.responseType="arraybuffer",he.onload=()=>{he.status==200||he.status==0&&he.response?ne(he.response):_e(he.status)},he.onerror=_e,he.send(null)});var Q=await fetch(G,{credentials:"same-origin"});if(Q.ok)return Q.arrayBuffer();throw Error(Q.status+" : "+Q.url)}}var _=console.log.bind(console),b=console.error.bind(console),p,w=!1,A,y=G=>G.startsWith("file://"),k,N,T,P,L,F=!1;function E(){var G=je.buffer;T=new Int8Array(G),P=new Uint8Array(G),t.HEAP32=new Int32Array(G),L=new Uint32Array(G),t.HEAPF64=new Float64Array(G),new BigInt64Array(G),new BigUint64Array(G)}function S(G){throw t.onAbort?.(G),G="Aborted("+G+")",b(G),w=!0,G=new WebAssembly.RuntimeError(G+". Build with -sASSERTIONS for more info."),N?.(G),G}var R;async function D(G){if(!p)try{var Q=await v(G);return new Uint8Array(Q)}catch{}if(G==R&&p)G=new Uint8Array(p);else if(h)G=h(G);else throw"both async and sync fetching of the wasm failed";return G}async function Y(G,Q){try{var ne=await D(G);return await WebAssembly.instantiate(ne,Q)}catch(_e){b(`failed to asynchronously prepare wasm: ${_e}`),S(_e)}}async function j(G){var Q=R;if(!p&&!y(Q)&&!o)try{var ne=fetch(Q,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(ne,G)}catch(_e){b(`wasm streaming compile failed: ${_e}`),b("falling back to ArrayBuffer instantiation")}return Y(Q,G)}class O{name="ExitStatus";constructor(Q){this.message=`Program terminated with exit(${Q})`,this.status=Q}}var ee=G=>{for(;0<G.length;)G.shift()(t)},Z=[],J=[],H=()=>{var G=t.preRun.shift();J.push(G)},z=!0,X=0,$={},le=G=>{A=G,z||0<X||(t.onExit?.(G),w=!0),f(G,new O(G))},we=G=>{if(!w)try{if(G(),!(z||0<X))try{A=G=A,le(G)}catch(Q){Q instanceof O||Q=="unwind"||f(1,Q)}}catch(Q){Q instanceof O||Q=="unwind"||f(1,Q)}},ie=globalThis.TextDecoder&&new TextDecoder,be=(G,Q=0)=>{for(var ne=Q,_e=ne+void 0;G[ne]&&!(ne>=_e);)++ne;if(16<ne-Q&&G.buffer&&ie)return ie.decode(G.subarray(Q,ne));for(_e="";Q<ne;){var he=G[Q++];if(he&128){var Le=G[Q++]&63;if((he&224)==192)_e+=String.fromCharCode((he&31)<<6|Le);else{var Ie=G[Q++]&63;he=(he&240)==224?(he&15)<<12|Le<<6|Ie:(he&7)<<18|Le<<12|Ie<<6|G[Q++]&63,65536>he?_e+=String.fromCharCode(he):(he-=65536,_e+=String.fromCharCode(55296|he>>10,56320|he&1023))}}else _e+=String.fromCharCode(he)}return _e},ye={},qe=()=>{if(!xe){var G={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:c||"./this.program"},Q;for(Q in ye)ye[Q]===void 0?delete G[Q]:G[Q]=ye[Q];var ne=[];for(Q in G)ne.push(`${Q}=${G[Q]}`);xe=ne}return xe},xe,Ae=(G,Q,ne)=>{var _e=P;if(!(0<ne))return 0;var he=Q;ne=Q+ne-1;for(var Le=0;Le<G.length;++Le){var Ie=G.codePointAt(Le);if(127>=Ie){if(Q>=ne)break;_e[Q++]=Ie}else if(2047>=Ie){if(Q+1>=ne)break;_e[Q++]=192|Ie>>6,_e[Q++]=128|Ie&63}else if(65535>=Ie){if(Q+2>=ne)break;_e[Q++]=224|Ie>>12,_e[Q++]=128|Ie>>6&63,_e[Q++]=128|Ie&63}else{if(Q+3>=ne)break;_e[Q++]=240|Ie>>18,_e[Q++]=128|Ie>>12&63,_e[Q++]=128|Ie>>6&63,_e[Q++]=128|Ie&63,Le++}}return _e[Q]=0,Q-he},Pe=G=>{for(var Q=0,ne=0;ne<G.length;++ne){var _e=G.charCodeAt(ne);127>=_e?Q++:2047>=_e?Q+=2:55296<=_e&&57343>=_e?(Q+=4,++ne):Q+=3}return Q},Te=[null,[],[]],se=()=>{if(o){var G=a("crypto");return Q=>G.randomFillSync(Q)}return Q=>crypto.getRandomValues(Q)},oe=G=>{(oe=se())(G)};if(t.noExitRuntime&&(z=t.noExitRuntime),t.print&&(_=t.print),t.printErr&&(b=t.printErr),t.wasmBinary&&(p=t.wasmBinary),t.thisProgram&&(c=t.thisProgram),t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.shift()();t.ccall=(G,Q,ne,_e)=>{var he={string:Xe=>{var dt=0;if(Xe!=null&&Xe!==0){dt=Pe(Xe)+1;var vr=ve(dt);Ae(Xe,vr,dt),dt=vr}return dt},array:Xe=>{var dt=ve(Xe.length);return T.set(Xe,dt),dt}};G=t["_"+G];var Le=[],Ie=0;if(_e)for(var Be=0;Be<_e.length;Be++){var He=he[ne[Be]];He?(Ie===0&&(Ie=ce()),Le[Be]=He(_e[Be])):Le[Be]=_e[Be]}return ne=G(...Le),ne=(function(Xe){return Ie!==0&&fe(Ie),Q==="string"?Xe?be(P,Xe):"":Q==="boolean"?!!Xe:Xe})(ne)};var re,fe,ve,ce,je,Oe={g:()=>S(""),j:()=>{z=!1,X=0},k:(G,Q)=>{if($[G]&&(clearTimeout($[G].id),delete $[G]),!Q)return 0;var ne=setTimeout(()=>{delete $[G],we(()=>re(G,performance.now()))},Q);return $[G]={id:ne,U:Q},0},a:()=>Date.now(),c:G=>b(G?be(P,G):""),b:()=>performance.now(),l:G=>{var Q=P.length;if(G>>>=0,2147483648<G)return!1;for(var ne=1;4>=ne;ne*=2){var _e=Q*(1+.2/ne);_e=Math.min(_e,G+100663296);e:{_e=(Math.min(2147483648,65536*Math.ceil(Math.max(G,_e)/65536))-je.buffer.byteLength+65535)/65536|0;try{je.grow(_e),E();var he=1;break e}catch{}he=void 0}if(he)return!0}return!1},e:(G,Q)=>{var ne=0,_e=0,he;for(he of qe()){var Le=Q+ne;L[G+_e>>2]=Le,ne+=Ae(he,Le,1/0)+1,_e+=4}return 0},f:(G,Q)=>{var ne=qe();L[G>>2]=ne.length,G=0;for(var _e of ne)G+=Pe(_e)+1;return L[Q>>2]=G,0},h:(G,Q,ne,_e)=>{for(var he=0,Le=0;Le<ne;Le++){var Ie=L[Q>>2],Be=L[Q+4>>2];Q+=8;for(var He=0;He<Be;He++){var Xe=G,dt=P[Ie+He],vr=Te[Xe];dt===0||dt===10?((Xe===1?_:b)(be(vr)),vr.length=0):vr.push(dt)}he+=Be}return L[_e>>2]=he,0},i:le,d:(G,Q)=>(oe(P.subarray(G,G+Q)),0)},ze;return ze=await(async function(){function G(ne){return ne=ze=ne.exports,t._plsfit_wasm=ne.o,t._free=ne.p,t._malloc=ne.q,t._plspredict_wasm=ne.r,t._pcvpls_wasm=ne.s,t._prepapply_wasm=ne.t,t._prepfit_wasm=ne.u,re=ne.v,t._strdup=ne.w,t._strndup=ne.x,t.__ZdaPv=ne.y,t.__ZdaPvm=ne.z,t.__ZdlPv=ne.A,t.__ZdlPvm=ne.B,t.__Znaj=ne.C,t.__ZnajSt11align_val_t=ne.D,t.__Znwj=ne.E,t.__ZnwjSt11align_val_t=ne.F,t.___libc_calloc=ne.G,t.___libc_free=ne.H,t.___libc_malloc=ne.I,t.___libc_realloc=ne.J,t._emscripten_builtin_malloc=ne.K,t._emscripten_builtin_calloc=ne.L,t._emscripten_builtin_free=ne.M,t._emscripten_builtin_realloc=ne.N,t._malloc_size=ne.O,t._malloc_usable_size=ne.P,t._reallocf=ne.Q,fe=ne.R,ve=ne.S,ce=ne.T,je=ne.m,E(),ze}var Q={a:Oe};return t.instantiateWasm?new Promise(ne=>{t.instantiateWasm(Q,(_e,he)=>{ne(G(_e))})}):(R??=t.locateFile?t.locateFile?t.locateFile("pls_wasm.wasm",d):d+"pls_wasm.wasm":new URL("/pls1da/pls1da.wasm",mr&&mr.tagName.toUpperCase()==="SCRIPT"&&mr.src||new URL("pls1da.js",document.baseURI).href).href,G((await j(Q)).instance))})(),(function(){function G(){if(t.calledRun=!0,!w){if(F=!0,ze.n(),k?.(t),t.onRuntimeInitialized?.(),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var Q=t.postRun.shift();Z.push(Q)}ee(Z)}}if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)H();ee(J),t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),G()},1)):G()})(),F?e=t:e=new Promise((G,Q)=>{k=G,N=Q}),e}var v1=U('<p>Current release: <span>1.0.1</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PLS1-DA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="" download=""></a> | <a href="">video lessons</a></p>'),h1=U(`<h2>PLS1 Discriminant Analysis (binary version)</h2> <p>Interactive web-application for creating, testing and applying PLS1-DA models for
      discriminant analysis between two classes (binary version). The app implements both conventional
      method based on threshold (hard) as well as soft method based on distributions (soft),
      described in <a href="https://doi.org/10.1016/j.microc.2025.113329">this paper</a>.
      Like any other mda.tools web-apps it does not send any information to the server,
      all calculations are done locally on your device.</p> <p>The application uses <a href="https://doi.org/10.1016/j.aca.2023.341096">Procrustes cross-validation</a> for optimization and quality check on the training stage.</p> <p>Check out YouTube <a href="">video-lessons</a> for more details.</p> <h3>v. 1.0.1</h3> <p class="release-info">released 07/02/2026</p> <ul><li>Fixed a bug in robust estimator.</li> <li>Added ROC plot.</li> <li>Small improvements and refactoring.</li></ul> <h3>v. 1.0.0</h3> <p class="release-info">released 01/02/2026</p> <ul><li>Initial release.</li></ul>`,1);function m1(n,e){ge(e,!1);function t(o){const a=Object.keys(o);if(!["date","tab","train","test","new"].every(m=>a.includes(m)))return!1;const c=["model","calset","calsetp","calres","pvset","pvres","outliers","exclvars","ncomp_selected","pvscalars","prepType","prepmodel","prepmeta","prepobj"],f=Object.keys(o.train);if(!c.every(m=>f.includes(m)))return!1;const u=["model","testset","testres","outliers","ncomp_selected"],d=Object.keys(o.test);if(!u.every(m=>d.includes(m)))return!1;const v=["model","newset","newres","outliers","ncomp_selected"],h=Object.keys(o.new);return!!v.every(m=>h.includes(m))}function s(){return{date:hl(new Date),tab:0,train:{model:{pls:0,da:0},calset:0,calsetp:0,pvset:0,ind:0,calres:{pls:0,da:0},pvres:{pls:0,da:0},outliers:[],exclvars:[],ncomp_selected:1,pvscalars:0,prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{model:0,damodel:0,testset:0,testres:{pls:0,da:0},outliers:[],ncomp_selected:1},new:{model:0,damodel:0,newset:0,newres:{pls:0,da:0},outliers:[],ncomp_selected:1}}}const l=[{name:"Train",label:"train",component:Nm},{name:"Test",label:"test",component:Xm},{name:"Predict",label:"new",component:s1}];Dc(),u1(n,{appID:"plsda",appTitle:"PLS1-DA",appShortTitle:"PLS1-DA",appSlogan:"PLS1 Discriminant Analysis (binary)",get WASM(){return d1},get tabs(){return l},initSession:s,checkSession:t,footer:c=>{var f=v1();C(c,f)},info:c=>{var f=h1();C(c,f)},$$slots:{footer:!0,info:!0}}),pe()}_c(m1,{target:document.body});const g1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pls1da.js.map
