var am=Object.defineProperty;var yc=st=>{throw TypeError(st)};var im=(st,He,gt)=>He in st?am(st,He,{enumerable:!0,configurable:!0,writable:!0,value:gt}):st[He]=gt;var Dt=(st,He,gt)=>im(st,typeof He!="symbol"?He+"":He,gt),Ko=(st,He,gt)=>He.has(st)||yc("Cannot "+gt);var K=(st,He,gt)=>(Ko(st,He,"read from private field"),gt?gt.call(st):He.get(st)),Ie=(st,He,gt)=>He.has(st)?yc("Cannot add the same private member more than once"):He instanceof WeakSet?He.add(st):He.set(st,gt),Ce=(st,He,gt,Hn)=>(Ko(st,He,"write to private field"),Hn?Hn.call(st,gt):He.set(st,gt),gt),ut=(st,He,gt)=>(Ko(st,He,"access private method"),gt);(function(){"use strict";var cl,ul,qn,On,Yl,fl,dl,Et,Jo,Un,Qo,xc,Ec,fr,dr,Go,Pr,Bn,jr,vr,$t,Lr,Jr,hn,Vn,mn,Dn,gn,ks,Mt,cm,um,Zo,Ns,Ms,$o,_r,Rr,or,Yn,Wl,Ul,As,pn,vl,Hl,Cs,kc,wc,hl,ml,gl,pl,bl,_l,wl,yl,xl,El;var st=document.createElement("style");st.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-142p4sy{display:none}.selector.svelte-142p4sy{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-142p4sy{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-142p4sy:not(.selected):hover{border:1px solid}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.control-element.res-switcher{margin-top:1em;margin-bottom:0;padding-bottom:0;justify-content:center;background:transparent;font-size:.8rem}.control-element.res-switcher:hover{background:transparent}.control-element.res-switcher .selector{justify-content:center}.control-element.res-switcher>.selector>.option{background-color:#e8e8e8;border-color:#708090;color:#607080}.control-element.res-switcher>.selector>.option:not(.selected):hover{background-color:#fffef0;color:#607080;border-color:#607080}.control-element.res-switcher>.selector>.option.selected{background-color:#607080;color:#e8f0f8;border-color:#607080}table.svelte-110ino2{width:100%;border-collapse:collapse}tr.svelte-110ino2{width:100%}th.svelte-110ino2{border-bottom:1px solid #a0a0a0}th.svelte-110ino2,td.svelte-110ino2{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.wrapper.svelte-1di9qjd{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-1di9qjd{grid-area:plot}.plot-controls.svelte-1di9qjd{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-1di9qjd>.control-element{background:transparent}.msg-select.svelte-1di9qjd{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mp4dba{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(330px,30%) 1fr}}.info-text.svelte-7h7avz{line-height:1.5em}.info-text.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){background:#e8e8e8}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1rjc99q{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(st);var He=typeof document<"u"?document.currentScript:null;const gt=!1;var Hn=Array.isArray,Ac=Array.prototype.indexOf,Ts=Array.from,Cc=Object.defineProperty,Qr=Object.getOwnPropertyDescriptor,ea=Object.getOwnPropertyDescriptors,ta=Object.prototype,Sc=Array.prototype,Xl=Object.getPrototypeOf,ra=Object.isExtensible;function Gn(t){return typeof t=="function"}const Pt=()=>{};function Nc(t){return typeof(t==null?void 0:t.then)=="function"}function Mc(t){return t()}function Ps(t){for(var e=0;e<t.length;e++)t[e]()}function na(){var t,e,r=new Promise((s,o)=>{t=s,e=o});return{promise:r,resolve:t,reject:e}}function js(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const jt=2,Ls=4,Kl=8,yr=16,Fr=32,_n=64,Jl=128,hr=512,qt=1024,Xt=2048,qr=4096,tr=8192,Or=16384,Ql=32768,Br=65536,la=1<<17,sa=1<<18,Xn=1<<19,oa=1<<20,wn=32768,Rs=1<<21,Is=1<<22,Zr=1<<23,$r=Symbol("$state"),aa=Symbol("legacy props"),Tc=Symbol(""),Kn=new class extends Error{constructor(){super(...arguments);Dt(this,"name","StaleReactionError");Dt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ia(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Pc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function jc(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Lc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Rc(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ic(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zc(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Fc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Oc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Bc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ca=1,ua=2,fa=4,Vc=8,Dc=16,Yc=1,Wc=2,Uc=4,Hc=8,Gc=16,Xc=1,Kc=2,Jc=4,da=1,Qc=2,Lt=Symbol(),Zc="http://www.w3.org/1999/xhtml";function $c(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function va(t){return t===this.v}function eu(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ha(t){return!eu(t,this.v)}let Jn=!1,tu=!1;function ru(){Jn=!0}const nu=[];function lu(t,e=!1,r=!1){return Zl(t,new Map,"",nu,null,r)}function Zl(t,e,r,s,o=null,a=!1){if(typeof t=="object"&&t!==null){var c=e.get(t);if(c!==void 0)return c;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Hn(t)){var u=Array(t.length);e.set(t,u),o!==null&&e.set(o,u);for(var f=0;f<t.length;f+=1){var d=t[f];f in t&&(u[f]=Zl(d,e,r,s,null,a))}return u}if(Xl(t)===ta){u={},e.set(t,u),o!==null&&e.set(o,u);for(var v in t)u[v]=Zl(t[v],e,r,s,null,a);return u}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!a)return Zl(t.toJSON(),e,r,s,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let ot=null;function Qn(t){ot=t}function Kt(t){return ma().get(t)}function su(t,e){return ma().set(t,e),e}function _e(t,e=!1,r){ot={p:ot,i:!1,c:null,e:null,s:t,x:null,l:Jn&&!e?{s:null,u:null,$:[]}:null}}function we(t){var e=ot,r=e.e;if(r!==null){e.e=null;for(var s of r)Ia(s)}return e.i=!0,ot=e.p,{}}function yn(){return!Jn||ot!==null&&ot.l===null}function ma(t){return ot===null&&ia(),ot.c??(ot.c=new Map(ou(ot)||void 0))}function ou(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let xn=[];function ga(){var t=xn;xn=[],Ps(t)}function en(t){if(xn.length===0&&!$n){var e=xn;queueMicrotask(()=>{e===xn&&ga()})}xn.push(t)}function au(){for(;xn.length>0;)ga()}function pa(t){var e=Ge;if(e===null)return Ue.f|=Zr,t;if((e.f&Ql)===0){if((e.f&Jl)===0)throw t;e.b.error(t)}else Zn(t,e)}function Zn(t,e){for(;e!==null;){if((e.f&Jl)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t}const $l=new Set;let Ke=null,es=null,yt=null,ar=[],ts=null,zs=!1,$n=!1;const Es=class Es{constructor(){Ie(this,Et);Dt(this,"committed",!1);Dt(this,"current",new Map);Dt(this,"previous",new Map);Ie(this,cl,new Set);Ie(this,ul,new Set);Ie(this,qn,0);Ie(this,On,0);Ie(this,Yl,null);Ie(this,fl,[]);Ie(this,dl,[]);Dt(this,"skipped_effects",new Set);Dt(this,"is_fork",!1)}is_deferred(){return this.is_fork||K(this,On)>0}process(e){var s;ar=[],es=null,this.apply();var r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const o of e)ut(this,Et,Jo).call(this,o,r);this.is_fork||ut(this,Et,xc).call(this),this.is_deferred()?(ut(this,Et,Un).call(this,r.effects),ut(this,Et,Un).call(this,r.render_effects),ut(this,Et,Un).call(this,r.block_effects)):(es=this,Ke=null,wa(r.render_effects),wa(r.effects),es=null,(s=K(this,Yl))==null||s.resolve()),yt=null}capture(e,r){this.previous.has(e)||this.previous.set(e,r),(e.f&Zr)===0&&(this.current.set(e,e.v),yt==null||yt.set(e,e.v))}activate(){Ke=this,this.apply()}deactivate(){Ke===this&&(Ke=null,yt=null)}flush(){if(this.activate(),ar.length>0){if(_a(),Ke!==null&&Ke!==this)return}else K(this,qn)===0&&this.process([]);this.deactivate()}discard(){for(const e of K(this,ul))e(this);K(this,ul).clear()}increment(e){Ce(this,qn,K(this,qn)+1),e&&Ce(this,On,K(this,On)+1)}decrement(e){Ce(this,qn,K(this,qn)-1),e&&Ce(this,On,K(this,On)-1),this.revive()}revive(){for(const e of K(this,fl))Ot(e,Xt),En(e);for(const e of K(this,dl))Ot(e,qr),En(e);Ce(this,fl,[]),Ce(this,dl,[]),this.flush()}oncommit(e){K(this,cl).add(e)}ondiscard(e){K(this,ul).add(e)}settled(){return(K(this,Yl)??Ce(this,Yl,na())).promise}static ensure(){if(Ke===null){const e=Ke=new Es;$l.add(Ke),$n||Es.enqueue(()=>{Ke===e&&e.flush()})}return Ke}static enqueue(e){en(e)}apply(){}};cl=new WeakMap,ul=new WeakMap,qn=new WeakMap,On=new WeakMap,Yl=new WeakMap,fl=new WeakMap,dl=new WeakMap,Et=new WeakSet,Jo=function(e,r){var v;e.f^=qt;for(var s=e.first;s!==null;){var o=s.f,a=(o&(Fr|_n))!==0,c=a&&(o&qt)!==0,u=c||(o&tr)!==0||this.skipped_effects.has(s);if((s.f&Jl)!==0&&((v=s.b)!=null&&v.is_pending())&&(r={parent:r,effect:s,effects:[],render_effects:[],block_effects:[]}),!u&&s.fn!==null){a?s.f^=qt:(o&Ls)!==0?r.effects.push(s):Tl(s)&&((s.f&yr)!==0&&r.block_effects.push(s),Pl(s));var f=s.first;if(f!==null){s=f;continue}}var d=s.parent;for(s=s.next;s===null&&d!==null;)d===r.effect&&(ut(this,Et,Un).call(this,r.effects),ut(this,Et,Un).call(this,r.render_effects),ut(this,Et,Un).call(this,r.block_effects),r=r.parent),s=d.next,d=d.parent}},Un=function(e){for(const r of e)((r.f&Xt)!==0?K(this,fl):K(this,dl)).push(r),ut(this,Et,Qo).call(this,r.deps),Ot(r,qt)},Qo=function(e){if(e!==null)for(const r of e)(r.f&jt)===0||(r.f&wn)===0||(r.f^=wn,ut(this,Et,Qo).call(this,r.deps))},xc=function(){if(K(this,On)===0){for(const e of K(this,cl))e();K(this,cl).clear()}K(this,qn)===0&&ut(this,Et,Ec).call(this)},Ec=function(){var a;if($l.size>1){this.previous.clear();var e=yt,r=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of $l){if(c===this){r=!1;continue}const u=[];for(const[d,v]of this.current){if(c.current.has(d))if(r&&v!==c.current.get(d))c.current.set(d,v);else continue;u.push(d)}if(u.length===0)continue;const f=[...c.current.keys()].filter(d=>!this.current.has(d));if(f.length>0){var o=ar;ar=[];const d=new Set,v=new Map;for(const h of u)ya(h,f,d,v);if(ar.length>0){Ke=c,c.apply();for(const h of ar)ut(a=c,Et,Jo).call(a,h,s);c.deactivate()}ar=o}}Ke=null,yt=e}this.committed=!0,$l.delete(this)};let xr=Es;function ba(t){var e=$n;$n=!0;try{for(var r;;){if(au(),ar.length===0&&(Ke==null||Ke.flush(),ar.length===0))return ts=null,r;_a()}}finally{$n=e}}function _a(){var t=rn;zs=!0;var e=null;try{var r=0;for(ns(!0);ar.length>0;){var s=xr.ensure();if(r++>1e3){var o,a;iu()}s.process(ar),tn.clear()}}finally{zs=!1,ns(t),ts=null}}function iu(){try{Ic()}catch(t){Zn(t,ts)}}let mr=null;function wa(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var s=t[r++];if((s.f&(Or|tr))===0&&Tl(s)&&(mr=new Set,Pl(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?Oa(s):s.fn=null),(mr==null?void 0:mr.size)>0)){tn.clear();for(const o of mr){if((o.f&(Or|tr))!==0)continue;const a=[o];let c=o.parent;for(;c!==null;)mr.has(c)&&(mr.delete(c),a.push(c)),c=c.parent;for(let u=a.length-1;u>=0;u--){const f=a[u];(f.f&(Or|tr))===0&&Pl(f)}}mr.clear()}}mr=null}}function ya(t,e,r,s){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const o of t.reactions){const a=o.f;(a&jt)!==0?ya(o,e,r,s):(a&(Is|yr))!==0&&(a&Xt)===0&&xa(o,e,s)&&(Ot(o,Xt),En(o))}}function xa(t,e,r){const s=r.get(t);if(s!==void 0)return s;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&jt)!==0&&xa(o,e,r))return r.set(o,!0),!0}return r.set(t,!1),!1}function En(t){for(var e=ts=t;e.parent!==null;){e=e.parent;var r=e.f;if(zs&&e===Ge&&(r&yr)!==0&&(r&sa)===0)return;if((r&(_n|Fr))!==0){if((r&qt)===0)return;e.f^=qt}}ar.push(e)}function cu(t){let e=0,r=Vr(0),s;return()=>{rs()&&(l(r),Ws(()=>(e===0&&(s=Sr(()=>t(()=>Sl(r)))),e+=1,()=>{en(()=>{e-=1,e===0&&(s==null||s(),s=void 0,Sl(r))})})))}}var uu=Br|Xn|Jl;function fu(t,e,r){new du(t,e,r)}class du{constructor(e,r,s){Ie(this,Mt);Dt(this,"parent");Ie(this,fr,!1);Ie(this,dr);Ie(this,Go,null);Ie(this,Pr);Ie(this,Bn);Ie(this,jr);Ie(this,vr,null);Ie(this,$t,null);Ie(this,Lr,null);Ie(this,Jr,null);Ie(this,hn,null);Ie(this,Vn,0);Ie(this,mn,0);Ie(this,Dn,!1);Ie(this,gn,null);Ie(this,ks,cu(()=>(Ce(this,gn,Vr(K(this,Vn))),()=>{Ce(this,gn,null)})));Ce(this,dr,e),Ce(this,Pr,r),Ce(this,Bn,s),this.parent=Ge.b,Ce(this,fr,!!K(this,Pr).pending),Ce(this,jr,kn(()=>{Ge.b=this;{var o=ut(this,Mt,Zo).call(this);try{Ce(this,vr,ir(()=>s(o)))}catch(a){this.error(a)}K(this,mn)>0?ut(this,Mt,Ms).call(this):Ce(this,fr,!1)}return()=>{var a;(a=K(this,hn))==null||a.remove()}},uu))}is_pending(){return K(this,fr)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!K(this,Pr).pending}update_pending_count(e){ut(this,Mt,$o).call(this,e),Ce(this,Vn,K(this,Vn)+e),K(this,gn)&&Dr(K(this,gn),K(this,Vn))}get_effect_pending(){return K(this,ks).call(this),l(K(this,gn))}error(e){var r=K(this,Pr).onerror;let s=K(this,Pr).failed;if(K(this,Dn)||!r&&!s)throw e;K(this,vr)&&(Jt(K(this,vr)),Ce(this,vr,null)),K(this,$t)&&(Jt(K(this,$t)),Ce(this,$t,null)),K(this,Lr)&&(Jt(K(this,Lr)),Ce(this,Lr,null));var o=!1,a=!1;const c=()=>{if(o){$c();return}o=!0,a&&Bc(),xr.ensure(),Ce(this,Vn,0),K(this,Lr)!==null&&tl(K(this,Lr),()=>{Ce(this,Lr,null)}),Ce(this,fr,this.has_pending_snippet()),Ce(this,vr,ut(this,Mt,Ns).call(this,()=>(Ce(this,Dn,!1),ir(()=>K(this,Bn).call(this,K(this,dr)))))),K(this,mn)>0?ut(this,Mt,Ms).call(this):Ce(this,fr,!1)};var u=Ue;try{Qt(null),a=!0,r==null||r(e,c),a=!1}catch(f){Zn(f,K(this,jr)&&K(this,jr).parent)}finally{Qt(u)}s&&en(()=>{Ce(this,Lr,ut(this,Mt,Ns).call(this,()=>{xr.ensure(),Ce(this,Dn,!0);try{return ir(()=>{s(K(this,dr),()=>e,()=>c)})}catch(f){return Zn(f,K(this,jr).parent),null}finally{Ce(this,Dn,!1)}}))})}}fr=new WeakMap,dr=new WeakMap,Go=new WeakMap,Pr=new WeakMap,Bn=new WeakMap,jr=new WeakMap,vr=new WeakMap,$t=new WeakMap,Lr=new WeakMap,Jr=new WeakMap,hn=new WeakMap,Vn=new WeakMap,mn=new WeakMap,Dn=new WeakMap,gn=new WeakMap,ks=new WeakMap,Mt=new WeakSet,cm=function(){try{Ce(this,vr,ir(()=>K(this,Bn).call(this,K(this,dr))))}catch(e){this.error(e)}Ce(this,fr,!1)},um=function(){const e=K(this,Pr).pending;e&&(Ce(this,$t,ir(()=>e(K(this,dr)))),xr.enqueue(()=>{var r=ut(this,Mt,Zo).call(this);Ce(this,vr,ut(this,Mt,Ns).call(this,()=>(xr.ensure(),ir(()=>K(this,Bn).call(this,r))))),K(this,mn)>0?ut(this,Mt,Ms).call(this):(tl(K(this,$t),()=>{Ce(this,$t,null)}),Ce(this,fr,!1))}))},Zo=function(){var e=K(this,dr);return K(this,fr)&&(Ce(this,hn,Yr()),K(this,dr).before(K(this,hn)),e=K(this,hn)),e},Ns=function(e){var r=Ge,s=Ue,o=ot;Cr(K(this,jr)),Qt(K(this,jr)),Qn(K(this,jr).ctx);try{return e()}catch(a){return pa(a),null}finally{Cr(r),Qt(s),Qn(o)}},Ms=function(){const e=K(this,Pr).pending;K(this,vr)!==null&&(Ce(this,Jr,document.createDocumentFragment()),K(this,Jr).append(K(this,hn)),Da(K(this,vr),K(this,Jr))),K(this,$t)===null&&Ce(this,$t,ir(()=>e(K(this,dr))))},$o=function(e){var r;if(!this.has_pending_snippet()){this.parent&&ut(r=this.parent,Mt,$o).call(r,e);return}Ce(this,mn,K(this,mn)+e),K(this,mn)===0&&(Ce(this,fr,!1),K(this,$t)&&tl(K(this,$t),()=>{Ce(this,$t,null)}),K(this,Jr)&&(K(this,dr).before(K(this,Jr)),Ce(this,Jr,null)))};function nt(t,e){return e}function vu(t,e,r){for(var s=[],o=e.length,a=0;a<o;a++)Us(e[a].e,s,!0);Ba(s,()=>{var c=s.length===0&&r!==null;if(c){var u=r,f=u.parentNode;yu(f),f.append(u),t.items.clear(),Er(t,e[0].prev,e[o-1].next)}for(var d=0;d<o;d++){var v=e[d];c||(t.items.delete(v.k),Er(t,v.prev,v.next)),Jt(v.e,!c)}t.first===e[0]&&(t.first=e[0].prev)})}function $e(t,e,r,s,o,a=null){var c=t,u=new Map,f=null,d=(e&fa)!==0,v=(e&ca)!==0,h=(e&ua)!==0;if(d){var m=t;c=m.appendChild(Yr())}var g=null,b=qs(()=>{var E=r();return Hn(E)?E:E==null?[]:Ts(E)}),_,p=!0;function w(){hu(k,_,c,e,s),g!==null&&(_.length===0?(g.fragment?(c.before(g.fragment),g.fragment=null):Hs(g.effect),A.first=g.effect):tl(g.effect,()=>{g=null}))}var A=kn(()=>{_=l(b);for(var E=_.length,C=new Set,j=Ke,N=null,R=Pa(),L=0;L<E;L+=1){var T=_[L],P=s(T,L),M=p?null:u.get(P);M?(v&&Dr(M.v,T),h?Dr(M.i,L):M.i=L,R&&j.skipped_effects.delete(M.e)):(M=mu(p?c:null,N,T,P,L,o,e,r),p&&(M.o=!0,N===null?f=M:N.next=M,N=M),u.set(P,M)),C.add(P)}if(E===0&&a&&!g)if(p)g={fragment:null,effect:ir(()=>a(c))};else{var B=document.createDocumentFragment(),V=Yr();B.append(V),g={fragment:B,effect:ir(()=>a(V))}}if(!p)if(R){for(const[z,G]of u)C.has(z)||j.skipped_effects.add(G.e);j.oncommit(w),j.ondiscard(()=>{})}else w();l(b)}),k={effect:A,items:u,first:f};p=!1}function hu(t,e,r,s,o){var T,P,M,B;var a=(s&Vc)!==0,c=e.length,u=t.items,f=t.first,d,v=null,h,m=[],g=[],b,_,p,w;if(a)for(w=0;w<c;w+=1)b=e[w],_=o(b,w),p=u.get(_),(T=p.a)==null||T.measure(),(h??(h=new Set)).add(p);for(w=0;w<c;w+=1){if(b=e[w],_=o(b,w),p=u.get(_),t.first??(t.first=p),!p.o){p.o=!0;var A=v?v.next:f;Er(t,v,p),Er(t,p,A),Fs(p,A,r),v=p,m=[],g=[],f=v.next;continue}if((p.e.f&tr)!==0&&(Hs(p.e),a&&((P=p.a)==null||P.unfix(),(h??(h=new Set)).delete(p))),p!==f){if(d!==void 0&&d.has(p)){if(m.length<g.length){var k=g[0],E;v=k.prev;var C=m[0],j=m[m.length-1];for(E=0;E<m.length;E+=1)Fs(m[E],k,r);for(E=0;E<g.length;E+=1)d.delete(g[E]);Er(t,C.prev,j.next),Er(t,v,C),Er(t,j,k),f=k,v=j,w-=1,m=[],g=[]}else d.delete(p),Fs(p,f,r),Er(t,p.prev,p.next),Er(t,p,v===null?t.first:v.next),Er(t,v,p),v=p;continue}for(m=[],g=[];f!==null&&f.k!==_;)(f.e.f&tr)===0&&(d??(d=new Set)).add(f),g.push(f),f=f.next;if(f===null)continue;p=f}m.push(p),v=p,f=p.next}if(f!==null||d!==void 0){for(var N=d===void 0?[]:Ts(d);f!==null;)(f.e.f&tr)===0&&N.push(f),f=f.next;var R=N.length;if(R>0){var L=(s&fa)!==0&&c===0?r:null;if(a){for(w=0;w<R;w+=1)(M=N[w].a)==null||M.measure();for(w=0;w<R;w+=1)(B=N[w].a)==null||B.fix()}vu(t,N,L)}}a&&en(()=>{var V;if(h!==void 0)for(p of h)(V=p.a)==null||V.apply()})}function mu(t,e,r,s,o,a,c,u){var f=(c&ca)!==0,d=(c&Dc)===0,v=f?d?Vs(r,!1,!1):Vr(r):r,h=(c&ua)===0?o:Vr(o),m={i:h,v,k:s,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var g=document.createDocumentFragment();g.append(t=Yr())}return m.e=ir(()=>a(t,v,h,u)),e!==null&&(e.next=m),m}finally{}}function Fs(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==null&&a!==s;){var c=Nl(a);o.before(a),a=c}}function Er(t,e,r){e===null?(t.first=r,t.effect.first=r&&r.e):(e.e.next&&(e.e.next.prev=null),e.next=r,e.e.next=r&&r.e),r===null?t.effect.last=e&&e.e:(r.e.prev&&(r.e.prev.next=null),r.prev=e,r.e.prev=e&&e.e)}function gu(t,e,r,s){const o=yn()?Cl:qs;if(r.length===0&&t.length===0){s(e.map(o));return}var a=Ke,c=Ge,u=Ea();function f(){Promise.all(r.map(d=>pu(d))).then(d=>{u();try{s([...e.map(o),...d])}catch(v){(c.f&Or)===0&&Zn(v,c)}a==null||a.deactivate(),Al()}).catch(d=>{Zn(d,c)})}t.length>0?Promise.all(t).then(()=>{u();try{return f()}finally{a==null||a.deactivate(),Al()}}):f()}function Ea(){var t=Ge,e=Ue,r=ot,s=Ke;return function(a=!0){Cr(t),Qt(e),Qn(r),a&&(s==null||s.activate())}}function Al(){Cr(null),Qt(null),Qn(null)}function Cl(t){var e=jt|Xt,r=Ue!==null&&(Ue.f&jt)!==0?Ue:null;return Ge!==null&&(Ge.f|=Xn),{ctx:ot,deps:null,effects:null,equals:va,f:e,fn:t,reactions:null,rv:0,v:Lt,wv:0,parent:r??Ge,ac:null}}function pu(t,e){let r=Ge;r===null&&Pc();var s=r.b,o=void 0,a=Vr(Lt),c=!Ue,u=new Map;return Su(()=>{var m;var f=na();o=f.promise;try{Promise.resolve(t()).then(f.resolve,f.reject).then(()=>{d===Ke&&d.committed&&d.deactivate(),Al()})}catch(g){f.reject(g),Al()}var d=Ke;if(c){var v=!s.is_pending();s.update_pending_count(1),d.increment(v),(m=u.get(d))==null||m.reject(Kn),u.delete(d),u.set(d,f)}const h=(g,b=void 0)=>{if(d.activate(),b)b!==Kn&&(a.f|=Zr,Dr(a,b));else{(a.f&Zr)!==0&&(a.f^=Zr),Dr(a,g);for(const[_,p]of u){if(u.delete(_),_===d)break;p.reject(Kn)}}c&&(s.update_pending_count(-1),d.decrement(v))};f.promise.then(h,g=>h(null,g||"unknown"))}),Ra(()=>{for(const f of u.values())f.reject(Kn)}),new Promise(f=>{function d(v){function h(){v===o?f(a):d(o)}v.then(h,h)}d(o)})}function y(t){const e=Cl(t);return Wa(e),e}function qs(t){const e=Cl(t);return e.equals=ha,e}function ka(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Jt(e[r])}}function bu(t){for(var e=t.parent;e!==null;){if((e.f&jt)===0)return(e.f&Or)===0?e:null;e=e.parent}return null}function Os(t){var e,r=Ge;Cr(bu(t));try{t.f&=~wn,ka(t),e=Ka(t)}finally{Cr(r)}return e}function Aa(t){var e=Os(t);if(t.equals(e)||(Ke!=null&&Ke.is_fork||(t.v=e),t.wv=Ga()),!An)if(yt!==null)rs()&&yt.set(t,e);else{var r=(t.f&hr)===0?qr:qt;Ot(t,r)}}let Bs=new Set;const tn=new Map;let Ca=!1;function Vr(t,e){var r={f:0,v:t,reactions:null,equals:va,rv:0,wv:0};return r}function te(t,e){const r=Vr(t);return Wa(r),r}function Vs(t,e=!1,r=!0){var o;const s=Vr(t);return e||(s.equals=ha),Jn&&r&&ot!==null&&ot.l!==null&&((o=ot.l).s??(o.s=[])).push(s),s}function I(t,e,r=!1){Ue!==null&&(!Ar||(Ue.f&la)!==0)&&yn()&&(Ue.f&(jt|yr|Is|la))!==0&&!(Yt!=null&&Yt.includes(t))&&Oc();let s=r?Fe(e):e;return Dr(t,s)}function Dr(t,e){if(!t.equals(e)){var r=t.v;An?tn.set(t,e):tn.set(t,r),t.v=e;var s=xr.ensure();s.capture(t,r),(t.f&jt)!==0&&((t.f&Xt)!==0&&Os(t),Ot(t,(t.f&hr)!==0?qt:qr)),t.wv=Ga(),Sa(t,Xt),yn()&&Ge!==null&&(Ge.f&qt)!==0&&(Ge.f&(Fr|_n))===0&&(cr===null?Mu([t]):cr.push(t)),!s.is_fork&&Bs.size>0&&!Ca&&_u()}return e}function _u(){Ca=!1;var t=rn;ns(!0);const e=Array.from(Bs);try{for(const r of e)(r.f&qt)!==0&&Ot(r,qr),Tl(r)&&Pl(r)}finally{ns(t)}Bs.clear()}function Sl(t){I(t,t.v+1)}function Sa(t,e){var r=t.reactions;if(r!==null)for(var s=yn(),o=r.length,a=0;a<o;a++){var c=r[a],u=c.f;if(!(!s&&c===Ge)){var f=(u&Xt)===0;if(f&&Ot(c,e),(u&jt)!==0){var d=c;yt==null||yt.delete(d),(u&wn)===0&&(u&hr&&(c.f|=wn),Sa(d,qr))}else f&&((u&yr)!==0&&mr!==null&&mr.add(c),En(c))}}}function Fe(t){if(typeof t!="object"||t===null||$r in t)return t;const e=Xl(t);if(e!==ta&&e!==Sc)return t;var r=new Map,s=Hn(t),o=te(0),a=Cn,c=u=>{if(Cn===a)return u();var f=Ue,d=Cn;Qt(null),Ha(a);var v=u();return Qt(f),Ha(d),v};return s&&r.set("length",te(t.length)),new Proxy(t,{defineProperty(u,f,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Fc();var v=r.get(f);return v===void 0?v=c(()=>{var h=te(d.value);return r.set(f,h),h}):I(v,d.value,!0),!0},deleteProperty(u,f){var d=r.get(f);if(d===void 0){if(f in u){const v=c(()=>te(Lt));r.set(f,v),Sl(o)}}else I(d,Lt),Sl(o);return!0},get(u,f,d){var g;if(f===$r)return t;var v=r.get(f),h=f in u;if(v===void 0&&(!h||(g=Qr(u,f))!=null&&g.writable)&&(v=c(()=>{var b=Fe(h?u[f]:Lt),_=te(b);return _}),r.set(f,v)),v!==void 0){var m=l(v);return m===Lt?void 0:m}return Reflect.get(u,f,d)},getOwnPropertyDescriptor(u,f){var d=Reflect.getOwnPropertyDescriptor(u,f);if(d&&"value"in d){var v=r.get(f);v&&(d.value=l(v))}else if(d===void 0){var h=r.get(f),m=h==null?void 0:h.v;if(h!==void 0&&m!==Lt)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return d},has(u,f){var m;if(f===$r)return!0;var d=r.get(f),v=d!==void 0&&d.v!==Lt||Reflect.has(u,f);if(d!==void 0||Ge!==null&&(!v||(m=Qr(u,f))!=null&&m.writable)){d===void 0&&(d=c(()=>{var g=v?Fe(u[f]):Lt,b=te(g);return b}),r.set(f,d));var h=l(d);if(h===Lt)return!1}return v},set(u,f,d,v){var k;var h=r.get(f),m=f in u;if(s&&f==="length")for(var g=d;g<h.v;g+=1){var b=r.get(g+"");b!==void 0?I(b,Lt):g in u&&(b=c(()=>te(Lt)),r.set(g+"",b))}if(h===void 0)(!m||(k=Qr(u,f))!=null&&k.writable)&&(h=c(()=>te(void 0)),I(h,Fe(d)),r.set(f,h));else{m=h.v!==Lt;var _=c(()=>Fe(d));I(h,_)}var p=Reflect.getOwnPropertyDescriptor(u,f);if(p!=null&&p.set&&p.set.call(v,d),!m){if(s&&typeof f=="string"){var w=r.get("length"),A=Number(f);Number.isInteger(A)&&A>=w.v&&I(w,A+1)}Sl(o)}return!0},ownKeys(u){l(o);var f=Reflect.ownKeys(u).filter(h=>{var m=r.get(h);return m===void 0||m.v!==Lt});for(var[d,v]of r)v.v!==Lt&&!(d in u)&&f.push(d);return f},setPrototypeOf(){qc()}})}var Ds,Na,Ma,Ta;function wu(){if(Ds===void 0){Ds=window,Na=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Ma=Qr(e,"firstChild").get,Ta=Qr(e,"nextSibling").get,ra(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ra(r)&&(r.__t=void 0)}}function Yr(t=""){return document.createTextNode(t)}function rr(t){return Ma.call(t)}function Nl(t){return Ta.call(t)}function D(t,e){return rr(t)}function J(t,e=!1){{var r=rr(t);return r instanceof Comment&&r.data===""?Nl(r):r}}function F(t,e=1,r=!1){let s=t;for(;e--;)s=Nl(s);return s}function yu(t){t.textContent=""}function Pa(){return!1}let ja=!1;function xu(){ja||(ja=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function el(t){var e=Ue,r=Ge;Qt(null),Cr(null);try{return t()}finally{Qt(e),Cr(r)}}function Eu(t,e,r,s=r){t.addEventListener(e,()=>el(r));const o=t.__on_r;o?t.__on_r=()=>{o(),s(!0)}:t.__on_r=()=>s(!0),xu()}function La(t){Ge===null&&(Ue===null&&Rc(),Lc()),An&&jc()}function ku(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function kr(t,e,r){var s=Ge;s!==null&&(s.f&tr)!==0&&(t|=tr);var o={ctx:ot,deps:null,nodes_start:null,nodes_end:null,f:t|Xt|hr,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Pl(o),o.f|=Ql}catch(u){throw Jt(o),u}else e!==null&&En(o);var a=o;if(r&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&Xn)===0&&(a=a.first,(t&yr)!==0&&(t&Br)!==0&&a!==null&&(a.f|=Br)),a!==null&&(a.parent=s,s!==null&&ku(a,s),Ue!==null&&(Ue.f&jt)!==0&&(t&_n)===0)){var c=Ue;(c.effects??(c.effects=[])).push(a)}return o}function rs(){return Ue!==null&&!Ar}function Ra(t){const e=kr(Kl,null,!1);return Ot(e,qt),e.teardown=t,e}function ye(t){La();var e=Ge.f,r=!Ue&&(e&Fr)!==0&&(e&Ql)===0;if(r){var s=ot;(s.e??(s.e=[])).push(t)}else return Ia(t)}function Ia(t){return kr(Ls|oa,t,!1)}function Au(t){return La(),kr(Kl|oa,t,!0)}function Cu(t){xr.ensure();const e=kr(_n|Xn,t,!0);return(r={})=>new Promise(s=>{r.outro?tl(e,()=>{Jt(e),s(void 0)}):(Jt(e),s(void 0))})}function Ys(t){return kr(Ls,t,!1)}function Su(t){return kr(Is|Xn,t,!0)}function Ws(t,e=0){return kr(Kl|e,t,!0)}function ce(t,e=[],r=[],s=[]){gu(s,e,r,o=>{kr(Kl,()=>t(...o.map(l)),!0)})}function kn(t,e=0){var r=kr(yr|e,t,!0);return r}function ir(t){return kr(Fr|Xn,t,!0)}function za(t){var e=t.teardown;if(e!==null){const r=An,s=Ue;Ya(!0),Qt(null);try{e.call(null)}finally{Ya(r),Qt(s)}}}function Fa(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const o=r.ac;o!==null&&el(()=>{o.abort(Kn)});var s=r.next;(r.f&_n)!==0?r.parent=null:Jt(r,e),r=s}}function Nu(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Fr)===0&&Jt(e),e=r}}function Jt(t,e=!0){var r=!1;(e||(t.f&sa)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(qa(t.nodes_start,t.nodes_end),r=!0),Fa(t,e&&!r),ls(t,0),Ot(t,Or);var s=t.transitions;if(s!==null)for(const a of s)a.stop();za(t);var o=t.parent;o!==null&&o.first!==null&&Oa(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function qa(t,e){for(;t!==null;){var r=t===e?null:Nl(t);t.remove(),t=r}}function Oa(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function tl(t,e,r=!0){var s=[];Us(t,s,!0),Ba(s,()=>{r&&Jt(t),e&&e()})}function Ba(t,e){var r=t.length;if(r>0){var s=()=>--r||e();for(var o of t)o.out(s)}else e()}function Us(t,e,r){if((t.f&tr)===0){if(t.f^=tr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var s=t.first;s!==null;){var o=s.next,a=(s.f&Br)!==0||(s.f&Fr)!==0&&(t.f&yr)!==0;Us(s,e,a?r:!1),s=o}}}function Hs(t){Va(t,!0)}function Va(t,e){if((t.f&tr)!==0){t.f^=tr,(t.f&qt)===0&&(Ot(t,Xt),En(t));for(var r=t.first;r!==null;){var s=r.next,o=(r.f&Br)!==0||(r.f&Fr)!==0;Va(r,o?e:!1),r=s}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}function Da(t,e){for(var r=t.nodes_start,s=t.nodes_end;r!==null;){var o=r===s?null:Nl(r);e.append(r),r=o}}let rn=!1;function ns(t){rn=t}let An=!1;function Ya(t){An=t}let Ue=null,Ar=!1;function Qt(t){Ue=t}let Ge=null;function Cr(t){Ge=t}let Yt=null;function Wa(t){Ue!==null&&(Yt===null?Yt=[t]:Yt.push(t))}let Wt=null,nr=0,cr=null;function Mu(t){cr=t}let Ua=1,Ml=0,Cn=Ml;function Ha(t){Cn=t}function Ga(){return++Ua}function Tl(t){var e=t.f;if((e&Xt)!==0)return!0;if(e&jt&&(t.f&=~wn),(e&qr)!==0){var r=t.deps;if(r!==null)for(var s=r.length,o=0;o<s;o++){var a=r[o];if(Tl(a)&&Aa(a),a.wv>t.wv)return!0}(e&hr)!==0&&yt===null&&Ot(t,qt)}return!1}function Xa(t,e,r=!0){var s=t.reactions;if(s!==null&&!(Yt!=null&&Yt.includes(t)))for(var o=0;o<s.length;o++){var a=s[o];(a.f&jt)!==0?Xa(a,e,!1):e===a&&(r?Ot(a,Xt):(a.f&qt)!==0&&Ot(a,qr),En(a))}}function Ka(t){var b;var e=Wt,r=nr,s=cr,o=Ue,a=Yt,c=ot,u=Ar,f=Cn,d=t.f;Wt=null,nr=0,cr=null,Ue=(d&(Fr|_n))===0?t:null,Yt=null,Qn(t.ctx),Ar=!1,Cn=++Ml,t.ac!==null&&(el(()=>{t.ac.abort(Kn)}),t.ac=null);try{t.f|=Rs;var v=t.fn,h=v(),m=t.deps;if(Wt!==null){var g;if(ls(t,nr),m!==null&&nr>0)for(m.length=nr+Wt.length,g=0;g<Wt.length;g++)m[nr+g]=Wt[g];else t.deps=m=Wt;if(rn&&rs()&&(t.f&hr)!==0)for(g=nr;g<m.length;g++)((b=m[g]).reactions??(b.reactions=[])).push(t)}else m!==null&&nr<m.length&&(ls(t,nr),m.length=nr);if(yn()&&cr!==null&&!Ar&&m!==null&&(t.f&(jt|qr|Xt))===0)for(g=0;g<cr.length;g++)Xa(cr[g],t);return o!==null&&o!==t&&(Ml++,cr!==null&&(s===null?s=cr:s.push(...cr))),(t.f&Zr)!==0&&(t.f^=Zr),h}catch(_){return pa(_)}finally{t.f^=Rs,Wt=e,nr=r,cr=s,Ue=o,Yt=a,Qn(c),Ar=u,Cn=f}}function Tu(t,e){let r=e.reactions;if(r!==null){var s=Ac.call(r,t);if(s!==-1){var o=r.length-1;o===0?r=e.reactions=null:(r[s]=r[o],r.pop())}}r===null&&(e.f&jt)!==0&&(Wt===null||!Wt.includes(e))&&(Ot(e,qr),(e.f&hr)!==0&&(e.f^=hr,e.f&=~wn),ka(e),ls(e,0))}function ls(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)Tu(t,r[s])}function Pl(t){var e=t.f;if((e&Or)===0){Ot(t,qt);var r=Ge,s=rn;Ge=t,rn=!0;try{(e&yr)!==0?Nu(t):Fa(t),za(t);var o=Ka(t);t.teardown=typeof o=="function"?o:null,t.wv=Ua;var a;gt&&tu&&(t.f&Xt)!==0&&t.deps}finally{rn=s,Ge=r}}}async function Pu(){await Promise.resolve(),ba()}function l(t){var e=t.f,r=(e&jt)!==0;if(Ue!==null&&!Ar){var s=Ge!==null&&(Ge.f&Or)!==0;if(!s&&!(Yt!=null&&Yt.includes(t))){var o=Ue.deps;if((Ue.f&Rs)!==0)t.rv<Ml&&(t.rv=Ml,Wt===null&&o!==null&&o[nr]===t?nr++:Wt===null?Wt=[t]:Wt.includes(t)||Wt.push(t));else{(Ue.deps??(Ue.deps=[])).push(t);var a=t.reactions;a===null?t.reactions=[Ue]:a.includes(Ue)||a.push(Ue)}}}if(An){if(tn.has(t))return tn.get(t);if(r){var c=t,u=c.v;return((c.f&qt)===0&&c.reactions!==null||Qa(c))&&(u=Os(c)),tn.set(c,u),u}}else r&&!(yt!=null&&yt.has(t))&&(c=t,Tl(c)&&Aa(c),rn&&rs()&&(c.f&hr)===0&&Ja(c));if(yt!=null&&yt.has(t))return yt.get(t);if((t.f&Zr)!==0)throw t.v;return t.v}function Ja(t){if(t.deps!==null){t.f^=hr;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&jt)!==0&&(e.f&hr)===0&&Ja(e)}}function Qa(t){if(t.v===Lt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(tn.has(e)||(e.f&jt)!==0&&Qa(e))return!0;return!1}function Sr(t){var e=Ar;try{return Ar=!0,t()}finally{Ar=e}}const ju=-7169;function Ot(t,e){t.f=t.f&ju|e}function Lu(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if($r in t)Gs(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&$r in r&&Gs(r)}}}function Gs(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{Gs(t[s],e)}catch{}const r=Xl(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=ea(r);for(let o in s){const a=s[o].get;if(a)try{a.call(t)}catch{}}}}}const Ru=["touchstart","touchmove"];function Iu(t){return Ru.includes(t)}const Za=new Set,Xs=new Set;function zu(t,e,r,s={}){function o(a){if(s.capture||jl.call(e,a),!a.cancelBubble)return el(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?en(()=>{e.addEventListener(t,o,s)}):e.addEventListener(t,o,s),o}function Sn(t,e,r,s,o){var a={capture:s,passive:o},c=zu(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ra(()=>{e.removeEventListener(t,c,a)})}function ft(t){for(var e=0;e<t.length;e++)Za.add(t[e]);for(var r of Xs)r(t)}let $a=null;function jl(t){var p;var e=this,r=e.ownerDocument,s=t.type,o=((p=t.composedPath)==null?void 0:p.call(t))||[],a=o[0]||t.target;$a=t;var c=0,u=$a===t&&t.__root;if(u){var f=o.indexOf(u);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var d=o.indexOf(e);if(d===-1)return;f<=d&&(c=f)}if(a=o[c]||t.target,a!==e){Cc(t,"currentTarget",{configurable:!0,get(){return a||r}});var v=Ue,h=Ge;Qt(null),Cr(null);try{for(var m,g=[];a!==null;){var b=a.assignedSlot||a.parentNode||a.host||null;try{var _=a["__"+s];_!=null&&(!a.disabled||t.target===a)&&_.call(a,t)}catch(w){m?g.push(w):m=w}if(t.cancelBubble||b===e||b===null)break;a=b}if(m){for(let w of g)queueMicrotask(()=>{throw w});throw m}}finally{t.__root=e,delete t.currentTarget,Qt(v),Cr(h)}}}function Ks(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Nn(t,e){var r=Ge;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function X(t,e){var r=(e&da)!==0,s=(e&Qc)!==0,o,a=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ks(a?t:"<!>"+t),r||(o=rr(o)));var c=s||Na?document.importNode(o,!0):o.cloneNode(!0);if(r){var u=rr(c),f=c.lastChild;Nn(u,f)}else Nn(c,c);return c}}function Fu(t,e,r="svg"){var s=!t.startsWith("<!>"),o=(e&da)!==0,a=`<${r}>${s?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var u=Ks(a),f=rr(u);if(o)for(c=document.createDocumentFragment();rr(f);)c.appendChild(rr(f));else c=rr(f)}var d=c.cloneNode(!0);if(o){var v=rr(d),h=d.lastChild;Nn(v,h)}else Nn(d,d);return d}}function Ne(t,e){return Fu(t,e,"svg")}function qu(t=""){{var e=Yr(t+"");return Nn(e,e),e}}function ge(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Yr();return t.append(e,r),Nn(e,r),t}function S(t,e){t!==null&&t.before(e)}let Js=!0;function Ee(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Ou(t,e){return Bu(t,e)}const rl=new Map;function Bu(t,{target:e,anchor:r,props:s={},events:o,context:a,intro:c=!0}){wu();var u=new Set,f=h=>{for(var m=0;m<h.length;m++){var g=h[m];if(!u.has(g)){u.add(g);var b=Iu(g);e.addEventListener(g,jl,{passive:b});var _=rl.get(g);_===void 0?(document.addEventListener(g,jl,{passive:b}),rl.set(g,1)):rl.set(g,_+1)}}};f(Ts(Za)),Xs.add(f);var d=void 0,v=Cu(()=>{var h=r??e.appendChild(Yr());return fu(h,{pending:()=>{}},m=>{if(a){_e({});var g=ot;g.c=a}o&&(s.$$events=o),Js=c,d=t(m,s)||{},Js=!0,a&&we()}),()=>{var b;for(var m of u){e.removeEventListener(m,jl);var g=rl.get(m);--g===0?(document.removeEventListener(m,jl),rl.delete(m)):rl.set(m,g)}Xs.delete(f),h!==r&&((b=h.parentNode)==null||b.removeChild(h))}});return Vu.set(d,v),d}let Vu=new WeakMap;class Ll{constructor(e,r=!0){Dt(this,"anchor");Ie(this,_r,new Map);Ie(this,Rr,new Map);Ie(this,or,new Map);Ie(this,Yn,new Set);Ie(this,Wl,!0);Ie(this,Ul,()=>{var e=Ke;if(K(this,_r).has(e)){var r=K(this,_r).get(e),s=K(this,Rr).get(r);if(s)Hs(s),K(this,Yn).delete(r);else{var o=K(this,or).get(r);o&&(K(this,Rr).set(r,o.effect),K(this,or).delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),s=o.effect)}for(const[a,c]of K(this,_r)){if(K(this,_r).delete(a),a===e)break;const u=K(this,or).get(c);u&&(Jt(u.effect),K(this,or).delete(c))}for(const[a,c]of K(this,Rr)){if(a===r||K(this,Yn).has(a))continue;const u=()=>{if(Array.from(K(this,_r).values()).includes(a)){var d=document.createDocumentFragment();Da(c,d),d.append(Yr()),K(this,or).set(a,{effect:c,fragment:d})}else Jt(c);K(this,Yn).delete(a),K(this,Rr).delete(a)};K(this,Wl)||!s?(K(this,Yn).add(a),tl(c,u,!1)):u()}}});Ie(this,As,e=>{K(this,_r).delete(e);const r=Array.from(K(this,_r).values());for(const[s,o]of K(this,or))r.includes(s)||(Jt(o.effect),K(this,or).delete(s))});this.anchor=e,Ce(this,Wl,r)}ensure(e,r){var s=Ke,o=Pa();if(r&&!K(this,Rr).has(e)&&!K(this,or).has(e))if(o){var a=document.createDocumentFragment(),c=Yr();a.append(c),K(this,or).set(e,{effect:ir(()=>r(c)),fragment:a})}else K(this,Rr).set(e,ir(()=>r(this.anchor)));if(K(this,_r).set(s,e),o){for(const[u,f]of K(this,Rr))u===e?s.skipped_effects.delete(f):s.skipped_effects.add(f);for(const[u,f]of K(this,or))u===e?s.skipped_effects.delete(f.effect):s.skipped_effects.add(f.effect);s.oncommit(K(this,Ul)),s.ondiscard(K(this,As))}else K(this,Ul).call(this)}}_r=new WeakMap,Rr=new WeakMap,or=new WeakMap,Yn=new WeakMap,Wl=new WeakMap,Ul=new WeakMap,As=new WeakMap;const Du=0,Qs=1;function Zs(t,e,r,s,o){var a=yn(),c=Lt,u=a?Vr(c):Vs(c,!1,!1),f=a?Vr(c):Vs(c,!1,!1),d=new Ll(t);kn(()=>{var v=e(),h=!1;if(Nc(v)){var m=Ea(),g=!1;const b=_=>{if(!h){g=!0,m(!1),xr.ensure();try{_()}finally{Al(),$n||ba()}}};v.then(_=>{b(()=>{Dr(u,_),d.ensure(Qs,s&&(p=>s(p,u)))})},_=>{b(()=>{if(Dr(f,_),d.ensure(Qs,o&&(p=>o(p,f))),!o)throw f.v})}),en(()=>{g||b(()=>{d.ensure(Du,r)})})}else Dr(u,v),d.ensure(Qs,s);return()=>{h=!0}})}function W(t,e,r=!1){var s=new Ll(t),o=r?Br:0;function a(c,u){s.ensure(c,u)}kn(()=>{var c=!1;e((u,f=!0)=>{c=!0,a(f,u)}),c||a(!1,null)},o)}function nl(t,e,r){var s=new Ll(t),o=!yn();kn(()=>{var a=e();o&&a!==null&&typeof a=="object"&&(a={}),s.ensure(a,r)})}function Ct(t,e,r=!1,s=!1,o=!1){var a=t,c="";ce(()=>{var u=Ge;if(c!==(c=e()??"")&&(u.nodes_start!==null&&(qa(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),c!=="")){var f=c+"";r?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var d=Ks(f);if((r||s)&&(d=rr(d)),Nn(rr(d),d.lastChild),r||s)for(;rr(d);)a.before(rr(d));else a.before(d)}})}function Wr(t,e,...r){var s=new Ll(t);kn(()=>{const o=e()??null;s.ensure(o,o&&(a=>o(a,...r)))},Br)}function Rl(t,e,r){var s=new Ll(t);kn(()=>{var o=e()??null;s.ensure(o,o&&(a=>r(a,o)))},Br)}function ei(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=ei(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Yu(){for(var t,e,r=0,s="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=ei(t))&&(s&&(s+=" "),s+=e);return s}function Wu(t){return typeof t=="object"?Yu(t):t??""}const ti=[...`
\r\f \v\uFEFF`];function Uu(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var o in r)if(r[o])s=s?s+" "+o:o;else if(s.length)for(var a=o.length,c=0;(c=s.indexOf(o,c))>=0;){var u=c+a;(c===0||ti.includes(s[c-1]))&&(u===s.length||ti.includes(s[u]))?s=(c===0?"":s.substring(0,c))+s.substring(u+1):c=u}}return s===""?null:s}function Hu(t,e){return t==null?null:String(t)}function pt(t,e,r,s,o,a){var c=t.__className;if(c!==r||c===void 0){var u=Uu(r,s,a);u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u),t.__className=r}else if(a&&o!==a)for(var f in a){var d=!!a[f];(o==null||d!==!!o[f])&&t.classList.toggle(f,d)}return a}function bt(t,e,r,s){var o=t.__style;if(o!==e){var a=Hu(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return s}const Gu=Symbol("is custom element"),Xu=Symbol("is html");function O(t,e,r,s){var o=Ku(t);o[e]!==(o[e]=r)&&(e==="loading"&&(t[Tc]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Ju(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Ku(t){return t.__attributes??(t.__attributes={[Gu]:t.nodeName.includes("-"),[Xu]:t.namespaceURI===Zc})}var ri=new Map;function Ju(t){var e=t.getAttribute("is")||t.nodeName,r=ri.get(e);if(r)return r;ri.set(e,r=[]);for(var s,o=t,a=Element.prototype;a!==o;){s=ea(o);for(var c in s)s[c].set&&r.push(c);o=Xl(o)}return r}const Qu=()=>performance.now(),Ur={tick:t=>requestAnimationFrame(t),now:()=>Qu(),tasks:new Set};function ni(){const t=Ur.now();Ur.tasks.forEach(e=>{e.c(t)||(Ur.tasks.delete(e),e.f())}),Ur.tasks.size!==0&&Ur.tick(ni)}function Zu(t){let e;return Ur.tasks.size===0&&Ur.tick(ni),{promise:new Promise(r=>{Ur.tasks.add(e={c:t,f:r})}),abort(){Ur.tasks.delete(e)}}}function ss(t,e){el(()=>{t.dispatchEvent(new CustomEvent(e))})}function $u(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function li(t){const e={},r=t.split(";");for(const s of r){const[o,a]=s.split(":");if(!o||a===void 0)break;const c=$u(o.trim());e[c]=a.trim()}return e}const ef=t=>t;function si(t,e,r,s){var o=(t&Xc)!==0,a=(t&Kc)!==0,c=o&&a,u=(t&Jc)!==0,f=c?"both":o?"in":"out",d,v=e.inert,h=e.style.overflow,m,g;function b(){return el(()=>d??(d=r()(e,(s==null?void 0:s())??{},{direction:f})))}var _={is_global:u,in(){var k;if(e.inert=v,!o){g==null||g.abort(),(k=g==null?void 0:g.reset)==null||k.call(g);return}a||m==null||m.abort(),ss(e,"introstart"),m=$s(e,b(),g,1,()=>{ss(e,"introend"),m==null||m.abort(),m=d=void 0,e.style.overflow=h})},out(k){if(!a){k==null||k(),d=void 0;return}e.inert=!0,ss(e,"outrostart"),g=$s(e,b(),m,0,()=>{ss(e,"outroend"),k==null||k()})},stop:()=>{m==null||m.abort(),g==null||g.abort()}},p=Ge;if((p.transitions??(p.transitions=[])).push(_),o&&Js){var w=u;if(!w){for(var A=p.parent;A&&(A.f&Br)!==0;)for(;(A=A.parent)&&(A.f&yr)===0;);w=!A||(A.f&Ql)!==0}w&&Ys(()=>{Sr(()=>_.in())})}}function $s(t,e,r,s,o){var a=s===1;if(Gn(e)){var c,u=!1;return en(()=>{if(!u){var p=e({direction:a?"in":"out"});c=$s(t,p,r,s,o)}}),{abort:()=>{u=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return o(),{abort:Pt,deactivate:Pt,reset:Pt,t:()=>s};const{delay:f=0,css:d,tick:v,easing:h=ef}=e;var m=[];if(a&&r===void 0&&(v&&v(0,1),d)){var g=li(d(0,1));m.push(g,g)}var b=()=>1-s,_=t.animate(m,{duration:f,fill:"forwards"});return _.onfinish=()=>{_.cancel();var p=(r==null?void 0:r.t())??1-s;r==null||r.abort();var w=s-p,A=e.duration*Math.abs(w),k=[];if(A>0){var E=!1;if(d)for(var C=Math.ceil(A/16.666666666666668),j=0;j<=C;j+=1){var N=p+w*h(j/C),R=li(d(N,1-N));k.push(R),E||(E=R.overflow==="hidden")}E&&(t.style.overflow="hidden"),b=()=>{var L=_.currentTime;return p+w*h(L/A)},v&&Zu(()=>{if(_.playState!=="running")return!1;var L=b();return v(L,1-L),!0})}_=t.animate(k,{duration:A,fill:"forwards"}),_.onfinish=()=>{b=()=>s,v==null||v(s,1-s),o()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=Pt)},deactivate:()=>{o=Pt},reset:()=>{s===0&&(v==null||v(1,0))},t:()=>b()}}function eo(t,e,r=e){var s=new WeakSet;Eu(t,"input",async o=>{var a=o?t.defaultValue:t.value;if(a=to(t)?ro(a):a,r(a),Ke!==null&&s.add(Ke),await Pu(),a!==(a=e())){var c=t.selectionStart,u=t.selectionEnd,f=t.value.length;if(t.value=a??"",u!==null){var d=t.value.length;c===u&&u===f&&d>f?(t.selectionStart=d,t.selectionEnd=d):(t.selectionStart=c,t.selectionEnd=Math.min(u,d))}}}),Sr(e)==null&&t.value&&(r(to(t)?ro(t.value):t.value),Ke!==null&&s.add(Ke)),Ws(()=>{var o=e();if(t===document.activeElement){var a=es??Ke;if(s.has(a))return}to(t)&&o===ro(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function to(t){var e=t.type;return e==="number"||e==="range"}function ro(t){return t===""?null:+t}const Ss=class Ss{constructor(e){Ie(this,Cs);Ie(this,pn,new WeakMap);Ie(this,vl);Ie(this,Hl);Ce(this,Hl,e)}observe(e,r){var s=K(this,pn).get(e)||new Set;return s.add(r),K(this,pn).set(e,s),ut(this,Cs,kc).call(this).observe(e,K(this,Hl)),()=>{var o=K(this,pn).get(e);o.delete(r),o.size===0&&(K(this,pn).delete(e),K(this,vl).unobserve(e))}}};pn=new WeakMap,vl=new WeakMap,Hl=new WeakMap,Cs=new WeakSet,kc=function(){return K(this,vl)??Ce(this,vl,new ResizeObserver(e=>{for(var r of e){Ss.entries.set(r.target,r);for(var s of K(this,pn).get(r.target)||[])s(r)}}))},Dt(Ss,"entries",new WeakMap);let no=Ss;var tf=new no({box:"border-box"});function oi(t,e,r){var s=tf.observe(t,()=>r(t[e]));Ys(()=>(Sr(()=>r(t[e])),s))}function ai(t,e){return t===e||(t==null?void 0:t[$r])===e}function Mn(t={},e,r,s){return Ys(()=>{var o,a;return Ws(()=>{o=a,a=[],Sr(()=>{t!==r(...a)&&(e(t,...a),o&&ai(r(...o),t)&&e(null,...o))})}),()=>{en(()=>{a&&ai(r(...a),t)&&e(null,...a)})}}),t}function rf(t=!1){const e=ot,r=e.l.u;if(!r)return;let s=()=>Lu(e.s);if(t){let o=0,a={};const c=Cl(()=>{let u=!1;const f=e.s;for(const d in f)f[d]!==a[d]&&(a[d]=f[d],u=!0);return u&&o++,o});s=()=>l(c)}r.b.length&&Au(()=>{ii(e,s),Ps(r.b)}),ye(()=>{const o=Sr(()=>r.m.map(Mc));return()=>{for(const a of o)typeof a=="function"&&a()}}),r.a.length&&ye(()=>{ii(e,s),Ps(r.a)})}function ii(t,e){if(t.l.s)for(const r of t.l.s)l(r);e()}let os=!1;function nf(t){var e=os;try{return os=!1,[t(),os]}finally{os=e}}const lf={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Tn(t,e,r){return new Proxy({props:t,exclude:e},lf)}const sf={get(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Gn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,r){let s=t.props.length;for(;s--;){let o=t.props[s];Gn(o)&&(o=o());const a=Qr(o,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Gn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const o=Qr(s,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===$r||e===aa)return!1;for(let r of t.props)if(Gn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Gn(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function nn(...t){return new Proxy({props:t},sf)}function q(t,e,r,s){var k;var o=!Jn||(r&Wc)!==0,a=(r&Hc)!==0,c=(r&Gc)!==0,u=s,f=!0,d=()=>(f&&(f=!1,u=c?Sr(s):s),u),v;if(a){var h=$r in t||aa in t;v=((k=Qr(t,e))==null?void 0:k.set)??(h&&e in t?E=>t[e]=E:void 0)}var m,g=!1;a?[m,g]=nf(()=>t[e]):m=t[e],m===void 0&&s!==void 0&&(m=d(),v&&(o&&zc(),v(m)));var b;if(o?b=()=>{var E=t[e];return E===void 0?d():(f=!0,E)}:b=()=>{var E=t[e];return E!==void 0&&(u=void 0),E===void 0?u:E},o&&(r&Uc)===0)return b;if(v){var _=t.$$legacy;return(function(E,C){return arguments.length>0?((!o||!C||_||g)&&v(C?b():E),E):b()})}var p=!1,w=((r&Yc)!==0?Cl:qs)(()=>(p=!1,b()));a&&l(w);var A=Ge;return(function(E,C){if(arguments.length>0){const j=C?l(w):o&&a?Fe(E):E;return I(w,j),p=!0,u!==void 0&&(u=j),E}return An&&p||(A.f&Or)!==0?w.v:l(w)})}function of(t){ot===null&&ia(),Jn&&ot.l!==null?af(ot).m.push(t):ye(()=>{const e=Sr(t);if(typeof e=="function")return e})}function af(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const cf="5";typeof window<"u"&&((wc=window.__svelte??(window.__svelte={})).v??(wc.v=new Set)).add(cf),ru();function uf(t){return Il(t,.5)}function ff(t){return Il(t,.75)-Il(t,.25)}function Il(t,e){if(We(t))return Il(t.v,e);if(We(e))return Il(t,e.v);const r=t.length;if(Array.isArray(e)||(e=[e]),!mo(e[0])||Hr(e)<0||sn(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(c,u){const f=(r-1)*u+1,d=Math.floor(f),v=Math.ceil(f);return c[d-1]+(c[v-1]-c[d-1])*(f-Math.floor(f))}const o=_o(t),a=e.map(c=>s(o,c));return e.length==1?a[0]:et(a)}function ci(t,e){We(t)&&ci(t.v,e);const r=ln(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const s=(r[1]-r[0])/e;return Ve.seq(r[0],r[1],s)}function ui(t){if(We(t))return ui(t.v);const e=new Ve.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Ve(e)}function lo(t,e){if(We(t))return lo(t.v,e);e===void 0&&(e=.1);const r=ln(t),s=(r[1]-r[0])*e;return[r[0]-s,r[1]+s]}function ln(t){if(We(t))return ln(t.v);let e=t[0],r=t[0];for(let s=1;s<t.length;s++)t[s]<e&&(e=t[s]),t[s]>r&&(r=t[s]);return[e,r]}function as(t,e){return We(t)?as(t.v,e):Math.sqrt(is(t,e))}function is(t,e){if(e===void 0&&(e=!1),We(t))return is(t.v);const r=Pn(t);let s=0;for(let o=0;o<t.length;o++){const a=t[o]-r;s=s+a*a}return s/(e?t.length:t.length-1)}function Pn(t){return We(t)?Pn(t.v):fi(t)/t.length}function fi(t){if(We(t))return fi(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function di(t){if(We(t))return di(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Hr(t){return We(t)||pr(t)?t.v[so(t.v)-1]:t[so(t)-1]}function so(t){if(We(t)||pr(t))return so(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]<r&&(e=s,r=t[s-1]);return e}function sn(t){return We(t)||pr(t)?t.v[oo(t.v)-1]:t[oo(t)-1]}function oo(t){if(We(t)||pr(t))return oo(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]>r&&(e=s,r=t[s-1]);return e}const ao=30,df=1e-7,vf=1e-7,vi=1e-13,hi=1e3,hf=100;function mi(t,e,r,s,o){s===void 0&&(s=hi),r===void 0&&(r=vi),o===void 0&&(o=hf);let a=r,c=s,u=(c-a)/o;for(let f=0;f<o;f++){let d,v;for(let g=0;g<o;g++){d=a+g*u,v=a+(g+1)*u;const b=e(d),_=e(v);if(b<=t&&_>=t)break}const h=(d+v)/2,m=e(h);if(Math.abs(m-t)<df||(a=d,c=v,u=(c-a)/o,u/c<vf))return h}return(a+c)/2}function gi(t,e=0,r=1){let s=Ve.zeros(t);for(let o=0;o<t;o++)s.v[o]=e+Math.random()*(r-e);return s}function pi(t,e=0,r=1){let s=Ve.zeros(t);for(let o=0;o<t;o++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[o]=a*Math.sin(c)*r+e}return s}function io(t,e=0,r=1){if(We(t))return t.apply(o=>io(o,e,r));const s=1/(Math.sqrt(2)*r);return .5*(1+gf((t-e)*s))}function co(t,e=0,r=1){if(We(t))return t.apply(B=>co(B,e,r));if(e!==0||r!==1)return co(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const s=.425,o=5,a=.180625,c=1.6,u=3.3871327179,f=5.0434271938*10,d=1.5929113202*100,v=5.910937472*10,h=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,b=1.4234372777,_=2.75681539,p=1.3067284816,w=1.7023821103*.1,A=7.370016425*.1,k=1.2021132975*.1,E=6.657905115,C=3.081226386,j=4.2868294337*.1,N=1.7337203997*.01,R=2.4197894225*.1,L=1.2258202635*.01,T=t-.5;let P;if(Math.abs(T)<=s)return P=a-T*T,T*(((v*P+d)*P+f)*P+u)/(((g*P+m)*P+h)*P+1);P=T<0?t:1-t,P=Math.sqrt(-Math.log(P));let M;return P<=o?(P=P-c,M=(((w*P+p)*P+_)*P+b)/((k*P+A)*P+1)):(P=P-o,M=((N*P+j)*P+C+E)/((L*P+R)*P+1)),T<0?-M:M}function uo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return uo(et(t),e,r);if(We(t))return t.apply(s=>uo(s,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return cs(t*e,e)}return e==Number.POSITIVE_INFINITY?1-cs(r/t,r):e*t>r?1-us(r/(r+e*t),r/2,e/2):us(e*t/(r+e*t),e/2,r/2)}function bi(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let s=hi,o=vi;if(t>.9997&&r===1?(s=1e7,o=6e5,t=.9997):t>.9992&&r===1?(s=1e7,o=6e5):t>.997&&r===1?(s=1e6,o=45e3):t>.992&&r===1?(s=1e5,o=5e3):t>.97&&r===1&&(s=1e4,o=400),Array.isArray(t))return bi(et(t),e,r);const a=u=>uo(u,e,r);function c(u,f,d){return u===0?0:u===1?Inf:f===0?NaN:d===0?NaN:mi(u,a,o,s)}return We(t)?t.apply(c,e,r):c(t,e,r)}function cs(t,e){if(Array.isArray(t))return cs(et(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(s);function a(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const d=f/e,v=Math.pow(d,1/6)-.5*Math.pow(d,1/3)+1/3*Math.pow(d,1/2);return io(v,r,o)}function c(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:mf(f/2,e/2)/zl(e/2)}const u=e>ao?a:c;return We(t)?t.apply(u):u(t)}function Gr(t,e){if(Array.isArray(t))return Gr(et(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(s);function a(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const d=co(f,r,o),v=Math.pow(Math.sqrt(36*d*d-30*d+13)/4+(3*d-3/2)/2+1/8,1/3);return Math.pow(v-3/(4*v)+.5,6)*e}function c(f){return f===0?0:f===1?Inf:e===0?0:mi(f,v=>cs(v,e),0,ao*10)}const u=e>ao?a:c;return We(t)?t.apply(u):u(t)}function us(t,e,r){if(Array.isArray(t))return us(et(t),e,r);if(We(t))return t.apply(o=>us(o,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const s=.5-t+.5;return Nf(e,r,t,s)}function zl(t){if(We(t))return t.apply(zl);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+zl(1-t));t=t-1;let r=.9999999999998099;for(let o=0;o<e.length;o++)r=r+e[o]/(t+o+1);const s=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*r}function mf(t,e){let o=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/zl(e+a+1);if(isNaN(c)||c<1e-18)break;o+=c}return Math.pow(t,e)*zl(e)*Math.exp(-t)*o}function gf(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,s=-.284496736,o=1.421413741,a=-1.453152027,c=1.061405429,f=1/(1+.3275911*t),d=1-((((c*f+a)*f+o)*f+s)*f+r)*f*Math.exp(-t*t);return e*d}function _i(t,e){const r=.564189583547756,s=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],u=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let d,v,h,m,g=Math.abs(e);if(g<=.5)return v=e*e,m=(((s[0]*v+s[1])*v+s[2])*v+s[3])*v+s[4]+1,h=((o[0]*v+o[1])*v+o[2])*v+1,d=.5-e*(m/h)+.5,d=Math.exp(v)*d,d;if(g<=4)m=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],h=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],d=m/h;else{if(e<=-5.6)return d=2,d=Math.exp(e*e)*2,d;v=1/(e*e),m=(((u[0]*v+u[1])*v+u[2])*v+u[3])*v+u[4],h=(((f[0]*v+f[1])*v+f[2])*v+f[3])*v+1,d=(r-v*m/h)/g}return e<0&&(d=Math.exp(e*e)*2-d),d}function wi(t,e){let r=t+e-2;return r<=.25?ur(r+1):r<=1.25?ur(r)+an(r):ur(r-1)+Math.log(r*(r+1))}function fs(t,e){const r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,d,v,h,m,g,b,_,p,w,A,k,E,C,j;return v=Math.min(t,e),h=Math.max(t,e),g=v/h,m=g/(g+1),p=1/(g+1),k=p*p,w=p+k+1,A=p+k*w+1,E=p+k*A+1,C=p+k*E+1,j=p+k*C+1,d=1/h,b=d*d,_=((((u*j*b+c*C)*b+a*E)*b+o*A)*b+s*w)*b+r,_*=m/h,d=1/v,b=d*d,f=(((((u*b+c)*b+a)*b+o)*b+s)*b+r)/v+_,f}function dt(t){let e,r,s,o,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],u=.273076135303957,f=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(f*r+u)*r+1,s=a/o,e>0?r*s/t:t*(s+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],u=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(((u[4]*r+u[3])*r+u[2])*r+u[1])*r+1,s=a/o,e>0?r/t*(s-.5-.5):t*s}}}function pf(t,e,r){let s,o,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=o=0,s=0;for(let u=1;u<=r;u++)a=o,o=s,s=c*o-a+e[r-u];return(s-a)*.5}function yi(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,s=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*pf(t/.375,e,r));if(t<s)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function on(t,e){const r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,d,v,h,m,g,b,_,p,w,A,k,E,C;return t>e?(v=e/t,f=1/(v+1),_=v/(v+1),d=t+(e-.5)):(v=t/e,f=v/(v+1),_=1/(v+1),d=e+(t-.5)),A=_*_,p=_+A+1,w=_+A*p+1,k=_+A*w+1,E=_+A*k+1,C=_+A*E+1,h=1/(e*e),b=((((u*C*h+c*E)*h+a*k)*h+o*w)*h+s*p)*h+r,b*=f/e,m=d*an(t/e),g=t*(Math.log(e)-1),m>g?b-g-m:b-m-g}function ur(t){if(t<.6){const b=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*b}else{const e=.422784335098467,r=.848044614534529,s=.565221050691933,o=.156513060486551,a=.017050248402265,c=.000497958207639485,u=1.24313399877507,f=.548042109832463,d=.10155218743983,v=.00713309612391,h=.000116165475989616,m=t-.5-.5,g=(((((c*m+a)*m+o)*m+s)*m+r)*m+e)/(((((h*m+v)*m+d)*m+f)*m+u)*m+1);return m*g}}function gr(t){const e=.418938533204673,r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;if(t<=.8)return ur(t)-Math.log(t);if(t<=2.25)return ur(t-.5-.5);if(t<10){let v=Math.round(t-1.25),h=t,m=1;for(let g=1;g<=v;++g)h+=-1,m*=h;return ur(h-1)+Math.log(m)}let f=1/(t*t),d=(((((u*f+c)*f+a)*f+o)*f+s)*f+r)/t;return e+d+(t-.5)*(Math.log(t)-1)}function fo(t,e){const r=.918938533204673;let s=Math.min(t,e),o=Math.max(t,e);function a(c,u,f){let d=Math.round(f-1),v=1;for(let h=1;h<=d;++h)f+=-1,v*=f/(u+f);return c+Math.log(v)+(gr(u)+(gr(f)-wi(u,f)))}if(s<8){if(s<1)return o<8?gr(s)+(gr(o)-gr(s+o)):gr(s)+on(s,o);let c;if(s<2)return o<=2?gr(s)+gr(o)-wi(s,o):o<8?(c=0,a(c,s,o)):gr(s)+on(s,o);if(o<=1e3){let u=Math.round(s-1);c=1;for(let f=1;f<=u;++f){s+=-1;let d=s/o;c*=d/(d+1)}return c=Math.log(c),o>=8?c+gr(s)+on(s,o):a(c,s,o)}else{let u=Math.round(s-1);c=1;for(let f=1;f<=u;++f)s+=-1,c*=s/(s/o+1);return log(c)-u*log(o)+(gr(s)+on(s,o))}}else{let c=fs(s,o),u=s/o,f=-(s-.5)*Math.log(u/(u+1)),d=o*an(u);return f>d?Math.log(o)*-.5+r+c-d-f:Math.log(o)*-.5+r+c-f-d}}function xi(t){return(t==0?1024:-300)*.69314718055995*.99999}function ll(t){const e=.0566749439387324,r=.0456512608815524,s=.333333333333333,o=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,u=.354508718369557;let f,d,v,h,m;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(f=t+.3,f/=.7,m=e-f*.3):t>.18?(f=t*.75-.25,m=r+f/3):(f=t,m=0),d=f/(f+2),v=d*d,h=((a*v+o)*v+s)/((u*v+c)*v+1),v*2*(1/(1-d)-d*h)+m)}function an(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,s=-.0178874546012214,o=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let u=t/(t+2),f=u*u,d=(((s*f+r)*f+e)*f+1)/(((c*f+a)*f+o)*f+1);return u*2*d}function bf(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,d,v,h,m;if(v=Math.abs(t),v<=.5)return f=t*t,m=(((r[0]*f+r[1])*f+r[2])*f+r[3])*f+r[4]+1,h=((s[0]*f+s[1])*f+s[2])*f+1,t*(m/h);if(v<=4){m=((((((o[0]*v+o[1])*v+o[2])*v+o[3])*v+o[4])*v+o[5])*v+o[6])*v+o[7],h=((((((a[0]*v+a[1])*v+a[2])*v+a[3])*v+a[4])*v+a[5])*v+a[6])*v+a[7];let b=.5-Math.exp(-t*t)*m/h+.5;return t<0?-b:b}if(v>=5.8)return t>0?1:-1;d=t*t,f=1/d,m=(((c[0]*f+c[1])*f+c[2])*f+c[3])*f+c[4],h=(((u[0]*f+u[1])*f+u[2])*f+u[3])*f+1,f=(e-m/(d*h))/v;let g=.5-Math.exp(-d)*f+.5;return t<0?-g:g}function _f(t){const e=914041914819518e-24,r=.0238082361044469,s=-.499999999085958,o=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+o)*t+s)*t+1));{let u=Math.exp(t);return t>0?u*(.5-1/u+.5):u-.5-.5}}function Fl(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function wf(t){const e=.785398163397448,r=1.4616321449683622,s=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],o=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let u,f,d,v,h,m,g,b,_,p,w,A,k;if(w=Number.MAX_SAFE_INTEGER,v=.5/(.5*Number.EPSILON),w>v&&(w=v),k=1e-9,b=0,t<.5){if(fabs(t)<=k){if(t==0)return 0;b=-1/t}else{if(h=-t,_=e,h<=0&&(h=-h,_=-_),h>=w)return 0;if(d=Math.round(h),h-=d,d=Math.round(h*4),h=(h-d*.25)*4,f=d/2,f+f!=d&&(h=1-h),m=e*h,u=f/2,u+u!=f&&(_=-_),f=(d+1)/2,u=f/2,u+=u,u==f){if(m==0)return 0;b=_*(cos(m)/sin(m)*4)}else b=_*(sin(m)/cos(m)*4)}t=1-t}if(t<=3){g=t,A=s[0]*t;for(let E=1;E<=5;++E)g=(g+o[E-1])*t,A=(A+s[E])*t;return g=(A+s[6])/(g+o[5]),p=t-r,g*p+b}if(t<w){h=1/(t*t),g=h,A=a[0]*h;for(let E=1;E<=3;++E)g=(g+c[E-1])*h,A=(A+a[E])*h;b=A/(g+c[3])-.5/t+b}return b+log(t)}function yf(t,e,r,s){let o,a,c,u,f,d;if(t>s*.001){if(u=t*Math.log(r),u<Math.exparg(1))return 0;o=Math.exp(u)}else o=1;for(o*=e/t,d=s/t,f=t+1,u=r,c=u/f,f+=1,u=r*u,a=u/f,c+=a;Math.abs(r)>d;)f+=1,u=r*u,a=u/f,c+=a;return o*=t*c+1,o}function xf(t,e,r,s){const o=.577215664901533;let a,c,u,f,d,v,h=e*r;for(d=r-h,c=e*s<=.02?Math.log(r)+wf(e)+o+d:Math.log(h)+o+d,a=s*5*Math.abs(c),u=1,f=0,u+=1,d*=r-h/u,v=d/u,f+=v;Math.abs(v)>a;)u+=1,d*=r-h/u,v=d/u,f+=v;return-t*(c+f)}function vo(t,e,r,s){let o,a,c,u,f,d,v,h,m;if(r==0)return 0;if(v=Math.min(t,e),v>=1)d=t*Math.log(r)-fo(t,e),a=Math.exp(d)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(a=Math.pow(r,t),a==0)return a;m=t+e,m>1?(f=t+e-1,d=(dt(f)+1)/m):d=dt(m)+1,c=(dt(t)+1)*(dt(e)+1)/d,a*=c*(e/m)}else{if(f=ur(v),o=Math.round(h-1),o>=1){c=1;for(let w=1;w<=o;++w)h+=-1,c*=h/(v+h);f+=Math.log(c)}d=t*Math.log(r)-f,h+=-1,m=v+h,m>1?(f=v+h-1,u=(dt(f)+1)/m):u=dt(m)+1,a=Math.exp(d)*(v/t)*(dt(h)+1)/u}else f=ur(v)+on(v,h),d=t*Math.log(r)-f,a=v/t*Math.exp(d);if(a==0||t<=s*.1)return a;let g=s/t,b=0,_=0,p;for(c=1,b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),_+=p;b<1e7&&Math.abs(p)>g;)b+=1,c*=(.5-e/b+.5)*r,p=c/(t+b),_+=p;return t*_>-1?a*=t*_+1:a=0,a}function ds(t,e,r,s,o,a){let c,u,f,d,v,h=t+e,m=t+1;if(o>1&&t>=1&&h>=m*1.1?(f=Math.round(Math.abs(xi(1))),u=Math.round(xi(0)),f>u&&(f=u),d=Math.exp(-f)):(f=0,d=1),c=Af(f,t,e,r,s)/t,o==1||c==0)return c;let g=o-1,b=d;if(u=0,e>1){if(s>1e-4){let _=(e-1)*r/s-t;_>=1&&(u=_<g?Math.round(_):g)}else u=g;for(let _=0;_<u;++_)v=_,d*=(h+v)/(m+v)*r,b+=d}for(let _=u;_<g&&(v=_,d*=(h+v)/(m+v)*r,b+=d,!(d<=a*b));++_);return c*=b,c}function Ef(t,e,r,s,o,a){let c,u,f,d,v,h,m,g,b,_,p,w,A,k,E,C,j,N,R;if(!Number.isFinite(o)||(R=kf(t,e,r,s),Number.isNaN(R)))return Number.NaN;if(R==0)return 0;for(c=o+1,b=e/t,_=1/t+1,k=s+1,f=0,d=1,h=t+1,w=0,A=1,E=1,C=c/_,v=_/c,f+=1,m=f/t,g=f*(e-f)*r,u=t/h,N=d*(d+b)*u*u*(g*r),u=(m+1)/(_+m+m),j=f+g/h+u*(c+f*k),d=m+1,h+=2,m=N*w+j*E,w=E,E=m,m=N*A+j*C,A=C,C=m,p=v,v=E/C,w/=C,A/=C,E=v,C=1;f<1e4&&(f+=1,m=f/t,g=f*(e-f)*r,u=t/h,N=d*(d+b)*u*u*(g*r),u=(m+1)/(_+m+m),j=f+g/h+u*(c+f*k),d=m+1,h+=2,m=N*w+j*E,w=E,E=m,m=N*A+j*C,A=C,C=m,p=v,v=E/C,!(Math.abs(v-p)<=a*v));)w/=C,A/=C,E=v,C=1;return R*v}function kf(t,e,r,s){const o=.398942280401433;let a,c,u,f,d,v,h,m,g;if(r==0||s==0)return 0;if(h=Math.min(t,e),h<8){let b,_;if(r<=.375?(b=Math.log(r),_=an(-r)):s>.375?(b=Math.log(r),_=Math.log(s)):(b=an(-s),_=Math.log(s)),v=t*b+e*_,h>=1)return v-=fo(t,e),Math.exp(v);if(m=Math.max(t,e),m>=8)return f=ur(h)+on(h,m),h*Math.exp(v-f);if(m<=1){let w=Math.exp(v);return w==0?0:(g=t+e,g>1?(f=t+e-1,v=(dt(f)+1)/g):v=dt(g)+1,c=(dt(t)+1)*(dt(e)+1)/v,w*(h*c)/(h/m+1))}if(f=ur(h),a=Math.round(m-1),a>=1){c=1;for(let w=1;w<=a;++w)m+=-1,c*=m/(h+m);f=Math.log(c)+f}v-=f,m+=-1,g=h+m;let p;return g>1?(f=h+m-1,p=(dt(f)+1)/g):p=dt(g)+1,h*Math.exp(v)*(dt(m)+1)/p}else{let b,_,p,w;return t<=e?(b=t/e,_=b/(b+1),p=1/(b+1),w=t-(t+e)*r):(b=e/t,_=1/(b+1),p=b/(b+1),w=(t+e)*s-e),u=-w/t,f=Math.abs(u)>.6?u-Math.log(r/_):ll(u),u=w/e,d=Math.abs(u)<=.6?ll(u):u-Math.log(s/p),v=Math.exp(-(t*f+e*d)),o*Math.sqrt(e*_)*v*Math.exp(-fs(t,e))}}function Af(t,e,r,s,o){const a=.398942280401433;let c,u,f,d,v,h,m,g;if(h=Math.min(e,r),h<8){let b,_;if(s<=.375?(b=Math.log(s),_=an(-s)):o>.375?(b=Math.log(s),_=Math.log(o)):(b=an(-o),_=Math.log(o)),v=e*b+r*_,h>=1)return v-=fo(e,r),Fl(t,v);if(m=Math.max(e,r),m>=8)return f=ur(h)+on(h,m),h*Fl(t,v-f);if(m<=1){let w=Fl(t,v);return w==0?w:(g=e+r,g>1?(f=e+r-1,v=(dt(f)+1)/g):v=dt(g)+1,c=(dt(e)+1)*(dt(r)+1)/v,w*(h*c)/(h/m+1))}f=ur(h);let p=Math.round(m-1);if(p>=1){c=1;for(let w=1;w<=p;++w)m+=-1,c*=m/(h+m);f+=Math.log(c)}return v-=f,m+=-1,g=h+m,u=g>1?(dt(g-1)+1)/g:dt(g)+1,h*Fl(t,v)*(dt(m)+1)/u}else{let b,_,p,w;e>r?(b=r/e,_=1/(b+1),p=b/(b+1),w=(e+r)*o-r):(b=e/r,_=b/(b+1),p=1/(b+1),w=e-(e+r)*s),-yi(r/e);let A=-w/e;return f=Math.abs(A)>.6?A-Math.log(s/_):ll(A),A=w/r,d=Math.abs(A)>.6?A-Math.log(o/p):ll(A),v=Fl(t,-(e*f+r*d)),a*Math.sqrt(r*_)*v*Math.exp(-fs(e,r))}}function ho(t,e,r,s,o,a){let u=Array(30),f=Array(30),d=e-.5-.5,v=t+d*.5,h=s>.375?Math.log(r):an(-s),m=-v*h;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+yi(dt(e))+e*Math.log(m)+v*h,b=g-(on(e,t)+e*Math.log(v)),_=Math.exp(b);if(b==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let p=_==0,w=o==0?0:Math.exp(Math.log(o)-b),A=Cf(e,m,g,a),k=.25/(v*v),E=h*.25*h,C=A,j=C,N=1,R=1,L=0;for(let T=1;T<=30;++T){let P=e+L;C=(P*(P+1)*C+(m+P+1)*N)*k,L+=2,N*=E,R/=L*(L+1);let M=T-1;u[M]=R;let B=0;if(T>1){let z=e-T;for(let G=1;G<=M;++G)B+=z*u[G-1]*f[M-G],z+=e}f[M]=d*R+B/T;let V=f[M]*C;if(j+=V,j<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(V)<=a*(j+w))break}return o+=p?Math.exp(b+Math.log(j)):_*j,o}function Cf(t,e,r,s){const o=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-bf(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return _i(1,a)/a*o}}else if(e<1.1){let a=3,c=e,u=e/(t+3),f=s*.1/(t+1),d;for(a+=1,c*=-(e/a),d=c/(t+a),u+=d;Math.abs(d)>f;)a+=1,c*=-(e/a),d=c/(t+a),u+=d;let v=t*e*((u/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),m=dt(t),g=m+1;if(e>=.25&&t<e/2.59||h>-.13394){let b=_f(h),_=((b+.5+.5)*v-b)*g-m;return _<=0?0:_*Math.exp(-r)}else return(.5-Math.exp(h)*g*(.5-v+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,u=e,f=e+(1-t),d=1,v,h;a=e*c+d*a,u=e*f+d*u,v=a/u,d+=1;let m=d-t;for(c=a+m*c,f=u+m*f,h=c/f;Math.abs(h-v)>=s*h;)a=e*c+d*a,u=e*f+d*u,v=a/u,d+=1,m=d-t,c=a+m*c,f=u+m*f,h=c/f;return h}}function Sf(t,e,r,s){const a=1.12837916709551,c=.353553390593274,u=Array(21),f=Array(21),d=Array(21),v=Array(21);let h=t*ll(-r/t)+e*ll(r/e),m;if(m=Math.exp(-h),m==0)return 0;let g=Math.sqrt(h),b=g/c*.5,_=h+h,p,w,A,k;t<e?(p=t/e,w=1/(p+1),A=(e-t)/e,k=1/Math.sqrt(t*(p+1))):(p=e/t,w=1/(p+1),A=(e-t)/t,k=1/Math.sqrt(e*(p+1))),u[0]=A*.6666666666666666,d[0]=u[0]*-.5,v[0]=-d[0];let E=.5/a*_i(1,g),C=c,j=E+v[0]*k*C,N=1,R=p*p,L=1,T=k,P=b,M=_;for(let V=2;V<=20;V+=2){L*=R,u[V-1]=w*2*(p*L+1)/(V+2);let z=V+1;N+=L,u[z-1]=A*2*N/(V+3);for(let H=V;H<=z;++H){let $=(H+1)*-.5;f[0]=$*u[0];for(let Z=2;Z<=H;++Z){let ee=0;for(let se=1;se<=Z-1;++se){let ne=Z-se;ee+=(se*$-ne)*u[se-1]*f[ne-1]}f[Z-1]=$*u[Z-1]+ee/Z}d[H-1]=f[H-1]/(H+1);let le=0;for(let Z=1;Z<=H-1;++Z)le+=v[H-Z-1]*d[Z-1];v[H-1]=-(le+d[H-1])}E=c*P+(V-1)*E,C=c*M+V*C,P=_*P,M=_*M,T*=k;let G=v[V-1]*T*E;T*=k;let ae=v[z-1]*T*C;if(j+=G+ae,Math.abs(G)+Math.abs(ae)<=s*j)break}let B=Math.exp(-fs(t,e));return a*m*B*j}function Nf(t,e,r,s){let a=0,c=0;function u(p,w,A,k){const E=vo(p,w,A,1e-15);return k?.5-E+.5:E}function f(p,w,A,k){const E=vo(w,p,A,1e-15);return k?E:.5-E+.5}function d(p,w,A,k,E,C){const j=Ef(p,w,A,k,E,15000000000000002e-30);return C?.5-j+.5:j}function v(p,w,A,k,E){let C=Math.round(w);w=w-C,w===0&&(C=C-1,w=1);let j=ds(w,p,k,A,C,1e-15);return A<=.7?(j=j+vo(p,w,A,1e-15),E?.5-j+.5:j):(p<=15&&(C=20,j=j+ds(p,w,A,k,C,1e-15),p=p+C),j=ho(p,w,A,k,j,15*1e-15),E?.5-j+.5:j)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,m,g,b,_;if(t<=1||e<=1){if(r>.5?(_=!0,h=e,g=s,m=t,b=r):(_=!1,h=t,g=r,m=e,b=s),m<Math.min(1e-15,1e-15*h))return a=yf(h,m,g,1e-15),_?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=xf(h,m,g,1e-15),_?c:.5-c+.5;if(Math.max(h,m)>1){if(m<=1)return u(h,m,g,_);if(g>=.29)return f(h,m,b,_);if(g<.1&&Math.pow(g*m,h)<=.7)return u(h,m,g,_)}else{if(h>=Math.min(.2,m)||Math.pow(g,h)<=.9)return u(h,m,g,_);if(g>=.3)return f(h,m,b,_)}let p=!1;return Math.max(h,m)>1&&m>15?c=0:(p=!0,c=ds(m,h,b,g,20,1e-15),m+=20),c=ho(m,h,b,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(p?c=ds(m-n,h,b,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=ho(m,h,b,g,c,15*1e-15),a=-expm1(c),_?.5-a+.5:a):(a=.5-c+.5,_?.5-a+.5:a)}else{let p=Number.isFinite(t+e)?t>e?(t+e)*s-e:t-(t+e)*r:t*s-e*r;const w=p<0;let A,k,E,C;if(w?(p=-p,A=e,E=s,k=t,C=r):(A=t,E=r,k=e,C=s),k<40)return k*E<=.7?u(A,k,E,w):v(A,k,E,C,w);if(A>k){if(k<=100||p>k*.03)return d(A,k,E,C,p,w)}else{if(A<=100)return d(A,k,E,C,p,w);if(p>A*.03)return d(A,k,E,C,p,w)}return a=Sf(A,k,p,1e-15*100),w?.5-a+.5:a}}function Ei(t){const e=t.nrows,r=t.ncols;if(e<r){const c=Ei(t.subset([],Nt.seq(1,e)));return{Q:c.Q,R:Tf(c.Q,t)}}let s=St.eye(e),o=t.t();for(let c=1;c<=r;c++)for(let u=e;u>=c+1;u--){const f=o.v.subarray((u-2)*r,u*r),d=s.v.subarray((u-2)*e,u*e),v=f.slice(),h=d.slice(),[m,g,b]=Mf(v[c-1],v[c-1+r]);for(let _=0;_<r;_++)f[_]=v[_]*m+v[_+r]*g,f[_+r]=v[_]*-g+v[_+r]*m,d[_]=h[_]*m+h[_+e]*g,d[_+e]=h[_]*-g+h[_+e]*m;for(let _=r;_<e;_++)d[_]=h[_]*m+h[_+e]*g,d[_+e]=h[_]*-g+h[_+e]*m}const a=Nt.seq(1,r);return{Q:e===r?s:s.subset([],a),R:e===r?o.t():o.subset([],a).t()}}function Mf(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),u=1/c;return[u,a*u,t*c]}const r=t/e,s=Math.sqrt(1+r*r),o=1/s;return[r*o,o,e*s]}function mo(t){return typeof t=="number"}function ki(t,e){e===void 0&&(e=t);const r=t.nrows,s=t.ncols,o=e.nrows;e.ncols;const a=r,c=o,u=s,f=new Float64Array(a*c);for(let d=0;d<u;d++){const v=t.v.subarray(d*r,(d+1)*r),h=e.v.subarray(d*o,(d+1)*o);for(let m=0;m<c;m++){const g=f.subarray(m*a,(m+1)*a);for(let b=0;b<a;b++)g[b]+=v[b]*h[m]}}return new St(f,a,c)}function Tf(t,e){if(e===void 0&&(e=t),!lr(t)||!lr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,s=t.ncols,o=e.nrows,a=e.ncols,c=s,u=a,f=r,d=new Float64Array(c*u);for(let v=0;v<u;v++){const h=e.v.subarray(v*o,(v+1)*o),m=d.subarray(v*c,(v+1)*c);for(let g=0;g<c;g++){const b=t.v.subarray(g*r,(g+1)*r);let _=0;for(let p=0;p<f;p++)_+=b[p]*h[p];m[g]=_}}return new St(d,c,u)}function Ai(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ve(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new St(t.v,e,r)}function lr(t){return t&&t.constructor===St}function Pf(t,e,r){return new St(new Float64Array(t),e,r)}const De=class De{constructor(e,r,s){if(!ArrayBuffer.isView(e)||e.constructor!==De.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return De.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const s=De.eye(e),o=De.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],u=e-1;for(let f=0;f<e;f++)o.v[u*e+f]=s.v[u*e+f]/c;for(let f=e-2;f>=0;f--){let d=s.getcolumn(f+1);const v=a.getcolref(f+1);for(let h=f+1;h<e;h++){const m=o.getcolumn(h+1);d=d.subtract(m.mult(v[h]))}o.v.set(d.divide(v[f]).v,f*e)}return o.t()}if(this.islowertriangular()){const s=this.diag();if(di(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=De.eye(e),a=De.eye(e),c=this.t(),u=0,f=c.v[0];for(let d=0;d<e;d++)a.v[u*e+d]=o.v[u*e+d]/f;for(let d=1;d<e;d++){let v=o.getcolumn(d+1);const h=c.getcolref(d+1);for(let m=0;m<d;m++){const g=a.getcolumn(m+1);v=v.subtract(g.mult(h[m]))}a.v.set(v.divide(h[d]).v,d*e)}return a.t()}const r=Ei(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>De.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>De.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let s=0;s<e;s++)r[s]=this.getcolref(s+1)[s];return new Ve(r)}t(){const e=this.nrows,r=this.ncols,s=new De.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const a=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*r+o]=a[c]}return new De(s,r,e)}for(let o=0;o<this.nrows;o++){const a=s.subarray(o*r,(o+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+o]}return new De(s,r,e)}dot(e){if(We(e))return new De(bo(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(lr(e))return new De(bo(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,s){if(lr(e))return new De(go(this.v,e.v,r),this.nrows,this.ncols);if(mo(e))return new De(po(this.v,e,r),this.nrows,this.ncols);if(!We(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const o=new De.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(po(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new De(o,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const o=new De.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(go(this.getcolref(a+1),e.v,r),a*this.nrows);return new De(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e,r){if(r===void 0&&(r=2),r==2){const s=this.ncols,o=new De.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=e(this.getcolref(a+1));return new Ve(o)}if(r==1)return this.t().apply(e,2);if(r==0){const s=this.v.length,o=new De.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=e(this.v[a]);return new De(o,this.nrows,this.ncols)}}replace(e,r,s){typeof r=="number"&&(r=[r]),r.length===0&&(r=Nt.seq(1,this.nrows)),pr(r)||(r=br(r)),typeof s=="number"&&(s=[s]),s.length===0&&(s=Nt.seq(1,this.ncols)),pr(s)||(s=br(s));const o=r.length,a=s.length;if(Hr(r)<1||sn(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Hr(s)<1||sn(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const u=e.getcolref(c+1),f=(s.v[c]-1)*this.nrows;for(let d=0;d<r.length;d++){const v=r.v[d];this.v[f+v-1]=u[d]}}return this}copy(){return new De(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Ve.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)r[s]=this.getcolref(s+1)[e-1];return new Ve(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ve(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=br([e])),typeof r=="number"&&(r=br([r])),Array.isArray(e)&&(e=e.length===0?null:br(e)),Array.isArray(r)&&(r=r.length===0?null:br(r)),e!==null&&!pr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!pr(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Hr(e)<1||sn(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Hr(r)<1||sn(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const u=r.length,f=this.nrows,d=new De.valuesConstructor(f*u);for(let v=0;v<r.length;v++)d.set(this.v.slice((r.v[v]-1)*this.nrows,r.v[v]*this.nrows),v*this.nrows);return new De(d,f,u)}if(r==null)return this.t().subset(r,e).t();const s=e.length,o=r.length,a=new De.valuesConstructor(s*o);let c=new De.valuesConstructor(s);for(let u=0;u<o;u++){const f=this.v.subarray((r.v[u]-1)*this.nrows,r.v[u]*this.nrows);for(let d=0;d<s;d++)c[d]=f[e.v[d]-1];a.set(c,u*s)}return new De(a,s,o)}toString(e){function r(c,u){return" ".repeat(u-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(sn(this.v))))+e+3;let o="";const a=this.t();for(let c=1;c<=a.ncols;c++)o+=Array.from(a.getcolref(c)).map(u=>r(u.toFixed(e),s)).join(" ")+`
`;return o}toCSV(e,r,s,o){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=o!=null&&o.length>0,c=s!=null&&s.length>0;if(a&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const u=this.t();let f=c?s.join(e)+`
`:"";for(let d=1;d<=u.ncols;d++)f=f+(a?o[d-1]+e:"")+u.getcolref(d).join(e)+`
`;return f=f.replace(/\./g,r),f}static randn(e,r,s,o){return Ai(pi(e*r,s,o),e,r)}static rand(e,r,s,o){return Ai(gi(e*r,s,o),e,r)}static eye(e,r){r===void 0&&(r=e);const s=new Float64Array(e*r);for(let o=0;o<Math.min(e,r);o++)s[o*e+o]=1;return new De(s,e,r)}static diagm(e){if(!We(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,s=new Float64Array(r*r);for(let o=0;o<r;o++)s[o*r+o]=e.v[o];return new De(s,r,r)}static zeros(e,r){return r===void 0&&(r=e),new De(new Float64Array(e*r),e,r)}static ones(e,r){return De.fill(1,e,r)}static fill(e,r,s){s===void 0&&(s=r);const o=new Float64Array(r*s);for(let a=0;a<o.length;a++)o[a]=e;return new De(o,r,s)}static outer(e,r,s){if(Array.isArray(e)&&(e=et(e)),Array.isArray(r)&&(r=et(r)),!We(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!We(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=De.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],u=o.getcolref(a+1);for(let f=0;f<e.length;f++)u[f]=s(e.v[f],c)}return o}static parseCSV(e,r,s,o){function a(p){return p.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let u=e.split(/\n/),f=[],d=0;const v=u[0].split(r);(s||s===void 0&&a(v))&&(f=v,d=1),u=u.filter(p=>p.trim().length>1);let h=[],m=0;o&&(m=1);const g=u.length-d,b=v.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const _=De.zeros(b,g);for(let p=d;p<g+d;p++){const w=u[p].split(r);let A;if(o?(h[p-d]=w[0],A=w.slice(1).map(k=>Number.parseFloat(k.trim().replace(c,".")))):A=w.map(k=>Number.parseFloat(k.trim().replace(c,"."))),A.some(k=>Number.isNaN(k)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=b)throw Error("Wrong number of values in row #"+p);_.v.set(new Float64Array(A),(p-d)*b)}return{values:_.t(),header:f,labels:h,sep:r,dec:c}}};Dt(De,"valuesConstructor",Float64Array),Dt(De,"TOLERANCE",Math.pow(10,-9));let St=De;function We(t){return t&&t.constructor===Ve}function et(t){return new Ve(new Float64Array(t))}const ht=class ht{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new Nt.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=o+1,s=s+1);return new Nt(r.subarray(0,s))}filter(e){const r=new ht.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=this.v[o],s=s+1);return new ht(r.subarray(0,s))}shuffle(){return new ht(Mi(this.v))}sort(e){return new ht(_o(this.v,e))}sortind(e){return new Nt(Ti(this.v,e))}rep(e){return Si(this,e)}repeach(e){return Ni(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=Nt.seq(1,this.length)),pr(r)||(r=br(r));const s=r.length;if(Hr(r)<1||sn(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<r.length;o++){const a=r.v[o];this.v[a-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=br([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Nt.bool2ind(e):br(e)),!pr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=ht.zeros(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[o]=this.v[e.v[o]-1]}return s}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new ht(this.v.slice(e-1,r))}copy(){return new ht(this.v.slice())}dot(e){return e===void 0&&(e=this),bo(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(We(e))return new ht(go(this.v,e.v,r));if(mo(e))return new ht(po(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e){const r=this.v.length,s=ht.zeros(r);for(let o=0;o<r;o++)s.v[o]=e(this.v[o]);return s}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new ht.valuesConstructor(r);let o=0;for(const a of e)typeof a=="number"?(s[o]=a,o+=1):(s.set(We(a)?a.v:new ht.valuesConstructor(a),o),o+=typeof a=="number"?1:a.length);return new ht(s)}static seq(e,r,s){return Ci(e,r,s,ht)}static randn(e,r,s){return pi(e,r,s)}static rand(e,r,s){return gi(e,r,s)}static zeros(e){return new ht(new ht.valuesConstructor(e))}static ones(e){return ht.fill(1,e)}static fill(e,r){const s=new ht.valuesConstructor(r);for(let o=0;o<s.length;o++)s[o]=e;return new ht(s)}};Dt(ht,"valuesConstructor",Float64Array);let Ve=ht;function pr(t){return t.constructor===Nt}function br(t){return new Nt(new Int32Array(t))}const kt=class kt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new kt.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=o+1,s=s+1);return new kt(r.subarray(0,s))}filter(e){const r=new kt.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=this.v[o],s=s+1);return new kt(r.subarray(0,s))}shuffle(){return new kt(Mi(this.v))}sort(e){return new kt(_o(this.v,e))}sortind(e){return new kt(Ti(this.v,e))}rep(e){return Si(this,e)}repeach(e){return Ni(this,e)}subset(e){if(typeof e=="number"&&(e=br([e])),Array.isArray(e)&&(e=br(e)),!pr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=new kt.valuesConstructor(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");s[o]=this.v[e.v[o]-1]}return new kt(s)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new kt(this.v.slice(e-1,r))}static seq(e,r,s){return Ci(e,r,s,kt)}static ones(e){return kt.fill(1,e)}static fill(e,r){const s=new kt.valuesConstructor(r);for(let o=0;o<s.length;o++)s[o]=e;return new kt(s)}static bool2ind(e){let r=0;const s=new kt.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(s[r]=o+1,r=r+1);return new kt(s.subarray(0,r))}};Dt(kt,"valuesConstructor",Int32Array);let Nt=kt;function Ci(t,e,r,s){r===void 0&&(r=t<=e?1:-1);const o=Math.floor((e-t)/r)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(o);for(let c=0;c<o;c++)a[c]=t+c*r;return new s(a)}function Si(t,e){const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let o=1;o<=e;o++)for(let a=0;a<t.length;a++)s[(o-1)*t.length+a]=t.v[a];return new t.constructor(s)}function Ni(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)s[o*e+a]=t.v[o];return new t.constructor(s)}function go(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new t.constructor(t.length);for(let o=0;o<t.length;o++)s[o]=r(t[o],e[o]);return s}function po(t,e,r){const s=new t.constructor(t.length);for(let o=0;o<t.length;o++)s[o]=r(t[o],e);return s}function bo(t,e,r,s,o,a){if(s!==o)throw Error("_dot: matrix dimensions do not much.");const c=r,u=a,f=s,d=new t.constructor(c*u);for(let v=0;v<u;v++){const h=e.subarray(v*o,(v+1)*o),m=d.subarray(v*c,(v+1)*c);for(let g=0;g<f;g++){const b=h[g],_=t.subarray(g*r,(g+1)*r);for(let p=0;p<c;p++)m[p]+=_[p]*b}}return d}function Mi(t){let e=t.slice(),r=e.length,s,o;for(;r;)o=Math.floor(Math.random()*r--),s=e[r],e[r]=e[o],e[o]=s;return e}function _o(t,e=!1){return e?t.slice().sort((r,s)=>s-r):t.slice().sort((r,s)=>r-s)}function Ti(t,e=!1){const r=Nt.seq(1,t.length).v;return e?r.sort((s,o)=>t[o-1]-t[s-1]):r.sort((s,o)=>t[s-1]-t[o-1])}function jf(t,e,r){return 5*t*e+e+4*r*e+t*r}function Lf(t,e){return 2+2*t+t*e+17*e}function Bt(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=t.ncols,o=t.ncomp;let a,c;switch(e){case"mX":a=2,c=s;break;case"sX":a=2+s,c=s;break;case"loadings":case"xloadings":a=2+2*s+(r-1)*s,c=s;break;case"P":a=2+2*s,c=o*s;break;case"eigenvals":case"xeigenvals":a=2+2*s+s*o,c=o;break;case"cq0":a=2+2*s+s*o+o,c=o;break;case"cNq":a=2+2*s+s*o+2*o,c=o;break;case"rq0":a=2+2*s+s*o+3*o,c=o;break;case"rNq":a=2+2*s+s*o+4*o,c=o;break;case"ch0":a=2+2*s+s*o+5*o,c=o;break;case"cNh":a=2+2*s+s*o+6*o,c=o;break;case"rh0":a=2+2*s+s*o+7*o,c=o;break;case"rNh":a=2+2*s+s*o+8*o,c=o;break;case"cr0":a=2+2*s+s*o+9*o,c=o;break;case"cNr":a=2+2*s+s*o+10*o,c=o;break;case"rr0":a=2+2*s+s*o+11*o,c=o;break;case"rNr":a=2+2*s+s*o+12*o,c=o;break;case"cg0":a=2+2*s+s*o+13*o,c=o;break;case"cNg":a=2+2*s+s*o+14*o,c=o;break;case"rg0":a=2+2*s+s*o+15*o,c=o;break;case"rNg":a=2+2*s+s*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function Nr(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=t.ncols,o=t.nrows,a=t.ncomp;let c,u;switch(e){case"scores":case"xscores":c=(r-1)*o,u=o;break;case"T":c=0,u=o*a;break;case"hdist":c=o*a+(r-1)*o,u=o;break;case"qdist":c=2*o*a+(r-1)*o,u=o;break;case"xcumexpvar":case"cumexpvar":c=3*o*a,u=a;break;case"fdistc":c=3*o*a+a+(r-1)*o,u=o;break;case"fdistr":c=4*o*a+a+(r-1)*o,u=o;break;case"gdist":c=5*o*a+a+(r-1)*s,u=s;break;case"rdist":c=5*o*a+a+s*a+(r-1)*s,u=s;break;case"idistc":c=5*o*a+a+2*s*a+(r-1)*s,u=s;break;case"idistr":c=5*o*a+a+3*s*a+(r-1)*s,u=s;break;case"E":c=5*o*a+a+3*s*a+a*s,u=o*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+u)}function vs(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let s=0;s<t.length;s++){const o=t[s];if(o<e||o>r)return!1}return!0}function Rf(t,e,r,s,o,a,c){if(!lr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const u=a&&Array.isArray(a)?a.length:0;if(!vs(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!vs(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const d=e.nrows-u,v=e.ncols-f;if(d<3||v<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(s===void 0&&(s=!0),o===void 0&&(o=!1),r===void 0&&(r=Math.min(d-1,v)),r<1||r>Math.min(d-1,v))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(u>0){const k=new Int32Array(a);m=t._malloc(k.length*k.BYTES_PER_ELEMENT),t.HEAP32.set(k,m/k.BYTES_PER_ELEMENT)}let g=null;if(f>0){const k=new Int32Array(c);g=t._malloc(k.length*k.BYTES_PER_ELEMENT),t.HEAP32.set(k,g/k.BYTES_PER_ELEMENT)}const b=Lf(v,r),_=Float64Array,p=t._malloc(b*_.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,r,s,o,p,m,u,g,f])!==1)throw new Error("pca_fit: PCA failed.");const A=t.HEAPF64.slice(p/_.BYTES_PER_ELEMENT,p/_.BYTES_PER_ELEMENT+b);return t._free(h),t._free(p),m&&t._free(m),g&&t._free(g),{class:["pcamodel"],v:A,ncomp:r,nrows:d,ncols:v,exclvars:c,center:s,scale:o}}function If(t,e,r,s){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!lr(r))throw new Error("pca_predict: X must be a matrix.");s||(s=[]);const o=s&&Array.isArray(s)?s.length:0;if(!vs(s,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=r.nrows-o;let c=e.exclvars;r.ncols===e.ncols&&(c=[]);const u=c.length,f=r.ncols-u;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(f!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const d=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,d/r.v.BYTES_PER_ELEMENT);let v=null;if(o>0){const L=new Int32Array(s);v=t._malloc(L.length*L.BYTES_PER_ELEMENT),t.HEAP32.set(L,v/L.BYTES_PER_ELEMENT)}let h=null;if(u>0){const L=new Int32Array(c);h=t._malloc(L.length*L.BYTES_PER_ELEMENT),t.HEAP32.set(L,h/L.BYTES_PER_ELEMENT)}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const g=jf(a,e.ncomp,f),b=Float64Array,_=t._malloc(g*b.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[d,r.nrows,r.ncols,m,_,v,o,h,u])!==1)throw new Error("pca_predict: PCA prediction failed.");const w=t.HEAPF64.slice(_/b.BYTES_PER_ELEMENT,_/b.BYTES_PER_ELEMENT+g);t._free(d),t._free(m),t._free(_),v&&t._free(v),h&&t._free(h);const A={class:["pcares"],v:w,ncomp:e.ncomp,nrows:a,ncols:f,npred:f,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},k=new Array(e.ncomp),E=new Array(e.ncomp),C=new Array(e.ncomp),j=new Array(e.ncomp),N=new Array(e.ncomp),R=Nr(A,"xcumexpvar");N[0]=1,j[0]=R[0],C[0]=1-R[0],k[0]=R[0],E[0]=1-R[0];for(let L=1;L<e.ncomp;L++)N[L]=L+1,j[L]=R[L],C[L]=1-R[L],k[L]=R[L]-R[L-1],E[L]=1-k[L];return A.stat={components:N,resvar:E,expvar:k,cumexpvar:j,cumresvar:C},A}function zf(t,e,r,s,o,a,c,u){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!lr(r))throw new Error("pcapcv: X must be a matrix.");u||(u=[]);const f=u&&Array.isArray(u)?u.length:0;if(!vs(u,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const d=e.exclvars.length,v=r.nrows-f,h=r.ncols-d;if(v<3)throw new Error("pcapcv: X must have at least 3 rows.");if(h!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>v)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(s)||s<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?v-2:v-Math.ceil(v/o)-1,h,e.ncomp);if(s>m)throw new Error('pcapcv: the value of "ncomp" is too large.');const g=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,g/r.v.BYTES_PER_ELEMENT);let b=null;if(f>0){const j=new Int32Array(u);b=t._malloc(j.length*j.BYTES_PER_ELEMENT),t.HEAP32.set(j,b/j.BYTES_PER_ELEMENT)}let _=null;if(d>0){const j=new Int32Array(e.exclvars);_=t._malloc(j.length*j.BYTES_PER_ELEMENT),t.HEAP32.set(j,_/j.BYTES_PER_ELEMENT)}const p=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const w=v*h,A=r.v.constructor,k=t._malloc(w*A.BYTES_PER_ELEMENT);if(t.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,r.nrows,r.ncols,s,e.center,e.scale,a,o,c,p,k,b,f,_,d])!==1)throw new Error("pcapcv: PCVPCA failed.");const C=t.HEAPF64.slice(k/A.BYTES_PER_ELEMENT,k/A.BYTES_PER_ELEMENT+w);return t._free(g),t._free(p),t._free(k),b&&t._free(b),_&&t._free(_),new St(C,v,h)}function Ff(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const cn=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:Ff,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function qf(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const s=cn[t.ml[r]].title;e=e+"<li>"+s+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function Pi(t,e,r){const s=cn.findIndex(h=>h.id==="trim");let o=0,a=t.ncols-e,c=0;for(let h=0;h<r.ml.length;h++){if(r.ml[h]!==s){c+=r.mpl_new[h];continue}o=Math.max(o,r.mp_new[c]),a=Math.min(a,r.mp_new[c+1]),c+=r.mpl_new[h]}const u=t.nrows,d=a-o+e,v=St.zeros(u,d);return c=0,e>0&&(v.v.set(t.v.slice(0,e*u),c),c+=e*u),v.v.set(t.v.slice((e+o)*u,(e+a)*u),c),[o,a,v]}function Of(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=cn.findIndex(u=>u.id==="trim");if(e.ml.findIndex(u=>u===r)<0)return t;const[o,a,c]=Pi(t.values,t.nresp,e);return t.values=c,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+o,t.nresp+a)):t.varlabels.slice(o,a),t.varindices=t.nresp>0?Xr(0,t.nresp-1).concat(Xr(0,a-o-1)):Xr(0,a-o-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+o,t.nresp+a)):t.varvalues.slice(o,a),t}function ji(t,e,r,s,o=!0,a=[]){if(!lr(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,u;o?(c=e.ncols,u=e.nrows-r):(c=e.nrows,u=e.ncols-r);const f=s.length;if(f<1)throw new Error("prep_fit: no preprocessing methods are provided.");const d=new Int32Array(f),v=new Int32Array(f),h=new Int32Array(f);let m=0,g=0;for(let M=0;M<s.length;M++){const B=s[M].id,V=s[M].params,z=cn.findIndex(ae=>ae.id==B);if(z<0)throw new Error("prep_fit: wrong method name: "+B+".");const G=cn[z];if(V.length!==G.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+B+".");d[M]=z,v[M]=G.mpl,h[M]=G.get_mpl_new(u,V),m=m+v[M],g=g+h[M]}const b=new Float64Array(m);let _=0;for(let M=0;M<s.length;M++){const B=s[M].id,V=s[M].params;cn.findIndex(z=>z.id==B),b.set(V,_),_=_+v[M]}const p=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const w=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,w/d.BYTES_PER_ELEMENT);const A=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,A/v.BYTES_PER_ELEMENT);const k=t._malloc(h.length*h.BYTES_PER_ELEMENT);t.HEAP32.set(h,k/h.BYTES_PER_ELEMENT);const E=t._malloc(b.length*b.BYTES_PER_ELEMENT);t.HEAPF64.set(b,E/b.BYTES_PER_ELEMENT);const C=t._malloc(g*b.BYTES_PER_ELEMENT),j=new Int32Array(a),N=j.length,R=t._malloc(N*j.BYTES_PER_ELEMENT);if(t.HEAP32.set(j,R/j.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[p,c,u,r,f,w,A,E,k,C,o,R,N])!==1)throw new Error("prep_fit: unexpected error.");const T=t.HEAPF64.slice(C/b.BYTES_PER_ELEMENT,C/b.BYTES_PER_ELEMENT+g);return t._free(p),t._free(w),t._free(E),t._free(A),t._free(R),t._free(C),t._free(k),{ml:d,mpl:v,mp:b,mpl_new:h,mp_new:T,npred:u,class:["prepmodel"]}}function wo(t,e,r,s,o=!0,a=!1){if(!lr(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let c,u;if(o?(c=e.ncols,u=e.nrows-r):(c=e.nrows,u=e.ncols-r),u!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+u+").");const f=s.ml,d=s.mpl_new,v=s.mp_new,h=d.reduce((C,j)=>C+j,0);if(!f||f.length<1||!d||d.length!==f.length||v.length!==h)throw new Error("prep_apply: wrong structure of the model object.");const m=f.length,g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const b=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAP32.set(f,b/f.BYTES_PER_ELEMENT);const _=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,_/d.BYTES_PER_ELEMENT);const p=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAPF64.set(v,p/v.BYTES_PER_ELEMENT);const w=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[g,c,u,r,m,b,_,p,w,o])!==1)throw new Error("prep_apply: unexpected error.");const k=t.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(g),t._free(b),t._free(_),t._free(p),t._free(w);const E=new St(k,e.nrows,e.ncols);if(a){const[C,j,N]=Pi(E,r,s);return N}return E}function Bf(t,e,r,s){e===void 0&&(e=!0),r===void 0&&(r=!1),s===void 0&&(s=!1);function o(f,d,v,h){if(typeof d=="boolean")return d?f.apply(v,2):et([h]).rep(f.ncols);if(!We(d))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(d.length!==f.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return d}const a=o(t,e,Pn,0),c=o(t,r,as,1),u=St.zeros(t.nrows,t.ncols);for(let f=1;f<=t.ncols;f++){const d=t.getcolref(f),v=u.getcolref(f),h=a.v[f-1],m=1/c.v[f-1];for(let g=0;g<t.nrows;g++)v[g]=(d[g]-h)*m}return s?[u,a,c]:u}function Li(t,e,r){return t<e?["regular","in"]:t>r?["outlier","out"]:["extreme","out"]}function Vf(t,e,r,s,o,a,c,u){if(!u||u.length===0)return[0,0];let f=0,d=0;for(let v of u){const h=t[v],[m,g]=Li(h,e,r);a[m]+=1,c[g]+=1,s[v]=m,o[v]=g,f=f+(g==="in"),d=d+(g!=="in")}return[f,d]}function Ri(t,e,r,s,o,a,c,u,f){if(!f||f.length===0)return[0,0,0,0,0,0,0,0,0,0];let d=0,v=0;for(let B of f){const V=t[B],[z,G]=Li(V,r,s);u[G]+=1,o[B]="alien",c.alien+=1,a[B]=G,d=d+(G!=="in"),v=v+(G==="in")}const h=f.slice();h.sort((B,V)=>t[B]-t[V]);let m=h.length;const g=h.map(B=>t[B]);let b=-1,_=0,p=0,w=0,A=0;for(;b<0;)_>0&&(o[h[m-1]]="external",c.alien=c.alien-1,c.external=c.external+1,m=m-1,h.pop(),g.pop()),p=Pn(g),w=is(g),A=w/(p*p),b=4-2*e*A,_=_+1;const k=(2+Math.sqrt(b))/A,E=k-e,C=p/k,j=r/C,N=1-2*(e+E)*(e+3*E)/(3*(e+2*E)**2),R=(N-1)*(1-3*N),L=(e+2*E)/(e+E)**2,T=1+N*L*(N-1-.5*(2-N)*R*L),P=N*Math.sqrt(2*L)*(1+.5*R*L),M=io((Math.pow(j/(e+E),N)-T)/P);return[d,v,M,E,C,N,T,P,e,p]}const Xo=class Xo{constructor(e,r,s,o,a,c,u){Ie(this,hl);this.d=e,this.ind=r,this.objlabels=s,this.objindices=o,this.classes=a,this.classNames=c,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,Ce(this,hl,y(()=>u.oCrit&&u.eCrit?this.getOutcomes(u):null))}get outcomes(){return l(K(this,hl))}set outcomes(e){I(K(this,hl),e)}getOutcomes(e){const r=this.d.apply(L=>L/e.f0*e.Nf).v,s=new Array(this.nrows),o=new Array(this.nrows),a={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[u,f]=Vf(r,e.eCrit,e.oCrit,o,s,a,c,this.ind.members),[d,v,h,m,g,b,_,p,w,A]=Ri(r,e.Nf,e.eCrit,e.oCrit,o,s,a,c,this.ind.strangers);this.nUnknown>0&&Ri(r,e.Nf,e.eCrit,e.oCrit,o,s,a,c,this.ind.unknown);const k=u>0?u/(u+f):0,E=d>0?d/(d+v):0,C=1-h,j=Math.sqrt(k*E),N=u>0&&d>0?(u+d)/(u+d+v+f):0,R={sensitivity:k,specificity:E,selectivity:C,efficiency:j,accuracy:N};return{Nf:e.Nf,f:r,decs:s,rols:o,decsNum:c,rolsNum:a,TP:u,FN:f,TN:d,FP:v,beta:h,s:m,f0:g,hz:b,Mz:_,Sz:p,k:w,m:A,stat:R}}toJSON(){return null}static fromJSON(e){return new Xo(...e)}};hl=new WeakMap;let yo=Xo;const kl=class kl{constructor(e,r,s,o,a,c,u,f,d,v,h,m,g,b,_,p="nimca-model"){Ie(this,ml);Ie(this,gl);Ie(this,pl);Ie(this,bl);Ie(this,_l);Ie(this,wl);Ie(this,yl);Ie(this,xl);Ie(this,El);this.mX=r,this.sX=s,this.nrows=o,this.ncols=a,this.className=e,this.Nfc=c,this.Nfr=u,this.f0c=f,this.f0r=d,this.hash=v,this.class=["nimcamodel"],this.fileName=p,this.center=b,this.scale=_,Ce(this,ml,te(Fe(h))),Ce(this,gl,te(Fe(m))),Ce(this,pl,te(Fe(g))),Ce(this,bl,y(()=>this.limType==="classic"?this.Nfc:this.Nfr)),Ce(this,_l,y(()=>this.limType==="classic"?this.f0c:this.f0r)),Ce(this,wl,y(()=>1-Number.parseFloat(this.alpha)/100)),Ce(this,yl,y(()=>Math.pow(1-this.gamma/100,1/o))),Ce(this,xl,y(()=>Gr(this.eConfLim,this.Nf))),Ce(this,El,y(()=>Gr(this.oConfLim,this.Nf)))}get alpha(){return l(K(this,ml))}set alpha(e){I(K(this,ml),e,!0)}get gamma(){return l(K(this,gl))}set gamma(e){I(K(this,gl),e,!0)}get limType(){return l(K(this,pl))}set limType(e){I(K(this,pl),e,!0)}get Nf(){return l(K(this,bl))}set Nf(e){I(K(this,bl),e)}get f0(){return l(K(this,_l))}set f0(e){I(K(this,_l),e)}get eConfLim(){return l(K(this,wl))}set eConfLim(e){I(K(this,wl),e)}get oConfLim(){return l(K(this,yl))}set oConfLim(e){I(K(this,yl),e)}get eCrit(){return l(K(this,xl))}set eCrit(e){I(K(this,xl),e)}get oCrit(){return l(K(this,El))}set oCrit(e){I(K(this,El),e)}predict(e){if(!e.values||!lr(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=kl.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let o=0;o<e.classes.length;o++)e.classes[o]===this.className?s.members.push(o):s.strangers.push(o);else s.unknown=Xr(0,e.values.nrows-1);return new yo(r,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r,s,o={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let a=e.values;const c=e.classNames[0];if(!lr(a))throw new Error("nimca.fit: X must be a matrix.");const u=r?a.apply(Pn,2):Ve.zeros(a.ncols),f=s?a.apply(as,2):Ve.ones(a.ncols),d=kl.getDistance(a,u,f),v=Pn(d),h=is(d);let m=Math.round(2*v*v/h);m<1&&(m=1),m>250&&(m=250);const g=uf(d),b=ff(d),_=b/g;let p;_>2.685592117?p=1:_<.194565995?p=100:p=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/_),1.185785)));const w=.5*p*(g/Gr(.5,p)+b/(Gr(.75,p)-Gr(.25,p)));return new kl(c,u,f,a.nrows,a.ncols,m,p,v,w,xo(),o.alpha,o.gamma,o.limType,r,s)}static fromJSON(e){const{__type:r,mX:s,sX:o,nrows:a,ncols:c,className:u,Nfc:f,Nfr:d,f0c:v,f0r:h,hash:m,alpha:g,gamma:b,limType:_,fileName:p,center:w,scale:A}=e;return new kl(u,s,o,a,c,f,d,v,h,m,g,b,_,w,A,p)}static getDistance(e,r,s){const o=Bf(e,r,s),a=o.nrows,c=o.ncols,u=Ve.zeros(a);for(let f=0;f<c;f++){const d=o.getcolref(f+1);for(let v=0;v<a;v++)u.v[v]+=d[v]**2}return u}};ml=new WeakMap,gl=new WeakMap,pl=new WeakMap,bl=new WeakMap,_l=new WeakMap,wl=new WeakMap,yl=new WeakMap,xl=new WeakMap,El=new WeakMap;let hs=kl;function Xr(t,e,r=1){const s=Math.round((e-t+1)/r),o=Array(s);for(let a=0;a<s;a++)o[a]=t+a*r;return o}function Df(t,e){let r,s,o,a=[];if(e.length>0){const c=t.values.nrows,u=t.objindices,f=c-e.length;r=Array(f),s=Array(f),o=Array(f);let d=0;for(let v=0;v<c;v++)e.includes(v)||(r[d]=u[v],s[d]=t.classes[v],o[d]=t.objlabels[v],(a.length===0||!a.includes(s[d]))&&a.push(s[d]),d=d+1)}else r=t.objindices,o=t.objlabels,s=t.classes,a=t.classNames;return[r,o,s,a]}function xo(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Eo(t,e,r,s,o=!1){const[a,c,u]=Df(r,s),f=o&&e.prep&&e.prep.ml&&e.prep.ml.length>0?wo(t,r.values,0,e.prep,!1,!0):r.values,d=If(t,e,f,s);d.hash=xo(),d.objindices=a,d.objlabels=c,d.classes=u,d.classNames=r.classNames,d.varlabels=r.varlabels,d.eigenvals=Bt(e,"eigenvals"),d.cNh=Bt(e,"cNh"),d.cNq=Bt(e,"cNq"),d.ch0=Bt(e,"ch0"),d.cq0=Bt(e,"cq0"),d.rNh=Bt(e,"rNh"),d.rNq=Bt(e,"rNq"),d.rh0=Bt(e,"rh0"),d.rq0=Bt(e,"rq0");const v=e.nrows;return d.T2lim=2*(v-1)/(v-2)*bi(.95,2,v-2),d}function Yf(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function ql(t){return t.some(e=>Number.isNaN(e))}function jn(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ii(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Wf(t,e,r,s,o,a,c,u=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let d=Ii(t);if(d.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");d=d.filter(z=>z.replaceAll(e,"").trim().length>0);const v=d[0].split(e);if(v.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,m;const g=r!=="no";(g||g===void 0&&ql(firstRow))&&(m=v,h=1);const b=d.length-h;if(b<1)throw new Error("Data file should contain at least 1 row with values.");u===-1&&(u=b);let _,p,w,A=Array(b);s?(_=g?jn(m[0]):"",w=Array(b),p=1):(_="",w=[],p=0);let k,E=[],C;o?(k=g?jn(m[p]):"",C=Array(b),p=p+1):(k="",C=[]);const j=v.length-p;if(j<1)throw new Error("Data file should contain at least 1 column with values.");const N=St.zeros(j,b);for(let z=h;z<b+h;z++){const G=z-h;A[G]=G;let ae=d[z].split(e);if(s&&(w[G]=ae[0],ae.shift()),o){const $=ae[0];C[G]=$,ae.shift(),(E.length===0||E.indexOf($)<0)&&E.push($)}const H=f==="."?ae.map(($,le)=>Number.parseFloat($.trim())):ae.map(($,le)=>Number.parseFloat($.trim().replace(f,".")));if(H.some($=>Number.isNaN($)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(H.length!=j)throw new Error("Wrong number of values in row #"+z);N.v.set(new Float64Array(H),(z-h)*j)}if(!s||w.length!==b){w=Array(b);for(let z=0;z<b;z++)w[z]="O"+(z+1)}w=w.map(z=>jn(z)),C=C.map(z=>jn(z)),E=E.map(z=>jn(z));let R,L=Array(j),T=Array(j);if(m&&m.length===j+p){R=m.map(z=>jn(z)).slice(p);for(let z=0;z<j;z++)L[z]=z>=u?z-u:z,T[z]=z>=u?z-u+1:z+1}else{R=Array(j);for(let z=0;z<j;z++)L[z]=z>=u?z-u:z,R[z]=z>=u?"V"+(z-u+1):"Y"+(z+1),T[z]=z>=u?z-u+1:z+1}let P;if(r==="values"){if(P=f==="."?R.map((z,G)=>G<u?G:Number.parseFloat(z.trim())):R.map((z,G)=>G<u?G:Number.parseFloat(z.trim().replace(f,"."))),P.some(z=>Number.isNaN(z)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else P=T;Array.isArray(P)||(P=[]),a||(a=""),c||(c=""),a=P.length>0&&a.length>0?a:"Variables",c=P.length>0&&c.length>0?c:"";const M=a+(c.length>0?", "+c:""),B=P[1]<P[0];return{values:N.t(),nresp:u,header:r,hasLabels:s,hasClassNames:o,labelsVarname:_,classLabelsVarname:k,objlabels:w,objindices:A,varlabels:R,varvalues:P,varindices:L,varrev:B,classes:C,classNames:E,sep:e,dec:f,varvaluesName:a,varvaluesUnits:c,varAxisTitle:M}}function Uf(t){if(ql(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let s=2;s<e;s++){let o=[];for(let d=1;d<t.length;d++)o.push(t[d][s]);const a=t[0][s],c=Pn(o),u=as(o),f=Math.abs((a-c)/u);r.push(f)}return r.every(s=>s>5)}function Hf(t){const r=t[0].split(","),s=t[1].split(","),o=r.length,a=s.length,c=";",u=t[0].split(c),f=t[1].split(c),d=u.length,v=f.length;let h,m;if(o>1&&a>1&&o===a&&o>d)m=",",h=o;else if(d>1&&v>1&&d===v)m=c,h=d;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",h]}function Gf(t,e=0){const r=Ii(t),s=r.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,a,c]=Hf(r),u=Math.min(c,5),f=Math.min(s,5);let d=r[0].split(o).length,v=r.slice(0,f).map(L=>L.split(o).slice(0,u));v=v.map(L=>L.map(T=>jn(T)));const h=v.map(L=>Yf(L.slice(),a));for(let L=1;L<f;L++)if(ql(h[L].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const m=Uf(h);let g=0;const b=m?1:0,_=b+1,p=v[b][0],w=v[_][0],A=h[b][0],k=h[_][0],E=h[b][1],C=h[_][1];let j=!1,N=!1;if(Number.isNaN(A)&&Number.isNaN(k)&&p!==w?(j=!0,g=g+1):Number.isNaN(E)&&Number.isNaN(C)&&p!==w&&(j=!0,N=!0,g=g+2),!N){const L=j?1:0,T=h[b][L],P=h[_][L];N=ql([T,P]),g=g+N}let R="no";if(m){g>0?v[0].slice(g+e):v[e];const L=g>0?h[0].slice(g+e):h[e];R=ql(L)?"labels":"values"}return[o,j,N,R,d]}function Xf(t){const e=t.values.t(),r=t.sep,s=t.dec;let o=null;t.header!=="no"&&(o=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),o&&t.hasClassNames&&(o=[t.classLabelsVarname,...o]),o&&t.hasLabels&&(o=[t.labelsVarname,...o]);const a=t.classes&&t.classes.length===e.ncols,c=t.objlabels&&t.objlabels.length===e.ncols;let u=o?o.join(r):"";for(let f=0;f<e.ncols;f++){let d=e.getcolref(f+1).join(r);s!=="."&&(d=d.replace(".",s)),a&&(d=t.classes[f]+t.sep+d),c&&(d=t.objlabels[f]+t.sep+d),u=u+`
`+d}return u=u+`
`,s!=="."&&(u=u.replace(/\./g,s)),u}function Kf(t,e){const r=Xf(t),s=new Blob([r],{type:"text/csv"}),o=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.csv`),a.click()}function ms(t,e){return lr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:We(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof hs?e.asJSON():e}function ko(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Pf(e.v,e.nrows,e.ncols);if(e.__type==="vector")return et(e.v);if(e.__type==="NIMCA")return hs.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Ao(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${s}${o}${a}${c}`}function zi(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function gs(t,e,r){let s="";for(let o=0;o<e;o++){const a=t.getUint8(r++);if(a===0)break;s+=String.fromCharCode(a)}return s}function Jf(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],o=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=t.getUint8(a);a+=1;const u=t.getUint8(a);if(a+=1,u===77)throw new Error("SPC file has old format which is not supported.");const f=u===75,d=t.getUint8(a);a+=1;const v=t.getInt8(a);a+=1;const h=t.getUint32(a,f);a+=4;const m=t.getFloat64(a,f);a+=8;const g=t.getFloat64(a,f);a+=8;const b=t.getUint32(a,f);a+=4;const _=t.getUint8(a);a+=1;const p=t.getUint8(a);a+=1;const w=t.getUint8(a);a+=1;const A=t.getUint8(a);a+=1;const k=t.getUint32(a,f);a+=4;const E=gs(t,9,a);a+=9;const C=gs(t,9,a);a+=9;const j=t.getUint16(a,f);a+=2;const N=Array.from({length:8},()=>{const ee=t.getFloat32(a,f);return a+=4,ee}),R=gs(t,130,a);a+=130;const L=gs(t,30,a);a+=30;const T=t.getUint32(a,f);a+=4;const[P,M,B,V,z,G,ae,H]=zi(c),$=_===255?r[31]:r[_],le=_===255?e[31]:e[_],Z=p<=26?s[p]:p>=128&&p<=131?o[p]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:P,TCGRAM:M,TMULTI:B,TRANDM:V,TORDRD:z,TALABS:G,TXYXYS:ae,TXVALS:H},fexper:d,fexp:v,fnpts:h,ffirst:m,flast:g,fnsub:b,fxtype:_,fytype:p,fztype:w,fpost:A,fdate:k,fres:E,fsource:C,fpeakpt:j,fspare:N,fcmnt:R,fcatxt:L,flogoff:T,xaxisName:$,xaxisUnit:le,yaxisName:Z}}function Qf(t,e){const r=zi(t.getUint8(e));e+=1;const s=t.getInt8(e);e+=1;const o=t.getUint16(e,!0);e+=2;const a=t.getFloat32(e,!0);e+=4;const c=t.getFloat32(e,!0);e+=4;const u=t.getFloat32(e,!0);e+=4;const f=t.getInt32(e,!0);e+=4;const d=t.getInt32(e,!0);e+=4;const v=t.getFloat32(e,!0);return e+=4,{flags:r,exp:s,index:o,time:a,next:c,noise:u,nPoints:f,nScans:d,wAxis:v}}async function Fi(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),s=await t.arrayBuffer(),o=new DataView(s);let a=0;const c=Jf(o);a+=512;const u=c.fnpts;if(u<2)throw new Error(`Error reading SPC file (${t.name}).`);let f=new Array(u);if(c.ftflgs.TXVALS)for(let h=0;h<u;h++){const m=o.getFloat32(a,!0);a=a+4,f[h]=m}else{(c.flast-c.ffirst)/(u-1);for(let h=0;h<u;h++)f[h]=c.ffirst+h*c.flast}const d=new Float64Array(u*c.fnsub);for(let h=0;h<c.fnsub;h++){Qf(o,a),a=a+32;for(let m=0;m<u;m++){const g=o.getFloat32(a,!0);a=a+4,d[h*u+m]=g}}const v=[];return c.fnsub>1?Xr(1,c.fnsub).forEach(m=>{v.push(r+"_"+m)}):v.push(r),{hdr:c,xvalues:f,yvalues:d,objlabels:v}}async function Zf(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let s=[],o=[];const a=await Fi(t[0]),c=a.xvalues.length;if(r.push(a.yvalues),s=s.concat(a.objlabels),o.push(a.hdr.fnsub),e>1)for(let b=1;b<e;b++){const _=await Fi(t[b]);if(_.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");r.push(_.yvalues),s=s.concat(_.objlabels),o.push(_.hdr.fnsub)}const u=o.reduce((b,_)=>b+_,0),f=new Float64Array(u*c);let d=0;for(let b=0;b<r.length;b++)f.set(r[b].slice(),d),d+=o[b]*c;const v=new St(f,c,u),h=Xr(0,c-1),m=Xr(0,u-1),g=a.xvalues.map(b=>b.toFixed(1));return{values:v.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:m,varlabels:g,varvalues:a.xvalues,varindices:h,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var $f=X('<button tabindex="0" class="button svelte-1to1iow"> </button>');function vt(t,e){let r=q(e,"text",3,"button");var s=$f();s.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var o=D(s);ce(()=>Ee(o,r())),S(t,s)}ft(["click"]);var ed=X('<button tabindex="0"></button>');function Ln(t,e){q(e,"disable",3,!1);var r=ed();r.__click=function(...s){var o;(o=e.onclick)==null||o.apply(this,s)},ce(()=>{O(r,"title",e.title),O(r,"aria-label",e.title),O(r,"alt",e.title),pt(r,1,`button ${e.className??""}`,"svelte-qbt64")}),S(t,r)}ft(["click"]);function Mr(t,e){let r=q(e,"title",3,"Reset");Ln(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function td(t,e){let r=q(e,"title",3,"Undo");Ln(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function rd(t,e){let r=q(e,"title",3,"Download");Ln(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function nd(t,e){let r=q(e,"title",3,"Add");Ln(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function qi(t,e){let r=q(e,"title",3,"Settings");Ln(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function ld(t,e){let r=q(e,"title",3,"Move up");Ln(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function sd(t,e){let r=q(e,"title",3,"Move down");Ln(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}function Tr(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var od=X('<span class="label svelte-1bhp5bp"> </span>'),ad=X("<div><!> <!></div>");function ue(t,e){let r=q(e,"label",3,null),s=q(e,"name",3,""),o=q(e,"status",3,""),a=q(e,"colors",3,""),c=q(e,"labelWidth",3,12);var u=ad(),f=D(u);{var d=h=>{var m=od(),g=D(m);ce(()=>{bt(m,`flex-basis:${c()??""}ch;`),Ee(g,r())}),S(h,m)};W(f,h=>{r()&&h(d)})}var v=F(f,2);Wr(v,()=>e.children??Pt),ce(()=>{pt(u,1,`control-element ${s()??""} ${o()??""}`,"svelte-1bhp5bp"),bt(u,a())}),S(t,u)}var id=X('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function Ol(t,e){_e(e,!0);let r=q(e,"min",7,0),s=q(e,"max",3,100),o=q(e,"value",31,()=>Fe(r())),a=q(e,"decNum",3,1),c=q(e,"step",19,()=>+((s()-r())/100).toFixed(4)),u=q(e,"onchange",3,null);ye(()=>{o()<r()&&(o(r()),u()&&u()(o())),o()>s()&&(o(s()),u()&&u()(o())),r()>s()&&r(s())});let f=te(void 0),d=te(void 0),v=te(!1);const h=T=>{const P=r()+T*(s()-r());return+(Math.round(P/c())*c()).toFixed(4)},m=T=>{const P=l(f).getBoundingClientRect(),M=l(d).getBoundingClientRect(),B=P.x,V=M.x+M.width;return(T.clientX-B)/(V-B)},g=T=>{const P=m(T);P<0||P>1||I(v,P*100>l(k)-5&&P*100<l(k)+5,!0)},b=T=>{I(v,!1)},_=T=>{I(v,!1);const P=m(T);P<0||P>1||(o(h(P)),u()&&u()(o()))},p=T=>{let P=o()+c()*T.deltaY*.5;P<r()&&(P=r()),P>s()&&(P=s()),o(+(Math.round(P/c())*c()).toFixed(4)),T.preventDefault(),u()&&u()(o())},w=T=>{if(!l(v))return;const P=m(T);P<0||P>1||(o(h(P)),u()&&u()(o()))},A=T=>{if(T.key==="ArrowLeft"){o(o()-c()<r()?r():o()-c()),u()&&u()(o());return}if(T.key==="ArrowRight"){o(o()+c()>s()?s():o()+c()),u()&&u()(o());return}},k=y(()=>r()===s()?100:(o()-r())/(s()-r())*100);var E=id();E.__keydown=A,E.__mousemove=w,E.__mousedown=g,E.__mouseup=_,E.__touchmove=w,E.__touchstart=g,E.__touchend=_;var C=D(E);let j;var N=D(C);let R;var L=D(N);Mn(C,T=>I(f,T),()=>l(f)),Mn(E,T=>I(d,T),()=>l(d)),ce(T=>{O(E,"aria-valuenow",o()),O(E,"aria-valuemin",r()),O(E,"aria-valuemax",s()),j=pt(C,1,"range-slider svelte-7wycr",null,j,{"range-slider_right":l(k)<50}),bt(C,`width:${l(k)??""}%`),R=pt(N,1,"range-value svelte-7wycr",null,R,{"range-value_right":l(k)<50}),Ee(L,T)},[()=>o().toFixed(a())]),Sn("mousewheel",E,p),Sn("mouseleave",E,b),Sn("touchcancel",E,b),S(t,E),we()}ft(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var cd=X('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function sr(t,e){_e(e,!0);let r=q(e,"min",3,0),s=q(e,"max",3,10),o=q(e,"value",31,()=>Fe(r())),a=q(e,"step",3,1);o()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(r())),o()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(s())),r()>s()&&console.error("The min and max values must be distinct.");let c=te(void 0),u=te(void 0),f=te(!1);const d=y(()=>r()===s()?0:(o()-r())/(s()-r()+a())),v=y(()=>a()/(s()-r()+a())),h=y(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${l(v)*100}%, var(--bg-color-light2, #e8e8e8) ${200*l(v)}%)`:"background: #f0f0f0"),m=T=>{if(T<0||T>1)return o();let P=o();return Math.round(l(v)/T),T<l(d)&&l(d)>0&&(P=o()-a()*Math.ceil((l(d)-T)/l(v))),T>l(d)+l(v)&&l(d)+l(v)<1&&(P=o()+a()*Math.ceil((T-(l(d)+l(v)))/l(v))),P<r()&&(P=r()),P>s()&&(P=s()),P},g=T=>{const P=l(u).getBoundingClientRect(),M=P.x,B=P.x+P.width;return(T.clientX-M)/(B-M)},b=T=>{const P=g(T);P<0||P>1||I(f,P>l(d)&&P<l(v)+l(d),!0)},_=T=>{I(f,!1)},p=T=>{I(f,!1);const P=g(T);if(P<0||P>1)return;const M=m(P);o()!==M&&o(M)},w=T=>{let P=o()+Math.round(T.deltaY*.5)*a();P<r()&&(P=r()),P>s()&&(P=s()),o(P),T.preventDefault()},A=T=>{if(!l(f))return;const P=g(T);if(P<0||P>1)return;const M=m(P);M!=o()&&o(M)},k=T=>{if(T.key==="ArrowLeft"){o(o()-a()<r()?r():o()-a());return}if(T.key==="ArrowRight"){o(o()+a()>s()?s():o()+a());return}};var E=cd();E.__keydown=k,E.__mousemove=A,E.__mousedown=b,E.__mouseup=p,E.__touchmove=A,E.__touchstart=b,E.__touchend=p;var C=D(E);let j;var N=D(C);let R;var L=D(N);Mn(C,T=>I(c,T),()=>l(c)),Mn(E,T=>I(u,T),()=>l(u)),ce(T=>{O(E,"aria-valuenow",o()),O(E,"aria-valuemin",r()),O(E,"aria-valuemax",s()),bt(E,l(h)),j=pt(C,1,"range-slider svelte-1lbks0y",null,j,{"range-slider_left":l(v)<.1&&l(d)<.5,"range-slider_right":l(v)<.1&&l(d)>=.5}),bt(C,`width: max(2px, ${l(v)*100}%);left:${l(d)*100}%;`),R=pt(N,1,"range-value svelte-1lbks0y",null,R,{"range-value_right":l(v)<.1&&l(d)>.5,"range-value_left":l(v)<.1&&l(d)<=.5}),Ee(L,T)},[()=>o().toFixed(0)]),Sn("mousewheel",E,w),Sn("mouseleave",E,_),Sn("touchcancel",E,_),S(t,E),we()}ft(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var ud=X('<button tabindex="-1"><!></button>'),fd=X('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function rt(t,e){_e(e,!0);let r=q(e,"value",31,()=>Fe(e.options[0])),s=q(e,"className",3,"");const o=f=>{if(f.key==="ArrowLeft"){const d=e.options.findIndex(v=>v===r());d>0&&r(e.options[d-1]);return}if(f.key==="ArrowRight"){const d=e.options.findIndex(v=>v===r());d<e.options.length-1&&r(e.options[d+1]);return}};var a=fd(),c=J(a);c.__keydown=o,$e(c,20,()=>e.options,f=>f,(f,d)=>{var v=ud();v.__click=()=>r(d);let h;var m=D(v);Ct(m,()=>d),ce(g=>h=pt(v,1,`option option_${g??""}`,"svelte-bifhtc",h,{selected:d==r()}),[()=>d.toString().replace(".","_")]),S(f,v)});var u=F(c,2);ce(()=>pt(c,1,`selector ${s()??""}`,"svelte-bifhtc")),eo(u,r),S(t,a),we()}ft(["keydown","click"]);function Zt(t,e){_e(e,!0);let r=q(e,"options",19,()=>["no","yes"]),s=q(e,"value",15,!1),o=te(!0);const a=y(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());ye(()=>I(o,s()?r()[1]:r()[0],!0)),ye(()=>s(l(o)===r()[1]));var c=ge(),u=J(c);{var f=d=>{rt(d,{get options(){return l(a)},get value(){return l(o)},set value(v){I(o,v,!0)}})};W(u,d=>{l(a)&&d(f)})}S(t,c),we()}var dd=X('<input type="file" multiple class="svelte-xoa0sf"/>'),vd=X('<input type="file" class="svelte-xoa0sf"/>'),hd=X('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function ps(t,e){_e(e,!0);let r=q(e,"file",15),s=q(e,"message",3,"Select CSV file with dataset"),o=q(e,"acceptType",3,".csv"),a=q(e,"multiple",3,!1),c=te(void 0);function u(k){l(c)&&l(c).files.length>0?r(l(c).files.length===1?l(c).files[0]:l(c).files):r(null)}function f(k){(k.type==="click"||k.type==="keydown"&&(k.code==="Space"||k.code==="Enter"))&&l(c).click()}function d(k){l(c).value=null,r(null)}var v=hd(),h=J(v);h.__keydown=f,h.__click=f;let m;var g=D(h),b=F(g);{var _=k=>{var E=dd();E.__change=u,Mn(E,C=>I(c,C),()=>l(c)),ce(()=>O(E,"accept",o())),S(k,E)},p=k=>{var E=vd();E.__change=u,Mn(E,C=>I(c,C),()=>l(c)),ce(()=>O(E,"accept",o())),S(k,E)};W(b,k=>{a()?k(_):k(p,!1)})}var w=F(h,2);{var A=k=>{Mr(k,{onclick:d})};W(w,k=>{r()&&k(A)})}ce(()=>{m=pt(h,1,"file-selector svelte-xoa0sf",null,m,{selected:r()}),Ee(g,`${(r()?r().length>1?`Selected ${r().length} files`:r().name:s())??""} `)}),S(t,v),we()}ft(["keydown","click","change"]);var md=X('<div class="error-message svelte-11e14eb"> </div>'),gd=X('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function Oi(t,e){_e(e,!0);let r=q(e,"value",15,""),s=q(e,"className",3,""),o=q(e,"placeholder",3,""),a=q(e,"maxLength",3,25),c=q(e,"validator",3,null),u=te("");function f(){c()&&I(u,c()(r()),!0)}var d=gd();let v;var h=D(d);h.__input=f;var m=F(h,2);{var g=b=>{var _=md(),p=D(_);ce(()=>Ee(p,l(u))),S(b,_)};W(m,b=>{l(u)&&l(u).length>0&&b(g)})}ce(()=>{v=pt(d,1,`textinput ${s()??""}`,"svelte-11e14eb",v,{error:l(u)&&l(u).length>0}),O(h,"placeholder",o()),O(h,"maxlength",a())}),eo(h,r),S(t,d),we()}ft(["input"]);var pd=X('<div class="spinner svelte-wlgijz"></div>');function Co(t){var e=pd();S(t,e)}var bd=X('<button tabindex="-1"><!></button>'),_d=X('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-142p4sy"></div> <input class="svelte-142p4sy"/>',1);function bs(t,e){_e(e,!0);let r=q(e,"options",19,()=>["p","l","b","h","qq"]),s=q(e,"value",31,()=>Fe(r()[0]));const o=h=>{if(h.key==="ArrowLeft"){const m=r().findIndex(g=>g===s());m>0&&s(r()[m-1]);return}if(h.key==="ArrowRight"){const m=r().findIndex(g=>g===s());m<r().length-1&&s(r()[m+1]);return}},a='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',c={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};c.b=c.l+c.p;const u={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var f=_d(),d=J(f);d.__keydown=o,$e(d,20,r,h=>h,(h,m)=>{var g=bd();g.__click=()=>s(m);let b;var _=D(g);Ct(_,()=>a+c[m]+"</svg>"),ce(()=>{b=pt(g,1,"option svelte-142p4sy",null,b,{selected:m==s()}),O(g,"title",u[m])}),S(h,g)});var v=F(d,2);eo(v,s),S(t,f),we()}ft(["keydown","click"]),ft(["keydown","click"]);var wd=X("<h2> </h2>"),yd=X("<!> <!>",1),xd=X('<div class="widget"><!></div>');function Ed(t,e){_e(e,!0);let r=q(e,"title",3,""),s=q(e,"value",15),o=q(e,"labelWidth",3,13);function a(d){const v={};for(const h of Object.keys(d))v[h]=d[h].default;return v}ye(()=>{!s()&&e.options&&s(a(e.options))});var c=xd(),u=D(c);{var f=d=>{var v=yd(),h=J(v);{var m=b=>{ue(b,{children:(_,p)=>{var w=wd(),A=D(w);ce(()=>Ee(A,r())),S(_,w)},$$slots:{default:!0}})};W(h,b=>{r()&&b(m)})}var g=F(h,2);$e(g,17,()=>Object.keys(e.options),nt,(b,_)=>{const p=y(()=>e.options[l(_)]);var w=ge(),A=J(w);{var k=E=>{ue(E,{get name(){return l(p).name},get label(){return l(p).label},get labelWidth(){return o()},children:(C,j)=>{var N=ge(),R=J(N);Rl(R,()=>l(p).el,(L,T)=>{T(L,nn(()=>l(p).props,{get value(){return s()[l(_)]},set value(P){s(s()[l(_)]=P,!0)}}))}),S(C,N)},$$slots:{default:!0}})};W(A,E=>{l(p).hidden||E(k)})}S(b,w)}),S(d,v)};W(u,d=>{s()&&d(f)})}S(t,c),we()}function So(t,e,r,s,o){(!s||!Array.isArray(s))&&(s=[]);const a=e.values.nrows,c=e.values.ncols,u=s.length,f=a-u,d=t.ncomp,v=o?5:4,h=Math.max(d,v),m=Array(h).fill(""),g=d<v?Array(v-d).fill(""):[],b=v<d?Array(d-v).fill(""):[],_=Array(d).fill(0).map((N,R)=>"PC"+(R+1)),p=e.sep;function w(N,R,L){A+=`
`,A+=[N+":","","",...m].join(p)+`
`,A+=["object","group","outlier",..._,...g].join(p)+`
`;const T=t.v.subarray(R,R+d*f);let P=0;for(let M=0;M<a;M++){const B=e.classes?e.classes[M]:"";if(u>0&&s.includes(M)){A+=[L[M],B,"yes",...Array(d).fill("-"),...g].join(p)+`
`;continue}const V=Array(d);for(let z=0;z<d;z++)V[z]=T[z*f+P];A+=[L[M],B,"",...V,...g].join(p)+`
`,P=P+1}A+=`
`}let A="";if(A+=["Number of components:",d,"",...m].join(p)+`
`,A+=["Center:",t.center,"",...m].join(p)+`
`,A+=["Scale:",t.scale,"",...m].join(p)+`
`,A+=`
`,A+=["Statistics:","","",...m].join(p)+`
`,o){A+=["","","PC","Expvar","Cumexpvar","Resvar","Cumresvar","Eigenvalues",...b].join(p)+`
`;for(let N=0;N<d;N++)A+=["","",N+1,t.stat.expvar[N],t.stat.cumexpvar[N],t.stat.resvar[N],t.stat.cumresvar[N],t.eigenvals[N],...b].join(p)+`
`}else{A+=["","","PC","Expvar","Cumexpvar","Resvar","Cumresvar",...b].join(p)+`
`;for(let N=0;N<d;N++)A+=["","",N+1,t.stat.expvar[N],t.stat.cumexpvar[N],t.stat.resvar[N],t.stat.cumresvar[N],...b].join(p)+`
`}if(A+=`
`,o){A+=`
`,A+=["Loading, center and scale values:","","",...m].join(p)+`
`,A+=["variable","center","scale",..._,...g].join(p)+`
`;const N=o.v.subarray(2,2+c),R=o.v.subarray(2+c,2+c*2),L=o.v.subarray(2+c*2,2+c*2+d*c);for(let T=0;T<c;T++){const P=Array(d);for(let M=0;M<d;M++)P[M]=L[M*c+T];A+=[e.varlabels[T],N[T],R[T],...P,...g].join(p)+`
`}A+=`
`}w("Scores",0,e.objlabels),w("Score distances, h",d*f,e.objlabels),w("Orthogonal distances, q",d*f*2,e.objlabels),e.dec!=="."&&(A=A.replace(/\./g,e.dec)),A=["Data filename:",e.fileName,"",...m].join(p)+`
`+A;let k=["PCA results ("+r+")","https://mda.tools/pca/","",...m].join(p)+`

`;const E=new Blob([k+A],{type:"text/csv"}),C=window.URL.createObjectURL(E),j=document.createElement("a");j.setAttribute("href",C),j.setAttribute("download",`pca-results-${r}.csv`),j.click()}function kd(t,e){t.prep=e;const r=new Blob([JSON.stringify(t,ms)],{type:"application/json"}),s=window.URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",s),o.setAttribute("download","pca-model.json"),o.click()}var Ad=X('<span style="font-weight:bold"> </span><br/>',1),Cd=X('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),Sd=X('<span class="file-size svelte-1uxd0r7"> </span>'),Nd=X('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Md(t,e){_e(e,!0);let r=q(e,"title",3,"");var s=ge(),o=J(s);{var a=c=>{ue(c,{children:(u,f)=>{var d=Nd(),v=J(d),h=D(v);{var m=k=>{var E=Ad(),C=J(E),j=D(C);ce(()=>Ee(j,r())),S(k,E)};W(h,k=>{r()&&r()!==""&&k(m)})}var g=F(h,4),b=D(g),_=F(g,5);{var p=k=>{var E=Cd(),C=J(E),j=D(C),N=F(C,4),R=D(N);ce(()=>{Ee(j,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),Ee(R,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),S(k,E)},w=k=>{var E=Sd(),C=D(E);ce(()=>Ee(C,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),S(k,E)};W(_,k=>{e.dataset.nresp&&e.dataset.nresp>0?k(p):k(w,!1)})}var A=F(v,2);Mr(A,{get onclick(){return e.reset}}),ce(()=>{O(g,"title",e.dataset.fileName),Ee(b,e.dataset.fileName)}),S(u,d)},$$slots:{default:!0}})};W(o,c=>{e.dataset&&c(a)})}S(t,s),we()}var Td=X("<!> <!>",1),Pd=X("<!> <!> <!> <!> <!> <!>",1),jd=X("<!> <!>",1),Ld=X("<p> </p>"),Rd=X("<!> <p> </p>",1),Id=X("<p> </p>"),zd=X("<!> <!> <!>",1);function Bi(t,e){_e(e,!0);let r=q(e,"model",3,null),s=q(e,"outliers",19,()=>[]),o=q(e,"className",3,"Class"),a=q(e,"classMandatory",3,!1),c=q(e,"classUnique",3,!1),u=q(e,"title",3,""),f=q(e,"dataset",15),d=q(e,"resobj",15),v=q(e,"csvOnly",3,!0);const h=[",",";"],m=y(()=>r()?["no","yes"]:["no","labels","values"]);let g=te(void 0),b=te(""),_=te(""),p=te(","),w=te("no"),A=te(!1),k=te(!1),E=te(null),C=te("neutral"),j=te("");function N(ne){I(C,"error"),I(j,ne,!0),console.error(ne)}function R(){I(C,"neural"),I(j,"")}function L(){I(C,"success"),I(j,"")}function T(ne,de,pe){I(E,e.WASM().then(Re=>{d(Eo(Re,ne,de,pe,!0)),L()}).catch(Re=>{d(null),N(Re)}),!0)}function P(ne,de){if(!ne||ne.size<10)return;const Re=ne.slice(0,1e5),Me=new FileReader;Me.onload=()=>{const ke=Me.result;!ke||ke.length<0||((Te=>{var Pe=js(Te,4);I(p,Pe[0],!0),I(A,Pe[1],!0),I(k,Pe[2],!0),I(w,Pe[3],!0)})(Gf(ke)),I(k,a()||l(k),!0),de&&l(w)!=="no"&&I(w,"yes"))},Me.onerror=function(ke){csvString=null,I(C,"error"),I(j,ke,!0),console.error("Error reading CSV file.",ke)},Me.readAsText(Re)}function M(ne){try{const de=Wf(ne,l(p),l(w)==="yes"?"labels":l(w),l(A),l(k),l(b),l(_));if(de.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const pe=r()?r().prep&&Object.keys(r().prep).length>0?r().prep.npred:r().ncols+r().exclvars.length:0;if(r()&&de.values.ncols!==pe)throw new Error("Dataset has different number of columns than the training set.");if(de.classNames.length>de.values.nrows/2)throw new Error("Dataset has too many unique "+o().toLowerCase()+" labels ("+de.classNames.length+"), check your CSV file.");if(a()&&de.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&de.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");de.fileName=l(g).name.replace(/\.[^/.]+$/,""),r()&&(de.varrev=r().varrev,de.header=r().header,de.varlabels=r().varlabels,de.varvalues=r().varvalues,de.varvaluesName=r().varvaluesName,de.varvaluesUnits=r().varvaluesUnits),f(de),L()}catch(de){f(null),N(de)}}function B(ne){const de=new FileReader;de.onload=()=>{M(de.result)},de.readAsText(l(g))}async function V(ne){try{const de=l(g)instanceof FileList?l(g):[l(g)];f(await Zf(de)),L()}catch(de){N("Failed to read SPC file: "+de)}}function z(){I(g,""),f(null),d(null),I(b,""),I(_,""),R()}ye(()=>{if(!(l(g)===0||l(g)===void 0||f())){if(l(g)===null||l(g)===""){z();return}if(Array.isArray(l(g))){if(l(g).filter(ne=>ne.slice(-4)===".spc").length!==l(g).length){N("Multiple file selection is allowed only for SPC files.");return}V(l(g));return}l(g)&&(l(g).type==="text/csv"||l(g).type==="application/vnd.ms-excel")?(P(l(g),r()),R()):V([l(g)])}}),ye(()=>{l(p)&&R()}),ye(()=>{if(f()&&r()&&!d()&&!l(j))try{d(T(r(),f(),s())),L()}catch(ne){f(null),d(null),N(ne)}});var G=zd(),ae=J(G);{var H=ne=>{var de=jd(),pe=J(de);nl(pe,()=>l(g)===void 0,ke=>{ue(ke,{children:(Te,Pe)=>{var Se=ge(),xe=J(Se);{var oe=re=>{ps(re,{id:"dataFile",message:"Select CSV file with dataset",get file(){return l(g)},set file(fe){I(g,fe,!0)}})},ie=re=>{ps(re,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return l(g)},set file(fe){I(g,fe,!0)}})};W(xe,re=>{v()?re(oe):re(ie,!1)})}S(Te,Se)},$$slots:{default:!0}})});var Re=F(pe,2);{var Me=ke=>{var Te=Pd(),Pe=J(Te);ue(Pe,{label:"Delimiter",children:(ve,qe)=>{rt(ve,{id:"sep",get options(){return h},get value(){return l(p)},set value(ze){I(p,ze,!0)}})},$$slots:{default:!0}});var Se=F(Pe,2);ue(Se,{label:"Row labels",children:(ve,qe)=>{Zt(ve,{id:"hasLabels",options:["no","yes"],get value(){return l(A)},set value(ze){I(A,ze,!0)}})},$$slots:{default:!0}});var xe=F(Se,2);{var oe=ve=>{ue(ve,{get label(){return`${o()??""} labels`},children:(qe,ze)=>{Zt(qe,{id:"hasLabels",options:["no","yes"],get value(){return l(k)},set value(Oe){I(k,Oe,!0)}})},$$slots:{default:!0}})};W(xe,ve=>{a()||ve(oe)})}var ie=F(xe,2);ue(ie,{label:"Header",children:(ve,qe)=>{rt(ve,{id:"header",get options(){return l(m)},get value(){return l(w)},set value(ze){I(w,ze,!0)}})},$$slots:{default:!0}});var re=F(ie,2);{var fe=ve=>{var qe=Td(),ze=J(qe);ue(ze,{label:"Header name",children:(Ye,at)=>{Oi(Ye,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return l(b)},set value(Qe){I(b,Qe,!0)}})},$$slots:{default:!0}});var Oe=F(ze,2);ue(Oe,{label:"Header units",children:(Ye,at)=>{Oi(Ye,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return l(_)},set value(Qe){I(_,Qe,!0)}})},$$slots:{default:!0}}),S(ve,qe)};W(re,ve=>{l(w)==="values"&&ve(fe)})}var be=F(re,2);ue(be,{label:" ",children:(ve,qe)=>{vt(ve,{text:"Load",onclick:B})},$$slots:{default:!0}}),S(ke,Te)};W(Re,ke=>{l(g)&&!Array.isArray(l(g))&&(l(g).type==="text/csv"||l(g).type==="application/vnd.ms-excel")&&ke(Me)})}S(ne,de)},$=ne=>{var de=ge(),pe=J(de);{var Re=Me=>{var ke=ge(),Te=J(ke);Zs(Te,()=>l(E),Pe=>{ue(Pe,{children:(Se,xe)=>{var oe=Rd(),ie=J(oe);Co(ie);var re=F(ie,2),fe=D(re);ce(()=>Ee(fe,r()?"Loading data and apply model...":"Loading data...")),S(Se,oe)},$$slots:{default:!0}})},void 0,(Pe,Se)=>{ue(Pe,{status:"error",children:(xe,oe)=>{var ie=Ld(),re=D(ie);ce(()=>Ee(re,l(Se))),S(xe,ie)},$$slots:{default:!0}})}),S(Me,ke)};W(pe,Me=>{l(E)&&Me(Re)})}S(ne,de)};W(ae,ne=>{f()?ne($,!1):ne(H)})}var le=F(ae,2);{var Z=ne=>{Md(ne,{get dataset(){return f()},reset:z,get title(){return u()}})};W(le,ne=>{f()&&ne(Z)})}var ee=F(le,2);{var se=ne=>{ue(ne,{status:"error",children:(de,pe)=>{var Re=Id(),Me=D(Re);ce(()=>Ee(Me,l(j))),S(de,Re)},$$slots:{default:!0}})};W(ee,ne=>{(l(C)==="error"||l(j))&&ne(se)})}S(t,G),we()}var Fd=X("<!> <!> <!>",1),qd=X("<p> </p>"),Od=X("<!> <p>Computing PV-set...</p>",1),Bd=X('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),Vd=X("<p> </p>"),Dd=X("<!> <!> <!> <!>",1);function Yd(t,e){_e(e,!0);let r=q(e,"outliers",19,()=>[]),s=q(e,"pvset",15),o=q(e,"pvres",15),a=te("neutral"),c=te(""),u=te(Fe(["ven","rand","loo"])),f=te("ven"),d=te(void 0),v=e.calset.values.nrows-r().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(L=>L>=v/(v-e.model.ncomp-1)&&L<=v/2):[],m=te(Fe(h.length>0?h[0]:0));ye(()=>{h.length===0&&(I(u,["loo"],!0),I(f,"loo"))});async function g(L,T,P){I(d,e.WASM().then(M=>{const B=P.type=="loo"?0:P.type=="rand"?2:1,V=zf(M,T,L.values,T.ncomp,P.nseg,B,0,r());s({classLabelsVarname:L.classLabelsVarname,classNames:L.classNames,dec:L.dec,fileName:L.fileName+"-pcv",hasClassNames:L.hasClassNames,hasLabels:L.hasLabels,header:L.header,labelsVarname:L.labelsVarname,classes:e.calres.classes,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:L.sep,values:V,varAxisTitle:L.varAxisTitle,varindices:T.varindices,varlabels:T.varlabels,varrev:T.varrev,varvalues:T.varvalues,varvaluesName:T.varvaluesName,varvaluesUnits:T.varvaluesUnits}),o(Eo(M,T,s(),[]))}).catch(M=>{console.error(M),s(null),o(null),I(a,"error"),I(c,M,!0)}),!0)}function b(L){I(a,"neutral"),I(c,""),g(e.calset,e.model,{type:l(f),nseg:l(m)})}function _(){I(a,"neutral"),I(c,""),I(d,null),s(null),o(null)}ye(()=>{e.model===null&&_()});var p=Dd(),w=J(p);{var A=L=>{var T=Fd(),P=J(T);ue(P,{name:"split",label:"Split type:",children:(z,G)=>{rt(z,{id:"cvType",get options(){return l(u)},get value(){return l(f)},set value(ae){I(f,ae,!0)}})},$$slots:{default:!0}});var M=F(P,2);{var B=z=>{ue(z,{name:"nseg",label:"Segments:",children:(G,ae)=>{rt(G,{id:"nseg",get options(){return h},get value(){return l(m)},set value(H){I(m,H,!0)}})},$$slots:{default:!0}})};W(M,z=>{l(f)!=="loo"&&z(B)})}var V=F(M,2);ue(V,{name:"run-button",label:" ",children:(z,G)=>{vt(z,{onclick:b,text:"Compute PV-set"})},$$slots:{default:!0}}),S(L,T)};W(w,L=>{e.model&&!s()&&l(a)!=="busy"&&L(A)})}var k=F(w,2);{var E=L=>{var T=ge(),P=J(T);Zs(P,()=>l(d),M=>{ue(M,{name:"spinner",children:(B,V)=>{var z=Od(),G=J(z);Co(G),S(B,z)},$$slots:{default:!0}})},void 0,(M,B)=>{ue(M,{name:"error",status:"error",children:(V,z)=>{var G=qd(),ae=D(G);ce(()=>Ee(ae,l(B))),S(V,G)},$$slots:{default:!0}})}),S(L,T)};W(k,L=>{l(d)&&L(E)})}var C=F(k,2);{var j=L=>{ue(L,{name:"info",children:(T,P)=>{var M=Bd(),B=J(M),V=F(D(B)),z=F(B,2);rd(z,{onclick:()=>Kf(s(),e.calset.fileName+"-pv")});var G=F(z,2);Mr(G,{onclick:_}),ce(()=>Ee(V,` ${s().values.nrows??""} × ${s().values.ncols??""}, ${l(f)??""}
      ${l(f)!=="loo"?l(m)+" seg":""}`)),S(T,M)},$$slots:{default:!0}})};W(C,L=>{s()&&L(j)})}var N=F(C,2);{var R=L=>{ue(L,{name:"error",status:"error",children:(T,P)=>{var M=Vd(),B=D(M);ce(()=>Ee(B,l(c))),S(T,M)},$$slots:{default:!0}})};W(N,L=>{l(a)==="error"&&l(c)&&L(R)})}S(t,p),we()}var Wd=X("<!> <!> <!> <!>",1),Ud=X("<p> </p>"),Hd=X("<!> <p>Computing global model...</p>",1),Gd=X('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Xd=X('<div class="buttons"><!> <!></div>'),Kd=X("<!> <!>",1),Jd=X("<p> </p>"),Qd=X("<!> <!> <!> <!>",1);function Zd(t,e){_e(e,!0);let r=q(e,"outliers",19,()=>[]),s=q(e,"resobj",15),o=q(e,"model",15),a=q(e,"downloadModel",3,null),c=q(e,"downloadResults",3,null),u=te("neutral"),f=te(""),d=te(1),v=te(!0),h=te(!1),m=te(void 0);async function g(T,P,M,B){I(m,e.WASM().then(V=>{I(u,"computing");const z=Rf(V,T.values,P,M,B,r());z.hash=xo(),z.exclvars=[],z.varlabels=T.varlabels,z.varindices=T.varindices,z.varvalues=T.varvalues,z.varvaluesName=T.varvaluesName,z.varvaluesUnits=T.varvaluesUnits,z.varrev=T.varrev,z.prep=[];const G=Eo(V,z,T,r());o(z),s(G),I(u,"success")}).catch(V=>{console.error(V),o(null),I(u,"error"),I(f,V,!0)}),!0)}function b(T){I(u,"neutral"),I(f,null),g(e.dataset,l(d),l(v),l(h))}function _(){I(u,"neutral"),I(m,null),s(null),o(null),I(f,null)}let p=y(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-1,50):null);ye(()=>{e.dataset===null&&_()}),ye(()=>{I(d,l(p)?Math.min(l(p),20):null,!0)});var w=Qd(),A=J(w);{var k=T=>{var P=Wd(),M=J(P);ue(M,{name:"ncomp",label:"# of PCs",children:(G,ae)=>{Ol(G,{id:"ncomp",min:1,get max(){return l(p)},step:1,decNum:0,get value(){return l(d)},set value(H){I(d,H,!0)}})},$$slots:{default:!0}});var B=F(M,2);ue(B,{name:"center",label:"Center",children:(G,ae)=>{Zt(G,{id:"center",options:["no","yes"],get value(){return l(v)},set value(H){I(v,H,!0)}})},$$slots:{default:!0}});var V=F(B,2);ue(V,{name:"scale",label:"Scale",children:(G,ae)=>{Zt(G,{id:"scale",options:["no","yes"],get value(){return l(h)},set value(H){I(h,H,!0)}})},$$slots:{default:!0}});var z=F(V,2);ue(z,{name:"create-model",label:" ",children:(G,ae)=>{vt(G,{onclick:b,text:"Create model"})},$$slots:{default:!0}}),S(T,P)};W(A,T=>{e.dataset&&!o()&&l(u)!=="computing"&&T(k)})}var E=F(A,2);{var C=T=>{var P=ge(),M=J(P);Zs(M,()=>l(m),B=>{ue(B,{name:"spinner",children:(V,z)=>{var G=Hd(),ae=J(G);Co(ae),S(V,G)},$$slots:{default:!0}})},void 0,(B,V)=>{ue(B,{name:"error",status:"error",children:(z,G)=>{var ae=Ud(),H=D(ae);ce(()=>Ee(H,l(V))),S(z,ae)},$$slots:{default:!0}})}),S(T,P)};W(E,T=>{l(m)&&T(C)})}var j=F(E,2);{var N=T=>{var P=Kd(),M=J(P);ue(M,{name:"info",children:(z,G)=>{var ae=Gd(),H=J(ae),$=F(D(H)),le=F(H,2);Mr(le,{onclick:_}),ce(()=>Ee($,` ${o().ncomp??""} PCs${o().center?", centered":""}${o().scale?", scaled":""}`)),S(z,ae)},$$slots:{default:!0}});var B=F(M,2);{var V=z=>{ue(z,{name:"download-buttons",label:"Download",children:(G,ae)=>{var H=Xd(),$=D(H);vt($,{onclick:()=>c()(s(),e.dataset,"train",r(),o()),text:"Results"});var le=F($,2);vt(le,{onclick:()=>a()(o()),text:"Model"}),S(G,H)},$$slots:{default:!0}})};W(B,z=>{a()&&c()&&z(V)})}S(T,P)};W(j,T=>{o()&&T(N)})}var R=F(j,2);{var L=T=>{ue(T,{name:"error",status:"error",children:(P,M)=>{var B=Jd(),V=D(B);ce(()=>Ee(V,l(f))),S(P,B)},$$slots:{default:!0}})};W(R,T=>{(l(u)==="error"||l(f))&&T(L)})}S(t,w),we()}var $d=X('<tr class="svelte-110ino2"><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td></tr>'),ev=X('<tr class="svelte-110ino2"><td class="svelte-110ino2">...</td><td class="svelte-110ino2">...</td><td class="svelte-110ino2">...</td><td class="svelte-110ino2">...</td></tr>'),tv=X('<tr class="svelte-110ino2"><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td><td class="svelte-110ino2"> </td></tr>'),rv=X('<table class="svelte-110ino2"><thead><tr class="svelte-110ino2"><th class="svelte-110ino2">PC</th><th class="svelte-110ino2">Expvar</th><th class="svelte-110ino2">Cumexpvar</th><th class="svelte-110ino2">Eigenvals</th></tr></thead><tbody><!><!><!></tbody></table> <!>',1);function Vi(t,e){_e(e,!0);const r=16,s=y(()=>e.res?Object.keys(e.res):null);let o=te(Fe(l(s)[0]));const a=y(()=>e.res?e.res[l(o)]:null),c=y(()=>l(a)?l(a).stat.cumexpvar:null),u=y(()=>l(a)?l(a).stat.expvar:null),f=y(()=>l(a)?l(a).eigenvals.map(m=>m*(l(a).nrows-1)):null);var d=ge(),v=J(d);{var h=m=>{var g=rv(),b=J(g),_=F(D(b)),p=D(_);$e(p,17,()=>l(a).stat.components.filter(N=>N<r),nt,(N,R)=>{var L=$d(),T=D(L),P=D(T),M=F(T),B=D(M),V=F(M),z=D(V),G=F(V),ae=D(G);ce((H,$,le)=>{Ee(P,l(R)),Ee(B,H),Ee(z,$),Ee(ae,le)},[()=>(l(u)[l(R)-1]*100).toFixed(2),()=>(l(c)[l(R)-1]*100).toFixed(2),()=>l(f)[l(R)-1].toFixed(2)]),S(N,L)});var w=F(p);{var A=N=>{var R=ev();S(N,R)};W(w,N=>{l(a).ncomp>r&&N(A)})}var k=F(w);{var E=N=>{var R=tv(),L=D(R),T=D(L),P=F(L),M=D(P),B=F(P),V=D(B),z=F(B),G=D(z);ce((ae,H,$)=>{Ee(T,l(a).ncomp),Ee(M,ae),Ee(V,H),Ee(G,$)},[()=>((l(c)[l(a).ncomp-1]-l(c)[l(a).ncomp-2])*100).toFixed(2),()=>(l(c)[l(a).ncomp-1]*100).toFixed(2),()=>l(f)[l(a).ncomp-1].toFixed(2)]),S(N,R)};W(k,N=>{l(a).ncomp>=r&&N(E)})}var C=F(b,2);{var j=N=>{ue(N,{name:"res-switcher",children:(R,L)=>{rt(R,{get options(){return l(s)},get value(){return l(o)},set value(T){I(o,T,!0)}})},$$slots:{default:!0}})};W(C,N=>{l(s)&&l(s).length>1&&N(j)})}S(m,g)};W(v,m=>{l(a)&&m(h)})}S(t,d),we()}var nv=X('<span class="item svelte-igakmm"> </span>'),lv=X('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function Di(t,e){_e(e,!0);var r=ge(),s=J(r);{var o=a=>{ue(a,{children:(c,u)=>{var f=lv(),d=J(f),v=F(D(d),2);$e(v,17,()=>e.outliers,nt,(b,_)=>{var p=nv(),w=D(p);ce(()=>Ee(w,e.dataset.objlabels[l(_)])),S(b,p)});var h=F(d,2);{var m=b=>{td(b,{get onclick(){return e.undoOutliers}})};W(h,b=>{e.outliers.length>1&&b(m)})}var g=F(h,2);Mr(g,{get onclick(){return e.resetOutliers}}),S(c,f)},$$slots:{default:!0}})};W(s,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(o)})}S(t,r),we()}const sv={small:30,medium:40,large:50,xlarge:60},ov={small:5,medium:8,large:12,xlarge:15},av={small:6,medium:10,large:14,xlarge:18},No={small:4,medium:6,large:8,xlarge:10},iv={small:12,medium:15,large:19,xlarge:21},Mo={small:11,medium:15,large:17,xlarge:19},Bl={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},sl=["●","◼","▲","▼","⬥","＋","✳","✕"],cv=.8,Yi=.5,uv={small:5,medium:8,large:12,xlarge:15},Rt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Wi(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function Ui(t,e){if(t!=null&&(Array.isArray(t)&&(t=et(t)),!(!We(t)||t.length<1)))return t.apply(r=>Io((r-e[1])*e[0]+e[2])).v}function _t(t,e){return Ui(t,e.coords)}function To(t,e){return Ui(t,e.objects)}function Hi(t,e){if(t!=null&&(Array.isArray(t)&&(t=et(t)),!(!We(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function Gi(t,e){return Hi(t,e.coords)}function Xi(t,e){return Hi(t,e.objects)}function Po(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Rn(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function jo(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Rn(Math.abs(Hr(ui(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Rn(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let s=Math.ceil(-Rn(Math.log10(e)));return s<=2?[0,Array.from(t).map(o=>o.toFixed(s))]:(r=s-2,s=2,Rn(Math.abs(sn(t)))<=10?[-r,Array.from(t).map(o=>(o*Math.pow(10,r)).toFixed(s))]:[-r,Array.from(t).map(o=>(o/Math.pow(10,r)).toString())])}function Ut(t,e,r){return Array.isArray(t)&&(t=et(t)),We(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Lo(t,e,r,s){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=r.coords,a=s.coords;let c="";for(let u=0;u<t.length;u++){const f=Io((t.v[u]-o[1])*o[0]+o[2]),d=Io((e.v[u]-a[1])*a[0]+a[2]);c+=f+","+d+" "}return c}function Ki(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>un(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Ji(t,e){if(Array.isArray(t)&&(t=et(t)),!We(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=s&c<=o);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function Ro(t,e,r,s,o,a){o==null&&(o=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const u=Math.abs(c[1]-c[0])*a,f=c[1]-c[0]-2*u,d=Math.floor(Math.log10(f)),v=1/Math.pow(10,d-1),h=Math.round(f*v)/v;let m=fv(h/r);o&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+u)/m)*m,b=Math.floor((c[1]-u)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-b)<m/10&&(b=b-m),r=Math.ceil(Rn((b-g)/m))+1,t=Ve.zeros(r);for(let _=0;_<r;_++)t.v[_]=g+m*_;if(Math.abs(m)<1){const _=Math.pow(10,1+Math.round(-Math.log10(m)));t=t.apply(p=>Math.round((p+Number.EPSILON)*_)/_)}return t.filter(_=>_>=c[0]&_<=c[1])}function fv(t,e){const r=Math.floor(Math.log10(t)),s=t/Math.pow(10,r);let o;return s<=1?o=1:s<=2?o=2:s<=5?o=5:o=10,o*Math.pow(10,r)}function Io(t){return Math.round(t*10)/10}function dv(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function Qi(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function vv(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function hv(t){let e=-1,r=vv();for(let s=0;s<t.length;s++)e=r[(e^t[s])&255]^e>>>8;return e^-1}function mv(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const s=hv(r),o=new Uint8Array(4);o[0]=s>>>24,o[1]=s>>>16,o[2]=s>>>8,o[3]=s&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(o,50),c}function gv(t,e){const r=t.split(","),s=r[0],o=r[1],a=33/3*4,c=o.substring(0,a),u=o.substring(a),f=atob(c),d=new Uint8Array(f.length);for(let m=0;m<d.length;m++)d[m]=f.charCodeAt(m);const v=mv(d,e),h=btoa(String.fromCharCode(...v));return[s,",",h,u].join("")}function pv(t,e,r,s,o){if(r||(r=10),s||(s=10),o||(o=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*o,c=s/2.54*o;setTimeout(()=>{const u=t.clientHeight,f=t.clientWidth;let d=Math.max(a/f,c/u),v=1;d<1&&(v=d,d=1);const h=document.createElement("canvas"),m=h.getContext("2d");h.width=f*(v<1?v:d),h.height=u*(v<1?v:d),t.setAttribute("width",f*d),t.setAttribute("height",u*d),m.fillStyle="white",m.fillRect(0,0,h.width,h.height),m.scale(d,d);const g=new XMLSerializer().serializeToString(t),b=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(b),p=new Image;p.onload=function(){v<0&&(p.width=p.width*v,p.height=p.height*v),m.drawImage(p,0,0,h.width,h.height);const w=h.toDataURL("image/png"),A=gv(w,o),k=document.createElement("a");k.href=A,k.download=`${e}.png`,k.click()},p.src=_},20)}function bv(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,s=t.clientWidth;t.setAttribute("width",s+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${s} ${r}`);const o=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(o),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function _v(t,e,r,s){const o=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":wv(e,r,s)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=o},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=o},500)}).catch(a=>console.error(a))}async function wv(t,e,r){const s=t.clientHeight,o=t.clientWidth,a=Math.max(e/o,r/s),c=document.createElement("canvas"),u=c.getContext("2d");return c.width=o*a,c.height=s*a,u.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((d,v)=>{const h=new XMLSerializer().serializeToString(t),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,b=g.createObjectURL(m),_=new Image;_.onload=function(){u.drawImage(_,0,0,c.width,c.height),g.revokeObjectURL(b),c.toBlob(function(p){p?d(p):v(new Error("Failed to create blob"))},"image/png")},_.onerror=function(p){v(p)},_.src=b})}function _s(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function yv(t,e,r,s,o){let a=o.ticks,c=o.tickLabels,u=0;const f=Ro(a,t,ov[r.x],!0,o.whole),d=f.length,v=Xi([No[r.plot]],s)[0],h=Ve.fill(e[0],d),m=h.add(v),g=Ve.fill(e[1],d);if(c||(a?(u=0,c=a.v.map(R=>Rn(R).toString())):[u,c]=jo(f.v)),!c||c.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[f,h],[f,g]],_=[[et([t[0]]),et([e[0]])],[et([t[1]]),et([e[0]])]],p=[[f,m],[f,h]],w=(t[1]-t[0])*.01,A=[[null,null],[[t[1]-(u>9?1:0)*w],[h.v[d-1]]]],k=Po(u),E=c.length,C=Math.abs(t[1]>t[0]?t[1]-f.v[E-1]:t[1]-f.v[0]),j=Math.abs(t[1]-t[0]),N=Math.abs(f.v[1]-f.v[0]);if(k.length>0&&C<j*.1&&C<N*.5){const R=t[1]>t[0]?E-1:0;c[R]=" "}return{grid:b,axisLine:_,tickCoords:p,tfCoords:A,ticks:a,tickLabels:c,tickFactor:u,tfLabel:k}}function xv(t,e,r,s,o){let a=o.ticks,c=o.tickLabels,u=0;const f=Ro(o.ticks,e,av[r.y],!0,o.whole),d=f.length,v=Xi([No[r.plot]],s)[0],h=Ve.fill(t[0],d),m=h.add(v),g=Ve.fill(t[1],d);if(c||(a?(u=0,c=a.v.map(N=>Rn(N).toString())):[u,c]=jo(f.v)),c.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[h,f],[g,f]],_=[[et([t[0]]),et([e[0]])],[et([t[0]]),et([e[1]])]],p=[[h,f],[m,f]],w=[[[],[]],[[m.v[d-1]+(Math.abs(u)>9?3:2)*v],[e[1]]]],A=Po(u),k=c.length,E=Math.abs(e[1]>e[0]?e[1]-f.v[k-1]:e[1]-f.v[0]),C=Math.abs(e[1]-e[0]),j=Math.abs(f.v[1]-f.v[0]);if(A.length>0&&E<C*.1&&E<j*.5){const N=e[1]>e[0]?k-1:0;c[N]=" "}return{grid:b,axisLine:_,tickCoords:p,tfCoords:w,ticks:a,tickLabels:c,tickFactor:u,tfLabel:A}}function Ev(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=We(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let s,o;if(t.labels?(s=t.labels,o=0):[o,s]=jo(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=s.length===r.length;return{colmap:r,breaks:e,labels:s,isCentered:a,labelsFactor:o,fontSize:t.fontSize,labelColor:t.labelColor}}function kv(t,e,r,s){const o=t.colmap.length,a=e*cv,c=a/o,u=r[1]+(e-a)*.5,f=uv[s.y],d=r[2]+f*Yi,v=d+f*(1+Yi),h=t.isCentered?c/2:0;return{start:u,top:d,height:f,width:c,dxl:h,ltop:v}}function In(t,e,r){if(!t||!e||!r||typeof r!="function")return;const s=t.target;if(s.tagName===e){const o=Array.prototype.indexOf.call(s.parentNode.children,s);if(o<0)return;r(o),t.stopPropagation()}}function Av(t,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function Cv(t,e){const r="Arial",s=e/8,o=e*1.5,a=Array(t.length),c=Array(t.length);let u=0,f=0,d=0;for(let h=0;h<t.length;h++){const m=Av("  "+t[h].label+"  ",e+"px "+r);d=m>d?m:d;const g=e*t[h].labelHeight+2*s;a[h]=g,c[h]=u,u=u+g,f=f+g}const v=o+2*s+d;return[c,a,o,s,f,v]}function Sv(t,e,r,s,o){const[a,c,u,f,d,v]=Cv(t.items,s*t.fontSize),h=t.position.includes("left")?e[0]+o:t.position.includes("right")?e[1]-v-o:(e[1]+e[0]-v)*.5,m=t.position.includes("top")?r[1]+o:t.position.includes("bottom")?r[0]-d-o:(r[1]+r[0]-d)*.5;return{lgl:h,lgt:m,lgw:v,lgh:d,ely:a,elh:c,elw:u,elp:f}}function un(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,o="";for(;s<t.length;){const a=t[s];if((a==="^"||a==="_")&&s<t.length-1){const c=a==="^";if(s++,t[s]==="("){let u=s+1;for(;u<t.length&&t[u]!==")";)u++;const f=t.slice(s+1,u);o+=c?e(f):r(f),s=u+1}else if(t[s]==="-"||t[s]==="–"){const u=t.slice(s,s+2);o+=c?e(u):r(u),s=s+2}else o+=c?e(t[s]):r(t[s]),s++}else o+=a,s++}return o}var Nv=Ne('<line vector-effect="non-scaling-stroke"></line>'),Mv=Ne("<g></g>");function zo(t,e){_e(e,!0);let r=q(e,"lineCoords",19,()=>[]),s=q(e,"lineColor",19,()=>Rt.DARKGRAY),o=q(e,"lineType",3,1),a=q(e,"lineWidth",3,1),c=q(e,"className",3,"");const u=Kt("axes");let f=y(()=>_t(r()[0][0],u.tX())),d=y(()=>_t(r()[1][0],u.tX())),v=y(()=>_t(r()[0][1],u.tY())),h=y(()=>_t(r()[1][1],u.tY())),m=y(()=>`stroke:${s()};stroke-width: ${a()}px;stroke-dasharray:${Bl[u.scales().plot][o()-1]}`);var g=ge(),b=J(g);{var _=p=>{var w=Mv();$e(w,21,()=>l(f),nt,(A,k,E)=>{var C=Nv();ce(()=>{O(C,"x1",l(f)[E]),O(C,"x2",l(d)[E]),O(C,"y1",l(v)[E]),O(C,"y2",l(h)[E]),bt(C,l(m))}),S(A,C)}),ce(()=>pt(w,0,Wu(c()))),S(p,w)};W(b,p=>{l(f)&&l(v)&&l(d)&&p(_)})}S(t,g),we()}var Tv=Ne('<text text-anchor="middle"><!></text>'),Pv=Ne("<text><!></text>"),jv=Ne("<text><!></text>"),Lv=Ne('<g class="tick-labels"><!></g>');function Zi(t,e){_e(e,!0);let r=q(e,"pos",3,1),s=q(e,"las",3,1),o=y(()=>["middle","middle","start","middle","end"][r()]),a=y(()=>`fill:${e.textColor};`);const c=Kt("axes");let u=y(()=>_t(e.tickCoords[1][0],c.tX())),f=y(()=>_t(e.tickCoords[1][1],c.tY())),d=y(()=>Mo[c.scales().plot]),v=y(()=>[0,0,l(d),0,-l(d)][r()]),h=y(()=>[0,l(d),0,-l(d),0][r()]);var m=Lv(),g=D(m);{var b=p=>{var w=ge(),A=J(w);$e(A,17,()=>l(u),nt,(k,E,C)=>{var j=Tv();O(j,"data-id",C),O(j,"dx",0);var N=D(j);Ct(N,()=>e.tickLabels[C],!0),ce(()=>{O(j,"x",l(u)[C]),O(j,"y",l(f)[C]),O(j,"dy",l(v)*1.25),O(j,"transform",`rotate(-90, ${l(u)[C]}, ${l(f)[C]})`)}),S(k,j)}),S(p,w)},_=p=>{var w=ge(),A=J(w);{var k=C=>{var j=ge(),N=J(j);$e(N,17,()=>l(u),nt,(R,L,T)=>{var P=Pv();O(P,"data-id",T),O(P,"dy",0),O(P,"text-anchor","end");var M=D(P);Ct(M,()=>e.tickLabels[T],!0),ce(()=>{O(P,"x",l(u)[T]),O(P,"y",l(f)[T]),O(P,"dx",-l(h)/2),O(P,"transform",`rotate(-90, ${l(u)[T]}, ${l(f)[T]})`)}),S(R,P)}),S(C,j)},E=C=>{var j=ge(),N=J(j);$e(N,17,()=>l(u),nt,(R,L,T)=>{var P=jv();O(P,"data-id",T);var M=D(P);Ct(M,()=>e.tickLabels[T],!0),ce(()=>{O(P,"x",l(u)[T]),O(P,"y",l(f)[T]),O(P,"dx",l(v)),O(P,"dy",l(h)),O(P,"text-anchor",l(o))}),S(R,P)}),S(C,j)};W(A,C=>{s()===2&&r()===1?C(k):C(E,!1)},!0)}S(p,w)};W(g,p=>{s()===2&&r()===4?p(b):p(_,!1)})}ce(()=>bt(m,l(a))),S(t,m),we()}const Rv=(t,e=Pt,r=Pt)=>{const s=y(()=>e().colmap.length);var o=Vv(),a=J(o);$e(a,17,()=>e().colmap,nt,(v,h,m)=>{const g=y(()=>r().start+m*r().width);var b=qv(),_=J(b),p=F(_);O(p,"dy",0);var w=D(p);Ct(w,()=>e().labels[m],!0),ce(()=>{O(_,"x",l(g)),O(_,"y",r().top),O(_,"width",r().width),O(_,"height",r().height),O(_,"fill",l(h)),O(p,"x",l(g)),O(p,"y",r().ltop),O(p,"dx",r().dxl),O(p,"fill",e().labelColor),O(p,"font-size",e().fontSize+"em")}),S(v,b)});var c=F(a);{var u=v=>{const h=y(()=>r().start+l(s)*r().width);var m=Ov();O(m,"dx",0),O(m,"dy",0);var g=D(m);Ct(g,()=>e().labels[l(s)],!0),ce(()=>{O(m,"x",l(h)),O(m,"y",r().ltop),O(m,"fill",e().labelColor),O(m,"font-size",`${e().fontSize??""}em`)}),S(v,m)};W(c,v=>{e().isCentered||v(u)})}var f=F(c);{var d=v=>{const h=y(()=>r().start+l(s)*r().width);var m=Bv(),g=D(m);Ct(g,()=>Po(e().labelsFactor),!0),ce(()=>{O(m,"x",l(h)),O(m,"y",r().ltop),O(m,"fill",e().labelColor),O(m,"font-size",`${e().fontSize??""}em`)}),S(v,m)};W(f,v=>{e().labelsFactor!==0&&v(d)})}S(t,o)};var Iv=Ne('<text fill="crimson" text-anchor="middle"> </text>'),zv=Ne('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Fv=Ne("<!><!><!><!><!>",1),qv=Ne('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Ov=Ne('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Bv=Ne('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Vv=Ne("<!><!><!>",1),Dv=Ne("<line></line>"),Yv=Ne('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Wv=Ne('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Uv=Ne('<svg><rect height="100%" width="100%"></rect><!></svg>'),Hv=Ne('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Gv=Ne('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Xv=Ne('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Kv=Ne('<g class="plot-labels"><!><!><!></g>'),Jv=Ne('<g class="axis x-axis"><!></g>'),Qv=Ne('<g class="axis y-axis"><!></g>'),Zv=Ne('<rect fill="transparent" id="axes-box"></rect>'),$v=Ne('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),e1=Ne('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),t1=Ne('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),r1=Ne('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),n1=X('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),l1=X('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),s1=X(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function $i(t,e){_e(e,!0);const r=(Ae,Je=Pt,Xe=Pt)=>{var Vt=ge(),er=J(Vt);{var wr=zt=>{var ct=ge(),Ze=J(ct);{var Ht=At=>{var mt=Iv(),zr=D(mt);ce(()=>{O(mt,"x",l(Pe)[0]-10),O(mt,"y",l(ke)),O(mt,"transform",`rotate(-90, ${l(Pe)[0]-10}, ${l(ke)})`),Ee(zr,Xe().error)}),S(At,mt)},Tt=At=>{var mt=zv(),zr=D(mt);ce(()=>{O(mt,"x",l(Te)),O(mt,"y",l(Se)[0]),Ee(zr,Xe().error)}),S(At,mt)};W(Ze,At=>{Xe().pos===4?At(Ht):At(Tt,!1)})}S(zt,ct)},bn=zt=>{var ct=Fv(),Ze=J(ct);{var Ht=Le=>{zo(Le,{get lineCoords(){return Je().grid},get lineColor(){return Rt.MIDDLEGRAY},lineType:3})};W(Ze,Le=>{Xe().showGrid&&Le(Ht)})}var Tt=F(Ze);zo(Tt,{get lineCoords(){return Je().axisLine},get lineColor(){return Rt.DARKGRAY},lineType:1});var At=F(Tt);zo(At,{get lineCoords(){return Je().tickCoords},get lineColor(){return Rt.DARKGRAY},lineType:1});var mt=F(At);{var zr=Le=>{Zi(Le,{get las(){return Xe().las},get pos(){return Xe().pos},get tickCoords(){return Je().tickCoords},get tickLabels(){return Je().tickLabels},get tickColor(){return Rt.DARKGRAY},get hideLast(){return Xe().hideLast}})};W(mt,Le=>{Je().tickCoords.length===2&&Je().tickLabels.length===Je().tickCoords[1][0].length&&Le(zr)})}var Gl=F(mt);{var lt=Le=>{{let Gt=y(()=>[Je().tfLabel]);Zi(Le,{get pos(){return Xe().pos},get tickCoords(){return Je().tfCoords},get tickLabels(){return l(Gt)},get textColor(){return Rt.DARKGRAY}})}};W(Gl,Le=>{Je().tickFactor!==0&&Le(lt)})}S(zt,ct)};W(er,zt=>{Xe().error?zt(wr):zt(bn,!1)})}S(Ae,Vt)},s=(Ae,Je=Pt,Xe=Pt)=>{const Vt=y(()=>Xe().elw+2*Xe().elp),er=y(()=>Xe().elp),wr=y(()=>Xe().elh),bn=y(()=>Xe().ely);var zt=Uv(),ct=D(zt),Ze=F(ct);$e(Ze,17,()=>Je().items,nt,(Ht,Tt,At)=>{var mt=Wv();O(mt,"x",0);var zr=D(mt);{var Gl=Wn=>{var Ft=Dv();ce(()=>{O(Ft,"x1",l(er)),O(Ft,"x2",l(Vt)-l(er)),O(Ft,"y1",l(wr)[At]/2),O(Ft,"y2",l(wr)[At]/2),O(Ft,"stroke",l(Tt).line.lineColor),O(Ft,"stroke-width",l(Tt).line.lineWidth),O(Ft,"stroke-dasharray",l(H)[l(Tt).line.lineType-1])}),S(Wn,Ft)};W(zr,Wn=>{l(Tt).line&&Wn(Gl)})}var lt=F(zr);{var Le=Wn=>{var Ft=Yv(),om=D(Ft);ce(()=>{O(Ft,"x",l(Vt)/2),O(Ft,"y",l(wr)[At]/2),O(Ft,"fill",l(Tt).point.faceColor),O(Ft,"stroke-width",l(Tt).point.lineWidth),O(Ft,"stroke",l(Tt).point.lineColor),O(Ft,"font-size",`${l(Tt).point.markerSize??""}em`),Ee(om,sl[l(Tt).point.marker-1])}),S(Wn,Ft)};W(lt,Wn=>{l(Tt).point&&Wn(Le)})}var Gt=F(lt),sm=D(Gt);Ct(sm,()=>l(Tt).label,!0),ce(()=>{O(mt,"y",l(bn)[At]),O(mt,"width",Xe().lgw),O(mt,"height",l(wr)[At]),O(Gt,"x",l(Vt)+l(er)),O(Gt,"y",l(wr)[At]/2),O(Gt,"fill",Rt.LEGEND),O(Gt,"font-size",`${Je().fontSize??""}em`)}),S(Ht,mt)}),ce(()=>{O(zt,"x",Xe().lgl),O(zt,"y",Xe().lgt),O(zt,"height",Xe().lgh),O(zt,"width",Xe().lgw),O(ct,"fill",Je().faceColor),O(ct,"stroke",Je().lineColor),O(ct,"stroke-width",Je().lineWidth)}),S(Ae,zt)};let o=q(e,"limX",19,()=>[0,1]),a=q(e,"limY",19,()=>[0,1]),c=q(e,"margins",19,()=>[1,1.1,.55,.6]),u=q(e,"downloadLinks",3,"none"),f=q(e,"fileName",3,"plot"),d=q(e,"pngWidth",3,8),v=q(e,"pngHeight",3,8),h=q(e,"pngRes",3,300),m=q(e,"clipboardWidth",3,1200),g=q(e,"clipboardHeight",3,800),b=q(e,"onclick",3,null),_=q(e,"onmousemove",3,null),p=q(e,"onmousedown",3,null),w=q(e,"onmouseup",3,null);function A(Ae,Je){if(Je&&Ae.target.id=="axes-box"){const Xe=Gi([Ae.offsetX-l(le)],l(Re))[0],Vt=Gi([Ae.offsetY-l(Z)],l(Me))[0];Je(Xe,Vt)}}function k(Ae){Ae.preventDefault(),A(Ae,p())}function E(Ae){Ae.preventDefault(),A(Ae,w())}function C(Ae){Ae.preventDefault(),A(Ae,_())}function j(Ae){Ae.preventDefault(),A(Ae,b())}async function N(Ae){_v(Ae.target,l(P),m(),g())}function R(){bv(l(P),f())}function L(){pv(l(P),f(),d(),v(),h())}const T="plottingArea"+Math.round(Math.random()*1e4);let P=te(0),M=te(0),B=te(0);const V=y(()=>({plot:dv(l(M),l(B)),x:Qi(l(M)),y:Qi(l(B))})),z=y(()=>c().map(Ae=>Ae*sv[l(V).plot])),G=y(()=>iv[l(V).plot]),ae=y(()=>No[l(V).plot]),H=y(()=>Bl[l(V).plot]),$=y(()=>l(re).show&&l(re).label!==""?l(G)*1.5:0),le=y(()=>l(fe).show&&l(fe).label!==""?l(G)*1.5:0),Z=y(()=>e.title&&e.title!==""?l(G)*1.5:0),ee=y(()=>l(M)>l(le)?l(M)-l(le):0),se=y(()=>l(B)>l($)+l(Z)?l(B)-l($)-l(Z):0),ne=y(()=>l(se)-l(z)[0]-l(z)[2]),de=y(()=>l(ee)-l(z)[1]-l(z)[3]),pe=y(()=>Wi(o(),2)&&Wi(a(),2)&&l(ee)>l(z)[1]+l(z)[3]&&l(se)>l(z)[0]+l(z)[2]),Re=y(()=>l(pe)?{coords:[l(de)/(o()[1]-o()[0]),o()[0],l(z)[1]],objects:[l(de)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Me=y(()=>l(pe)?{coords:[-l(ne)/(a()[1]-a()[0]),a()[1],l(z)[2]],objects:[l(ne)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ke=y(()=>l(ne)*.5+l(Z)+l(z)[2]),Te=y(()=>l(de)*.5+l(le)+l(z)[1]),Pe=y(()=>l(pe)?_t(o(),l(Re)):[0,1]),Se=y(()=>l(pe)?_t(a(),l(Me)):[1,0]),xe=y(()=>un(e.title)),oe=y(()=>l(xe)?l(xe).length===e.title.left?1:1.4:0);let ie=te(Fe({show:!1})),re=te(Fe({show:!1,error:""})),fe=te(Fe({show:!1,error:""})),be=te(Fe({show:!1,colmap:null,breaks:null})),ve=te(Fe({show:!1,items:null,position:null}));const qe=y(()=>l(pe)&&l(be)&&l(be).show?Ev(l(be)):null),ze=y(()=>l(pe)&&l(re).show?yv(o(),a(),l(V),l(Me),l(re)):null),Oe=y(()=>l(pe)&&l(fe).show?xv(o(),a(),l(V),l(Re),l(fe)):null),Ye=y(()=>l(pe)&&l(qe)?kv(l(qe),l(de),l(z),l(V)):null),at=y(()=>l(pe)&&l(ve)&&l(ve).show&&l(Pe)?Sv(l(ve),l(Pe),l(Se),l(G),l(ae)):null);su("axes",{setBox:Ae=>I(ie,Ae,!0),setXAxis:Ae=>I(re,Ae,!0),setYAxis:Ae=>I(fe,Ae,!0),setColmapLegend:Ae=>I(be,Ae,!0),setGroupLegend:Ae=>I(ve,Ae,!0),scales:()=>l(V),tX:()=>l(Re),tY:()=>l(Me),limX:()=>o(),limY:()=>a()});var Qe=s1();let Y;var U=D(Qe),Q=F(D(U));{var he=Ae=>{var Je=Kv(),Xe=D(Je);{var Vt=ct=>{var Ze=Hv();O(Ze,"dx",0),O(Ze,"dy",0);var Ht=D(Ze);Ct(Ht,()=>l(re).label,!0),ce(()=>{O(Ze,"x",l(Te)),O(Ze,"y",l(se)+l(Z))}),S(ct,Ze)};W(Xe,ct=>{l(re).show&&l(re).label&&l(re).label!==""&&ct(Vt)})}var er=F(Xe);{var wr=ct=>{var Ze=Gv();O(Ze,"dx",0),O(Ze,"dy",0);var Ht=D(Ze);Ct(Ht,()=>l(fe).label,!0),ce(()=>{O(Ze,"x",l(G)/1.1*l(fe).labelHeight),O(Ze,"y",l(ke)),O(Ze,"transform",`rotate(-90, ${l(G)*l(fe).labelHeight/1.1}, ${l(ke)})`)}),S(ct,Ze)};W(er,ct=>{l(fe).show&&l(fe).label&&l(fe).label!==""&&ct(wr)})}var bn=F(er);{var zt=ct=>{var Ze=Xv();O(Ze,"dx",0),O(Ze,"dy",0);var Ht=D(Ze);Ct(Ht,()=>l(xe),!0),ce(()=>{O(Ze,"x",l(Te)),O(Ze,"y",l(G)*l(oe))}),S(ct,Ze)};W(bn,ct=>{l(xe)&&l(xe)!==""&&ct(zt)})}S(Ae,Je)};W(Q,Ae=>{l(pe)&&Ae(he)})}var me=F(Q),je=D(me),Be=D(je),It=D(Be),Ir=F(je);{var xt=Ae=>{var Je=r1(),Xe=J(Je);{var Vt=lt=>{var Le=Jv(),Gt=D(Le);r(Gt,()=>l(ze),()=>l(re)),S(lt,Le)};W(Xe,lt=>{l(re).show&&l(ze)&&lt(Vt)})}var er=F(Xe);{var wr=lt=>{var Le=Qv(),Gt=D(Le);r(Gt,()=>l(Oe),()=>l(fe)),S(lt,Le)};W(er,lt=>{l(fe).show&&l(Oe)&&lt(wr)})}var bn=F(er),zt=D(bn);{var ct=lt=>{var Le=Zv();Le.__keydown=j,Le.__click=j,Le.__mousemove=C,Le.__mousedown=k,Le.__mouseup=E,ce(()=>{O(Le,"stroke",l(ie).lineColor),O(Le,"stroke-width",`${l(ie).lineWidth??""}px`),O(Le,"x",l(Pe)[0]),O(Le,"y",l(Se)[1]),O(Le,"width",l(Pe)[1]-l(Pe)[0]),O(Le,"height",l(Se)[0]-l(Se)[1])}),S(lt,Le)},Ze=lt=>{var Le=$v();Le.__keydown=j,Le.__click=j,Le.__mousemove=C,Le.__mousedown=k,Le.__mouseup=E,ce(()=>{O(Le,"x",l(Pe)[0]),O(Le,"y",l(Se)[1]),O(Le,"width",l(Pe)[1]-l(Pe)[0]),O(Le,"height",l(Se)[0]-l(Se)[1])}),S(lt,Le)};W(zt,lt=>{l(ie).show?lt(ct):lt(Ze,!1)})}var Ht=F(bn),Tt=D(Ht);Wr(Tt,()=>e.children??Pt);var At=F(Ht);{var mt=lt=>{var Le=e1(),Gt=D(Le);Rv(Gt,()=>l(qe),()=>l(Ye)),S(lt,Le)};W(At,lt=>{l(Ye)&&lt(mt)})}var zr=F(At);{var Gl=lt=>{var Le=t1(),Gt=D(Le);s(Gt,()=>l(ve),()=>l(at)),S(lt,Le)};W(zr,lt=>{l(at)&&lt(Gl)})}ce(()=>O(Ht,"clip-path",`url(#${T})`)),S(Ae,Je)};W(Ir,Ae=>{l(pe)&&Ae(xt)})}Mn(U,Ae=>I(P,Ae),()=>l(P));var tt=F(U,2);{var it=Ae=>{var Je=n1();S(Ae,Je)},wt=Ae=>{var Je=l1(),Xe=D(Je);Xe.__click=R,Xe.__keydown=R;var Vt=F(Xe,2);Vt.__click=L,Vt.__keydown=L;var er=F(Vt,2);er.__click=N,er.__keydown=N,S(Ae,Je)};W(tt,Ae=>{l(pe)?Ae(wt,!1):Ae(it)})}ce(()=>{Y=pt(Qe,1,`plot-container show-download-links-${u()??""}`,"svelte-1t5q9z1",Y,{"plot-error":!l(pe)}),bt(U,`font-size:${l(G)??""}px`),O(me,"x",l(le)),O(me,"y",l(Z)),O(me,"width",l(ee)),O(me,"height",l(se)),O(Be,"id",T),O(It,"x",l(Pe)[0]),O(It,"y",l(Se)[1]),O(It,"width",l(Pe)[1]-l(Pe)[0]),O(It,"height",l(Se)[0]-l(Se)[1])}),oi(U,"clientWidth",Ae=>I(M,Ae)),oi(U,"clientHeight",Ae=>I(B,Ae)),S(t,Qe),we()}ft(["keydown","click","mousemove","mousedown","mouseup"]);function Fo(t,e){_e(e,!0);let r=q(e,"tickLabels",7),s=q(e,"las",3,1),o=q(e,"whole",3,!1),a=q(e,"show",3,!0),c=q(e,"showGrid",3,!1);const u=Kt("axes");ye(()=>{const f=un(e.label),d=f?f.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=Ji(e.ticks,u.limX())),!h&&r()&&(m=>{var g=js(m,2);r(g[0]),h=g[1]})(Ki(r(),v)),u.setXAxis({show:a(),error:h,label:f,ticks:v,labelHeight:d,showGrid:c(),las:s(),whole:o(),tickLabels:r()})}),we()}function qo(t,e){_e(e,!0);let r=q(e,"tickLabels",7),s=q(e,"las",3,1),o=q(e,"whole",3,!1),a=q(e,"show",3,!0),c=q(e,"showGrid",3,!1);const u=Kt("axes");ye(()=>{const f=un(e.label),d=f?f.length===e.label.length?1:1.4:0;let v,h="";e.ticks&&([v,h]=Ji(e.ticks,u.limY())),!h&&r()&&(m=>{var g=js(m,2);r(g[0]),h=g[1]})(Ki(r(),v)),u.setYAxis({show:a(),error:h,label:f,ticks:v,labelHeight:d,showGrid:c(),las:s(),whole:o(),tickLabels:r(),pos:4})}),we()}function Oo(t,e){_e(e,!0);let r=q(e,"lineWidth",3,1),s=q(e,"lineColor",3,"#606060");const o=Kt("axes");ye(()=>{o.setBox({show:!0,lineWidth:r(),lineColor:s()})}),we()}var o1=Ne("<rect></rect>"),a1=Ne("<g></g>");function ws(t,e){_e(e,!0);let r=q(e,"faceColor",19,()=>Rt.PRIMARY),s=q(e,"lineColor",19,r),o=q(e,"lineWidth",3,1),a=q(e,"className",3,"series-rect");const c=y(()=>Ut(e.left,"Rectangles (left)")),u=y(()=>l(c)?Ut(e.top,"Rectangles (top)",l(c).length):null),f=y(()=>l(u)?typeof e.width!="object"?Ve.fill(e.width,l(c).length):e.width:null),d=y(()=>l(u)?typeof e.height!="object"?Ve.fill(e.height,l(c).length):e.height:null),v=Kt("axes"),h=y(()=>l(c)?_t(l(c),v.tX()):null),m=y(()=>l(u)?_t(l(u),v.tY()):null),g=y(()=>l(f)?To(l(f),v.tX()):null),b=y(()=>l(d)?To(l(d),v.tY()):null),_=y(()=>`fill:${r()};stroke:${s()};stroke-width:${o()}px;`),p=y(()=>l(h)&&l(m)&&l(g)&&l(b)&&l(g).length===l(h).length&&l(b).length===l(h).length);var w=ge(),A=J(w);{var k=E=>{var C=a1();C.__click=j=>In(j,"rect",e.onclick),$e(C,21,()=>e.left,nt,(j,N,R)=>{var L=o1();ce(()=>{O(L,"x",l(h)[R]),O(L,"y",l(m)[R]),O(L,"width",l(g)[R]),O(L,"height",l(b)[R])}),S(j,L)}),ce(()=>{pt(C,0,`series ${a()??""}`),bt(C,l(_))}),S(E,C)};W(A,E=>{l(p)&&E(k)})}S(t,w),we()}ft(["click"]);var i1=Ne("<line></line>"),c1=Ne('<g class="series series-segment"></g>');function zn(t,e){_e(e,!0);let r=q(e,"lineColor",19,()=>Rt.PRIMARY),s=q(e,"lineType",3,1),o=q(e,"lineWidth",3,1);const a=y(()=>Ut(e.xStart,"Segments")),c=y(()=>l(a)?Ut(e.yStart,"Segments",l(a).length):null),u=y(()=>l(c)?Ut(e.xEnd,"Segments",l(a).length):null),f=y(()=>l(u)?Ut(e.yEnd,"Segments",l(a).length):null),d=Kt("axes"),v=y(()=>l(a)?_t(l(a),d.tX()):null),h=y(()=>l(u)?_t(l(u),d.tX()):null),m=y(()=>l(c)?_t(l(c),d.tY()):null),g=y(()=>l(f)?_t(l(f),d.tY()):null),b=y(()=>`stroke:${r()};stroke-width: ${o()}px;stroke-dasharray:${Bl[d.scales().plot][s()-1]}`),_=y(()=>l(v)&&l(h)&&l(m)&&l(g));var p=ge(),w=J(p);{var A=k=>{var E=c1();E.__click=C=>In(C,"line",e.onclick),$e(E,21,()=>l(v),nt,(C,j,N)=>{var R=i1();ce(()=>{O(R,"x1",l(v)[N]),O(R,"x2",l(h)[N]),O(R,"y1",l(m)[N]),O(R,"y2",l(g)[N])}),S(C,R)}),ce(()=>bt(E,l(b))),S(k,E)};W(w,k=>{l(_)&&k(A)})}S(t,p),we()}ft(["click"]);var u1=Ne("<text><!></text>"),f1=Ne("<text><!></text>"),d1=Ne("<text><!></text>"),v1=Ne('<g class="series series-textlabels"><!></g>');function ol(t,e){_e(e,!0);let r=q(e,"pos",3,0),s=q(e,"faceColor",19,()=>Rt.PRIMARY_TEXT),o=q(e,"lineColor",3,"transparent"),a=q(e,"lineWidth",3,0),c=q(e,"textSize",3,1),u=q(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],d=y(()=>Ut(e.xValues,"TextLabels")),v=y(()=>l(d)?Ut(e.yValues,"TextLabels",l(d).length):null),h=y(()=>l(v)?Array.isArray(e.labels)&&e.labels.length!==l(v).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=y(()=>l(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Kt("axes"),b=y(()=>l(d)&&l(m)!==null?_t(l(d),g.tX()):null),_=y(()=>l(v)&&l(b)?_t(l(v),g.tY()):null),p=y(()=>Mo[g.scales().plot]),w=y(()=>[0,0,-l(p),0,l(p),l(p)]),A=y(()=>[0,l(p),0,-l(p),0,l(p)]),k=y(()=>`fill:${s()};stroke-width:${a()}px;stroke:${o()};font-size:${c()}em;`),E=y(()=>l(b)&&l(_)&&l(m)!==null&&l(h)&&l(b).length===l(_).length);var C=ge(),j=J(C);{var N=R=>{var L=v1();L.__click=B=>In(B,"text",e.onclick);var T=D(L);{var P=B=>{var V=ge(),z=J(V);$e(z,17,()=>l(b),nt,(G,ae,H)=>{var $=u1();O($,"data-id",H);var le=D($);Ct(le,()=>e.labels,!0),ce(()=>{O($,"x",l(b)[H]),O($,"y",l(_)[H]),O($,"dx",l(w)[r()]),O($,"dy",l(A)[r()]),O($,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[H]+l(w)[r()]}, ${l(_)[H]+l(A)[r()]})`:""),O($,"text-anchor",f[r()[H]])}),S(G,$)}),S(B,V)},M=B=>{var V=ge(),z=J(V);{var G=H=>{var $=ge(),le=J($);$e(le,17,()=>l(b),nt,(Z,ee,se)=>{var ne=f1();O(ne,"data-id",se);var de=D(ne);Ct(de,()=>e.labels[se],!0),ce(()=>{O(ne,"x",l(b)[se]),O(ne,"y",l(_)[se]),O(ne,"dx",l(w)[r()[se]]),O(ne,"dy",l(A)[r()[se]]),O(ne,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[se]+l(w)[r()]}, ${l(_)[se]+l(A)[r()]})`:""),O(ne,"text-anchor",f[r()[se]])}),S(Z,ne)}),S(H,$)},ae=H=>{var $=ge(),le=J($);$e(le,17,()=>l(b),nt,(Z,ee,se)=>{var ne=d1();O(ne,"data-id",se);var de=D(ne);Ct(de,()=>e.labels[se],!0),ce(()=>{O(ne,"x",l(b)[se]),O(ne,"y",l(_)[se]),O(ne,"dx",l(w)[r()]),O(ne,"dy",l(A)[r()]),O(ne,"transform",u()!==void 0?`rotate(${u()}, ${l(b)[se]+l(w)[r()]}, ${l(_)[se]+l(A)[r()]})`:""),O(ne,"text-anchor",f[r()])}),S(Z,ne)}),S(H,$)};W(z,H=>{Array.isArray(r())||ArrayBuffer.isView(r())?H(G):H(ae,!1)},!0)}S(B,V)};W(T,B=>{typeof e.labels=="string"?B(P):B(M,!1)})}ce(()=>bt(L,l(k))),S(R,L)};W(j,R=>{l(E)&&R(N)})}S(t,C),we()}ft(["click"]),ft(["click"]);var h1=Ne("<text> </text>"),m1=Ne('<g text-anchor="middle"></g>');function Bo(t,e){_e(e,!0);let r=q(e,"marker",3,1),s=q(e,"faceColor",3,"transparent"),o=q(e,"lineColor",19,()=>Rt.PRIMARY),a=q(e,"lineWidth",3,1),c=q(e,"markerSize",3,1);const u=y(()=>typeof r()!="number"||r()<1||r()>sl.length?(console.error('Points: parameter "marker" must be a number from 1 to '+sl.length+"."),null):sl[r()-1]),f=y(()=>Ut(e.xValues,"Points")),d=y(()=>l(f)?Ut(e.yValues,"Points",l(f).length):null),v=Kt("axes"),h=y(()=>l(f)?_t(l(f),v.tX()):null),m=y(()=>l(h)&&l(d)?_t(l(d),v.tY()):null),g=y(()=>["＋","✳","✕"].includes(l(u))?`fill:${o()&&o()!=="transparent"?o():s()};stroke-width:0px;font-size:${c()}em;`:`fill:${s()};stroke-width:${a()}px;stroke:${o()}; font-size:${c()}em;`),b=y(()=>["◼","⬥","＋","✳","✕"].includes(l(u))?"series-points2":"series-points1"),_=y(()=>l(h)&&l(m)&&l(h).length===l(m).length);var p=ge(),w=J(p);{var A=k=>{var E=m1();E.__click=C=>In(C,"text",e.onclick),$e(E,21,()=>l(h),nt,(C,j,N)=>{var R=h1(),L=D(R);ce(()=>{O(R,"x",l(h)[N]),O(R,"y",l(m)[N]),Ee(L,l(u))}),S(C,R)}),ce(()=>{pt(E,0,`series series-points ${l(b)??""}`),bt(E,l(g))}),S(k,E)};W(w,k=>{l(_)&&k(A)})}S(t,p),we()}ft(["click"]);var g1=Ne('<g class="series series-line"><polyline class="line"></polyline></g>');function fn(t,e){_e(e,!0);let r=q(e,"lineColor",19,()=>Rt.PRIMARY),s=q(e,"lineType",3,1),o=q(e,"lineWidth",3,1);const a=y(()=>Ut(e.xValues,"Lines")),c=y(()=>l(a)?Ut(e.yValues,"Lines",l(a).length):null),u=Kt("axes"),f=y(()=>l(a)&&l(c)?Lo(l(a),l(c),u.tX(),u.tY()):null),d=y(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Bl[u.scales().plot][s()-1]}`);var v=ge(),h=J(v);{var m=g=>{var b=g1();b.__click=p=>In(p,"polyline",e.onclick);var _=D(b);ce(()=>{bt(b,l(d)),O(_,"points",l(f))}),S(g,b)};W(h,g=>{l(f)&&g(m)})}S(t,v),we()}ft(["click"]);var p1=Ne('<polyline class="line"></polyline>'),b1=Ne('<g class="series series-multiline"></g>');function ec(t,e){_e(e,!0);let r=q(e,"lineColor",19,()=>Rt.PRIMARY),s=q(e,"lineType",3,1),o=q(e,"lineWidth",3,1);const a=y(()=>Ut(e.xValues,"Multilines")),c=y(()=>l(a)?lr(e.yValues)?(l(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),u=Kt("axes"),f=y(()=>{if(!l(a)||!l(c))return null;const g=new Array(l(c).ncols);for(let b=0;b<g.length;b++)g[b]=Lo(l(a),l(c).getcolumn(b+1),u.tX(),u.tY());return g}),d=y(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Bl[u.scales().plot][s()-1]}`);var v=ge(),h=J(v);{var m=g=>{var b=b1();b.__click=_=>In(_,"polyline",e.onclick),$e(b,21,()=>l(f),nt,(_,p)=>{var w=p1();ce(()=>O(w,"points",l(p))),S(_,w)}),ce(()=>bt(b,l(d))),S(g,b)};W(h,g=>{l(f)&&l(f).length>0&&g(m)})}S(t,v),we()}ft(["click"]);function Vo(t,e){_e(e,!0);let r=q(e,"show",3,!0),s=q(e,"position",3,"topleft"),o=q(e,"lineColor",19,()=>Rt.LEGEND),a=q(e,"lineWidth",3,1),c=q(e,"faceColor",3,"#fff"),u=q(e,"fontSize",3,.85);function f(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function d(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let m=0;m<h.length;m++){const g=h[m];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const b=un(g.label),_=b.length===g.label?1:1.4;g.label=b,g.labelHeight=_,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(m+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:Rt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=sl.length||console.error('Legend: parameter "marker" for legend item '+(m+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.markerSize=g.point.markerSize?g.point.markerSize:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:Rt.PRIMARY)}return h}const v=Kt("axes");ye(()=>{const h=d(e.items),m=f(s());v.setGroupLegend(h&&m?{show:r(),position:s(),items:e.items,lineColor:o(),faceColor:c(),lineWidth:a(),fontSize:u()}:{show:!1,position:null,items:null})}),we()}function tc(t,e){_e(e,!0);let r=q(e,"show",3,!0),s=q(e,"labels",3,null),o=q(e,"labelColor",19,()=>Rt.CLEGEND_LABELS),a=q(e,"fontSize",3,.85);const c=Kt("axes");ye(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:o(),fontSize:a()})}),we()}const _1=t=>t;function rc(t,{delay:e=0,duration:r=400,easing:s=_1}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:a=>`opacity: ${a*o}`}}var w1=X('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function Do(t,e){_e(e,!0);let r=q(e,"isDark",3,!1);function s(h){h.key==="Escape"&&e.closeModal()}var o=w1();Sn("keydown",Ds,s);let a;var c=D(o),u=D(c),f=D(u);f.__click=function(...h){var m;(m=e.closeModal)==null||m.apply(this,h)};var d=F(u,2),v=D(d);Wr(v,()=>e.children),ce(()=>a=pt(o,1,"drop svelte-oie633",null,a,{isdark:r()})),si(7,o,()=>rc),S(t,o),we()}ft(["click"]);const y1=[1,1.1,.45,.4],dn={cal:1,pv:2,test:2,new:2},Kr={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},ys={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Vl={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},nc="#808090",Yo="#a0a0a0",lc="#909090",al="#909090",Dl=8,x1=8,E1=8,k1=600;function sc(t,e){return!t||!e||e<0||e>t.ncomp?"":`PC${e} (${(t.stat.expvar[e-1]*100).toFixed(1)}%)`}function A1(t,e){if(t.length===e.length)return t;const r=e.length,s=new t.constructor(r);for(let o in e)s[o]=t[e[o]];return s}function C1(t,e){let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)s=Math.min(s,t[c]),r=Math.max(r,t[c]);let o=Ro(void 0,[s,r],e-1,!0,!1,0).v;const a=o[1]-o[0];if(o[0]>s){const c=o[0]-a;o=[c<s?c:s,...o]}if(o[o.length-1]<r){const c=o[o.length-1]+a;o=[...o,c>r?c:r]}return o}function S1(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=_s(e);return t.reduce((o,a,c)=>(o[a]=r[c],o),{})}function oc(t,e,r){const s=e.length,o=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let u=0;u<s-1;u++){const f=t[c]>=e[u],d=u===s-2?t[c]<e[u+1]+a:t[c]<e[u+1];if(f&&d){o[c]=r[u];break}}return o}function ac(t,e,r,s,o="cal",a){if(!e)return null;let c,u,f,d,v,h,m=!0;if((r==="groups"||r==="classes")&&e.classNames){const g=S1(e.classNames);u=Object.keys(g).map(b=>g[b]),c=e.classNames,d=e.classes.map(b=>g[b]),f=new Array(c.length+1).map((b,_)=>_-.5),v=null}else if(r==="variable"){const g=A1(t.values.getcolref(s),e.objindices);v=t.varlabels[s-1],v.length>30&&(v=v.substring(0,29)+"..."),f=C1(g,10),u=_s(f.length-1),d=oc(g,f,u)}else c=null,f=null,u=null,d=Array(e.nrows).fill(Kr[o]);return{labels:c,map:u,breaks:f,colors:d,varname:v,filled:h,showBar:m,mainColor:Kr[o],faceColor:ys[o],faceTColor:Vl[o]}}function N1(t,e,r=.95){const o=2*Math.PI/99,[a,c,u]=t,f=Math.sqrt((a+u)**2-4*(a*u-c*c));let d=.5*(a+u-f),v=.5*(a+u+f);if(d<v){let N=d;d=v,v=N}const h=Gr(r,2),m=Math.sqrt(h*d),g=Math.sqrt(h*v);let b;if(Math.abs(c)<1e-7)b=0;else{let N=-c/(a-d),R=1;const L=Math.sqrt(N*N+R*R);N=N/L,R=R/L,b=Math.atan2(R,N),b<0&&(b=b+2*Math.PI)}const _=Math.cos(b),p=Math.sin(b),w=Ve.zeros(100),A=Ve.zeros(100);let k=Number.POSITIVE_INFINITY,E=Number.NEGATIVE_INFINITY,C=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY;for(let N=0;N<100;N++){const R=N*o,L=m*Math.cos(R),T=g*Math.sin(R),P=L*_-T*p+e[0],M=L*p+T*_+e[1];w.v[N]=P,A.v[N]=M,k=Math.min(k,P),E=Math.max(E,P),C=Math.min(C,M),j=Math.max(j,M)}return[w,A,k,E,C,j]}function M1(t,e,r,s,o,a){if(!t||!e||!r||!s||!o)return null;const c=t.length,u=s.length,f=new Array(u).fill(0),d=new Array(u*2).fill(0);for(let p=0;p<c;p++){const w=s.indexOf(r[p]);f[w]+=1,d[w*2]+=t.v[p],d[w*2+1]+=e.v[p]}for(let p=0;p<u;p++)d[p*2]=d[p*2]/f[p],d[p*2+1]=d[p*2+1]/f[p];const v=new Array(u*3).fill(0);for(let p=0;p<c;p++){const w=s.indexOf(r[p]),A=t.v[p]-d[w*2],k=e.v[p]-d[w*2+1];v[w*3]+=A*A,v[w*3+1]+=A*k,v[w*3+2]+=k*k}let h=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY;const _=Array(u);for(let p=0;p<u;p++){const[w,A,k,E,C,j]=N1([v[p*3]/(f[p]-1),v[p*3+1]/(f[p]-1),v[p*3+2]/(f[p]-1)],[d[p*2],d[p*2+1]],a);_[p]={x:w,y:A,c:o[p]},h=Math.min(h,k),m=Math.max(m,E),g=Math.min(g,C),b=Math.max(b,j)}return{ellipses:_,xRange:[h,m],yRange:[g,b]}}function xs(t,e,r,s){if(!t||!e)return null;const o=t.length;let a=Ve.zeros(o),c=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(s==="log")for(let f=0;f<o;f++){const d=Math.log(1+t[f]/r);a.v[f]=d,c=Math.max(c,d),u=Math.min(u,d)}else for(let f=0;f<o;f++){const d=t[f]/r;a.v[f]=d,c=Math.max(c,d),u=Math.min(u,d)}return{values:a,min:u,max:c}}function ic(t,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[t]+", "+(e==="log"?"log(1 + "+t+"/"+t+"0)":t+"/"+t+"0")}function cc(t,e,r,s){const a=e+r,u=Gr(t,a)/r,f=-e/r,d=-u/f,v=Ve.seq(0,d*1,d/100),h=v.apply(m=>m*f+u);return{x:s==="log"?v.apply(m=>Math.log(1+m)):v,y:s==="log"?h.apply(m=>Math.log(1+m)):h}}function Wo(t,e=Vl){return t?t.map(r=>({id:r,label:r,point:{marker:dn[r],faceColor:e[r],lineColor:Kr[r],markerSize:dn[r]===1?.85:.65,lineWidth:1.5}})):null}var T1=X("<!> <!> <!> <!>",1);function Fn(t,e){let r=q(e,"whole",3,!1),s=Tn(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);$i(t,nn({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return y1},get pngWidth(){return x1},get pngHeight(){return E1},get pngRes(){return k1}},()=>s,{children:(o,a)=>{var c=T1(),u=J(c);Wr(u,()=>e.children);var f=F(u,2);Fo(f,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var d=F(f,2);qo(d,{showGrid:!0,get label(){return e.yLabel}});var v=F(d,2);Oo(v,{}),S(o,c)},$$slots:{default:!0}}))}var P1=X("<!> <!> <!>",1),j1=X("<!> <!> <!> <!> <!>",1),L1=X("<div><!></div>"),R1=X('<div class="wrapper svelte-1di9qjd"><div class="plot-container svelte-1di9qjd" role="tooltip"><!></div> <div class="msg-select svelte-1di9qjd">click inside the plot to see a variable label</div> <div class="plot-controls svelte-1di9qjd"><div><!></div> <!></div></div>');function uc(t,e){_e(e,!0);let r=q(e,"outliers",19,()=>[]),s=q(e,"model_getter",3,Bt),o=q(e,"res_getter",3,Nr),a=te("residual"),c=te(-1);const u=y(()=>e.res?Object.keys(e.res):null);let f=te(Fe(l(u)?l(u)[0]:null));function d(Z){if(Z.target.tagName!=="rect"){I(c,-1);return}const ee=Array.from(Z.target.parentNode.children).indexOf(Z.target);if(ee<0){I(c,-1);return}l(c)!==ee&&I(c,ee,!0)}const v=y(()=>{if(!e.model)return null;const Z=e.model.nresp?e.model.nresp:0,ee=et(e.model.varvalues.filter((ke,Te)=>Te>=Z)),se=ee.length,ne=(ee.v[1]-ee.v[0])/2,de=(ee.v[se-1]-ee.v[se-2])/2,pe=[ee.v[0],ee.v[se-1]],Re=[pe[0]-ne,pe[1]+de],Me=(pe[1]-pe[0])/se;return{values:ee,lim:Re,width:Me,hwidth:Me*.5}}),h=y(()=>l(v)?l(v).values.apply(Z=>Z-l(v).hwidth):null),m=y(()=>l(f)?e.res[l(f)]:null),g=y(()=>l(m)?new St(o()(l(m),"T"),l(m).nrows,l(m).ncomp):null),b=y(()=>l(m)?new St(o()(l(m),"E"),l(m).nrows,l(m).npred).t():null),_=y(()=>e.model?new St(s()(e.model,"P"),e.model.npred?e.model.npred:e.model.ncols,e.model.ncomp):null),p=y(()=>e.ncomp?Nt.seq(1,e.ncomp):null),w=y(()=>e.ncomp<e.model.ncomp?Nt.seq(e.ncomp+1,e.model.ncomp):null),A=y(()=>l(g)&&l(p)?l(g).subset(null,l(p)):null),k=y(()=>l(g)&&l(p)?l(_).subset(null,l(p)):null),E=y(()=>l(g)&&l(w)?l(g).subset(null,l(w)):null),C=y(()=>l(g)&&l(w)?l(_).subset(null,l(w)):null),j=y(()=>l(A)&&l(k)?ki(l(k),l(A)):null),N=y(()=>l(E)&&l(C)?ki(l(C),l(E)).add(l(b)):l(b)),R=y(()=>l(j)&&l(N)?l(j).add(l(N)):null);let L=y(()=>l(j)?l(j).getcolumn(e.selected+1):null),T=y(()=>l(N)?l(N).getcolumn(e.selected+1):null),P=y(()=>l(R)?l(R).getcolumn(e.selected+1):null),M=y(()=>{if(!l(L)||!l(T)||!l(P))return null;const Z=l(a)==="explained"?{all:l(j),sel:l(L),label:"Explained part, TP^T"}:l(a)==="residual"?{all:l(N),sel:l(T),label:"Residuals, E"}:{all:l(R),sel:l(P),label:"Preprocessed data, X"},ee=ln(Z.all.v),se=ee[1]-ee[0],ne=[ee[0]-se/50,ee[1]+se/12],de=Ve.fill(ee[1],Z.sel.length);return Z.lim=ne,Z.top=de,Z.height=se,Z});const B=y(()=>l(v)&&l(c)>=0?l(v).values.v[l(c)]:null),V=y(()=>l(M)&&l(c)>=0?l(M).sel.v[l(c)]:null),z=y(()=>e.model&&l(c)>=0?e.model.varlabels[l(c)]:null),G=y(()=>l(m)&&e.selected>=0?`Object ${l(m).objlabels[e.selected].replace("_","-")}`:null),ae=y(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var H=ge(),$=J(H);{var le=Z=>{Do(Z,{get closeModal(){return e.closeModal},children:(ee,se)=>{var ne=R1(),de=D(ne);de.__click=d;var pe=D(de);Fn(pe,{get title(){return l(G)},get yLabel(){return l(M).label},get xLabel(){return l(ae)},get limY(){return l(M).lim},get limX(){return l(v).lim},fileName:"plot-contributions",children:(Se,xe)=>{var oe=j1(),ie=J(oe);ec(ie,{get xValues(){return l(v).values},get yValues(){return l(M).all},lineColor:"#e0e0e0"});var re=F(ie,2);{var fe=Oe=>{var Ye=ge(),at=J(Ye);$e(at,17,r,nt,(Qe,Y)=>{{let U=y(()=>l(M).all.getcolumn(l(Y)+1));fn(Qe,{get xValues(){return l(v).values},get yValues(){return l(U)},lineColor:"#ffdd88"})}}),S(Oe,Ye)};W(re,Oe=>{r().length>0&&Oe(fe)})}var be=F(re,2);fn(be,{get xValues(){return l(v).values},get yValues(){return l(M).sel},lineColor:"crimson"});var ve=F(be,2);ws(ve,{get left(){return l(h)},get top(){return l(M).top},get height(){return l(M).height},get width(){return l(v).width},faceColor:"transparent",borderColor:"transparent"});var qe=F(ve,2);{var ze=Oe=>{var Ye=P1(),at=J(Ye);{let U=y(()=>[l(B)]),Q=y(()=>[l(M).top.v[0]]),he=y(()=>[l(z)]);ol(at,{get xValues(){return l(U)},get yValues(){return l(Q)},get labels(){return l(he)},pos:3,textSize:.85})}var Qe=F(at,2);{let U=y(()=>[l(B)]),Q=y(()=>[l(V)]);Bo(Qe,{get xValues(){return l(U)},get yValues(){return l(Q)},faceColor:"crimson",lineColor:"crimson"})}var Y=F(Qe,2);{let U=y(()=>[l(h).v[l(c)]]),Q=y(()=>[l(M).top.v[l(c)]]);ws(Y,{get left(){return l(U)},get top(){return l(Q)},get height(){return l(M).height},get width(){return l(v).width},faceColor:"#ff000015"})}S(Oe,Ye)};W(qe,Oe=>{l(c)>=0&&Oe(ze)})}S(Se,oe)},$$slots:{default:!0}});var Re=F(de,4),Me=D(Re),ke=D(Me);ue(ke,{label:"Show",children:(Se,xe)=>{rt(Se,{id:"type",options:["full","explained","residual"],get value(){return l(a)},set value(oe){I(a,oe,!0)}})},$$slots:{default:!0}});var Te=F(Me,2);{var Pe=Se=>{var xe=L1(),oe=D(xe);ue(oe,{label:"For",children:(ie,re)=>{rt(ie,{id:"type",get options(){return l(u)},get value(){return l(f)},set value(fe){I(f,fe,!0)}})},$$slots:{default:!0}}),S(Se,xe)};W(Te,Se=>{l(u).length>1&&Se(Pe)})}S(ee,ne)},$$slots:{default:!0}})};W($,Z=>{l(v)&&l(M)&&Z(le)})}S(t,H),we()}ft(["click"]);function I1(t,e){let r=0,s=0;t.nresp>0&&(r=new Ve(t.values.v.slice(0,t.nresp*t.values.nrows-1)),s=t.nresp);const o=new St(t.values.v.slice(s*t.values.nrows),t.values.nrows,t.values.ncols-s).t(),a=o.ncols<e?1:Math.round(o.ncols/e),c=Nt.seq(1,o.ncols,a),u=o.subset(null,c),f=r?r.subset(c):null,d=t.classes?t.classes.filter((v,h)=>c.v.includes(h)):null;return{classNames:t.classNames,classes:d,resp:f,values:u,varvalues:t.varvalues.filter((v,h)=>h>=s),varindices:t.varindices.filter((v,h)=>h>=s),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function Uo(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function z1(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}var F1=X('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function Ho(t,e){_e(e,!0);var r=ge(),s=J(r);{var o=c=>{var u=F1(),f=D(u),d=F(f),v=D(d);Ct(v,()=>qf(e.prepmodel)),ce(()=>Ee(f,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),S(c,u)},a=c=>{var u=qu("skipped");S(c,u)};W(s,c=>{e.prepmodel.ml?c(o):c(a,!1)})}S(t,r),we()}var q1=X('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),O1=X('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function B1(t,e){_e(e,!0);var r=ge(),s=J(r);{var o=a=>{ue(a,{name:"info",children:(c,u)=>{var f=O1(),d=J(f),v=F(D(d),3);{var h=p=>{var w=q1(),A=F(J(w),2),k=D(A);ce(()=>{O(A,"title",e.model.fileName),Ee(k,e.model.fileName)}),S(p,w)};W(v,p=>{e.model.fileName&&p(h)})}var m=F(v),g=F(m,3);Ho(g,{get prepmodel(){return e.model}});var b=F(d,2);{var _=p=>{Mr(p,{get onclick(){return e.reset}})};W(b,p=>{e.reset&&p(_)})}ce(()=>Ee(m,` ${e.model.npred??""} `)),S(c,f)},$$slots:{default:!0}})};W(s,a=>{e.model&&a(o)})}S(t,r),we()}var V1=X("<!> <!>",1),D1=X("<p><!></p>"),Y1=X("<!> <!>",1);function W1(t,e){_e(e,!0);let r=q(e,"model",15),s=te(""),o=te("neutral"),a=te("");function c(p){try{const w=JSON.parse(p,ko);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");w.fileName=l(d),r(w),I(o,"success"),I(a,"")}catch(w){console.log(w),r(null),I(o,"error"),I(a,w,!0)}}function u(p){const w=new FileReader;w.onload=()=>{c(w.result)},w.readAsText(l(s))}function f(){I(s,""),r(null),I(o,"neutral"),I(a,"")}ye(()=>{l(s)===null?(r(null),I(o,"neutral"),I(a,"")):(I(o,"neutral"),I(a,""))}),ye(()=>{(r()===null||r()===0)&&I(s,"")});let d=y(()=>l(s)?l(s).name.replace(/\.[^/.]+$/,""):"");var v=Y1(),h=J(v);{var m=p=>{var w=V1(),A=J(w);nl(A,()=>l(s),C=>{ue(C,{name:"file-selector",children:(j,N)=>{ps(j,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(s)},set file(R){I(s,R,!0)}})},$$slots:{default:!0}})});var k=F(A,2);{var E=C=>{ue(C,{name:"load-button",label:" ",children:(j,N)=>{vt(j,{onclick:u,text:"Load"})},$$slots:{default:!0}})};W(k,C=>{l(s)&&C(E)})}S(p,w)},g=p=>{B1(p,{get model(){return r()},reset:f})};W(h,p=>{r()?p(g,!1):p(m)})}var b=F(h,2);{var _=p=>{ue(p,{name:"error",status:"error",children:(w,A)=>{var k=D1(),E=D(k);Ct(E,()=>l(a)),S(w,k)},$$slots:{default:!0}})};W(b,p=>{(l(o)==="error"||l(a))&&p(_)})}S(t,v),we()}var U1=X('<p class="title"> </p>'),H1=X("<!>&nbsp;",1),G1=X("<!> <!>",1),X1=X('<div class="method-open svelte-10os93"><!> <!> <!></div>'),K1=X('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function il(t,e){_e(e,!0);let r=q(e,"cancel",3,null);var s=ge(),o=J(s);{var a=u=>{var f=X1(),d=D(f);ue(d,{children:(m,g)=>{var b=U1(),_=D(b);ce(()=>Ee(_,e.title)),S(m,b)},$$slots:{default:!0}});var v=F(d,2);Wr(v,()=>e.children);var h=F(v,2);ue(h,{label:" ",children:(m,g)=>{var b=G1(),_=J(b);{var p=A=>{var k=H1(),E=J(k);vt(E,{text:"Cancel",get onclick(){return r()}}),S(A,k)};W(_,A=>{r()&&A(p)})}var w=F(_,2);vt(w,{text:"Save",get onclick(){return e.apply}}),S(m,b)},$$slots:{default:!0}}),si(3,f,()=>rc,()=>({duration:10})),S(u,f)},c=u=>{ue(u,{children:(f,d)=>{var v=K1(),h=J(v),m=D(h),g=F(m);g.__click=()=>e.open(e.pos);var b=D(g),_=F(h,2);ld(_,{onclick:()=>e.moveUp(e.pos)});var p=F(_,2);sd(p,{onclick:()=>e.moveDown(e.pos)});var w=F(p,2);Mr(w,{onclick:()=>e.remove(e.pos)}),ce(()=>{Ee(m,`${e.title??""} `),Ee(b,e.settings)}),S(f,v)},$$slots:{default:!0}})};W(o,u=>{e.isOpen?u(a):u(c,!1)})}S(t,s),we()}ft(["click"]);var J1=X("<!> <!>",1);function Q1(t,e){_e(e,!0);let r=q(e,"params",31,()=>Fe([0,0])),s=q(e,"varind",15),o=q(e,"settings",15),a=q(e,"nvars",3,0),c=Tn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const u={snv:0,area:1,length:2,var:3},f=Object.keys(u);let d=te(Fe(f[r()[0]])),v=te(r()[1]+1);const h="Normalization";ye(()=>{o(l(d)+(l(d)==="var"?" #"+l(v):""))}),ye(()=>{l(d)==="var"?s(s()[0]=r()[1]>0?r()[1]:1,!0):s(s()[0]=-1,!0)}),ye(()=>{l(d)==="var"&&e.isOpen?s(s()[0]=r()[1],!0):s(s()[0]=-1,!0)}),ye(()=>{l(d)&&r(r()[0]=u[l(d)],!0)}),ye(()=>{l(v)&&r(r()[1]=l(v)-1,!0)}),il(t,nn({id:"norm",title:h,get settings(){return o()},get isOpen(){return e.isOpen}},()=>c,{children:(m,g)=>{var b=J1(),_=J(b);ue(_,{label:"Type",children:(A,k)=>{rt(A,{get options(){return f},get value(){return l(d)},set value(E){I(d,E,!0)}})},$$slots:{default:!0}});var p=F(_,2);{var w=A=>{ue(A,{label:"Variable index",children:(k,E)=>{sr(k,{min:1,get max(){return a()},step:1,get value(){return l(v)},set value(C){I(v,C,!0)}})},$$slots:{default:!0}})};W(p,A=>{l(d)==="var"&&A(w)})}S(m,b)},$$slots:{default:!0}})),we()}var Z1=X("<!> <!> <!>",1);function $1(t,e){_e(e,!0);let r=q(e,"params",31,()=>Fe([3,1,0])),s=q(e,"settings",15),o=Tn(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const a=y(()=>{if(!e.nvars)return 3;const d=Math.round(e.nvars*.25);return d>39?39:d%2<1?d+1:d}),c=y(()=>r()[1]<2?[0,1]:[0,1,2]),u=y(()=>r()[0]<5?[1,2]:[1,2,3]);ye(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),ye(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),ye(()=>{s(r()[0]+", "+r()[1]+", "+r()[2])}),il(t,nn({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>o,{children:(d,v)=>{var h=Z1(),m=J(h);ue(m,{label:"Width",children:(_,p)=>{sr(_,{min:3,get max(){return l(a)},step:2,get value(){return r()[0]},set value(w){r(r()[0]=w,!0)}})},$$slots:{default:!0}});var g=F(m,2);ue(g,{label:"Polynomial",children:(_,p)=>{rt(_,{get options(){return l(u)},get value(){return r()[1]},set value(w){r(r()[1]=w,!0)}})},$$slots:{default:!0}});var b=F(g,2);ue(b,{label:"Derivative",children:(_,p)=>{rt(_,{get options(){return l(c)},get value(){return r()[2]},set value(w){r(r()[2]=w,!0)}})},$$slots:{default:!0}}),S(d,h)},$$slots:{default:!0}})),we()}var eh=X("<!> <!>",1);function th(t,e){_e(e,!0);let r=q(e,"params",31,()=>Fe([1,0]));q(e,"varind",27,()=>-1);let s=q(e,"settings",15);q(e,"nvars",3,0);let o=Tn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},u=Object.keys(a),f=Object.keys(c);let d=te(Fe(u[r()[0]])),v=te(Fe(f[r()[1]]));const h="Scaling";ye(()=>{s(l(d)+"/"+l(v))}),ye(()=>{l(d)&&r(r()[0]=a[l(d)],!0)}),ye(()=>{l(v)&&r(r()[1]=c[l(v)],!0)}),il(t,nn({id:"scale",title:h,get settings(){return s()}},()=>o,{children:(m,g)=>{var b=eh(),_=J(b);ue(_,{label:"Center",children:(w,A)=>{rt(w,{get options(){return u},get value(){return l(d)},set value(k){I(d,k,!0)}})},$$slots:{default:!0}});var p=F(_,2);ue(p,{label:"Scale",children:(w,A)=>{rt(w,{get options(){return f},get value(){return l(v)},set value(k){I(v,k,!0)}})},$$slots:{default:!0}}),S(m,b)},$$slots:{default:!0}})),we()}var rh=X("<!> <!> <!>",1),nh=X("<!> <!> <!>",1);function lh(t,e){_e(e,!0);let r=q(e,"params",31,()=>Fe([0,1,.1]));q(e,"varind",27,()=>-1);let s=q(e,"settings",15,"");q(e,"nvars",3,0);let o=Tn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Baseline correction",c={emsc:0,als:1},u=Object.keys(c);function f(b){const _=Math.ceil(Math.log10(b));return Math.pow(10,_)}let d=te(Fe(u[r()[0]])),v=te(Fe(r()[2]>0?f(r()[2]).toString():"0.1")),h=y(()=>parseFloat(l(v))),m=y(()=>l(h)/10),g=y(()=>Math.ceil(-Math.log10(l(h)))+1);ye(()=>{if(l(d)!=="als")return;const b=parseFloat(l(v));(r()[2]<l(m)||r()[2]>b-l(m))&&r(r()[2]=l(m),!0)}),ye(()=>{s(l(d)+" ("+(l(d)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),ye(()=>{l(d)&&r(r()[0]=c[l(d)],!0)}),il(t,nn({id:"scale",title:a,get settings(){return s()}},()=>o,{children:(b,_)=>{var p=nh(),w=J(p);ue(w,{label:"Type",children:(j,N)=>{rt(j,{get options(){return u},get value(){return l(d)},set value(R){I(d,R,!0)}})},$$slots:{default:!0}});var A=F(w,2);{var k=j=>{var N=rh(),R=J(N);ue(R,{label:"Lambda",children:(P,M)=>{Ol(P,{min:1,max:7,step:.1,get value(){return r()[1]},set value(B){r(r()[1]=B,!0)}})},$$slots:{default:!0}});var L=F(R,2);ue(L,{label:"Penalty range",children:(P,M)=>{rt(P,{options:["1","0.1","0.01"],get value(){return l(v)},set value(B){I(v,B,!0)}})},$$slots:{default:!0}});var T=F(L,2);ue(T,{label:"Penalty",children:(P,M)=>{{let B=y(()=>l(h)-l(m));Ol(P,{get min(){return l(m)},get max(){return l(B)},get step(){return l(m)},get decNum(){return l(g)},get value(){return r()[2]},set value(V){r(r()[2]=V,!0)}})}},$$slots:{default:!0}}),S(j,N)};W(A,j=>{l(d)==="als"&&j(k)})}var E=F(A,2);{var C=j=>{ue(j,{label:"Polynomial",children:(N,R)=>{sr(N,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(L){r(r()[1]=L,!0)}})},$$slots:{default:!0}})};W(E,j=>{l(d)==="emsc"&&j(C)})}S(b,p)},$$slots:{default:!0}})),we()}var sh=X("<!> <!>",1);function oh(t,e){_e(e,!0);let r=q(e,"params",15),s=q(e,"varind",15),o=q(e,"settings",15),a=Tn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let u=te(!1);const f=y(()=>e.nvars?Math.round(e.nvars*.1):1);ye(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-l(f))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+l(f))&&r(r()[1]=e.right,!0),s(s()[1]=r()[0],!0),s(s()[2]=r()[1],!0),I(u,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),I(u,!1))}),ye(()=>{o("left: "+r()[0]+" right: "+r()[1])}),il(t,nn({id:"norm",title:c,get settings(){return o()},get isOpen(){return e.isOpen}},()=>a,{children:(d,v)=>{var h=ge(),m=J(h);{var g=b=>{var _=sh(),p=J(_);ue(p,{label:"Left",children:(A,k)=>{{let E=y(()=>e.right-l(f));Ol(A,{get min(){return e.left},get max(){return l(E)},step:1,decNum:0,get value(){return r()[0]},set value(C){r(r()[0]=C,!0)}})}},$$slots:{default:!0}});var w=F(p,2);ue(w,{label:"Right",children:(A,k)=>{{let E=y(()=>e.left+l(f));Ol(A,{get min(){return l(E)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(C){r(r()[1]=C,!0)}})}},$$slots:{default:!0}}),S(b,_)};W(m,b=>{l(u)&&b(g)})}S(d,h)},$$slots:{default:!0}})),we()}var ah=X("<!> <!>",1);function ih(t,e){_e(e,!0);let r=q(e,"params",31,()=>Fe([3,5]));q(e,"varind",27,()=>-1);let s=q(e,"settings",15);q(e,"nvars",3,0);let o=Tn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Spike removal";ye(()=>{s(r()[0]+"/"+r()[1])}),il(t,nn({id:"scale",title:a,get settings(){return s()}},()=>o,{children:(c,u)=>{var f=ah(),d=J(f);ue(d,{label:"Window",children:(h,m)=>{sr(h,{min:3,max:15,step:2,get value(){return r()[0]},set value(g){r(r()[0]=g,!0)}})},$$slots:{default:!0}});var v=F(d,2);ue(v,{label:"Threshold",children:(h,m)=>{sr(h,{min:3,max:50,get value(){return r()[1]},set value(g){r(r()[1]=g,!0)}})},$$slots:{default:!0}}),S(c,f)},$$slots:{default:!0}})),we()}var ch=X("<h2>Selected methods</h2> <!>",1),uh=X("<p>No methods selected</p>"),fh=X("<p> </p>"),dh=X("<h2>Available methods</h2>"),vh=X("<p>Maximum number of methods is selected.</p>"),hh=X("<p> </p> <!>",1),mh=X('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function gh(t,e){_e(e,!0);let r=q(e,"prepobj",31,()=>Fe([])),s=q(e,"meta",15),o=q(e,"varind",31,()=>-1),a=q(e,"rawdataShort",15),c=q(e,"prepdataShort",15),u=q(e,"prepmodel",3,null),f=q(e,"reset",3,null),d=q(e,"finalize",3,null);const v=30,h=8,m={savgol:$1,norm:Q1,scale:th,baseline:lh,trim:oh,spikes:ih};let g=te("neutral"),b=te(""),_=te(void 0),p=te(""),w=te(Fe([])),A=te(!1),k=te(Fe([])),E=te(Fe([]));s(new Array(h).fill(""));const C=y(()=>e.rawdata.values.ncols-e.rawdata.nresp);let j=Fe(e.rawdata.values.nrows<3?Object.keys(m).filter(oe=>oe!=="scale"):Object.keys(m));R(),r().length!==0&&N();async function N(){r().length!==0&&I(_,e.WASM().then(oe=>{I(g,"applying");const ie=ji(oe,a().values,0,r(),!0,[]),re=wo(oe,a().values,0,ie,!0);c(Uo(a(),re)),I(g,"success")}).catch(oe=>{c(Uo(a())),console.error(oe),I(g,"error"),I(b,oe,!0)}),!0)}function R(){const oe=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(oe),I(k,[],!0),I(E,[],!0);return}let ie=[],re=[],fe=0,be=oe;for(let ve of r())ve.id==="trim"?(ie.push(fe),re.push(be),ve.params[0]<fe&&(ve.params[0]=fe),ve.params[1]>be&&(ve.params[1]=be),fe=ve.params[0]>fe?ve.params[0]:fe,be=ve.params[1]>0&&ve.params[1]<be?ve.params[1]:be):(ie.push(fe),re.push(be));I(k,ie,!0),I(E,re,!0),e.setLeft(fe),e.setRight(be)}function L(oe){const ie=cn.find(re=>re.id===oe);ie&&(l(k).push(e.left),l(E).push(e.right),r().push({id:ie.id,params:ie.mp}),I(A,!0),I(p,r().length-1))}function T(){r().length<1||(l(k).pop(),l(E).pop(),r().pop(),I(A,!1),I(p,-1))}function P(oe){if(oe<=0)return;const ie=r()[oe],re=r()[oe-1];r(r()[oe-1]=ie,!0),r(r()[oe]=re,!0),G()}function M(oe){if(oe<0||oe===r().length-1)return;const ie=r()[oe],re=r()[oe+1];r(r()[oe+1]=ie,!0),r(r()[oe]=re,!0),G()}function B(oe){oe<0||oe>=r().length||(r(r().filter((ie,re)=>re!==oe)),G())}function V(oe){I(p,oe,!0)}function z(){I(p,null)}function G(){I(g,"neutral"),I(b,""),I(A,!1),I(p,null),u()&&f()(),R(),N(),o(o()[1]=-1,!0),o(o()[2]=-1,!0)}ye(()=>{e.rawdata&&!a()&&a(I1(e.rawdata,v))}),ye(()=>{a()&&!c()&&c(Uo(a()))}),ye(()=>{(!r()||r().length===0)&&(I(w,[],!0),c(null),I(k,[],!0),I(E,[],!0),I(p,""),s(new Array(h).fill("")))});var ae=mh(),H=J(ae);let $;var le=D(H);ue(le,{label:"",children:(oe,ie)=>{var re=ch(),fe=F(J(re),2);{var be=ve=>{qi(ve,{text:"edit",get onclick(){return f()}})};W(fe,ve=>{u()&&f()&&ve(be)})}S(oe,re)},$$slots:{default:!0}});var Z=F(le,2);{var ee=oe=>{ue(oe,{label:"",children:(ie,re)=>{var fe=uh();S(ie,fe)},$$slots:{default:!0}})},se=oe=>{var ie=ge(),re=J(ie);$e(re,17,r,nt,(fe,be,ve)=>{const qe=y(()=>m[l(be).id]);var ze=ge(),Oe=J(ze);{var Ye=Qe=>{var Y=ge(),U=J(Y);{let Q=y(()=>ve===l(p)),he=y(()=>l(A)?T:null);Rl(U,()=>l(qe),(me,je)=>{je(me,{get isOpen(){return l(Q)},get left(){return l(k)[ve]},get right(){return l(E)[ve]},pos:ve,get nvars(){return l(C)},moveUp:P,moveDown:M,apply:G,open:V,close:z,remove:B,get cancel(){return l(he)},get params(){return l(be).params},set params(Be){l(be).params=Be},get varind(){return o()},set varind(Be){o(Be)},get settings(){return s()[ve]},set settings(Be){s(s()[ve]=Be,!0)}})})}S(Qe,Y)},at=Qe=>{var Y=ge(),U=J(Y);{let Q=y(()=>ve===l(p)),he=y(()=>l(A)?T:null);Rl(U,()=>l(qe),(me,je)=>{je(me,{pos:ve,get isOpen(){return l(Q)},get left(){return l(k)[ve]},get right(){return l(E)[ve]},get nvars(){return l(C)},moveUp:P,moveDown:M,apply:G,open:V,close:z,remove:B,get cancel(){return l(he)},get params(){return l(be).params},set params(Be){l(be).params=Be},get settings(){return s()[ve]},set settings(Be){s(s()[ve]=Be,!0)}})})}S(Qe,Y)};W(Oe,Qe=>{l(be).id==="norm"||l(be).id==="trim"?Qe(Ye):Qe(at,!1)})}S(fe,ze)}),S(oe,ie)};W(Z,oe=>{r().length===0?oe(ee):oe(se,!1)})}var ne=F(Z,2);{var de=oe=>{ue(oe,{status:"error",children:(ie,re)=>{var fe=fh(),be=D(fe);ce(()=>Ee(be,l(b))),S(ie,fe)},$$slots:{default:!0}})};W(ne,oe=>{(l(g)==="error"||l(b))&&oe(de)})}var pe=F(H,2),Re=D(pe);{var Me=oe=>{ue(oe,{label:" ",children:(ie,re)=>{vt(ie,{get onclick(){return d()},text:"Finalize"})},$$slots:{default:!0}})};W(Re,oe=>{!u()&&!l(p)&&r().length>0&&oe(Me)})}var ke=F(pe,2),Te=D(ke);ue(Te,{label:"",children:(oe,ie)=>{var re=dh();S(oe,re)},$$slots:{default:!0}});var Pe=F(Te,2);{var Se=oe=>{ue(oe,{label:"",children:(ie,re)=>{var fe=vh();S(ie,fe)},$$slots:{default:!0}})},xe=oe=>{var ie=ge(),re=J(ie);$e(re,17,()=>j,nt,(fe,be)=>{const ve=y(()=>cn.find(qe=>qe.id===l(be)));ue(fe,{children:(qe,ze)=>{var Oe=hh(),Ye=J(Oe),at=D(Ye),Qe=F(Ye,2);nd(Qe,{onclick:()=>L(l(ve).id)}),ce(()=>Ee(at,l(ve).title)),S(qe,Oe)},$$slots:{default:!0}})}),S(oe,ie)};W(Pe,oe=>{r().length>=h?oe(Se):oe(xe,!1)})}ce(()=>$=pt(H,1,"selected-methods-list svelte-9cg1zq",null,$,{final:u()!==null&&u()!==void 0})),S(t,ae),we()}var ph=X("<!> <!>",1),bh=X("<!> <!>",1),_h=X("<!> <!>",1),wh=X("<!> <!> <!> <!> <!> <!> <!> <!>",1),yh=X("<h2>Plot settings</h2>"),xh=X('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),Eh=X('<div class="plot-panel svelte-5p9gcx"><!></div>');function kh(t,e){_e(e,!0);let r=te(!0),s=te("none"),o=te(!1);const a=y(()=>(l(r)?"Preprocessed":"Raw")+" data (selected rows)"),c=y(()=>l(r)&&e.prepdata?e.prepdata:e.rawdata),u=y(()=>l(c)?l(c).varaxisLabel:"Variables"),f=y(()=>e.rawdata.varaxisUnits),d=y(()=>e.left>=0||e.right>0&&e.right<l(c).values.nrows),v=y(()=>e.left>=0?e.left+1:1),h=y(()=>e.right>0&&e.right<l(c).values.nrows?e.right:l(c).values.nrows),m=y(()=>l(r)&&l(c)&&l(d)?Nt.seq(l(v),l(h)):null),g=y(()=>l(m)?l(c).varvalues.filter((R,L)=>L>=l(v)-1&&L<l(h)):l(c).varvalues),b=y(()=>l(m)?l(c).values.subset(l(m),null):l(c).values),_=y(()=>l(b)?lo(l(b).v):null),p=y(()=>l(_)?(l(_)[1]-l(_)[0])*.05:null),w=y(()=>l(_)?[l(_)[0],l(_)[1]+(l(s)!=="none")*l(p)]:[0,1]),A=y(()=>l(c)?lo(l(c).varvalues,l(o)?.005:.1):[0,1]),k=y(()=>l(o)&&l(d)?[l(c).varvalues[l(v)-1],l(c).varvalues[l(h)-1]]:l(A)),E=y(()=>{if(!e.rawdata)return null;const R={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const L=_s(e.rawdata.classNames.length);R.groups={colors:e.rawdata.classes.map(T=>L[e.rawdata.classNames.findIndex(P=>P===T)]),breaks:Xr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:L}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const L=ci(e.rawdata.resp,8),T=_s(L.length-1);R.response={colors:oc(e.rawdata.resp.v,L.v,T),labels:null,breaks:L,map:T}}return R});ye(()=>{(e.left<1||e.right<1||e.right>=e.left)&&I(o,!1)});var C=Eh(),j=D(C);{var N=R=>{var L=xh(),T=J(L),P=D(T),M=D(P);$i(M,{get title(){return l(a)},get limY(){return l(w)},get limX(){return l(k)},fileName:"plot-preprocessed",children:(le,Z)=>{var ee=wh(),se=J(ee);{var ne=re=>{ec(re,{get xValues(){return l(g)},get yValues(){return l(b)}})},de=re=>{var fe=ge(),be=J(fe);$e(be,17,()=>l(E)[l(s)].colors,nt,(ve,qe,ze)=>{{let Oe=y(()=>l(b).getcolumn(ze+1));fn(ve,{get xValues(){return l(g)},get yValues(){return l(Oe)},get lineColor(){return l(qe)}})}}),S(re,fe)};W(se,re=>{l(s)==="none"?re(ne):re(de,!1)})}var pe=F(se,2);{var Re=re=>{const fe=y(()=>l(c).varvalues[e.varind[0]]);var be=ph(),ve=J(be);{let ze=y(()=>[l(fe),l(fe)]);fn(ve,{get xValues(){return l(ze)},get yValues(){return l(w)},lineColor:"#00000060"})}var qe=F(ve,2);{let ze=y(()=>[l(fe)]),Oe=y(()=>[l(w)[1]-l(p)*(l(s)==="none"?1:2)]),Ye=y(()=>un(l(fe).toFixed(2)+" "+l(f)));ol(qe,{get xValues(){return l(ze)},get yValues(){return l(Oe)},get labels(){return l(Ye)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(re,be)};W(pe,re=>{e.varind&&e.varind[0]>0&&re(Re)})}var Me=F(pe,2);{var ke=re=>{const fe=y(()=>l(c).varvalues[e.varind[1]]);var be=bh(),ve=J(be);{let ze=y(()=>[l(k)[0]]),Oe=y(()=>[l(c).varvalues[e.varind[1]]-l(k)[0]]),Ye=y(()=>[l(w)[1]]),at=y(()=>[l(w)[1]-l(w)[0]]);ws(ve,{get left(){return l(ze)},get width(){return l(Oe)},get top(){return l(Ye)},get height(){return l(at)},lineColor:"transparent",faceColor:"#00000040"})}var qe=F(ve,2);{let ze=y(()=>[l(fe)]),Oe=y(()=>[l(w)[1]-l(p)*(l(s)==="none"?1:2)]),Ye=y(()=>un(l(fe).toFixed(2)+" "+l(f)));ol(qe,{get xValues(){return l(ze)},get yValues(){return l(Oe)},get labels(){return l(Ye)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(re,be)};W(Me,re=>{e.varind&&e.varind[1]>0&&re(ke)})}var Te=F(Me,2);{var Pe=re=>{const fe=y(()=>l(c).varvalues[e.varind[2]-1]);var be=_h(),ve=J(be);{let ze=y(()=>[l(c).varvalues[e.varind[2]-1]]),Oe=y(()=>[l(k)[1]-l(c).varvalues[e.varind[2]-1]]),Ye=y(()=>[l(w)[1]]),at=y(()=>[l(w)[1]-l(w)[0]]);ws(ve,{get left(){return l(ze)},get width(){return l(Oe)},get top(){return l(Ye)},get height(){return l(at)},lineColor:"transparent",faceColor:"#00000040"})}var qe=F(ve,2);{let ze=y(()=>[l(fe)]),Oe=y(()=>[l(w)[1]-l(p)*(l(s)==="none"?1:2)]),Ye=y(()=>un(l(fe).toFixed(2)+" "+l(f)));ol(qe,{get xValues(){return l(ze)},get yValues(){return l(Oe)},get labels(){return l(Ye)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(re,be)};W(Te,re=>{e.varind&&e.varind[2]<l(c).varvalues.length&&e.varind[2]>0&&re(Pe)})}var Se=F(Te,2);{let re=y(()=>l(s)!=="none");tc(Se,{get show(){return l(re)},get labels(){return l(E)[l(s)].labels},get breaks(){return l(E)[l(s)].breaks},get colmap(){return l(E)[l(s)].map}})}var xe=F(Se,2);Fo(xe,{get label(){return l(u)},showGrid:!0});var oe=F(xe,2);qo(oe,{showGrid:!0});var ie=F(oe,2);Oo(ie,{}),S(le,ee)},$$slots:{default:!0}});var B=F(T,2),V=D(B);ue(V,{label:"",children:(le,Z)=>{var ee=yh();S(le,ee)},$$slots:{default:!0}});var z=F(V,2);ue(z,{label:"Show",children:(le,Z)=>{Zt(le,{options:["raw","preprocessed"],get value(){return l(r)},set value(ee){I(r,ee,!0)}})},$$slots:{default:!0}});var G=F(z,2);{var ae=le=>{ue(le,{label:"Color by",children:(Z,ee)=>{{let se=y(()=>Object.keys(l(E)));rt(Z,{get options(){return l(se)},get value(){return l(s)},set value(ne){I(s,ne,!0)}})}},$$slots:{default:!0}})};W(G,le=>{Object.keys(l(E)).length>1&&le(ae)})}var H=F(G,2);{var $=le=>{ue(le,{label:"Zoom (x-axis)",children:(Z,ee)=>{Zt(Z,{options:["off","on"],get value(){return l(o)},set value(se){I(o,se,!0)}})},$$slots:{default:!0}})};W(H,le=>{e.left>0&&e.right>e.left&&le($)})}S(R,L)};W(j,R=>{l(g)&&l(b)&&R(N)})}S(t,C),we()}var Ah=X('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function Ch(t,e){_e(e,!0);let r=q(e,"left",15),s=q(e,"right",15),o=q(e,"prepobj",15),a=q(e,"meta",15),c=q(e,"finalize",3,null),u=te(Fe([-1,0,0])),f=te(null),d=te(null);function v(k){const E=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&k>=0&&k<E&&k<s()&&r(k)}function h(k){const E=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&k<=E&&k>r()&&s(k)}var m=Ah(),g=D(m),b=D(g),_=D(b);gh(_,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return r()},get right(){return s()},setLeft:v,",":!0,setRight:h,get finalize(){return c()},get varind(){return l(u)},set varind(k){I(u,k,!0)},get prepobj(){return o()},set prepobj(k){o(k)},get rawdataShort(){return l(f)},set rawdataShort(k){I(f,k,!0)},get prepdataShort(){return l(d)},set prepdataShort(k){I(d,k,!0)},get meta(){return a()},set meta(k){a(k)}});var p=F(g,2),w=D(p);{var A=k=>{kh(k,{get rawdata(){return l(f)},get prepdata(){return l(d)},get left(){return r()},get right(){return s()},get varind(){return l(u)}})};W(w,k=>{l(f)&&k(A)})}S(t,m),we()}var Sh=X('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),Nh=X("<!> <!> <!>",1),Mh=X('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),Th=X("<!> <!> <!>",1),Ph=X("<p><strong>Preprocessing model</strong></p>"),jh=X("<!> <!>",1),Lh=X("<p> </p>"),Rh=X('<div class="prep-widget"><!></div> <!> <!>',1);function Ih(t,e){_e(e,!0);let r=q(e,"prepType",15),s=q(e,"prepobj",15),o=q(e,"prepdata",15),a=q(e,"prepmodel",15),c=q(e,"prepmeta",15),u=te(!1),f=te(0),d=te(Fe(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),v=te("neutral"),h=te(""),m=te(void 0);async function g(M,B,V){!B||!M||B.length===0||I(m,e.WASM().then(z=>{I(v,"applying");const G=ji(z,M.values,M.nresp,B,!1,V);G.info=c(),a(G)}).catch(z=>{a(null),console.error(z),I(v,"error"),I(h,z,!0)}),!0)}async function b(M,B){if(!B||typeof B!="object"){o(null);return}if(Object.keys(B).length===0){o(M);return}I(m,e.WASM().then(V=>{I(v,"applying");const z=wo(V,M.values,M.nresp,B,!1,!1),G=z1(lu(M),z);o(Of(G,B))}).catch(V=>{o(null),console.error(V),I(v,"error"),I(h,V,!0)}),!0)}function _(){r(null),o(null),a(null),s([]),I(f,0),I(d,e.rawdata.values.ncols-e.rawdata.nresp)}function p(){s()&&s().length>0?g(e.rawdata,s(),e.outliers):(r(null),a(null)),I(u,!1)}function w(){r("create"),o(null),a(null),I(u,!0)}function A(){r("skip"),a({})}ye(()=>{a(),e.rawdata&&b(e.rawdata,a())}),ye(()=>{r()==="create"&&s()&&!a()&&g(e.rawdata,s(),e.outliers)}),ye(()=>{r()==="skip"&&o()===null&&(a({}),s([]),o(e.rawdata))});var k=Rh(),E=J(k),C=D(E);{var j=M=>{ue(M,{name:"info",children:(B,V)=>{var z=Nh(),G=J(z);{var ae=Z=>{var ee=Sh(),se=F(D(ee),2);Ho(se,{get prepmodel(){return a()}}),S(Z,ee)};W(G,Z=>{l(u)||Z(ae)})}var H=F(G,2);{var $=Z=>{qi(Z,{onclick:w})};W(H,Z=>{r()==="create"&&Z($)})}var le=F(H,2);Mr(le,{onclick:_}),S(B,z)},$$slots:{default:!0}})},N=M=>{var B=ge(),V=J(B);{var z=ae=>{ue(ae,{name:"prep-info",children:(H,$)=>{var le=Mh(),Z=F(J(le),2),ee=D(Z);Mr(ee,{onclick:_}),S(H,le)},$$slots:{default:!0}})},G=ae=>{var H=ge(),$=J(H);{var le=ee=>{ue(ee,{label:"Preprocessing",name:"prep-container",children:(se,ne)=>{var de=Th(),pe=J(de);vt(pe,{text:"Skip",onclick:A});var Re=F(pe,2);vt(Re,{text:"Load",onclick:()=>r("file")});var Me=F(Re,2);vt(Me,{text:"Create",onclick:w}),S(se,de)},$$slots:{default:!0}})},Z=ee=>{var se=ge(),ne=J(se);{var de=pe=>{var Re=jh(),Me=J(Re);ue(Me,{children:(Te,Pe)=>{var Se=Ph();S(Te,Se)},$$slots:{default:!0}});var ke=F(Me,2);W1(ke,{get model(){return a()},set model(Te){a(Te)},get prepobj(){return s()},set prepobj(Te){s(Te)},get left(){return l(f)},set left(Te){I(f,Te,!0)},get right(){return l(d)},set right(Te){I(d,Te,!0)}}),S(pe,Re)};W(ne,pe=>{r()==="file"&&pe(de)},!0)}S(ee,se)};W($,ee=>{r()?ee(Z,!1):ee(le)},!0)}S(ae,H)};W(V,ae=>{r()==="skip"?ae(z):ae(G,!1)},!0)}S(M,B)};W(C,M=>{a()&&o()&&a().ml?M(j):M(N,!1)})}var R=F(E,2);{var L=M=>{Do(M,{closeModal:p,isDark:!0,children:(B,V)=>{Ch(B,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:p,get prepobj(){return s()},set prepobj(z){s(z)},get left(){return l(f)},set left(z){I(f,z,!0)},get right(){return l(d)},set right(z){I(d,z,!0)},get meta(){return c()},set meta(z){c(z)}})},$$slots:{default:!0}})};W(R,M=>{l(u)&&M(L)})}var T=F(R,2);{var P=M=>{ue(M,{status:"error",children:(B,V)=>{var z=Lh(),G=D(z);ce(()=>Ee(G,l(h))),S(B,z)},$$slots:{default:!0}})};W(T,M=>{(l(v)==="error"||l(h))&&M(P)})}S(t,k),we()}var zh=X('<div class="msg-select"> </div>'),Fh=X('<div class="msg-select"> </div>'),qh=X('<div class="msg-select"> </div>'),Oh=X('<div class="msg-select"> </div>'),Bh=X('<div class="selected-buttons svelte-188sk7n"><!></div>'),Vh=X('<div class="selected-buttons svelte-188sk7n"><!></div>'),Dh=X("<!> <!> <!>",1),Yh=X("<button> </button>"),Wh=X('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function fc(t,e){_e(e,!0);let r=q(e,"selobjText",3,"Click to select an object..."),s=q(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),o=q(e,"clearText",3,"Click anywhere to remove selection..."),a=q(e,"params",15),c=Fe({objects:-1,variables:[]}),u=te(Fe(Object.keys(e.plots)[0]));function f(L,T){c.objects=T?T[L]:L}function d(L){c.objects=-1}function v(L){c.variables=L}function h(L){c.variables=[]}let m={objects:{select:f,unselect:d},variables:{select:v,unselect:h},stats:{}},g=y(()=>l(u)?e.plots[l(u)]:null),b=y(()=>l(g)?l(g).component:null);var _=Wh(),p=D(_),w=D(p),A=D(w);Rl(A,()=>l(b),(L,T)=>{T(L,{get params(){return a()[l(u)]},get callbacks(){return m[l(g).scope]},get selected(){return c[l(g).scope]},get props(){return e.props}})});var k=F(w,2),E=D(k);{var C=L=>{var T=ge(),P=J(T);{var M=V=>{var z=zh(),G=D(z);ce(()=>Ee(G,r())),S(V,z)},B=V=>{var z=Fh(),G=D(z);ce(()=>Ee(G,o())),S(V,z)};W(P,V=>{c[l(g).scope]<0?V(M):V(B,!1)})}S(L,T)};W(E,L=>{l(g).scope==="objects"&&a()[l(u)].plotType!=="l"&&r().length>0&&L(C)})}var j=F(E,2);{var N=L=>{var T=ge(),P=J(T);{var M=V=>{var z=qh(),G=D(z);ce(()=>Ee(G,s())),S(V,z)},B=V=>{var z=Oh(),G=D(z);ce(()=>Ee(G,o())),S(V,z)};W(P,V=>{c[l(g).scope].length===0?V(M):V(B,!1)})}S(L,T)};W(j,L=>{l(g).scope==="variables"&&a()[l(u)].plotType!=="l"&&s().length>0&&L(N)})}var R=F(p,2);$e(R,21,()=>Object.keys(e.plots),nt,(L,T)=>{var P=ge(),M=J(P);{var B=z=>{var G=Dh(),ae=J(G);Ed(ae,{get title(){return l(g).label},labelWidth:12,get options(){return e.controls[l(u)]},get value(){return a()[l(u)]},set value(ee){a(a()[l(u)]=ee,!0)}});var H=F(ae,2);{var $=ee=>{var se=Bh(),ne=D(se);Wr(ne,()=>l(g).buttons,()=>c.objects),S(ee,se)};W(H,ee=>{l(g).scope==="objects"&&l(g).buttons&&c.objects>=0&&ee($)})}var le=F(H,2);{var Z=ee=>{var se=Vh(),ne=D(se);Wr(ne,()=>l(g).buttons,()=>c.variables),S(ee,se)};W(le,ee=>{l(g).scope==="variables"&&l(g).buttons&&c.variables.length>0&&ee(Z)})}S(z,G)},V=z=>{var G=Yh();G.__keydown=()=>switchPlot(i),G.__click=()=>I(u,l(T),!0);var ae=D(G);ce(()=>{pt(G,1,`plot-selector plot-selector-${l(T)??""}`,"svelte-188sk7n"),Ee(ae,e.plots[l(T)].label)}),S(z,G)};W(M,z=>{l(g)&&l(u)===l(T)?z(B):z(V,!1)})}S(L,P)}),S(t,_),we()}ft(["keydown","click"]);var Uh=Ne("<text> </text>"),Hh=Ne('<g class="series series-textlabels"></g>'),Gh=Ne('<g class="series series-line"><polyline class="line"></polyline></g>'),Xh=Ne("<rect></rect>"),Kh=Ne('<g class="series series-bar"></g>'),Jh=Ne("<text> </text>"),Qh=Ne('<g class="series series-points series-points1"></g>'),Zh=Ne('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),$h=Ne('<g class="series series-points series-points1"><text> </text></g>'),e0=Ne('<g class="series series-bar"><rect></rect></g>'),t0=Ne('<g class="series series-text"><text> </text></g>'),r0=Ne("<!><!><!>",1),n0=Ne("<!><!><!><!><!>",1);function vn(t,e){_e(e,!0);let r=q(e,"shortenLabels",3,!0),s=q(e,"lineWidth",3,1),o=q(e,"nBars",3,1),a=q(e,"barNum",3,1),c=q(e,"markerSize",3,null),u=q(e,"markerWidth",3,2),f=q(e,"marker",3,1),d=q(e,"colors",3,void 0),v=q(e,"filled",3,void 0),h=q(e,"mainColor",19,()=>Kr.cal),m=q(e,"faceColor",3,null),g=q(e,"lineColor",19,h),b=q(e,"selected",19,()=>-1),_=q(e,"maskSelected",3,!0),p=q(e,"xRange",15),w=q(e,"yRange",15),A=q(e,"ind",3,null);function k(ie){!e.callbacks||!e.callbacks.select||In(ie,ie.target.tagName,re=>e.callbacks.select(re,A()))}function E(ie){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const C=Kt("axes"),j=y(()=>Ut(e.xValues,"PlotSeries")),N=y(()=>l(j)?Ut(e.yValues,"PlotSeries",l(j).length):null);ye(()=>{if(A()){const ie=A().map(re=>re+1);p(l(j)?ln(l(j).subset(ie)):null),w(l(N)?ln(l(N).subset(ie)):null)}else p(l(j)?ln(l(j)):null),w(l(N)?ln(l(N)):null)});const R=y(()=>m()===null?e.plotType==="p"?"transparent":"white":m()),L=[1,.8,.8,.8,.8,.8,.8,.8],T=[.85,.65,.65,.65,.65,.65,.65,.65],P=y(()=>c()?c():e.plotType==="p"?L[f()-1]:T[f()-1]),M=y(()=>sl[f()-1]),B=y(()=>Mo[C.scales().plot]),V=y(()=>_t([0],C.tY())[0]),z=y(()=>To([.8],C.tX())[0]),G=y(()=>e.plotType==="h"?l(z)/o():0),ae=y(()=>e.plotType==="h"?l(z)/2-(a()-1)*l(G):0),H=y(()=>l(B));let $=y(()=>e.plotType==="l"||e.plotType==="b"?Lo(l(j),l(N),C.tX(),C.tY()):null),le=y(()=>l(j)?_t(l(j),C.tX()):null),Z=y(()=>l(N)?_t(l(N),C.tY()):null),ee=y(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(ie=>ie.slice(0,Dl)):e.labels:null);const se=y(()=>A()?A():Xr(0,l(le).length-1));let ne=y(()=>d()&&d().length===l(j).length?d():Array(l(j).length).fill(h())),de=y(()=>v()&&v().length===l(j).length?v().map(ie=>ie?"ff":"30"):Array(l(j).length).fill("30")),pe=y(()=>d()&&d().length===l(j).length?d().map((ie,re)=>ie+l(de)[re]):Array(l(j).length).fill(m()));const Re=y(()=>`font-size:${l(P)}em;fill:${l(R)};cursor:default;text-anchor:middle;stroke-width:${u()}px;user-select:none;`),Me=`font-size:0.85em;fill:${Yo};cursor:default;text-anchor:middle;stroke:${Yo};stroke-width:0.1px;user-select:none;`,ke=y(()=>`font-size:${l(P)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),Te=`fill:transparent;stroke-width:${s()}px;`,Pe=`stroke-width:${s()}px;stroke:${g()}`;ye(()=>{b()&&A()&&A().indexOf(b())<0&&e.callbacks.unselect()});var Se=ge(),xe=J(Se);{var oe=ie=>{var re=n0(),fe=J(re);{var be=U=>{var Q=Hh();$e(Q,21,()=>l(se),nt,(he,me)=>{var je=Uh(),Be=D(je);ce(()=>{O(je,"opacity",l(me)===b()),O(je,"x",l(le)[l(me)]-l(ae)+l(G)/2),O(je,"y",l(Z)[l(me)]),O(je,"dy",l(N).v[l(me)]<0?l(H):-l(H)),Ee(Be,l(ee)[l(me)])}),S(he,je)}),ce(()=>bt(Q,Me+(b()>=0?"opacity:0.2;":""))),S(U,Q)};W(fe,U=>{e.showLabels&&l(ee)&&U(be)})}var ve=F(fe);{var qe=U=>{var Q=Gh(),he=D(Q);ce(()=>{bt(Q,Te),O(he,"points",l($)),O(he,"stroke",h())}),S(U,Q)};W(ve,U=>{(e.plotType==="l"||e.plotType==="b")&&U(qe)})}var ze=F(ve);{var Oe=U=>{var Q=Kh();Q.__click=k,$e(Q,21,()=>l(se),nt,(he,me)=>{var je=Xh();ce(()=>{O(je,"x",l(le)[l(me)]-l(ae)),O(je,"y",l(N).v[l(me)]<0?l(V):l(Z)[l(me)]),O(je,"fill",l(ne)[l(me)]),O(je,"width",l(G)),O(je,"height",l(N).v[l(me)]<0?l(Z)[l(me)]-l(V):l(V)-l(Z)[l(me)])}),S(he,je)}),ce(()=>bt(Q,Pe+(b()>=0?"opacity:0.2;":""))),S(U,Q)};W(ze,U=>{e.plotType==="h"&&U(Oe)})}var Ye=F(ze);{var at=U=>{var Q=Qh();Q.__click=k,$e(Q,21,()=>l(se),nt,(he,me)=>{var je=Jh(),Be=D(je);ce(()=>{O(je,"x",l(le)[l(me)]),O(je,"y",l(Z)[l(me)]),O(je,"fill",l(pe)[l(me)]),O(je,"stroke",l(ne)[l(me)]),Ee(Be,l(M))}),S(he,je)}),ce(()=>bt(Q,l(Re)+(b()>=0?"opacity:0.2;":""))),S(U,Q)};W(Ye,U=>{(e.plotType==="p"||e.plotType==="b")&&U(at)})}var Qe=F(Ye);{var Y=U=>{var Q=r0(),he=J(Q);{var me=tt=>{var it=Zh();O(it,"x",0),O(it,"y",0),it.__click=E,S(tt,it)};W(he,tt=>{_()&&tt(me)})}var je=F(he);{var Be=tt=>{var it=$h(),wt=D(it),Ae=D(wt);ce(()=>{bt(it,l(ke)),O(wt,"x",l(le)[b()]),O(wt,"y",l(Z)[b()]),O(wt,"stroke",l(ne)[b()]),O(wt,"fill",l(pe)[b()]),Ee(Ae,l(M))}),S(tt,it)},It=tt=>{var it=e0(),wt=D(it);ce(()=>{bt(it,Pe),O(wt,"stroke",l(ne)[b()]),O(wt,"fill",l(ne)[b()]),O(wt,"x",l(le)[b()]-l(ae)),O(wt,"y",l(N).v[b()]<0?l(V):l(Z)[b()]),O(wt,"width",l(G)),O(wt,"height",l(N).v[b()]<0?l(Z)[b()]-l(V):l(V)-l(Z)[b()])}),S(tt,it)};W(je,tt=>{e.plotType!=="h"?tt(Be):tt(It,!1)})}var Ir=F(je);{var xt=tt=>{var it=t0(),wt=D(it),Ae=D(wt);ce(()=>{bt(it,Me),O(wt,"stroke",lc),O(wt,"fill",lc),O(wt,"x",l(le)[b()]),O(wt,"y",l(Z)[b()]),O(wt,"dy",l(N).v[b()]<0?l(H):-l(H)),Ee(Ae,l(ee)[b()])}),S(tt,it)};W(Ir,tt=>{e.showLabels&&l(ee)&&l(ee).length>0&&tt(xt)})}S(U,Q)};W(Qe,U=>{b()>=0&&U(Y)})}S(ie,re)};W(xe,ie=>{l(le)&&l(Z)&&ie(oe)})}S(t,Se),we()}ft(["click"]);function l0(t,e){_e(e,!0);let r=q(e,"lineColor",3,"#606060"),s=q(e,"lineType",3,2),o=q(e,"alpha",3,.05),a=q(e,"xRange",15),c=q(e,"yRange",15);const u=Ve.seq(0,2*Math.PI,.05);function f(p,w,A,k){const E=p.eigenvals[w-1],C=Gr(1-o(),2),j=Math.sqrt(C*E),N=Ve.zeros(k.length);for(let R=0;R<k.length;R++)N.v[R]=j*A(k.v[R]);return[N,-j,j]}let d=y(()=>e.comp?e.comp[0]:null),v=y(()=>l(d)?f(e.resobj,l(d),Math.cos,u):null);ye(()=>{a(l(v)?[l(v)[1],l(v)[2]]:null)});let h=y(()=>e.comp?e.comp[1]:null),m=y(()=>l(h)?f(e.resobj,l(h),Math.sin,u):null);ye(()=>{c(l(m)?[l(m)[1],l(m)[2]]:null)});var g=ge(),b=J(g);{var _=p=>{fn(p,{get xValues(){return l(v)[0]},get yValues(){return l(m)[0]},get lineColor(){return r()},get lineType(){return s()}})};W(b,p=>{l(v)&&l(m)&&p(_)})}S(t,g),we()}function s0(t,e){_e(e,!0);let r=q(e,"confLevel",3,.95),s=q(e,"xRange",15),o=q(e,"yRange",15),a=y(()=>M1(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,r()));ye(()=>{l(a)?(s(l(a).xRange),o(l(a).yRange)):(s(null),o(null))});var c=ge(),u=J(c);{var f=d=>{var v=ge(),h=J(v);$e(h,17,()=>l(a).ellipses,nt,(m,g,b)=>{fn(m,{get xValues(){return l(g).x},get yValues(){return l(g).y},get lineColor(){return e.groupColors[b]}})}),S(d,v)};W(u,d=>{l(a)&&l(a).ellipses&&d(f)})}S(t,c),we()}var o0=X("<!> <!> <!> <!> <!> <!> <!> <!>",1);function dc(t,e){_e(e,!0);let r=q(e,"alpha",3,.05);const s=y(()=>e.props&&e.props.data?e.props.data:null),o=y(()=>e.props&&e.props.res?e.props.res:null),a=y(()=>l(o)&&e.params?e.params.resID==="both"?Object.keys(l(o)):[e.params.resID]:null),c=y(()=>l(a)?l(o)[l(a)[0]]:null),u=y(()=>l(a)&&l(a).length>1?l(o)[l(a)[1]]:null),f=y(()=>l(a)?l(s)[l(a)[0]]:null);function d(ke,Te,Pe,Se,xe,oe){if(!Pe)return null;let ie=Pe[0],re=Pe[1];Se&&(ie=Math.min(ie,Se[0]),re=Math.max(re,Se[1])),ke&&xe&&(ie=Math.min(ie,xe[0]),re=Math.max(re,xe[1])),Te!=="none"&&oe&&(ie=Math.min(ie,oe[0]),re=Math.max(re,oe[1]));const fe=(re-ie)*.1;return{min:ie,max:re,d:fe}}function v(ke,Te){if(!(!ke||!Te||Te<1||Te>ke.ncomp))return new Ve(Nr(ke,"scores",Te))}let h=te(void 0),m=te(void 0),g=te(void 0),b=te(void 0),_=te(void 0),p=te(void 0),w=te(void 0),A=te(void 0),k=y(()=>l(c)?et(l(c).objindices):null),E=y(()=>l(u)?et(l(u).objindices):null),C=y(()=>l(c)?l(c).objlabels.map(ke=>ke.slice(0,Dl)):null),j=y(()=>l(u)?l(u).objlabels.map(ke=>ke.slice(0,Dl)):null),N=y(()=>v(l(c),e.params.comp1)),R=y(()=>v(l(u),e.params.comp1)),L=y(()=>e.params.plotType==="p"?l(N):l(k)),T=y(()=>e.params.plotType==="p"?l(R):l(E)),P=y(()=>e.params.comp2?e.params.comp2:null),M=y(()=>v(l(c),l(P))),B=y(()=>l(u)?v(l(u),l(P)):null),V=y(()=>ac(l(f),l(c),e.params.colorBy,e.params.colorByVar,l(a)[0])),z=y(()=>dn[l(a)[0]]),G=y(()=>l(a).length>1?ac(null,l(u),"none",0,l(a)[1]):null),ae=y(()=>l(a).length>1?dn[l(a)[1]]:null),H=y(()=>e.params.plotType==="p"?sc(l(c),e.params.comp1):"Objects"),$=y(()=>sc(l(c),e.params.comp2)),le=y(()=>d(e.params.showEllipse,e.params.confEllipse,l(h),l(g),l(_),l(w))),Z=y(()=>l(le)?[l(le).min-l(le).d,l(le).max+l(le).d]:[0,1]),ee=y(()=>d(e.params.showEllipse,e.params.confEllipse,l(m),l(b),l(p),l(A))),se=y(()=>l(ee)?[l(ee).min-l(ee).d,l(ee).max+l(ee).d*(1+(e.params.colorBy!=="none"))]:[0,1]),ne=y(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!l(V)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+l(V).varname+(l(f).varvaluesUnits?" "+l(f).varvaluesUnits:"")+")");const de=y(()=>Wo(l(a)));var pe=ge(),Re=J(pe);{var Me=ke=>{Fn(ke,{get title(){return l(ne)},get limX(){return l(Z)},get limY(){return l(se)},get xLabel(){return l(H)},get yLabel(){return l($)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(Te,Pe)=>{var Se=o0(),xe=J(Se);{let Y=y(()=>[l(Z)[0]]),U=y(()=>[l(Z)[1]]);zn(xe,{get xStart(){return l(Y)},get xEnd(){return l(U)},yStart:[0],yEnd:[0],get lineColor(){return al}})}var oe=F(xe,2);{var ie=Y=>{{let U=y(()=>[l(se)[0]]),Q=y(()=>[l(se)[1]]);zn(Y,{xStart:[0],xEnd:[0],get yStart(){return l(U)},get yEnd(){return l(Q)},get lineColor(){return al}})}};W(oe,Y=>{e.params.plotType==="p"&&Y(ie)})}var re=F(oe,2);{var fe=Y=>{{let U=y(()=>[e.params.comp1,e.params.comp2]);l0(Y,{get alpha(){return r()},get resobj(){return l(c)},get comp(){return l(U)},get xRange(){return l(_)},set xRange(Q){I(_,Q,!0)},get yRange(){return l(p)},set yRange(Q){I(p,Q,!0)}})}};W(re,Y=>{e.params.showEllipse&&e.params.plotType==="p"&&Y(fe)})}var be=F(re,2);{var ve=Y=>{{let U=y(()=>Number.parseInt(e.params.confEllipse)/100);s0(Y,{get xValues(){return l(L)},get yValues(){return l(M)},get confLevel(){return l(U)},get groups(){return l(c).classes},get groupNames(){return l(c).classNames},get groupColors(){return l(V).map},get xRange(){return l(w)},set xRange(Q){I(w,Q,!0)},get yRange(){return l(A)},set yRange(Q){I(A,Q,!0)}})}};W(be,Y=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&l(V)&&Y(ve)})}var qe=F(be,2);vn(qe,{get xValues(){return l(L)},get yValues(){return l(M)},get labels(){return l(C)},get marker(){return l(z)},get nBars(){return l(a).length},barNum:1,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return l(V).colors},get mainColor(){return l(V).mainColor},get faceColor(){return l(V).faceTColor},get selected(){return e.selected},get callbacks(){return e.callbacks},get xRange(){return l(h)},set xRange(Y){I(h,Y,!0)},get yRange(){return l(m)},set yRange(Y){I(m,Y,!0)}});var ze=F(qe,2);{var Oe=Y=>{{let U=y(()=>e.params.showLabels&&e.params.plotType==="p");vn(Y,{get xValues(){return l(T)},get yValues(){return l(B)},get labels(){return l(j)},get selected(){return e.selected},get callbacks(){return e.callbacks},get nBars(){return l(a).length},barNum:2,get plotType(){return e.params.plotType},get showLabels(){return l(U)},get marker(){return l(ae)},get colors(){return l(G).colors},get mainColor(){return l(G).mainColor},get faceColor(){return l(G).faceTColor},get xRange(){return l(g)},set xRange(Q){I(g,Q,!0)},get yRange(){return l(b)},set yRange(Q){I(b,Q,!0)}})}};W(ze,Y=>{l(T)&&l(B)&&Y(Oe)})}var Ye=F(ze,2);{var at=Y=>{{let U=y(()=>l(V).breaks!==null);tc(Y,{get show(){return l(U)},get colmap(){return l(V).map},get breaks(){return l(V).breaks},get labels(){return l(V).labels}})}};W(Ye,Y=>{l(V)&&Y(at)})}var Qe=F(Ye,2);{let Y=y(()=>e.params.colorBy==="none");Vo(Qe,{get items(){return l(de)},get show(){return l(Y)}})}S(Te,Se)},$$slots:{default:!0}})};W(Re,ke=>{l(L)&&l(M)&&ke(Me)})}S(t,pe),we()}var a0=X("<!> <!> <!>",1);function i0(t,e){_e(e,!0);let r=y(()=>e.props?e.props.model:null);function s(E,C){return!E||!C||C<1||C>E.ncomp?null:new Ve(Bt(E,"loadings",C))}let o=te(void 0),a=te(void 0),c=y(()=>l(r)?et(l(r).varvalues):null),u=y(()=>l(r)?et(l(r).varindices):null),f=y(()=>s(l(r),e.params.comp1)),d=y(()=>!l(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:l(f),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&l(c)?{values:l(c),label:l(r).varvaluesName+(l(r).varvaluesUnits?", "+l(r).varvaluesUnits:"")}:{values:l(u),label:"Variables"}),v=y(()=>l(d)?l(d).values:null),h=y(()=>l(d)?l(d).label:null),m=y(()=>s(l(r),e.params.comp2)),g=y(()=>`PC${e.params.comp2}`),b=y(()=>{if(l(a)&&l(a)[0]<Number.POSITIVE_INFINITY&&l(a)[1]>Number.NEGATIVE_INFINITY){const E=(l(a)[1]-l(a)[0])*.1;return[l(a)[0]-E,l(a)[1]+E]}else return[0,1]}),_=y(()=>{if(l(o)&&l(o)[0]<Number.POSITIVE_INFINITY&&l(o)[1]>Number.NEGATIVE_INFINITY){const E=(l(o)[1]-l(o)[0])*.1;return e.params.plotType==="l"&&l(r).varrev?[l(o)[1]+E,l(o)[0]-E]:[l(o)[0]-E,l(o)[1]+E]}else return[0,1]}),p=y(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const E=Math.max(Math.abs(l(_)[0]),Math.abs(l(b)[0]),l(_)[1],l(b)[1])*1.05;return{x:[-E,E],y:[-E,E]}}else{const E=Math.max(Math.abs(l(b)[0]),l(b)[1])*1.05;return{x:l(_),y:[-E,E]}}return{x:l(_),y:l(b)}});var w=ge(),A=J(w);{var k=E=>{Fn(E,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return l(h)},get yLabel(){return l(g)},get limX(){return l(p).x},get limY(){return l(p).y},children:(C,j)=>{var N=a0(),R=J(N);{let M=y(()=>[l(p).x[0]]),B=y(()=>[l(p).x[1]]);zn(R,{get xStart(){return l(M)},get xEnd(){return l(B)},yStart:[0],yEnd:[0],get lineColor(){return al}})}var L=F(R,2);{var T=M=>{{let B=y(()=>[l(p).y[0]]),V=y(()=>[l(p).y[1]]);zn(M,{xStart:[0],xEnd:[0],get yStart(){return l(B)},get yEnd(){return l(V)},get lineColor(){return al}})}};W(L,M=>{e.params.plotType==="p"&&M(T)})}var P=F(L,2);{let M=y(()=>nc+"30");vn(P,{get xValues(){return l(v)},get yValues(){return l(m)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return l(r).varlabels},shortenLabels:!1,get mainColor(){return nc},get faceColor(){return l(M)},get xRange(){return l(o)},set xRange(B){I(o,B,!0)},get yRange(){return l(a)},set yRange(B){I(a,B,!0)}})}S(C,N)},$$slots:{default:!0}})};W(A,E=>{l(v)&&l(m)&&E(k)})}S(t,w),we()}var c0=X("<!> <!> <!> <!> <!> <!> <!>",1);function vc(t,e){_e(e,!0),q(e,"alpha",3,.05);const r="#808089",s="#404050",o=Yo;let a=y(()=>e.props?e.props.model:null),c=y(()=>e.props?e.props.res:null),u=y(()=>l(c)?l(c)[e.params.resID]:null);function f(C,j){return`PC${j} (${(C.stat.expvar[j-1]*100).toFixed(1)}%)`}function d(C,j,N){if(!j||!N||C<1||C>l(c).ncomp)return null;const R=Nr(j,"scores",C).slice(),L=Bt(N,"loadings",C),T=R.length,P=L.length;let M=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY;const V=new Array(T);for(let ee=0;ee<T;ee++)R[ee]=R[ee]/Math.sqrt(l(v)[C-1]*(T-1)),M>R[ee]&&(M=R[ee]),B<R[ee]&&(B=R[ee]),V[ee]=R[ee]<0?1:3;const z=new Array(T);for(let ee=0;ee<P;ee++)M>L[ee]&&(M=L[ee]),B<L[ee]&&(B=L[ee]),z[ee]=L[ee]<0?1:3;const G=new Ve(R),ae=new Ve(L),H=f(j,C),$=(B-M)/15,le=[M-$,B+$],Z=Math.max(Math.abs(le[0]),le[1]);return{values:G,end:ae,lim:le,label:H,tpos:V,ppos:z,mx:Z}}let v=y(()=>l(a)?Bt(l(a),"eigenvals"):null),h=y(()=>l(u)?Ve.zeros(l(u).ncols):null),m=y(()=>l(u)?Ve.zeros(l(u).ncols):null),g=y(()=>d(e.params.comp1,l(u),l(a))),b=y(()=>d(e.params.comp2,l(u),l(a))),_=y(()=>l(g)&&l(b)?Math.max(l(g).mx,l(b).mx)*1.05:0),p=y(()=>l(g)?e.params.axesEqual?[-l(_),l(_)]:l(g).lim:[0,1]),w=y(()=>l(b)?e.params.axesEqual?[-l(_),l(_)]:l(b).lim:[0,1]);var A=ge(),k=J(A);{var E=C=>{Fn(C,{get limX(){return l(p)},get limY(){return l(w)},get xLabel(){return l(g).label},get yLabel(){return l(b).label},fileName:"plot-biplot",title:"Bi-plot (scores and loadings)",children:(j,N)=>{var R=c0(),L=J(R);{let H=y(()=>[l(p)[0]]),$=y(()=>[l(p)[1]]);zn(L,{get xStart(){return l(H)},get xEnd(){return l($)},yStart:[0],yEnd:[0],get lineColor(){return al}})}var T=F(L,2);{let H=y(()=>[l(w)[0]]),$=y(()=>[l(w)[1]]);zn(T,{xStart:[0],xEnd:[0],get yStart(){return l(H)},get yEnd(){return l($)},get lineColor(){return al}})}var P=F(T,2);Bo(P,{get xValues(){return l(g).values},get yValues(){return l(b).values},get lineColor(){return Kr[e.params.resID]},get faceColor(){return Vl[e.params.resID]},lineWidth:1.5});var M=F(P,2);zn(M,{get xStart(){return l(h)},get yStart(){return l(m)},get xEnd(){return l(g).end},get yEnd(){return l(b).end},lineColor:r});var B=F(M,2);Bo(B,{get xValues(){return l(g).end},get yValues(){return l(b).end},marker:1,lineColor:r,faceColor:r,markerSize:.4});var V=F(B,2);{var z=H=>{ol(H,{get xValues(){return l(g).values},get yValues(){return l(b).values},get labels(){return l(u).objlabels},get pos(){return l(b).tpos},textSize:.75,get faceColor(){return o}})};W(V,H=>{(e.params.showLabels==="obj"||e.params.showLabels==="both")&&H(z)})}var G=F(V,2);{var ae=H=>{ol(H,{get xValues(){return l(g).end},get yValues(){return l(b).end},get labels(){return l(u).varlabels},textSize:.75,get pos(){return l(b).ppos},faceColor:s})};W(G,H=>{(e.params.showLabels==="var"||e.params.showLabels==="both")&&H(ae)})}S(j,R)},$$slots:{default:!0}})};W(k,C=>{l(g)&&l(b)&&C(E)})}S(t,A),we()}var u0=X("<!> <!> <!> <!> <!> <!>",1);function hc(t,e){_e(e,!0);let r=y(()=>e.props?e.props.res:null);const s=y(()=>l(r)&&e.params?e.params.resID==="both"?Object.keys(l(r)):[e.params.resID]:null),o=y(()=>l(s)?l(r)[l(s)[0]]:null),a=y(()=>l(s)&&l(s).length>1?l(r)[l(s)[1]]:null),c={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"},u=y(()=>e.params.varForm==="cumulative"?"cum":""),f=y(()=>e.params.varType==="explained"?"exp":"res"),d=y(()=>l(u)+l(f)+"var"),v=y(()=>c[l(d)]),h=y(()=>l(o).ncomp>1?1-l(o).ncomp*.065:-.1),m=y(()=>l(o).ncomp>1?l(o).ncomp*1.065:2.1),g=y(()=>[l(h),l(m)]),b=y(()=>l(o)?l(o).stat.components:null),_=y(()=>l(o)?et(l(o).stat[l(d)]):null),p=y(()=>l(a)?l(a).stat.components:null),w=y(()=>l(a)?et(l(a).stat[l(d)]):null),A=y(()=>l(_)?Array.from(l(_).v).map(P=>P<.1?P.toFixed(3):P.toFixed(2)):null),k=y(()=>l(w)?Array.from(l(w).v).map(P=>P<.1?P.toFixed(3):P.toFixed(2)):null),E=y(()=>l(_)?[Math.min(-.1,Hr(l(_)))]:-.1),C=y(()=>l(w)?[Math.min(-.1,Hr(l(w)))]:-.1),j=y(()=>l(E)&&l(C)?[Math.min(l(E),l(C)),1.1]:[0,1.1]),N=y(()=>Wo(l(s)));var R=ge(),L=J(R);{var T=P=>{{let M=y(()=>"plot-"+l(d));Fn(P,{get title(){return l(v)},get limX(){return l(g)},get limY(){return l(j)},get fileName(){return l(M)},whole:!0,children:(B,V)=>{var z=u0(),G=J(z);vn(G,{get xValues(){return l(b)},get yValues(){return l(_)},get labels(){return l(A)},get nBars(){return l(s).length},barNum:1,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Kr[l(s)[0]]},get faceColor(){return ys[l(s)[0]]},get marker(){return dn[l(s)[0]]},lineWidth:1.5});var ae=F(G,2);{var H=se=>{vn(se,{get xValues(){return l(p)},get yValues(){return l(w)},get labels(){return l(k)},get nBars(){return l(s).length},barNum:2,get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return Kr[l(s)[1]]},get faceColor(){return ys[l(s)[1]]},get marker(){return dn[l(s)[1]]},lineWidth:1.5})};W(ae,se=>{l(p)&&l(w)&&se(H)})}var $=F(ae,2);Vo($,{get items(){return l(N)},position:"bottomright"});var le=F($,2);Fo(le,{showGrid:!0,label:"Number of PCs",whole:!0});var Z=F(le,2);qo(Z,{showGrid:!0,label:"Variance"});var ee=F(Z,2);Oo(ee,{}),S(B,z)},$$slots:{default:!0}})}};W(L,P=>{l(b)&&l(_)&&P(T)})}S(t,R),we()}function f0(t,e){_e(e,!0);let r=y(()=>e.props?e.props.model:null);const s={none:"λ",log:"log(λ)",sqrt:"sqrt(λ)"};function o(C,j){const N=l(r).nrows-1;if(j==="no")return C.apply(R=>R*N);if(j==="log")return C.apply(R=>Math.log(R*N));if(j==="sqrt")return C.apply(R=>Math.sqrt(R*N))}let a=y(()=>l(r)?new Ve(Bt(l(r),"eigenvals")):null),c=y(()=>l(r)?Ve.seq(1,l(r).ncomp):null),u=y(()=>l(a)?o(l(a),e.params.transform):null),f=y(()=>l(u)?Array.from(l(u).v).map(C=>C.toFixed(C<.1?3:2)):null);const d=y(()=>l(r).ncomp>10?l(r).ncomp*.05:.5),v=y(()=>l(r).ncomp>1?1:0),h=y(()=>l(r).ncomp>1?l(r).ncomp:2),m=y(()=>[l(v)-l(d),l(h)+l(d)]);let g=y(()=>l(u)?e.params.transform==="no"?0:l(u).v[l(r).ncomp-1]:0),b=y(()=>l(u)?l(u).v[0]:1),_=y(()=>(l(b)-l(g))/18),p=y(()=>l(u)?[l(g)-l(_),l(b)+l(_)]:[0,1]),w=y(()=>s[e.params.transform]);var A=ge(),k=J(A);{var E=C=>{Fn(C,{get limX(){return l(m)},get limY(){return l(p)},get yLabel(){return l(w)},whole:!0,xLabel:"Number of PCs",title:"Eigenvalues",fileName:"plot-eigenvalues",children:(j,N)=>{vn(j,{get xValues(){return l(c)},get yValues(){return l(u)},get labels(){return l(f)},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get faceColor(){return ys.cal},lineWidth:1.5})},$$slots:{default:!0}})};W(k,C=>{l(c)&&l(u)&&C(E)})}S(t,A),we()}var d0=X("<!> <!> <!> <!> <!>",1);function mc(t,e){_e(e,!0);let r=y(()=>e.props&&e.props.res?e.props.res:null);const s=y(()=>l(r)&&e.params?e.params.resID==="both"?Object.keys(l(r)):[e.params.resID]:null),o=y(()=>l(s)?l(r)[l(s)[0]]:null),a=y(()=>l(s)&&l(s).length>1?l(r)[l(s)[1]]:null),c="#909090",u=100;let f=y(()=>e.params.limType==="classic"?{h:l(o).cNh,q:l(o).cNq}:{h:l(o).rNh,q:l(o).rNq}),d=y(()=>e.params.limType==="classic"?{h:l(o).ch0,q:l(o).cq0}:{h:l(o).rh0,q:l(o).rq0}),v=y(()=>({h:l(f).h[e.params.ncomp-1],q:l(f).q[e.params.ncomp-1]})),h=y(()=>({h:l(d).h[e.params.ncomp-1],q:l(d).q[e.params.ncomp-1]})),m=y(()=>e.params.alpha?1-e.params.alpha/100:.95),g=y(()=>e.params.gamma?1-e.params.gamma/100:.99),b=y(()=>cc(l(m),l(v).h,l(v).q,e.params.transType)),_=y(()=>cc(Math.pow(l(g),1/l(o).nrows),l(v).h,l(v).q,e.params.transType)),p=y(()=>l(o)?Nr(l(o),"hdist",e.params.ncomp):null),w=y(()=>l(o)?Nr(l(o),"qdist",e.params.ncomp):null),A=y(()=>l(a)?Nr(l(a),"hdist",e.params.ncomp):null),k=y(()=>l(a)?Nr(l(a),"qdist",e.params.ncomp):null),E=y(()=>xs(l(p),l(v).h,l(h).h,e.params.transType)),C=y(()=>xs(l(w),l(v).q,l(h).q,e.params.transType)),j=y(()=>l(o)?l(o).objlabels.map(Z=>Z.slice(0,Dl)):null),N=y(()=>l(A)?xs(l(A),l(v).h,l(h).h,e.params.transType):null),R=y(()=>l(k)?xs(l(k),l(v).q,l(h).q,e.params.transType):null),L=y(()=>l(a)?l(a).objlabels.map(Z=>Z.slice(0,Dl)):null),T=y(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),P=y(()=>ic("h",e.params.transType)),M=y(()=>ic("q",e.params.transType)),B=te(void 0),V=te(void 0),z=y(()=>{if(!l(E)||!l(B))return[0,1];const Z=Math.max(l(E).max,l(_).x.v[u-1]),ee=l(N)?Math.max(l(N).max,l(_).x.v[u-1]):0,se=Math.max(Z,ee);return[-.02*(se-l(B)[0]),1.05*se]}),G=y(()=>{if(!l(C)||!l(V))return[0,1];const Z=Math.max(l(C).max,l(_).y.v[0]),ee=l(R)?Math.max(l(R).max,l(_).y.v[0]):0,se=Math.max(Z,ee);return[-.02*(se-l(V)[0]),(1.05+.1*(e.params.colorBy!=="none"))*se]});const ae=y(()=>Wo(l(s)));var H=ge(),$=J(H);{var le=Z=>{Fn(Z,{get title(){return l(T)},get limX(){return l(z)},get limY(){return l(G)},get xLabel(){return l(P)},get yLabel(){return l(M)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(ee,se)=>{var ne=d0(),de=J(ne);{var pe=xe=>{fn(xe,{get xValues(){return l(b).x},get yValues(){return l(b).y},lineColor:c,lineType:2})};W(de,xe=>{l(b)&&xe(pe)})}var Re=F(de,2);{var Me=xe=>{fn(xe,{get xValues(){return l(_).x},get yValues(){return l(_).y},lineColor:c,lineType:3})};W(Re,xe=>{l(_)&&e.params.resID&&e.params.resID!=="alt"&&xe(Me)})}var ke=F(Re,2);vn(ke,{get labels(){return l(j)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(E).values},get yValues(){return l(C).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return dn[l(s)[0]]},get mainColor(){return Kr[l(s)[0]]},get faceColor(){return Vl[l(s)[0]]},get xRange(){return l(B)},set xRange(xe){I(B,xe,!0)},get yRange(){return l(V)},set yRange(xe){I(V,xe,!0)}});var Te=F(ke,2);{var Pe=xe=>{vn(xe,{get labels(){return l(L)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(N).values},get yValues(){return l(R).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return dn[l(s)[1]]},get mainColor(){return Kr[l(s)[1]]},get faceColor(){return Vl[l(s)[1]]},get xRange(){return l(B)},set xRange(oe){I(B,oe,!0)},get yRange(){return l(V)},set yRange(oe){I(V,oe,!0)}})};W(Te,xe=>{l(N)&&l(R)&&xe(Pe)})}var Se=F(Te,2);Vo(Se,{get items(){return l(ae)},position:"bottomright"}),S(ee,ne)},$$slots:{default:!0}})};W($,Z=>{l(E)&&l(C)&&Z(le)})}S(t,H),we()}function gc(t){const e=Object.keys(t),r=t[e[0]],s=e.concat(["both"]);return{resID:{el:rt,hidden:e.length==1,default:e[0],label:"Show",props:{options:s}},ncomp:{el:sr,hidden:!1,default:r.ncomp>1?2:1,label:"# PCs",props:{min:1,max:r.ncomp}},transType:{el:rt,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:rt,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function v0(t){return{plotType:{el:bs,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},transform:{el:rt,hidden:!1,default:"no",label:"Transform",props:{options:["no","sqrt","log"]}},showLabels:{el:Zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function h0(t){return{plotType:{el:bs,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:sr,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:sr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},showLabels:{el:Zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},axesEqual:{el:Zt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function pc(t){const e=Object.keys(t),r=t[e[0]],s=r.classNames&&r.classNames.length>1?["none","groups","variable"]:["none","variable"],o=e.concat(["both"]);return{resID:{el:rt,hidden:e.length==1,default:e[0],label:"Show",props:{options:o}},plotType:{el:bs,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:sr,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:sr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:Zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}},showEllipse:{el:Zt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:rt,hidden:!1,default:"none",label:"Color by",props:{options:s}},colorByVar:{el:sr,hidden:!0,default:1,label:"Variable",props:{min:1,max:r.ncols}},confEllipse:{el:rt,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}function bc(t){const e=Object.keys(t),r=e.concat(["both"]);return{resID:{el:rt,hidden:e.length==1,default:e[0],label:"Show",props:{options:r}},plotType:{el:bs,hidden:!1,default:"b",label:"Plot type",props:{options:["b","h"]}},varType:{el:rt,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:rt,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Zt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function _c(t){const e=Object.keys(t),r=t[e[0]];return{resID:{el:rt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},comp2:{el:sr,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:sr,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:rt,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","obj","var","both"]}},axesEqual:{el:Zt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}var m0=X("<!> <!>",1);function g0(t,e){_e(e,!0);const r=(d,v=Pt)=>{ue(d,{label:"Selected",children:(h,m)=>{vt(h,{onclick:()=>e.markOutlier(v()),text:"remove"})},$$slots:{default:!0}})},s=(d,v=Pt)=>{ue(d,{label:"Selected",children:(h,m)=>{var g=m0(),b=J(g);vt(b,{onclick:()=>e.showContributions(v(),l(c).distance.ncomp),text:"plot"});var _=F(b,2);vt(_,{onclick:()=>e.markOutlier(v()),text:"remove"}),S(h,g)},$$slots:{default:!0}})};Object.keys(e.res);const o=y(()=>({scores:{label:"Scores",scope:"objects",component:dc,buttons:r},loadings:{label:"Loadings",scope:"stats",component:i0},biplot:{label:"Bi-plot",scope:"stats",component:vc},variance:{label:"Variance",scope:"stats",component:hc},eigenvals:{label:"Eigenvalues",scope:"stats",component:f0},distance:{label:"Distances",scope:"objects",component:mc,buttons:s}})),a=Fe({scores:pc(e.res),loadings:h0(e.model),biplot:_c(e.res),variance:bc(e.res),eigenvals:v0(e.model),distance:gc(e.res)});let c=te(Fe({scores:Tr(a.scores),loadings:Tr(a.loadings),biplot:Tr(a.biplot),variance:Tr(a.variance),eigenvals:Tr(a.eigenvals),distance:Tr(a.distance)}));ye(()=>{l(c).scores.plotType!=="p"?(a.scores.comp1.hidden=!0,a.scores.showEllipse.hidden=!0,l(c).scores.showEllipse=!1):(a.scores.comp1.hidden=!1,a.scores.showEllipse.hidden=!1),l(c).scores.plotType==="l"||l(c).scores.plotType==="b"?(a.scores.colorBy.hidden=!0,l(c).scores.colorBy="none"):a.scores.colorBy.hidden=!1,l(c).scores.colorBy==="variable"?a.scores.colorByVar.hidden=!1:a.scores.colorByVar.hidden=!0,l(c).scores.colorBy==="groups"&&l(c).scores.plotType==="p"?a.scores.confEllipse.hidden=!1:(a.scores.confEllipse.hidden=!0,l(c).scores.confEllipse="none"),l(c).scores.resID==="both"&&(l(c).scores.confEllipse="none",l(c).scores.colorBy="none",a.scores.colorBy.hidden=!0,a.scores.colorByVar.hidden=!0,a.scores.confEllipse.hidden=!0)}),ye(()=>{l(c).loadings.plotType!=="p"?a.loadings.comp1.hidden=!0:a.loadings.comp1.hidden=!1});const u=y(()=>({res:e.res,model:e.model,data:e.data})),f={markOutlier:e.markOutlier,showContributions:e.showContributions};fc(t,{get plots(){return l(o)},get controls(){return a},get props(){return l(u)},get callbacks(){return f},get params(){return l(c)},set params(d){I(c,d,!0)}}),we()}var p0=X('<div class="outliers-pane svelte-1mp4dba"><!></div>'),b0=X('<div class="model-calculator svelte-1mp4dba"><!></div>'),_0=X('<div class="pcv-calculator svelte-1mp4dba"><!></div>'),w0=X('<div class="buttons"><!> <!> <!></div>'),y0=X('<div class="download-area svelte-1mp4dba"><!></div>'),x0=X('<div class="result-stats svelte-1mp4dba"><!></div>'),E0=X(`<p class="svelte-1mp4dba">In this tab you can train a PCA model and explore how well it describes the training set. After creating the model you can save it to a file and apply it to another, new set of samples, and see how well this new set is explained by the model (tab <strong>Project</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1mp4dba">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. If this is the case, select <em>values</em> option for the header. In this case you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1mp4dba">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. It is also possible to have group labels, which you can use, for example, to color group samples on the score plot. Here is an example how data structure may look like (note, that column with group, row labels and header are optional):</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Group</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),k0=X(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to decide how to preprocess the data. You can either skip preprocessing (in the model settings you
               will be able to apply centering and scaling), create the chain of preprocessing methods in special constructor
               (use <em>Create</em> to load the constructor) or load already built preprocessing model from a file. Make your choice.</p>`,1),A0=X('<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Next step is to create a global PCA model for the training set. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to select number of components for every plot.</p>',1),C0=X(`<p class="svelte-1mp4dba"><strong>Step 4</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to create the PV-set,
               which you can use to validate the model. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">After this step you will be able to explore the model and tune its parameters.</p>`,1),S0=X('<div class="help-text svelte-1mp4dba"><!></div>'),N0=X('<!> <div class="app-container svelte-1mp4dba"><div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>',1);function M0(t,e){_e(e,!0);const r=y(()=>e.session.train);let s=te(-1),o=te(1),a=te(!1);function c(H){if(H<0||H>l(r).calres.nrows-1)return;const $=l(r).calres.objindices[H];$>=0&&!l(r).outliers.includes($)&&(l(r).outliers.push($),l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null)}function u(){l(r).outliers=[],l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null}function f(){l(r).outliers.pop(),l(r).model=null,l(r).pvres=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).pvset=null}function d(H,$){H<0||(I(s,H,!0),I(o,$,!0),I(a,!0))}function v(){I(a,!1),I(s,-1),I(o,1)}ye(()=>{l(r).calset===null&&(l(r).pvres=null,l(r).calres=null,l(r).pvset=null,l(r).calsetp=null,l(r).prepmodel=null,l(r).prepobj=[],l(r).prepType=null,l(r).outliers=[],l(r).model=null)}),ye(()=>{l(r).model===null&&(l(r).calres=null,l(r).pvres=null,l(r).pvset=null)}),ye(()=>{l(r).prepmodel||(l(r).calres=null,l(r).calsetp=null)}),ye(()=>{l(r).calsetp||(l(r).model=null,l(r).calres=null,l(r).pvres=null)}),ye(()=>{const H=Sr(()=>JSON.stringify(e.session,ms));e.backupSession(H,l(r).model,l(r).calset,l(r).calsetp,l(r).pvres)});var h=N0(),m=J(h);{var g=H=>{{let $=y(()=>({cal:l(r).calres,pv:l(r).pvres}));uc(H,{get model_getter(){return Bt},get res_getter(){return Nr},get model(){return l(r).model},get res(){return l($)},closeModal:v,get ncomp(){return l(o)},get selected(){return l(s)}})}};W(m,H=>{l(a)&&H(g)})}var b=F(m,2),_=D(b),p=D(_),w=D(p);Bi(w,{className:"Group",csvOnly:!1,get dataset(){return l(r).calset},set dataset(H){l(r).calset=H}});var A=F(p,2);{var k=H=>{var $=p0(),le=D($);Di(le,{get outliers(){return l(r).outliers},get dataset(){return l(r).calset},resetOutliers:u,undoOutliers:f}),S(H,$)};W(A,H=>{l(r).outliers&&l(r).outliers.length>0&&H(k)})}var E=F(A,2);{var C=H=>{Ih(H,{get WASM(){return e.WASM},get rawdata(){return l(r).calset},get outliers(){return l(r).outliers},get prepType(){return l(r).prepType},set prepType($){l(r).prepType=$},get prepobj(){return l(r).prepobj},set prepobj($){l(r).prepobj=$},get prepdata(){return l(r).calsetp},set prepdata($){l(r).calsetp=$},get prepmeta(){return l(r).prepmeta},set prepmeta($){l(r).prepmeta=$},get prepmodel(){return l(r).prepmodel},set prepmodel($){l(r).prepmodel=$}})};W(E,H=>{l(r).calset&&H(C)})}var j=F(E,2);{var N=H=>{var $=b0(),le=D($);Zd(le,{get WASM(){return e.WASM},get dataset(){return l(r).calsetp},get outliers(){return l(r).outliers},get model(){return l(r).model},set model(Z){l(r).model=Z},get resobj(){return l(r).calres},set resobj(Z){l(r).calres=Z}}),S(H,$)};W(j,H=>{l(r).calsetp&&H(N)})}var R=F(j,2);{var L=H=>{var $=_0(),le=D($);Yd(le,{get WASM(){return e.WASM},get calset(){return l(r).calsetp},get outliers(){return l(r).outliers},get model(){return l(r).model},get calres(){return l(r).calres},get pvset(){return l(r).pvset},set pvset(Z){l(r).pvset=Z},get pvres(){return l(r).pvres},set pvres(Z){l(r).pvres=Z}}),S(H,$)};W(R,H=>{l(r).calsetp&&l(r).model&&H(L)})}var T=F(R,2);{var P=H=>{var $=y0(),le=D($);ue(le,{name:"download-buttons",label:"Download",children:(Z,ee)=>{var se=w0(),ne=D(se);vt(ne,{onclick:()=>So(l(r).calres,l(r).calset,"train",l(r).outliers,l(r).model),text:"Res (cal)"});var de=F(ne,2);vt(de,{onclick:()=>So(l(r).pvres,l(r).pvset,"pv",l(r).outliers,l(r).model),text:"Res (pv)"});var pe=F(de,2);vt(pe,{onclick:()=>kd(l(r).model,l(r).prepmodel),text:"Model"}),S(Z,se)},$$slots:{default:!0}}),S(H,$)};W(T,H=>{l(r).calres&&l(r).pvres&&l(r).model&&H(P)})}var M=F(T,2);{var B=H=>{var $=x0(),le=D($);{let Z=y(()=>({cal:l(r).calres,pv:l(r).pvres}));Vi(le,{get res(){return l(Z)}})}S(H,$)};W(M,H=>{l(r).pvres&&H(B)})}var V=F(_,2),z=D(V);{var G=H=>{var $=S0(),le=D($);{var Z=se=>{var ne=E0();S(se,ne)},ee=se=>{var ne=ge(),de=J(ne);{var pe=Me=>{var ke=k0();S(Me,ke)},Re=Me=>{var ke=ge(),Te=J(ke);{var Pe=xe=>{var oe=A0();S(xe,oe)},Se=xe=>{var oe=ge(),ie=J(oe);{var re=fe=>{var be=C0();S(fe,be)};W(ie,fe=>{l(r).pvset||fe(re)},!0)}S(xe,oe)};W(Te,xe=>{l(r).model?xe(Se,!1):xe(Pe)},!0)}S(Me,ke)};W(de,Me=>{l(r).calsetp?Me(Re,!1):Me(pe)},!0)}S(se,ne)};W(le,se=>{l(r).calset?se(ee,!1):se(Z)})}S(H,$)},ae=H=>{var $=ge(),le=J($);{var Z=ee=>{var se=ge(),ne=J(se);nl(ne,()=>l(r).calres,de=>{{let pe=y(()=>({cal:l(r).calset,pv:l(r).pvset})),Re=y(()=>({cal:l(r).calres,pv:l(r).pvres}));g0(de,{markOutlier:c,showContributions:d,get data(){return l(pe)},get res(){return l(Re)},get model(){return l(r).model}})}}),S(ee,se)};W(le,ee=>{l(r).model&&l(r).calres&&l(r).pvres&&ee(Z)})}S(H,$)};W(z,H=>{!l(r).pvres||!l(r).model?H(G):H(ae,!1)})}S(t,h),we()}var T0=X("<!> <!>",1),P0=X('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),j0=X('<p class="info-text svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model info:</span> <!></p> <!>',1),L0=X("<p><!></p>"),R0=X("<!> <!>",1);function I0(t,e){_e(e,!0);let r=q(e,"model",15),s=te(""),o=te("neutral"),a=te("");function c(p){try{const w=JSON.parse(p,ko);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain PCA model.");w.fileName=l(d),r(w),I(o,"success"),I(a,"")}catch(w){console.error(w),r(null),I(o,"error"),I(a,w,!0)}}function u(p){const w=new FileReader;w.onload=()=>{c(w.result)},w.readAsText(l(s))}function f(){I(s,""),r(null),I(o,"neutral"),I(a,"")}ye(()=>{l(s)===null?(r(null),I(o,"neutral"),I(a,"")):(I(o,"neutral"),I(a,""))});let d=y(()=>l(s)?l(s).name.replace(/\.[^/.]+$/,""):"");var v=R0(),h=J(v);{var m=p=>{var w=T0(),A=J(w);nl(A,()=>l(s),C=>{ue(C,{name:"file-selector",children:(j,N)=>{ps(j,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(s)},set file(R){I(s,R,!0)}})},$$slots:{default:!0}})});var k=F(A,2);{var E=C=>{ue(C,{name:"load-button",label:" ",children:(j,N)=>{vt(j,{onclick:u,text:"Load"})},$$slots:{default:!0}})};W(k,C=>{l(s)&&C(E)})}S(p,w)},g=p=>{ue(p,{name:"info",class:"info",children:(w,A)=>{var k=j0(),E=J(k),C=F(D(E),2),j=D(C),N=F(C,4),R=F(N);{var L=P=>{var M=P0(),B=F(J(M),3);Ho(B,{get prepmodel(){return r().prep}}),S(P,M)};W(R,P=>{r().prep&&P(L)})}var T=F(E,2);Mr(T,{onclick:f}),ce(()=>{O(C,"title",r().fileName),Ee(j,r().fileName),Ee(N,` ${r().ncomp??""} PCs${r().center?", centered":""}${r().scale?", scaled":""} `)}),S(w,k)},$$slots:{default:!0}})};W(h,p=>{r()?p(g,!1):p(m)})}var b=F(h,2);{var _=p=>{ue(p,{name:"error",status:"error",children:(w,A)=>{var k=L0(),E=D(k);Ct(E,()=>l(a)),S(w,k)},$$slots:{default:!0}})};W(b,p=>{(l(o)==="error"||l(a))&&p(_)})}S(t,v),we()}var z0=X("<!> <!>",1);function F0(t,e){_e(e,!0);const r=(d,v=Pt)=>{ue(d,{label:"Selected",children:(h,m)=>{vt(h,{onclick:()=>e.markOutlier(v()),text:"remove"})},$$slots:{default:!0}})},s=(d,v=Pt)=>{ue(d,{label:"Selected",children:(h,m)=>{var g=z0(),b=J(g);vt(b,{onclick:()=>e.showContributions(v(),l(c).distance.ncomp),text:"plot"});var _=F(b,2);vt(_,{onclick:()=>e.markOutlier(v()),text:"remove"}),S(h,g)},$$slots:{default:!0}})},o=y(()=>({scores:{label:"Scores",scope:"objects",component:dc,buttons:r},biplot:{label:"Bi-plot",scope:"stats",component:vc},variance:{label:"Variance",scope:"stats",component:hc},distance:{label:"Distances",scope:"objects",component:mc,buttons:s}})),a=Fe({scores:pc(e.res),biplot:_c(e.res),variance:bc(e.res),distance:gc(e.res)});let c=te(Fe({scores:Tr(a.scores),biplot:Tr(a.biplot),variance:Tr(a.variance),distance:Tr(a.distance)}));ye(()=>{l(c).scores.plotType!=="p"?(a.scores.comp1.hidden=!0,a.scores.showEllipse.hidden=!0,l(c).scores.showEllipse=!1):(a.scores.comp1.hidden=!1,a.scores.showEllipse.hidden=!1),l(c).scores.plotType==="l"||l(c).scores.plotType==="b"?(a.scores.colorBy.hidden=!0,l(c).scores.colorBy="none"):a.scores.colorBy.hidden=!1,l(c).scores.colorBy==="variable"?a.scores.colorByVar.hidden=!1:a.scores.colorByVar.hidden=!0,l(c).scores.colorBy==="groups"&&l(c).scores.plotType==="p"?a.scores.confEllipse.hidden=!1:(a.scores.confEllipse.hidden=!0,l(c).scores.confEllipse="none")});const u=y(()=>({res:e.res,model:e.model,data:e.data})),f={markOutlier:e.markOutlier,showContributions:e.showContributions};fc(t,{get plots(){return l(o)},get controls(){return a},get props(){return l(u)},get callbacks(){return f},get params(){return l(c)},set params(d){I(c,d,!0)}}),we()}var q0=X('<div class="data-loader svelte-1rjc99q"><!></div>'),O0=X('<div class="outliers-pane svelte-1rjc99q"><!></div>'),B0=X('<div class="buttons"><!></div>'),V0=X('<div class="model-dowloader svelte-1rjc99q"><!></div> <div class="result-stats svelte-1rjc99q"><!></div>',1),D0=X('<p class="svelte-1rjc99q"><strong>Step 1.</strong></p> <p class="svelte-1rjc99q">Load file with PCA model you created earlier in tab <strong>Train</strong></p>',1),Y0=X('<p class="svelte-1rjc99q"><strong>Step 2.</strong></p> <p class="svelte-1rjc99q">Load your dataset set from a CSV file. The interface and selection steps are similar to the ones you used in <em>Train</em> tab. However, in this case you do not need to specify all details for header, just select if the new dataset has header as a first row or not. All values will be inherited from the model object.</p> <p class="svelte-1rjc99q"><strong>It is important that the new dataset has same variables as the training set used to create the model.</strong></p>',1),W0=X('<div class="help-text svelte-1rjc99q"><p class="svelte-1rjc99q">In this tab you can project new data points to a previosly trained PCA model and explore main outcomes: scores, distances and variances.</p> <!> <p class="svelte-1rjc99q"></p></div>'),U0=X('<!> <div class="app-container svelte-1rjc99q"><div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>',1);function H0(t,e){_e(e,!0);const r=y(()=>e.session.new);let s=te(-1),o=te(1),a=te(!1);function c(M){if(M<0||M>l(r).newres.nrows-1)return;const B=l(r).newres.objindices[M];B>=0&&!l(r).outliers.includes(B)&&(l(r).outliers.push(B),l(r).newres=null)}function u(){l(r).outliers=[],l(r).newres=null}function f(){l(r).outliers.pop(),l(r).newres=null}function d(M,B){M<0||(I(s,M,!0),I(a,!0))}function v(){I(a,!1),I(s,-1),I(o,1)}ye(()=>{l(r).model===null&&(l(r).newset=null)}),ye(()=>{l(r).newset===null&&(l(r).outliers=[],l(r).newres=null)}),ye(()=>{const M=Sr(()=>JSON.stringify(e.session,ms));e.backupSession(M,l(r).model,l(r).newset,l(r).newres)});var h=U0(),m=J(h);{var g=M=>{{let B=y(()=>({new:l(r).newres}));uc(M,{get model_getter(){return Bt},get res_getter(){return Nr},get model(){return l(r).model},get res(){return l(B)},closeModal:v,get ncomp(){return l(o)},get selected(){return l(s)}})}};W(m,M=>{l(a)&&M(g)})}var b=F(m,2),_=D(b),p=D(_),w=D(p);I0(w,{get model(){return l(r).model},set model(M){l(r).model=M}});var A=F(p,2);{var k=M=>{var B=q0(),V=D(B);Bi(V,{get WASM(){return e.WASM},get outliers(){return l(r).outliers},get model(){return l(r).model},className:"Group",csvOnly:!1,get dataset(){return l(r).newset},set dataset(z){l(r).newset=z},get resobj(){return l(r).newres},set resobj(z){l(r).newres=z}}),S(M,B)};W(A,M=>{l(r).model&&M(k)})}var E=F(A,2);{var C=M=>{var B=O0(),V=D(B);Di(V,{get dataset(){return l(r).newset},get outliers(){return l(r).outliers},resetOutliers:u,undoOutliers:f}),S(M,B)};W(E,M=>{l(r).outliers&&l(r).outliers.length>0&&M(C)})}var j=F(E,2);{var N=M=>{var B=V0(),V=J(B),z=D(V);ue(z,{label:"Download",children:(H,$)=>{var le=B0(),Z=D(le);vt(Z,{text:"Res (new)",onclick:()=>So(l(r).newres,l(r).newset,"new",l(r).outliers,l(r).model)}),S(H,le)},$$slots:{default:!0}});var G=F(V,2),ae=D(G);{let H=y(()=>({new:l(r).newres}));Vi(ae,{get res(){return l(H)}})}S(M,B)};W(j,M=>{l(r).newres&&M(N)})}var R=F(_,2),L=D(R);{var T=M=>{var B=W0(),V=F(D(B),2);{var z=ae=>{var H=D0();S(ae,H)},G=ae=>{var H=ge(),$=J(H);{var le=Z=>{var ee=Y0();S(Z,ee)};W($,Z=>{l(r).newset||Z(le)},!0)}S(ae,H)};W(V,ae=>{l(r).model?ae(G,!1):ae(z)})}S(M,B)},P=M=>{var B=ge(),V=J(B);{var z=G=>{var ae=ge(),H=J(ae);nl(H,()=>l(r).neweres,$=>{{let le=y(()=>({new:l(r).newset})),Z=y(()=>({new:l(r).newres}));F0($,{markOutlier:c,showContributions:d,get data(){return l(le)},get res(){return l(Z)},get model(){return l(r).model}})}}),S(G,ae)};W(V,G=>{l(r).model&&l(r).newres&&l(r).newset&&G(z)})}S(M,B)};W(L,M=>{l(r).newres?M(P,!1):M(T)})}S(t,h),we()}var G0=X('<sup style="color:red">β</sup>'),X0=X('<li><button class="svelte-1josccy"> </button></li>'),K0=X("<div><!></div>"),J0=X('<div class="info-container svelte-1josccy"><!></div>'),Q0=X('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function Z0(t,e){_e(e,!0);let r=q(e,"tabs",19,()=>[]),s=q(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let a=te(!1),c=te(void 0),u=te("Current session "),f=te(!1);function d(N){I(u,N,!0),I(f,!0),setTimeout(()=>{I(u,"Current session "),I(f,!1)},1e3)}function v(){I(a,!0)}function h(){I(a,!1)}function m(N){l(c).tab=N}function g(){const N=indexedDB.open(o,1);N.onsuccess=R=>{const T=R.target.result.transaction(e.appID,"readwrite");T.objectStore(e.appID).delete("session"),T.oncomplete=()=>{I(c,e.initSession(),!0),d("Session was reinitialzed.")},T.onerror=()=>console.error("Failed to session from DB.")}}function b(N,R){window.localStorage.removeItem(e.appID+"-blocked");const L=indexedDB.open(o,1);L.onsuccess=T=>{const B=T.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);B.put(N,"session"),B.put(Ao(new Date),"session-update")}}function _(){new Promise((N,R)=>{const L=indexedDB.open(o,1);L.onsuccess=T=>{const V=T.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");V.onsuccess=()=>N(V.result),V.onerror=()=>R(V.error)}}).then(N=>{p(N),I(u,"Last session is restored "),I(f,!0),setTimeout(()=>{I(u,"Current session "),I(f,!1)},1500)}).catch(N=>{console.error(N),I(c,e.initSession(),!0)})}function p(N){if(!N||N==="undefined"){I(c,e.initSession(),!0);return}const R=JSON.parse(N,ko);I(c,e.checkSession(R)?R:e.initSession(e.appID),!0)}function w(){const N=Ao(new Date),R=e.appID+"-session-"+N+".json";l(c).date=N;const L=JSON.stringify(l(c),ms),T=new Blob([L],{type:"text/json"}),P=window.URL.createObjectURL(T),M=document.createElement("a");M.setAttribute("href",P),M.setAttribute("download",R),M.click()}function A(N){const R=new FileReader;R.onload=()=>{p(R.result),N.target.value=""},R.readAsText(N.target.files[0])}function k(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&g()}of(()=>{const N=e.appID,R=indexedDB.open(o,1);R.onupgradeneeded=L=>{const T=L.target.result;T.objectStoreNames.contains(N)||T.createObjectStore(N)},R.onsuccess=L=>{_()}});var E=ge(),C=J(E);{var j=N=>{var R=Q0(),L=D(R),T=D(L),P=D(T),M=F(P,2),B=D(M),V=F(B);{var z=ie=>{var re=G0();S(ie,re)};W(V,ie=>{s()&&ie(z)})}var G=F(M,2),ae=D(G),H=F(T,2);$e(H,21,r,nt,(ie,re,fe)=>{var be=X0();let ve;var qe=D(be);qe.__click=()=>m(fe),qe.__keydown=()=>m(fe);var ze=D(qe);ce(()=>{ve=pt(be,1,"nav-item svelte-1josccy",null,ve,{selected:l(c).tab===fe}),Ee(ze,l(re).name)}),S(ie,be)});var $=F(L,2),le=D($);nl(le,()=>l(c).date,ie=>{var re=ge(),fe=J(re);$e(fe,17,r,nt,(be,ve,qe)=>{var ze=K0();let Oe;var Ye=D(ze);Rl(Ye,()=>l(ve).component,(at,Qe)=>{Qe(at,{get WASM(){return e.WASM},get session(){return l(c)},backupSession:b})}),ce(()=>Oe=pt(ze,1,"tab-content svelte-1josccy",null,Oe,{hidden:l(c).tab!==qe})),S(be,ze)}),S(ie,re)});var Z=F($,2),ee=D(Z);let se;var ne=D(ee),de=D(ne),pe=F(ne,2),Re=D(pe);Re.__change=A;var Me=F(pe,2);Me.__click=w;var ke=F(Me,2);ke.__click=k;var Te=F(ee,2),Pe=D(Te);Pe.__click=v,Pe.__keydown=v;var Se=F(Pe,2);Wr(Se,()=>e.footer);var xe=F(Z,2);{var oe=ie=>{Do(ie,{closeModal:h,children:(re,fe)=>{var be=J0(),ve=D(be);Wr(ve,()=>e.info),S(re,be)},$$slots:{default:!0}})};W(xe,ie=>{l(a)&&ie(oe)})}ce(()=>{O(P,"alt",e.appShortTitle),Ee(B,e.appTitle),Ee(ae,e.appSlogan),se=pt(ee,1,"session svelte-1josccy",null,se,{"no-buttons":l(f)}),Ee(de,l(u))}),S(N,R)};W(C,N=>{l(c)&&N(j)})}S(t,E),we()}ft(["click","keydown","change"]);const fm="modulepreload",dm=function(t){return"/"+t},vm={},$0=function(e,r,s){let o=Promise.resolve();function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return o.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};async function em(t={}){var Ye,at,Qe;var e,r=t,s=!!globalThis.window,o=!!globalThis.WorkerGlobalScope,a=((at=(Ye=globalThis.process)==null?void 0:Ye.versions)==null?void 0:at.node)&&((Qe=globalThis.process)==null?void 0:Qe.type)!="renderer";if(a){const{createRequire:Y}=await $0(async()=>{const{createRequire:U}=await Promise.resolve().then(()=>lm);return{createRequire:U}},void 0);var c=Y(He&&He.tagName.toUpperCase()==="SCRIPT"&&He.src||new URL("pca.js",document.baseURI).href)}var u="./this.program",f=(Y,U)=>{throw U},d=He&&He.tagName.toUpperCase()==="SCRIPT"&&He.src||new URL("pca.js",document.baseURI).href,v="",h,m;if(a){var g=c("fs");d.startsWith("file:")&&(v=c("path").dirname(c("url").fileURLToPath(d))+"/"),m=Y=>(Y=k(Y)?new URL(Y):Y,g.readFileSync(Y)),h=async Y=>(Y=k(Y)?new URL(Y):Y,g.readFileSync(Y,void 0)),1<process.argv.length&&(u=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),f=(Y,U)=>{throw process.exitCode=Y,U}}else if(s||o){try{v=new URL(".",d).href}catch{}o&&(m=Y=>{var U=new XMLHttpRequest;return U.open("GET",Y,!1),U.responseType="arraybuffer",U.send(null),new Uint8Array(U.response)}),h=async Y=>{if(k(Y))return new Promise((Q,he)=>{var me=new XMLHttpRequest;me.open("GET",Y,!0),me.responseType="arraybuffer",me.onload=()=>{me.status==200||me.status==0&&me.response?Q(me.response):he(me.status)},me.onerror=he,me.send(null)});var U=await fetch(Y,{credentials:"same-origin"});if(U.ok)return U.arrayBuffer();throw Error(U.status+" : "+U.url)}}var b=console.log.bind(console),_=console.error.bind(console),p,w=!1,A,k=Y=>Y.startsWith("file://"),E,C,j,N,R,L=!1;function T(){var Y=qe.buffer;j=new Int8Array(Y),N=new Uint8Array(Y),r.HEAP32=new Int32Array(Y),R=new Uint32Array(Y),r.HEAPF64=new Float64Array(Y),new BigInt64Array(Y),new BigUint64Array(Y)}function P(Y){var U;throw(U=r.onAbort)==null||U.call(r,Y),Y="Aborted("+Y+")",_(Y),w=!0,Y=new WebAssembly.RuntimeError(Y+". Build with -sASSERTIONS for more info."),C==null||C(Y),Y}var M;async function B(Y){if(!p)try{var U=await h(Y);return new Uint8Array(U)}catch{}if(Y==M&&p)Y=new Uint8Array(p);else if(m)Y=m(Y);else throw"both async and sync fetching of the wasm failed";return Y}async function V(Y,U){try{var Q=await B(Y);return await WebAssembly.instantiate(Q,U)}catch(he){_(`failed to asynchronously prepare wasm: ${he}`),P(he)}}async function z(Y){var U=M;if(!p&&!k(U)&&!a)try{var Q=fetch(U,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(Q,Y)}catch(he){_(`wasm streaming compile failed: ${he}`),_("falling back to ArrayBuffer instantiation")}return V(U,Y)}class G{constructor(U){Dt(this,"name","ExitStatus");this.message=`Program terminated with exit(${U})`,this.status=U}}var ae=Y=>{for(;0<Y.length;)Y.shift()(r)},H=[],$=[],le=()=>{var Y=r.preRun.shift();$.push(Y)},Z=!0,ee=0,se={},ne=Y=>{var U;A=Y,Z||0<ee||((U=r.onExit)==null||U.call(r,Y),w=!0),f(Y,new G(Y))},de=Y=>{if(!w)try{if(Y(),!(Z||0<ee))try{A=Y=A,ne(Y)}catch(U){U instanceof G||U=="unwind"||f(1,U)}}catch(U){U instanceof G||U=="unwind"||f(1,U)}},pe=globalThis.TextDecoder&&new TextDecoder,Re=(Y,U=0)=>{for(var Q=U,he=Q+void 0;Y[Q]&&!(Q>=he);)++Q;if(16<Q-U&&Y.buffer&&pe)return pe.decode(Y.subarray(U,Q));for(he="";U<Q;){var me=Y[U++];if(me&128){var je=Y[U++]&63;if((me&224)==192)he+=String.fromCharCode((me&31)<<6|je);else{var Be=Y[U++]&63;me=(me&240)==224?(me&15)<<12|je<<6|Be:(me&7)<<18|je<<12|Be<<6|Y[U++]&63,65536>me?he+=String.fromCharCode(me):(me-=65536,he+=String.fromCharCode(55296|me>>10,56320|me&1023))}}else he+=String.fromCharCode(me)}return he},Me={},ke=()=>{if(!Te){var Y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:u||"./this.program"},U;for(U in Me)Me[U]===void 0?delete Y[U]:Y[U]=Me[U];var Q=[];for(U in Y)Q.push(`${U}=${Y[U]}`);Te=Q}return Te},Te,Pe=(Y,U,Q)=>{var he=N;if(!(0<Q))return 0;var me=U;Q=U+Q-1;for(var je=0;je<Y.length;++je){var Be=Y.codePointAt(je);if(127>=Be){if(U>=Q)break;he[U++]=Be}else if(2047>=Be){if(U+1>=Q)break;he[U++]=192|Be>>6,he[U++]=128|Be&63}else if(65535>=Be){if(U+2>=Q)break;he[U++]=224|Be>>12,he[U++]=128|Be>>6&63,he[U++]=128|Be&63}else{if(U+3>=Q)break;he[U++]=240|Be>>18,he[U++]=128|Be>>12&63,he[U++]=128|Be>>6&63,he[U++]=128|Be&63,je++}}return he[U]=0,U-me},Se=Y=>{for(var U=0,Q=0;Q<Y.length;++Q){var he=Y.charCodeAt(Q);127>=he?U++:2047>=he?U+=2:55296<=he&&57343>=he?(U+=4,++Q):U+=3}return U},xe=[null,[],[]],oe=()=>{if(a){var Y=c("crypto");return U=>Y.randomFillSync(U)}return U=>crypto.getRandomValues(U)},ie=Y=>{(ie=oe())(Y)};if(r.noExitRuntime&&(Z=r.noExitRuntime),r.print&&(b=r.print),r.printErr&&(_=r.printErr),r.wasmBinary&&(p=r.wasmBinary),r.thisProgram&&(u=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.shift()();r.ccall=(Y,U,Q,he)=>{var me={string:xt=>{var tt=0;if(xt!=null&&xt!==0){tt=Se(xt)+1;var it=be(tt);Pe(xt,it,tt),tt=it}return tt},array:xt=>{var tt=be(xt.length);return j.set(xt,tt),tt}};Y=r["_"+Y];var je=[],Be=0;if(he)for(var It=0;It<he.length;It++){var Ir=me[Q[It]];Ir?(Be===0&&(Be=ve()),je[It]=Ir(he[It])):je[It]=he[It]}return Q=Y(...je),Q=(function(xt){return Be!==0&&fe(Be),U==="string"?xt?Re(N,xt):"":U==="boolean"?!!xt:xt})(Q)};var re,fe,be,ve,qe,ze={g:()=>P(""),j:()=>{Z=!1,ee=0},k:(Y,U)=>{if(se[Y]&&(clearTimeout(se[Y].id),delete se[Y]),!U)return 0;var Q=setTimeout(()=>{delete se[Y],de(()=>re(Y,performance.now()))},U);return se[Y]={id:Q,U},0},a:()=>Date.now(),c:Y=>_(Y?Re(N,Y):""),b:()=>performance.now(),l:Y=>{var U=N.length;if(Y>>>=0,2147483648<Y)return!1;for(var Q=1;4>=Q;Q*=2){var he=U*(1+.2/Q);he=Math.min(he,Y+100663296);e:{he=(Math.min(2147483648,65536*Math.ceil(Math.max(Y,he)/65536))-qe.buffer.byteLength+65535)/65536|0;try{qe.grow(he),T();var me=1;break e}catch{}me=void 0}if(me)return!0}return!1},e:(Y,U)=>{var Q=0,he=0,me;for(me of ke()){var je=U+Q;R[Y+he>>2]=je,Q+=Pe(me,je,1/0)+1,he+=4}return 0},f:(Y,U)=>{var Q=ke();R[Y>>2]=Q.length,Y=0;for(var he of Q)Y+=Se(he)+1;return R[U>>2]=Y,0},h:(Y,U,Q,he)=>{for(var me=0,je=0;je<Q;je++){var Be=R[U>>2],It=R[U+4>>2];U+=8;for(var Ir=0;Ir<It;Ir++){var xt=Y,tt=N[Be+Ir],it=xe[xt];tt===0||tt===10?((xt===1?b:_)(Re(it)),it.length=0):it.push(tt)}me+=It}return R[he>>2]=me,0},i:ne,d:(Y,U)=>(ie(N.subarray(Y,Y+U)),0)},Oe;return Oe=await(async function(){function Y(Q){return Q=Oe=Q.exports,r._pcafit_wasm=Q.o,r._free=Q.p,r._malloc=Q.q,r._pcapredict_wasm=Q.r,r._pcvpca_wasm=Q.s,r._prepfit_wasm=Q.t,r._prepapply_wasm=Q.u,re=Q.v,r._strdup=Q.w,r._strndup=Q.x,r.__ZdaPv=Q.y,r.__ZdaPvm=Q.z,r.__ZdlPv=Q.A,r.__ZdlPvm=Q.B,r.__Znaj=Q.C,r.__ZnajSt11align_val_t=Q.D,r.__Znwj=Q.E,r.__ZnwjSt11align_val_t=Q.F,r.___libc_calloc=Q.G,r.___libc_free=Q.H,r.___libc_malloc=Q.I,r.___libc_realloc=Q.J,r._emscripten_builtin_malloc=Q.K,r._emscripten_builtin_calloc=Q.L,r._emscripten_builtin_free=Q.M,r._emscripten_builtin_realloc=Q.N,r._malloc_size=Q.O,r._malloc_usable_size=Q.P,r._reallocf=Q.Q,fe=Q.R,be=Q.S,ve=Q.T,qe=Q.m,T(),Oe}var U={a:ze};return r.instantiateWasm?new Promise(Q=>{r.instantiateWasm(U,(he,me)=>{Q(Y(he))})}):(M??(M=r.locateFile?r.locateFile?r.locateFile("pca_wasm.wasm",v):v+"pca_wasm.wasm":new URL("/pca/pca.wasm",He&&He.tagName.toUpperCase()==="SCRIPT"&&He.src||new URL("pca.js",document.baseURI).href).href),Y((await z(U)).instance))})(),(function(){function Y(){var Q;if(r.calledRun=!0,!w){if(L=!0,Oe.n(),E==null||E(r),(Q=r.onRuntimeInitialized)==null||Q.call(r),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var U=r.postRun.shift();H.push(U)}ae(H)}}if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)le();ae($),r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),Y()},1)):Y()})(),L?e=r:e=new Promise((Y,U)=>{E=Y,C=U}),e}var tm=X('<p>Current release: <span>2.1.6</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="/pca/Wines.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmpfjgu7n4y-slf8AAN74xC">video lessons</a></p>'),rm=X(`<h2>Principal Component Analysis</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using PCA models for data exploration
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>Check out YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmpfjgu7n4y-slf8AAN74xC">video-lessons</a></p> <h3>v. 2.1.6</h3> <p class="release-info">released 30/11/2025</p> <ul><li>Fixed several small bugs and improved app performance.</li></ul> <h3>v. 2.1.5</h3> <p class="release-info">released 4/08/2025</p> <ul><li>Updated link to video-tutorial.</li></ul> <h3>v. 2.1.4</h3> <p class="release-info">released 1/08/2025</p> <ul><li>Fixed issue with data loader when trim trails is used in preprocessing.</li></ul>`,1);function nm(t,e){_e(e,!1);function r(c){c.train.calset=null,c.new.model=null,c.tab=0}function s(c){const u=Object.keys(c);if(!["date","tab","train","new"].every(v=>u.includes(v)))return!1;const f=Object.keys(c.train);if(!["model","calset","calsetp","pvset","calres","pvres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(v=>f.includes(v)))return!1;const d=Object.keys(c.new);return!!["model","newset","newres","outliers"].every(v=>d.includes(v))}function o(){return{date:Ao(new Date),tab:0,train:{model:0,calset:0,calsetp:0,pvset:0,calres:0,pvres:0,outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},new:{model:0,newset:0,newres:0,outliers:[]}}}const a=[{name:"Train",label:"train",component:M0},{name:"Project",label:"new",component:H0}];rf(),Z0(t,{appID:"pca",appTitle:"PCA",appShortTitle:"PCA",appSlogan:"Principal component analysis",get WASM(){return em},get tabs(){return a},initSession:o,checkSession:s,resetSession:r,footer:f=>{var d=tm();S(f,d)},info:f=>{var d=rm();S(f,d)},$$slots:{footer:!0,info:!0}}),we()}Ou(nm,{target:document.body});const lm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pca.js.map
