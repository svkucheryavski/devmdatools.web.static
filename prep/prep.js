var xd=Object.defineProperty;var Ks=qe=>{throw TypeError(qe)};var kd=(qe,Ee,et)=>Ee in qe?xd(qe,Ee,{enumerable:!0,configurable:!0,writable:!0,value:et}):qe[Ee]=et;var Nr=(qe,Ee,et)=>kd(qe,typeof Ee!="symbol"?Ee+"":Ee,et),jo=(qe,Ee,et)=>Ee.has(qe)||Ks("Cannot "+et);var nr=(qe,Ee,et)=>(jo(qe,Ee,"read from private field"),et?et.call(qe):Ee.get(qe)),cn=(qe,Ee,et)=>Ee.has(qe)?Ks("Cannot add the same private member more than once"):Ee instanceof WeakSet?Ee.add(qe):Ee.set(qe,et),Bo=(qe,Ee,et,fr)=>(jo(qe,Ee,"write to private field"),fr?fr.call(qe,et):Ee.set(qe,et),et),Xs=(qe,Ee,et)=>(jo(qe,Ee,"access private method"),et);(function(){"use strict";var cr,Gr,an,Fn,Js,Hs;var qe=document.createElement("style");qe.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1986c5z{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1986c5z:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1986c5z:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1986c5z:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1986c5z{display:none}.control-element.error.svelte-1986c5z{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1986c5z{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1986c5z>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1986c5z>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1986c5z>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1986c5z>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1986c5z .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1986c5z .range-value_left,.control-element.svelte-1986c5z .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1986c5z .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1986c5z .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1986c5z .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1986c5z .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1986c5z .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1986c5z .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1986c5z .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1986c5z .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1986c5z .textinput>input:active::placeholder,.control-element.svelte-1986c5z .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1986c5z .textinput>input:focus,.control-element.svelte-1986c5z .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .textinput.error>input,.control-element.svelte-1986c5z .textinput.error>input:focus,.control-element.svelte-1986c5z .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1986c5z .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1986c5z .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1986c5z .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-x8qn01{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-x8qn01{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-x8qn01{padding:0 .25em 0 .5em}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-x8qn01{width:100%;height:calc(100% - 15px)}@media (min-width:1100px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr 400px}}span.svelte-2gffce{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-2gffce:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-2gffce{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-15cx0gr{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-15cx0gr>.control-element:last-child .button-down,.selected-methods-list.svelte-15cx0gr>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-15cx0gr:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-15cx0gr{margin-top:1em;font-size:.9em}.methods-list.svelte-15cx0gr>div{background:#ebf0f0}.final.svelte-15cx0gr .button-up,.final.svelte-15cx0gr .button-down,.final.svelte-15cx0gr .button-cancel{visibility:hidden}.app-container.svelte-1jqwqd2{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1jqwqd2{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1jqwqd2{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1jqwqd2>div:where(.svelte-1jqwqd2){border-radius:.25rem}.help-text.svelte-1jqwqd2{margin-top:.25rem}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.downloads-block.svelte-1jqwqd2{margin-top:.85em}.downloads-block.svelte-1jqwqd2>div:hover,.downloads-block.svelte-1jqwqd2>div{background:#fff0c8}.downloads-block.svelte-1jqwqd2>div button{margin:0 .25em}.downloads-block.svelte-1jqwqd2>div .button:hover{background:#fffff8;border-color:#606570;color:#606570}@media (min-width:1300px){.app-container.svelte-1jqwqd2{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1jqwqd2{grid-template-columns:min(320px,30%) 1fr}}.info-details.svelte-1l1cvmx{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul{padding:0;margin:0;list-style:none}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul>li{padding:.25em 0}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-1l1cvmx:hover>span:where(.svelte-1l1cvmx){visibility:visible}.info{position:relative}.info-text.svelte-1dxrrpt{line-height:1.5em}.info-text.svelte-1dxrrpt>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1dxrrpt>.file-name:where(.svelte-1dxrrpt){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}.app-container.svelte-sqi2x7{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-sqi2x7{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-sqi2x7{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-sqi2x7>div:where(.svelte-sqi2x7){border-radius:.25rem}.help-text.svelte-sqi2x7{margin-top:.25rem}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-sqi2x7{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-sqi2x7{grid-template-columns:min(320px,30%) 1fr}}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(qe);var Ee=typeof document<"u"?document.currentScript:null;const et=!1;var fr=Array.isArray,Zs=Array.prototype.indexOf,qn=Array.from,Qs=Object.defineProperty,or=Object.getOwnPropertyDescriptor,qo=Object.getOwnPropertyDescriptors,Io=Object.prototype,$s=Array.prototype,un=Object.getPrototypeOf,Do=Object.isExtensible;function Lr(t){return typeof t=="function"}const bt=()=>{};function el(t){return typeof(t==null?void 0:t.then)=="function"}function tl(t){return t()}function fn(t){for(var e=0;e<t.length;e++)t[e]()}function dn(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const n of t)if(r.push(n),r.length===e)break;return r}const It=2,Oo=4,vn=8,hn=16,Jt=32,Rr=64,In=128,xt=256,gn=512,Ct=1024,Zt=2048,dr=4096,Qt=8192,Dn=16384,On=32768,Mr=65536,rl=1<<17,nl=1<<19,Vo=1<<20,Vn=1<<21,ar=Symbol("$state"),Uo=Symbol("legacy props"),ol=Symbol("");function Wo(t){return t===this.v}function Ho(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function al(t,e){return t!==e}function Un(t){return!Ho(t,this.v)}function sl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ll(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function il(t){throw new Error("https://svelte.dev/e/effect_orphan")}function cl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ul(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function fl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function dl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function vl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Fr=!1,hl=!1;function gl(){Fr=!0}const Wn=1,Hn=2,Yo=4,ml=8,pl=16,bl=1,wl=2,_l=4,yl=8,xl=16,kl=1,El=2,Sl=4,Go=1,Al=2,lt=Symbol(),Cl="http://www.w3.org/1999/xhtml",zl=[];function Ko(t,e=!1){return mn(t,new Map,"",zl)}function mn(t,e,r,n,a=null){if(typeof t=="object"&&t!==null){var s=e.get(t);if(s!==void 0)return s;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(fr(t)){var l=Array(t.length);e.set(t,l),a!==null&&e.set(a,l);for(var i=0;i<t.length;i+=1){var u=t[i];i in t&&(l[i]=mn(u,e,r,n))}return l}if(un(t)===Io){l={},e.set(t,l),a!==null&&e.set(a,l);for(var c in t)l[c]=mn(t[c],e,r,n);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return mn(t.toJSON(),e,r,n,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}function Xo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Fe=null;function pn(t){Fe=t}function Ut(t){return Jo().get(t)}function Pl(t,e){return Jo().set(t,e),e}function ve(t,e=!1,r){var n=Fe={p:Fe,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Fr&&!e&&(Fe.l={s:null,u:null,r1:[],r2:hr(!1)}),sa(()=>{n.d=!0})}function he(t){const e=Fe;if(e!==null){const l=e.e;if(l!==null){var r=Ce,n=Se;e.e=null;try{for(var a=0;a<l.length;a++){var s=l[a];zt(s.effect),wt(s.reaction),Xr(s.fn)}}finally{zt(r),wt(n)}}Fe=e.p,e.m=!0}return{}}function vr(){return!Fr||Fe!==null&&Fe.l===null}function Jo(t){return Fe===null&&Xo(),Fe.c??(Fe.c=new Map(Tl(Fe)||void 0))}function Tl(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}function Te(t){if(typeof t!="object"||t===null||ar in t)return t;const e=un(t);if(e!==Io&&e!==$s)return t;var r=new Map,n=fr(t),a=W(0),s=Se,l=i=>{var u=Se;wt(s);var c=i();return wt(u),c};return n&&r.set("length",W(t.length)),new Proxy(t,{defineProperty(i,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&fl();var d=r.get(u);return d===void 0?d=l(()=>{var f=W(c.value);return r.set(u,f),f}):N(d,c.value,!0),!0},deleteProperty(i,u){var c=r.get(u);if(c===void 0){if(u in i){const v=l(()=>W(lt));r.set(u,v),Yn(a)}}else{if(n&&typeof u=="string"){var d=r.get("length"),f=Number(u);Number.isInteger(f)&&f<d.v&&N(d,f)}N(c,lt),Yn(a)}return!0},get(i,u,c){var h;if(u===ar)return t;var d=r.get(u),f=u in i;if(d===void 0&&(!f||(h=or(i,u))!=null&&h.writable)&&(d=l(()=>{var g=Te(f?i[u]:lt),p=W(g);return p}),r.set(u,d)),d!==void 0){var v=o(d);return v===lt?void 0:v}return Reflect.get(i,u,c)},getOwnPropertyDescriptor(i,u){var c=Reflect.getOwnPropertyDescriptor(i,u);if(c&&"value"in c){var d=r.get(u);d&&(c.value=o(d))}else if(c===void 0){var f=r.get(u),v=f==null?void 0:f.v;if(f!==void 0&&v!==lt)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(i,u){var v;if(u===ar)return!0;var c=r.get(u),d=c!==void 0&&c.v!==lt||Reflect.has(i,u);if(c!==void 0||Ce!==null&&(!d||(v=or(i,u))!=null&&v.writable)){c===void 0&&(c=l(()=>{var h=d?Te(i[u]):lt,g=W(h);return g}),r.set(u,c));var f=o(c);if(f===lt)return!1}return d},set(i,u,c,d){var z;var f=r.get(u),v=u in i;if(n&&u==="length")for(var h=c;h<f.v;h+=1){var g=r.get(h+"");g!==void 0?N(g,lt):h in i&&(g=l(()=>W(lt)),r.set(h+"",g))}if(f===void 0)(!v||(z=or(i,u))!=null&&z.writable)&&(f=l(()=>W(void 0)),N(f,Te(c)),r.set(u,f));else{v=f.v!==lt;var p=l(()=>Te(c));N(f,p)}var m=Reflect.getOwnPropertyDescriptor(i,u);if(m!=null&&m.set&&m.set.call(d,c),!v){if(n&&typeof u=="string"){var b=r.get("length"),k=Number(u);Number.isInteger(k)&&k>=b.v&&N(b,k+1)}Yn(a)}return!0},ownKeys(i){o(a);var u=Reflect.ownKeys(i).filter(f=>{var v=r.get(f);return v===void 0||v.v!==lt});for(var[c,d]of r)d.v!==lt&&!(c in i)&&u.push(c);return u},setPrototypeOf(){dl()}})}function Yn(t,e=1){N(t,t.v+e)}function jr(t){var e=It|Zt,r=Se!==null&&(Se.f&It)!==0?Se:null;return Ce===null||r!==null&&(r.f&xt)!==0?e|=xt:Ce.f|=Vo,{ctx:Fe,deps:null,effects:null,equals:Wo,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??Ce}}function P(t){const e=jr(t);return ma(e),e}function Zo(t){const e=jr(t);return e.equals=Un,e}function Qo(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)$t(e[r])}}function Nl(t){for(var e=t.parent;e!==null;){if((e.f&It)===0)return e;e=e.parent}return null}function $o(t){var e,r=Ce;zt(Nl(t));try{Qo(t),e=_a(t)}finally{zt(r)}return e}function ea(t){var e=$o(t);if(t.equals(e)||(t.v=e,t.wv=ba()),!Dr){var r=(sr||(t.f&xt)!==0)&&t.deps!==null?dr:Ct;Gt(t,r)}}const Kr=new Map;function hr(t,e){var r={f:0,v:t,reactions:null,equals:Wo,rv:0,wv:0};return r}function W(t,e){const r=hr(t);return ma(r),r}function bn(t,e=!1,r=!0){var a;const n=hr(t);return e||(n.equals=Un),Fr&&r&&Fe!==null&&Fe.l!==null&&((a=Fe.l).s??(a.s=[])).push(n),n}function N(t,e,r=!1){Se!==null&&!Ht&&vr()&&(Se.f&(It|hn))!==0&&!(at!=null&&at[1].includes(t)&&at[0]===Se)&&vl();let n=r?Te(e):e;return Br(t,n)}function Br(t,e){if(!t.equals(e)){var r=t.v;Dr?Kr.set(t,e):Kr.set(t,r),t.v=e,(t.f&It)!==0&&((t.f&Zt)!==0&&$o(t),Gt(t,(t.f&xt)===0?Ct:dr)),t.wv=ba(),ta(t,Zt),vr()&&Ce!==null&&(Ce.f&Ct)!==0&&(Ce.f&(Jt|Rr))===0&&(Pt===null?Vl([t]):Pt.push(t))}return e}function ta(t,e){var r=t.reactions;if(r!==null)for(var n=vr(),a=r.length,s=0;s<a;s++){var l=r[s],i=l.f;(i&Zt)===0&&(!n&&l===Ce||(Gt(l,e),(i&(Ct|xt))!==0&&((i&It)!==0?ta(l,dr):Qn(l))))}}let Ll=!1;var Gn,ra,na,oa;function Rl(){if(Gn===void 0){Gn=window,ra=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;na=or(e,"firstChild").get,oa=or(e,"nextSibling").get,Do(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Do(r)&&(r.__t=void 0)}}function wn(t=""){return document.createTextNode(t)}function kt(t){return na.call(t)}function _n(t){return oa.call(t)}function j(t,e){return kt(t)}function U(t,e){{var r=kt(t);return r instanceof Comment&&r.data===""?_n(r):r}}function M(t,e=1,r=!1){let n=t;for(;e--;)n=_n(n);return n}function Ml(t){t.textContent=""}function aa(t){Ce===null&&Se===null&&il(),Se!==null&&(Se.f&xt)!==0&&Ce===null&&ll(),Dr&&sl()}function Fl(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function qr(t,e,r,n=!0){var a=Ce,s={ctx:Fe,deps:null,nodes_start:null,nodes_end:null,f:t|Zt,first:null,fn:e,last:null,next:null,parent:a,prev:null,teardown:null,transitions:null,wv:0};if(r)try{Zn(s),s.f|=On}catch(u){throw $t(s),u}else e!==null&&Qn(s);var l=r&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Vo|In))===0;if(!l&&n&&(a!==null&&Fl(s,a),Se!==null&&(Se.f&It)!==0)){var i=Se;(i.effects??(i.effects=[])).push(s)}return s}function sa(t){const e=qr(vn,null,!1);return Gt(e,Ct),e.teardown=t,e}function le(t){aa();var e=Ce!==null&&(Ce.f&Jt)!==0&&Fe!==null&&!Fe.m;if(e){var r=Fe;(r.e??(r.e=[])).push({fn:t,effect:Ce,reaction:Se})}else{var n=Xr(t);return n}}function jl(t){return aa(),Kn(t)}function Bl(t){const e=qr(Rr,t,!0);return(r={})=>new Promise(n=>{r.outro?er(e,()=>{$t(e),n(void 0)}):($t(e),n(void 0))})}function Xr(t){return qr(Oo,t,!1)}function Kn(t){return qr(vn,t,!0)}function G(t,e=[],r=jr){const n=e.map(r);return gr(()=>t(...n.map(o)))}function gr(t,e=0){return qr(vn|hn|e,t,!0)}function Wt(t,e=!0){return qr(vn|Jt,t,!0,e)}function la(t){var e=t.teardown;if(e!==null){const r=Dr,n=Se;ga(!0),wt(null);try{e.call(null)}finally{ga(r),wt(n)}}}function ia(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var n=r.next;(r.f&Rr)!==0?r.parent=null:$t(r,e),r=n}}function ql(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Jt)===0&&$t(e),e=r}}function $t(t,e=!0){var r=!1;(e||(t.f&nl)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ca(t.nodes_start,t.nodes_end),r=!0),ia(t,e&&!r),kn(t,0),Gt(t,Dn);var n=t.transitions;if(n!==null)for(const s of n)s.stop();la(t);var a=t.parent;a!==null&&a.first!==null&&ua(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function ca(t,e){for(;t!==null;){var r=t===e?null:_n(t);t.remove(),t=r}}function ua(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function er(t,e){var r=[];Xn(t,r,!0),fa(r,()=>{$t(t),e&&e()})}function fa(t,e){var r=t.length;if(r>0){var n=()=>--r||e();for(var a of t)a.out(n)}else e()}function Xn(t,e,r){if((t.f&Qt)===0){if(t.f^=Qt,t.transitions!==null)for(const l of t.transitions)(l.is_global||r)&&e.push(l);for(var n=t.first;n!==null;){var a=n.next,s=(n.f&Mr)!==0||(n.f&Jt)!==0;Xn(n,e,s?r:!1),n=a}}}function Ir(t){da(t,!0)}function da(t,e){if((t.f&Qt)!==0){t.f^=Qt;for(var r=t.first;r!==null;){var n=r.next,a=(r.f&Mr)!==0||(r.f&Jt)!==0;da(r,a?e:!1),r=n}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let Jr=[],Jn=[];function va(){var t=Jr;Jr=[],fn(t)}function Il(){var t=Jn;Jn=[],fn(t)}function Zr(t){Jr.length===0&&queueMicrotask(va),Jr.push(t)}function Dl(){Jr.length>0&&va(),Jn.length>0&&Il()}function Ol(t){var e=Ce;if((e.f&On)===0){if((e.f&In)===0)throw t;e.fn(t)}else ha(t,e)}function ha(t,e){for(;e!==null;){if((e.f&In)!==0)try{e.fn(t);return}catch{}e=e.parent}throw t}let Qr=!1,$r=null,mr=!1,Dr=!1;function ga(t){Dr=t}let en=[],Ed=[],Se=null,Ht=!1;function wt(t){Se=t}let Ce=null;function zt(t){Ce=t}let at=null;function ma(t){Se!==null&&Se.f&Vn&&(at===null?at=[Se,[t]]:at[1].push(t))}let gt=null,Et=0,Pt=null;function Vl(t){Pt=t}let pa=1,yn=0,sr=!1;function ba(){return++pa}function xn(t){var f;var e=t.f;if((e&Zt)!==0)return!0;if((e&dr)!==0){var r=t.deps,n=(e&xt)!==0;if(r!==null){var a,s,l=(e&gn)!==0,i=n&&Ce!==null&&!sr,u=r.length;if(l||i){var c=t,d=c.parent;for(a=0;a<u;a++)s=r[a],(l||!((f=s==null?void 0:s.reactions)!=null&&f.includes(c)))&&(s.reactions??(s.reactions=[])).push(c);l&&(c.f^=gn),i&&d!==null&&(d.f&xt)===0&&(c.f^=xt)}for(a=0;a<u;a++)if(s=r[a],xn(s)&&ea(s),s.wv>t.wv)return!0}(!n||Ce!==null&&!sr)&&Gt(t,Ct)}return!1}function wa(t,e,r=!0){var n=t.reactions;if(n!==null)for(var a=0;a<n.length;a++){var s=n[a];at!=null&&at[1].includes(t)&&at[0]===Se||((s.f&It)!==0?wa(s,e,!1):e===s&&(r?Gt(s,Zt):(s.f&Ct)!==0&&Gt(s,dr),Qn(s)))}}function _a(t){var h;var e=gt,r=Et,n=Pt,a=Se,s=sr,l=at,i=Fe,u=Ht,c=t.f;gt=null,Et=0,Pt=null,sr=(c&xt)!==0&&(Ht||!mr||Se===null),Se=(c&(Jt|Rr))===0?t:null,at=null,pn(t.ctx),Ht=!1,yn++,t.f|=Vn;try{var d=(0,t.fn)(),f=t.deps;if(gt!==null){var v;if(kn(t,Et),f!==null&&Et>0)for(f.length=Et+gt.length,v=0;v<gt.length;v++)f[Et+v]=gt[v];else t.deps=f=gt;if(!sr)for(v=Et;v<f.length;v++)((h=f[v]).reactions??(h.reactions=[])).push(t)}else f!==null&&Et<f.length&&(kn(t,Et),f.length=Et);if(vr()&&Pt!==null&&!Ht&&f!==null&&(t.f&(It|dr|Zt))===0)for(v=0;v<Pt.length;v++)wa(Pt[v],t);return a!==null&&a!==t&&(yn++,Pt!==null&&(n===null?n=Pt:n.push(...Pt))),d}catch(g){Ol(g)}finally{gt=e,Et=r,Pt=n,Se=a,sr=s,at=l,pn(i),Ht=u,t.f^=Vn}}function Ul(t,e){let r=e.reactions;if(r!==null){var n=Zs.call(r,t);if(n!==-1){var a=r.length-1;a===0?r=e.reactions=null:(r[n]=r[a],r.pop())}}r===null&&(e.f&It)!==0&&(gt===null||!gt.includes(e))&&(Gt(e,dr),(e.f&(xt|gn))===0&&(e.f^=gn),Qo(e),kn(e,0))}function kn(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)Ul(t,r[n])}function Zn(t){var e=t.f;if((e&Dn)===0){Gt(t,Ct);var r=Ce,n=mr;Ce=t,mr=!0;try{(e&hn)!==0?ql(t):ia(t),la(t);var a=_a(t);t.teardown=typeof a=="function"?a:null,t.wv=pa;var s;et&&hl&&(t.f&Zt)!==0&&t.deps}finally{mr=n,Ce=r}}}function Wl(){try{cl()}catch(t){if($r!==null)ha(t,$r);else throw t}}function ya(){var t=mr;try{var e=0;for(mr=!0;en.length>0;){e++>1e3&&Wl();var r=en,n=r.length;en=[];for(var a=0;a<n;a++){var s=Yl(r[a]);Hl(s)}Kr.clear()}}finally{Qr=!1,mr=t,$r=null}}function Hl(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var n=t[r];(n.f&(Dn|Qt))===0&&xn(n)&&(Zn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?ua(n):n.fn=null))}}function Qn(t){Qr||(Qr=!0,queueMicrotask(ya));for(var e=$r=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(Rr|Jt))!==0){if((r&Ct)===0)return;e.f^=Ct}}en.push(e)}function Yl(t){for(var e=[],r=t;r!==null;){var n=r.f,a=(n&(Jt|Rr))!==0,s=a&&(n&Ct)!==0;if(!s&&(n&Qt)===0){(n&Oo)!==0?e.push(r):a?r.f^=Ct:xn(r)&&Zn(r);var l=r.first;if(l!==null){r=l;continue}}var i=r.parent;for(r=r.next;r===null&&i!==null;)r=i.next,i=i.parent}return e}function Gl(t){for(var e;;){if(Dl(),en.length===0)return Qr=!1,$r=null,e;Qr=!0,ya()}}function o(t){var e=t.f,r=(e&It)!==0;if(Se!==null&&!Ht){if(!(at!=null&&at[1].includes(t))||at[0]!==Se){var n=Se.deps;t.rv<yn&&(t.rv=yn,gt===null&&n!==null&&n[Et]===t?Et++:gt===null?gt=[t]:(!sr||!gt.includes(t))&&gt.push(t))}}else if(r&&t.deps===null&&t.effects===null){var a=t,s=a.parent;s!==null&&(s.f&xt)===0&&(a.f^=xt)}return r&&(a=t,xn(a)&&ea(a)),Dr&&Kr.has(t)?Kr.get(t):t.v}function Yt(t){var e=Ht;try{return Ht=!0,t()}finally{Ht=e}}const Kl=-7169;function Gt(t,e){t.f=t.f&Kl|e}function Xl(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ar in t)$n(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&ar in r&&$n(r)}}}function $n(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{$n(t[n],e)}catch{}const r=un(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=qo(r);for(let a in n){const s=n[a].get;if(s)try{s.call(t)}catch{}}}}}const Jl=["touchstart","touchmove"];function Zl(t){return Jl.includes(t)}let xa=!1;function Ql(){xa||(xa=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function eo(t){var e=Se,r=Ce;wt(null),zt(null);try{return t()}finally{wt(e),zt(r)}}function $l(t,e,r,n=r){t.addEventListener(e,()=>eo(r));const a=t.__on_r;a?t.__on_r=()=>{a(),n(!0)}:t.__on_r=()=>n(!0),Ql()}const ka=new Set,to=new Set;function ei(t,e,r,n={}){function a(s){if(n.capture||tn.call(e,s),!s.cancelBubble)return eo(()=>r==null?void 0:r.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Zr(()=>{e.addEventListener(t,a,n)}):e.addEventListener(t,a,n),a}function pr(t,e,r,n,a){var s={capture:n,passive:a},l=ei(t,e,r,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&sa(()=>{e.removeEventListener(t,l,s)})}function tt(t){for(var e=0;e<t.length;e++)ka.add(t[e]);for(var r of to)r(t)}function tn(t){var k;var e=this,r=e.ownerDocument,n=t.type,a=((k=t.composedPath)==null?void 0:k.call(t))||[],s=a[0]||t.target,l=0,i=t.__root;if(i){var u=a.indexOf(i);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var c=a.indexOf(e);if(c===-1)return;u<=c&&(l=u)}if(s=a[l]||t.target,s!==e){Qs(t,"currentTarget",{configurable:!0,get(){return s||r}});var d=Se,f=Ce;wt(null),zt(null);try{for(var v,h=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var p=s["__"+n];if(p!=null&&(!s.disabled||t.target===s))if(fr(p)){var[m,...b]=p;m.apply(s,[t,...b])}else p.call(s,t)}catch(z){v?h.push(z):v=z}if(t.cancelBubble||g===e||g===null)break;s=g}if(v){for(let z of h)queueMicrotask(()=>{throw z});throw v}}finally{t.__root=e,delete t.currentTarget,wt(d),zt(f)}}}function ro(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function br(t,e){var r=Ce;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function D(t,e){var r=(e&Go)!==0,n=(e&Al)!==0,a,s=!t.startsWith("<!>");return()=>{a===void 0&&(a=ro(s?t:"<!>"+t),r||(a=kt(a)));var l=n||ra?document.importNode(a,!0):a.cloneNode(!0);if(r){var i=kt(l),u=l.lastChild;br(i,u)}else br(l,l);return l}}function ti(t,e,r="svg"){var n=!t.startsWith("<!>"),a=(e&Go)!==0,s=`<${r}>${n?t:"<!>"+t}</${r}>`,l;return()=>{if(!l){var i=ro(s),u=kt(i);if(a)for(l=document.createDocumentFragment();kt(u);)l.appendChild(kt(u));else l=kt(u)}var c=l.cloneNode(!0);if(a){var d=kt(c),f=c.lastChild;br(d,f)}else br(c,c);return c}}function ge(t,e){return ti(t,e,"svg")}function ri(t=""){{var e=wn(t+"");return br(e,e),e}}function Ne(){var t=document.createDocumentFragment(),e=document.createComment(""),r=wn();return t.append(e,r),br(e,r),t}function C(t,e){t!==null&&t.before(e)}let no=!0;function Le(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function ni(t,e){return oi(t,e)}const Or=new Map;function oi(t,{target:e,anchor:r,props:n={},events:a,context:s,intro:l=!0}){Rl();var i=new Set,u=f=>{for(var v=0;v<f.length;v++){var h=f[v];if(!i.has(h)){i.add(h);var g=Zl(h);e.addEventListener(h,tn,{passive:g});var p=Or.get(h);p===void 0?(document.addEventListener(h,tn,{passive:g}),Or.set(h,1)):Or.set(h,p+1)}}};u(qn(ka)),to.add(u);var c=void 0,d=Bl(()=>{var f=r??e.appendChild(wn());return Wt(()=>{if(s){ve({});var v=Fe;v.c=s}a&&(n.$$events=a),no=l,c=t(f,n)||{},no=!0,s&&he()}),()=>{var g;for(var v of i){e.removeEventListener(v,tn);var h=Or.get(v);--h===0?(document.removeEventListener(v,tn),Or.delete(v)):Or.set(v,h)}to.delete(u),f!==r&&((g=f.parentNode)==null||g.removeChild(f))}});return ai.set(c,d),c}let ai=new WeakMap;const oo=0,En=1,ao=2;function si(t,e,r,n,a){var s=t,l=vr(),i=Fe,u=lt,c,d,f,v=l?hr(void 0):bn(void 0,!1,!1),h=l?hr(void 0):bn(void 0,!1,!1),g=!1;function p(b,k){g=!0,k&&(zt(m),wt(m),pn(i));try{b===oo&&r&&(c?Ir(c):c=Wt(()=>r(s))),b===ao&&a&&(f?Ir(f):f=Wt(()=>a(s,h))),b!==oo&&c&&er(c,()=>c=null),b!==En&&d&&er(d,()=>d=null),b!==ao&&f&&er(f,()=>f=null)}finally{k&&(pn(null),wt(null),zt(null),Gl())}}var m=gr(()=>{if(u!==(u=e())){if(el(u)){var b=u;g=!1,b.then(k=>{b===u&&(Br(v,k),p(En,!0))},k=>{if(b===u&&(Br(h,k),p(ao,!0),!a))throw h.v}),Zr(()=>{g||p(oo,!0)})}else Br(v,u),p(En,!1);return()=>u=lt}})}function I(t,e,[r,n]=[0,0]){var a=t,s=null,l=null,i=lt,u=r>0?Mr:0,c=!1;const d=(v,h=!0)=>{c=!0,f(h,v)},f=(v,h)=>{i!==(i=v)&&(i?(s?Ir(s):h&&(s=Wt(()=>h(a))),l&&er(l,()=>{l=null})):(l?Ir(l):h&&(l=Wt(()=>h(a,[r+1,n]))),s&&er(s,()=>{s=null})))};gr(()=>{c=!1,e(d),c||f(null,null)},u)}function Sn(t,e,r){var n=t,a=lt,s,l=vr()?al:Ho;gr(()=>{l(a,a=e())&&(s&&er(s),s=Wt(()=>r(n)))})}function ft(t,e){return e}function li(t,e,r,n){for(var a=[],s=e.length,l=0;l<s;l++)Xn(e[l].e,a,!0);var i=s>0&&a.length===0&&r!==null;if(i){var u=r.parentNode;Ml(u),u.append(r),n.clear(),lr(t,e[0].prev,e[s-1].next)}fa(a,()=>{for(var c=0;c<s;c++){var d=e[c];i||(n.delete(d.k),lr(t,d.prev,d.next)),$t(d.e,!i)}})}function it(t,e,r,n,a,s=null){var l=t,i={flags:e,items:new Map,first:null},u=(e&Yo)!==0;if(u){var c=t;l=c.appendChild(wn())}var d=null,f=!1,v=Zo(()=>{var h=r();return fr(h)?h:h==null?[]:qn(h)});gr(()=>{var h=o(v),g=h.length;f&&g===0||(f=g===0,ii(h,i,l,a,e,n,r),s!==null&&(g===0?d?Ir(d):d=Wt(()=>s(l)):d!==null&&er(d,()=>{d=null})),o(v))})}function ii(t,e,r,n,a,s,l){var K,q,Q,re;var i=(a&ml)!==0,u=(a&(Wn|Hn))!==0,c=t.length,d=e.items,f=e.first,v=f,h,g=null,p,m=[],b=[],k,z,y,_;if(i)for(_=0;_<c;_+=1)k=t[_],z=s(k,_),y=d.get(z),y!==void 0&&((K=y.a)==null||K.measure(),(p??(p=new Set)).add(y));for(_=0;_<c;_+=1){if(k=t[_],z=s(k,_),y=d.get(z),y===void 0){var w=v?v.e.nodes_start:r;g=ui(w,e,g,g===null?e.first:g.next,k,z,_,n,a,l),d.set(z,g),m=[],b=[],v=g.next;continue}if(u&&ci(y,k,_,a),(y.e.f&Qt)!==0&&(Ir(y.e),i&&((q=y.a)==null||q.unfix(),(p??(p=new Set)).delete(y))),y!==v){if(h!==void 0&&h.has(y)){if(m.length<b.length){var E=b[0],L;g=E.prev;var F=m[0],O=m[m.length-1];for(L=0;L<m.length;L+=1)Ea(m[L],E,r);for(L=0;L<b.length;L+=1)h.delete(b[L]);lr(e,F.prev,O.next),lr(e,g,F),lr(e,O,E),v=E,g=O,_-=1,m=[],b=[]}else h.delete(y),Ea(y,v,r),lr(e,y.prev,y.next),lr(e,y,g===null?e.first:g.next),lr(e,g,y),g=y;continue}for(m=[],b=[];v!==null&&v.k!==z;)(v.e.f&Qt)===0&&(h??(h=new Set)).add(v),b.push(v),v=v.next;if(v===null)continue;y=v}m.push(y),g=y,v=y.next}if(v!==null||h!==void 0){for(var X=h===void 0?[]:qn(h);v!==null;)(v.e.f&Qt)===0&&X.push(v),v=v.next;var oe=X.length;if(oe>0){var ce=(a&Yo)!==0&&c===0?r:null;if(i){for(_=0;_<oe;_+=1)(Q=X[_].a)==null||Q.measure();for(_=0;_<oe;_+=1)(re=X[_].a)==null||re.fix()}li(e,X,ce,d)}}i&&Zr(()=>{var ae;if(p!==void 0)for(y of p)(ae=y.a)==null||ae.apply()}),Ce.first=e.first&&e.first.e,Ce.last=g&&g.e}function ci(t,e,r,n){(n&Wn)!==0&&Br(t.v,e),(n&Hn)!==0?Br(t.i,r):t.i=r}function ui(t,e,r,n,a,s,l,i,u,c){var d=(u&Wn)!==0,f=(u&pl)===0,v=d?f?bn(a,!1,!1):hr(a):a,h=(u&Hn)===0?l:hr(l),g={i:h,v,k:s,a:null,e:null,prev:r,next:n};try{return g.e=Wt(()=>i(t,v,h,c),Ll),g.e.prev=r&&r.e,g.e.next=n&&n.e,r===null?e.first=g:(r.next=g,r.e.next=g.e),n!==null&&(n.prev=g,n.e.prev=g.e),g}finally{}}function Ea(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,a=e?e.e.nodes_start:r,s=t.e.nodes_start;s!==n;){var l=_n(s);a.before(s),s=l}}function lr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function dt(t,e,r=!1,n=!1,a=!1){var s=t,l="";G(()=>{var i=Ce;if(l!==(l=e()??"")&&(i.nodes_start!==null&&(ca(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),l!=="")){var u=l+"";r?u=`<svg>${u}</svg>`:n&&(u=`<math>${u}</math>`);var c=ro(u);if((r||n)&&(c=kt(c)),br(kt(c),c.lastChild),r||n)for(;kt(c);)s.before(kt(c));else s.before(c)}})}function Vr(t,e,...r){var n=t,a=bt,s;gr(()=>{a!==(a=e())&&(s&&($t(s),s=null),s=Wt(()=>a(n,...r)))},Mr)}function so(t,e,r){var n=t,a,s;gr(()=>{a!==(a=e())&&(s&&(er(s),s=null),a&&(s=Wt(()=>r(n,a))))},Mr)}function Sa(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=Sa(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function fi(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=Sa(t))&&(n&&(n+=" "),n+=e);return n}function di(t){return typeof t=="object"?fi(t):t??""}const Aa=[...`
\r\f \v\uFEFF`];function vi(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var a in r)if(r[a])n=n?n+" "+a:a;else if(n.length)for(var s=a.length,l=0;(l=n.indexOf(a,l))>=0;){var i=l+s;(l===0||Aa.includes(n[l-1]))&&(i===n.length||Aa.includes(n[i]))?n=(l===0?"":n.substring(0,l))+n.substring(i+1):l=i}}return n===""?null:n}function hi(t,e){return t==null?null:String(t)}function ct(t,e,r,n,a,s){var l=t.__className;if(l!==r||l===void 0){var i=vi(r,n,s);i==null?t.removeAttribute("class"):e?t.className=i:t.setAttribute("class",i),t.__className=r}else if(s&&a!==s)for(var u in s){var c=!!s[u];(a==null||c!==!!a[u])&&t.classList.toggle(u,c)}return s}function Tt(t,e,r,n){var a=t.__style;if(a!==e){var s=hi(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return n}const gi=Symbol("is custom element"),mi=Symbol("is html");function S(t,e,r,n){var a=pi(t);a[e]!==(a[e]=r)&&(e==="loading"&&(t[ol]=r),r==null?t.removeAttribute(e):typeof r!="string"&&bi(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function pi(t){return t.__attributes??(t.__attributes={[gi]:t.nodeName.includes("-"),[mi]:t.namespaceURI===Cl})}var Ca=new Map;function bi(t){var e=Ca.get(t.nodeName);if(e)return e;Ca.set(t.nodeName,e=[]);for(var r,n=t,a=Element.prototype;a!==n;){r=qo(n);for(var s in r)r[s].set&&e.push(s);n=un(n)}return e}const wi=()=>performance.now(),tr={tick:t=>requestAnimationFrame(t),now:()=>wi(),tasks:new Set};function za(){const t=tr.now();tr.tasks.forEach(e=>{e.c(t)||(tr.tasks.delete(e),e.f())}),tr.tasks.size!==0&&tr.tick(za)}function _i(t){let e;return tr.tasks.size===0&&tr.tick(za),{promise:new Promise(r=>{tr.tasks.add(e={c:t,f:r})}),abort(){tr.tasks.delete(e)}}}function An(t,e){eo(()=>{t.dispatchEvent(new CustomEvent(e))})}function yi(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Pa(t){const e={},r=t.split(";");for(const n of r){const[a,s]=n.split(":");if(!a||s===void 0)break;const l=yi(a.trim());e[l]=s.trim()}return e}const xi=t=>t;function Ta(t,e,r,n){var a=(t&kl)!==0,s=(t&El)!==0,l=a&&s,i=(t&Sl)!==0,u=l?"both":a?"in":"out",c,d=e.inert,f=e.style.overflow,v,h;function g(){var z=Se,y=Ce;wt(null),zt(null);try{return c??(c=r()(e,(n==null?void 0:n())??{},{direction:u}))}finally{wt(z),zt(y)}}var p={is_global:i,in(){var z;if(e.inert=d,!a){h==null||h.abort(),(z=h==null?void 0:h.reset)==null||z.call(h);return}s||v==null||v.abort(),An(e,"introstart"),v=lo(e,g(),h,1,()=>{An(e,"introend"),v==null||v.abort(),v=c=void 0,e.style.overflow=f})},out(z){if(!s){z==null||z(),c=void 0;return}e.inert=!0,An(e,"outrostart"),h=lo(e,g(),v,0,()=>{An(e,"outroend"),z==null||z()})},stop:()=>{v==null||v.abort(),h==null||h.abort()}},m=Ce;if((m.transitions??(m.transitions=[])).push(p),a&&no){var b=i;if(!b){for(var k=m.parent;k&&(k.f&Mr)!==0;)for(;(k=k.parent)&&(k.f&hn)===0;);b=!k||(k.f&On)!==0}b&&Xr(()=>{Yt(()=>p.in())})}}function lo(t,e,r,n,a){var s=n===1;if(Lr(e)){var l,i=!1;return Zr(()=>{if(!i){var m=e({direction:s?"in":"out"});l=lo(t,m,r,n,a)}}),{abort:()=>{i=!0,l==null||l.abort()},deactivate:()=>l.deactivate(),reset:()=>l.reset(),t:()=>l.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return a(),{abort:bt,deactivate:bt,reset:bt,t:()=>n};const{delay:u=0,css:c,tick:d,easing:f=xi}=e;var v=[];if(s&&r===void 0&&(d&&d(0,1),c)){var h=Pa(c(0,1));v.push(h,h)}var g=()=>1-n,p=t.animate(v,{duration:u,fill:"forwards"});return p.onfinish=()=>{p.cancel();var m=(r==null?void 0:r.t())??1-n;r==null||r.abort();var b=n-m,k=e.duration*Math.abs(b),z=[];if(k>0){var y=!1;if(c)for(var _=Math.ceil(k/16.666666666666668),w=0;w<=_;w+=1){var E=m+b*f(w/_),L=Pa(c(E,1-E));z.push(L),y||(y=L.overflow==="hidden")}y&&(t.style.overflow="hidden"),g=()=>{var F=p.currentTime;return m+b*f(F/k)},d&&_i(()=>{if(p.playState!=="running")return!1;var F=g();return d(F,1-F),!0})}p=t.animate(z,{duration:k,fill:"forwards"}),p.onfinish=()=>{g=()=>n,d==null||d(n,1-n),a()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=bt)},deactivate:()=>{a=bt},reset:()=>{n===0&&(d==null||d(1,0))},t:()=>g()}}function Na(t,e,r=e){var n=vr();$l(t,"input",a=>{var s=a?t.defaultValue:t.value;if(s=io(t)?co(s):s,r(s),n&&s!==(s=e())){var l=t.selectionStart,i=t.selectionEnd;t.value=s??"",i!==null&&(t.selectionStart=l,t.selectionEnd=Math.min(i,t.value.length))}}),Yt(e)==null&&t.value&&r(io(t)?co(t.value):t.value),Kn(()=>{var a=e();io(t)&&a===co(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function io(t){var e=t.type;return e==="number"||e==="range"}function co(t){return t===""?null:+t}const jn=class jn{constructor(e){cn(this,Fn);cn(this,cr,new WeakMap);cn(this,Gr);cn(this,an);Bo(this,an,e)}observe(e,r){var n=nr(this,cr).get(e)||new Set;return n.add(r),nr(this,cr).set(e,n),Xs(this,Fn,Js).call(this).observe(e,nr(this,an)),()=>{var a=nr(this,cr).get(e);a.delete(r),a.size===0&&(nr(this,cr).delete(e),nr(this,Gr).unobserve(e))}}};cr=new WeakMap,Gr=new WeakMap,an=new WeakMap,Fn=new WeakSet,Js=function(){return nr(this,Gr)??Bo(this,Gr,new ResizeObserver(e=>{for(var r of e){jn.entries.set(r.target,r);for(var n of nr(this,cr).get(r.target)||[])n(r)}}))},Nr(jn,"entries",new WeakMap);let uo=jn;var ki=new uo({box:"border-box"});function La(t,e,r){var n=ki.observe(t,()=>r(t[e]));Xr(()=>(Yt(()=>r(t[e])),n))}function Ra(t,e){return t===e||(t==null?void 0:t[ar])===e}function wr(t={},e,r,n){return Xr(()=>{var a,s;return Kn(()=>{a=s,s=[],Yt(()=>{t!==r(...s)&&(e(t,...s),a&&Ra(r(...a),t)&&e(null,...a))})}),()=>{Zr(()=>{s&&Ra(r(...s),t)&&e(null,...s)})}}),t}function Ei(t=!1){const e=Fe,r=e.l.u;if(!r)return;let n=()=>Xl(e.s);if(t){let a=0,s={};const l=jr(()=>{let i=!1;const u=e.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],i=!0);return i&&a++,a});n=()=>o(l)}r.b.length&&jl(()=>{Ma(e,n),fn(r.b)}),le(()=>{const a=Yt(()=>r.m.map(tl));return()=>{for(const s of a)typeof s=="function"&&s()}}),r.a.length&&le(()=>{Ma(e,n),fn(r.a)})}function Ma(t,e){if(t.l.s)for(const r of t.l.s)o(r);e()}let Cn=!1;function Si(t){var e=Cn;try{return Cn=!1,[t(),Cn]}finally{Cn=e}}const Ai={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Ur(t,e,r){return new Proxy({props:t,exclude:e},Ai)}const Ci={get(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if(Lr(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(t,e,r){let n=t.props.length;for(;n--;){let a=t.props[n];Lr(a)&&(a=a());const s=or(a,e);if(s&&s.set)return s.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if(Lr(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const a=or(n,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(t,e){if(e===ar||e===Uo)return!1;for(let r of t.props)if(Lr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Lr(r)&&(r=r()),!!r){for(const n in r)e.includes(n)||e.push(n);for(const n of Object.getOwnPropertySymbols(r))e.includes(n)||e.push(n)}return e}};function Wr(...t){return new Proxy({props:t},Ci)}function Fa(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function T(t,e,r,n){var w;var a=(r&bl)!==0,s=!Fr||(r&wl)!==0,l=(r&yl)!==0,i=(r&xl)!==0,u=!1,c;l?[c,u]=Si(()=>t[e]):c=t[e];var d=ar in t||Uo in t,f=l&&(((w=or(t,e))==null?void 0:w.set)??(d&&e in t&&(E=>t[e]=E)))||void 0,v=n,h=!0,g=!1,p=()=>(g=!0,h&&(h=!1,i?v=Yt(n):v=n),v);c===void 0&&n!==void 0&&(f&&s&&ul(),c=p(),f&&f(c));var m;if(s)m=()=>{var E=t[e];return E===void 0?p():(h=!0,g=!1,E)};else{var b=(a?jr:Zo)(()=>t[e]);b.f|=rl,m=()=>{var E=o(b);return E!==void 0&&(v=void 0),E===void 0?v:E}}if((r&_l)===0&&s)return m;if(f){var k=t.$$legacy;return function(E,L){return arguments.length>0?((!s||!L||k||u)&&f(L?m():E),E):m()}}var z=!1,y=bn(c),_=jr(()=>{var E=m(),L=o(y);return z?(z=!1,L):y.v=E});return l&&o(_),a||(_.equals=Un),function(E,L){if(arguments.length>0){const F=L?o(_):s&&l?Te(E):E;if(!_.equals(F)){if(z=!0,N(y,F),g&&v!==void 0&&(v=F),Fa(_))return E;Yt(()=>o(_))}return E}return Fa(_)?_.v:o(_)}}function zi(t){Fe===null&&Xo(),Fr&&Fe.l!==null?Pi(Fe).m.push(t):le(()=>{const e=Yt(t);if(typeof e=="function")return e})}function Pi(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ti="5";typeof window<"u"&&((Hs=window.__svelte??(window.__svelte={})).v??(Hs.v=new Set)).add(Ti),gl();function ja(t,e){Ie(t)&&ja(t.v,e);const r=vo(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const n=(r[1]-r[0])/e;return Je.seq(r[0],r[1],n)}function Ba(t){if(Ie(t))return Ba(t.v);const e=new Je.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Je(e)}function fo(t,e){if(Ie(t))return fo(t.v,e);e===void 0&&(e=.1);const r=vo(t),n=(r[1]-r[0])*e;return[r[0]-n,r[1]+n]}function vo(t){if(Ie(t))return vo(t.v);let e=t[0],r=t[0];for(let n=1;n<t.length;n++)t[n]<e&&(e=t[n]),t[n]>r&&(r=t[n]);return[e,r]}function qa(t,e){return Ie(t)?qa(t.v,e):Math.sqrt(Ia(t,e))}function Ia(t,e){if(e===void 0&&(e=!1),Ie(t))return Ia(t.v);const r=ho(t);let n=0;for(let a=0;a<t.length;a++){const s=t[a]-r;n=n+s*s}return n/(e?t.length:t.length-1)}function ho(t){return Ie(t)?ho(t.v):Da(t)/t.length}function Da(t){if(Ie(t))return Da(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function Oa(t){if(Ie(t))return Oa(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Hr(t){return Ie(t)||Dt(t)?t.v[go(t.v)-1]:t[go(t)-1]}function go(t){if(Ie(t)||Dt(t))return go(t.v);let e=1,r=t[0];for(let n=2;n<=t.length;n++)t[n-1]<r&&(e=n,r=t[n-1]);return e}function _r(t){return Ie(t)||Dt(t)?t.v[mo(t.v)-1]:t[mo(t)-1]}function mo(t){if(Ie(t)||Dt(t))return mo(t.v);let e=1,r=t[0];for(let n=2;n<=t.length;n++)t[n-1]>r&&(e=n,r=t[n-1]);return e}function Va(t,e=0,r=1){let n=Je.zeros(t);for(let a=0;a<t;a++)n.v[a]=e+Math.random()*(r-e);return n}function Ua(t,e=0,r=1){let n=Je.zeros(t);for(let a=0;a<t;a++){const s=Math.sqrt(-2*Math.log(Math.random())),l=2*Math.PI*Math.random();n.v[a]=s*Math.sin(l)*r+e}return n}function Wa(t){const e=t.nrows,r=t.ncols;if(e<r){const l=Wa(t.subset([],vt.seq(1,e)));return{Q:l.Q,R:Li(l.Q,t)}}let n=Nt.eye(e),a=t.t();for(let l=1;l<=r;l++)for(let i=e;i>=l+1;i--){const u=a.v.subarray((i-2)*r,i*r),c=n.v.subarray((i-2)*e,i*e),d=u.slice(),f=c.slice(),[v,h,g]=Ni(d[l-1],d[l-1+r]);for(let p=0;p<r;p++)u[p]=d[p]*v+d[p+r]*h,u[p+r]=d[p]*-h+d[p+r]*v,c[p]=f[p]*v+f[p+e]*h,c[p+e]=f[p]*-h+f[p+e]*v;for(let p=r;p<e;p++)c[p]=f[p]*v+f[p+e]*h,c[p+e]=f[p]*-h+f[p+e]*v}const s=vt.seq(1,r);return{Q:e===r?n:n.subset([],s),R:e===r?a.t():a.subset([],s).t()}}function Ni(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const s=e/t,l=Math.sqrt(1+s*s),i=1/l;return[i,s*i,t*l]}const r=t/e,n=Math.sqrt(1+r*r),a=1/n;return[r*a,a,e*n]}function Ha(t){return typeof t=="number"}function Li(t,e){if(e===void 0&&(e=t),!ir(t)||!ir(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,n=t.ncols,a=e.nrows,s=e.ncols,l=n,i=s,u=r,c=new Float64Array(l*i);for(let d=0;d<i;d++){const f=e.v.subarray(d*a,(d+1)*a),v=c.subarray(d*l,(d+1)*l);for(let h=0;h<l;h++){const g=t.v.subarray(h*r,(h+1)*r);let p=0;for(let m=0;m<u;m++)p+=g[m]*f[m];v[h]=p}}return new Nt(c,l,i)}function Ya(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Je(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new Nt(t.v,e,r)}function ir(t){return t&&t.constructor===Nt}function Ri(t,e,r){return new Nt(new Float64Array(t),e,r)}const fe=class fe{constructor(e,r,n){if(!ArrayBuffer.isView(e)||e.constructor!==fe.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||n===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*n)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=n}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return fe.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const n=fe.eye(e),a=fe.eye(e),s=this.t(),l=s.v[(e-1)*e+(e-1)],i=e-1;for(let u=0;u<e;u++)a.v[i*e+u]=n.v[i*e+u]/l;for(let u=e-2;u>=0;u--){let c=n.getcolumn(u+1);const d=s.getcolref(u+1);for(let f=u+1;f<e;f++){const v=a.getcolumn(f+1);c=c.subtract(v.mult(d[f]))}a.v.set(c.divide(d[u]).v,u*e)}return a.t()}if(this.islowertriangular()){const n=this.diag();if(Oa(n)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const a=fe.eye(e),s=fe.eye(e),l=this.t(),i=0,u=l.v[0];for(let c=0;c<e;c++)s.v[i*e+c]=a.v[i*e+c]/u;for(let c=1;c<e;c++){let d=a.getcolumn(c+1);const f=l.getcolref(c+1);for(let v=0;v<c;v++){const h=s.getcolumn(v+1);d=d.subtract(h.mult(f[v]))}s.v.set(d.divide(f[c]).v,c*e)}return s.t()}const r=Wa(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>fe.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>fe.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let n=0;n<e;n++)r[n]=this.getcolref(n+1)[n];return new Je(r)}t(){const e=this.nrows,r=this.ncols,n=new fe.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let a=0;a<this.ncols;a++){const s=this.v.subarray(a*this.nrows,(a+1)*this.nrows);for(let l=0;l<this.nrows;l++)n[l*r+a]=s[l]}return new fe(n,r,e)}for(let a=0;a<this.nrows;a++){const s=n.subarray(a*r,(a+1)*r);for(let l=0;l<this.ncols;l++)s[l]=this.v[l*this.nrows+a]}return new fe(n,r,e)}dot(e){if(Ie(e))return new fe(wo(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(ir(e))return new fe(wo(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,n){if(ir(e))return new fe(po(this.v,e.v,r),this.nrows,this.ncols);if(Ha(e))return new fe(bo(this.v,e,r),this.nrows,this.ncols);if(!Ie(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(n===void 0&&(n=e.length===this.ncols?2:1),n===2&&e.length===this.ncols){const a=new fe.valuesConstructor(this.v.length);for(let s=0;s<this.ncols;s++)a.set(bo(this.getcolref(s+1),e.v[s],r),s*this.nrows);return new fe(a,this.nrows,this.ncols)}if(n===1&&e.length===this.nrows){const a=new fe.valuesConstructor(this.v.length);for(let s=0;s<this.ncols;s++)a.set(po(this.getcolref(s+1),e.v,r),s*this.nrows);return new fe(a,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,n)=>r+n)}subtract(e){return this.op(e,(r,n)=>r-n)}mult(e){return this.op(e,(r,n)=>r*n)}divide(e){return this.op(e,(r,n)=>r/n)}apply(e,r){if(r===void 0&&(r=2),r==2){const n=this.ncols,a=new fe.valuesConstructor(n);for(let s=0;s<n;s++)a[s]=e(this.getcolref(s+1));return new Je(a)}if(r==1)return this.t().apply(e,2);if(r==0){const n=this.v.length,a=new fe.valuesConstructor(n);for(let s=0;s<n;s++)a[s]=e(this.v[s]);return new fe(a,this.nrows,this.ncols)}}replace(e,r,n){typeof r=="number"&&(r=[r]),r.length===0&&(r=vt.seq(1,this.nrows)),Dt(r)||(r=Ot(r)),typeof n=="number"&&(n=[n]),n.length===0&&(n=vt.seq(1,this.ncols)),Dt(n)||(n=Ot(n));const a=r.length,s=n.length;if(Hr(r)<1||_r(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Hr(n)<1||_r(n)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==a||e.ncols!==s)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let l=0;l<n.length;l++){const i=e.getcolref(l+1),u=(n.v[l]-1)*this.nrows;for(let c=0;c<r.length;c++){const d=r.v[c];this.v[u+d-1]=i[c]}}return this}copy(){return new fe(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Je.valuesConstructor(this.ncols);for(let n=0;n<this.ncols;n++)r[n]=this.getcolref(n+1)[e-1];return new Je(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Je(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Ot([e])),typeof r=="number"&&(r=Ot([r])),Array.isArray(e)&&(e=e.length===0?null:Ot(e)),Array.isArray(r)&&(r=r.length===0?null:Ot(r)),e!==null&&!Dt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Dt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Hr(e)<1||_r(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Hr(r)<1||_r(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const i=r.length,u=this.nrows,c=new fe.valuesConstructor(u*i);for(let d=0;d<r.length;d++)c.set(this.v.slice((r.v[d]-1)*this.nrows,r.v[d]*this.nrows),d*this.nrows);return new fe(c,u,i)}if(r==null)return this.t().subset(r,e).t();const n=e.length,a=r.length,s=new fe.valuesConstructor(n*a);let l=new fe.valuesConstructor(n);for(let i=0;i<a;i++){const u=this.v.subarray((r.v[i]-1)*this.nrows,r.v[i]*this.nrows);for(let c=0;c<n;c++)l[c]=u[e.v[c]-1];s.set(l,i*n)}return new fe(s,n,a)}toString(e){function r(l,i){return" ".repeat(i-l.length)+l}e===void 0&&(e=2),this.ncols;const n=Math.round(Math.abs(Math.log10(_r(this.v))))+e+3;let a="";const s=this.t();for(let l=1;l<=s.ncols;l++)a+=Array.from(s.getcolref(l)).map(i=>r(i.toFixed(e),n)).join(" ")+`
`;return a}toCSV(e,r,n,a){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const s=a!=null&&a.length>0,l=n!=null&&n.length>0;if(s&&a.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(l&&n.length!==this.ncols+(s?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const i=this.t();let u=l?n.join(e)+`
`:"";for(let c=1;c<=i.ncols;c++)u=u+(s?a[c-1]+e:"")+i.getcolref(c).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,n,a){return Ya(Ua(e*r,n,a),e,r)}static rand(e,r,n,a){return Ya(Va(e*r,n,a),e,r)}static eye(e,r){r===void 0&&(r=e);const n=new Float64Array(e*r);for(let a=0;a<Math.min(e,r);a++)n[a*e+a]=1;return new fe(n,e,r)}static diagm(e){if(!Ie(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,n=new Float64Array(r*r);for(let a=0;a<r;a++)n[a*r+a]=e.v[a];return new fe(n,r,r)}static zeros(e,r){return r===void 0&&(r=e),new fe(new Float64Array(e*r),e,r)}static ones(e,r){return fe.fill(1,e,r)}static fill(e,r,n){n===void 0&&(n=r);const a=new Float64Array(r*n);for(let s=0;s<a.length;s++)a[s]=e;return new fe(a,r,n)}static outer(e,r,n){if(Array.isArray(e)&&(e=mt(e)),Array.isArray(r)&&(r=mt(r)),!Ie(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ie(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const a=fe.zeros(e.length,r.length);for(let s=0;s<r.length;s++){const l=r.v[s],i=a.getcolref(s+1);for(let u=0;u<e.length;u++)i[u]=n(e.v[u],l)}return a}static parseCSV(e,r,n,a){function s(m){return m.some(b=>Number.isNaN(Number.parseFloat(b.trim())))}r===void 0&&(r=",");const l=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let i=e.split(/\n/),u=[],c=0;const d=i[0].split(r);(n||n===void 0&&s(d))&&(u=d,c=1),i=i.filter(m=>m.trim().length>1);let f=[],v=0;a&&(v=1);const h=i.length-c,g=d.length-v;if(h<1)throw Error("Data file should contain at least 1 row with values.");if(g<1)throw Error("Data file should contain at least 1 column with values.");const p=fe.zeros(g,h);for(let m=c;m<h+c;m++){const b=i[m].split(r);let k;if(a?(f[m-c]=b[0],k=b.slice(1).map(z=>Number.parseFloat(z.trim().replace(l,".")))):k=b.map(z=>Number.parseFloat(z.trim().replace(l,"."))),k.some(z=>Number.isNaN(z)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(k.length!=g)throw Error("Wrong number of values in row #"+m);p.v.set(new Float64Array(k),(m-c)*g)}return{values:p.t(),header:u,labels:f,sep:r,dec:l}}};Nr(fe,"valuesConstructor",Float64Array),Nr(fe,"TOLERANCE",Math.pow(10,-9));let Nt=fe;function Ie(t){return t&&t.constructor===Je}function mt(t){return new Je(new Float64Array(t))}const Ze=class Ze{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new vt.valuesConstructor(this.length);let n=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[n]=a+1,n=n+1);return new vt(r.subarray(0,n))}filter(e){const r=new Ze.valuesConstructor(this.length);let n=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[n]=this.v[a],n=n+1);return new Ze(r.subarray(0,n))}shuffle(){return new Ze(Ja(this.v))}sort(e){return new Ze(Za(this.v,e))}sortind(e){return new vt(Qa(this.v,e))}rep(e){return Ka(this,e)}repeach(e){return Xa(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=vt.seq(1,this.length)),Dt(r)||(r=Ot(r));const n=r.length;if(Hr(r)<1||_r(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==n)throw Error('Vector.replace: length of "x" does not match the indices.');for(let a=0;a<r.length;a++){const s=r.v[a];this.v[s-1]=e.v[a]}return this}subset(e){if(typeof e=="number"&&(e=Ot([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?vt.bool2ind(e):Ot(e)),!Dt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,n=Ze.zeros(r);for(let a=0;a<r;a++){if(e.v[a]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[a]>this.length)throw Error("subset: index exceeds the length of the vector.");n.v[a]=this.v[e.v[a]-1]}return n}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new Ze(this.v.slice(e-1,r))}copy(){return new Ze(this.v.slice())}dot(e){return e===void 0&&(e=this),wo(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Ie(e))return new Ze(po(this.v,e.v,r));if(Ha(e))return new Ze(bo(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,n)=>r+n)}subtract(e){return this.op(e,(r,n)=>r-n)}mult(e){return this.op(e,(r,n)=>r*n)}divide(e){return this.op(e,(r,n)=>r/n)}apply(e){const r=this.v.length,n=Ze.zeros(r);for(let a=0;a<r;a++)n.v[a]=e(this.v[a]);return n}static c(...e){if(e.length===1)return e[0];const r=e.reduce((s,l)=>s+(typeof l=="number"?1:l.length),0),n=new Ze.valuesConstructor(r);let a=0;for(const s of e)typeof s=="number"?(n[a]=s,a+=1):(n.set(Ie(s)?s.v:new Ze.valuesConstructor(s),a),a+=typeof s=="number"?1:s.length);return new Ze(n)}static seq(e,r,n){return Ga(e,r,n,Ze)}static randn(e,r,n){return Ua(e,r,n)}static rand(e,r,n){return Va(e,r,n)}static zeros(e){return new Ze(new Ze.valuesConstructor(e))}static ones(e){return Ze.fill(1,e)}static fill(e,r){const n=new Ze.valuesConstructor(r);for(let a=0;a<n.length;a++)n[a]=e;return new Ze(n)}};Nr(Ze,"valuesConstructor",Float64Array);let Je=Ze;function Dt(t){return t.constructor===vt}function Ot(t){return new vt(new Int32Array(t))}const nt=class nt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new nt.valuesConstructor(this.length);let n=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[n]=a+1,n=n+1);return new nt(r.subarray(0,n))}filter(e){const r=new nt.valuesConstructor(this.length);let n=0;for(let a=0;a<this.length;a++)e(this.v[a],a)&&(r[n]=this.v[a],n=n+1);return new nt(r.subarray(0,n))}shuffle(){return new nt(Ja(this.v))}sort(e){return new nt(Za(this.v,e))}sortind(e){return new nt(Qa(this.v,e))}rep(e){return Ka(this,e)}repeach(e){return Xa(this,e)}subset(e){if(typeof e=="number"&&(e=Ot([e])),Array.isArray(e)&&(e=Ot(e)),!Dt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,n=new nt.valuesConstructor(r);for(let a=0;a<r;a++){if(e.v[a]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[a]>this.length)throw Error("subset: index exceeds the length of the vector.");n[a]=this.v[e.v[a]-1]}return new nt(n)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new nt(this.v.slice(e-1,r))}static seq(e,r,n){return Ga(e,r,n,nt)}static ones(e){return nt.fill(1,e)}static fill(e,r){const n=new nt.valuesConstructor(r);for(let a=0;a<n.length;a++)n[a]=e;return new nt(n)}static bool2ind(e){let r=0;const n=new nt.valuesConstructor(e.length);for(let a=0;a<e.length;a++)e[a]&&(n[r]=a+1,r=r+1);return new nt(n.subarray(0,r))}};Nr(nt,"valuesConstructor",Int32Array);let vt=nt;function Ga(t,e,r,n){r===void 0&&(r=t<=e?1:-1);const a=Math.floor((e-t)/r)+1;if(a<1)throw Error("seq: wrong combination of parameters.");const s=new n.valuesConstructor(a);for(let l=0;l<a;l++)s[l]=t+l*r;return new n(s)}function Ka(t,e){const r=t.length*e,n=new t.constructor.valuesConstructor(r);for(let a=1;a<=e;a++)for(let s=0;s<t.length;s++)n[(a-1)*t.length+s]=t.v[s];return new t.constructor(n)}function Xa(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,n=new t.constructor.valuesConstructor(r);for(let a=0;a<t.length;a++)for(let s=0;s<e;s++)n[a*e+s]=t.v[a];return new t.constructor(n)}function po(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const n=new t.constructor(t.length);for(let a=0;a<t.length;a++)n[a]=r(t[a],e[a]);return n}function bo(t,e,r){const n=new t.constructor(t.length);for(let a=0;a<t.length;a++)n[a]=r(t[a],e);return n}function wo(t,e,r,n,a,s){if(n!==a)throw Error("_dot: matrix dimensions do not much.");const l=r,i=s,u=n,c=new t.constructor(l*i);for(let d=0;d<i;d++){const f=e.subarray(d*a,(d+1)*a),v=c.subarray(d*l,(d+1)*l);for(let h=0;h<u;h++){const g=f[h],p=t.subarray(h*r,(h+1)*r);for(let m=0;m<l;m++)v[m]+=p[m]*g}}return c}function Ja(t){let e=t.slice(),r=e.length,n,a;for(;r;)a=Math.floor(Math.random()*r--),n=e[r],e[r]=e[a],e[a]=n;return e}function Za(t,e=!1){return e?t.slice().sort((r,n)=>n-r):t.slice().sort((r,n)=>r-n)}function Qa(t,e=!1){const r=vt.seq(1,t.length).v;return e?r.sort((n,a)=>t[a-1]-t[n-1]):r.sort((n,a)=>t[n-1]-t[a-1])}function Mi(t,e){if(e[0]===0){const r=e[1]+2;return 2+r+t*r+2*t+r}return 3+t}const rr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:Mi,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function Fi(t){const e=rr.findIndex(a=>a.id==="trim"),r=t.ml.findLastIndex(a=>a===e);if(r<0)return[0,0];const n=t.mpl.slice(0,r).reduce((a,s)=>a+s,0);return[t.mp[n],t.mp[n+1]]}function ji(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const n=rr[t.ml[r]].title;e=e+"<li>"+n+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function $a(t,e,r){const n=rr.findIndex(f=>f.id==="trim");let a=0,s=t.ncols-e,l=0;for(let f=0;f<r.ml.length;f++){if(r.ml[f]!==n){l+=r.mpl_new[f];continue}a=Math.max(a,r.mp_new[l]),s=Math.min(s,r.mp_new[l+1]),l+=r.mpl_new[f]}const i=t.nrows,c=s-a+e,d=Nt.zeros(i,c);return l=0,e>0&&(d.v.set(t.v.slice(0,e*i),l),l+=e*i),d.v.set(t.v.slice((e+a)*i,(e+s)*i),l),[a,s,d]}function es(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=rr.findIndex(i=>i.id==="trim");if(e.ml.findIndex(i=>i===r)<0)return t;const[a,s,l]=$a(t.values,t.nresp,e);return t.values=l,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+a,t.nresp+s)):t.varlabels.slice(a,s),t.varindices=t.nresp>0?yr(0,t.nresp-1).concat(yr(0,s-a-1)):yr(0,s-a-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+a,t.nresp+s)):t.varvalues.slice(a,s),t}function ts(t,e,r,n,a=!0,s=[]){if(!ir(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(n)||n.length<1)throw new Error("prep_fit: list with methods is not correct.");let l,i;a?(l=e.ncols,i=e.nrows-r):(l=e.nrows,i=e.ncols-r);const u=n.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const c=new Int32Array(u),d=new Int32Array(u),f=new Int32Array(u);let v=0,h=0;for(let oe=0;oe<n.length;oe++){const ce=n[oe].id,K=n[oe].params,q=rr.findIndex(re=>re.id==ce);if(q<0)throw new Error("prep_fit: wrong method name: "+ce+".");const Q=rr[q];if(K.length!==Q.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+ce+".");c[oe]=q,d[oe]=Q.mpl,f[oe]=Q.get_mpl_new(i,K),v=v+d[oe],h=h+f[oe]}const g=new Float64Array(v);let p=0;for(let oe=0;oe<n.length;oe++){const ce=n[oe].id,K=n[oe].params;rr.findIndex(q=>q.id==ce),g.set(K,p),p=p+d[oe]}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const b=t._malloc(c.length*c.BYTES_PER_ELEMENT);t.HEAP32.set(c,b/c.BYTES_PER_ELEMENT);const k=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,k/d.BYTES_PER_ELEMENT);const z=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAP32.set(f,z/f.BYTES_PER_ELEMENT);const y=t._malloc(g.length*g.BYTES_PER_ELEMENT);t.HEAPF64.set(g,y/g.BYTES_PER_ELEMENT);const _=t._malloc(h*g.BYTES_PER_ELEMENT),w=new Int32Array(s),E=w.length,L=t._malloc(E*w.BYTES_PER_ELEMENT);if(t.HEAP32.set(w,L/w.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[m,l,i,r,u,b,k,y,z,_,a,L,E])!==1)throw new Error("prep_fit: unexpected error.");const O=t.HEAPF64.slice(_/g.BYTES_PER_ELEMENT,_/g.BYTES_PER_ELEMENT+h);return t._free(m),t._free(b),t._free(y),t._free(k),t._free(L),t._free(_),t._free(z),{ml:c,mpl:d,mp:g,mpl_new:f,mp_new:O,npred:i,class:["prepmodel"]}}function _o(t,e,r,n,a=!0,s=!1){if(!ir(e))throw new Error("prep_apply: D must be a matrix.");let l,i;if(a?(l=e.ncols,i=e.nrows-r):(l=e.nrows,i=e.ncols-r),i!==n.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+n.npred+" got "+i+").");const u=n.ml,c=n.mpl_new,d=n.mp_new,f=c.reduce((_,w)=>_+w,0);if(!u||u.length<1||!c||c.length!==u.length||d.length!==f)throw new Error("prep_apply: wrong structure of the model object.");const v=u.length,h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const g=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,g/u.BYTES_PER_ELEMENT);const p=t._malloc(c.length*c.BYTES_PER_ELEMENT);t.HEAP32.set(c,p/c.BYTES_PER_ELEMENT);const m=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAPF64.set(d,m/d.BYTES_PER_ELEMENT);const b=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[h,l,i,r,v,g,p,m,b,a])!==1)throw new Error("prep_apply: unexpected error.");const z=t.HEAPF64.slice(b/e.v.BYTES_PER_ELEMENT,b/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(h),t._free(g),t._free(p),t._free(m),t._free(b);const y=new Nt(z,e.nrows,e.ncols);if(s){const[_,w,E]=$a(y,r,n);return E}return y}function yr(t,e,r=1){const n=Math.round((e-t+1)/r),a=Array(n);for(let s=0;s<n;s++)a[s]=t+s*r;return a}function Bi(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function rn(t){return t.some(e=>Number.isNaN(e))}function xr(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function rs(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function qi(t,e,r,n,a,s,l,i=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let c=rs(t);if(c.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");c=c.filter(q=>q.replaceAll(e,"").trim().length>0);const d=c[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let f=0,v;const h=r!=="no";(h||h===void 0&&rn(firstRow))&&(v=d,f=1);const g=c.length-f;if(g<1)throw new Error("Data file should contain at least 1 row with values.");let p,m,b,k=Array(g);n?(p=h?xr(v[0]):"",b=Array(g),m=1):(p="",b=[],m=0);let z,y=[],_;a?(z=h?xr(v[m]):"",_=Array(g),m=m+1):(z="",_=[]);const w=d.length-m;if(w<1)throw new Error("Data file should contain at least 1 column with values.");const E=Nt.zeros(w,g);for(let q=f;q<g+f;q++){const Q=q-f;k[Q]=Q;let re=c[q].split(e);if(n&&(b[Q]=re[0],re.shift()),a){const J=re[0];_[Q]=J,re.shift(),(y.length===0||y.indexOf(J)<0)&&y.push(J)}const ae=u==="."?re.map((J,pe)=>Number.parseFloat(J.trim())):re.map((J,pe)=>Number.parseFloat(J.trim().replace(u,".")));if(ae.some(J=>Number.isNaN(J)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(ae.length!=w)throw new Error("Wrong number of values in row #"+q);E.v.set(new Float64Array(ae),(q-f)*w)}if(!n||b.length!==g){b=Array(g);for(let q=0;q<g;q++)b[q]="O"+(q+1)}b=b.map(q=>xr(q)),_=_.map(q=>xr(q)),y=y.map(q=>xr(q));let L,F=Array(w),O=Array(w);if(v&&v.length===w+m){L=v.map(q=>xr(q)).slice(m);for(let q=0;q<w;q++)F[q]=q>=i?q-i:q,O[q]=q>=i?q-i+1:q+1}else{L=Array(w);for(let q=0;q<w;q++)F[q]=q>=i?q-i:q,L[q]=q>=i?"V"+(q-i+1):"Y"+(q+1),O[q]=q>=i?q-i+1:q+1}let X;if(r==="values"){if(X=u==="."?L.map((q,Q)=>Q<i?Q:Number.parseFloat(q.trim())):L.map((q,Q)=>Q<i?Q:Number.parseFloat(q.trim().replace(u,"."))),X.some(q=>Number.isNaN(q)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else X=O;Array.isArray(X)||(X=[]),s||(s=""),l||(l=""),s=X.length>0&&s.length>0?s:"Variables",l=X.length>0&&l.length>0?l:"";const oe=s+(l.length>0?", "+l:""),ce=X[1]<X[0];return{values:E.t(),nresp:i,header:r,hasLabels:n,hasClassNames:a,labelsVarname:p,classLabelsVarname:z,objlabels:b,objindices:k,varlabels:L,varvalues:X,varindices:F,varrev:ce,classes:_,classNames:y,sep:e,dec:u,varvaluesName:s,varvaluesUnits:l,varAxisTitle:oe}}function Ii(t){if(rn(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let n=2;n<e;n++){let a=[];for(let c=1;c<t.length;c++)a.push(t[c][n]);const s=t[0][n],l=ho(a),i=qa(a),u=Math.abs((s-l)/i);r.push(u)}return r.every(n=>n>5)}function Di(t){const e=",",r=t[0].split(e),n=t[1].split(e),a=r.length,s=n.length,l=";",i=t[0].split(l),u=t[1].split(l),c=i.length,d=u.length;let f,v;if(a>1&&s>1&&a===s&&a>c)v=e,f=a;else if(c>1&&d>1&&c===d)v=l,f=c;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[v,v===","?".":",",f]}function Oi(t,e=0){const r=rs(t),n=r.length;if(n<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[a,s,l]=Di(r),i=Math.min(l,5),u=Math.min(n,5);let c=r[0].split(a).length,d=r.slice(0,u).map(F=>F.split(a).slice(0,i));d=d.map(F=>F.map(O=>xr(O)));const f=d.map(F=>Bi(F.slice(),s));for(let F=1;F<u;F++)if(rn(f[F].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const v=Ii(f);let h=0;const g=v?1:0,p=g+1,m=d[g][0],b=d[p][0],k=f[g][0],z=f[p][0],y=f[g][1],_=f[p][1];let w=!1,E=!1;if(Number.isNaN(k)&&Number.isNaN(z)&&m!==b?(w=!0,h=h+1):Number.isNaN(y)&&Number.isNaN(_)&&m!==b&&(w=!0,E=!0,h=h+2),!E){const F=w?1:0,O=f[g][F],X=f[p][F];E=rn([O,X]),h=h+E}let L="no";if(v){h>0?d[0].slice(h+e):d[e];const F=h>0?f[0].slice(h+e):f[e];L=rn(F)?"labels":"values"}return[a,w,E,L,c]}function Vi(t){const e=t.values.t(),r=t.sep,n=t.dec;let a=null;t.header!=="no"&&(a=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),a&&t.hasClassNames&&(a=[t.classLabelsVarname,...a]),a&&t.hasLabels&&(a=[t.labelsVarname,...a]);const s=t.classes&&t.classes.length===e.ncols,l=t.objlabels&&t.objlabels.length===e.ncols;let i=a?a.join(r):"";for(let u=0;u<e.ncols;u++){let c=e.getcolref(u+1).join(r);n!=="."&&(c=c.replace(".",n)),s&&(c=t.classes[u]+t.sep+c),l&&(c=t.objlabels[u]+t.sep+c),i=i+`
`+c}return i=i+`
`,n!=="."&&(i=i.replace(/\./g,n)),i}function Ui(t,e){const r=Vi(t),n=new Blob([r],{type:"text/csv"}),a=window.URL.createObjectURL(n),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",`${e}.csv`),s.click()}function Wi(t,e){const r=new Blob([JSON.stringify(t,zn)],{type:"application/json"}),n=window.URL.createObjectURL(r),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),a.click()}function zn(t,e){return ir(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ie(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function ns(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Ri(e.v,e.nrows,e.ncols);if(e.__type==="vector")return mt(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function yo(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),l=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${n}${a}${s}${l}`}function os(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function Pn(t,e,r){let n="";for(let a=0;a<e;a++){const s=t.getUint8(r++);if(s===0)break;n+=String.fromCharCode(s)}return n}function Hi(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],n=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],a=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let s=0;const l=t.getUint8(s);s+=1;const i=t.getUint8(s);if(s+=1,i===77)throw new Error("SPC file has old format which is not supported.");const u=i===75,c=t.getUint8(s);s+=1;const d=t.getInt8(s);s+=1;const f=t.getUint32(s,u);s+=4;const v=t.getFloat64(s,u);s+=8;const h=t.getFloat64(s,u);s+=8;const g=t.getUint32(s,u);s+=4;const p=t.getUint8(s);s+=1;const m=t.getUint8(s);s+=1;const b=t.getUint8(s);s+=1;const k=t.getUint8(s);s+=1;const z=t.getUint32(s,u);s+=4;const y=Pn(t,9,s);s+=9;const _=Pn(t,9,s);s+=9;const w=t.getUint16(s,u);s+=2;const E=Array.from({length:8},()=>{const me=t.getFloat32(s,u);return s+=4,me}),L=Pn(t,130,s);s+=130;const F=Pn(t,30,s);s+=30;const O=t.getUint32(s,u);s+=4;const[X,oe,ce,K,q,Q,re,ae]=os(l),J=p===255?r[31]:r[p],pe=p===255?e[31]:e[p],Ue=m<=26?n[m]:m>=128&&m<=131?a[m]:"Unknown";return{ftflgsv:l,ftflgs:{TSPREC:X,TCGRAM:oe,TMULTI:ce,TRANDM:K,TORDRD:q,TALABS:Q,TXYXYS:re,TXVALS:ae},fexper:c,fexp:d,fnpts:f,ffirst:v,flast:h,fnsub:g,fxtype:p,fytype:m,fztype:b,fpost:k,fdate:z,fres:y,fsource:_,fpeakpt:w,fspare:E,fcmnt:L,fcatxt:F,flogoff:O,xaxisName:J,xaxisUnit:pe,yaxisName:Ue}}function Yi(t,e){const r=os(t.getUint8(e));e+=1;const n=t.getInt8(e);e+=1;const a=t.getUint16(e,!0);e+=2;const s=t.getFloat32(e,!0);e+=4;const l=t.getFloat32(e,!0);e+=4;const i=t.getFloat32(e,!0);e+=4;const u=t.getInt32(e,!0);e+=4;const c=t.getInt32(e,!0);e+=4;const d=t.getFloat32(e,!0);return e+=4,{flags:r,exp:n,index:a,time:s,next:l,noise:i,nPoints:u,nScans:c,wAxis:d}}async function as(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),n=await t.arrayBuffer(),a=new DataView(n);let s=0;const l=Hi(a);s+=512;const i=l.fnpts;if(i<2)throw new Error(`Error reading SPC file (${t.name}).`);let u=new Array(i);if(l.ftflgs.TXVALS)for(let f=0;f<i;f++){const v=a.getFloat32(s,!0);s=s+4,u[f]=v}else{(l.flast-l.ffirst)/(i-1);for(let f=0;f<i;f++)u[f]=l.ffirst+f*l.flast}const c=new Float64Array(i*l.fnsub);for(let f=0;f<l.fnsub;f++){Yi(a,s),s=s+32;for(let v=0;v<i;v++){const h=a.getFloat32(s,!0);s=s+4,c[f*i+v]=h}}const d=[];return l.fnsub>1?yr(1,l.fnsub).forEach(v=>{d.push(r+"_"+v)}):d.push(r),{hdr:l,xvalues:u,yvalues:c,objlabels:d}}async function Gi(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let n=[],a=[];const s=await as(t[0]),l=s.xvalues.length;if(r.push(s.yvalues),n=n.concat(s.objlabels),a.push(s.hdr.fnsub),e>1)for(let g=1;g<e;g++){const p=await as(t[g]);if(p.xvalues.length!==l)throw new Error("Number of spectral values in SPC files is different.");r.push(p.yvalues),n=n.concat(p.objlabels),a.push(p.hdr.fnsub)}const i=a.reduce((g,p)=>g+p,0),u=new Float64Array(i*l);let c=0;for(let g=0;g<r.length;g++)u.set(r[g].slice(),c),c+=a[g]*l;const d=new Nt(u,l,i),f=yr(0,l-1),v=yr(0,i-1),h=f.map(g=>"X"+g);return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:n,objindices:v,varlabels:h,varvalues:s.xvalues,varindices:f,varev:s.xvalues[1]<s.xvalues[0],sep:",",dec:".",varvaluesName:s.hdr.xaxisName,varvaluesUnits:s.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var Ki=D('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function kr(t,e){let r=T(e,"text",3,"button");var n=Ki();n.__click=function(...s){var l;(l=e.onclick)==null||l.apply(this,s)};var a=j(n);G(()=>Le(a,r())),C(t,n)}tt(["click"]);var Xi=D('<button tabindex="0"></button>');function nn(t,e){T(e,"disable",3,!1);var r=Xi();r.__click=function(...n){var a;(a=e.onclick)==null||a.apply(this,n)},G(()=>{S(r,"title",e.title),S(r,"aria-label",e.title),S(r,"alt",e.title),ct(r,1,`button ${e.className??""}`,"svelte-bx9fh5")}),C(t,r)}tt(["click"]);function Tn(t,e){let r=T(e,"title",3,"Reset");nn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function Ji(t,e){let r=T(e,"title",3,"Add");nn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function Zi(t,e){let r=T(e,"title",3,"Settings");nn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function Qi(t,e){let r=T(e,"title",3,"Move up");nn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function $i(t,e){let r=T(e,"title",3,"Move down");nn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}var ec=D('<span class="label svelte-1986c5z"> </span>'),tc=D("<div><!> <!></div>");function ne(t,e){let r=T(e,"label",3,null),n=T(e,"name",3,""),a=T(e,"status",3,""),s=T(e,"colors",3,""),l=T(e,"labelWidth",3,12);var i=tc(),u=j(i);{var c=f=>{var v=ec(),h=j(v);G(()=>{Tt(v,`flex-basis:${l()??""}ch;`),Le(h,r())}),C(f,v)};I(u,f=>{r()&&f(c)})}var d=M(u,2);Vr(d,()=>e.children??bt),G(()=>{ct(i,1,`control-element ${n()??""} ${a()??""}`,"svelte-1986c5z"),Tt(i,s())}),C(t,i)}const ss=(t,e,r,n)=>{const a=e(t);a<0||a>1||N(r,a*100>o(n)-5&&a*100<o(n)+5,!0)},ls=(t,e,r,n,a,s)=>{N(e,!1);const l=r(t);l<0||l>1||(n(a(l)),s()&&s()(n()))},is=(t,e,r,n,a,s)=>{if(!o(e))return;const l=r(t);l<0||l>1||(n(a(l)),s()&&s()(n()))},rc=(t,e,r,n,a,s)=>{if(t.key==="ArrowLeft"){e(e()-r()<n()?n():e()-r()),a()&&a()(e());return}if(t.key==="ArrowRight"){e(e()+r()>s()?s():e()+r()),a()&&a()(e());return}};var nc=D('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function Nn(t,e){ve(e,!0);let r=T(e,"min",7,0),n=T(e,"max",3,100),a=T(e,"value",31,()=>Te(r())),s=T(e,"decNum",3,1),l=T(e,"step",19,()=>+((n()-r())/100).toFixed(4)),i=T(e,"onchange",3,null);le(()=>{a()<r()&&(a(r()),i()&&i()(a())),a()>n()&&(a(n()),i()&&i()(a())),r()>n()&&r(n())});let u=W(void 0),c=W(void 0),d=W(!1);const f=w=>{const E=r()+w*(n()-r());return+(Math.round(E/l())*l()).toFixed(4)},v=w=>{const E=o(u).getBoundingClientRect(),L=o(c).getBoundingClientRect(),F=E.x,O=L.x+L.width;return(w.clientX-F)/(O-F)},h=w=>{N(d,!1)},g=w=>{let E=a()+l()*w.deltaY*.5;E<r()&&(E=r()),E>n()&&(E=n()),a(+(Math.round(E/l())*l()).toFixed(4)),w.preventDefault(),i()&&i()(a())},p=P(()=>r()===n()?100:(a()-r())/(n()-r())*100);var m=nc();m.__keydown=[rc,a,l,r,i,n],m.__mousemove=[is,d,v,a,f,i],m.__mousedown=[ss,v,d,p],m.__mouseup=[ls,d,v,a,f,i],m.__touchmove=[is,d,v,a,f,i],m.__touchstart=[ss,v,d,p],m.__touchend=[ls,d,v,a,f,i];var b=j(m);let k;var z=j(b);let y;var _=j(z);wr(b,w=>N(u,w),()=>o(u)),wr(m,w=>N(c,w),()=>o(c)),G((w,E,L)=>{S(m,"aria-valuenow",a()),S(m,"aria-valuemin",r()),S(m,"aria-valuemax",n()),k=ct(b,1,"range-slider svelte-vhx0r0",null,k,w),Tt(b,`width:${o(p)??""}%`),y=ct(z,1,"range-value svelte-vhx0r0",null,y,E),Le(_,L)},[()=>({"range-slider_right":o(p)<50}),()=>({"range-value_right":o(p)<50}),()=>a().toFixed(s())]),pr("mousewheel",m,g),pr("mouseleave",m,h),pr("touchcancel",m,h),C(t,m),he()}tt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const cs=(t,e,r,n,a)=>{const s=e(t);s<0||s>1||N(r,s>o(n)&&s<o(a)+o(n),!0)},us=(t,e,r,n,a)=>{N(e,!1);const s=r(t);if(s<0||s>1)return;const l=n(s);a()!==l&&a(l)},fs=(t,e,r,n,a)=>{if(!o(e))return;const s=r(t);if(s<0||s>1)return;const l=n(s);l!=a()&&a(l)},oc=(t,e,r,n,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<n()?n():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r());return}};var ac=D('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function on(t,e){ve(e,!0);let r=T(e,"min",3,0),n=T(e,"max",3,10),a=T(e,"value",31,()=>Te(r())),s=T(e,"step",3,1);a()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),a(r())),a()>n()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),a(n())),r()>n()&&console.error("The min and max values must be distinct.");let l=W(void 0),i=W(void 0),u=W(!1);const c=P(()=>r()===n()?0:(a()-r())/(n()-r()+s())),d=P(()=>s()/(n()-r()+s())),f=P(()=>n()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${o(d)*100}%, var(--bg-color-light2, #e8e8e8) ${o(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*o(d)}%)`:"background: #f0f0f0"),v=w=>{if(w<0||w>1)return a();let E=a();return Math.round(o(d)/w),w<o(c)&&o(c)>0&&(E=a()-s()*Math.ceil((o(c)-w)/o(d))),w>o(c)+o(d)&&o(c)+o(d)<1&&(E=a()+s()*Math.ceil((w-(o(c)+o(d)))/o(d))),E<r()&&(E=r()),E>n()&&(E=n()),E},h=w=>{const E=o(i).getBoundingClientRect(),L=E.x,F=E.x+E.width;return(w.clientX-L)/(F-L)},g=w=>{N(u,!1)},p=w=>{let E=a()+Math.round(w.deltaY*.5)*s();E<r()&&(E=r()),E>n()&&(E=n()),a(E),w.preventDefault()};var m=ac();m.__keydown=[oc,a,s,r,n],m.__mousemove=[fs,u,h,v,a],m.__mousedown=[cs,h,u,c,d],m.__mouseup=[us,u,h,v,a],m.__touchmove=[fs,u,h,v,a],m.__touchstart=[cs,h,u,c,d],m.__touchend=[us,u,h,v,a];var b=j(m);let k;var z=j(b);let y;var _=j(z);wr(b,w=>N(l,w),()=>o(l)),wr(m,w=>N(i,w),()=>o(i)),G((w,E,L)=>{S(m,"aria-valuenow",a()),S(m,"aria-valuemin",r()),S(m,"aria-valuemax",n()),Tt(m,o(f)),k=ct(b,1,"range-slider svelte-xdlm7u",null,k,w),Tt(b,`width: max(2px, ${o(d)*100}%);left:${o(c)*100}%;`),y=ct(z,1,"range-value svelte-xdlm7u",null,y,E),Le(_,L)},[()=>({"range-slider_left":o(d)<.1&&o(c)<.5,"range-slider_right":o(d)<.1&&o(c)>=.5}),()=>({"range-value_right":o(d)<.1&&o(c)>.5,"range-value_left":o(d)<.1&&o(c)<=.5}),()=>a().toFixed(0)]),pr("mousewheel",m,p),pr("mouseleave",m,g),pr("touchcancel",m,g),C(t,m),he()}tt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const sc=(t,e,r)=>{if(t.key==="ArrowLeft"){const n=e.options.findIndex(a=>a===r());n>0&&r(e.options[n-1]);return}if(t.key==="ArrowRight"){const n=e.options.findIndex(a=>a===r());n<e.options.length-1&&r(e.options[n+1]);return}};var lc=(t,e,r)=>e(r),ic=D('<button tabindex="-1"><!></button>'),cc=D('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox"/>',1);function Lt(t,e){ve(e,!0);let r=T(e,"value",31,()=>Te(e.options[0])),n=T(e,"className",3,"");var a=cc(),s=U(a);s.__keydown=[sc,e,r],it(s,20,()=>e.options,i=>i,(i,u)=>{var c=ic();c.__click=[lc,r,u];let d;var f=j(c);dt(f,()=>u),G((v,h)=>d=ct(c,1,`option option_${v??""}`,"svelte-1i17tox",d,h),[()=>u.toString().replace(".","_"),()=>({selected:u==r()})]),C(i,c)});var l=M(s,2);G(()=>ct(s,1,`selector ${n()??""}`,"svelte-1i17tox")),Na(l,r),C(t,a),he()}tt(["keydown","click"]);function xo(t,e){ve(e,!0);let r=T(e,"options",19,()=>["no","yes"]),n=T(e,"value",15,!1),a=W(!0);const s=P(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());le(()=>N(a,n()?r()[1]:r()[0],!0)),le(()=>n(o(a)===r()[1]));var l=Ne(),i=U(l);{var u=c=>{Lt(c,{get options(){return o(s)},get value(){return o(a)},set value(d){N(a,d,!0)}})};I(i,c=>{o(s)&&c(u)})}C(t,l),he()}function ds(t,e,r){o(e)&&o(e).files.length>0?r(o(e).files.length===1?o(e).files[0]:o(e).files):r(null)}function vs(t,e){(t.type==="click"||t.type==="keydown"&&(t.code==="Space"||t.code==="Enter"))&&o(e).click()}var uc=D('<input type="file" multiple class="svelte-1k0x7uv"/>'),fc=D('<input type="file" class="svelte-1k0x7uv"/>'),dc=D('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function hs(t,e){ve(e,!0);let r=T(e,"file",15),n=T(e,"message",3,"Select CSV file with dataset"),a=T(e,"acceptType",3,".csv"),s=T(e,"multiple",3,!1),l=W(void 0);function i(b){o(l).value=null,r(null)}var u=dc(),c=U(u);c.__keydown=[vs,l],c.__click=[vs,l];let d;var f=j(c),v=M(f);{var h=b=>{var k=uc();k.__change=[ds,l,r],wr(k,z=>N(l,z),()=>o(l)),G(()=>S(k,"accept",a())),C(b,k)},g=b=>{var k=fc();k.__change=[ds,l,r],wr(k,z=>N(l,z),()=>o(l)),G(()=>S(k,"accept",a())),C(b,k)};I(v,b=>{s()?b(h):b(g,!1)})}var p=M(c,2);{var m=b=>{Tn(b,{onclick:i})};I(p,b=>{r()&&b(m)})}G(b=>{d=ct(c,1,"file-selector svelte-1k0x7uv",null,d,b),Le(f,`${(r()?r().name:n())??""} `)},[()=>({selected:r()})]),C(t,u),he()}tt(["keydown","click","change"]);function vc(t,e,r,n){e()&&N(r,e()(n()),!0)}var hc=D('<div class="error-message svelte-1qtiwcs"> </div>'),gc=D('<div><input type="text" class="svelte-1qtiwcs"/> <!></div>');function gs(t,e){ve(e,!0);let r=T(e,"value",15,""),n=T(e,"className",3,""),a=T(e,"placeholder",3,""),s=T(e,"maxLength",3,25),l=T(e,"validator",3,null),i=W("");var u=gc();let c;var d=j(u);d.__input=[vc,l,i,r];var f=M(d,2);{var v=h=>{var g=hc(),p=j(g);G(()=>Le(p,o(i))),C(h,g)};I(f,h=>{o(i)&&o(i).length>0&&h(v)})}G(h=>{c=ct(u,1,`textinput ${n()??""}`,"svelte-1qtiwcs",c,h),S(d,"placeholder",a()),S(d,"maxlength",s())},[()=>({error:o(i)&&o(i).length>0})]),Na(d,r),C(t,u),he()}tt(["input"]);var mc=D('<div class="spinner svelte-n48urb"></div>');function pc(t){var e=mc();C(t,e)}tt(["keydown","click"]),tt(["keydown","click"]);function ko(t,e){let r=0,n=0;t.nresp>0&&(r=new Je(t.values.v.slice(0,t.values.nrows)),n=1);const a=new Nt(t.values.v.slice(n*t.values.nrows),t.values.nrows,t.values.ncols-n).t(),s=a.ncols<e?1:Math.round(a.ncols/e),l=vt.seq(1,a.ncols,s),i=a.subset(null,l),u=r?r.subset(l):null,c=t.classes?t.classes.filter((d,f)=>l.v.includes(f)):null;return{classNames:t.classNames,classes:c,resp:u,values:i,varvalues:t.varvalues.filter((d,f)=>f>=n),varindices:t.varindices.filter((d,f)=>f>=n),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function Eo(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function ms(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}function ps(t,e,r){const n=t.fileName+"-preprocessed";Ui(t,n)}function bc(t){Wi(t,"preprocessing-model")}var wc=D('<span style="font-weight:bold"> </span><br/>',1),_c=D('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),yc=D('<span class="file-size svelte-gdjwex"> </span>'),xc=D('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br/> <span>Size:</span> <!></p> <!>',1);function kc(t,e){ve(e,!0);let r=T(e,"title",3,"");var n=Ne(),a=U(n);{var s=l=>{ne(l,{children:(i,u)=>{var c=xc(),d=U(c),f=j(d);{var v=z=>{var y=wc(),_=U(y),w=j(_);G(()=>Le(w,r())),C(z,y)};I(f,z=>{r()&&r()!==""&&z(v)})}var h=M(f,4),g=j(h),p=M(h,5);{var m=z=>{var y=_c(),_=U(y),w=j(_),E=M(_,4),L=j(E);G(()=>{Le(w,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),Le(L,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),C(z,y)},b=z=>{var y=yc(),_=j(y);G(()=>Le(_,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),C(z,y)};I(p,z=>{e.dataset.nresp&&e.dataset.nresp>0?z(m):z(b,!1)})}var k=M(d,2);Tn(k,{get onclick(){return e.reset}}),G(()=>{S(h,"title",e.dataset.fileName),Le(g,e.dataset.fileName)}),C(i,c)},$$slots:{default:!0}})};I(a,l=>{e.dataset&&l(s)})}C(t,n),he()}var Ec=D("<!> <!>",1),Sc=D("<!> <!> <!> <!> <!> <!>",1),Ac=D("<!> <!>",1),Cc=D("<p> </p>"),zc=D("<!> <p>Loading data...</p>",1),Pc=D("<p> </p>"),Tc=D("<!> <!> <!> <!>",1);function bs(t,e){ve(e,!0);let r=T(e,"WASM",3,null),n=T(e,"model",3,null),a=T(e,"rawdata",15,null),s=T(e,"prepdata",15,null),l=T(e,"title",3,"Raw data"),i=T(e,"left",3,null),u=T(e,"right",3,null);T(e,"multiple",3,!0);const c=[",",";"],d=["no","labels","values"];let f=W(void 0),v=W(""),h=W(""),g=W("data"),p=W(","),m=W("no"),b=W(!1),k=W(!1),z=W(null),y=W("neutral"),_=W("");function w(Z){N(y,"error"),N(_,Z,!0),a(null),console.error(Z)}function E(){N(y,"neural"),N(_,"")}function L(){N(y,"success"),N(_,"")}function F(){N(f,""),a(null),s(null),N(v,""),N(h,""),N(_,""),E()}function O(){if(!(!a()||!n())){if(a().values.ncols-a().nresp!==n().npred){w(`Number of variables in the dataset (${a().values.ncols}) does not match the expected number (${n().npred}).`);return}N(z,r()().then(Z=>{N(y,"applying");const se=_o(Z,a().values,a().nresp,n(),!1,!1),De=ms(Ko(a()),se);s(es(De,n())),L()}).catch(Z=>{s(null),w(Z)}),!0)}}function X(Z){if(!Z||Z.size<10)return;const De=Z.slice(0,1e5),Oe=new FileReader;Oe.onload=()=>{const we=Oe.result;!we||we.length<0||((_e=>{var be=dn(_e,4);N(p,be[0],!0),N(b,be[1],!0),N(k,be[2],!0),N(m,be[3],!0)})(Oi(we)),o(k)&&N(g,"groups"))},Oe.onerror=function(we){csvString=null,w(we)},Oe.readAsText(De)}function oe(Z){try{const se=qi(Z,o(p),o(m),o(b),o(g)==="groups",o(v),o(h),o(g)==="response"?1:0);if(se.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(se.classNames.length>se.values.nrows/2)throw new Error("Dataset has too many unique "+className.toLowerCase()+" labels ("+se.classNames.length+"), check your CSV file.");const De=se.values.ncols-se.nresp;if(n()&&De!==n().npred)throw new Error("Number of predictors in dataset ("+De+") does not match what model expects ("+n().npred+")");se.fileName=o(f).name.replace(/\.[^/.]+$/,""),a(se),L()}catch(se){w(se)}}function ce(Z){const se=new FileReader;se.onload=()=>{oe(se.result)},se.readAsText(o(f))}async function K(Z){try{const se=o(f)instanceof FileList?o(f):[o(f)];a(await Gi(se)),L()}catch(se){w("Failed to read SPC file: "+se)}}le(()=>{if(o(f)!==void 0){if(o(f)===null||o(f)===""){F();return}if(Array.isArray(o(f))){if(o(f).filter(Z=>Z.slice(-4)===".spc").length!==o(f).length){w("Multiple file selection is allowed only for SPC files.");return}K(o(f));return}o(f)&&o(f).type==="text/csv"?(X(o(f)),E()):K([o(f)])}}),le(()=>{o(p)&&(N(y,"neutral"),N(_,""))}),le(()=>{a()!==null&&n()!==null&&!s()&&o(_)===""&&O()});var q=Tc(),Q=U(q);{var re=Z=>{var se=Ac(),De=U(se);Sn(De,()=>o(f)===void 0,_e=>{ne(_e,{children:(be,B)=>{hs(be,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return o(f)},set file(H){N(f,H,!0)}})},$$slots:{default:!0}})});var Oe=M(De,2);{var we=_e=>{var be=Sc(),B=U(be);ne(B,{label:"Delimiter",children:(je,ze)=>{Lt(je,{id:"sep",get options(){return c},get value(){return o(p)},set value(We){N(p,We,!0)}})},$$slots:{default:!0}});var H=M(B,2);ne(H,{label:"Row labels",children:(je,ze)=>{xo(je,{id:"hasLabels",options:["no","yes"],get value(){return o(b)},set value(We){N(b,We,!0)}})},$$slots:{default:!0}});var V=M(H,2);ne(V,{label:"First column",children:(je,ze)=>{Lt(je,{id:"sep",options:["data","groups","response"],get value(){return o(g)},set value(We){N(g,We,!0)}})},$$slots:{default:!0}});var $=M(V,2);ne($,{label:"Header",children:(je,ze)=>{Lt(je,{id:"header",get options(){return d},get value(){return o(m)},set value(We){N(m,We,!0)}})},$$slots:{default:!0}});var ee=M($,2);{var ue=je=>{var ze=Ec(),We=U(ze);ne(We,{label:"Header name",children:(He,Ft)=>{gs(He,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return o(v)},set value(jt){N(v,jt,!0)}})},$$slots:{default:!0}});var _t=M(We,2);ne(_t,{label:"Header units",children:(He,Ft)=>{gs(He,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return o(h)},set value(jt){N(h,jt,!0)}})},$$slots:{default:!0}}),C(je,ze)};I(ee,je=>{o(m)==="values"&&je(ue)})}var Be=M(ee,2);ne(Be,{label:" ",children:(je,ze)=>{kr(je,{text:"Load",onclick:ce})},$$slots:{default:!0}}),C(_e,be)};I(Oe,_e=>{o(f)&&o(f).type==="text/csv"&&_e(we)})}C(Z,se)},ae=Z=>{var se=Ne(),De=U(se);{var Oe=we=>{var _e=Ne(),be=U(_e);si(be,()=>o(z),B=>{ne(B,{children:(H,V)=>{var $=zc(),ee=U($);pc(ee),C(H,$)},$$slots:{default:!0}})},void 0,(B,H)=>{ne(B,{status:"error",children:(V,$)=>{var ee=Cc(),ue=j(ee);G(()=>Le(ue,o(H))),C(V,ee)},$$slots:{default:!0}})}),C(we,_e)};I(De,we=>{o(z)&&we(Oe)})}C(Z,se)};I(Q,Z=>{a()?Z(ae,!1):Z(re)})}var J=M(Q,2);{var pe=Z=>{kc(Z,{get dataset(){return a()},reset:F,get title(){return l()}})};I(J,Z=>{a()&&Z(pe)})}var Ue=M(J,2);{var me=Z=>{ne(Z,{label:"Download",children:(se,De)=>{kr(se,{text:"Preprocessed data",onclick:()=>ps(s(),i(),u())})},$$slots:{default:!0}})};I(Ue,Z=>{s()&&n()&&Z(me)})}var de=M(Ue,2);{var Re=Z=>{ne(Z,{status:"error",children:(se,De)=>{var Oe=Pc(),we=j(Oe);G(()=>Le(we,o(_))),C(se,Oe)},$$slots:{default:!0}})};I(de,Z=>{(o(y)==="error"||o(_))&&Z(Re)})}C(t,q),he()}const Nc={small:30,medium:40,large:50,xlarge:60},Lc={small:5,medium:8,large:12,xlarge:15},Rc={small:6,medium:10,large:14,xlarge:18},So={small:4,medium:6,large:8,xlarge:10},Mc={small:12,medium:15,large:19,xlarge:21},ws={small:11,medium:15,large:17,xlarge:19},Ln={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Fc=["●","◼","▲","▼","⬥","＋","✳","✕"],jc=.8,_s=.5,Bc={small:5,medium:8,large:12,xlarge:15},Rt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function ys(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function xs(t,e){if(t!=null&&(Array.isArray(t)&&(t=mt(t)),!(!Ie(t)||t.length<1)))return t.apply(r=>zo((r-e[1])*e[0]+e[2])).v}function Mt(t,e){return xs(t,e.coords)}function ks(t,e){return xs(t,e.objects)}function Es(t,e){if(t!=null&&(Array.isArray(t)&&(t=mt(t)),!(!Ie(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function Ss(t,e){return Es(t,e.coords)}function As(t,e){return Es(t,e.objects)}function Ao(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Er(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Co(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Er(Math.abs(Hr(Ba(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(s=>s.toFixed(0))]:(r=Math.ceil(Er(Math.log10(e)))-2,[r,Array.from(t).map(s=>(s/Math.pow(10,r)).toFixed(0))]);let n=Math.ceil(-Er(Math.log10(e)));return n<=2?[0,Array.from(t).map(a=>a.toFixed(n))]:(r=n-2,n=2,Er(Math.abs(_r(t)))<=10?[-r,Array.from(t).map(a=>(a*Math.pow(10,r)).toFixed(n))]:[-r,Array.from(t).map(a=>(a/Math.pow(10,r)).toString())])}function Sr(t,e,r){return Array.isArray(t)&&(t=mt(t)),Ie(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Cs(t,e,r,n){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const a=r.coords,s=n.coords;let l="";for(let i=0;i<t.length;i++){const u=zo((t.v[i]-a[1])*a[0]+a[2]),c=zo((e.v[i]-s[1])*s[0]+s[2]);l+=u+","+c+" "}return l}function zs(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Ar(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Ps(t,e){if(Array.isArray(t)&&(t=mt(t)),!Ie(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(l=>isNaN(l)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const n=e[0]<e[1]?e[0]:e[1],a=e[0]<e[1]?e[1]:e[0],s=t.filter(l=>l>=n&l<=a);return s.length!==t.length?[null,"some of ticks values are outside axis limits."]:[s,""]}function Ts(t,e,r,n,a,s){a==null&&(a=!1),s===void 0&&(s=1e-4);const l=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof l!="object"||l[0]===void 0||l[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const i=Math.abs(l[1]-l[0])*s,u=l[1]-l[0]-2*i,c=Math.floor(Math.log10(u)),d=1/Math.pow(10,c-1),f=Math.round(u*d)/d;let v=qc(f/r);a&&(Math.abs(l[1]-l[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(v<1&&(v=1),v=Math.round(v)));let h=Math.ceil((l[0]+i)/v)*v,g=Math.floor((l[1]-i)/v)*v;Math.abs(l[0]-h)<v/10&&(h=h+v),Math.abs(l[1]-g)<v/10&&(g=g-v),r=Math.ceil(Er((g-h)/v))+1,t=Je.zeros(r);for(let p=0;p<r;p++)t.v[p]=h+v*p;if(Math.abs(v)<1){const p=Math.pow(10,1+Math.round(-Math.log10(v)));t=t.apply(m=>Math.round((m+Number.EPSILON)*p)/p)}return t.filter(p=>p>=l[0]&p<=l[1])}function qc(t,e){const r=Math.floor(Math.log10(t)),n=t/Math.pow(10,r);let a;return n<=1?a=1:n<=2?a=2:n<=5?a=5:a=10,a*Math.pow(10,r)}function zo(t){return Math.round(t*10)/10}function Ic(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function Ns(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Dc(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Oc(t){let e=-1,r=Dc();for(let n=0;n<t.length;n++)e=r[(e^t[n])&255]^e>>>8;return e^-1}function Vc(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const n=Oc(r),a=new Uint8Array(4);a[0]=n>>>24,a[1]=n>>>16,a[2]=n>>>8,a[3]=n&255;const s=new Uint8Array(4);s[0]=0,s[1]=0,s[2]=0,s[3]=9;const l=new Uint8Array(54);return l.set(t,0),l.set(s,33),l.set(r,37),l.set(a,50),l}function Uc(t,e){const r=t.split(","),n=r[0],a=r[1],s=33/3*4,l=a.substring(0,s),i=a.substring(s),u=atob(l),c=new Uint8Array(u.length);for(let v=0;v<c.length;v++)c[v]=u.charCodeAt(v);const d=Vc(c,e),f=btoa(String.fromCharCode(...d));return[n,",",f,i].join("")}function Wc(t,e,r,n,a){if(r||(r=10),n||(n=10),a||(a=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(n<1||n>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(a<50||a>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const s=r/2.54*a,l=n/2.54*a;setTimeout(()=>{const i=t.clientHeight,u=t.clientWidth;let c=Math.max(s/u,l/i),d=1;c<1&&(d=c,c=1);const f=document.createElement("canvas"),v=f.getContext("2d");f.width=u*(d<1?d:c),f.height=i*(d<1?d:c),t.setAttribute("width",u*c),t.setAttribute("height",i*c),v.fillStyle="white",v.fillRect(0,0,f.width,f.height),v.scale(c,c);const h=new XMLSerializer().serializeToString(t),g=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(g),m=new Image;m.onload=function(){d<0&&(m.width=m.width*d,m.height=m.height*d),v.drawImage(m,0,0,f.width,f.height);const b=f.toDataURL("image/png"),k=Uc(b,a),z=document.createElement("a");z.href=k,z.download=`${e}.png`,z.click()},m.src=p},20)}function Hc(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,n=t.clientWidth;t.setAttribute("width",n+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${n} ${r}`);const a=new Blob([t.outerHTML],{type:"image/svg+xml"}),s=window.URL.createObjectURL(a),l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download",`${e}.svg`),l.click()}function Yc(t,e,r,n){const a=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Gc(e,r,n)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=a},500)},s=>{console.error(s),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=a},500)}).catch(s=>console.error(s))}async function Gc(t,e,r){const n=t.clientHeight,a=t.clientWidth,s=Math.max(e/a,r/n),l=document.createElement("canvas"),i=l.getContext("2d");return l.width=a*s,l.height=n*s,i.scale(s,s),t.setAttribute("width",l.width),t.setAttribute("height",l.height),await new Promise((c,d)=>{const f=new XMLSerializer().serializeToString(t),v=new Blob([f],{type:"image/svg+xml;charset=utf-8"}),h=window.URL||window.webkitURL||window,g=h.createObjectURL(v),p=new Image;p.onload=function(){i.drawImage(p,0,0,l.width,l.height),h.revokeObjectURL(g),l.toBlob(function(m){m?c(m):d(new Error("Failed to create blob"))},"image/png")},p.onerror=function(m){d(m)},p.src=g})}function Ls(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function Kc(t,e,r,n,a){let s=a.ticks,l=a.tickLabels,i=0;const u=Ts(s,t,Lc[r.x],!0,a.whole),c=u.length,d=As([So[r.plot]],n)[0],f=Je.fill(e[0],c),v=f.add(d),h=Je.fill(e[1],c);if(l||(s?(i=0,l=s.v.map(L=>Er(L).toString())):[i,l]=Co(u.v)),!l||l.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const g=[[u,f],[u,h]],p=[[mt([t[0]]),mt([e[0]])],[mt([t[1]]),mt([e[0]])]],m=[[u,v],[u,f]],b=(t[1]-t[0])*.01,k=[[null,null],[[t[1]-(i>9?1:0)*b],[f.v[c-1]]]],z=Ao(i),y=l.length,_=Math.abs(t[1]>t[0]?t[1]-u.v[y-1]:t[1]-u.v[0]),w=Math.abs(t[1]-t[0]),E=Math.abs(u.v[1]-u.v[0]);if(z.length>0&&_<w*.1&&_<E*.5){const L=t[1]>t[0]?y-1:0;l[L]=" "}return{grid:g,axisLine:p,tickCoords:m,tfCoords:k,ticks:s,tickLabels:l,tickFactor:i,tfLabel:z}}function Xc(t,e,r,n,a){let s=a.ticks,l=a.tickLabels,i=0;const u=Ts(a.ticks,e,Rc[r.y],!0,a.whole),c=u.length,d=As([So[r.plot]],n)[0],f=Je.fill(t[0],c),v=f.add(d),h=Je.fill(t[1],c);if(l||(s?(i=0,l=s.v.map(E=>Er(E).toString())):[i,l]=Co(u.v)),l.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const g=[[f,u],[h,u]],p=[[mt([t[0]]),mt([e[0]])],[mt([t[0]]),mt([e[1]])]],m=[[f,u],[v,u]],b=[[[],[]],[[v.v[c-1]+(Math.abs(i)>9?3:2)*d],[e[1]]]],k=Ao(i),z=l.length,y=Math.abs(e[1]>e[0]?e[1]-u.v[z-1]:e[1]-u.v[0]),_=Math.abs(e[1]-e[0]),w=Math.abs(u.v[1]-u.v[0]);if(k.length>0&&y<_*.1&&y<w*.5){const E=e[1]>e[0]?z-1:0;l[E]=" "}return{grid:g,axisLine:p,tickCoords:m,tfCoords:b,ticks:s,tickLabels:l,tickFactor:i,tfLabel:k}}function Jc(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ie(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let n,a;if(t.labels?(n=t.labels,a=0):[a,n]=Co(e),!(n.length===e.length-1||n.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const s=n.length===r.length;return{colmap:r,breaks:e,labels:n,isCentered:s,labelsFactor:a,fontSize:t.fontSize,labelColor:t.labelColor}}function Zc(t,e,r,n){const a=t.colmap.length,s=e*jc,l=s/a,i=r[1]+(e-s)*.5,u=Bc[n.y],c=r[2]+u*_s,d=c+u*(1+_s),f=t.isCentered?l/2:0;return{start:i,top:c,height:u,width:l,dxl:f,ltop:d}}function Rn(t,e,r){if(!t||!e||!r||typeof r!="function")return;const n=t.target;if(n.tagName===e){const a=Array.prototype.indexOf.call(n.parentNode.children,n);if(a<0)return;r(a),t.stopPropagation()}}function Qc(t,e){const n=document.createElement("canvas").getContext("2d");return n.font=e,n.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function $c(t,e){const r="Arial",n=e/8,a=e*1.5,s=Array(t.length),l=Array(t.length);let i=0,u=0,c=0;for(let f=0;f<t.length;f++){const v=Qc("  "+t[f].label+"  ",e+"px "+r);c=v>c?v:c;const h=e*t[f].labelHeight+2*n;s[f]=h,l[f]=i,i=i+h,u=u+h}const d=a+2*n+c;return[l,s,a,n,u,d]}function eu(t,e,r,n,a){const[s,l,i,u,c,d]=$c(t.items,n*t.fontSize),f=t.position.includes("left")?e[0]+a:t.position.includes("right")?e[1]-d-a:(e[1]+e[0]-d)*.5,v=t.position.includes("top")?r[1]+a:t.position.includes("bottom")?r[0]-c-a:(r[1]+r[0]-c)*.5;return{lgl:f,lgt:v,lgw:d,lgh:c,ely:s,elh:l,elw:i,elp:u}}function Ar(t){if(!t||t.length<1)return t;function e(s){return'<tspan font-size="0.75em" dy="-0.5em">'+s+'</tspan><tspan dy="0.4em"> </tspan>'}function r(s){return'<tspan font-size="0.75em" dy="0.5em">'+s+'</tspan><tspan dy="-0.4em"> </tspan>'}let n=0,a="";for(;n<t.length;){const s=t[n];if((s==="^"||s==="_")&&n<t.length-1){const l=s==="^";if(n++,t[n]==="("){let i=n+1;for(;i<t.length&&t[i]!==")";)i++;const u=t.slice(n+1,i);a+=l?e(u):r(u),n=i+1}else if(t[n]==="-"||t[n]==="–"){const i=t.slice(n,n+2);a+=l?e(i):r(i),n=n+2}else a+=l?e(t[n]):r(t[n]),n++}else a+=s,n++}return a}var tu=ge('<line vector-effect="non-scaling-stroke"></line>'),ru=ge("<g></g>");function Po(t,e){ve(e,!0);let r=T(e,"lineCoords",19,()=>[]),n=T(e,"lineColor",19,()=>Rt.DARKGRAY),a=T(e,"lineType",3,1),s=T(e,"lineWidth",3,1),l=T(e,"className",3,"");const i=Ut("axes");let u=P(()=>Mt(r()[0][0],i.tX())),c=P(()=>Mt(r()[1][0],i.tX())),d=P(()=>Mt(r()[0][1],i.tY())),f=P(()=>Mt(r()[1][1],i.tY())),v=P(()=>`stroke:${n()};stroke-width: ${s()}px;stroke-dasharray:${Ln[i.scales().plot][a()-1]}`);var h=Ne(),g=U(h);{var p=m=>{var b=ru();it(b,21,()=>o(u),ft,(k,z,y)=>{var _=tu();G(()=>{S(_,"x1",o(u)[y]),S(_,"x2",o(c)[y]),S(_,"y1",o(d)[y]),S(_,"y2",o(f)[y]),Tt(_,o(v))}),C(k,_)}),G(()=>ct(b,0,di(l()))),C(m,b)};I(g,m=>{o(u)&&o(d)&&o(c)&&m(p)})}C(t,h),he()}var nu=ge('<text text-anchor="middle"><!></text>'),ou=ge("<text><!></text>"),au=ge("<text><!></text>"),su=ge('<g class="tick-labels"><!></g>');function Rs(t,e){ve(e,!0);let r=T(e,"pos",3,1),n=T(e,"las",3,1),a=P(()=>["middle","middle","start","middle","end"][r()]),s=P(()=>`fill:${e.textColor};`);const l=Ut("axes");let i=P(()=>Mt(e.tickCoords[1][0],l.tX())),u=P(()=>Mt(e.tickCoords[1][1],l.tY())),c=P(()=>ws[l.scales().plot]),d=P(()=>[0,0,o(c),0,-o(c)][r()]),f=P(()=>[0,o(c),0,-o(c),0][r()]);var v=su(),h=j(v);{var g=m=>{var b=Ne(),k=U(b);it(k,17,()=>o(i),ft,(z,y,_)=>{var w=nu();S(w,"data-id",_),S(w,"dx",0);var E=j(w);dt(E,()=>e.tickLabels[_],!0),G(()=>{S(w,"x",o(i)[_]),S(w,"y",o(u)[_]),S(w,"dy",o(d)*1.25),S(w,"transform",`rotate(-90, ${o(i)[_]}, ${o(u)[_]})`)}),C(z,w)}),C(m,b)},p=(m,b)=>{{var k=y=>{var _=Ne(),w=U(_);it(w,17,()=>o(i),ft,(E,L,F)=>{var O=ou();S(O,"data-id",F),S(O,"dy",0),S(O,"text-anchor","end");var X=j(O);dt(X,()=>e.tickLabels[F],!0),G(()=>{S(O,"x",o(i)[F]),S(O,"y",o(u)[F]),S(O,"dx",-o(f)/2),S(O,"transform",`rotate(-90, ${o(i)[F]}, ${o(u)[F]})`)}),C(E,O)}),C(y,_)},z=y=>{var _=Ne(),w=U(_);it(w,17,()=>o(i),ft,(E,L,F)=>{var O=au();S(O,"data-id",F);var X=j(O);dt(X,()=>e.tickLabels[F],!0),G(()=>{S(O,"x",o(i)[F]),S(O,"y",o(u)[F]),S(O,"dx",o(d)),S(O,"dy",o(f)),S(O,"text-anchor",o(a))}),C(E,O)}),C(y,_)};I(m,y=>{n()===2&&r()===1?y(k):y(z,!1)},b)}};I(h,m=>{n()===2&&r()===4?m(g):m(p,!1)})}G(()=>Tt(v,o(s))),C(t,v),he()}const lu=(t,e=bt,r=bt)=>{var n=hu();const a=P(()=>e().colmap.length);var s=U(n);it(s,17,()=>e().colmap,ft,(d,f,v)=>{var h=fu();const g=P(()=>r().start+v*r().width);var p=U(h),m=M(p);S(m,"dy",0);var b=j(m);dt(b,()=>e().labels[v],!0),G(()=>{S(p,"x",o(g)),S(p,"y",r().top),S(p,"width",r().width),S(p,"height",r().height),S(p,"fill",o(f)),S(m,"x",o(g)),S(m,"y",r().ltop),S(m,"dx",r().dxl),S(m,"fill",e().labelColor),S(m,"font-size",e().fontSize+"em")}),C(d,h)});var l=M(s);{var i=d=>{var f=du();const v=P(()=>r().start+o(a)*r().width);S(f,"dx",0),S(f,"dy",0);var h=j(f);dt(h,()=>e().labels[o(a)],!0),G(()=>{S(f,"x",o(v)),S(f,"y",r().ltop),S(f,"fill",e().labelColor),S(f,"font-size",`${e().fontSize??""}em`)}),C(d,f)};I(l,d=>{e().isCentered||d(i)})}var u=M(l);{var c=d=>{var f=vu();const v=P(()=>r().start+o(a)*r().width);var h=j(f);dt(h,()=>Ao(e().labelsFactor),!0),G(()=>{S(f,"x",o(v)),S(f,"y",r().ltop),S(f,"fill",e().labelColor),S(f,"font-size",`${e().fontSize??""}em`)}),C(d,f)};I(u,d=>{e().labelsFactor!==0&&d(c)})}C(t,n)};function Ms(t,e,r){t.preventDefault(),e(t,r())}function Fs(t,e,r){t.preventDefault(),e(t,r())}function js(t,e,r){t.preventDefault(),e(t,r())}function Mn(t,e,r){t.preventDefault(),e(t,r())}async function Bs(t,e,r,n){Yc(t.target,o(e),r(),n())}function qs(t,e,r){Hc(o(e),r())}function Is(t,e,r,n,a,s){Wc(o(e),r(),n(),a(),s())}var iu=ge('<text fill="crimson" text-anchor="middle"> </text>'),cu=ge('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),uu=ge("<!><!><!><!><!>",1),fu=ge('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),du=ge('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),vu=ge('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),hu=ge("<!><!><!>",1),gu=ge("<line></line>"),mu=ge('<text dominant-baseline="middle" text-anchor="middle"> </text>'),pu=ge('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),bu=ge('<svg><rect height="100%" width="100%"></rect><!></svg>'),wu=ge('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),_u=ge('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),yu=ge('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),xu=ge('<g class="plot-labels"><!><!><!></g>'),ku=ge('<g class="axis x-axis"><!></g>'),Eu=ge('<g class="axis y-axis"><!></g>'),Su=ge('<rect fill="transparent" id="axes-box"></rect>'),Au=ge('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Cu=ge('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),zu=ge('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Pu=ge('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Tu=D('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),Nu=D('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Lu=D(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Ru(t,e){ve(e,!0);const r=(ie,ke=bt,ye=bt)=>{var Qe=Ne(),ht=U(Qe);{var Bt=yt=>{var Ve=Ne(),Ae=U(Ve);{var ut=$e=>{var Ke=iu(),qt=j(Ke);G(()=>{S(Ke,"x",o(Re)[0]-10),S(Ke,"y",o(me)),S(Ke,"transform",`rotate(-90, ${o(Re)[0]-10}, ${o(me)})`),Le(qt,ye().error)}),C($e,Ke)},ot=$e=>{var Ke=cu(),qt=j(Ke);G(()=>{S(Ke,"x",o(de)),S(Ke,"y",o(Z)[0]),Le(qt,ye().error)}),C($e,Ke)};I(Ae,$e=>{ye().pos===4?$e(ut):$e(ot,!1)})}C(yt,Ve)},pt=yt=>{var Ve=uu(),Ae=U(Ve);{var ut=te=>{Po(te,{get lineCoords(){return ke().grid},get lineColor(){return Rt.MIDDLEGRAY},lineType:3})};I(Ae,te=>{ye().showGrid&&te(ut)})}var ot=M(Ae);Po(ot,{get lineCoords(){return ke().axisLine},get lineColor(){return Rt.DARKGRAY},lineType:1});var $e=M(ot);Po($e,{get lineCoords(){return ke().tickCoords},get lineColor(){return Rt.DARKGRAY},lineType:1});var Ke=M($e);{var qt=te=>{Rs(te,{get las(){return ye().las},get pos(){return ye().pos},get tickCoords(){return ke().tickCoords},get tickLabels(){return ke().tickLabels},get tickColor(){return Rt.DARKGRAY},get hideLast(){return ye().hideLast}})};I(Ke,te=>{ke().tickCoords.length===2&&ke().tickLabels.length===ke().tickCoords[1][0].length&&te(qt)})}var ur=M(Ke);{var Me=te=>{const st=P(()=>[ke().tfLabel]);Rs(te,{get pos(){return ye().pos},get tickCoords(){return ke().tfCoords},get tickLabels(){return o(st)},get textColor(){return Rt.DARKGRAY}})};I(ur,te=>{ke().tickFactor!==0&&te(Me)})}C(yt,Ve)};I(ht,yt=>{ye().error?yt(Bt):yt(pt,!1)})}C(ie,Qe)},n=(ie,ke=bt,ye=bt)=>{var Qe=bu();const ht=P(()=>ye().elw+2*ye().elp),Bt=P(()=>ye().elp),pt=P(()=>ye().elh),yt=P(()=>ye().ely);var Ve=j(Qe),Ae=M(Ve);it(Ae,17,()=>ke().items,ft,(ut,ot,$e)=>{var Ke=pu();S(Ke,"x",0);var qt=j(Ke);{var ur=Xt=>{var rt=gu();G(()=>{S(rt,"x1",o(Bt)),S(rt,"x2",o(ht)-o(Bt)),S(rt,"y1",o(pt)[$e]/2),S(rt,"y2",o(pt)[$e]/2),S(rt,"stroke",o(ot).line.lineColor),S(rt,"stroke-width",o(ot).line.lineWidth),S(rt,"stroke-dasharray",o(X)[o(ot).line.lineType-1])}),C(Xt,rt)};I(qt,Xt=>{o(ot).line&&Xt(ur)})}var Me=M(qt);{var te=Xt=>{var rt=mu(),Ro=j(rt);G(()=>{S(rt,"x",o(ht)/2),S(rt,"y",o(pt)[$e]/2),S(rt,"fill",o(ot).point.faceColor),S(rt,"stroke-width",o(ot).point.lineWidth),S(rt,"stroke",o(ot).point.lineColor),S(rt,"font-size",o(F)),Le(Ro,Fc[o(ot).point.marker-1])}),C(Xt,rt)};I(Me,Xt=>{o(ot).point&&Xt(te)})}var st=M(Me),Bn=j(st);dt(Bn,()=>o(ot).label,!0),G(()=>{S(Ke,"y",o(yt)[$e]),S(Ke,"width",ye().lgw),S(Ke,"height",o(pt)[$e]),S(st,"x",o(ht)+o(Bt)),S(st,"y",o(pt)[$e]/2),S(st,"fill",Rt.LEGEND),S(st,"font-size",`${ke().fontSize??""}em`)}),C(ut,Ke)}),G(()=>{S(Qe,"x",ye().lgl),S(Qe,"y",ye().lgt),S(Qe,"height",ye().lgh),S(Qe,"width",ye().lgw),S(Ve,"fill",ke().faceColor),S(Ve,"stroke",ke().lineColor),S(Ve,"stroke-width",ke().lineWidth)}),C(ie,Qe)};let a=T(e,"limX",19,()=>[0,1]),s=T(e,"limY",19,()=>[0,1]),l=T(e,"margins",19,()=>[1,1.1,.55,.6]),i=T(e,"downloadLinks",3,"none"),u=T(e,"fileName",3,"plot"),c=T(e,"pngWidth",3,8),d=T(e,"pngHeight",3,8),f=T(e,"pngRes",3,300),v=T(e,"clipboardWidth",3,1200),h=T(e,"clipboardHeight",3,800),g=T(e,"onclick",3,null),p=T(e,"onmousemove",3,null),m=T(e,"onmousedown",3,null),b=T(e,"onmouseup",3,null);function k(ie,ke){if(ke&&ie.target.id=="axes-box"){const ye=Ss([ie.offsetX-o(ce)],o(pe))[0],Qe=Ss([ie.offsetY-o(K)],o(Ue))[0];ke(ye,Qe)}}const z="plottingArea"+Math.round(Math.random()*1e4);let y=W(0),_=W(0),w=W(0);const E=P(()=>({plot:Ic(o(_),o(w)),x:Ns(o(_)),y:Ns(o(w))})),L=P(()=>l().map(ie=>ie*Nc[o(E).plot])),F=P(()=>Mc[o(E).plot]),O=P(()=>So[o(E).plot]),X=P(()=>Ln[o(E).plot]),oe=P(()=>o(we).show&&o(we).label!==""?o(F)*1.5:0),ce=P(()=>o(_e).show&&o(_e).label!==""?o(F)*1.5:0),K=P(()=>e.title&&e.title!==""?o(F)*1.5:0),q=P(()=>o(_)>o(ce)?o(_)-o(ce):0),Q=P(()=>o(w)>o(oe)+o(K)?o(w)-o(oe)-o(K):0),re=P(()=>o(Q)-o(L)[0]-o(L)[2]),ae=P(()=>o(q)-o(L)[1]-o(L)[3]),J=P(()=>ys(a(),2)&&ys(s(),2)&&o(q)>o(L)[1]+o(L)[3]&&o(Q)>o(L)[0]+o(L)[2]),pe=P(()=>o(J)?{coords:[o(ae)/(a()[1]-a()[0]),a()[0],o(L)[1]],objects:[o(ae)/(a()[1]-a()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Ue=P(()=>o(J)?{coords:[-o(re)/(s()[1]-s()[0]),s()[1],o(L)[2]],objects:[o(re)/(s()[1]-s()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),me=P(()=>o(re)*.5+o(K)+o(L)[2]),de=P(()=>o(ae)*.5+o(ce)+o(L)[1]),Re=P(()=>o(J)?Mt(a(),o(pe)):[0,1]),Z=P(()=>o(J)?Mt(s(),o(Ue)):[1,0]),se=P(()=>Ar(e.title)),De=P(()=>o(se)?o(se).length===e.title.left?1:1.4:0);let Oe=W(Te({show:!1})),we=W(Te({show:!1,error:""})),_e=W(Te({show:!1,error:""})),be=W(Te({show:!1,colmap:null,breaks:null})),B=W(Te({show:!1,items:null,position:null}));const H=P(()=>o(J)&&o(be)&&o(be).show?Jc(o(be)):null),V=P(()=>o(J)&&o(we).show?Kc(a(),s(),o(E),o(Ue),o(we)):null),$=P(()=>o(J)&&o(_e).show?Xc(a(),s(),o(E),o(pe),o(_e)):null),ee=P(()=>o(J)&&o(H)?Zc(o(H),o(ae),o(L),o(E)):null),ue=P(()=>o(J)&&o(B)&&o(B).show&&o(Re)?eu(o(B),o(Re),o(Z),o(F),o(O)):null);Pl("axes",{setBox:ie=>N(Oe,ie,!0),setXAxis:ie=>N(we,ie,!0),setYAxis:ie=>N(_e,ie,!0),setColmapLegend:ie=>N(be,ie,!0),setGroupLegend:ie=>N(B,ie,!0),scales:()=>o(E),tX:()=>o(pe),tY:()=>o(Ue),limX:()=>a(),limY:()=>s()});var Be=Lu();let je;var ze=j(Be),We=M(j(ze));{var _t=ie=>{var ke=xu(),ye=j(ke);{var Qe=Ve=>{var Ae=wu();S(Ae,"dx",0),S(Ae,"dy",0);var ut=j(Ae);dt(ut,()=>o(we).label,!0),G(()=>{S(Ae,"x",o(de)),S(Ae,"y",o(Q)+o(K))}),C(Ve,Ae)};I(ye,Ve=>{o(we).show&&o(we).label&&o(we).label!==""&&Ve(Qe)})}var ht=M(ye);{var Bt=Ve=>{var Ae=_u();S(Ae,"dx",0),S(Ae,"dy",0);var ut=j(Ae);dt(ut,()=>o(_e).label,!0),G(()=>{S(Ae,"x",o(F)/1.1*o(_e).labelHeight),S(Ae,"y",o(me)),S(Ae,"transform",`rotate(-90, ${o(F)*o(_e).labelHeight/1.1}, ${o(me)})`)}),C(Ve,Ae)};I(ht,Ve=>{o(_e).show&&o(_e).label&&o(_e).label!==""&&Ve(Bt)})}var pt=M(ht);{var yt=Ve=>{var Ae=yu();S(Ae,"dx",0),S(Ae,"dy",0);var ut=j(Ae);dt(ut,()=>o(se),!0),G(()=>{S(Ae,"x",o(de)),S(Ae,"y",o(F)*o(De))}),C(Ve,Ae)};I(pt,Ve=>{o(se)&&o(se)!==""&&Ve(yt)})}C(ie,ke)};I(We,ie=>{o(J)&&ie(_t)})}var He=M(We),Ft=j(He),jt=j(Ft),Kt=j(jt),Cr=M(Ft);{var zr=ie=>{var ke=Pu(),ye=U(ke);{var Qe=Me=>{var te=ku(),st=j(te);r(st,()=>o(V),()=>o(we)),C(Me,te)};I(ye,Me=>{o(we).show&&o(V)&&Me(Qe)})}var ht=M(ye);{var Bt=Me=>{var te=Eu(),st=j(te);r(st,()=>o($),()=>o(_e)),C(Me,te)};I(ht,Me=>{o(_e).show&&o($)&&Me(Bt)})}var pt=M(ht),yt=j(pt);{var Ve=Me=>{var te=Su();te.__keydown=[Mn,k,g],te.__click=[Mn,k,g],te.__mousemove=[js,k,p],te.__mousedown=[Ms,k,m],te.__mouseup=[Fs,k,b],G(()=>{S(te,"stroke",o(Oe).lineColor),S(te,"stroke-width",`${o(Oe).lineWidth??""}px`),S(te,"x",o(Re)[0]),S(te,"y",o(Z)[1]),S(te,"width",o(Re)[1]-o(Re)[0]),S(te,"height",o(Z)[0]-o(Z)[1])}),C(Me,te)},Ae=Me=>{var te=Au();te.__keydown=[Mn,k,g],te.__click=[Mn,k,g],te.__mousemove=[js,k,p],te.__mousedown=[Ms,k,m],te.__mouseup=[Fs,k,b],G(()=>{S(te,"x",o(Re)[0]),S(te,"y",o(Z)[1]),S(te,"width",o(Re)[1]-o(Re)[0]),S(te,"height",o(Z)[0]-o(Z)[1])}),C(Me,te)};I(yt,Me=>{o(Oe).show?Me(Ve):Me(Ae,!1)})}var ut=M(pt),ot=j(ut);Vr(ot,()=>e.children??bt);var $e=M(ut);{var Ke=Me=>{var te=Cu(),st=j(te);lu(st,()=>o(H),()=>o(ee)),C(Me,te)};I($e,Me=>{o(ee)&&Me(Ke)})}var qt=M($e);{var ur=Me=>{var te=zu(),st=j(te);n(st,()=>o(B),()=>o(ue)),C(Me,te)};I(qt,Me=>{o(ue)&&Me(ur)})}G(()=>S(ut,"clip-path",`url(#${z})`)),C(ie,ke)};I(Cr,ie=>{o(J)&&ie(zr)})}wr(ze,ie=>N(y,ie),()=>o(y));var St=M(ze,2);{var No=ie=>{var ke=Tu();C(ie,ke)},Lo=ie=>{var ke=Nu(),ye=j(ke);ye.__click=[qs,y,u],ye.__keydown=[qs,y,u];var Qe=M(ye,2);Qe.__click=[Is,y,u,c,d,f],Qe.__keydown=[Is,y,u,c,d,f];var ht=M(Qe,2);ht.__click=[Bs,y,v,h],ht.__keydown=[Bs,y,v,h],C(ie,ke)};I(St,ie=>{o(J)?ie(Lo,!1):ie(No)})}G(ie=>{je=ct(Be,1,`plot-container show-download-links-${i()??""}`,"svelte-1jtdxd0",je,ie),Tt(ze,`font-size:${o(F)??""}px`),S(He,"x",o(ce)),S(He,"y",o(K)),S(He,"width",o(q)),S(He,"height",o(Q)),S(jt,"id",z),S(Kt,"x",o(Re)[0]),S(Kt,"y",o(Z)[1]),S(Kt,"width",o(Re)[1]-o(Re)[0]),S(Kt,"height",o(Z)[0]-o(Z)[1])},[()=>({"plot-error":!o(J)})]),La(ze,"clientWidth",ie=>N(_,ie)),La(ze,"clientHeight",ie=>N(w,ie)),C(t,Be),he()}tt(["keydown","click","mousemove","mousedown","mouseup"]);function Mu(t,e){ve(e,!0);let r=T(e,"tickLabels",7),n=T(e,"las",3,1),a=T(e,"whole",3,!1),s=T(e,"show",3,!0),l=T(e,"showGrid",3,!1);const i=Ut("axes");le(()=>{const u=Ar(e.label),c=u?u.length===e.label.length?1:1.4:0;let d,f="";e.ticks&&([d,f]=Ps(e.ticks,i.limX())),!f&&r()&&(v=>{var h=dn(v,2);r(h[0]),f=h[1]})(zs(r(),d)),i.setXAxis({show:s(),error:f,label:u,ticks:d,labelHeight:c,showGrid:l(),las:n(),whole:a(),tickLabels:r()})}),he()}function Fu(t,e){ve(e,!0);let r=T(e,"tickLabels",7),n=T(e,"las",3,1),a=T(e,"whole",3,!1),s=T(e,"show",3,!0),l=T(e,"showGrid",3,!1);const i=Ut("axes");le(()=>{const u=Ar(e.label),c=u?u.length===e.label.length?1:1.4:0;let d,f="";e.ticks&&([d,f]=Ps(e.ticks,i.limY())),!f&&r()&&(v=>{var h=dn(v,2);r(h[0]),f=h[1]})(zs(r(),d)),i.setYAxis({show:s(),error:f,label:u,ticks:d,labelHeight:c,showGrid:l(),las:n(),whole:a(),tickLabels:r(),pos:4})}),he()}function ju(t,e){ve(e,!0);let r=T(e,"lineWidth",3,1),n=T(e,"lineColor",3,"#606060");const a=Ut("axes");le(()=>{a.setBox({show:!0,lineWidth:r(),lineColor:n()})}),he()}var Bu=(t,e)=>Rn(t,"rect",e.onclick),qu=ge("<rect></rect>"),Iu=ge("<g></g>");function Ds(t,e){ve(e,!0);let r=T(e,"faceColor",19,()=>Rt.PRIMARY),n=T(e,"lineColor",19,r),a=T(e,"lineWidth",3,1),s=T(e,"className",3,"series-rect");const l=P(()=>Sr(e.left,"Rectangles (left)")),i=P(()=>o(l)?Sr(e.top,"Rectangles (top)",o(l).length):null),u=P(()=>o(i)?typeof e.width!="object"?Je.fill(e.width,o(l).length):e.width:null),c=P(()=>o(i)?typeof e.height!="object"?Je.fill(e.height,o(l).length):e.height:null),d=Ut("axes"),f=P(()=>o(l)?Mt(o(l),d.tX()):null),v=P(()=>o(i)?Mt(o(i),d.tY()):null),h=P(()=>o(u)?ks(o(u),d.tX()):null),g=P(()=>o(c)?ks(o(c),d.tY()):null),p=P(()=>`fill:${r()};stroke:${n()};stroke-width:${a()}px;`),m=P(()=>o(f)&&o(v)&&o(h)&&o(g)&&o(h).length===o(f).length&&o(g).length===o(f).length);var b=Ne(),k=U(b);{var z=y=>{var _=Iu();_.__click=[Bu,e],it(_,21,()=>e.left,ft,(w,E,L)=>{var F=qu();G(()=>{S(F,"x",o(f)[L]),S(F,"y",o(v)[L]),S(F,"width",o(h)[L]),S(F,"height",o(g)[L])}),C(w,F)}),G(()=>{ct(_,0,`series ${s()??""}`),Tt(_,o(p))}),C(y,_)};I(k,y=>{o(m)&&y(z)})}C(t,b),he()}tt(["click"]),tt(["click"]);var Du=(t,e)=>Rn(t,"text",e.onclick),Ou=ge("<text><!></text>"),Vu=ge("<text><!></text>"),Uu=ge("<text><!></text>"),Wu=ge('<g class="series series-textlabels"><!></g>');function To(t,e){ve(e,!0);let r=T(e,"pos",3,0),n=T(e,"faceColor",19,()=>Rt.PRIMARY_TEXT),a=T(e,"lineColor",3,"transparent"),s=T(e,"lineWidth",3,0),l=T(e,"textSize",3,1),i=T(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],c=P(()=>Sr(e.xValues,"TextLabels")),d=P(()=>o(c)?Sr(e.yValues,"TextLabels",o(c).length):null),f=P(()=>o(d)?Array.isArray(e.labels)&&e.labels.length!==o(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),v=P(()=>o(f)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),h=Ut("axes"),g=P(()=>o(c)&&o(v)!==null?Mt(o(c),h.tX()):null),p=P(()=>o(d)&&o(g)?Mt(o(d),h.tY()):null),m=P(()=>ws[h.scales().plot]),b=P(()=>[0,0,-o(m),0,o(m),o(m)]),k=P(()=>[0,o(m),0,-o(m),0,o(m)]),z=P(()=>`fill:${n()};stroke-width:${s()}px;stroke:${a()};font-size:${l()}em;`),y=P(()=>o(g)&&o(p)&&o(v)!==null&&o(f)&&o(g).length===o(p).length);var _=Ne(),w=U(_);{var E=L=>{var F=Wu();F.__click=[Du,e];var O=j(F);{var X=ce=>{var K=Ne(),q=U(K);it(q,17,()=>o(g),ft,(Q,re,ae)=>{var J=Ou();S(J,"data-id",ae);var pe=j(J);dt(pe,()=>e.labels,!0),G(()=>{S(J,"x",o(g)[ae]),S(J,"y",o(p)[ae]),S(J,"dx",o(b)[r()]),S(J,"dy",o(k)[r()]),S(J,"transform",i()!==void 0?`rotate(${i()}, ${o(g)[ae]+o(b)[r()]}, ${o(p)[ae]+o(k)[r()]})`:""),S(J,"text-anchor",u[r()[ae]])}),C(Q,J)}),C(ce,K)},oe=(ce,K)=>{{var q=re=>{var ae=Ne(),J=U(ae);it(J,17,()=>o(g),ft,(pe,Ue,me)=>{var de=Vu();S(de,"data-id",me);var Re=j(de);dt(Re,()=>e.labels[me],!0),G(()=>{S(de,"x",o(g)[me]),S(de,"y",o(p)[me]),S(de,"dx",o(b)[r()[me]]),S(de,"dy",o(k)[r()[me]]),S(de,"transform",i()!==void 0?`rotate(${i()}, ${o(g)[me]+o(b)[r()]}, ${o(p)[me]+o(k)[r()]})`:""),S(de,"text-anchor",u[r()[me]])}),C(pe,de)}),C(re,ae)},Q=re=>{var ae=Ne(),J=U(ae);it(J,17,()=>o(g),ft,(pe,Ue,me)=>{var de=Uu();S(de,"data-id",me);var Re=j(de);dt(Re,()=>e.labels[me],!0),G(()=>{S(de,"x",o(g)[me]),S(de,"y",o(p)[me]),S(de,"dx",o(b)[r()]),S(de,"dy",o(k)[r()]),S(de,"transform",i()!==void 0?`rotate(${i()}, ${o(g)[me]+o(b)[r()]}, ${o(p)[me]+o(k)[r()]})`:""),S(de,"text-anchor",u[r()])}),C(pe,de)}),C(re,ae)};I(ce,re=>{Array.isArray(r())||ArrayBuffer.isView(r())?re(q):re(Q,!1)},K)}};I(O,ce=>{typeof e.labels=="string"?ce(X):ce(oe,!1)})}G(()=>Tt(F,o(z))),C(L,F)};I(w,L=>{o(y)&&L(E)})}C(t,_),he()}tt(["click"]),tt(["click"]),tt(["click"]);var Hu=(t,e)=>Rn(t,"polyline",e.onclick),Yu=ge('<g class="series series-line"><polyline class="line"></polyline></g>');function Os(t,e){ve(e,!0);let r=T(e,"lineColor",19,()=>Rt.PRIMARY),n=T(e,"lineType",3,1),a=T(e,"lineWidth",3,1);const s=P(()=>Sr(e.xValues,"Lines")),l=P(()=>o(s)?Sr(e.yValues,"Lines",o(s).length):null),i=Ut("axes"),u=P(()=>o(s)&&o(l)?Cs(o(s),o(l),i.tX(),i.tY()):null),c=P(()=>`fill:transparent;stroke:${r()};stroke-width: ${a()}px; stroke-dasharray:${Ln[i.scales().plot][n()-1]}`);var d=Ne(),f=U(d);{var v=h=>{var g=Yu();g.__click=[Hu,e];var p=j(g);G(()=>{Tt(g,o(c)),S(p,"points",o(u))}),C(h,g)};I(f,h=>{o(u)&&h(v)})}C(t,d),he()}tt(["click"]);var Gu=(t,e)=>Rn(t,"polyline",e.onclick),Ku=ge('<polyline class="line"></polyline>'),Xu=ge('<g class="series series-multiline"></g>');function Ju(t,e){ve(e,!0);let r=T(e,"lineColor",19,()=>Rt.PRIMARY),n=T(e,"lineType",3,1),a=T(e,"lineWidth",3,1);const s=P(()=>Sr(e.xValues,"Multilines")),l=P(()=>o(s)?ir(e.yValues)?(o(s).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),i=Ut("axes"),u=P(()=>{if(!o(s)||!o(l))return null;const h=new Array(o(l).ncols);for(let g=0;g<h.length;g++)h[g]=Cs(o(s),o(l).getcolumn(g+1),i.tX(),i.tY());return h}),c=P(()=>`fill:transparent;stroke:${r()};stroke-width: ${a()}px; stroke-dasharray:${Ln[i.scales().plot][n()-1]}`);var d=Ne(),f=U(d);{var v=h=>{var g=Xu();g.__click=[Gu,e],it(g,21,()=>o(u),ft,(p,m)=>{var b=Ku();G(()=>S(b,"points",o(m))),C(p,b)}),G(()=>Tt(g,o(c))),C(h,g)};I(f,h=>{o(u)&&o(u).length>0&&h(v)})}C(t,d),he()}tt(["click"]);function Zu(t,e){ve(e,!0);let r=T(e,"show",3,!0),n=T(e,"labels",3,null),a=T(e,"labelColor",19,()=>Rt.CLEGEND_LABELS),s=T(e,"fontSize",3,.85);const l=Ut("axes");le(()=>{l.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:n(),labelColor:a(),fontSize:s()})}),he()}function Qu(t,e,r){const n=e.length,a=new Array(t.length),s=e[1]-e[0];for(let l=0;l<t.length;l++)for(let i=0;i<n-1;i++){const u=t[l]>=e[i],c=i===n-2?t[l]<e[i+1]+s:t[l]<e[i+1];if(u&&c){a[l]=r[i];break}}return a}var $u=D("<!> <!>",1),ef=D("<!> <!>",1),tf=D("<!> <!>",1),rf=D("<!> <!> <!> <!> <!> <!> <!> <!>",1),nf=D("<h2>Plot settings</h2>"),of=D("<!> <!>",1),af=D('<div class="plot-area svelte-x8qn01"><div class="plot svelte-x8qn01"><!></div></div> <div class="plot-controls-area svelte-x8qn01"><!> <!> <!></div>',1),sf=D('<div class="plot-panel svelte-x8qn01"><!></div>');function Vs(t,e){ve(e,!0);let r=W(!0),n=W("none"),a=W(!1);const s=P(()=>(o(r)?"Preprocessed":"Raw")+" data (selected rows)"),l=P(()=>o(r)&&e.prepdata?e.prepdata:e.rawdata),i=P(()=>o(l)?o(l).varaxisLabel:"Variables"),u=P(()=>e.rawdata.varaxisUnits),c=P(()=>o(r)&&o(l)&&e.left>=0&&e.right<o(l).values.nrows&&e.left<e.right?vt.seq(e.left+1,e.right):null),d=P(()=>o(c)?o(l).varvalues.filter((_,w)=>w>=e.left&&w<e.right):o(l).varvalues),f=P(()=>o(c)?o(l).values.subset(o(c),null):o(l).values),v=P(()=>o(f)?fo(o(f).v):null),h=P(()=>o(v)?(o(v)[1]-o(v)[0])*.05:null),g=P(()=>o(v)?[o(v)[0],o(v)[1]+(o(n)!=="none")*o(h)]:[0,1]),p=P(()=>o(l)?fo(o(l).varvalues):[0,1]),m=P(()=>o(a)?[o(l).varvalues[e.left],o(l).varvalues[e.right-1]]:o(p)),b=P(()=>{if(!e.rawdata)return null;const _={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const w=Ls(e.rawdata.classNames.length);_.groups={colors:e.rawdata.classes.map(E=>w[e.rawdata.classNames.findIndex(L=>L===E)]),breaks:yr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:w}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const w=ja(e.rawdata.resp,8),E=Ls(w.length-1);_.response={colors:Qu(e.rawdata.resp.v,w.v,E),labels:null,breaks:w,map:E}}return _});le(()=>{(e.left<1||e.right<1||e.right>=e.left)&&N(a,!1)});var k=sf(),z=j(k);{var y=_=>{var w=af(),E=U(w),L=j(E),F=j(L);Ru(F,{get title(){return o(s)},get limY(){return o(g)},get limX(){return o(m)},fileName:"plot-preprocessed",children:(q,Q)=>{var re=rf(),ae=U(re);{var J=B=>{Ju(B,{get xValues(){return o(d)},get yValues(){return o(f)}})},pe=B=>{var H=Ne(),V=U(H);it(V,17,()=>o(b)[o(n)].colors,ft,($,ee,ue)=>{const Be=P(()=>o(f).getcolumn(ue+1));Os($,{get xValues(){return o(d)},get yValues(){return o(Be)},get lineColor(){return o(ee)}})}),C(B,H)};I(ae,B=>{o(n)==="none"?B(J):B(pe,!1)})}var Ue=M(ae,2);{var me=B=>{var H=$u();const V=P(()=>o(l).varvalues[e.varind[0]-1]);var $=U(H);const ee=P(()=>[o(V),o(V)]);Os($,{get xValues(){return o(ee)},get yValues(){return o(g)},lineColor:"#00000060"});var ue=M($,2);const Be=P(()=>[o(V)]),je=P(()=>[o(g)[1]-o(h)*(o(n)==="none"?1:2)]),ze=P(()=>Ar(o(V).toFixed(2)+" "+o(u)));To(ue,{get xValues(){return o(Be)},get yValues(){return o(je)},get labels(){return o(ze)},textColor:"#a0a0a0",textSize:.8,pos:2}),C(B,H)};I(Ue,B=>{e.varind&&e.varind[0]>0&&B(me)})}var de=M(Ue,2);{var Re=B=>{var H=ef();const V=P(()=>o(l).varvalues[e.varind[1]]);var $=U(H);const ee=P(()=>[o(m)[0]]),ue=P(()=>[o(l).varvalues[e.varind[1]]-o(m)[0]]),Be=P(()=>[o(g)[1]]),je=P(()=>[o(g)[1]-o(g)[0]]);Ds($,{get left(){return o(ee)},get width(){return o(ue)},get top(){return o(Be)},get height(){return o(je)},lineColor:"transparent",faceColor:"#00000040"});var ze=M($,2);const We=P(()=>[o(V)]),_t=P(()=>[o(g)[1]-o(h)*(o(n)==="none"?1:2)]),He=P(()=>Ar(o(V).toFixed(2)+" "+o(u)));To(ze,{get xValues(){return o(We)},get yValues(){return o(_t)},get labels(){return o(He)},textColor:"#a0a0a0",textSize:.8,pos:2}),C(B,H)};I(de,B=>{e.varind&&e.varind[1]>0&&B(Re)})}var Z=M(de,2);{var se=B=>{var H=tf();const V=P(()=>o(l).varvalues[e.varind[2]-1]);var $=U(H);const ee=P(()=>[o(l).varvalues[e.varind[2]-1]]),ue=P(()=>[o(m)[1]-o(l).varvalues[e.varind[2]-1]]),Be=P(()=>[o(g)[1]]),je=P(()=>[o(g)[1]-o(g)[0]]);Ds($,{get left(){return o(ee)},get width(){return o(ue)},get top(){return o(Be)},get height(){return o(je)},lineColor:"transparent",faceColor:"#00000040"});var ze=M($,2);const We=P(()=>[o(V)]),_t=P(()=>[o(g)[1]-o(h)*(o(n)==="none"?1:2)]),He=P(()=>Ar(o(V).toFixed(2)+" "+o(u)));To(ze,{get xValues(){return o(We)},get yValues(){return o(_t)},get labels(){return o(He)},textColor:"#a0a0a0",textSize:.8,pos:2}),C(B,H)};I(Z,B=>{e.varind&&e.varind[2]<o(l).varvalues.length&&e.varind[2]>0&&B(se)})}var De=M(Z,2);const Oe=P(()=>o(n)!=="none");Zu(De,{get show(){return o(Oe)},get labels(){return o(b)[o(n)].labels},get breaks(){return o(b)[o(n)].breaks},get colmap(){return o(b)[o(n)].map}});var we=M(De,2);Mu(we,{get label(){return o(i)},showGrid:!0});var _e=M(we,2);Fu(_e,{showGrid:!0});var be=M(_e,2);ju(be,{}),C(q,re)},$$slots:{default:!0}});var O=M(E,2),X=j(O);ne(X,{label:"",children:(q,Q)=>{var re=nf();C(q,re)},$$slots:{default:!0}});var oe=M(X,2);ne(oe,{label:"Show",children:(q,Q)=>{xo(q,{options:["raw","preprocessed"],get value(){return o(r)},set value(re){N(r,re,!0)}})},$$slots:{default:!0}});var ce=M(oe,2);{var K=q=>{var Q=of(),re=U(Q);ne(re,{label:"Color by",children:(pe,Ue)=>{const me=P(()=>Object.keys(o(b)));Lt(pe,{get options(){return o(me)},get value(){return o(n)},set value(de){N(n,de,!0)}})},$$slots:{default:!0}});var ae=M(re,2);{var J=pe=>{ne(pe,{label:"Zoom (x-axis)",children:(Ue,me)=>{xo(Ue,{options:["off","on"],get value(){return o(a)},set value(de){N(a,de,!0)}})},$$slots:{default:!0}})};I(ae,pe=>{e.left>0&&e.right>e.left&&pe(J)})}C(q,Q)};I(ce,q=>{Object.keys(o(b)).length>1&&q(K)})}C(_,w)};I(z,_=>{o(d)&&o(f)&&_(y)})}C(t,k),he()}const lf=t=>t;function Us(t,{delay:e=0,duration:r=400,easing:n=lf}={}){const a=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:s=>`opacity: ${s*a}`}}var cf=D('<p class="title"> </p>'),uf=D('<div class="method-open svelte-2gffce"><!> <!> <!></div>'),ff=(t,e)=>e.open(e.pos),df=D('<p> <span title="Edit" class="svelte-2gffce"> </span></p> <!> <!> <!>',1);function Yr(t,e){ve(e,!0);var r=Ne(),n=U(r);{var a=l=>{var i=uf(),u=j(i);ne(u,{children:(f,v)=>{var h=cf(),g=j(h);G(()=>Le(g,e.title)),C(f,h)},$$slots:{default:!0}});var c=M(u,2);Vr(c,()=>e.children);var d=M(c,2);ne(d,{label:" ",children:(f,v)=>{kr(f,{text:"Save",get onclick(){return e.apply}})},$$slots:{default:!0}}),Ta(3,i,()=>Us,()=>({duration:10})),C(l,i)},s=l=>{ne(l,{children:(i,u)=>{var c=df(),d=U(c),f=j(d),v=M(f);v.__click=[ff,e];var h=j(v),g=M(d,2);Qi(g,{onclick:()=>e.moveUp(e.pos)});var p=M(g,2);$i(p,{onclick:()=>e.moveDown(e.pos)});var m=M(p,2);Tn(m,{onclick:()=>e.remove(e.pos)}),G(()=>{Le(f,`${e.title??""} `),Le(h,e.settings)}),C(i,c)},$$slots:{default:!0}})};I(n,l=>{e.isOpen?l(a):l(s,!1)})}C(t,r),he()}tt(["click"]);var vf=D("<!> <!>",1);function hf(t,e){ve(e,!0);let r=T(e,"params",31,()=>Te([0,0])),n=T(e,"varind",15),a=T(e,"settings",15),s=T(e,"nvars",3,0),l=Ur(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const i={snv:0,area:1,length:2,var:3},u=Object.keys(i);let c=W(Te(u[r()[0]])),d=W(r()[1]+1);const f="Normalization";le(()=>{a(o(c)+(o(c)==="var"?" #"+o(d):""))}),le(()=>{o(c)==="var"?n(n()[0]=r()[1]>0?r()[1]:1,!0):n(n()[0]=-1,!0)}),le(()=>{o(c)==="var"&&e.isOpen?n(n()[0]=r()[1],!0):n(n()[0]=-1,!0)}),le(()=>{o(c)&&r(r()[0]=i[o(c)],!0)}),le(()=>{o(d)&&r(r()[1]=o(d)-1,!0)}),Yr(t,Wr({id:"norm",title:f,get settings(){return a()},get isOpen(){return e.isOpen}},()=>l,{children:(v,h)=>{var g=vf(),p=U(g);ne(p,{label:"Type",children:(k,z)=>{Lt(k,{get options(){return u},get value(){return o(c)},set value(y){N(c,y,!0)}})},$$slots:{default:!0}});var m=M(p,2);{var b=k=>{ne(k,{label:"Variable index",children:(z,y)=>{on(z,{min:1,get max(){return s()},step:1,get value(){return o(d)},set value(_){N(d,_,!0)}})},$$slots:{default:!0}})};I(m,k=>{o(c)==="var"&&k(b)})}C(v,g)},$$slots:{default:!0}})),he()}var gf=D("<!> <!> <!>",1);function mf(t,e){ve(e,!0);let r=T(e,"params",31,()=>Te([3,1,0])),n=T(e,"settings",15),a=Ur(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const s=P(()=>{if(!e.nvars)return 3;const c=Math.round(e.nvars*.25);return c>39?39:c%2<1?c+1:c}),l=P(()=>r()[1]<2?[0,1]:[0,1,2]),i=P(()=>r()[0]<5?[1,2]:[1,2,3]);le(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),le(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),le(()=>{n(r()[0]+", "+r()[1]+", "+r()[2])}),Yr(t,Wr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return n()}},()=>a,{children:(c,d)=>{var f=gf(),v=U(f);ne(v,{label:"Width",children:(p,m)=>{on(p,{min:3,get max(){return o(s)},step:2,get value(){return r()[0]},set value(b){r(r()[0]=b,!0)}})},$$slots:{default:!0}});var h=M(v,2);ne(h,{label:"Polynomial",children:(p,m)=>{Lt(p,{get options(){return o(i)},get value(){return r()[1]},set value(b){r(r()[1]=b,!0)}})},$$slots:{default:!0}});var g=M(h,2);ne(g,{label:"Derivative",children:(p,m)=>{Lt(p,{get options(){return o(l)},get value(){return r()[2]},set value(b){r(r()[2]=b,!0)}})},$$slots:{default:!0}}),C(c,f)},$$slots:{default:!0}})),he()}var pf=D("<!> <!>",1);function bf(t,e){ve(e,!0);let r=T(e,"params",31,()=>Te([1,0]));T(e,"varind",27,()=>-1);let n=T(e,"settings",15);T(e,"nvars",3,0);let a=Ur(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const s={no:0,mean:1,median:2},l={no:0,sd:1,iqr:2,range:3,pareto:4},i=Object.keys(s),u=Object.keys(l);let c=W(Te(i[r()[0]])),d=W(Te(u[r()[1]]));const f="Scaling";le(()=>{n(o(c)+"/"+o(d))}),le(()=>{o(c)&&r(r()[0]=s[o(c)],!0)}),le(()=>{o(d)&&r(r()[1]=l[o(d)],!0)}),Yr(t,Wr({id:"scale",title:f,get settings(){return n()}},()=>a,{children:(v,h)=>{var g=pf(),p=U(g);ne(p,{label:"Center",children:(b,k)=>{Lt(b,{get options(){return i},get value(){return o(c)},set value(z){N(c,z,!0)}})},$$slots:{default:!0}});var m=M(p,2);ne(m,{label:"Scale",children:(b,k)=>{Lt(b,{get options(){return u},get value(){return o(d)},set value(z){N(d,z,!0)}})},$$slots:{default:!0}}),C(v,g)},$$slots:{default:!0}})),he()}var wf=D("<!> <!> <!>",1),_f=D("<!> <!> <!>",1);function yf(t,e){ve(e,!0);let r=T(e,"params",31,()=>Te([0,1,.1]));T(e,"varind",27,()=>-1);let n=T(e,"settings",15,"");T(e,"nvars",3,0);let a=Ur(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const s="Baseline correction",l={emsc:0,als:1},i=Object.keys(l);function u(g){const p=Math.ceil(Math.log10(g));return Math.pow(10,p)}let c=W(Te(i[r()[0]])),d=W(Te(r()[2]>0?u(r()[2]).toString():"0.1")),f=P(()=>parseFloat(o(d))),v=P(()=>o(f)/10),h=P(()=>Math.ceil(-Math.log10(o(f)))+1);le(()=>{if(o(c)!=="als")return;const g=parseFloat(o(d));(r()[2]<o(v)||r()[2]>g-o(v))&&r(r()[2]=o(v),!0)}),le(()=>{n(o(c)+" ("+(o(c)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),le(()=>{o(c)&&r(r()[0]=l[o(c)],!0)}),Yr(t,Wr({id:"scale",title:s,get settings(){return n()}},()=>a,{children:(g,p)=>{var m=_f(),b=U(m);ne(b,{label:"Type",children:(w,E)=>{Lt(w,{get options(){return i},get value(){return o(c)},set value(L){N(c,L,!0)}})},$$slots:{default:!0}});var k=M(b,2);{var z=w=>{var E=wf(),L=U(E);ne(L,{label:"Lambda",children:(X,oe)=>{Nn(X,{min:1,max:7,step:.1,get value(){return r()[1]},set value(ce){r(r()[1]=ce,!0)}})},$$slots:{default:!0}});var F=M(L,2);ne(F,{label:"Penalty range",children:(X,oe)=>{Lt(X,{options:["1","0.1","0.01"],get value(){return o(d)},set value(ce){N(d,ce,!0)}})},$$slots:{default:!0}});var O=M(F,2);ne(O,{label:"Penalty",children:(X,oe)=>{const ce=P(()=>o(f)-o(v));Nn(X,{get min(){return o(v)},get max(){return o(ce)},get step(){return o(v)},get decNum(){return o(h)},get value(){return r()[2]},set value(K){r(r()[2]=K,!0)}})},$$slots:{default:!0}}),C(w,E)};I(k,w=>{o(c)==="als"&&w(z)})}var y=M(k,2);{var _=w=>{ne(w,{label:"Polynomial",children:(E,L)=>{on(E,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(F){r(r()[1]=F,!0)}})},$$slots:{default:!0}})};I(y,w=>{o(c)==="emsc"&&w(_)})}C(g,m)},$$slots:{default:!0}})),he()}var xf=D("<!> <!>",1);function kf(t,e){ve(e,!0);let r=T(e,"params",15),n=T(e,"varind",15),a=T(e,"settings",15),s=Ur(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const l="Trim tails";let i=W(!1);const u=P(()=>e.nvars?Math.round(e.nvars*.1):1);le(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-o(u))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+o(u))&&r(r()[1]=e.right,!0),n(n()[1]=r()[0],!0),n(n()[2]=r()[1],!0),N(i,!0)):(n(n()[1]=-1,!0),n(n()[2]=-1,!0),N(i,!1))}),le(()=>{a("left: "+r()[0]+" right: "+r()[1])}),Yr(t,Wr({id:"norm",title:l,get settings(){return a()},get isOpen(){return e.isOpen}},()=>s,{children:(c,d)=>{var f=Ne(),v=U(f);{var h=g=>{var p=xf(),m=U(p);ne(m,{label:"Left",children:(k,z)=>{const y=P(()=>e.right-o(u));Nn(k,{get min(){return e.left},get max(){return o(y)},step:1,decNum:0,get value(){return r()[0]},set value(_){r(r()[0]=_,!0)}})},$$slots:{default:!0}});var b=M(m,2);ne(b,{label:"Right",children:(k,z)=>{const y=P(()=>e.left+o(u));Nn(k,{get min(){return o(y)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(_){r(r()[1]=_,!0)}})},$$slots:{default:!0}}),C(g,p)};I(v,g=>{o(i)&&g(h)})}C(c,f)},$$slots:{default:!0}})),he()}var Ef=D("<!> <!>",1);function Sf(t,e){ve(e,!0);let r=T(e,"params",31,()=>Te([3,5]));T(e,"varind",27,()=>-1);let n=T(e,"settings",15);T(e,"nvars",3,0);let a=Ur(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const s="Spike removal";le(()=>{n(r()[0]+"/"+r()[1])}),Yr(t,Wr({id:"scale",title:s,get settings(){return n()}},()=>a,{children:(l,i)=>{var u=Ef(),c=U(u);ne(c,{label:"Window",children:(f,v)=>{on(f,{min:3,max:15,get value(){return r()[0]},set value(h){r(r()[0]=h,!0)}})},$$slots:{default:!0}});var d=M(c,2);ne(d,{label:"Threshold",children:(f,v)=>{on(f,{min:4,max:10,get value(){return r()[1]},set value(h){r(r()[1]=h,!0)}})},$$slots:{default:!0}}),C(l,u)},$$slots:{default:!0}})),he()}var Af=D("<h2>Selected methods</h2> <!>",1),Cf=D("<p>No methods selected</p>"),zf=D("<p> </p>"),Pf=D("<h2>Available methods</h2>"),Tf=D("<p>Maximum number of methods is selected.</p>"),Nf=D("<p> </p> <!>",1),Lf=D('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-15cx0gr"><!> <!></div>',1);function Rf(t,e){ve(e,!0);let r=T(e,"prepobj",31,()=>Te([])),n=T(e,"meta",15),a=T(e,"varind",31,()=>-1),s=T(e,"rawdataShort",15),l=T(e,"prepdataShort",15),i=T(e,"prepmodel",3,null),u=T(e,"reset",3,null),c=T(e,"finalize",3,null);const d=30,f=8,v={savgol:mf,norm:hf,scale:bf,baseline:yf,trim:kf,spikes:Sf};let h=W("neutral"),g=W(""),p=W(void 0),m=W(""),b=W(Te([])),k=W(Te([])),z=W(Te([]));n(new Array(f).fill(""));const y=P(()=>e.rawdata.values.ncols-e.rawdata.nresp);let _=Te(e.rawdata.values.nrows<3?Object.keys(v).filter(B=>B!=="scale"):Object.keys(v));E(),r().length!==0&&w();async function w(){r().length!==0&&N(p,e.WASM().then(B=>{N(h,"applying");const H=ts(B,s().values,0,r(),!0,[]),V=_o(B,s().values,0,H,!0);l(Eo(s(),V)),N(h,"success")}).catch(B=>{l(Eo(s())),console.error(B),N(h,"error"),N(g,B,!0)}),!0)}function E(){if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(e.rawdata.values.ncols),N(k,[],!0),N(z,[],!0);return}let B=[],H=[],V=0,$=e.rawdata.values.ncols-e.rawdata.nresp;for(let ee of r())ee.id==="trim"?(B.push(V),H.push($),ee.params[0]<V&&(ee.params[0]=V),ee.params[1]>$&&(ee.params[1]=$),V=ee.params[0]>V?ee.params[0]:V,$=ee.params[1]>0&&ee.params[1]<$?ee.params[1]:$):(B.push(V),H.push($));N(k,B,!0),N(z,H,!0),e.setLeft(V),e.setRight($)}function L(B){const H=rr.find(V=>V.id===B);H&&(o(k).push(e.left),o(z).push(e.right),r().push({id:H.id,params:H.mp}),N(m,r().length-1))}function F(B){if(B<=0)return;const H=r()[B],V=r()[B-1];r(r()[B-1]=H,!0),r(r()[B]=V,!0),K()}function O(B){if(B<0||B===r().length-1)return;const H=r()[B],V=r()[B+1];r(r()[B+1]=H,!0),r(r()[B]=V,!0),K()}function X(B){B<0||B>=r().length||(r(r().filter((H,V)=>V!==B)),K())}function oe(B){N(m,B,!0)}function ce(){N(m,null)}function K(){N(h,"neutral"),N(g,""),N(m,null),E(),w(),a(a()[1]=-1,!0),a(a()[2]=-1,!0)}le(()=>{e.rawdata&&!s()&&s(ko(e.rawdata,d))}),le(()=>{s()&&!l()&&l(Eo(s()))}),le(()=>{(!r()||r().length===0)&&(N(b,[],!0),l(null),N(k,[],!0),N(z,[],!0),N(m,""),n(new Array(f).fill("")))});var q=Lf(),Q=U(q);let re;var ae=j(Q);ne(ae,{label:"",children:(B,H)=>{var V=Af(),$=M(U(V),2);{var ee=ue=>{Zi(ue,{text:"edit",get onclick(){return u()}})};I($,ue=>{i()&&u()&&ue(ee)})}C(B,V)},$$slots:{default:!0}});var J=M(ae,2);{var pe=B=>{ne(B,{label:"",children:(H,V)=>{var $=Cf();C(H,$)},$$slots:{default:!0}})},Ue=B=>{var H=Ne(),V=U(H);it(V,17,r,ft,($,ee,ue)=>{var Be=Ne();const je=P(()=>v[o(ee).id]);var ze=U(Be);{var We=He=>{var Ft=Ne(),jt=U(Ft);const Kt=P(()=>ue===o(m));so(jt,()=>o(je),(Cr,zr)=>{zr(Cr,{get isOpen(){return o(Kt)},get left(){return o(k)[ue]},get right(){return o(z)[ue]},pos:ue,get nvars(){return o(y)},moveUp:F,moveDown:O,apply:K,open:oe,close:ce,remove:X,get params(){return o(ee).params},set params(St){o(ee).params=St},get varind(){return a()},set varind(St){a(St)},get settings(){return n()[ue]},set settings(St){n(n()[ue]=St,!0)}})}),C(He,Ft)},_t=He=>{var Ft=Ne(),jt=U(Ft);const Kt=P(()=>ue===o(m));so(jt,()=>o(je),(Cr,zr)=>{zr(Cr,{pos:ue,get isOpen(){return o(Kt)},get left(){return o(k)[ue]},get right(){return o(z)[ue]},get nvars(){return o(y)},moveUp:F,moveDown:O,apply:K,open:oe,close:ce,remove:X,get params(){return o(ee).params},set params(St){o(ee).params=St},get settings(){return n()[ue]},set settings(St){n(n()[ue]=St,!0)}})}),C(He,Ft)};I(ze,He=>{o(ee).id==="norm"||o(ee).id==="trim"?He(We):He(_t,!1)})}C($,Be)}),C(B,H)};I(J,B=>{r().length===0?B(pe):B(Ue,!1)})}var me=M(J,2);{var de=B=>{ne(B,{status:"error",children:(H,V)=>{var $=zf(),ee=j($);G(()=>Le(ee,o(g))),C(H,$)},$$slots:{default:!0}})};I(me,B=>{(o(h)==="error"||o(g))&&B(de)})}var Re=M(Q,2),Z=j(Re);{var se=B=>{ne(B,{label:" ",children:(H,V)=>{kr(H,{get onclick(){return c()},text:"Finalize"})},$$slots:{default:!0}})};I(Z,B=>{!i()&&!o(m)&&r().length>0&&B(se)})}var De=M(Re,2),Oe=j(De);ne(Oe,{label:"",children:(B,H)=>{var V=Pf();C(B,V)},$$slots:{default:!0}});var we=M(Oe,2);{var _e=B=>{ne(B,{label:"",children:(H,V)=>{var $=Tf();C(H,$)},$$slots:{default:!0}})},be=B=>{var H=Ne(),V=U(H);it(V,17,()=>_,ft,($,ee)=>{const ue=P(()=>rr.find(Be=>Be.id===o(ee)));ne($,{children:(Be,je)=>{var ze=Nf(),We=U(ze),_t=j(We),He=M(We,2);Ji(He,{onclick:()=>L(o(ue).id)}),G(()=>Le(_t,o(ue).title)),C(Be,ze)},$$slots:{default:!0}})}),C(B,H)};I(we,B=>{r().length>=f?B(_e):B(be,!1)})}G(B=>re=ct(Q,1,"selected-methods-list svelte-15cx0gr",null,re,B),[()=>({final:i()!==null&&i()!==void 0})]),C(t,q),he()}var Mf=D("<p> </p>"),Ff=D("<!> <!>",1),jf=D('<div class="downloads-block svelte-1jqwqd2"><!></div>'),Bf=D('<div class="prep-creator svelte-1jqwqd2"><!></div> <!> <!>',1),qf=D(`<div class="help-text svelte-1jqwqd2"><p class="svelte-1jqwqd2">In this tab you can create a chain of preprocessing methods (<em>preprocessing model</em>), tune their order and parameters, and check how your data look like before and after preprocessing. When you done you can dowload the model and the preprocessed data to be used in other apps. All you need is just to load your data from a single CSV file or from one or several SPC files.</p> <p class="svelte-1jqwqd2"><strong>CSV file</strong><br/> CSV file should contain data as numeric values delimited by comma (with dot as decimal separator) or
               by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1jqwqd2">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. In this case, select <em>values</em> option for the header and you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1jqwqd2">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file.</p> <p class="svelte-1jqwqd2">If your CSV file contains a column, which is not a part of the main datawith, e.g. with <strong>group labels</strong> (classes, subsets, etc.) or <strong>response values</strong>, you need to set corresponding option in the dialog box. It is assumed that this column is next to the column with row labels or is the first column of row labels are absent.</p> <p class="svelte-1jqwqd2"><strong>SPC files</strong><br/> You can also load spectral data directly from Galactic Industries SPC data files. The app supports both single spectrum in a file and files with multiple spectra, however only 2-way datasets can be loaded. You can select several SPC files to load (hold Ctrl or Shift when selecting), in this case they will be combined together into the same dataset.</p> <p class="svelte-1jqwqd2">After the data is loaded you will be able to create and tune the sequence of preprocessing methods. The result will be shown on a plot for 30 randomly selected rows. To apply the methods to whole data and then dowload the preprocessed values and the model, just click <em>Finalize</em> button.</p></div>`),If=D('<div class="app-container svelte-1jqwqd2"><div class="app-controls svelte-1jqwqd2"><div class="data-loader svelte-1jqwqd2"><!></div> <!></div> <div class="app-content svelte-1jqwqd2"><!></div></div>');function Df(t,e){ve(e,!0);const r=P(()=>e.session.create);let n=W(Te([-1,0,0])),a=W("neutral"),s=W(""),l=W(void 0);async function i(w,E,L){!E||!w||E.length===0||N(l,e.WASM().then(F=>{N(a,"applying");const O=ts(F,w.values,w.nresp,E,!1,L),X=_o(F,w.values,w.nresp,O,!1,!1),oe=ms(Ko(w),X);O.info=o(r).prepmeta,o(r).prepmodel=O,o(r).prepdata=es(oe,o(r).prepmodel)}).catch(F=>{o(r).prepmodel=null,o(r).prepdata=null,console.error(F),N(a,"error"),N(s,F,!0)}),!0)}function u(w){const E=o(r).rawdata.values.ncols-o(r).rawdata.nresp;o(r).rawdata&&w>=0&&w<E&&w<o(r).right&&(o(r).left=w)}function c(w){const E=o(r).rawdata.values.ncols-o(r).rawdata.nresp;o(r).rawdata&&w<=E&&w>o(r).left&&(o(r).right=w)}function d(){i(o(r).rawdata,o(r).prepobj,[])}function f(){o(r).prepmodel=null,o(r).prepdata=null}le(()=>{o(r).rawdata===null&&(o(r).left=0,o(r).right=0,o(r).prepdata=null,o(r).rawdataShort=null,o(r).prepdataShort=null,o(r).prepmodel=null,o(r).prepobj=[],N(n,[-1,-1,-1],!0))}),le(()=>{(!o(r).prepobj||o(r).prepobj.length===0)&&(o(r).prepdata=null,o(r).prepdataShort=null,N(n,[-1,-1,-1],!0))}),le(()=>{const w=Yt(()=>JSON.stringify(e.session,zn));e.backupSession(w,o(r).rawdata,o(r).prepdata,o(r).prepdataShort)});var v=If(),h=j(v),g=j(h),p=j(g);bs(p,{setLeft:u,setRight:c,get rawdata(){return o(r).rawdata},set rawdata(w){o(r).rawdata=w}});var m=M(g,2);{var b=w=>{var E=Bf(),L=U(E),F=j(L);Rf(F,{get WASM(){return e.WASM},get rawdata(){return o(r).rawdata},get left(){return o(r).left},get right(){return o(r).right},setLeft:u,",":!0,setRight:c,reset:f,finalize:d,get prepmodel(){return o(r).prepmodel},set prepmodel(K){o(r).prepmodel=K},get prepdata(){return o(r).prepdata},set prepdata(K){o(r).prepdata=K},get prepdataShort(){return o(r).prepdataShort},set prepdataShort(K){o(r).prepdataShort=K},get rawdataShort(){return o(r).rawdataShort},set rawdataShort(K){o(r).rawdataShort=K},get varind(){return o(n)},set varind(K){N(n,K,!0)},get prepobj(){return o(r).prepobj},set prepobj(K){o(r).prepobj=K},get meta(){return o(r).prepmeta},set meta(K){o(r).prepmeta=K}});var O=M(L,2);{var X=K=>{ne(K,{status:"error",children:(q,Q)=>{var re=Mf(),ae=j(re);G(()=>Le(ae,o(s))),C(q,re)},$$slots:{default:!0}})};I(O,K=>{(o(a)==="error"||o(s))&&K(X)})}var oe=M(O,2);{var ce=K=>{var q=jf(),Q=j(q);ne(Q,{label:"Download",children:(re,ae)=>{var J=Ff(),pe=U(J);kr(pe,{text:"Data",onclick:()=>ps(o(r).prepdata,o(r).left,o(r).right)});var Ue=M(pe,2);kr(Ue,{text:"Model",onclick:()=>bc(o(r).prepmodel)}),C(re,J)},$$slots:{default:!0}}),C(K,q)};I(oe,K=>{o(r).prepmodel&&o(r).prepdata&&K(ce)})}C(w,E)};I(m,w=>{o(r).rawdata&&w(b)})}var k=M(h,2),z=j(k);{var y=w=>{var E=qf();C(w,E)},_=(w,E)=>{{var L=F=>{var O=Ne(),X=U(O);Sn(X,()=>o(r).rawdata,oe=>{Vs(oe,{get rawdata(){return o(r).rawdataShort},get prepdata(){return o(r).prepdataShort},get left(){return o(r).left},get right(){return o(r).right},get varind(){return o(n)}})}),C(F,O)};I(w,F=>{o(r).rawdataShort&&o(r).prepdataShort&&F(L)},E)}};I(z,w=>{o(r).rawdata?w(_,!1):w(y)})}C(t,v),he()}var Of=D(' <span class="svelte-1l1cvmx"><!></span>',1),Vf=D('<span class="info-details svelte-1l1cvmx"><!></span>');function Uf(t,e){ve(e,!0);var r=Vf(),n=j(r);{var a=l=>{var i=Of(),u=U(i),c=M(u),d=j(c);dt(d,()=>ji(e.prepmodel)),G(()=>Le(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),C(l,i)},s=l=>{var i=ri("skipped");C(l,i)};I(n,l=>{e.prepmodel.ml?l(a):l(s,!1)})}C(t,r),he()}var Wf=D('<span>file:</span> <span class="file-name svelte-1dxrrpt"> </span><br/>',1),Hf=D('<p class="info-text svelte-1dxrrpt"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Yf(t,e){ve(e,!0);var r=Ne(),n=U(r);{var a=s=>{ne(s,{name:"info",children:(l,i)=>{var u=Hf(),c=U(u),d=M(j(c),3);{var f=m=>{var b=Wf(),k=M(U(b),2),z=j(k);G(()=>{S(k,"title",e.model.fileName),Le(z,e.model.fileName)}),C(m,b)};I(d,m=>{e.model.fileName&&m(f)})}var v=M(d),h=M(v,3);Uf(h,{get prepmodel(){return e.model}});var g=M(c,2);{var p=m=>{Tn(m,{get onclick(){return e.reset}})};I(g,m=>{e.reset&&m(p)})}G(()=>Le(v,` ${e.model.npred??""} `)),C(l,u)},$$slots:{default:!0}})};I(n,s=>{e.model&&s(a)})}C(t,r),he()}var Gf=D("<!> <!>",1),Kf=D("<p><!></p>"),Xf=D("<!> <!>",1);function Jf(t,e){ve(e,!0);let r=T(e,"model",15),n=W(""),a=W("neutral"),s=W("");function l(m){try{const b=JSON.parse(m,ns);if(Array.isArray(b.v)&&(b.v=Float64Array.from(b.v)),!Object.keys(b).includes("class")||b.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");b.fileName=o(c),r(b),N(a,"success"),N(s,"")}catch(b){console.log(b),r(null),N(a,"error"),N(s,b,!0)}}function i(m){const b=new FileReader;b.onload=()=>{l(b.result)},b.readAsText(o(n))}function u(){N(n,""),r(null),N(a,"neutral"),N(s,"")}le(()=>{o(n)===null?(r(null),N(a,"neutral"),N(s,"")):(N(a,"neutral"),N(s,""))});let c=P(()=>o(n)?o(n).name.replace(/\.[^/.]+$/,""):"");var d=Xf(),f=U(d);{var v=m=>{var b=Gf(),k=U(b);Sn(k,()=>o(n),_=>{ne(_,{name:"file-selector",children:(w,E)=>{hs(w,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return o(n)},set file(L){N(n,L,!0)}})},$$slots:{default:!0}})});var z=M(k,2);{var y=_=>{ne(_,{name:"load-button",label:" ",children:(w,E)=>{kr(w,{onclick:i,text:"Load"})},$$slots:{default:!0}})};I(z,_=>{o(n)&&_(y)})}C(m,b)},h=m=>{Yf(m,{get model(){return r()},reset:u})};I(f,m=>{r()?m(h,!1):m(v)})}var g=M(f,2);{var p=m=>{ne(m,{name:"error",status:"error",children:(b,k)=>{var z=Kf(),y=j(z);dt(y,()=>o(s)),C(b,z)},$$slots:{default:!0}})};I(g,m=>{(o(a)==="error"||o(s))&&m(p)})}C(t,d),he()}var Zf=D('<div class="data-loader svelte-sqi2x7"><!></div>'),Qf=D('<p class="svelte-sqi2x7"><strong>Step 1.</strong></p> <p class="svelte-sqi2x7">Load JSON file with a model you saved from <em>Create</em> tab.</p>',1),$f=D('<p class="svelte-sqi2x7"><strong>Step 2.</strong></p> <p class="svelte-sqi2x7">Load your data from single CSV file or single/multiple SPC files. See details about data file in the <em>Create</em> tab.</p>',1),ed=D('<div class="help-text svelte-sqi2x7"><p class="svelte-sqi2x7">In this tab you can apply preprocessing model, developed in <em>Create</em> tab to a new dataset.</p> <!></div>'),td=D('<div class="app-container svelte-sqi2x7"><div class="app-controls svelte-sqi2x7"><div class="model-loader svelte-sqi2x7"><!></div> <!></div> <div class="app-content svelte-sqi2x7"><!></div></div>');function rd(t,e){ve(e,!0);const r=P(()=>e.session.apply);le(()=>{o(r).model===null&&(o(r).rawdata=null,o(r).rawdataShort=null,o(r).prepdata=null)}),le(()=>{o(r).model&&(h=>{var g=dn(h,2);o(r).left=g[0],o(r).right=g[1]})(Fi(o(r).model))}),le(()=>{o(r).rawdata===null&&(o(r).prepdata=null,o(r).prepdataShort=null)}),le(()=>{o(r).rawdataShort=o(r).rawdata?ko(o(r).rawdata,30):null}),le(()=>{o(r).prepdataShort=o(r).prepdata?ko(o(r).prepdata,30):null}),le(()=>{const h=Yt(()=>JSON.stringify(e.session,zn));e.backupSession(h,o(r).rawdata,o(r).prepdata,o(r).model)});var n=td(),a=j(n),s=j(a),l=j(s);Jf(l,{get model(){return o(r).model},set model(h){o(r).model=h},get left(){return o(r).left},set left(h){o(r).left=h},get right(){return o(r).right},set right(h){o(r).right=h}});var i=M(s,2);{var u=h=>{var g=Zf(),p=j(g);bs(p,{get WASM(){return e.WASM},get model(){return o(r).model},get left(){return o(r).left},get right(){return o(r).right},get rawdata(){return o(r).rawdata},set rawdata(m){o(r).rawdata=m},get prepdata(){return o(r).prepdata},set prepdata(m){o(r).prepdata=m}}),C(h,g)};I(i,h=>{o(r).model&&h(u)})}var c=M(a,2),d=j(c);{var f=h=>{var g=ed(),p=M(j(g),2);{var m=k=>{var z=Qf();C(k,z)},b=k=>{var z=$f();C(k,z)};I(p,k=>{o(r).model?k(b,!1):k(m)})}C(h,g)},v=(h,g)=>{{var p=m=>{var b=Ne(),k=U(b);Sn(k,()=>o(r).rawdataShort,z=>{Vs(z,{get rawdata(){return o(r).rawdataShort},get prepdata(){return o(r).prepdataShort},get left(){return o(r).left},get right(){return o(r).right}})}),C(m,b)};I(h,m=>{o(r).rawdataShort&&o(r).prepdataShort&&m(p)},g)}};I(d,h=>{o(r).rawdata?h(v,!1):h(f)})}C(t,n),he()}var nd=D('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function od(t,e){ve(e,!0);function r(c){c.key==="Escape"&&e.closeModal()}var n=nd();pr("keydown",Gn,r);var a=j(n),s=j(a),l=j(s);l.__click=function(...c){var d;(d=e.closeModal)==null||d.apply(this,c)};var i=M(s,2),u=j(i);Vr(u,()=>e.children),Ta(7,n,()=>Us),C(t,n),he()}tt(["click"]);function Ws(t,e){N(e,!0)}function ad(t,e,r){const n=yo(new Date),a=e.appID+"-session-"+n+".json";o(r).date=n;const s=JSON.stringify(o(r),zn),l=new Blob([s],{type:"text/json"}),i=window.URL.createObjectURL(l),u=document.createElement("a");u.setAttribute("href",i),u.setAttribute("download",a),u.click()}function sd(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var ld=D('<sup style="color:red">β</sup>'),id=D('<li><button class="svelte-1cyr8za"> </button></li>'),cd=D("<div><!></div>"),ud=D('<div class="info-container svelte-1cyr8za"><!></div>'),fd=D('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"/> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function dd(t,e){ve(e,!0);let r=T(e,"tabs",19,()=>[]),n=T(e,"isBeta",3,!1);const a="mdatools-"+e.appID;let s=W(!1),l=W(void 0),i=W("Current session "),u=W(!1);function c(y){N(i,y,!0),N(u,!0),setTimeout(()=>{N(i,"Current session "),N(u,!1)},1e3)}function d(){N(s,!1)}function f(y){o(l).tab=y}function v(){const y=indexedDB.open(a,1);y.onsuccess=_=>{const E=_.target.result.transaction(e.appID,"readwrite");E.objectStore(e.appID).delete("session"),E.oncomplete=()=>{N(l,e.initSession(),!0),c("Session was reinitialzed.")},E.onerror=()=>console.error("Failed to session from DB.")}}function h(y,_){window.localStorage.removeItem(e.appID+"-blocked");const w=indexedDB.open(a,1);w.onsuccess=E=>{const O=E.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);O.put(y,"session"),O.put(yo(new Date),"session-update")}}function g(){new Promise((y,_)=>{const w=indexedDB.open(a,1);w.onsuccess=E=>{const X=E.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");X.onsuccess=()=>y(X.result),X.onerror=()=>_(X.error)}}).then(y=>{p(y),N(i,"Last session is restored "),N(u,!0),setTimeout(()=>{N(i,"Current session "),N(u,!1)},1500)}).catch(y=>{console.error(y),N(l,e.initSession(),!0)})}function p(y){if(!y||y==="undefined"){N(l,e.initSession(),!0);return}const _=JSON.parse(y,ns);N(l,e.checkSession(_)?_:e.initSession(e.appID),!0)}function m(y){e.resetSession(o(l));const _=new FileReader;_.onload=()=>{p(_.result),y.target.value=""},_.readAsText(y.target.files[0])}zi(()=>{const y=e.appID,_=indexedDB.open(a,1);_.onupgradeneeded=w=>{const E=w.target.result;E.objectStoreNames.contains(y)||E.createObjectStore(y)},_.onsuccess=w=>{g()}});var b=Ne(),k=U(b);{var z=y=>{var _=fd(),w=j(_),E=j(w),L=j(E),F=M(L,2),O=j(F),X=M(O);{var oe=be=>{var B=ld();C(be,B)};I(X,be=>{n()&&be(oe)})}var ce=M(F,2),K=j(ce),q=M(E,2);it(q,21,r,ft,(be,B,H)=>{var V=id();let $;var ee=j(V);ee.__click=()=>f(H),ee.__keydown=()=>f(H);var ue=j(ee);G(Be=>{$=ct(V,1,"nav-item svelte-1cyr8za",null,$,Be),Le(ue,o(B).name)},[()=>({selected:o(l).tab===H})]),C(be,V)});var Q=M(w,2);it(Q,21,r,ft,(be,B,H)=>{var V=cd();let $;var ee=j(V);so(ee,()=>o(B).component,(ue,Be)=>{Be(ue,{get WASM(){return e.WASM},get session(){return o(l)},backupSession:h})}),G(ue=>$=ct(V,1,"tab-content svelte-1cyr8za",null,$,ue),[()=>({hidden:o(l).tab!==H})]),C(be,V)});var re=M(Q,2),ae=j(re);let J;var pe=j(ae),Ue=j(pe),me=M(pe,2),de=j(me);de.__change=m;var Re=M(me,2);Re.__click=[ad,e,l];var Z=M(Re,2);Z.__click=[sd,v];var se=M(ae,2),De=j(se);De.__click=[Ws,s],De.__keydown=[Ws,s];var Oe=M(De,2);Vr(Oe,()=>e.footer);var we=M(re,2);{var _e=be=>{od(be,{closeModal:d,children:(B,H)=>{var V=ud(),$=j(V);Vr($,()=>e.info),C(B,V)},$$slots:{default:!0}})};I(we,be=>{o(s)&&be(_e)})}G(be=>{S(L,"alt",e.appShortTitle),Le(O,e.appTitle),Le(K,e.appSlogan),J=ct(ae,1,"session svelte-1cyr8za",null,J,be),Le(Ue,o(i))},[()=>({"no-buttons":o(u)})]),C(y,_)};I(k,y=>{o(l)&&y(z)})}C(t,b),he()}tt(["click","keydown","change"]);const Sd="modulepreload",Ad=function(t){return"/"+t},Cd={},vd=function(e,r,n){let a=Promise.resolve();function s(l){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l}return a.then(l=>{for(const i of l||[])i.status==="rejected"&&s(i.reason);return e().catch(s)})};var hd=async function(t={}){var Ys;var e,r=t,n=typeof window=="object",a=typeof WorkerGlobalScope<"u",s=typeof process=="object"&&((Ys=process.versions)==null?void 0:Ys.node)&&process.type!="renderer";if(s){const{createRequire:A}=await vd(()=>Promise.resolve().then(()=>bd),void 0);var l=A(Ee&&Ee.tagName.toUpperCase()==="SCRIPT"&&Ee.src||new URL("prep.js",document.baseURI).href)}var i=(A,R)=>{throw R},u=Ee&&Ee.tagName.toUpperCase()==="SCRIPT"&&Ee.src||new URL("prep.js",document.baseURI).href,c="";function d(A){return r.locateFile?r.locateFile(A,c):c+A}var f,v;if(s){var h=l("fs");u.startsWith("file:")&&(c=l("path").dirname(l("url").fileURLToPath(u))+"/"),v=A=>{A=z(A)?new URL(A):A;var R=h.readFileSync(A);return R},f=async(A,R=!0)=>{A=z(A)?new URL(A):A;var Y=h.readFileSync(A,R?void 0:"utf8");return Y},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),i=(A,R)=>{throw process.exitCode=A,R}}else if(n||a){try{c=new URL(".",u).href}catch{}a&&(v=A=>{var R=new XMLHttpRequest;return R.open("GET",A,!1),R.responseType="arraybuffer",R.send(null),new Uint8Array(R.response)}),f=async A=>{if(z(A))return new Promise((Y,Pe)=>{var xe=new XMLHttpRequest;xe.open("GET",A,!0),xe.responseType="arraybuffer",xe.onload=()=>{if(xe.status==200||xe.status==0&&xe.response){Y(xe.response);return}Pe(xe.status)},xe.onerror=Pe,xe.send(null)});var R=await fetch(A,{credentials:"same-origin"});if(R.ok)return R.arrayBuffer();throw new Error(R.status+" : "+R.url)}}var g=console.log.bind(console),p=console.error.bind(console),m,b=!1,k,z=A=>A.startsWith("file://"),y,_,w,E,L,F,O=!1;function X(){var A=w.buffer;E=new Int8Array(A),L=new Uint8Array(A),r.HEAP32=new Int32Array(A),F=new Uint32Array(A),r.HEAPF64=new Float64Array(A),new BigInt64Array(A),new BigUint64Array(A)}function oe(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)H(r.preRun.shift());we(B)}function ce(){O=!0,sn.j()}function K(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)be(r.postRun.shift());we(_e)}var q=0,Q=null;function re(A){var R;q++,(R=r.monitorRunDependencies)==null||R.call(r,q)}function ae(A){var Y;if(q--,(Y=r.monitorRunDependencies)==null||Y.call(r,q),q==0&&Q){var R=Q;Q=null,R()}}function J(A){var Y;(Y=r.onAbort)==null||Y.call(r,A),A="Aborted("+A+")",p(A),b=!0,A+=". Build with -sASSERTIONS for more info.";var R=new WebAssembly.RuntimeError(A);throw _==null||_(R),R}var pe;function Ue(){return r.locateFile?d("prep_wasm.wasm"):new URL("/prep/prep.wasm",Ee&&Ee.tagName.toUpperCase()==="SCRIPT"&&Ee.src||new URL("prep.js",document.baseURI).href).href}function me(A){if(A==pe&&m)return new Uint8Array(m);if(v)return v(A);throw"both async and sync fetching of the wasm failed"}async function de(A){if(!m)try{var R=await f(A);return new Uint8Array(R)}catch{}return me(A)}async function Re(A,R){try{var Y=await de(A),Pe=await WebAssembly.instantiate(Y,R);return Pe}catch(xe){p(`failed to asynchronously prepare wasm: ${xe}`),J(xe)}}async function Z(A,R,Y){if(!A&&typeof WebAssembly.instantiateStreaming=="function"&&!z(R)&&!s)try{var Pe=fetch(R,{credentials:"same-origin"}),xe=await WebAssembly.instantiateStreaming(Pe,Y);return xe}catch(Ye){p(`wasm streaming compile failed: ${Ye}`),p("falling back to ArrayBuffer instantiation")}return Re(R,Y)}function se(){return{a:wd}}async function De(){function A(Ye,Ge){return sn=Ye.exports,w=sn.i,X(),Ro(sn),ae(),sn}re();function R(Ye){return A(Ye.instance)}var Y=se();if(r.instantiateWasm)return new Promise((Ye,Ge)=>{r.instantiateWasm(Y,(Xe,Vt)=>{Ye(A(Xe))})});pe??(pe=Ue());var Pe=await Z(m,pe,Y),xe=R(Pe);return xe}class Oe{constructor(R){Nr(this,"name","ExitStatus");this.message=`Program terminated with exit(${R})`,this.status=R}}var we=A=>{for(;A.length>0;)A.shift()(r)},_e=[],be=A=>_e.push(A),B=[],H=A=>B.push(A),V=!0,$=A=>Bn(A),ee=()=>rt(),ue=()=>J(""),Be=0,je=()=>{V=!1,Be=0},ze={},We=A=>{if(A instanceof Oe||A=="unwind")return k;i(1,A)},_t=()=>V||Be>0,He=A=>{var R;k=A,_t()||((R=r.onExit)==null||R.call(r,A),b=!0),i(A,new Oe(A))},Ft=(A,R)=>{k=A,He(A)},jt=Ft,Kt=()=>{if(!_t())try{jt(k)}catch(A){We(A)}},Cr=A=>{if(!b)try{A(),Kt()}catch(R){We(R)}},zr=()=>performance.now(),St=(A,R)=>{if(ze[A]&&(clearTimeout(ze[A].id),delete ze[A]),!R)return 0;var Y=setTimeout(()=>{delete ze[A],Cr(()=>st(A,zr()))},R);return ze[A]={id:Y,timeout_ms:R},0},No=()=>2147483648,Lo=(A,R)=>Math.ceil(A/R)*R,ie=A=>{var R=w.buffer,Y=(A-R.byteLength+65535)/65536|0;try{return w.grow(Y),X(),1}catch{}},ke=A=>{var R=L.length;A>>>=0;var Y=No();if(A>Y)return!1;for(var Pe=1;Pe<=4;Pe*=2){var xe=R*(1+.2/Pe);xe=Math.min(xe,A+100663296);var Ye=Math.min(Y,Lo(Math.max(A,xe),65536)),Ge=ie(Ye);if(Ge)return!0}return!1},ye=A=>52;function Qe(A,R,Y,Pe){return 70}var ht=[null,[],[]],Bt=typeof TextDecoder<"u"?new TextDecoder:void 0,pt=(A,R=0,Y=NaN)=>{for(var Pe=R+Y,xe=R;A[xe]&&!(xe>=Pe);)++xe;if(xe-R>16&&A.buffer&&Bt)return Bt.decode(A.subarray(R,xe));for(var Ye="";R<xe;){var Ge=A[R++];if(!(Ge&128)){Ye+=String.fromCharCode(Ge);continue}var Xe=A[R++]&63;if((Ge&224)==192){Ye+=String.fromCharCode((Ge&31)<<6|Xe);continue}var Vt=A[R++]&63;if((Ge&240)==224?Ge=(Ge&15)<<12|Xe<<6|Vt:Ge=(Ge&7)<<18|Xe<<12|Vt<<6|A[R++]&63,Ge<65536)Ye+=String.fromCharCode(Ge);else{var Pr=Ge-65536;Ye+=String.fromCharCode(55296|Pr>>10,56320|Pr&1023)}}return Ye},yt=(A,R)=>{var Y=ht[A];R===0||R===10?((A===1?g:p)(pt(Y)),Y.length=0):Y.push(R)},Ve=(A,R)=>A?pt(L,A,R):"",Ae=(A,R,Y,Pe)=>{for(var xe=0,Ye=0;Ye<Y;Ye++){var Ge=F[R>>2],Xe=F[R+4>>2];R+=8;for(var Vt=0;Vt<Xe;Vt++)yt(A,L[Ge+Vt]);xe+=Xe}return F[Pe>>2]=xe,0},ut=A=>{var R=r["_"+A];return R},ot=(A,R)=>{E.set(A,R)},$e=A=>{for(var R=0,Y=0;Y<A.length;++Y){var Pe=A.charCodeAt(Y);Pe<=127?R++:Pe<=2047?R+=2:Pe>=55296&&Pe<=57343?(R+=4,++Y):R+=3}return R},Ke=(A,R,Y,Pe)=>{if(!(Pe>0))return 0;for(var xe=Y,Ye=Y+Pe-1,Ge=0;Ge<A.length;++Ge){var Xe=A.codePointAt(Ge);if(Xe<=127){if(Y>=Ye)break;R[Y++]=Xe}else if(Xe<=2047){if(Y+1>=Ye)break;R[Y++]=192|Xe>>6,R[Y++]=128|Xe&63}else if(Xe<=65535){if(Y+2>=Ye)break;R[Y++]=224|Xe>>12,R[Y++]=128|Xe>>6&63,R[Y++]=128|Xe&63}else{if(Y+3>=Ye)break;R[Y++]=240|Xe>>18,R[Y++]=128|Xe>>12&63,R[Y++]=128|Xe>>6&63,R[Y++]=128|Xe&63,Ge++}}return R[Y]=0,Y-xe},qt=(A,R,Y)=>Ke(A,L,R,Y),ur=A=>Xt(A),Me=A=>{var R=$e(A)+1,Y=ur(R);return qt(A,Y,R),Y},te=(A,R,Y,Pe,xe)=>{var Ye={string:At=>{var ln=0;return At!=null&&At!==0&&(ln=Me(At)),ln},array:At=>{var ln=ur(At.length);return ot(At,ln),ln}};function Ge(At){return R==="string"?Ve(At):R==="boolean"?!!At:At}var Xe=ut(A),Vt=[],Pr=0;if(Pe)for(var Tr=0;Tr<Pe.length;Tr++){var Gs=Ye[Y[Tr]];Gs?(Pr===0&&(Pr=ee()),Vt[Tr]=Gs(Pe[Tr])):Vt[Tr]=Pe[Tr]}var Fo=Xe(...Vt);function yd(At){return Pr!==0&&$(Pr),Ge(At)}return Fo=yd(Fo),Fo};r.noExitRuntime&&(V=r.noExitRuntime),r.print&&(g=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(m=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=te;var st,Bn,Xt,rt;function Ro(A){r._malloc=A.k,r._free=A.l,r._prepfit_wasm=A.m,r._prepapply_wasm=A.n,st=A.o,Bn=A.p,Xt=A.q,rt=A.r}var wd={c:ue,b:je,d:St,e:ke,h:ye,f:Qe,g:Ae,a:He},sn=await De();function Mo(){if(q>0){Q=Mo;return}if(oe(),q>0){Q=Mo;return}function A(){var R;r.calledRun=!0,!b&&(ce(),y==null||y(r),(R=r.onRuntimeInitialized)==null||R.call(r),K())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),A()},1)):A()}function _d(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return _d(),Mo(),O?e=r:e=new Promise((A,R)=>{y=A,_=R}),e},gd=D('<p>Current release: <span>1.0.0</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=Preprocessing app">help@mda.tools</a></p>'),md=D(`<h2>Data preprocessing</h2> <p>Interactive web-application for data preprocessing. Most of the methods it contains are
      applicable for different kinds of spectra.</p> <h3>v. 1.0.0</h3> <p class="release-info">released 13/07/2025</p> <ul><li>Several improvements to UX/UI.</li> <li>Added support for SPC files.</li> <li>Added more preprocessing methods.</li></ul>`,1);function pd(t,e){ve(e,!1);function r(l){l.create.rawdata=null,l.apply.model=null,l.tab=0}function n(l){const i=Object.keys(l);if(!["date","tab","create","apply"].every(c=>i.includes(c)))return!1;const u=Object.keys(l.create);return!!["rawdata","prepdata","rawdataShort","prepdataShort","prepmodel","left","right","varind"].every(c=>u.includes(c))}function a(){return{date:yo(new Date),tab:0,create:{rawdata:0,prepdata:0,rawdataShort:0,prepdataShort:0,prepmodel:0,prepobj:[],prepmeta:0,left:0,right:0,varind:[-1,-1,-1]},apply:{rawdata:0,prepdata:0,prepmodel:0,left:0,right:0,varind:[-1,-1,-1]}}}const s=[{name:"Create",label:"create",component:Df},{name:"Apply",label:"apply",component:rd}];Ei(),dd(t,{appID:"prep",appTitle:"Preprocessing",appShortTitle:"Preprocessing",appSlogan:"Make your data great again",get WASM(){return hd},get tabs(){return s},initSession:a,checkSession:n,resetSession:r,footer:u=>{var c=gd();C(u,c)},info:u=>{var c=md();C(u,c)},$$slots:{footer:!0,info:!0}}),he()}ni(pd,{target:document.body});const bd=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=prep.js.map
