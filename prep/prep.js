(function(){"use strict";var Bo=document.createElement("style");Bo.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;inset:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-ievjpi{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-ievjpi{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-ievjpi{padding:0 .25em 0 .5em}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-ievjpi{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-ievjpi{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-ievjpi{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-ievjpi{grid-template-columns:1fr 400px}}span.svelte-2njv60{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-2njv60:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-2njv60{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-68bixt{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-68bixt>.control-element:last-child .button-down,.selected-methods-list.svelte-68bixt>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-68bixt:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-68bixt{margin-top:1em;font-size:.9em}.methods-list.svelte-68bixt>div{background:#ebf0f0}.final.svelte-68bixt .button-up,.final.svelte-68bixt .button-down,.final.svelte-68bixt .button-cancel{visibility:hidden}.app-container.svelte-qnpw5u{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-qnpw5u{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-qnpw5u{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-qnpw5u>div:where(.svelte-qnpw5u){border-radius:.25rem}.help-text.svelte-qnpw5u{margin-top:.25rem}.help-text.svelte-qnpw5u>p:where(.svelte-qnpw5u){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-qnpw5u>p:where(.svelte-qnpw5u):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-qnpw5u>p:where(.svelte-qnpw5u):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.downloads-block.svelte-qnpw5u{margin-top:.85em}.downloads-block.svelte-qnpw5u>div:hover,.downloads-block.svelte-qnpw5u>div{background:#fff0c8}.downloads-block.svelte-qnpw5u>div button{margin:0 .25em}.downloads-block.svelte-qnpw5u>div .button:hover{background:#fffff8;border-color:#606570;color:#606570}@media(min-width:1300px){.app-container.svelte-qnpw5u{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-qnpw5u{grid-template-columns:min(320px,30%) 1fr}}.info-details.svelte-1i6mxvs{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-1i6mxvs>span:where(.svelte-1i6mxvs){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-1i6mxvs>span:where(.svelte-1i6mxvs) ul{padding:0;margin:0;list-style:none}.info-details.svelte-1i6mxvs>span:where(.svelte-1i6mxvs) ul>li{padding:.25em 0}.info-details.svelte-1i6mxvs>span:where(.svelte-1i6mxvs) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-1i6mxvs:hover>span:where(.svelte-1i6mxvs){visibility:visible}.info{position:relative}.info-text.svelte-fhw710{line-height:1.5em}.info-text.svelte-fhw710>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-fhw710>.file-name:where(.svelte-fhw710){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}.app-container.svelte-1s5rpr8{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1s5rpr8{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1s5rpr8{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1s5rpr8>div:where(.svelte-1s5rpr8){border-radius:.25rem}.help-text.svelte-1s5rpr8{margin-top:.25rem}.help-text.svelte-1s5rpr8>p:where(.svelte-1s5rpr8){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1s5rpr8>p:where(.svelte-1s5rpr8):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1s5rpr8>p:where(.svelte-1s5rpr8):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1s5rpr8{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1s5rpr8{grid-template-columns:min(320px,30%) 1fr}}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Bo);var Zt=typeof document<"u"?document.currentScript:null;const Bn=!1;var In=Array.isArray,Wl=Array.prototype.indexOf,Ir=Array.prototype.includes,pn=Array.from,Yl=Object.defineProperty,ar=Object.getOwnPropertyDescriptor,Io=Object.getOwnPropertyDescriptors,Do=Object.prototype,Gl=Array.prototype,bn=Object.getPrototypeOf,Oo=Object.isExtensible;function Dr(t){return typeof t=="function"}const yt=()=>{};function Kl(t){return typeof t?.then=="function"}function Xl(t){return t()}function Dn(t){for(var e=0;e<t.length;e++)t[e]()}function qo(){var t,e,r=new Promise((n,o)=>{t=n,e=o});return{promise:r,resolve:t,reject:e}}function Jl(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const r=[];for(const n of t)if(r.push(n),r.length===e)break;return r}const lt=2,wn=4,$r=8,Vo=1<<24,Ht=16,Ft=32,wr=64,On=128,At=512,rt=1024,at=2048,zt=4096,xt=8192,Qt=16384,_n=32768,$t=65536,Uo=1<<17,Ho=1<<18,Or=1<<19,Wo=1<<20,er=1<<25,_r=32768,qn=1<<21,Vn=1<<22,ir=1<<23,cr=Symbol("$state"),Yo=Symbol("legacy props"),Zl=Symbol(""),qr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Go(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ql(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function $l(t,e,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function ea(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ta(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ra(t){throw new Error("https://svelte.dev/e/effect_orphan")}function na(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function oa(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function sa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function la(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function aa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ia(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ca=1,ua=2,Ko=4,fa=8,da=16,va=1,ha=2,ga=4,ma=8,pa=16,ba=1,wa=2,_a=4,Xo=1,ya=2,nt=Symbol(),xa="http://www.w3.org/1999/xhtml";function ka(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Jo(t){return t===this.v}function Ea(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Zo(t){return!Ea(t,this.v)}let Vr=!1,Sa=!1;function Aa(){Vr=!0}const Ca=[];function Qo(t,e=!1,r=!1){return yn(t,new Map,"",Ca,null,r)}function yn(t,e,r,n,o=null,l=!1){if(typeof t=="object"&&t!==null){var a=e.get(t);if(a!==void 0)return a;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(In(t)){var i=Array(t.length);e.set(t,i),o!==null&&e.set(o,i);for(var c=0;c<t.length;c+=1){var u=t[c];c in t&&(i[c]=yn(u,e,r,n,null,l))}return i}if(bn(t)===Do){i={},e.set(t,i),o!==null&&e.set(o,i);for(var f in t)i[f]=yn(t[f],e,r,n,null,l);return i}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!l)return yn(t.toJSON(),e,r,n,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Ge=null;function Ur(t){Ge=t}function Wt(t){return $o().get(t)}function Na(t,e){return $o().set(t,e),e}function me(t,e=!1,r){Ge={p:Ge,i:!1,c:null,e:null,s:t,x:null,l:Vr&&!e?{s:null,u:null,$:[]}:null}}function pe(t){var e=Ge,r=e.e;if(r!==null){e.e=null;for(var n of r)xs(n)}return e.i=!0,Ge=e.p,{}}function yr(){return!Vr||Ge!==null&&Ge.l===null}function $o(t){return Ge===null&&Go(),Ge.c??=new Map(ja(Ge)||void 0)}function ja(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let xr=[];function es(){var t=xr;xr=[],Dn(t)}function Bt(t){if(xr.length===0&&!Wr){var e=xr;queueMicrotask(()=>{e===xr&&es()})}xr.push(t)}function Pa(){for(;xr.length>0;)es()}function ts(t){var e=Ne;if(e===null)return Se.f|=ir,t;if((e.f&_n)===0){if((e.f&On)===0)throw t;e.b.error(t)}else Hr(t,e)}function Hr(t,e){for(;e!==null;){if((e.f&On)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t}const Ta=-7169;function Ze(t,e){t.f=t.f&Ta|e}function Un(t){(t.f&At)!==0||t.deps===null?Ze(t,rt):Ze(t,zt)}function rs(t){if(t!==null)for(const e of t)(e.f&lt)===0||(e.f&_r)===0||(e.f^=_r,rs(e.deps))}function ns(t,e,r){(t.f&at)!==0?e.add(t):(t.f&zt)!==0&&r.add(t),rs(t.deps),Ze(t,rt)}const xn=new Set;let Re=null,Hn=null,It=null,pt=[],kn=null,Wn=!1,Wr=!1;class tr{committed=!1;current=new Map;previous=new Map;#e=new Set;#n=new Set;#t=0;#o=0;#a=null;#s=new Set;#r=new Set;#l=new Map;is_fork=!1;#i=!1;is_deferred(){return this.is_fork||this.#o>0}skip_effect(e){this.#l.has(e)||this.#l.set(e,{d:[],m:[]})}unskip_effect(e){var r=this.#l.get(e);if(r){this.#l.delete(e);for(var n of r.d)Ze(n,at),Dt(n);for(n of r.m)Ze(n,zt),Dt(n)}}process(e){pt=[],this.apply();var r=[],n=[];for(const o of e)this.#c(o,r,n);if(this.is_deferred()){this.#u(n),this.#u(r);for(const[o,l]of this.#l)cs(o,l)}else{for(const o of this.#e)o();this.#e.clear(),this.#t===0&&this.#f(),Hn=this,Re=null,ls(n),ls(r),Hn=null,this.#a?.resolve()}It=null}#c(e,r,n){e.f^=rt;for(var o=e.first,l=null;o!==null;){var a=o.f,i=(a&(Ft|wr))!==0,c=i&&(a&rt)!==0,u=c||(a&xt)!==0||this.#l.has(o);if(!u&&o.fn!==null){i?o.f^=rt:l!==null&&(a&(wn|$r|Vo))!==0?l.b.defer_effect(o):(a&wn)!==0?r.push(o):nn(o)&&((a&Ht)!==0&&this.#r.add(o),on(o));var f=o.first;if(f!==null){o=f;continue}}var d=o.parent;for(o=o.next;o===null&&d!==null;)d===l&&(l=null),o=d.next,d=d.parent}}#u(e){for(var r=0;r<e.length;r+=1)ns(e[r],this.#s,this.#r)}capture(e,r){r!==nt&&!this.previous.has(e)&&this.previous.set(e,r),(e.f&ir)===0&&(this.current.set(e,e.v),It?.set(e,e.v))}activate(){Re=this,this.apply()}deactivate(){Re===this&&(Re=null,It=null)}flush(){if(this.activate(),pt.length>0){if(ss(),Re!==null&&Re!==this)return}else this.#t===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#n)e(this);this.#n.clear()}#f(){if(xn.size>1){this.previous.clear();var e=It,r=!0;for(const o of xn){if(o===this){r=!1;continue}const l=[];for(const[i,c]of this.current){if(o.current.has(i))if(r&&c!==o.current.get(i))o.current.set(i,c);else continue;l.push(i)}if(l.length===0)continue;const a=[...o.current.keys()].filter(i=>!this.current.has(i));if(a.length>0){var n=pt;pt=[];const i=new Set,c=new Map;for(const u of l)as(u,a,i,c);if(pt.length>0){Re=o,o.apply();for(const u of pt)o.#c(u,[],[]);o.deactivate()}pt=n}}Re=null,It=e}this.committed=!0,xn.delete(this)}increment(e){this.#t+=1,e&&(this.#o+=1)}decrement(e){this.#t-=1,e&&(this.#o-=1),!this.#i&&(this.#i=!0,Bt(()=>{this.#i=!1,this.is_deferred()?pt.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#s)this.#r.delete(e),Ze(e,at),Dt(e);for(const e of this.#r)Ze(e,zt),Dt(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#n.add(e)}settled(){return(this.#a??=qo()).promise}static ensure(){if(Re===null){const e=Re=new tr;xn.add(Re),Wr||Bt(()=>{Re===e&&e.flush()})}return Re}apply(){}}function os(t){var e=Wr;Wr=!0;try{for(var r;;){if(Pa(),pt.length===0&&(Re?.flush(),pt.length===0))return kn=null,r;ss()}}finally{Wr=e}}function ss(){Wn=!0;var t=null;try{for(var e=0;pt.length>0;){var r=tr.ensure();if(e++>1e3){var n,o;La()}r.process(pt),ur.clear()}}finally{pt=[],Wn=!1,kn=null}}function La(){try{na()}catch(t){Hr(t,kn)}}let rr=null;function ls(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var n=t[r++];if((n.f&(Qt|xt))===0&&nn(n)&&(rr=new Set,on(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?As(n):n.fn=null),rr?.size>0)){ur.clear();for(const o of rr){if((o.f&(Qt|xt))!==0)continue;const l=[o];let a=o.parent;for(;a!==null;)rr.has(a)&&(rr.delete(a),l.push(a)),a=a.parent;for(let i=l.length-1;i>=0;i--){const c=l[i];(c.f&(Qt|xt))===0&&on(c)}}rr.clear()}}rr=null}}function as(t,e,r,n){if(!r.has(t)&&(r.add(t),t.reactions!==null))for(const o of t.reactions){const l=o.f;(l&lt)!==0?as(o,e,r,n):(l&(Vn|Ht))!==0&&(l&at)===0&&is(o,e,n)&&(Ze(o,at),Dt(o))}}function is(t,e,r){const n=r.get(t);if(n!==void 0)return n;if(t.deps!==null)for(const o of t.deps){if(Ir.call(e,o))return!0;if((o.f&lt)!==0&&is(o,e,r))return r.set(o,!0),!0}return r.set(t,!1),!1}function Dt(t){for(var e=kn=t;e.parent!==null;){e=e.parent;var r=e.f;if(Wn&&e===Ne&&(r&Ht)!==0&&(r&Ho)===0)return;if((r&(wr|Ft))!==0){if((r&rt)===0)return;e.f^=rt}}pt.push(e)}function cs(t,e){if(!((t.f&Ft)!==0&&(t.f&rt)!==0)){(t.f&at)!==0?e.d.push(t):(t.f&zt)!==0&&e.m.push(t),Ze(t,rt);for(var r=t.first;r!==null;)cs(r,e),r=r.next}}function Ma(t){let e=0,r=nr(0),n;return()=>{Zn()&&(s(r),$n(()=>(e===0&&(n=Kt(()=>t(()=>tn(r)))),e+=1,()=>{Bt(()=>{e-=1,e===0&&(n?.(),n=void 0,tn(r))})})))}}var Ra=$t|Or|On;function Fa(t,e,r){new za(t,e,r)}class za{parent;is_pending=!1;#e;#n=null;#t;#o;#a;#s=null;#r=null;#l=null;#i=null;#c=null;#u=0;#f=0;#h=!1;#v=!1;#g=new Set;#m=new Set;#d=null;#y=Ma(()=>(this.#d=nr(this.#u),()=>{this.#d=null}));constructor(e,r,n){this.#e=e,this.#t=r,this.#o=n,this.parent=Ne.b,this.is_pending=!!this.#t.pending,this.#a=kr(()=>{Ne.b=this;{var o=this.#w();try{this.#s=Ct(()=>n(o))}catch(l){this.error(l)}this.#f>0?this.#b():this.is_pending=!1}return()=>{this.#c?.remove()}},Ra)}#x(){try{this.#s=Ct(()=>this.#o(this.#e))}catch(e){this.error(e)}}#k(){const e=this.#t.pending;e&&(this.#r=Ct(()=>e(this.#e)),Bt(()=>{var r=this.#w();this.#s=this.#p(()=>(tr.ensure(),Ct(()=>this.#o(r)))),this.#f>0?this.#b():(Er(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#w(){var e=this.#e;return this.is_pending&&(this.#c=sr(),this.#e.before(this.#c),e=this.#c),e}defer_effect(e){ns(e,this.#g,this.#m)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#t.pending}#p(e){var r=Ne,n=Se,o=Ge;Gt(this.#a),Nt(this.#a),Ur(this.#a.ctx);try{return e()}catch(l){return ts(l),null}finally{Gt(r),Nt(n),Ur(o)}}#b(){const e=this.#t.pending;this.#s!==null&&(this.#i=document.createDocumentFragment(),this.#i.append(this.#c),js(this.#s,this.#i)),this.#r===null&&(this.#r=Ct(()=>e(this.#e)))}#_(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#_(e);return}if(this.#f+=e,this.#f===0){this.is_pending=!1;for(const r of this.#g)Ze(r,at),Dt(r);for(const r of this.#m)Ze(r,zt),Dt(r);this.#g.clear(),this.#m.clear(),this.#r&&Er(this.#r,()=>{this.#r=null}),this.#i&&(this.#e.before(this.#i),this.#i=null)}}update_pending_count(e){this.#_(e),this.#u+=e,!(!this.#d||this.#h)&&(this.#h=!0,Bt(()=>{this.#h=!1,this.#d&&or(this.#d,this.#u)}))}get_effect_pending(){return this.#y(),s(this.#d)}error(e){var r=this.#t.onerror;let n=this.#t.failed;if(this.#v||!r&&!n)throw e;this.#s&&(bt(this.#s),this.#s=null),this.#r&&(bt(this.#r),this.#r=null),this.#l&&(bt(this.#l),this.#l=null);var o=!1,l=!1;const a=()=>{if(o){ka();return}o=!0,l&&ia(),tr.ensure(),this.#u=0,this.#l!==null&&Er(this.#l,()=>{this.#l=null}),this.is_pending=this.has_pending_snippet(),this.#s=this.#p(()=>(this.#v=!1,Ct(()=>this.#o(this.#e)))),this.#f>0?this.#b():this.is_pending=!1};Bt(()=>{try{l=!0,r?.(e,a),l=!1}catch(i){Hr(i,this.#a&&this.#a.parent)}n&&(this.#l=this.#p(()=>{tr.ensure(),this.#v=!0;try{return Ct(()=>{n(this.#e,()=>e,()=>a)})}catch(i){return Hr(i,this.#a.parent),null}finally{this.#v=!1}}))})}}function Ba(t,e,r,n){const o=yr()?en:Yn;var l=t.filter(v=>!v.settled);if(r.length===0&&l.length===0){n(e.map(o));return}var a=Re,i=Ne,c=us(),u=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(v=>v.promise)):null;function f(v){c();try{n(v)}catch(h){(i.f&Qt)===0&&Hr(h,i)}a?.deactivate(),En()}if(r.length===0){u.then(()=>f(e.map(o)));return}function d(){c(),Promise.all(r.map(v=>Ia(v))).then(v=>f([...e.map(o),...v])).catch(v=>Hr(v,i))}u?u.then(d):d()}function us(){var t=Ne,e=Se,r=Ge,n=Re;return function(l=!0){Gt(t),Nt(e),Ur(r),l&&n?.activate()}}function En(){Gt(null),Nt(null),Ur(null)}function en(t){var e=lt|at,r=Se!==null&&(Se.f&lt)!==0?Se:null;return Ne!==null&&(Ne.f|=Or),{ctx:Ge,deps:null,effects:null,equals:Jo,f:e,fn:t,reactions:null,rv:0,v:nt,wv:0,parent:r??Ne,ac:null}}function Ia(t,e,r){let n=Ne;n===null&&Ql();var o=n.b,l=void 0,a=nr(nt),i=!Se,c=new Map;return Ka(()=>{var u=qo();l=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{f===Re&&f.committed&&f.deactivate(),En()})}catch(h){u.reject(h),En()}var f=Re;if(i){var d=o.is_rendered();o.update_pending_count(1),f.increment(d),c.get(f)?.reject(qr),c.delete(f),c.set(f,u)}const v=(h,m=void 0)=>{if(f.activate(),m)m!==qr&&(a.f|=ir,or(a,m));else{(a.f&ir)!==0&&(a.f^=ir),or(a,h);for(const[p,g]of c){if(c.delete(p),p===f)break;g.reject(qr)}}i&&(o.update_pending_count(-1),f.decrement(d))};u.promise.then(v,h=>v(null,h||"unknown"))}),ys(()=>{for(const u of c.values())u.reject(qr)}),new Promise(u=>{function f(d){function v(){d===l?u(a):f(l)}d.then(v,v)}f(l)})}function A(t){const e=en(t);return Ts(e),e}function Yn(t){const e=en(t);return e.equals=Zo,e}function fs(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)bt(e[r])}}function Da(t){for(var e=t.parent;e!==null;){if((e.f&lt)===0)return(e.f&Qt)===0?e:null;e=e.parent}return null}function Gn(t){var e,r=Ne;Gt(Da(t));try{t.f&=~_r,fs(t),e=zs(t)}finally{Gt(r)}return e}function ds(t){var e=Gn(t);if(!t.equals(e)&&(t.wv=Rs(),(!Re?.is_fork||t.deps===null)&&(t.v=e,t.deps===null))){Ze(t,rt);return}fr||(It!==null?(Zn()||Re?.is_fork)&&It.set(t,e):Un(t))}let Kn=new Set;const ur=new Map;let vs=!1;function nr(t,e){var r={f:0,v:t,reactions:null,equals:Jo,rv:0,wv:0};return r}function X(t,e){const r=nr(t);return Ts(r),r}function Xn(t,e=!1,r=!0){const n=nr(t);return e||(n.equals=Zo),Vr&&r&&Ge!==null&&Ge.l!==null&&(Ge.l.s??=[]).push(n),n}function T(t,e,r=!1){Se!==null&&(!Ot||(Se.f&Uo)!==0)&&yr()&&(Se.f&(lt|Ht|Vn|Uo))!==0&&(jt===null||!Ir.call(jt,t))&&aa();let n=r?Ce(e):e;return or(t,n)}function or(t,e){if(!t.equals(e)){var r=t.v;fr?ur.set(t,e):ur.set(t,r),t.v=e;var n=tr.ensure();if(n.capture(t,r),(t.f&lt)!==0){const o=t;(t.f&at)!==0&&Gn(o),Un(o)}t.wv=Rs(),hs(t,at),yr()&&Ne!==null&&(Ne.f&rt)!==0&&(Ne.f&(Ft|wr))===0&&(Pt===null?Ja([t]):Pt.push(t)),!n.is_fork&&Kn.size>0&&!vs&&Oa()}return e}function Oa(){vs=!1;for(const t of Kn)(t.f&rt)!==0&&Ze(t,zt),nn(t)&&on(t);Kn.clear()}function tn(t){T(t,t.v+1)}function hs(t,e){var r=t.reactions;if(r!==null)for(var n=yr(),o=r.length,l=0;l<o;l++){var a=r[l],i=a.f;if(!(!n&&a===Ne)){var c=(i&at)===0;if(c&&Ze(a,e),(i&lt)!==0){var u=a;It?.delete(u),(i&_r)===0&&(i&At&&(a.f|=_r),hs(u,zt))}else c&&((i&Ht)!==0&&rr!==null&&rr.add(a),Dt(a))}}}function Ce(t){if(typeof t!="object"||t===null||cr in t)return t;const e=bn(t);if(e!==Do&&e!==Gl)return t;var r=new Map,n=In(t),o=X(0),l=Ar,a=i=>{if(Ar===l)return i();var c=Se,u=Ar;Nt(null),Ms(l);var f=i();return Nt(c),Ms(u),f};return n&&r.set("length",X(t.length)),new Proxy(t,{defineProperty(i,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&sa();var f=r.get(c);return f===void 0?f=a(()=>{var d=X(u.value);return r.set(c,d),d}):T(f,u.value,!0),!0},deleteProperty(i,c){var u=r.get(c);if(u===void 0){if(c in i){const f=a(()=>X(nt));r.set(c,f),tn(o)}}else T(u,nt),tn(o);return!0},get(i,c,u){if(c===cr)return t;var f=r.get(c),d=c in i;if(f===void 0&&(!d||ar(i,c)?.writable)&&(f=a(()=>{var h=Ce(d?i[c]:nt),m=X(h);return m}),r.set(c,f)),f!==void 0){var v=s(f);return v===nt?void 0:v}return Reflect.get(i,c,u)},getOwnPropertyDescriptor(i,c){var u=Reflect.getOwnPropertyDescriptor(i,c);if(u&&"value"in u){var f=r.get(c);f&&(u.value=s(f))}else if(u===void 0){var d=r.get(c),v=d?.v;if(d!==void 0&&v!==nt)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(i,c){if(c===cr)return!0;var u=r.get(c),f=u!==void 0&&u.v!==nt||Reflect.has(i,c);if(u!==void 0||Ne!==null&&(!f||ar(i,c)?.writable)){u===void 0&&(u=a(()=>{var v=f?Ce(i[c]):nt,h=X(v);return h}),r.set(c,u));var d=s(u);if(d===nt)return!1}return f},set(i,c,u,f){var d=r.get(c),v=c in i;if(n&&c==="length")for(var h=u;h<d.v;h+=1){var m=r.get(h+"");m!==void 0?T(m,nt):h in i&&(m=a(()=>X(nt)),r.set(h+"",m))}if(d===void 0)(!v||ar(i,c)?.writable)&&(d=a(()=>X(void 0)),T(d,Ce(u)),r.set(c,d));else{v=d.v!==nt;var p=a(()=>Ce(u));T(d,p)}var g=Reflect.getOwnPropertyDescriptor(i,c);if(g?.set&&g.set.call(f,u),!v){if(n&&typeof c=="string"){var b=r.get("length"),C=Number(c);Number.isInteger(C)&&C>=b.v&&T(b,C+1)}tn(o)}return!0},ownKeys(i){s(o);var c=Reflect.ownKeys(i).filter(d=>{var v=r.get(d);return v===void 0||v.v!==nt});for(var[u,f]of r)f.v!==nt&&!(u in i)&&c.push(u);return c},setPrototypeOf(){la()}})}var Jn,gs,ms,ps;function qa(){if(Jn===void 0){Jn=window,gs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;ms=ar(e,"firstChild").get,ps=ar(e,"nextSibling").get,Oo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Oo(r)&&(r.__t=void 0)}}function sr(t=""){return document.createTextNode(t)}function kt(t){return ms.call(t)}function rn(t){return ps.call(t)}function I(t,e){return kt(t)}function W(t,e=!1){{var r=kt(t);return r instanceof Comment&&r.data===""?rn(r):r}}function z(t,e=1,r=!1){let n=t;for(;e--;)n=rn(n);return n}function Va(t){t.textContent=""}function bs(){return!1}let ws=!1;function Ua(){ws||(ws=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Yr(t){var e=Se,r=Ne;Nt(null),Gt(null);try{return t()}finally{Nt(e),Gt(r)}}function Ha(t,e,r,n=r){t.addEventListener(e,()=>Yr(r));const o=t.__on_r;o?t.__on_r=()=>{o(),n(!0)}:t.__on_r=()=>n(!0),Ua()}function _s(t){Ne===null&&(Se===null&&ra(),ta()),fr&&ea()}function Wa(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Yt(t,e,r){var n=Ne;n!==null&&(n.f&xt)!==0&&(t|=xt);var o={ctx:Ge,deps:null,nodes:null,f:t|at|At,first:null,fn:e,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{on(o),o.f|=_n}catch(i){throw bt(o),i}else e!==null&&Dt(o);var l=o;if(r&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&Or)===0&&(l=l.first,(t&Ht)!==0&&(t&$t)!==0&&l!==null&&(l.f|=$t)),l!==null&&(l.parent=n,n!==null&&Wa(l,n),Se!==null&&(Se.f&lt)!==0&&(t&wr)===0)){var a=Se;(a.effects??=[]).push(l)}return o}function Zn(){return Se!==null&&!Ot}function ys(t){const e=Yt($r,null,!1);return Ze(e,rt),e.teardown=t,e}function fe(t){_s();var e=Ne.f,r=!Se&&(e&Ft)!==0&&(e&_n)===0;if(r){var n=Ge;(n.e??=[]).push(t)}else return xs(t)}function xs(t){return Yt(wn|Wo,t,!1)}function Ya(t){return _s(),Yt($r|Wo,t,!0)}function Ga(t){tr.ensure();const e=Yt(wr|Or,t,!0);return(r={})=>new Promise(n=>{r.outro?Er(e,()=>{bt(e),n(void 0)}):(bt(e),n(void 0))})}function Qn(t){return Yt(wn,t,!1)}function Ka(t){return Yt(Vn|Or,t,!0)}function $n(t,e=0){return Yt($r|e,t,!0)}function Z(t,e=[],r=[],n=[]){Ba(n,e,r,o=>{Yt($r,()=>t(...o.map(s)),!0)})}function kr(t,e=0){var r=Yt(Ht|e,t,!0);return r}function Ct(t){return Yt(Ft|Or,t,!0)}function ks(t){var e=t.teardown;if(e!==null){const r=fr,n=Se;Ps(!0),Nt(null);try{e.call(null)}finally{Ps(r),Nt(n)}}}function Es(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const o=r.ac;o!==null&&Yr(()=>{o.abort(qr)});var n=r.next;(r.f&wr)!==0?r.parent=null:bt(r,e),r=n}}function Xa(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&Ft)===0&&bt(e),e=r}}function bt(t,e=!0){var r=!1;(e||(t.f&Ho)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Ss(t.nodes.start,t.nodes.end),r=!0),Es(t,e&&!r),An(t,0),Ze(t,Qt);var n=t.nodes&&t.nodes.t;if(n!==null)for(const l of n)l.stop();ks(t);var o=t.parent;o!==null&&o.first!==null&&As(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Ss(t,e){for(;t!==null;){var r=t===e?null:rn(t);t.remove(),t=r}}function As(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function Er(t,e,r=!0){var n=[];Cs(t,n,!0);var o=()=>{r&&bt(t),e&&e()},l=n.length;if(l>0){var a=()=>--l||o();for(var i of n)i.out(a)}else o()}function Cs(t,e,r){if((t.f&xt)===0){t.f^=xt;var n=t.nodes&&t.nodes.t;if(n!==null)for(const i of n)(i.is_global||r)&&e.push(i);for(var o=t.first;o!==null;){var l=o.next,a=(o.f&$t)!==0||(o.f&Ft)!==0&&(t.f&Ht)!==0;Cs(o,e,a?r:!1),o=l}}}function eo(t){Ns(t,!0)}function Ns(t,e){if((t.f&xt)!==0){t.f^=xt,(t.f&rt)===0&&(Ze(t,at),Dt(t));for(var r=t.first;r!==null;){var n=r.next,o=(r.f&$t)!==0||(r.f&Ft)!==0;Ns(r,o?e:!1),r=n}var l=t.nodes&&t.nodes.t;if(l!==null)for(const a of l)(a.is_global||e)&&a.in()}}function js(t,e){if(t.nodes)for(var r=t.nodes.start,n=t.nodes.end;r!==null;){var o=r===n?null:rn(r);e.append(r),r=o}}let Sn=!1,fr=!1;function Ps(t){fr=t}let Se=null,Ot=!1;function Nt(t){Se=t}let Ne=null;function Gt(t){Ne=t}let jt=null;function Ts(t){Se!==null&&(jt===null?jt=[t]:jt.push(t))}let wt=null,Et=0,Pt=null;function Ja(t){Pt=t}let Ls=1,Sr=0,Ar=Sr;function Ms(t){Ar=t}function Rs(){return++Ls}function nn(t){var e=t.f;if((e&at)!==0)return!0;if(e&lt&&(t.f&=~_r),(e&zt)!==0){for(var r=t.deps,n=r.length,o=0;o<n;o++){var l=r[o];if(nn(l)&&ds(l),l.wv>t.wv)return!0}(e&At)!==0&&It===null&&Ze(t,rt)}return!1}function Fs(t,e,r=!0){var n=t.reactions;if(n!==null&&!(jt!==null&&Ir.call(jt,t)))for(var o=0;o<n.length;o++){var l=n[o];(l.f&lt)!==0?Fs(l,e,!1):e===l&&(r?Ze(l,at):(l.f&rt)!==0&&Ze(l,zt),Dt(l))}}function zs(t){var e=wt,r=Et,n=Pt,o=Se,l=jt,a=Ge,i=Ot,c=Ar,u=t.f;wt=null,Et=0,Pt=null,Se=(u&(Ft|wr))===0?t:null,jt=null,Ur(t.ctx),Ot=!1,Ar=++Sr,t.ac!==null&&(Yr(()=>{t.ac.abort(qr)}),t.ac=null);try{t.f|=qn;var f=t.fn,d=f(),v=t.deps,h=Re?.is_fork;if(wt!==null){var m;if(h||An(t,Et),v!==null&&Et>0)for(v.length=Et+wt.length,m=0;m<wt.length;m++)v[Et+m]=wt[m];else t.deps=v=wt;if(Zn()&&(t.f&At)!==0)for(m=Et;m<v.length;m++)(v[m].reactions??=[]).push(t)}else!h&&v!==null&&Et<v.length&&(An(t,Et),v.length=Et);if(yr()&&Pt!==null&&!Ot&&v!==null&&(t.f&(lt|zt|at))===0)for(m=0;m<Pt.length;m++)Fs(Pt[m],t);if(o!==null&&o!==t){if(Sr++,o.deps!==null)for(let p=0;p<r;p+=1)o.deps[p].rv=Sr;if(e!==null)for(const p of e)p.rv=Sr;Pt!==null&&(n===null?n=Pt:n.push(...Pt))}return(t.f&ir)!==0&&(t.f^=ir),d}catch(p){return ts(p)}finally{t.f^=qn,wt=e,Et=r,Pt=n,Se=o,jt=l,Ur(a),Ot=i,Ar=c}}function Za(t,e){let r=e.reactions;if(r!==null){var n=Wl.call(r,t);if(n!==-1){var o=r.length-1;o===0?r=e.reactions=null:(r[n]=r[o],r.pop())}}if(r===null&&(e.f&lt)!==0&&(wt===null||!Ir.call(wt,e))){var l=e;(l.f&At)!==0&&(l.f^=At,l.f&=~_r),Un(l),fs(l),An(l,0)}}function An(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)Za(t,r[n])}function on(t){var e=t.f;if((e&Qt)===0){Ze(t,rt);var r=Ne,n=Sn;Ne=t,Sn=!0;try{(e&(Ht|Vo))!==0?Xa(t):Es(t),ks(t);var o=zs(t);t.teardown=typeof o=="function"?o:null,t.wv=Ls;var l;Bn&&Sa&&(t.f&at)!==0&&t.deps}finally{Sn=n,Ne=r}}}async function Qa(){await Promise.resolve(),os()}function s(t){var e=t.f,r=(e&lt)!==0;if(Se!==null&&!Ot){var n=Ne!==null&&(Ne.f&Qt)!==0;if(!n&&(jt===null||!Ir.call(jt,t))){var o=Se.deps;if((Se.f&qn)!==0)t.rv<Sr&&(t.rv=Sr,wt===null&&o!==null&&o[Et]===t?Et++:wt===null?wt=[t]:wt.push(t));else{(Se.deps??=[]).push(t);var l=t.reactions;l===null?t.reactions=[Se]:Ir.call(l,Se)||l.push(Se)}}}if(fr&&ur.has(t))return ur.get(t);if(r){var a=t;if(fr){var i=a.v;return((a.f&rt)===0&&a.reactions!==null||Is(a))&&(i=Gn(a)),ur.set(a,i),i}var c=(a.f&At)===0&&!Ot&&Se!==null&&(Sn||(Se.f&At)!==0),u=a.deps===null;nn(a)&&(c&&(a.f|=At),ds(a)),c&&!u&&Bs(a)}if(It?.has(t))return It.get(t);if((t.f&ir)!==0)throw t.v;return t.v}function Bs(t){if(t.deps!==null){t.f|=At;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&lt)!==0&&(e.f&At)===0&&Bs(e)}}function Is(t){if(t.v===nt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(ur.has(e)||(e.f&lt)!==0&&Is(e))return!0;return!1}function Kt(t){var e=Ot;try{return Ot=!0,t()}finally{Ot=e}}function $a(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(cr in t)to(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&cr in r&&to(r)}}}function to(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{to(t[n],e)}catch{}const r=bn(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Io(r);for(let o in n){const l=n[o].get;if(l)try{l.call(t)}catch{}}}}}const ei=["touchstart","touchmove"];function ti(t){return ei.includes(t)}const Ds=new Set,ro=new Set;function ri(t,e,r,n={}){function o(l){if(n.capture||sn.call(e,l),!l.cancelBubble)return Yr(()=>r?.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Bt(()=>{e.addEventListener(t,o,n)}):e.addEventListener(t,o,n),o}function Cr(t,e,r,n,o){var l={capture:n,passive:o},a=ri(t,e,r,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ys(()=>{e.removeEventListener(t,a,l)})}function Qe(t){for(var e=0;e<t.length;e++)Ds.add(t[e]);for(var r of ro)r(t)}let Os=null;function sn(t){var e=this,r=e.ownerDocument,n=t.type,o=t.composedPath?.()||[],l=o[0]||t.target;Os=t;var a=0,i=Os===t&&t.__root;if(i){var c=o.indexOf(i);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(a=c)}if(l=o[a]||t.target,l!==e){Yl(t,"currentTarget",{configurable:!0,get(){return l||r}});var f=Se,d=Ne;Nt(null),Gt(null);try{for(var v,h=[];l!==null;){var m=l.assignedSlot||l.parentNode||l.host||null;try{var p=l["__"+n];p!=null&&(!l.disabled||t.target===l)&&p.call(l,t)}catch(g){v?h.push(g):v=g}if(t.cancelBubble||m===e||m===null)break;l=m}if(v){for(let g of h)queueMicrotask(()=>{throw g});throw v}}finally{t.__root=e,delete t.currentTarget,Nt(f),Gt(d)}}}function no(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Nr(t,e){var r=Ne;r.nodes===null&&(r.nodes={start:t,end:e,a:null,t:null})}function V(t,e){var r=(e&Xo)!==0,n=(e&ya)!==0,o,l=!t.startsWith("<!>");return()=>{o===void 0&&(o=no(l?t:"<!>"+t),r||(o=kt(o)));var a=n||gs?document.importNode(o,!0):o.cloneNode(!0);if(r){var i=kt(a),c=a.lastChild;Nr(i,c)}else Nr(a,a);return a}}function ni(t,e,r="svg"){var n=!t.startsWith("<!>"),o=(e&Xo)!==0,l=`<${r}>${n?t:"<!>"+t}</${r}>`,a;return()=>{if(!a){var i=no(l),c=kt(i);if(o)for(a=document.createDocumentFragment();kt(c);)a.appendChild(kt(c));else a=kt(c)}var u=a.cloneNode(!0);if(o){var f=kt(u),d=u.lastChild;Nr(f,d)}else Nr(u,u);return u}}function be(t,e){return ni(t,e,"svg")}function oi(t=""){{var e=sr(t+"");return Nr(e,e),e}}function ke(){var t=document.createDocumentFragment(),e=document.createComment(""),r=sr();return t.append(e,r),Nr(e,r),t}function S(t,e){t!==null&&t.before(e)}let oo=!0;function Fe(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??=t.nodeValue)&&(t.__t=r,t.nodeValue=r+"")}function si(t,e){return li(t,e)}const Gr=new Map;function li(t,{target:e,anchor:r,props:n={},events:o,context:l,intro:a=!0}){qa();var i=new Set,c=d=>{for(var v=0;v<d.length;v++){var h=d[v];if(!i.has(h)){i.add(h);var m=ti(h);e.addEventListener(h,sn,{passive:m});var p=Gr.get(h);p===void 0?(document.addEventListener(h,sn,{passive:m}),Gr.set(h,1)):Gr.set(h,p+1)}}};c(pn(Ds)),ro.add(c);var u=void 0,f=Ga(()=>{var d=r??e.appendChild(sr());return Fa(d,{pending:()=>{}},v=>{me({});var h=Ge;l&&(h.c=l),o&&(n.$$events=o),oo=a,u=t(v,n)||{},oo=!0,pe()}),()=>{for(var v of i){e.removeEventListener(v,sn);var h=Gr.get(v);--h===0?(document.removeEventListener(v,sn),Gr.delete(v)):Gr.set(v,h)}ro.delete(c),d!==r&&d.parentNode?.removeChild(d)}});return ai.set(u,f),u}let ai=new WeakMap;class ln{anchor;#e=new Map;#n=new Map;#t=new Map;#o=new Set;#a=!0;constructor(e,r=!0){this.anchor=e,this.#a=r}#s=()=>{var e=Re;if(this.#e.has(e)){var r=this.#e.get(e),n=this.#n.get(r);if(n)eo(n),this.#o.delete(r);else{var o=this.#t.get(r);o&&(this.#n.set(r,o.effect),this.#t.delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),n=o.effect)}for(const[l,a]of this.#e){if(this.#e.delete(l),l===e)break;const i=this.#t.get(a);i&&(bt(i.effect),this.#t.delete(a))}for(const[l,a]of this.#n){if(l===r||this.#o.has(l))continue;const i=()=>{if(Array.from(this.#e.values()).includes(l)){var u=document.createDocumentFragment();js(a,u),u.append(sr()),this.#t.set(l,{effect:a,fragment:u})}else bt(a);this.#o.delete(l),this.#n.delete(l)};this.#a||!n?(this.#o.add(l),Er(a,i,!1)):i()}}};#r=e=>{this.#e.delete(e);const r=Array.from(this.#e.values());for(const[n,o]of this.#t)r.includes(n)||(bt(o.effect),this.#t.delete(n))};ensure(e,r){var n=Re,o=bs();if(r&&!this.#n.has(e)&&!this.#t.has(e))if(o){var l=document.createDocumentFragment(),a=sr();l.append(a),this.#t.set(e,{effect:Ct(()=>r(a)),fragment:l})}else this.#n.set(e,Ct(()=>r(this.anchor)));if(this.#e.set(n,e),o){for(const[i,c]of this.#n)i===e?n.unskip_effect(c):n.skip_effect(c);for(const[i,c]of this.#t)i===e?n.unskip_effect(c.effect):n.skip_effect(c.effect);n.oncommit(this.#s),n.ondiscard(this.#r)}else this.#s()}}const ii=0,so=1;function ci(t,e,r,n,o){var l=yr(),a=nt,i=l?nr(a):Xn(a,!1,!1),c=l?nr(a):Xn(a,!1,!1),u=new ln(t);kr(()=>{var f=e(),d=!1;if(Kl(f)){var v=us(),h=!1;const m=p=>{if(!d){h=!0,v(!1),tr.ensure();try{p()}finally{En(),Wr||os()}}};f.then(p=>{m(()=>{or(i,p),u.ensure(so,n&&(g=>n(g,i)))})},p=>{m(()=>{if(or(c,p),u.ensure(so,o&&(g=>o(g,c))),!o)throw c.v})}),Bt(()=>{h||m(()=>{u.ensure(ii,r)})})}else or(i,f),u.ensure(so,n);return()=>{d=!0}})}function q(t,e,r=!1){var n=new ln(t),o=r?$t:0;function l(a,i){n.ensure(a,i)}kr(()=>{var a=!1;e((i,c=!0)=>{a=!0,l(c,i)}),a||l(!1,null)},o)}const ui=Symbol("NaN");function an(t,e,r){var n=new ln(t),o=!yr();kr(()=>{var l=e();l!==l&&(l=ui),o&&l!==null&&typeof l=="object"&&(l={}),n.ensure(l,r)})}function dt(t,e){return e}function fi(t,e,r){for(var n=[],o=e.length,l,a=e.length,i=0;i<o;i++){let d=e[i];Er(d,()=>{if(l){if(l.pending.delete(d),l.done.add(d),l.pending.size===0){var v=t.outrogroups;lo(pn(l.done)),v.delete(l),v.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var c=n.length===0&&r!==null;if(c){var u=r,f=u.parentNode;Va(f),f.append(u),t.items.clear()}lo(e,!c)}else l={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(l)}function lo(t,e=!0){for(var r=0;r<t.length;r++)bt(t[r],e)}var qs;function it(t,e,r,n,o,l=null){var a=t,i=new Map,c=(e&Ko)!==0;if(c){var u=t;a=u.appendChild(sr())}var f=null,d=Yn(()=>{var b=r();return In(b)?b:b==null?[]:pn(b)}),v,h=!0;function m(){g.fallback=f,di(g,v,a,e,n),f!==null&&(v.length===0?(f.f&er)===0?eo(f):(f.f^=er,un(f,null,a)):Er(f,()=>{f=null}))}var p=kr(()=>{v=s(d);for(var b=v.length,C=new Set,_=Re,w=bs(),L=0;L<b;L+=1){var N=v[L],P=n(N,L),R=h?null:i.get(P);R?(R.v&&or(R.v,N),R.i&&or(R.i,L),w&&_.unskip_effect(R.e)):(R=vi(i,h?a:qs??=sr(),N,P,L,o,e,r),h||(R.e.f|=er),i.set(P,R)),C.add(P)}if(b===0&&l&&!f&&(h?f=Ct(()=>l(a)):(f=Ct(()=>l(qs??=sr())),f.f|=er)),b>C.size&&$l(),!h)if(w){for(const[B,j]of i)C.has(B)||_.skip_effect(j.e);_.oncommit(m),_.ondiscard(()=>{})}else m();s(d)}),g={effect:p,items:i,outrogroups:null,fallback:f};h=!1}function cn(t){for(;t!==null&&(t.f&Ft)===0;)t=t.next;return t}function di(t,e,r,n,o){var l=(n&fa)!==0,a=e.length,i=t.items,c=cn(t.effect.first),u,f=null,d,v=[],h=[],m,p,g,b;if(l)for(b=0;b<a;b+=1)m=e[b],p=o(m,b),g=i.get(p).e,(g.f&er)===0&&(g.nodes?.a?.measure(),(d??=new Set).add(g));for(b=0;b<a;b+=1){if(m=e[b],p=o(m,b),g=i.get(p).e,t.outrogroups!==null)for(const j of t.outrogroups)j.pending.delete(g),j.done.delete(g);if((g.f&er)!==0)if(g.f^=er,g===c)un(g,null,r);else{var C=f?f.next:c;g===t.effect.last&&(t.effect.last=g.prev),g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),dr(t,f,g),dr(t,g,C),un(g,C,r),f=g,v=[],h=[],c=cn(f.next);continue}if((g.f&xt)!==0&&(eo(g),l&&(g.nodes?.a?.unfix(),(d??=new Set).delete(g))),g!==c){if(u!==void 0&&u.has(g)){if(v.length<h.length){var _=h[0],w;f=_.prev;var L=v[0],N=v[v.length-1];for(w=0;w<v.length;w+=1)un(v[w],_,r);for(w=0;w<h.length;w+=1)u.delete(h[w]);dr(t,L.prev,N.next),dr(t,f,L),dr(t,N,_),c=_,f=N,b-=1,v=[],h=[]}else u.delete(g),un(g,c,r),dr(t,g.prev,g.next),dr(t,g,f===null?t.effect.first:f.next),dr(t,f,g),f=g;continue}for(v=[],h=[];c!==null&&c!==g;)(u??=new Set).add(c),h.push(c),c=cn(c.next);if(c===null)continue}(g.f&er)===0&&v.push(g),f=g,c=cn(g.next)}if(t.outrogroups!==null){for(const j of t.outrogroups)j.pending.size===0&&(lo(pn(j.done)),t.outrogroups?.delete(j));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||u!==void 0){var P=[];if(u!==void 0)for(g of u)(g.f&xt)===0&&P.push(g);for(;c!==null;)(c.f&xt)===0&&c!==t.fallback&&P.push(c),c=cn(c.next);var R=P.length;if(R>0){var B=(n&Ko)!==0&&a===0?r:null;if(l){for(b=0;b<R;b+=1)P[b].nodes?.a?.measure();for(b=0;b<R;b+=1)P[b].nodes?.a?.fix()}fi(t,P,B)}}l&&Bt(()=>{if(d!==void 0)for(g of d)g.nodes?.a?.apply()})}function vi(t,e,r,n,o,l,a,i){var c=(a&ca)!==0?(a&da)===0?Xn(r,!1,!1):nr(r):null,u=(a&ua)!==0?nr(o):null;return{v:c,i:u,e:Ct(()=>(l(e,c??r,u??o,i),()=>{t.delete(n)}))}}function un(t,e,r){if(t.nodes)for(var n=t.nodes.start,o=t.nodes.end,l=e&&(e.f&er)===0?e.nodes.start:r;n!==null;){var a=rn(n);if(l.before(n),n===o)return;n=a}}function dr(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function vt(t,e,r=!1,n=!1,o=!1){var l=t,a="";Z(()=>{var i=Ne;if(a!==(a=e()??"")&&(i.nodes!==null&&(Ss(i.nodes.start,i.nodes.end),i.nodes=null),a!=="")){var c=a+"";r?c=`<svg>${c}</svg>`:n&&(c=`<math>${c}</math>`);var u=no(c);if((r||n)&&(u=kt(u)),Nr(kt(u),u.lastChild),r||n)for(;kt(u);)l.before(kt(u));else l.before(u)}})}function Kr(t,e,...r){var n=new ln(t);kr(()=>{const o=e()??null;n.ensure(o,o&&(l=>o(l,...r)))},$t)}function ao(t,e,r){var n=new ln(t);kr(()=>{var o=e()??null;n.ensure(o,o&&(l=>r(l,o)))},$t)}const hi=()=>performance.now(),lr={tick:t=>requestAnimationFrame(t),now:()=>hi(),tasks:new Set};function Vs(){const t=lr.now();lr.tasks.forEach(e=>{e.c(t)||(lr.tasks.delete(e),e.f())}),lr.tasks.size!==0&&lr.tick(Vs)}function gi(t){let e;return lr.tasks.size===0&&lr.tick(Vs),{promise:new Promise(r=>{lr.tasks.add(e={c:t,f:r})}),abort(){lr.tasks.delete(e)}}}function Cn(t,e){Yr(()=>{t.dispatchEvent(new CustomEvent(e))})}function mi(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Us(t){const e={},r=t.split(";");for(const n of r){const[o,l]=n.split(":");if(!o||l===void 0)break;const a=mi(o.trim());e[a]=l.trim()}return e}const pi=t=>t;function Hs(t,e,r,n){var o=(t&ba)!==0,l=(t&wa)!==0,a=o&&l,i=(t&_a)!==0,c=a?"both":o?"in":"out",u,f=e.inert,d=e.style.overflow,v,h;function m(){return Yr(()=>u??=r()(e,n?.()??{},{direction:c}))}var p={is_global:i,in(){if(e.inert=f,!o){h?.abort(),h?.reset?.();return}l||v?.abort(),v=io(e,m(),h,1,()=>{Cn(e,"introend"),v?.abort(),v=u=void 0,e.style.overflow=d})},out(_){if(!l){_?.(),u=void 0;return}e.inert=!0,h=io(e,m(),v,0,()=>{Cn(e,"outroend"),_?.()})},stop:()=>{v?.abort(),h?.abort()}},g=Ne;if((g.nodes.t??=[]).push(p),o&&oo){var b=i;if(!b){for(var C=g.parent;C&&(C.f&$t)!==0;)for(;(C=C.parent)&&(C.f&Ht)===0;);b=!C||(C.f&_n)!==0}b&&Qn(()=>{Kt(()=>p.in())})}}function io(t,e,r,n,o){var l=n===1;if(Dr(e)){var a,i=!1;return Bt(()=>{if(!i){var g=e({direction:l?"in":"out"});a=io(t,g,r,n,o)}}),{abort:()=>{i=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r?.deactivate(),!e?.duration&&!e?.delay)return Cn(t,l?"introstart":"outrostart"),o(),{abort:yt,deactivate:yt,reset:yt,t:()=>n};const{delay:c=0,css:u,tick:f,easing:d=pi}=e;var v=[];if(l&&r===void 0&&(f&&f(0,1),u)){var h=Us(u(0,1));v.push(h,h)}var m=()=>1-n,p=t.animate(v,{duration:c,fill:"forwards"});return p.onfinish=()=>{p.cancel(),Cn(t,l?"introstart":"outrostart");var g=r?.t()??1-n;r?.abort();var b=n-g,C=e.duration*Math.abs(b),_=[];if(C>0){var w=!1;if(u)for(var L=Math.ceil(C/16.666666666666668),N=0;N<=L;N+=1){var P=g+b*d(N/L),R=Us(u(P,1-P));_.push(R),w||=R.overflow==="hidden"}w&&(t.style.overflow="hidden"),m=()=>{var B=p.currentTime;return g+b*d(B/C)},f&&gi(()=>{if(p.playState!=="running")return!1;var B=m();return f(B,1-B),!0})}p=t.animate(_,{duration:C,fill:"forwards"}),p.onfinish=()=>{m=()=>n,f?.(n,1-n),o()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=yt)},deactivate:()=>{o=yt},reset:()=>{n===0&&f?.(1,0)},t:()=>m()}}function Ws(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=Ws(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function bi(){for(var t,e,r=0,n="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=Ws(t))&&(n&&(n+=" "),n+=e);return n}function wi(t){return typeof t=="object"?bi(t):t??""}const Ys=[...`
\r\f \v\uFEFF`];function _i(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var o in r)if(r[o])n=n?n+" "+o:o;else if(n.length)for(var l=o.length,a=0;(a=n.indexOf(o,a))>=0;){var i=a+l;(a===0||Ys.includes(n[a-1]))&&(i===n.length||Ys.includes(n[i]))?n=(a===0?"":n.substring(0,a))+n.substring(i+1):a=i}}return n===""?null:n}function yi(t,e){return t==null?null:String(t)}function ot(t,e,r,n,o,l){var a=t.__className;if(a!==r||a===void 0){var i=_i(r,n,l);i==null?t.removeAttribute("class"):e?t.className=i:t.setAttribute("class",i),t.__className=r}else if(l&&o!==l)for(var c in l){var u=!!l[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return l}function Tt(t,e,r,n){var o=t.__style;if(o!==e){var l=yi(e);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}return n}const xi=Symbol("is custom element"),ki=Symbol("is html");function E(t,e,r,n){var o=Ei(t);o[e]!==(o[e]=r)&&(e==="loading"&&(t[Zl]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Si(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Ei(t){return t.__attributes??={[xi]:t.nodeName.includes("-"),[ki]:t.namespaceURI===xa}}var Gs=new Map;function Si(t){var e=t.getAttribute("is")||t.nodeName,r=Gs.get(e);if(r)return r;Gs.set(e,r=[]);for(var n,o=t,l=Element.prototype;l!==o;){n=Io(o);for(var a in n)n[a].set&&r.push(a);o=bn(o)}return r}function Ks(t,e,r=e){var n=new WeakSet;Ha(t,"input",async o=>{var l=o?t.defaultValue:t.value;if(l=co(t)?uo(l):l,r(l),Re!==null&&n.add(Re),await Qa(),l!==(l=e())){var a=t.selectionStart,i=t.selectionEnd,c=t.value.length;if(t.value=l??"",i!==null){var u=t.value.length;a===i&&i===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=a,t.selectionEnd=Math.min(i,u))}}}),Kt(e)==null&&t.value&&(r(co(t)?uo(t.value):t.value),Re!==null&&n.add(Re)),$n(()=>{var o=e();if(t===document.activeElement){var l=Hn??Re;if(n.has(l))return}co(t)&&o===uo(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function co(t){var e=t.type;return e==="number"||e==="range"}function uo(t){return t===""?null:+t}class fo{#e=new WeakMap;#n;#t;static entries=new WeakMap;constructor(e){this.#t=e}observe(e,r){var n=this.#e.get(e)||new Set;return n.add(r),this.#e.set(e,n),this.#o().observe(e,this.#t),()=>{var o=this.#e.get(e);o.delete(r),o.size===0&&(this.#e.delete(e),this.#n.unobserve(e))}}#o(){return this.#n??(this.#n=new ResizeObserver(e=>{for(var r of e){fo.entries.set(r.target,r);for(var n of this.#e.get(r.target)||[])n(r)}}))}}var Ai=new fo({box:"border-box"});function Xs(t,e,r){var n=Ai.observe(t,()=>r(t[e]));Qn(()=>(Kt(()=>r(t[e])),n))}function Js(t,e){return t===e||t?.[cr]===e}function jr(t={},e,r,n){return Qn(()=>{var o,l;return $n(()=>{o=l,l=[],Kt(()=>{t!==r(...l)&&(e(t,...l),o&&Js(r(...o),t)&&e(null,...o))})}),()=>{Bt(()=>{l&&Js(r(...l),t)&&e(null,...l)})}}),t}function Ci(t=!1){const e=Ge,r=e.l.u;if(!r)return;let n=()=>$a(e.s);if(t){let o=0,l={};const a=en(()=>{let i=!1;const c=e.s;for(const u in c)c[u]!==l[u]&&(l[u]=c[u],i=!0);return i&&o++,o});n=()=>s(a)}r.b.length&&Ya(()=>{Zs(e,n),Dn(r.b)}),fe(()=>{const o=Kt(()=>r.m.map(Xl));return()=>{for(const l of o)typeof l=="function"&&l()}}),r.a.length&&fe(()=>{Zs(e,n),Dn(r.a)})}function Zs(t,e){if(t.l.s)for(const r of t.l.s)s(r);e()}let Nn=!1;function Ni(t){var e=Nn;try{return Nn=!1,[t(),Nn]}finally{Nn=e}}const ji={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Xr(t,e,r){return new Proxy({props:t,exclude:e},ji)}const Pi={get(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if(Dr(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(t,e,r){let n=t.props.length;for(;n--;){let o=t.props[n];Dr(o)&&(o=o());const l=ar(o,e);if(l&&l.set)return l.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if(Dr(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const o=ar(n,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===cr||e===Yo)return!1;for(let r of t.props)if(Dr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Dr(r)&&(r=r()),!!r){for(const n in r)e.includes(n)||e.push(n);for(const n of Object.getOwnPropertySymbols(r))e.includes(n)||e.push(n)}return e}};function Jr(...t){return new Proxy({props:t},Pi)}function M(t,e,r,n){var o=!Vr||(r&ha)!==0,l=(r&ma)!==0,a=(r&pa)!==0,i=n,c=!0,u=()=>(c&&(c=!1,i=a?Kt(n):n),i),f;if(l){var d=cr in t||Yo in t;f=ar(t,e)?.set??(d&&e in t?_=>t[e]=_:void 0)}var v,h=!1;l?[v,h]=Ni(()=>t[e]):v=t[e],v===void 0&&n!==void 0&&(v=u(),f&&(o&&oa(),f(v)));var m;if(o?m=()=>{var _=t[e];return _===void 0?u():(c=!0,_)}:m=()=>{var _=t[e];return _!==void 0&&(i=void 0),_===void 0?i:_},o&&(r&ga)===0)return m;if(f){var p=t.$$legacy;return(function(_,w){return arguments.length>0?((!o||!w||p||h)&&f(w?m():_),_):m()})}var g=!1,b=((r&va)!==0?en:Yn)(()=>(g=!1,m()));l&&s(b);var C=Ne;return(function(_,w){if(arguments.length>0){const L=w?s(b):o&&l?Ce(_):_;return T(b,L),g=!0,i!==void 0&&(i=L),_}return fr&&g||(C.f&Qt)!==0?b.v:s(b)})}function Ti(t){Ge===null&&Go(),Vr&&Ge.l!==null?Li(Ge).m.push(t):fe(()=>{const e=Kt(t);if(typeof e=="function")return e})}function Li(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Mi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Mi),Aa();function Ri(t){return fn(t,.5)}function Fi(t){return fn(t,.75)-fn(t,.25)}function fn(t,e){if(Ae(t))return fn(t.v,e);if(Ae(e))return fn(t,e.v);const r=t.length;if(Array.isArray(e)||(e=[e]),!_o(e[0])||Tr(e)<0||vr(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function n(a,i){const c=(r-1)*i+1,u=Math.floor(c),f=Math.ceil(c);return a[u-1]+(a[f-1]-a[u-1])*(c-Math.floor(c))}const o=Eo(t),l=e.map(a=>n(o,a));return e.length==1?l[0]:et(l)}function Qs(t,e){Ae(t)&&Qs(t.v,e);const r=ho(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const n=(r[1]-r[0])/e;return de.seq(r[0],r[1],n)}function $s(t){if(Ae(t))return $s(t.v);const e=new de.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new de(e)}function vo(t,e){if(Ae(t))return vo(t.v,e);e===void 0&&(e=.1);const r=ho(t),n=(r[1]-r[0])*e;return[r[0]-n,r[1]+n]}function ho(t){if(Ae(t))return ho(t.v);let e=t[0],r=t[0];for(let n=1;n<t.length;n++)t[n]<e&&(e=t[n]),t[n]>r&&(r=t[n]);return[e,r]}function jn(t,e){return Ae(t)?jn(t.v,e):Math.sqrt(Pn(t,e))}function Pn(t,e){if(e===void 0&&(e=!1),Ae(t))return Pn(t.v);const r=Pr(t);let n=0;for(let o=0;o<t.length;o++){const l=t[o]-r;n=n+l*l}return n/(e?t.length:t.length-1)}function Pr(t){return Ae(t)?Pr(t.v):el(t)/t.length}function el(t){if(Ae(t))return el(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function tl(t){if(Ae(t))return tl(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Tr(t){return Ae(t)||qt(t)?t.v[go(t.v)-1]:t[go(t)-1]}function go(t){if(Ae(t)||qt(t))return go(t.v);let e=1,r=t[0];for(let n=2;n<=t.length;n++)t[n-1]<r&&(e=n,r=t[n-1]);return e}function vr(t){return Ae(t)||qt(t)?t.v[mo(t.v)-1]:t[mo(t)-1]}function mo(t){if(Ae(t)||qt(t))return mo(t.v);let e=1,r=t[0];for(let n=2;n<=t.length;n++)t[n-1]>r&&(e=n,r=t[n-1]);return e}const po=30,zi=1e-7,Bi=1e-7,Ii=100;function Di(t,e,r,n,o){o===void 0&&(o=Ii);let l=r,a=n,i=(a-l)/o;for(let c=0;c<o;c++){let u,f;for(let h=0;h<o;h++){u=l+h*i,f=l+(h+1)*i;const m=e(u),p=e(f);if(m<=t&&p>=t)break}const d=(u+f)/2,v=e(d);if(Math.abs(v-t)<zi||(l=u,a=f,i=(a-l)/o,i/a<Bi))return d}return(l+a)/2}function rl(t,e=0,r=1){let n=de.zeros(t);for(let o=0;o<t;o++)n.v[o]=e+Math.random()*(r-e);return n}function nl(t,e=0,r=1){let n=de.zeros(t);for(let o=0;o<t;o++){const l=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random();n.v[o]=l*Math.sin(a)*r+e}return n}function bo(t,e=0,r=1){if(Ae(t))return t.apply(o=>bo(o,e,r));const n=1/(Math.sqrt(2)*r);return .5*(1+qi((t-e)*n))}function wo(t,e=0,r=1){if(Ae(t))return t.apply(J=>wo(J,e,r));if(e!==0||r!==1)return wo(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const n=.425,o=5,l=.180625,a=1.6,i=3.3871327179,c=5.0434271938*10,u=1.5929113202*100,f=5.910937472*10,d=1.7895169469*10,v=7.8757757664*10,h=6.71875636*10,m=1.4234372777,p=2.75681539,g=1.3067284816,b=1.7023821103*.1,C=7.370016425*.1,_=1.2021132975*.1,w=6.657905115,L=3.081226386,N=4.2868294337*.1,P=1.7337203997*.01,R=2.4197894225*.1,B=1.2258202635*.01,j=t-.5;let y;if(Math.abs(j)<=n)return y=l-j*j,j*(((f*y+u)*y+c)*y+i)/(((h*y+v)*y+d)*y+1);y=j<0?t:1-t,y=Math.sqrt(-Math.log(y));let U;return y<=o?(y=y-a,U=(((b*y+g)*y+p)*y+m)/((_*y+C)*y+1)):(y=y-o,U=((P*y+N)*y+L+w)/((B*y+R)*y+1)),j<0?-U:U}function ol(t,e){if(Array.isArray(t))return ol(et(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),n=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(n);function l(c){if(c===0)return 0;if(e===0||e>100&&c>e*2||e>50&&c>e*3||e>10&&c>e*5||e>5&&c>e*8||c>e*30)return 1;const u=c/e,f=Math.pow(u,1/6)-.5*Math.pow(u,1/3)+1/3*Math.pow(u,1/2);return bo(f,r,o)}function a(c){return c===0?0:e===0||e>100&&c>e*2||e>50&&c>e*3||e>10&&c>e*5||e>5&&c>e*8||c>e*30?1:Oi(c/2,e/2)/dn(e/2)}const i=e>po?l:a;return Ae(t)?t.apply(i):i(t)}function Zr(t,e){if(Array.isArray(t))return Zr(et(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),n=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(n);function l(c){if(c===0)return 0;if(c===1)return Inf;if(e===0)return 0;const u=wo(c,r,o),f=Math.pow(Math.sqrt(36*u*u-30*u+13)/4+(3*u-3/2)/2+1/8,1/3);return Math.pow(f-3/(4*f)+.5,6)*e}function a(c){return c===0?0:c===1?Inf:e===0?0:Di(c,f=>ol(f,e),0,po*10)}const i=e>po?l:a;return Ae(t)?t.apply(i):i(t)}function dn(t){if(Ae(t))return t.apply(dn);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+dn(1-t));t=t-1;let r=.9999999999998099;for(let o=0;o<e.length;o++)r=r+e[o]/(t+o+1);const n=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(n,t+.5)*Math.exp(-n)*r}function Oi(t,e){let o=0;for(let l=0;l<1e4;l++){const a=Math.pow(t,l)/dn(e+l+1);if(isNaN(a)||a<1e-18)break;o+=a}return Math.pow(t,e)*dn(e)*Math.exp(-t)*o}function qi(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,n=-.284496736,o=1.421413741,l=-1.453152027,a=1.061405429,c=1/(1+.3275911*t),u=1-((((a*c+l)*c+o)*c+n)*c+r)*c*Math.exp(-t*t);return e*u}function sl(t){const e=t.nrows,r=t.ncols;if(e<r){const a=sl(t.subset([],Te.seq(1,e)));return{Q:a.Q,R:Ui(a.Q,t)}}let n=ce.eye(e),o=t.t();for(let a=1;a<=r;a++)for(let i=e;i>=a+1;i--){const c=o.v.subarray((i-2)*r,i*r),u=n.v.subarray((i-2)*e,i*e),f=c.slice(),d=u.slice(),[v,h,m]=Vi(f[a-1],f[a-1+r]);for(let p=0;p<r;p++)c[p]=f[p]*v+f[p+r]*h,c[p+r]=f[p]*-h+f[p+r]*v,u[p]=d[p]*v+d[p+e]*h,u[p+e]=d[p]*-h+d[p+e]*v;for(let p=r;p<e;p++)u[p]=d[p]*v+d[p+e]*h,u[p+e]=d[p]*-h+d[p+e]*v}const l=Te.seq(1,r);return{Q:e===r?n:n.subset([],l),R:e===r?o.t():o.subset([],l).t()}}function Vi(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const l=e/t,a=Math.sqrt(1+l*l),i=1/a;return[i,l*i,t*a]}const r=t/e,n=Math.sqrt(1+r*r),o=1/n;return[r*o,o,e*n]}function _o(t){return typeof t=="number"}function Ui(t,e){if(e===void 0&&(e=t),!Xt(t)||!Xt(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,n=t.ncols,o=e.nrows,l=e.ncols,a=n,i=l,c=r,u=new Float64Array(a*i);for(let f=0;f<i;f++){const d=e.v.subarray(f*o,(f+1)*o),v=u.subarray(f*a,(f+1)*a);for(let h=0;h<a;h++){const m=t.v.subarray(h*r,(h+1)*r);let p=0;for(let g=0;g<c;g++)p+=m[g]*d[g];v[h]=p}}return new ce(u,a,i)}function ll(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new de(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new ce(t.v,e,r)}function Xt(t){return t&&t.constructor===ce}function Hi(t,e,r){return new ce(new Float64Array(t),e,r)}class ce{static valuesConstructor=Float64Array;static TOLERANCE=Math.pow(10,-9);constructor(e,r,n){if(!ArrayBuffer.isView(e)||e.constructor!==ce.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||n===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*n)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=n}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return ce.diagm(this.diag().apply(c=>Math.abs(c)>Number.EPSILON?1/c:x));const n=ce.eye(e),o=ce.eye(e),l=this.t(),a=l.v[(e-1)*e+(e-1)],i=e-1;for(let c=0;c<e;c++)o.v[i*e+c]=n.v[i*e+c]/a;for(let c=e-2;c>=0;c--){let u=n.getcolumn(c+1);const f=l.getcolref(c+1);for(let d=c+1;d<e;d++){const v=o.getcolumn(d+1);u=u.subtract(v.mult(f[d]))}o.v.set(u.divide(f[c]).v,c*e)}return o.t()}if(this.islowertriangular()){const n=this.diag();if(tl(n)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=ce.eye(e),l=ce.eye(e),a=this.t(),i=0,c=a.v[0];for(let u=0;u<e;u++)l.v[i*e+u]=o.v[i*e+u]/c;for(let u=1;u<e;u++){let f=o.getcolumn(u+1);const d=a.getcolref(u+1);for(let v=0;v<u;v++){const h=l.getcolumn(v+1);f=f.subtract(h.mult(d[v]))}l.v.set(f.divide(d[u]).v,u*e)}return l.t()}const r=sl(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>ce.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>ce.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let n=0;n<e;n++)r[n]=this.getcolref(n+1)[n];return new de(r)}t(){const e=this.nrows,r=this.ncols,n=new ce.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const l=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let a=0;a<this.nrows;a++)n[a*r+o]=l[a]}return new ce(n,r,e)}for(let o=0;o<this.nrows;o++){const l=n.subarray(o*r,(o+1)*r);for(let a=0;a<this.ncols;a++)l[a]=this.v[a*this.nrows+o]}return new ce(n,r,e)}dot(e){if(Ae(e))return new ce(ko(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Xt(e))return new ce(ko(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,n){if(Xt(e))return new ce(yo(this.v,e.v,r),this.nrows,this.ncols);if(_o(e))return new ce(xo(this.v,e,r),this.nrows,this.ncols);if(!Ae(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(n===void 0&&(n=e.length===this.ncols?2:1),n===2&&e.length===this.ncols){const o=new ce.valuesConstructor(this.v.length);for(let l=0;l<this.ncols;l++)o.set(xo(this.getcolref(l+1),e.v[l],r),l*this.nrows);return new ce(o,this.nrows,this.ncols)}if(n===1&&e.length===this.nrows){const o=new ce.valuesConstructor(this.v.length);for(let l=0;l<this.ncols;l++)o.set(yo(this.getcolref(l+1),e.v,r),l*this.nrows);return new ce(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,n)=>r+n)}subtract(e){return this.op(e,(r,n)=>r-n)}mult(e){return this.op(e,(r,n)=>r*n)}divide(e){return this.op(e,(r,n)=>r/n)}apply(e,r){if(r===void 0&&(r=2),r==2){const n=this.ncols,o=new ce.valuesConstructor(n);for(let l=0;l<n;l++)o[l]=e(this.getcolref(l+1));return new de(o)}if(r==1)return this.t().apply(e,2);if(r==0){const n=this.v.length,o=new ce.valuesConstructor(n);for(let l=0;l<n;l++)o[l]=e(this.v[l]);return new ce(o,this.nrows,this.ncols)}}replace(e,r,n){typeof r=="number"&&(r=[r]),r.length===0&&(r=Te.seq(1,this.nrows)),qt(r)||(r=Vt(r)),typeof n=="number"&&(n=[n]),n.length===0&&(n=Te.seq(1,this.ncols)),qt(n)||(n=Vt(n));const o=r.length,l=n.length;if(Tr(r)<1||vr(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Tr(n)<1||vr(n)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==l)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let a=0;a<n.length;a++){const i=e.getcolref(a+1),c=(n.v[a]-1)*this.nrows;for(let u=0;u<r.length;u++){const f=r.v[u];this.v[c+f-1]=i[u]}}return this}copy(){return new ce(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new de.valuesConstructor(this.ncols);for(let n=0;n<this.ncols;n++)r[n]=this.getcolref(n+1)[e-1];return new de(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new de(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Vt([e])),typeof r=="number"&&(r=Vt([r])),Array.isArray(e)&&(e=e.length===0?null:Vt(e)),Array.isArray(r)&&(r=r.length===0?null:Vt(r)),e!==null&&!qt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!qt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Tr(e)<1||vr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Tr(r)<1||vr(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const i=r.length,c=this.nrows,u=new ce.valuesConstructor(c*i);for(let f=0;f<r.length;f++)u.set(this.v.slice((r.v[f]-1)*this.nrows,r.v[f]*this.nrows),f*this.nrows);return new ce(u,c,i)}if(r==null)return this.t().subset(r,e).t();const n=e.length,o=r.length,l=new ce.valuesConstructor(n*o);let a=new ce.valuesConstructor(n);for(let i=0;i<o;i++){const c=this.v.subarray((r.v[i]-1)*this.nrows,r.v[i]*this.nrows);for(let u=0;u<n;u++)a[u]=c[e.v[u]-1];l.set(a,i*n)}return new ce(l,n,o)}toString(e){function r(a,i){return" ".repeat(i-a.length)+a}e===void 0&&(e=2),this.ncols;const n=Math.round(Math.abs(Math.log10(vr(this.v))))+e+3;let o="";const l=this.t();for(let a=1;a<=l.ncols;a++)o+=Array.from(l.getcolref(a)).map(i=>r(i.toFixed(e),n)).join(" ")+`
`;return o}toCSV(e,r,n,o){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const l=o!=null&&o.length>0,a=n!=null&&n.length>0;if(l&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(a&&n.length!==this.ncols+(l?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const i=this.t();let c=a?n.join(e)+`
`:"";for(let u=1;u<=i.ncols;u++)c=c+(l?o[u-1]+e:"")+i.getcolref(u).join(e)+`
`;return c=c.replace(/\./g,r),c}static randn(e,r,n,o){return ll(nl(e*r,n,o),e,r)}static rand(e,r,n,o){return ll(rl(e*r,n,o),e,r)}static eye(e,r){r===void 0&&(r=e);const n=new Float64Array(e*r);for(let o=0;o<Math.min(e,r);o++)n[o*e+o]=1;return new ce(n,e,r)}static diagm(e){if(!Ae(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,n=new Float64Array(r*r);for(let o=0;o<r;o++)n[o*r+o]=e.v[o];return new ce(n,r,r)}static zeros(e,r){return r===void 0&&(r=e),new ce(new Float64Array(e*r),e,r)}static ones(e,r){return ce.fill(1,e,r)}static fill(e,r,n){n===void 0&&(n=r);const o=new Float64Array(r*n);for(let l=0;l<o.length;l++)o[l]=e;return new ce(o,r,n)}static outer(e,r,n){if(Array.isArray(e)&&(e=et(e)),Array.isArray(r)&&(r=et(r)),!Ae(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ae(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=ce.zeros(e.length,r.length);for(let l=0;l<r.length;l++){const a=r.v[l],i=o.getcolref(l+1);for(let c=0;c<e.length;c++)i[c]=n(e.v[c],a)}return o}static parseCSV(e,r,n,o){function l(g){return g.some(b=>Number.isNaN(Number.parseFloat(b.trim())))}r===void 0&&(r=",");const a=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let i=e.split(/\n/),c=[],u=0;const f=i[0].split(r);(n||n===void 0&&l(f))&&(c=f,u=1),i=i.filter(g=>g.trim().length>1);let d=[],v=0;o&&(v=1);const h=i.length-u,m=f.length-v;if(h<1)throw Error("Data file should contain at least 1 row with values.");if(m<1)throw Error("Data file should contain at least 1 column with values.");const p=ce.zeros(m,h);for(let g=u;g<h+u;g++){const b=i[g].split(r);let C;if(o?(d[g-u]=b[0],C=b.slice(1).map(_=>Number.parseFloat(_.trim().replace(a,".")))):C=b.map(_=>Number.parseFloat(_.trim().replace(a,"."))),C.some(_=>Number.isNaN(_)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(C.length!=m)throw Error("Wrong number of values in row #"+g);p.v.set(new Float64Array(C),(g-u)*m)}return{values:p.t(),header:c,labels:d,sep:r,dec:a}}}function Ae(t){return t&&t.constructor===de}function et(t){return new de(new Float64Array(t))}class de{static valuesConstructor=Float64Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new Te.valuesConstructor(this.length);let n=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[n]=o+1,n=n+1);return new Te(r.subarray(0,n))}filter(e){const r=new de.valuesConstructor(this.length);let n=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[n]=this.v[o],n=n+1);return new de(r.subarray(0,n))}shuffle(){return new de(ul(this.v))}sort(e){return new de(Eo(this.v,e))}sortind(e){return new Te(fl(this.v,e))}rep(e){return il(this,e)}repeach(e){return cl(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=Te.seq(1,this.length)),qt(r)||(r=Vt(r));const n=r.length;if(Tr(r)<1||vr(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==n)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<r.length;o++){const l=r.v[o];this.v[l-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=Vt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Te.bool2ind(e):Vt(e)),!qt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,n=de.zeros(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");n.v[o]=this.v[e.v[o]-1]}return n}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new de(this.v.slice(e-1,r))}copy(){return new de(this.v.slice())}dot(e){return e===void 0&&(e=this),ko(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Ae(e))return new de(yo(this.v,e.v,r));if(_o(e))return new de(xo(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,n)=>r+n)}subtract(e){return this.op(e,(r,n)=>r-n)}mult(e){return this.op(e,(r,n)=>r*n)}divide(e){return this.op(e,(r,n)=>r/n)}apply(e){const r=this.v.length,n=de.zeros(r);for(let o=0;o<r;o++)n.v[o]=e(this.v[o]);return n}static c(...e){if(e.length===1)return e[0];const r=e.reduce((l,a)=>l+(typeof a=="number"?1:a.length),0),n=new de.valuesConstructor(r);let o=0;for(const l of e)typeof l=="number"?(n[o]=l,o+=1):(n.set(Ae(l)?l.v:new de.valuesConstructor(l),o),o+=typeof l=="number"?1:l.length);return new de(n)}static seq(e,r,n){return al(e,r,n,de)}static randn(e,r,n){return nl(e,r,n)}static rand(e,r,n){return rl(e,r,n)}static zeros(e){return new de(new de.valuesConstructor(e))}static ones(e){return de.fill(1,e)}static fill(e,r){const n=new de.valuesConstructor(r);for(let o=0;o<n.length;o++)n[o]=e;return new de(n)}}function qt(t){return t.constructor===Te}function Vt(t){return new Te(new Int32Array(t))}class Te{static valuesConstructor=Int32Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new Te.valuesConstructor(this.length);let n=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[n]=o+1,n=n+1);return new Te(r.subarray(0,n))}filter(e){const r=new Te.valuesConstructor(this.length);let n=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[n]=this.v[o],n=n+1);return new Te(r.subarray(0,n))}shuffle(){return new Te(ul(this.v))}sort(e){return new Te(Eo(this.v,e))}sortind(e){return new Te(fl(this.v,e))}rep(e){return il(this,e)}repeach(e){return cl(this,e)}subset(e){if(typeof e=="number"&&(e=Vt([e])),Array.isArray(e)&&(e=Vt(e)),!qt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,n=new Te.valuesConstructor(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");n[o]=this.v[e.v[o]-1]}return new Te(n)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new Te(this.v.slice(e-1,r))}static seq(e,r,n){return al(e,r,n,Te)}static ones(e){return Te.fill(1,e)}static fill(e,r){const n=new Te.valuesConstructor(r);for(let o=0;o<n.length;o++)n[o]=e;return new Te(n)}static bool2ind(e){let r=0;const n=new Te.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(n[r]=o+1,r=r+1);return new Te(n.subarray(0,r))}}function al(t,e,r,n){r===void 0&&(r=t<=e?1:-1);const o=Math.floor((e-t)/r)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const l=new n.valuesConstructor(o);for(let a=0;a<o;a++)l[a]=t+a*r;return new n(l)}function il(t,e){const r=t.length*e,n=new t.constructor.valuesConstructor(r);for(let o=1;o<=e;o++)for(let l=0;l<t.length;l++)n[(o-1)*t.length+l]=t.v[l];return new t.constructor(n)}function cl(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,n=new t.constructor.valuesConstructor(r);for(let o=0;o<t.length;o++)for(let l=0;l<e;l++)n[o*e+l]=t.v[o];return new t.constructor(n)}function yo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const n=new t.constructor(t.length);for(let o=0;o<t.length;o++)n[o]=r(t[o],e[o]);return n}function xo(t,e,r){const n=new t.constructor(t.length);for(let o=0;o<t.length;o++)n[o]=r(t[o],e);return n}function ko(t,e,r,n,o,l){if(n!==o)throw Error("_dot: matrix dimensions do not much.");const a=r,i=l,c=n,u=new t.constructor(a*i);for(let f=0;f<i;f++){const d=e.subarray(f*o,(f+1)*o),v=u.subarray(f*a,(f+1)*a);for(let h=0;h<c;h++){const m=d[h],p=t.subarray(h*r,(h+1)*r);for(let g=0;g<a;g++)v[g]+=p[g]*m}}return u}function ul(t){let e=t.slice(),r=e.length,n,o;for(;r;)o=Math.floor(Math.random()*r--),n=e[r],e[r]=e[o],e[o]=n;return e}function Eo(t,e=!1){return e?t.slice().sort((r,n)=>n-r):t.slice().sort((r,n)=>r-n)}function fl(t,e=!1){const r=Te.seq(1,t.length).v;return e?r.sort((n,o)=>t[o-1]-t[n-1]):r.sort((n,o)=>t[n-1]-t[o-1])}function Wi(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const hr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:Wi,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function Yi(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const n=hr[t.ml[r]].title;e=e+"<li>"+n+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function dl(t,e,r){const n=hr.findIndex(d=>d.id==="trim");let o=0,l=t.ncols-e,a=0;for(let d=0;d<r.ml.length;d++){if(r.ml[d]!==n){a+=r.mpl_new[d];continue}o=Math.max(o,r.mp_new[a]),l=Math.min(l,r.mp_new[a+1]),a+=r.mpl_new[d]}const i=t.nrows,u=l-o+e,f=ce.zeros(i,u);return a=0,e>0&&(f.v.set(t.v.slice(0,e*i),a),a+=e*i),f.v.set(t.v.slice((e+o)*i,(e+l)*i),a),[o,l,f]}function vl(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=hr.findIndex(i=>i.id==="trim");if(e.ml.findIndex(i=>i===r)<0)return t;const[o,l,a]=dl(t.values,t.nresp,e);return t.values=a,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+o,t.nresp+l)):t.varlabels.slice(o,l),t.varindices=t.nresp>0?gr(0,t.nresp-1).concat(gr(0,l-o-1)):gr(0,l-o-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+o,t.nresp+l)):t.varvalues.slice(o,l),t}function hl(t,e,r,n,o=!0,l=[]){if(!Xt(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(n)||n.length<1)throw new Error("prep_fit: list with methods is not correct.");let a,i;o?(a=e.ncols,i=e.nrows-r):(a=e.nrows,i=e.ncols-r);const c=n.length;if(c<1)throw new Error("prep_fit: no preprocessing methods are provided.");const u=new Int32Array(c),f=new Int32Array(c),d=new Int32Array(c);let v=0,h=0;for(let U=0;U<n.length;U++){const J=n[U].id,K=n[U].params,O=hr.findIndex(je=>je.id==J);if(O<0)throw new Error("prep_fit: wrong method name: "+J+".");const re=hr[O];if(K.length!==re.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+J+".");u[U]=O,f[U]=re.mpl,d[U]=re.get_mpl_new(i,K),v=v+f[U],h=h+d[U]}const m=new Float64Array(v);let p=0;for(let U=0;U<n.length;U++){const J=n[U].id,K=n[U].params;hr.findIndex(O=>O.id==J),m.set(K,p),p=p+f[U]}const g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const b=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,b/u.BYTES_PER_ELEMENT);const C=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAP32.set(f,C/f.BYTES_PER_ELEMENT);const _=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,_/d.BYTES_PER_ELEMENT);const w=t._malloc(m.length*m.BYTES_PER_ELEMENT);t.HEAPF64.set(m,w/m.BYTES_PER_ELEMENT);const L=t._malloc(h*m.BYTES_PER_ELEMENT),N=new Int32Array(l),P=N.length,R=t._malloc(P*N.BYTES_PER_ELEMENT);if(t.HEAP32.set(N,R/N.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[g,a,i,r,c,b,C,w,_,L,o,R,P])!==1)throw new Error("prep_fit: unexpected error.");const j=t.HEAPF64.slice(L/m.BYTES_PER_ELEMENT,L/m.BYTES_PER_ELEMENT+h);return t._free(g),t._free(b),t._free(w),t._free(C),t._free(R),t._free(L),t._free(_),{ml:u,mpl:f,mp:m,mpl_new:d,mp_new:j,npred:i,class:["prepmodel"]}}function So(t,e,r,n,o=!0,l=!1){if(!Xt(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(n)==0||!n.ml)return e;let a,i;if(o?(a=e.ncols,i=e.nrows-r):(a=e.nrows,i=e.ncols-r),i!==n.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+n.npred+" got "+i+").");const c=n.ml,u=n.mpl_new,f=n.mp_new,d=u.reduce((L,N)=>L+N,0);if(!c||c.length<1||!u||u.length!==c.length||f.length!==d)throw new Error("prep_apply: wrong structure of the model object.");const v=c.length,h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const m=t._malloc(c.length*c.BYTES_PER_ELEMENT);t.HEAP32.set(c,m/c.BYTES_PER_ELEMENT);const p=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,p/u.BYTES_PER_ELEMENT);const g=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAPF64.set(f,g/f.BYTES_PER_ELEMENT);const b=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[h,a,i,r,v,m,p,g,b,o])!==1)throw new Error("prep_apply: unexpected error.");const _=t.HEAPF64.slice(b/e.v.BYTES_PER_ELEMENT,b/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(h),t._free(m),t._free(p),t._free(g),t._free(b);const w=new ce(_,e.nrows,e.ncols);if(l){const[L,N,P]=dl(w,r,n);return P}return w}function Gi(t,e,r,n){e===void 0&&(e=!0),r===void 0&&(r=!1),n===void 0&&(n=!1);function o(c,u,f,d){if(typeof u=="boolean")return u?c.apply(f,2):et([d]).rep(c.ncols);if(!Ae(u))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(u.length!==c.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return u}const l=o(t,e,Pr,0),a=o(t,r,jn,1),i=ce.zeros(t.nrows,t.ncols);for(let c=1;c<=t.ncols;c++){const u=t.getcolref(c),f=i.getcolref(c),d=l.v[c-1],v=1/a.v[c-1];for(let h=0;h<t.nrows;h++)f[h]=(u[h]-d)*v}return n?[i,l,a]:i}function gl(t,e,r){return t<e?["regular","in"]:t>r?["outlier","out"]:["extreme","out"]}function Ki(t,e,r,n,o,l,a,i){if(!i||i.length===0)return[0,0];let c=0,u=0;for(let f of i){const d=t[f],[v,h]=gl(d,e,r);l[v]+=1,a[h]+=1,n[f]=v,o[f]=h,c=c+(h==="in"),u=u+(h!=="in")}return[c,u]}function ml(t,e,r,n,o,l,a,i,c){if(!c||c.length===0)return[0,0,0,0,0,0,0,0,0,0];let u=0,f=0;for(let J of c){const K=t[J],[O,re]=gl(K,r,n);i[re]+=1,o[J]="alien",a.alien+=1,l[J]=re,u=u+(re!=="in"),f=f+(re==="in")}const d=c.slice();d.sort((J,K)=>t[J]-t[K]);let v=d.length;const h=d.map(J=>t[J]);let m=-1,p=0,g=0,b=0,C=0;for(;m<0;)p>0&&(o[d[v-1]]="external",a.alien=a.alien-1,a.external=a.external+1,v=v-1,d.pop(),h.pop()),g=Pr(h),b=Pn(h),C=b/(g*g),m=4-2*e*C,p=p+1;const _=(2+Math.sqrt(m))/C,w=_-e,L=g/_,N=r/L,P=1-2*(e+w)*(e+3*w)/(3*(e+2*w)**2),R=(P-1)*(1-3*P),B=(e+2*w)/(e+w)**2,j=1+P*B*(P-1-.5*(2-P)*R*B),y=P*Math.sqrt(2*B)*(1+.5*R*B),U=bo((Math.pow(N/(e+w),P)-j)/y);return[u,f,U,w,L,P,j,y,e,g]}class Ao{#e;get outcomes(){return s(this.#e)}set outcomes(e){T(this.#e,e)}constructor(e,r,n,o,l,a,i){this.d=e,this.ind=r,this.objlabels=n,this.objindices=o,this.classes=l,this.classNames=a,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,this.#e=A(()=>i.oCrit&&i.eCrit?this.getOutcomes(i):null)}getOutcomes(e){const r=this.d.apply(B=>B/e.f0*e.Nf).v,n=new Array(this.nrows),o=new Array(this.nrows),l={regular:0,extreme:0,outlier:0,alien:0,external:0},a={in:0,out:0},[i,c]=Ki(r,e.eCrit,e.oCrit,o,n,l,a,this.ind.members),[u,f,d,v,h,m,p,g,b,C]=ml(r,e.Nf,e.eCrit,e.oCrit,o,n,l,a,this.ind.strangers);this.nUnknown>0&&ml(r,e.Nf,e.eCrit,e.oCrit,o,n,l,a,this.ind.unknown);const _=i>0?i/(i+c):0,w=u>0?u/(u+f):0,L=1-d,N=Math.sqrt(_*w),P=i>0&&u>0?(i+u)/(i+u+f+c):0,R={sensitivity:_,specificity:w,selectivity:L,efficiency:N,accuracy:P};return{Nf:e.Nf,f:r,decs:n,rols:o,decsNum:a,rolsNum:l,TP:i,FN:c,TN:u,FP:f,beta:d,s:v,f0:h,hz:m,Mz:p,Sz:g,k:b,m:C,stat:R}}toJSON(){return null}static fromJSON(e){return new Ao(...e)}}class Lr{#e;get alpha(){return s(this.#e)}set alpha(e){T(this.#e,e,!0)}#n;get gamma(){return s(this.#n)}set gamma(e){T(this.#n,e,!0)}#t;get limType(){return s(this.#t)}set limType(e){T(this.#t,e,!0)}#o;get Nf(){return s(this.#o)}set Nf(e){T(this.#o,e)}#a;get f0(){return s(this.#a)}set f0(e){T(this.#a,e)}#s;get eConfLim(){return s(this.#s)}set eConfLim(e){T(this.#s,e)}#r;get oConfLim(){return s(this.#r)}set oConfLim(e){T(this.#r,e)}#l;get eCrit(){return s(this.#l)}set eCrit(e){T(this.#l,e)}#i;get oCrit(){return s(this.#i)}set oCrit(e){T(this.#i,e)}constructor(e,r,n,o,l,a,i,c,u,f,d,v,h,m,p,g="nimca-model"){this.mX=r,this.sX=n,this.nrows=o,this.ncols=l,this.className=e,this.Nfc=a,this.Nfr=i,this.f0c=c,this.f0r=u,this.hash=f,this.class=["nimcamodel"],this.fileName=g,this.center=m,this.scale=p,this.#e=X(Ce(d)),this.#n=X(Ce(v)),this.#t=X(Ce(h)),this.#o=A(()=>this.limType==="classic"?this.Nfc:this.Nfr),this.#a=A(()=>this.limType==="classic"?this.f0c:this.f0r),this.#s=A(()=>1-Number.parseFloat(this.alpha)/100),this.#r=A(()=>Math.pow(1-this.gamma/100,1/o)),this.#l=A(()=>Zr(this.eConfLim,this.Nf)),this.#i=A(()=>Zr(this.oConfLim,this.Nf))}predict(e){if(!e.values||!Xt(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=Lr.getDistance(e.values,this.mX,this.sX),n={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let o=0;o<e.classes.length;o++)e.classes[o]===this.className?n.members.push(o):n.strangers.push(o);else n.unknown=gr(0,e.values.nrows-1);return new Ao(r,n,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r,n,o={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let l=e.values;const a=e.classNames[0];if(!Xt(l))throw new Error("nimca.fit: X must be a matrix.");const i=r?l.apply(Pr,2):de.zeros(l.ncols),c=n?l.apply(jn,2):de.ones(l.ncols),u=Lr.getDistance(l,i,c),f=Pr(u),d=Pn(u);let v=Math.round(2*f*f/d);v<1&&(v=1),v>250&&(v=250);const h=Ri(u),m=Fi(u),p=m/h;let g;p>2.685592117?g=1:p<.194565995?g=100:g=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/p),1.185785)));const b=.5*g*(h/Zr(.5,g)+m/(Zr(.75,g)-Zr(.25,g)));return new Lr(a,i,c,l.nrows,l.ncols,v,g,f,b,Xi(),o.alpha,o.gamma,o.limType,r,n)}static fromJSON(e){const{__type:r,mX:n,sX:o,nrows:l,ncols:a,className:i,Nfc:c,Nfr:u,f0c:f,f0r:d,hash:v,alpha:h,gamma:m,limType:p,fileName:g,center:b,scale:C}=e;return new Lr(i,n,o,l,a,c,u,f,d,v,h,m,p,b,C,g)}static getDistance(e,r,n){const o=Gi(e,r,n),l=o.nrows,a=o.ncols,i=de.zeros(l);for(let c=0;c<a;c++){const u=o.getcolref(c+1);for(let f=0;f<l;f++)i.v[f]+=u[f]**2}return i}}function gr(t,e,r=1){const n=Math.round((e-t+1)/r),o=Array(n);for(let l=0;l<n;l++)o[l]=t+l*r;return o}function Xi(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Ji(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function vn(t){return t.some(e=>Number.isNaN(e))}function Mr(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function pl(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Zi(t,e,r,n,o,l,a,i=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const c=e===";"?",":".";let u=pl(t);if(u.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");u=u.filter(O=>O.replaceAll(e,"").trim().length>0);const f=u[0].split(e);if(f.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let d=0,v;const h=r!=="no";(h||h===void 0&&vn(firstRow))&&(v=f,d=1);const m=u.length-d;if(m<1)throw new Error("Data file should contain at least 1 row with values.");i===-1&&(i=m);let p,g,b,C=Array(m);n?(p=h?Mr(v[0]):"",b=Array(m),g=1):(p="",b=[],g=0);let _,w=[],L;o?(_=h?Mr(v[g]):"",L=Array(m),g=g+1):(_="",L=[]);const N=f.length-g;if(N<1)throw new Error("Data file should contain at least 1 column with values.");const P=ce.zeros(N,m);for(let O=d;O<m+d;O++){const re=O-d;C[re]=re;let je=u[O].split(e);if(n&&(b[re]=je[0],je.shift()),o){const ue=je[0];L[re]=ue,je.shift(),(w.length===0||w.indexOf(ue)<0)&&w.push(ue)}const we=c==="."?je.map((ue,ve)=>Number.parseFloat(ue.trim())):je.map((ue,ve)=>Number.parseFloat(ue.trim().replace(c,".")));if(we.some(ue=>Number.isNaN(ue)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(we.length!=N)throw new Error("Wrong number of values in row #"+O);P.v.set(new Float64Array(we),(O-d)*N)}if(!n||b.length!==m){b=Array(m);for(let O=0;O<m;O++)b[O]="O"+(O+1)}b=b.map(O=>Mr(O)),L=L.map(O=>Mr(O)),w=w.map(O=>Mr(O));let R,B=Array(N),j=Array(N);if(v&&v.length===N+g){R=v.map(O=>Mr(O)).slice(g);for(let O=0;O<N;O++)B[O]=O>=i?O-i:O,j[O]=O>=i?O-i+1:O+1}else{R=Array(N);for(let O=0;O<N;O++)B[O]=O>=i?O-i:O,R[O]=O>=i?"V"+(O-i+1):"Y"+(O+1),j[O]=O>=i?O-i+1:O+1}let y;if(r==="values"){if(y=c==="."?R.map((O,re)=>re<i?re:Number.parseFloat(O.trim())):R.map((O,re)=>re<i?re:Number.parseFloat(O.trim().replace(c,"."))),y.some(O=>Number.isNaN(O)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else y=j;Array.isArray(y)||(y=[]),l||(l=""),a||(a=""),l=y.length>0&&l.length>0?l:"Variables",a=y.length>0&&a.length>0?a:"";const U=l+(a.length>0?", "+a:""),J=y[1]<y[0];return{values:P.t(),nresp:i,header:r,hasLabels:n,hasClassNames:o,labelsVarname:p,classLabelsVarname:_,objlabels:b,objindices:C,varlabels:R,varvalues:y,varindices:B,varrev:J,classes:L,classNames:w,sep:e,dec:c,varvaluesName:l,varvaluesUnits:a,varAxisTitle:U}}function Qi(t){if(vn(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let n=2;n<e;n++){let o=[];for(let u=1;u<t.length;u++)o.push(t[u][n]);const l=t[0][n],a=Pr(o),i=jn(o),c=Math.abs((l-a)/i);r.push(c)}return r.every(n=>n>5)}function $i(t){const r=t[0].split(","),n=t[1].split(","),o=r.length,l=n.length,a=";",i=t[0].split(a),c=t[1].split(a),u=i.length,f=c.length;let d,v;if(o>1&&l>1&&o===l&&o>u)v=",",d=o;else if(u>1&&f>1&&u===f)v=a,d=u;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[v,v===","?".":",",d]}function ec(t,e=0){const r=pl(t),n=r.length;if(n<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,l,a]=$i(r),i=Math.min(a,5),c=Math.min(n,5);let u=r[0].split(o).length,f=r.slice(0,c).map(B=>B.split(o).slice(0,i));f=f.map(B=>B.map(j=>Mr(j)));const d=f.map(B=>Ji(B.slice(),l));for(let B=1;B<c;B++)if(vn(d[B].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const v=Qi(d);let h=0;const m=v?1:0,p=m+1,g=f[m][0],b=f[p][0],C=d[m][0],_=d[p][0],w=d[m][1],L=d[p][1];let N=!1,P=!1;if(Number.isNaN(C)&&Number.isNaN(_)&&g!==b?(N=!0,h=h+1):Number.isNaN(w)&&Number.isNaN(L)&&g!==b&&(N=!0,P=!0,h=h+2),!P){const B=N?1:0,j=d[m][B],y=d[p][B];P=vn([j,y]),h=h+P}let R="no";if(v){h>0?f[0].slice(h+e):f[e];const B=h>0?d[0].slice(h+e):d[e];R=vn(B)?"labels":"values"}return[o,N,P,R,u]}function tc(t){const e=t.values.t(),r=t.sep,n=t.dec;let o=null;t.header!=="no"&&(o=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),o&&t.hasClassNames&&(o=[t.classLabelsVarname,...o]),o&&t.hasLabels&&(o=[t.labelsVarname,...o]);const l=t.classes&&t.classes.length===e.ncols,a=t.objlabels&&t.objlabels.length===e.ncols;let i=o?o.join(r):"";for(let c=0;c<e.ncols;c++){let u=e.getcolref(c+1).join(r);n!=="."&&(u=u.replace(".",n)),l&&(u=t.classes[c]+t.sep+u),a&&(u=t.objlabels[c]+t.sep+u),i=i+`
`+u}return i=i+`
`,n!=="."&&(i=i.replace(/\./g,n)),i}function rc(t,e){const r=tc(t),n=new Blob([r],{type:"text/csv"}),o=window.URL.createObjectURL(n),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${e}.csv`),l.click()}function nc(t,e){const r=new Blob([JSON.stringify(t,Tn)],{type:"application/json"}),n=window.URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download",e+".json"),o.click()}function Tn(t,e){return Xt(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ae(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof Lr?e.asJSON():e}function bl(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Hi(e.v,e.nrows,e.ncols);if(e.__type==="vector")return et(e.v);if(e.__type==="NIMCA")return Lr.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Co(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0"),a=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${n}${o}${l}${a}`}function wl(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function Ln(t,e,r){let n="";for(let o=0;o<e;o++){const l=t.getUint8(r++);if(l===0)break;n+=String.fromCharCode(l)}return n}function oc(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],n=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],o=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let l=0;const a=t.getUint8(l);l+=1;const i=t.getUint8(l);if(l+=1,i===77)throw new Error("SPC file has old format which is not supported.");const c=i===75,u=t.getUint8(l);l+=1;const f=t.getInt8(l);l+=1;const d=t.getUint32(l,c);l+=4;const v=t.getFloat64(l,c);l+=8;const h=t.getFloat64(l,c);l+=8;const m=t.getUint32(l,c);l+=4;const p=t.getUint8(l);l+=1;const g=t.getUint8(l);l+=1;const b=t.getUint8(l);l+=1;const C=t.getUint8(l);l+=1;const _=t.getUint32(l,c);l+=4;const w=Ln(t,9,l);l+=9;const L=Ln(t,9,l);l+=9;const N=t.getUint16(l,c);l+=2;const P=Array.from({length:8},()=>{const Oe=t.getFloat32(l,c);return l+=4,Oe}),R=Ln(t,130,l);l+=130;const B=Ln(t,30,l);l+=30;const j=t.getUint32(l,c);l+=4;const[y,U,J,K,O,re,je,we]=wl(a),ue=p===255?r[31]:r[p],ve=p===255?e[31]:e[p],Ee=g<=26?n[g]:g>=128&&g<=131?o[g]:"Unknown";return{ftflgsv:a,ftflgs:{TSPREC:y,TCGRAM:U,TMULTI:J,TRANDM:K,TORDRD:O,TALABS:re,TXYXYS:je,TXVALS:we},fexper:u,fexp:f,fnpts:d,ffirst:v,flast:h,fnsub:m,fxtype:p,fytype:g,fztype:b,fpost:C,fdate:_,fres:w,fsource:L,fpeakpt:N,fspare:P,fcmnt:R,fcatxt:B,flogoff:j,xaxisName:ue,xaxisUnit:ve,yaxisName:Ee}}function sc(t,e){const r=wl(t.getUint8(e));e+=1;const n=t.getInt8(e);e+=1;const o=t.getUint16(e,!0);e+=2;const l=t.getFloat32(e,!0);e+=4;const a=t.getFloat32(e,!0);e+=4;const i=t.getFloat32(e,!0);e+=4;const c=t.getInt32(e,!0);e+=4;const u=t.getInt32(e,!0);e+=4;const f=t.getFloat32(e,!0);return e+=4,{flags:r,exp:n,index:o,time:l,next:a,noise:i,nPoints:c,nScans:u,wAxis:f}}async function _l(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),n=await t.arrayBuffer(),o=new DataView(n);let l=0;const a=oc(o);l+=512;const i=a.fnpts;if(i<2)throw new Error(`Error reading SPC file (${t.name}).`);let c=new Array(i);if(a.ftflgs.TXVALS)for(let d=0;d<i;d++){const v=o.getFloat32(l,!0);l=l+4,c[d]=v}else{(a.flast-a.ffirst)/(i-1);for(let d=0;d<i;d++)c[d]=a.ffirst+d*a.flast}const u=new Float64Array(i*a.fnsub);for(let d=0;d<a.fnsub;d++){sc(o,l),l=l+32;for(let v=0;v<i;v++){const h=o.getFloat32(l,!0);l=l+4,u[d*i+v]=h}}const f=[];return a.fnsub>1?gr(1,a.fnsub).forEach(v=>{f.push(r+"_"+v)}):f.push(r),{hdr:a,xvalues:c,yvalues:u,objlabels:f}}async function lc(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let n=[],o=[];const l=await _l(t[0]),a=l.xvalues.length;if(r.push(l.yvalues),n=n.concat(l.objlabels),o.push(l.hdr.fnsub),e>1)for(let m=1;m<e;m++){const p=await _l(t[m]);if(p.xvalues.length!==a)throw new Error("Number of spectral values in SPC files is different.");r.push(p.yvalues),n=n.concat(p.objlabels),o.push(p.hdr.fnsub)}const i=o.reduce((m,p)=>m+p,0),c=new Float64Array(i*a);let u=0;for(let m=0;m<r.length;m++)c.set(r[m].slice(),u),u+=o[m]*a;const f=new ce(c,a,i),d=gr(0,a-1),v=gr(0,i-1),h=l.xvalues.map(m=>m.toFixed(1));return{values:f.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:n,objindices:v,varlabels:h,varvalues:l.xvalues,varindices:d,varev:l.xvalues[1]<l.xvalues[0],sep:",",dec:".",varvaluesName:l.hdr.xaxisName,varvaluesUnits:l.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var ac=V('<button tabindex="0" class="button svelte-1to1iow"> </button>');function mr(t,e){let r=M(e,"text",3,"button");var n=ac();n.__click=function(...l){e.onclick?.apply(this,l)};var o=I(n);Z(()=>Fe(o,r())),S(t,n)}Qe(["click"]);var ic=V('<button tabindex="0"></button>');function hn(t,e){M(e,"disable",3,!1);var r=ic();r.__click=function(...n){e.onclick?.apply(this,n)},Z(()=>{E(r,"title",e.title),E(r,"aria-label",e.title),E(r,"alt",e.title),ot(r,1,`button ${e.className??""}`,"svelte-qbt64")}),S(t,r)}Qe(["click"]);function Mn(t,e){let r=M(e,"title",3,"Reset");hn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function cc(t,e){let r=M(e,"title",3,"Add");hn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function uc(t,e){let r=M(e,"title",3,"Settings");hn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function fc(t,e){let r=M(e,"title",3,"Move up");hn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function dc(t,e){let r=M(e,"title",3,"Move down");hn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}var vc=V('<span class="label svelte-1bhp5bp"> </span>'),hc=V("<div><!> <!></div>");function le(t,e){let r=M(e,"label",3,null),n=M(e,"name",3,""),o=M(e,"status",3,""),l=M(e,"colors",3,""),a=M(e,"labelWidth",3,12);var i=hc(),c=I(i);{var u=d=>{var v=vc(),h=I(v);Z(()=>{Tt(v,`flex-basis:${a()??""}ch;`),Fe(h,r())}),S(d,v)};q(c,d=>{r()&&d(u)})}var f=z(c,2);Kr(f,()=>e.children??yt),Z(()=>{ot(i,1,`control-element ${n()??""} ${o()??""}`,"svelte-1bhp5bp"),Tt(i,l())}),S(t,i)}var gc=V('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function Rn(t,e){me(e,!0);let r=M(e,"min",7,0),n=M(e,"max",3,100),o=M(e,"value",31,()=>Ce(r())),l=M(e,"decNum",3,1),a=M(e,"step",19,()=>+((n()-r())/100).toFixed(4)),i=M(e,"onchange",3,null);fe(()=>{o()<r()&&(o(r()),i()&&i()(o())),o()>n()&&(o(n()),i()&&i()(o())),r()>n()&&r(n())});let c=X(void 0),u=X(void 0),f=X(!1);const d=j=>{const y=r()+j*(n()-r());return+(Math.round(y/a())*a()).toFixed(4)},v=j=>{const y=s(c).getBoundingClientRect(),U=s(u).getBoundingClientRect(),J=y.x,K=U.x+U.width;return(j.clientX-J)/(K-J)},h=j=>{const y=v(j);y<0||y>1||T(f,y*100>s(_)-5&&y*100<s(_)+5,!0)},m=j=>{T(f,!1)},p=j=>{T(f,!1);const y=v(j);y<0||y>1||(o(d(y)),i()&&i()(o()))},g=j=>{let y=o()+a()*j.deltaY*.5;y<r()&&(y=r()),y>n()&&(y=n()),o(+(Math.round(y/a())*a()).toFixed(4)),j.preventDefault(),i()&&i()(o())},b=j=>{if(!s(f))return;const y=v(j);y<0||y>1||(o(d(y)),i()&&i()(o()))},C=j=>{if(j.key==="ArrowLeft"){o(o()-a()<r()?r():o()-a()),i()&&i()(o());return}if(j.key==="ArrowRight"){o(o()+a()>n()?n():o()+a()),i()&&i()(o());return}},_=A(()=>r()===n()?100:(o()-r())/(n()-r())*100);var w=gc();w.__keydown=C,w.__mousemove=b,w.__mousedown=h,w.__mouseup=p,w.__touchmove=b,w.__touchstart=h,w.__touchend=p;var L=I(w);let N;var P=I(L);let R;var B=I(P);jr(L,j=>T(c,j),()=>s(c)),jr(w,j=>T(u,j),()=>s(u)),Z(j=>{E(w,"aria-valuenow",o()),E(w,"aria-valuemin",r()),E(w,"aria-valuemax",n()),N=ot(L,1,"range-slider svelte-7wycr",null,N,{"range-slider_right":s(_)<50}),Tt(L,`width:${s(_)??""}%`),R=ot(P,1,"range-value svelte-7wycr",null,R,{"range-value_right":s(_)<50}),Fe(B,j)},[()=>o().toFixed(l())]),Cr("mousewheel",w,g),Cr("mouseleave",w,m),Cr("touchcancel",w,m),S(t,w),pe()}Qe(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var mc=V('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function gn(t,e){me(e,!0);let r=M(e,"min",3,0),n=M(e,"max",3,10),o=M(e,"value",31,()=>Ce(r())),l=M(e,"step",3,1);o()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(r())),o()>n()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(n())),r()>n()&&console.error("The min and max values must be distinct.");let a=X(void 0),i=X(void 0),c=X(!1);const u=A(()=>r()===n()?0:(o()-r())/(n()-r()+l())),f=A(()=>l()/(n()-r()+l())),d=A(()=>n()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${s(f)*100}%, var(--bg-color-light2, #e8e8e8) ${s(f)*100}%, var(--bg-color-light2, #e8e8e8) ${200*s(f)}%)`:"background: #f0f0f0"),v=j=>{if(j<0||j>1)return o();let y=o();return Math.round(s(f)/j),j<s(u)&&s(u)>0&&(y=o()-l()*Math.ceil((s(u)-j)/s(f))),j>s(u)+s(f)&&s(u)+s(f)<1&&(y=o()+l()*Math.ceil((j-(s(u)+s(f)))/s(f))),y<r()&&(y=r()),y>n()&&(y=n()),y},h=j=>{const y=s(i).getBoundingClientRect(),U=y.x,J=y.x+y.width;return(j.clientX-U)/(J-U)},m=j=>{const y=h(j);y<0||y>1||T(c,y>s(u)&&y<s(f)+s(u),!0)},p=j=>{T(c,!1)},g=j=>{T(c,!1);const y=h(j);if(y<0||y>1)return;const U=v(y);o()!==U&&o(U)},b=j=>{let y=o()+Math.round(j.deltaY*.5)*l();y<r()&&(y=r()),y>n()&&(y=n()),o(y),j.preventDefault()},C=j=>{if(!s(c))return;const y=h(j);if(y<0||y>1)return;const U=v(y);U!=o()&&o(U)},_=j=>{if(j.key==="ArrowLeft"){o(o()-l()<r()?r():o()-l());return}if(j.key==="ArrowRight"){o(o()+l()>n()?n():o()+l());return}};var w=mc();w.__keydown=_,w.__mousemove=C,w.__mousedown=m,w.__mouseup=g,w.__touchmove=C,w.__touchstart=m,w.__touchend=g;var L=I(w);let N;var P=I(L);let R;var B=I(P);jr(L,j=>T(a,j),()=>s(a)),jr(w,j=>T(i,j),()=>s(i)),Z(j=>{E(w,"aria-valuenow",o()),E(w,"aria-valuemin",r()),E(w,"aria-valuemax",n()),Tt(w,s(d)),N=ot(L,1,"range-slider svelte-1lbks0y",null,N,{"range-slider_left":s(f)<.1&&s(u)<.5,"range-slider_right":s(f)<.1&&s(u)>=.5}),Tt(L,`width: max(2px, ${s(f)*100}%);left:${s(u)*100}%;`),R=ot(P,1,"range-value svelte-1lbks0y",null,R,{"range-value_right":s(f)<.1&&s(u)>.5,"range-value_left":s(f)<.1&&s(u)<=.5}),Fe(B,j)},[()=>o().toFixed(0)]),Cr("mousewheel",w,b),Cr("mouseleave",w,p),Cr("touchcancel",w,p),S(t,w),pe()}Qe(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var pc=V('<button tabindex="-1"><!></button>'),bc=V('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function Lt(t,e){me(e,!0);let r=M(e,"value",31,()=>Ce(e.options[0])),n=M(e,"className",3,"");const o=c=>{if(c.key==="ArrowLeft"){const u=e.options.findIndex(f=>f===r());u>0&&r(e.options[u-1]);return}if(c.key==="ArrowRight"){const u=e.options.findIndex(f=>f===r());u<e.options.length-1&&r(e.options[u+1]);return}};var l=bc(),a=W(l);a.__keydown=o,it(a,20,()=>e.options,c=>c,(c,u)=>{var f=pc();f.__click=()=>r(u);let d;var v=I(f);vt(v,()=>u),Z(h=>d=ot(f,1,`option option_${h??""}`,"svelte-bifhtc",d,{selected:u==r()}),[()=>u.toString().replace(".","_")]),S(c,f)});var i=z(a,2);Z(()=>ot(a,1,`selector ${n()??""}`,"svelte-bifhtc")),Ks(i,r),S(t,l),pe()}Qe(["keydown","click"]);function No(t,e){me(e,!0);let r=M(e,"options",19,()=>["no","yes"]),n=M(e,"value",15,!1),o=X(!0);const l=A(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());fe(()=>T(o,n()?r()[1]:r()[0],!0)),fe(()=>n(s(o)===r()[1]));var a=ke(),i=W(a);{var c=u=>{Lt(u,{get options(){return s(l)},get value(){return s(o)},set value(f){T(o,f,!0)}})};q(i,u=>{s(l)&&u(c)})}S(t,a),pe()}var wc=V('<input type="file" multiple class="svelte-xoa0sf"/>'),_c=V('<input type="file" class="svelte-xoa0sf"/>'),yc=V('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function yl(t,e){me(e,!0);let r=M(e,"file",15),n=M(e,"message",3,"Select CSV file with dataset"),o=M(e,"acceptType",3,".csv"),l=M(e,"multiple",3,!1),a=X(void 0);function i(_){s(a)&&s(a).files.length>0?r(s(a).files.length===1?s(a).files[0]:s(a).files):r(null)}function c(_){(_.type==="click"||_.type==="keydown"&&(_.code==="Space"||_.code==="Enter"))&&s(a).click()}function u(_){s(a).value=null,r(null)}var f=yc(),d=W(f);d.__keydown=c,d.__click=c;let v;var h=I(d),m=z(h);{var p=_=>{var w=wc();w.__change=i,jr(w,L=>T(a,L),()=>s(a)),Z(()=>E(w,"accept",o())),S(_,w)},g=_=>{var w=_c();w.__change=i,jr(w,L=>T(a,L),()=>s(a)),Z(()=>E(w,"accept",o())),S(_,w)};q(m,_=>{l()?_(p):_(g,!1)})}var b=z(d,2);{var C=_=>{Mn(_,{onclick:u})};q(b,_=>{r()&&_(C)})}Z(()=>{v=ot(d,1,"file-selector svelte-xoa0sf",null,v,{selected:r()}),Fe(h,`${(r()?r().length>1?`Selected ${r().length} files`:r().name:n())??""} `)}),S(t,f),pe()}Qe(["keydown","click","change"]);var xc=V('<div class="error-message svelte-11e14eb"> </div>'),kc=V('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function xl(t,e){me(e,!0);let r=M(e,"value",15,""),n=M(e,"className",3,""),o=M(e,"placeholder",3,""),l=M(e,"maxLength",3,25),a=M(e,"validator",3,null),i=X("");function c(){a()&&T(i,a()(r()),!0)}var u=kc();let f;var d=I(u);d.__input=c;var v=z(d,2);{var h=m=>{var p=xc(),g=I(p);Z(()=>Fe(g,s(i))),S(m,p)};q(v,m=>{s(i)&&s(i).length>0&&m(h)})}Z(()=>{f=ot(u,1,`textinput ${n()??""}`,"svelte-11e14eb",f,{error:s(i)&&s(i).length>0}),E(d,"placeholder",o()),E(d,"maxlength",l())}),Ks(d,r),S(t,u),pe()}Qe(["input"]);var Ec=V('<div class="spinner svelte-wlgijz"></div>');function Sc(t){var e=Ec();S(t,e)}Qe(["keydown","click"]),Qe(["keydown","click"]);function jo(t,e){let r=0,n=0;t.nresp>0&&(r=new de(t.values.v.slice(0,t.nresp*t.values.nrows)),n=t.nresp);const o=new ce(t.values.v.slice(n*t.values.nrows),t.values.nrows,t.values.ncols-n).t(),l=o.ncols<e?1:Math.round(o.ncols/e),a=Te.seq(1,o.ncols,l),i=o.subset(null,a),c=r?r.subset(a):null,u=t.classes?t.classes.filter((f,d)=>a.v.includes(d)):null;return{classNames:t.classNames,classes:u,resp:c,values:i,varvalues:t.varvalues.filter((f,d)=>d>=n),varindices:t.varindices.filter((f,d)=>d>=n),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function Po(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function kl(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}function El(t,e,r){const n=t.fileName+"-preprocessed";rc(t,n)}function Ac(t){nc(t,"preprocessing-model")}var Cc=V('<span style="font-weight:bold"> </span><br/>',1),Nc=V('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),jc=V('<span class="file-size svelte-1uxd0r7"> </span>'),Pc=V('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Tc(t,e){me(e,!0);let r=M(e,"title",3,"");var n=ke(),o=W(n);{var l=a=>{le(a,{children:(i,c)=>{var u=Pc(),f=W(u),d=I(f);{var v=_=>{var w=Cc(),L=W(w),N=I(L);Z(()=>Fe(N,r())),S(_,w)};q(d,_=>{r()&&r()!==""&&_(v)})}var h=z(d,4),m=I(h),p=z(h,5);{var g=_=>{var w=Nc(),L=W(w),N=I(L),P=z(L,4),R=I(P);Z(()=>{Fe(N,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),Fe(R,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),S(_,w)},b=_=>{var w=jc(),L=I(w);Z(()=>Fe(L,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),S(_,w)};q(p,_=>{e.dataset.nresp&&e.dataset.nresp>0?_(g):_(b,!1)})}var C=z(f,2);Mn(C,{get onclick(){return e.reset}}),Z(()=>{E(h,"title",e.dataset.fileName),Fe(m,e.dataset.fileName)}),S(i,u)},$$slots:{default:!0}})};q(o,a=>{e.dataset&&a(l)})}S(t,n),pe()}var Lc=V("<!> <!>",1),Mc=V("<!> <!> <!> <!> <!> <!>",1),Rc=V("<!> <!>",1),Fc=V("<p> </p>"),zc=V("<!> <p>Loading data...</p>",1),Bc=V("<p> </p>"),Ic=V("<!> <!> <!> <!>",1);function Sl(t,e){me(e,!0);let r=M(e,"WASM",3,null),n=M(e,"model",3,null),o=M(e,"rawdata",15,null),l=M(e,"prepdata",15,null),a=M(e,"title",3,"Raw data"),i=M(e,"left",3,null),c=M(e,"right",3,null);M(e,"multiple",3,!0);const u=[",",";"],f=["no","labels","values"];let d=X(void 0),v=X(""),h=X(""),m=X("data"),p=X(","),g=X("no"),b=X(!1),C=X(!1),_=X(null),w=X("neutral"),L=X("");function N(se){T(w,"error"),T(L,se,!0),o(null),console.error(se)}function P(){T(w,"neural"),T(L,"")}function R(){T(w,"success"),T(L,"")}function B(){T(d,""),o(null),l(null),T(v,""),T(h,""),T(L,""),P()}function j(){if(!(!o()||!n())){if(o().values.ncols-o().nresp!==n().npred){N(`Number of variables in the dataset (${o().values.ncols}) does not match the expected number (${n().npred}).`);return}T(_,r()().then(se=>{T(w,"applying");const te=So(se,o().values,o().nresp,n(),!1,!1),qe=kl(Qo(o()),te);l(vl(qe,n())),R()}).catch(se=>{l(null),N(se)}),!0)}}function y(se){if(!se||se.size<10)return;const qe=se.slice(0,1e5),Ve=new FileReader;Ve.onload=()=>{const Ue=Ve.result;!Ue||Ue.length<0||((We=>{var xe=Jl(We,4);T(p,xe[0],!0),T(b,xe[1],!0),T(C,xe[2],!0),T(g,xe[3],!0)})(ec(Ue)),s(C)&&T(m,"groups"))},Ve.onerror=function(Ue){csvString=null,N(Ue)},Ve.readAsText(qe)}function U(se){try{const te=Zi(se,s(p),s(g),s(b),s(m)==="groups",s(v),s(h),s(m)==="response"?1:0);if(te.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(te.classNames.length>te.values.nrows/2)throw new Error("Dataset has too many unique "+className.toLowerCase()+" labels ("+te.classNames.length+"), check your CSV file.");const qe=te.values.ncols-te.nresp;if(n()&&qe!==n().npred)throw new Error("Number of predictors in dataset ("+qe+") does not match what model expects ("+n().npred+")");te.fileName=s(d).name.replace(/\.[^/.]+$/,""),o(te),R()}catch(te){N(te)}}function J(se){const te=new FileReader;te.onload=()=>{U(te.result)},te.readAsText(s(d))}async function K(se){try{const te=s(d)instanceof FileList?s(d):[s(d)];o(await lc(te)),R()}catch(te){N("Failed to read SPC file: "+te)}}fe(()=>{if(s(d)!==void 0){if(s(d)===null||s(d)===""){B();return}if(Array.isArray(s(d))){if(s(d).filter(se=>se.slice(-4)===".spc").length!==s(d).length){N("Multiple file selection is allowed only for SPC files.");return}K(s(d));return}s(d)&&(s(d).type==="text/csv"||s(d).type==="application/vnd.ms-excel")?(y(s(d)),P()):K([s(d)])}}),fe(()=>{s(p)&&(T(w,"neutral"),T(L,""))}),fe(()=>{o()!==null&&n()!==null&&!l()&&s(L)===""&&j()}),fe(()=>{(o()===null||o()===0)&&T(d,"")});var O=Ic(),re=W(O);{var je=se=>{var te=Rc(),qe=W(te);an(qe,()=>s(d)===void 0,We=>{le(We,{children:(xe,ze)=>{yl(xe,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return s(d)},set file(Xe){T(d,Xe,!0)}})},$$slots:{default:!0}})});var Ve=z(qe,2);{var Ue=We=>{var xe=Mc(),ze=W(xe);le(ze,{label:"Delimiter",children:(G,ye)=>{Lt(G,{id:"sep",get options(){return u},get value(){return s(p)},set value(ge){T(p,ge,!0)}})},$$slots:{default:!0}});var Xe=z(ze,2);le(Xe,{label:"Row labels",children:(G,ye)=>{No(G,{id:"hasLabels",options:["no","yes"],get value(){return s(b)},set value(ge){T(b,ge,!0)}})},$$slots:{default:!0}});var Y=z(Xe,2);le(Y,{label:"First column",children:(G,ye)=>{Lt(G,{id:"sep",options:["data","groups","response"],get value(){return s(m)},set value(ge){T(m,ge,!0)}})},$$slots:{default:!0}});var ee=z(Y,2);le(ee,{label:"Header",children:(G,ye)=>{Lt(G,{id:"header",get options(){return f},get value(){return s(g)},set value(ge){T(g,ge,!0)}})},$$slots:{default:!0}});var H=z(ee,2);{var Q=G=>{var ye=Lc(),ge=W(ye);le(ge,{label:"Header name",children:(k,F)=>{xl(k,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return s(v)},set value(D){T(v,D,!0)}})},$$slots:{default:!0}});var Be=z(ge,2);le(Be,{label:"Header units",children:(k,F)=>{xl(k,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return s(h)},set value(D){T(h,D,!0)}})},$$slots:{default:!0}}),S(G,ye)};q(H,G=>{s(g)==="values"&&G(Q)})}var oe=z(H,2);le(oe,{label:" ",children:(G,ye)=>{mr(G,{text:"Load",onclick:J})},$$slots:{default:!0}}),S(We,xe)};q(Ve,We=>{s(d)&&!Array.isArray(s(d))&&(s(d).type==="text/csv"||s(d).type==="application/vnd.ms-excel")&&We(Ue)})}S(se,te)},we=se=>{var te=ke(),qe=W(te);{var Ve=Ue=>{var We=ke(),xe=W(We);ci(xe,()=>s(_),ze=>{le(ze,{children:(Xe,Y)=>{var ee=zc(),H=W(ee);Sc(H),S(Xe,ee)},$$slots:{default:!0}})},void 0,(ze,Xe)=>{le(ze,{status:"error",children:(Y,ee)=>{var H=Fc(),Q=I(H);Z(()=>Fe(Q,s(Xe))),S(Y,H)},$$slots:{default:!0}})}),S(Ue,We)};q(qe,Ue=>{s(_)&&Ue(Ve)})}S(se,te)};q(re,se=>{o()?se(we,!1):se(je)})}var ue=z(re,2);{var ve=se=>{Tc(se,{get dataset(){return o()},reset:B,get title(){return a()}})};q(ue,se=>{o()&&se(ve)})}var Ee=z(ue,2);{var Oe=se=>{le(se,{label:"Download",children:(te,qe)=>{mr(te,{text:"Preprocessed data",onclick:()=>El(l(),i(),c())})},$$slots:{default:!0}})};q(Ee,se=>{l()&&n()&&se(Oe)})}var he=z(Ee,2);{var _e=se=>{le(se,{status:"error",children:(te,qe)=>{var Ve=Bc(),Ue=I(Ve);Z(()=>Fe(Ue,s(L))),S(te,Ve)},$$slots:{default:!0}})};q(he,se=>{(s(w)==="error"||s(L))&&se(_e)})}S(t,O),pe()}const Dc={small:30,medium:40,large:50,xlarge:60},Oc={small:5,medium:8,large:12,xlarge:15},qc={small:6,medium:10,large:14,xlarge:18},To={small:4,medium:6,large:8,xlarge:10},Vc={small:12,medium:15,large:19,xlarge:21},Al={small:11,medium:15,large:17,xlarge:19},Fn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},Uc=["●","◼","▲","▼","⬥","＋","✳","✕"],Hc=.8,Cl=.5,Wc={small:5,medium:8,large:12,xlarge:15},Mt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Nl(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function jl(t,e){if(t!=null&&(Array.isArray(t)&&(t=et(t)),!(!Ae(t)||t.length<1)))return t.apply(r=>Ro((r-e[1])*e[0]+e[2])).v}function Rt(t,e){return jl(t,e.coords)}function Pl(t,e){return jl(t,e.objects)}function Tl(t,e){if(t!=null&&(Array.isArray(t)&&(t=et(t)),!(!Ae(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function Ll(t,e){return Tl(t,e.coords)}function Ml(t,e){return Tl(t,e.objects)}function Lo(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Rr(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Mo(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Rr(Math.abs(Tr($s(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(l=>l.toFixed(0))]:(r=Math.ceil(Rr(Math.log10(e)))-2,[r,Array.from(t).map(l=>(l/Math.pow(10,r)).toFixed(0))]);let n=Math.ceil(-Rr(Math.log10(e)));return n<=2?[0,Array.from(t).map(o=>o.toFixed(n))]:(r=n-2,n=2,Rr(Math.abs(vr(t)))<=10?[-r,Array.from(t).map(o=>(o*Math.pow(10,r)).toFixed(n))]:[-r,Array.from(t).map(o=>(o/Math.pow(10,r)).toString())])}function Fr(t,e,r){return Array.isArray(t)&&(t=et(t)),Ae(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Rl(t,e,r,n){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=r.coords,l=n.coords;let a="";for(let i=0;i<t.length;i++){const c=Ro((t.v[i]-o[1])*o[0]+o[2]),u=Ro((e.v[i]-l[1])*l[0]+l[2]);a+=c+","+u+" "}return a}function Fl(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>zr(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function zl(t,e){if(Array.isArray(t)&&(t=et(t)),!Ae(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(a=>isNaN(a)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const n=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],l=t.filter(a=>a>=n&a<=o);return l.length!==t.length?[null,"some of ticks values are outside axis limits."]:[l,""]}function Bl(t,e,r,n,o,l){o==null&&(o=!1),l===void 0&&(l=1e-4);const a=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof a!="object"||a[0]===void 0||a[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const i=Math.abs(a[1]-a[0])*l,c=a[1]-a[0]-2*i,u=Math.floor(Math.log10(c)),f=1/Math.pow(10,u-1),d=Math.round(c*f)/f;let v=Yc(d/r);o&&(Math.abs(a[1]-a[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(v<1&&(v=1),v=Math.round(v)));let h=Math.ceil((a[0]+i)/v)*v,m=Math.floor((a[1]-i)/v)*v;Math.abs(a[0]-h)<v/10&&(h=h+v),Math.abs(a[1]-m)<v/10&&(m=m-v),r=Math.ceil(Rr((m-h)/v))+1,t=de.zeros(r);for(let p=0;p<r;p++)t.v[p]=h+v*p;if(Math.abs(v)<1){const p=Math.pow(10,1+Math.round(-Math.log10(v)));t=t.apply(g=>Math.round((g+Number.EPSILON)*p)/p)}return t.filter(p=>p>=a[0]&p<=a[1])}function Yc(t,e){const r=Math.floor(Math.log10(t)),n=t/Math.pow(10,r);let o;return n<=1?o=1:n<=2?o=2:n<=5?o=5:o=10,o*Math.pow(10,r)}function Ro(t){return Math.round(t*10)/10}function Gc(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function Il(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Kc(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Xc(t){let e=-1,r=Kc();for(let n=0;n<t.length;n++)e=r[(e^t[n])&255]^e>>>8;return e^-1}function Jc(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const n=Xc(r),o=new Uint8Array(4);o[0]=n>>>24,o[1]=n>>>16,o[2]=n>>>8,o[3]=n&255;const l=new Uint8Array(4);l[0]=0,l[1]=0,l[2]=0,l[3]=9;const a=new Uint8Array(54);return a.set(t,0),a.set(l,33),a.set(r,37),a.set(o,50),a}function Zc(t,e){const r=t.split(","),n=r[0],o=r[1],l=33/3*4,a=o.substring(0,l),i=o.substring(l),c=atob(a),u=new Uint8Array(c.length);for(let v=0;v<u.length;v++)u[v]=c.charCodeAt(v);const f=Jc(u,e),d=btoa(String.fromCharCode(...f));return[n,",",d,i].join("")}function Qc(t,e,r,n,o){if(r||(r=10),n||(n=10),o||(o=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(n<1||n>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const l=r/2.54*o,a=n/2.54*o;setTimeout(()=>{const i=t.clientHeight,c=t.clientWidth;let u=Math.max(l/c,a/i),f=1;u<1&&(f=u,u=1);const d=document.createElement("canvas"),v=d.getContext("2d");d.width=c*(f<1?f:u),d.height=i*(f<1?f:u),t.setAttribute("width",c*u),t.setAttribute("height",i*u),v.fillStyle="white",v.fillRect(0,0,d.width,d.height),v.scale(u,u);const h=new XMLSerializer().serializeToString(t),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(m),g=new Image;g.onload=function(){f<0&&(g.width=g.width*f,g.height=g.height*f),v.drawImage(g,0,0,d.width,d.height);const b=d.toDataURL("image/png"),C=Zc(b,o),_=document.createElement("a");_.href=C,_.download=`${e}.png`,_.click()},g.src=p},20)}function $c(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,n=t.clientWidth;t.setAttribute("width",n+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${n} ${r}`);const o=new Blob([t.outerHTML],{type:"image/svg+xml"}),l=window.URL.createObjectURL(o),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download",`${e}.svg`),a.click()}function eu(t,e,r,n){const o=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":tu(e,r,n)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=o},500)},l=>{console.error(l),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=o},500)}).catch(l=>console.error(l))}async function tu(t,e,r){const n=t.clientHeight,o=t.clientWidth,l=Math.max(e/o,r/n),a=document.createElement("canvas"),i=a.getContext("2d");return a.width=o*l,a.height=n*l,i.scale(l,l),t.setAttribute("width",a.width),t.setAttribute("height",a.height),await new Promise((u,f)=>{const d=new XMLSerializer().serializeToString(t),v=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),h=window.URL||window.webkitURL||window,m=h.createObjectURL(v),p=new Image;p.onload=function(){i.drawImage(p,0,0,a.width,a.height),h.revokeObjectURL(m),a.toBlob(function(g){g?u(g):f(new Error("Failed to create blob"))},"image/png")},p.onerror=function(g){f(g)},p.src=m})}function Dl(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function ru(t,e,r,n,o){let l=o.error?null:o.ticks,a=o.error?null:o.tickLabels,i=0;const c=Bl(l,t,Oc[r.x],!0,o.whole),u=c.length,f=Ml([To[r.plot]],n)[0],d=de.fill(e[0],u),v=d.add(f),h=de.fill(e[1],u);if(a||(l?(i=0,a=l.v.map(R=>Rr(R).toString())):[i,a]=Mo(c.v)),!a||a.length!==c.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const m=[[c,d],[c,h]],p=[[et([t[0]]),et([e[0]])],[et([t[1]]),et([e[0]])]],g=[[c,v],[c,d]],b=(t[1]-t[0])*.01,C=[[null,null],[[t[1]-(i>9?1:0)*b],[d.v[u-1]]]],_=Lo(i),w=a.length,L=Math.abs(t[1]>t[0]?t[1]-c.v[w-1]:t[1]-c.v[0]),N=Math.abs(t[1]-t[0]),P=Math.abs(c.v[1]-c.v[0]);if(_.length>0&&L<N*.1&&L<P*.5){const R=t[1]>t[0]?w-1:0;a[R]=" "}return{grid:m,axisLine:p,tickCoords:g,tfCoords:C,ticks:l,tickLabels:a,tickFactor:i,tfLabel:_}}function nu(t,e,r,n,o){let l=o.ticks,a=o.tickLabels,i=0;const c=Bl(o.ticks,e,qc[r.y],!0,o.whole),u=c.length,f=Ml([To[r.plot]],n)[0],d=de.fill(t[0],u),v=d.add(f),h=de.fill(t[1],u);if(a||(l?(i=0,a=l.v.map(P=>Rr(P).toString())):[i,a]=Mo(c.v)),a.length!==c.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const m=[[d,c],[h,c]],p=[[et([t[0]]),et([e[0]])],[et([t[0]]),et([e[1]])]],g=[[d,c],[v,c]],b=[[[],[]],[[v.v[u-1]+(Math.abs(i)>9?3:2)*f],[e[1]]]],C=Lo(i),_=a.length,w=Math.abs(e[1]>e[0]?e[1]-c.v[_-1]:e[1]-c.v[0]),L=Math.abs(e[1]-e[0]),N=Math.abs(c.v[1]-c.v[0]);if(C.length>0&&w<L*.1&&w<N*.5){const P=e[1]>e[0]?_-1:0;a[P]=" "}return{grid:m,axisLine:p,tickCoords:g,tfCoords:b,ticks:l,tickLabels:a,tickFactor:i,tfLabel:C}}function ou(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ae(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let n,o;if(t.labels?(n=t.labels,o=0):[o,n]=Mo(e),!(n.length===e.length-1||n.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const l=n.length===r.length;return{colmap:r,breaks:e,labels:n,isCentered:l,labelsFactor:o,fontSize:t.fontSize,labelColor:t.labelColor}}function su(t,e,r,n){const o=t.colmap.length,l=e*Hc,a=l/o,i=r[1]+(e-l)*.5,c=Wc[n.y],u=r[2]+c*Cl,f=u+c*(1+Cl),d=t.isCentered?a/2:0;return{start:i,top:u,height:c,width:a,dxl:d,ltop:f}}function zn(t,e,r){if(!t||!e||!r||typeof r!="function")return;const n=t.target;if(n.tagName===e){const o=Array.prototype.indexOf.call(n.parentNode.children,n);if(o<0)return;r(o),t.stopPropagation()}}function lu(t,e){const n=document.createElement("canvas").getContext("2d");return n.font=e,n.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function au(t,e){const r="Arial",n=e/8,o=e*1.5,l=Array(t.length),a=Array(t.length);let i=0,c=0,u=0;for(let d=0;d<t.length;d++){const v=lu("  "+t[d].label+"  ",e+"px "+r);u=v>u?v:u;const h=e*t[d].labelHeight+2*n;l[d]=h,a[d]=i,i=i+h,c=c+h}const f=o+2*n+u;return[a,l,o,n,c,f]}function iu(t,e,r,n,o){const[l,a,i,c,u,f]=au(t.items,n*t.fontSize),d=t.position.includes("left")?e[0]+o:t.position.includes("right")?e[1]-f-o:(e[1]+e[0]-f)*.5,v=t.position.includes("top")?r[1]+o:t.position.includes("bottom")?r[0]-u-o:(r[1]+r[0]-u)*.5;return{lgl:d,lgt:v,lgw:f,lgh:u,ely:l,elh:a,elw:i,elp:c}}function zr(t){if(!t||t.length<1)return t;function e(l){return'<tspan font-size="0.75em" dy="-0.5em">'+l+'</tspan><tspan dy="0.4em"> </tspan>'}function r(l){return'<tspan font-size="0.75em" dy="0.5em">'+l+'</tspan><tspan dy="-0.4em"> </tspan>'}let n=0,o="";for(;n<t.length;){const l=t[n];if((l==="^"||l==="_")&&n<t.length-1){const a=l==="^";if(n++,t[n]==="("){let i=n+1;for(;i<t.length&&t[i]!==")";)i++;const c=t.slice(n+1,i);o+=a?e(c):r(c),n=i+1}else if(t[n]==="-"||t[n]==="–"){const i=t.slice(n,n+2);o+=a?e(i):r(i),n=n+2}else o+=a?e(t[n]):r(t[n]),n++}else o+=l,n++}return o}var cu=be('<line vector-effect="non-scaling-stroke"></line>'),uu=be("<g></g>");function Fo(t,e){me(e,!0);let r=M(e,"lineCoords",19,()=>[]),n=M(e,"lineColor",19,()=>Mt.DARKGRAY),o=M(e,"lineType",3,1),l=M(e,"lineWidth",3,1),a=M(e,"className",3,"");const i=Wt("axes");let c=A(()=>Rt(r()[0][0],i.tX())),u=A(()=>Rt(r()[1][0],i.tX())),f=A(()=>Rt(r()[0][1],i.tY())),d=A(()=>Rt(r()[1][1],i.tY())),v=A(()=>`stroke:${n()};stroke-width: ${l()}px;stroke-dasharray:${Fn[i.scales().plot][o()-1]}`);var h=ke(),m=W(h);{var p=g=>{var b=uu();it(b,21,()=>s(c),dt,(C,_,w)=>{var L=cu();Z(()=>{E(L,"x1",s(c)[w]),E(L,"x2",s(u)[w]),E(L,"y1",s(f)[w]),E(L,"y2",s(d)[w]),Tt(L,s(v))}),S(C,L)}),Z(()=>ot(b,0,wi(a()))),S(g,b)};q(m,g=>{s(c)&&s(f)&&s(u)&&g(p)})}S(t,h),pe()}var fu=be('<text text-anchor="middle"><!></text>'),du=be("<text><!></text>"),vu=be("<text><!></text>"),hu=be('<g class="tick-labels"><!></g>');function Ol(t,e){me(e,!0);let r=M(e,"pos",3,1),n=M(e,"las",3,1),o=A(()=>["middle","middle","start","middle","end"][r()]),l=A(()=>`fill:${e.textColor};`);const a=Wt("axes");let i=A(()=>Rt(e.tickCoords[1][0],a.tX())),c=A(()=>Rt(e.tickCoords[1][1],a.tY())),u=A(()=>Al[a.scales().plot]),f=A(()=>[0,0,s(u),0,-s(u)][r()]),d=A(()=>[0,s(u),0,-s(u),0][r()]);var v=hu(),h=I(v);{var m=g=>{var b=ke(),C=W(b);it(C,17,()=>s(i),dt,(_,w,L)=>{var N=fu();E(N,"data-id",L),E(N,"dx",0);var P=I(N);vt(P,()=>e.tickLabels[L],!0),Z(()=>{E(N,"x",s(i)[L]),E(N,"y",s(c)[L]),E(N,"dy",s(f)*1.25),E(N,"transform",`rotate(-90, ${s(i)[L]}, ${s(c)[L]})`)}),S(_,N)}),S(g,b)},p=g=>{var b=ke(),C=W(b);{var _=L=>{var N=ke(),P=W(N);it(P,17,()=>s(i),dt,(R,B,j)=>{var y=du();E(y,"data-id",j),E(y,"dy",0),E(y,"text-anchor","end");var U=I(y);vt(U,()=>e.tickLabels[j],!0),Z(()=>{E(y,"x",s(i)[j]),E(y,"y",s(c)[j]),E(y,"dx",-s(d)/2),E(y,"transform",`rotate(-90, ${s(i)[j]}, ${s(c)[j]})`)}),S(R,y)}),S(L,N)},w=L=>{var N=ke(),P=W(N);it(P,17,()=>s(i),dt,(R,B,j)=>{var y=vu();E(y,"data-id",j);var U=I(y);vt(U,()=>e.tickLabels[j],!0),Z(()=>{E(y,"x",s(i)[j]),E(y,"y",s(c)[j]),E(y,"dx",s(f)),E(y,"dy",s(d)),E(y,"text-anchor",s(o))}),S(R,y)}),S(L,N)};q(C,L=>{n()===2&&r()===1?L(_):L(w,!1)},!0)}S(g,b)};q(h,g=>{n()===2&&r()===4?g(m):g(p,!1)})}Z(()=>Tt(v,s(l))),S(t,v),pe()}const gu=(t,e=yt,r=yt)=>{const n=A(()=>e().colmap.length);var o=xu(),l=W(o);it(l,17,()=>e().colmap,dt,(f,d,v)=>{const h=A(()=>r().start+v*r().width);var m=wu(),p=W(m),g=z(p);E(g,"dy",0);var b=I(g);vt(b,()=>e().labels[v],!0),Z(()=>{E(p,"x",s(h)),E(p,"y",r().top),E(p,"width",r().width),E(p,"height",r().height),E(p,"fill",s(d)),E(g,"x",s(h)),E(g,"y",r().ltop),E(g,"dx",r().dxl),E(g,"fill",e().labelColor),E(g,"font-size",e().fontSize+"em")}),S(f,m)});var a=z(l);{var i=f=>{const d=A(()=>r().start+s(n)*r().width);var v=_u();E(v,"dx",0),E(v,"dy",0);var h=I(v);vt(h,()=>e().labels[s(n)],!0),Z(()=>{E(v,"x",s(d)),E(v,"y",r().ltop),E(v,"fill",e().labelColor),E(v,"font-size",`${e().fontSize??""}em`)}),S(f,v)};q(a,f=>{e().isCentered||f(i)})}var c=z(a);{var u=f=>{const d=A(()=>r().start+s(n)*r().width);var v=yu(),h=I(v);vt(h,()=>Lo(e().labelsFactor),!0),Z(()=>{E(v,"x",s(d)),E(v,"y",r().ltop),E(v,"fill",e().labelColor),E(v,"font-size",`${e().fontSize??""}em`)}),S(f,v)};q(c,f=>{e().labelsFactor!==0&&f(u)})}S(t,o)};var mu=be('<text fill="crimson" text-anchor="middle"> </text>'),pu=be('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),bu=be("<!><!><!><!><!>",1),wu=be('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),_u=be('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),yu=be('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),xu=be("<!><!><!>",1),ku=be("<line></line>"),Eu=be('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Su=be('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Au=be('<svg><rect height="100%" width="100%"></rect><!></svg>'),Cu=be('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Nu=be('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),ju=be('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Pu=be('<g class="plot-labels"><!><!><!></g>'),Tu=be('<g class="axis x-axis"><!></g>'),Lu=be('<g class="axis y-axis"><!></g>'),Mu=be('<rect fill="transparent" id="axes-box"></rect>'),Ru=be('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Fu=be('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),zu=be('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Bu=be('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),Iu=V('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),Du=V('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),Ou=V(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function qu(t,e){me(e,!0);const r=(ne,Le=yt,Pe=yt)=>{var ht=ke(),_t=W(ht);{var Ut=ut=>{var Ke=ke(),Me=W(Ke);{var gt=tt=>{var Je=mu(),Jt=I(Je);Z(()=>{E(Je,"x",s(xe)[0]-10),E(Je,"y",s(Ue)),E(Je,"transform",`rotate(-90, ${s(xe)[0]-10}, ${s(Ue)})`),Fe(Jt,Pe().error)}),S(tt,Je)},st=tt=>{var Je=pu(),Jt=I(Je);Z(()=>{E(Je,"x",s(We)),E(Je,"y",s(ze)[0]),Fe(Jt,Pe().error)}),S(tt,Je)};q(Me,tt=>{Pe().pos===4?tt(gt):tt(st,!1)})}S(ut,Ke)},br=ut=>{var Ke=bu(),Me=W(Ke);{var gt=ie=>{Fo(ie,{get lineCoords(){return Le().grid},get lineColor(){return Mt.MIDDLEGRAY},lineType:3})};q(Me,ie=>{Pe().showGrid&&ie(gt)})}var st=z(Me);Fo(st,{get lineCoords(){return Le().axisLine},get lineColor(){return Mt.DARKGRAY},lineType:1});var tt=z(st);Fo(tt,{get lineCoords(){return Le().tickCoords},get lineColor(){return Mt.DARKGRAY},lineType:1});var Je=z(tt);{var Jt=ie=>{Ol(ie,{get las(){return Pe().las},get pos(){return Pe().pos},get tickCoords(){return Le().tickCoords},get tickLabels(){return Le().tickLabels},get tickColor(){return Mt.DARKGRAY},get hideLast(){return Pe().hideLast}})};q(Je,ie=>{Le().tickCoords.length===2&&Le().tickLabels.length===Le().tickCoords[1][0].length&&ie(Jt)})}var mn=z(Je);{var He=ie=>{{let mt=A(()=>[Le().tfLabel]);Ol(ie,{get pos(){return Pe().pos},get tickCoords(){return Le().tfCoords},get tickLabels(){return s(mt)},get textColor(){return Mt.DARKGRAY}})}};q(mn,ie=>{Le().tickFactor!==0&&ie(He)})}S(ut,Ke)};q(_t,ut=>{Pe().error?ut(Ut):ut(br,!1)})}S(ne,ht)},n=(ne,Le=yt,Pe=yt)=>{const ht=A(()=>Pe().elw+2*Pe().elp),_t=A(()=>Pe().elp),Ut=A(()=>Pe().elh),br=A(()=>Pe().ely);var ut=Au(),Ke=I(ut),Me=z(Ke);it(Me,17,()=>Le().items,dt,(gt,st,tt)=>{var Je=Su();E(Je,"x",0);var Jt=I(Je);{var mn=Br=>{var ft=ku();Z(()=>{E(ft,"x1",s(_t)),E(ft,"x2",s(ht)-s(_t)),E(ft,"y1",s(Ut)[tt]/2),E(ft,"y2",s(Ut)[tt]/2),E(ft,"stroke",s(st).line.lineColor),E(ft,"stroke-width",s(st).line.lineWidth),E(ft,"stroke-dasharray",s(we)[s(st).line.lineType-1])}),S(Br,ft)};q(Jt,Br=>{s(st).line&&Br(mn)})}var He=z(Jt);{var ie=Br=>{var ft=Eu(),Sd=I(ft);Z(()=>{E(ft,"x",s(ht)/2),E(ft,"y",s(Ut)[tt]/2),E(ft,"fill",s(st).point.faceColor),E(ft,"stroke-width",s(st).point.lineWidth),E(ft,"stroke",s(st).point.lineColor),E(ft,"font-size",`${s(st).point.markerSize??""}em`),Fe(Sd,Uc[s(st).point.marker-1])}),S(Br,ft)};q(He,Br=>{s(st).point&&Br(ie)})}var mt=z(He),Ed=I(mt);vt(Ed,()=>s(st).label,!0),Z(()=>{E(Je,"y",s(br)[tt]),E(Je,"width",Pe().lgw),E(Je,"height",s(Ut)[tt]),E(mt,"x",s(ht)+s(_t)),E(mt,"y",s(Ut)[tt]/2),E(mt,"fill",Mt.LEGEND),E(mt,"font-size",`${Le().fontSize??""}em`)}),S(gt,Je)}),Z(()=>{E(ut,"x",Pe().lgl),E(ut,"y",Pe().lgt),E(ut,"height",Pe().lgh),E(ut,"width",Pe().lgw),E(Ke,"fill",Le().faceColor),E(Ke,"stroke",Le().lineColor),E(Ke,"stroke-width",Le().lineWidth)}),S(ne,ut)};let o=M(e,"limX",19,()=>[0,1]),l=M(e,"limY",19,()=>[0,1]),a=M(e,"margins",19,()=>[1,1.1,.55,.6]),i=M(e,"downloadLinks",3,"none"),c=M(e,"fileName",3,"plot"),u=M(e,"pngWidth",3,8),f=M(e,"pngHeight",3,8),d=M(e,"pngRes",3,300),v=M(e,"clipboardWidth",3,1200),h=M(e,"clipboardHeight",3,800),m=M(e,"onclick",3,null),p=M(e,"onmousemove",3,null),g=M(e,"onmousedown",3,null),b=M(e,"onmouseup",3,null);function C(ne,Le){if(Le&&ne.target.id=="axes-box"){const Pe=Ll([ne.offsetX-s(ve)],s(qe))[0],ht=Ll([ne.offsetY-s(Ee)],s(Ve))[0];Le(Pe,ht)}}function _(ne){ne.preventDefault(),C(ne,g())}function w(ne){ne.preventDefault(),C(ne,b())}function L(ne){ne.preventDefault(),C(ne,p())}function N(ne){ne.preventDefault(),C(ne,m())}async function P(ne){eu(ne.target,s(y),v(),h())}function R(){$c(s(y),c())}function B(){Qc(s(y),c(),u(),f(),d())}const j="plottingArea"+Math.round(Math.random()*1e4);let y=X(0),U=X(0),J=X(0);const K=A(()=>({plot:Gc(s(U),s(J)),x:Il(s(U)),y:Il(s(J))})),O=A(()=>a().map(ne=>ne*Dc[s(K).plot])),re=A(()=>Vc[s(K).plot]),je=A(()=>To[s(K).plot]),we=A(()=>Fn[s(K).plot]),ue=A(()=>s(H).show&&s(H).label!==""?s(re)*1.5:0),ve=A(()=>s(Q).show&&s(Q).label!==""?s(re)*1.5:0),Ee=A(()=>e.title&&e.title!==""?s(re)*1.5:0),Oe=A(()=>s(U)>s(ve)?s(U)-s(ve):0),he=A(()=>s(J)>s(ue)+s(Ee)?s(J)-s(ue)-s(Ee):0),_e=A(()=>s(he)-s(O)[0]-s(O)[2]),se=A(()=>s(Oe)-s(O)[1]-s(O)[3]),te=A(()=>Nl(o(),2)&&Nl(l(),2)&&s(Oe)>s(O)[1]+s(O)[3]&&s(he)>s(O)[0]+s(O)[2]),qe=A(()=>s(te)?{coords:[s(se)/(o()[1]-o()[0]),o()[0],s(O)[1]],objects:[s(se)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Ve=A(()=>s(te)?{coords:[-s(_e)/(l()[1]-l()[0]),l()[1],s(O)[2]],objects:[s(_e)/(l()[1]-l()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Ue=A(()=>s(_e)*.5+s(Ee)+s(O)[2]),We=A(()=>s(se)*.5+s(ve)+s(O)[1]),xe=A(()=>s(te)?Rt(o(),s(qe)):[0,1]),ze=A(()=>s(te)?Rt(l(),s(Ve)):[1,0]),Xe=A(()=>zr(e.title)),Y=A(()=>s(Xe)?s(Xe).length===e.title.left?1:1.4:0);let ee=X(Ce({show:!1})),H=X(Ce({show:!1,error:""})),Q=X(Ce({show:!1,error:""})),oe=X(Ce({show:!1,colmap:null,breaks:null})),G=X(Ce({show:!1,items:null,position:null}));const ye=A(()=>s(te)&&s(oe)&&s(oe).show?ou(s(oe)):null),ge=A(()=>s(te)&&s(H).show?ru(o(),l(),s(K),s(Ve),s(H)):null),Be=A(()=>s(te)&&s(Q).show?nu(o(),l(),s(K),s(qe),s(Q)):null),k=A(()=>s(te)&&s(ye)?su(s(ye),s(se),s(O),s(K)):null),F=A(()=>s(te)&&s(G)&&s(G).show&&s(xe)?iu(s(G),s(xe),s(ze),s(re),s(je)):null);Na("axes",{setBox:ne=>T(ee,ne,!0),setXAxis:ne=>T(H,ne,!0),setYAxis:ne=>T(Q,ne,!0),setColmapLegend:ne=>T(oe,ne,!0),setGroupLegend:ne=>T(G,ne,!0),scales:()=>s(K),tX:()=>s(qe),tY:()=>s(Ve),limX:()=>o(),limY:()=>l()});var D=Ou();let $;var ae=I(D),Ye=z(I(ae));{var Ie=ne=>{var Le=Pu(),Pe=I(Le);{var ht=Ke=>{var Me=Cu();E(Me,"dx",0),E(Me,"dy",0);var gt=I(Me);vt(gt,()=>s(H).label,!0),Z(()=>{E(Me,"x",s(We)),E(Me,"y",s(he)+s(Ee))}),S(Ke,Me)};q(Pe,Ke=>{s(H).show&&s(H).label&&s(H).label!==""&&Ke(ht)})}var _t=z(Pe);{var Ut=Ke=>{var Me=Nu();E(Me,"dx",0),E(Me,"dy",0);var gt=I(Me);vt(gt,()=>s(Q).label,!0),Z(()=>{E(Me,"x",s(re)/1.1*s(Q).labelHeight),E(Me,"y",s(Ue)),E(Me,"transform",`rotate(-90, ${s(re)*s(Q).labelHeight/1.1}, ${s(Ue)})`)}),S(Ke,Me)};q(_t,Ke=>{s(Q).show&&s(Q).label&&s(Q).label!==""&&Ke(Ut)})}var br=z(_t);{var ut=Ke=>{var Me=ju();E(Me,"dx",0),E(Me,"dy",0);var gt=I(Me);vt(gt,()=>s(Xe),!0),Z(()=>{E(Me,"x",s(We)),E(Me,"y",s(re)*s(Y))}),S(Ke,Me)};q(br,Ke=>{s(Xe)&&s(Xe)!==""&&Ke(ut)})}S(ne,Le)};q(Ye,ne=>{s(te)&&ne(Ie)})}var $e=z(Ye),St=I($e),De=I(St),ct=I(De),pr=z(St);{var _d=ne=>{var Le=Bu(),Pe=W(Le);{var ht=He=>{var ie=Tu(),mt=I(ie);r(mt,()=>s(ge),()=>s(H)),S(He,ie)};q(Pe,He=>{s(H).show&&s(ge)&&He(ht)})}var _t=z(Pe);{var Ut=He=>{var ie=Lu(),mt=I(ie);r(mt,()=>s(Be),()=>s(Q)),S(He,ie)};q(_t,He=>{s(Q).show&&s(Be)&&He(Ut)})}var br=z(_t),ut=I(br);{var Ke=He=>{var ie=Mu();ie.__keydown=N,ie.__click=N,ie.__mousemove=L,ie.__mousedown=_,ie.__mouseup=w,Z(()=>{E(ie,"stroke",s(ee).lineColor),E(ie,"stroke-width",`${s(ee).lineWidth??""}px`),E(ie,"x",s(xe)[0]),E(ie,"y",s(ze)[1]),E(ie,"width",s(xe)[1]-s(xe)[0]),E(ie,"height",s(ze)[0]-s(ze)[1])}),S(He,ie)},Me=He=>{var ie=Ru();ie.__keydown=N,ie.__click=N,ie.__mousemove=L,ie.__mousedown=_,ie.__mouseup=w,Z(()=>{E(ie,"x",s(xe)[0]),E(ie,"y",s(ze)[1]),E(ie,"width",s(xe)[1]-s(xe)[0]),E(ie,"height",s(ze)[0]-s(ze)[1])}),S(He,ie)};q(ut,He=>{s(ee).show?He(Ke):He(Me,!1)})}var gt=z(br),st=I(gt);Kr(st,()=>e.children??yt);var tt=z(gt);{var Je=He=>{var ie=Fu(),mt=I(ie);gu(mt,()=>s(ye),()=>s(k)),S(He,ie)};q(tt,He=>{s(k)&&He(Je)})}var Jt=z(tt);{var mn=He=>{var ie=zu(),mt=I(ie);n(mt,()=>s(G),()=>s(F)),S(He,ie)};q(Jt,He=>{s(F)&&He(mn)})}Z(()=>E(gt,"clip-path",`url(#${j})`)),S(ne,Le)};q(pr,ne=>{s(te)&&ne(_d)})}jr(ae,ne=>T(y,ne),()=>s(y));var yd=z(ae,2);{var xd=ne=>{var Le=Iu();S(ne,Le)},kd=ne=>{var Le=Du(),Pe=I(Le);Pe.__click=R,Pe.__keydown=R;var ht=z(Pe,2);ht.__click=B,ht.__keydown=B;var _t=z(ht,2);_t.__click=P,_t.__keydown=P,S(ne,Le)};q(yd,ne=>{s(te)?ne(kd,!1):ne(xd)})}Z(()=>{$=ot(D,1,`plot-container show-download-links-${i()??""}`,"svelte-1t5q9z1",$,{"plot-error":!s(te)}),Tt(ae,`font-size:${s(re)??""}px`),E($e,"x",s(ve)),E($e,"y",s(Ee)),E($e,"width",s(Oe)),E($e,"height",s(he)),E(De,"id",j),E(ct,"x",s(xe)[0]),E(ct,"y",s(ze)[1]),E(ct,"width",s(xe)[1]-s(xe)[0]),E(ct,"height",s(ze)[0]-s(ze)[1])}),Xs(ae,"clientWidth",ne=>T(U,ne)),Xs(ae,"clientHeight",ne=>T(J,ne)),S(t,D),pe()}Qe(["keydown","click","mousemove","mousedown","mouseup"]);function Vu(t,e){me(e,!0);let r=M(e,"las",3,1),n=M(e,"whole",3,!1),o=M(e,"show",3,!0),l=M(e,"showGrid",3,!1);const a=Wt("axes");fe(()=>{const i=zr(e.label),c=i?i.length===e.label.length?1:1.4:0;let u,f="";e.ticks&&([u,f]=zl(e.ticks,a.limX()));let d;!f&&e.tickLabels&&([d,f]=Fl(e.tickLabels,u)),a.setXAxis({show:o(),error:f,label:i,ticks:u,labelHeight:c,showGrid:l(),las:r(),whole:n(),tickLabels:d})}),pe()}function Uu(t,e){me(e,!0);let r=M(e,"las",3,1),n=M(e,"whole",3,!1),o=M(e,"show",3,!0),l=M(e,"showGrid",3,!1);const a=Wt("axes");fe(()=>{const i=zr(e.label),c=i?i.length===e.label.length?1:1.4:0;let u,f="";e.ticks&&([u,f]=zl(e.ticks,a.limY()));let d;!f&&e.tickLabels&&([d,f]=Fl(e.tickLabels,u)),a.setYAxis({show:o(),error:f,label:i,ticks:u,labelHeight:c,showGrid:l(),las:r(),whole:n(),tickLabels:d,pos:4})}),pe()}function Hu(t,e){me(e,!0);let r=M(e,"lineWidth",3,1),n=M(e,"lineColor",3,"#606060");const o=Wt("axes");fe(()=>{o.setBox({show:!0,lineWidth:r(),lineColor:n()})}),pe()}var Wu=be("<rect></rect>"),Yu=be("<g></g>");function ql(t,e){me(e,!0);let r=M(e,"faceColor",19,()=>Mt.PRIMARY),n=M(e,"lineColor",19,r),o=M(e,"lineWidth",3,1),l=M(e,"className",3,"series-rect");const a=A(()=>Fr(e.left,"Rectangles (left)")),i=A(()=>s(a)?Fr(e.top,"Rectangles (top)",s(a).length):null),c=A(()=>s(i)?typeof e.width!="object"?de.fill(e.width,s(a).length):e.width:null),u=A(()=>s(i)?typeof e.height!="object"?de.fill(e.height,s(a).length):e.height:null),f=Wt("axes"),d=A(()=>s(a)?Rt(s(a),f.tX()):null),v=A(()=>s(i)?Rt(s(i),f.tY()):null),h=A(()=>s(c)?Pl(s(c),f.tX()):null),m=A(()=>s(u)?Pl(s(u),f.tY()):null),p=A(()=>`fill:${r()};stroke:${n()};stroke-width:${o()}px;`),g=A(()=>s(d)&&s(v)&&s(h)&&s(m)&&s(h).length===s(d).length&&s(m).length===s(d).length);var b=ke(),C=W(b);{var _=w=>{var L=Yu();L.__click=N=>zn(N,"rect",e.onclick),it(L,21,()=>e.left,dt,(N,P,R)=>{var B=Wu();Z(()=>{E(B,"x",s(d)[R]),E(B,"y",s(v)[R]),E(B,"width",s(h)[R]),E(B,"height",s(m)[R])}),S(N,B)}),Z(()=>{ot(L,0,`series ${l()??""}`),Tt(L,s(p))}),S(w,L)};q(C,w=>{s(g)&&w(_)})}S(t,b),pe()}Qe(["click"]),Qe(["click"]);var Gu=be("<text><!></text>"),Ku=be("<text><!></text>"),Xu=be("<text><!></text>"),Ju=be('<g class="series series-textlabels"><!></g>');function zo(t,e){me(e,!0);let r=M(e,"pos",3,0),n=M(e,"faceColor",19,()=>Mt.PRIMARY_TEXT),o=M(e,"lineColor",3,"transparent"),l=M(e,"lineWidth",3,0),a=M(e,"textSize",3,1),i=M(e,"rotateAngle",3,0);const c=["middle","middle","start","middle","end"],u=A(()=>Fr(e.xValues,"TextLabels")),f=A(()=>s(u)?Fr(e.yValues,"TextLabels",s(u).length):null),d=A(()=>s(f)?Array.isArray(e.labels)&&e.labels.length!==s(f).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),v=A(()=>s(d)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),h=Wt("axes"),m=A(()=>s(u)&&s(v)!==null?Rt(s(u),h.tX()):null),p=A(()=>s(f)&&s(m)?Rt(s(f),h.tY()):null),g=A(()=>Al[h.scales().plot]),b=A(()=>[0,0,-s(g),0,s(g),s(g)]),C=A(()=>[0,s(g),0,-s(g),0,s(g)]),_=A(()=>`fill:${n()};stroke-width:${l()}px;stroke:${o()};font-size:${a()}em;`),w=A(()=>s(m)&&s(p)&&s(v)!==null&&s(d)&&s(m).length===s(p).length);var L=ke(),N=W(L);{var P=R=>{var B=Ju();B.__click=J=>zn(J,"text",e.onclick);var j=I(B);{var y=J=>{var K=ke(),O=W(K);it(O,17,()=>s(m),dt,(re,je,we)=>{var ue=Gu();E(ue,"data-id",we);var ve=I(ue);vt(ve,()=>e.labels,!0),Z(()=>{E(ue,"x",s(m)[we]),E(ue,"y",s(p)[we]),E(ue,"dx",s(b)[r()]),E(ue,"dy",s(C)[r()]),E(ue,"transform",i()!==void 0?`rotate(${i()}, ${s(m)[we]+s(b)[r()]}, ${s(p)[we]+s(C)[r()]})`:""),E(ue,"text-anchor",c[r()[we]])}),S(re,ue)}),S(J,K)},U=J=>{var K=ke(),O=W(K);{var re=we=>{var ue=ke(),ve=W(ue);it(ve,17,()=>s(m),dt,(Ee,Oe,he)=>{var _e=Ku();E(_e,"data-id",he);var se=I(_e);vt(se,()=>e.labels[he],!0),Z(()=>{E(_e,"x",s(m)[he]),E(_e,"y",s(p)[he]),E(_e,"dx",s(b)[r()[he]]),E(_e,"dy",s(C)[r()[he]]),E(_e,"transform",i()!==void 0?`rotate(${i()}, ${s(m)[he]+s(b)[r()]}, ${s(p)[he]+s(C)[r()]})`:""),E(_e,"text-anchor",c[r()[he]])}),S(Ee,_e)}),S(we,ue)},je=we=>{var ue=ke(),ve=W(ue);it(ve,17,()=>s(m),dt,(Ee,Oe,he)=>{var _e=Xu();E(_e,"data-id",he);var se=I(_e);vt(se,()=>e.labels[he],!0),Z(()=>{E(_e,"x",s(m)[he]),E(_e,"y",s(p)[he]),E(_e,"dx",s(b)[r()]),E(_e,"dy",s(C)[r()]),E(_e,"transform",i()!==void 0?`rotate(${i()}, ${s(m)[he]+s(b)[r()]}, ${s(p)[he]+s(C)[r()]})`:""),E(_e,"text-anchor",c[r()])}),S(Ee,_e)}),S(we,ue)};q(O,we=>{Array.isArray(r())||ArrayBuffer.isView(r())?we(re):we(je,!1)},!0)}S(J,K)};q(j,J=>{typeof e.labels=="string"?J(y):J(U,!1)})}Z(()=>Tt(B,s(_))),S(R,B)};q(N,R=>{s(w)&&R(P)})}S(t,L),pe()}Qe(["click"]),Qe(["click"]),Qe(["click"]);var Zu=be('<g class="series series-line"><polyline class="line"></polyline></g>');function Vl(t,e){me(e,!0);let r=M(e,"lineColor",19,()=>Mt.PRIMARY),n=M(e,"lineType",3,1),o=M(e,"lineWidth",3,1);const l=A(()=>Fr(e.xValues,"Lines")),a=A(()=>s(l)?Fr(e.yValues,"Lines",s(l).length):null),i=Wt("axes"),c=A(()=>s(l)&&s(a)?Rl(s(l),s(a),i.tX(),i.tY()):null),u=A(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Fn[i.scales().plot][n()-1]}`);var f=ke(),d=W(f);{var v=h=>{var m=Zu();m.__click=g=>zn(g,"polyline",e.onclick);var p=I(m);Z(()=>{Tt(m,s(u)),E(p,"points",s(c))}),S(h,m)};q(d,h=>{s(c)&&h(v)})}S(t,f),pe()}Qe(["click"]);var Qu=be('<polyline class="line"></polyline>'),$u=be('<g class="series series-multiline"></g>');function ef(t,e){me(e,!0);let r=M(e,"lineColor",19,()=>Mt.PRIMARY),n=M(e,"lineType",3,1),o=M(e,"lineWidth",3,1);const l=A(()=>Fr(e.xValues,"Multilines")),a=A(()=>s(l)?Xt(e.yValues)?(s(l).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),i=Wt("axes"),c=A(()=>{if(!s(l)||!s(a))return null;const h=new Array(s(a).ncols);for(let m=0;m<h.length;m++)h[m]=Rl(s(l),s(a).getcolumn(m+1),i.tX(),i.tY());return h}),u=A(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Fn[i.scales().plot][n()-1]}`);var f=ke(),d=W(f);{var v=h=>{var m=$u();m.__click=p=>zn(p,"polyline",e.onclick),it(m,21,()=>s(c),dt,(p,g)=>{var b=Qu();Z(()=>E(b,"points",s(g))),S(p,b)}),Z(()=>Tt(m,s(u))),S(h,m)};q(d,h=>{s(c)&&s(c).length>0&&h(v)})}S(t,f),pe()}Qe(["click"]);function tf(t,e){me(e,!0);let r=M(e,"show",3,!0),n=M(e,"labels",3,null),o=M(e,"labelColor",19,()=>Mt.CLEGEND_LABELS),l=M(e,"fontSize",3,.85);const a=Wt("axes");fe(()=>{a.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:n(),labelColor:o(),fontSize:l()})}),pe()}function rf(t,e,r){const n=e.length,o=new Array(t.length),l=e[1]-e[0];for(let a=0;a<t.length;a++)for(let i=0;i<n-1;i++){const c=t[a]>=e[i],u=i===n-2?t[a]<e[i+1]+l:t[a]<e[i+1];if(c&&u){o[a]=r[i];break}}return o}var nf=V("<!> <!>",1),of=V("<!> <!>",1),sf=V("<!> <!>",1),lf=V("<!> <!> <!> <!> <!> <!> <!> <!>",1),af=V("<h2>Plot settings</h2>"),cf=V('<div class="plot-area svelte-ievjpi"><div class="plot svelte-ievjpi"><!></div></div> <div class="plot-controls-area svelte-ievjpi"><!> <!> <!> <!></div>',1),uf=V('<div class="plot-panel svelte-ievjpi"><!></div>');function Ul(t,e){me(e,!0);let r=X(!0),n=X("none"),o=X(!1);const l=A(()=>(s(r)?"Preprocessed":"Raw")+" data (selected rows)"),a=A(()=>s(r)&&e.prepdata?e.prepdata:e.rawdata),i=A(()=>s(a)?s(a).varaxisLabel:"Variables"),c=A(()=>e.rawdata.varaxisUnits),u=A(()=>e.left>=0||e.right>0&&e.right<s(a).values.nrows),f=A(()=>e.left>=0?e.left+1:1),d=A(()=>e.right>0&&e.right<s(a).values.nrows?e.right:s(a).values.nrows),v=A(()=>s(r)&&s(a)&&s(u)?Te.seq(s(f),s(d)):null),h=A(()=>s(v)?s(a).varvalues.filter((R,B)=>B>=s(f)-1&&B<s(d)):s(a).varvalues),m=A(()=>s(v)?s(a).values.subset(s(v),null):s(a).values),p=A(()=>s(m)?vo(s(m).v):null),g=A(()=>s(p)?(s(p)[1]-s(p)[0])*.05:null),b=A(()=>s(p)?[s(p)[0],s(p)[1]+(s(n)!=="none")*s(g)]:[0,1]),C=A(()=>s(a)?vo(s(a).varvalues,s(o)?.005:.1):[0,1]),_=A(()=>s(o)&&s(u)?[s(a).varvalues[s(f)-1],s(a).varvalues[s(d)-1]]:s(C)),w=A(()=>{if(!e.rawdata)return null;const R={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const B=Dl(e.rawdata.classNames.length);R.groups={colors:e.rawdata.classes.map(j=>B[e.rawdata.classNames.findIndex(y=>y===j)]),breaks:gr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:B}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const B=Qs(e.rawdata.resp,8),j=Dl(B.length-1);R.response={colors:rf(e.rawdata.resp.v,B.v,j),labels:null,breaks:B,map:j}}return R});fe(()=>{(e.left<1||e.right<1||e.right>=e.left)&&T(o,!1)});var L=uf(),N=I(L);{var P=R=>{var B=cf(),j=W(B),y=I(j),U=I(y);qu(U,{get title(){return s(l)},get limY(){return s(b)},get limX(){return s(_)},fileName:"plot-preprocessed",children:(ve,Ee)=>{var Oe=lf(),he=W(Oe);{var _e=H=>{ef(H,{get xValues(){return s(h)},get yValues(){return s(m)}})},se=H=>{var Q=ke(),oe=W(Q);it(oe,17,()=>s(w)[s(n)].colors,dt,(G,ye,ge)=>{{let Be=A(()=>s(m).getcolumn(ge+1));Vl(G,{get xValues(){return s(h)},get yValues(){return s(Be)},get lineColor(){return s(ye)}})}}),S(H,Q)};q(he,H=>{s(n)==="none"?H(_e):H(se,!1)})}var te=z(he,2);{var qe=H=>{const Q=A(()=>s(a).varvalues[e.varind[0]]);var oe=nf(),G=W(oe);{let ge=A(()=>[s(Q),s(Q)]);Vl(G,{get xValues(){return s(ge)},get yValues(){return s(b)},lineColor:"#00000060"})}var ye=z(G,2);{let ge=A(()=>[s(Q)]),Be=A(()=>[s(b)[1]-s(g)*(s(n)==="none"?1:2)]),k=A(()=>zr(s(Q).toFixed(2)+" "+s(c)));zo(ye,{get xValues(){return s(ge)},get yValues(){return s(Be)},get labels(){return s(k)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(H,oe)};q(te,H=>{e.varind&&e.varind[0]>0&&H(qe)})}var Ve=z(te,2);{var Ue=H=>{const Q=A(()=>s(a).varvalues[e.varind[1]]);var oe=of(),G=W(oe);{let ge=A(()=>[s(_)[0]]),Be=A(()=>[s(a).varvalues[e.varind[1]]-s(_)[0]]),k=A(()=>[s(b)[1]]),F=A(()=>[s(b)[1]-s(b)[0]]);ql(G,{get left(){return s(ge)},get width(){return s(Be)},get top(){return s(k)},get height(){return s(F)},lineColor:"transparent",faceColor:"#00000040"})}var ye=z(G,2);{let ge=A(()=>[s(Q)]),Be=A(()=>[s(b)[1]-s(g)*(s(n)==="none"?1:2)]),k=A(()=>zr(s(Q).toFixed(2)+" "+s(c)));zo(ye,{get xValues(){return s(ge)},get yValues(){return s(Be)},get labels(){return s(k)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(H,oe)};q(Ve,H=>{e.varind&&e.varind[1]>0&&H(Ue)})}var We=z(Ve,2);{var xe=H=>{const Q=A(()=>s(a).varvalues[e.varind[2]-1]);var oe=sf(),G=W(oe);{let ge=A(()=>[s(a).varvalues[e.varind[2]-1]]),Be=A(()=>[s(_)[1]-s(a).varvalues[e.varind[2]-1]]),k=A(()=>[s(b)[1]]),F=A(()=>[s(b)[1]-s(b)[0]]);ql(G,{get left(){return s(ge)},get width(){return s(Be)},get top(){return s(k)},get height(){return s(F)},lineColor:"transparent",faceColor:"#00000040"})}var ye=z(G,2);{let ge=A(()=>[s(Q)]),Be=A(()=>[s(b)[1]-s(g)*(s(n)==="none"?1:2)]),k=A(()=>zr(s(Q).toFixed(2)+" "+s(c)));zo(ye,{get xValues(){return s(ge)},get yValues(){return s(Be)},get labels(){return s(k)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(H,oe)};q(We,H=>{e.varind&&e.varind[2]<s(a).varvalues.length&&e.varind[2]>0&&H(xe)})}var ze=z(We,2);{let H=A(()=>s(n)!=="none");tf(ze,{get show(){return s(H)},get labels(){return s(w)[s(n)].labels},get breaks(){return s(w)[s(n)].breaks},get colmap(){return s(w)[s(n)].map}})}var Xe=z(ze,2);Vu(Xe,{get label(){return s(i)},showGrid:!0});var Y=z(Xe,2);Uu(Y,{showGrid:!0});var ee=z(Y,2);Hu(ee,{}),S(ve,Oe)},$$slots:{default:!0}});var J=z(j,2),K=I(J);le(K,{label:"",children:(ve,Ee)=>{var Oe=af();S(ve,Oe)},$$slots:{default:!0}});var O=z(K,2);le(O,{label:"Show",children:(ve,Ee)=>{No(ve,{options:["raw","preprocessed"],get value(){return s(r)},set value(Oe){T(r,Oe,!0)}})},$$slots:{default:!0}});var re=z(O,2);{var je=ve=>{le(ve,{label:"Color by",children:(Ee,Oe)=>{{let he=A(()=>Object.keys(s(w)));Lt(Ee,{get options(){return s(he)},get value(){return s(n)},set value(_e){T(n,_e,!0)}})}},$$slots:{default:!0}})};q(re,ve=>{Object.keys(s(w)).length>1&&ve(je)})}var we=z(re,2);{var ue=ve=>{le(ve,{label:"Zoom (x-axis)",children:(Ee,Oe)=>{No(Ee,{options:["off","on"],get value(){return s(o)},set value(he){T(o,he,!0)}})},$$slots:{default:!0}})};q(we,ve=>{e.left>0&&e.right>e.left&&ve(ue)})}S(R,B)};q(N,R=>{s(h)&&s(m)&&R(P)})}S(t,L),pe()}const ff=t=>t;function Hl(t,{delay:e=0,duration:r=400,easing:n=ff}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:l=>`opacity: ${l*o}`}}var df=V('<p class="title"> </p>'),vf=V("<!>&nbsp;",1),hf=V("<!> <!>",1),gf=V('<div class="method-open svelte-2njv60"><!> <!> <!></div>'),mf=V('<p> <span title="Edit" class="svelte-2njv60"> </span></p> <!> <!> <!>',1);function Qr(t,e){me(e,!0);let r=M(e,"cancel",3,null);var n=ke(),o=W(n);{var l=i=>{var c=gf(),u=I(c);le(u,{children:(v,h)=>{var m=df(),p=I(m);Z(()=>Fe(p,e.title)),S(v,m)},$$slots:{default:!0}});var f=z(u,2);Kr(f,()=>e.children);var d=z(f,2);le(d,{label:" ",children:(v,h)=>{var m=hf(),p=W(m);{var g=C=>{var _=vf(),w=W(_);mr(w,{text:"Cancel",get onclick(){return r()}}),S(C,_)};q(p,C=>{r()&&C(g)})}var b=z(p,2);mr(b,{text:"Save",get onclick(){return e.apply}}),S(v,m)},$$slots:{default:!0}}),Hs(3,c,()=>Hl,()=>({duration:10})),S(i,c)},a=i=>{le(i,{children:(c,u)=>{var f=mf(),d=W(f),v=I(d),h=z(v);h.__click=()=>e.open(e.pos);var m=I(h),p=z(d,2);fc(p,{onclick:()=>e.moveUp(e.pos)});var g=z(p,2);dc(g,{onclick:()=>e.moveDown(e.pos)});var b=z(g,2);Mn(b,{onclick:()=>e.remove(e.pos)}),Z(()=>{Fe(v,`${e.title??""} `),Fe(m,e.settings)}),S(c,f)},$$slots:{default:!0}})};q(o,i=>{e.isOpen?i(l):i(a,!1)})}S(t,n),pe()}Qe(["click"]);var pf=V("<!> <!>",1);function bf(t,e){me(e,!0);let r=M(e,"params",31,()=>Ce([0,0])),n=M(e,"varind",15),o=M(e,"settings",15),l=M(e,"nvars",3,0),a=Xr(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const i={snv:0,area:1,length:2,var:3},c=Object.keys(i);let u=X(Ce(c[r()[0]])),f=X(r()[1]+1);const d="Normalization";fe(()=>{o(s(u)+(s(u)==="var"?" #"+s(f):""))}),fe(()=>{s(u)==="var"?n(n()[0]=r()[1]>0?r()[1]:1,!0):n(n()[0]=-1,!0)}),fe(()=>{s(u)==="var"&&e.isOpen?n(n()[0]=r()[1],!0):n(n()[0]=-1,!0)}),fe(()=>{s(u)&&r(r()[0]=i[s(u)],!0)}),fe(()=>{s(f)&&r(r()[1]=s(f)-1,!0)}),Qr(t,Jr({id:"norm",title:d,get settings(){return o()},get isOpen(){return e.isOpen}},()=>a,{children:(v,h)=>{var m=pf(),p=W(m);le(p,{label:"Type",children:(C,_)=>{Lt(C,{get options(){return c},get value(){return s(u)},set value(w){T(u,w,!0)}})},$$slots:{default:!0}});var g=z(p,2);{var b=C=>{le(C,{label:"Variable index",children:(_,w)=>{gn(_,{min:1,get max(){return l()},step:1,get value(){return s(f)},set value(L){T(f,L,!0)}})},$$slots:{default:!0}})};q(g,C=>{s(u)==="var"&&C(b)})}S(v,m)},$$slots:{default:!0}})),pe()}var wf=V("<!> <!> <!>",1);function _f(t,e){me(e,!0);let r=M(e,"params",31,()=>Ce([3,1,0])),n=M(e,"settings",15),o=Xr(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const l=A(()=>{if(!e.nvars)return 3;const u=Math.round(e.nvars*.25);return u>39?39:u%2<1?u+1:u}),a=A(()=>r()[1]<2?[0,1]:[0,1,2]),i=A(()=>r()[0]<5?[1,2]:[1,2,3]);fe(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),fe(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),fe(()=>{n(r()[0]+", "+r()[1]+", "+r()[2])}),Qr(t,Jr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return n()}},()=>o,{children:(u,f)=>{var d=wf(),v=W(d);le(v,{label:"Width",children:(p,g)=>{gn(p,{min:3,get max(){return s(l)},step:2,get value(){return r()[0]},set value(b){r(r()[0]=b,!0)}})},$$slots:{default:!0}});var h=z(v,2);le(h,{label:"Polynomial",children:(p,g)=>{Lt(p,{get options(){return s(i)},get value(){return r()[1]},set value(b){r(r()[1]=b,!0)}})},$$slots:{default:!0}});var m=z(h,2);le(m,{label:"Derivative",children:(p,g)=>{Lt(p,{get options(){return s(a)},get value(){return r()[2]},set value(b){r(r()[2]=b,!0)}})},$$slots:{default:!0}}),S(u,d)},$$slots:{default:!0}})),pe()}var yf=V("<!> <!>",1);function xf(t,e){me(e,!0);let r=M(e,"params",31,()=>Ce([1,0]));M(e,"varind",27,()=>-1);let n=M(e,"settings",15);M(e,"nvars",3,0);let o=Xr(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l={no:0,mean:1,median:2},a={no:0,sd:1,iqr:2,range:3,pareto:4},i=Object.keys(l),c=Object.keys(a);let u=X(Ce(i[r()[0]])),f=X(Ce(c[r()[1]]));const d="Scaling";fe(()=>{n(s(u)+"/"+s(f))}),fe(()=>{s(u)&&r(r()[0]=l[s(u)],!0)}),fe(()=>{s(f)&&r(r()[1]=a[s(f)],!0)}),Qr(t,Jr({id:"scale",title:d,get settings(){return n()}},()=>o,{children:(v,h)=>{var m=yf(),p=W(m);le(p,{label:"Center",children:(b,C)=>{Lt(b,{get options(){return i},get value(){return s(u)},set value(_){T(u,_,!0)}})},$$slots:{default:!0}});var g=z(p,2);le(g,{label:"Scale",children:(b,C)=>{Lt(b,{get options(){return c},get value(){return s(f)},set value(_){T(f,_,!0)}})},$$slots:{default:!0}}),S(v,m)},$$slots:{default:!0}})),pe()}var kf=V("<!> <!> <!>",1),Ef=V("<!> <!> <!>",1);function Sf(t,e){me(e,!0);let r=M(e,"params",31,()=>Ce([0,1,.1]));M(e,"varind",27,()=>-1);let n=M(e,"settings",15,"");M(e,"nvars",3,0);let o=Xr(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l="Baseline correction",a={emsc:0,als:1},i=Object.keys(a);function c(m){const p=Math.ceil(Math.log10(m));return Math.pow(10,p)}let u=X(Ce(i[r()[0]])),f=X(Ce(r()[2]>0?c(r()[2]).toString():"0.1")),d=A(()=>parseFloat(s(f))),v=A(()=>s(d)/10),h=A(()=>Math.ceil(-Math.log10(s(d)))+1);fe(()=>{if(s(u)!=="als")return;const m=parseFloat(s(f));(r()[2]<s(v)||r()[2]>m-s(v))&&r(r()[2]=s(v),!0)}),fe(()=>{n(s(u)+" ("+(s(u)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),fe(()=>{s(u)&&r(r()[0]=a[s(u)],!0)}),Qr(t,Jr({id:"scale",title:l,get settings(){return n()}},()=>o,{children:(m,p)=>{var g=Ef(),b=W(g);le(b,{label:"Type",children:(N,P)=>{Lt(N,{get options(){return i},get value(){return s(u)},set value(R){T(u,R,!0)}})},$$slots:{default:!0}});var C=z(b,2);{var _=N=>{var P=kf(),R=W(P);le(R,{label:"Lambda",children:(y,U)=>{Rn(y,{min:1,max:7,step:.1,get value(){return r()[1]},set value(J){r(r()[1]=J,!0)}})},$$slots:{default:!0}});var B=z(R,2);le(B,{label:"Penalty range",children:(y,U)=>{Lt(y,{options:["1","0.1","0.01"],get value(){return s(f)},set value(J){T(f,J,!0)}})},$$slots:{default:!0}});var j=z(B,2);le(j,{label:"Penalty",children:(y,U)=>{{let J=A(()=>s(d)-s(v));Rn(y,{get min(){return s(v)},get max(){return s(J)},get step(){return s(v)},get decNum(){return s(h)},get value(){return r()[2]},set value(K){r(r()[2]=K,!0)}})}},$$slots:{default:!0}}),S(N,P)};q(C,N=>{s(u)==="als"&&N(_)})}var w=z(C,2);{var L=N=>{le(N,{label:"Polynomial",children:(P,R)=>{gn(P,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(B){r(r()[1]=B,!0)}})},$$slots:{default:!0}})};q(w,N=>{s(u)==="emsc"&&N(L)})}S(m,g)},$$slots:{default:!0}})),pe()}var Af=V("<!> <!>",1);function Cf(t,e){me(e,!0);let r=M(e,"params",15),n=M(e,"varind",15),o=M(e,"settings",15),l=Xr(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const a="Trim tails";let i=X(!1);const c=A(()=>e.nvars?Math.round(e.nvars*.1):1);fe(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-s(c))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+s(c))&&r(r()[1]=e.right,!0),n(n()[1]=r()[0],!0),n(n()[2]=r()[1],!0),T(i,!0)):(n(n()[1]=-1,!0),n(n()[2]=-1,!0),T(i,!1))}),fe(()=>{o("left: "+r()[0]+" right: "+r()[1])}),Qr(t,Jr({id:"norm",title:a,get settings(){return o()},get isOpen(){return e.isOpen}},()=>l,{children:(u,f)=>{var d=ke(),v=W(d);{var h=m=>{var p=Af(),g=W(p);le(g,{label:"Left",children:(C,_)=>{{let w=A(()=>e.right-s(c));Rn(C,{get min(){return e.left},get max(){return s(w)},step:1,decNum:0,get value(){return r()[0]},set value(L){r(r()[0]=L,!0)}})}},$$slots:{default:!0}});var b=z(g,2);le(b,{label:"Right",children:(C,_)=>{{let w=A(()=>e.left+s(c));Rn(C,{get min(){return s(w)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(L){r(r()[1]=L,!0)}})}},$$slots:{default:!0}}),S(m,p)};q(v,m=>{s(i)&&m(h)})}S(u,d)},$$slots:{default:!0}})),pe()}var Nf=V("<!> <!>",1);function jf(t,e){me(e,!0);let r=M(e,"params",31,()=>Ce([3,5]));M(e,"varind",27,()=>-1);let n=M(e,"settings",15);M(e,"nvars",3,0);let o=Xr(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l="Spike removal";fe(()=>{n(r()[0]+"/"+r()[1])}),Qr(t,Jr({id:"scale",title:l,get settings(){return n()}},()=>o,{children:(a,i)=>{var c=Nf(),u=W(c);le(u,{label:"Window",children:(d,v)=>{gn(d,{min:3,max:15,step:2,get value(){return r()[0]},set value(h){r(r()[0]=h,!0)}})},$$slots:{default:!0}});var f=z(u,2);le(f,{label:"Threshold",children:(d,v)=>{gn(d,{min:3,max:50,get value(){return r()[1]},set value(h){r(r()[1]=h,!0)}})},$$slots:{default:!0}}),S(a,c)},$$slots:{default:!0}})),pe()}var Pf=V("<h2>Selected methods</h2> <!>",1),Tf=V("<p>No methods selected</p>"),Lf=V("<p> </p>"),Mf=V("<h2>Available methods</h2>"),Rf=V("<p>Maximum number of methods is selected.</p>"),Ff=V("<p> </p> <!>",1),zf=V('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-68bixt"><!> <!></div>',1);function Bf(t,e){me(e,!0);let r=M(e,"prepobj",31,()=>Ce([])),n=M(e,"meta",15),o=M(e,"varind",31,()=>-1),l=M(e,"rawdataShort",15),a=M(e,"prepdataShort",15),i=M(e,"prepmodel",3,null),c=M(e,"reset",3,null),u=M(e,"finalize",3,null);const f=30,d=8,v={savgol:_f,norm:bf,scale:xf,baseline:Sf,trim:Cf,spikes:jf};let h=X("neutral"),m=X(""),p=X(void 0),g=X(""),b=X(Ce([])),C=X(!1),_=X(Ce([])),w=X(Ce([]));n(new Array(d).fill(""));const L=A(()=>e.rawdata.values.ncols-e.rawdata.nresp);let N=Ce(e.rawdata.values.nrows<3?Object.keys(v).filter(Y=>Y!=="scale"):Object.keys(v));R(),r().length!==0&&P();async function P(){r().length!==0&&T(p,e.WASM().then(Y=>{T(h,"applying");const ee=hl(Y,l().values,0,r(),!0,[]),H=So(Y,l().values,0,ee,!0);a(Po(l(),H)),T(h,"success")}).catch(Y=>{a(Po(l())),console.error(Y),T(h,"error"),T(m,Y,!0)}),!0)}function R(){const Y=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(Y),T(_,[],!0),T(w,[],!0);return}let ee=[],H=[],Q=0,oe=Y;for(let G of r())G.id==="trim"?(ee.push(Q),H.push(oe),G.params[0]<Q&&(G.params[0]=Q),G.params[1]>oe&&(G.params[1]=oe),Q=G.params[0]>Q?G.params[0]:Q,oe=G.params[1]>0&&G.params[1]<oe?G.params[1]:oe):(ee.push(Q),H.push(oe));T(_,ee,!0),T(w,H,!0),e.setLeft(Q),e.setRight(oe)}function B(Y){const ee=hr.find(H=>H.id===Y);ee&&(s(_).push(e.left),s(w).push(e.right),r().push({id:ee.id,params:ee.mp}),T(C,!0),T(g,r().length-1))}function j(){r().length<1||(s(_).pop(),s(w).pop(),r().pop(),T(C,!1),T(g,-1))}function y(Y){if(Y<=0)return;const ee=r()[Y],H=r()[Y-1];r(r()[Y-1]=ee,!0),r(r()[Y]=H,!0),re()}function U(Y){if(Y<0||Y===r().length-1)return;const ee=r()[Y],H=r()[Y+1];r(r()[Y+1]=ee,!0),r(r()[Y]=H,!0),re()}function J(Y){Y<0||Y>=r().length||(r(r().filter((ee,H)=>H!==Y)),re())}function K(Y){T(g,Y,!0)}function O(){T(g,null)}function re(){T(h,"neutral"),T(m,""),T(C,!1),T(g,null),i()&&c()(),R(),P(),o(o()[1]=-1,!0),o(o()[2]=-1,!0)}fe(()=>{e.rawdata&&!l()&&l(jo(e.rawdata,f))}),fe(()=>{l()&&!a()&&a(Po(l()))}),fe(()=>{(!r()||r().length===0)&&(T(b,[],!0),a(null),T(_,[],!0),T(w,[],!0),T(g,""),n(new Array(d).fill("")))});var je=zf(),we=W(je);let ue;var ve=I(we);le(ve,{label:"",children:(Y,ee)=>{var H=Pf(),Q=z(W(H),2);{var oe=G=>{uc(G,{text:"edit",get onclick(){return c()}})};q(Q,G=>{i()&&c()&&G(oe)})}S(Y,H)},$$slots:{default:!0}});var Ee=z(ve,2);{var Oe=Y=>{le(Y,{label:"",children:(ee,H)=>{var Q=Tf();S(ee,Q)},$$slots:{default:!0}})},he=Y=>{var ee=ke(),H=W(ee);it(H,17,r,dt,(Q,oe,G)=>{const ye=A(()=>v[s(oe).id]);var ge=ke(),Be=W(ge);{var k=D=>{var $=ke(),ae=W($);{let Ye=A(()=>G===s(g)),Ie=A(()=>s(C)?j:null);ao(ae,()=>s(ye),($e,St)=>{St($e,{get isOpen(){return s(Ye)},get left(){return s(_)[G]},get right(){return s(w)[G]},pos:G,get nvars(){return s(L)},moveUp:y,moveDown:U,apply:re,open:K,close:O,remove:J,get cancel(){return s(Ie)},get params(){return s(oe).params},set params(De){s(oe).params=De},get varind(){return o()},set varind(De){o(De)},get settings(){return n()[G]},set settings(De){n(n()[G]=De,!0)}})})}S(D,$)},F=D=>{var $=ke(),ae=W($);{let Ye=A(()=>G===s(g)),Ie=A(()=>s(C)?j:null);ao(ae,()=>s(ye),($e,St)=>{St($e,{pos:G,get isOpen(){return s(Ye)},get left(){return s(_)[G]},get right(){return s(w)[G]},get nvars(){return s(L)},moveUp:y,moveDown:U,apply:re,open:K,close:O,remove:J,get cancel(){return s(Ie)},get params(){return s(oe).params},set params(De){s(oe).params=De},get settings(){return n()[G]},set settings(De){n(n()[G]=De,!0)}})})}S(D,$)};q(Be,D=>{s(oe).id==="norm"||s(oe).id==="trim"?D(k):D(F,!1)})}S(Q,ge)}),S(Y,ee)};q(Ee,Y=>{r().length===0?Y(Oe):Y(he,!1)})}var _e=z(Ee,2);{var se=Y=>{le(Y,{status:"error",children:(ee,H)=>{var Q=Lf(),oe=I(Q);Z(()=>Fe(oe,s(m))),S(ee,Q)},$$slots:{default:!0}})};q(_e,Y=>{(s(h)==="error"||s(m))&&Y(se)})}var te=z(we,2),qe=I(te);{var Ve=Y=>{le(Y,{label:" ",children:(ee,H)=>{mr(ee,{get onclick(){return u()},text:"Finalize"})},$$slots:{default:!0}})};q(qe,Y=>{!i()&&!s(g)&&r().length>0&&Y(Ve)})}var Ue=z(te,2),We=I(Ue);le(We,{label:"",children:(Y,ee)=>{var H=Mf();S(Y,H)},$$slots:{default:!0}});var xe=z(We,2);{var ze=Y=>{le(Y,{label:"",children:(ee,H)=>{var Q=Rf();S(ee,Q)},$$slots:{default:!0}})},Xe=Y=>{var ee=ke(),H=W(ee);it(H,17,()=>N,dt,(Q,oe)=>{const G=A(()=>hr.find(ye=>ye.id===s(oe)));le(Q,{children:(ye,ge)=>{var Be=Ff(),k=W(Be),F=I(k),D=z(k,2);cc(D,{onclick:()=>B(s(G).id)}),Z(()=>Fe(F,s(G).title)),S(ye,Be)},$$slots:{default:!0}})}),S(Y,ee)};q(xe,Y=>{r().length>=d?Y(ze):Y(Xe,!1)})}Z(()=>ue=ot(we,1,"selected-methods-list svelte-68bixt",null,ue,{final:i()!==null&&i()!==void 0})),S(t,je),pe()}var If=V("<p> </p>"),Df=V("<!> <!>",1),Of=V('<div class="downloads-block svelte-qnpw5u"><!></div>'),qf=V('<div class="prep-creator svelte-qnpw5u"><!></div> <!> <!>',1),Vf=V(`<div class="help-text svelte-qnpw5u"><p class="svelte-qnpw5u">In this tab you can create a chain of preprocessing methods (<em>preprocessing model</em>), tune their order and parameters, and check how your data look like before and after preprocessing. When you done you can dowload the model and the preprocessed data to be used in other apps. All you need is just to load your data from a single CSV file or from one or several SPC files.</p> <p class="svelte-qnpw5u"><strong>CSV file</strong><br/> CSV file should contain data as numeric values delimited by comma (with dot as decimal separator) or
               by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-qnpw5u">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. In this case, select <em>values</em> option for the header and you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-qnpw5u">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file.</p> <p class="svelte-qnpw5u">If your CSV file contains a column, which is not a part of the main datawith, e.g. with <strong>group labels</strong> (classes, subsets, etc.) or <strong>response values</strong>, you need to set corresponding option in the dialog box. It is assumed that this column is next to the column with row labels or is the first column of row labels are absent.</p> <p class="svelte-qnpw5u"><strong>SPC files</strong><br/> You can also load spectral data directly from Galactic Industries SPC data files. The app supports both single spectrum in a file and files with multiple spectra, however only 2-way datasets can be loaded. You can select several SPC files to load (hold Ctrl or Shift when selecting), in this case they will be combined together into the same dataset.</p> <p class="svelte-qnpw5u">After the data is loaded you will be able to create and tune the sequence of preprocessing methods. The result will be shown on a plot for 30 randomly selected rows. To apply the methods to whole data and then dowload the preprocessed values and the model, just click <em>Finalize</em> button.</p></div>`),Uf=V('<div class="app-container svelte-qnpw5u"><div class="app-controls svelte-qnpw5u"><div class="data-loader svelte-qnpw5u"><!></div> <!></div> <div class="app-content svelte-qnpw5u"><!></div></div>');function Hf(t,e){me(e,!0);const r=A(()=>e.session.create);let n=X(Ce([-1,0,0])),o=X("neutral"),l=X(""),a=X(void 0);async function i(N,P,R){!P||!N||P.length===0||T(a,e.WASM().then(B=>{T(o,"applying");const j=hl(B,N.values,N.nresp,P,!1,R),y=So(B,N.values,N.nresp,j,!1,!1),U=kl(Qo(N),y);j.info=s(r).prepmeta,s(r).prepmodel=j,s(r).prepdata=vl(U,s(r).prepmodel)}).catch(B=>{s(r).prepmodel=null,s(r).prepdata=null,console.error(B),T(o,"error"),T(l,B,!0)}),!0)}function c(N){const P=s(r).rawdata.values.ncols-s(r).rawdata.nresp;s(r).rawdata&&N>=0&&N<P&&N<s(r).right&&(s(r).left=N)}function u(N){const P=s(r).rawdata.values.ncols-s(r).rawdata.nresp;s(r).rawdata&&N<=P&&N>s(r).left&&(s(r).right=N)}function f(){i(s(r).rawdata,s(r).prepobj,[])}function d(){s(r).prepmodel=null,s(r).prepdata=null}fe(()=>{s(r).rawdata===null&&(s(r).left=0,s(r).right=0,s(r).prepdata=null,s(r).rawdataShort=null,s(r).prepdataShort=null,s(r).prepmodel=null,s(r).prepobj=[],T(n,[-1,-1,-1],!0))}),fe(()=>{(!s(r).prepobj||s(r).prepobj.length===0)&&(s(r).prepdata=null,s(r).prepdataShort=null,T(n,[-1,-1,-1],!0))}),fe(()=>{const N=Kt(()=>JSON.stringify(e.session,Tn));e.backupSession(N,s(r).rawdata,s(r).prepdata,s(r).prepdataShort)});var v=Uf(),h=I(v),m=I(h),p=I(m);Sl(p,{setLeft:c,setRight:u,get rawdata(){return s(r).rawdata},set rawdata(N){s(r).rawdata=N}});var g=z(m,2);{var b=N=>{var P=qf(),R=W(P),B=I(R);Bf(B,{get WASM(){return e.WASM},get rawdata(){return s(r).rawdata},get left(){return s(r).left},get right(){return s(r).right},setLeft:c,",":!0,setRight:u,reset:d,finalize:f,get prepmodel(){return s(r).prepmodel},set prepmodel(K){s(r).prepmodel=K},get prepdata(){return s(r).prepdata},set prepdata(K){s(r).prepdata=K},get prepdataShort(){return s(r).prepdataShort},set prepdataShort(K){s(r).prepdataShort=K},get rawdataShort(){return s(r).rawdataShort},set rawdataShort(K){s(r).rawdataShort=K},get varind(){return s(n)},set varind(K){T(n,K,!0)},get prepobj(){return s(r).prepobj},set prepobj(K){s(r).prepobj=K},get meta(){return s(r).prepmeta},set meta(K){s(r).prepmeta=K}});var j=z(R,2);{var y=K=>{le(K,{status:"error",children:(O,re)=>{var je=If(),we=I(je);Z(()=>Fe(we,s(l))),S(O,je)},$$slots:{default:!0}})};q(j,K=>{(s(o)==="error"||s(l))&&K(y)})}var U=z(j,2);{var J=K=>{var O=Of(),re=I(O);le(re,{label:"Download",children:(je,we)=>{var ue=Df(),ve=W(ue);mr(ve,{text:"Data",onclick:()=>El(s(r).prepdata,s(r).left,s(r).right)});var Ee=z(ve,2);mr(Ee,{text:"Model",onclick:()=>Ac(s(r).prepmodel)}),S(je,ue)},$$slots:{default:!0}}),S(K,O)};q(U,K=>{s(r).prepmodel&&s(r).prepdata&&K(J)})}S(N,P)};q(g,N=>{s(r).rawdata&&N(b)})}var C=z(h,2),_=I(C);{var w=N=>{var P=Vf();S(N,P)},L=N=>{var P=ke(),R=W(P);{var B=j=>{var y=ke(),U=W(y);an(U,()=>s(r).rawdata,J=>{Ul(J,{get rawdata(){return s(r).rawdataShort},get prepdata(){return s(r).prepdataShort},get left(){return s(r).left},get right(){return s(r).right},get varind(){return s(n)}})}),S(j,y)};q(R,j=>{s(r).rawdataShort&&s(r).prepdataShort&&j(B)},!0)}S(N,P)};q(_,N=>{s(r).rawdata?N(L,!1):N(w)})}S(t,v),pe()}var Wf=V('<span class="info-details svelte-1i6mxvs"> <span class="svelte-1i6mxvs"><!></span></span>');function Yf(t,e){me(e,!0);var r=ke(),n=W(r);{var o=a=>{var i=Wf(),c=I(i),u=z(c),f=I(u);vt(f,()=>Yi(e.prepmodel)),Z(()=>Fe(c,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),S(a,i)},l=a=>{var i=oi("skipped");S(a,i)};q(n,a=>{e.prepmodel.ml?a(o):a(l,!1)})}S(t,r),pe()}var Gf=V('<span>file:</span> <span class="file-name svelte-fhw710"> </span><br/>',1),Kf=V('<p class="info-text svelte-fhw710"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Xf(t,e){me(e,!0);var r=ke(),n=W(r);{var o=l=>{le(l,{name:"info",children:(a,i)=>{var c=Kf(),u=W(c),f=z(I(u),3);{var d=g=>{var b=Gf(),C=z(W(b),2),_=I(C);Z(()=>{E(C,"title",e.model.fileName),Fe(_,e.model.fileName)}),S(g,b)};q(f,g=>{e.model.fileName&&g(d)})}var v=z(f),h=z(v,3);Yf(h,{get prepmodel(){return e.model}});var m=z(u,2);{var p=g=>{Mn(g,{get onclick(){return e.reset}})};q(m,g=>{e.reset&&g(p)})}Z(()=>Fe(v,` ${e.model.npred??""} `)),S(a,c)},$$slots:{default:!0}})};q(n,l=>{e.model&&l(o)})}S(t,r),pe()}var Jf=V("<!> <!>",1),Zf=V("<p><!></p>"),Qf=V("<!> <!>",1);function $f(t,e){me(e,!0);let r=M(e,"model",15),n=X(""),o=X("neutral"),l=X("");function a(g){try{const b=JSON.parse(g,bl);if(Array.isArray(b.v)&&(b.v=Float64Array.from(b.v)),!Object.keys(b).includes("class")||b.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");b.fileName=s(u),r(b),T(o,"success"),T(l,"")}catch(b){console.log(b),r(null),T(o,"error"),T(l,b,!0)}}function i(g){const b=new FileReader;b.onload=()=>{a(b.result)},b.readAsText(s(n))}function c(){T(n,""),r(null),T(o,"neutral"),T(l,"")}fe(()=>{s(n)===null?(r(null),T(o,"neutral"),T(l,"")):(T(o,"neutral"),T(l,""))}),fe(()=>{(r()===null||r()===0)&&T(n,"")});let u=A(()=>s(n)?s(n).name.replace(/\.[^/.]+$/,""):"");var f=Qf(),d=W(f);{var v=g=>{var b=Jf(),C=W(b);an(C,()=>s(n),L=>{le(L,{name:"file-selector",children:(N,P)=>{yl(N,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return s(n)},set file(R){T(n,R,!0)}})},$$slots:{default:!0}})});var _=z(C,2);{var w=L=>{le(L,{name:"load-button",label:" ",children:(N,P)=>{mr(N,{onclick:i,text:"Load"})},$$slots:{default:!0}})};q(_,L=>{s(n)&&L(w)})}S(g,b)},h=g=>{Xf(g,{get model(){return r()},reset:c})};q(d,g=>{r()?g(h,!1):g(v)})}var m=z(d,2);{var p=g=>{le(g,{name:"error",status:"error",children:(b,C)=>{var _=Zf(),w=I(_);vt(w,()=>s(l)),S(b,_)},$$slots:{default:!0}})};q(m,g=>{(s(o)==="error"||s(l))&&g(p)})}S(t,f),pe()}var ed=V('<div class="data-loader svelte-1s5rpr8"><!></div>'),td=V('<p class="svelte-1s5rpr8"><strong>Step 1.</strong></p> <p class="svelte-1s5rpr8">Load JSON file with a model you saved from <em>Create</em> tab.</p>',1),rd=V('<p class="svelte-1s5rpr8"><strong>Step 2.</strong></p> <p class="svelte-1s5rpr8">Load your data from single CSV file or single/multiple SPC files. See details about data file in the <em>Create</em> tab.</p>',1),nd=V('<div class="help-text svelte-1s5rpr8"><p class="svelte-1s5rpr8">In this tab you can apply preprocessing model, developed in <em>Create</em> tab to a new dataset.</p> <!></div>'),od=V('<div class="app-container svelte-1s5rpr8"><div class="app-controls svelte-1s5rpr8"><div class="model-loader svelte-1s5rpr8"><!></div> <!></div> <div class="app-content svelte-1s5rpr8"><!></div></div>');function sd(t,e){me(e,!0);const r=A(()=>e.session.apply);fe(()=>{s(r).model===null&&(s(r).rawdata=null,s(r).rawdataShort=null,s(r).prepdata=null)}),fe(()=>{s(r).model&&(s(r).left=-1,s(r).right=-1)}),fe(()=>{s(r).rawdata===null&&(s(r).prepdata=null,s(r).prepdataShort=null)}),fe(()=>{s(r).rawdataShort=s(r).rawdata?jo(s(r).rawdata,30):null}),fe(()=>{s(r).prepdataShort=s(r).prepdata?jo(s(r).prepdata,30):null}),fe(()=>{const h=Kt(()=>JSON.stringify(e.session,Tn));e.backupSession(h,s(r).rawdata,s(r).prepdata,s(r).model)});var n=od(),o=I(n),l=I(o),a=I(l);$f(a,{get model(){return s(r).model},set model(h){s(r).model=h},get left(){return s(r).left},set left(h){s(r).left=h},get right(){return s(r).right},set right(h){s(r).right=h}});var i=z(l,2);{var c=h=>{var m=ed(),p=I(m);Sl(p,{get WASM(){return e.WASM},get model(){return s(r).model},get left(){return s(r).left},get right(){return s(r).right},get rawdata(){return s(r).rawdata},set rawdata(g){s(r).rawdata=g},get prepdata(){return s(r).prepdata},set prepdata(g){s(r).prepdata=g}}),S(h,m)};q(i,h=>{s(r).model&&h(c)})}var u=z(o,2),f=I(u);{var d=h=>{var m=nd(),p=z(I(m),2);{var g=C=>{var _=td();S(C,_)},b=C=>{var _=rd();S(C,_)};q(p,C=>{s(r).model?C(b,!1):C(g)})}S(h,m)},v=h=>{var m=ke(),p=W(m);{var g=b=>{var C=ke(),_=W(C);an(_,()=>s(r).rawdataShort,w=>{Ul(w,{get rawdata(){return s(r).rawdataShort},get prepdata(){return s(r).prepdataShort},get left(){return s(r).left},get right(){return s(r).right}})}),S(b,C)};q(p,b=>{s(r).rawdataShort&&s(r).prepdataShort&&b(g)},!0)}S(h,m)};q(f,h=>{s(r).rawdata?h(v,!1):h(d)})}S(t,n),pe()}var ld=V('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function ad(t,e){me(e,!0);let r=M(e,"isDark",3,!1);function n(d){d.key==="Escape"&&e.closeModal()}var o=ld();Cr("keydown",Jn,n);let l;var a=I(o),i=I(a),c=I(i);c.__click=function(...d){e.closeModal?.apply(this,d)};var u=z(i,2),f=I(u);Kr(f,()=>e.children),Z(()=>l=ot(o,1,"drop svelte-oie633",null,l,{isdark:r()})),Hs(7,o,()=>Hl),S(t,o),pe()}Qe(["click"]);var id=V('<sup style="color:red">β</sup>'),cd=V('<li><button class="svelte-1josccy"> </button></li>'),ud=V("<div><!></div>"),fd=V('<div class="info-container svelte-1josccy"><!></div>'),dd=V('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function vd(t,e){me(e,!0);let r=M(e,"tabs",19,()=>[]),n=M(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let l=X(!1),a=X(void 0),i=X("Current session "),c=X(!1);function u(P){T(i,P,!0),T(c,!0),setTimeout(()=>{T(i,"Current session "),T(c,!1)},1e3)}function f(){T(l,!0)}function d(){T(l,!1)}function v(P){s(a).tab=P}function h(){const P=indexedDB.open(o,1);P.onsuccess=R=>{const j=R.target.result.transaction(e.appID,"readwrite");j.objectStore(e.appID).delete("session"),j.oncomplete=()=>{T(a,e.initSession(),!0),u("Session was reinitialzed.")},j.onerror=()=>console.error("Failed to session from DB.")}}function m(P,R){window.localStorage.removeItem(e.appID+"-blocked");const B=indexedDB.open(o,1);B.onsuccess=j=>{const J=j.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);J.put(P,"session"),J.put(Co(new Date),"session-update")}}function p(){new Promise((P,R)=>{const B=indexedDB.open(o,1);B.onsuccess=j=>{const K=j.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");K.onsuccess=()=>P(K.result),K.onerror=()=>R(K.error)}}).then(P=>{g(P),T(i,"Last session is restored "),T(c,!0),setTimeout(()=>{T(i,"Current session "),T(c,!1)},1500)}).catch(P=>{console.error(P),T(a,e.initSession(),!0)})}function g(P){if(!P||P==="undefined"){T(a,e.initSession(),!0);return}const R=JSON.parse(P,bl);T(a,e.checkSession(R)?R:e.initSession(e.appID),!0)}function b(){const P=Co(new Date),R=e.appID+"-session-"+P+".json";s(a).date=P;const B=JSON.stringify(s(a),Tn),j=new Blob([B],{type:"text/json"}),y=window.URL.createObjectURL(j),U=document.createElement("a");U.setAttribute("href",y),U.setAttribute("download",R),U.click()}function C(P){const R=new FileReader;R.onload=()=>{g(R.result),P.target.value=""},R.readAsText(P.target.files[0])}function _(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&h()}Ti(()=>{const P=e.appID,R=indexedDB.open(o,1);R.onupgradeneeded=B=>{const j=B.target.result;j.objectStoreNames.contains(P)||j.createObjectStore(P)},R.onsuccess=B=>{p()}});var w=ke(),L=W(w);{var N=P=>{var R=dd(),B=I(R),j=I(B),y=I(j),U=z(y,2),J=I(U),K=z(J);{var O=ee=>{var H=id();S(ee,H)};q(K,ee=>{n()&&ee(O)})}var re=z(U,2),je=I(re),we=z(j,2);it(we,21,r,dt,(ee,H,Q)=>{var oe=cd();let G;var ye=I(oe);ye.__click=()=>v(Q),ye.__keydown=()=>v(Q);var ge=I(ye);Z(()=>{G=ot(oe,1,"nav-item svelte-1josccy",null,G,{selected:s(a).tab===Q}),Fe(ge,s(H).name)}),S(ee,oe)});var ue=z(B,2),ve=I(ue);an(ve,()=>s(a).date,ee=>{var H=ke(),Q=W(H);it(Q,17,r,dt,(oe,G,ye)=>{var ge=ud();let Be;var k=I(ge);ao(k,()=>s(G).component,(F,D)=>{D(F,{get WASM(){return e.WASM},get session(){return s(a)},backupSession:m})}),Z(()=>Be=ot(ge,1,`tab-content tab-content-${s(G).label??""}`,"svelte-1josccy",Be,{hidden:s(a).tab!==ye})),S(oe,ge)}),S(ee,H)});var Ee=z(ue,2),Oe=I(Ee);let he;var _e=I(Oe),se=I(_e),te=z(_e,2),qe=I(te);qe.__change=C;var Ve=z(te,2);Ve.__click=b;var Ue=z(Ve,2);Ue.__click=_;var We=z(Oe,2),xe=I(We);xe.__click=f,xe.__keydown=f;var ze=z(xe,2);Kr(ze,()=>e.footer);var Xe=z(Ee,2);{var Y=ee=>{ad(ee,{closeModal:d,children:(H,Q)=>{var oe=fd(),G=I(oe);Kr(G,()=>e.info),S(H,oe)},$$slots:{default:!0}})};q(Xe,ee=>{s(l)&&ee(Y)})}Z(()=>{E(y,"alt",e.appShortTitle),Fe(J,e.appTitle),Fe(je,e.appSlogan),he=ot(Oe,1,"session svelte-1josccy",null,he,{"no-buttons":s(c)}),Fe(se,s(i))}),S(P,R)};q(L,P=>{s(a)&&P(N)})}S(t,w),pe()}Qe(["click","keydown","change"]);const Ad="modulepreload",Cd=function(t){return"/"+t},Nd={},hd=function(e,r,n){let o=Promise.resolve();function l(a){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=a,window.dispatchEvent(i),!i.defaultPrevented)throw a}return o.then(a=>{for(const i of a||[])i.status==="rejected"&&l(i.reason);return e().catch(l)})};async function gd(t={}){var e,r=t,n=!!globalThis.window,o=!!globalThis.WorkerGlobalScope,l=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer";if(l){const{createRequire:k}=await hd(async()=>{const{createRequire:F}=await Promise.resolve().then(()=>wd);return{createRequire:F}},void 0);var a=k(Zt&&Zt.tagName.toUpperCase()==="SCRIPT"&&Zt.src||new URL("prep.js",document.baseURI).href)}var i="./this.program",c=(k,F)=>{throw F},u=Zt&&Zt.tagName.toUpperCase()==="SCRIPT"&&Zt.src||new URL("prep.js",document.baseURI).href,f="",d,v;if(l){var h=a("fs");u.startsWith("file:")&&(f=a("path").dirname(a("url").fileURLToPath(u))+"/"),v=k=>(k=_(k)?new URL(k):k,h.readFileSync(k)),d=async k=>(k=_(k)?new URL(k):k,h.readFileSync(k,void 0)),1<process.argv.length&&(i=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),c=(k,F)=>{throw process.exitCode=k,F}}else if(n||o){try{f=new URL(".",u).href}catch{}o&&(v=k=>{var F=new XMLHttpRequest;return F.open("GET",k,!1),F.responseType="arraybuffer",F.send(null),new Uint8Array(F.response)}),d=async k=>{if(_(k))return new Promise((D,$)=>{var ae=new XMLHttpRequest;ae.open("GET",k,!0),ae.responseType="arraybuffer",ae.onload=()=>{ae.status==200||ae.status==0&&ae.response?D(ae.response):$(ae.status)},ae.onerror=$,ae.send(null)});var F=await fetch(k,{credentials:"same-origin"});if(F.ok)return F.arrayBuffer();throw Error(F.status+" : "+F.url)}}var m=console.log.bind(console),p=console.error.bind(console),g,b=!1,C,_=k=>k.startsWith("file://"),w,L,N,P,R,B=!1;function j(){var k=ye.buffer;N=new Int8Array(k),P=new Uint8Array(k),r.HEAP32=new Int32Array(k),R=new Uint32Array(k),r.HEAPF64=new Float64Array(k),new BigInt64Array(k),new BigUint64Array(k)}function y(k){throw r.onAbort?.(k),k="Aborted("+k+")",p(k),b=!0,k=new WebAssembly.RuntimeError(k+". Build with -sASSERTIONS for more info."),L?.(k),k}var U;async function J(k){if(!g)try{var F=await d(k);return new Uint8Array(F)}catch{}if(k==U&&g)k=new Uint8Array(g);else if(v)k=v(k);else throw"both async and sync fetching of the wasm failed";return k}async function K(k,F){try{var D=await J(k);return await WebAssembly.instantiate(D,F)}catch($){p(`failed to asynchronously prepare wasm: ${$}`),y($)}}async function O(k){var F=U;if(!g&&!_(F)&&!l)try{var D=fetch(F,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(D,k)}catch($){p(`wasm streaming compile failed: ${$}`),p("falling back to ArrayBuffer instantiation")}return K(F,k)}class re{name="ExitStatus";constructor(F){this.message=`Program terminated with exit(${F})`,this.status=F}}var je=k=>{for(;0<k.length;)k.shift()(r)},we=[],ue=[],ve=()=>{var k=r.preRun.shift();ue.push(k)},Ee=!0,Oe=0,he={},_e=k=>{C=k,Ee||0<Oe||(r.onExit?.(k),b=!0),c(k,new re(k))},se=k=>{if(!b)try{if(k(),!(Ee||0<Oe))try{C=k=C,_e(k)}catch(F){F instanceof re||F=="unwind"||c(1,F)}}catch(F){F instanceof re||F=="unwind"||c(1,F)}},te=globalThis.TextDecoder&&new TextDecoder,qe=(k,F=0)=>{for(var D=F,$=D+void 0;k[D]&&!(D>=$);)++D;if(16<D-F&&k.buffer&&te)return te.decode(k.subarray(F,D));for($="";F<D;){var ae=k[F++];if(ae&128){var Ye=k[F++]&63;if((ae&224)==192)$+=String.fromCharCode((ae&31)<<6|Ye);else{var Ie=k[F++]&63;ae=(ae&240)==224?(ae&15)<<12|Ye<<6|Ie:(ae&7)<<18|Ye<<12|Ie<<6|k[F++]&63,65536>ae?$+=String.fromCharCode(ae):(ae-=65536,$+=String.fromCharCode(55296|ae>>10,56320|ae&1023))}}else $+=String.fromCharCode(ae)}return $},Ve={},Ue=()=>{if(!We){var k={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:i||"./this.program"},F;for(F in Ve)Ve[F]===void 0?delete k[F]:k[F]=Ve[F];var D=[];for(F in k)D.push(`${F}=${k[F]}`);We=D}return We},We,xe=(k,F,D)=>{var $=P;if(!(0<D))return 0;var ae=F;D=F+D-1;for(var Ye=0;Ye<k.length;++Ye){var Ie=k.codePointAt(Ye);if(127>=Ie){if(F>=D)break;$[F++]=Ie}else if(2047>=Ie){if(F+1>=D)break;$[F++]=192|Ie>>6,$[F++]=128|Ie&63}else if(65535>=Ie){if(F+2>=D)break;$[F++]=224|Ie>>12,$[F++]=128|Ie>>6&63,$[F++]=128|Ie&63}else{if(F+3>=D)break;$[F++]=240|Ie>>18,$[F++]=128|Ie>>12&63,$[F++]=128|Ie>>6&63,$[F++]=128|Ie&63,Ye++}}return $[F]=0,F-ae},ze=k=>{for(var F=0,D=0;D<k.length;++D){var $=k.charCodeAt(D);127>=$?F++:2047>=$?F+=2:55296<=$&&57343>=$?(F+=4,++D):F+=3}return F},Xe=[null,[],[]],Y=()=>{if(l){var k=a("crypto");return F=>k.randomFillSync(F)}return F=>crypto.getRandomValues(F)},ee=k=>{(ee=Y())(k)};if(r.noExitRuntime&&(Ee=r.noExitRuntime),r.print&&(m=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(g=r.wasmBinary),r.thisProgram&&(i=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.shift()();r.ccall=(k,F,D,$)=>{var ae={string:De=>{var ct=0;if(De!=null&&De!==0){ct=ze(De)+1;var pr=oe(ct);xe(De,pr,ct),ct=pr}return ct},array:De=>{var ct=oe(De.length);return N.set(De,ct),ct}};k=r["_"+k];var Ye=[],Ie=0;if($)for(var $e=0;$e<$.length;$e++){var St=ae[D[$e]];St?(Ie===0&&(Ie=G()),Ye[$e]=St($[$e])):Ye[$e]=$[$e]}return D=k(...Ye),D=(function(De){return Ie!==0&&Q(Ie),F==="string"?De?qe(P,De):"":F==="boolean"?!!De:De})(D)};var H,Q,oe,G,ye,ge={g:()=>y(""),j:()=>{Ee=!1,Oe=0},k:(k,F)=>{if(he[k]&&(clearTimeout(he[k].id),delete he[k]),!F)return 0;var D=setTimeout(()=>{delete he[k],se(()=>H(k,performance.now()))},F);return he[k]={id:D,R:F},0},a:()=>Date.now(),c:k=>p(k?qe(P,k):""),b:()=>performance.now(),l:k=>{var F=P.length;if(k>>>=0,2147483648<k)return!1;for(var D=1;4>=D;D*=2){var $=F*(1+.2/D);$=Math.min($,k+100663296);e:{$=(Math.min(2147483648,65536*Math.ceil(Math.max(k,$)/65536))-ye.buffer.byteLength+65535)/65536|0;try{ye.grow($),j();var ae=1;break e}catch{}ae=void 0}if(ae)return!0}return!1},e:(k,F)=>{var D=0,$=0,ae;for(ae of Ue()){var Ye=F+D;R[k+$>>2]=Ye,D+=xe(ae,Ye,1/0)+1,$+=4}return 0},f:(k,F)=>{var D=Ue();R[k>>2]=D.length,k=0;for(var $ of D)k+=ze($)+1;return R[F>>2]=k,0},h:(k,F,D,$)=>{for(var ae=0,Ye=0;Ye<D;Ye++){var Ie=R[F>>2],$e=R[F+4>>2];F+=8;for(var St=0;St<$e;St++){var De=k,ct=P[Ie+St],pr=Xe[De];ct===0||ct===10?((De===1?m:p)(qe(pr)),pr.length=0):pr.push(ct)}ae+=$e}return R[$>>2]=ae,0},i:_e,d:(k,F)=>(ee(P.subarray(k,k+F)),0)},Be;return Be=await(async function(){function k(D){return D=Be=D.exports,r._malloc=D.o,r._free=D.p,r._prepfit_wasm=D.q,r._prepapply_wasm=D.r,H=D.s,r._strdup=D.t,r._strndup=D.u,r.__ZdaPv=D.v,r.__ZdaPvm=D.w,r.__ZdlPv=D.x,r.__ZdlPvm=D.y,r.__Znaj=D.z,r.__ZnajSt11align_val_t=D.A,r.__Znwj=D.B,r.__ZnwjSt11align_val_t=D.C,r.___libc_calloc=D.D,r.___libc_free=D.E,r.___libc_malloc=D.F,r.___libc_realloc=D.G,r._emscripten_builtin_malloc=D.H,r._emscripten_builtin_calloc=D.I,r._emscripten_builtin_free=D.J,r._emscripten_builtin_realloc=D.K,r._malloc_size=D.L,r._malloc_usable_size=D.M,r._reallocf=D.N,Q=D.O,oe=D.P,G=D.Q,ye=D.m,j(),Be}var F={a:ge};return r.instantiateWasm?new Promise(D=>{r.instantiateWasm(F,($,ae)=>{D(k($))})}):(U??=r.locateFile?r.locateFile?r.locateFile("prep_wasm.wasm",f):f+"prep_wasm.wasm":new URL("/prep/prep.wasm",Zt&&Zt.tagName.toUpperCase()==="SCRIPT"&&Zt.src||new URL("prep.js",document.baseURI).href).href,k((await O(F)).instance))})(),(function(){function k(){if(r.calledRun=!0,!b){if(B=!0,Be.n(),w?.(r),r.onRuntimeInitialized?.(),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var F=r.postRun.shift();we.push(F)}je(we)}}if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ve();je(ue),r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),k()},1)):k()})(),B?e=r:e=new Promise((k,F)=>{w=k,L=F}),e}var md=V('<p>Current release: <span>1.2.3</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=Preprocessing app">help@mda.tools</a> | <a class="paper-link" href="/prep/references.pdf" download="">references</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmesy9tzG9OzOcSCFigU5hh">video lessons</a></p>'),pd=V(`<h2>Data preprocessing</h2> <p>Interactive web-application for data preprocessing. Most of the methods it contains are
      applicable for different kinds of spectra. The selected chain of methods and their parameters can be saved as preprocessing model and be applied later to another dataset or incorporated to other methods (PCA, PLS, etc.).</p> <h3>v. 1.2.3</h3> <p class="release-info">released 16/02/2026</p> <ul><li>Fixed a bug occasionally leading to an error when working with datasets with response column.</li></ul> <h3>v. 1.2.2</h3> <p class="release-info">released 12/01/2026</p> <ul><li>Small improvements and updates.</li></ul> <h3>v. 1.2.1</h3> <p class="release-info">released 04/09/2025</p> <ul><li>Small improvements to session mechanism.</li></ul>`,1);function bd(t,e){me(e,!1);function r(l){const a=Object.keys(l);if(!["date","tab","create","apply"].every(c=>a.includes(c)))return!1;const i=Object.keys(l.create);return!!["rawdata","prepdata","rawdataShort","prepdataShort","prepmodel","left","right","varind"].every(c=>i.includes(c))}function n(){return{date:Co(new Date),tab:0,create:{rawdata:0,prepdata:0,rawdataShort:0,prepdataShort:0,prepmodel:0,prepobj:[],prepmeta:0,left:0,right:0,varind:[-1,-1,-1]},apply:{rawdata:0,prepdata:0,model:0,left:0,right:0,varind:[-1,-1,-1]}}}const o=[{name:"Create",label:"create",component:Hf},{name:"Apply",label:"apply",component:sd}];Ci(),vd(t,{appID:"prep",appTitle:"Preprocessing",appShortTitle:"Preprocessing",appSlogan:"Make your data great again",get WASM(){return gd},get tabs(){return o},initSession:n,checkSession:r,footer:i=>{var c=md();S(i,c)},info:i=>{var c=pd();S(i,c)},$$slots:{footer:!0,info:!0}}),pe()}si(bd,{target:document.body});const wd=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=prep.js.map
