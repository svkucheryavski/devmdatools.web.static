var uv=Object.defineProperty;var Ps=qe=>{throw TypeError(qe)};var fv=(qe,ze,rt)=>ze in qe?uv(qe,ze,{enumerable:!0,configurable:!0,writable:!0,value:rt}):qe[ze]=rt;var or=(qe,ze,rt)=>fv(qe,typeof ze!="symbol"?ze+"":ze,rt),va=(qe,ze,rt)=>ze.has(qe)||Ps("Cannot "+rt);var ve=(qe,ze,rt)=>(va(qe,ze,"read from private field"),rt?rt.call(qe):ze.get(qe)),ht=(qe,ze,rt)=>ze.has(qe)?Ps("Cannot add the same private member more than once"):ze instanceof WeakSet?ze.add(qe):ze.set(qe,rt),At=(qe,ze,rt,Er)=>(va(qe,ze,"write to private field"),Er?Er.call(qe,rt):ze.set(qe,rt),rt),gn=(qe,ze,rt)=>(va(qe,ze,"access private method"),rt);(function(){"use strict";var Cn,fn,dn,yr,zn,Tn,Vr,vn,xr,cr,Ur,ur,Ns,Rs,ha,kr,hn,Pn,co,Ls,Cs;var qe=document.createElement("style");qe.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1986c5z{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1986c5z:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1986c5z:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1986c5z:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1986c5z{display:none}.control-element.error.svelte-1986c5z{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1986c5z{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1986c5z>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1986c5z>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1986c5z>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1986c5z>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1986c5z .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1986c5z .range-value_left,.control-element.svelte-1986c5z .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1986c5z .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1986c5z .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1986c5z .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1986c5z .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1986c5z .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1986c5z .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1986c5z .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1986c5z .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1986c5z .textinput>input:active::placeholder,.control-element.svelte-1986c5z .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1986c5z .textinput>input:focus,.control-element.svelte-1986c5z .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .textinput.error>input,.control-element.svelte-1986c5z .textinput.error>input:focus,.control-element.svelte-1986c5z .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1986c5z .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1986c5z .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1986c5z .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-x8qn01{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-x8qn01{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-x8qn01{padding:0 .25em 0 .5em}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-x8qn01{width:100%;height:calc(100% - 15px)}@media (min-width:1100px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-x8qn01{grid-template-columns:1fr 400px}}span.svelte-2gffce{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-2gffce:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-2gffce{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-15cx0gr{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-15cx0gr>.control-element:last-child .button-down,.selected-methods-list.svelte-15cx0gr>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-15cx0gr:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-15cx0gr{margin-top:1em;font-size:.9em}.methods-list.svelte-15cx0gr>div{background:#ebf0f0}.final.svelte-15cx0gr .button-up,.final.svelte-15cx0gr .button-down,.final.svelte-15cx0gr .button-cancel{visibility:hidden}.app-container.svelte-1jqwqd2{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1jqwqd2{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1jqwqd2{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1jqwqd2>div:where(.svelte-1jqwqd2){border-radius:.25rem}.help-text.svelte-1jqwqd2{margin-top:.25rem}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1jqwqd2>p:where(.svelte-1jqwqd2):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.downloads-block.svelte-1jqwqd2{margin-top:.85em}.downloads-block.svelte-1jqwqd2>div:hover,.downloads-block.svelte-1jqwqd2>div{background:#fff0c8}.downloads-block.svelte-1jqwqd2>div button{margin:0 .25em}.downloads-block.svelte-1jqwqd2>div .button:hover{background:#fffff8;border-color:#606570;color:#606570}@media (min-width:1300px){.app-container.svelte-1jqwqd2{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1jqwqd2{grid-template-columns:min(320px,30%) 1fr}}.info-details.svelte-1l1cvmx{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul{padding:0;margin:0;list-style:none}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul>li{padding:.25em 0}.info-details.svelte-1l1cvmx>span:where(.svelte-1l1cvmx) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-1l1cvmx:hover>span:where(.svelte-1l1cvmx){visibility:visible}.info{position:relative}.info-text.svelte-1dxrrpt{line-height:1.5em}.info-text.svelte-1dxrrpt>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1dxrrpt>.file-name:where(.svelte-1dxrrpt){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}.app-container.svelte-sqi2x7{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-sqi2x7{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-sqi2x7{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-sqi2x7>div:where(.svelte-sqi2x7){border-radius:.25rem}.help-text.svelte-sqi2x7{margin-top:.25rem}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-sqi2x7>p:where(.svelte-sqi2x7):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-sqi2x7{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-sqi2x7{grid-template-columns:min(320px,30%) 1fr}}.drop.svelte-q7wo60{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-q7wo60{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-q7wo60{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-q7wo60{grid-area:header}.close-button.svelte-q7wo60{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-q7wo60:hover{background-color:#4e5052}.isdark.svelte-q7wo60,.isdark.svelte-q7wo60 .header:where(.svelte-q7wo60),.isdark.svelte-q7wo60 .body:where(.svelte-q7wo60){background-color:#606060}.isdark.svelte-q7wo60 .close-button:where(.svelte-q7wo60){color:#433201;background-color:#c2be9b}.isdark.svelte-q7wo60 .close-button:where(.svelte-q7wo60):hover{background-color:#f0f674}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(qe);var ze=typeof document<"u"?document.currentScript:null;const rt=!1;var Er=Array.isArray,Ms=Array.prototype.indexOf,ho=Array.from,go=Object.defineProperty,fr=Object.getOwnPropertyDescriptor,ga=Object.getOwnPropertyDescriptors,ma=Object.prototype,Fs=Array.prototype,Ln=Object.getPrototypeOf,pa=Object.isExtensible;function Xr(t){return typeof t=="function"}const kt=()=>{};function js(t){return typeof(t==null?void 0:t.then)=="function"}function qs(t){return t()}function Mn(t){for(var e=0;e<t.length;e++)t[e]()}function Bs(){var t,e,r=new Promise((n,o)=>{t=n,e=o});return{promise:r,resolve:t,reject:e}}function Fn(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const n of t)if(r.push(n),r.length===e)break;return r}const Ct=2,mo=4,jn=8,Jr=16,ar=32,Zr=64,wa=128,Rt=256,qn=512,ct=1024,Et=2048,Sr=4096,Wt=8192,Ar=16384,Bn=32768,Qr=65536,ba=1<<17,Is=1<<18,po=1<<19,wo=1<<20,bo=1<<21,_o=1<<22,Cr=1<<23,dr=Symbol("$state"),_a=Symbol("legacy props"),Ds=Symbol(""),yo=new class extends Error{constructor(){super(...arguments);or(this,"name","StaleReactionError");or(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Os(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function ya(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Vs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Us(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ws(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Hs(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ys(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Gs(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ks(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Js(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const In=1,Dn=2,xa=4,Zs=8,Qs=16,$s=1,ei=2,ti=4,ri=8,ni=16,oi=1,ai=2,li=4,ka=1,si=2,nt=Symbol(),ii="http://www.w3.org/1999/xhtml";let ci=!1;function Ea(t){return t===this.v}function Sa(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ui(t,e){return t!==e}function Aa(t){return!Sa(t,this.v)}let $r=!1,fi=!1;function di(){$r=!0}const vi=[];function Ca(t,e=!1){return On(t,new Map,"",vi)}function On(t,e,r,n,o=null){if(typeof t=="object"&&t!==null){var l=e.get(t);if(l!==void 0)return l;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Er(t)){var s=Array(t.length);e.set(t,s),o!==null&&e.set(o,s);for(var i=0;i<t.length;i+=1){var u=t[i];i in t&&(s[i]=On(u,e,r,n))}return s}if(Ln(t)===ma){s={},e.set(t,s),o!==null&&e.set(o,s);for(var c in t)s[c]=On(t[c],e,r,n);return s}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return On(t.toJSON(),e,r,n,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Be=null;function en(t){Be=t}function Kt(t){return za().get(t)}function hi(t,e){return za().set(t,e),e}function pe(t,e=!1,r){Be={p:Be,c:null,e:null,s:t,x:null,l:$r&&!e?{s:null,u:null,$:[]}:null}}function we(t){var e=Be,r=e.e;if(r!==null){e.e=null;for(var n of r)Va(n)}return Be=e.p,{}}function vr(){return!$r||Be!==null&&Be.l===null}function za(t){return Be===null&&ya(),Be.c??(Be.c=new Map(gi(Be)||void 0))}function gi(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}const mi=new WeakMap;function pi(t){var e=_e;if(e===null)return ye.f|=Cr,t;if((e.f&Bn)===0){if((e.f&wa)===0)throw!e.parent&&t instanceof Error&&Ta(t),t;e.b.error(t)}else xo(t,e)}function xo(t,e){for(;e!==null;){if((e.f&wa)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t instanceof Error&&Ta(t),t}function Ta(t){const e=mi.get(t);e&&(go(t,"message",{value:e.message}),go(t,"stack",{value:e.stack}))}let mn=[],ko=[];function Pa(){var t=mn;mn=[],Mn(t)}function wi(){var t=ko;ko=[],Mn(t)}function pn(t){mn.length===0&&queueMicrotask(Pa),mn.push(t)}function bi(){mn.length>0&&Pa(),ko.length>0&&wi()}function _i(){for(var t=_e.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&Os(),t}function wn(t){var e=Ct|Et,r=ye!==null&&(ye.f&Ct)!==0?ye:null;return _e===null||r!==null&&(r.f&Rt)!==0?e|=Rt:_e.f|=po,{ctx:Be,deps:null,effects:null,equals:Ea,f:e,fn:t,reactions:null,rv:0,v:nt,wv:0,parent:r??_e,ac:null}}function yi(t,e){let r=_e;r===null&&Vs();var n=r.b,o=void 0,l=Tr(nt),s=null,i=!ye;return Li(()=>{try{var u=t()}catch(v){u=Promise.reject(v)}var c=()=>u;o=(s==null?void 0:s.then(c,c))??Promise.resolve(u),s=o;var f=Ze,d=n.pending;i&&(n.update_pending_count(1),d||f.increment());const h=(v,g=void 0)=>{s=null,d||f.activate(),g?g!==yo&&(l.f|=Cr,mr(l,g)):((l.f&Cr)!==0&&(l.f^=Cr),mr(l,v)),i&&(n.update_pending_count(-1),d||f.decrement()),La()};if(o.then(h,v=>h(null,v||"unknown")),f)return()=>{queueMicrotask(()=>f.neuter())}}),new Promise(u=>{function c(f){function d(){f===o?u(l):c(o)}f.then(d,d)}c(o)})}function T(t){const e=wn(t);return Qa(e),e}function Eo(t){const e=wn(t);return e.equals=Aa,e}function Na(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Zt(e[r])}}function xi(t){for(var e=t.parent;e!==null;){if((e.f&Ct)===0)return e;e=e.parent}return null}function So(t){var e,r=_e;$t(xi(t));try{Na(t),e=rl(t)}finally{$t(r)}return e}function Ra(t){var e=So(t);if(t.equals(e)||(t.v=e,t.wv=el()),!Pr)if(hr!==null)hr.set(t,t.v);else{var r=(br||(t.f&Rt)!==0)&&t.deps!==null?Sr:ct;ut(t,r)}}function ki(t,e,r){const n=vr()?wn:Eo;if(e.length===0){r(t.map(n));return}var o=Ze,l=_e,s=Ei(),i=_i();Promise.all(e.map(u=>yi(u))).then(u=>{o==null||o.activate(),s();try{r([...t.map(n),...u])}catch(c){(l.f&Ar)===0&&xo(c,l)}o==null||o.deactivate(),La()}).catch(u=>{i.error(u)})}function Ei(){var t=_e,e=ye,r=Be;return function(){$t(t),Lt(e),en(r)}}function La(){$t(null),Lt(null),en(null)}const Vn=new Set;let Ze=null,hr=null,Ma=new Set,Un=[];function Fa(){const t=Un.shift();Un.length>0&&queueMicrotask(Fa),t()}let tn=[],Wn=null,Ao=!1;const io=class io{constructor(){ht(this,ur);ht(this,Cn,new Map);ht(this,fn,new Map);ht(this,dn,new Set);ht(this,yr,0);ht(this,zn,null);ht(this,Tn,!1);ht(this,Vr,[]);ht(this,vn,[]);ht(this,xr,[]);ht(this,cr,[]);ht(this,Ur,[]);or(this,"skipped_effects",new Set)}capture(e,r){ve(this,fn).has(e)||ve(this,fn).set(e,r),ve(this,Cn).set(e,e.v)}activate(){Ze=this}deactivate(){Ze=null;for(const e of Ma)if(Ma.delete(e),e(),Ze!==null)break}neuter(){At(this,Tn,!0)}flush(){tn.length>0?this.flush_effects():gn(this,ur,ha).call(this),Ze===this&&(ve(this,yr)===0&&Vn.delete(this),this.deactivate())}flush_effects(){var e=nn;Ao=!0;try{var r=0;for(Ja(!0);tn.length>0;){if(r++>1e3){var n,o;Ai()}gn(this,ur,Ns).call(this,tn),zr.clear()}}finally{Ao=!1,Ja(e),Wn=null}}increment(){At(this,yr,ve(this,yr)+1)}decrement(){if(At(this,yr,ve(this,yr)-1),ve(this,yr)===0){for(const e of ve(this,xr))ut(e,Et),gr(e);for(const e of ve(this,cr))ut(e,Et),gr(e);for(const e of ve(this,Ur))ut(e,Et),gr(e);At(this,xr,[]),At(this,cr,[]),this.flush()}else this.deactivate()}add_callback(e){ve(this,dn).add(e)}settled(){return(ve(this,zn)??At(this,zn,Bs())).promise}static ensure(e=!0){if(Ze===null){const r=Ze=new io;Vn.add(Ze),e&&io.enqueue(()=>{Ze===r&&r.flush()})}return Ze}static enqueue(e){Un.length===0&&queueMicrotask(Fa),Un.unshift(e)}};Cn=new WeakMap,fn=new WeakMap,dn=new WeakMap,yr=new WeakMap,zn=new WeakMap,Tn=new WeakMap,Vr=new WeakMap,vn=new WeakMap,xr=new WeakMap,cr=new WeakMap,Ur=new WeakMap,ur=new WeakSet,Ns=function(e){var l;tn=[];var r=null;if(Vn.size>1){r=new Map,hr=new Map;for(const[s,i]of ve(this,Cn))r.set(s,{v:s.v,wv:s.wv}),s.v=i;for(const s of Vn)if(s!==this)for(const[i,u]of ve(s,fn))r.has(i)||(r.set(i,{v:i.v,wv:i.wv}),i.v=u)}for(const s of e)gn(this,ur,Rs).call(this,s);if(ve(this,Vr).length===0&&ve(this,yr)===0){var n=ve(this,xr),o=ve(this,cr);At(this,xr,[]),At(this,cr,[]),At(this,Ur,[]),gn(this,ur,ha).call(this),ja(n),ja(o),(l=ve(this,zn))==null||l.resolve()}else{for(const s of ve(this,xr))ut(s,ct);for(const s of ve(this,cr))ut(s,ct);for(const s of ve(this,Ur))ut(s,ct)}if(r){for(const[s,{v:i,wv:u}]of r)s.wv<=u&&(s.v=i);hr=null}for(const s of ve(this,Vr))xn(s);for(const s of ve(this,vn))xn(s);At(this,Vr,[]),At(this,vn,[])},Rs=function(e){var f;e.f^=ct;for(var r=e.first;r!==null;){var n=r.f,o=(n&(ar|Zr))!==0,l=o&&(n&ct)!==0,s=l||(n&Wt)!==0||this.skipped_effects.has(r);if(!s&&r.fn!==null){if(o)r.f^=ct;else if((n&mo)!==0)ve(this,cr).push(r);else if(Kn(r))if((n&_o)!==0){var i=(f=r.b)!=null&&f.pending?ve(this,vn):ve(this,Vr);i.push(r)}else(r.f&Jr)!==0&&ve(this,Ur).push(r),xn(r);var u=r.first;if(u!==null){r=u;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)r=c.next,c=c.parent}},ha=function(){if(!ve(this,Tn))for(const e of ve(this,dn))e();ve(this,dn).clear()};let bn=io;function Si(t){var e;const r=bn.ensure(!1);for(;;){if(bi(),tn.length===0)return r===Ze&&r.flush(),Wn=null,e;r.flush_effects()}}function Ai(){try{Ys()}catch(t){xo(t,Wn)}}function ja(t){var e=t.length;if(e!==0){for(var r=0;r<e;r++){var n=t[r];if((n.f&(Ar|Wt))===0&&Kn(n)){var o=Gn;if(xn(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null&&n.ac===null?Ga(n):n.fn=null),Gn>o&&(n.f&wo)!==0)break}}for(;r<e;r+=1)gr(t[r])}}function gr(t){for(var e=Wn=t;e.parent!==null;){e=e.parent;var r=e.f;if(Ao&&e===_e&&(r&Jr)!==0)return;if((r&(Zr|ar))!==0){if((r&ct)===0)return;e.f^=ct}}tn.push(e)}const zr=new Map;function Tr(t,e){var r={f:0,v:t,reactions:null,equals:Ea,rv:0,wv:0};return r}function Y(t,e){const r=Tr(t);return Qa(r),r}function Co(t,e=!1,r=!0){var o;const n=Tr(t);return e||(n.equals=Aa),$r&&r&&Be!==null&&Be.l!==null&&((o=Be.l).s??(o.s=[])).push(n),n}function N(t,e,r=!1){ye!==null&&(!Qt||(ye.f&ba)!==0)&&vr()&&(ye.f&(Ct|Jr|_o|ba))!==0&&!(bt!=null&&bt.includes(t))&&Js();let n=r?Ne(e):e;return mr(t,n)}function mr(t,e){if(!t.equals(e)){var r=t.v;Pr?zr.set(t,e):zr.set(t,r),t.v=e,bn.ensure().capture(t,r),(t.f&Ct)!==0&&((t.f&Et)!==0&&So(t),ut(t,(t.f&Rt)===0?ct:Sr)),t.wv=el(),qa(t,Et),vr()&&_e!==null&&(_e.f&ct)!==0&&(_e.f&(ar|Zr))===0&&(Mt===null?Fi([t]):Mt.push(t))}return e}function zo(t){N(t,t.v+1)}function qa(t,e){var r=t.reactions;if(r!==null)for(var n=vr(),o=r.length,l=0;l<o;l++){var s=r[l],i=s.f;!n&&s===_e||((i&Et)===0&&ut(s,e),(i&Ct)!==0?qa(s,Sr):(i&Et)===0&&gr(s))}}function Ne(t){if(typeof t!="object"||t===null||dr in t)return t;const e=Ln(t);if(e!==ma&&e!==Fs)return t;var r=new Map,n=Er(t),o=Y(0),l=Nr,s=i=>{if(Nr===l)return i();var u=ye,c=Nr;Lt(null),$a(l);var f=i();return Lt(u),$a(c),f};return n&&r.set("length",Y(t.length)),new Proxy(t,{defineProperty(i,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Ks();var f=r.get(u);return f===void 0?f=s(()=>{var d=Y(c.value);return r.set(u,d),d}):N(f,c.value,!0),!0},deleteProperty(i,u){var c=r.get(u);if(c===void 0){if(u in i){const f=s(()=>Y(nt));r.set(u,f),zo(o)}}else N(c,nt),zo(o);return!0},get(i,u,c){var v;if(u===dr)return t;var f=r.get(u),d=u in i;if(f===void 0&&(!d||(v=fr(i,u))!=null&&v.writable)&&(f=s(()=>{var g=Ne(d?i[u]:nt),p=Y(g);return p}),r.set(u,f)),f!==void 0){var h=a(f);return h===nt?void 0:h}return Reflect.get(i,u,c)},getOwnPropertyDescriptor(i,u){var c=Reflect.getOwnPropertyDescriptor(i,u);if(c&&"value"in c){var f=r.get(u);f&&(c.value=a(f))}else if(c===void 0){var d=r.get(u),h=d==null?void 0:d.v;if(d!==void 0&&h!==nt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(i,u){var h;if(u===dr)return!0;var c=r.get(u),f=c!==void 0&&c.v!==nt||Reflect.has(i,u);if(c!==void 0||_e!==null&&(!f||(h=fr(i,u))!=null&&h.writable)){c===void 0&&(c=s(()=>{var v=f?Ne(i[u]):nt,g=Y(v);return g}),r.set(u,c));var d=a(c);if(d===nt)return!1}return f},set(i,u,c,f){var A;var d=r.get(u),h=u in i;if(n&&u==="length")for(var v=c;v<d.v;v+=1){var g=r.get(v+"");g!==void 0?N(g,nt):v in i&&(g=s(()=>Y(nt)),r.set(v+"",g))}if(d===void 0)(!h||(A=fr(i,u))!=null&&A.writable)&&(d=s(()=>Y(void 0)),N(d,Ne(c)),r.set(u,d));else{h=d.v!==nt;var p=s(()=>Ne(c));N(d,p)}var m=Reflect.getOwnPropertyDescriptor(i,u);if(m!=null&&m.set&&m.set.call(f,c),!h){if(n&&typeof u=="string"){var b=r.get("length"),_=Number(u);Number.isInteger(_)&&_>=b.v&&N(b,_+1)}zo(o)}return!0},ownKeys(i){a(o);var u=Reflect.ownKeys(i).filter(d=>{var h=r.get(d);return h===void 0||h.v!==nt});for(var[c,f]of r)f.v!==nt&&!(c in i)&&u.push(c);return u},setPrototypeOf(){Xs()}})}var To,Ba,Ia,Da;function Ci(){if(To===void 0){To=window,Ba=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Ia=fr(e,"firstChild").get,Da=fr(e,"nextSibling").get,pa(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),pa(r)&&(r.__t=void 0)}}function pr(t=""){return document.createTextNode(t)}function zt(t){return Ia.call(t)}function Hn(t){return Da.call(t)}function j(t,e){return zt(t)}function V(t,e){{var r=zt(t);return r instanceof Comment&&r.data===""?Hn(r):r}}function L(t,e=1,r=!1){let n=t;for(;e--;)n=Hn(n);return n}function zi(t){t.textContent=""}function Yn(){return!1}function Oa(t){_e===null&&ye===null&&Hs(),ye!==null&&(ye.f&Rt)!==0&&_e===null&&Ws(),Pr&&Us()}function Ti(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function Xt(t,e,r,n=!0){var o=_e;o!==null&&(o.f&Wt)!==0&&(t|=Wt);var l={ctx:Be,deps:null,nodes_start:null,nodes_end:null,f:t|Et,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{xn(l),l.f|=Bn}catch(u){throw Zt(l),u}else e!==null&&gr(l);var s=r&&l.deps===null&&l.first===null&&l.nodes_start===null&&l.teardown===null&&(l.f&po)===0;if(!s&&n&&(o!==null&&Ti(l,o),ye!==null&&(ye.f&Ct)!==0)){var i=ye;(i.effects??(i.effects=[])).push(l)}return l}function Pi(t){const e=Xt(jn,null,!1);return ut(e,ct),e.teardown=t,e}function ue(t){Oa();var e=_e.f,r=!ye&&(e&ar)!==0&&(e&Bn)===0;if(r){var n=Be;(n.e??(n.e=[])).push(t)}else return Va(t)}function Va(t){return Xt(mo|wo,t,!1)}function Ni(t){return Oa(),Xt(jn|wo,t,!0)}function Ri(t){bn.ensure();const e=Xt(Zr,t,!0);return(r={})=>new Promise(n=>{r.outro?wr(e,()=>{Zt(e),n(void 0)}):(Zt(e),n(void 0))})}function Po(t){return Xt(mo,t,!1)}function Li(t){return Xt(_o|po,t,!0)}function Ua(t,e=0){return Xt(jn|e,t,!0)}function G(t,e=[],r=[]){ki(e,r,n=>{Xt(jn,()=>t(...n.map(a)),!0)})}function rn(t,e=0){var r=Xt(Jr|e,t,!0);return r}function Jt(t,e=!0){return Xt(ar,t,!0,e)}function Wa(t){var e=t.teardown;if(e!==null){const r=Pr,n=ye;Za(!0),Lt(null);try{e.call(null)}finally{Za(r),Lt(n)}}}function Ha(t,e=!1){var o;var r=t.first;for(t.first=t.last=null;r!==null;){(o=r.ac)==null||o.abort(yo);var n=r.next;(r.f&Zr)!==0?r.parent=null:Zt(r,e),r=n}}function Mi(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&ar)===0&&Zt(e),e=r}}function Zt(t,e=!0){var r=!1;(e||(t.f&Is)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Ya(t.nodes_start,t.nodes_end),r=!0),Ha(t,e&&!r),Xn(t,0),ut(t,Ar);var n=t.transitions;if(n!==null)for(const l of n)l.stop();Wa(t);var o=t.parent;o!==null&&o.first!==null&&Ga(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Ya(t,e){for(;t!==null;){var r=t===e?null:Hn(t);t.remove(),t=r}}function Ga(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function wr(t,e){var r=[];No(t,r,!0),Ka(r,()=>{Zt(t),e&&e()})}function Ka(t,e){var r=t.length;if(r>0){var n=()=>--r||e();for(var o of t)o.out(n)}else e()}function No(t,e,r){if((t.f&Wt)===0){if(t.f^=Wt,t.transitions!==null)for(const s of t.transitions)(s.is_global||r)&&e.push(s);for(var n=t.first;n!==null;){var o=n.next,l=(n.f&Qr)!==0||(n.f&ar)!==0;No(n,e,l?r:!1),n=o}}}function _n(t){Xa(t,!0)}function Xa(t,e){if((t.f&Wt)!==0){t.f^=Wt,(t.f&ct)===0&&(ut(t,Et),gr(t));for(var r=t.first;r!==null;){var n=r.next,o=(r.f&Qr)!==0||(r.f&ar)!==0;Xa(r,o?e:!1),r=n}if(t.transitions!==null)for(const l of t.transitions)(l.is_global||e)&&l.in()}}let nn=!1;function Ja(t){nn=t}let Pr=!1;function Za(t){Pr=t}let ye=null,Qt=!1;function Lt(t){ye=t}let _e=null;function $t(t){_e=t}let bt=null;function Qa(t){ye!==null&&(bt===null?bt=[t]:bt.push(t))}let _t=null,Tt=0,Mt=null;function Fi(t){Mt=t}let Gn=1,yn=0,Nr=yn;function $a(t){Nr=t}let br=!1;function el(){return++Gn}function Kn(t){var d;var e=t.f;if((e&Et)!==0)return!0;if((e&Sr)!==0){var r=t.deps,n=(e&Rt)!==0;if(r!==null){var o,l,s=(e&qn)!==0,i=n&&_e!==null&&!br,u=r.length;if((s||i)&&(_e===null||(_e.f&Ar)===0)){var c=t,f=c.parent;for(o=0;o<u;o++)l=r[o],(s||!((d=l==null?void 0:l.reactions)!=null&&d.includes(c)))&&(l.reactions??(l.reactions=[])).push(c);s&&(c.f^=qn),i&&f!==null&&(f.f&Rt)===0&&(c.f^=Rt)}for(o=0;o<u;o++)if(l=r[o],Kn(l)&&Ra(l),l.wv>t.wv)return!0}(!n||_e!==null&&!br)&&ut(t,ct)}return!1}function tl(t,e,r=!0){var n=t.reactions;if(n!==null&&!(bt!=null&&bt.includes(t)))for(var o=0;o<n.length;o++){var l=n[o];(l.f&Ct)!==0?tl(l,e,!1):e===l&&(r?ut(l,Et):(l.f&ct)!==0&&ut(l,Sr),gr(l))}}function rl(t){var g;var e=_t,r=Tt,n=Mt,o=ye,l=br,s=bt,i=Be,u=Qt,c=Nr,f=t.f;_t=null,Tt=0,Mt=null,br=(f&Rt)!==0&&(Qt||!nn||ye===null),ye=(f&(ar|Zr))===0?t:null,bt=null,en(t.ctx),Qt=!1,Nr=++yn,t.ac!==null&&(t.ac.abort(yo),t.ac=null);try{t.f|=bo;var d=(0,t.fn)(),h=t.deps;if(_t!==null){var v;if(Xn(t,Tt),h!==null&&Tt>0)for(h.length=Tt+_t.length,v=0;v<_t.length;v++)h[Tt+v]=_t[v];else t.deps=h=_t;if(!br||(f&Ct)!==0&&t.reactions!==null)for(v=Tt;v<h.length;v++)((g=h[v]).reactions??(g.reactions=[])).push(t)}else h!==null&&Tt<h.length&&(Xn(t,Tt),h.length=Tt);if(vr()&&Mt!==null&&!Qt&&h!==null&&(t.f&(Ct|Sr|Et))===0)for(v=0;v<Mt.length;v++)tl(Mt[v],t);return o!==null&&o!==t&&(yn++,Mt!==null&&(n===null?n=Mt:n.push(...Mt))),(t.f&Cr)!==0&&(t.f^=Cr),d}catch(p){return pi(p)}finally{t.f^=bo,_t=e,Tt=r,Mt=n,ye=o,br=l,bt=s,en(i),Qt=u,Nr=c}}function ji(t,e){let r=e.reactions;if(r!==null){var n=Ms.call(r,t);if(n!==-1){var o=r.length-1;o===0?r=e.reactions=null:(r[n]=r[o],r.pop())}}r===null&&(e.f&Ct)!==0&&(_t===null||!_t.includes(e))&&(ut(e,Sr),(e.f&(Rt|qn))===0&&(e.f^=qn),Na(e),Xn(e,0))}function Xn(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)ji(t,r[n])}function xn(t){var e=t.f;if((e&Ar)===0){ut(t,ct);var r=_e,n=nn;_e=t,nn=!0;try{(e&Jr)!==0?Mi(t):Ha(t),Wa(t);var o=rl(t);t.teardown=typeof o=="function"?o:null,t.wv=Gn;var l;rt&&fi&&(t.f&Et)!==0&&t.deps}finally{nn=n,_e=r}}}function a(t){var e=t.f,r=(e&Ct)!==0;if(ye!==null&&!Qt){var n=_e!==null&&(_e.f&Ar)!==0;if(!n&&!(bt!=null&&bt.includes(t))){var o=ye.deps;if((ye.f&bo)!==0)t.rv<yn&&(t.rv=yn,_t===null&&o!==null&&o[Tt]===t?Tt++:_t===null?_t=[t]:(!br||!_t.includes(t))&&_t.push(t));else{(ye.deps??(ye.deps=[])).push(t);var l=t.reactions;l===null?t.reactions=[ye]:l.includes(ye)||l.push(ye)}}}else if(r&&t.deps===null&&t.effects===null){var s=t,i=s.parent;i!==null&&(i.f&Rt)===0&&(s.f^=Rt)}if(Pr){if(zr.has(t))return zr.get(t);if(r){s=t;var u=s.v;return((s.f&ct)===0&&s.reactions!==null||nl(s))&&(u=So(s)),zr.set(s,u),u}}else if(r){if(s=t,hr!=null&&hr.has(s))return hr.get(s);Kn(s)&&Ra(s)}if((t.f&Cr)!==0)throw t.v;return t.v}function nl(t){if(t.v===nt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(zr.has(e)||(e.f&Ct)!==0&&nl(e))return!0;return!1}function lr(t){var e=Qt;try{return Qt=!0,t()}finally{Qt=e}}const qi=-7169;function ut(t,e){t.f=t.f&qi|e}function Bi(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(dr in t)Ro(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&dr in r&&Ro(r)}}}function Ro(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{Ro(t[n],e)}catch{}const r=Ln(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=ga(r);for(let o in n){const l=n[o].get;if(l)try{l.call(t)}catch{}}}}}const Ii=["touchstart","touchmove"];function Di(t){return Ii.includes(t)}let ol=!1;function Oi(){ol||(ol=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Jn(t){var e=ye,r=_e;Lt(null),$t(null);try{return t()}finally{Lt(e),$t(r)}}function Vi(t,e,r,n=r){t.addEventListener(e,()=>Jn(r));const o=t.__on_r;o?t.__on_r=()=>{o(),n(!0)}:t.__on_r=()=>n(!0),Oi()}const al=new Set,Lo=new Set;function Ui(t,e,r,n={}){function o(l){if(n.capture||kn.call(e,l),!l.cancelBubble)return Jn(()=>r==null?void 0:r.call(this,l))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?pn(()=>{e.addEventListener(t,o,n)}):e.addEventListener(t,o,n),o}function Rr(t,e,r,n,o){var l={capture:n,passive:o},s=Ui(t,e,r,l);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Pi(()=>{e.removeEventListener(t,s,l)})}function ot(t){for(var e=0;e<t.length;e++)al.add(t[e]);for(var r of Lo)r(t)}function kn(t){var _;var e=this,r=e.ownerDocument,n=t.type,o=((_=t.composedPath)==null?void 0:_.call(t))||[],l=o[0]||t.target,s=0,i=t.__root;if(i){var u=o.indexOf(i);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var c=o.indexOf(e);if(c===-1)return;u<=c&&(s=u)}if(l=o[s]||t.target,l!==e){go(t,"currentTarget",{configurable:!0,get(){return l||r}});var f=ye,d=_e;Lt(null),$t(null);try{for(var h,v=[];l!==null;){var g=l.assignedSlot||l.parentNode||l.host||null;try{var p=l["__"+n];if(p!=null&&(!l.disabled||t.target===l))if(Er(p)){var[m,...b]=p;m.apply(l,[t,...b])}else p.call(l,t)}catch(A){h?v.push(A):h=A}if(t.cancelBubble||g===e||g===null)break;l=g}if(h){for(let A of v)queueMicrotask(()=>{throw A});throw h}}finally{t.__root=e,delete t.currentTarget,Lt(f),$t(d)}}}function Mo(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Lr(t,e){var r=_e;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function D(t,e){var r=(e&ka)!==0,n=(e&si)!==0,o,l=!t.startsWith("<!>");return()=>{o===void 0&&(o=Mo(l?t:"<!>"+t),r||(o=zt(o)));var s=n||Ba?document.importNode(o,!0):o.cloneNode(!0);if(r){var i=zt(s),u=s.lastChild;Lr(i,u)}else Lr(s,s);return s}}function Wi(t,e,r="svg"){var n=!t.startsWith("<!>"),o=(e&ka)!==0,l=`<${r}>${n?t:"<!>"+t}</${r}>`,s;return()=>{if(!s){var i=Mo(l),u=zt(i);if(o)for(s=document.createDocumentFragment();zt(u);)s.appendChild(zt(u));else s=zt(u)}var c=s.cloneNode(!0);if(o){var f=zt(c),d=c.lastChild;Lr(f,d)}else Lr(c,c);return c}}function be(t,e){return Wi(t,e,"svg")}function Hi(t=""){{var e=pr(t+"");return Lr(e,e),e}}function Ee(){var t=document.createDocumentFragment(),e=document.createComment(""),r=pr();return t.append(e,r),Lr(e,r),t}function z(t,e){t!==null&&t.before(e)}let Fo=!0;function Me(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Yi(t,e){return Gi(t,e)}const on=new Map;function Gi(t,{target:e,anchor:r,props:n={},events:o,context:l,intro:s=!0}){Ci();var i=new Set,u=d=>{for(var h=0;h<d.length;h++){var v=d[h];if(!i.has(v)){i.add(v);var g=Di(v);e.addEventListener(v,kn,{passive:g});var p=on.get(v);p===void 0?(document.addEventListener(v,kn,{passive:g}),on.set(v,1)):on.set(v,p+1)}}};u(ho(al)),Lo.add(u);var c=void 0,f=Ri(()=>{var d=r??e.appendChild(pr());return Jt(()=>{if(l){pe({});var h=Be;h.c=l}o&&(n.$$events=o),Fo=s,c=t(d,n)||{},Fo=!0,l&&we()}),()=>{var g;for(var h of i){e.removeEventListener(h,kn);var v=on.get(h);--v===0?(document.removeEventListener(h,kn),on.delete(h)):on.set(h,v)}Lo.delete(u),d!==r&&((g=d.parentNode)==null||g.removeChild(d))}});return Ki.set(c,f),c}let Ki=new WeakMap;const jo=0,Zn=1,qo=2;function Xi(t,e,r,n,o){var l=t,s=vr(),i=Be,u=nt,c,f,d,h=s?Tr(void 0):Co(void 0,!1,!1),v=s?Tr(void 0):Co(void 0,!1,!1),g=!1;function p(b,_){g=!0,_&&($t(m),Lt(m),en(i));try{b===jo&&r&&(c?_n(c):c=Jt(()=>r(l))),b===qo&&o&&(d?_n(d):d=Jt(()=>o(l,v))),b!==jo&&c&&wr(c,()=>c=null),b!==Zn&&f&&wr(f,()=>f=null),b!==qo&&d&&wr(d,()=>d=null)}finally{_&&(en(null),Lt(null),$t(null),Si())}}var m=rn(()=>{if(u!==(u=e())){if(js(u)){var b=u;g=!1,b.then(_=>{b===u&&(mr(h,_),p(Zn,!0))},_=>{if(b===u&&(mr(v,_),p(qo,!0),!o))throw v.v}),pn(()=>{g||p(jo,!0)})}else mr(h,u),p(Zn,!1);return()=>u=nt}})}function I(t,e,r=!1){var n=t,o=null,l=null,s=nt,i=r?Qr:0,u=!1;const c=(v,g=!0)=>{u=!0,h(g,v)};var f=null;function d(){f!==null&&(f.lastChild.remove(),n.before(f),f=null);var v=s?o:l,g=s?l:o;v&&_n(v),g&&wr(g,()=>{s?l=null:o=null})}const h=(v,g)=>{if(s!==(s=v)){var p=Yn(),m=n;if(p&&(f=document.createDocumentFragment(),f.append(m=pr())),s?o??(o=g&&Jt(()=>g(m))):l??(l=g&&Jt(()=>g(m))),p){var b=Ze,_=s?o:l,A=s?l:o;_&&b.skipped_effects.delete(_),A&&b.skipped_effects.add(A),b.add_callback(d)}else d()}};rn(()=>{u=!1,e(c),u||h(null,null)},i)}function Qn(t,e,r){var n=t,o=nt,l,s,i=null,u=vr()?ui:Sa;function c(){l&&wr(l),i!==null&&(i.lastChild.remove(),n.before(i),i=null),l=s}rn(()=>{if(u(o,o=e())){var f=n,d=Yn();d&&(i=document.createDocumentFragment(),i.append(f=pr())),s=Jt(()=>r(f)),d?Ze.add_callback(c):c()}})}function gt(t,e){return e}function Ji(t,e,r){for(var n=t.items,o=[],l=e.length,s=0;s<l;s++)No(e[s].e,o,!0);var i=l>0&&o.length===0&&r!==null;if(i){var u=r.parentNode;zi(u),u.append(r),n.clear(),er(t,e[0].prev,e[l-1].next)}Ka(o,()=>{for(var c=0;c<l;c++){var f=e[c];i||(n.delete(f.k),er(t,f.prev,f.next)),Zt(f.e,!i)}})}function ft(t,e,r,n,o,l=null){var s=t,i={flags:e,items:new Map,first:null},u=(e&xa)!==0;if(u){var c=t;s=c.appendChild(pr())}var f=null,d=!1,h=new Map,v=Eo(()=>{var b=r();return Er(b)?b:b==null?[]:ho(b)}),g,p;function m(){Zi(p,g,i,h,s,o,e,n,r),l!==null&&(g.length===0?f?_n(f):f=Jt(()=>l(s)):f!==null&&wr(f,()=>{f=null}))}rn(()=>{p??(p=_e),g=a(v);var b=g.length;if(!(d&&b===0)){d=b===0;var _,A,E,k;if(Yn()){var w=new Set,y=Ze;for(A=0;A<b;A+=1){E=g[A],k=n(E,A);var M=i.items.get(k)??h.get(k);M?(e&(In|Dn))!==0&&ll(M,E,A,e):(_=sl(null,i,null,null,E,k,A,o,e,r,!0),h.set(k,_)),w.add(k)}for(const[B,K]of i.items)w.has(B)||y.skipped_effects.add(K.e);y.add_callback(m)}else m();a(v)}})}function Zi(t,e,r,n,o,l,s,i,u){var J,ge,Re,Ue;var c=(s&Zs)!==0,f=(s&(In|Dn))!==0,d=e.length,h=r.items,v=r.first,g=v,p,m=null,b,_=[],A=[],E,k,w,y;if(c)for(y=0;y<d;y+=1)E=e[y],k=i(E,y),w=h.get(k),w!==void 0&&((J=w.a)==null||J.measure(),(b??(b=new Set)).add(w));for(y=0;y<d;y+=1){if(E=e[y],k=i(E,y),w=h.get(k),w===void 0){var M=n.get(k);if(M!==void 0){n.delete(k),h.set(k,M);var B=m?m.next:g;er(r,m,M),er(r,M,B),Bo(M,B,o),m=M}else{var K=g?g.e.nodes_start:o;m=sl(K,r,m,m===null?r.first:m.next,E,k,y,l,s,u)}h.set(k,m),_=[],A=[],g=m.next;continue}if(f&&ll(w,E,y,s),(w.e.f&Wt)!==0&&(_n(w.e),c&&((ge=w.a)==null||ge.unfix(),(b??(b=new Set)).delete(w))),w!==g){if(p!==void 0&&p.has(w)){if(_.length<A.length){var O=A[0],Q;m=O.prev;var ae=_[0],X=_[_.length-1];for(Q=0;Q<_.length;Q+=1)Bo(_[Q],O,o);for(Q=0;Q<A.length;Q+=1)p.delete(A[Q]);er(r,ae.prev,X.next),er(r,m,ae),er(r,X,O),g=O,m=X,y-=1,_=[],A=[]}else p.delete(w),Bo(w,g,o),er(r,w.prev,w.next),er(r,w,m===null?r.first:m.next),er(r,m,w),m=w;continue}for(_=[],A=[];g!==null&&g.k!==k;)(g.e.f&Wt)===0&&(p??(p=new Set)).add(g),A.push(g),g=g.next;if(g===null)continue;w=g}_.push(w),m=w,g=w.next}if(g!==null||p!==void 0){for(var F=p===void 0?[]:ho(p);g!==null;)(g.e.f&Wt)===0&&F.push(g),g=g.next;var te=F.length;if(te>0){var fe=(s&xa)!==0&&d===0?o:null;if(c){for(y=0;y<te;y+=1)(Re=F[y].a)==null||Re.measure();for(y=0;y<te;y+=1)(Ue=F[y].a)==null||Ue.fix()}Ji(r,F,fe)}}c&&pn(()=>{var me;if(b!==void 0)for(w of b)(me=w.a)==null||me.apply()}),t.first=r.first&&r.first.e,t.last=m&&m.e;for(var se of n.values())Zt(se.e);n.clear()}function ll(t,e,r,n){(n&In)!==0&&mr(t.v,e),(n&Dn)!==0?mr(t.i,r):t.i=r}function sl(t,e,r,n,o,l,s,i,u,c,f){var d=(u&In)!==0,h=(u&Qs)===0,v=d?h?Co(o,!1,!1):Tr(o):o,g=(u&Dn)===0?s:Tr(s),p={i:g,v,k:l,a:null,e:null,prev:r,next:n};try{if(t===null){var m=document.createDocumentFragment();m.append(t=pr())}return p.e=Jt(()=>i(t,v,g,c),ci),p.e.prev=r&&r.e,p.e.next=n&&n.e,r===null?f||(e.first=p):(r.next=p,r.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function Bo(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,l=t.e.nodes_start;l!==null&&l!==n;){var s=Hn(l);o.before(l),l=s}}function er(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function mt(t,e,r=!1,n=!1,o=!1){var l=t,s="";G(()=>{var i=_e;if(s!==(s=e()??"")&&(i.nodes_start!==null&&(Ya(i.nodes_start,i.nodes_end),i.nodes_start=i.nodes_end=null),s!=="")){var u=s+"";r?u=`<svg>${u}</svg>`:n&&(u=`<math>${u}</math>`);var c=Mo(u);if((r||n)&&(c=zt(c)),Lr(zt(c),c.lastChild),r||n)for(;zt(c);)l.before(zt(c));else l.before(c)}})}function an(t,e,...r){var n=t,o=kt,l;rn(()=>{o!==(o=e())&&(l&&(Zt(l),l=null),l=Jt(()=>o(n,...r)))},Qr)}function Io(t,e,r){var n=t,o,l,s=null,i=null;function u(){l&&(wr(l),l=null),s&&(s.lastChild.remove(),n.before(s),s=null),l=i,i=null}rn(()=>{if(o!==(o=e())){var c=Yn();if(o){var f=n;c&&(s=document.createDocumentFragment(),s.append(f=pr())),i=Jt(()=>r(f,o))}c?Ze.add_callback(u):u()}},Qr)}function il(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=il(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Qi(){for(var t,e,r=0,n="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=il(t))&&(n&&(n+=" "),n+=e);return n}function $i(t){return typeof t=="object"?Qi(t):t??""}const cl=[...`
\r\f \v\uFEFF`];function ec(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var o in r)if(r[o])n=n?n+" "+o:o;else if(n.length)for(var l=o.length,s=0;(s=n.indexOf(o,s))>=0;){var i=s+l;(s===0||cl.includes(n[s-1]))&&(i===n.length||cl.includes(n[i]))?n=(s===0?"":n.substring(0,s))+n.substring(i+1):s=i}}return n===""?null:n}function tc(t,e){return t==null?null:String(t)}function it(t,e,r,n,o,l){var s=t.__className;if(s!==r||s===void 0){var i=ec(r,n,l);i==null?t.removeAttribute("class"):e?t.className=i:t.setAttribute("class",i),t.__className=r}else if(l&&o!==l)for(var u in l){var c=!!l[u];(o==null||c!==!!o[u])&&t.classList.toggle(u,c)}return l}function Ft(t,e,r,n){var o=t.__style;if(o!==e){var l=tc(e);l==null?t.removeAttribute("style"):t.style.cssText=l,t.__style=e}return n}const rc=Symbol("is custom element"),nc=Symbol("is html");function S(t,e,r,n){var o=oc(t);o[e]!==(o[e]=r)&&(e==="loading"&&(t[Ds]=r),r==null?t.removeAttribute(e):typeof r!="string"&&ac(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function oc(t){return t.__attributes??(t.__attributes={[rc]:t.nodeName.includes("-"),[nc]:t.namespaceURI===ii})}var ul=new Map;function ac(t){var e=ul.get(t.nodeName);if(e)return e;ul.set(t.nodeName,e=[]);for(var r,n=t,o=Element.prototype;o!==n;){r=ga(n);for(var l in r)r[l].set&&e.push(l);n=Ln(n)}return e}const lc=()=>performance.now(),sr={tick:t=>requestAnimationFrame(t),now:()=>lc(),tasks:new Set};function fl(){const t=sr.now();sr.tasks.forEach(e=>{e.c(t)||(sr.tasks.delete(e),e.f())}),sr.tasks.size!==0&&sr.tick(fl)}function sc(t){let e;return sr.tasks.size===0&&sr.tick(fl),{promise:new Promise(r=>{sr.tasks.add(e={c:t,f:r})}),abort(){sr.tasks.delete(e)}}}function $n(t,e){Jn(()=>{t.dispatchEvent(new CustomEvent(e))})}function ic(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function dl(t){const e={},r=t.split(";");for(const n of r){const[o,l]=n.split(":");if(!o||l===void 0)break;const s=ic(o.trim());e[s]=l.trim()}return e}const cc=t=>t;function vl(t,e,r,n){var o=(t&oi)!==0,l=(t&ai)!==0,s=o&&l,i=(t&li)!==0,u=s?"both":o?"in":"out",c,f=e.inert,d=e.style.overflow,h,v;function g(){return Jn(()=>c??(c=r()(e,(n==null?void 0:n())??{},{direction:u})))}var p={is_global:i,in(){var A;if(e.inert=f,!o){v==null||v.abort(),(A=v==null?void 0:v.reset)==null||A.call(v);return}l||h==null||h.abort(),$n(e,"introstart"),h=Do(e,g(),v,1,()=>{$n(e,"introend"),h==null||h.abort(),h=c=void 0,e.style.overflow=d})},out(A){if(!l){A==null||A(),c=void 0;return}e.inert=!0,$n(e,"outrostart"),v=Do(e,g(),h,0,()=>{$n(e,"outroend"),A==null||A()})},stop:()=>{h==null||h.abort(),v==null||v.abort()}},m=_e;if((m.transitions??(m.transitions=[])).push(p),o&&Fo){var b=i;if(!b){for(var _=m.parent;_&&(_.f&Qr)!==0;)for(;(_=_.parent)&&(_.f&Jr)===0;);b=!_||(_.f&Bn)!==0}b&&Po(()=>{lr(()=>p.in())})}}function Do(t,e,r,n,o){var l=n===1;if(Xr(e)){var s,i=!1;return pn(()=>{if(!i){var m=e({direction:l?"in":"out"});s=Do(t,m,r,n,o)}}),{abort:()=>{i=!0,s==null||s.abort()},deactivate:()=>s.deactivate(),reset:()=>s.reset(),t:()=>s.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return o(),{abort:kt,deactivate:kt,reset:kt,t:()=>n};const{delay:u=0,css:c,tick:f,easing:d=cc}=e;var h=[];if(l&&r===void 0&&(f&&f(0,1),c)){var v=dl(c(0,1));h.push(v,v)}var g=()=>1-n,p=t.animate(h,{duration:u,fill:"forwards"});return p.onfinish=()=>{p.cancel();var m=(r==null?void 0:r.t())??1-n;r==null||r.abort();var b=n-m,_=e.duration*Math.abs(b),A=[];if(_>0){var E=!1;if(c)for(var k=Math.ceil(_/16.666666666666668),w=0;w<=k;w+=1){var y=m+b*d(w/k),M=dl(c(y,1-y));A.push(M),E||(E=M.overflow==="hidden")}E&&(t.style.overflow="hidden"),g=()=>{var B=p.currentTime;return m+b*d(B/_)},f&&sc(()=>{if(p.playState!=="running")return!1;var B=g();return f(B,1-B),!0})}p=t.animate(A,{duration:_,fill:"forwards"}),p.onfinish=()=>{g=()=>n,f==null||f(n,1-n),o()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=kt)},deactivate:()=>{o=kt},reset:()=>{n===0&&(f==null||f(1,0))},t:()=>g()}}function hl(t,e,r=e){var n=vr(),o=new WeakSet;Vi(t,"input",l=>{var s=l?t.defaultValue:t.value;if(s=Oo(t)?Vo(s):s,r(s),Ze!==null&&o.add(Ze),n&&s!==(s=e())){var i=t.selectionStart,u=t.selectionEnd;t.value=s??"",u!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(u,t.value.length))}}),lr(e)==null&&t.value&&(r(Oo(t)?Vo(t.value):t.value),Ze!==null&&o.add(Ze)),Ua(()=>{var l=e();t===document.activeElement&&o.has(Ze)||Oo(t)&&l===Vo(t.value)||t.type==="date"&&!l&&!t.value||l!==t.value&&(t.value=l??"")})}function Oo(t){var e=t.type;return e==="number"||e==="range"}function Vo(t){return t===""?null:+t}const uo=class uo{constructor(e){ht(this,co);ht(this,kr,new WeakMap);ht(this,hn);ht(this,Pn);At(this,Pn,e)}observe(e,r){var n=ve(this,kr).get(e)||new Set;return n.add(r),ve(this,kr).set(e,n),gn(this,co,Ls).call(this).observe(e,ve(this,Pn)),()=>{var o=ve(this,kr).get(e);o.delete(r),o.size===0&&(ve(this,kr).delete(e),ve(this,hn).unobserve(e))}}};kr=new WeakMap,hn=new WeakMap,Pn=new WeakMap,co=new WeakSet,Ls=function(){return ve(this,hn)??At(this,hn,new ResizeObserver(e=>{for(var r of e){uo.entries.set(r.target,r);for(var n of ve(this,kr).get(r.target)||[])n(r)}}))},or(uo,"entries",new WeakMap);let Uo=uo;var uc=new Uo({box:"border-box"});function gl(t,e,r){var n=uc.observe(t,()=>r(t[e]));Po(()=>(lr(()=>r(t[e])),n))}function ml(t,e){return t===e||(t==null?void 0:t[dr])===e}function Mr(t={},e,r,n){return Po(()=>{var o,l;return Ua(()=>{o=l,l=[],lr(()=>{t!==r(...l)&&(e(t,...l),o&&ml(r(...o),t)&&e(null,...o))})}),()=>{pn(()=>{l&&ml(r(...l),t)&&e(null,...l)})}}),t}function fc(t=!1){const e=Be,r=e.l.u;if(!r)return;let n=()=>Bi(e.s);if(t){let o=0,l={};const s=wn(()=>{let i=!1;const u=e.s;for(const c in u)u[c]!==l[c]&&(l[c]=u[c],i=!0);return i&&o++,o});n=()=>a(s)}r.b.length&&Ni(()=>{pl(e,n),Mn(r.b)}),ue(()=>{const o=lr(()=>r.m.map(qs));return()=>{for(const l of o)typeof l=="function"&&l()}}),r.a.length&&ue(()=>{pl(e,n),Mn(r.a)})}function pl(t,e){if(t.l.s)for(const r of t.l.s)a(r);e()}let eo=!1;function dc(t){var e=eo;try{return eo=!1,[t(),eo]}finally{eo=e}}const vc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function ln(t,e,r){return new Proxy({props:t,exclude:e},vc)}const hc={get(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if(Xr(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(t,e,r){let n=t.props.length;for(;n--;){let o=t.props[n];Xr(o)&&(o=o());const l=fr(o,e);if(l&&l.set)return l.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if(Xr(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const o=fr(n,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===dr||e===_a)return!1;for(let r of t.props)if(Xr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Xr(r)&&(r=r()),!!r){for(const n in r)e.includes(n)||e.push(n);for(const n of Object.getOwnPropertySymbols(r))e.includes(n)||e.push(n)}return e}};function sn(...t){return new Proxy({props:t},hc)}function P(t,e,r,n){var A;var o=!$r||(r&ei)!==0,l=(r&ri)!==0,s=(r&ni)!==0,i=n,u=!0,c=()=>(u&&(u=!1,i=s?lr(n):n),i),f;if(l){var d=dr in t||_a in t;f=((A=fr(t,e))==null?void 0:A.set)??(d&&e in t?E=>t[e]=E:void 0)}var h,v=!1;l?[h,v]=dc(()=>t[e]):h=t[e],h===void 0&&n!==void 0&&(h=c(),f&&(o&&Gs(),f(h)));var g;if(o?g=()=>{var E=t[e];return E===void 0?c():(u=!0,E)}:g=()=>{var E=t[e];return E!==void 0&&(i=void 0),E===void 0?i:E},o&&(r&ti)===0)return g;if(f){var p=t.$$legacy;return function(E,k){return arguments.length>0?((!o||!k||p||v)&&f(k?g():E),E):g()}}var m=!1,b=((r&$s)!==0?wn:Eo)(()=>(m=!1,g()));l&&a(b);var _=_e;return function(E,k){if(arguments.length>0){const w=k?a(b):o&&l?Ne(E):E;return N(b,w),m=!0,i!==void 0&&(i=w),E}return Pr&&m||(_.f&Ar)!==0?b.v:a(b)}}function gc(t){Be===null&&ya(),$r&&Be.l!==null?mc(Be).m.push(t):ue(()=>{const e=lr(t);if(typeof e=="function")return e})}function mc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const pc="5";typeof window<"u"&&((Cs=window.__svelte??(window.__svelte={})).v??(Cs.v=new Set)).add(pc),di();function wl(t,e){Ie(t)&&wl(t.v,e);const r=Ho(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const n=(r[1]-r[0])/e;return Xe.seq(r[0],r[1],n)}function bl(t){if(Ie(t))return bl(t.v);const e=new Xe.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Xe(e)}function Wo(t,e){if(Ie(t))return Wo(t.v,e);e===void 0&&(e=.1);const r=Ho(t),n=(r[1]-r[0])*e;return[r[0]-n,r[1]+n]}function Ho(t){if(Ie(t))return Ho(t.v);let e=t[0],r=t[0];for(let n=1;n<t.length;n++)t[n]<e&&(e=t[n]),t[n]>r&&(r=t[n]);return[e,r]}function _l(t,e){return Ie(t)?_l(t.v,e):Math.sqrt(yl(t,e))}function yl(t,e){if(e===void 0&&(e=!1),Ie(t))return yl(t.v);const r=Yo(t);let n=0;for(let o=0;o<t.length;o++){const l=t[o]-r;n=n+l*l}return n/(e?t.length:t.length-1)}function Yo(t){return Ie(t)?Yo(t.v):xl(t)/t.length}function xl(t){if(Ie(t))return xl(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function kl(t){if(Ie(t))return kl(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function cn(t){return Ie(t)||Ht(t)?t.v[Go(t.v)-1]:t[Go(t)-1]}function Go(t){if(Ie(t)||Ht(t))return Go(t.v);let e=1,r=t[0];for(let n=2;n<=t.length;n++)t[n-1]<r&&(e=n,r=t[n-1]);return e}function Fr(t){return Ie(t)||Ht(t)?t.v[Ko(t.v)-1]:t[Ko(t)-1]}function Ko(t){if(Ie(t)||Ht(t))return Ko(t.v);let e=1,r=t[0];for(let n=2;n<=t.length;n++)t[n-1]>r&&(e=n,r=t[n-1]);return e}function El(t,e=0,r=1){let n=Xe.zeros(t);for(let o=0;o<t;o++)n.v[o]=e+Math.random()*(r-e);return n}function Sl(t,e=0,r=1){let n=Xe.zeros(t);for(let o=0;o<t;o++){const l=Math.sqrt(-2*Math.log(Math.random())),s=2*Math.PI*Math.random();n.v[o]=l*Math.sin(s)*r+e}return n}function Al(t){const e=t.nrows,r=t.ncols;if(e<r){const s=Al(t.subset([],pt.seq(1,e)));return{Q:s.Q,R:bc(s.Q,t)}}let n=jt.eye(e),o=t.t();for(let s=1;s<=r;s++)for(let i=e;i>=s+1;i--){const u=o.v.subarray((i-2)*r,i*r),c=n.v.subarray((i-2)*e,i*e),f=u.slice(),d=c.slice(),[h,v,g]=wc(f[s-1],f[s-1+r]);for(let p=0;p<r;p++)u[p]=f[p]*h+f[p+r]*v,u[p+r]=f[p]*-v+f[p+r]*h,c[p]=d[p]*h+d[p+e]*v,c[p+e]=d[p]*-v+d[p+e]*h;for(let p=r;p<e;p++)c[p]=d[p]*h+d[p+e]*v,c[p+e]=d[p]*-v+d[p+e]*h}const l=pt.seq(1,r);return{Q:e===r?n:n.subset([],l),R:e===r?o.t():o.subset([],l).t()}}function wc(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const l=e/t,s=Math.sqrt(1+l*l),i=1/s;return[i,l*i,t*s]}const r=t/e,n=Math.sqrt(1+r*r),o=1/n;return[r*o,o,e*n]}function Cl(t){return typeof t=="number"}function bc(t,e){if(e===void 0&&(e=t),!_r(t)||!_r(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,n=t.ncols,o=e.nrows,l=e.ncols,s=n,i=l,u=r,c=new Float64Array(s*i);for(let f=0;f<i;f++){const d=e.v.subarray(f*o,(f+1)*o),h=c.subarray(f*s,(f+1)*s);for(let v=0;v<s;v++){const g=t.v.subarray(v*r,(v+1)*r);let p=0;for(let m=0;m<u;m++)p+=g[m]*d[m];h[v]=p}}return new jt(c,s,i)}function zl(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Xe(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new jt(t.v,e,r)}function _r(t){return t&&t.constructor===jt}function _c(t,e,r){return new jt(new Float64Array(t),e,r)}const he=class he{constructor(e,r,n){if(!ArrayBuffer.isView(e)||e.constructor!==he.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||n===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*n)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=n}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return he.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const n=he.eye(e),o=he.eye(e),l=this.t(),s=l.v[(e-1)*e+(e-1)],i=e-1;for(let u=0;u<e;u++)o.v[i*e+u]=n.v[i*e+u]/s;for(let u=e-2;u>=0;u--){let c=n.getcolumn(u+1);const f=l.getcolref(u+1);for(let d=u+1;d<e;d++){const h=o.getcolumn(d+1);c=c.subtract(h.mult(f[d]))}o.v.set(c.divide(f[u]).v,u*e)}return o.t()}if(this.islowertriangular()){const n=this.diag();if(kl(n)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=he.eye(e),l=he.eye(e),s=this.t(),i=0,u=s.v[0];for(let c=0;c<e;c++)l.v[i*e+c]=o.v[i*e+c]/u;for(let c=1;c<e;c++){let f=o.getcolumn(c+1);const d=s.getcolref(c+1);for(let h=0;h<c;h++){const v=l.getcolumn(h+1);f=f.subtract(v.mult(d[h]))}l.v.set(f.divide(d[c]).v,c*e)}return l.t()}const r=Al(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>he.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>he.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let n=0;n<e;n++)r[n]=this.getcolref(n+1)[n];return new Xe(r)}t(){const e=this.nrows,r=this.ncols,n=new he.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const l=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let s=0;s<this.nrows;s++)n[s*r+o]=l[s]}return new he(n,r,e)}for(let o=0;o<this.nrows;o++){const l=n.subarray(o*r,(o+1)*r);for(let s=0;s<this.ncols;s++)l[s]=this.v[s*this.nrows+o]}return new he(n,r,e)}dot(e){if(Ie(e))return new he(Zo(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(_r(e))return new he(Zo(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,n){if(_r(e))return new he(Xo(this.v,e.v,r),this.nrows,this.ncols);if(Cl(e))return new he(Jo(this.v,e,r),this.nrows,this.ncols);if(!Ie(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(n===void 0&&(n=e.length===this.ncols?2:1),n===2&&e.length===this.ncols){const o=new he.valuesConstructor(this.v.length);for(let l=0;l<this.ncols;l++)o.set(Jo(this.getcolref(l+1),e.v[l],r),l*this.nrows);return new he(o,this.nrows,this.ncols)}if(n===1&&e.length===this.nrows){const o=new he.valuesConstructor(this.v.length);for(let l=0;l<this.ncols;l++)o.set(Xo(this.getcolref(l+1),e.v,r),l*this.nrows);return new he(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,n)=>r+n)}subtract(e){return this.op(e,(r,n)=>r-n)}mult(e){return this.op(e,(r,n)=>r*n)}divide(e){return this.op(e,(r,n)=>r/n)}apply(e,r){if(r===void 0&&(r=2),r==2){const n=this.ncols,o=new he.valuesConstructor(n);for(let l=0;l<n;l++)o[l]=e(this.getcolref(l+1));return new Xe(o)}if(r==1)return this.t().apply(e,2);if(r==0){const n=this.v.length,o=new he.valuesConstructor(n);for(let l=0;l<n;l++)o[l]=e(this.v[l]);return new he(o,this.nrows,this.ncols)}}replace(e,r,n){typeof r=="number"&&(r=[r]),r.length===0&&(r=pt.seq(1,this.nrows)),Ht(r)||(r=Yt(r)),typeof n=="number"&&(n=[n]),n.length===0&&(n=pt.seq(1,this.ncols)),Ht(n)||(n=Yt(n));const o=r.length,l=n.length;if(cn(r)<1||Fr(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(cn(n)<1||Fr(n)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==l)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let s=0;s<n.length;s++){const i=e.getcolref(s+1),u=(n.v[s]-1)*this.nrows;for(let c=0;c<r.length;c++){const f=r.v[c];this.v[u+f-1]=i[c]}}return this}copy(){return new he(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Xe.valuesConstructor(this.ncols);for(let n=0;n<this.ncols;n++)r[n]=this.getcolref(n+1)[e-1];return new Xe(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Xe(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=Yt([e])),typeof r=="number"&&(r=Yt([r])),Array.isArray(e)&&(e=e.length===0?null:Yt(e)),Array.isArray(r)&&(r=r.length===0?null:Yt(r)),e!==null&&!Ht(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Ht(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(cn(e)<1||Fr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(cn(r)<1||Fr(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const i=r.length,u=this.nrows,c=new he.valuesConstructor(u*i);for(let f=0;f<r.length;f++)c.set(this.v.slice((r.v[f]-1)*this.nrows,r.v[f]*this.nrows),f*this.nrows);return new he(c,u,i)}if(r==null)return this.t().subset(r,e).t();const n=e.length,o=r.length,l=new he.valuesConstructor(n*o);let s=new he.valuesConstructor(n);for(let i=0;i<o;i++){const u=this.v.subarray((r.v[i]-1)*this.nrows,r.v[i]*this.nrows);for(let c=0;c<n;c++)s[c]=u[e.v[c]-1];l.set(s,i*n)}return new he(l,n,o)}toString(e){function r(s,i){return" ".repeat(i-s.length)+s}e===void 0&&(e=2),this.ncols;const n=Math.round(Math.abs(Math.log10(Fr(this.v))))+e+3;let o="";const l=this.t();for(let s=1;s<=l.ncols;s++)o+=Array.from(l.getcolref(s)).map(i=>r(i.toFixed(e),n)).join(" ")+`
`;return o}toCSV(e,r,n,o){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const l=o!=null&&o.length>0,s=n!=null&&n.length>0;if(l&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(s&&n.length!==this.ncols+(l?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const i=this.t();let u=s?n.join(e)+`
`:"";for(let c=1;c<=i.ncols;c++)u=u+(l?o[c-1]+e:"")+i.getcolref(c).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,n,o){return zl(Sl(e*r,n,o),e,r)}static rand(e,r,n,o){return zl(El(e*r,n,o),e,r)}static eye(e,r){r===void 0&&(r=e);const n=new Float64Array(e*r);for(let o=0;o<Math.min(e,r);o++)n[o*e+o]=1;return new he(n,e,r)}static diagm(e){if(!Ie(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,n=new Float64Array(r*r);for(let o=0;o<r;o++)n[o*r+o]=e.v[o];return new he(n,r,r)}static zeros(e,r){return r===void 0&&(r=e),new he(new Float64Array(e*r),e,r)}static ones(e,r){return he.fill(1,e,r)}static fill(e,r,n){n===void 0&&(n=r);const o=new Float64Array(r*n);for(let l=0;l<o.length;l++)o[l]=e;return new he(o,r,n)}static outer(e,r,n){if(Array.isArray(e)&&(e=yt(e)),Array.isArray(r)&&(r=yt(r)),!Ie(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ie(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=he.zeros(e.length,r.length);for(let l=0;l<r.length;l++){const s=r.v[l],i=o.getcolref(l+1);for(let u=0;u<e.length;u++)i[u]=n(e.v[u],s)}return o}static parseCSV(e,r,n,o){function l(m){return m.some(b=>Number.isNaN(Number.parseFloat(b.trim())))}r===void 0&&(r=",");const s=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let i=e.split(/\n/),u=[],c=0;const f=i[0].split(r);(n||n===void 0&&l(f))&&(u=f,c=1),i=i.filter(m=>m.trim().length>1);let d=[],h=0;o&&(h=1);const v=i.length-c,g=f.length-h;if(v<1)throw Error("Data file should contain at least 1 row with values.");if(g<1)throw Error("Data file should contain at least 1 column with values.");const p=he.zeros(g,v);for(let m=c;m<v+c;m++){const b=i[m].split(r);let _;if(o?(d[m-c]=b[0],_=b.slice(1).map(A=>Number.parseFloat(A.trim().replace(s,".")))):_=b.map(A=>Number.parseFloat(A.trim().replace(s,"."))),_.some(A=>Number.isNaN(A)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(_.length!=g)throw Error("Wrong number of values in row #"+m);p.v.set(new Float64Array(_),(m-c)*g)}return{values:p.t(),header:u,labels:d,sep:r,dec:s}}};or(he,"valuesConstructor",Float64Array),or(he,"TOLERANCE",Math.pow(10,-9));let jt=he;function Ie(t){return t&&t.constructor===Xe}function yt(t){return new Xe(new Float64Array(t))}const Je=class Je{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new pt.valuesConstructor(this.length);let n=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[n]=o+1,n=n+1);return new pt(r.subarray(0,n))}filter(e){const r=new Je.valuesConstructor(this.length);let n=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[n]=this.v[o],n=n+1);return new Je(r.subarray(0,n))}shuffle(){return new Je(Rl(this.v))}sort(e){return new Je(Ll(this.v,e))}sortind(e){return new pt(Ml(this.v,e))}rep(e){return Pl(this,e)}repeach(e){return Nl(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=pt.seq(1,this.length)),Ht(r)||(r=Yt(r));const n=r.length;if(cn(r)<1||Fr(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==n)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<r.length;o++){const l=r.v[o];this.v[l-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=Yt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?pt.bool2ind(e):Yt(e)),!Ht(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,n=Je.zeros(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");n.v[o]=this.v[e.v[o]-1]}return n}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new Je(this.v.slice(e-1,r))}copy(){return new Je(this.v.slice())}dot(e){return e===void 0&&(e=this),Zo(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Ie(e))return new Je(Xo(this.v,e.v,r));if(Cl(e))return new Je(Jo(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,n)=>r+n)}subtract(e){return this.op(e,(r,n)=>r-n)}mult(e){return this.op(e,(r,n)=>r*n)}divide(e){return this.op(e,(r,n)=>r/n)}apply(e){const r=this.v.length,n=Je.zeros(r);for(let o=0;o<r;o++)n.v[o]=e(this.v[o]);return n}static c(...e){if(e.length===1)return e[0];const r=e.reduce((l,s)=>l+(typeof s=="number"?1:s.length),0),n=new Je.valuesConstructor(r);let o=0;for(const l of e)typeof l=="number"?(n[o]=l,o+=1):(n.set(Ie(l)?l.v:new Je.valuesConstructor(l),o),o+=typeof l=="number"?1:l.length);return new Je(n)}static seq(e,r,n){return Tl(e,r,n,Je)}static randn(e,r,n){return Sl(e,r,n)}static rand(e,r,n){return El(e,r,n)}static zeros(e){return new Je(new Je.valuesConstructor(e))}static ones(e){return Je.fill(1,e)}static fill(e,r){const n=new Je.valuesConstructor(r);for(let o=0;o<n.length;o++)n[o]=e;return new Je(n)}};or(Je,"valuesConstructor",Float64Array);let Xe=Je;function Ht(t){return t.constructor===pt}function Yt(t){return new pt(new Int32Array(t))}const lt=class lt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new lt.valuesConstructor(this.length);let n=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[n]=o+1,n=n+1);return new lt(r.subarray(0,n))}filter(e){const r=new lt.valuesConstructor(this.length);let n=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[n]=this.v[o],n=n+1);return new lt(r.subarray(0,n))}shuffle(){return new lt(Rl(this.v))}sort(e){return new lt(Ll(this.v,e))}sortind(e){return new lt(Ml(this.v,e))}rep(e){return Pl(this,e)}repeach(e){return Nl(this,e)}subset(e){if(typeof e=="number"&&(e=Yt([e])),Array.isArray(e)&&(e=Yt(e)),!Ht(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,n=new lt.valuesConstructor(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");n[o]=this.v[e.v[o]-1]}return new lt(n)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new lt(this.v.slice(e-1,r))}static seq(e,r,n){return Tl(e,r,n,lt)}static ones(e){return lt.fill(1,e)}static fill(e,r){const n=new lt.valuesConstructor(r);for(let o=0;o<n.length;o++)n[o]=e;return new lt(n)}static bool2ind(e){let r=0;const n=new lt.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(n[r]=o+1,r=r+1);return new lt(n.subarray(0,r))}};or(lt,"valuesConstructor",Int32Array);let pt=lt;function Tl(t,e,r,n){r===void 0&&(r=t<=e?1:-1);const o=Math.floor((e-t)/r)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const l=new n.valuesConstructor(o);for(let s=0;s<o;s++)l[s]=t+s*r;return new n(l)}function Pl(t,e){const r=t.length*e,n=new t.constructor.valuesConstructor(r);for(let o=1;o<=e;o++)for(let l=0;l<t.length;l++)n[(o-1)*t.length+l]=t.v[l];return new t.constructor(n)}function Nl(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,n=new t.constructor.valuesConstructor(r);for(let o=0;o<t.length;o++)for(let l=0;l<e;l++)n[o*e+l]=t.v[o];return new t.constructor(n)}function Xo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const n=new t.constructor(t.length);for(let o=0;o<t.length;o++)n[o]=r(t[o],e[o]);return n}function Jo(t,e,r){const n=new t.constructor(t.length);for(let o=0;o<t.length;o++)n[o]=r(t[o],e);return n}function Zo(t,e,r,n,o,l){if(n!==o)throw Error("_dot: matrix dimensions do not much.");const s=r,i=l,u=n,c=new t.constructor(s*i);for(let f=0;f<i;f++){const d=e.subarray(f*o,(f+1)*o),h=c.subarray(f*s,(f+1)*s);for(let v=0;v<u;v++){const g=d[v],p=t.subarray(v*r,(v+1)*r);for(let m=0;m<s;m++)h[m]+=p[m]*g}}return c}function Rl(t){let e=t.slice(),r=e.length,n,o;for(;r;)o=Math.floor(Math.random()*r--),n=e[r],e[r]=e[o],e[o]=n;return e}function Ll(t,e=!1){return e?t.slice().sort((r,n)=>n-r):t.slice().sort((r,n)=>r-n)}function Ml(t,e=!1){const r=pt.seq(1,t.length).v;return e?r.sort((n,o)=>t[o-1]-t[n-1]):r.sort((n,o)=>t[n-1]-t[o-1])}function yc(t,e){if(e[0]===0){const r=e[1]+2;return 2+r+t*r+2*t+r}return 3+t}const ir=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:yc,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function xc(t){const e=ir.findIndex(o=>o.id==="trim"),r=t.ml.findLastIndex(o=>o===e);if(r<0)return[0,0];const n=t.mpl.slice(0,r).reduce((o,l)=>o+l,0);return[t.mp[n],t.mp[n+1]]}function kc(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const n=ir[t.ml[r]].title;e=e+"<li>"+n+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function Fl(t,e,r){const n=ir.findIndex(d=>d.id==="trim");let o=0,l=t.ncols-e,s=0;for(let d=0;d<r.ml.length;d++){if(r.ml[d]!==n){s+=r.mpl_new[d];continue}o=Math.max(o,r.mp_new[s]),l=Math.min(l,r.mp_new[s+1]),s+=r.mpl_new[d]}const i=t.nrows,c=l-o+e,f=jt.zeros(i,c);return s=0,e>0&&(f.v.set(t.v.slice(0,e*i),s),s+=e*i),f.v.set(t.v.slice((e+o)*i,(e+l)*i),s),[o,l,f]}function jl(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=ir.findIndex(i=>i.id==="trim");if(e.ml.findIndex(i=>i===r)<0)return t;const[o,l,s]=Fl(t.values,t.nresp,e);return t.values=s,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+o,t.nresp+l)):t.varlabels.slice(o,l),t.varindices=t.nresp>0?jr(0,t.nresp-1).concat(jr(0,l-o-1)):jr(0,l-o-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+o,t.nresp+l)):t.varvalues.slice(o,l),t}function ql(t,e,r,n,o=!0,l=[]){if(!_r(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(n)||n.length<1)throw new Error("prep_fit: list with methods is not correct.");let s,i;o?(s=e.ncols,i=e.nrows-r):(s=e.nrows,i=e.ncols-r);const u=n.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const c=new Int32Array(u),f=new Int32Array(u),d=new Int32Array(u);let h=0,v=0;for(let Q=0;Q<n.length;Q++){const ae=n[Q].id,X=n[Q].params,F=ir.findIndex(fe=>fe.id==ae);if(F<0)throw new Error("prep_fit: wrong method name: "+ae+".");const te=ir[F];if(X.length!==te.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+ae+".");c[Q]=F,f[Q]=te.mpl,d[Q]=te.get_mpl_new(i,X),h=h+f[Q],v=v+d[Q]}const g=new Float64Array(h);let p=0;for(let Q=0;Q<n.length;Q++){const ae=n[Q].id,X=n[Q].params;ir.findIndex(F=>F.id==ae),g.set(X,p),p=p+f[Q]}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const b=t._malloc(c.length*c.BYTES_PER_ELEMENT);t.HEAP32.set(c,b/c.BYTES_PER_ELEMENT);const _=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAP32.set(f,_/f.BYTES_PER_ELEMENT);const A=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,A/d.BYTES_PER_ELEMENT);const E=t._malloc(g.length*g.BYTES_PER_ELEMENT);t.HEAPF64.set(g,E/g.BYTES_PER_ELEMENT);const k=t._malloc(v*g.BYTES_PER_ELEMENT),w=new Int32Array(l),y=w.length,M=t._malloc(y*w.BYTES_PER_ELEMENT);if(t.HEAP32.set(w,M/w.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[m,s,i,r,u,b,_,E,A,k,o,M,y])!==1)throw new Error("prep_fit: unexpected error.");const K=t.HEAPF64.slice(k/g.BYTES_PER_ELEMENT,k/g.BYTES_PER_ELEMENT+v);return t._free(m),t._free(b),t._free(E),t._free(_),t._free(M),t._free(k),t._free(A),{ml:c,mpl:f,mp:g,mpl_new:d,mp_new:K,npred:i,class:["prepmodel"]}}function Qo(t,e,r,n,o=!0,l=!1){if(!_r(e))throw new Error("prep_apply: D must be a matrix.");let s,i;if(o?(s=e.ncols,i=e.nrows-r):(s=e.nrows,i=e.ncols-r),i!==n.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+n.npred+" got "+i+").");const u=n.ml,c=n.mpl_new,f=n.mp_new,d=c.reduce((k,w)=>k+w,0);if(!u||u.length<1||!c||c.length!==u.length||f.length!==d)throw new Error("prep_apply: wrong structure of the model object.");const h=u.length,v=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,v/e.v.BYTES_PER_ELEMENT);const g=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,g/u.BYTES_PER_ELEMENT);const p=t._malloc(c.length*c.BYTES_PER_ELEMENT);t.HEAP32.set(c,p/c.BYTES_PER_ELEMENT);const m=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAPF64.set(f,m/f.BYTES_PER_ELEMENT);const b=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[v,s,i,r,h,g,p,m,b,o])!==1)throw new Error("prep_apply: unexpected error.");const A=t.HEAPF64.slice(b/e.v.BYTES_PER_ELEMENT,b/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(v),t._free(g),t._free(p),t._free(m),t._free(b);const E=new jt(A,e.nrows,e.ncols);if(l){const[k,w,y]=Fl(E,r,n);return y}return E}function jr(t,e,r=1){const n=Math.round((e-t+1)/r),o=Array(n);for(let l=0;l<n;l++)o[l]=t+l*r;return o}function Ec(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function En(t){return t.some(e=>Number.isNaN(e))}function qr(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Bl(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function Sc(t,e,r,n,o,l,s,i=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let c=Bl(t);if(c.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");c=c.filter(F=>F.replaceAll(e,"").trim().length>0);const f=c[0].split(e);if(f.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let d=0,h;const v=r!=="no";(v||v===void 0&&En(firstRow))&&(h=f,d=1);const g=c.length-d;if(g<1)throw new Error("Data file should contain at least 1 row with values.");let p,m,b,_=Array(g);n?(p=v?qr(h[0]):"",b=Array(g),m=1):(p="",b=[],m=0);let A,E=[],k;o?(A=v?qr(h[m]):"",k=Array(g),m=m+1):(A="",k=[]);const w=f.length-m;if(w<1)throw new Error("Data file should contain at least 1 column with values.");const y=jt.zeros(w,g);for(let F=d;F<g+d;F++){const te=F-d;_[te]=te;let fe=c[F].split(e);if(n&&(b[te]=fe[0],fe.shift()),o){const J=fe[0];k[te]=J,fe.shift(),(E.length===0||E.indexOf(J)<0)&&E.push(J)}const se=u==="."?fe.map((J,ge)=>Number.parseFloat(J.trim())):fe.map((J,ge)=>Number.parseFloat(J.trim().replace(u,".")));if(se.some(J=>Number.isNaN(J)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(se.length!=w)throw new Error("Wrong number of values in row #"+F);y.v.set(new Float64Array(se),(F-d)*w)}if(!n||b.length!==g){b=Array(g);for(let F=0;F<g;F++)b[F]="O"+(F+1)}b=b.map(F=>qr(F)),k=k.map(F=>qr(F)),E=E.map(F=>qr(F));let M,B=Array(w),K=Array(w);if(h&&h.length===w+m){M=h.map(F=>qr(F)).slice(m);for(let F=0;F<w;F++)B[F]=F>=i?F-i:F,K[F]=F>=i?F-i+1:F+1}else{M=Array(w);for(let F=0;F<w;F++)B[F]=F>=i?F-i:F,M[F]=F>=i?"V"+(F-i+1):"Y"+(F+1),K[F]=F>=i?F-i+1:F+1}let O;if(r==="values"){if(O=u==="."?M.map((F,te)=>te<i?te:Number.parseFloat(F.trim())):M.map((F,te)=>te<i?te:Number.parseFloat(F.trim().replace(u,"."))),O.some(F=>Number.isNaN(F)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else O=K;Array.isArray(O)||(O=[]),l||(l=""),s||(s=""),l=O.length>0&&l.length>0?l:"Variables",s=O.length>0&&s.length>0?s:"";const Q=l+(s.length>0?", "+s:""),ae=O[1]<O[0];return{values:y.t(),nresp:i,header:r,hasLabels:n,hasClassNames:o,labelsVarname:p,classLabelsVarname:A,objlabels:b,objindices:_,varlabels:M,varvalues:O,varindices:B,varrev:ae,classes:k,classNames:E,sep:e,dec:u,varvaluesName:l,varvaluesUnits:s,varAxisTitle:Q}}function Ac(t){if(En(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let n=2;n<e;n++){let o=[];for(let c=1;c<t.length;c++)o.push(t[c][n]);const l=t[0][n],s=Yo(o),i=_l(o),u=Math.abs((l-s)/i);r.push(u)}return r.every(n=>n>5)}function Cc(t){const r=t[0].split(","),n=t[1].split(","),o=r.length,l=n.length,s=";",i=t[0].split(s),u=t[1].split(s),c=i.length,f=u.length;let d,h;if(o>1&&l>1&&o===l&&o>c)h=",",d=o;else if(c>1&&f>1&&c===f)h=s,d=c;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",d]}function zc(t,e=0){const r=Bl(t),n=r.length;if(n<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,l,s]=Cc(r),i=Math.min(s,5),u=Math.min(n,5);let c=r[0].split(o).length,f=r.slice(0,u).map(B=>B.split(o).slice(0,i));f=f.map(B=>B.map(K=>qr(K)));const d=f.map(B=>Ec(B.slice(),l));for(let B=1;B<u;B++)if(En(d[B].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const h=Ac(d);let v=0;const g=h?1:0,p=g+1,m=f[g][0],b=f[p][0],_=d[g][0],A=d[p][0],E=d[g][1],k=d[p][1];let w=!1,y=!1;if(Number.isNaN(_)&&Number.isNaN(A)&&m!==b?(w=!0,v=v+1):Number.isNaN(E)&&Number.isNaN(k)&&m!==b&&(w=!0,y=!0,v=v+2),!y){const B=w?1:0,K=d[g][B],O=d[p][B];y=En([K,O]),v=v+y}let M="no";if(h){v>0?f[0].slice(v+e):f[e];const B=v>0?d[0].slice(v+e):d[e];M=En(B)?"labels":"values"}return[o,w,y,M,c]}function Tc(t){const e=t.values.t(),r=t.sep,n=t.dec;let o=null;t.header!=="no"&&(o=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),o&&t.hasClassNames&&(o=[t.classLabelsVarname,...o]),o&&t.hasLabels&&(o=[t.labelsVarname,...o]);const l=t.classes&&t.classes.length===e.ncols,s=t.objlabels&&t.objlabels.length===e.ncols;let i=o?o.join(r):"";for(let u=0;u<e.ncols;u++){let c=e.getcolref(u+1).join(r);n!=="."&&(c=c.replace(".",n)),l&&(c=t.classes[u]+t.sep+c),s&&(c=t.objlabels[u]+t.sep+c),i=i+`
`+c}return i=i+`
`,n!=="."&&(i=i.replace(/\./g,n)),i}function Pc(t,e){const r=Tc(t),n=new Blob([r],{type:"text/csv"}),o=window.URL.createObjectURL(n),l=document.createElement("a");l.setAttribute("href",o),l.setAttribute("download",`${e}.csv`),l.click()}function Nc(t,e){const r=new Blob([JSON.stringify(t,to)],{type:"application/json"}),n=window.URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download",e+".json"),o.click()}function to(t,e){return _r(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ie(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function Il(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return _c(e.v,e.nrows,e.ncols);if(e.__type==="vector")return yt(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function $o(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${n}${o}${l}${s}`}function Dl(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function ro(t,e,r){let n="";for(let o=0;o<e;o++){const l=t.getUint8(r++);if(l===0)break;n+=String.fromCharCode(l)}return n}function Rc(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],n=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],o=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let l=0;const s=t.getUint8(l);l+=1;const i=t.getUint8(l);if(l+=1,i===77)throw new Error("SPC file has old format which is not supported.");const u=i===75,c=t.getUint8(l);l+=1;const f=t.getInt8(l);l+=1;const d=t.getUint32(l,u);l+=4;const h=t.getFloat64(l,u);l+=8;const v=t.getFloat64(l,u);l+=8;const g=t.getUint32(l,u);l+=4;const p=t.getUint8(l);l+=1;const m=t.getUint8(l);l+=1;const b=t.getUint8(l);l+=1;const _=t.getUint8(l);l+=1;const A=t.getUint32(l,u);l+=4;const E=ro(t,9,l);l+=9;const k=ro(t,9,l);l+=9;const w=t.getUint16(l,u);l+=2;const y=Array.from({length:8},()=>{const Ue=t.getFloat32(l,u);return l+=4,Ue}),M=ro(t,130,l);l+=130;const B=ro(t,30,l);l+=30;const K=t.getUint32(l,u);l+=4;const[O,Q,ae,X,F,te,fe,se]=Dl(s),J=p===255?r[31]:r[p],ge=p===255?e[31]:e[p],Re=m<=26?n[m]:m>=128&&m<=131?o[m]:"Unknown";return{ftflgsv:s,ftflgs:{TSPREC:O,TCGRAM:Q,TMULTI:ae,TRANDM:X,TORDRD:F,TALABS:te,TXYXYS:fe,TXVALS:se},fexper:c,fexp:f,fnpts:d,ffirst:h,flast:v,fnsub:g,fxtype:p,fytype:m,fztype:b,fpost:_,fdate:A,fres:E,fsource:k,fpeakpt:w,fspare:y,fcmnt:M,fcatxt:B,flogoff:K,xaxisName:J,xaxisUnit:ge,yaxisName:Re}}function Lc(t,e){const r=Dl(t.getUint8(e));e+=1;const n=t.getInt8(e);e+=1;const o=t.getUint16(e,!0);e+=2;const l=t.getFloat32(e,!0);e+=4;const s=t.getFloat32(e,!0);e+=4;const i=t.getFloat32(e,!0);e+=4;const u=t.getInt32(e,!0);e+=4;const c=t.getInt32(e,!0);e+=4;const f=t.getFloat32(e,!0);return e+=4,{flags:r,exp:n,index:o,time:l,next:s,noise:i,nPoints:u,nScans:c,wAxis:f}}async function Ol(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),n=await t.arrayBuffer(),o=new DataView(n);let l=0;const s=Rc(o);l+=512;const i=s.fnpts;if(i<2)throw new Error(`Error reading SPC file (${t.name}).`);let u=new Array(i);if(s.ftflgs.TXVALS)for(let d=0;d<i;d++){const h=o.getFloat32(l,!0);l=l+4,u[d]=h}else{(s.flast-s.ffirst)/(i-1);for(let d=0;d<i;d++)u[d]=s.ffirst+d*s.flast}const c=new Float64Array(i*s.fnsub);for(let d=0;d<s.fnsub;d++){Lc(o,l),l=l+32;for(let h=0;h<i;h++){const v=o.getFloat32(l,!0);l=l+4,c[d*i+h]=v}}const f=[];return s.fnsub>1?jr(1,s.fnsub).forEach(h=>{f.push(r+"_"+h)}):f.push(r),{hdr:s,xvalues:u,yvalues:c,objlabels:f}}async function Mc(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let n=[],o=[];const l=await Ol(t[0]),s=l.xvalues.length;if(r.push(l.yvalues),n=n.concat(l.objlabels),o.push(l.hdr.fnsub),e>1)for(let g=1;g<e;g++){const p=await Ol(t[g]);if(p.xvalues.length!==s)throw new Error("Number of spectral values in SPC files is different.");r.push(p.yvalues),n=n.concat(p.objlabels),o.push(p.hdr.fnsub)}const i=o.reduce((g,p)=>g+p,0),u=new Float64Array(i*s);let c=0;for(let g=0;g<r.length;g++)u.set(r[g].slice(),c),c+=o[g]*s;const f=new jt(u,s,i),d=jr(0,s-1),h=jr(0,i-1),v=d.map(g=>"X"+g);return{values:f.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:n,objindices:h,varlabels:v,varvalues:l.xvalues,varindices:d,varev:l.xvalues[1]<l.xvalues[0],sep:",",dec:".",varvaluesName:l.hdr.xaxisName,varvaluesUnits:l.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var Fc=D('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function Br(t,e){let r=P(e,"text",3,"button");var n=Fc();n.__click=function(...l){var s;(s=e.onclick)==null||s.apply(this,l)};var o=j(n);G(()=>Me(o,r())),z(t,n)}ot(["click"]);var jc=D('<button tabindex="0"></button>');function Sn(t,e){P(e,"disable",3,!1);var r=jc();r.__click=function(...n){var o;(o=e.onclick)==null||o.apply(this,n)},G(()=>{S(r,"title",e.title),S(r,"aria-label",e.title),S(r,"alt",e.title),it(r,1,`button ${e.className??""}`,"svelte-bx9fh5")}),z(t,r)}ot(["click"]);function no(t,e){let r=P(e,"title",3,"Reset");Sn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function qc(t,e){let r=P(e,"title",3,"Add");Sn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function Bc(t,e){let r=P(e,"title",3,"Settings");Sn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function Ic(t,e){let r=P(e,"title",3,"Move up");Sn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function Dc(t,e){let r=P(e,"title",3,"Move down");Sn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}var Oc=D('<span class="label svelte-1986c5z"> </span>'),Vc=D("<div><!> <!></div>");function ne(t,e){let r=P(e,"label",3,null),n=P(e,"name",3,""),o=P(e,"status",3,""),l=P(e,"colors",3,""),s=P(e,"labelWidth",3,12);var i=Vc(),u=j(i);{var c=d=>{var h=Oc(),v=j(h);G(()=>{Ft(h,`flex-basis:${s()??""}ch;`),Me(v,r())}),z(d,h)};I(u,d=>{r()&&d(c)})}var f=L(u,2);an(f,()=>e.children??kt),G(()=>{it(i,1,`control-element ${n()??""} ${o()??""}`,"svelte-1986c5z"),Ft(i,l())}),z(t,i)}const Vl=(t,e,r,n)=>{const o=e(t);o<0||o>1||N(r,o*100>a(n)-5&&o*100<a(n)+5,!0)},Ul=(t,e,r,n,o,l)=>{N(e,!1);const s=r(t);s<0||s>1||(n(o(s)),l()&&l()(n()))},Wl=(t,e,r,n,o,l)=>{if(!a(e))return;const s=r(t);s<0||s>1||(n(o(s)),l()&&l()(n()))},Uc=(t,e,r,n,o,l)=>{if(t.key==="ArrowLeft"){e(e()-r()<n()?n():e()-r()),o()&&o()(e());return}if(t.key==="ArrowRight"){e(e()+r()>l()?l():e()+r()),o()&&o()(e());return}};var Wc=D('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function oo(t,e){pe(e,!0);let r=P(e,"min",7,0),n=P(e,"max",3,100),o=P(e,"value",31,()=>Ne(r())),l=P(e,"decNum",3,1),s=P(e,"step",19,()=>+((n()-r())/100).toFixed(4)),i=P(e,"onchange",3,null);ue(()=>{o()<r()&&(o(r()),i()&&i()(o())),o()>n()&&(o(n()),i()&&i()(o())),r()>n()&&r(n())});let u=Y(void 0),c=Y(void 0),f=Y(!1);const d=w=>{const y=r()+w*(n()-r());return+(Math.round(y/s())*s()).toFixed(4)},h=w=>{const y=a(u).getBoundingClientRect(),M=a(c).getBoundingClientRect(),B=y.x,K=M.x+M.width;return(w.clientX-B)/(K-B)},v=w=>{N(f,!1)},g=w=>{let y=o()+s()*w.deltaY*.5;y<r()&&(y=r()),y>n()&&(y=n()),o(+(Math.round(y/s())*s()).toFixed(4)),w.preventDefault(),i()&&i()(o())},p=T(()=>r()===n()?100:(o()-r())/(n()-r())*100);var m=Wc();m.__keydown=[Uc,o,s,r,i,n],m.__mousemove=[Wl,f,h,o,d,i],m.__mousedown=[Vl,h,f,p],m.__mouseup=[Ul,f,h,o,d,i],m.__touchmove=[Wl,f,h,o,d,i],m.__touchstart=[Vl,h,f,p],m.__touchend=[Ul,f,h,o,d,i];var b=j(m);let _;var A=j(b);let E;var k=j(A);Mr(b,w=>N(u,w),()=>a(u)),Mr(m,w=>N(c,w),()=>a(c)),G((w,y,M)=>{S(m,"aria-valuenow",o()),S(m,"aria-valuemin",r()),S(m,"aria-valuemax",n()),_=it(b,1,"range-slider svelte-vhx0r0",null,_,w),Ft(b,`width:${a(p)??""}%`),E=it(A,1,"range-value svelte-vhx0r0",null,E,y),Me(k,M)},[()=>({"range-slider_right":a(p)<50}),()=>({"range-value_right":a(p)<50}),()=>o().toFixed(l())]),Rr("mousewheel",m,g),Rr("mouseleave",m,v),Rr("touchcancel",m,v),z(t,m),we()}ot(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Hl=(t,e,r,n,o)=>{const l=e(t);l<0||l>1||N(r,l>a(n)&&l<a(o)+a(n),!0)},Yl=(t,e,r,n,o)=>{N(e,!1);const l=r(t);if(l<0||l>1)return;const s=n(l);o()!==s&&o(s)},Gl=(t,e,r,n,o)=>{if(!a(e))return;const l=r(t);if(l<0||l>1)return;const s=n(l);s!=o()&&o(s)},Hc=(t,e,r,n,o)=>{if(t.key==="ArrowLeft"){e(e()-r()<n()?n():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>o()?o():e()+r());return}};var Yc=D('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function An(t,e){pe(e,!0);let r=P(e,"min",3,0),n=P(e,"max",3,10),o=P(e,"value",31,()=>Ne(r())),l=P(e,"step",3,1);o()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(r())),o()>n()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(n())),r()>n()&&console.error("The min and max values must be distinct.");let s=Y(void 0),i=Y(void 0),u=Y(!1);const c=T(()=>r()===n()?0:(o()-r())/(n()-r()+l())),f=T(()=>l()/(n()-r()+l())),d=T(()=>n()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${a(f)*100}%, var(--bg-color-light2, #e8e8e8) ${a(f)*100}%, var(--bg-color-light2, #e8e8e8) ${200*a(f)}%)`:"background: #f0f0f0"),h=w=>{if(w<0||w>1)return o();let y=o();return Math.round(a(f)/w),w<a(c)&&a(c)>0&&(y=o()-l()*Math.ceil((a(c)-w)/a(f))),w>a(c)+a(f)&&a(c)+a(f)<1&&(y=o()+l()*Math.ceil((w-(a(c)+a(f)))/a(f))),y<r()&&(y=r()),y>n()&&(y=n()),y},v=w=>{const y=a(i).getBoundingClientRect(),M=y.x,B=y.x+y.width;return(w.clientX-M)/(B-M)},g=w=>{N(u,!1)},p=w=>{let y=o()+Math.round(w.deltaY*.5)*l();y<r()&&(y=r()),y>n()&&(y=n()),o(y),w.preventDefault()};var m=Yc();m.__keydown=[Hc,o,l,r,n],m.__mousemove=[Gl,u,v,h,o],m.__mousedown=[Hl,v,u,c,f],m.__mouseup=[Yl,u,v,h,o],m.__touchmove=[Gl,u,v,h,o],m.__touchstart=[Hl,v,u,c,f],m.__touchend=[Yl,u,v,h,o];var b=j(m);let _;var A=j(b);let E;var k=j(A);Mr(b,w=>N(s,w),()=>a(s)),Mr(m,w=>N(i,w),()=>a(i)),G((w,y,M)=>{S(m,"aria-valuenow",o()),S(m,"aria-valuemin",r()),S(m,"aria-valuemax",n()),Ft(m,a(d)),_=it(b,1,"range-slider svelte-xdlm7u",null,_,w),Ft(b,`width: max(2px, ${a(f)*100}%);left:${a(c)*100}%;`),E=it(A,1,"range-value svelte-xdlm7u",null,E,y),Me(k,M)},[()=>({"range-slider_left":a(f)<.1&&a(c)<.5,"range-slider_right":a(f)<.1&&a(c)>=.5}),()=>({"range-value_right":a(f)<.1&&a(c)>.5,"range-value_left":a(f)<.1&&a(c)<=.5}),()=>o().toFixed(0)]),Rr("mousewheel",m,p),Rr("mouseleave",m,g),Rr("touchcancel",m,g),z(t,m),we()}ot(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Gc=(t,e,r)=>{if(t.key==="ArrowLeft"){const n=e.options.findIndex(o=>o===r());n>0&&r(e.options[n-1]);return}if(t.key==="ArrowRight"){const n=e.options.findIndex(o=>o===r());n<e.options.length-1&&r(e.options[n+1]);return}};var Kc=(t,e,r)=>e(r),Xc=D('<button tabindex="-1"><!></button>'),Jc=D('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox"/>',1);function qt(t,e){pe(e,!0);let r=P(e,"value",31,()=>Ne(e.options[0])),n=P(e,"className",3,"");var o=Jc(),l=V(o);l.__keydown=[Gc,e,r],ft(l,20,()=>e.options,i=>i,(i,u)=>{var c=Xc();c.__click=[Kc,r,u];let f;var d=j(c);mt(d,()=>u),G((h,v)=>f=it(c,1,`option option_${h??""}`,"svelte-1i17tox",f,v),[()=>u.toString().replace(".","_"),()=>({selected:u==r()})]),z(i,c)});var s=L(l,2);G(()=>it(l,1,`selector ${n()??""}`,"svelte-1i17tox")),hl(s,r),z(t,o),we()}ot(["keydown","click"]);function ea(t,e){pe(e,!0);let r=P(e,"options",19,()=>["no","yes"]),n=P(e,"value",15,!1),o=Y(!0);const l=T(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());ue(()=>N(o,n()?r()[1]:r()[0],!0)),ue(()=>n(a(o)===r()[1]));var s=Ee(),i=V(s);{var u=c=>{qt(c,{get options(){return a(l)},get value(){return a(o)},set value(f){N(o,f,!0)}})};I(i,c=>{a(l)&&c(u)})}z(t,s),we()}function Kl(t,e,r){a(e)&&a(e).files.length>0?r(a(e).files.length===1?a(e).files[0]:a(e).files):r(null)}function Xl(t,e){(t.type==="click"||t.type==="keydown"&&(t.code==="Space"||t.code==="Enter"))&&a(e).click()}var Zc=D('<input type="file" multiple class="svelte-1k0x7uv"/>'),Qc=D('<input type="file" class="svelte-1k0x7uv"/>'),$c=D('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function Jl(t,e){pe(e,!0);let r=P(e,"file",15),n=P(e,"message",3,"Select CSV file with dataset"),o=P(e,"acceptType",3,".csv"),l=P(e,"multiple",3,!1),s=Y(void 0);function i(b){a(s).value=null,r(null)}var u=$c(),c=V(u);c.__keydown=[Xl,s],c.__click=[Xl,s];let f;var d=j(c),h=L(d);{var v=b=>{var _=Zc();_.__change=[Kl,s,r],Mr(_,A=>N(s,A),()=>a(s)),G(()=>S(_,"accept",o())),z(b,_)},g=b=>{var _=Qc();_.__change=[Kl,s,r],Mr(_,A=>N(s,A),()=>a(s)),G(()=>S(_,"accept",o())),z(b,_)};I(h,b=>{l()?b(v):b(g,!1)})}var p=L(c,2);{var m=b=>{no(b,{onclick:i})};I(p,b=>{r()&&b(m)})}G(b=>{f=it(c,1,"file-selector svelte-1k0x7uv",null,f,b),Me(d,`${(r()?r().name:n())??""} `)},[()=>({selected:r()})]),z(t,u),we()}ot(["keydown","click","change"]);function eu(t,e,r,n){e()&&N(r,e()(n()),!0)}var tu=D('<div class="error-message svelte-1qtiwcs"> </div>'),ru=D('<div><input type="text" class="svelte-1qtiwcs"/> <!></div>');function Zl(t,e){pe(e,!0);let r=P(e,"value",15,""),n=P(e,"className",3,""),o=P(e,"placeholder",3,""),l=P(e,"maxLength",3,25),s=P(e,"validator",3,null),i=Y("");var u=ru();let c;var f=j(u);f.__input=[eu,s,i,r];var d=L(f,2);{var h=v=>{var g=tu(),p=j(g);G(()=>Me(p,a(i))),z(v,g)};I(d,v=>{a(i)&&a(i).length>0&&v(h)})}G(v=>{c=it(u,1,`textinput ${n()??""}`,"svelte-1qtiwcs",c,v),S(f,"placeholder",o()),S(f,"maxlength",l())},[()=>({error:a(i)&&a(i).length>0})]),hl(f,r),z(t,u),we()}ot(["input"]);var nu=D('<div class="spinner svelte-n48urb"></div>');function ou(t){var e=nu();z(t,e)}ot(["keydown","click"]),ot(["keydown","click"]);function ta(t,e){let r=0,n=0;t.nresp>0&&(r=new Xe(t.values.v.slice(0,t.values.nrows)),n=1);const o=new jt(t.values.v.slice(n*t.values.nrows),t.values.nrows,t.values.ncols-n).t(),l=o.ncols<e?1:Math.round(o.ncols/e),s=pt.seq(1,o.ncols,l),i=o.subset(null,s),u=r?r.subset(s):null,c=t.classes?t.classes.filter((f,d)=>s.v.includes(d)):null;return{classNames:t.classNames,classes:c,resp:u,values:i,varvalues:t.varvalues.filter((f,d)=>d>=n),varindices:t.varindices.filter((f,d)=>d>=n),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function ra(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function Ql(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}function $l(t,e,r){const n=t.fileName+"-preprocessed";Pc(t,n)}function au(t){Nc(t,"preprocessing-model")}var lu=D('<span style="font-weight:bold"> </span><br/>',1),su=D('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),iu=D('<span class="file-size svelte-gdjwex"> </span>'),cu=D('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br/> <span>Size:</span> <!></p> <!>',1);function uu(t,e){pe(e,!0);let r=P(e,"title",3,"");var n=Ee(),o=V(n);{var l=s=>{ne(s,{children:(i,u)=>{var c=cu(),f=V(c),d=j(f);{var h=A=>{var E=lu(),k=V(E),w=j(k);G(()=>Me(w,r())),z(A,E)};I(d,A=>{r()&&r()!==""&&A(h)})}var v=L(d,4),g=j(v),p=L(v,5);{var m=A=>{var E=su(),k=V(E),w=j(k),y=L(k,4),M=j(y);G(()=>{Me(w,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),Me(M,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),z(A,E)},b=A=>{var E=iu(),k=j(E);G(()=>Me(k,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),z(A,E)};I(p,A=>{e.dataset.nresp&&e.dataset.nresp>0?A(m):A(b,!1)})}var _=L(f,2);no(_,{get onclick(){return e.reset}}),G(()=>{S(v,"title",e.dataset.fileName),Me(g,e.dataset.fileName)}),z(i,c)},$$slots:{default:!0}})};I(o,s=>{e.dataset&&s(l)})}z(t,n),we()}var fu=D("<!> <!>",1),du=D("<!> <!> <!> <!> <!> <!>",1),vu=D("<!> <!>",1),hu=D("<p> </p>"),gu=D("<!> <p>Loading data...</p>",1),mu=D("<p> </p>"),pu=D("<!> <!> <!> <!>",1);function es(t,e){pe(e,!0);let r=P(e,"WASM",3,null),n=P(e,"model",3,null),o=P(e,"rawdata",15,null),l=P(e,"prepdata",15,null),s=P(e,"title",3,"Raw data"),i=P(e,"left",3,null),u=P(e,"right",3,null);P(e,"multiple",3,!0);const c=[",",";"],f=["no","labels","values"];let d=Y(void 0),h=Y(""),v=Y(""),g=Y("data"),p=Y(","),m=Y("no"),b=Y(!1),_=Y(!1),A=Y(null),E=Y("neutral"),k=Y("");function w(Z){N(E,"error"),N(k,Z,!0),o(null),console.error(Z)}function y(){N(E,"neural"),N(k,"")}function M(){N(E,"success"),N(k,"")}function B(){N(d,""),o(null),l(null),N(h,""),N(v,""),N(k,""),y()}function K(){if(!(!o()||!n())){if(o().values.ncols-o().nresp!==n().npred){w(`Number of variables in the dataset (${o().values.ncols}) does not match the expected number (${n().npred}).`);return}N(A,r()().then(Z=>{N(E,"applying");const ce=Qo(Z,o().values,o().nresp,n(),!1,!1),De=Ql(Ca(o()),ce);l(jl(De,n())),M()}).catch(Z=>{l(null),w(Z)}),!0)}}function O(Z){if(!Z||Z.size<10)return;const De=Z.slice(0,1e5),je=new FileReader;je.onload=()=>{const xe=je.result;!xe||xe.length<0||((Se=>{var ee=Fn(Se,4);N(p,ee[0],!0),N(b,ee[1],!0),N(_,ee[2],!0),N(m,ee[3],!0)})(zc(xe)),a(_)&&N(g,"groups"))},je.onerror=function(xe){csvString=null,w(xe)},je.readAsText(De)}function Q(Z){try{const ce=Sc(Z,a(p),a(m),a(b),a(g)==="groups",a(h),a(v),a(g)==="response"?1:0);if(ce.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(ce.classNames.length>ce.values.nrows/2)throw new Error("Dataset has too many unique "+className.toLowerCase()+" labels ("+ce.classNames.length+"), check your CSV file.");const De=ce.values.ncols-ce.nresp;if(n()&&De!==n().npred)throw new Error("Number of predictors in dataset ("+De+") does not match what model expects ("+n().npred+")");ce.fileName=a(d).name.replace(/\.[^/.]+$/,""),o(ce),M()}catch(ce){w(ce)}}function ae(Z){const ce=new FileReader;ce.onload=()=>{Q(ce.result)},ce.readAsText(a(d))}async function X(Z){try{const ce=a(d)instanceof FileList?a(d):[a(d)];o(await Mc(ce)),M()}catch(ce){w("Failed to read SPC file: "+ce)}}ue(()=>{if(a(d)!==void 0){if(a(d)===null||a(d)===""){B();return}if(Array.isArray(a(d))){if(a(d).filter(Z=>Z.slice(-4)===".spc").length!==a(d).length){w("Multiple file selection is allowed only for SPC files.");return}X(a(d));return}a(d)&&a(d).type==="text/csv"?(O(a(d)),y()):X([a(d)])}}),ue(()=>{a(p)&&(N(E,"neutral"),N(k,""))}),ue(()=>{o()!==null&&n()!==null&&!l()&&a(k)===""&&K()});var F=pu(),te=V(F);{var fe=Z=>{var ce=vu(),De=V(ce);Qn(De,()=>a(d)===void 0,Se=>{ne(Se,{children:(ee,q)=>{Jl(ee,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return a(d)},set file(H){N(d,H,!0)}})},$$slots:{default:!0}})});var je=L(De,2);{var xe=Se=>{var ee=du(),q=V(ee);ne(q,{label:"Delimiter",children:(Oe,We)=>{qt(Oe,{id:"sep",get options(){return c},get value(){return a(p)},set value(Qe){N(p,Qe,!0)}})},$$slots:{default:!0}});var H=L(q,2);ne(H,{label:"Row labels",children:(Oe,We)=>{ea(Oe,{id:"hasLabels",options:["no","yes"],get value(){return a(b)},set value(Qe){N(b,Qe,!0)}})},$$slots:{default:!0}});var W=L(H,2);ne(W,{label:"First column",children:(Oe,We)=>{qt(Oe,{id:"sep",options:["data","groups","response"],get value(){return a(g)},set value(Qe){N(g,Qe,!0)}})},$$slots:{default:!0}});var oe=L(W,2);ne(oe,{label:"Header",children:(Oe,We)=>{qt(Oe,{id:"header",get options(){return f},get value(){return a(m)},set value(Qe){N(m,Qe,!0)}})},$$slots:{default:!0}});var $=L(oe,2);{var le=Oe=>{var We=fu(),Qe=V(We);ne(Qe,{label:"Header name",children:($e,Dt)=>{Zl($e,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return a(h)},set value(Ot){N(h,Ot,!0)}})},$$slots:{default:!0}});var tr=L(Qe,2);ne(tr,{label:"Header units",children:($e,Dt)=>{Zl($e,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return a(v)},set value(Ot){N(v,Ot,!0)}})},$$slots:{default:!0}}),z(Oe,We)};I($,Oe=>{a(m)==="values"&&Oe(le)})}var Fe=L($,2);ne(Fe,{label:" ",children:(Oe,We)=>{Br(Oe,{text:"Load",onclick:ae})},$$slots:{default:!0}}),z(Se,ee)};I(je,Se=>{a(d)&&a(d).type==="text/csv"&&Se(xe)})}z(Z,ce)},se=Z=>{var ce=Ee(),De=V(ce);{var je=xe=>{var Se=Ee(),ee=V(Se);Xi(ee,()=>a(A),q=>{ne(q,{children:(H,W)=>{var oe=gu(),$=V(oe);ou($),z(H,oe)},$$slots:{default:!0}})},void 0,(q,H)=>{ne(q,{status:"error",children:(W,oe)=>{var $=hu(),le=j($);G(()=>Me(le,a(H))),z(W,$)},$$slots:{default:!0}})}),z(xe,Se)};I(De,xe=>{a(A)&&xe(je)})}z(Z,ce)};I(te,Z=>{o()?Z(se,!1):Z(fe)})}var J=L(te,2);{var ge=Z=>{uu(Z,{get dataset(){return o()},reset:B,get title(){return s()}})};I(J,Z=>{o()&&Z(ge)})}var Re=L(J,2);{var Ue=Z=>{ne(Z,{label:"Download",children:(ce,De)=>{Br(ce,{text:"Preprocessed data",onclick:()=>$l(l(),i(),u())})},$$slots:{default:!0}})};I(Re,Z=>{l()&&n()&&Z(Ue)})}var me=L(Re,2);{var ie=Z=>{ne(Z,{status:"error",children:(ce,De)=>{var je=mu(),xe=j(je);G(()=>Me(xe,a(k))),z(ce,je)},$$slots:{default:!0}})};I(me,Z=>{(a(E)==="error"||a(k))&&Z(ie)})}z(t,F),we()}const wu={small:30,medium:40,large:50,xlarge:60},bu={small:5,medium:8,large:12,xlarge:15},_u={small:6,medium:10,large:14,xlarge:18},na={small:4,medium:6,large:8,xlarge:10},yu={small:12,medium:15,large:19,xlarge:21},ts={small:11,medium:15,large:17,xlarge:19},ao={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},xu=["●","◼","▲","▼","⬥","＋","✳","✕"],ku=.8,rs=.5,Eu={small:5,medium:8,large:12,xlarge:15},Bt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function ns(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function os(t,e){if(t!=null&&(Array.isArray(t)&&(t=yt(t)),!(!Ie(t)||t.length<1)))return t.apply(r=>la((r-e[1])*e[0]+e[2])).v}function It(t,e){return os(t,e.coords)}function as(t,e){return os(t,e.objects)}function ls(t,e){if(t!=null&&(Array.isArray(t)&&(t=yt(t)),!(!Ie(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function ss(t,e){return ls(t,e.coords)}function is(t,e){return ls(t,e.objects)}function oa(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Ir(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function aa(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Ir(Math.abs(cn(bl(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(l=>l.toFixed(0))]:(r=Math.ceil(Ir(Math.log10(e)))-2,[r,Array.from(t).map(l=>(l/Math.pow(10,r)).toFixed(0))]);let n=Math.ceil(-Ir(Math.log10(e)));return n<=2?[0,Array.from(t).map(o=>o.toFixed(n))]:(r=n-2,n=2,Ir(Math.abs(Fr(t)))<=10?[-r,Array.from(t).map(o=>(o*Math.pow(10,r)).toFixed(n))]:[-r,Array.from(t).map(o=>(o/Math.pow(10,r)).toString())])}function Dr(t,e,r){return Array.isArray(t)&&(t=yt(t)),Ie(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function cs(t,e,r,n){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=r.coords,l=n.coords;let s="";for(let i=0;i<t.length;i++){const u=la((t.v[i]-o[1])*o[0]+o[2]),c=la((e.v[i]-l[1])*l[0]+l[2]);s+=u+","+c+" "}return s}function us(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Or(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function fs(t,e){if(Array.isArray(t)&&(t=yt(t)),!Ie(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(s=>isNaN(s)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const n=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],l=t.filter(s=>s>=n&s<=o);return l.length!==t.length?[null,"some of ticks values are outside axis limits."]:[l,""]}function ds(t,e,r,n,o,l){o==null&&(o=!1),l===void 0&&(l=1e-4);const s=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof s!="object"||s[0]===void 0||s[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const i=Math.abs(s[1]-s[0])*l,u=s[1]-s[0]-2*i,c=Math.floor(Math.log10(u)),f=1/Math.pow(10,c-1),d=Math.round(u*f)/f;let h=Su(d/r);o&&(Math.abs(s[1]-s[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let v=Math.ceil((s[0]+i)/h)*h,g=Math.floor((s[1]-i)/h)*h;Math.abs(s[0]-v)<h/10&&(v=v+h),Math.abs(s[1]-g)<h/10&&(g=g-h),r=Math.ceil(Ir((g-v)/h))+1,t=Xe.zeros(r);for(let p=0;p<r;p++)t.v[p]=v+h*p;if(Math.abs(h)<1){const p=Math.pow(10,1+Math.round(-Math.log10(h)));t=t.apply(m=>Math.round((m+Number.EPSILON)*p)/p)}return t.filter(p=>p>=s[0]&p<=s[1])}function Su(t,e){const r=Math.floor(Math.log10(t)),n=t/Math.pow(10,r);let o;return n<=1?o=1:n<=2?o=2:n<=5?o=5:o=10,o*Math.pow(10,r)}function la(t){return Math.round(t*10)/10}function Au(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function vs(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Cu(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let n=0;n<8;n++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function zu(t){let e=-1,r=Cu();for(let n=0;n<t.length;n++)e=r[(e^t[n])&255]^e>>>8;return e^-1}function Tu(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const n=zu(r),o=new Uint8Array(4);o[0]=n>>>24,o[1]=n>>>16,o[2]=n>>>8,o[3]=n&255;const l=new Uint8Array(4);l[0]=0,l[1]=0,l[2]=0,l[3]=9;const s=new Uint8Array(54);return s.set(t,0),s.set(l,33),s.set(r,37),s.set(o,50),s}function Pu(t,e){const r=t.split(","),n=r[0],o=r[1],l=33/3*4,s=o.substring(0,l),i=o.substring(l),u=atob(s),c=new Uint8Array(u.length);for(let h=0;h<c.length;h++)c[h]=u.charCodeAt(h);const f=Tu(c,e),d=btoa(String.fromCharCode(...f));return[n,",",d,i].join("")}function Nu(t,e,r,n,o){if(r||(r=10),n||(n=10),o||(o=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(n<1||n>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const l=r/2.54*o,s=n/2.54*o;setTimeout(()=>{const i=t.clientHeight,u=t.clientWidth;let c=Math.max(l/u,s/i),f=1;c<1&&(f=c,c=1);const d=document.createElement("canvas"),h=d.getContext("2d");d.width=u*(f<1?f:c),d.height=i*(f<1?f:c),t.setAttribute("width",u*c),t.setAttribute("height",i*c),h.fillStyle="white",h.fillRect(0,0,d.width,d.height),h.scale(c,c);const v=new XMLSerializer().serializeToString(t),g=new Blob([v],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(g),m=new Image;m.onload=function(){f<0&&(m.width=m.width*f,m.height=m.height*f),h.drawImage(m,0,0,d.width,d.height);const b=d.toDataURL("image/png"),_=Pu(b,o),A=document.createElement("a");A.href=_,A.download=`${e}.png`,A.click()},m.src=p},20)}function Ru(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,n=t.clientWidth;t.setAttribute("width",n+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${n} ${r}`);const o=new Blob([t.outerHTML],{type:"image/svg+xml"}),l=window.URL.createObjectURL(o),s=document.createElement("a");s.setAttribute("href",l),s.setAttribute("download",`${e}.svg`),s.click()}function Lu(t,e,r,n){const o=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Mu(e,r,n)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=o},500)},l=>{console.error(l),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=o},500)}).catch(l=>console.error(l))}async function Mu(t,e,r){const n=t.clientHeight,o=t.clientWidth,l=Math.max(e/o,r/n),s=document.createElement("canvas"),i=s.getContext("2d");return s.width=o*l,s.height=n*l,i.scale(l,l),t.setAttribute("width",s.width),t.setAttribute("height",s.height),await new Promise((c,f)=>{const d=new XMLSerializer().serializeToString(t),h=new Blob([d],{type:"image/svg+xml;charset=utf-8"}),v=window.URL||window.webkitURL||window,g=v.createObjectURL(h),p=new Image;p.onload=function(){i.drawImage(p,0,0,s.width,s.height),v.revokeObjectURL(g),s.toBlob(function(m){m?c(m):f(new Error("Failed to create blob"))},"image/png")},p.onerror=function(m){f(m)},p.src=g})}function hs(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function Fu(t,e,r,n,o){let l=o.ticks,s=o.tickLabels,i=0;const u=ds(l,t,bu[r.x],!0,o.whole),c=u.length,f=is([na[r.plot]],n)[0],d=Xe.fill(e[0],c),h=d.add(f),v=Xe.fill(e[1],c);if(s||(l?(i=0,s=l.v.map(M=>Ir(M).toString())):[i,s]=aa(u.v)),!s||s.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const g=[[u,d],[u,v]],p=[[yt([t[0]]),yt([e[0]])],[yt([t[1]]),yt([e[0]])]],m=[[u,h],[u,d]],b=(t[1]-t[0])*.01,_=[[null,null],[[t[1]-(i>9?1:0)*b],[d.v[c-1]]]],A=oa(i),E=s.length,k=Math.abs(t[1]>t[0]?t[1]-u.v[E-1]:t[1]-u.v[0]),w=Math.abs(t[1]-t[0]),y=Math.abs(u.v[1]-u.v[0]);if(A.length>0&&k<w*.1&&k<y*.5){const M=t[1]>t[0]?E-1:0;s[M]=" "}return{grid:g,axisLine:p,tickCoords:m,tfCoords:_,ticks:l,tickLabels:s,tickFactor:i,tfLabel:A}}function ju(t,e,r,n,o){let l=o.ticks,s=o.tickLabels,i=0;const u=ds(o.ticks,e,_u[r.y],!0,o.whole),c=u.length,f=is([na[r.plot]],n)[0],d=Xe.fill(t[0],c),h=d.add(f),v=Xe.fill(t[1],c);if(s||(l?(i=0,s=l.v.map(y=>Ir(y).toString())):[i,s]=aa(u.v)),s.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const g=[[d,u],[v,u]],p=[[yt([t[0]]),yt([e[0]])],[yt([t[0]]),yt([e[1]])]],m=[[d,u],[h,u]],b=[[[],[]],[[h.v[c-1]+(Math.abs(i)>9?3:2)*f],[e[1]]]],_=oa(i),A=s.length,E=Math.abs(e[1]>e[0]?e[1]-u.v[A-1]:e[1]-u.v[0]),k=Math.abs(e[1]-e[0]),w=Math.abs(u.v[1]-u.v[0]);if(_.length>0&&E<k*.1&&E<w*.5){const y=e[1]>e[0]?A-1:0;s[y]=" "}return{grid:g,axisLine:p,tickCoords:m,tfCoords:b,ticks:l,tickLabels:s,tickFactor:i,tfLabel:_}}function qu(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ie(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let n,o;if(t.labels?(n=t.labels,o=0):[o,n]=aa(e),!(n.length===e.length-1||n.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const l=n.length===r.length;return{colmap:r,breaks:e,labels:n,isCentered:l,labelsFactor:o,fontSize:t.fontSize,labelColor:t.labelColor}}function Bu(t,e,r,n){const o=t.colmap.length,l=e*ku,s=l/o,i=r[1]+(e-l)*.5,u=Eu[n.y],c=r[2]+u*rs,f=c+u*(1+rs),d=t.isCentered?s/2:0;return{start:i,top:c,height:u,width:s,dxl:d,ltop:f}}function lo(t,e,r){if(!t||!e||!r||typeof r!="function")return;const n=t.target;if(n.tagName===e){const o=Array.prototype.indexOf.call(n.parentNode.children,n);if(o<0)return;r(o),t.stopPropagation()}}function Iu(t,e){const n=document.createElement("canvas").getContext("2d");return n.font=e,n.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function Du(t,e){const r="Arial",n=e/8,o=e*1.5,l=Array(t.length),s=Array(t.length);let i=0,u=0,c=0;for(let d=0;d<t.length;d++){const h=Iu("  "+t[d].label+"  ",e+"px "+r);c=h>c?h:c;const v=e*t[d].labelHeight+2*n;l[d]=v,s[d]=i,i=i+v,u=u+v}const f=o+2*n+c;return[s,l,o,n,u,f]}function Ou(t,e,r,n,o){const[l,s,i,u,c,f]=Du(t.items,n*t.fontSize),d=t.position.includes("left")?e[0]+o:t.position.includes("right")?e[1]-f-o:(e[1]+e[0]-f)*.5,h=t.position.includes("top")?r[1]+o:t.position.includes("bottom")?r[0]-c-o:(r[1]+r[0]-c)*.5;return{lgl:d,lgt:h,lgw:f,lgh:c,ely:l,elh:s,elw:i,elp:u}}function Or(t){if(!t||t.length<1)return t;function e(l){return'<tspan font-size="0.75em" dy="-0.5em">'+l+'</tspan><tspan dy="0.4em"> </tspan>'}function r(l){return'<tspan font-size="0.75em" dy="0.5em">'+l+'</tspan><tspan dy="-0.4em"> </tspan>'}let n=0,o="";for(;n<t.length;){const l=t[n];if((l==="^"||l==="_")&&n<t.length-1){const s=l==="^";if(n++,t[n]==="("){let i=n+1;for(;i<t.length&&t[i]!==")";)i++;const u=t.slice(n+1,i);o+=s?e(u):r(u),n=i+1}else if(t[n]==="-"||t[n]==="–"){const i=t.slice(n,n+2);o+=s?e(i):r(i),n=n+2}else o+=s?e(t[n]):r(t[n]),n++}else o+=l,n++}return o}var Vu=be('<line vector-effect="non-scaling-stroke"></line>'),Uu=be("<g></g>");function sa(t,e){pe(e,!0);let r=P(e,"lineCoords",19,()=>[]),n=P(e,"lineColor",19,()=>Bt.DARKGRAY),o=P(e,"lineType",3,1),l=P(e,"lineWidth",3,1),s=P(e,"className",3,"");const i=Kt("axes");let u=T(()=>It(r()[0][0],i.tX())),c=T(()=>It(r()[1][0],i.tX())),f=T(()=>It(r()[0][1],i.tY())),d=T(()=>It(r()[1][1],i.tY())),h=T(()=>`stroke:${n()};stroke-width: ${l()}px;stroke-dasharray:${ao[i.scales().plot][o()-1]}`);var v=Ee(),g=V(v);{var p=m=>{var b=Uu();ft(b,21,()=>a(u),gt,(_,A,E)=>{var k=Vu();G(()=>{S(k,"x1",a(u)[E]),S(k,"x2",a(c)[E]),S(k,"y1",a(f)[E]),S(k,"y2",a(d)[E]),Ft(k,a(h))}),z(_,k)}),G(()=>it(b,0,$i(s()))),z(m,b)};I(g,m=>{a(u)&&a(f)&&a(c)&&m(p)})}z(t,v),we()}var Wu=be('<text text-anchor="middle"><!></text>'),Hu=be("<text><!></text>"),Yu=be("<text><!></text>"),Gu=be('<g class="tick-labels"><!></g>');function gs(t,e){pe(e,!0);let r=P(e,"pos",3,1),n=P(e,"las",3,1),o=T(()=>["middle","middle","start","middle","end"][r()]),l=T(()=>`fill:${e.textColor};`);const s=Kt("axes");let i=T(()=>It(e.tickCoords[1][0],s.tX())),u=T(()=>It(e.tickCoords[1][1],s.tY())),c=T(()=>ts[s.scales().plot]),f=T(()=>[0,0,a(c),0,-a(c)][r()]),d=T(()=>[0,a(c),0,-a(c),0][r()]);var h=Gu(),v=j(h);{var g=m=>{var b=Ee(),_=V(b);ft(_,17,()=>a(i),gt,(A,E,k)=>{var w=Wu();S(w,"data-id",k),S(w,"dx",0);var y=j(w);mt(y,()=>e.tickLabels[k],!0),G(()=>{S(w,"x",a(i)[k]),S(w,"y",a(u)[k]),S(w,"dy",a(f)*1.25),S(w,"transform",`rotate(-90, ${a(i)[k]}, ${a(u)[k]})`)}),z(A,w)}),z(m,b)},p=m=>{var b=Ee(),_=V(b);{var A=k=>{var w=Ee(),y=V(w);ft(y,17,()=>a(i),gt,(M,B,K)=>{var O=Hu();S(O,"data-id",K),S(O,"dy",0),S(O,"text-anchor","end");var Q=j(O);mt(Q,()=>e.tickLabels[K],!0),G(()=>{S(O,"x",a(i)[K]),S(O,"y",a(u)[K]),S(O,"dx",-a(d)/2),S(O,"transform",`rotate(-90, ${a(i)[K]}, ${a(u)[K]})`)}),z(M,O)}),z(k,w)},E=k=>{var w=Ee(),y=V(w);ft(y,17,()=>a(i),gt,(M,B,K)=>{var O=Yu();S(O,"data-id",K);var Q=j(O);mt(Q,()=>e.tickLabels[K],!0),G(()=>{S(O,"x",a(i)[K]),S(O,"y",a(u)[K]),S(O,"dx",a(f)),S(O,"dy",a(d)),S(O,"text-anchor",a(o))}),z(M,O)}),z(k,w)};I(_,k=>{n()===2&&r()===1?k(A):k(E,!1)},!0)}z(m,b)};I(v,m=>{n()===2&&r()===4?m(g):m(p,!1)})}G(()=>Ft(h,a(l))),z(t,h),we()}const Ku=(t,e=kt,r=kt)=>{var n=tf();const o=T(()=>e().colmap.length);var l=V(n);ft(l,17,()=>e().colmap,gt,(f,d,h)=>{var v=Qu();const g=T(()=>r().start+h*r().width);var p=V(v),m=L(p);S(m,"dy",0);var b=j(m);mt(b,()=>e().labels[h],!0),G(()=>{S(p,"x",a(g)),S(p,"y",r().top),S(p,"width",r().width),S(p,"height",r().height),S(p,"fill",a(d)),S(m,"x",a(g)),S(m,"y",r().ltop),S(m,"dx",r().dxl),S(m,"fill",e().labelColor),S(m,"font-size",e().fontSize+"em")}),z(f,v)});var s=L(l);{var i=f=>{var d=$u();const h=T(()=>r().start+a(o)*r().width);S(d,"dx",0),S(d,"dy",0);var v=j(d);mt(v,()=>e().labels[a(o)],!0),G(()=>{S(d,"x",a(h)),S(d,"y",r().ltop),S(d,"fill",e().labelColor),S(d,"font-size",`${e().fontSize??""}em`)}),z(f,d)};I(s,f=>{e().isCentered||f(i)})}var u=L(s);{var c=f=>{var d=ef();const h=T(()=>r().start+a(o)*r().width);var v=j(d);mt(v,()=>oa(e().labelsFactor),!0),G(()=>{S(d,"x",a(h)),S(d,"y",r().ltop),S(d,"fill",e().labelColor),S(d,"font-size",`${e().fontSize??""}em`)}),z(f,d)};I(u,f=>{e().labelsFactor!==0&&f(c)})}z(t,n)};function ms(t,e,r){t.preventDefault(),e(t,r())}function ps(t,e,r){t.preventDefault(),e(t,r())}function ws(t,e,r){t.preventDefault(),e(t,r())}function so(t,e,r){t.preventDefault(),e(t,r())}async function bs(t,e,r,n){Lu(t.target,a(e),r(),n())}function _s(t,e,r){Ru(a(e),r())}function ys(t,e,r,n,o,l){Nu(a(e),r(),n(),o(),l())}var Xu=be('<text fill="crimson" text-anchor="middle"> </text>'),Ju=be('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Zu=be("<!><!><!><!><!>",1),Qu=be('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),$u=be('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),ef=be('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),tf=be("<!><!><!>",1),rf=be("<line></line>"),nf=be('<text dominant-baseline="middle" text-anchor="middle"> </text>'),of=be('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),af=be('<svg><rect height="100%" width="100%"></rect><!></svg>'),lf=be('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),sf=be('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),cf=be('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),uf=be('<g class="plot-labels"><!><!><!></g>'),ff=be('<g class="axis x-axis"><!></g>'),df=be('<g class="axis y-axis"><!></g>'),vf=be('<rect fill="transparent" id="axes-box"></rect>'),hf=be('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),gf=be('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),mf=be('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),pf=be('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),wf=D('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),bf=D('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),_f=D(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function yf(t,e){pe(e,!0);const r=(de,Ae=kt,ke=kt)=>{var et=Ee(),wt=V(et);{var Vt=xt=>{var Ve=Ee(),Te=V(Ve);{var dt=tt=>{var Ge=Xu(),Ut=j(Ge);G(()=>{S(Ge,"x",a(ie)[0]-10),S(Ge,"y",a(Ue)),S(Ge,"transform",`rotate(-90, ${a(ie)[0]-10}, ${a(Ue)})`),Me(Ut,ke().error)}),z(tt,Ge)},st=tt=>{var Ge=Ju(),Ut=j(Ge);G(()=>{S(Ge,"x",a(me)),S(Ge,"y",a(Z)[0]),Me(Ut,ke().error)}),z(tt,Ge)};I(Te,tt=>{ke().pos===4?tt(dt):tt(st,!1)})}z(xt,Ve)},St=xt=>{var Ve=Zu(),Te=V(Ve);{var dt=re=>{sa(re,{get lineCoords(){return Ae().grid},get lineColor(){return Bt.MIDDLEGRAY},lineType:3})};I(Te,re=>{ke().showGrid&&re(dt)})}var st=L(Te);sa(st,{get lineCoords(){return Ae().axisLine},get lineColor(){return Bt.DARKGRAY},lineType:1});var tt=L(st);sa(tt,{get lineCoords(){return Ae().tickCoords},get lineColor(){return Bt.DARKGRAY},lineType:1});var Ge=L(tt);{var Ut=re=>{gs(re,{get las(){return ke().las},get pos(){return ke().pos},get tickCoords(){return Ae().tickCoords},get tickLabels(){return Ae().tickLabels},get tickColor(){return Bt.DARKGRAY},get hideLast(){return ke().hideLast}})};I(Ge,re=>{Ae().tickCoords.length===2&&Ae().tickLabels.length===Ae().tickCoords[1][0].length&&re(Ut)})}var Yr=L(Ge);{var Le=re=>{{let vt=T(()=>[Ae().tfLabel]);gs(re,{get pos(){return ke().pos},get tickCoords(){return Ae().tfCoords},get tickLabels(){return a(vt)},get textColor(){return Bt.DARKGRAY}})}};I(Yr,re=>{Ae().tickFactor!==0&&re(Le)})}z(xt,Ve)};I(wt,xt=>{ke().error?xt(Vt):xt(St,!1)})}z(de,et)},n=(de,Ae=kt,ke=kt)=>{var et=af();const wt=T(()=>ke().elw+2*ke().elp),Vt=T(()=>ke().elp),St=T(()=>ke().elh),xt=T(()=>ke().ely);var Ve=j(et),Te=L(Ve);ft(Te,17,()=>Ae().items,gt,(dt,st,tt)=>{var Ge=of();S(Ge,"x",0);var Ut=j(Ge);{var Yr=nr=>{var at=rf();G(()=>{S(at,"x1",a(Vt)),S(at,"x2",a(wt)-a(Vt)),S(at,"y1",a(St)[tt]/2),S(at,"y2",a(St)[tt]/2),S(at,"stroke",a(st).line.lineColor),S(at,"stroke-width",a(st).line.lineWidth),S(at,"stroke-dasharray",a(O)[a(st).line.lineType-1])}),z(nr,at)};I(Ut,nr=>{a(st).line&&nr(Yr)})}var Le=L(Ut);{var re=nr=>{var at=nf(),vo=j(at);G(()=>{S(at,"x",a(wt)/2),S(at,"y",a(St)[tt]/2),S(at,"fill",a(st).point.faceColor),S(at,"stroke-width",a(st).point.lineWidth),S(at,"stroke",a(st).point.lineColor),S(at,"font-size",a(B)),Me(vo,xu[a(st).point.marker-1])}),z(nr,at)};I(Le,nr=>{a(st).point&&nr(re)})}var vt=L(Le),fo=j(vt);mt(fo,()=>a(st).label,!0),G(()=>{S(Ge,"y",a(xt)[tt]),S(Ge,"width",ke().lgw),S(Ge,"height",a(St)[tt]),S(vt,"x",a(wt)+a(Vt)),S(vt,"y",a(St)[tt]/2),S(vt,"fill",Bt.LEGEND),S(vt,"font-size",`${Ae().fontSize??""}em`)}),z(dt,Ge)}),G(()=>{S(et,"x",ke().lgl),S(et,"y",ke().lgt),S(et,"height",ke().lgh),S(et,"width",ke().lgw),S(Ve,"fill",Ae().faceColor),S(Ve,"stroke",Ae().lineColor),S(Ve,"stroke-width",Ae().lineWidth)}),z(de,et)};let o=P(e,"limX",19,()=>[0,1]),l=P(e,"limY",19,()=>[0,1]),s=P(e,"margins",19,()=>[1,1.1,.55,.6]),i=P(e,"downloadLinks",3,"none"),u=P(e,"fileName",3,"plot"),c=P(e,"pngWidth",3,8),f=P(e,"pngHeight",3,8),d=P(e,"pngRes",3,300),h=P(e,"clipboardWidth",3,1200),v=P(e,"clipboardHeight",3,800),g=P(e,"onclick",3,null),p=P(e,"onmousemove",3,null),m=P(e,"onmousedown",3,null),b=P(e,"onmouseup",3,null);function _(de,Ae){if(Ae&&de.target.id=="axes-box"){const ke=ss([de.offsetX-a(ae)],a(ge))[0],et=ss([de.offsetY-a(X)],a(Re))[0];Ae(ke,et)}}const A="plottingArea"+Math.round(Math.random()*1e4);let E=Y(0),k=Y(0),w=Y(0);const y=T(()=>({plot:Au(a(k),a(w)),x:vs(a(k)),y:vs(a(w))})),M=T(()=>s().map(de=>de*wu[a(y).plot])),B=T(()=>yu[a(y).plot]),K=T(()=>na[a(y).plot]),O=T(()=>ao[a(y).plot]),Q=T(()=>a(xe).show&&a(xe).label!==""?a(B)*1.5:0),ae=T(()=>a(Se).show&&a(Se).label!==""?a(B)*1.5:0),X=T(()=>e.title&&e.title!==""?a(B)*1.5:0),F=T(()=>a(k)>a(ae)?a(k)-a(ae):0),te=T(()=>a(w)>a(Q)+a(X)?a(w)-a(Q)-a(X):0),fe=T(()=>a(te)-a(M)[0]-a(M)[2]),se=T(()=>a(F)-a(M)[1]-a(M)[3]),J=T(()=>ns(o(),2)&&ns(l(),2)&&a(F)>a(M)[1]+a(M)[3]&&a(te)>a(M)[0]+a(M)[2]),ge=T(()=>a(J)?{coords:[a(se)/(o()[1]-o()[0]),o()[0],a(M)[1]],objects:[a(se)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Re=T(()=>a(J)?{coords:[-a(fe)/(l()[1]-l()[0]),l()[1],a(M)[2]],objects:[a(fe)/(l()[1]-l()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Ue=T(()=>a(fe)*.5+a(X)+a(M)[2]),me=T(()=>a(se)*.5+a(ae)+a(M)[1]),ie=T(()=>a(J)?It(o(),a(ge)):[0,1]),Z=T(()=>a(J)?It(l(),a(Re)):[1,0]),ce=T(()=>Or(e.title)),De=T(()=>a(ce)?a(ce).length===e.title.left?1:1.4:0);let je=Y(Ne({show:!1})),xe=Y(Ne({show:!1,error:""})),Se=Y(Ne({show:!1,error:""})),ee=Y(Ne({show:!1,colmap:null,breaks:null})),q=Y(Ne({show:!1,items:null,position:null}));const H=T(()=>a(J)&&a(ee)&&a(ee).show?qu(a(ee)):null),W=T(()=>a(J)&&a(xe).show?Fu(o(),l(),a(y),a(Re),a(xe)):null),oe=T(()=>a(J)&&a(Se).show?ju(o(),l(),a(y),a(ge),a(Se)):null),$=T(()=>a(J)&&a(H)?Bu(a(H),a(se),a(M),a(y)):null),le=T(()=>a(J)&&a(q)&&a(q).show&&a(ie)?Ou(a(q),a(ie),a(Z),a(B),a(K)):null);hi("axes",{setBox:de=>N(je,de,!0),setXAxis:de=>N(xe,de,!0),setYAxis:de=>N(Se,de,!0),setColmapLegend:de=>N(ee,de,!0),setGroupLegend:de=>N(q,de,!0),scales:()=>a(y),tX:()=>a(ge),tY:()=>a(Re),limX:()=>o(),limY:()=>l()});var Fe=_f();let Oe;var We=j(Fe),Qe=L(j(We));{var tr=de=>{var Ae=uf(),ke=j(Ae);{var et=Ve=>{var Te=lf();S(Te,"dx",0),S(Te,"dy",0);var dt=j(Te);mt(dt,()=>a(xe).label,!0),G(()=>{S(Te,"x",a(me)),S(Te,"y",a(te)+a(X))}),z(Ve,Te)};I(ke,Ve=>{a(xe).show&&a(xe).label&&a(xe).label!==""&&Ve(et)})}var wt=L(ke);{var Vt=Ve=>{var Te=sf();S(Te,"dx",0),S(Te,"dy",0);var dt=j(Te);mt(dt,()=>a(Se).label,!0),G(()=>{S(Te,"x",a(B)/1.1*a(Se).labelHeight),S(Te,"y",a(Ue)),S(Te,"transform",`rotate(-90, ${a(B)*a(Se).labelHeight/1.1}, ${a(Ue)})`)}),z(Ve,Te)};I(wt,Ve=>{a(Se).show&&a(Se).label&&a(Se).label!==""&&Ve(Vt)})}var St=L(wt);{var xt=Ve=>{var Te=cf();S(Te,"dx",0),S(Te,"dy",0);var dt=j(Te);mt(dt,()=>a(ce),!0),G(()=>{S(Te,"x",a(me)),S(Te,"y",a(B)*a(De))}),z(Ve,Te)};I(St,Ve=>{a(ce)&&a(ce)!==""&&Ve(xt)})}z(de,Ae)};I(Qe,de=>{a(J)&&de(tr)})}var $e=L(Qe),Dt=j($e),Ot=j(Dt),rr=j(Ot),Wr=L(Dt);{var Hr=de=>{var Ae=pf(),ke=V(Ae);{var et=Le=>{var re=ff(),vt=j(re);r(vt,()=>a(W),()=>a(xe)),z(Le,re)};I(ke,Le=>{a(xe).show&&a(W)&&Le(et)})}var wt=L(ke);{var Vt=Le=>{var re=df(),vt=j(re);r(vt,()=>a(oe),()=>a(Se)),z(Le,re)};I(wt,Le=>{a(Se).show&&a(oe)&&Le(Vt)})}var St=L(wt),xt=j(St);{var Ve=Le=>{var re=vf();re.__keydown=[so,_,g],re.__click=[so,_,g],re.__mousemove=[ws,_,p],re.__mousedown=[ms,_,m],re.__mouseup=[ps,_,b],G(()=>{S(re,"stroke",a(je).lineColor),S(re,"stroke-width",`${a(je).lineWidth??""}px`),S(re,"x",a(ie)[0]),S(re,"y",a(Z)[1]),S(re,"width",a(ie)[1]-a(ie)[0]),S(re,"height",a(Z)[0]-a(Z)[1])}),z(Le,re)},Te=Le=>{var re=hf();re.__keydown=[so,_,g],re.__click=[so,_,g],re.__mousemove=[ws,_,p],re.__mousedown=[ms,_,m],re.__mouseup=[ps,_,b],G(()=>{S(re,"x",a(ie)[0]),S(re,"y",a(Z)[1]),S(re,"width",a(ie)[1]-a(ie)[0]),S(re,"height",a(Z)[0]-a(Z)[1])}),z(Le,re)};I(xt,Le=>{a(je).show?Le(Ve):Le(Te,!1)})}var dt=L(St),st=j(dt);an(st,()=>e.children??kt);var tt=L(dt);{var Ge=Le=>{var re=gf(),vt=j(re);Ku(vt,()=>a(H),()=>a($)),z(Le,re)};I(tt,Le=>{a($)&&Le(Ge)})}var Ut=L(tt);{var Yr=Le=>{var re=mf(),vt=j(re);n(vt,()=>a(q),()=>a(le)),z(Le,re)};I(Ut,Le=>{a(le)&&Le(Yr)})}G(()=>S(dt,"clip-path",`url(#${A})`)),z(de,Ae)};I(Wr,de=>{a(J)&&de(Hr)})}Mr(We,de=>N(E,de),()=>a(E));var Pt=L(We,2);{var ca=de=>{var Ae=wf();z(de,Ae)},ua=de=>{var Ae=bf(),ke=j(Ae);ke.__click=[_s,E,u],ke.__keydown=[_s,E,u];var et=L(ke,2);et.__click=[ys,E,u,c,f,d],et.__keydown=[ys,E,u,c,f,d];var wt=L(et,2);wt.__click=[bs,E,h,v],wt.__keydown=[bs,E,h,v],z(de,Ae)};I(Pt,de=>{a(J)?de(ua,!1):de(ca)})}G(de=>{Oe=it(Fe,1,`plot-container show-download-links-${i()??""}`,"svelte-1jtdxd0",Oe,de),Ft(We,`font-size:${a(B)??""}px`),S($e,"x",a(ae)),S($e,"y",a(X)),S($e,"width",a(F)),S($e,"height",a(te)),S(Ot,"id",A),S(rr,"x",a(ie)[0]),S(rr,"y",a(Z)[1]),S(rr,"width",a(ie)[1]-a(ie)[0]),S(rr,"height",a(Z)[0]-a(Z)[1])},[()=>({"plot-error":!a(J)})]),gl(We,"clientWidth",de=>N(k,de)),gl(We,"clientHeight",de=>N(w,de)),z(t,Fe),we()}ot(["keydown","click","mousemove","mousedown","mouseup"]);function xf(t,e){pe(e,!0);let r=P(e,"tickLabels",7),n=P(e,"las",3,1),o=P(e,"whole",3,!1),l=P(e,"show",3,!0),s=P(e,"showGrid",3,!1);const i=Kt("axes");ue(()=>{const u=Or(e.label),c=u?u.length===e.label.length?1:1.4:0;let f,d="";e.ticks&&([f,d]=fs(e.ticks,i.limX())),!d&&r()&&(h=>{var v=Fn(h,2);r(v[0]),d=v[1]})(us(r(),f)),i.setXAxis({show:l(),error:d,label:u,ticks:f,labelHeight:c,showGrid:s(),las:n(),whole:o(),tickLabels:r()})}),we()}function kf(t,e){pe(e,!0);let r=P(e,"tickLabels",7),n=P(e,"las",3,1),o=P(e,"whole",3,!1),l=P(e,"show",3,!0),s=P(e,"showGrid",3,!1);const i=Kt("axes");ue(()=>{const u=Or(e.label),c=u?u.length===e.label.length?1:1.4:0;let f,d="";e.ticks&&([f,d]=fs(e.ticks,i.limY())),!d&&r()&&(h=>{var v=Fn(h,2);r(v[0]),d=v[1]})(us(r(),f)),i.setYAxis({show:l(),error:d,label:u,ticks:f,labelHeight:c,showGrid:s(),las:n(),whole:o(),tickLabels:r(),pos:4})}),we()}function Ef(t,e){pe(e,!0);let r=P(e,"lineWidth",3,1),n=P(e,"lineColor",3,"#606060");const o=Kt("axes");ue(()=>{o.setBox({show:!0,lineWidth:r(),lineColor:n()})}),we()}var Sf=(t,e)=>lo(t,"rect",e.onclick),Af=be("<rect></rect>"),Cf=be("<g></g>");function xs(t,e){pe(e,!0);let r=P(e,"faceColor",19,()=>Bt.PRIMARY),n=P(e,"lineColor",19,r),o=P(e,"lineWidth",3,1),l=P(e,"className",3,"series-rect");const s=T(()=>Dr(e.left,"Rectangles (left)")),i=T(()=>a(s)?Dr(e.top,"Rectangles (top)",a(s).length):null),u=T(()=>a(i)?typeof e.width!="object"?Xe.fill(e.width,a(s).length):e.width:null),c=T(()=>a(i)?typeof e.height!="object"?Xe.fill(e.height,a(s).length):e.height:null),f=Kt("axes"),d=T(()=>a(s)?It(a(s),f.tX()):null),h=T(()=>a(i)?It(a(i),f.tY()):null),v=T(()=>a(u)?as(a(u),f.tX()):null),g=T(()=>a(c)?as(a(c),f.tY()):null),p=T(()=>`fill:${r()};stroke:${n()};stroke-width:${o()}px;`),m=T(()=>a(d)&&a(h)&&a(v)&&a(g)&&a(v).length===a(d).length&&a(g).length===a(d).length);var b=Ee(),_=V(b);{var A=E=>{var k=Cf();k.__click=[Sf,e],ft(k,21,()=>e.left,gt,(w,y,M)=>{var B=Af();G(()=>{S(B,"x",a(d)[M]),S(B,"y",a(h)[M]),S(B,"width",a(v)[M]),S(B,"height",a(g)[M])}),z(w,B)}),G(()=>{it(k,0,`series ${l()??""}`),Ft(k,a(p))}),z(E,k)};I(_,E=>{a(m)&&E(A)})}z(t,b),we()}ot(["click"]),ot(["click"]);var zf=(t,e)=>lo(t,"text",e.onclick),Tf=be("<text><!></text>"),Pf=be("<text><!></text>"),Nf=be("<text><!></text>"),Rf=be('<g class="series series-textlabels"><!></g>');function ia(t,e){pe(e,!0);let r=P(e,"pos",3,0),n=P(e,"faceColor",19,()=>Bt.PRIMARY_TEXT),o=P(e,"lineColor",3,"transparent"),l=P(e,"lineWidth",3,0),s=P(e,"textSize",3,1),i=P(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],c=T(()=>Dr(e.xValues,"TextLabels")),f=T(()=>a(c)?Dr(e.yValues,"TextLabels",a(c).length):null),d=T(()=>a(f)?Array.isArray(e.labels)&&e.labels.length!==a(f).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=T(()=>a(d)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),v=Kt("axes"),g=T(()=>a(c)&&a(h)!==null?It(a(c),v.tX()):null),p=T(()=>a(f)&&a(g)?It(a(f),v.tY()):null),m=T(()=>ts[v.scales().plot]),b=T(()=>[0,0,-a(m),0,a(m),a(m)]),_=T(()=>[0,a(m),0,-a(m),0,a(m)]),A=T(()=>`fill:${n()};stroke-width:${l()}px;stroke:${o()};font-size:${s()}em;`),E=T(()=>a(g)&&a(p)&&a(h)!==null&&a(d)&&a(g).length===a(p).length);var k=Ee(),w=V(k);{var y=M=>{var B=Rf();B.__click=[zf,e];var K=j(B);{var O=ae=>{var X=Ee(),F=V(X);ft(F,17,()=>a(g),gt,(te,fe,se)=>{var J=Tf();S(J,"data-id",se);var ge=j(J);mt(ge,()=>e.labels,!0),G(()=>{S(J,"x",a(g)[se]),S(J,"y",a(p)[se]),S(J,"dx",a(b)[r()]),S(J,"dy",a(_)[r()]),S(J,"transform",i()!==void 0?`rotate(${i()}, ${a(g)[se]+a(b)[r()]}, ${a(p)[se]+a(_)[r()]})`:""),S(J,"text-anchor",u[r()[se]])}),z(te,J)}),z(ae,X)},Q=ae=>{var X=Ee(),F=V(X);{var te=se=>{var J=Ee(),ge=V(J);ft(ge,17,()=>a(g),gt,(Re,Ue,me)=>{var ie=Pf();S(ie,"data-id",me);var Z=j(ie);mt(Z,()=>e.labels[me],!0),G(()=>{S(ie,"x",a(g)[me]),S(ie,"y",a(p)[me]),S(ie,"dx",a(b)[r()[me]]),S(ie,"dy",a(_)[r()[me]]),S(ie,"transform",i()!==void 0?`rotate(${i()}, ${a(g)[me]+a(b)[r()]}, ${a(p)[me]+a(_)[r()]})`:""),S(ie,"text-anchor",u[r()[me]])}),z(Re,ie)}),z(se,J)},fe=se=>{var J=Ee(),ge=V(J);ft(ge,17,()=>a(g),gt,(Re,Ue,me)=>{var ie=Nf();S(ie,"data-id",me);var Z=j(ie);mt(Z,()=>e.labels[me],!0),G(()=>{S(ie,"x",a(g)[me]),S(ie,"y",a(p)[me]),S(ie,"dx",a(b)[r()]),S(ie,"dy",a(_)[r()]),S(ie,"transform",i()!==void 0?`rotate(${i()}, ${a(g)[me]+a(b)[r()]}, ${a(p)[me]+a(_)[r()]})`:""),S(ie,"text-anchor",u[r()])}),z(Re,ie)}),z(se,J)};I(F,se=>{Array.isArray(r())||ArrayBuffer.isView(r())?se(te):se(fe,!1)},!0)}z(ae,X)};I(K,ae=>{typeof e.labels=="string"?ae(O):ae(Q,!1)})}G(()=>Ft(B,a(A))),z(M,B)};I(w,M=>{a(E)&&M(y)})}z(t,k),we()}ot(["click"]),ot(["click"]),ot(["click"]);var Lf=(t,e)=>lo(t,"polyline",e.onclick),Mf=be('<g class="series series-line"><polyline class="line"></polyline></g>');function ks(t,e){pe(e,!0);let r=P(e,"lineColor",19,()=>Bt.PRIMARY),n=P(e,"lineType",3,1),o=P(e,"lineWidth",3,1);const l=T(()=>Dr(e.xValues,"Lines")),s=T(()=>a(l)?Dr(e.yValues,"Lines",a(l).length):null),i=Kt("axes"),u=T(()=>a(l)&&a(s)?cs(a(l),a(s),i.tX(),i.tY()):null),c=T(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${ao[i.scales().plot][n()-1]}`);var f=Ee(),d=V(f);{var h=v=>{var g=Mf();g.__click=[Lf,e];var p=j(g);G(()=>{Ft(g,a(c)),S(p,"points",a(u))}),z(v,g)};I(d,v=>{a(u)&&v(h)})}z(t,f),we()}ot(["click"]);var Ff=(t,e)=>lo(t,"polyline",e.onclick),jf=be('<polyline class="line"></polyline>'),qf=be('<g class="series series-multiline"></g>');function Bf(t,e){pe(e,!0);let r=P(e,"lineColor",19,()=>Bt.PRIMARY),n=P(e,"lineType",3,1),o=P(e,"lineWidth",3,1);const l=T(()=>Dr(e.xValues,"Multilines")),s=T(()=>a(l)?_r(e.yValues)?(a(l).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),i=Kt("axes"),u=T(()=>{if(!a(l)||!a(s))return null;const v=new Array(a(s).ncols);for(let g=0;g<v.length;g++)v[g]=cs(a(l),a(s).getcolumn(g+1),i.tX(),i.tY());return v}),c=T(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${ao[i.scales().plot][n()-1]}`);var f=Ee(),d=V(f);{var h=v=>{var g=qf();g.__click=[Ff,e],ft(g,21,()=>a(u),gt,(p,m)=>{var b=jf();G(()=>S(b,"points",a(m))),z(p,b)}),G(()=>Ft(g,a(c))),z(v,g)};I(d,v=>{a(u)&&a(u).length>0&&v(h)})}z(t,f),we()}ot(["click"]);function If(t,e){pe(e,!0);let r=P(e,"show",3,!0),n=P(e,"labels",3,null),o=P(e,"labelColor",19,()=>Bt.CLEGEND_LABELS),l=P(e,"fontSize",3,.85);const s=Kt("axes");ue(()=>{s.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:n(),labelColor:o(),fontSize:l()})}),we()}function Df(t,e,r){const n=e.length,o=new Array(t.length),l=e[1]-e[0];for(let s=0;s<t.length;s++)for(let i=0;i<n-1;i++){const u=t[s]>=e[i],c=i===n-2?t[s]<e[i+1]+l:t[s]<e[i+1];if(u&&c){o[s]=r[i];break}}return o}var Of=D("<!> <!>",1),Vf=D("<!> <!>",1),Uf=D("<!> <!>",1),Wf=D("<!> <!> <!> <!> <!> <!> <!> <!>",1),Hf=D("<h2>Plot settings</h2>"),Yf=D("<!> <!>",1),Gf=D('<div class="plot-area svelte-x8qn01"><div class="plot svelte-x8qn01"><!></div></div> <div class="plot-controls-area svelte-x8qn01"><!> <!> <!></div>',1),Kf=D('<div class="plot-panel svelte-x8qn01"><!></div>');function Es(t,e){pe(e,!0);let r=Y(!0),n=Y("none"),o=Y(!1);const l=T(()=>(a(r)?"Preprocessed":"Raw")+" data (selected rows)"),s=T(()=>a(r)&&e.prepdata?e.prepdata:e.rawdata),i=T(()=>a(s)?a(s).varaxisLabel:"Variables"),u=T(()=>e.rawdata.varaxisUnits),c=T(()=>a(r)&&a(s)&&e.left>=0&&e.right<a(s).values.nrows&&e.left<e.right?pt.seq(e.left+1,e.right):null),f=T(()=>a(c)?a(s).varvalues.filter((k,w)=>w>=e.left&&w<e.right):a(s).varvalues),d=T(()=>a(c)?a(s).values.subset(a(c),null):a(s).values),h=T(()=>a(d)?Wo(a(d).v):null),v=T(()=>a(h)?(a(h)[1]-a(h)[0])*.05:null),g=T(()=>a(h)?[a(h)[0],a(h)[1]+(a(n)!=="none")*a(v)]:[0,1]),p=T(()=>a(s)?Wo(a(s).varvalues):[0,1]),m=T(()=>a(o)?[a(s).varvalues[e.left],a(s).varvalues[e.right-1]]:a(p)),b=T(()=>{if(!e.rawdata)return null;const k={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const w=hs(e.rawdata.classNames.length);k.groups={colors:e.rawdata.classes.map(y=>w[e.rawdata.classNames.findIndex(M=>M===y)]),breaks:jr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:w}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const w=wl(e.rawdata.resp,8),y=hs(w.length-1);k.response={colors:Df(e.rawdata.resp.v,w.v,y),labels:null,breaks:w,map:y}}return k});ue(()=>{(e.left<1||e.right<1||e.right>=e.left)&&N(o,!1)});var _=Kf(),A=j(_);{var E=k=>{var w=Gf(),y=V(w),M=j(y),B=j(M);yf(B,{get title(){return a(l)},get limY(){return a(g)},get limX(){return a(m)},fileName:"plot-preprocessed",children:(F,te)=>{var fe=Wf(),se=V(fe);{var J=ee=>{Bf(ee,{get xValues(){return a(f)},get yValues(){return a(d)}})},ge=ee=>{var q=Ee(),H=V(q);ft(H,17,()=>a(b)[a(n)].colors,gt,(W,oe,$)=>{{let le=T(()=>a(d).getcolumn($+1));ks(W,{get xValues(){return a(f)},get yValues(){return a(le)},get lineColor(){return a(oe)}})}}),z(ee,q)};I(se,ee=>{a(n)==="none"?ee(J):ee(ge,!1)})}var Re=L(se,2);{var Ue=ee=>{var q=Of();const H=T(()=>a(s).varvalues[e.varind[0]]);var W=V(q);{let $=T(()=>[a(H),a(H)]);ks(W,{get xValues(){return a($)},get yValues(){return a(g)},lineColor:"#00000060"})}var oe=L(W,2);{let $=T(()=>[a(H)]),le=T(()=>[a(g)[1]-a(v)*(a(n)==="none"?1:2)]),Fe=T(()=>Or(a(H).toFixed(2)+" "+a(u)));ia(oe,{get xValues(){return a($)},get yValues(){return a(le)},get labels(){return a(Fe)},textColor:"#a0a0a0",textSize:.8,pos:2})}z(ee,q)};I(Re,ee=>{e.varind&&e.varind[0]>0&&ee(Ue)})}var me=L(Re,2);{var ie=ee=>{var q=Vf();const H=T(()=>a(s).varvalues[e.varind[1]]);var W=V(q);{let $=T(()=>[a(m)[0]]),le=T(()=>[a(s).varvalues[e.varind[1]]-a(m)[0]]),Fe=T(()=>[a(g)[1]]),Oe=T(()=>[a(g)[1]-a(g)[0]]);xs(W,{get left(){return a($)},get width(){return a(le)},get top(){return a(Fe)},get height(){return a(Oe)},lineColor:"transparent",faceColor:"#00000040"})}var oe=L(W,2);{let $=T(()=>[a(H)]),le=T(()=>[a(g)[1]-a(v)*(a(n)==="none"?1:2)]),Fe=T(()=>Or(a(H).toFixed(2)+" "+a(u)));ia(oe,{get xValues(){return a($)},get yValues(){return a(le)},get labels(){return a(Fe)},textColor:"#a0a0a0",textSize:.8,pos:2})}z(ee,q)};I(me,ee=>{e.varind&&e.varind[1]>0&&ee(ie)})}var Z=L(me,2);{var ce=ee=>{var q=Uf();const H=T(()=>a(s).varvalues[e.varind[2]-1]);var W=V(q);{let $=T(()=>[a(s).varvalues[e.varind[2]-1]]),le=T(()=>[a(m)[1]-a(s).varvalues[e.varind[2]-1]]),Fe=T(()=>[a(g)[1]]),Oe=T(()=>[a(g)[1]-a(g)[0]]);xs(W,{get left(){return a($)},get width(){return a(le)},get top(){return a(Fe)},get height(){return a(Oe)},lineColor:"transparent",faceColor:"#00000040"})}var oe=L(W,2);{let $=T(()=>[a(H)]),le=T(()=>[a(g)[1]-a(v)*(a(n)==="none"?1:2)]),Fe=T(()=>Or(a(H).toFixed(2)+" "+a(u)));ia(oe,{get xValues(){return a($)},get yValues(){return a(le)},get labels(){return a(Fe)},textColor:"#a0a0a0",textSize:.8,pos:2})}z(ee,q)};I(Z,ee=>{e.varind&&e.varind[2]<a(s).varvalues.length&&e.varind[2]>0&&ee(ce)})}var De=L(Z,2);{let ee=T(()=>a(n)!=="none");If(De,{get show(){return a(ee)},get labels(){return a(b)[a(n)].labels},get breaks(){return a(b)[a(n)].breaks},get colmap(){return a(b)[a(n)].map}})}var je=L(De,2);xf(je,{get label(){return a(i)},showGrid:!0});var xe=L(je,2);kf(xe,{showGrid:!0});var Se=L(xe,2);Ef(Se,{}),z(F,fe)},$$slots:{default:!0}});var K=L(y,2),O=j(K);ne(O,{label:"",children:(F,te)=>{var fe=Hf();z(F,fe)},$$slots:{default:!0}});var Q=L(O,2);ne(Q,{label:"Show",children:(F,te)=>{ea(F,{options:["raw","preprocessed"],get value(){return a(r)},set value(fe){N(r,fe,!0)}})},$$slots:{default:!0}});var ae=L(Q,2);{var X=F=>{var te=Yf(),fe=V(te);ne(fe,{label:"Color by",children:(ge,Re)=>{{let Ue=T(()=>Object.keys(a(b)));qt(ge,{get options(){return a(Ue)},get value(){return a(n)},set value(me){N(n,me,!0)}})}},$$slots:{default:!0}});var se=L(fe,2);{var J=ge=>{ne(ge,{label:"Zoom (x-axis)",children:(Re,Ue)=>{ea(Re,{options:["off","on"],get value(){return a(o)},set value(me){N(o,me,!0)}})},$$slots:{default:!0}})};I(se,ge=>{e.left>0&&e.right>e.left&&ge(J)})}z(F,te)};I(ae,F=>{Object.keys(a(b)).length>1&&F(X)})}z(k,w)};I(A,k=>{a(f)&&a(d)&&k(E)})}z(t,_),we()}const Xf=t=>t;function Ss(t,{delay:e=0,duration:r=400,easing:n=Xf}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:n,css:l=>`opacity: ${l*o}`}}var Jf=D('<p class="title"> </p>'),Zf=D('<div class="method-open svelte-2gffce"><!> <!> <!></div>'),Qf=(t,e)=>e.open(e.pos),$f=D('<p> <span title="Edit" class="svelte-2gffce"> </span></p> <!> <!> <!>',1);function un(t,e){pe(e,!0);var r=Ee(),n=V(r);{var o=s=>{var i=Zf(),u=j(i);ne(u,{children:(d,h)=>{var v=Jf(),g=j(v);G(()=>Me(g,e.title)),z(d,v)},$$slots:{default:!0}});var c=L(u,2);an(c,()=>e.children);var f=L(c,2);ne(f,{label:" ",children:(d,h)=>{Br(d,{text:"Save",get onclick(){return e.apply}})},$$slots:{default:!0}}),vl(3,i,()=>Ss,()=>({duration:10})),z(s,i)},l=s=>{ne(s,{children:(i,u)=>{var c=$f(),f=V(c),d=j(f),h=L(d);h.__click=[Qf,e];var v=j(h),g=L(f,2);Ic(g,{onclick:()=>e.moveUp(e.pos)});var p=L(g,2);Dc(p,{onclick:()=>e.moveDown(e.pos)});var m=L(p,2);no(m,{onclick:()=>e.remove(e.pos)}),G(()=>{Me(d,`${e.title??""} `),Me(v,e.settings)}),z(i,c)},$$slots:{default:!0}})};I(n,s=>{e.isOpen?s(o):s(l,!1)})}z(t,r),we()}ot(["click"]);var ed=D("<!> <!>",1);function td(t,e){pe(e,!0);let r=P(e,"params",31,()=>Ne([0,0])),n=P(e,"varind",15),o=P(e,"settings",15),l=P(e,"nvars",3,0),s=ln(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const i={snv:0,area:1,length:2,var:3},u=Object.keys(i);let c=Y(Ne(u[r()[0]])),f=Y(r()[1]+1);const d="Normalization";ue(()=>{o(a(c)+(a(c)==="var"?" #"+a(f):""))}),ue(()=>{a(c)==="var"?n(n()[0]=r()[1]>0?r()[1]:1,!0):n(n()[0]=-1,!0)}),ue(()=>{a(c)==="var"&&e.isOpen?n(n()[0]=r()[1],!0):n(n()[0]=-1,!0)}),ue(()=>{a(c)&&r(r()[0]=i[a(c)],!0)}),ue(()=>{a(f)&&r(r()[1]=a(f)-1,!0)}),un(t,sn({id:"norm",title:d,get settings(){return o()},get isOpen(){return e.isOpen}},()=>s,{children:(h,v)=>{var g=ed(),p=V(g);ne(p,{label:"Type",children:(_,A)=>{qt(_,{get options(){return u},get value(){return a(c)},set value(E){N(c,E,!0)}})},$$slots:{default:!0}});var m=L(p,2);{var b=_=>{ne(_,{label:"Variable index",children:(A,E)=>{An(A,{min:1,get max(){return l()},step:1,get value(){return a(f)},set value(k){N(f,k,!0)}})},$$slots:{default:!0}})};I(m,_=>{a(c)==="var"&&_(b)})}z(h,g)},$$slots:{default:!0}})),we()}var rd=D("<!> <!> <!>",1);function nd(t,e){pe(e,!0);let r=P(e,"params",31,()=>Ne([3,1,0])),n=P(e,"settings",15),o=ln(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const l=T(()=>{if(!e.nvars)return 3;const c=Math.round(e.nvars*.25);return c>39?39:c%2<1?c+1:c}),s=T(()=>r()[1]<2?[0,1]:[0,1,2]),i=T(()=>r()[0]<5?[1,2]:[1,2,3]);ue(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),ue(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),ue(()=>{n(r()[0]+", "+r()[1]+", "+r()[2])}),un(t,sn({id:"savgol",title:"Savitzkiy-Golay",get settings(){return n()}},()=>o,{children:(c,f)=>{var d=rd(),h=V(d);ne(h,{label:"Width",children:(p,m)=>{An(p,{min:3,get max(){return a(l)},step:2,get value(){return r()[0]},set value(b){r(r()[0]=b,!0)}})},$$slots:{default:!0}});var v=L(h,2);ne(v,{label:"Polynomial",children:(p,m)=>{qt(p,{get options(){return a(i)},get value(){return r()[1]},set value(b){r(r()[1]=b,!0)}})},$$slots:{default:!0}});var g=L(v,2);ne(g,{label:"Derivative",children:(p,m)=>{qt(p,{get options(){return a(s)},get value(){return r()[2]},set value(b){r(r()[2]=b,!0)}})},$$slots:{default:!0}}),z(c,d)},$$slots:{default:!0}})),we()}var od=D("<!> <!>",1);function ad(t,e){pe(e,!0);let r=P(e,"params",31,()=>Ne([1,0]));P(e,"varind",27,()=>-1);let n=P(e,"settings",15);P(e,"nvars",3,0);let o=ln(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l={no:0,mean:1,median:2},s={no:0,sd:1,iqr:2,range:3,pareto:4},i=Object.keys(l),u=Object.keys(s);let c=Y(Ne(i[r()[0]])),f=Y(Ne(u[r()[1]]));const d="Scaling";ue(()=>{n(a(c)+"/"+a(f))}),ue(()=>{a(c)&&r(r()[0]=l[a(c)],!0)}),ue(()=>{a(f)&&r(r()[1]=s[a(f)],!0)}),un(t,sn({id:"scale",title:d,get settings(){return n()}},()=>o,{children:(h,v)=>{var g=od(),p=V(g);ne(p,{label:"Center",children:(b,_)=>{qt(b,{get options(){return i},get value(){return a(c)},set value(A){N(c,A,!0)}})},$$slots:{default:!0}});var m=L(p,2);ne(m,{label:"Scale",children:(b,_)=>{qt(b,{get options(){return u},get value(){return a(f)},set value(A){N(f,A,!0)}})},$$slots:{default:!0}}),z(h,g)},$$slots:{default:!0}})),we()}var ld=D("<!> <!> <!>",1),sd=D("<!> <!> <!>",1);function id(t,e){pe(e,!0);let r=P(e,"params",31,()=>Ne([0,1,.1]));P(e,"varind",27,()=>-1);let n=P(e,"settings",15,"");P(e,"nvars",3,0);let o=ln(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l="Baseline correction",s={emsc:0,als:1},i=Object.keys(s);function u(g){const p=Math.ceil(Math.log10(g));return Math.pow(10,p)}let c=Y(Ne(i[r()[0]])),f=Y(Ne(r()[2]>0?u(r()[2]).toString():"0.1")),d=T(()=>parseFloat(a(f))),h=T(()=>a(d)/10),v=T(()=>Math.ceil(-Math.log10(a(d)))+1);ue(()=>{if(a(c)!=="als")return;const g=parseFloat(a(f));(r()[2]<a(h)||r()[2]>g-a(h))&&r(r()[2]=a(h),!0)}),ue(()=>{n(a(c)+" ("+(a(c)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),ue(()=>{a(c)&&r(r()[0]=s[a(c)],!0)}),un(t,sn({id:"scale",title:l,get settings(){return n()}},()=>o,{children:(g,p)=>{var m=sd(),b=V(m);ne(b,{label:"Type",children:(w,y)=>{qt(w,{get options(){return i},get value(){return a(c)},set value(M){N(c,M,!0)}})},$$slots:{default:!0}});var _=L(b,2);{var A=w=>{var y=ld(),M=V(y);ne(M,{label:"Lambda",children:(O,Q)=>{oo(O,{min:1,max:7,step:.1,get value(){return r()[1]},set value(ae){r(r()[1]=ae,!0)}})},$$slots:{default:!0}});var B=L(M,2);ne(B,{label:"Penalty range",children:(O,Q)=>{qt(O,{options:["1","0.1","0.01"],get value(){return a(f)},set value(ae){N(f,ae,!0)}})},$$slots:{default:!0}});var K=L(B,2);ne(K,{label:"Penalty",children:(O,Q)=>{{let ae=T(()=>a(d)-a(h));oo(O,{get min(){return a(h)},get max(){return a(ae)},get step(){return a(h)},get decNum(){return a(v)},get value(){return r()[2]},set value(X){r(r()[2]=X,!0)}})}},$$slots:{default:!0}}),z(w,y)};I(_,w=>{a(c)==="als"&&w(A)})}var E=L(_,2);{var k=w=>{ne(w,{label:"Polynomial",children:(y,M)=>{An(y,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(B){r(r()[1]=B,!0)}})},$$slots:{default:!0}})};I(E,w=>{a(c)==="emsc"&&w(k)})}z(g,m)},$$slots:{default:!0}})),we()}var cd=D("<!> <!>",1);function ud(t,e){pe(e,!0);let r=P(e,"params",15),n=P(e,"varind",15),o=P(e,"settings",15),l=ln(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const s="Trim tails";let i=Y(!1);const u=T(()=>e.nvars?Math.round(e.nvars*.1):1);ue(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-a(u))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+a(u))&&r(r()[1]=e.right,!0),n(n()[1]=r()[0],!0),n(n()[2]=r()[1],!0),N(i,!0)):(n(n()[1]=-1,!0),n(n()[2]=-1,!0),N(i,!1))}),ue(()=>{o("left: "+r()[0]+" right: "+r()[1])}),un(t,sn({id:"norm",title:s,get settings(){return o()},get isOpen(){return e.isOpen}},()=>l,{children:(c,f)=>{var d=Ee(),h=V(d);{var v=g=>{var p=cd(),m=V(p);ne(m,{label:"Left",children:(_,A)=>{{let E=T(()=>e.right-a(u));oo(_,{get min(){return e.left},get max(){return a(E)},step:1,decNum:0,get value(){return r()[0]},set value(k){r(r()[0]=k,!0)}})}},$$slots:{default:!0}});var b=L(m,2);ne(b,{label:"Right",children:(_,A)=>{{let E=T(()=>e.left+a(u));oo(_,{get min(){return a(E)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(k){r(r()[1]=k,!0)}})}},$$slots:{default:!0}}),z(g,p)};I(h,g=>{a(i)&&g(v)})}z(c,d)},$$slots:{default:!0}})),we()}var fd=D("<!> <!>",1);function dd(t,e){pe(e,!0);let r=P(e,"params",31,()=>Ne([3,5]));P(e,"varind",27,()=>-1);let n=P(e,"settings",15);P(e,"nvars",3,0);let o=ln(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const l="Spike removal";ue(()=>{n(r()[0]+"/"+r()[1])}),un(t,sn({id:"scale",title:l,get settings(){return n()}},()=>o,{children:(s,i)=>{var u=fd(),c=V(u);ne(c,{label:"Window",children:(d,h)=>{An(d,{min:3,max:15,step:2,get value(){return r()[0]},set value(v){r(r()[0]=v,!0)}})},$$slots:{default:!0}});var f=L(c,2);ne(f,{label:"Threshold",children:(d,h)=>{An(d,{min:3,max:50,get value(){return r()[1]},set value(v){r(r()[1]=v,!0)}})},$$slots:{default:!0}}),z(s,u)},$$slots:{default:!0}})),we()}var vd=D("<h2>Selected methods</h2> <!>",1),hd=D("<p>No methods selected</p>"),gd=D("<p> </p>"),md=D("<h2>Available methods</h2>"),pd=D("<p>Maximum number of methods is selected.</p>"),wd=D("<p> </p> <!>",1),bd=D('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-15cx0gr"><!> <!></div>',1);function _d(t,e){pe(e,!0);let r=P(e,"prepobj",31,()=>Ne([])),n=P(e,"meta",15),o=P(e,"varind",31,()=>-1),l=P(e,"rawdataShort",15),s=P(e,"prepdataShort",15),i=P(e,"prepmodel",3,null),u=P(e,"reset",3,null),c=P(e,"finalize",3,null);const f=30,d=8,h={savgol:nd,norm:td,scale:ad,baseline:id,trim:ud,spikes:dd};let v=Y("neutral"),g=Y(""),p=Y(void 0),m=Y(""),b=Y(Ne([])),_=Y(Ne([])),A=Y(Ne([]));n(new Array(d).fill(""));const E=T(()=>e.rawdata.values.ncols-e.rawdata.nresp);let k=Ne(e.rawdata.values.nrows<3?Object.keys(h).filter(q=>q!=="scale"):Object.keys(h));y(),r().length!==0&&w();async function w(){r().length!==0&&N(p,e.WASM().then(q=>{N(v,"applying");const H=ql(q,l().values,0,r(),!0,[]),W=Qo(q,l().values,0,H,!0);s(ra(l(),W)),N(v,"success")}).catch(q=>{s(ra(l())),console.error(q),N(v,"error"),N(g,q,!0)}),!0)}function y(){if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(e.rawdata.values.ncols),N(_,[],!0),N(A,[],!0);return}let q=[],H=[],W=0,oe=e.rawdata.values.ncols-e.rawdata.nresp;for(let $ of r())$.id==="trim"?(q.push(W),H.push(oe),$.params[0]<W&&($.params[0]=W),$.params[1]>oe&&($.params[1]=oe),W=$.params[0]>W?$.params[0]:W,oe=$.params[1]>0&&$.params[1]<oe?$.params[1]:oe):(q.push(W),H.push(oe));N(_,q,!0),N(A,H,!0),e.setLeft(W),e.setRight(oe)}function M(q){const H=ir.find(W=>W.id===q);H&&(a(_).push(e.left),a(A).push(e.right),r().push({id:H.id,params:H.mp}),N(m,r().length-1))}function B(q){if(q<=0)return;const H=r()[q],W=r()[q-1];r(r()[q-1]=H,!0),r(r()[q]=W,!0),X()}function K(q){if(q<0||q===r().length-1)return;const H=r()[q],W=r()[q+1];r(r()[q+1]=H,!0),r(r()[q]=W,!0),X()}function O(q){q<0||q>=r().length||(r(r().filter((H,W)=>W!==q)),X())}function Q(q){N(m,q,!0)}function ae(){N(m,null)}function X(){N(v,"neutral"),N(g,""),N(m,null),y(),w(),o(o()[1]=-1,!0),o(o()[2]=-1,!0)}ue(()=>{e.rawdata&&!l()&&l(ta(e.rawdata,f))}),ue(()=>{l()&&!s()&&s(ra(l()))}),ue(()=>{(!r()||r().length===0)&&(N(b,[],!0),s(null),N(_,[],!0),N(A,[],!0),N(m,""),n(new Array(d).fill("")))});var F=bd(),te=V(F);let fe;var se=j(te);ne(se,{label:"",children:(q,H)=>{var W=vd(),oe=L(V(W),2);{var $=le=>{Bc(le,{text:"edit",get onclick(){return u()}})};I(oe,le=>{i()&&u()&&le($)})}z(q,W)},$$slots:{default:!0}});var J=L(se,2);{var ge=q=>{ne(q,{label:"",children:(H,W)=>{var oe=hd();z(H,oe)},$$slots:{default:!0}})},Re=q=>{var H=Ee(),W=V(H);ft(W,17,r,gt,(oe,$,le)=>{var Fe=Ee();const Oe=T(()=>h[a($).id]);var We=V(Fe);{var Qe=$e=>{var Dt=Ee(),Ot=V(Dt);{let rr=T(()=>le===a(m));Io(Ot,()=>a(Oe),(Wr,Hr)=>{Hr(Wr,{get isOpen(){return a(rr)},get left(){return a(_)[le]},get right(){return a(A)[le]},pos:le,get nvars(){return a(E)},moveUp:B,moveDown:K,apply:X,open:Q,close:ae,remove:O,get params(){return a($).params},set params(Pt){a($).params=Pt},get varind(){return o()},set varind(Pt){o(Pt)},get settings(){return n()[le]},set settings(Pt){n(n()[le]=Pt,!0)}})})}z($e,Dt)},tr=$e=>{var Dt=Ee(),Ot=V(Dt);{let rr=T(()=>le===a(m));Io(Ot,()=>a(Oe),(Wr,Hr)=>{Hr(Wr,{pos:le,get isOpen(){return a(rr)},get left(){return a(_)[le]},get right(){return a(A)[le]},get nvars(){return a(E)},moveUp:B,moveDown:K,apply:X,open:Q,close:ae,remove:O,get params(){return a($).params},set params(Pt){a($).params=Pt},get settings(){return n()[le]},set settings(Pt){n(n()[le]=Pt,!0)}})})}z($e,Dt)};I(We,$e=>{a($).id==="norm"||a($).id==="trim"?$e(Qe):$e(tr,!1)})}z(oe,Fe)}),z(q,H)};I(J,q=>{r().length===0?q(ge):q(Re,!1)})}var Ue=L(J,2);{var me=q=>{ne(q,{status:"error",children:(H,W)=>{var oe=gd(),$=j(oe);G(()=>Me($,a(g))),z(H,oe)},$$slots:{default:!0}})};I(Ue,q=>{(a(v)==="error"||a(g))&&q(me)})}var ie=L(te,2),Z=j(ie);{var ce=q=>{ne(q,{label:" ",children:(H,W)=>{Br(H,{get onclick(){return c()},text:"Finalize"})},$$slots:{default:!0}})};I(Z,q=>{!i()&&!a(m)&&r().length>0&&q(ce)})}var De=L(ie,2),je=j(De);ne(je,{label:"",children:(q,H)=>{var W=md();z(q,W)},$$slots:{default:!0}});var xe=L(je,2);{var Se=q=>{ne(q,{label:"",children:(H,W)=>{var oe=pd();z(H,oe)},$$slots:{default:!0}})},ee=q=>{var H=Ee(),W=V(H);ft(W,17,()=>k,gt,(oe,$)=>{const le=T(()=>ir.find(Fe=>Fe.id===a($)));ne(oe,{children:(Fe,Oe)=>{var We=wd(),Qe=V(We),tr=j(Qe),$e=L(Qe,2);qc($e,{onclick:()=>M(a(le).id)}),G(()=>Me(tr,a(le).title)),z(Fe,We)},$$slots:{default:!0}})}),z(q,H)};I(xe,q=>{r().length>=d?q(Se):q(ee,!1)})}G(q=>fe=it(te,1,"selected-methods-list svelte-15cx0gr",null,fe,q),[()=>({final:i()!==null&&i()!==void 0})]),z(t,F),we()}var yd=D("<p> </p>"),xd=D("<!> <!>",1),kd=D('<div class="downloads-block svelte-1jqwqd2"><!></div>'),Ed=D('<div class="prep-creator svelte-1jqwqd2"><!></div> <!> <!>',1),Sd=D(`<div class="help-text svelte-1jqwqd2"><p class="svelte-1jqwqd2">In this tab you can create a chain of preprocessing methods (<em>preprocessing model</em>), tune their order and parameters, and check how your data look like before and after preprocessing. When you done you can dowload the model and the preprocessed data to be used in other apps. All you need is just to load your data from a single CSV file or from one or several SPC files.</p> <p class="svelte-1jqwqd2"><strong>CSV file</strong><br/> CSV file should contain data as numeric values delimited by comma (with dot as decimal separator) or
               by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1jqwqd2">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If variables are part of signals, e.g. spectra, the header can content numeric values, e.g. wavelength or wavenumbers. In this case, select <em>values</em> option for the header and you will also be able to specify name of the values (e.g. <em>Wavelength</em>) and units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1jqwqd2">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file.</p> <p class="svelte-1jqwqd2">If your CSV file contains a column, which is not a part of the main datawith, e.g. with <strong>group labels</strong> (classes, subsets, etc.) or <strong>response values</strong>, you need to set corresponding option in the dialog box. It is assumed that this column is next to the column with row labels or is the first column of row labels are absent.</p> <p class="svelte-1jqwqd2"><strong>SPC files</strong><br/> You can also load spectral data directly from Galactic Industries SPC data files. The app supports both single spectrum in a file and files with multiple spectra, however only 2-way datasets can be loaded. You can select several SPC files to load (hold Ctrl or Shift when selecting), in this case they will be combined together into the same dataset.</p> <p class="svelte-1jqwqd2">After the data is loaded you will be able to create and tune the sequence of preprocessing methods. The result will be shown on a plot for 30 randomly selected rows. To apply the methods to whole data and then dowload the preprocessed values and the model, just click <em>Finalize</em> button.</p></div>`),Ad=D('<div class="app-container svelte-1jqwqd2"><div class="app-controls svelte-1jqwqd2"><div class="data-loader svelte-1jqwqd2"><!></div> <!></div> <div class="app-content svelte-1jqwqd2"><!></div></div>');function Cd(t,e){pe(e,!0);const r=T(()=>e.session.create);let n=Y(Ne([-1,0,0])),o=Y("neutral"),l=Y(""),s=Y(void 0);async function i(w,y,M){!y||!w||y.length===0||N(s,e.WASM().then(B=>{N(o,"applying");const K=ql(B,w.values,w.nresp,y,!1,M),O=Qo(B,w.values,w.nresp,K,!1,!1),Q=Ql(Ca(w),O);K.info=a(r).prepmeta,a(r).prepmodel=K,a(r).prepdata=jl(Q,a(r).prepmodel)}).catch(B=>{a(r).prepmodel=null,a(r).prepdata=null,console.error(B),N(o,"error"),N(l,B,!0)}),!0)}function u(w){const y=a(r).rawdata.values.ncols-a(r).rawdata.nresp;a(r).rawdata&&w>=0&&w<y&&w<a(r).right&&(a(r).left=w)}function c(w){const y=a(r).rawdata.values.ncols-a(r).rawdata.nresp;a(r).rawdata&&w<=y&&w>a(r).left&&(a(r).right=w)}function f(){i(a(r).rawdata,a(r).prepobj,[])}function d(){a(r).prepmodel=null,a(r).prepdata=null}ue(()=>{a(r).rawdata===null&&(a(r).left=0,a(r).right=0,a(r).prepdata=null,a(r).rawdataShort=null,a(r).prepdataShort=null,a(r).prepmodel=null,a(r).prepobj=[],N(n,[-1,-1,-1],!0))}),ue(()=>{(!a(r).prepobj||a(r).prepobj.length===0)&&(a(r).prepdata=null,a(r).prepdataShort=null,N(n,[-1,-1,-1],!0))}),ue(()=>{const w=lr(()=>JSON.stringify(e.session,to));e.backupSession(w,a(r).rawdata,a(r).prepdata,a(r).prepdataShort)});var h=Ad(),v=j(h),g=j(v),p=j(g);es(p,{setLeft:u,setRight:c,get rawdata(){return a(r).rawdata},set rawdata(w){a(r).rawdata=w}});var m=L(g,2);{var b=w=>{var y=Ed(),M=V(y),B=j(M);_d(B,{get WASM(){return e.WASM},get rawdata(){return a(r).rawdata},get left(){return a(r).left},get right(){return a(r).right},setLeft:u,",":!0,setRight:c,reset:d,finalize:f,get prepmodel(){return a(r).prepmodel},set prepmodel(X){a(r).prepmodel=X},get prepdata(){return a(r).prepdata},set prepdata(X){a(r).prepdata=X},get prepdataShort(){return a(r).prepdataShort},set prepdataShort(X){a(r).prepdataShort=X},get rawdataShort(){return a(r).rawdataShort},set rawdataShort(X){a(r).rawdataShort=X},get varind(){return a(n)},set varind(X){N(n,X,!0)},get prepobj(){return a(r).prepobj},set prepobj(X){a(r).prepobj=X},get meta(){return a(r).prepmeta},set meta(X){a(r).prepmeta=X}});var K=L(M,2);{var O=X=>{ne(X,{status:"error",children:(F,te)=>{var fe=yd(),se=j(fe);G(()=>Me(se,a(l))),z(F,fe)},$$slots:{default:!0}})};I(K,X=>{(a(o)==="error"||a(l))&&X(O)})}var Q=L(K,2);{var ae=X=>{var F=kd(),te=j(F);ne(te,{label:"Download",children:(fe,se)=>{var J=xd(),ge=V(J);Br(ge,{text:"Data",onclick:()=>$l(a(r).prepdata,a(r).left,a(r).right)});var Re=L(ge,2);Br(Re,{text:"Model",onclick:()=>au(a(r).prepmodel)}),z(fe,J)},$$slots:{default:!0}}),z(X,F)};I(Q,X=>{a(r).prepmodel&&a(r).prepdata&&X(ae)})}z(w,y)};I(m,w=>{a(r).rawdata&&w(b)})}var _=L(v,2),A=j(_);{var E=w=>{var y=Sd();z(w,y)},k=w=>{var y=Ee(),M=V(y);{var B=K=>{var O=Ee(),Q=V(O);Qn(Q,()=>a(r).rawdata,ae=>{Es(ae,{get rawdata(){return a(r).rawdataShort},get prepdata(){return a(r).prepdataShort},get left(){return a(r).left},get right(){return a(r).right},get varind(){return a(n)}})}),z(K,O)};I(M,K=>{a(r).rawdataShort&&a(r).prepdataShort&&K(B)},!0)}z(w,y)};I(A,w=>{a(r).rawdata?w(k,!1):w(E)})}z(t,h),we()}var zd=D(' <span class="svelte-1l1cvmx"><!></span>',1),Td=D('<span class="info-details svelte-1l1cvmx"><!></span>');function Pd(t,e){pe(e,!0);var r=Td(),n=j(r);{var o=s=>{var i=zd(),u=V(i),c=L(u),f=j(c);mt(f,()=>kc(e.prepmodel)),G(()=>Me(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),z(s,i)},l=s=>{var i=Hi("skipped");z(s,i)};I(n,s=>{e.prepmodel.ml?s(o):s(l,!1)})}z(t,r),we()}var Nd=D('<span>file:</span> <span class="file-name svelte-1dxrrpt"> </span><br/>',1),Rd=D('<p class="info-text svelte-1dxrrpt"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Ld(t,e){pe(e,!0);var r=Ee(),n=V(r);{var o=l=>{ne(l,{name:"info",children:(s,i)=>{var u=Rd(),c=V(u),f=L(j(c),3);{var d=m=>{var b=Nd(),_=L(V(b),2),A=j(_);G(()=>{S(_,"title",e.model.fileName),Me(A,e.model.fileName)}),z(m,b)};I(f,m=>{e.model.fileName&&m(d)})}var h=L(f),v=L(h,3);Pd(v,{get prepmodel(){return e.model}});var g=L(c,2);{var p=m=>{no(m,{get onclick(){return e.reset}})};I(g,m=>{e.reset&&m(p)})}G(()=>Me(h,` ${e.model.npred??""} `)),z(s,u)},$$slots:{default:!0}})};I(n,l=>{e.model&&l(o)})}z(t,r),we()}var Md=D("<!> <!>",1),Fd=D("<p><!></p>"),jd=D("<!> <!>",1);function qd(t,e){pe(e,!0);let r=P(e,"model",15),n=Y(""),o=Y("neutral"),l=Y("");function s(m){try{const b=JSON.parse(m,Il);if(Array.isArray(b.v)&&(b.v=Float64Array.from(b.v)),!Object.keys(b).includes("class")||b.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");b.fileName=a(c),r(b),N(o,"success"),N(l,"")}catch(b){console.log(b),r(null),N(o,"error"),N(l,b,!0)}}function i(m){const b=new FileReader;b.onload=()=>{s(b.result)},b.readAsText(a(n))}function u(){N(n,""),r(null),N(o,"neutral"),N(l,"")}ue(()=>{a(n)===null?(r(null),N(o,"neutral"),N(l,"")):(N(o,"neutral"),N(l,""))});let c=T(()=>a(n)?a(n).name.replace(/\.[^/.]+$/,""):"");var f=jd(),d=V(f);{var h=m=>{var b=Md(),_=V(b);Qn(_,()=>a(n),k=>{ne(k,{name:"file-selector",children:(w,y)=>{Jl(w,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return a(n)},set file(M){N(n,M,!0)}})},$$slots:{default:!0}})});var A=L(_,2);{var E=k=>{ne(k,{name:"load-button",label:" ",children:(w,y)=>{Br(w,{onclick:i,text:"Load"})},$$slots:{default:!0}})};I(A,k=>{a(n)&&k(E)})}z(m,b)},v=m=>{Ld(m,{get model(){return r()},reset:u})};I(d,m=>{r()?m(v,!1):m(h)})}var g=L(d,2);{var p=m=>{ne(m,{name:"error",status:"error",children:(b,_)=>{var A=Fd(),E=j(A);mt(E,()=>a(l)),z(b,A)},$$slots:{default:!0}})};I(g,m=>{(a(o)==="error"||a(l))&&m(p)})}z(t,f),we()}var Bd=D('<div class="data-loader svelte-sqi2x7"><!></div>'),Id=D('<p class="svelte-sqi2x7"><strong>Step 1.</strong></p> <p class="svelte-sqi2x7">Load JSON file with a model you saved from <em>Create</em> tab.</p>',1),Dd=D('<p class="svelte-sqi2x7"><strong>Step 2.</strong></p> <p class="svelte-sqi2x7">Load your data from single CSV file or single/multiple SPC files. See details about data file in the <em>Create</em> tab.</p>',1),Od=D('<div class="help-text svelte-sqi2x7"><p class="svelte-sqi2x7">In this tab you can apply preprocessing model, developed in <em>Create</em> tab to a new dataset.</p> <!></div>'),Vd=D('<div class="app-container svelte-sqi2x7"><div class="app-controls svelte-sqi2x7"><div class="model-loader svelte-sqi2x7"><!></div> <!></div> <div class="app-content svelte-sqi2x7"><!></div></div>');function Ud(t,e){pe(e,!0);const r=T(()=>e.session.apply);ue(()=>{a(r).model===null&&(a(r).rawdata=null,a(r).rawdataShort=null,a(r).prepdata=null)}),ue(()=>{a(r).model&&(v=>{var g=Fn(v,2);a(r).left=g[0],a(r).right=g[1]})(xc(a(r).model))}),ue(()=>{a(r).rawdata===null&&(a(r).prepdata=null,a(r).prepdataShort=null)}),ue(()=>{a(r).rawdataShort=a(r).rawdata?ta(a(r).rawdata,30):null}),ue(()=>{a(r).prepdataShort=a(r).prepdata?ta(a(r).prepdata,30):null}),ue(()=>{const v=lr(()=>JSON.stringify(e.session,to));e.backupSession(v,a(r).rawdata,a(r).prepdata,a(r).model)});var n=Vd(),o=j(n),l=j(o),s=j(l);qd(s,{get model(){return a(r).model},set model(v){a(r).model=v},get left(){return a(r).left},set left(v){a(r).left=v},get right(){return a(r).right},set right(v){a(r).right=v}});var i=L(l,2);{var u=v=>{var g=Bd(),p=j(g);es(p,{get WASM(){return e.WASM},get model(){return a(r).model},get left(){return a(r).left},get right(){return a(r).right},get rawdata(){return a(r).rawdata},set rawdata(m){a(r).rawdata=m},get prepdata(){return a(r).prepdata},set prepdata(m){a(r).prepdata=m}}),z(v,g)};I(i,v=>{a(r).model&&v(u)})}var c=L(o,2),f=j(c);{var d=v=>{var g=Od(),p=L(j(g),2);{var m=_=>{var A=Id();z(_,A)},b=_=>{var A=Dd();z(_,A)};I(p,_=>{a(r).model?_(b,!1):_(m)})}z(v,g)},h=v=>{var g=Ee(),p=V(g);{var m=b=>{var _=Ee(),A=V(_);Qn(A,()=>a(r).rawdataShort,E=>{Es(E,{get rawdata(){return a(r).rawdataShort},get prepdata(){return a(r).prepdataShort},get left(){return a(r).left},get right(){return a(r).right}})}),z(b,_)};I(p,b=>{a(r).rawdataShort&&a(r).prepdataShort&&b(m)},!0)}z(v,g)};I(f,v=>{a(r).rawdata?v(h,!1):v(d)})}z(t,n),we()}var Wd=D('<div><div class="modal svelte-q7wo60"><div class="header svelte-q7wo60"><button class="close-button svelte-q7wo60">✕</button></div> <div class="body svelte-q7wo60"><!></div></div></div>');function Hd(t,e){pe(e,!0);let r=P(e,"isDark",3,!1);function n(d){d.key==="Escape"&&e.closeModal()}var o=Wd();Rr("keydown",To,n);let l;var s=j(o),i=j(s),u=j(i);u.__click=function(...d){var h;(h=e.closeModal)==null||h.apply(this,d)};var c=L(i,2),f=j(c);an(f,()=>e.children),G(d=>l=it(o,1,"drop svelte-q7wo60",null,l,d),[()=>({isdark:r()})]),vl(7,o,()=>Ss),z(t,o),we()}ot(["click"]);function As(t,e){N(e,!0)}function Yd(t,e,r){const n=$o(new Date),o=e.appID+"-session-"+n+".json";a(r).date=n;const l=JSON.stringify(a(r),to),s=new Blob([l],{type:"text/json"}),i=window.URL.createObjectURL(s),u=document.createElement("a");u.setAttribute("href",i),u.setAttribute("download",o),u.click()}function Gd(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var Kd=D('<sup style="color:red">β</sup>'),Xd=D('<li><button class="svelte-1cyr8za"> </button></li>'),Jd=D("<div><!></div>"),Zd=D('<div class="info-container svelte-1cyr8za"><!></div>'),Qd=D('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"/> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function $d(t,e){pe(e,!0);let r=P(e,"tabs",19,()=>[]),n=P(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let l=Y(!1),s=Y(void 0),i=Y("Current session "),u=Y(!1);function c(E){N(i,E,!0),N(u,!0),setTimeout(()=>{N(i,"Current session "),N(u,!1)},1e3)}function f(){N(l,!1)}function d(E){a(s).tab=E}function h(){const E=indexedDB.open(o,1);E.onsuccess=k=>{const y=k.target.result.transaction(e.appID,"readwrite");y.objectStore(e.appID).delete("session"),y.oncomplete=()=>{N(s,e.initSession(),!0),c("Session was reinitialzed.")},y.onerror=()=>console.error("Failed to session from DB.")}}function v(E,k){window.localStorage.removeItem(e.appID+"-blocked");const w=indexedDB.open(o,1);w.onsuccess=y=>{const K=y.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);K.put(E,"session"),K.put($o(new Date),"session-update")}}function g(){new Promise((E,k)=>{const w=indexedDB.open(o,1);w.onsuccess=y=>{const O=y.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");O.onsuccess=()=>E(O.result),O.onerror=()=>k(O.error)}}).then(E=>{p(E),N(i,"Last session is restored "),N(u,!0),setTimeout(()=>{N(i,"Current session "),N(u,!1)},1500)}).catch(E=>{console.error(E),N(s,e.initSession(),!0)})}function p(E){if(!E||E==="undefined"){N(s,e.initSession(),!0);return}const k=JSON.parse(E,Il);N(s,e.checkSession(k)?k:e.initSession(e.appID),!0)}function m(E){e.resetSession(a(s));const k=new FileReader;k.onload=()=>{p(k.result),E.target.value=""},k.readAsText(E.target.files[0])}gc(()=>{const E=e.appID,k=indexedDB.open(o,1);k.onupgradeneeded=w=>{const y=w.target.result;y.objectStoreNames.contains(E)||y.createObjectStore(E)},k.onsuccess=w=>{g()}});var b=Ee(),_=V(b);{var A=E=>{var k=Qd(),w=j(k),y=j(w),M=j(y),B=L(M,2),K=j(B),O=L(K);{var Q=ee=>{var q=Kd();z(ee,q)};I(O,ee=>{n()&&ee(Q)})}var ae=L(B,2),X=j(ae),F=L(y,2);ft(F,21,r,gt,(ee,q,H)=>{var W=Xd();let oe;var $=j(W);$.__click=()=>d(H),$.__keydown=()=>d(H);var le=j($);G(Fe=>{oe=it(W,1,"nav-item svelte-1cyr8za",null,oe,Fe),Me(le,a(q).name)},[()=>({selected:a(s).tab===H})]),z(ee,W)});var te=L(w,2);ft(te,21,r,gt,(ee,q,H)=>{var W=Jd();let oe;var $=j(W);Io($,()=>a(q).component,(le,Fe)=>{Fe(le,{get WASM(){return e.WASM},get session(){return a(s)},backupSession:v})}),G(le=>oe=it(W,1,"tab-content svelte-1cyr8za",null,oe,le),[()=>({hidden:a(s).tab!==H})]),z(ee,W)});var fe=L(te,2),se=j(fe);let J;var ge=j(se),Re=j(ge),Ue=L(ge,2),me=j(Ue);me.__change=m;var ie=L(Ue,2);ie.__click=[Yd,e,s];var Z=L(ie,2);Z.__click=[Gd,h];var ce=L(se,2),De=j(ce);De.__click=[As,l],De.__keydown=[As,l];var je=L(De,2);an(je,()=>e.footer);var xe=L(fe,2);{var Se=ee=>{Hd(ee,{closeModal:f,children:(q,H)=>{var W=Zd(),oe=j(W);an(oe,()=>e.info),z(q,W)},$$slots:{default:!0}})};I(xe,ee=>{a(l)&&ee(Se)})}G(ee=>{S(M,"alt",e.appShortTitle),Me(K,e.appTitle),Me(X,e.appSlogan),J=it(se,1,"session svelte-1cyr8za",null,J,ee),Me(Re,a(i))},[()=>({"no-buttons":a(u)})]),z(E,k)};I(_,E=>{a(s)&&E(A)})}z(t,b),we()}ot(["click","keydown","change"]);const dv="modulepreload",vv=function(t){return"/"+t},hv={},ev=function(e,r,n){let o=Promise.resolve();function l(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return o.then(s=>{for(const i of s||[])i.status==="rejected"&&l(i.reason);return e().catch(l)})};async function tv(t={}){var zs;var e,r=t,n=typeof window=="object",o=typeof WorkerGlobalScope<"u",l=typeof process=="object"&&((zs=process.versions)==null?void 0:zs.node)&&process.type!="renderer";if(l){const{createRequire:C}=await ev(()=>Promise.resolve().then(()=>av),void 0);var s=C(ze&&ze.tagName.toUpperCase()==="SCRIPT"&&ze.src||new URL("prep.js",document.baseURI).href)}var i=(C,R)=>{throw R},u=ze&&ze.tagName.toUpperCase()==="SCRIPT"&&ze.src||new URL("prep.js",document.baseURI).href,c="";function f(C){return r.locateFile?r.locateFile(C,c):c+C}var d,h;if(l){var v=s("fs");u.startsWith("file:")&&(c=s("path").dirname(s("url").fileURLToPath(u))+"/"),h=C=>{C=A(C)?new URL(C):C;var R=v.readFileSync(C);return R},d=async(C,R=!0)=>{C=A(C)?new URL(C):C;var U=v.readFileSync(C,R?void 0:"utf8");return U},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),i=(C,R)=>{throw process.exitCode=C,R}}else if(n||o){try{c=new URL(".",u).href}catch{}o&&(h=C=>{var R=new XMLHttpRequest;return R.open("GET",C,!1),R.responseType="arraybuffer",R.send(null),new Uint8Array(R.response)}),d=async C=>{if(A(C))return new Promise((U,Pe)=>{var Ce=new XMLHttpRequest;Ce.open("GET",C,!0),Ce.responseType="arraybuffer",Ce.onload=()=>{if(Ce.status==200||Ce.status==0&&Ce.response){U(Ce.response);return}Pe(Ce.status)},Ce.onerror=Pe,Ce.send(null)});var R=await fetch(C,{credentials:"same-origin"});if(R.ok)return R.arrayBuffer();throw new Error(R.status+" : "+R.url)}}var g=console.log.bind(console),p=console.error.bind(console),m,b=!1,_,A=C=>C.startsWith("file://"),E,k,w,y,M,B,K=!1;function O(){var C=w.buffer;y=new Int8Array(C),M=new Uint8Array(C),r.HEAP32=new Int32Array(C),B=new Uint32Array(C),r.HEAPF64=new Float64Array(C),new BigInt64Array(C),new BigUint64Array(C)}function Q(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)H(r.preRun.shift());xe(q)}function ae(){K=!0,Nn.j()}function X(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)ee(r.postRun.shift());xe(Se)}var F=0,te=null;function fe(C){var R;F++,(R=r.monitorRunDependencies)==null||R.call(r,F)}function se(C){var U;if(F--,(U=r.monitorRunDependencies)==null||U.call(r,F),F==0&&te){var R=te;te=null,R()}}function J(C){var U;(U=r.onAbort)==null||U.call(r,C),C="Aborted("+C+")",p(C),b=!0,C+=". Build with -sASSERTIONS for more info.";var R=new WebAssembly.RuntimeError(C);throw k==null||k(R),R}var ge;function Re(){return r.locateFile?f("prep_wasm.wasm"):new URL("/prep/prep.wasm",ze&&ze.tagName.toUpperCase()==="SCRIPT"&&ze.src||new URL("prep.js",document.baseURI).href).href}function Ue(C){if(C==ge&&m)return new Uint8Array(m);if(h)return h(C);throw"both async and sync fetching of the wasm failed"}async function me(C){if(!m)try{var R=await d(C);return new Uint8Array(R)}catch{}return Ue(C)}async function ie(C,R){try{var U=await me(C),Pe=await WebAssembly.instantiate(U,R);return Pe}catch(Ce){p(`failed to asynchronously prepare wasm: ${Ce}`),J(Ce)}}async function Z(C,R,U){if(!C&&typeof WebAssembly.instantiateStreaming=="function"&&!A(R)&&!l)try{var Pe=fetch(R,{credentials:"same-origin"}),Ce=await WebAssembly.instantiateStreaming(Pe,U);return Ce}catch(He){p(`wasm streaming compile failed: ${He}`),p("falling back to ArrayBuffer instantiation")}return ie(R,U)}function ce(){return{a:sv}}async function De(){function C(He,Ye){return Nn=He.exports,w=Nn.i,O(),lv(Nn),se(),Nn}fe();function R(He){return C(He.instance)}var U=ce();if(r.instantiateWasm)return new Promise((He,Ye)=>{r.instantiateWasm(U,(Ke,Gt)=>{He(C(Ke))})});ge??(ge=Re());var Pe=await Z(m,ge,U),Ce=R(Pe);return Ce}class je{constructor(R){or(this,"name","ExitStatus");this.message=`Program terminated with exit(${R})`,this.status=R}}var xe=C=>{for(;C.length>0;)C.shift()(r)},Se=[],ee=C=>Se.push(C),q=[],H=C=>q.push(C),W=!0,oe=C=>nr(C),$=()=>vo(),le=()=>J(""),Fe=0,Oe=()=>{W=!1,Fe=0},We={},Qe=C=>{if(C instanceof je||C=="unwind")return _;i(1,C)},tr=()=>W||Fe>0,$e=C=>{var R;_=C,tr()||((R=r.onExit)==null||R.call(r,C),b=!0),i(C,new je(C))},Dt=(C,R)=>{_=C,$e(C)},Ot=Dt,rr=()=>{if(!tr())try{Ot(_)}catch(C){Qe(C)}},Wr=C=>{if(!b)try{C(),rr()}catch(R){Qe(R)}},Hr=()=>performance.now(),Pt=(C,R)=>{if(We[C]&&(clearTimeout(We[C].id),delete We[C]),!R)return 0;var U=setTimeout(()=>{delete We[C],Wr(()=>fo(C,Hr()))},R);return We[C]={id:U,timeout_ms:R},0},ca=()=>2147483648,ua=(C,R)=>Math.ceil(C/R)*R,de=C=>{var R=w.buffer.byteLength,U=(C-R+65535)/65536|0;try{return w.grow(U),O(),1}catch{}},Ae=C=>{var R=M.length;C>>>=0;var U=ca();if(C>U)return!1;for(var Pe=1;Pe<=4;Pe*=2){var Ce=R*(1+.2/Pe);Ce=Math.min(Ce,C+100663296);var He=Math.min(U,ua(Math.max(C,Ce),65536)),Ye=de(He);if(Ye)return!0}return!1},ke=C=>52;function et(C,R,U,Pe){return 70}var wt=[null,[],[]],Vt=typeof TextDecoder<"u"?new TextDecoder:void 0,St=(C,R,U,Pe)=>{for(var Ce=R+U;C[R]&&!(R>=Ce);)++R;return R},xt=(C,R=0,U,Pe)=>{var Ce=St(C,R,U);if(Ce-R>16&&C.buffer&&Vt)return Vt.decode(C.subarray(R,Ce));for(var He="";R<Ce;){var Ye=C[R++];if(!(Ye&128)){He+=String.fromCharCode(Ye);continue}var Ke=C[R++]&63;if((Ye&224)==192){He+=String.fromCharCode((Ye&31)<<6|Ke);continue}var Gt=C[R++]&63;if((Ye&240)==224?Ye=(Ye&15)<<12|Ke<<6|Gt:Ye=(Ye&7)<<18|Ke<<12|Gt<<6|C[R++]&63,Ye<65536)He+=String.fromCharCode(Ye);else{var Gr=Ye-65536;He+=String.fromCharCode(55296|Gr>>10,56320|Gr&1023)}}return He},Ve=(C,R)=>{var U=wt[C];R===0||R===10?((C===1?g:p)(xt(U)),U.length=0):U.push(R)},Te=(C,R,U)=>C?xt(M,C,R):"",dt=(C,R,U,Pe)=>{for(var Ce=0,He=0;He<U;He++){var Ye=B[R>>2],Ke=B[R+4>>2];R+=8;for(var Gt=0;Gt<Ke;Gt++)Ve(C,M[Ye+Gt]);Ce+=Ke}return B[Pe>>2]=Ce,0},st=C=>{var R=r["_"+C];return R},tt=(C,R)=>{y.set(C,R)},Ge=C=>{for(var R=0,U=0;U<C.length;++U){var Pe=C.charCodeAt(U);Pe<=127?R++:Pe<=2047?R+=2:Pe>=55296&&Pe<=57343?(R+=4,++U):R+=3}return R},Ut=(C,R,U,Pe)=>{if(!(Pe>0))return 0;for(var Ce=U,He=U+Pe-1,Ye=0;Ye<C.length;++Ye){var Ke=C.codePointAt(Ye);if(Ke<=127){if(U>=He)break;R[U++]=Ke}else if(Ke<=2047){if(U+1>=He)break;R[U++]=192|Ke>>6,R[U++]=128|Ke&63}else if(Ke<=65535){if(U+2>=He)break;R[U++]=224|Ke>>12,R[U++]=128|Ke>>6&63,R[U++]=128|Ke&63}else{if(U+3>=He)break;R[U++]=240|Ke>>18,R[U++]=128|Ke>>12&63,R[U++]=128|Ke>>6&63,R[U++]=128|Ke&63,Ye++}}return R[U]=0,U-Ce},Yr=(C,R,U)=>Ut(C,M,R,U),Le=C=>at(C),re=C=>{var R=Ge(C)+1,U=Le(R);return Yr(C,U,R),U},vt=(C,R,U,Pe,Ce)=>{var He={string:Nt=>{var Rn=0;return Nt!=null&&Nt!==0&&(Rn=re(Nt)),Rn},array:Nt=>{var Rn=Le(Nt.length);return tt(Nt,Rn),Rn}};function Ye(Nt){return R==="string"?Te(Nt):R==="boolean"?!!Nt:Nt}var Ke=st(C),Gt=[],Gr=0;if(Pe)for(var Kr=0;Kr<Pe.length;Kr++){var Ts=He[U[Kr]];Ts?(Gr===0&&(Gr=$()),Gt[Kr]=Ts(Pe[Kr])):Gt[Kr]=Pe[Kr]}var da=Ke(...Gt);function cv(Nt){return Gr!==0&&oe(Gr),Ye(Nt)}return da=cv(da),da};r.noExitRuntime&&(W=r.noExitRuntime),r.print&&(g=r.print),r.printErr&&(p=r.printErr),r.wasmBinary&&(m=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=vt;var fo,nr,at,vo;function lv(C){r._malloc=C.k,r._free=C.l,r._prepfit_wasm=C.m,r._prepapply_wasm=C.n,fo=C.o,nr=C.p,at=C.q,vo=C.r}var sv={c:le,b:Oe,d:Pt,e:Ae,h:ke,f:et,g:dt,a:$e},Nn=await De();function fa(){if(F>0){te=fa;return}if(Q(),F>0){te=fa;return}function C(){var R;r.calledRun=!0,!b&&(ae(),E==null||E(r),(R=r.onRuntimeInitialized)==null||R.call(r),X())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),C()},1)):C()}function iv(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return iv(),fa(),K?e=r:e=new Promise((C,R)=>{E=C,k=R}),e}var rv=D('<p>Current release: <span>1.1.0</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=Preprocessing app">help@mda.tools</a></p>'),nv=D(`<h2>Data preprocessing</h2> <p>Interactive web-application for data preprocessing. Most of the methods it contains are
      applicable for different kinds of spectra.</p> <h3>v. 1.1.0</h3> <p class="release-info">released 25/07/2025</p> <ul><li>Better implementation of spike removal method.</li></ul> <h3>v. 1.0.0</h3> <p class="release-info">released 13/07/2025</p> <ul><li>Several improvements to UX/UI.</li> <li>Added support for SPC files.</li> <li>Added more preprocessing methods.</li></ul>`,1);function ov(t,e){pe(e,!1);function r(s){s.create.rawdata=null,s.apply.model=null,s.tab=0}function n(s){const i=Object.keys(s);if(!["date","tab","create","apply"].every(c=>i.includes(c)))return!1;const u=Object.keys(s.create);return!!["rawdata","prepdata","rawdataShort","prepdataShort","prepmodel","left","right","varind"].every(c=>u.includes(c))}function o(){return{date:$o(new Date),tab:0,create:{rawdata:0,prepdata:0,rawdataShort:0,prepdataShort:0,prepmodel:0,prepobj:[],prepmeta:0,left:0,right:0,varind:[-1,-1,-1]},apply:{rawdata:0,prepdata:0,prepmodel:0,left:0,right:0,varind:[-1,-1,-1]}}}const l=[{name:"Create",label:"create",component:Cd},{name:"Apply",label:"apply",component:Ud}];fc(),$d(t,{appID:"prep",appTitle:"Preprocessing",appShortTitle:"Preprocessing",appSlogan:"Make your data great again",get WASM(){return tv},get tabs(){return l},initSession:o,checkSession:n,resetSession:r,footer:u=>{var c=rv();z(u,c)},info:u=>{var c=nv();z(u,c)},$$slots:{footer:!0,info:!0}}),we()}Yi(ov,{target:document.body});const av=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=prep.js.map
