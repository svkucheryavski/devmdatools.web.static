var s0=Object.defineProperty;var ui=De=>{throw TypeError(De)};var o0=(De,Me,at)=>Me in De?s0(De,Me,{enumerable:!0,configurable:!0,writable:!0,value:at}):De[Me]=at;var nr=(De,Me,at)=>o0(De,typeof Me!="symbol"?Me+"":Me,at),Xo=(De,Me,at)=>Me.has(De)||ui("Cannot "+at);var xe=(De,Me,at)=>(Xo(De,Me,"read from private field"),at?at.call(De):Me.get(De)),_t=(De,Me,at)=>Me.has(De)?ui("Cannot add the same private member more than once"):Me instanceof WeakSet?Me.add(De):Me.set(De,at),Rt=(De,Me,at,en)=>(Xo(De,Me,"write to private field"),en?en.call(De,at):Me.set(De,at),at),Ir=(De,Me,at)=>(Xo(De,Me,"access private method"),at);(function(){"use strict";var gn,pn,Pr,On,Bn,Qr,bn,Jr,Tr,_n,Wn,Yn,er,fi,Rs,Qo,Lr,wn,Un,Ps,vi,ai;var De=document.createElement("style");De.textContent=`.drop.svelte-q7wo60{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-q7wo60{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-q7wo60{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-q7wo60{grid-area:header}.close-button.svelte-q7wo60{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-q7wo60:hover{background-color:#4e5052}.isdark.svelte-q7wo60,.isdark.svelte-q7wo60 .header:where(.svelte-q7wo60),.isdark.svelte-q7wo60 .body:where(.svelte-q7wo60){background-color:#606060}.isdark.svelte-q7wo60 .close-button:where(.svelte-q7wo60){color:#433201;background-color:#c2be9b}.isdark.svelte-q7wo60 .close-button:where(.svelte-q7wo60):hover{background-color:#f0f674}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1986c5z{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1986c5z:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1986c5z:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1986c5z:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1986c5z{display:none}.control-element.error.svelte-1986c5z{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1986c5z{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1986c5z>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1986c5z>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1986c5z>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1986c5z>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1986c5z .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1986c5z .range-value_left,.control-element.svelte-1986c5z .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1986c5z .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1986c5z .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1986c5z .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1986c5z .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1986c5z .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1986c5z .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1986c5z .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1986c5z .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1986c5z .textinput>input:active::placeholder,.control-element.svelte-1986c5z .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1986c5z .textinput>input:focus,.control-element.svelte-1986c5z .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .textinput.error>input,.control-element.svelte-1986c5z .textinput.error>input:focus,.control-element.svelte-1986c5z .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1986c5z .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1986c5z .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1986c5z .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.buttons.svelte-t7v4gx{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;margin:0;padding:2px 0;width:auto;border-radius:2px;cursor:default;white-space:nowrap}table.svelte-mdsuv2{width:100%;border-collapse:collapse;font-size:.85em;margin-top:1em}tr.svelte-mdsuv2{width:100%}th.svelte-mdsuv2{border-bottom:1px solid #a0a0a0}th.svelte-mdsuv2,td.svelte-mdsuv2{text-align:right;padding:.35em .5em .35em .1em;color:#404040;margin:0}td.svelte-mdsuv2{color:#a0a0a0}tr.global.svelte-mdsuv2 td:where(.svelte-mdsuv2){color:#404040}tr.current.svelte-mdsuv2 td:where(.svelte-mdsuv2){color:#2679b2}tr.selected.svelte-mdsuv2 td:where(.svelte-mdsuv2){color:#d22c2f}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}.app-container.svelte-1cx2u9k{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1cx2u9k{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1cx2u9k{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1cx2u9k>div:where(.svelte-1cx2u9k){background:#e8e8e8;border-radius:.25rem}.app-controls.svelte-1cx2u9k .data-loader-alt:where(.svelte-1cx2u9k) button{margin:0 .25em}.help-text.svelte-1cx2u9k{margin-top:.25rem}.help-text.svelte-1cx2u9k>p:where(.svelte-1cx2u9k),.help-text.svelte-1cx2u9k>div:where(.svelte-1cx2u9k){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k){border-collapse:collapse}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k) td:where(.svelte-1cx2u9k){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k) thead:where(.svelte-1cx2u9k) tr:where(.svelte-1cx2u9k):first-child td:where(.svelte-1cx2u9k){font-weight:700;background:#f8f4e0}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k) td:where(.svelte-1cx2u9k):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1cx2u9k table:where(.svelte-1cx2u9k) td:where(.svelte-1cx2u9k):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1cx2u9k>p:where(.svelte-1cx2u9k):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1cx2u9k>p:where(.svelte-1cx2u9k):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.help-text.svelte-1cx2u9k a:where(.svelte-1cx2u9k):visited,.help-text.svelte-1cx2u9k a:where(.svelte-1cx2u9k){color:#1e6ea7}.app-controls.svelte-1cx2u9k>.downloads-widget:where(.svelte-1cx2u9k){background:#d0d0d0}.downloads-widget.svelte-1cx2u9k>div{background:#f0f0f0}.select-tarset-type button{margin-right:5px}@media (min-width:1300px){.app-container.svelte-1cx2u9k{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1cx2u9k{grid-template-columns:min(320px,30%) 1fr}}
/*$vite$:1*/`,document.head.appendChild(De);var Me=typeof document<"u"?document.currentScript:null;const at=!1;var en=Array.isArray,di=Array.prototype.indexOf,js=Array.from,Is=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,Jo=Object.getOwnPropertyDescriptors,hi=Object.prototype,mi=Array.prototype,Fs=Object.getPrototypeOf,Zo=Object.isExtensible;function tn(t){return typeof t=="function"}const kt=()=>{};function gi(t){return typeof(t==null?void 0:t.then)=="function"}function pi(t){return t()}function Kn(t){for(var e=0;e<t.length;e++)t[e]()}function bi(){var t,e,r=new Promise((s,l)=>{t=s,e=l});return{promise:r,resolve:t,reject:e}}function qs(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const jt=2,Vs=4,Xn=8,rn=16,mr=32,Fr=64,$o=128,Dt=256,Qn=512,xt=1024,Ot=2048,yr=4096,Xt=8192,qr=16384,Jn=32768,nn=65536,el=1<<17,_i=1<<18,Ds=1<<19,Os=1<<20,Bs=1<<21,Ws=1<<22,Vr=1<<23,xr=Symbol("$state"),tl=Symbol("legacy props"),wi=Symbol(""),Ys=new class extends Error{constructor(){super(...arguments);nr(this,"name","StaleReactionError");nr(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function yi(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function rl(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function xi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ki(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ei(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ci(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ai(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Si(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ni(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Mi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function zi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const Zn=1,$n=2,nl=4,Pi=8,Ti=16,Li=1,Ri=2,ji=4,Ii=8,Fi=16,qi=4,sl=1,Vi=2,it=Symbol(),Di="http://www.w3.org/1999/xhtml";let Oi=!1;function ol(t){return t===this.v}function ll(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Bi(t,e){return t!==e}function al(t){return!ll(t,this.v)}let sn=!1,Wi=!1;function Yi(){sn=!0}let Oe=null;function on(t){Oe=t}function Bt(t){return il().get(t)}function Ui(t,e){return il().set(t,e),e}function pe(t,e=!1,r){Oe={p:Oe,c:null,e:null,s:t,x:null,l:sn&&!e?{s:null,u:null,$:[]}:null}}function be(t){var e=Oe,r=e.e;if(r!==null){e.e=null;for(var s of r)kl(s)}return Oe=e.p,{}}function kr(){return!sn||Oe!==null&&Oe.l===null}function il(t){return Oe===null&&rl(),Oe.c??(Oe.c=new Map(Hi(Oe)||void 0))}function Hi(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}const Gi=new WeakMap;function Ki(t){var e=ke;if(e===null)return Ee.f|=Vr,t;if((e.f&Jn)===0){if((e.f&$o)===0)throw!e.parent&&t instanceof Error&&cl(t),t;e.b.error(t)}else Us(t,e)}function Us(t,e){for(;e!==null;){if((e.f&$o)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t instanceof Error&&cl(t),t}function cl(t){const e=Gi.get(t);e&&(Is(t,"message",{value:e.message}),Is(t,"stack",{value:e.stack}))}let kn=[],Hs=[];function ul(){var t=kn;kn=[],Kn(t)}function Xi(){var t=Hs;Hs=[],Kn(t)}function En(t){kn.length===0&&queueMicrotask(ul),kn.push(t)}function Qi(){kn.length>0&&ul(),Hs.length>0&&Xi()}function Ji(){for(var t=ke.b;t!==null&&!t.has_pending_snippet();)t=t.parent;return t===null&&yi(),t}function Cn(t){var e=jt|Ot,r=Ee!==null&&(Ee.f&jt)!==0?Ee:null;return ke===null||r!==null&&(r.f&Dt)!==0?e|=Dt:ke.f|=Ds,{ctx:Oe,deps:null,effects:null,equals:ol,f:e,fn:t,reactions:null,rv:0,v:it,wv:0,parent:r??ke,ac:null}}function Zi(t,e){let r=ke;r===null&&xi();var s=r.b,l=void 0,a=Wr(it),c=null,u=!Ee;return uc(()=>{try{var f=t()}catch(m){f=Promise.reject(m)}var v=()=>f;l=(c==null?void 0:c.then(v,v))??Promise.resolve(f),c=l;var d=Pe,h=s.pending;u&&(s.update_pending_count(1),h||d.increment());const g=(m,p=void 0)=>{c=null,h||d.activate(),p?p!==Ys&&(a.f|=Vr,Cr(a,p)):((a.f&Vr)!==0&&(a.f^=Vr),Cr(a,m)),u&&(s.update_pending_count(-1),h||d.decrement()),dl()};if(l.then(g,m=>g(null,m||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(f=>{function v(d){function h(){d===l?f(a):v(l)}d.then(h,h)}v(l)})}function R(t){const e=Cn(t);return Ll(e),e}function Gs(t){const e=Cn(t);return e.equals=al,e}function fl(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)lr(e[r])}}function $i(t){for(var e=t.parent;e!==null;){if((e.f&jt)===0)return e;e=e.parent}return null}function Ks(t){var e,r=ke;ir($i(t));try{fl(t),e=ql(t)}finally{ir(r)}return e}function vl(t){var e=Ks(t);if(t.equals(e)||(t.v=e,t.wv=Il()),!Ur)if(Er!==null)Er.set(t,t.v);else{var r=(Sr||(t.f&Dt)!==0)&&t.deps!==null?yr:xt;Mt(t,r)}}function ec(t,e,r){const s=kr()?Cn:Gs;if(e.length===0){r(t.map(s));return}var l=Pe,a=ke,c=tc(),u=Ji();Promise.all(e.map(f=>Zi(f))).then(f=>{l==null||l.activate(),c();try{r([...t.map(s),...f])}catch(v){(a.f&qr)===0&&Us(v,a)}l==null||l.deactivate(),dl()}).catch(f=>{u.error(f)})}function tc(){var t=ke,e=Ee,r=Oe;return function(){ir(t),Wt(e),on(r)}}function dl(){ir(null),Wt(null),on(null)}const An=new Set;let Pe=null,es=null,Er=null,hl=new Set,ts=[];function ml(){const t=ts.shift();ts.length>0&&queueMicrotask(ml),t()}let Dr=[],rs=null,Xs=!1,ns=!1;const zs=class zs{constructor(){_t(this,er);nr(this,"current",new Map);_t(this,gn,new Map);_t(this,pn,new Set);_t(this,Pr,0);_t(this,On,null);_t(this,Bn,!1);_t(this,Qr,[]);_t(this,bn,[]);_t(this,Jr,[]);_t(this,Tr,[]);_t(this,_n,[]);_t(this,Wn,[]);_t(this,Yn,[]);nr(this,"skipped_effects",new Set)}process(e){var a;Dr=[],es=null;var r=null;if(An.size>1){r=new Map,Er=new Map;for(const[c,u]of this.current)r.set(c,{v:c.v,wv:c.wv}),c.v=u;for(const c of An)if(c!==this)for(const[u,f]of xe(c,gn))r.has(u)||(r.set(u,{v:u.v,wv:u.wv}),u.v=f)}for(const c of e)Ir(this,er,fi).call(this,c);if(xe(this,Qr).length===0&&xe(this,Pr)===0){Ir(this,er,Qo).call(this);var s=xe(this,Jr),l=xe(this,Tr);Rt(this,Jr,[]),Rt(this,Tr,[]),Rt(this,_n,[]),es=Pe,Pe=null,pl(s),pl(l),Pe===null?Pe=this:An.delete(this),(a=xe(this,On))==null||a.resolve()}else Ir(this,er,Rs).call(this,xe(this,Jr)),Ir(this,er,Rs).call(this,xe(this,Tr)),Ir(this,er,Rs).call(this,xe(this,_n));if(r){for(const[c,{v:u,wv:f}]of r)c.wv<=f&&(c.v=u);Er=null}for(const c of xe(this,Qr))zn(c);for(const c of xe(this,bn))zn(c);Rt(this,Qr,[]),Rt(this,bn,[])}capture(e,r){xe(this,gn).has(e)||xe(this,gn).set(e,r),this.current.set(e,e.v)}activate(){Pe=this}deactivate(){Pe=null,es=null;for(const e of hl)if(hl.delete(e),e(),Pe!==null)break}neuter(){Rt(this,Bn,!0)}flush(){Dr.length>0?gl():Ir(this,er,Qo).call(this),Pe===this&&(xe(this,Pr)===0&&An.delete(this),this.deactivate())}increment(){Rt(this,Pr,xe(this,Pr)+1)}decrement(){if(Rt(this,Pr,xe(this,Pr)-1),xe(this,Pr)===0){for(const e of xe(this,Wn))Mt(e,Ot),Or(e);for(const e of xe(this,Yn))Mt(e,yr),Or(e);Rt(this,Jr,[]),Rt(this,Tr,[]),this.flush()}else this.deactivate()}add_callback(e){xe(this,pn).add(e)}settled(){return(xe(this,On)??Rt(this,On,bi())).promise}static ensure(){if(Pe===null){const e=Pe=new zs;An.add(Pe),ns||zs.enqueue(()=>{Pe===e&&e.flush()})}return Pe}static enqueue(e){ts.length===0&&queueMicrotask(ml),ts.unshift(e)}};gn=new WeakMap,pn=new WeakMap,Pr=new WeakMap,On=new WeakMap,Bn=new WeakMap,Qr=new WeakMap,bn=new WeakMap,Jr=new WeakMap,Tr=new WeakMap,_n=new WeakMap,Wn=new WeakMap,Yn=new WeakMap,er=new WeakSet,fi=function(e){var d;e.f^=xt;for(var r=e.first;r!==null;){var s=r.f,l=(s&(mr|Fr))!==0,a=l&&(s&xt)!==0,c=a||(s&Xt)!==0||this.skipped_effects.has(r);if(!c&&r.fn!==null){if(l)r.f^=xt;else if((s&xt)===0)if((s&Vs)!==0)xe(this,Tr).push(r);else if((s&Ws)!==0){var u=(d=r.b)!=null&&d.pending?xe(this,bn):xe(this,Qr);u.push(r)}else ls(r)&&((r.f&rn)!==0&&xe(this,_n).push(r),zn(r));var f=r.first;if(f!==null){r=f;continue}}var v=r.parent;for(r=r.next;r===null&&v!==null;)r=v.next,v=v.parent}},Rs=function(e){for(const r of e)((r.f&Ot)!==0?xe(this,Wn):xe(this,Yn)).push(r),Mt(r,xt);e.length=0},Qo=function(){if(!xe(this,Bn))for(const e of xe(this,pn))e();xe(this,pn).clear()};let Sn=zs;function rc(t){var e=ns;ns=!0;try{for(var r;;){if(Qi(),Dr.length===0&&(Pe==null||Pe.flush(),Dr.length===0))return rs=null,r;gl()}}finally{ns=e}}function gl(){var t=an;Xs=!0;try{var e=0;for(Pl(!0);Dr.length>0;){var r=Sn.ensure();if(e++>1e3){var s,l;nc()}r.process(Dr),Br.clear()}}finally{Xs=!1,Pl(t),rs=null}}function nc(){try{Ai()}catch(t){Us(t,rs)}}function pl(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var s=t[r++];if((s.f&(qr|Xt))===0&&ls(s)){var l=Pe?Pe.current.size:0;if(zn(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?Nl(s):s.fn=null),Pe!==null&&Pe.current.size>l&&(s.f&Os)!==0)break}}for(;r<e;)Or(t[r++])}}function Or(t){for(var e=rs=t;e.parent!==null;){e=e.parent;var r=e.f;if(Xs&&e===ke&&(r&rn)!==0)return;if((r&(Fr|mr))!==0){if((r&xt)===0)return;e.f^=xt}}Dr.push(e)}const Br=new Map;function Wr(t,e){var r={f:0,v:t,reactions:null,equals:ol,rv:0,wv:0};return r}function ue(t,e){const r=Wr(t);return Ll(r),r}function Qs(t,e=!1,r=!0){var l;const s=Wr(t);return e||(s.equals=al),sn&&r&&Oe!==null&&Oe.l!==null&&((l=Oe.l).s??(l.s=[])).push(s),s}function $(t,e,r=!1){Ee!==null&&(!ar||(Ee.f&el)!==0)&&kr()&&(Ee.f&(jt|rn|Ws|el))!==0&&!(Et!=null&&Et.includes(t))&&zi();let s=r?rt(e):e;return Cr(t,s)}function Cr(t,e){if(!t.equals(e)){var r=t.v;Ur?Br.set(t,e):Br.set(t,r),t.v=e;var s=Sn.ensure();s.capture(t,r),(t.f&jt)!==0&&((t.f&Ot)!==0&&Ks(t),Mt(t,(t.f&Dt)===0?xt:yr)),t.wv=Il(),bl(t,Ot),kr()&&ke!==null&&(ke.f&xt)!==0&&(ke.f&(mr|Fr))===0&&(Yt===null?vc([t]):Yt.push(t))}return e}function Js(t){$(t,t.v+1)}function bl(t,e){var r=t.reactions;if(r!==null)for(var s=kr(),l=r.length,a=0;a<l;a++){var c=r[a],u=c.f;if(!(!s&&c===ke)){var f=(u&Ot)===0;f&&Mt(c,e),(u&jt)!==0?bl(c,yr):f&&Or(c)}}}function rt(t){if(typeof t!="object"||t===null||xr in t)return t;const e=Fs(t);if(e!==hi&&e!==mi)return t;var r=new Map,s=en(t),l=ue(0),a=Hr,c=u=>{if(Hr===a)return u();var f=Ee,v=Hr;Wt(null),jl(a);var d=u();return Wt(f),jl(v),d};return s&&r.set("length",ue(t.length)),new Proxy(t,{defineProperty(u,f,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Ni();var d=r.get(f);return d===void 0?d=c(()=>{var h=ue(v.value);return r.set(f,h),h}):$(d,v.value,!0),!0},deleteProperty(u,f){var v=r.get(f);if(v===void 0){if(f in u){const d=c(()=>ue(it));r.set(f,d),Js(l)}}else $(v,it),Js(l);return!0},get(u,f,v){var m;if(f===xr)return t;var d=r.get(f),h=f in u;if(d===void 0&&(!h||(m=wr(u,f))!=null&&m.writable)&&(d=c(()=>{var p=rt(h?u[f]:it),b=ue(p);return b}),r.set(f,d)),d!==void 0){var g=o(d);return g===it?void 0:g}return Reflect.get(u,f,v)},getOwnPropertyDescriptor(u,f){var v=Reflect.getOwnPropertyDescriptor(u,f);if(v&&"value"in v){var d=r.get(f);d&&(v.value=o(d))}else if(v===void 0){var h=r.get(f),g=h==null?void 0:h.v;if(h!==void 0&&g!==it)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return v},has(u,f){var g;if(f===xr)return!0;var v=r.get(f),d=v!==void 0&&v.v!==it||Reflect.has(u,f);if(v!==void 0||ke!==null&&(!d||(g=wr(u,f))!=null&&g.writable)){v===void 0&&(v=c(()=>{var m=d?rt(u[f]):it,p=ue(m);return p}),r.set(f,v));var h=o(v);if(h===it)return!1}return d},set(u,f,v,d){var k;var h=r.get(f),g=f in u;if(s&&f==="length")for(var m=v;m<h.v;m+=1){var p=r.get(m+"");p!==void 0?$(p,it):m in u&&(p=c(()=>ue(it)),r.set(m+"",p))}if(h===void 0)(!g||(k=wr(u,f))!=null&&k.writable)&&(h=c(()=>ue(void 0)),$(h,rt(v)),r.set(f,h));else{g=h.v!==it;var b=c(()=>rt(v));$(h,b)}var _=Reflect.getOwnPropertyDescriptor(u,f);if(_!=null&&_.set&&_.set.call(d,v),!g){if(s&&typeof f=="string"){var w=r.get("length"),C=Number(f);Number.isInteger(C)&&C>=w.v&&$(w,C+1)}Js(l)}return!0},ownKeys(u){o(l);var f=Reflect.ownKeys(u).filter(h=>{var g=r.get(h);return g===void 0||g.v!==it});for(var[v,d]of r)d.v!==it&&!(v in u)&&f.push(v);return f},setPrototypeOf(){Mi()}})}var Zs,_l,wl,yl;function sc(){if(Zs===void 0){Zs=window,_l=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;wl=wr(e,"firstChild").get,yl=wr(e,"nextSibling").get,Zo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Zo(r)&&(r.__t=void 0)}}function Yr(t=""){return document.createTextNode(t)}function It(t){return wl.call(t)}function ss(t){return yl.call(t)}function B(t,e){return It(t)}function J(t,e){{var r=It(t);return r instanceof Comment&&r.data===""?ss(r):r}}function j(t,e=1,r=!1){let s=t;for(;e--;)s=ss(s);return s}function oc(t){t.textContent=""}function os(){return!1}function xl(t){ke===null&&Ee===null&&Ci(),Ee!==null&&(Ee.f&Dt)!==0&&ke===null&&Ei(),Ur&&ki()}function lc(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function sr(t,e,r,s=!0){var l=ke;l!==null&&(l.f&Xt)!==0&&(t|=Xt);var a={ctx:Oe,deps:null,nodes_start:null,nodes_end:null,f:t|Ot,first:null,fn:e,last:null,next:null,parent:l,b:l&&l.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{zn(a),a.f|=Jn}catch(f){throw lr(a),f}else e!==null&&Or(a);var c=r&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&Ds)===0;if(!c&&s&&(l!==null&&lc(a,l),Ee!==null&&(Ee.f&jt)!==0&&(t&Fr)===0)){var u=Ee;(u.effects??(u.effects=[])).push(a)}return a}function ac(t){const e=sr(Xn,null,!1);return Mt(e,xt),e.teardown=t,e}function we(t){xl();var e=ke.f,r=!Ee&&(e&mr)!==0&&(e&Jn)===0;if(r){var s=Oe;(s.e??(s.e=[])).push(t)}else return kl(t)}function kl(t){return sr(Vs|Os,t,!1)}function ic(t){return xl(),sr(Xn|Os,t,!0)}function cc(t){Sn.ensure();const e=sr(Fr,t,!0);return(r={})=>new Promise(s=>{r.outro?Ar(e,()=>{lr(e),s(void 0)}):(lr(e),s(void 0))})}function $s(t){return sr(Vs,t,!1)}function uc(t){return sr(Ws|Ds,t,!0)}function El(t,e=0){return sr(Xn|e,t,!0)}function oe(t,e=[],r=[]){ec(e,r,s=>{sr(Xn,()=>t(...s.map(o)),!0)})}function ln(t,e=0){var r=sr(rn|e,t,!0);return r}function or(t,e=!0){return sr(mr,t,!0,e)}function Cl(t){var e=t.teardown;if(e!==null){const r=Ur,s=Ee;Tl(!0),Wt(null);try{e.call(null)}finally{Tl(r),Wt(s)}}}function Al(t,e=!1){var l;var r=t.first;for(t.first=t.last=null;r!==null;){(l=r.ac)==null||l.abort(Ys);var s=r.next;(r.f&Fr)!==0?r.parent=null:lr(r,e),r=s}}function fc(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&mr)===0&&lr(e),e=r}}function lr(t,e=!0){var r=!1;(e||(t.f&_i)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Sl(t.nodes_start,t.nodes_end),r=!0),Al(t,e&&!r),as(t,0),Mt(t,qr);var s=t.transitions;if(s!==null)for(const a of s)a.stop();Cl(t);var l=t.parent;l!==null&&l.first!==null&&Nl(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Sl(t,e){for(;t!==null;){var r=t===e?null:ss(t);t.remove(),t=r}}function Nl(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function Ar(t,e){var r=[];eo(t,r,!0),Ml(r,()=>{lr(t),e&&e()})}function Ml(t,e){var r=t.length;if(r>0){var s=()=>--r||e();for(var l of t)l.out(s)}else e()}function eo(t,e,r){if((t.f&Xt)===0){if(t.f^=Xt,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var s=t.first;s!==null;){var l=s.next,a=(s.f&nn)!==0||(s.f&mr)!==0;eo(s,e,a?r:!1),s=l}}}function Nn(t){zl(t,!0)}function zl(t,e){if((t.f&Xt)!==0){t.f^=Xt,(t.f&xt)===0&&(Mt(t,Ot),Or(t));for(var r=t.first;r!==null;){var s=r.next,l=(r.f&nn)!==0||(r.f&mr)!==0;zl(r,l?e:!1),r=s}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let an=!1;function Pl(t){an=t}let Ur=!1;function Tl(t){Ur=t}let Ee=null,ar=!1;function Wt(t){Ee=t}let ke=null;function ir(t){ke=t}let Et=null;function Ll(t){Ee!==null&&(Et===null?Et=[t]:Et.push(t))}let Ct=null,Ft=0,Yt=null;function vc(t){Yt=t}let Rl=1,Mn=0,Hr=Mn;function jl(t){Hr=t}let Sr=!1;function Il(){return++Rl}function ls(t){var h;var e=t.f;if((e&Ot)!==0)return!0;if((e&yr)!==0){var r=t.deps,s=(e&Dt)!==0;if(r!==null){var l,a,c=(e&Qn)!==0,u=s&&ke!==null&&!Sr,f=r.length;if((c||u)&&(ke===null||(ke.f&qr)===0)){var v=t,d=v.parent;for(l=0;l<f;l++)a=r[l],(c||!((h=a==null?void 0:a.reactions)!=null&&h.includes(v)))&&(a.reactions??(a.reactions=[])).push(v);c&&(v.f^=Qn),u&&d!==null&&(d.f&Dt)===0&&(v.f^=Dt)}for(l=0;l<f;l++)if(a=r[l],ls(a)&&vl(a),a.wv>t.wv)return!0}(!s||ke!==null&&!Sr)&&Mt(t,xt)}return!1}function Fl(t,e,r=!0){var s=t.reactions;if(s!==null&&!(Et!=null&&Et.includes(t)))for(var l=0;l<s.length;l++){var a=s[l];(a.f&jt)!==0?Fl(a,e,!1):e===a&&(r?Mt(a,Ot):(a.f&xt)!==0&&Mt(a,yr),Or(a))}}function ql(t){var p;var e=Ct,r=Ft,s=Yt,l=Ee,a=Sr,c=Et,u=Oe,f=ar,v=Hr,d=t.f;Ct=null,Ft=0,Yt=null,Sr=(d&Dt)!==0&&(ar||!an||Ee===null),Ee=(d&(mr|Fr))===0?t:null,Et=null,on(t.ctx),ar=!1,Hr=++Mn,t.ac!==null&&(t.ac.abort(Ys),t.ac=null);try{t.f|=Bs;var h=(0,t.fn)(),g=t.deps;if(Ct!==null){var m;if(as(t,Ft),g!==null&&Ft>0)for(g.length=Ft+Ct.length,m=0;m<Ct.length;m++)g[Ft+m]=Ct[m];else t.deps=g=Ct;if(!Sr||(d&jt)!==0&&t.reactions!==null)for(m=Ft;m<g.length;m++)((p=g[m]).reactions??(p.reactions=[])).push(t)}else g!==null&&Ft<g.length&&(as(t,Ft),g.length=Ft);if(kr()&&Yt!==null&&!ar&&g!==null&&(t.f&(jt|yr|Ot))===0)for(m=0;m<Yt.length;m++)Fl(Yt[m],t);return l!==null&&l!==t&&(Mn++,Yt!==null&&(s===null?s=Yt:s.push(...Yt))),(t.f&Vr)!==0&&(t.f^=Vr),h}catch(b){return Ki(b)}finally{t.f^=Bs,Ct=e,Ft=r,Yt=s,Ee=l,Sr=a,Et=c,on(u),ar=f,Hr=v}}function dc(t,e){let r=e.reactions;if(r!==null){var s=di.call(r,t);if(s!==-1){var l=r.length-1;l===0?r=e.reactions=null:(r[s]=r[l],r.pop())}}r===null&&(e.f&jt)!==0&&(Ct===null||!Ct.includes(e))&&(Mt(e,yr),(e.f&(Dt|Qn))===0&&(e.f^=Qn),fl(e),as(e,0))}function as(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)dc(t,r[s])}function zn(t){var e=t.f;if((e&qr)===0){Mt(t,xt);var r=ke,s=an;ke=t,an=!0;try{(e&rn)!==0?fc(t):Al(t),Cl(t);var l=ql(t);t.teardown=typeof l=="function"?l:null,t.wv=Rl;var a;at&&Wi&&(t.f&Ot)!==0&&t.deps}finally{an=s,ke=r}}}function o(t){var e=t.f,r=(e&jt)!==0;if(Ee!==null&&!ar){var s=ke!==null&&(ke.f&qr)!==0;if(!s&&!(Et!=null&&Et.includes(t))){var l=Ee.deps;if((Ee.f&Bs)!==0)t.rv<Mn&&(t.rv=Mn,Ct===null&&l!==null&&l[Ft]===t?Ft++:Ct===null?Ct=[t]:(!Sr||!Ct.includes(t))&&Ct.push(t));else{(Ee.deps??(Ee.deps=[])).push(t);var a=t.reactions;a===null?t.reactions=[Ee]:a.includes(Ee)||a.push(Ee)}}}else if(r&&t.deps===null&&t.effects===null){var c=t,u=c.parent;u!==null&&(u.f&Dt)===0&&(c.f^=Dt)}if(Ur){if(Br.has(t))return Br.get(t);if(r){c=t;var f=c.v;return((c.f&xt)===0&&c.reactions!==null||Vl(c))&&(f=Ks(c)),Br.set(c,f),f}}else if(r){if(c=t,Er!=null&&Er.has(c))return Er.get(c);ls(c)&&vl(c)}if((t.f&Vr)!==0)throw t.v;return t.v}function Vl(t){if(t.v===it)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Br.has(e)||(e.f&jt)!==0&&Vl(e))return!0;return!1}function gr(t){var e=ar;try{return ar=!0,t()}finally{ar=e}}const hc=-7169;function Mt(t,e){t.f=t.f&hc|e}function mc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(xr in t)to(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&xr in r&&to(r)}}}function to(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{to(t[s],e)}catch{}const r=Fs(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=Jo(r);for(let l in s){const a=s[l].get;if(a)try{a.call(t)}catch{}}}}}const gc=["touchstart","touchmove"];function pc(t){return gc.includes(t)}let Dl=!1;function bc(){Dl||(Dl=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function is(t){var e=Ee,r=ke;Wt(null),ir(null);try{return t()}finally{Wt(e),ir(r)}}function _c(t,e,r,s=r){t.addEventListener(e,()=>is(r));const l=t.__on_r;l?t.__on_r=()=>{l(),s(!0)}:t.__on_r=()=>s(!0),bc()}const Ol=new Set,ro=new Set;function wc(t,e,r,s={}){function l(a){if(s.capture||Pn.call(e,a),!a.cancelBubble)return is(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?En(()=>{e.addEventListener(t,l,s)}):e.addEventListener(t,l,s),l}function cs(t,e,r,s,l){var a={capture:s,passive:l},c=wc(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ac(()=>{e.removeEventListener(t,c,a)})}function ct(t){for(var e=0;e<t.length;e++)Ol.add(t[e]);for(var r of ro)r(t)}function Pn(t){var C;var e=this,r=e.ownerDocument,s=t.type,l=((C=t.composedPath)==null?void 0:C.call(t))||[],a=l[0]||t.target,c=0,u=t.__root;if(u){var f=l.indexOf(u);if(f!==-1&&(e===document||e===window)){t.__root=e;return}var v=l.indexOf(e);if(v===-1)return;f<=v&&(c=f)}if(a=l[c]||t.target,a!==e){Is(t,"currentTarget",{configurable:!0,get(){return a||r}});var d=Ee,h=ke;Wt(null),ir(null);try{for(var g,m=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var b=a["__"+s];if(b!=null&&(!a.disabled||t.target===a))if(en(b)){var[_,...w]=b;_.apply(a,[t,...w])}else b.call(a,t)}catch(k){g?m.push(k):g=k}if(t.cancelBubble||p===e||p===null)break;a=p}if(g){for(let k of m)queueMicrotask(()=>{throw k});throw g}}finally{t.__root=e,delete t.currentTarget,Wt(d),ir(h)}}}function no(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function cn(t,e){var r=ke;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function K(t,e){var r=(e&sl)!==0,s=(e&Vi)!==0,l,a=!t.startsWith("<!>");return()=>{l===void 0&&(l=no(a?t:"<!>"+t),r||(l=It(l)));var c=s||_l?document.importNode(l,!0):l.cloneNode(!0);if(r){var u=It(c),f=c.lastChild;cn(u,f)}else cn(c,c);return c}}function yc(t,e,r="svg"){var s=!t.startsWith("<!>"),l=(e&sl)!==0,a=`<${r}>${s?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var u=no(a),f=It(u);if(l)for(c=document.createDocumentFragment();It(f);)c.appendChild(It(f));else c=It(f)}var v=c.cloneNode(!0);if(l){var d=It(v),h=v.lastChild;cn(d,h)}else cn(v,v);return v}}function _e(t,e){return yc(t,e,"svg")}function ce(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Yr();return t.append(e,r),cn(e,r),t}function P(t,e){t!==null&&t.before(e)}let so=!0;function ae(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function xc(t,e){return kc(t,e)}const un=new Map;function kc(t,{target:e,anchor:r,props:s={},events:l,context:a,intro:c=!0}){sc();var u=new Set,f=h=>{for(var g=0;g<h.length;g++){var m=h[g];if(!u.has(m)){u.add(m);var p=pc(m);e.addEventListener(m,Pn,{passive:p});var b=un.get(m);b===void 0?(document.addEventListener(m,Pn,{passive:p}),un.set(m,1)):un.set(m,b+1)}}};f(js(Ol)),ro.add(f);var v=void 0,d=cc(()=>{var h=r??e.appendChild(Yr());return or(()=>{if(a){pe({});var g=Oe;g.c=a}l&&(s.$$events=l),so=c,v=t(h,s)||{},so=!0,a&&be()}),()=>{var p;for(var g of u){e.removeEventListener(g,Pn);var m=un.get(g);--m===0?(document.removeEventListener(g,Pn),un.delete(g)):un.set(g,m)}ro.delete(f),h!==r&&((p=h.parentNode)==null||p.removeChild(h))}});return Ec.set(v,d),v}let Ec=new WeakMap;const oo=0,us=1,lo=2;function ao(t,e,r,s,l){var a=t,c=kr(),u=Oe,f=it,v,d,h,g=c?Wr(void 0):Qs(void 0,!1,!1),m=c?Wr(void 0):Qs(void 0,!1,!1),p=!1;function b(w,C){p=!0,C&&(ir(_),Wt(_),on(u));try{w===oo&&r&&(v?Nn(v):v=or(()=>r(a))),w===lo&&l&&(h?Nn(h):h=or(()=>l(a,m))),w!==oo&&v&&Ar(v,()=>v=null),w!==us&&d&&Ar(d,()=>d=null),w!==lo&&h&&Ar(h,()=>h=null)}finally{C&&(on(null),Wt(null),ir(null),rc())}}var _=ln(()=>{if(f!==(f=e())){if(gi(f)){var w=f;p=!1,w.then(C=>{w===f&&(Cr(g,C),b(us,!0))},C=>{if(w===f&&(Cr(m,C),b(lo,!0),!l))throw m.v}),En(()=>{p||b(oo,!0)})}else Cr(g,f),b(us,!1);return()=>f=it}})}function Y(t,e,r=!1){var s=t,l=null,a=null,c=it,u=r?nn:0,f=!1;const v=(m,p=!0)=>{f=!0,g(p,m)};var d=null;function h(){d!==null&&(d.lastChild.remove(),s.before(d),d=null);var m=c?l:a,p=c?a:l;m&&Nn(m),p&&Ar(p,()=>{c?a=null:l=null})}const g=(m,p)=>{if(c!==(c=m)){var b=os(),_=s;if(b&&(d=document.createDocumentFragment(),d.append(_=Yr())),c?l??(l=p&&or(()=>p(_))):a??(a=p&&or(()=>p(_))),b){var w=Pe,C=c?l:a,k=c?a:l;C&&w.skipped_effects.delete(C),k&&w.skipped_effects.add(k),w.add_callback(h)}else h()}};ln(()=>{f=!1,e(v),f||g(null,null)},u)}function io(t,e,r){var s=t,l=it,a,c,u=null,f=kr()?Bi:ll;function v(){a&&Ar(a),u!==null&&(u.lastChild.remove(),s.before(u),u=null),a=c}ln(()=>{if(f(l,l=e())){var d=s,h=os();h&&(u=document.createDocumentFragment(),u.append(d=Yr())),c=or(()=>r(d)),h?Pe.add_callback(v):v()}})}function et(t,e){return e}function Cc(t,e,r){for(var s=t.items,l=[],a=e.length,c=0;c<a;c++)eo(e[c].e,l,!0);var u=a>0&&l.length===0&&r!==null;if(u){var f=r.parentNode;oc(f),f.append(r),s.clear(),cr(t,e[0].prev,e[a-1].next)}Ml(l,()=>{for(var v=0;v<a;v++){var d=e[v];u||(s.delete(d.k),cr(t,d.prev,d.next)),lr(d.e,!u)}})}function Je(t,e,r,s,l,a=null){var c=t,u={flags:e,items:new Map,first:null},f=(e&nl)!==0;if(f){var v=t;c=v.appendChild(Yr())}var d=null,h=!1,g=new Map,m=Gs(()=>{var w=r();return en(w)?w:w==null?[]:js(w)}),p,b;function _(){Ac(b,p,u,g,c,l,e,s,r),a!==null&&(p.length===0?d?Nn(d):d=or(()=>a(c)):d!==null&&Ar(d,()=>{d=null}))}ln(()=>{b??(b=ke),p=o(m);var w=p.length;if(!(h&&w===0)){h=w===0;var C,k,y,E;if(os()){var z=new Set,A=Pe;for(k=0;k<w;k+=1){y=p[k],E=s(y,k);var S=u.items.get(E)??g.get(E);S?(e&(Zn|$n))!==0&&Bl(S,y,k,e):(C=Wl(null,u,null,null,y,E,k,l,e,r,!0),g.set(E,C)),z.add(E)}for(const[M,T]of u.items)z.has(M)||A.skipped_effects.add(T.e);A.add_callback(_)}else _();o(m)}})}function Ac(t,e,r,s,l,a,c,u,f){var U,te,se,re;var v=(c&Pi)!==0,d=(c&(Zn|$n))!==0,h=e.length,g=r.items,m=r.first,p=m,b,_=null,w,C=[],k=[],y,E,z,A;if(v)for(A=0;A<h;A+=1)y=e[A],E=u(y,A),z=g.get(E),z!==void 0&&((U=z.a)==null||U.measure(),(w??(w=new Set)).add(z));for(A=0;A<h;A+=1){if(y=e[A],E=u(y,A),z=g.get(E),z===void 0){var S=s.get(E);if(S!==void 0){s.delete(E),g.set(E,S);var M=_?_.next:p;cr(r,_,S),cr(r,S,M),co(S,M,l),_=S}else{var T=p?p.e.nodes_start:l;_=Wl(T,r,_,_===null?r.first:_.next,y,E,A,a,c,f)}g.set(E,_),C=[],k=[],p=_.next;continue}if(d&&Bl(z,y,A,c),(z.e.f&Xt)!==0&&(Nn(z.e),v&&((te=z.a)==null||te.unfix(),(w??(w=new Set)).delete(z))),z!==p){if(b!==void 0&&b.has(z)){if(C.length<k.length){var L=k[0],F;_=L.prev;var O=C[0],q=C[C.length-1];for(F=0;F<C.length;F+=1)co(C[F],L,l);for(F=0;F<k.length;F+=1)b.delete(k[F]);cr(r,O.prev,q.next),cr(r,_,O),cr(r,q,L),p=L,_=q,A-=1,C=[],k=[]}else b.delete(z),co(z,p,l),cr(r,z.prev,z.next),cr(r,z,_===null?r.first:_.next),cr(r,_,z),_=z;continue}for(C=[],k=[];p!==null&&p.k!==E;)(p.e.f&Xt)===0&&(b??(b=new Set)).add(p),k.push(p),p=p.next;if(p===null)continue;z=p}C.push(z),_=z,p=z.next}if(p!==null||b!==void 0){for(var N=b===void 0?[]:js(b);p!==null;)(p.e.f&Xt)===0&&N.push(p),p=p.next;var I=N.length;if(I>0){var W=(c&nl)!==0&&h===0?l:null;if(v){for(A=0;A<I;A+=1)(se=N[A].a)==null||se.measure();for(A=0;A<I;A+=1)(re=N[A].a)==null||re.fix()}Cc(r,N,W)}}v&&En(()=>{var ee;if(w!==void 0)for(z of w)(ee=z.a)==null||ee.apply()}),t.first=r.first&&r.first.e,t.last=_&&_.e;for(var G of s.values())lr(G.e);s.clear()}function Bl(t,e,r,s){(s&Zn)!==0&&Cr(t.v,e),(s&$n)!==0?Cr(t.i,r):t.i=r}function Wl(t,e,r,s,l,a,c,u,f,v,d){var h=(f&Zn)!==0,g=(f&Ti)===0,m=h?g?Qs(l,!1,!1):Wr(l):l,p=(f&$n)===0?c:Wr(c),b={i:p,v:m,k:a,a:null,e:null,prev:r,next:s};try{if(t===null){var _=document.createDocumentFragment();_.append(t=Yr())}return b.e=or(()=>u(t,m,p,v),Oi),b.e.prev=r&&r.e,b.e.next=s&&s.e,r===null?d||(e.first=b):(r.next=b,r.e.next=b.e),s!==null&&(s.prev=b,s.e.prev=b.e),b}finally{}}function co(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,l=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==null&&a!==s;){var c=ss(a);l.before(a),a=c}}function cr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function At(t,e,r=!1,s=!1,l=!1){var a=t,c="";oe(()=>{var u=ke;if(c!==(c=e()??"")&&(u.nodes_start!==null&&(Sl(u.nodes_start,u.nodes_end),u.nodes_start=u.nodes_end=null),c!=="")){var f=c+"";r?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var v=no(f);if((r||s)&&(v=It(v)),cn(It(v),v.lastChild),r||s)for(;It(v);)a.before(It(v));else a.before(v)}})}function Nr(t,e,...r){var s=t,l=kt,a;ln(()=>{l!==(l=e())&&(a&&(lr(a),a=null),a=or(()=>l(s,...r)))},nn)}function uo(t,e,r){var s=t,l,a,c=null,u=null;function f(){a&&(Ar(a),a=null),c&&(c.lastChild.remove(),s.before(c),c=null),a=u,u=null}ln(()=>{if(l!==(l=e())){var v=os();if(l){var d=s;v&&(c=document.createDocumentFragment(),c.append(d=Yr())),u=or(()=>r(d,l))}v?Pe.add_callback(f):f()}},nn)}function Yl(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(e=0;e<l;e++)t[e]&&(r=Yl(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function Sc(){for(var t,e,r=0,s="",l=arguments.length;r<l;r++)(t=arguments[r])&&(e=Yl(t))&&(s&&(s+=" "),s+=e);return s}function Nc(t){return typeof t=="object"?Sc(t):t??""}const Ul=[...`
\r\f \v\uFEFF`];function Mc(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var l in r)if(r[l])s=s?s+" "+l:l;else if(s.length)for(var a=l.length,c=0;(c=s.indexOf(l,c))>=0;){var u=c+a;(c===0||Ul.includes(s[c-1]))&&(u===s.length||Ul.includes(s[u]))?s=(c===0?"":s.substring(0,c))+s.substring(u+1):c=u}}return s===""?null:s}function zc(t,e){return t==null?null:String(t)}function pt(t,e,r,s,l,a){var c=t.__className;if(c!==r||c===void 0){var u=Mc(r,s,a);u==null?t.removeAttribute("class"):e?t.className=u:t.setAttribute("class",u),t.__className=r}else if(a&&l!==a)for(var f in a){var v=!!a[f];(l==null||v!==!!l[f])&&t.classList.toggle(f,v)}return a}function Qt(t,e,r,s){var l=t.__style;if(l!==e){var a=zc(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return s}const Pc=Symbol("is custom element"),Tc=Symbol("is html");function V(t,e,r,s){var l=Lc(t);l[e]!==(l[e]=r)&&(e==="loading"&&(t[wi]=r),r==null?t.removeAttribute(e):typeof r!="string"&&Rc(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Lc(t){return t.__attributes??(t.__attributes={[Pc]:t.nodeName.includes("-"),[Tc]:t.namespaceURI===Di})}var Hl=new Map;function Rc(t){var e=Hl.get(t.nodeName);if(e)return e;Hl.set(t.nodeName,e=[]);for(var r,s=t,l=Element.prototype;l!==s;){r=Jo(s);for(var a in r)r[a].set&&e.push(a);s=Fs(s)}return e}const jc=()=>performance.now(),pr={tick:t=>requestAnimationFrame(t),now:()=>jc(),tasks:new Set};function Gl(){const t=pr.now();pr.tasks.forEach(e=>{e.c(t)||(pr.tasks.delete(e),e.f())}),pr.tasks.size!==0&&pr.tick(Gl)}function Ic(t){let e;return pr.tasks.size===0&&pr.tick(Gl),{promise:new Promise(r=>{pr.tasks.add(e={c:t,f:r})}),abort(){pr.tasks.delete(e)}}}function fs(t,e){is(()=>{t.dispatchEvent(new CustomEvent(e))})}function Fc(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Kl(t){const e={},r=t.split(";");for(const s of r){const[l,a]=s.split(":");if(!l||a===void 0)break;const c=Fc(l.trim());e[c]=a.trim()}return e}const qc=t=>t;function Vc(t,e,r,s){var l=(t&qi)!==0,a="both",c,u=e.inert,f=e.style.overflow,v,d;function h(){return is(()=>c??(c=r()(e,(s==null?void 0:s())??{},{direction:a})))}var g={is_global:l,in(){e.inert=u,fs(e,"introstart"),v=fo(e,h(),d,1,()=>{fs(e,"introend"),v==null||v.abort(),v=c=void 0,e.style.overflow=f})},out(_){e.inert=!0,fs(e,"outrostart"),d=fo(e,h(),v,0,()=>{fs(e,"outroend"),_==null||_()})},stop:()=>{v==null||v.abort(),d==null||d.abort()}},m=ke;if((m.transitions??(m.transitions=[])).push(g),so){var p=l;if(!p){for(var b=m.parent;b&&(b.f&nn)!==0;)for(;(b=b.parent)&&(b.f&rn)===0;);p=!b||(b.f&Jn)!==0}p&&$s(()=>{gr(()=>g.in())})}}function fo(t,e,r,s,l){var a=s===1;if(tn(e)){var c,u=!1;return En(()=>{if(!u){var _=e({direction:a?"in":"out"});c=fo(t,_,r,s,l)}}),{abort:()=>{u=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return l(),{abort:kt,deactivate:kt,reset:kt,t:()=>s};const{delay:f=0,css:v,tick:d,easing:h=qc}=e;var g=[];if(a&&r===void 0&&(d&&d(0,1),v)){var m=Kl(v(0,1));g.push(m,m)}var p=()=>1-s,b=t.animate(g,{duration:f,fill:"forwards"});return b.onfinish=()=>{b.cancel();var _=(r==null?void 0:r.t())??1-s;r==null||r.abort();var w=s-_,C=e.duration*Math.abs(w),k=[];if(C>0){var y=!1;if(v)for(var E=Math.ceil(C/16.666666666666668),z=0;z<=E;z+=1){var A=_+w*h(z/E),S=Kl(v(A,1-A));k.push(S),y||(y=S.overflow==="hidden")}y&&(t.style.overflow="hidden"),p=()=>{var M=b.currentTime;return _+w*h(M/C)},d&&Ic(()=>{if(b.playState!=="running")return!1;var M=p();return d(M,1-M),!0})}b=t.animate(k,{duration:C,fill:"forwards"}),b.onfinish=()=>{p=()=>s,d==null||d(s,1-s),l()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=kt)},deactivate:()=>{l=kt},reset:()=>{s===0&&(d==null||d(1,0))},t:()=>p()}}function Xl(t,e,r=e){var s=kr(),l=new WeakSet;_c(t,"input",a=>{var c=a?t.defaultValue:t.value;if(c=vo(t)?ho(c):c,r(c),Pe!==null&&l.add(Pe),s&&c!==(c=e())){var u=t.selectionStart,f=t.selectionEnd;t.value=c??"",f!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(f,t.value.length))}}),gr(e)==null&&t.value&&(r(vo(t)?ho(t.value):t.value),Pe!==null&&l.add(Pe)),El(()=>{var a=e();if(t===document.activeElement){var c=es??Pe;if(l.has(c))return}vo(t)&&a===ho(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function vo(t){var e=t.type;return e==="number"||e==="range"}function ho(t){return t===""?null:+t}const Ts=class Ts{constructor(e){_t(this,Ps);_t(this,Lr,new WeakMap);_t(this,wn);_t(this,Un);Rt(this,Un,e)}observe(e,r){var s=xe(this,Lr).get(e)||new Set;return s.add(r),xe(this,Lr).set(e,s),Ir(this,Ps,vi).call(this).observe(e,xe(this,Un)),()=>{var l=xe(this,Lr).get(e);l.delete(r),l.size===0&&(xe(this,Lr).delete(e),xe(this,wn).unobserve(e))}}};Lr=new WeakMap,wn=new WeakMap,Un=new WeakMap,Ps=new WeakSet,vi=function(){return xe(this,wn)??Rt(this,wn,new ResizeObserver(e=>{for(var r of e){Ts.entries.set(r.target,r);for(var s of xe(this,Lr).get(r.target)||[])s(r)}}))},nr(Ts,"entries",new WeakMap);let mo=Ts;var Dc=new mo({box:"border-box"});function Ql(t,e,r){var s=Dc.observe(t,()=>r(t[e]));$s(()=>(gr(()=>r(t[e])),s))}function Jl(t,e){return t===e||(t==null?void 0:t[xr])===e}function Tn(t={},e,r,s){return $s(()=>{var l,a;return El(()=>{l=a,a=[],gr(()=>{t!==r(...a)&&(e(t,...a),l&&Jl(r(...l),t)&&e(null,...l))})}),()=>{En(()=>{a&&Jl(r(...a),t)&&e(null,...a)})}}),t}function Oc(t=!1){const e=Oe,r=e.l.u;if(!r)return;let s=()=>mc(e.s);if(t){let l=0,a={};const c=Cn(()=>{let u=!1;const f=e.s;for(const v in f)f[v]!==a[v]&&(a[v]=f[v],u=!0);return u&&l++,l});s=()=>o(c)}r.b.length&&ic(()=>{Zl(e,s),Kn(r.b)}),we(()=>{const l=gr(()=>r.m.map(pi));return()=>{for(const a of l)typeof a=="function"&&a()}}),r.a.length&&we(()=>{Zl(e,s),Kn(r.a)})}function Zl(t,e){if(t.l.s)for(const r of t.l.s)o(r);e()}let vs=!1;function Bc(t){var e=vs;try{return vs=!1,[t(),vs]}finally{vs=e}}const Wc={get(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(tn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,r){let s=t.props.length;for(;s--;){let l=t.props[s];tn(l)&&(l=l());const a=wr(l,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(tn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=wr(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(t,e){if(e===xr||e===tl)return!1;for(let r of t.props)if(tn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(tn(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function je(...t){return new Proxy({props:t},Wc)}function H(t,e,r,s){var k;var l=!sn||(r&Ri)!==0,a=(r&Ii)!==0,c=(r&Fi)!==0,u=s,f=!0,v=()=>(f&&(f=!1,u=c?gr(s):s),u),d;if(a){var h=xr in t||tl in t;d=((k=wr(t,e))==null?void 0:k.set)??(h&&e in t?y=>t[e]=y:void 0)}var g,m=!1;a?[g,m]=Bc(()=>t[e]):g=t[e],g===void 0&&s!==void 0&&(g=v(),d&&(l&&Si(),d(g)));var p;if(l?p=()=>{var y=t[e];return y===void 0?v():(f=!0,y)}:p=()=>{var y=t[e];return y!==void 0&&(u=void 0),y===void 0?u:y},l&&(r&ji)===0)return p;if(d){var b=t.$$legacy;return function(y,E){return arguments.length>0?((!l||!E||b||m)&&d(E?p():y),y):p()}}var _=!1,w=((r&Li)!==0?Cn:Gs)(()=>(_=!1,p()));a&&o(w);var C=ke;return function(y,E){if(arguments.length>0){const z=E?o(w):l&&a?rt(y):y;return $(w,z),_=!0,u!==void 0&&(u=z),y}return Ur&&_||(C.f&qr)!==0?w.v:o(w)}}function Yc(t){Oe===null&&rl(),sn&&Oe.l!==null?Uc(Oe).m.push(t):we(()=>{const e=gr(t);if(typeof e=="function")return e})}function Uc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Hc="5";typeof window<"u"&&((ai=window.__svelte??(window.__svelte={})).v??(ai.v=new Set)).add(Hc),Yi();function $l(t){if(Te(t))return $l(t.v);const e=new Le.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new Le(e)}function go(t,e){return Te(t)?go(t.v,e):Math.sqrt(ds(t,e))}function ds(t,e){if(e===void 0&&(e=!1),Te(t))return ds(t.v);const r=fn(t);let s=0;for(let l=0;l<t.length;l++){const a=t[l]-r;s=s+a*a}return s/(e?t.length:t.length-1)}function fn(t){return Te(t)?fn(t.v):ea(t)/t.length}function ea(t){if(Te(t))return ea(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function ta(t){if(Te(t))return ta(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function vn(t){return Te(t)||Zt(t)?t.v[po(t.v)-1]:t[po(t)-1]}function po(t){if(Te(t)||Zt(t))return po(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]<r&&(e=s,r=t[s-1]);return e}function Gr(t){return Te(t)||Zt(t)?t.v[bo(t.v)-1]:t[bo(t)-1]}function bo(t){if(Te(t)||Zt(t))return bo(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]>r&&(e=s,r=t[s-1]);return e}const _o=30,Gc=1e-7,Kc=1e-7,ra=1e-13,na=1e3,Xc=100;function sa(t,e,r,s,l){s===void 0&&(s=na),r===void 0&&(r=ra),l===void 0&&(l=Xc);let a=r,c=s,u=(c-a)/l;for(let f=0;f<l;f++){let v,d;for(let m=0;m<l;m++){v=a+m*u,d=a+(m+1)*u;const p=e(v),b=e(d);if(p<=t&&b>=t)break}const h=(v+d)/2,g=e(h);if(Math.abs(g-t)<Gc||(a=v,c=d,u=(c-a)/l,u/c<Kc))return h}return(a+c)/2}function oa(t,e=0,r=1){let s=Le.zeros(t);for(let l=0;l<t;l++)s.v[l]=e+Math.random()*(r-e);return s}function la(t,e=0,r=1){let s=Le.zeros(t);for(let l=0;l<t;l++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[l]=a*Math.sin(c)*r+e}return s}function hs(t,e=0,r=1){if(Te(t))return t.apply(l=>hs(l,e,r));const s=1/(Math.sqrt(2)*r);return .5*(1+Jc((t-e)*s))}function wo(t,e=0,r=1){if(Te(t))return t.apply(O=>wo(O,e,r));if(e!==0||r!==1)return wo(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const s=.425,l=5,a=.180625,c=1.6,u=3.3871327179,f=5.0434271938*10,v=1.5929113202*100,d=5.910937472*10,h=1.7895169469*10,g=7.8757757664*10,m=6.71875636*10,p=1.4234372777,b=2.75681539,_=1.3067284816,w=1.7023821103*.1,C=7.370016425*.1,k=1.2021132975*.1,y=6.657905115,E=3.081226386,z=4.2868294337*.1,A=1.7337203997*.01,S=2.4197894225*.1,M=1.2258202635*.01,T=t-.5;let L;if(Math.abs(T)<=s)return L=a-T*T,T*(((d*L+v)*L+f)*L+u)/(((m*L+g)*L+h)*L+1);L=T<0?t:1-t,L=Math.sqrt(-Math.log(L));let F;return L<=l?(L=L-c,F=(((w*L+_)*L+b)*L+p)/((k*L+C)*L+1)):(L=L-l,F=((A*L+z)*L+E+y)/((M*L+S)*L+1)),T<0?-F:F}function yo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return yo(st(t),e,r);if(Te(t))return t.apply(s=>yo(s,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return ms(t*e,e)}return e==Number.POSITIVE_INFINITY?1-ms(r/t,r):e*t>r?1-ps(r/(r+e*t),r/2,e/2):ps(e*t/(r+e*t),e/2,r/2)}function aa(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let s=na,l=ra;if(t>.9997&&r===1?(s=1e7,l=6e5,t=.9997):t>.9992&&r===1?(s=1e7,l=6e5):t>.997&&r===1?(s=1e6,l=45e3):t>.992&&r===1?(s=1e5,l=5e3):t>.97&&r===1&&(s=1e4,l=400),Array.isArray(t))return aa(st(t),e,r);const a=u=>yo(u,e,r);function c(u,f,v){return u===0?0:u===1?Inf:f===0?NaN:v===0?NaN:sa(u,a,l,s)}return Te(t)?t.apply(c,e,r):c(t,e,r)}function ms(t,e){if(Array.isArray(t))return ms(st(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function a(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const v=f/e,d=Math.pow(v,1/6)-.5*Math.pow(v,1/3)+1/3*Math.pow(v,1/2);return hs(d,r,l)}function c(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:Qc(f/2,e/2)/Ln(e/2)}const u=e>_o?a:c;return Te(t)?t.apply(u):u(t)}function gs(t,e){if(Array.isArray(t))return gs(st(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function a(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const v=wo(f,r,l),d=Math.pow(Math.sqrt(36*v*v-30*v+13)/4+(3*v-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function c(f){return f===0?0:f===1?Inf:e===0?0:sa(f,d=>ms(d,e),0,_o*10)}const u=e>_o?a:c;return Te(t)?t.apply(u):u(t)}function ps(t,e,r){if(Array.isArray(t))return ps(st(t),e,r);if(Te(t))return t.apply(l=>ps(l,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const s=.5-t+.5;return cu(e,r,t,s)}function Ln(t){if(Te(t))return t.apply(Ln);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+Ln(1-t));t=t-1;let r=.9999999999998099;for(let l=0;l<e.length;l++)r=r+e[l]/(t+l+1);const s=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*r}function Qc(t,e){let l=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/Ln(e+a+1);if(isNaN(c)||c<1e-18)break;l+=c}return Math.pow(t,e)*Ln(e)*Math.exp(-t)*l}function Jc(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,s=-.284496736,l=1.421413741,a=-1.453152027,c=1.061405429,f=1/(1+.3275911*t),v=1-((((c*f+a)*f+l)*f+s)*f+r)*f*Math.exp(-t*t);return e*v}function ia(t,e){const r=.564189583547756,s=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],u=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let v,d,h,g,m=Math.abs(e);if(m<=.5)return d=e*e,g=(((s[0]*d+s[1])*d+s[2])*d+s[3])*d+s[4]+1,h=((l[0]*d+l[1])*d+l[2])*d+1,v=.5-e*(g/h)+.5,v=Math.exp(d)*v,v;if(m<=4)g=((((((a[0]*m+a[1])*m+a[2])*m+a[3])*m+a[4])*m+a[5])*m+a[6])*m+a[7],h=((((((c[0]*m+c[1])*m+c[2])*m+c[3])*m+c[4])*m+c[5])*m+c[6])*m+c[7],v=g/h;else{if(e<=-5.6)return v=2,v=Math.exp(e*e)*2,v;d=1/(e*e),g=(((u[0]*d+u[1])*d+u[2])*d+u[3])*d+u[4],h=(((f[0]*d+f[1])*d+f[2])*d+f[3])*d+1,v=(r-d*g/h)/m}return e<0&&(v=Math.exp(e*e)*2-v),v}function ca(t,e){let r=t+e-2;return r<=.25?Ut(r+1):r<=1.25?Ut(r)+zr(r):Ut(r-1)+Math.log(r*(r+1))}function bs(t,e){const r=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,v,d,h,g,m,p,b,_,w,C,k,y,E,z;return d=Math.min(t,e),h=Math.max(t,e),m=d/h,g=m/(m+1),_=1/(m+1),k=_*_,w=_+k+1,C=_+k*w+1,y=_+k*C+1,E=_+k*y+1,z=_+k*E+1,v=1/h,p=v*v,b=((((u*z*p+c*E)*p+a*y)*p+l*C)*p+s*w)*p+r,b*=g/h,v=1/d,p=v*v,f=(((((u*p+c)*p+a)*p+l)*p+s)*p+r)/d+b,f}function Ze(t){let e,r,s,l,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],u=.273076135303957,f=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],l=(f*r+u)*r+1,s=a/l,e>0?r*s/t:t*(s+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],u=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],l=(((u[4]*r+u[3])*r+u[2])*r+u[1])*r+1,s=a/l,e>0?r/t*(s-.5-.5):t*s}}}function Zc(t,e,r){let s,l,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=l=0,s=0;for(let u=1;u<=r;u++)a=l,l=s,s=c*l-a+e[r-u];return(s-a)*.5}function ua(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,s=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*Zc(t/.375,e,r));if(t<s)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function Mr(t,e){const r=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;let f,v,d,h,g,m,p,b,_,w,C,k,y,E;return t>e?(d=e/t,f=1/(d+1),b=d/(d+1),v=t+(e-.5)):(d=t/e,f=d/(d+1),b=1/(d+1),v=e+(t-.5)),C=b*b,_=b+C+1,w=b+C*_+1,k=b+C*w+1,y=b+C*k+1,E=b+C*y+1,h=1/(e*e),p=((((u*E*h+c*y)*h+a*k)*h+l*w)*h+s*_)*h+r,p*=f/e,g=v*zr(t/e),m=t*(Math.log(e)-1),g>m?p-m-g:p-g-m}function Ut(t){if(t<.6){const p=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*p}else{const e=.422784335098467,r=.848044614534529,s=.565221050691933,l=.156513060486551,a=.017050248402265,c=.000497958207639485,u=1.24313399877507,f=.548042109832463,v=.10155218743983,d=.00713309612391,h=.000116165475989616,g=t-.5-.5,m=(((((c*g+a)*g+l)*g+s)*g+r)*g+e)/(((((h*g+d)*g+v)*g+f)*g+u)*g+1);return g*m}}function Jt(t){const e=.418938533204673,r=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,u=-.00165322962780713;if(t<=.8)return Ut(t)-Math.log(t);if(t<=2.25)return Ut(t-.5-.5);if(t<10){let d=Math.round(t-1.25),h=t,g=1;for(let m=1;m<=d;++m)h+=-1,g*=h;return Ut(h-1)+Math.log(g)}let f=1/(t*t),v=(((((u*f+c)*f+a)*f+l)*f+s)*f+r)/t;return e+v+(t-.5)*(Math.log(t)-1)}function xo(t,e){const r=.918938533204673;let s=Math.min(t,e),l=Math.max(t,e);function a(c,u,f){let v=Math.round(f-1),d=1;for(let h=1;h<=v;++h)f+=-1,d*=f/(u+f);return c+Math.log(d)+(Jt(u)+(Jt(f)-ca(u,f)))}if(s<8){if(s<1)return l<8?Jt(s)+(Jt(l)-Jt(s+l)):Jt(s)+Mr(s,l);let c;if(s<2)return l<=2?Jt(s)+Jt(l)-ca(s,l):l<8?(c=0,a(c,s,l)):Jt(s)+Mr(s,l);if(l<=1e3){let u=Math.round(s-1);c=1;for(let f=1;f<=u;++f){s+=-1;let v=s/l;c*=v/(v+1)}return c=Math.log(c),l>=8?c+Jt(s)+Mr(s,l):a(c,s,l)}else{let u=Math.round(s-1);c=1;for(let f=1;f<=u;++f)s+=-1,c*=s/(s/l+1);return log(c)-u*log(l)+(Jt(s)+Mr(s,l))}}else{let c=bs(s,l),u=s/l,f=-(s-.5)*Math.log(u/(u+1)),v=l*zr(u);return f>v?Math.log(l)*-.5+r+c-v-f:Math.log(l)*-.5+r+c-f-v}}function fa(t){return(t==0?1024:-300)*.69314718055995*.99999}function dn(t){const e=.0566749439387324,r=.0456512608815524,s=.333333333333333,l=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,u=.354508718369557;let f,v,d,h,g;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(f=t+.3,f/=.7,g=e-f*.3):t>.18?(f=t*.75-.25,g=r+f/3):(f=t,g=0),v=f/(f+2),d=v*v,h=((a*d+l)*d+s)/((u*d+c)*d+1),d*2*(1/(1-v)-v*h)+g)}function zr(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,s=-.0178874546012214,l=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let u=t/(t+2),f=u*u,v=(((s*f+r)*f+e)*f+1)/(((c*f+a)*f+l)*f+1);return u*2*v}function $c(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],l=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,v,d,h,g;if(d=Math.abs(t),d<=.5)return f=t*t,g=(((r[0]*f+r[1])*f+r[2])*f+r[3])*f+r[4]+1,h=((s[0]*f+s[1])*f+s[2])*f+1,t*(g/h);if(d<=4){g=((((((l[0]*d+l[1])*d+l[2])*d+l[3])*d+l[4])*d+l[5])*d+l[6])*d+l[7],h=((((((a[0]*d+a[1])*d+a[2])*d+a[3])*d+a[4])*d+a[5])*d+a[6])*d+a[7];let p=.5-Math.exp(-t*t)*g/h+.5;return t<0?-p:p}if(d>=5.8)return t>0?1:-1;v=t*t,f=1/v,g=(((c[0]*f+c[1])*f+c[2])*f+c[3])*f+c[4],h=(((u[0]*f+u[1])*f+u[2])*f+u[3])*f+1,f=(e-g/(v*h))/d;let m=.5-Math.exp(-v)*f+.5;return t<0?-m:m}function eu(t){const e=914041914819518e-24,r=.0238082361044469,s=-.499999999085958,l=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+l)*t+s)*t+1));{let u=Math.exp(t);return t>0?u*(.5-1/u+.5):u-.5-.5}}function Rn(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function tu(t){const e=.785398163397448,r=1.4616321449683622,s=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],l=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let u,f,v,d,h,g,m,p,b,_,w,C,k;if(w=Number.MAX_SAFE_INTEGER,d=.5/(.5*Number.EPSILON),w>d&&(w=d),k=1e-9,p=0,t<.5){if(fabs(t)<=k){if(t==0)return 0;p=-1/t}else{if(h=-t,b=e,h<=0&&(h=-h,b=-b),h>=w)return 0;if(v=Math.round(h),h-=v,v=Math.round(h*4),h=(h-v*.25)*4,f=v/2,f+f!=v&&(h=1-h),g=e*h,u=f/2,u+u!=f&&(b=-b),f=(v+1)/2,u=f/2,u+=u,u==f){if(g==0)return 0;p=b*(cos(g)/sin(g)*4)}else p=b*(sin(g)/cos(g)*4)}t=1-t}if(t<=3){m=t,C=s[0]*t;for(let y=1;y<=5;++y)m=(m+l[y-1])*t,C=(C+s[y])*t;return m=(C+s[6])/(m+l[5]),_=t-r,m*_+p}if(t<w){h=1/(t*t),m=h,C=a[0]*h;for(let y=1;y<=3;++y)m=(m+c[y-1])*h,C=(C+a[y])*h;p=C/(m+c[3])-.5/t+p}return p+log(t)}function ru(t,e,r,s){let l,a,c,u,f,v;if(t>s*.001){if(u=t*Math.log(r),u<Math.exparg(1))return 0;l=Math.exp(u)}else l=1;for(l*=e/t,v=s/t,f=t+1,u=r,c=u/f,f+=1,u=r*u,a=u/f,c+=a;Math.abs(r)>v;)f+=1,u=r*u,a=u/f,c+=a;return l*=t*c+1,l}function nu(t,e,r,s){const l=.577215664901533;let a,c,u,f,v,d,h=e*r;for(v=r-h,c=e*s<=.02?Math.log(r)+tu(e)+l+v:Math.log(h)+l+v,a=s*5*Math.abs(c),u=1,f=0,u+=1,v*=r-h/u,d=v/u,f+=d;Math.abs(d)>a;)u+=1,v*=r-h/u,d=v/u,f+=d;return-t*(c+f)}function ko(t,e,r,s){let l,a,c,u,f,v,d,h,g;if(r==0)return 0;if(d=Math.min(t,e),d>=1)v=t*Math.log(r)-xo(t,e),a=Math.exp(v)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(a=Math.pow(r,t),a==0)return a;g=t+e,g>1?(f=t+e-1,v=(Ze(f)+1)/g):v=Ze(g)+1,c=(Ze(t)+1)*(Ze(e)+1)/v,a*=c*(e/g)}else{if(f=Ut(d),l=Math.round(h-1),l>=1){c=1;for(let w=1;w<=l;++w)h+=-1,c*=h/(d+h);f+=Math.log(c)}v=t*Math.log(r)-f,h+=-1,g=d+h,g>1?(f=d+h-1,u=(Ze(f)+1)/g):u=Ze(g)+1,a=Math.exp(v)*(d/t)*(Ze(h)+1)/u}else f=Ut(d)+Mr(d,h),v=t*Math.log(r)-f,a=d/t*Math.exp(v);if(a==0||t<=s*.1)return a;let m=s/t,p=0,b=0,_;for(c=1,p+=1,c*=(.5-e/p+.5)*r,_=c/(t+p),b+=_;p<1e7&&Math.abs(_)>m;)p+=1,c*=(.5-e/p+.5)*r,_=c/(t+p),b+=_;return t*b>-1?a*=t*b+1:a=0,a}function _s(t,e,r,s,l,a){let c,u,f,v,d,h=t+e,g=t+1;if(l>1&&t>=1&&h>=g*1.1?(f=Math.round(Math.abs(fa(1))),u=Math.round(fa(0)),f>u&&(f=u),v=Math.exp(-f)):(f=0,v=1),c=lu(f,t,e,r,s)/t,l==1||c==0)return c;let m=l-1,p=v;if(u=0,e>1){if(s>1e-4){let b=(e-1)*r/s-t;b>=1&&(u=b<m?Math.round(b):m)}else u=m;for(let b=0;b<u;++b)d=b,v*=(h+d)/(g+d)*r,p+=v}for(let b=u;b<m&&(d=b,v*=(h+d)/(g+d)*r,p+=v,!(v<=a*p));++b);return c*=p,c}function su(t,e,r,s,l,a){let c,u,f,v,d,h,g,m,p,b,_,w,C,k,y,E,z,A,S;if(!Number.isFinite(l)||(S=ou(t,e,r,s),Number.isNaN(S)))return Number.NaN;if(S==0)return 0;for(c=l+1,p=e/t,b=1/t+1,k=s+1,f=0,v=1,h=t+1,w=0,C=1,y=1,E=c/b,d=b/c,f+=1,g=f/t,m=f*(e-f)*r,u=t/h,A=v*(v+p)*u*u*(m*r),u=(g+1)/(b+g+g),z=f+m/h+u*(c+f*k),v=g+1,h+=2,g=A*w+z*y,w=y,y=g,g=A*C+z*E,C=E,E=g,_=d,d=y/E,w/=E,C/=E,y=d,E=1;f<1e4&&(f+=1,g=f/t,m=f*(e-f)*r,u=t/h,A=v*(v+p)*u*u*(m*r),u=(g+1)/(b+g+g),z=f+m/h+u*(c+f*k),v=g+1,h+=2,g=A*w+z*y,w=y,y=g,g=A*C+z*E,C=E,E=g,_=d,d=y/E,!(Math.abs(d-_)<=a*d));)w/=E,C/=E,y=d,E=1;return S*d}function ou(t,e,r,s){const l=.398942280401433;let a,c,u,f,v,d,h,g,m;if(r==0||s==0)return 0;if(h=Math.min(t,e),h<8){let p,b;if(r<=.375?(p=Math.log(r),b=zr(-r)):s>.375?(p=Math.log(r),b=Math.log(s)):(p=zr(-s),b=Math.log(s)),d=t*p+e*b,h>=1)return d-=xo(t,e),Math.exp(d);if(g=Math.max(t,e),g>=8)return f=Ut(h)+Mr(h,g),h*Math.exp(d-f);if(g<=1){let w=Math.exp(d);return w==0?0:(m=t+e,m>1?(f=t+e-1,d=(Ze(f)+1)/m):d=Ze(m)+1,c=(Ze(t)+1)*(Ze(e)+1)/d,w*(h*c)/(h/g+1))}if(f=Ut(h),a=Math.round(g-1),a>=1){c=1;for(let w=1;w<=a;++w)g+=-1,c*=g/(h+g);f=Math.log(c)+f}d-=f,g+=-1,m=h+g;let _;return m>1?(f=h+g-1,_=(Ze(f)+1)/m):_=Ze(m)+1,h*Math.exp(d)*(Ze(g)+1)/_}else{let p,b,_,w;return t<=e?(p=t/e,b=p/(p+1),_=1/(p+1),w=t-(t+e)*r):(p=e/t,b=1/(p+1),_=p/(p+1),w=(t+e)*s-e),u=-w/t,f=Math.abs(u)>.6?u-Math.log(r/b):dn(u),u=w/e,v=Math.abs(u)<=.6?dn(u):u-Math.log(s/_),d=Math.exp(-(t*f+e*v)),l*Math.sqrt(e*b)*d*Math.exp(-bs(t,e))}}function lu(t,e,r,s,l){const a=.398942280401433;let c,u,f,v,d,h,g,m;if(h=Math.min(e,r),h<8){let p,b;if(s<=.375?(p=Math.log(s),b=zr(-s)):l>.375?(p=Math.log(s),b=Math.log(l)):(p=zr(-l),b=Math.log(l)),d=e*p+r*b,h>=1)return d-=xo(e,r),Rn(t,d);if(g=Math.max(e,r),g>=8)return f=Ut(h)+Mr(h,g),h*Rn(t,d-f);if(g<=1){let w=Rn(t,d);return w==0?w:(m=e+r,m>1?(f=e+r-1,d=(Ze(f)+1)/m):d=Ze(m)+1,c=(Ze(e)+1)*(Ze(r)+1)/d,w*(h*c)/(h/g+1))}f=Ut(h);let _=Math.round(g-1);if(_>=1){c=1;for(let w=1;w<=_;++w)g+=-1,c*=g/(h+g);f+=Math.log(c)}return d-=f,g+=-1,m=h+g,u=m>1?(Ze(m-1)+1)/m:Ze(m)+1,h*Rn(t,d)*(Ze(g)+1)/u}else{let p,b,_,w;e>r?(p=r/e,b=1/(p+1),_=p/(p+1),w=(e+r)*l-r):(p=e/r,b=p/(p+1),_=1/(p+1),w=e-(e+r)*s),-ua(r/e);let C=-w/e;return f=Math.abs(C)>.6?C-Math.log(s/b):dn(C),C=w/r,v=Math.abs(C)>.6?C-Math.log(l/_):dn(C),d=Rn(t,-(e*f+r*v)),a*Math.sqrt(r*b)*d*Math.exp(-bs(e,r))}}function Eo(t,e,r,s,l,a){let u=Array(30),f=Array(30),v=e-.5-.5,d=t+v*.5,h=s>.375?Math.log(r):zr(-s),g=-d*h;if(e*g==0)throw new Error("bgrat: expansion can not be computed.");let m=Math.log(e)+ua(Ze(e))+e*Math.log(g)+d*h,p=m-(Mr(e,t)+e*Math.log(d)),b=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let _=b==0,w=l==0?0:Math.exp(Math.log(l)-p),C=au(e,g,m,a),k=.25/(d*d),y=h*.25*h,E=C,z=E,A=1,S=1,M=0;for(let T=1;T<=30;++T){let L=e+M;E=(L*(L+1)*E+(g+L+1)*A)*k,M+=2,A*=y,S/=M*(M+1);let F=T-1;u[F]=S;let O=0;if(T>1){let N=e-T;for(let I=1;I<=F;++I)O+=N*u[I-1]*f[F-I],N+=e}f[F]=v*S+O/T;let q=f[F]*E;if(z+=q,z<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(q)<=a*(z+w))break}return l+=_?Math.exp(p+Math.log(z)):b*z,l}function au(t,e,r,s){const l=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-$c(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return ia(1,a)/a*l}}else if(e<1.1){let a=3,c=e,u=e/(t+3),f=s*.1/(t+1),v;for(a+=1,c*=-(e/a),v=c/(t+a),u+=v;Math.abs(v)>f;)a+=1,c*=-(e/a),v=c/(t+a),u+=v;let d=t*e*((u/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),g=Ze(t),m=g+1;if(e>=.25&&t<e/2.59||h>-.13394){let p=eu(h),b=((p+.5+.5)*d-p)*m-g;return b<=0?0:b*Math.exp(-r)}else return(.5-Math.exp(h)*m*(.5-d+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,u=e,f=e+(1-t),v=1,d,h;a=e*c+v*a,u=e*f+v*u,d=a/u,v+=1;let g=v-t;for(c=a+g*c,f=u+g*f,h=c/f;Math.abs(h-d)>=s*h;)a=e*c+v*a,u=e*f+v*u,d=a/u,v+=1,g=v-t,c=a+g*c,f=u+g*f,h=c/f;return h}}function iu(t,e,r,s){const a=1.12837916709551,c=.353553390593274,u=Array(21),f=Array(21),v=Array(21),d=Array(21);let h=t*dn(-r/t)+e*dn(r/e),g;if(g=Math.exp(-h),g==0)return 0;let m=Math.sqrt(h),p=m/c*.5,b=h+h,_,w,C,k;t<e?(_=t/e,w=1/(_+1),C=(e-t)/e,k=1/Math.sqrt(t*(_+1))):(_=e/t,w=1/(_+1),C=(e-t)/t,k=1/Math.sqrt(e*(_+1))),u[0]=C*.6666666666666666,v[0]=u[0]*-.5,d[0]=-v[0];let y=.5/a*ia(1,m),E=c,z=y+d[0]*k*E,A=1,S=_*_,M=1,T=k,L=p,F=b;for(let q=2;q<=20;q+=2){M*=S,u[q-1]=w*2*(_*M+1)/(q+2);let N=q+1;A+=M,u[N-1]=C*2*A/(q+3);for(let G=q;G<=N;++G){let U=(G+1)*-.5;f[0]=U*u[0];for(let se=2;se<=G;++se){let re=0;for(let ee=1;ee<=se-1;++ee){let X=se-ee;re+=(ee*U-X)*u[ee-1]*f[X-1]}f[se-1]=U*u[se-1]+re/se}v[G-1]=f[G-1]/(G+1);let te=0;for(let se=1;se<=G-1;++se)te+=d[G-se-1]*v[se-1];d[G-1]=-(te+v[G-1])}y=c*L+(q-1)*y,E=c*F+q*E,L=b*L,F=b*F,T*=k;let I=d[q-1]*T*y;T*=k;let W=d[N-1]*T*E;if(z+=I+W,Math.abs(I)+Math.abs(W)<=s*z)break}let O=Math.exp(-bs(t,e));return a*g*O*z}function cu(t,e,r,s){let a=0,c=0;function u(_,w,C,k){const y=ko(_,w,C,1e-15);return k?.5-y+.5:y}function f(_,w,C,k){const y=ko(w,_,C,1e-15);return k?y:.5-y+.5}function v(_,w,C,k,y,E){const z=su(_,w,C,k,y,15000000000000002e-30);return E?.5-z+.5:z}function d(_,w,C,k,y){let E=Math.round(w);w=w-E,w===0&&(E=E-1,w=1);let z=_s(w,_,k,C,E,1e-15);return C<=.7?(z=z+ko(_,w,C,1e-15),y?.5-z+.5:z):(_<=15&&(E=20,z=z+_s(_,w,C,k,E,1e-15),_=_+E),z=Eo(_,w,C,k,z,15*1e-15),y?.5-z+.5:z)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,g,m,p,b;if(t<=1||e<=1){if(r>.5?(b=!0,h=e,m=s,g=t,p=r):(b=!1,h=t,m=r,g=e,p=s),g<Math.min(1e-15,1e-15*h))return a=ru(h,g,m,1e-15),b?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*g)&&g*m<=1)return c=nu(h,g,m,1e-15),b?c:.5-c+.5;if(Math.max(h,g)>1){if(g<=1)return u(h,g,m,b);if(m>=.29)return f(h,g,p,b);if(m<.1&&Math.pow(m*g,h)<=.7)return u(h,g,m,b)}else{if(h>=Math.min(.2,g)||Math.pow(m,h)<=.9)return u(h,g,m,b);if(m>=.3)return f(h,g,p,b)}let _=!1;return Math.max(h,g)>1&&g>15?c=0:(_=!0,c=_s(g,h,p,m,20,1e-15),g+=20),c=Eo(g,h,p,m,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(_?c=_s(g-n,h,p,m,n,1e-15):c=Number.NEGATIVE_INFINITY,c=Eo(g,h,p,m,c,15*1e-15),a=-expm1(c),b?.5-a+.5:a):(a=.5-c+.5,b?.5-a+.5:a)}else{let _=Number.isFinite(t+e)?t>e?(t+e)*s-e:t-(t+e)*r:t*s-e*r;const w=_<0;let C,k,y,E;if(w?(_=-_,C=e,y=s,k=t,E=r):(C=t,y=r,k=e,E=s),k<40)return k*y<=.7?u(C,k,y,w):d(C,k,y,E,w);if(C>k){if(k<=100||_>k*.03)return v(C,k,y,E,_,w)}else{if(C<=100)return v(C,k,y,E,_,w);if(_>C*.03)return v(C,k,y,E,_,w)}return a=iu(C,k,_,1e-15*100),w?.5-a+.5:a}}function va(t){const e=t.nrows,r=t.ncols;if(e<r){const c=va(t.subset([],zt.seq(1,e)));return{Q:c.Q,R:fu(c.Q,t)}}let s=nt.eye(e),l=t.t();for(let c=1;c<=r;c++)for(let u=e;u>=c+1;u--){const f=l.v.subarray((u-2)*r,u*r),v=s.v.subarray((u-2)*e,u*e),d=f.slice(),h=v.slice(),[g,m,p]=uu(d[c-1],d[c-1+r]);for(let b=0;b<r;b++)f[b]=d[b]*g+d[b+r]*m,f[b+r]=d[b]*-m+d[b+r]*g,v[b]=h[b]*g+h[b+e]*m,v[b+e]=h[b]*-m+h[b+e]*g;for(let b=r;b<e;b++)v[b]=h[b]*g+h[b+e]*m,v[b+e]=h[b]*-m+h[b+e]*g}const a=zt.seq(1,r);return{Q:e===r?s:s.subset([],a),R:e===r?l.t():l.subset([],a).t()}}function uu(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),u=1/c;return[u,a*u,t*c]}const r=t/e,s=Math.sqrt(1+r*r),l=1/s;return[r*l,l,e*s]}function da(t){return typeof t=="number"}function fu(t,e){if(e===void 0&&(e=t),!br(t)||!br(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,s=t.ncols,l=e.nrows,a=e.ncols,c=s,u=a,f=r,v=new Float64Array(c*u);for(let d=0;d<u;d++){const h=e.v.subarray(d*l,(d+1)*l),g=v.subarray(d*c,(d+1)*c);for(let m=0;m<c;m++){const p=t.v.subarray(m*r,(m+1)*r);let b=0;for(let _=0;_<f;_++)b+=p[_]*h[_];g[m]=b}}return new nt(v,c,u)}function ha(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Le(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new nt(t.v,e,r)}function br(t){return t&&t.constructor===nt}function vu(t,e,r){return new nt(new Float64Array(t),e,r)}const ye=class ye{constructor(e,r,s){if(!ArrayBuffer.isView(e)||e.constructor!==ye.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return ye.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const s=ye.eye(e),l=ye.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],u=e-1;for(let f=0;f<e;f++)l.v[u*e+f]=s.v[u*e+f]/c;for(let f=e-2;f>=0;f--){let v=s.getcolumn(f+1);const d=a.getcolref(f+1);for(let h=f+1;h<e;h++){const g=l.getcolumn(h+1);v=v.subtract(g.mult(d[h]))}l.v.set(v.divide(d[f]).v,f*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(ta(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=ye.eye(e),a=ye.eye(e),c=this.t(),u=0,f=c.v[0];for(let v=0;v<e;v++)a.v[u*e+v]=l.v[u*e+v]/f;for(let v=1;v<e;v++){let d=l.getcolumn(v+1);const h=c.getcolref(v+1);for(let g=0;g<v;g++){const m=a.getcolumn(g+1);d=d.subtract(m.mult(h[g]))}a.v.set(d.divide(h[v]).v,v*e)}return a.t()}const r=va(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>ye.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>ye.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let s=0;s<e;s++)r[s]=this.getcolref(s+1)[s];return new Le(r)}t(){const e=this.nrows,r=this.ncols,s=new ye.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const a=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*r+l]=a[c]}return new ye(s,r,e)}for(let l=0;l<this.nrows;l++){const a=s.subarray(l*r,(l+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+l]}return new ye(s,r,e)}dot(e){if(Te(e))return new ye(So(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(br(e))return new ye(So(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,s){if(br(e))return new ye(Co(this.v,e.v,r),this.nrows,this.ncols);if(da(e))return new ye(Ao(this.v,e,r),this.nrows,this.ncols);if(!Te(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new ye.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Ao(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new ye(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new ye.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Co(this.getcolref(a+1),e.v,r),a*this.nrows);return new ye(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e,r){if(r===void 0&&(r=2),r==2){const s=this.ncols,l=new ye.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.getcolref(a+1));return new Le(l)}if(r==1)return this.t().apply(e,2);if(r==0){const s=this.v.length,l=new ye.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.v[a]);return new ye(l,this.nrows,this.ncols)}}replace(e,r,s){typeof r=="number"&&(r=[r]),r.length===0&&(r=zt.seq(1,this.nrows)),Zt(r)||(r=$t(r)),typeof s=="number"&&(s=[s]),s.length===0&&(s=zt.seq(1,this.ncols)),Zt(s)||(s=$t(s));const l=r.length,a=s.length;if(vn(r)<1||Gr(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(vn(s)<1||Gr(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const u=e.getcolref(c+1),f=(s.v[c]-1)*this.nrows;for(let v=0;v<r.length;v++){const d=r.v[v];this.v[f+d-1]=u[v]}}return this}copy(){return new ye(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Le.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)r[s]=this.getcolref(s+1)[e-1];return new Le(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Le(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=$t([e])),typeof r=="number"&&(r=$t([r])),Array.isArray(e)&&(e=e.length===0?null:$t(e)),Array.isArray(r)&&(r=r.length===0?null:$t(r)),e!==null&&!Zt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!Zt(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(vn(e)<1||Gr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(vn(r)<1||Gr(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const u=r.length,f=this.nrows,v=new ye.valuesConstructor(f*u);for(let d=0;d<r.length;d++)v.set(this.v.slice((r.v[d]-1)*this.nrows,r.v[d]*this.nrows),d*this.nrows);return new ye(v,f,u)}if(r==null)return this.t().subset(r,e).t();const s=e.length,l=r.length,a=new ye.valuesConstructor(s*l);let c=new ye.valuesConstructor(s);for(let u=0;u<l;u++){const f=this.v.subarray((r.v[u]-1)*this.nrows,r.v[u]*this.nrows);for(let v=0;v<s;v++)c[v]=f[e.v[v]-1];a.set(c,u*s)}return new ye(a,s,l)}toString(e){function r(c,u){return" ".repeat(u-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Gr(this.v))))+e+3;let l="";const a=this.t();for(let c=1;c<=a.ncols;c++)l+=Array.from(a.getcolref(c)).map(u=>r(u.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,r,s,l){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=l!=null&&l.length>0,c=s!=null&&s.length>0;if(a&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const u=this.t();let f=c?s.join(e)+`
`:"";for(let v=1;v<=u.ncols;v++)f=f+(a?l[v-1]+e:"")+u.getcolref(v).join(e)+`
`;return f=f.replace(/\./g,r),f}static randn(e,r,s,l){return ha(la(e*r,s,l),e,r)}static rand(e,r,s,l){return ha(oa(e*r,s,l),e,r)}static eye(e,r){r===void 0&&(r=e);const s=new Float64Array(e*r);for(let l=0;l<Math.min(e,r);l++)s[l*e+l]=1;return new ye(s,e,r)}static diagm(e){if(!Te(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,s=new Float64Array(r*r);for(let l=0;l<r;l++)s[l*r+l]=e.v[l];return new ye(s,r,r)}static zeros(e,r){return r===void 0&&(r=e),new ye(new Float64Array(e*r),e,r)}static ones(e,r){return ye.fill(1,e,r)}static fill(e,r,s){s===void 0&&(s=r);const l=new Float64Array(r*s);for(let a=0;a<l.length;a++)l[a]=e;return new ye(l,r,s)}static outer(e,r,s){if(Array.isArray(e)&&(e=st(e)),Array.isArray(r)&&(r=st(r)),!Te(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Te(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=ye.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],u=l.getcolref(a+1);for(let f=0;f<e.length;f++)u[f]=s(e.v[f],c)}return l}static parseCSV(e,r,s,l){function a(_){return _.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let u=e.split(/\n/),f=[],v=0;const d=u[0].split(r);(s||s===void 0&&a(d))&&(f=d,v=1),u=u.filter(_=>_.trim().length>1);let h=[],g=0;l&&(g=1);const m=u.length-v,p=d.length-g;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const b=ye.zeros(p,m);for(let _=v;_<m+v;_++){const w=u[_].split(r);let C;if(l?(h[_-v]=w[0],C=w.slice(1).map(k=>Number.parseFloat(k.trim().replace(c,".")))):C=w.map(k=>Number.parseFloat(k.trim().replace(c,"."))),C.some(k=>Number.isNaN(k)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(C.length!=p)throw Error("Wrong number of values in row #"+_);b.v.set(new Float64Array(C),(_-v)*p)}return{values:b.t(),header:f,labels:h,sep:r,dec:c}}};nr(ye,"valuesConstructor",Float64Array),nr(ye,"TOLERANCE",Math.pow(10,-9));let nt=ye;function Te(t){return t&&t.constructor===Le}function st(t){return new Le(new Float64Array(t))}const tt=class tt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new zt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=l+1,s=s+1);return new zt(r.subarray(0,s))}filter(e){const r=new tt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=this.v[l],s=s+1);return new tt(r.subarray(0,s))}shuffle(){return new tt(ba(this.v))}sort(e){return new tt(_a(this.v,e))}sortind(e){return new zt(wa(this.v,e))}rep(e){return ga(this,e)}repeach(e){return pa(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=zt.seq(1,this.length)),Zt(r)||(r=$t(r));const s=r.length;if(vn(r)<1||Gr(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<r.length;l++){const a=r.v[l];this.v[a-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=$t([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?zt.bool2ind(e):$t(e)),!Zt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=tt.zeros(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new tt(this.v.slice(e-1,r))}copy(){return new tt(this.v.slice())}dot(e){return e===void 0&&(e=this),So(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(Te(e))return new tt(Co(this.v,e.v,r));if(da(e))return new tt(Ao(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e){const r=this.v.length,s=tt.zeros(r);for(let l=0;l<r;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new tt.valuesConstructor(r);let l=0;for(const a of e)typeof a=="number"?(s[l]=a,l+=1):(s.set(Te(a)?a.v:new tt.valuesConstructor(a),l),l+=typeof a=="number"?1:a.length);return new tt(s)}static seq(e,r,s){return ma(e,r,s,tt)}static randn(e,r,s){return la(e,r,s)}static rand(e,r,s){return oa(e,r,s)}static zeros(e){return new tt(new tt.valuesConstructor(e))}static ones(e){return tt.fill(1,e)}static fill(e,r){const s=new tt.valuesConstructor(r);for(let l=0;l<s.length;l++)s[l]=e;return new tt(s)}};nr(tt,"valuesConstructor",Float64Array);let Le=tt;function Zt(t){return t.constructor===zt}function $t(t){return new zt(new Int32Array(t))}const mt=class mt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new mt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=l+1,s=s+1);return new mt(r.subarray(0,s))}filter(e){const r=new mt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=this.v[l],s=s+1);return new mt(r.subarray(0,s))}shuffle(){return new mt(ba(this.v))}sort(e){return new mt(_a(this.v,e))}sortind(e){return new mt(wa(this.v,e))}rep(e){return ga(this,e)}repeach(e){return pa(this,e)}subset(e){if(typeof e=="number"&&(e=$t([e])),Array.isArray(e)&&(e=$t(e)),!Zt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=new mt.valuesConstructor(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new mt(s)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new mt(this.v.slice(e-1,r))}static seq(e,r,s){return ma(e,r,s,mt)}static ones(e){return mt.fill(1,e)}static fill(e,r){const s=new mt.valuesConstructor(r);for(let l=0;l<s.length;l++)s[l]=e;return new mt(s)}static bool2ind(e){let r=0;const s=new mt.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[r]=l+1,r=r+1);return new mt(s.subarray(0,r))}};nr(mt,"valuesConstructor",Int32Array);let zt=mt;function ma(t,e,r,s){r===void 0&&(r=t<=e?1:-1);const l=Math.floor((e-t)/r)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(l);for(let c=0;c<l;c++)a[c]=t+c*r;return new s(a)}function ga(t,e){const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let l=1;l<=e;l++)for(let a=0;a<t.length;a++)s[(l-1)*t.length+a]=t.v[a];return new t.constructor(s)}function pa(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let l=0;l<t.length;l++)for(let a=0;a<e;a++)s[l*e+a]=t.v[l];return new t.constructor(s)}function Co(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new t.constructor(t.length);for(let l=0;l<t.length;l++)s[l]=r(t[l],e[l]);return s}function Ao(t,e,r){const s=new t.constructor(t.length);for(let l=0;l<t.length;l++)s[l]=r(t[l],e);return s}function So(t,e,r,s,l,a){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const c=r,u=a,f=s,v=new t.constructor(c*u);for(let d=0;d<u;d++){const h=e.subarray(d*l,(d+1)*l),g=v.subarray(d*c,(d+1)*c);for(let m=0;m<f;m++){const p=h[m],b=t.subarray(m*r,(m+1)*r);for(let _=0;_<c;_++)g[_]+=b[_]*p}}return v}function ba(t){let e=t.slice(),r=e.length,s,l;for(;r;)l=Math.floor(Math.random()*r--),s=e[r],e[r]=e[l],e[l]=s;return e}function _a(t,e=!1){return e?t.slice().sort((r,s)=>s-r):t.slice().sort((r,s)=>r-s)}function wa(t,e=!1){const r=zt.seq(1,t.length).v;return e?r.sort((s,l)=>t[l-1]-t[s-1]):r.sort((s,l)=>t[s-1]-t[l-1])}function du(t,e,r){return 5*t*e+e+4*r*e+t*r}function hu(t,e){return 2+2*t+t*e+17*e}function Ve(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=t.ncols,l=t.ncomp;let a,c;switch(e){case"mX":a=2,c=s;break;case"sX":a=2+s,c=s;break;case"loadings":case"xloadings":a=2+2*s+(r-1)*s,c=s;break;case"P":a=2+2*s,c=l*s;break;case"eigenvals":case"xeigenvals":a=2+2*s+s*l,c=l;break;case"cq0":a=2+2*s+s*l+l,c=l;break;case"cNq":a=2+2*s+s*l+2*l,c=l;break;case"rq0":a=2+2*s+s*l+3*l,c=l;break;case"rNq":a=2+2*s+s*l+4*l,c=l;break;case"ch0":a=2+2*s+s*l+5*l,c=l;break;case"cNh":a=2+2*s+s*l+6*l,c=l;break;case"rh0":a=2+2*s+s*l+7*l,c=l;break;case"rNh":a=2+2*s+s*l+8*l,c=l;break;case"cr0":a=2+2*s+s*l+9*l,c=l;break;case"cNr":a=2+2*s+s*l+10*l,c=l;break;case"rr0":a=2+2*s+s*l+11*l,c=l;break;case"rNr":a=2+2*s+s*l+12*l,c=l;break;case"cg0":a=2+2*s+s*l+13*l,c=l;break;case"cNg":a=2+2*s+s*l+14*l,c=l;break;case"rg0":a=2+2*s+s*l+15*l,c=l;break;case"rNg":a=2+2*s+s*l+16*l,c=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function _r(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=t.ncols,l=t.nrows,a=t.ncomp;let c,u;switch(e){case"scores":case"xscores":c=(r-1)*l,u=l;break;case"T":c=0,u=l*a;break;case"hdist":c=l*a+(r-1)*l,u=l;break;case"qdist":c=2*l*a+(r-1)*l,u=l;break;case"xcumexpvar":case"cumexpvar":c=3*l*a,u=a;break;case"fdistc":c=3*l*a+a+(r-1)*l,u=l;break;case"fdistr":c=4*l*a+a+(r-1)*l,u=l;break;case"gdist":c=5*l*a+a+(r-1)*s,u=s;break;case"rdist":c=5*l*a+a+s*a+(r-1)*s,u=s;break;case"idistc":c=5*l*a+a+2*s*a+(r-1)*s,u=s;break;case"idistr":c=5*l*a+a+3*s*a+(r-1)*s,u=s;break;case"E":c=5*l*a+a+3*s*a+a*s,u=l*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+u)}function ws(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let s=0;s<t.length;s++){const l=t[s];if(l<e||l>r)return!1}return!0}function No(t,e,r,s,l,a,c){if(!br(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const u=a&&Array.isArray(a)?a.length:0;if(!ws(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!ws(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const v=e.nrows-u,d=e.ncols-f;if(v<3||d<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(s===void 0&&(s=!0),l===void 0&&(l=!1),r===void 0&&(r=Math.min(v-1,d)),r<1||r>Math.min(v-1,d))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let g=null;if(u>0){const k=new Int32Array(a);g=t._malloc(k.length*k.BYTES_PER_ELEMENT),t.HEAP32.set(k,g/k.BYTES_PER_ELEMENT)}let m=null;if(f>0){const k=new Int32Array(c);m=t._malloc(k.length*k.BYTES_PER_ELEMENT),t.HEAP32.set(k,m/k.BYTES_PER_ELEMENT)}const p=hu(d,r),b=Float64Array,_=t._malloc(p*b.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,r,s,l,_,g,u,m,f])!==1)throw new Error("pca_fit: PCA failed.");const C=t.HEAPF64.slice(_/b.BYTES_PER_ELEMENT,_/b.BYTES_PER_ELEMENT+p);return t._free(h),t._free(_),g&&t._free(g),m&&t._free(m),{class:["pcamodel"],v:C,ncomp:r,nrows:v,ncols:d,exclvars:c,center:s,scale:l}}function jn(t,e,r,s){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!br(r))throw new Error("pca_predict: X must be a matrix.");s||(s=[]);const l=s&&Array.isArray(s)?s.length:0;if(!ws(s,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=r.nrows-l;let c=e.exclvars;r.ncols===e.ncols&&(c=[]);const u=c.length,f=r.ncols-u;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(f!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const v=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,v/r.v.BYTES_PER_ELEMENT);let d=null;if(l>0){const M=new Int32Array(s);d=t._malloc(M.length*M.BYTES_PER_ELEMENT),t.HEAP32.set(M,d/M.BYTES_PER_ELEMENT)}let h=null;if(u>0){const M=new Int32Array(c);h=t._malloc(M.length*M.BYTES_PER_ELEMENT),t.HEAP32.set(M,h/M.BYTES_PER_ELEMENT)}const g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const m=du(a,e.ncomp,f),p=Float64Array,b=t._malloc(m*p.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[v,r.nrows,r.ncols,g,b,d,l,h,u])!==1)throw new Error("pca_predict: PCA prediction failed.");const w=t.HEAPF64.slice(b/p.BYTES_PER_ELEMENT,b/p.BYTES_PER_ELEMENT+m);t._free(v),t._free(g),t._free(b),d&&t._free(d),h&&t._free(h);const C={class:["pcares"],v:w,ncomp:e.ncomp,nrows:a,ncols:f,npred:f,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},k=new Array(e.ncomp),y=new Array(e.ncomp),E=new Array(e.ncomp),z=new Array(e.ncomp),A=new Array(e.ncomp),S=_r(C,"xcumexpvar");A[0]=1,z[0]=S[0],E[0]=1-S[0],k[0]=S[0],y[0]=1-S[0];for(let M=1;M<e.ncomp;M++)A[M]=M+1,z[M]=S[M],E[M]=1-S[M],k[M]=S[M]-S[M-1],y[M]=1-k[M];return C.stat={components:A,resvar:y,expvar:k,cumexpvar:z,cumresvar:E},C}function mu(t,e,r,s,l,a,c,u){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!br(r))throw new Error("pcapcv: X must be a matrix.");u||(u=[]);const f=u&&Array.isArray(u)?u.length:0;if(!ws(u,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const v=e.exclvars.length,d=r.nrows-f,h=r.ncols-v;if(d<3)throw new Error("pcapcv: X must have at least 3 rows.");if(h!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(l)||l<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&l>d)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(s)||s<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const g=Math.min(a===0?d-2:d-Math.ceil(d/l)-1,h,e.ncomp);if(s>g)throw new Error('pcapcv: the value of "ncomp" is too large.');const m=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,m/r.v.BYTES_PER_ELEMENT);let p=null;if(f>0){const z=new Int32Array(u);p=t._malloc(z.length*z.BYTES_PER_ELEMENT),t.HEAP32.set(z,p/z.BYTES_PER_ELEMENT)}let b=null;if(v>0){const z=new Int32Array(e.exclvars);b=t._malloc(z.length*z.BYTES_PER_ELEMENT),t.HEAP32.set(z,b/z.BYTES_PER_ELEMENT)}const _=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,_/e.v.BYTES_PER_ELEMENT);const w=d*h,C=r.v.constructor,k=t._malloc(w*C.BYTES_PER_ELEMENT);if(t.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[m,r.nrows,r.ncols,s,e.center,e.scale,a,l,c,_,k,p,f,b,v])!==1)throw new Error("pcapcv: PCVPCA failed.");const E=t.HEAPF64.slice(k/C.BYTES_PER_ELEMENT,k/C.BYTES_PER_ELEMENT+w);return t._free(m),t._free(_),t._free(k),p&&t._free(p),b&&t._free(b),new nt(E,d,h)}function gu(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const pu=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:gu,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function bu(t,e,r){const s=pu.findIndex(h=>h.id==="trim");let l=0,a=t.ncols-e,c=0;for(let h=0;h<r.ml.length;h++){if(r.ml[h]!==s){c+=r.mpl_new[h];continue}l=Math.max(l,r.mp_new[c]),a=Math.min(a,r.mp_new[c+1]),c+=r.mpl_new[h]}const u=t.nrows,v=a-l+e,d=nt.zeros(u,v);return c=0,d.v.set(t.v.slice((e+l)*u,(e+a)*u),c),[l,a,d]}function _u(t,e,r,s,l=!0,a=!1){if(!br(e))throw new Error("prep_apply: D must be a matrix.");let c,u;if(l?(c=e.ncols,u=e.nrows-r):(c=e.nrows,u=e.ncols-r),u!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+u+").");const f=s.ml,v=s.mpl_new,d=s.mp_new,h=v.reduce((E,z)=>E+z,0);if(!f||f.length<1||!v||v.length!==f.length||d.length!==h)throw console.log(c,u,d.length,h),new Error("prep_apply: wrong structure of the model object.");const g=f.length,m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const p=t._malloc(f.length*f.BYTES_PER_ELEMENT);t.HEAP32.set(f,p/f.BYTES_PER_ELEMENT);const b=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,b/v.BYTES_PER_ELEMENT);const _=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAPF64.set(d,_/d.BYTES_PER_ELEMENT);const w=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[m,c,u,r,g,p,b,_,w,l])!==1)throw new Error("prep_apply: unexpected error.");const k=t.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(m),t._free(p),t._free(b),t._free(_),t._free(w);const y=new nt(k,e.nrows,e.ncols);if(a){const[E,z,A]=bu(y,r,s);return A}return y}function ur(t,e,r=1){const s=Math.round((e-t+1)/r),l=Array(s);for(let a=0;a<s;a++)l[a]=t+a*r;return l}function wu(t,e){let r,s,l;if(e.length>0){const a=t.values.nrows,c=t.objindices,u=a-e.length;r=Array(u),s=Array(u),l=Array(u);let f=0;for(let v=0;v<a;v++)e.includes(v)||(r[f]=c[v],s[f]=t.classes[v],l[f]=t.objlabels[v],f=f+1)}else r=t.objindices,l=t.objlabels,s=t.classes;return[r,l,s]}function ys(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function Mo(t,e,r,s,l=!1){const[a,c,u]=wu(r,s),f=l&&e.prep&&e.prep.ml&&e.prep.ml.length>0?_u(t,r.values,0,e.prep,!1,!0):r.values,v=jn(t,e,f,s);v.hash=ys(),v.objindices=a,v.objlabels=c,v.classes=u,v.classNames=r.classNames,v.varlabels=r.varlabels,v.eigenvals=Ve(e,"eigenvals"),v.cNh=Ve(e,"cNh"),v.cNq=Ve(e,"cNq"),v.ch0=Ve(e,"ch0"),v.cq0=Ve(e,"cq0"),v.rNh=Ve(e,"rNh"),v.rNq=Ve(e,"rNq"),v.rh0=Ve(e,"rh0"),v.rq0=Ve(e,"rq0");const d=e.nrows;return v.T2lim=2*(d-1)/(d-2)*aa(.95,2,d-2),v}function yu(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function In(t){return t.some(e=>Number.isNaN(e))}function Kr(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function ya(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function xu(t,e,r,s,l,a,c,u=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let v=ya(t);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");v=v.filter(N=>N.replaceAll(e,"").trim().length>0);const d=v[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,g;const m=r!=="no";(m||m===void 0&&In(firstRow))&&(g=d,h=1);const p=v.length-h;if(p<1)throw new Error("Data file should contain at least 1 row with values.");let b,_,w,C=Array(p);s?(b=m?Kr(g[0]):"",w=Array(p),_=1):(b="",w=[],_=0);let k,y=[],E;l?(k=m?Kr(g[_]):"",E=Array(p),_=_+1):(k="",E=[]);const z=d.length-_;if(z<1)throw new Error("Data file should contain at least 1 column with values.");const A=nt.zeros(z,p);for(let N=h;N<p+h;N++){const I=N-h;C[I]=I;let W=v[N].split(e);if(s&&(w[I]=W[0],W.shift()),l){const U=W[0];E[I]=U,W.shift(),(y.length===0||y.indexOf(U)<0)&&y.push(U)}const G=f==="."?W.map((U,te)=>Number.parseFloat(U.trim())):W.map((U,te)=>Number.parseFloat(U.trim().replace(f,".")));if(G.some(U=>Number.isNaN(U)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(G.length!=z)throw new Error("Wrong number of values in row #"+N);A.v.set(new Float64Array(G),(N-h)*z)}if(!s||w.length!==p){w=Array(p);for(let N=0;N<p;N++)w[N]="O"+(N+1)}w=w.map(N=>Kr(N)),E=E.map(N=>Kr(N)),y=y.map(N=>Kr(N));let S,M=Array(z),T=Array(z);if(g&&g.length===z+_){S=g.map(N=>Kr(N)).slice(_);for(let N=0;N<z;N++)M[N]=N>=u?N-u:N,T[N]=N>=u?N-u+1:N+1}else{S=Array(z);for(let N=0;N<z;N++)M[N]=N>=u?N-u:N,S[N]=N>=u?"V"+(N-u+1):"Y"+(N+1),T[N]=N>=u?N-u+1:N+1}let L;if(r==="values"){if(L=f==="."?S.map((N,I)=>I<u?I:Number.parseFloat(N.trim())):S.map((N,I)=>I<u?I:Number.parseFloat(N.trim().replace(f,"."))),L.some(N=>Number.isNaN(N)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else L=T;Array.isArray(L)||(L=[]),a||(a=""),c||(c=""),a=L.length>0&&a.length>0?a:"Variables",c=L.length>0&&c.length>0?c:"";const F=a+(c.length>0?", "+c:""),O=L[1]<L[0];return{values:A.t(),nresp:u,header:r,hasLabels:s,hasClassNames:l,labelsVarname:b,classLabelsVarname:k,objlabels:w,objindices:C,varlabels:S,varvalues:L,varindices:M,varrev:O,classes:E,classNames:y,sep:e,dec:f,varvaluesName:a,varvaluesUnits:c,varAxisTitle:F}}function ku(t){if(In(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let s=2;s<e;s++){let l=[];for(let v=1;v<t.length;v++)l.push(t[v][s]);const a=t[0][s],c=fn(l),u=go(l),f=Math.abs((a-c)/u);r.push(f)}return r.every(s=>s>5)}function Eu(t){const r=t[0].split(","),s=t[1].split(","),l=r.length,a=s.length,c=";",u=t[0].split(c),f=t[1].split(c),v=u.length,d=f.length;let h,g;if(l>1&&a>1&&l===a&&l>v)g=",",h=l;else if(v>1&&d>1&&v===d)g=c,h=v;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[g,g===","?".":",",h]}function Cu(t,e=0){const r=ya(t),s=r.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,a,c]=Eu(r),u=Math.min(c,5),f=Math.min(s,5);let v=r[0].split(l).length,d=r.slice(0,f).map(M=>M.split(l).slice(0,u));d=d.map(M=>M.map(T=>Kr(T)));const h=d.map(M=>yu(M.slice(),a));for(let M=1;M<f;M++)if(In(h[M].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const g=ku(h);let m=0;const p=g?1:0,b=p+1,_=d[p][0],w=d[b][0],C=h[p][0],k=h[b][0],y=h[p][1],E=h[b][1];let z=!1,A=!1;if(Number.isNaN(C)&&Number.isNaN(k)&&_!==w?(z=!0,m=m+1):Number.isNaN(y)&&Number.isNaN(E)&&_!==w&&(z=!0,A=!0,m=m+2),!A){const M=z?1:0,T=h[p][M],L=h[b][M];A=In([T,L]),m=m+A}let S="no";if(g){m>0?d[0].slice(m+e):d[e];const M=m>0?h[0].slice(m+e):h[e];S=In(M)?"labels":"values"}return[l,z,A,S,v]}function Au(t){const e=t.values.t(),r=t.sep,s=t.dec;let l=null;t.header!=="no"&&(l=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),l&&t.hasClassNames&&(l=[t.classLabelsVarname,...l]),l&&t.hasLabels&&(l=[t.labelsVarname,...l]);const a=t.classes&&t.classes.length===e.ncols,c=t.objlabels&&t.objlabels.length===e.ncols;let u=l?l.join(r):"";for(let f=0;f<e.ncols;f++){let v=e.getcolref(f+1).join(r);s!=="."&&(v=v.replace(".",s)),a&&(v=t.classes[f]+t.sep+v),c&&(v=t.objlabels[f]+t.sep+v),u=u+`
`+v}return u=u+`
`,s!=="."&&(u=u.replace(/\./g,s)),u}function zo(t,e){const r=Au(t),s=new Blob([r],{type:"text/csv"}),l=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download",`${e}.csv`),a.click()}function Su(t,e){if(!t)return;const r=t.nresp?t.nresp:0,s=t.values,l=t.varvalues,a=t.varlabels,c=t.varindices,u=s.nrows,f=s.ncols,v=f-e.length,d=nt.zeros(u,v),h=Array(v),g=Array(v),m=Array(v);let p=0;for(let b=0;b<r;b++){const _=u*b,w=u*p;d.v.set(s.v.slice(_,_+u),w),h[p]=l[b],g[p]=a[b],m[p]=c[b],p=p+1}for(let b=r;b<f;b++){if(e.includes(b-r))continue;const _=u*b,w=u*p;d.v.set(s.v.slice(_,_+u),w),h[p]=l[b],g[p]=a[b],m[p]=c[b],p=p+1}return{values:d,header:t.header,hasLabels:t.hasLabels,hasClassNames:t.hasClassNames,classNames:t.classNames,labelsVarname:t.labelsVarname,classLabelsVarname:t.classLabelsVarname,objlabels:t.objlabels,objindices:t.objindices,varlabels:g,varvalues:h,varindices:m,varrev:t.varrev,classes:t.classes,responses:t.responses,classNames:t.classNames,sep:t.sep,dec:t.dec,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits,varAxisTitle:t.varAxisTitle,fileName:t.fileName,nresp:r}}function Nu(t){if(!t.length)return"";t.sort((l,a)=>l-a);let e=[],r=t[0],s=r;for(let l=1;l<t.length;l++)t[l]===s+1?s=t[l]:(r===s?e.push(`${r}`):e.push(`${r}-${s}`),r=t[l],s=r);return r===s?e.push(`${r}`):e.push(`${r}-${s}`),e.join(" ")}function xs(t,e){return br(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Te(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function Mu(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return vu(e.v,e.nrows,e.ncols);if(e.__type==="vector")return st(e.v);const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Po(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${s}${l}${a}${c}`}function hn(t){return!t||Object.keys(t).length<1}function xa(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function ks(t,e,r){let s="";for(let l=0;l<e;l++){const a=t.getUint8(r++);if(a===0)break;s+=String.fromCharCode(a)}return s}function zu(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],l=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=t.getUint8(a);a+=1;const u=t.getUint8(a);if(a+=1,u===77)throw new Error("SPC file has old format which is not supported.");const f=u===75,v=t.getUint8(a);a+=1;const d=t.getInt8(a);a+=1;const h=t.getUint32(a,f);a+=4;const g=t.getFloat64(a,f);a+=8;const m=t.getFloat64(a,f);a+=8;const p=t.getUint32(a,f);a+=4;const b=t.getUint8(a);a+=1;const _=t.getUint8(a);a+=1;const w=t.getUint8(a);a+=1;const C=t.getUint8(a);a+=1;const k=t.getUint32(a,f);a+=4;const y=ks(t,9,a);a+=9;const E=ks(t,9,a);a+=9;const z=t.getUint16(a,f);a+=2;const A=Array.from({length:8},()=>{const re=t.getFloat32(a,f);return a+=4,re}),S=ks(t,130,a);a+=130;const M=ks(t,30,a);a+=30;const T=t.getUint32(a,f);a+=4;const[L,F,O,q,N,I,W,G]=xa(c),U=b===255?r[31]:r[b],te=b===255?e[31]:e[b],se=_<=26?s[_]:_>=128&&_<=131?l[_]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:L,TCGRAM:F,TMULTI:O,TRANDM:q,TORDRD:N,TALABS:I,TXYXYS:W,TXVALS:G},fexper:v,fexp:d,fnpts:h,ffirst:g,flast:m,fnsub:p,fxtype:b,fytype:_,fztype:w,fpost:C,fdate:k,fres:y,fsource:E,fpeakpt:z,fspare:A,fcmnt:S,fcatxt:M,flogoff:T,xaxisName:U,xaxisUnit:te,yaxisName:se}}function Pu(t,e){const r=xa(t.getUint8(e));e+=1;const s=t.getInt8(e);e+=1;const l=t.getUint16(e,!0);e+=2;const a=t.getFloat32(e,!0);e+=4;const c=t.getFloat32(e,!0);e+=4;const u=t.getFloat32(e,!0);e+=4;const f=t.getInt32(e,!0);e+=4;const v=t.getInt32(e,!0);e+=4;const d=t.getFloat32(e,!0);return e+=4,{flags:r,exp:s,index:l,time:a,next:c,noise:u,nPoints:f,nScans:v,wAxis:d}}async function ka(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),s=await t.arrayBuffer(),l=new DataView(s);let a=0;const c=zu(l);a+=512;const u=c.fnpts;if(u<2)throw new Error(`Error reading SPC file (${t.name}).`);let f=new Array(u);if(c.ftflgs.TXVALS)for(let h=0;h<u;h++){const g=l.getFloat32(a,!0);a=a+4,f[h]=g}else{(c.flast-c.ffirst)/(u-1);for(let h=0;h<u;h++)f[h]=c.ffirst+h*c.flast}const v=new Float64Array(u*c.fnsub);for(let h=0;h<c.fnsub;h++){Pu(l,a),a=a+32;for(let g=0;g<u;g++){const m=l.getFloat32(a,!0);a=a+4,v[h*u+g]=m}}const d=[];return c.fnsub>1?ur(1,c.fnsub).forEach(g=>{d.push(r+"_"+g)}):d.push(r),{hdr:c,xvalues:f,yvalues:v,objlabels:d}}async function Tu(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let s=[],l=[];const a=await ka(t[0]),c=a.xvalues.length;if(r.push(a.yvalues),s=s.concat(a.objlabels),l.push(a.hdr.fnsub),e>1)for(let p=1;p<e;p++){const b=await ka(t[p]);if(b.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");r.push(b.yvalues),s=s.concat(b.objlabels),l.push(b.hdr.fnsub)}const u=l.reduce((p,b)=>p+b,0),f=new Float64Array(u*c);let v=0;for(let p=0;p<r.length;p++)f.set(r[p].slice(),v),v+=l[p]*c;const d=new nt(f,c,u),h=ur(0,c-1),g=ur(0,u-1),m=a.xvalues.map(p=>p.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:g,varlabels:m,varvalues:a.xvalues,varindices:h,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}const Lu=t=>t;function Ru(t,{delay:e=0,duration:r=400,easing:s=Lu}={}){const l=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:a=>`opacity: ${a*l}`}}var ju=K('<div><div class="modal svelte-q7wo60"><div class="header svelte-q7wo60"><button class="close-button svelte-q7wo60">✕</button></div> <div class="body svelte-q7wo60"><!></div></div></div>');function Iu(t,e){pe(e,!0);let r=H(e,"isDark",3,!1);function s(h){h.key==="Escape"&&e.closeModal()}var l=ju();cs("keydown",Zs,s);let a;var c=B(l),u=B(c),f=B(u);f.__click=function(...h){var g;(g=e.closeModal)==null||g.apply(this,h)};var v=j(u,2),d=B(v);Nr(d,()=>e.children),oe(h=>a=pt(l,1,"drop svelte-q7wo60",null,a,h),[()=>({isdark:r()})]),Vc(7,l,()=>Ru),P(t,l),be()}ct(["click"]);function Ea(t,e){$(e,!0)}function Fu(t,e,r){const s=Po(new Date),l=e.appID+"-session-"+s+".json";o(r).date=s;const a=JSON.stringify(o(r),xs),c=new Blob([a],{type:"text/json"}),u=window.URL.createObjectURL(c),f=document.createElement("a");f.setAttribute("href",u),f.setAttribute("download",l),f.click()}function qu(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var Vu=K('<sup style="color:red">β</sup>'),Du=K('<li><button class="svelte-1cyr8za"> </button></li>'),Ou=K("<div><!></div>"),Bu=K('<div class="info-container svelte-1cyr8za"><!></div>'),Wu=K('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"/> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"><!></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function Yu(t,e){pe(e,!0);let r=H(e,"tabs",19,()=>[]),s=H(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let a=ue(!1),c=ue(void 0),u=ue("Current session "),f=ue(!1);function v(y){$(u,y,!0),$(f,!0),setTimeout(()=>{$(u,"Current session "),$(f,!1)},1e3)}function d(){$(a,!1)}function h(y){o(c).tab=y}function g(){const y=indexedDB.open(l,1);y.onsuccess=E=>{const A=E.target.result.transaction(e.appID,"readwrite");A.objectStore(e.appID).delete("session"),A.oncomplete=()=>{$(c,e.initSession(),!0),v("Session was reinitialzed.")},A.onerror=()=>console.error("Failed to session from DB.")}}function m(y,E){window.localStorage.removeItem(e.appID+"-blocked");const z=indexedDB.open(l,1);z.onsuccess=A=>{const T=A.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);T.put(y,"session"),T.put(Po(new Date),"session-update")}}function p(){new Promise((y,E)=>{const z=indexedDB.open(l,1);z.onsuccess=A=>{const L=A.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");L.onsuccess=()=>y(L.result),L.onerror=()=>E(L.error)}}).then(y=>{b(y),$(u,"Last session is restored "),$(f,!0),setTimeout(()=>{$(u,"Current session "),$(f,!1)},1500)}).catch(y=>{console.error(y),$(c,e.initSession(),!0)})}function b(y){if(!y||y==="undefined"){$(c,e.initSession(),!0);return}const E=JSON.parse(y,Mu);$(c,e.checkSession(E)?E:e.initSession(e.appID),!0)}function _(y){const E=new FileReader;E.onload=()=>{b(E.result),y.target.value=""},E.readAsText(y.target.files[0])}Yc(()=>{const y=e.appID,E=indexedDB.open(l,1);E.onupgradeneeded=z=>{const A=z.target.result;A.objectStoreNames.contains(y)||A.createObjectStore(y)},E.onsuccess=z=>{p()}});var w=ce(),C=J(w);{var k=y=>{var E=Wu(),z=B(E),A=B(z),S=B(A),M=j(S,2),T=B(M),L=j(T);{var F=Ce=>{var Be=Vu();P(Ce,Be)};Y(L,Ce=>{s()&&Ce(F)})}var O=j(M,2),q=B(O),N=j(A,2);Je(N,21,r,et,(Ce,Be,Ie)=>{var We=Du();let Ye;var ft=B(We);ft.__click=()=>h(Ie),ft.__keydown=()=>h(Ie);var Tt=B(ft);oe(He=>{Ye=pt(We,1,"nav-item svelte-1cyr8za",null,Ye,He),ae(Tt,o(Be).name)},[()=>({selected:o(c).tab===Ie})]),P(Ce,We)});var I=j(z,2),W=B(I);io(W,()=>o(c).date,Ce=>{var Be=ce(),Ie=J(Be);Je(Ie,17,r,et,(We,Ye,ft)=>{var Tt=Ou();let He;var $e=B(Tt);uo($e,()=>o(Ye).component,(gt,dr)=>{dr(gt,{get WASM(){return e.WASM},get session(){return o(c)},backupSession:m})}),oe(gt=>He=pt(Tt,1,"tab-content svelte-1cyr8za",null,He,gt),[()=>({hidden:o(c).tab!==ft})]),P(We,Tt)}),P(Ce,Be)});var G=j(I,2),U=B(G);let te;var se=B(U),re=B(se),ee=j(se,2),X=B(ee);X.__change=_;var Z=j(ee,2);Z.__click=[Fu,e,c];var ne=j(Z,2);ne.__click=[qu,g];var fe=j(U,2),ge=B(fe);ge.__click=[Ea,a],ge.__keydown=[Ea,a];var ie=j(ge,2);Nr(ie,()=>e.footer);var he=j(G,2);{var qe=Ce=>{Iu(Ce,{closeModal:d,children:(Be,Ie)=>{var We=Bu(),Ye=B(We);Nr(Ye,()=>e.info),P(Be,We)},$$slots:{default:!0}})};Y(he,Ce=>{o(a)&&Ce(qe)})}oe(Ce=>{V(S,"alt",e.appShortTitle),ae(T,e.appTitle),ae(q,e.appSlogan),te=pt(U,1,"session svelte-1cyr8za",null,te,Ce),ae(re,o(u))},[()=>({"no-buttons":o(f)})]),P(y,E)};Y(C,y=>{o(c)&&y(k)})}P(t,w),be()}ct(["click","keydown","change"]);function Ca(t,e,r){return t<e?["regular","in"]:t>r?["outlier","out"]:["extreme","out"]}function Uu(t,e,r,s,l,a,c,u){if(!u||u.length===0)return[0,0];let f=0,v=0;for(let d of u){const h=t[d],[g,m]=Ca(h,e,r);a[g]+=1,c[m]+=1,s[d]=g,l[d]=m,f=f+(m==="in"),v=v+(m!=="in")}return[f,v]}function Aa(t,e,r,s,l,a,c,u,f){if(!f||f.length===0)return[0,0,0,0,0,0,0,0,0,0];let v=0,d=0;for(let O of f){const q=t[O],[N,I]=Ca(q,r,s);u[I]+=1,l[O]="alien",c.alien+=1,a[O]=I,v=v+(I!=="in"),d=d+(I==="in")}const h=f.slice();h.sort((O,q)=>t[O]-t[q]);let g=h.length;const m=h.map(O=>t[O]);let p=-1,b=0,_=0,w=0,C=0;for(;p<0;)b>0&&(l[h[g-1]]="external",c.alien=c.alien-1,c.external=c.external+1,g=g-1,h.pop(),m.pop()),_=fn(m),w=ds(m),C=w/(_*_),p=4-2*e*C,b=b+1;const k=(2+Math.sqrt(p))/C,y=k-e,E=_/k,z=r/E,A=1-2*(e+y)*(e+3*y)/(3*(e+2*y)**2),S=(A-1)*(1-3*A),M=(e+2*y)/(e+y)**2,T=1+A*M*(A-1-.5*(2-A)*S*M),L=A*Math.sqrt(2*M)*(1+.5*S*M),F=hs((Math.pow(z/(e+y),A)-T)/L);return[v,d,F,y,E,A,T,L,e,_]}function Sa(t,e,r,s,l){const a=t.ncomp,c=t.nrows;let u,f,v;l?(u=l.members.length,f=l.strangers.length,v=0):(l={members:[],strangers:[],unknown:ur(0,c-1)},u=0,f=0,v=c);const d=new Array(a),h=new Array(a),g=new Array(a),m=new Array(a),p=new Array(a),b=new Array(a),_=new Array(a),w=e==="robust"?t.rNq:t.cNq,C=e==="robust"?t.rNh:t.cNh;for(let k=0;k<a;k++){const y=C[k]+w[k],E=_r(t,e==="robust"?"fdistr":"fdistc",k+1),z=new Array(c),A=new Array(c),S={regular:0,extreme:0,outlier:0,alien:0,external:0},M={in:0,out:0},[T,L]=Uu(E,r[k],s[k],A,z,S,M,l.members),[F,O,q,N,I,W,G,U,te,se]=Aa(E,y,r[k],s[k],A,z,S,M,l.strangers);v>0&&Aa(E,y,r[k],s[k],A,z,S,M,l.unknown),h[k]=T>0?T/(T+L):0,g[k]=F>0?F/(F+O):0,m[k]=1-q,p[k]=Math.sqrt(h[k]*g[k]),b[k]=T>0&&F>0?(T+F)/(T+F+O+L):0,_[k]=k+1,d[k]={f:E,decs:z,rols:A,decsNum:M,rolsNum:S,TP:T,FN:L,TN:F,FP:O,beta:q,s:N,f0:I,hz:W,Mz:G,Sz:U,k:te,m:se}}return{class:["simcares"],classes:t.classes,classNames:t.classNames,ind:l,nMembers:u,nStrangers:f,nUnknown:v,v:d,nrows:t.nrows,stat:{sensitivity:h,specificity:g,selectivity:m,efficiency:p,accuracy:b,components:_}}}function Hu(t,e,r,s,l,a){(!a||!Array.isArray(a))&&(a=[]);let c=t.exclvars;(!c||!Array.isArray(c))&&(c=[]);const u=s.values.nrows,f=a.length,v=u-f,d=e.ncomp,h=_r(r.pca,"qdist",d),g=_r(r.pca,"hdist",d),m=e.limType==="classic"?"c":"r",p=_r(r.pca,"fdist"+m,d),b=Ve(t,m+"Nh")[d-1],_=Ve(t,m+"Nq")[d-1],w=Ve(t,m+"h0")[d-1],C=Ve(t,m+"q0")[d-1],k=b+_,y=r.simca.v[d-1],E=s.sep,z=r.simca.classes&&r.simca.classes.length===v,A=z?["","","","",""]:["","","",""];let S="";if(S+=["Reference classes:",z?"provided":"not provided",...A].join(E)+`
`,S+=["Number of components:",d,...A].join(E)+`
`,S+=["Alpha:",(e.alpha/100).toFixed(3),...A].join(E)+`
`,S+=["Limits estimator:",e.limType,...A].join(E)+`
`,S+=`
`,S+=["Nh:",b,...A].join(E)+`
`,S+=["Nq:",_,...A].join(E)+`
`,S+=["Nf:",k,...A].join(E)+`
`,S+=`
`,S+=["F crit (extremes):",e.eCrit[d-1],...A].join(E)+`
`,S+=["F crit (outliers):",e.oCrit[d-1],...A].join(E)+`
`,S+=`
`,c.length>0&&(S+=["Number of excluded variables:",c.length,...A].join(E)+`
`,S+=["Indices of excluded variables:",Nu(c),...A].join(E)+`
`,S+=`
`),S+=["Objects:",u,...A].join(E)+`
`,S+=["In:",y.decsNum.in,...A].join(E)+`
`,S+=["Out:",y.decsNum.out,...A].join(E)+`
`,r.simca.nMembers>0&&(S+=`
`,S+=["Members:",r.simca.nMembers,...A].join(E)+`
`,S+=["Regular:",y.rolsNum.regular,...A].join(E)+`
`,S+=["Extreme:",y.rolsNum.extreme,...A].join(E)+`
`,S+=["Outliers:",y.rolsNum.outlier,...A].join(E)+`
`,S+=["Sensitivity:",r.simca.stat.sensitivity[d-1],...A].join(E)+`
`),r.simca.nStrangers>0&&(S+=`
`,S+=["Strangers:",r.simca.nStrangers,...A].join(E)+`
`,S+=["In:",y.decsNum.in-y.rolsNum.regular,...A].join(E)+`
`,S+=["Aliens:",y.rolsNum.alien,...A].join(E)+`
`,S+=["External:",y.rolsNum.external,...A].join(E)+`
`,S+=["Specificity:",r.simca.stat.specificity[d-1],...A].join(E)+`
`,S+=["Selectivity:",r.simca.stat.selectivity[d-1],...A].join(E)+`
`,S+=`
`,S+=["Beta:",y.beta,...A].join(E)+`
`,S+=["Non-centrality, s:",y.s,...A].join(E)+`
`,S+=["Scaling, f0:",y.f0,...A].join(E)+`
`,r.simca.nMembers>0)){const q=y.TP/(y.TP+y.FP),N=r.simca.stat.sensitivity[d-1],I=1-r.simca.stat.specificity[d-1],W=2*q*N/(q+N),G=N/I,U=(1-N)/(1-I);S+=`
`,S+=["Efficiency:",r.simca.stat.efficiency[d-1],...A].join(E)+`
`,S+=["Accuracy:",r.simca.stat.accuracy[d-1],...A].join(E)+`
`,S+=["Precision:",q,...A].join(E)+`
`,S+=["F1-score:",W,...A].join(E)+`
`,S+=["PLR:",G,...A].join(E)+`
`,S+=["NLR:",U,...A].join(E)+`
`}S+=`
`,S+=["","object","class","role","decision","h/h0","q/q0","f"].join(E)+`
`;let M=0;y.rols?y.rols:new Array(u).fill("-");for(let q=0;q<u;q++){if(f>0&&a.includes(q)){S+=["",s.objlabels[q],"-","removed","-","-","-","-"].join(E)+`
`;continue}S+=["",s.objlabels[M],r.pca.classes[M],y.rols[M],y.decs[M],g[M]/w,h[M]/C,p[M]].join(E)+`
`,M=M+1}S+=`
`,s.dec!=="."&&(S=S.replace(/\./g,s.dec)),S=["Target class:",e.className,...A].join(E)+`
`+S,S=["Data filename:",s.fileName,...A].join(E)+`
`+S;let T=["DD-SIMCA results ("+l+")","https://mda.tools/ddsimca/",...A].join(E)+`

`;const L=new Blob([T+S],{type:"text/csv"}),F=window.URL.createObjectURL(L),O=document.createElement("a");O.setAttribute("href",F),O.setAttribute("download",`ddsimca-results-${l}.csv`),O.click()}function Gu(t,e,r){r&&(t.prep=r);const s=new Blob([JSON.stringify({pca:t,simca:e},xs)],{type:"application/json"}),l=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download","ddsimca-model.json"),a.click()}async function Na(t,e,r=1,s="classic"){const l=e.calset.values,a=e.tarset.values,c=hn(e.altset)?null:e.altset.values,u=e.calset.classNames[0],f=l.ncols-e.varsExcluded.length,v=e.model.ncomp>f?f:e.model.ncomp;return t().then(d=>{const h=No(d,l,v,e.model.center,e.model.scale,[],e.varsExcluded),g=jn(d,h,a);g.objindices=e.tarset.objindices,g.objlabels=e.tarset.objlabels,g.classes=e.tarset.classes,g.classNames=e.tarset.classNames,g.cNh=Ve(h,"cNh"),g.cNq=Ve(h,"cNq"),g.ch0=Ve(h,"ch0"),g.cq0=Ve(h,"cq0");let m={};c&&(m=jn(d,h,c),m.objindices=e.altres.objindices,m.objlabels=e.altres.objlabels,m.classes=e.altres.classes,m.classNames=e.altres.classNames,m.cNh=Ve(h,"cNh"),m.cNq=Ve(h,"cNq"),m.ch0=Ve(h,"ch0"),m.cq0=Ve(h,"cq0")),h.hash=ys(),h.varlabels=e.calset.varlabels.filter(A=>!e.varsExcluded.includes(A)),h.varindices=e.calset.varindices.filter(A=>!e.varsExcluded.includes(A)),h.varvalues=e.calset.varvalues.filter(A=>!e.varsExcluded.includes(A)),h.varvaluesName=e.calset.varvaluesName,h.varvaluesUnits=e.calset.varvaluesUnits,h.varrev=e.calset.varrev,h.header=e.calset.header,h.prep=[];const p=1-e.alpha/100,b=Math.pow(1-r/100,1/h.nrows),_=s.charAt(0),w=Ve(h,_+"Nh"),C=Ve(h,_+"Nq"),k=w.map((A,S)=>A+C[S]),y=k.map(A=>gs(p,A)),E=k.map(A=>gs(b,A)),z={ncomp:e.nComp,alpha:e.alpha,gamma:r,limType:s,Nf:k,eCrit:y,oCrit:E,className:u,hash:ys()};e.currentRes={model:h,simca:z,tar:{pca:g,simca:Sa(g,s,y,E,{members:ur(0,g.nrows-1),strangers:[]})},alt:m?{pca:m,simca:Sa(m,s,y,E,{members:[],strangers:ur(0,m.nrows-1)})}:{}}}).catch(d=>{console.error(d)})}function Ku(t,e,r){let s=t.length;const l=st(t);let a=l.sort(),c=l.sortind(),u=-1,f=0,v=0,d=0,h=0;for(;u<0;)f>0&&(s=s-1,c=c.slice(1,s),a=a.slice(1,s)),v=fn(a),d=ds(a,!0),h=d/(v*v),u=4-2*r*h,f=f+1;const g=(2+Math.sqrt(u))/h,m=g-r,p=v/g,b=e/p,_=1-2*(r+m)*(r+3*m)/(3*(r+2*m)**2),w=(_-1)*(1-3*_),C=(r+2*m)/(r+m)**2,k=1+_*C*(_-1-.5*(2-_)*w*C),y=_*Math.sqrt(2*C)*(1+.5*w*C);return 1-hs((Math.pow(b/(r+m),_)-k)/y)}function Ma(t,e,r,s,l=5){if(l<.01||l>50)throw new Error("getStat: wrong value for 'alpha' parameter.");let a,c,u,f,v;s?(v=s.ncompBest,a=s.sens,c=s.spec,u=s.eff,f=s.sel):(a=new Float64Array(t.ncomp),c=new Float64Array(t.ncomp),u=new Float64Array(t.ncomp),f=new Float64Array(t.ncomp));const d=Ve(t,"cNh"),h=Ve(t,"ch0"),g=Ve(t,"cNq"),m=Ve(t,"cq0"),p=new Float64Array(t.ncomp),b=new Float64Array(t.ncomp),_=new Float64Array(t.ncomp),w=new Float64Array(t.ncomp),C=new Float64Array(t.ncomp),k=new Float64Array(t.ncomp),y=new Float64Array(t.ncomp),E=new Float64Array(t.ncomp),z=1-l/100;for(let A=0;A<t.ncomp;A++){const S=d[A],M=h[A],T=g[A],L=m[A],F=S+T,O=gs(z,F);let q,N;q=_r(e,"qdist",A+1),N=_r(e,"hdist",A+1);let I=0;for(let W=0;W<e.nrows;W++){const G=N[W]/M*S+q[W]/L*T;I+=G<O}if(I=I/e.nrows,p[A]=I,C[A]=p[A]-a[v?v-1:A],!hn(r)){q=_r(r,"qdist",A+1),N=_r(r,"hdist",A+1);const W=Array(r.nrows);let G=0;for(let U=0;U<r.nrows;U++){const te=N[U]/M*S+q[U]/L*T;G+=te>=O,W[U]=te}G=G/r.nrows,b[A]=G,_[A]=Ku(W,O,F),k[A]=b[A]-c[v?v-1:A],y[A]=_[A]-f[v?v-1:A],w[A]=Math.sqrt(I*G),E[A]=w[A]-u[v?v-1:A]}}return{alpha:l,ncomp:t.ncomp,sens:{diff:C,val:p},spec:{diff:k,val:b},sel:{diff:y,val:_},eff:{diff:E,val:w}}}async function Xu(t,e){const{varInd:r,nComp:s,Xcal:l,Xtar:a,Xalt:c,center:u,scale:f,statsCurrent:v,alpha:d}=e;return t().then(h=>{const g=No(h,l,s,u,f,[],r),m=jn(h,g,a),p=c?jn(h,g,c):{};return Ma(g,m,p,v,d)}).catch(h=>{console.error(h)})}function Qu(t,e,r,s,l){if(!r&&!e)throw new Error('One of the two arguments "nInt" or "intSize" must be specified.');if(e?r=Math.round(t/e):e=Math.round(t/r),!Number.isInteger(e)||e<2||e>t)throw new Error('Wrong value for "nInt" or "intSize" arguments.');if(!Number.isInteger(r)||r<1||r>t/2)throw new Error('Wrong value for "nInt" or "intSize" arguments.');const a=Array(e),c=Array(e),u=Array(e),f=Array(e),v=Array(e),d=Array(e),h=t%e,g=Math.trunc(t/e);let m,p,b;if(e===t)for(r=1,m=0;m<e;m++)a[m]=m,c[m]=m,d[m]=l[m];else if(h===0)for(m=0;m<e;m++)p=m*g,a[m]=p,c[m]=p+g-1,d[m]=s[a[m]]+"–"+s[c[m]];else{let M=0;for(m=0;m<h;m++)a[m]=M,M+=g+1,c[m]=M-1,d[m]=s[a[m]]+"—"+s[c[m]];for(m=h;m<e;m++)a[m]=M,M+=g,c[m]=M-1,d[m]=s[a[m]]+"—"+s[c[m]]}let _,w,C,k,y,E,z,A,S=[0,1];for(m=0;m<e;m++)p=a[m],C=s[p],b=c[m],k=s[b],m>0&&(w=c[m-1],E=s[w],z=(C-E)/2),m<e-1&&(_=a[m+1],y=s[_],A=(y-k)/2),m===0&&(z=A,S[0]=C-2*z),m===e-1&&(z=A,S[1]=k+2*A),f[m]=C-z,v[m]=k-C+z+A,u[m]=(C+k)/2;return{nVars:t,nInt:e,intSize:r,intLeftIndices:a,intRightIndices:c,intLabels:d,limX:S,left:f,width:v,mid:u}}function Ju(t){const e=[4,6,7,8,9].filter(l=>l<=t&&t%l===0);let r;return t>=10&&t<20?r=[t]:t>=20&&t<30?r=[10,t]:t>=30&&t<=50?r=[10,20,t]:t>50&&t<70?r=[10,20,30]:t>=70&&t<90?r=[10,20,30,40]:t>=90?r=[10,20,30,40,50]:t===5?r=[5]:r=[],[...e,...r].sort((l,a)=>l-a)}var Zu=K('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function ht(t,e){let r=H(e,"text",3,"button");var s=Zu();s.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var l=B(s);oe(()=>ae(l,r())),P(t,s)}ct(["click"]);var $u=K('<button tabindex="0"></button>');function To(t,e){H(e,"disable",3,!1);var r=$u();r.__click=function(...s){var l;(l=e.onclick)==null||l.apply(this,s)},oe(()=>{V(r,"title",e.title),V(r,"aria-label",e.title),V(r,"alt",e.title),pt(r,1,`button ${e.className??""}`,"svelte-bx9fh5")}),P(t,r)}ct(["click"]);function mn(t,e){let r=H(e,"title",3,"Reset");To(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function ef(t,e){let r=H(e,"title",3,"Undo");To(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function tf(t,e){let r=H(e,"title",3,"Download");To(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function rf(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var nf=K('<span class="label svelte-1986c5z"> </span>'),sf=K("<div><!> <!></div>");function de(t,e){let r=H(e,"label",3,null),s=H(e,"name",3,""),l=H(e,"status",3,""),a=H(e,"colors",3,""),c=H(e,"labelWidth",3,12);var u=sf(),f=B(u);{var v=h=>{var g=nf(),m=B(g);oe(()=>{Qt(g,`flex-basis:${c()??""}ch;`),ae(m,r())}),P(h,g)};Y(f,h=>{r()&&h(v)})}var d=j(f,2);Nr(d,()=>e.children??kt),oe(()=>{pt(u,1,`control-element ${s()??""} ${l()??""}`,"svelte-1986c5z"),Qt(u,a())}),P(t,u)}const za=(t,e,r,s)=>{const l=e(t);l<0||l>1||$(r,l*100>o(s)-5&&l*100<o(s)+5,!0)},Pa=(t,e,r,s,l,a)=>{$(e,!1);const c=r(t);c<0||c>1||(s(l(c)),a()&&a()(s()))},Ta=(t,e,r,s,l,a)=>{if(!o(e))return;const c=r(t);c<0||c>1||(s(l(c)),a()&&a()(s()))},of=(t,e,r,s,l,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<s()?s():e()-r()),l()&&l()(e());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r()),l()&&l()(e());return}};var lf=K('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function La(t,e){pe(e,!0);let r=H(e,"min",7,0),s=H(e,"max",3,100),l=H(e,"value",31,()=>rt(r())),a=H(e,"decNum",3,1),c=H(e,"step",19,()=>+((s()-r())/100).toFixed(4)),u=H(e,"onchange",3,null);we(()=>{l()<r()&&(l(r()),u()&&u()(l())),l()>s()&&(l(s()),u()&&u()(l())),r()>s()&&r(s())});let f=ue(void 0),v=ue(void 0),d=ue(!1);const h=z=>{const A=r()+z*(s()-r());return+(Math.round(A/c())*c()).toFixed(4)},g=z=>{const A=o(f).getBoundingClientRect(),S=o(v).getBoundingClientRect(),M=A.x,T=S.x+S.width;return(z.clientX-M)/(T-M)},m=z=>{$(d,!1)},p=z=>{let A=l()+c()*z.deltaY*.5;A<r()&&(A=r()),A>s()&&(A=s()),l(+(Math.round(A/c())*c()).toFixed(4)),z.preventDefault(),u()&&u()(l())},b=R(()=>r()===s()?100:(l()-r())/(s()-r())*100);var _=lf();_.__keydown=[of,l,c,r,u,s],_.__mousemove=[Ta,d,g,l,h,u],_.__mousedown=[za,g,d,b],_.__mouseup=[Pa,d,g,l,h,u],_.__touchmove=[Ta,d,g,l,h,u],_.__touchstart=[za,g,d,b],_.__touchend=[Pa,d,g,l,h,u];var w=B(_);let C;var k=B(w);let y;var E=B(k);Tn(w,z=>$(f,z),()=>o(f)),Tn(_,z=>$(v,z),()=>o(v)),oe((z,A,S)=>{V(_,"aria-valuenow",l()),V(_,"aria-valuemin",r()),V(_,"aria-valuemax",s()),C=pt(w,1,"range-slider svelte-vhx0r0",null,C,z),Qt(w,`width:${o(b)??""}%`),y=pt(k,1,"range-value svelte-vhx0r0",null,y,A),ae(E,S)},[()=>({"range-slider_right":o(b)<50}),()=>({"range-value_right":o(b)<50}),()=>l().toFixed(a())]),cs("mousewheel",_,p),cs("mouseleave",_,m),cs("touchcancel",_,m),P(t,_),be()}ct(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]),ct(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const af=(t,e,r)=>{if(t.key==="ArrowLeft"){const s=e.options.findIndex(l=>l===r());s>0&&r(e.options[s-1]);return}if(t.key==="ArrowRight"){const s=e.options.findIndex(l=>l===r());s<e.options.length-1&&r(e.options[s+1]);return}};var cf=(t,e,r)=>e(r),uf=K('<button tabindex="-1"><!></button>'),ff=K('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox"/>',1);function qt(t,e){pe(e,!0);let r=H(e,"value",31,()=>rt(e.options[0])),s=H(e,"className",3,"");var l=ff(),a=J(l);a.__keydown=[af,e,r],Je(a,20,()=>e.options,u=>u,(u,f)=>{var v=uf();v.__click=[cf,r,f];let d;var h=B(v);At(h,()=>f),oe((g,m)=>d=pt(v,1,`option option_${g??""}`,"svelte-1i17tox",d,m),[()=>f.toString().replace(".","_"),()=>({selected:f==r()})]),P(u,v)});var c=j(a,2);oe(()=>pt(a,1,`selector ${s()??""}`,"svelte-1i17tox")),Xl(c,r),P(t,l),be()}ct(["keydown","click"]);function Fn(t,e){pe(e,!0);let r=H(e,"options",19,()=>["no","yes"]),s=H(e,"value",15,!1),l=ue(!0);const a=R(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());we(()=>$(l,s()?r()[1]:r()[0],!0)),we(()=>s(o(l)===r()[1]));var c=ce(),u=J(c);{var f=v=>{qt(v,{get options(){return o(a)},get value(){return o(l)},set value(d){$(l,d,!0)}})};Y(u,v=>{o(a)&&v(f)})}P(t,c),be()}function Ra(t,e,r){o(e)&&o(e).files.length>0?r(o(e).files.length===1?o(e).files[0]:o(e).files):r(null)}function ja(t,e){(t.type==="click"||t.type==="keydown"&&(t.code==="Space"||t.code==="Enter"))&&o(e).click()}var vf=K('<input type="file" multiple class="svelte-1k0x7uv"/>'),df=K('<input type="file" class="svelte-1k0x7uv"/>'),hf=K('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function Ia(t,e){pe(e,!0);let r=H(e,"file",15),s=H(e,"message",3,"Select CSV file with dataset"),l=H(e,"acceptType",3,".csv"),a=H(e,"multiple",3,!1),c=ue(void 0);function u(w){o(c).value=null,r(null)}var f=hf(),v=J(f);v.__keydown=[ja,c],v.__click=[ja,c];let d;var h=B(v),g=j(h);{var m=w=>{var C=vf();C.__change=[Ra,c,r],Tn(C,k=>$(c,k),()=>o(c)),oe(()=>V(C,"accept",l())),P(w,C)},p=w=>{var C=df();C.__change=[Ra,c,r],Tn(C,k=>$(c,k),()=>o(c)),oe(()=>V(C,"accept",l())),P(w,C)};Y(g,w=>{a()?w(m):w(p,!1)})}var b=j(v,2);{var _=w=>{mn(w,{onclick:u})};Y(b,w=>{r()&&w(_)})}oe(w=>{d=pt(v,1,"file-selector svelte-1k0x7uv",null,d,w),ae(h,`${(r()?r().name:s())??""} `)},[()=>({selected:r()})]),P(t,f),be()}ct(["keydown","click","change"]);function mf(t,e,r,s){e()&&$(r,e()(s()),!0)}var gf=K('<div class="error-message svelte-1qtiwcs"> </div>'),pf=K('<div><input type="text" class="svelte-1qtiwcs"/> <!></div>');function Fa(t,e){pe(e,!0);let r=H(e,"value",15,""),s=H(e,"className",3,""),l=H(e,"placeholder",3,""),a=H(e,"maxLength",3,25),c=H(e,"validator",3,null),u=ue("");var f=pf();let v;var d=B(f);d.__input=[mf,c,u,r];var h=j(d,2);{var g=m=>{var p=gf(),b=B(p);oe(()=>ae(b,o(u))),P(m,p)};Y(h,m=>{o(u)&&o(u).length>0&&m(g)})}oe(m=>{v=pt(f,1,`textinput ${s()??""}`,"svelte-1qtiwcs",v,m),V(d,"placeholder",l()),V(d,"maxlength",a())},[()=>({error:o(u)&&o(u).length>0})]),Xl(d,r),P(t,f),be()}ct(["input"]);var bf=K('<div class="spinner svelte-n48urb"></div>');function Lo(t){var e=bf();P(t,e)}ct(["keydown","click"]),ct(["keydown","click"]);var _f=K("<h2> </h2>"),wf=K("<!> <!>",1),yf=K('<div class="widget"><!></div>');function xf(t,e){pe(e,!0);let r=H(e,"title",3,""),s=H(e,"value",15),l=H(e,"labelWidth",3,13);function a(v){const d={};for(const h of Object.keys(v))d[h]=v[h].default;return d}we(()=>{!s()&&e.options&&s(a(e.options))});var c=yf(),u=B(c);{var f=v=>{var d=wf(),h=J(d);{var g=p=>{de(p,{children:(b,_)=>{var w=_f(),C=B(w);oe(()=>ae(C,r())),P(b,w)},$$slots:{default:!0}})};Y(h,p=>{r()&&p(g)})}var m=j(h,2);Je(m,17,()=>Object.keys(e.options),et,(p,b)=>{var _=ce();const w=R(()=>e.options[o(b)]);var C=J(_);{var k=y=>{de(y,{get name(){return o(w).name},get label(){return o(w).label},get labelWidth(){return l()},children:(E,z)=>{var A=ce(),S=J(A);uo(S,()=>o(w).el,(M,T)=>{T(M,je(()=>o(w).props,{get value(){return s()[o(b)]},set value(L){s(s()[o(b)]=L,!0)}}))}),P(E,A)},$$slots:{default:!0}})};Y(C,y=>{o(w).hidden||y(k)})}P(p,_)}),P(v,d)};Y(u,v=>{s()&&v(f)})}P(t,c),be()}var kf=K('<span style="font-weight:bold"> </span><br/>',1),Ef=K('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),Cf=K('<span class="file-size svelte-gdjwex"> </span>'),Af=K('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Sf(t,e){pe(e,!0);let r=H(e,"title",3,"");var s=ce(),l=J(s);{var a=c=>{de(c,{children:(u,f)=>{var v=Af(),d=J(v),h=B(d);{var g=k=>{var y=kf(),E=J(y),z=B(E);oe(()=>ae(z,r())),P(k,y)};Y(h,k=>{r()&&r()!==""&&k(g)})}var m=j(h,4),p=B(m),b=j(m,5);{var _=k=>{var y=Ef(),E=J(y),z=B(E),A=j(E,4),S=B(A);oe(()=>{ae(z,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),ae(S,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),P(k,y)},w=k=>{var y=Cf(),E=B(y);oe(()=>ae(E,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),P(k,y)};Y(b,k=>{e.dataset.nresp&&e.dataset.nresp>0?k(_):k(w,!1)})}var C=j(d,2);mn(C,{get onclick(){return e.reset}}),oe(()=>{V(m,"title",e.dataset.fileName),ae(p,e.dataset.fileName)}),P(u,v)},$$slots:{default:!0}})};Y(l,c=>{e.dataset&&c(a)})}P(t,s),be()}var Nf=K("<!> <!>",1),Mf=K("<!> <!> <!> <!> <!> <!>",1),zf=K("<!> <!>",1),Pf=K("<p> </p>"),Tf=K("<!> <p> </p>",1),Lf=K("<p> </p>"),Rf=K("<!> <!> <!>",1);function Ro(t,e){pe(e,!0);let r=H(e,"model",3,null),s=H(e,"outliers",19,()=>[]),l=H(e,"className",3,"Class"),a=H(e,"classMandatory",3,!1),c=H(e,"classUnique",3,!1),u=H(e,"title",3,""),f=H(e,"dataset",15),v=H(e,"resobj",15),d=H(e,"csvOnly",3,!0);const h=[",",";"],g=R(()=>r()?["no","yes"]:["no","labels","values"]);let m=ue(void 0),p=ue(""),b=ue(""),_=ue(","),w=ue("no"),C=ue(!1),k=ue(!1),y=ue(null),E=ue("neutral"),z=ue("");function A(X){$(E,"error"),$(z,X,!0),console.error(X)}function S(){$(E,"neural"),$(z,"")}function M(){$(E,"success"),$(z,"")}function T(X,Z,ne){$(y,e.WASM().then(fe=>{v(Mo(fe,X,Z,ne,!0)),M()}).catch(fe=>{v(null),A(fe)}),!0)}function L(X,Z){if(!X||X.size<10)return;const fe=X.slice(0,1e5),ge=new FileReader;ge.onload=()=>{const ie=ge.result;!ie||ie.length<0||((he=>{var qe=qs(he,4);$(_,qe[0],!0),$(C,qe[1],!0),$(k,qe[2],!0),$(w,qe[3],!0)})(Cu(ie)),$(k,a()||o(k),!0),Z&&o(w)!=="no"&&$(w,"yes"))},ge.onerror=function(ie){csvString=null,$(E,"error"),$(z,ie,!0),console.error("Error reading CSV file.",ie)},ge.readAsText(fe)}function F(X){try{const Z=xu(X,o(_),o(w)==="yes"?"labels":o(w),o(C),o(k),o(p),o(b));if(Z.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const ne=r()?r().prep&&Object.keys(r().prep).length>0?r().prep.npred:r().ncols+r().exclvars.length:0;if(r()&&Z.values.ncols!==ne)throw new Error("Dataset has different number of columns than the training set.");if(Z.classNames.length>Z.values.nrows/2)throw new Error("Dataset has too many unique "+l().toLowerCase()+" labels ("+Z.classNames.length+"), check your CSV file.");if(a()&&Z.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&Z.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");Z.fileName=o(m).name.replace(/\.[^/.]+$/,""),r()&&(Z.varrev=r().varrev,Z.header=r().header,Z.varlabels=r().varlabels,Z.varvalues=r().varvalues,Z.varvaluesName=r().varvaluesName,Z.varvaluesUnits=r().varvaluesUnits),f(Z),M()}catch(Z){f(null),A(Z)}}function O(X){const Z=new FileReader;Z.onload=()=>{F(Z.result)},Z.readAsText(o(m))}async function q(X){try{const Z=o(m)instanceof FileList?o(m):[o(m)];f(await Tu(Z)),M()}catch(Z){A("Failed to read SPC file: "+Z)}}function N(){$(m,""),f(null),v(null),$(p,""),$(b,""),S()}we(()=>{if(!(o(m)===0||o(m)===void 0||f())){if(o(m)===null||o(m)===""){N();return}if(Array.isArray(o(m))){if(o(m).filter(X=>X.slice(-4)===".spc").length!==o(m).length){A("Multiple file selection is allowed only for SPC files.");return}q(o(m));return}o(m)&&(o(m).type==="text/csv"||o(m).type==="application/vnd.ms-excel")?(L(o(m),r()),S()):q([o(m)])}}),we(()=>{o(_)&&S()}),we(()=>{if(f()&&r()&&!v()&&!o(z))try{v(T(r(),f(),s())),M()}catch(X){f(null),v(null),A(X)}});var I=Rf(),W=J(I);{var G=X=>{var Z=zf(),ne=J(Z);io(ne,()=>o(m)===void 0,ie=>{de(ie,{children:(he,qe)=>{var Ce=ce(),Be=J(Ce);{var Ie=Ye=>{Ia(Ye,{id:"dataFile",message:"Select CSV file with dataset",get file(){return o(m)},set file(ft){$(m,ft,!0)}})},We=Ye=>{Ia(Ye,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return o(m)},set file(ft){$(m,ft,!0)}})};Y(Be,Ye=>{d()?Ye(Ie):Ye(We,!1)})}P(he,Ce)},$$slots:{default:!0}})});var fe=j(ne,2);{var ge=ie=>{var he=Mf(),qe=J(he);de(qe,{label:"Delimiter",children:(He,$e)=>{qt(He,{id:"sep",get options(){return h},get value(){return o(_)},set value(gt){$(_,gt,!0)}})},$$slots:{default:!0}});var Ce=j(qe,2);de(Ce,{label:"Row labels",children:(He,$e)=>{Fn(He,{id:"hasLabels",options:["no","yes"],get value(){return o(C)},set value(gt){$(C,gt,!0)}})},$$slots:{default:!0}});var Be=j(Ce,2);{var Ie=He=>{de(He,{get label(){return`${l()??""} labels`},children:($e,gt)=>{Fn($e,{id:"hasLabels",options:["no","yes"],get value(){return o(k)},set value(dr){$(k,dr,!0)}})},$$slots:{default:!0}})};Y(Be,He=>{a()||He(Ie)})}var We=j(Be,2);de(We,{label:"Header",children:(He,$e)=>{qt(He,{id:"header",get options(){return o(g)},get value(){return o(w)},set value(gt){$(w,gt,!0)}})},$$slots:{default:!0}});var Ye=j(We,2);{var ft=He=>{var $e=Nf(),gt=J($e);de(gt,{label:"Header name",children:(Gt,yn)=>{Fa(Gt,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return o(p)},set value(Rr){$(p,Rr,!0)}})},$$slots:{default:!0}});var dr=j(gt,2);de(dr,{label:"Header units",children:(Gt,yn)=>{Fa(Gt,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return o(b)},set value(Rr){$(b,Rr,!0)}})},$$slots:{default:!0}}),P(He,$e)};Y(Ye,He=>{o(w)==="values"&&He(ft)})}var Tt=j(Ye,2);de(Tt,{label:" ",children:(He,$e)=>{ht(He,{text:"Load",onclick:O})},$$slots:{default:!0}}),P(ie,he)};Y(fe,ie=>{o(m)&&!Array.isArray(o(m))&&(o(m).type==="text/csv"||o(m).type==="application/vnd.ms-excel")&&ie(ge)})}P(X,Z)},U=X=>{var Z=ce(),ne=J(Z);{var fe=ge=>{var ie=ce(),he=J(ie);ao(he,()=>o(y),qe=>{de(qe,{children:(Ce,Be)=>{var Ie=Tf(),We=J(Ie);Lo(We);var Ye=j(We,2),ft=B(Ye);oe(()=>ae(ft,r()?"Loading data and apply model...":"Loading data...")),P(Ce,Ie)},$$slots:{default:!0}})},void 0,(qe,Ce)=>{de(qe,{status:"error",children:(Be,Ie)=>{var We=Pf(),Ye=B(We);oe(()=>ae(Ye,o(Ce))),P(Be,We)},$$slots:{default:!0}})}),P(ge,ie)};Y(ne,ge=>{o(y)&&ge(fe)})}P(X,Z)};Y(W,X=>{f()?X(U,!1):X(G)})}var te=j(W,2);{var se=X=>{Sf(X,{get dataset(){return f()},reset:N,get title(){return u()}})};Y(te,X=>{f()&&X(se)})}var re=j(te,2);{var ee=X=>{de(X,{status:"error",children:(Z,ne)=>{var fe=Lf(),ge=B(fe);oe(()=>ae(ge,o(z))),P(Z,fe)},$$slots:{default:!0}})};Y(re,X=>{(o(E)==="error"||o(z))&&X(ee)})}P(t,I),be()}var jf=K("<!> <!> <!> <!>",1),If=K("<p> </p>"),Ff=K("<!> <p>Computing global model...</p>",1),qf=K('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Vf=K('<div class="buttons"><!> <!></div>'),Df=K("<!> <!>",1),Of=K("<p> </p>"),Bf=K("<!> <!> <!> <!>",1);function Wf(t,e){pe(e,!0);let r=H(e,"outliers",19,()=>[]),s=H(e,"resobj",15),l=H(e,"model",15),a=H(e,"downloadModel",3,null),c=H(e,"downloadResults",3,null),u=ue("neutral"),f=ue(""),v=ue(1),d=ue(!0),h=ue(!1),g=ue(void 0);async function m(T,L,F,O){$(g,e.WASM().then(q=>{$(u,"computing");const N=No(q,T.values,L,F,O,r());N.hash=ys(),N.exclvars=[],N.varlabels=T.varlabels,N.varindices=T.varindices,N.varvalues=T.varvalues,N.varvaluesName=T.varvaluesName,N.varvaluesUnits=T.varvaluesUnits,N.varrev=T.varrev,N.prep=[];const I=Mo(q,N,T,r());l(N),s(I),$(u,"success")}).catch(q=>{console.error(q),l(null),$(u,"error"),$(f,q,!0)}),!0)}function p(T){$(u,"neutral"),$(f,null),m(e.dataset,o(v),o(d),o(h))}function b(){$(u,"neutral"),$(g,null),s(null),l(null),$(f,null)}let _=R(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-1,50):null);we(()=>{e.dataset===null&&b()}),we(()=>{$(v,o(_)?Math.min(o(_),20):null,!0)});var w=Bf(),C=J(w);{var k=T=>{var L=jf(),F=J(L);de(F,{name:"ncomp",label:"# of PCs",children:(I,W)=>{La(I,{id:"ncomp",min:1,get max(){return o(_)},step:1,decNum:0,get value(){return o(v)},set value(G){$(v,G,!0)}})},$$slots:{default:!0}});var O=j(F,2);de(O,{name:"center",label:"Center",children:(I,W)=>{Fn(I,{id:"center",options:["no","yes"],get value(){return o(d)},set value(G){$(d,G,!0)}})},$$slots:{default:!0}});var q=j(O,2);de(q,{name:"scale",label:"Scale",children:(I,W)=>{Fn(I,{id:"scale",options:["no","yes"],get value(){return o(h)},set value(G){$(h,G,!0)}})},$$slots:{default:!0}});var N=j(q,2);de(N,{name:"create-model",label:" ",children:(I,W)=>{ht(I,{onclick:p,text:"Create model"})},$$slots:{default:!0}}),P(T,L)};Y(C,T=>{e.dataset&&!l()&&o(u)!=="computing"&&T(k)})}var y=j(C,2);{var E=T=>{var L=ce(),F=J(L);ao(F,()=>o(g),O=>{de(O,{name:"spinner",children:(q,N)=>{var I=Ff(),W=J(I);Lo(W),P(q,I)},$$slots:{default:!0}})},void 0,(O,q)=>{de(O,{name:"error",status:"error",children:(N,I)=>{var W=If(),G=B(W);oe(()=>ae(G,o(q))),P(N,W)},$$slots:{default:!0}})}),P(T,L)};Y(y,T=>{o(g)&&T(E)})}var z=j(y,2);{var A=T=>{var L=Df(),F=J(L);de(F,{name:"info",children:(N,I)=>{var W=qf(),G=J(W),U=j(B(G)),te=j(G,2);mn(te,{onclick:b}),oe(()=>ae(U,` ${l().ncomp??""} PCs${l().center?", centered":""}${l().scale?", scaled":""}`)),P(N,W)},$$slots:{default:!0}});var O=j(F,2);{var q=N=>{de(N,{name:"download-buttons",label:"Download",children:(I,W)=>{var G=Vf(),U=B(G);ht(U,{onclick:()=>c()(s(),e.dataset,"train",r(),l()),text:"Results"});var te=j(U,2);ht(te,{onclick:()=>a()(l()),text:"Model"}),P(I,G)},$$slots:{default:!0}})};Y(O,N=>{a()&&c()&&N(q)})}P(T,L)};Y(z,T=>{l()&&T(A)})}var S=j(z,2);{var M=T=>{de(T,{name:"error",status:"error",children:(L,F)=>{var O=Of(),q=B(O);oe(()=>ae(q,o(f))),P(L,O)},$$slots:{default:!0}})};Y(S,T=>{(o(u)==="error"||o(f))&&T(M)})}P(t,w),be()}var Yf=K("<!> <!> <!>",1),Uf=K("<p> </p>"),Hf=K("<!> <p>Computing PV-set...</p>",1),Gf=K('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),Kf=K("<p> </p>"),Xf=K("<!> <!> <!> <!>",1);function Qf(t,e){pe(e,!0);let r=H(e,"outliers",19,()=>[]),s=H(e,"pvset",15),l=H(e,"pvres",15),a=ue("neutral"),c=ue(""),u=ue(rt(["ven","rand","loo"])),f=ue("ven"),v=ue(void 0),d=e.calset.values.nrows-r().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(M=>M>=d/(d-e.model.ncomp-1)&&M<=d/2):[],g=ue(rt(h.length>0?h[0]:0));we(()=>{h.length===0&&($(u,["loo"],!0),$(f,"loo"))});async function m(M,T,L){$(v,e.WASM().then(F=>{const O=L.type=="loo"?0:L.type=="rand"?2:1,q=mu(F,T,M.values,T.ncomp,L.nseg,O,0,r());s({classLabelsVarname:M.classLabelsVarname,classNames:M.classNames,dec:M.dec,fileName:M.fileName+"-pcv",hasClassNames:M.hasClassNames,hasLabels:M.hasLabels,header:M.header,labelsVarname:M.labelsVarname,classes:e.calres.classes,objindices:e.calres.objindices,objlabels:e.calres.objlabels,responses:e.calres.responses,sep:M.sep,values:q,varAxisTitle:M.varAxisTitle,varindices:T.varindices,varlabels:T.varlabels,varrev:T.varrev,varvalues:T.varvalues,varvaluesName:T.varvaluesName,varvaluesUnits:T.varvaluesUnits}),l(Mo(F,T,s(),[]))}).catch(F=>{console.error(F),s(null),l(null),$(a,"error"),$(c,F,!0)}),!0)}function p(M){$(a,"neutral"),$(c,""),m(e.calset,e.model,{type:o(f),nseg:o(g)})}function b(){$(a,"neutral"),$(c,""),$(v,null),s(null),l(null)}we(()=>{e.model===null&&b()});var _=Xf(),w=J(_);{var C=M=>{var T=Yf(),L=J(T);de(L,{name:"split",label:"Split type:",children:(N,I)=>{qt(N,{id:"cvType",get options(){return o(u)},get value(){return o(f)},set value(W){$(f,W,!0)}})},$$slots:{default:!0}});var F=j(L,2);{var O=N=>{de(N,{name:"nseg",label:"Segments:",children:(I,W)=>{qt(I,{id:"nseg",get options(){return h},get value(){return o(g)},set value(G){$(g,G,!0)}})},$$slots:{default:!0}})};Y(F,N=>{o(f)!=="loo"&&N(O)})}var q=j(F,2);de(q,{name:"run-button",label:" ",children:(N,I)=>{ht(N,{onclick:p,text:"Compute PV-set"})},$$slots:{default:!0}}),P(M,T)};Y(w,M=>{e.model&&!s()&&o(a)!=="busy"&&M(C)})}var k=j(w,2);{var y=M=>{var T=ce(),L=J(T);ao(L,()=>o(v),F=>{de(F,{name:"spinner",children:(O,q)=>{var N=Hf(),I=J(N);Lo(I),P(O,N)},$$slots:{default:!0}})},void 0,(F,O)=>{de(F,{name:"error",status:"error",children:(q,N)=>{var I=Uf(),W=B(I);oe(()=>ae(W,o(O))),P(q,I)},$$slots:{default:!0}})}),P(M,T)};Y(k,M=>{o(v)&&M(y)})}var E=j(k,2);{var z=M=>{de(M,{name:"info",children:(T,L)=>{var F=Gf(),O=J(F),q=j(B(O)),N=j(O,2);tf(N,{onclick:()=>zo(s(),e.calset.fileName+"-pv")});var I=j(N,2);mn(I,{onclick:b}),oe(()=>ae(q,` ${s().values.nrows??""} × ${s().values.ncols??""}, ${o(f)??""}
      ${o(f)!=="loo"?o(g)+" seg":""}`)),P(T,F)},$$slots:{default:!0}})};Y(E,M=>{s()&&M(z)})}var A=j(E,2);{var S=M=>{de(M,{name:"error",status:"error",children:(T,L)=>{var F=Kf(),O=B(F);oe(()=>ae(O,o(c))),P(T,F)},$$slots:{default:!0}})};Y(A,M=>{o(a)==="error"&&o(c)&&M(S)})}P(t,_),be()}var Jf=K('<span class="buttons svelte-t7v4gx"><!> <!></span>'),Zf=K('<span class="buttons svelte-t7v4gx"><!> <!></span>'),$f=K('<span class="buttons svelte-t7v4gx"><!> <!> <!></span>'),ev=K("<!> <!> <!>",1);function tv(t,e){pe(e,!0);function r(v,d,h){let g=["#","excluded interval","nPCs","sensitivity","specificity","efficiency","selectivity"].join(d)+`
`;const m=v.length;for(let w=0;w<m;w++)g+=[w,w===0?"-":v[w].int,v[w].ncomp,v[w].sens,v[w].spec,v[w].eff,v[w].sel].join(d)+`
`;h!=="."&&(g=g.replace(/\./g,h));const p=new Blob([g],{type:"text/csv"}),b=window.URL.createObjectURL(p),_=document.createElement("a");_.setAttribute("href",b),_.setAttribute("download","ddsimca-love-progress.csv"),_.click()}function s(v,d){if(!d||d.length===0){zo(v,`${v.fileName}`);return}zo(Su(v,d),`${v.fileName}-reduced`)}function l(v,d,h){const g=h.model,m=h.simca,p=h[v];Hu(g,m,p,d,v,[])}function a(v){Gu(v.model,v.simca,v.simca.ncomp)}var c=ce(),u=J(c);{var f=v=>{var d=ev(),h=J(d);de(h,{label:"Outcomes",children:(p,b)=>{var _=Jf(),w=B(_);ht(w,{onclick:()=>r(e.s.statsProgress,e.s.calset.sep,e.s.calset.dec),text:"Full progress"});var C=j(w,2);ht(C,{onclick:()=>a(e.s.currentRes),text:"Model"}),P(p,_)},$$slots:{default:!0}});var g=j(h,2);de(g,{label:"Results",children:(p,b)=>{var _=Zf(),w=B(_);ht(w,{onclick:()=>l("tar",e.s.tarset,e.s.currentRes),text:"Target"});var C=j(w,2);{var k=y=>{ht(y,{onclick:()=>l("alt",e.s.altset,e.s.currentRes),text:"Alt"})};Y(C,y=>{hn(e.s.altset)||y(k)})}P(p,_)},$$slots:{default:!0}});var m=j(g,2);de(m,{label:"Reduced data",children:(p,b)=>{var _=$f(),w=B(_);ht(w,{onclick:()=>s(e.s.calset,e.s.varsExcluded),text:"Train"});var C=j(w,2);ht(C,{onclick:()=>s(e.s.tarset,e.s.varsExcluded),text:"Target"});var k=j(C,2);{var y=E=>{ht(E,{onclick:()=>s(e.s.altset,e.s.varsExcluded),text:"Alt"})};Y(k,E=>{hn(e.s.altset)||E(y)})}P(p,_)},$$slots:{default:!0}}),P(v,d)};Y(u,v=>{e.s.varsExcluded&&e.s.varsExcluded.length>0&&v(f)})}P(t,c),be()}var rv=K('<tr class="global svelte-mdsuv2"><td class="svelte-mdsuv2">0</td><td class="svelte-mdsuv2">-</td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td></tr>'),nv=K('<tr class="global svelte-mdsuv2"><td class="svelte-mdsuv2"></td><td class="svelte-mdsuv2">-</td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td></tr> <tr class="svelte-mdsuv2"><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td><td class="svelte-mdsuv2">...</td></tr>',1),sv=K('<tr><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td></tr>'),ov=K("<!> <!>",1),lv=K('<tr class="selected svelte-mdsuv2"><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td><td class="svelte-mdsuv2"> </td></tr>'),av=K('<table class="svelte-mdsuv2"><thead><tr class="svelte-mdsuv2"><th class="svelte-mdsuv2">#</th><th class="svelte-mdsuv2">int</th><th class="svelte-mdsuv2">#PCs</th><th class="svelte-mdsuv2">sens</th><th class="svelte-mdsuv2">spec</th><th class="svelte-mdsuv2">eff</th><th class="svelte-mdsuv2">sel</th></tr></thead><tbody><!><!></tbody></table>');function iv(t,e){pe(e,!0);const r=5,s=R(()=>e.s.statsProgress?e.s.statsProgress.length:0),l=R(()=>o(s)-r+1),a=R(()=>ur(o(l)<=0?0:o(l),o(s)-1)),c=R(()=>e.s.outcomes&&e.s.outcomes.status==="done"&&e.s.intSelected>=0?{i:o(s),ncomp:e.s.nComp,int:e.s.intSelected+1,sens:e.s.outcomes.sens.val.getcolumn(e.s.nComp).v[e.s.intSelected],spec:e.s.outcomes.spec.val.getcolumn(e.s.nComp).v[e.s.intSelected],eff:e.s.outcomes.eff.val.getcolumn(e.s.nComp).v[e.s.intSelected],sel:e.s.outcomes.sel.val.getcolumn(e.s.nComp).v[e.s.intSelected]}:null);var u=ce(),f=J(u);{var v=d=>{var h=av(),g=j(B(h)),m=B(g);{var p=C=>{var k=rv(),y=j(B(k),2),E=B(y),z=j(y),A=B(z),S=j(z),M=B(S),T=j(S),L=B(T),F=j(T),O=B(F);oe((q,N,I,W)=>{ae(E,e.s.nComp),ae(A,q),ae(M,N),ae(L,I),ae(O,W)},[()=>e.s.statsGlobal.sens[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.spec[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.eff[e.s.nComp-1].toFixed(3),()=>e.s.statsGlobal.sel[e.s.nComp-1].toFixed(3)]),P(C,k)},b=C=>{var k=ov(),y=J(k);{var E=A=>{var S=nv(),M=J(S),T=B(M);T.textContent="0";var L=j(T,2),F=B(L),O=j(L),q=B(O),N=j(O),I=B(N),W=j(N),G=B(W),U=j(W),te=B(U);oe((se,re,ee,X)=>{ae(F,e.s.statsProgress[0].ncomp),ae(q,se),ae(I,re),ae(G,ee),ae(te,X)},[()=>e.s.statsProgress[0].sens.toFixed(3),()=>e.s.statsProgress[0].spec.toFixed(3),()=>e.s.statsProgress[0].eff.toFixed(3),()=>e.s.statsProgress[0].sel.toFixed(3)]),P(A,S)};Y(y,A=>{o(l)>0&&A(E)})}var z=j(y,2);Je(z,17,()=>o(a),et,(A,S)=>{var M=sv();let T;var L=B(M),F=B(L),O=j(L),q=B(O),N=j(O),I=B(N),W=j(N),G=B(W),U=j(W),te=B(U),se=j(U),re=B(se),ee=j(se),X=B(ee);oe((Z,ne,fe,ge,ie)=>{T=pt(M,1,"svelte-mdsuv2",null,T,Z),ae(F,o(S)),ae(q,o(S)>0?e.s.statsProgress[o(S)].int:"-"),ae(I,e.s.statsProgress[o(S)].ncomp),ae(G,ne),ae(te,fe),ae(re,ge),ae(X,ie)},[()=>({global:o(S)==0,current:o(S)===e.s.statsProgress.length-1}),()=>e.s.statsProgress[o(S)].sens.toFixed(3),()=>e.s.statsProgress[o(S)].spec.toFixed(3),()=>e.s.statsProgress[o(S)].eff.toFixed(3),()=>e.s.statsProgress[o(S)].sel.toFixed(3)]),P(A,M)}),P(C,k)};Y(m,C=>{e.s.statsProgress?C(b,!1):C(p)})}var _=j(m);{var w=C=>{var k=lv(),y=B(k),E=B(y),z=j(y),A=B(z),S=j(z),M=B(S),T=j(S),L=B(T),F=j(T),O=B(F),q=j(F),N=B(q),I=j(q),W=B(I);oe((G,U,te,se)=>{ae(E,o(c).i),ae(A,o(c).int),ae(M,o(c).ncomp),ae(L,G),ae(O,U),ae(N,te),ae(W,se)},[()=>o(c).sens.toFixed(3),()=>o(c).spec.toFixed(3),()=>o(c).eff.toFixed(3),()=>o(c).sel.toFixed(3)]),P(C,k)};Y(_,C=>{o(c)&&C(w)})}P(d,h)};Y(f,d=>{e.s.statsGlobal&&e.s.nComp&&d(v)})}P(t,u),be()}const cv={small:30,medium:40,large:50,xlarge:60},uv={small:5,medium:8,large:12,xlarge:15},fv={small:6,medium:10,large:14,xlarge:18},jo={small:4,medium:6,large:8,xlarge:10},qa={small:12,medium:15,large:19,xlarge:21},Va={small:11,medium:15,large:17,xlarge:19},Es={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},qn=["●","◼","▲","▼","⬥","＋","✳","✕"],vv=.8,Da=.5,dv={small:5,medium:8,large:12,xlarge:15},St={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333"};function Oa(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function Ba(t,e){if(t!=null&&(Array.isArray(t)&&(t=st(t)),!(!Te(t)||t.length<1)))return t.apply(r=>qo((r-e[1])*e[0]+e[2])).v}function ut(t,e){return Ba(t,e.coords)}function Wa(t,e){return Ba(t,e.objects)}function Ya(t,e){if(t!=null&&(Array.isArray(t)&&(t=st(t)),!(!Te(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function Ua(t,e){return Ya(t,e.coords)}function Ha(t,e){return Ya(t,e.objects)}function Io(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Xr(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Fo(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Xr(Math.abs(vn($l(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Xr(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let s=Math.ceil(-Xr(Math.log10(e)));return s<=2?[0,Array.from(t).map(l=>l.toFixed(s))]:(r=s-2,s=2,Xr(Math.abs(Gr(t)))<=10?[-r,Array.from(t).map(l=>(l*Math.pow(10,r)).toFixed(s))]:[-r,Array.from(t).map(l=>(l/Math.pow(10,r)).toString())])}function Pt(t,e,r){return Array.isArray(t)&&(t=st(t)),Te(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function hv(t,e,r,s){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=r.coords,a=s.coords;let c="";for(let u=0;u<t.length;u++){const f=qo((t.v[u]-l[1])*l[0]+l[2]),v=qo((e.v[u]-a[1])*a[0]+a[2]);c+=f+","+v+" "}return c}function Ga(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>Dn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Ka(t,e){if(Array.isArray(t)&&(t=st(t)),!Te(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=s&c<=l);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function Xa(t,e,r,s,l,a){l==null&&(l=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const u=Math.abs(c[1]-c[0])*a,f=c[1]-c[0]-2*u,v=Math.floor(Math.log10(f)),d=1/Math.pow(10,v-1),h=Math.round(f*d)/d;let g=mv(h/r);l&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(g<1&&(g=1),g=Math.round(g)));let m=Math.ceil((c[0]+u)/g)*g,p=Math.floor((c[1]-u)/g)*g;Math.abs(c[0]-m)<g/10&&(m=m+g),Math.abs(c[1]-p)<g/10&&(p=p-g),r=Math.ceil(Xr((p-m)/g))+1,t=Le.zeros(r);for(let b=0;b<r;b++)t.v[b]=m+g*b;if(Math.abs(g)<1){const b=Math.pow(10,1+Math.round(-Math.log10(g)));t=t.apply(_=>Math.round((_+Number.EPSILON)*b)/b)}return t.filter(b=>b>=c[0]&b<=c[1])}function mv(t,e){const r=Math.floor(Math.log10(t)),s=t/Math.pow(10,r);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,r)}function qo(t){return Math.round(t*10)/10}function gv(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function Qa(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function pv(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function bv(t){let e=-1,r=pv();for(let s=0;s<t.length;s++)e=r[(e^t[s])&255]^e>>>8;return e^-1}function _v(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const s=bv(r),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(l,50),c}function wv(t,e){const r=t.split(","),s=r[0],l=r[1],a=33/3*4,c=l.substring(0,a),u=l.substring(a),f=atob(c),v=new Uint8Array(f.length);for(let g=0;g<v.length;g++)v[g]=f.charCodeAt(g);const d=_v(v,e),h=btoa(String.fromCharCode(...d));return[s,",",h,u].join("")}function yv(t,e,r,s,l){if(r||(r=10),s||(s=10),l||(l=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*l,c=s/2.54*l;setTimeout(()=>{const u=t.clientHeight,f=t.clientWidth;let v=Math.max(a/f,c/u),d=1;v<1&&(d=v,v=1);const h=document.createElement("canvas"),g=h.getContext("2d");h.width=f*(d<1?d:v),h.height=u*(d<1?d:v),t.setAttribute("width",f*v),t.setAttribute("height",u*v),g.fillStyle="white",g.fillRect(0,0,h.width,h.height),g.scale(v,v);const m=new XMLSerializer().serializeToString(t),p=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(p),_=new Image;_.onload=function(){d<0&&(_.width=_.width*d,_.height=_.height*d),g.drawImage(_,0,0,h.width,h.height);const w=h.toDataURL("image/png"),C=wv(w,l),k=document.createElement("a");k.href=C,k.download=`${e}.png`,k.click()},_.src=b},20)}function xv(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,s=t.clientWidth;t.setAttribute("width",s+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${s} ${r}`);const l=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(l),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function kv(t,e,r,s){const l=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Ev(e,r,s)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=l},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=l},500)}).catch(a=>console.error(a))}async function Ev(t,e,r){const s=t.clientHeight,l=t.clientWidth,a=Math.max(e/l,r/s),c=document.createElement("canvas"),u=c.getContext("2d");return c.width=l*a,c.height=s*a,u.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((v,d)=>{const h=new XMLSerializer().serializeToString(t),g=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,p=m.createObjectURL(g),b=new Image;b.onload=function(){u.drawImage(b,0,0,c.width,c.height),m.revokeObjectURL(p),c.toBlob(function(_){_?v(_):d(new Error("Failed to create blob"))},"image/png")},b.onerror=function(_){d(_)},b.src=p})}function Cv(t,e,r,s,l){let a=l.ticks,c=l.tickLabels,u=0;const f=Xa(a,t,uv[r.x],!0,l.whole),v=f.length,d=Ha([jo[r.plot]],s)[0],h=Le.fill(e[0],v),g=h.add(d),m=Le.fill(e[1],v);if(c||(a?(u=0,c=a.v.map(S=>Xr(S).toString())):[u,c]=Fo(f.v)),!c||c.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[f,h],[f,m]],b=[[st([t[0]]),st([e[0]])],[st([t[1]]),st([e[0]])]],_=[[f,g],[f,h]],w=(t[1]-t[0])*.01,C=[[null,null],[[t[1]-(u>9?1:0)*w],[h.v[v-1]]]],k=Io(u),y=c.length,E=Math.abs(t[1]>t[0]?t[1]-f.v[y-1]:t[1]-f.v[0]),z=Math.abs(t[1]-t[0]),A=Math.abs(f.v[1]-f.v[0]);if(k.length>0&&E<z*.1&&E<A*.5){const S=t[1]>t[0]?y-1:0;c[S]=" "}return{grid:p,axisLine:b,tickCoords:_,tfCoords:C,ticks:a,tickLabels:c,tickFactor:u,tfLabel:k}}function Av(t,e,r,s,l){let a=l.ticks,c=l.tickLabels,u=0;const f=Xa(l.ticks,e,fv[r.y],!0,l.whole),v=f.length,d=Ha([jo[r.plot]],s)[0],h=Le.fill(t[0],v),g=h.add(d),m=Le.fill(t[1],v);if(c||(a?(u=0,c=a.v.map(A=>Xr(A).toString())):[u,c]=Fo(f.v)),c.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[h,f],[m,f]],b=[[st([t[0]]),st([e[0]])],[st([t[0]]),st([e[1]])]],_=[[h,f],[g,f]],w=[[[],[]],[[g.v[v-1]+(Math.abs(u)>9?3:2)*d],[e[1]]]],C=Io(u),k=c.length,y=Math.abs(e[1]>e[0]?e[1]-f.v[k-1]:e[1]-f.v[0]),E=Math.abs(e[1]-e[0]),z=Math.abs(f.v[1]-f.v[0]);if(C.length>0&&y<E*.1&&y<z*.5){const A=e[1]>e[0]?k-1:0;c[A]=" "}return{grid:p,axisLine:b,tickCoords:_,tfCoords:w,ticks:a,tickLabels:c,tickFactor:u,tfLabel:C}}function Sv(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Te(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let s,l;if(t.labels?(s=t.labels,l=0):[l,s]=Fo(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=s.length===r.length;return{colmap:r,breaks:e,labels:s,isCentered:a,labelsFactor:l,fontSize:t.fontSize,labelColor:t.labelColor}}function Nv(t,e,r,s){const l=t.colmap.length,a=e*vv,c=a/l,u=r[1]+(e-a)*.5,f=dv[s.y],v=r[2]+f*Da,d=v+f*(1+Da),h=t.isCentered?c/2:0;return{start:u,top:v,height:f,width:c,dxl:h,ltop:d}}function Vn(t,e,r){if(!t||!e||!r||typeof r!="function")return;const s=t.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;r(l),t.stopPropagation()}}function Mv(t,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function zv(t,e){const r="Arial",s=e/8,l=e*1.5,a=Array(t.length),c=Array(t.length);let u=0,f=0,v=0;for(let h=0;h<t.length;h++){const g=Mv("  "+t[h].label+"  ",e+"px "+r);v=g>v?g:v;const m=e*t[h].labelHeight+2*s;a[h]=m,c[h]=u,u=u+m,f=f+m}const d=l+2*s+v;return[c,a,l,s,f,d]}function Pv(t,e,r,s,l){const[a,c,u,f,v,d]=zv(t.items,s*t.fontSize),h=t.position.includes("left")?e[0]+l:t.position.includes("right")?e[1]-d-l:(e[1]+e[0]-d)*.5,g=t.position.includes("top")?r[1]+l:t.position.includes("bottom")?r[0]-v-l:(r[1]+r[0]-v)*.5;return{lgl:h,lgt:g,lgw:d,lgh:v,ely:a,elh:c,elw:u,elp:f}}function Dn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<t.length;){const a=t[s];if((a==="^"||a==="_")&&s<t.length-1){const c=a==="^";if(s++,t[s]==="("){let u=s+1;for(;u<t.length&&t[u]!==")";)u++;const f=t.slice(s+1,u);l+=c?e(f):r(f),s=u+1}else if(t[s]==="-"||t[s]==="–"){const u=t.slice(s,s+2);l+=c?e(u):r(u),s=s+2}else l+=c?e(t[s]):r(t[s]),s++}else l+=a,s++}return l}var Tv=_e('<line vector-effect="non-scaling-stroke"></line>'),Lv=_e("<g></g>");function Vo(t,e){pe(e,!0);let r=H(e,"lineCoords",19,()=>[]),s=H(e,"lineColor",19,()=>St.DARKGRAY),l=H(e,"lineType",3,1),a=H(e,"lineWidth",3,1),c=H(e,"className",3,"");const u=Bt("axes");let f=R(()=>ut(r()[0][0],u.tX())),v=R(()=>ut(r()[1][0],u.tX())),d=R(()=>ut(r()[0][1],u.tY())),h=R(()=>ut(r()[1][1],u.tY())),g=R(()=>`stroke:${s()};stroke-width: ${a()}px;stroke-dasharray:${Es[u.scales().plot][l()-1]}`);var m=ce(),p=J(m);{var b=_=>{var w=Lv();Je(w,21,()=>o(f),et,(C,k,y)=>{var E=Tv();oe(()=>{V(E,"x1",o(f)[y]),V(E,"x2",o(v)[y]),V(E,"y1",o(d)[y]),V(E,"y2",o(h)[y]),Qt(E,o(g))}),P(C,E)}),oe(()=>pt(w,0,Nc(c()))),P(_,w)};Y(p,_=>{o(f)&&o(d)&&o(v)&&_(b)})}P(t,m),be()}var Rv=_e('<text text-anchor="middle"><!></text>'),jv=_e("<text><!></text>"),Iv=_e("<text><!></text>"),Fv=_e('<g class="tick-labels"><!></g>');function Ja(t,e){pe(e,!0);let r=H(e,"pos",3,1),s=H(e,"las",3,1),l=R(()=>["middle","middle","start","middle","end"][r()]),a=R(()=>`fill:${e.textColor};`);const c=Bt("axes");let u=R(()=>ut(e.tickCoords[1][0],c.tX())),f=R(()=>ut(e.tickCoords[1][1],c.tY())),v=R(()=>Va[c.scales().plot]),d=R(()=>[0,0,o(v),0,-o(v)][r()]),h=R(()=>[0,o(v),0,-o(v),0][r()]);var g=Fv(),m=B(g);{var p=_=>{var w=ce(),C=J(w);Je(C,17,()=>o(u),et,(k,y,E)=>{var z=Rv();V(z,"data-id",E),V(z,"dx",0);var A=B(z);At(A,()=>e.tickLabels[E],!0),oe(()=>{V(z,"x",o(u)[E]),V(z,"y",o(f)[E]),V(z,"dy",o(d)*1.25),V(z,"transform",`rotate(-90, ${o(u)[E]}, ${o(f)[E]})`)}),P(k,z)}),P(_,w)},b=_=>{var w=ce(),C=J(w);{var k=E=>{var z=ce(),A=J(z);Je(A,17,()=>o(u),et,(S,M,T)=>{var L=jv();V(L,"data-id",T),V(L,"dy",0),V(L,"text-anchor","end");var F=B(L);At(F,()=>e.tickLabels[T],!0),oe(()=>{V(L,"x",o(u)[T]),V(L,"y",o(f)[T]),V(L,"dx",-o(h)/2),V(L,"transform",`rotate(-90, ${o(u)[T]}, ${o(f)[T]})`)}),P(S,L)}),P(E,z)},y=E=>{var z=ce(),A=J(z);Je(A,17,()=>o(u),et,(S,M,T)=>{var L=Iv();V(L,"data-id",T);var F=B(L);At(F,()=>e.tickLabels[T],!0),oe(()=>{V(L,"x",o(u)[T]),V(L,"y",o(f)[T]),V(L,"dx",o(d)),V(L,"dy",o(h)),V(L,"text-anchor",o(l))}),P(S,L)}),P(E,z)};Y(C,E=>{s()===2&&r()===1?E(k):E(y,!1)},!0)}P(_,w)};Y(m,_=>{s()===2&&r()===4?_(p):_(b,!1)})}oe(()=>Qt(g,o(a))),P(t,g),be()}const qv=(t,e=kt,r=kt)=>{var s=Uv();const l=R(()=>e().colmap.length);var a=J(s);Je(a,17,()=>e().colmap,et,(d,h,g)=>{var m=Bv();const p=R(()=>r().start+g*r().width);var b=J(m),_=j(b);V(_,"dy",0);var w=B(_);At(w,()=>e().labels[g],!0),oe(()=>{V(b,"x",o(p)),V(b,"y",r().top),V(b,"width",r().width),V(b,"height",r().height),V(b,"fill",o(h)),V(_,"x",o(p)),V(_,"y",r().ltop),V(_,"dx",r().dxl),V(_,"fill",e().labelColor),V(_,"font-size",e().fontSize+"em")}),P(d,m)});var c=j(a);{var u=d=>{var h=Wv();const g=R(()=>r().start+o(l)*r().width);V(h,"dx",0),V(h,"dy",0);var m=B(h);At(m,()=>e().labels[o(l)],!0),oe(()=>{V(h,"x",o(g)),V(h,"y",r().ltop),V(h,"fill",e().labelColor),V(h,"font-size",`${e().fontSize??""}em`)}),P(d,h)};Y(c,d=>{e().isCentered||d(u)})}var f=j(c);{var v=d=>{var h=Yv();const g=R(()=>r().start+o(l)*r().width);var m=B(h);At(m,()=>Io(e().labelsFactor),!0),oe(()=>{V(h,"x",o(g)),V(h,"y",r().ltop),V(h,"fill",e().labelColor),V(h,"font-size",`${e().fontSize??""}em`)}),P(d,h)};Y(f,d=>{e().labelsFactor!==0&&d(v)})}P(t,s)};function Za(t,e,r){t.preventDefault(),e(t,r())}function $a(t,e,r){t.preventDefault(),e(t,r())}function ei(t,e,r){t.preventDefault(),e(t,r())}function Cs(t,e,r){t.preventDefault(),e(t,r())}async function ti(t,e,r,s){kv(t.target,o(e),r(),s())}function ri(t,e,r){xv(o(e),r())}function ni(t,e,r,s,l,a){yv(o(e),r(),s(),l(),a())}var Vv=_e('<text fill="crimson" text-anchor="middle"> </text>'),Dv=_e('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Ov=_e("<!><!><!><!><!>",1),Bv=_e('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Wv=_e('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Yv=_e('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Uv=_e("<!><!><!>",1),Hv=_e("<line></line>"),Gv=_e('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Kv=_e('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Xv=_e('<svg><rect height="100%" width="100%"></rect><!></svg>'),Qv=_e('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Jv=_e('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Zv=_e('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),$v=_e('<g class="plot-labels"><!><!><!></g>'),ed=_e('<g class="axis x-axis"><!></g>'),td=_e('<g class="axis y-axis"><!></g>'),rd=_e('<rect fill="transparent" id="axes-box"></rect>'),nd=_e('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),sd=_e('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),od=_e('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),ld=_e('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),ad=K('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),id=K('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),cd=K(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function ud(t,e){pe(e,!0);const r=(me,Se=kt,Ae=kt)=>{var ot=ce(),wt=J(ot);{var tr=Lt=>{var Ue=ce(),ze=J(Ue);{var yt=lt=>{var Xe=Vv(),Kt=B(Xe);oe(()=>{V(Xe,"x",o(X)[0]-10),V(Xe,"y",o(re)),V(Xe,"transform",`rotate(-90, ${o(X)[0]-10}, ${o(re)})`),ae(Kt,Ae().error)}),P(lt,Xe)},vt=lt=>{var Xe=Dv(),Kt=B(Xe);oe(()=>{V(Xe,"x",o(ee)),V(Xe,"y",o(Z)[0]),ae(Kt,Ae().error)}),P(lt,Xe)};Y(ze,lt=>{Ae().pos===4?lt(yt):lt(vt,!1)})}P(Lt,Ue)},Nt=Lt=>{var Ue=Ov(),ze=J(Ue);{var yt=ve=>{Vo(ve,{get lineCoords(){return Se().grid},get lineColor(){return St.MIDDLEGRAY},lineType:3})};Y(ze,ve=>{Ae().showGrid&&ve(yt)})}var vt=j(ze);Vo(vt,{get lineCoords(){return Se().axisLine},get lineColor(){return St.DARKGRAY},lineType:1});var lt=j(vt);Vo(lt,{get lineCoords(){return Se().tickCoords},get lineColor(){return St.DARKGRAY},lineType:1});var Xe=j(lt);{var Kt=ve=>{Ja(ve,{get las(){return Ae().las},get pos(){return Ae().pos},get tickCoords(){return Se().tickCoords},get tickLabels(){return Se().tickLabels},get tickColor(){return St.DARKGRAY},get hideLast(){return Ae().hideLast}})};Y(Xe,ve=>{Se().tickCoords.length===2&&Se().tickLabels.length===Se().tickCoords[1][0].length&&ve(Kt)})}var jr=j(Xe);{var Fe=ve=>{{let bt=R(()=>[Se().tfLabel]);Ja(ve,{get pos(){return Ae().pos},get tickCoords(){return Se().tfCoords},get tickLabels(){return o(bt)},get textColor(){return St.DARKGRAY}})}};Y(jr,ve=>{Se().tickFactor!==0&&ve(Fe)})}P(Lt,Ue)};Y(wt,Lt=>{Ae().error?Lt(tr):Lt(Nt,!1)})}P(me,ot)},s=(me,Se=kt,Ae=kt)=>{var ot=Xv();const wt=R(()=>Ae().elw+2*Ae().elp),tr=R(()=>Ae().elp),Nt=R(()=>Ae().elh),Lt=R(()=>Ae().ely);var Ue=B(ot),ze=j(Ue);Je(ze,17,()=>Se().items,et,(yt,vt,lt)=>{var Xe=Kv();V(Xe,"x",0);var Kt=B(Xe);{var jr=hr=>{var dt=Hv();oe(()=>{V(dt,"x1",o(tr)),V(dt,"x2",o(wt)-o(tr)),V(dt,"y1",o(Nt)[lt]/2),V(dt,"y2",o(Nt)[lt]/2),V(dt,"stroke",o(vt).line.lineColor),V(dt,"stroke-width",o(vt).line.lineWidth),V(dt,"stroke-dasharray",o(L)[o(vt).line.lineType-1])}),P(hr,dt)};Y(Kt,hr=>{o(vt).line&&hr(jr)})}var Fe=j(Kt);{var ve=hr=>{var dt=Gv(),Ho=B(dt);oe(()=>{V(dt,"x",o(wt)/2),V(dt,"y",o(Nt)[lt]/2),V(dt,"fill",o(vt).point.faceColor),V(dt,"stroke-width",o(vt).point.lineWidth),V(dt,"stroke",o(vt).point.lineColor),V(dt,"font-size",`${o(vt).point.markerSize??""}em`),ae(Ho,qn[o(vt).point.marker-1])}),P(hr,dt)};Y(Fe,hr=>{o(vt).point&&hr(ve)})}var bt=j(Fe),Ls=B(bt);At(Ls,()=>o(vt).label,!0),oe(()=>{V(Xe,"y",o(Lt)[lt]),V(Xe,"width",Ae().lgw),V(Xe,"height",o(Nt)[lt]),V(bt,"x",o(wt)+o(tr)),V(bt,"y",o(Nt)[lt]/2),V(bt,"fill",St.LEGEND),V(bt,"font-size",`${Se().fontSize??""}em`)}),P(yt,Xe)}),oe(()=>{V(ot,"x",Ae().lgl),V(ot,"y",Ae().lgt),V(ot,"height",Ae().lgh),V(ot,"width",Ae().lgw),V(Ue,"fill",Se().faceColor),V(Ue,"stroke",Se().lineColor),V(Ue,"stroke-width",Se().lineWidth)}),P(me,ot)};let l=H(e,"limX",19,()=>[0,1]),a=H(e,"limY",19,()=>[0,1]),c=H(e,"margins",19,()=>[1,1.1,.55,.6]),u=H(e,"downloadLinks",3,"none"),f=H(e,"fileName",3,"plot"),v=H(e,"pngWidth",3,8),d=H(e,"pngHeight",3,8),h=H(e,"pngRes",3,300),g=H(e,"clipboardWidth",3,1200),m=H(e,"clipboardHeight",3,800),p=H(e,"onclick",3,null),b=H(e,"onmousemove",3,null),_=H(e,"onmousedown",3,null),w=H(e,"onmouseup",3,null);function C(me,Se){if(Se&&me.target.id=="axes-box"){const Ae=Ua([me.offsetX-o(O)],o(te))[0],ot=Ua([me.offsetY-o(q)],o(se))[0];Se(Ae,ot)}}const k="plottingArea"+Math.round(Math.random()*1e4);let y=ue(0),E=ue(0),z=ue(0);const A=R(()=>({plot:gv(o(E),o(z)),x:Qa(o(E)),y:Qa(o(z))})),S=R(()=>c().map(me=>me*cv[o(A).plot])),M=R(()=>qa[o(A).plot]),T=R(()=>jo[o(A).plot]),L=R(()=>Es[o(A).plot]),F=R(()=>o(ie).show&&o(ie).label!==""?o(M)*1.5:0),O=R(()=>o(he).show&&o(he).label!==""?o(M)*1.5:0),q=R(()=>e.title&&e.title!==""?o(M)*1.5:0),N=R(()=>o(E)>o(O)?o(E)-o(O):0),I=R(()=>o(z)>o(F)+o(q)?o(z)-o(F)-o(q):0),W=R(()=>o(I)-o(S)[0]-o(S)[2]),G=R(()=>o(N)-o(S)[1]-o(S)[3]),U=R(()=>Oa(l(),2)&&Oa(a(),2)&&o(N)>o(S)[1]+o(S)[3]&&o(I)>o(S)[0]+o(S)[2]),te=R(()=>o(U)?{coords:[o(G)/(l()[1]-l()[0]),l()[0],o(S)[1]],objects:[o(G)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),se=R(()=>o(U)?{coords:[-o(W)/(a()[1]-a()[0]),a()[1],o(S)[2]],objects:[o(W)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),re=R(()=>o(W)*.5+o(q)+o(S)[2]),ee=R(()=>o(G)*.5+o(O)+o(S)[1]),X=R(()=>o(U)?ut(l(),o(te)):[0,1]),Z=R(()=>o(U)?ut(a(),o(se)):[1,0]),ne=R(()=>Dn(e.title)),fe=R(()=>o(ne)?o(ne).length===e.title.left?1:1.4:0);let ge=ue(rt({show:!1})),ie=ue(rt({show:!1,error:""})),he=ue(rt({show:!1,error:""})),qe=ue(rt({show:!1,colmap:null,breaks:null})),Ce=ue(rt({show:!1,items:null,position:null}));const Be=R(()=>o(U)&&o(qe)&&o(qe).show?Sv(o(qe)):null),Ie=R(()=>o(U)&&o(ie).show?Cv(l(),a(),o(A),o(se),o(ie)):null),We=R(()=>o(U)&&o(he).show?Av(l(),a(),o(A),o(te),o(he)):null),Ye=R(()=>o(U)&&o(Be)?Nv(o(Be),o(G),o(S),o(A)):null),ft=R(()=>o(U)&&o(Ce)&&o(Ce).show&&o(X)?Pv(o(Ce),o(X),o(Z),o(M),o(T)):null);Ui("axes",{setBox:me=>$(ge,me,!0),setXAxis:me=>$(ie,me,!0),setYAxis:me=>$(he,me,!0),setColmapLegend:me=>$(qe,me,!0),setGroupLegend:me=>$(Ce,me,!0),scales:()=>o(A),tX:()=>o(te),tY:()=>o(se),limX:()=>l(),limY:()=>a()});var Tt=cd();let He;var $e=B(Tt),gt=j(B($e));{var dr=me=>{var Se=$v(),Ae=B(Se);{var ot=Ue=>{var ze=Qv();V(ze,"dx",0),V(ze,"dy",0);var yt=B(ze);At(yt,()=>o(ie).label,!0),oe(()=>{V(ze,"x",o(ee)),V(ze,"y",o(I)+o(q))}),P(Ue,ze)};Y(Ae,Ue=>{o(ie).show&&o(ie).label&&o(ie).label!==""&&Ue(ot)})}var wt=j(Ae);{var tr=Ue=>{var ze=Jv();V(ze,"dx",0),V(ze,"dy",0);var yt=B(ze);At(yt,()=>o(he).label,!0),oe(()=>{V(ze,"x",o(M)/1.1*o(he).labelHeight),V(ze,"y",o(re)),V(ze,"transform",`rotate(-90, ${o(M)*o(he).labelHeight/1.1}, ${o(re)})`)}),P(Ue,ze)};Y(wt,Ue=>{o(he).show&&o(he).label&&o(he).label!==""&&Ue(tr)})}var Nt=j(wt);{var Lt=Ue=>{var ze=Zv();V(ze,"dx",0),V(ze,"dy",0);var yt=B(ze);At(yt,()=>o(ne),!0),oe(()=>{V(ze,"x",o(ee)),V(ze,"y",o(M)*o(fe))}),P(Ue,ze)};Y(Nt,Ue=>{o(ne)&&o(ne)!==""&&Ue(Lt)})}P(me,Se)};Y(gt,me=>{o(U)&&me(dr)})}var Gt=j(gt),yn=B(Gt),Rr=B(yn),xn=B(Rr),Oo=j(yn);{var Bo=me=>{var Se=ld(),Ae=J(Se);{var ot=Fe=>{var ve=ed(),bt=B(ve);r(bt,()=>o(Ie),()=>o(ie)),P(Fe,ve)};Y(Ae,Fe=>{o(ie).show&&o(Ie)&&Fe(ot)})}var wt=j(Ae);{var tr=Fe=>{var ve=td(),bt=B(ve);r(bt,()=>o(We),()=>o(he)),P(Fe,ve)};Y(wt,Fe=>{o(he).show&&o(We)&&Fe(tr)})}var Nt=j(wt),Lt=B(Nt);{var Ue=Fe=>{var ve=rd();ve.__keydown=[Cs,C,p],ve.__click=[Cs,C,p],ve.__mousemove=[ei,C,b],ve.__mousedown=[Za,C,_],ve.__mouseup=[$a,C,w],oe(()=>{V(ve,"stroke",o(ge).lineColor),V(ve,"stroke-width",`${o(ge).lineWidth??""}px`),V(ve,"x",o(X)[0]),V(ve,"y",o(Z)[1]),V(ve,"width",o(X)[1]-o(X)[0]),V(ve,"height",o(Z)[0]-o(Z)[1])}),P(Fe,ve)},ze=Fe=>{var ve=nd();ve.__keydown=[Cs,C,p],ve.__click=[Cs,C,p],ve.__mousemove=[ei,C,b],ve.__mousedown=[Za,C,_],ve.__mouseup=[$a,C,w],oe(()=>{V(ve,"x",o(X)[0]),V(ve,"y",o(Z)[1]),V(ve,"width",o(X)[1]-o(X)[0]),V(ve,"height",o(Z)[0]-o(Z)[1])}),P(Fe,ve)};Y(Lt,Fe=>{o(ge).show?Fe(Ue):Fe(ze,!1)})}var yt=j(Nt),vt=B(yt);Nr(vt,()=>e.children??kt);var lt=j(yt);{var Xe=Fe=>{var ve=sd(),bt=B(ve);qv(bt,()=>o(Be),()=>o(Ye)),P(Fe,ve)};Y(lt,Fe=>{o(Ye)&&Fe(Xe)})}var Kt=j(lt);{var jr=Fe=>{var ve=od(),bt=B(ve);s(bt,()=>o(Ce),()=>o(ft)),P(Fe,ve)};Y(Kt,Fe=>{o(ft)&&Fe(jr)})}oe(()=>V(yt,"clip-path",`url(#${k})`)),P(me,Se)};Y(Oo,me=>{o(U)&&me(Bo)})}Tn($e,me=>$(y,me),()=>o(y));var Wo=j($e,2);{var Yo=me=>{var Se=ad();P(me,Se)},Uo=me=>{var Se=id(),Ae=B(Se);Ae.__click=[ri,y,f],Ae.__keydown=[ri,y,f];var ot=j(Ae,2);ot.__click=[ni,y,f,v,d,h],ot.__keydown=[ni,y,f,v,d,h];var wt=j(ot,2);wt.__click=[ti,y,g,m],wt.__keydown=[ti,y,g,m],P(me,Se)};Y(Wo,me=>{o(U)?me(Uo,!1):me(Yo)})}oe(me=>{He=pt(Tt,1,`plot-container show-download-links-${u()??""}`,"svelte-1jtdxd0",He,me),Qt($e,`font-size:${o(M)??""}px`),V(Gt,"x",o(O)),V(Gt,"y",o(q)),V(Gt,"width",o(N)),V(Gt,"height",o(I)),V(Rr,"id",k),V(xn,"x",o(X)[0]),V(xn,"y",o(Z)[1]),V(xn,"width",o(X)[1]-o(X)[0]),V(xn,"height",o(Z)[0]-o(Z)[1])},[()=>({"plot-error":!o(U)})]),Ql($e,"clientWidth",me=>$(E,me)),Ql($e,"clientHeight",me=>$(z,me)),P(t,Tt),be()}ct(["keydown","click","mousemove","mousedown","mouseup"]);function As(t,e){pe(e,!0);let r=H(e,"tickLabels",7),s=H(e,"las",3,1),l=H(e,"whole",3,!1),a=H(e,"show",3,!0),c=H(e,"showGrid",3,!1);const u=Bt("axes");we(()=>{const f=Dn(e.label),v=f?f.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=Ka(e.ticks,u.limX())),!h&&r()&&(g=>{var m=qs(g,2);r(m[0]),h=m[1]})(Ga(r(),d)),u.setXAxis({show:a(),error:h,label:f,ticks:d,labelHeight:v,showGrid:c(),las:s(),whole:l(),tickLabels:r()})}),be()}function Ss(t,e){pe(e,!0);let r=H(e,"tickLabels",7),s=H(e,"las",3,1),l=H(e,"whole",3,!1),a=H(e,"show",3,!0),c=H(e,"showGrid",3,!1);const u=Bt("axes");we(()=>{const f=Dn(e.label),v=f?f.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=Ka(e.ticks,u.limY())),!h&&r()&&(g=>{var m=qs(g,2);r(m[0]),h=m[1]})(Ga(r(),d)),u.setYAxis({show:a(),error:h,label:f,ticks:d,labelHeight:v,showGrid:c(),las:s(),whole:l(),tickLabels:r(),pos:4})}),be()}function Ns(t,e){pe(e,!0);let r=H(e,"lineWidth",3,1),s=H(e,"lineColor",3,"#606060");const l=Bt("axes");we(()=>{l.setBox({show:!0,lineWidth:r(),lineColor:s()})}),be()}var fd=(t,e)=>Vn(t,"rect",e.onclick),vd=_e("<rect></rect>"),dd=_e("<g></g>");function fr(t,e){pe(e,!0);let r=H(e,"faceColor",19,()=>St.PRIMARY),s=H(e,"lineColor",19,r),l=H(e,"lineWidth",3,1),a=H(e,"className",3,"series-rect");const c=R(()=>Pt(e.left,"Rectangles (left)")),u=R(()=>o(c)?Pt(e.top,"Rectangles (top)",o(c).length):null),f=R(()=>o(u)?typeof e.width!="object"?Le.fill(e.width,o(c).length):e.width:null),v=R(()=>o(u)?typeof e.height!="object"?Le.fill(e.height,o(c).length):e.height:null),d=Bt("axes"),h=R(()=>o(c)?ut(o(c),d.tX()):null),g=R(()=>o(u)?ut(o(u),d.tY()):null),m=R(()=>o(f)?Wa(o(f),d.tX()):null),p=R(()=>o(v)?Wa(o(v),d.tY()):null),b=R(()=>`fill:${r()};stroke:${s()};stroke-width:${l()}px;`),_=R(()=>o(h)&&o(g)&&o(m)&&o(p)&&o(m).length===o(h).length&&o(p).length===o(h).length);var w=ce(),C=J(w);{var k=y=>{var E=dd();E.__click=[fd,e],Je(E,21,()=>e.left,et,(z,A,S)=>{var M=vd();oe(()=>{V(M,"x",o(h)[S]),V(M,"y",o(g)[S]),V(M,"width",o(m)[S]),V(M,"height",o(p)[S])}),P(z,M)}),oe(()=>{pt(E,0,`series ${a()??""}`),Qt(E,o(b))}),P(y,E)};Y(C,y=>{o(_)&&y(k)})}P(t,w),be()}ct(["click"]);var hd=(t,e)=>Vn(t,"line",e.onclick),md=_e("<line></line>"),gd=_e('<g class="series series-segment"></g>');function Do(t,e){pe(e,!0);let r=H(e,"lineColor",19,()=>St.PRIMARY),s=H(e,"lineType",3,1),l=H(e,"lineWidth",3,1);const a=R(()=>Pt(e.xStart,"Segments")),c=R(()=>o(a)?Pt(e.yStart,"Segments",o(a).length):null),u=R(()=>o(c)?Pt(e.xEnd,"Segments",o(a).length):null),f=R(()=>o(u)?Pt(e.yEnd,"Segments",o(a).length):null),v=Bt("axes"),d=R(()=>o(a)?ut(o(a),v.tX()):null),h=R(()=>o(u)?ut(o(u),v.tX()):null),g=R(()=>o(c)?ut(o(c),v.tY()):null),m=R(()=>o(f)?ut(o(f),v.tY()):null),p=R(()=>`stroke:${r()};stroke-width: ${l()}px;stroke-dasharray:${Es[v.scales().plot][s()-1]}`),b=R(()=>o(d)&&o(h)&&o(g)&&o(m));var _=ce(),w=J(_);{var C=k=>{var y=gd();y.__click=[hd,e],Je(y,21,()=>o(d),et,(E,z,A)=>{var S=md();oe(()=>{V(S,"x1",o(d)[A]),V(S,"x2",o(h)[A]),V(S,"y1",o(g)[A]),V(S,"y2",o(m)[A])}),P(E,S)}),oe(()=>Qt(y,o(p))),P(k,y)};Y(w,k=>{o(b)&&k(C)})}P(t,_),be()}ct(["click"]);var pd=(t,e)=>Vn(t,"text",e.onclick),bd=_e("<text><!></text>"),_d=_e("<text><!></text>"),wd=_e("<text><!></text>"),yd=_e('<g class="series series-textlabels"><!></g>');function si(t,e){pe(e,!0);let r=H(e,"pos",3,0),s=H(e,"faceColor",19,()=>St.PRIMARY_TEXT),l=H(e,"lineColor",3,"transparent"),a=H(e,"lineWidth",3,0),c=H(e,"textSize",3,1),u=H(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],v=R(()=>Pt(e.xValues,"TextLabels")),d=R(()=>o(v)?Pt(e.yValues,"TextLabels",o(v).length):null),h=R(()=>o(d)?Array.isArray(e.labels)&&e.labels.length!==o(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),g=R(()=>o(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),m=Bt("axes"),p=R(()=>o(v)&&o(g)!==null?ut(o(v),m.tX()):null),b=R(()=>o(d)&&o(p)?ut(o(d),m.tY()):null),_=R(()=>Va[m.scales().plot]),w=R(()=>[0,0,-o(_),0,o(_),o(_)]),C=R(()=>[0,o(_),0,-o(_),0,o(_)]),k=R(()=>`fill:${s()};stroke-width:${a()}px;stroke:${l()};font-size:${c()}em;`),y=R(()=>o(p)&&o(b)&&o(g)!==null&&o(h)&&o(p).length===o(b).length);var E=ce(),z=J(E);{var A=S=>{var M=yd();M.__click=[pd,e];var T=B(M);{var L=O=>{var q=ce(),N=J(q);Je(N,17,()=>o(p),et,(I,W,G)=>{var U=bd();V(U,"data-id",G);var te=B(U);At(te,()=>e.labels,!0),oe(()=>{V(U,"x",o(p)[G]),V(U,"y",o(b)[G]),V(U,"dx",o(w)[r()]),V(U,"dy",o(C)[r()]),V(U,"transform",u()!==void 0?`rotate(${u()}, ${o(p)[G]+o(w)[r()]}, ${o(b)[G]+o(C)[r()]})`:""),V(U,"text-anchor",f[r()[G]])}),P(I,U)}),P(O,q)},F=O=>{var q=ce(),N=J(q);{var I=G=>{var U=ce(),te=J(U);Je(te,17,()=>o(p),et,(se,re,ee)=>{var X=_d();V(X,"data-id",ee);var Z=B(X);At(Z,()=>e.labels[ee],!0),oe(()=>{V(X,"x",o(p)[ee]),V(X,"y",o(b)[ee]),V(X,"dx",o(w)[r()[ee]]),V(X,"dy",o(C)[r()[ee]]),V(X,"transform",u()!==void 0?`rotate(${u()}, ${o(p)[ee]+o(w)[r()]}, ${o(b)[ee]+o(C)[r()]})`:""),V(X,"text-anchor",f[r()[ee]])}),P(se,X)}),P(G,U)},W=G=>{var U=ce(),te=J(U);Je(te,17,()=>o(p),et,(se,re,ee)=>{var X=wd();V(X,"data-id",ee);var Z=B(X);At(Z,()=>e.labels[ee],!0),oe(()=>{V(X,"x",o(p)[ee]),V(X,"y",o(b)[ee]),V(X,"dx",o(w)[r()]),V(X,"dy",o(C)[r()]),V(X,"transform",u()!==void 0?`rotate(${u()}, ${o(p)[ee]+o(w)[r()]}, ${o(b)[ee]+o(C)[r()]})`:""),V(X,"text-anchor",f[r()])}),P(se,X)}),P(G,U)};Y(N,G=>{Array.isArray(r())||ArrayBuffer.isView(r())?G(I):G(W,!1)},!0)}P(O,q)};Y(T,O=>{typeof e.labels=="string"?O(L):O(F,!1)})}oe(()=>Qt(M,o(k))),P(S,M)};Y(z,S=>{o(y)&&S(A)})}P(t,E),be()}ct(["click"]),ct(["click"]);var xd=(t,e)=>Vn(t,"text",e.onclick),kd=_e("<text> </text>"),Ed=_e('<g text-anchor="middle"></g>');function Ht(t,e){pe(e,!0);let r=H(e,"marker",3,1),s=H(e,"faceColor",3,"transparent"),l=H(e,"lineColor",19,()=>St.PRIMARY),a=H(e,"lineWidth",3,1),c=H(e,"markerSize",3,1);const u=R(()=>typeof r()!="number"||r()<1||r()>qn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+qn.length+"."),null):qn[r()-1]),f=R(()=>Pt(e.xValues,"Points")),v=R(()=>o(f)?Pt(e.yValues,"Points",o(f).length):null),d=Bt("axes"),h=R(()=>o(f)?ut(o(f),d.tX()):null),g=R(()=>o(h)&&o(v)?ut(o(v),d.tY()):null),m=R(()=>["＋","✳","✕"].includes(o(u))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${c()}em;`:`fill:${s()};stroke-width:${a()}px;stroke:${l()}; font-size:${c()}em;`),p=R(()=>["◼","⬥","＋","✳","✕"].includes(o(u))?"series-points2":"series-points1"),b=R(()=>o(h)&&o(g)&&o(h).length===o(g).length);var _=ce(),w=J(_);{var C=k=>{var y=Ed();y.__click=[xd,e],Je(y,21,()=>o(h),et,(E,z,A)=>{var S=kd(),M=B(S);oe(()=>{V(S,"x",o(h)[A]),V(S,"y",o(g)[A]),ae(M,o(u))}),P(E,S)}),oe(()=>{pt(y,0,`series series-points ${o(p)??""}`),Qt(y,o(m))}),P(k,y)};Y(w,k=>{o(b)&&k(C)})}P(t,_),be()}ct(["click"]);var Cd=(t,e)=>Vn(t,"polyline",e.onclick),Ad=_e('<g class="series series-line"><polyline class="line"></polyline></g>');function vr(t,e){pe(e,!0);let r=H(e,"lineColor",19,()=>St.PRIMARY),s=H(e,"lineType",3,1),l=H(e,"lineWidth",3,1);const a=R(()=>Pt(e.xValues,"Lines")),c=R(()=>o(a)?Pt(e.yValues,"Lines",o(a).length):null),u=Bt("axes"),f=R(()=>o(a)&&o(c)?hv(o(a),o(c),u.tX(),u.tY()):null),v=R(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${Es[u.scales().plot][s()-1]}`);var d=ce(),h=J(d);{var g=m=>{var p=Ad();p.__click=[Cd,e];var b=B(p);oe(()=>{Qt(p,o(v)),V(b,"points",o(f))}),P(m,p)};Y(h,m=>{o(f)&&m(g)})}P(t,d),be()}ct(["click"]),ct(["click"]);function Sd(t,e){pe(e,!0);let r=H(e,"show",3,!0),s=H(e,"position",3,"topleft"),l=H(e,"lineColor",19,()=>St.LEGEND),a=H(e,"lineWidth",3,1),c=H(e,"faceColor",3,"#fff"),u=H(e,"fontSize",3,.85);function f(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function v(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let g=0;g<h.length;g++){const m=h[g];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=Dn(m.label),b=p.length===m.label?1:1.4;m.label=p,m.labelHeight=b,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(g+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:St.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=qn.length||console.error('Legend: parameter "marker" for legend item '+(g+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.markerSize=m.point.markerSize?m.point.markerSize:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:St.PRIMARY)}return h}const d=Bt("axes");we(()=>{const h=v(e.items),g=f(s());d.setGroupLegend(h&&g?{show:r(),position:s(),items:e.items,lineColor:l(),faceColor:c(),lineWidth:a(),fontSize:u()}:{show:!1,position:null,items:null})}),be()}var Nd=K("<!> <!> <!>",1);function oi(t,e){pe(e,!0);const r="#80808060",s=R(()=>e.calset.varvalues),l=R(()=>{if(!e.calset)return null;const v=o(s).length;let d=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;const g=Le.zeros(v),m=Le.zeros(v);for(let p=0;p<o(s).length;p++){const b=e.calset.values.getcolumn(p+1),_=fn(b),w=go(b),C=_+w,k=_-w;g.v[p]=_,m.v[p]=w,d=Math.min(d,k),h=Math.max(h,C)}return{m:g,s:m,mn:d,mx:h,scale:1/(h-d)}}),a=R(()=>{if(!o(l))return null;let v=e.limY[1]-e.limY[0],d=e.limY[0]+v*.1;v=e.limY[1]-v*.3-d;const g=o(s).length,m=Le.zeros(g),p=Le.zeros(g),b=Le.zeros(g),_=o(l).scale*v;for(let w=0;w<g;w++){const C=o(l).m.v[w],k=o(l).s.v[w],y=C+k,E=C+k;p.v[w]=(y-o(l).mn)*_+d,b.v[w]=(E-o(l).mn)*_+d,m.v[w]=(C-o(l).mn)*_+d}return{m,su:p,sb:b}});var c=ce(),u=J(c);{var f=v=>{var d=Nd(),h=J(d);vr(h,{get xValues(){return o(s)},get yValues(){return o(a).m},lineColor:r,lineWidth:2});var g=j(h,2);vr(g,{get xValues(){return o(s)},get yValues(){return o(a).sb},lineColor:r,lineWidth:1,lineType:3});var m=j(g,2);vr(m,{get xValues(){return o(s)},get yValues(){return o(a).su},lineColor:r,lineWidth:1,lineType:3}),P(v,d)};Y(u,v=>{o(a)&&v(f)})}P(t,c),be()}const Md=[1,1.1,.45,.4],zd=8,Pd=8,Td=600;function Ms(t,e){ud(t,{get limX(){return e.limX},get limY(){return e.limY},get title(){return e.title},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return Md},get pngWidth(){return zd},get pngHeight(){return Pd},get pngRes(){return Td},children:(r,s)=>{var l=ce(),a=J(l);Nr(a,()=>e.children),P(r,l)},$$slots:{default:!0}})}var Ld=K("<!> <!> <!> <!> <!> <!> <!>",1);function Rd(t,e){pe(e,!0);const r="ddsimca-love-intervals",s=R(()=>e.props.s);function l(w){if(!w)return[0,1];const C=w.varvalues[0],k=w.varvalues[w.varvalues.length-1],y=k-C;return[C-y*.1,k+y*.025]}const a=R(()=>{if(!o(s).outcomes)return"Data and intervals";if(o(s).outcomes.status==="running")return"Calculation in progress..."}),c=R(()=>o(s).calset.varAxisTitle),u=R(()=>o(s).varselparams?Array(o(s).varselparams.nInt).fill(10):null),f=R(()=>o(s).varselparams?Array(o(s).varselparams.nInt).fill(22):null),v=R(()=>o(u)&&o(f)?{left:o(s).varselparams.left,width:o(s).varselparams.width,top:o(u),height:o(f)}:null),d=R(()=>{if(o(v)&&o(s).intExcluded.length>0){const w=o(s).intExcluded.length,C=Array(w),k=Array(w),y=Array(w),E=Array(w);for(let z=0;z<w;z++)C[z]=o(v).left[o(s).intExcluded[z]],k[z]=o(v).width[o(s).intExcluded[z]],y[z]=o(v).top[o(s).intExcluded[z]],E[z]=o(v).height[o(s).intExcluded[z]];return{left:C,width:k,top:y,height:E}}else return null}),h=R(()=>o(s).outcomes&&o(s).outcomes.status==="running"&&o(v)?{left:[o(v).left[o(s).outcomes.curInt]],width:[o(v).width[o(s).outcomes.curInt]],top:[2],height:[4],faceColor:"#fffa0040"}:null),g=R(()=>l(o(s).calset)),m=R(()=>[0,1.1]);var p=ce(),b=J(p);{var _=w=>{Ms(w,{fileName:r,get limX(){return o(g)},get limY(){return o(m)},get title(){return o(a)},children:(C,k)=>{var y=Ld(),E=J(y);oi(E,{get calset(){return o(s).calset},get limY(){return o(m)}});var z=j(E,2);{var A=N=>{fr(N,je({lineColor:"transparent",faceColor:"#00000040"},()=>o(d)))};Y(z,N=>{o(d)&&N(A)})}var S=j(z,2);{var M=N=>{var I=ce(),W=J(I);{var G=U=>{fr(U,je(()=>o(h)))};Y(W,U=>{o(h)&&U(G)})}P(N,I)};Y(S,N=>{o(s).outcomes&&o(s).outcomes.status==="running"&&N(M)})}var T=j(S,2);{var L=N=>{fr(N,je({lineColor:"#00000010",faceColor:"#00000005"},()=>o(v)))};Y(T,N=>{o(v)&&N(L)})}var F=j(T,2);Ns(F,{});var O=j(F,2);As(O,{get label(){return o(c)}});var q=j(O,2);Ss(q,{showGrid:!0}),P(C,y)}})};Y(b,w=>{o(g)&&o(m)&&w(_)})}P(t,p),be()}var jd=_e("<text><!></text>");function li(t,e){pe(e,!0);let r=H(e,"dx",3,0);H(e,"dy",3,0);let s=H(e,"pos",3,0),l=H(e,"faceColor",19,()=>Colors.PRIMARY_TEXT),a=H(e,"textSize",3,1);function c(){return s()<.25?"start":s()>.75?"end":"middle"}function u(w){return w<.25?e.x:w>.75?e.x+r():e.x+r()/2}const f=R(()=>c(s())),v=Bt("axes"),d=R(()=>e.x?ut(Pt([u(s())]),v.tX()):null),h=R(()=>e.y?ut(Pt([e.y]),v.tY()):null),g=R(()=>qa[v.scales().plot]),m=R(()=>e.x&&e.y);var p=ce(),b=J(p);{var _=w=>{var C=ce(),k=J(C);Je(k,17,()=>e.label,et,(y,E,z)=>{var A=jd(),S=B(A);At(S,()=>o(E),!0),oe(()=>{V(A,"x",o(d)),V(A,"y",o(h)-o(g)*z),V(A,"text-anchor",o(f)),V(A,"fill",l()),V(A,"font-size",`${a()??""}em`)}),P(y,A)}),P(w,C)};Y(b,w=>{o(m)&&w(_)})}P(t,p),be()}var Id=K("<!> <!>",1),Fd=K("<!> <!> <!>",1),qd=K("<!> <!>",1),Vd=K("<!> <!>",1),Dd=K("<!> <!>",1),Od=K("<!> <!> <!>; <!>",1);function Bd(t,e){pe(e,!0);let r=H(e,"yMin",15),s=H(e,"yMax",15);const l=R(()=>{if(!e.fomView||!e.s.outcomes||e.s.outcomes.status!=="done")return{min:0,max:1,values:null};const p=e.s.varselparams.mid,b=e.s.varselparams.width,_=p.length;let w=0,C=0,k={};const y=e.fomView==="diff"?.21:.84,E=e.fomView==="diff"?1:0,z=.42;let A=0;for(const S of e.fomKeys){const M=e.s.outcomes[S][e.fomView].getcolumn(e.s.nComp).v,T=Array(_),L=Array(_),F=Array(_),O=Array(_);for(let q=0;q<_;q++)T[q]=p[q]-z*b[q]+A*y*E*b[q],O[q]=y*b[q],M[q]>=0?(L[q]=M[q],F[q]=M[q],C=Math.max(C,M[q])):(L[q]=0,F[q]=-M[q],w=Math.min(w,M[q]));k[S]={left:T,top:L,height:F,width:O,faceColor:"#a8a04060"},A=A+1}return{values:k,min:w,max:C}}),a=R(()=>o(l)?(o(l).max-o(l).min)*.2:0);we(()=>{r(o(l).min-o(a)),s(o(l).max+o(a))});const c=R(()=>{if(!o(l)||!o(l).values||e.s.intSelected===void 0||e.s.intSelected===null||e.s.intSelected<0)return null;const p=e.s.intSelected,b={},_={},w=o(l).values[e.fomKeys[0]],C=w.left[p],k=w.width[p];let y,E;e.fomView==="diff"?(y=C-k/2,E=k*e.fomKeys.length+k):(y=C,E=k);for(const z of e.fomKeys){const A=o(l).values[z],S=A.left[p],M=A.width[p],T=A.top[p],L=A.height[p],F=T===0?-L:L,O=e.s.varselparams.intLabels[p];b[z]={left:[S],width:[M],top:[T],height:[L]},_[z]={x:y,y:e.fomView==="diff"?s()-.5*o(a):1.02,dx:E,dy:o(a),label:[F.toFixed(3),O],pos:p/e.s.varselparams.nInt,textSize:.8,faceColor:e.seriesColors.selected}}return{psl:b,tsl:_}}),u=R(()=>e.s.statsGlobal&&e.fom?e.s.statsGlobal[e.fom][e.s.statsGlobal.ncompBest?e.s.statsGlobal.ncompBest-1:e.s.nComp-1]:null),f=R(()=>e.s.statsCurrent&&e.fom&&e.s.statsCurrent.ncompBest?e.s.statsCurrent[e.fom][e.s.statsCurrent.ncompBest?e.s.statsCurrent.ncompBest-1:e.s.nComp-1]:null),v=R(()=>o(l).values&&e.fom?o(l).values[e.fom]:null),d=R(()=>o(v)?(e.limX[0]+o(v).left[0])*.5:0);var h=ce(),g=J(h);{var m=p=>{var b=ce(),_=J(b);{var w=k=>{var y=Fd(),E=J(y);{let M=R(()=>[e.limX[0]]),T=R(()=>[e.limX[1]]);Do(E,{get xStart(){return o(M)},get xEnd(){return o(T)},yStart:[0],yEnd:[0],lineColor:"#808080"})}var z=j(E,2);Je(z,17,()=>e.fomKeys,et,(M,T)=>{{let L=R(()=>"#a8a040"+(o(T)===e.fom?"e0":"60"));fr(M,je(()=>o(l).values[o(T)],{lineWidth:0,get faceColor(){return o(L)}}))}});var A=j(z,2);{var S=M=>{var T=Id(),L=J(T);Je(L,17,()=>e.fomKeys,et,(O,q)=>{{let N=R(()=>e.seriesColors.selected+(o(q)===e.fom?"":"40"));fr(O,je(()=>o(c).psl[o(q)],{lineWidth:0,get faceColor(){return o(N)}}))}});var F=j(L,2);li(F,je(()=>o(c).tsl[e.fom])),P(M,T)};Y(A,M=>{o(c)&&M(S)})}P(k,y)},C=k=>{var y=Od(),E=J(y);{var z=F=>{var O=qd(),q=J(O);{let I=R(()=>[e.limX[0]]),W=R(()=>[e.limX[1]]),G=R(()=>[o(u)]),U=R(()=>[o(u)]);Do(q,{get xStart(){return o(I)},get xEnd(){return o(W)},get yStart(){return o(G)},get yEnd(){return o(U)},get lineColor(){return e.seriesColors.global}})}var N=j(q,2);{let I=R(()=>[o(d)]),W=R(()=>[o(u)]),G=R(()=>[o(u).toFixed(3)]),U=R(()=>o(u)>o(f)?3:1);si(N,{get xValues(){return o(I)},get yValues(){return o(W)},get labels(){return o(G)},get pos(){return o(U)},textSize:.85,get faceColor(){return e.seriesColors.global}})}P(F,O)};Y(E,F=>{o(u)&&F(z)})}var A=j(E,2);{var S=F=>{var O=Vd(),q=J(O);{let I=R(()=>[e.limX[0]]),W=R(()=>[e.limX[1]]),G=R(()=>[o(f)]),U=R(()=>[o(f)]);Do(q,{get xStart(){return o(I)},get xEnd(){return o(W)},get yStart(){return o(G)},get yEnd(){return o(U)},lineType:3,get lineColor(){return e.seriesColors.best}})}var N=j(q,2);{let I=R(()=>[o(d)]),W=R(()=>[o(f)]),G=R(()=>[o(f).toFixed(3)]),U=R(()=>o(u)>o(f)?1:3);si(N,{get xValues(){return o(I)},get yValues(){return o(W)},get labels(){return o(G)},get pos(){return o(U)},textSize:.85,get faceColor(){return e.seriesColors.best}})}P(F,O)};Y(A,F=>{o(f)&&F(S)})}var M=j(A,2);fr(M,je(()=>o(v),{faceColor:"#a8a04080"}));var T=j(M,2);{var L=F=>{var O=Dd(),q=J(O);fr(q,je(()=>o(c).psl[e.fom],{lineWidth:0,get faceColor(){return e.seriesColors.selected}}));var N=j(q,2);li(N,je(()=>o(c).tsl[e.fom])),P(F,O)};Y(T,F=>{o(c)&&F(L)})}P(k,y)};Y(_,k=>{e.fomView==="diff"?k(w):k(C,!1)})}P(p,b)};Y(g,p=>{o(l)&&p(m)})}P(t,h),be()}var Wd=K("<!> <!> <!> <!> <!> <!> <!> <!>",1);function Yd(t,e){pe(e,!0);const r="ddsimca-love-outcomes",s=R(()=>e.props?e.props.s:null),l=R(()=>e.props?e.props.fomKeys:null),a=R(()=>e.props?e.props.fomNames:null),c=R(()=>e.props?e.props.seriesColors:null);let u=ue(0),f=ue(1),v=R(()=>o(s).calset.varAxisTitle);function d(z){if(!z)return[0,1];const A=z.varvalues[0],S=z.varvalues[z.varvalues.length-1],M=S-A;return[A-M*.1,S+M*.025]}const h=R(()=>o(s).outcomes?o(s).outcomes.status==="running"?"Selection in progress...":"Variable selection outcomes (A = "+o(s).nComp+")":"Data and intervals"),g=R(()=>!o(s).outcomes||o(s).outcomes.status==="running"?" ":(e.params.fomView==="diff"?"Difference in ":"")+o(a)[e.params.fom]),m=R(()=>o(s).varselparams?Array(o(s).varselparams.nInt).fill(10):null),p=R(()=>o(s).varselparams?Array(o(s).varselparams.nInt).fill(22):null),b=R(()=>o(m)&&o(p)?{left:o(s).varselparams.left,width:o(s).varselparams.width,top:o(m),height:o(p)}:null),_=R(()=>{if(o(b)&&o(s).intExcluded.length>0){const z=o(s).intExcluded.length,A=Array(z),S=Array(z),M=Array(z),T=Array(z);for(let L=0;L<z;L++)A[L]=o(b).left[o(s).intExcluded[L]],S[L]=o(b).width[o(s).intExcluded[L]],M[L]=o(b).top[o(s).intExcluded[L]],T[L]=o(b).height[o(s).intExcluded[L]];return{left:A,width:S,top:M,height:T}}else return null}),w=R(()=>d(o(s).calset)),C=R(()=>e.params.fomView==="diff"?[o(u),o(f)]:[0,1.1]);var k=ce(),y=J(k);{var E=z=>{Ms(z,{fileName:r,get limX(){return o(w)},get limY(){return o(C)},get title(){return o(h)},children:(A,S)=>{var M=Wd(),T=J(M);oi(T,{get calset(){return o(s).calset},get limY(){return o(C)}});var L=j(T,2);{var F=re=>{Bd(re,{get s(){return o(s)},get limX(){return o(w)},get fomKeys(){return o(l)},get seriesColors(){return o(c)},get fomView(){return e.params.fomView},get fom(){return e.params.fom},get yMin(){return o(u)},set yMin(ee){$(u,ee,!0)},get yMax(){return o(f)},set yMax(ee){$(f,ee,!0)}})};Y(L,re=>{o(s).outcomes&&re(F)})}var O=j(L,2);{var q=re=>{{let ee=R(()=>[o(b).left[o(s).intSelected]]),X=R(()=>[o(b).width[o(s).intSelected]]),Z=R(()=>[o(b).top[o(s).intSelected]]),ne=R(()=>[o(b).height[o(s).intSelected]]);fr(re,{get left(){return o(ee)},get width(){return o(X)},get top(){return o(Z)},get height(){return o(ne)},lineColor:"#00000010",faceColor:"#ff000010"})}};Y(O,re=>{o(b)&&o(s).intSelected>=0&&re(q)})}var N=j(O,2);{var I=re=>{fr(re,je({className:"series-love-intervals",lineColor:"#00000010",faceColor:"#00000005"},()=>o(b),{get onclick(){return e.callbacks.select}}))};Y(N,re=>{o(b)&&re(I)})}var W=j(N,2);{var G=re=>{fr(re,je({lineColor:"transparent",faceColor:"#00000040"},()=>o(_)))};Y(W,re=>{o(_)&&re(G)})}var U=j(W,2);Ns(U,{});var te=j(U,2);As(te,{get label(){return o(v)}});var se=j(te,2);Ss(se,{get label(){return o(g)},showGrid:!0}),P(A,M)}})};Y(y,z=>{e.params&&o(w)&&o(C)&&z(E)})}P(t,k),be()}var Ud=K("<!> <!>",1),Hd=K("<!> <!> <!>",1),Gd=K("<!> <!>",1),Kd=K("<!> <!> <!> <!> <!>",1),Xd=K("<!> <!> <!> <!> <!>",1);function Qd(t,e){pe(e,!0);const r="ddsimca-love-progress",s=R(()=>e.props?e.props.s:null),l=R(()=>e.props?e.props.fomKeys:null),a=R(()=>e.props?e.props.fomNames:null),c=R(()=>e.props?e.props.seriesColors:null),u="Variable selection progress",f="Steps",v=R(()=>o(a)[e.params.fom]),d=R(()=>o(s).statsProgress?o(s).statsProgress.length:0),h=R(()=>o(d)>0?ur(0,o(d)-1):null),g=R(()=>{if(o(d)<1)return null;const S={};let M=1.1,T=0;for(let L=0;L<o(d);L++){const F=o(s).statsProgress[L];for(const O of o(l)){L===0&&(S[O]=[]);const q=F[O];S[O].push(q),M=Math.min(M,q),T=Math.max(T,q)}}return{series:S,min:M,max:T}}),m=R(()=>o(g)?{xValues:o(h),yValues:o(g).series[e.params.fom]}:null),p=R(()=>o(m)?{xValues:[o(d)-1],yValues:[o(m).yValues[o(d)-1]]}:null),b=R(()=>o(m)?{xValues:[0],yValues:[o(m).yValues[0]]}:null),_=R(()=>{if(!o(m)||!o(s).outcomes||o(s).outcomes.status!=="done"||o(s).intSelected<0)return null;let S=1,M=0,T={};for(const L of o(l)){const F=o(s).outcomes[L].val.getcolumn(o(s).nComp).v[o(s).intSelected];S=Math.min(S,F),M=Math.max(M,F),T[L]={xValues:[o(d)-1,o(d)],yValues:[o(g).series[L][o(d)-1],F]}}return{series:T,min:S,max:M}}),w=R(()=>o(_)?o(_).series[e.params.fom]:null),C=R(()=>o(p)?{xValues:[o(d)-1,o(d)],yValues:[o(p).yValues[0],o(w).yValues[1]]}:null),k=R(()=>o(d)>0?o(w)?[-.5,o(d)+.5]:[-.5,o(d)-.5]:[0,1]),y=R(()=>{if(!o(g)||!e.params.zoom)return[0,1.1];const S=o(g).min,M=o(g).max;return o(_)?[Math.min(S,o(_).min)-.02,Math.max(M,o(_).max+.02)]:[S-.02,M+.02]});var E=ce(),z=J(E);{var A=S=>{Ms(S,{fileName:r,get limX(){return o(k)},get limY(){return o(y)},title:u,children:(M,T)=>{var L=Xd(),F=J(L);{var O=U=>{var te=Hd(),se=J(te);Je(se,17,()=>Object.keys(o(_).series),et,(X,Z)=>{var ne=Ud(),fe=J(ne);vr(fe,je(()=>o(_).series[o(Z)],{lineColor:"#d0d0d0",lineType:3}));var ge=j(fe,2);Ht(ge,je(()=>o(_).series[o(Z)],{markerSize:.75,lineColor:"#d0d0d0",faceColor:"#e0e0e0"})),P(X,ne)});var re=j(se,2);vr(re,je(()=>o(C),{get lineColor(){return o(c).selected},lineType:3}));var ee=j(re,2);Ht(ee,je(()=>o(w),{get lineColor(){return o(c).selected},get faceColor(){return o(c).selected},borderWidth:2})),P(U,te)};Y(F,U=>{o(w)&&U(O)})}var q=j(F,2);{var N=U=>{var te=Kd(),se=J(te);Je(se,17,()=>Object.keys(o(g).series),et,(ne,fe)=>{var ge=Gd(),ie=J(ge);vr(ie,{get xValues(){return o(h)},get yValues(){return o(g).series[o(fe)]},lineColor:"#d0d0d0"});var he=j(ie,2);Ht(he,{get xValues(){return o(h)},get yValues(){return o(g).series[o(fe)]},markerSize:.75,lineColor:"#d0d0d0",faceColor:"#e0e0e0"}),P(ne,ge)});var re=j(se,2);vr(re,je(()=>o(m),{lineColor:"#808080",lineWidth:2}));var ee=j(re,2);Ht(ee,je(()=>o(m),{lineColor:"#808080",faceColor:"#fafafa"}));var X=j(ee,2);Ht(X,je(()=>o(p),{get lineColor(){return o(c).best},lineWidth:2}));var Z=j(X,2);Ht(Z,je(()=>o(b),{get lineColor(){return o(c).global},lineWidth:2})),P(U,te)};Y(q,U=>{o(m)&&U(N)})}var I=j(q,2);Ns(I,{});var W=j(I,2);As(W,{showGrid:!0,label:f,whole:!0});var G=j(W,2);Ss(G,{showGrid:!0,get label(){return o(v)}}),P(M,L)}})};Y(z,S=>{o(g)&&S(A)})}P(t,E),be()}var Jd=K("<!> <!> <!>",1),Zd=K("<!> <!> <!>",1),$d=K("<!> <!> <!>",1),e1=K("<!> <!> <!> <!> <!> <!> <!>",1);function t1(t,e){pe(e,!0);const r=R(()=>e.props.s),s=R(()=>e.props?e.props.fomKeys:null),l=R(()=>e.props?e.props.fomNames:null),a=R(()=>e.props?e.props.seriesColors:null),c="ddsimca-love-models",u="PCs",f="Variable selection outcomes",v=[0,1.1],d=R(()=>o(l)[e.params.fom]);function h(M,T){return{label:M,line:{lineColor:T.lineColor},point:{lineColor:T.lineColor,lineWidth:1.25,faceColor:"#fafafa",marker:1}}}function g(M,T,L){const F=[];return M&&F.push(h("global",M)),T&&F.push(h("current",T)),L&&F.push(h("selected ("+(o(r).intSelected+1)+")",L)),F}let m=R(()=>o(r).statsGlobal?o(r).statsGlobal[[o(s)[0]]].length:1),p=R(()=>[0,o(m)+1]),b=R(()=>o(r).statsGlobal&&e.params.fom?{xValues:Le.seq(1,o(m)),yValues:new Le(o(r).statsGlobal[e.params.fom]),lineColor:o(a).global}:null),_=R(()=>o(b)?{xValues:[o(r).nComp],yValues:[o(b).yValues.v[o(r).nComp-1]],lineColor:o(a).global}:null),w=R(()=>o(r).statsCurrent&&e.params.fom?{xValues:Le.seq(1,o(r).statsCurrent[e.params.fom].length),yValues:new Le(o(r).statsCurrent[e.params.fom]),lineColor:o(a).best}:null),C=R(()=>o(w)?{xValues:[o(r).nComp],yValues:[o(w).yValues.v[o(r).nComp-1]],lineColor:o(a).best}:null),k=R(()=>o(r).outcomes&&e.params.fom&&o(r).intSelected>=0?{xValues:Le.seq(1,o(r).outcomes[e.params.fom].val.ncols),yValues:o(r).outcomes[e.params.fom].val.getrow(o(r).intSelected+1),lineColor:o(a).selected}:null),y=R(()=>o(k)?{xValues:[o(r).nComp],yValues:[o(k).yValues.v[o(r).nComp-1]],lineColor:o(a).selected}:null),E=R(()=>g(o(b),o(w),o(k)));var z=ce(),A=J(z);{var S=M=>{Ms(M,{fileName:c,get limX(){return o(p)},get limY(){return v},title:f,children:(T,L)=>{var F=e1(),O=J(F);{var q=ee=>{var X=Jd(),Z=J(X);vr(Z,je(()=>o(b)));var ne=j(Z,2);Ht(ne,je(()=>o(b),{faceColor:"#fafafa"}));var fe=j(ne,2);Ht(fe,je(()=>o(_),{faceColor:"#fafafa",lineWidth:3})),P(ee,X)};Y(O,ee=>{o(b)&&ee(q)})}var N=j(O,2);{var I=ee=>{var X=Zd(),Z=J(X);vr(Z,je(()=>o(w)));var ne=j(Z,2);Ht(ne,je(()=>o(w),{faceColor:"#fafafa"}));var fe=j(ne,2);Ht(fe,je(()=>o(C),{faceColor:"#fafafa",lineWidth:3})),P(ee,X)};Y(N,ee=>{o(w)&&ee(I)})}var W=j(N,2);{var G=ee=>{var X=$d(),Z=J(X);vr(Z,je(()=>o(k)));var ne=j(Z,2);Ht(ne,je(()=>o(k),{faceColor:"#fafafa"}));var fe=j(ne,2);Ht(fe,je(()=>o(y),{faceColor:"#fafafa",lineWidth:3})),P(ee,X)};Y(W,ee=>{o(k)&&ee(G)})}var U=j(W,2);Sd(U,{get items(){return o(E)},position:"bottomright"});var te=j(U,2);Ns(te,{});var se=j(te,2);As(se,{showGrid:!0,label:u,whole:!0});var re=j(se,2);Ss(re,{showGrid:!0,get label(){return o(d)}}),P(T,F)}})};Y(A,M=>{e.params&&M(S)})}P(t,z),be()}function r1(t,e){pe(e,!0);const r=R(()=>e.props.s);we(()=>{e.selected>-1&&e.props.selectInt(e.selected)}),we(()=>{o(r).intSelected<0&&e.callbacks.select(o(r).intSelected)});var s=ce(),l=J(s);{var a=u=>{Yd(u,{get props(){return e.props},get params(){return e.params},get callbacks(){return e.callbacks},get selected(){return e.selected}})},c=u=>{var f=ce(),v=J(f);{var d=g=>{Qd(g,{get props(){return e.props},get params(){return e.params}})},h=g=>{var m=ce(),p=J(m);{var b=w=>{t1(w,{get props(){return e.props},get params(){return e.params}})},_=w=>{Rd(w,{get props(){return e.props},get params(){return e.params}})};Y(p,w=>{e.params.plot==="statistics"?w(b):w(_,!1)},!0)}P(g,m)};Y(v,g=>{e.params.plot==="progress"&&o(r).statsProgress?g(d):g(h,!1)},!0)}P(u,f)};Y(l,u=>{e.params.plot==="intervals"&&o(r).outcomes&&o(r).outcomes.status==="done"?u(a):u(c,!1)})}P(t,s),be()}var n1=K('<div class="msg-select"> </div>'),s1=K('<div class="msg-select"> </div>'),o1=K('<div class="msg-select"> </div>'),l1=K('<div class="msg-select"> </div>'),a1=K('<div class="selected-buttons svelte-8mh2yv"><!></div>'),i1=K('<div class="selected-buttons svelte-8mh2yv"><!></div>'),c1=K("<!> <!> <!>",1),u1=()=>switchPlot(i),f1=(t,e,r)=>$(e,o(r),!0),v1=K("<button> </button>"),d1=K('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!> <!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function h1(t,e){pe(e,!0);let r=H(e,"selobjText",3,"Click to select an object..."),s=H(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=H(e,"clearText",3,"Click anywhere to remove selection..."),a=H(e,"params",15),c=rt({objects:-1,variables:[]}),u=ue(rt(Object.keys(e.plots)[0]));function f(M,T){c.objects=T?T[M]:M}function v(M){c.objects=-1}function d(M){c.variables=M}function h(M){c.variables=[]}let g={objects:{select:f,unselect:v},variables:{select:d,unselect:h},stats:{}},m=R(()=>o(u)?e.plots[o(u)]:null),p=R(()=>o(m)?o(m).component:null);var b=d1(),_=B(b),w=B(_),C=B(w);uo(C,()=>o(p),(M,T)=>{T(M,{get params(){return a()[o(u)]},get callbacks(){return g[o(m).scope]},get selected(){return c[o(m).scope]},get props(){return e.props}})});var k=j(w,2),y=B(k);{var E=M=>{var T=ce(),L=J(T);{var F=q=>{var N=n1(),I=B(N);oe(()=>ae(I,r())),P(q,N)},O=q=>{var N=s1(),I=B(N);oe(()=>ae(I,l())),P(q,N)};Y(L,q=>{c[o(m).scope]<0?q(F):q(O,!1)})}P(M,T)};Y(y,M=>{o(m).scope==="objects"&&a()[o(u)].plotType!=="l"&&r().length>0&&M(E)})}var z=j(y,2);{var A=M=>{var T=ce(),L=J(T);{var F=q=>{var N=o1(),I=B(N);oe(()=>ae(I,s())),P(q,N)},O=q=>{var N=l1(),I=B(N);oe(()=>ae(I,l())),P(q,N)};Y(L,q=>{c[o(m).scope].length===0?q(F):q(O,!1)})}P(M,T)};Y(z,M=>{o(m).scope==="variables"&&a()[o(u)].plotType!=="l"&&s().length>0&&M(A)})}var S=j(_,2);Je(S,21,()=>Object.keys(e.plots),et,(M,T)=>{var L=ce(),F=J(L);{var O=N=>{var I=c1(),W=J(I);xf(W,{get title(){return o(m).label},labelWidth:12,get options(){return e.controls[o(u)]},get value(){return a()[o(u)]},set value(re){a(a()[o(u)]=re,!0)}});var G=j(W,2);{var U=re=>{var ee=a1(),X=B(ee);Nr(X,()=>o(m).buttons,()=>c.objects),P(re,ee)};Y(G,re=>{o(m).scope==="objects"&&o(m).buttons&&c.objects>=0&&re(U)})}var te=j(G,2);{var se=re=>{var ee=i1(),X=B(ee);Nr(X,()=>o(m).buttons,()=>c.variables),P(re,ee)};Y(te,re=>{o(m).scope==="variables"&&o(m).buttons&&c.variables.length>0&&re(se)})}P(N,I)},q=N=>{var I=v1();I.__keydown=[u1],I.__click=[f1,u,T];var W=B(I);oe(()=>{pt(I,1,`plot-selector plot-selector-${o(T)??""}`,"svelte-8mh2yv"),ae(W,e.plots[o(T)].label)}),P(N,I)};Y(F,N=>{o(m)&&o(u)===o(T)?N(O):N(q,!1)})}P(M,L)}),P(t,b),be()}ct(["keydown","click"]);var m1=K("<!> <!>",1);function g1(t,e){pe(e,!0);const r=(p,b=kt)=>{var _=ce(),w=J(_);{var C=k=>{{let y=R(()=>e.s.intSelected+1);de(k,{get label(){return`Selected (${o(y)??""})`},children:(E,z)=>{var A=m1(),S=J(A);ht(S,{get onclick(){return e.cancelSelection},text:"cancel"});var M=j(S,2);ht(M,{onclick:()=>e.setExcluded(e.s.intSelected),text:"exclude"}),P(E,A)},$$slots:{default:!0}})}};Y(w,k=>{e.s.intSelected>=0&&k(C)})}P(p,_)};let s=ue(!0);const l={sens:"sensitivity",spec:"specificity",eff:"efficiency",sel:"selectivity"},a=Object.keys(l),c={global:"#404040",best:"#2679B2",selected:"#D22C2F"},u=["intervals","progress","statistics"],f=hn(e.s.altset)?["sens"]:["sens","spec","eff","sel"],v={txt:{el:qt,hidden:!1,default:"Run selection",label:"Run selection"},plot:{el:qt,name:"plot",hidden:!1,default:"intervals",label:"Show",props:{options:u}},fom:{el:qt,name:"fom",hidden:!1,default:"sens",label:"Statistic",props:{options:f}},nComp:{el:La,name:"ncomp",hidden:!1,default:1,label:"# PCs",props:{min:1,max:1,step:1,decNum:0}},fomView:{el:qt,name:"fomview",hidden:!1,default:"val",label:"Show",props:{options:["diff","val"]}},zoom:{el:Fn,name:"zoom",hidden:!1,default:!1,label:"Zoom",props:{options:["off","on"]}}},d=R(()=>({main:{label:"Outcomes",scope:"objects",component:r1,buttons:r}})),h=rt({main:v});let g=ue(rt({main:rf(v)}));we(()=>{e.s.outcomes&&e.s.outcomes.status==="done"&&(h.main.nComp.props.max=e.s.outcomes.ncomp)}),we(()=>{e.s.outcomes&&e.s.outcomes.status==="running"?($(s,!0),o(g).main.plot="intervals",h.main.txt.hidden=!1,h.main.plot.hidden=!0):($(s,!1),h.main.txt.hidden=!0,h.main.plot.hidden=!1)}),we(()=>{o(g).main.plot==="intervals"&&e.s.outcomes&&e.s.outcomes.status==="done"?h.main.fomView.hidden=!1:h.main.fomView.hidden=!0}),we(()=>{o(g).main.plot==="intervals"&&e.s.outcomes&&e.s.outcomes.status==="done"||o(g).main.plot==="progress"||o(g).main.plot==="statistics"?h.main.fom.hidden=!1:h.main.fom.hidden=!0}),we(()=>{o(g).main.plot!=="progress"?h.main.zoom.hidden=!0:h.main.zoom.hidden=o(s)}),we(()=>{o(g).main.plot==="progress"||!e.s.outcomes||e.s.outcomes.status!=="done"?h.main.nComp.hidden=!0:h.main.nComp.hidden=o(s)}),we(()=>{e.s.statsProgress?h.main.plot={label:"Show",hidden:!1,el:qt,props:{options:["intervals","progress","statistics"]}}:(h.main.plot={label:"Show",hidden:!1,el:qt,props:{options:["intervals","statistics"]}},o(g).plot==="progress"&&(o(g).plots="intervals"))}),we(()=>{e.setNComp(o(g).main.nComp)});const m=R(()=>({s:e.s,seriesColors:c,fomKeys:a,fomNames:l,selectInt:e.selectInt}));h1(t,{get props(){return o(m)},get plots(){return o(d)},get controls(){return h},selobjText:"",",":!0,get params(){return o(g)},set params(p){$(g,p,!0)}}),be()}var p1=K('<p class="title">Variable selection settings</p>'),b1=K('<p style="padding: 0.25em; font-weight:bold;"> </p>'),_1=K('<p style="padding: 0.25em; font-weight:bold;"> </p>'),w1=K("<!> <!>",1),y1=K('<p style="padding: 0.25em; font-weight:bold;"> </p> <!>',1),x1=K('<p style="padding: 0.25em;font-weight:bold;">Calculation in progress...</p>'),k1=K('<p style="padding: 0.25em;font-weight:bold;">Select interval</p>'),E1=K('<p style="padding: 0.25em;color:crimson;font-weight:bold;">No intervals left for selection.</p>'),C1=K("<!> <!> <!> <!>",1);function A1(t,e){pe(e,!0);let r=H(e,"varselparams",15),s=H(e,"outcomes",15),l=H(e,"alpha",15);const a=[10,5,1,.1];let c=e.calset.values.ncols,u=ue(rt(r()?r().nInt:c<50?c:10)),f=ue(rt(e.curNInt)),v=e.calset.varvalues,d=e.calset.varlabels,h=Ju(c);async function g(S){const{center:M,scale:T,ncomp:L}=e.model,{nInt:F}=r(),O=e.calset.values,q=e.tarset.values,N=hn(e.altset)?null:e.altset.values,I=O.ncols-e.varsExcluded.length-r().intSize,W=L>I?I:L,G=nt.zeros(W,F),U=nt.zeros(W,F),te=nt.zeros(W,F),se=nt.zeros(W,F),re=nt.zeros(W,F),ee=nt.zeros(W,F),X=nt.zeros(W,F),Z=nt.zeros(W,F);for(let ne=0;ne<F;ne++){if(e.intExcluded.length>0&&e.intExcluded.includes(ne))continue;s({status:"running",curInt:ne});const fe=ur(r().intLeftIndices[ne],r().intRightIndices[ne]),ge=r().intSize===1?[...e.varsExcluded,ne]:e.varsExcluded.concat(fe),ie=await Xu(e.WASM,{varInd:ge,nComp:W,Xcal:O,Xtar:q,Xalt:N,center:M,scale:T,statsCurrent:e.statsCurrent,alpha:l()});G.v.set(ie.sens.val,ne*W),U.v.set(ie.spec.val,ne*W),te.v.set(ie.eff.val,ne*W),se.v.set(ie.sel.val,ne*W),re.v.set(ie.sens.diff,ne*W),ee.v.set(ie.spec.diff,ne*W),X.v.set(ie.eff.diff,ne*W),Z.v.set(ie.sel.diff,ne*W)}s({status:"done",ncomp:W,sens:{val:G.t(),diff:re.t()},spec:{val:U.t(),diff:ee.t()},eff:{val:te.t(),diff:X.t()},sel:{val:se.t(),diff:Z.t()}})}we(()=>{o(f)!==o(u)&&($(f,o(u),!0),s(null))}),we(()=>{r(Qu(c,o(u),null,v,d))});var m=C1(),p=J(m);de(p,{label:"",children:(S,M)=>{var T=p1();P(S,T)},$$slots:{default:!0}});var b=j(p,2);{var _=S=>{de(S,{name:"alpha",label:"Alpha, %:",children:(M,T)=>{qt(M,{id:"alpha",get options(){return a},get value(){return l()},set value(L){l(L)}})},$$slots:{default:!0}})},w=S=>{de(S,{label:"Alpha, %:",children:(M,T)=>{var L=b1(),F=B(L);oe(()=>ae(F,l())),P(M,L)},$$slots:{default:!0}})};Y(b,S=>{e.intExcluded.length===0&&!s()?S(_):S(w,!1)})}var C=j(b,2);{var k=S=>{var M=ce(),T=J(M);{var L=O=>{de(O,{name:"nint",label:"N. of intervals:",children:(q,N)=>{qt(q,{id:"nInt",get options(){return h},get value(){return o(u)},set value(I){$(u,I,!0)}})},$$slots:{default:!0}})},F=O=>{de(O,{label:"N. of intervals:",children:(q,N)=>{var I=_1(),W=B(I);oe(()=>ae(W,o(u))),P(q,I)},$$slots:{default:!0}})};Y(T,O=>{!s()||s().status!=="running"?O(L):O(F,!1)})}P(S,M)},y=S=>{de(S,{label:"N. of intervals:",children:(M,T)=>{var L=y1(),F=J(L),O=B(F),q=j(F,2);{var N=I=>{var W=w1(),G=J(W);{var U=se=>{ef(se,{get onclick(){return e.undoExcluded}})};Y(G,se=>{e.intExcluded.length>=2&&se(U)})}var te=j(G,2);mn(te,{get onclick(){return e.resetExcluded}}),P(I,W)};Y(q,I=>{(!s()||s().status!=="running")&&I(N)})}oe(()=>ae(O,`${o(u)??""} (${e.intExcluded.length??""} out, ${r().nInt-e.intExcluded.length} in)`)),P(M,L)},$$slots:{default:!0}})};Y(C,S=>{e.intExcluded.length===0||!r()?S(k):S(y,!1)})}var E=j(C,2);{var z=S=>{de(S,{label:" ",children:(M,T)=>{var L=ce(),F=J(L);{var O=N=>{var I=x1();P(N,I)},q=N=>{var I=k1();P(N,I)};Y(F,N=>{s().status==="running"?N(O):N(q,!1)})}P(M,L)},$$slots:{default:!0}})},A=S=>{var M=ce(),T=J(M);{var L=F=>{de(F,{label:" ",children:(O,q)=>{var N=ce(),I=J(N);{var W=U=>{{let te=R(()=>e.intExcluded.length>0?"new":"");ht(U,{id:"run",onclick:()=>g(),get text(){return`Run ${o(te)??""}`}})}},G=U=>{var te=E1();P(U,te)};Y(I,U=>{e.intExcluded.length<r().nInt-1&&e.varsExcluded.length<r().nVars-2?U(W):U(G,!1)})}P(O,N)},$$slots:{default:!0}})};Y(T,F=>{r()&&F(L)})}P(S,M)};Y(E,S=>{s()&&!(s().status==="done"&&e.intExcluded.length===0)?S(z):S(A,!1)})}P(t,m),be()}var S1=K('<div class="model-calculator svelte-1cx2u9k"><!></div>'),N1=K("<!> <!>",1),M1=K("<h2>Upload target test set</h2>"),z1=K("<!> <!>",1),P1=K("<h2>Generate PV-set</h2>"),T1=K("<!> <!>",1),L1=K('<div class="tarset-loader svelte-1cx2u9k"><!></div>'),R1=K("<!> <!>",1),j1=K("<h2>Load alternative test set</h2>"),I1=K("<!> <!>",1),F1=K("<p>No alternative set (rigorous mode)</p> <!>",1),q1=K('<div class="data-loader-alt svelte-1cx2u9k"><!> <!></div>'),V1=K('<div class="love-settings svelte-1cx2u9k"><!></div>'),D1=K('<div class="res-table svelte-1cx2u9k"><!></div>'),O1=K('<div class="downloads-widget svelte-1cx2u9k"><!></div>'),B1=K(`<p class="svelte-1cx2u9k"><strong>Step 1. Load training set from a CSV file.</strong></p> <p class="svelte-1cx2u9k">The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1cx2u9k">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1cx2u9k">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1cx2u9k"><table class="svelte-1cx2u9k"><thead class="svelte-1cx2u9k"><tr class="svelte-1cx2u9k"><td class="svelte-1cx2u9k">Name</td><td class="svelte-1cx2u9k">Class</td><td class="svelte-1cx2u9k">x1</td><td class="svelte-1cx2u9k">x2</td><td class="svelte-1cx2u9k">x3</td></tr></thead><tbody><tr><td class="svelte-1cx2u9k">O1</td><td class="svelte-1cx2u9k">A</td><td class="svelte-1cx2u9k">3.8</td><td class="svelte-1cx2u9k">1.3</td><td class="svelte-1cx2u9k">13.6</td></tr><tr><td class="svelte-1cx2u9k">O2</td><td class="svelte-1cx2u9k">A</td><td class="svelte-1cx2u9k">11.1</td><td class="svelte-1cx2u9k">12.3</td><td class="svelte-1cx2u9k">3.3</td></tr><tr><td class="svelte-1cx2u9k">O3</td><td class="svelte-1cx2u9k">A</td><td class="svelte-1cx2u9k">1.2</td><td class="svelte-1cx2u9k">2.3</td><td class="svelte-1cx2u9k">4.2</td></tr></tbody></table></div> <p class="svelte-1cx2u9k"></p>`,1),W1=K(`<p class="svelte-1cx2u9k"><strong>Step 2. Create a global PCA model</strong></p> <p class="svelte-1cx2u9k">Next step is to create a global PCA model for the calibration set, which will be the basis for the SIMCA model. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to set
               optimal number later.</p>`,1),Y1=K('<p class="svelte-1cx2u9k"><strong>Step 3. Compute PV-set</strong></p> <p class="svelte-1cx2u9k">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p>',1),U1=K('<p class="svelte-1cx2u9k"><strong>Step 4. Load or skip dataset with objects of alternative classes</strong></p> <p class="svelte-1cx2u9k">Finally you can either load test set with alternative classes members from a CSV file or skip it and work only with target class (rigorous mode). In case if you want to load the alternatvie dataset, the file should be organized in the same way as the training set.</p> <p class="svelte-1cx2u9k">After this step you will be able to start variable selection procedure.</p>',1),H1=K(`<div class="help-text svelte-1cx2u9k"><p class="svelte-1cx2u9k">In this app can apply DDSIMCA-LOVE &mdash; interactive method for variable selection for DD-SIMCA classifier. The method can work
               in <em>compliant</em> (with both target class objects and objects from alternative classes) or in rigorous (using only target class objects) mode. After selection is done, you can use the final model and/or rediced datasets in the main <a href="https://mda.tools/ddsimca/" class="svelte-1cx2u9k">DD-SIMCA app</a>.</p> <!> <!> <!> <!></div>`),G1=K('<div class="app-container svelte-1cx2u9k"><div class="app-controls svelte-1cx2u9k"><div class="data-loader-train svelte-1cx2u9k"><!></div> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1cx2u9k"><!></div></div>');function K1(t,e){pe(e,!0);const r=R(()=>e.session.train);let s=ue(!1);async function l(){if(o(r).intExcluded.length<2)return;o(r).intSelected=-1;const N=o(r).intExcluded[o(r).intExcluded.length-1];if(!(N>=0))return;o(r).statsProgress.pop();const I=o(r).varselparams.intLeftIndices[N],W=o(r).varselparams.intRightIndices[N],G=W===I?1:W-I+1;o(r).intExcluded.pop(),o(r).varsExcluded=o(r).varsExcluded.slice(0,o(r).varsExcluded.length-G);const U=o(r).statsProgress.length;o(r).nComp=o(r).statsProgress[U-1].ncomp,o(r).intSelected=-1,o(r).outcomes=null,$(s,!0),await Na(e.WASM,o(r));const te=o(r).currentRes.simca.ncomp,se=o(r).currentRes.tar.simca.stat.sensitivity,re=o(r).currentRes.alt.simca.stat.specificity,ee=o(r).currentRes.alt.simca.stat.selectivity,X=se.map((Z,ne)=>Math.sqrt(Z*re[ne]));o(r).statsCurrent={ncomp:se.length,ncompBest:te,sens:new Float64Array(se),spec:new Float64Array(re),eff:new Float64Array(X),sel:new Float64Array(ee)}}function a(){const N=o(r).intSelected;Number.isNaN(N)||N<0||N>=o(r).varselparams.nInt||o(r).intExcluded.length>0&&o(r).intExcluded.includes(N)||(o(r).intExcluded.length===0&&(o(r).statsGlobal.ncompBest=o(r).nComp),o(r).statsCurrent={ncomp:o(r).outcomes.nComp,ncompBest:o(r).nComp,sens:o(r).outcomes.sens.val.getrow(N+1).v,spec:o(r).outcomes.spec.val.getrow(N+1).v,eff:o(r).outcomes.eff.val.getrow(N+1).v,sel:o(r).outcomes.sel.val.getrow(N+1).v},o(r).statsProgress||(o(r).statsProgress=[{ncomp:o(r).nComp,int:N+1,sens:o(r).statsGlobal.sens[o(r).nComp-1],spec:o(r).statsGlobal.spec[o(r).nComp-1],eff:o(r).statsGlobal.eff[o(r).nComp-1],sel:o(r).statsGlobal.sel[o(r).nComp-1]}]),o(r).statsProgress.push({ncomp:o(r).nComp,int:N+1,sens:o(r).statsCurrent.sens[o(r).nComp-1],spec:o(r).statsCurrent.spec[o(r).nComp-1],eff:o(r).statsCurrent.eff[o(r).nComp-1],sel:o(r).statsCurrent.sel[o(r).nComp-1]}),o(r).intExcluded.push(N),o(r).varsExcluded=o(r).varsExcluded.concat(ur(o(r).varselparams.intLeftIndices[N],o(r).varselparams.intRightIndices[N])),o(r).intSelected=-1,o(r).outcomes=null,Na(e.WASM,o(r)))}function c(N){o(r).nComp=N}function u(N){o(r).intSelected=N}function f(){o(r).intExcluded=[],o(r).varsExcluded=[],o(r).statsCurrent=o(r).statsGlobal?{ncompBest:null,ncomp:o(r).statsGlobal.ncomp,sens:o(r).statsGlobal.sens,spec:o(r).statsGlobal.spec,eff:o(r).statsGlobal.eff,sel:o(r).statsGlobal.sel}:null,o(r).statsProgress=null,o(r).intSelected=-1,o(r).outcomes=null,o(r).statsGlobal&&(o(r).statsGlobal.ncompBest=null)}function v(){o(r).intSelected=-1}function d(){o(r).hasAlt=void 0,o(r).altres=null,o(r).altset=null}we(()=>{o(r).calset===null&&(o(r).calres=null,o(r).model=null)}),we(()=>{o(r).model===null&&(o(r).tarres=null,o(r).tarsetType=null,o(r).tarset=null)}),we(()=>{o(r).tarset===null&&(o(r).tarres=null,o(r).tarsetType=null,o(r).altres=null,o(r).altset=null,o(r).hasAlt=void 0)}),we(()=>{o(r).altset===null&&(o(r).intExcluded=[],o(r).varsExcluded=[],o(r).statsCurrent=null,o(r).statsGlobal=null,o(r).statsProgress=null,o(r).intSelected=-1,o(r).outcomes=null,o(r).altres=null,o(r).hasAlt=void 0)}),we(()=>{if(o(r).tarres&&o(r).altres&&!o(r).statsGlobal){const N=Ma(o(r).model,o(r).tarres,o(r).altres,null,o(r).alpha);o(r).statsGlobal={ncomp:N.ncomp,ncompBest:null,sens:N.sens.val,spec:N.spec.val,eff:N.eff.val,sel:N.sel.val},o(r).statsCurrent={ncomp:o(r).statsGlobal.ncomp,ncompBest:null,sens:o(r).statsGlobal.sens,spec:o(r).statsGlobal.spec,eff:o(r).statsGlobal.eff,sel:o(r).statsGlobal.sel}}}),we(()=>{o(r).outcomes&&o(r).outcomes.status!=="done"&&o(r).intSelected>=0&&(o(r).intSelected=-1)}),we(()=>{o(r).hasAlt===!1&&(o(r).altset={},o(r).altres={})}),we(()=>{if(o(r).outcomes&&o(r).outcomes.status==="done"){const N=gr(()=>JSON.stringify(e.session,xs));e.backupSession(N)}else if(!o(r).outcomes){const N=gr(()=>JSON.stringify(e.session,xs));e.backupSession(N,o(r).model,o(r).calset,o(r).tarres,o(r).altres,o(r).varsExcluded)}});var h=G1(),g=B(h),m=B(g),p=B(m);Ro(p,{get WASM(){return e.WASM},title:"Training set",classMandatory:!0,classUnique:!0,get dataset(){return o(r).calset},set dataset(N){o(r).calset=N}});var b=j(m,2);{var _=N=>{var I=S1(),W=B(I);Wf(W,{get WASM(){return e.WASM},get dataset(){return o(r).calset},get model(){return o(r).model},set model(G){o(r).model=G},get resobj(){return o(r).calres},set resobj(G){o(r).calres=G}}),P(N,I)};Y(b,N=>{o(r).calset&&N(_)})}var w=j(b,2);{var C=N=>{var I=L1(),W=B(I);{var G=te=>{de(te,{name:"select-tarset-type",label:"Target set",children:(se,re)=>{var ee=N1(),X=J(ee);ht(X,{onclick:()=>o(r).tarsetType="file",text:"From file"});var Z=j(X,2);ht(Z,{onclick:()=>o(r).tarsetType="pv",text:"PV-set"}),P(se,ee)},$$slots:{default:!0}})},U=te=>{var se=ce(),re=J(se);{var ee=Z=>{var ne=z1(),fe=J(ne);{var ge=he=>{de(he,{label:"",children:(qe,Ce)=>{var Be=M1();P(qe,Be)},$$slots:{default:!0}})};Y(fe,he=>{o(r).tarset||he(ge)})}var ie=j(fe,2);Ro(ie,{get WASM(){return e.WASM},get model(){return o(r).model},title:"Target test set",get dataset(){return o(r).tarset},set dataset(he){o(r).tarset=he},get resobj(){return o(r).tarres},set resobj(he){o(r).tarres=he}}),P(Z,ne)},X=Z=>{var ne=ce(),fe=J(ne);{var ge=ie=>{var he=T1(),qe=J(he);{var Ce=Ie=>{de(Ie,{label:"",children:(We,Ye)=>{var ft=P1();P(We,ft)},$$slots:{default:!0}})};Y(qe,Ie=>{o(r).tarset||Ie(Ce)})}var Be=j(qe,2);Qf(Be,{get WASM(){return e.WASM},get calset(){return o(r).calset},get calres(){return o(r).calres},get model(){return o(r).model},get pvres(){return o(r).tarres},set pvres(Ie){o(r).tarres=Ie},get pvset(){return o(r).tarset},set pvset(Ie){o(r).tarset=Ie}}),P(ie,he)};Y(fe,ie=>{o(r).tarsetType==="pv"&&ie(ge)},!0)}P(Z,ne)};Y(re,Z=>{o(r).tarsetType==="file"?Z(ee):Z(X,!1)},!0)}P(te,se)};Y(W,te=>{!o(r).tarsetType&&!o(r).tarset?te(G):te(U,!1)})}P(N,I)};Y(w,N=>{o(r).model&&o(r).calset&&o(r).calres&&N(C)})}var k=j(w,2);{var y=N=>{var I=q1(),W=B(I);{var G=re=>{var ee=ce(),X=J(ee);{var Z=ne=>{de(ne,{className:"oops",label:"Alternative set",children:(fe,ge)=>{var ie=R1(),he=J(ie);ht(he,{text:"Skip",onclick:()=>o(r).hasAlt=!1});var qe=j(he,2);ht(qe,{text:"From file",onclick:()=>o(r).hasAlt=!0}),P(fe,ie)},$$slots:{default:!0}})};Y(X,ne=>{o(r).hasAlt===void 0&&ne(Z)})}P(re,ee)};Y(W,re=>{o(r).altset||re(G)})}var U=j(W,2);{var te=re=>{var ee=I1(),X=J(ee);{var Z=fe=>{de(fe,{label:"",children:(ge,ie)=>{var he=j1();P(ge,he)},$$slots:{default:!0}})};Y(X,fe=>{o(r).altset||fe(Z)})}var ne=j(X,2);Ro(ne,{get WASM(){return e.WASM},title:"Alternative test set",get model(){return o(r).model},classMandatory:!0,classUnique:!1,get dataset(){return o(r).altset},set dataset(fe){o(r).altset=fe},get resobj(){return o(r).altres},set resobj(fe){o(r).altres=fe}}),P(re,ee)},se=re=>{var ee=ce(),X=J(ee);{var Z=ne=>{de(ne,{label:"",children:(fe,ge)=>{var ie=F1(),he=j(J(ie),2);mn(he,{onclick:d}),P(fe,ie)},$$slots:{default:!0}})};Y(X,ne=>{o(r).hasAlt===!1&&o(r).altset!==null&&ne(Z)},!0)}P(re,ee)};Y(U,re=>{o(r).hasAlt===!0?re(te):re(se,!1)})}P(N,I)};Y(k,N=>{o(r).tarset&&o(r).tarres&&N(y)})}var E=j(k,2);{var z=N=>{var I=V1(),W=B(I);A1(W,{get WASM(){return e.WASM},get calset(){return o(r).calset},get tarset(){return o(r).tarset},get altset(){return o(r).altset},get model(){return o(r).model},get intExcluded(){return o(r).intExcluded},get varsExcluded(){return o(r).varsExcluded},get statsCurrent(){return o(r).statsCurrent},get curNInt(){return o(r).nInt},resetExcluded:f,undoExcluded:l,get varselparams(){return o(r).varselparams},set varselparams(G){o(r).varselparams=G},get outcomes(){return o(r).outcomes},set outcomes(G){o(r).outcomes=G},get alpha(){return o(r).alpha},set alpha(G){o(r).alpha=G}}),P(N,I)};Y(E,N=>{o(r).calset&&o(r).altset&&o(r).altres&&o(r).statsGlobal&&N(z)})}var A=j(E,2);{var S=N=>{var I=D1(),W=B(I);iv(W,{get s(){return o(r)}}),P(N,I)};Y(A,N=>{(o(r).statsGlobal||o(r).statsCurrent)&&N(S)})}var M=j(A,2);{var T=N=>{var I=O1(),W=B(I);tv(W,{get s(){return o(r)}}),P(N,I)};Y(M,N=>{o(r).intExcluded.length>0&&o(r).intSelected<0&&(!o(r).outcomes||o(r).outcomes.status!=="running")&&N(T)})}var L=j(g,2),F=B(L);{var O=N=>{var I=H1(),W=j(B(I),2);{var G=Z=>{var ne=B1();P(Z,ne)};Y(W,Z=>{o(r).calset||Z(G)})}var U=j(W,2);{var te=Z=>{var ne=W1();P(Z,ne)};Y(U,Z=>{o(r).calset&&!o(r).model&&Z(te)})}var se=j(U,2);{var re=Z=>{var ne=Y1();P(Z,ne)};Y(se,Z=>{o(r).model&&!o(r).tarset&&Z(re)})}var ee=j(se,2);{var X=Z=>{var ne=U1();P(Z,ne)};Y(ee,Z=>{o(r).model&&o(r).tarset&&!o(r).altset&&Z(X)})}P(N,I)},q=N=>{var I=ce(),W=J(I);{var G=U=>{var te=ce(),se=J(te);io(se,()=>o(r).intExcluded,re=>{g1(re,{get s(){return o(r)},setExcluded:a,setNComp:c,selectInt:u,cancelSelection:v})}),P(U,te)};Y(W,U=>{o(r).calset&&o(r).varselparams&&U(G)},!0)}P(N,I)};Y(F,N=>{!o(r).altres||!o(r).statsGlobal?N(O):N(q,!1)})}P(t,h),be()}const l0="modulepreload",a0=function(t){return"/"+t},i0={},X1=function(e,r,s){let l=Promise.resolve();function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return l.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};async function Q1(t={}){var ii;var e,r=t,s=typeof window=="object",l=typeof WorkerGlobalScope<"u",a=typeof process=="object"&&((ii=process.versions)==null?void 0:ii.node)&&process.type!="renderer";if(a){const{createRequire:D}=await X1(()=>Promise.resolve().then(()=>e0),void 0);var c=D(Me&&Me.tagName.toUpperCase()==="SCRIPT"&&Me.src||new URL("ddsimca-love.js",document.baseURI).href)}var u=(D,Q)=>{throw Q},f=Me&&Me.tagName.toUpperCase()==="SCRIPT"&&Me.src||new URL("ddsimca-love.js",document.baseURI).href,v="";function d(D){return r.locateFile?r.locateFile(D,v):v+D}var h,g;if(a){var m=c("fs");f.startsWith("file:")&&(v=c("path").dirname(c("url").fileURLToPath(f))+"/"),g=D=>{D=k(D)?new URL(D):D;var Q=m.readFileSync(D);return Q},h=async(D,Q=!0)=>{D=k(D)?new URL(D):D;var le=m.readFileSync(D,Q?void 0:"utf8");return le},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),u=(D,Q)=>{throw process.exitCode=D,Q}}else if(s||l){try{v=new URL(".",f).href}catch{}l&&(g=D=>{var Q=new XMLHttpRequest;return Q.open("GET",D,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),h=async D=>{if(k(D))return new Promise((le,Re)=>{var Ne=new XMLHttpRequest;Ne.open("GET",D,!0),Ne.responseType="arraybuffer",Ne.onload=()=>{if(Ne.status==200||Ne.status==0&&Ne.response){le(Ne.response);return}Re(Ne.status)},Ne.onerror=Re,Ne.send(null)});var Q=await fetch(D,{credentials:"same-origin"});if(Q.ok)return Q.arrayBuffer();throw new Error(Q.status+" : "+Q.url)}}var p=console.log.bind(console),b=console.error.bind(console),_,w=!1,C,k=D=>D.startsWith("file://"),y,E,z,A,S,M,T=!1;function L(){var D=z.buffer;A=new Int8Array(D),S=new Uint8Array(D),r.HEAP32=new Int32Array(D),M=new Uint32Array(D),r.HEAPF64=new Float64Array(D),new BigInt64Array(D),new BigUint64Array(D)}function F(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Be(r.preRun.shift());ie(Ce)}function O(){T=!0,Hn.i()}function q(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)qe(r.postRun.shift());ie(he)}var N=0,I=null;function W(D){var Q;N++,(Q=r.monitorRunDependencies)==null||Q.call(r,N)}function G(D){var le;if(N--,(le=r.monitorRunDependencies)==null||le.call(r,N),N==0&&I){var Q=I;I=null,Q()}}function U(D){var le;(le=r.onAbort)==null||le.call(r,D),D="Aborted("+D+")",b(D),w=!0,D+=". Build with -sASSERTIONS for more info.";var Q=new WebAssembly.RuntimeError(D);throw E==null||E(Q),Q}var te;function se(){return r.locateFile?d("pca_wasm.wasm"):new URL("/ddsimca-love/ddsimca-love.wasm",Me&&Me.tagName.toUpperCase()==="SCRIPT"&&Me.src||new URL("ddsimca-love.js",document.baseURI).href).href}function re(D){if(D==te&&_)return new Uint8Array(_);if(g)return g(D);throw"both async and sync fetching of the wasm failed"}async function ee(D){if(!_)try{var Q=await h(D);return new Uint8Array(Q)}catch{}return re(D)}async function X(D,Q){try{var le=await ee(D),Re=await WebAssembly.instantiate(le,Q);return Re}catch(Ne){b(`failed to asynchronously prepare wasm: ${Ne}`),U(Ne)}}async function Z(D,Q,le){if(!D&&!k(Q)&&!a)try{var Re=fetch(Q,{credentials:"same-origin"}),Ne=await WebAssembly.instantiateStreaming(Re,le);return Ne}catch(Ge){b(`wasm streaming compile failed: ${Ge}`),b("falling back to ArrayBuffer instantiation")}return X(Q,le)}function ne(){return{a:t0}}async function fe(){function D(Ge,Ke){return Hn=Ge.exports,z=Hn.h,L(),Ho(Hn),G(),Hn}W();function Q(Ge){return D(Ge.instance)}var le=ne();if(r.instantiateWasm)return new Promise((Ge,Ke)=>{r.instantiateWasm(le,(Qe,rr)=>{Ge(D(Qe))})});te??(te=se());var Re=await Z(_,te,le),Ne=Q(Re);return Ne}class ge{constructor(Q){nr(this,"name","ExitStatus");this.message=`Program terminated with exit(${Q})`,this.status=Q}}var ie=D=>{for(;D.length>0;)D.shift()(r)},he=[],qe=D=>he.push(D),Ce=[],Be=D=>Ce.push(D),Ie=!0,We=D=>Ls(D),Ye=()=>dt(),ft=()=>U(""),Tt=0,He=()=>{Ie=!1,Tt=0},$e={},gt=D=>{if(D instanceof ge||D=="unwind")return C;u(1,D)},dr=()=>Ie||Tt>0,Gt=D=>{var Q;C=D,dr()||((Q=r.onExit)==null||Q.call(r,D),w=!0),u(D,new ge(D))},yn=(D,Q)=>{C=D,Gt(D)},Rr=yn,xn=()=>{if(!dr())try{Rr(C)}catch(D){gt(D)}},Oo=D=>{if(!w)try{D(),xn()}catch(Q){gt(Q)}},Bo=()=>performance.now(),Wo=(D,Q)=>{if($e[D]&&(clearTimeout($e[D].id),delete $e[D]),!Q)return 0;var le=setTimeout(()=>{delete $e[D],Oo(()=>bt(D,Bo()))},Q);return $e[D]={id:le,timeout_ms:Q},0},Yo=()=>Date.now(),Uo=()=>2147483648,me=(D,Q)=>Math.ceil(D/Q)*Q,Se=D=>{var Q=z.buffer.byteLength,le=(D-Q+65535)/65536|0;try{return z.grow(le),L(),1}catch{}},Ae=D=>{var Q=S.length;D>>>=0;var le=Uo();if(D>le)return!1;for(var Re=1;Re<=4;Re*=2){var Ne=Q*(1+.2/Re);Ne=Math.min(Ne,D+100663296);var Ge=Math.min(le,me(Math.max(D,Ne),65536)),Ke=Se(Ge);if(Ke)return!0}return!1},ot=[null,[],[]],wt=typeof TextDecoder<"u"?new TextDecoder:void 0,tr=(D,Q,le,Re)=>{for(var Ne=Q+le;D[Q]&&!(Q>=Ne);)++Q;return Q},Nt=(D,Q=0,le,Re)=>{var Ne=tr(D,Q,le);if(Ne-Q>16&&D.buffer&&wt)return wt.decode(D.subarray(Q,Ne));for(var Ge="";Q<Ne;){var Ke=D[Q++];if(!(Ke&128)){Ge+=String.fromCharCode(Ke);continue}var Qe=D[Q++]&63;if((Ke&224)==192){Ge+=String.fromCharCode((Ke&31)<<6|Qe);continue}var rr=D[Q++]&63;if((Ke&240)==224?Ke=(Ke&15)<<12|Qe<<6|rr:Ke=(Ke&7)<<18|Qe<<12|rr<<6|D[Q++]&63,Ke<65536)Ge+=String.fromCharCode(Ke);else{var Zr=Ke-65536;Ge+=String.fromCharCode(55296|Zr>>10,56320|Zr&1023)}}return Ge},Lt=(D,Q)=>{var le=ot[D];Q===0||Q===10?((D===1?p:b)(Nt(le)),le.length=0):le.push(Q)},Ue=(D,Q,le)=>D?Nt(S,D,Q):"",ze=(D,Q,le,Re)=>{for(var Ne=0,Ge=0;Ge<le;Ge++){var Ke=M[Q>>2],Qe=M[Q+4>>2];Q+=8;for(var rr=0;rr<Qe;rr++)Lt(D,S[Ke+rr]);Ne+=Qe}return M[Re>>2]=Ne,0},yt=D=>{var Q=r["_"+D];return Q},vt=(D,Q)=>{A.set(D,Q)},lt=D=>{for(var Q=0,le=0;le<D.length;++le){var Re=D.charCodeAt(le);Re<=127?Q++:Re<=2047?Q+=2:Re>=55296&&Re<=57343?(Q+=4,++le):Q+=3}return Q},Xe=(D,Q,le,Re)=>{if(!(Re>0))return 0;for(var Ne=le,Ge=le+Re-1,Ke=0;Ke<D.length;++Ke){var Qe=D.codePointAt(Ke);if(Qe<=127){if(le>=Ge)break;Q[le++]=Qe}else if(Qe<=2047){if(le+1>=Ge)break;Q[le++]=192|Qe>>6,Q[le++]=128|Qe&63}else if(Qe<=65535){if(le+2>=Ge)break;Q[le++]=224|Qe>>12,Q[le++]=128|Qe>>6&63,Q[le++]=128|Qe&63}else{if(le+3>=Ge)break;Q[le++]=240|Qe>>18,Q[le++]=128|Qe>>12&63,Q[le++]=128|Qe>>6&63,Q[le++]=128|Qe&63,Ke++}}return Q[le]=0,le-Ne},Kt=(D,Q,le)=>Xe(D,S,Q,le),jr=D=>hr(D),Fe=D=>{var Q=lt(D)+1,le=jr(Q);return Kt(D,le,Q),le},ve=(D,Q,le,Re,Ne)=>{var Ge={string:Vt=>{var Gn=0;return Vt!=null&&Vt!==0&&(Gn=Fe(Vt)),Gn},array:Vt=>{var Gn=jr(Vt.length);return vt(Vt,Gn),Gn}};function Ke(Vt){return Q==="string"?Ue(Vt):Q==="boolean"?!!Vt:Vt}var Qe=yt(D),rr=[],Zr=0;if(Re)for(var $r=0;$r<Re.length;$r++){var ci=Ge[le[$r]];ci?(Zr===0&&(Zr=Ye()),rr[$r]=ci(Re[$r])):rr[$r]=Re[$r]}var Ko=Qe(...rr);function n0(Vt){return Zr!==0&&We(Zr),Ke(Vt)}return Ko=n0(Ko),Ko};r.noExitRuntime&&(Ie=r.noExitRuntime),r.print&&(p=r.print),r.printErr&&(b=r.printErr),r.wasmBinary&&(_=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=ve;var bt,Ls,hr,dt;function Ho(D){r._pcafit_wasm=D.j,r._malloc=D.k,r._free=D.l,r._pcapredict_wasm=D.m,r._pcvpca_wasm=D.n,r._prepfit_wasm=D.o,r._prepapply_wasm=D.p,bt=D.q,Ls=D.r,hr=D.s,dt=D.t}var t0={c:ft,b:He,d:Wo,g:Yo,e:Ae,f:ze,a:Gt},Hn=await fe();function Go(){if(N>0){I=Go;return}if(F(),N>0){I=Go;return}function D(){var Q;r.calledRun=!0,!w&&(O(),y==null||y(r),(Q=r.onRuntimeInitialized)==null||Q.call(r),q())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),D()},1)):D()}function r0(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return r0(),Go(),T?e=r:e=new Promise((D,Q)=>{y=D,E=Q}),e}var J1=K('<p>Current release: <span>1.2.2</span> &nbsp; Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=DDSIMCA-LOVE app">help@mda.tools</a> &nbsp; Learn: <a class="paper-link" href="https://dx.doi.org/10.1016/j.aca.2025.344302" download="">paper</a> | <a class="paper-link" href="/ddsimca-love/Wine.zip">dataset</a> | <a href="https://youtu.be/ZqKtHZAEEi4">video lesson</a></p>'),Z1=K(`<h2>DD-SIMCA variable selection</h2> <p>Authors: <em>Alexey Pomerantsev, Sergey Kucheryavskiy, Oxana Rodionova</em></p> <p>Interactive web-application for excluding least important variables in DD-SIMCA one class classifier.
      The method is an evolution of known wrapper methods, it provides a tool for interactive variable selection,
      based on careful analysis of the main and secondary performance indicators (sensitivity, specificity, efficiency,
      selectivity), as well as domain knowledge.</p> <p>Check our open access <a href="https://dx.doi.org/10.1016/j.aca.2025.344302">paper</a> for more details about the method.</p> <h3>v. 1.2.2</h3> <p class="release-info">released 08/09/2025</p> <ul><li>Fixed a bug related to wrong diff values after undo.</li> <li>Default value for gamma is set to 1% (to match the one in DDSIMCA app).</li> <li>Small code improvements.</li></ul>`,1);function $1(t,e){pe(e,!1);function r(a){const c=Object.keys(a);if(!["date","train","tab"].every(f=>c.includes(f)))return!1;const u=Object.keys(a.train);return["calset","calres","altset","tarset","testres","model"].every(f=>u.includes(f))?(a.train.outcomes&&a.train.outcomes.status==="running"&&(a.train.outcomes=null),a.train.tarsetType&&!a.train.tarset&&(a.train.tarsetType=null),a.train.model&&!a.train.calres&&(a.train.model=null),!0):!1}function s(){return{date:Po(new Date),tab:0,train:{calset:0,model:0,calres:0,tarsetType:0,tarset:0,hasAlt:void 0,altset:0,testres:0,intSelected:-1,intExcluded:[],varsExcluded:[],varselparams:0,currentRes:0,statsGlobal:0,statsCurrent:0,statsProgress:0,alpha:5,nComp:0,outcomes:0,oldInt:0,oldNInt:0}}}const l=[{name:"Train",label:"train",component:K1}];Oc(),Yu(t,{appID:"ddsimca-love",appTitle:"DD-SIMCA with LOVE",appShortTitle:"DD-SIMCA variable selection",appSlogan:"Variable selection for DD-SIMCA",get WASM(){return Q1},get tabs(){return l},initSession:s,checkSession:r,footer:u=>{var f=J1();P(u,f)},info:u=>{var f=Z1();P(u,f)},$$slots:{footer:!0,info:!0}}),be()}xc($1,{target:document.body});const e0=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=ddsimca-love.js.map
