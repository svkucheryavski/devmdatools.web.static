var fm=Object.defineProperty;var qc=tt=>{throw TypeError(tt)};var vm=(tt,We,gt)=>We in tt?fm(tt,We,{enumerable:!0,configurable:!0,writable:!0,value:gt}):tt[We]=gt;var kt=(tt,We,gt)=>vm(tt,typeof We!="symbol"?We+"":We,gt),la=(tt,We,gt)=>We.has(tt)||qc("Cannot "+gt);var H=(tt,We,gt)=>(la(tt,We,"read from private field"),gt?gt.call(tt):We.get(tt)),Me=(tt,We,gt)=>We.has(tt)?qc("Cannot add the same private member more than once"):We instanceof WeakSet?We.add(tt):We.set(tt,gt),xe=(tt,We,gt,Zn)=>(la(tt,We,"write to private field"),Zn?Zn.call(tt,gt):We.set(tt,gt),gt),it=(tt,We,gt)=>(la(tt,We,"access private method"),gt);(function(){"use strict";var ms,gs,Wn,Un,Xs,ps,bs,At,aa,Qn,ia,Oc,Bc,hr,mr,sa,zr,Hn,Rr,gr,er,Ir,$r,pn,Gn,bn,Kn,wn,jo,jt,dm,hm,ca,zo,Ro,ua,Ar,Fr,or,Jn,Qs,Zs,To,_n,ws,$s,Po,Dc,Fc,je,st,dt,_s,ys,xs,ks,Es,As,Cs,Ss,Ms,Ns;var tt=document.createElement("style");tt.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1fhdfcc{width:100%;border-collapse:collapse}tr.svelte-1fhdfcc{width:100%}th.svelte-1fhdfcc{border-bottom:1px solid #a0a0a0}th.svelte-1fhdfcc,td.svelte-1fhdfcc{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1fhdfcc{text-align:left;padding:.1em .5em}table.svelte-1bca91p{width:100%;border-collapse:collapse}tr.svelte-1bca91p{width:100%}th.svelte-1bca91p{border-bottom:1px solid #a0a0a0}th.svelte-1bca91p,td.svelte-1bca91p{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1bca91p{text-align:left;padding:.1em .5em}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.plot-container.svelte-1838sos{width:100%;height:100%}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(325px,30%) 1fr}}.model-info.svelte-7h7avz{line-height:1.5em}.model-info.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-k5uafz{width:100%;border-collapse:collapse}tr.svelte-k5uafz{width:100%}th.svelte-k5uafz{border-bottom:1px solid #a0a0a0}tr.section.svelte-k5uafz>td:where(.svelte-k5uafz){border-top:1px solid #a0a0a0}th.svelte-k5uafz,td.svelte-k5uafz{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-k5uafz{text-align:left;padding:.1em .5em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(325px,30%) 1fr}}table.svelte-vm8g95{width:100%;border-collapse:collapse}tr.svelte-vm8g95{width:100%}th.svelte-vm8g95{border-bottom:1px solid #a0a0a0}th.svelte-vm8g95,td.svelte-vm8g95{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-vm8g95{text-align:left;padding:.1em .5em}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){background:#e8e8e8}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(325px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(tt);var We=typeof document<"u"?document.currentScript:null;const gt=!1;var Zn=Array.isArray,Vc=Array.prototype.indexOf,Io=Array.from,Yc=Object.defineProperty,en=Object.getOwnPropertyDescriptor,fa=Object.getOwnPropertyDescriptors,va=Object.prototype,Wc=Array.prototype,to=Object.getPrototypeOf,da=Object.isExtensible;function $n(r){return typeof r=="function"}const Ot=()=>{};function Uc(r){return typeof(r==null?void 0:r.then)=="function"}function Hc(r){return r()}function Fo(r){for(var e=0;e<r.length;e++)r[e]()}function ha(){var r,e,t=new Promise((s,l)=>{r=s,e=l});return{promise:t,resolve:r,reject:e}}function qo(r,e){if(Array.isArray(r))return r;if(e===void 0||!(Symbol.iterator in r))return Array.from(r);const t=[];for(const s of r)if(t.push(s),t.length===e)break;return t}const Pt=2,Oo=4,ro=8,Sr=16,Br=32,xn=64,no=128,pr=512,Bt=1024,Kt=2048,Dr=4096,rr=8192,Vr=16384,so=32768,Yr=65536,ma=1<<17,ga=1<<18,es=1<<19,pa=1<<20,kn=32768,Bo=1<<21,Do=1<<22,tn=1<<23,rn=Symbol("$state"),ba=Symbol("legacy props"),Gc=Symbol(""),ts=new class extends Error{constructor(){super(...arguments);kt(this,"name","StaleReactionError");kt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function wa(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Kc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Jc(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Xc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Qc(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Zc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function $c(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function eu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function tu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ru(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function nu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const _a=1,ya=2,xa=4,su=8,ou=16,lu=1,au=2,iu=4,cu=8,uu=16,fu=1,vu=2,du=4,ka=1,hu=2,Lt=Symbol(),mu="http://www.w3.org/1999/xhtml";function gu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ea(r){return r===this.v}function pu(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function Aa(r){return!pu(r,this.v)}let rs=!1,bu=!1;function wu(){rs=!0}const _u=[];function Vo(r,e=!1,t=!1){return oo(r,new Map,"",_u,null,t)}function oo(r,e,t,s,l=null,a=!1){if(typeof r=="object"&&r!==null){var c=e.get(r);if(c!==void 0)return c;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(Zn(r)){var v=Array(r.length);e.set(r,v),l!==null&&e.set(l,v);for(var u=0;u<r.length;u+=1){var f=r[u];u in r&&(v[u]=oo(f,e,t,s,null,a))}return v}if(to(r)===va){v={},e.set(r,v),l!==null&&e.set(l,v);for(var d in r)v[d]=oo(r[d],e,t,s,null,a);return v}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function"&&!a)return oo(r.toJSON(),e,t,s,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return r}}let rt=null;function ns(r){rt=r}function Jt(r){return Ca().get(r)}function yu(r,e){return Ca().set(r,e),e}function we(r,e=!1,t){rt={p:rt,i:!1,c:null,e:null,s:r,x:null,l:rs&&!e?{s:null,u:null,$:[]}:null}}function _e(r){var e=rt,t=e.e;if(t!==null){e.e=null;for(var s of t)Ha(s)}return e.i=!0,rt=e.p,{}}function En(){return!rs||rt!==null&&rt.l===null}function Ca(r){return rt===null&&wa(),rt.c??(rt.c=new Map(xu(rt)||void 0))}function xu(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}let An=[];function Sa(){var r=An;An=[],Fo(r)}function nn(r){if(An.length===0&&!os){var e=An;queueMicrotask(()=>{e===An&&Sa()})}An.push(r)}function ku(){for(;An.length>0;)Sa()}function Ma(r){var e=Ue;if(e===null)return Be.f|=tn,r;if((e.f&so)===0){if((e.f&no)===0)throw r;e.b.error(r)}else ss(r,e)}function ss(r,e){for(;e!==null;){if((e.f&no)!==0)try{e.b.error(r);return}catch(t){r=t}e=e.parent}throw r}const lo=new Set;let Ke=null,ao=null,_t=null,lr=[],io=null,Yo=!1,os=!1;const No=class No{constructor(){Me(this,At);kt(this,"committed",!1);kt(this,"current",new Map);kt(this,"previous",new Map);Me(this,ms,new Set);Me(this,gs,new Set);Me(this,Wn,0);Me(this,Un,0);Me(this,Xs,null);Me(this,ps,[]);Me(this,bs,[]);kt(this,"skipped_effects",new Set);kt(this,"is_fork",!1)}is_deferred(){return this.is_fork||H(this,Un)>0}process(e){var s;lr=[],ao=null,this.apply();var t={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const l of e)it(this,At,aa).call(this,l,t);this.is_fork||it(this,At,Oc).call(this),this.is_deferred()?(it(this,At,Qn).call(this,t.effects),it(this,At,Qn).call(this,t.render_effects),it(this,At,Qn).call(this,t.block_effects)):(ao=this,Ke=null,Ta(t.render_effects),Ta(t.effects),ao=null,(s=H(this,Xs))==null||s.resolve()),_t=null}capture(e,t){this.previous.has(e)||this.previous.set(e,t),(e.f&tn)===0&&(this.current.set(e,e.v),_t==null||_t.set(e,e.v))}activate(){Ke=this,this.apply()}deactivate(){Ke===this&&(Ke=null,_t=null)}flush(){if(this.activate(),lr.length>0){if(ja(),Ke!==null&&Ke!==this)return}else H(this,Wn)===0&&this.process([]);this.deactivate()}discard(){for(const e of H(this,gs))e(this);H(this,gs).clear()}increment(e){xe(this,Wn,H(this,Wn)+1),e&&xe(this,Un,H(this,Un)+1)}decrement(e){xe(this,Wn,H(this,Wn)-1),e&&xe(this,Un,H(this,Un)-1),this.revive()}revive(){for(const e of H(this,ps))Dt(e,Kt),Cn(e);for(const e of H(this,bs))Dt(e,Dr),Cn(e);xe(this,ps,[]),xe(this,bs,[]),this.flush()}oncommit(e){H(this,ms).add(e)}ondiscard(e){H(this,gs).add(e)}settled(){return(H(this,Xs)??xe(this,Xs,ha())).promise}static ensure(){if(Ke===null){const e=Ke=new No;lo.add(Ke),os||No.enqueue(()=>{Ke===e&&e.flush()})}return Ke}static enqueue(e){nn(e)}apply(){}};ms=new WeakMap,gs=new WeakMap,Wn=new WeakMap,Un=new WeakMap,Xs=new WeakMap,ps=new WeakMap,bs=new WeakMap,At=new WeakSet,aa=function(e,t){var d;e.f^=Bt;for(var s=e.first;s!==null;){var l=s.f,a=(l&(Br|xn))!==0,c=a&&(l&Bt)!==0,v=c||(l&rr)!==0||this.skipped_effects.has(s);if((s.f&no)!==0&&((d=s.b)!=null&&d.is_pending())&&(t={parent:t,effect:s,effects:[],render_effects:[],block_effects:[]}),!v&&s.fn!==null){a?s.f^=Bt:(l&Oo)!==0?t.effects.push(s):Is(s)&&((s.f&Sr)!==0&&t.block_effects.push(s),Fs(s));var u=s.first;if(u!==null){s=u;continue}}var f=s.parent;for(s=s.next;s===null&&f!==null;)f===t.effect&&(it(this,At,Qn).call(this,t.effects),it(this,At,Qn).call(this,t.render_effects),it(this,At,Qn).call(this,t.block_effects),t=t.parent),s=f.next,f=f.parent}},Qn=function(e){for(const t of e)((t.f&Kt)!==0?H(this,ps):H(this,bs)).push(t),it(this,At,ia).call(this,t.deps),Dt(t,Bt)},ia=function(e){if(e!==null)for(const t of e)(t.f&Pt)===0||(t.f&kn)===0||(t.f^=kn,it(this,At,ia).call(this,t.deps))},Oc=function(){if(H(this,Un)===0){for(const e of H(this,ms))e();H(this,ms).clear()}H(this,Wn)===0&&it(this,At,Bc).call(this)},Bc=function(){var a;if(lo.size>1){this.previous.clear();var e=_t,t=!0,s={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const c of lo){if(c===this){t=!1;continue}const v=[];for(const[f,d]of this.current){if(c.current.has(f))if(t&&d!==c.current.get(f))c.current.set(f,d);else continue;v.push(f)}if(v.length===0)continue;const u=[...c.current.keys()].filter(f=>!this.current.has(f));if(u.length>0){var l=lr;lr=[];const f=new Set,d=new Map;for(const m of v)Pa(m,u,f,d);if(lr.length>0){Ke=c,c.apply();for(const m of lr)it(a=c,At,aa).call(a,m,s);c.deactivate()}lr=l}}Ke=null,_t=e}this.committed=!0,lo.delete(this)};let Mr=No;function Na(r){var e=os;os=!0;try{for(var t;;){if(ku(),lr.length===0&&(Ke==null||Ke.flush(),lr.length===0))return io=null,t;ja()}}finally{os=e}}function ja(){var r=on;Yo=!0;var e=null;try{var t=0;for(fo(!0);lr.length>0;){var s=Mr.ensure();if(t++>1e3){var l,a;Eu()}s.process(lr),sn.clear()}}finally{Yo=!1,fo(r),io=null}}function Eu(){try{Zc()}catch(r){ss(r,io)}}let br=null;function Ta(r){var e=r.length;if(e!==0){for(var t=0;t<e;){var s=r[t++];if((s.f&(Vr|rr))===0&&Is(s)&&(br=new Set,Fs(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?Xa(s):s.fn=null),(br==null?void 0:br.size)>0)){sn.clear();for(const l of br){if((l.f&(Vr|rr))!==0)continue;const a=[l];let c=l.parent;for(;c!==null;)br.has(c)&&(br.delete(c),a.push(c)),c=c.parent;for(let v=a.length-1;v>=0;v--){const u=a[v];(u.f&(Vr|rr))===0&&Fs(u)}}br.clear()}}br=null}}function Pa(r,e,t,s){if(!t.has(r)&&(t.add(r),r.reactions!==null))for(const l of r.reactions){const a=l.f;(a&Pt)!==0?Pa(l,e,t,s):(a&(Do|Sr))!==0&&(a&Kt)===0&&La(l,e,s)&&(Dt(l,Kt),Cn(l))}}function La(r,e,t){const s=t.get(r);if(s!==void 0)return s;if(r.deps!==null)for(const l of r.deps){if(e.includes(l))return!0;if((l.f&Pt)!==0&&La(l,e,t))return t.set(l,!0),!0}return t.set(r,!1),!1}function Cn(r){for(var e=io=r;e.parent!==null;){e=e.parent;var t=e.f;if(Yo&&e===Ue&&(t&Sr)!==0&&(t&ga)===0)return;if((t&(xn|Br))!==0){if((t&Bt)===0)return;e.f^=Bt}}lr.push(e)}function Au(r){let e=0,t=Wr(0),s;return()=>{co()&&(o(t),Qo(()=>(e===0&&(s=wr(()=>r(()=>Ls(t)))),e+=1,()=>{nn(()=>{e-=1,e===0&&(s==null||s(),s=void 0,Ls(t))})})))}}var Cu=Yr|es|no;function Su(r,e,t){new Mu(r,e,t)}class Mu{constructor(e,t,s){Me(this,jt);kt(this,"parent");Me(this,hr,!1);Me(this,mr);Me(this,sa,null);Me(this,zr);Me(this,Hn);Me(this,Rr);Me(this,gr,null);Me(this,er,null);Me(this,Ir,null);Me(this,$r,null);Me(this,pn,null);Me(this,Gn,0);Me(this,bn,0);Me(this,Kn,!1);Me(this,wn,null);Me(this,jo,Au(()=>(xe(this,wn,Wr(H(this,Gn))),()=>{xe(this,wn,null)})));xe(this,mr,e),xe(this,zr,t),xe(this,Hn,s),this.parent=Ue.b,xe(this,hr,!!H(this,zr).pending),xe(this,Rr,Sn(()=>{Ue.b=this;{var l=it(this,jt,ca).call(this);try{xe(this,gr,ar(()=>s(l)))}catch(a){this.error(a)}H(this,bn)>0?it(this,jt,Ro).call(this):xe(this,hr,!1)}return()=>{var a;(a=H(this,pn))==null||a.remove()}},Cu))}is_pending(){return H(this,hr)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!H(this,zr).pending}update_pending_count(e){it(this,jt,ua).call(this,e),xe(this,Gn,H(this,Gn)+e),H(this,wn)&&Ur(H(this,wn),H(this,Gn))}get_effect_pending(){return H(this,jo).call(this),o(H(this,wn))}error(e){var t=H(this,zr).onerror;let s=H(this,zr).failed;if(H(this,Kn)||!t&&!s)throw e;H(this,gr)&&(Xt(H(this,gr)),xe(this,gr,null)),H(this,er)&&(Xt(H(this,er)),xe(this,er,null)),H(this,Ir)&&(Xt(H(this,Ir)),xe(this,Ir,null));var l=!1,a=!1;const c=()=>{if(l){gu();return}l=!0,a&&nu(),Mr.ensure(),xe(this,Gn,0),H(this,Ir)!==null&&as(H(this,Ir),()=>{xe(this,Ir,null)}),xe(this,hr,this.has_pending_snippet()),xe(this,gr,it(this,jt,zo).call(this,()=>(xe(this,Kn,!1),ar(()=>H(this,Hn).call(this,H(this,mr)))))),H(this,bn)>0?it(this,jt,Ro).call(this):xe(this,hr,!1)};var v=Be;try{Qt(null),a=!0,t==null||t(e,c),a=!1}catch(u){ss(u,H(this,Rr)&&H(this,Rr).parent)}finally{Qt(v)}s&&nn(()=>{xe(this,Ir,it(this,jt,zo).call(this,()=>{Mr.ensure(),xe(this,Kn,!0);try{return ar(()=>{s(H(this,mr),()=>e,()=>c)})}catch(u){return ss(u,H(this,Rr).parent),null}finally{xe(this,Kn,!1)}}))})}}hr=new WeakMap,mr=new WeakMap,sa=new WeakMap,zr=new WeakMap,Hn=new WeakMap,Rr=new WeakMap,gr=new WeakMap,er=new WeakMap,Ir=new WeakMap,$r=new WeakMap,pn=new WeakMap,Gn=new WeakMap,bn=new WeakMap,Kn=new WeakMap,wn=new WeakMap,jo=new WeakMap,jt=new WeakSet,dm=function(){try{xe(this,gr,ar(()=>H(this,Hn).call(this,H(this,mr))))}catch(e){this.error(e)}xe(this,hr,!1)},hm=function(){const e=H(this,zr).pending;e&&(xe(this,er,ar(()=>e(H(this,mr)))),Mr.enqueue(()=>{var t=it(this,jt,ca).call(this);xe(this,gr,it(this,jt,zo).call(this,()=>(Mr.ensure(),ar(()=>H(this,Hn).call(this,t))))),H(this,bn)>0?it(this,jt,Ro).call(this):(as(H(this,er),()=>{xe(this,er,null)}),xe(this,hr,!1))}))},ca=function(){var e=H(this,mr);return H(this,hr)&&(xe(this,pn,Hr()),H(this,mr).before(H(this,pn)),e=H(this,pn)),e},zo=function(e){var t=Ue,s=Be,l=rt;Pr(H(this,Rr)),Qt(H(this,Rr)),ns(H(this,Rr).ctx);try{return e()}catch(a){return Ma(a),null}finally{Pr(t),Qt(s),ns(l)}},Ro=function(){const e=H(this,zr).pending;H(this,gr)!==null&&(xe(this,$r,document.createDocumentFragment()),H(this,$r).append(H(this,pn)),$a(H(this,gr),H(this,$r))),H(this,er)===null&&xe(this,er,ar(()=>e(H(this,mr))))},ua=function(e){var t;if(!this.has_pending_snippet()){this.parent&&it(t=this.parent,jt,ua).call(t,e);return}xe(this,bn,H(this,bn)+e),H(this,bn)===0&&(xe(this,hr,!1),H(this,er)&&as(H(this,er),()=>{xe(this,er,null)}),H(this,$r)&&(H(this,mr).before(H(this,$r)),xe(this,$r,null)))};function nt(r,e){return e}function Nu(r,e,t){for(var s=[],l=e.length,a=0;a<l;a++)Zo(e[a].e,s,!0);Qa(s,()=>{var c=s.length===0&&t!==null;if(c){var v=t,u=v.parentNode;Fu(u),u.append(v),r.items.clear(),Nr(r,e[0].prev,e[l-1].next)}for(var f=0;f<l;f++){var d=e[f];c||(r.items.delete(d.k),Nr(r,d.prev,d.next)),Xt(d.e,!c)}r.first===e[0]&&(r.first=e[0].prev)})}function $e(r,e,t,s,l,a=null){var c=r,v=new Map,u=null,f=(e&xa)!==0,d=(e&_a)!==0,m=(e&ya)!==0;if(f){var h=r;c=h.appendChild(Hr())}var g=null,p=Uo(()=>{var k=t();return Zn(k)?k:k==null?[]:Io(k)}),b,w=!0;function _(){ju(E,b,c,e,s),g!==null&&(b.length===0?(g.fragment?(c.before(g.fragment),g.fragment=null):$o(g.effect),A.first=g.effect):as(g.effect,()=>{g=null}))}var A=Sn(()=>{b=o(p);for(var k=b.length,C=new Set,N=Ke,L=null,q=Va(),T=0;T<k;T+=1){var j=b[T],y=s(j,T),z=w?null:v.get(y);z?(d&&Ur(z.v,j),m?Ur(z.i,T):z.i=T,q&&N.skipped_effects.delete(z.e)):(z=Tu(w?c:null,L,j,y,T,l,e,t),w&&(z.o=!0,L===null?u=z:L.next=z,L=z),v.set(y,z)),C.add(y)}if(k===0&&a&&!g)if(w)g={fragment:null,effect:ar(()=>a(c))};else{var V=document.createDocumentFragment(),D=Hr();V.append(D),g={fragment:V,effect:ar(()=>a(D))}}if(!w)if(q){for(const[I,W]of v)C.has(I)||N.skipped_effects.add(W.e);N.oncommit(_),N.ondiscard(()=>{})}else _();o(p)}),E={effect:A,items:v,first:u};w=!1}function ju(r,e,t,s,l){var j,y,z,V;var a=(s&su)!==0,c=e.length,v=r.items,u=r.first,f,d=null,m,h=[],g=[],p,b,w,_;if(a)for(_=0;_<c;_+=1)p=e[_],b=l(p,_),w=v.get(b),(j=w.a)==null||j.measure(),(m??(m=new Set)).add(w);for(_=0;_<c;_+=1){if(p=e[_],b=l(p,_),w=v.get(b),r.first??(r.first=w),!w.o){w.o=!0;var A=d?d.next:u;Nr(r,d,w),Nr(r,w,A),Wo(w,A,t),d=w,h=[],g=[],u=d.next;continue}if((w.e.f&rr)!==0&&($o(w.e),a&&((y=w.a)==null||y.unfix(),(m??(m=new Set)).delete(w))),w!==u){if(f!==void 0&&f.has(w)){if(h.length<g.length){var E=g[0],k;d=E.prev;var C=h[0],N=h[h.length-1];for(k=0;k<h.length;k+=1)Wo(h[k],E,t);for(k=0;k<g.length;k+=1)f.delete(g[k]);Nr(r,C.prev,N.next),Nr(r,d,C),Nr(r,N,E),u=E,d=N,_-=1,h=[],g=[]}else f.delete(w),Wo(w,u,t),Nr(r,w.prev,w.next),Nr(r,w,d===null?r.first:d.next),Nr(r,d,w),d=w;continue}for(h=[],g=[];u!==null&&u.k!==b;)(u.e.f&rr)===0&&(f??(f=new Set)).add(u),g.push(u),u=u.next;if(u===null)continue;w=u}h.push(w),d=w,u=w.next}if(u!==null||f!==void 0){for(var L=f===void 0?[]:Io(f);u!==null;)(u.e.f&rr)===0&&L.push(u),u=u.next;var q=L.length;if(q>0){var T=(s&xa)!==0&&c===0?t:null;if(a){for(_=0;_<q;_+=1)(z=L[_].a)==null||z.measure();for(_=0;_<q;_+=1)(V=L[_].a)==null||V.fix()}Nu(r,L,T)}}a&&nn(()=>{var D;if(m!==void 0)for(w of m)(D=w.a)==null||D.apply()})}function Tu(r,e,t,s,l,a,c,v){var u=(c&_a)!==0,f=(c&ou)===0,d=u?f?Ko(t,!1,!1):Wr(t):t,m=(c&ya)===0?l:Wr(l),h={i:m,v:d,k:s,a:null,e:null,o:!1,prev:e,next:null};try{if(r===null){var g=document.createDocumentFragment();g.append(r=Hr())}return h.e=ar(()=>a(r,d,m,v)),e!==null&&(e.next=h),h}finally{}}function Wo(r,e,t){for(var s=r.next?r.next.e.nodes_start:t,l=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==null&&a!==s;){var c=zs(a);l.before(a),a=c}}function Nr(r,e,t){e===null?(r.first=t,r.effect.first=t&&t.e):(e.e.next&&(e.e.next.prev=null),e.next=t,e.e.next=t&&t.e),t===null?r.effect.last=e&&e.e:(t.e.prev&&(t.e.prev.next=null),t.prev=e,t.e.prev=e&&e.e)}function Pu(r,e,t,s){const l=En()?Ps:Uo;if(t.length===0&&r.length===0){s(e.map(l));return}var a=Ke,c=Ue,v=za();function u(){Promise.all(t.map(f=>Lu(f))).then(f=>{v();try{s([...e.map(l),...f])}catch(d){(c.f&Vr)===0&&ss(d,c)}a==null||a.deactivate(),Ts()}).catch(f=>{ss(f,c)})}r.length>0?Promise.all(r).then(()=>{v();try{return u()}finally{a==null||a.deactivate(),Ts()}}):u()}function za(){var r=Ue,e=Be,t=rt,s=Ke;return function(a=!0){Pr(r),Qt(e),ns(t),a&&(s==null||s.activate())}}function Ts(){Pr(null),Qt(null),ns(null)}function Ps(r){var e=Pt|Kt,t=Be!==null&&(Be.f&Pt)!==0?Be:null;return Ue!==null&&(Ue.f|=es),{ctx:rt,deps:null,effects:null,equals:Ea,f:e,fn:r,reactions:null,rv:0,v:Lt,wv:0,parent:t??Ue,ac:null}}function Lu(r,e){let t=Ue;t===null&&Kc();var s=t.b,l=void 0,a=Wr(Lt),c=!Be,v=new Map;return Vu(()=>{var h;var u=ha();l=u.promise;try{Promise.resolve(r()).then(u.resolve,u.reject).then(()=>{f===Ke&&f.committed&&f.deactivate(),Ts()})}catch(g){u.reject(g),Ts()}var f=Ke;if(c){var d=!s.is_pending();s.update_pending_count(1),f.increment(d),(h=v.get(f))==null||h.reject(ts),v.delete(f),v.set(f,u)}const m=(g,p=void 0)=>{if(f.activate(),p)p!==ts&&(a.f|=tn,Ur(a,p));else{(a.f&tn)!==0&&(a.f^=tn),Ur(a,g);for(const[b,w]of v){if(v.delete(b),b===f)break;w.reject(ts)}}c&&(s.update_pending_count(-1),f.decrement(d))};u.promise.then(m,g=>m(null,g||"unknown"))}),Ua(()=>{for(const u of v.values())u.reject(ts)}),new Promise(u=>{function f(d){function m(){d===l?u(a):f(l)}d.then(m,m)}f(l)})}function S(r){const e=Ps(r);return ti(e),e}function Uo(r){const e=Ps(r);return e.equals=Aa,e}function Ra(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)Xt(e[t])}}function zu(r){for(var e=r.parent;e!==null;){if((e.f&Pt)===0)return(e.f&Vr)===0?e:null;e=e.parent}return null}function Ho(r){var e,t=Ue;Pr(zu(r));try{r.f&=~kn,Ra(r),e=li(r)}finally{Pr(t)}return e}function Ia(r){var e=Ho(r);if(r.equals(e)||(Ke!=null&&Ke.is_fork||(r.v=e),r.wv=si()),!Mn)if(_t!==null)co()&&_t.set(r,e);else{var t=(r.f&pr)===0?Dr:Bt;Dt(r,t)}}let Go=new Set;const sn=new Map;let Fa=!1;function Wr(r,e){var t={f:0,v:r,reactions:null,equals:Ea,rv:0,wv:0};return t}function re(r,e){const t=Wr(r);return ti(t),t}function Ko(r,e=!1,t=!0){var l;const s=Wr(r);return e||(s.equals=Aa),rs&&t&&rt!==null&&rt.l!==null&&((l=rt.l).s??(l.s=[])).push(s),s}function O(r,e,t=!1){Be!==null&&(!Tr||(Be.f&ma)!==0)&&En()&&(Be.f&(Pt|Sr|Do|ma))!==0&&!(Yt!=null&&Yt.includes(r))&&ru();let s=t?Ne(e):e;return Ur(r,s)}function Ur(r,e){if(!r.equals(e)){var t=r.v;Mn?sn.set(r,e):sn.set(r,t),r.v=e;var s=Mr.ensure();s.capture(r,t),(r.f&Pt)!==0&&((r.f&Kt)!==0&&Ho(r),Dt(r,(r.f&pr)!==0?Bt:Dr)),r.wv=si(),qa(r,Kt),En()&&Ue!==null&&(Ue.f&Bt)!==0&&(Ue.f&(Br|xn))===0&&(ir===null?Wu([r]):ir.push(r)),!s.is_fork&&Go.size>0&&!Fa&&Ru()}return e}function Ru(){Fa=!1;var r=on;fo(!0);const e=Array.from(Go);try{for(const t of e)(t.f&Bt)!==0&&Dt(t,Dr),Is(t)&&Fs(t)}finally{fo(r)}Go.clear()}function Ls(r){O(r,r.v+1)}function qa(r,e){var t=r.reactions;if(t!==null)for(var s=En(),l=t.length,a=0;a<l;a++){var c=t[a],v=c.f;if(!(!s&&c===Ue)){var u=(v&Kt)===0;if(u&&Dt(c,e),(v&Pt)!==0){var f=c;_t==null||_t.delete(f),(v&kn)===0&&(v&pr&&(c.f|=kn),qa(f,Dr))}else u&&((v&Sr)!==0&&br!==null&&br.add(c),Cn(c))}}}function Ne(r){if(typeof r!="object"||r===null||rn in r)return r;const e=to(r);if(e!==va&&e!==Wc)return r;var t=new Map,s=Zn(r),l=re(0),a=Nn,c=v=>{if(Nn===a)return v();var u=Be,f=Nn;Qt(null),ni(a);var d=v();return Qt(u),ni(f),d};return s&&t.set("length",re(r.length)),new Proxy(r,{defineProperty(v,u,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&eu();var d=t.get(u);return d===void 0?d=c(()=>{var m=re(f.value);return t.set(u,m),m}):O(d,f.value,!0),!0},deleteProperty(v,u){var f=t.get(u);if(f===void 0){if(u in v){const d=c(()=>re(Lt));t.set(u,d),Ls(l)}}else O(f,Lt),Ls(l);return!0},get(v,u,f){var g;if(u===rn)return r;var d=t.get(u),m=u in v;if(d===void 0&&(!m||(g=en(v,u))!=null&&g.writable)&&(d=c(()=>{var p=Ne(m?v[u]:Lt),b=re(p);return b}),t.set(u,d)),d!==void 0){var h=o(d);return h===Lt?void 0:h}return Reflect.get(v,u,f)},getOwnPropertyDescriptor(v,u){var f=Reflect.getOwnPropertyDescriptor(v,u);if(f&&"value"in f){var d=t.get(u);d&&(f.value=o(d))}else if(f===void 0){var m=t.get(u),h=m==null?void 0:m.v;if(m!==void 0&&h!==Lt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return f},has(v,u){var h;if(u===rn)return!0;var f=t.get(u),d=f!==void 0&&f.v!==Lt||Reflect.has(v,u);if(f!==void 0||Ue!==null&&(!d||(h=en(v,u))!=null&&h.writable)){f===void 0&&(f=c(()=>{var g=d?Ne(v[u]):Lt,p=re(g);return p}),t.set(u,f));var m=o(f);if(m===Lt)return!1}return d},set(v,u,f,d){var E;var m=t.get(u),h=u in v;if(s&&u==="length")for(var g=f;g<m.v;g+=1){var p=t.get(g+"");p!==void 0?O(p,Lt):g in v&&(p=c(()=>re(Lt)),t.set(g+"",p))}if(m===void 0)(!h||(E=en(v,u))!=null&&E.writable)&&(m=c(()=>re(void 0)),O(m,Ne(f)),t.set(u,m));else{h=m.v!==Lt;var b=c(()=>Ne(f));O(m,b)}var w=Reflect.getOwnPropertyDescriptor(v,u);if(w!=null&&w.set&&w.set.call(d,f),!h){if(s&&typeof u=="string"){var _=t.get("length"),A=Number(u);Number.isInteger(A)&&A>=_.v&&O(_,A+1)}Ls(l)}return!0},ownKeys(v){o(l);var u=Reflect.ownKeys(v).filter(m=>{var h=t.get(m);return h===void 0||h.v!==Lt});for(var[f,d]of t)d.v!==Lt&&!(f in v)&&u.push(f);return u},setPrototypeOf(){tu()}})}var Jo,Oa,Ba,Da;function Iu(){if(Jo===void 0){Jo=window,Oa=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Ba=en(e,"firstChild").get,Da=en(e,"nextSibling").get,da(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),da(t)&&(t.__t=void 0)}}function Hr(r=""){return document.createTextNode(r)}function nr(r){return Ba.call(r)}function zs(r){return Da.call(r)}function R(r,e){return nr(r)}function J(r,e=!1){{var t=nr(r);return t instanceof Comment&&t.data===""?zs(t):t}}function P(r,e=1,t=!1){let s=r;for(;e--;)s=zs(s);return s}function Fu(r){r.textContent=""}function Va(){return!1}let Ya=!1;function qu(){Ya||(Ya=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function ls(r){var e=Be,t=Ue;Qt(null),Pr(null);try{return r()}finally{Qt(e),Pr(t)}}function Ou(r,e,t,s=t){r.addEventListener(e,()=>ls(t));const l=r.__on_r;l?r.__on_r=()=>{l(),s(!0)}:r.__on_r=()=>s(!0),qu()}function Wa(r){Ue===null&&(Be===null&&Qc(),Xc()),Mn&&Jc()}function Bu(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function jr(r,e,t){var s=Ue;s!==null&&(s.f&rr)!==0&&(r|=rr);var l={ctx:rt,deps:null,nodes_start:null,nodes_end:null,f:r|Kt|pr,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Fs(l),l.f|=so}catch(v){throw Xt(l),v}else e!==null&&Cn(l);var a=l;if(t&&a.deps===null&&a.teardown===null&&a.nodes_start===null&&a.first===a.last&&(a.f&es)===0&&(a=a.first,(r&Sr)!==0&&(r&Yr)!==0&&a!==null&&(a.f|=Yr)),a!==null&&(a.parent=s,s!==null&&Bu(a,s),Be!==null&&(Be.f&Pt)!==0&&(r&xn)===0)){var c=Be;(c.effects??(c.effects=[])).push(a)}return l}function co(){return Be!==null&&!Tr}function Ua(r){const e=jr(ro,null,!1);return Dt(e,Bt),e.teardown=r,e}function ge(r){Wa();var e=Ue.f,t=!Be&&(e&Br)!==0&&(e&so)===0;if(t){var s=rt;(s.e??(s.e=[])).push(r)}else return Ha(r)}function Ha(r){return jr(Oo|pa,r,!1)}function uo(r){return Wa(),jr(ro|pa,r,!0)}function Du(r){Mr.ensure();const e=jr(xn|es,r,!0);return(t={})=>new Promise(s=>{t.outro?as(e,()=>{Xt(e),s(void 0)}):(Xt(e),s(void 0))})}function Xo(r){return jr(Oo,r,!1)}function Vu(r){return jr(Do|es,r,!0)}function Qo(r,e=0){return jr(ro|e,r,!0)}function Z(r,e=[],t=[],s=[]){Pu(s,e,t,l=>{jr(ro,()=>r(...l.map(o)),!0)})}function Sn(r,e=0){var t=jr(Sr|e,r,!0);return t}function ar(r){return jr(Br|es,r,!0)}function Ga(r){var e=r.teardown;if(e!==null){const t=Mn,s=Be;ei(!0),Qt(null);try{e.call(null)}finally{ei(t),Qt(s)}}}function Ka(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){const l=t.ac;l!==null&&ls(()=>{l.abort(ts)});var s=t.next;(t.f&xn)!==0?t.parent=null:Xt(t,e),t=s}}function Yu(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Br)===0&&Xt(e),e=t}}function Xt(r,e=!0){var t=!1;(e||(r.f&ga)!==0)&&r.nodes_start!==null&&r.nodes_end!==null&&(Ja(r.nodes_start,r.nodes_end),t=!0),Ka(r,e&&!t),vo(r,0),Dt(r,Vr);var s=r.transitions;if(s!==null)for(const a of s)a.stop();Ga(r);var l=r.parent;l!==null&&l.first!==null&&Xa(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function Ja(r,e){for(;r!==null;){var t=r===e?null:zs(r);r.remove(),r=t}}function Xa(r){var e=r.parent,t=r.prev,s=r.next;t!==null&&(t.next=s),s!==null&&(s.prev=t),e!==null&&(e.first===r&&(e.first=s),e.last===r&&(e.last=t))}function as(r,e,t=!0){var s=[];Zo(r,s,!0),Qa(s,()=>{t&&Xt(r),e&&e()})}function Qa(r,e){var t=r.length;if(t>0){var s=()=>--t||e();for(var l of r)l.out(s)}else e()}function Zo(r,e,t){if((r.f&rr)===0){if(r.f^=rr,r.transitions!==null)for(const c of r.transitions)(c.is_global||t)&&e.push(c);for(var s=r.first;s!==null;){var l=s.next,a=(s.f&Yr)!==0||(s.f&Br)!==0&&(r.f&Sr)!==0;Zo(s,e,a?t:!1),s=l}}}function $o(r){Za(r,!0)}function Za(r,e){if((r.f&rr)!==0){r.f^=rr,(r.f&Bt)===0&&(Dt(r,Kt),Cn(r));for(var t=r.first;t!==null;){var s=t.next,l=(t.f&Yr)!==0||(t.f&Br)!==0;Za(t,l?e:!1),t=s}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}function $a(r,e){for(var t=r.nodes_start,s=r.nodes_end;t!==null;){var l=t===s?null:zs(t);e.append(t),t=l}}let on=!1;function fo(r){on=r}let Mn=!1;function ei(r){Mn=r}let Be=null,Tr=!1;function Qt(r){Be=r}let Ue=null;function Pr(r){Ue=r}let Yt=null;function ti(r){Be!==null&&(Yt===null?Yt=[r]:Yt.push(r))}let Wt=null,sr=0,ir=null;function Wu(r){ir=r}let ri=1,Rs=0,Nn=Rs;function ni(r){Nn=r}function si(){return++ri}function Is(r){var e=r.f;if((e&Kt)!==0)return!0;if(e&Pt&&(r.f&=~kn),(e&Dr)!==0){var t=r.deps;if(t!==null)for(var s=t.length,l=0;l<s;l++){var a=t[l];if(Is(a)&&Ia(a),a.wv>r.wv)return!0}(e&pr)!==0&&_t===null&&Dt(r,Bt)}return!1}function oi(r,e,t=!0){var s=r.reactions;if(s!==null&&!(Yt!=null&&Yt.includes(r)))for(var l=0;l<s.length;l++){var a=s[l];(a.f&Pt)!==0?oi(a,e,!1):e===a&&(t?Dt(a,Kt):(a.f&Bt)!==0&&Dt(a,Dr),Cn(a))}}function li(r){var p;var e=Wt,t=sr,s=ir,l=Be,a=Yt,c=rt,v=Tr,u=Nn,f=r.f;Wt=null,sr=0,ir=null,Be=(f&(Br|xn))===0?r:null,Yt=null,ns(r.ctx),Tr=!1,Nn=++Rs,r.ac!==null&&(ls(()=>{r.ac.abort(ts)}),r.ac=null);try{r.f|=Bo;var d=r.fn,m=d(),h=r.deps;if(Wt!==null){var g;if(vo(r,sr),h!==null&&sr>0)for(h.length=sr+Wt.length,g=0;g<Wt.length;g++)h[sr+g]=Wt[g];else r.deps=h=Wt;if(on&&co()&&(r.f&pr)!==0)for(g=sr;g<h.length;g++)((p=h[g]).reactions??(p.reactions=[])).push(r)}else h!==null&&sr<h.length&&(vo(r,sr),h.length=sr);if(En()&&ir!==null&&!Tr&&h!==null&&(r.f&(Pt|Dr|Kt))===0)for(g=0;g<ir.length;g++)oi(ir[g],r);return l!==null&&l!==r&&(Rs++,ir!==null&&(s===null?s=ir:s.push(...ir))),(r.f&tn)!==0&&(r.f^=tn),m}catch(b){return Ma(b)}finally{r.f^=Bo,Wt=e,sr=t,ir=s,Be=l,Yt=a,ns(c),Tr=v,Nn=u}}function Uu(r,e){let t=e.reactions;if(t!==null){var s=Vc.call(t,r);if(s!==-1){var l=t.length-1;l===0?t=e.reactions=null:(t[s]=t[l],t.pop())}}t===null&&(e.f&Pt)!==0&&(Wt===null||!Wt.includes(e))&&(Dt(e,Dr),(e.f&pr)!==0&&(e.f^=pr,e.f&=~kn),Ra(e),vo(e,0))}function vo(r,e){var t=r.deps;if(t!==null)for(var s=e;s<t.length;s++)Uu(r,t[s])}function Fs(r){var e=r.f;if((e&Vr)===0){Dt(r,Bt);var t=Ue,s=on;Ue=r,on=!0;try{(e&Sr)!==0?Yu(r):Ka(r),Ga(r);var l=li(r);r.teardown=typeof l=="function"?l:null,r.wv=ri;var a;gt&&bu&&(r.f&Kt)!==0&&r.deps}finally{on=s,Ue=t}}}async function Hu(){await Promise.resolve(),Na()}function o(r){var e=r.f,t=(e&Pt)!==0;if(Be!==null&&!Tr){var s=Ue!==null&&(Ue.f&Vr)!==0;if(!s&&!(Yt!=null&&Yt.includes(r))){var l=Be.deps;if((Be.f&Bo)!==0)r.rv<Rs&&(r.rv=Rs,Wt===null&&l!==null&&l[sr]===r?sr++:Wt===null?Wt=[r]:Wt.includes(r)||Wt.push(r));else{(Be.deps??(Be.deps=[])).push(r);var a=r.reactions;a===null?r.reactions=[Be]:a.includes(Be)||a.push(Be)}}}if(Mn){if(sn.has(r))return sn.get(r);if(t){var c=r,v=c.v;return((c.f&Bt)===0&&c.reactions!==null||ii(c))&&(v=Ho(c)),sn.set(c,v),v}}else t&&!(_t!=null&&_t.has(r))&&(c=r,Is(c)&&Ia(c),on&&co()&&(c.f&pr)===0&&ai(c));if(_t!=null&&_t.has(r))return _t.get(r);if((r.f&tn)!==0)throw r.v;return r.v}function ai(r){if(r.deps!==null){r.f^=pr;for(const e of r.deps)(e.reactions??(e.reactions=[])).push(r),(e.f&Pt)!==0&&(e.f&pr)===0&&ai(e)}}function ii(r){if(r.v===Lt)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(sn.has(e)||(e.f&Pt)!==0&&ii(e))return!0;return!1}function wr(r){var e=Tr;try{return Tr=!0,r()}finally{Tr=e}}const Gu=-7169;function Dt(r,e){r.f=r.f&Gu|e}function Ku(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(rn in r)el(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&rn in t&&el(t)}}}function el(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let s in r)try{el(r[s],e)}catch{}const t=to(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const s=fa(t);for(let l in s){const a=s[l].get;if(a)try{a.call(r)}catch{}}}}}const Ju=["touchstart","touchmove"];function Xu(r){return Ju.includes(r)}const ci=new Set,tl=new Set;function Qu(r,e,t,s={}){function l(a){if(s.capture||qs.call(e,a),!a.cancelBubble)return ls(()=>t==null?void 0:t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?nn(()=>{e.addEventListener(r,l,s)}):e.addEventListener(r,l,s),l}function jn(r,e,t,s,l){var a={capture:s,passive:l},c=Qu(r,e,t,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ua(()=>{e.removeEventListener(r,c,a)})}function ct(r){for(var e=0;e<r.length;e++)ci.add(r[e]);for(var t of tl)t(r)}let ui=null;function qs(r){var w;var e=this,t=e.ownerDocument,s=r.type,l=((w=r.composedPath)==null?void 0:w.call(r))||[],a=l[0]||r.target;ui=r;var c=0,v=ui===r&&r.__root;if(v){var u=l.indexOf(v);if(u!==-1&&(e===document||e===window)){r.__root=e;return}var f=l.indexOf(e);if(f===-1)return;u<=f&&(c=u)}if(a=l[c]||r.target,a!==e){Yc(r,"currentTarget",{configurable:!0,get(){return a||t}});var d=Be,m=Ue;Qt(null),Pr(null);try{for(var h,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var b=a["__"+s];b!=null&&(!a.disabled||r.target===a)&&b.call(a,r)}catch(_){h?g.push(_):h=_}if(r.cancelBubble||p===e||p===null)break;a=p}if(h){for(let _ of g)queueMicrotask(()=>{throw _});throw h}}finally{r.__root=e,delete r.currentTarget,Qt(d),Pr(m)}}}function rl(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","<!---->"),e.content}function Tn(r,e){var t=Ue;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function K(r,e){var t=(e&ka)!==0,s=(e&hu)!==0,l,a=!r.startsWith("<!>");return()=>{l===void 0&&(l=rl(a?r:"<!>"+r),t||(l=nr(l)));var c=s||Oa?document.importNode(l,!0):l.cloneNode(!0);if(t){var v=nr(c),u=c.lastChild;Tn(v,u)}else Tn(c,c);return c}}function Zu(r,e,t="svg"){var s=!r.startsWith("<!>"),l=(e&ka)!==0,a=`<${t}>${s?r:"<!>"+r}</${t}>`,c;return()=>{if(!c){var v=rl(a),u=nr(v);if(l)for(c=document.createDocumentFragment();nr(u);)c.appendChild(nr(u));else c=nr(u)}var f=c.cloneNode(!0);if(l){var d=nr(f),m=f.lastChild;Tn(d,m)}else Tn(f,f);return f}}function Ee(r,e){return Zu(r,e,"svg")}function $u(r=""){{var e=Hr(r+"");return Tn(e,e),e}}function be(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Hr();return r.append(e,t),Tn(e,t),r}function M(r,e){r!==null&&r.before(e)}let nl=!0;function pe(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function ef(r,e){return tf(r,e)}const is=new Map;function tf(r,{target:e,anchor:t,props:s={},events:l,context:a,intro:c=!0}){Iu();var v=new Set,u=m=>{for(var h=0;h<m.length;h++){var g=m[h];if(!v.has(g)){v.add(g);var p=Xu(g);e.addEventListener(g,qs,{passive:p});var b=is.get(g);b===void 0?(document.addEventListener(g,qs,{passive:p}),is.set(g,1)):is.set(g,b+1)}}};u(Io(ci)),tl.add(u);var f=void 0,d=Du(()=>{var m=t??e.appendChild(Hr());return Su(m,{pending:()=>{}},h=>{if(a){we({});var g=rt;g.c=a}l&&(s.$$events=l),nl=c,f=r(h,s)||{},nl=!0,a&&_e()}),()=>{var p;for(var h of v){e.removeEventListener(h,qs);var g=is.get(h);--g===0?(document.removeEventListener(h,qs),is.delete(h)):is.set(h,g)}tl.delete(u),m!==t&&((p=m.parentNode)==null||p.removeChild(m))}});return rf.set(f,d),f}let rf=new WeakMap;class Os{constructor(e,t=!0){kt(this,"anchor");Me(this,Ar,new Map);Me(this,Fr,new Map);Me(this,or,new Map);Me(this,Jn,new Set);Me(this,Qs,!0);Me(this,Zs,()=>{var e=Ke;if(H(this,Ar).has(e)){var t=H(this,Ar).get(e),s=H(this,Fr).get(t);if(s)$o(s),H(this,Jn).delete(t);else{var l=H(this,or).get(t);l&&(H(this,Fr).set(t,l.effect),H(this,or).delete(t),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[a,c]of H(this,Ar)){if(H(this,Ar).delete(a),a===e)break;const v=H(this,or).get(c);v&&(Xt(v.effect),H(this,or).delete(c))}for(const[a,c]of H(this,Fr)){if(a===t||H(this,Jn).has(a))continue;const v=()=>{if(Array.from(H(this,Ar).values()).includes(a)){var f=document.createDocumentFragment();$a(c,f),f.append(Hr()),H(this,or).set(a,{effect:c,fragment:f})}else Xt(c);H(this,Jn).delete(a),H(this,Fr).delete(a)};H(this,Qs)||!s?(H(this,Jn).add(a),as(c,v,!1)):v()}}});Me(this,To,e=>{H(this,Ar).delete(e);const t=Array.from(H(this,Ar).values());for(const[s,l]of H(this,or))t.includes(s)||(Xt(l.effect),H(this,or).delete(s))});this.anchor=e,xe(this,Qs,t)}ensure(e,t){var s=Ke,l=Va();if(t&&!H(this,Fr).has(e)&&!H(this,or).has(e))if(l){var a=document.createDocumentFragment(),c=Hr();a.append(c),H(this,or).set(e,{effect:ar(()=>t(c)),fragment:a})}else H(this,Fr).set(e,ar(()=>t(this.anchor)));if(H(this,Ar).set(s,e),l){for(const[v,u]of H(this,Fr))v===e?s.skipped_effects.delete(u):s.skipped_effects.add(u);for(const[v,u]of H(this,or))v===e?s.skipped_effects.delete(u.effect):s.skipped_effects.add(u.effect);s.oncommit(H(this,Zs)),s.ondiscard(H(this,To))}else H(this,Zs).call(this)}}Ar=new WeakMap,Fr=new WeakMap,or=new WeakMap,Jn=new WeakMap,Qs=new WeakMap,Zs=new WeakMap,To=new WeakMap;const nf=0,sl=1;function sf(r,e,t,s,l){var a=En(),c=Lt,v=a?Wr(c):Ko(c,!1,!1),u=a?Wr(c):Ko(c,!1,!1),f=new Os(r);Sn(()=>{var d=e(),m=!1;if(Uc(d)){var h=za(),g=!1;const p=b=>{if(!m){g=!0,h(!1),Mr.ensure();try{b()}finally{Ts(),os||Na()}}};d.then(b=>{p(()=>{Ur(v,b),f.ensure(sl,s&&(w=>s(w,v)))})},b=>{p(()=>{if(Ur(u,b),f.ensure(sl,l&&(w=>l(w,u))),!l)throw u.v})}),nn(()=>{g||p(()=>{f.ensure(nf,t)})})}else Ur(v,d),f.ensure(sl,s);return()=>{m=!0}})}function Y(r,e,t=!1){var s=new Os(r),l=t?Yr:0;function a(c,v){s.ensure(c,v)}Sn(()=>{var c=!1;e((v,u=!0)=>{c=!0,a(u,v)}),c||a(!1,null)},l)}function Pn(r,e,t){var s=new Os(r),l=!En();Sn(()=>{var a=e();l&&a!==null&&typeof a=="object"&&(a={}),s.ensure(a,t)})}function zt(r,e,t=!1,s=!1,l=!1){var a=r,c="";Z(()=>{var v=Ue;if(c!==(c=e()??"")&&(v.nodes_start!==null&&(Ja(v.nodes_start,v.nodes_end),v.nodes_start=v.nodes_end=null),c!=="")){var u=c+"";t?u=`<svg>${u}</svg>`:s&&(u=`<math>${u}</math>`);var f=rl(u);if((t||s)&&(f=nr(f)),Tn(nr(f),f.lastChild),t||s)for(;nr(f);)a.before(nr(f));else a.before(f)}})}function Gr(r,e,...t){var s=new Os(r);Sn(()=>{const l=e()??null;s.ensure(l,l&&(a=>l(a,...t)))},Yr)}function Bs(r,e,t){var s=new Os(r);Sn(()=>{var l=e()??null;s.ensure(l,l&&(a=>t(a,l)))},Yr)}function fi(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var l=r.length;for(e=0;e<l;e++)r[e]&&(t=fi(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function of(){for(var r,e,t=0,s="",l=arguments.length;t<l;t++)(r=arguments[t])&&(e=fi(r))&&(s&&(s+=" "),s+=e);return s}function lf(r){return typeof r=="object"?of(r):r??""}const vi=[...` 	
\r\f \v\uFEFF`];function af(r,e,t){var s=r==null?"":""+r;if(e&&(s=s?s+" "+e:e),t){for(var l in t)if(t[l])s=s?s+" "+l:l;else if(s.length)for(var a=l.length,c=0;(c=s.indexOf(l,c))>=0;){var v=c+a;(c===0||vi.includes(s[c-1]))&&(v===s.length||vi.includes(s[v]))?s=(c===0?"":s.substring(0,c))+s.substring(v+1):c=v}}return s===""?null:s}function cf(r,e){return r==null?null:String(r)}function yt(r,e,t,s,l,a){var c=r.__className;if(c!==t||c===void 0){var v=af(t,s,a);v==null?r.removeAttribute("class"):e?r.className=v:r.setAttribute("class",v),r.__className=t}else if(a&&l!==a)for(var u in a){var f=!!a[u];(l==null||f!==!!l[u])&&r.classList.toggle(u,f)}return a}function pt(r,e,t,s){var l=r.__style;if(l!==e){var a=cf(e);a==null?r.removeAttribute("style"):r.style.cssText=a,r.__style=e}return s}const uf=Symbol("is custom element"),ff=Symbol("is html");function F(r,e,t,s){var l=vf(r);l[e]!==(l[e]=t)&&(e==="loading"&&(r[Gc]=t),t==null?r.removeAttribute(e):typeof t!="string"&&df(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function vf(r){return r.__attributes??(r.__attributes={[uf]:r.nodeName.includes("-"),[ff]:r.namespaceURI===mu})}var di=new Map;function df(r){var e=r.getAttribute("is")||r.nodeName,t=di.get(e);if(t)return t;di.set(e,t=[]);for(var s,l=r,a=Element.prototype;a!==l;){s=fa(l);for(var c in s)s[c].set&&t.push(c);l=to(l)}return t}const hf=()=>performance.now(),Kr={tick:r=>requestAnimationFrame(r),now:()=>hf(),tasks:new Set};function hi(){const r=Kr.now();Kr.tasks.forEach(e=>{e.c(r)||(Kr.tasks.delete(e),e.f())}),Kr.tasks.size!==0&&Kr.tick(hi)}function mf(r){let e;return Kr.tasks.size===0&&Kr.tick(hi),{promise:new Promise(t=>{Kr.tasks.add(e={c:r,f:t})}),abort(){Kr.tasks.delete(e)}}}function ho(r,e){ls(()=>{r.dispatchEvent(new CustomEvent(e))})}function gf(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function mi(r){const e={},t=r.split(";");for(const s of t){const[l,a]=s.split(":");if(!l||a===void 0)break;const c=gf(l.trim());e[c]=a.trim()}return e}const pf=r=>r;function gi(r,e,t,s){var l=(r&fu)!==0,a=(r&vu)!==0,c=l&&a,v=(r&du)!==0,u=c?"both":l?"in":"out",f,d=e.inert,m=e.style.overflow,h,g;function p(){return ls(()=>f??(f=t()(e,(s==null?void 0:s())??{},{direction:u})))}var b={is_global:v,in(){var E;if(e.inert=d,!l){g==null||g.abort(),(E=g==null?void 0:g.reset)==null||E.call(g);return}a||h==null||h.abort(),ho(e,"introstart"),h=ol(e,p(),g,1,()=>{ho(e,"introend"),h==null||h.abort(),h=f=void 0,e.style.overflow=m})},out(E){if(!a){E==null||E(),f=void 0;return}e.inert=!0,ho(e,"outrostart"),g=ol(e,p(),h,0,()=>{ho(e,"outroend"),E==null||E()})},stop:()=>{h==null||h.abort(),g==null||g.abort()}},w=Ue;if((w.transitions??(w.transitions=[])).push(b),l&&nl){var _=v;if(!_){for(var A=w.parent;A&&(A.f&Yr)!==0;)for(;(A=A.parent)&&(A.f&Sr)===0;);_=!A||(A.f&so)!==0}_&&Xo(()=>{wr(()=>b.in())})}}function ol(r,e,t,s,l){var a=s===1;if($n(e)){var c,v=!1;return nn(()=>{if(!v){var w=e({direction:a?"in":"out"});c=ol(r,w,t,s,l)}}),{abort:()=>{v=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return l(),{abort:Ot,deactivate:Ot,reset:Ot,t:()=>s};const{delay:u=0,css:f,tick:d,easing:m=pf}=e;var h=[];if(a&&t===void 0&&(d&&d(0,1),f)){var g=mi(f(0,1));h.push(g,g)}var p=()=>1-s,b=r.animate(h,{duration:u,fill:"forwards"});return b.onfinish=()=>{b.cancel();var w=(t==null?void 0:t.t())??1-s;t==null||t.abort();var _=s-w,A=e.duration*Math.abs(_),E=[];if(A>0){var k=!1;if(f)for(var C=Math.ceil(A/16.666666666666668),N=0;N<=C;N+=1){var L=w+_*m(N/C),q=mi(f(L,1-L));E.push(q),k||(k=q.overflow==="hidden")}k&&(r.style.overflow="hidden"),p=()=>{var T=b.currentTime;return w+_*m(T/A)},d&&mf(()=>{if(b.playState!=="running")return!1;var T=p();return d(T,1-T),!0})}b=r.animate(E,{duration:A,fill:"forwards"}),b.onfinish=()=>{p=()=>s,d==null||d(s,1-s),l()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=Ot)},deactivate:()=>{l=Ot},reset:()=>{s===0&&(d==null||d(1,0))},t:()=>p()}}function pi(r,e,t=e){var s=new WeakSet;Ou(r,"input",async l=>{var a=l?r.defaultValue:r.value;if(a=ll(r)?al(a):a,t(a),Ke!==null&&s.add(Ke),await Hu(),a!==(a=e())){var c=r.selectionStart,v=r.selectionEnd,u=r.value.length;if(r.value=a??"",v!==null){var f=r.value.length;c===v&&v===u&&f>u?(r.selectionStart=f,r.selectionEnd=f):(r.selectionStart=c,r.selectionEnd=Math.min(v,f))}}}),wr(e)==null&&r.value&&(t(ll(r)?al(r.value):r.value),Ke!==null&&s.add(Ke)),Qo(()=>{var l=e();if(r===document.activeElement){var a=ao??Ke;if(s.has(a))return}ll(r)&&l===al(r.value)||r.type==="date"&&!l&&!r.value||l!==r.value&&(r.value=l??"")})}function ll(r){var e=r.type;return e==="number"||e==="range"}function al(r){return r===""?null:+r}const Lo=class Lo{constructor(e){Me(this,Po);Me(this,_n,new WeakMap);Me(this,ws);Me(this,$s);xe(this,$s,e)}observe(e,t){var s=H(this,_n).get(e)||new Set;return s.add(t),H(this,_n).set(e,s),it(this,Po,Dc).call(this).observe(e,H(this,$s)),()=>{var l=H(this,_n).get(e);l.delete(t),l.size===0&&(H(this,_n).delete(e),H(this,ws).unobserve(e))}}};_n=new WeakMap,ws=new WeakMap,$s=new WeakMap,Po=new WeakSet,Dc=function(){return H(this,ws)??xe(this,ws,new ResizeObserver(e=>{for(var t of e){Lo.entries.set(t.target,t);for(var s of H(this,_n).get(t.target)||[])s(t)}}))},kt(Lo,"entries",new WeakMap);let il=Lo;var bf=new il({box:"border-box"});function bi(r,e,t){var s=bf.observe(r,()=>t(r[e]));Xo(()=>(wr(()=>t(r[e])),s))}function wi(r,e){return r===e||(r==null?void 0:r[rn])===e}function Ln(r={},e,t,s){return Xo(()=>{var l,a;return Qo(()=>{l=a,a=[],wr(()=>{r!==t(...a)&&(e(r,...a),l&&wi(t(...l),r)&&e(null,...l))})}),()=>{nn(()=>{a&&wi(t(...a),r)&&e(null,...a)})}}),r}function wf(r=!1){const e=rt,t=e.l.u;if(!t)return;let s=()=>Ku(e.s);if(r){let l=0,a={};const c=Ps(()=>{let v=!1;const u=e.s;for(const f in u)u[f]!==a[f]&&(a[f]=u[f],v=!0);return v&&l++,l});s=()=>o(c)}t.b.length&&uo(()=>{_i(e,s),Fo(t.b)}),ge(()=>{const l=wr(()=>t.m.map(Hc));return()=>{for(const a of l)typeof a=="function"&&a()}}),t.a.length&&ge(()=>{_i(e,s),Fo(t.a)})}function _i(r,e){if(r.l.s)for(const t of r.l.s)o(t);e()}let mo=!1;function _f(r){var e=mo;try{return mo=!1,[r(),mo]}finally{mo=e}}const yf={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function zn(r,e,t){return new Proxy({props:r,exclude:e},yf)}const xf={get(r,e){let t=r.props.length;for(;t--;){let s=r.props[t];if($n(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(r,e,t){let s=r.props.length;for(;s--;){let l=r.props[s];$n(l)&&(l=l());const a=en(l,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let s=r.props[t];if($n(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=en(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(r,e){if(e===rn||e===ba)return!1;for(let t of r.props)if($n(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props)if($n(t)&&(t=t()),!!t){for(const s in t)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(t))e.includes(s)||e.push(s)}return e}};function cr(...r){return new Proxy({props:r},xf)}function B(r,e,t,s){var E;var l=!rs||(t&au)!==0,a=(t&cu)!==0,c=(t&uu)!==0,v=s,u=!0,f=()=>(u&&(u=!1,v=c?wr(s):s),v),d;if(a){var m=rn in r||ba in r;d=((E=en(r,e))==null?void 0:E.set)??(m&&e in r?k=>r[e]=k:void 0)}var h,g=!1;a?[h,g]=_f(()=>r[e]):h=r[e],h===void 0&&s!==void 0&&(h=f(),d&&(l&&$c(),d(h)));var p;if(l?p=()=>{var k=r[e];return k===void 0?f():(u=!0,k)}:p=()=>{var k=r[e];return k!==void 0&&(v=void 0),k===void 0?v:k},l&&(t&iu)===0)return p;if(d){var b=r.$$legacy;return(function(k,C){return arguments.length>0?((!l||!C||b||g)&&d(C?p():k),k):p()})}var w=!1,_=((t&lu)!==0?Ps:Uo)(()=>(w=!1,p()));a&&o(_);var A=Ue;return(function(k,C){if(arguments.length>0){const N=C?o(_):l&&a?Ne(k):k;return O(_,N),w=!0,v!==void 0&&(v=N),k}return Mn&&w||(A.f&Vr)!==0?_.v:o(_)})}function kf(r){rt===null&&wa(),rs&&rt.l!==null?Ef(rt).m.push(r):ge(()=>{const e=wr(r);if(typeof e=="function")return e})}function Ef(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Af="5";typeof window<"u"&&((Fc=window.__svelte??(window.__svelte={})).v??(Fc.v=new Set)).add(Af),wu();function Cf(r){return Ds(r,.5)}function Sf(r){return Ds(r,.75)-Ds(r,.25)}function Ds(r,e){if(Ie(r))return Ds(r.v,e);if(Ie(e))return Ds(r,e.v);const t=r.length;if(Array.isArray(e)||(e=[e]),!wl(e[0])||Jr(e)<0||Lr(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(c,v){const u=(t-1)*v+1,f=Math.floor(u),d=Math.ceil(u);return c[f-1]+(c[d-1]-c[f-1])*(u-Math.floor(u))}const l=kl(r),a=e.map(c=>s(l,c));return e.length==1?a[0]:ft(a)}function yi(r,e){Ie(r)&&yi(r.v,e);const t=ln(r);if(t[0]===t[1])throw new Error('split: values in a vector "x" should vary.');const s=(t[1]-t[0])/e;return He.seq(t[0],t[1],s)}function xi(r){if(Ie(r))return xi(r.v);const e=new He.valuesConstructor(r.length-1);for(let t=0;t<r.length-1;t++)e[t]=r[t+1]-r[t];return new He(e)}function cl(r,e){if(Ie(r))return cl(r.v,e);e===void 0&&(e=.1);const t=ln(r),s=(t[1]-t[0])*e;return[t[0]-s,t[1]+s]}function ln(r){if(Ie(r))return ln(r.v);let e=r[0],t=r[0];for(let s=1;s<r.length;s++)r[s]<e&&(e=r[s]),r[s]>t&&(t=r[s]);return[e,t]}function go(r,e){return Ie(r)?go(r.v,e):Math.sqrt(po(r,e))}function po(r,e){if(e===void 0&&(e=!1),Ie(r))return po(r.v);const t=Rn(r);let s=0;for(let l=0;l<r.length;l++){const a=r[l]-t;s=s+a*a}return s/(e?r.length:r.length-1)}function Rn(r){return Ie(r)?Rn(r.v):ki(r)/r.length}function ki(r){if(Ie(r))return ki(r.v);let e=0;for(let t=0;t<r.length;t++)e=e+r[t];return e}function Ei(r){if(Ie(r))return Ei(r.v);let e=1;for(let t=0;t<r.length;t++)e=e*r[t];return e}function Jr(r){return Ie(r)||yr(r)?r.v[ul(r.v)-1]:r[ul(r)-1]}function ul(r){if(Ie(r)||yr(r))return ul(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]<t&&(e=s,t=r[s-1]);return e}function Lr(r){return Ie(r)||yr(r)?r.v[fl(r.v)-1]:r[fl(r)-1]}function fl(r){if(Ie(r)||yr(r))return fl(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]>t&&(e=s,t=r[s-1]);return e}const vl=30,Mf=1e-7,Nf=1e-7,Ai=1e-13,Ci=1e3,jf=100;function Si(r,e,t,s,l){s===void 0&&(s=Ci),t===void 0&&(t=Ai),l===void 0&&(l=jf);let a=t,c=s,v=(c-a)/l;for(let u=0;u<l;u++){let f,d;for(let g=0;g<l;g++){f=a+g*v,d=a+(g+1)*v;const p=e(f),b=e(d);if(p<=r&&b>=r)break}const m=(f+d)/2,h=e(m);if(Math.abs(h-r)<Mf||(a=f,c=d,v=(c-a)/l,v/c<Nf))return m}return(a+c)/2}function Mi(r,e=0,t=1){let s=He.zeros(r);for(let l=0;l<r;l++)s.v[l]=e+Math.random()*(t-e);return s}function Ni(r,e=0,t=1){let s=He.zeros(r);for(let l=0;l<r;l++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[l]=a*Math.sin(c)*t+e}return s}function dl(r,e=0,t=1){if(Ie(r))return r.apply(l=>dl(l,e,t));const s=1/(Math.sqrt(2)*t);return .5*(1+Pf((r-e)*s))}function hl(r,e=0,t=1){if(Ie(r))return r.apply(V=>hl(V,e,t));if(e!==0||t!==1)return hl(r)*t+e;if(r<0||r>1)throw Error('Parameter "p" must be between 0 and 1.');if(r<1e-10)return-1/0;if(r>.9999999999)return 1/0;const s=.425,l=5,a=.180625,c=1.6,v=3.3871327179,u=5.0434271938*10,f=1.5929113202*100,d=5.910937472*10,m=1.7895169469*10,h=7.8757757664*10,g=6.71875636*10,p=1.4234372777,b=2.75681539,w=1.3067284816,_=1.7023821103*.1,A=7.370016425*.1,E=1.2021132975*.1,k=6.657905115,C=3.081226386,N=4.2868294337*.1,L=1.7337203997*.01,q=2.4197894225*.1,T=1.2258202635*.01,j=r-.5;let y;if(Math.abs(j)<=s)return y=a-j*j,j*(((d*y+f)*y+u)*y+v)/(((g*y+h)*y+m)*y+1);y=j<0?r:1-r,y=Math.sqrt(-Math.log(y));let z;return y<=l?(y=y-c,z=(((_*y+w)*y+b)*y+p)/((E*y+A)*y+1)):(y=y-l,z=((L*y+N)*y+C+k)/((T*y+q)*y+1)),j<0?-z:z}function ml(r,e,t){if(t<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(r))return ml(ft(r),e,t);if(Ie(r))return r.apply(s=>ml(s,e,t));if(r<=0)return 0;if(t<=0&&ML_ERR_return_NAN,t==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(r<1)return 0;if(r==1)return .5;if(r>1)return 1}return bo(r*e,e)}return e==Number.POSITIVE_INFINITY?1-bo(t/r,t):e*r>t?1-wo(t/(t+e*r),t/2,e/2):wo(e*r/(t+e*r),e/2,t/2)}function ji(r,e,t){if(r===0)return 0;if(r===1)return Inf;if(t<=0)return NaN;let s=Ci,l=Ai;if(r>.9997&&t===1?(s=1e7,l=6e5,r=.9997):r>.9992&&t===1?(s=1e7,l=6e5):r>.997&&t===1?(s=1e6,l=45e3):r>.992&&t===1?(s=1e5,l=5e3):r>.97&&t===1&&(s=1e4,l=400),Array.isArray(r))return ji(ft(r),e,t);const a=v=>ml(v,e,t);function c(v,u,f){return v===0?0:v===1?Inf:u===0?NaN:f===0?NaN:Si(v,a,l,s)}return Ie(r)?r.apply(c,e,t):c(r,e,t)}function bo(r,e){if(Array.isArray(r))return bo(ft(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const f=u/e,d=Math.pow(f,1/6)-.5*Math.pow(f,1/3)+1/3*Math.pow(f,1/2);return dl(d,t,l)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:Tf(u/2,e/2)/Vs(e/2)}const v=e>vl?a:c;return Ie(r)?r.apply(v):v(r)}function In(r,e){if(Array.isArray(r))return In(ft(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const f=hl(u,t,l),d=Math.pow(Math.sqrt(36*f*f-30*f+13)/4+(3*f-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:Si(u,d=>bo(d,e),0,vl*10)}const v=e>vl?a:c;return Ie(r)?r.apply(v):v(r)}function wo(r,e,t){if(Array.isArray(r))return wo(ft(r),e,t);if(Ie(r))return r.apply(l=>wo(l,e,t));if(r<=0)return 0;if(r>=1)return 1;if(e==0||t==0||!Number.isFinite(e)||!Number.isFinite(t))return e==0&&t==0?.5:e==0||e/t==0?1:t==0||t/e==0||r<.5?0:1;const s=.5-r+.5;return Wf(e,t,r,s)}function Vs(r){if(Ie(r))return r.apply(Vs);if(r<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(r<.5)return Math.PI/(Math.sin(Math.PI*r)+Vs(1-r));r=r-1;let t=.9999999999998099;for(let l=0;l<e.length;l++)t=t+e[l]/(r+l+1);const s=r+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,r+.5)*Math.exp(-s)*t}function Tf(r,e){let l=0;for(let a=0;a<1e4;a++){const c=Math.pow(r,a)/Vs(e+a+1);if(isNaN(c)||c<1e-18)break;l+=c}return Math.pow(r,e)*Vs(e)*Math.exp(-r)*l}function Pf(r){const e=r>=0?1:-1;r=Math.abs(r);const t=.254829592,s=-.284496736,l=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*r),f=1-((((c*u+a)*u+l)*u+s)*u+t)*u*Math.exp(-r*r);return e*f}function Ti(r,e){const t=.564189583547756,s=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],v=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,d,m,h,g=Math.abs(e);if(g<=.5)return d=e*e,h=(((s[0]*d+s[1])*d+s[2])*d+s[3])*d+s[4]+1,m=((l[0]*d+l[1])*d+l[2])*d+1,f=.5-e*(h/m)+.5,f=Math.exp(d)*f,f;if(g<=4)h=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],m=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],f=h/m;else{if(e<=-5.6)return f=2,f=Math.exp(e*e)*2,f;d=1/(e*e),h=(((v[0]*d+v[1])*d+v[2])*d+v[3])*d+v[4],m=(((u[0]*d+u[1])*d+u[2])*d+u[3])*d+1,f=(t-d*h/m)/g}return e<0&&(f=Math.exp(e*e)*2-f),f}function Pi(r,e){let t=r+e-2;return t<=.25?ur(t+1):t<=1.25?ur(t)+cn(t):ur(t-1)+Math.log(t*(t+1))}function _o(r,e){const t=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;let u,f,d,m,h,g,p,b,w,_,A,E,k,C,N;return d=Math.min(r,e),m=Math.max(r,e),g=d/m,h=g/(g+1),w=1/(g+1),E=w*w,_=w+E+1,A=w+E*_+1,k=w+E*A+1,C=w+E*k+1,N=w+E*C+1,f=1/m,p=f*f,b=((((v*N*p+c*C)*p+a*k)*p+l*A)*p+s*_)*p+t,b*=h/m,f=1/d,p=f*f,u=(((((v*p+c)*p+a)*p+l)*p+s)*p+t)/d+b,u}function ut(r){let e,t,s,l,a;if(t=r,e=r-.5,e>0&&(t=e-.5),t<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],v=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*t+c[7])*t+c[6])*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],l=(u*t+v)*t+1,s=a/l,e>0?t*s/r:r*(s+.5+.5)}else{if(t==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],v=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],l=(((v[4]*t+v[3])*t+v[2])*t+v[1])*t+1,s=a/l,e>0?t/r*(s-.5-.5):r*s}}}function Lf(r,e,t){let s,l,a,c;if(r<-1.1||r>1.1)return Number.NaN;c=r*2,a=l=0,s=0;for(let v=1;v<=t;v++)a=l,l=s,s=c*l-a+e[t-v];return(s-a)*.5}function Li(r){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],t=22,s=-.999999985;if(r==0)return 0;if(r==-1)return Number.NEGATIVE_INFINITY;if(r<-1)return Number.NaN;if(Math.abs(r)<=.375)return Math.abs(r)<.5*Number.EPSILON?r:0<r&&r<1e-8||-1e-9<r&&r<0?r*(1-.5*r):r*(1-r*Lf(r/.375,e,t));if(r<s)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+r)}function an(r,e){const t=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;let u,f,d,m,h,g,p,b,w,_,A,E,k,C;return r>e?(d=e/r,u=1/(d+1),b=d/(d+1),f=r+(e-.5)):(d=r/e,u=d/(d+1),b=1/(d+1),f=e+(r-.5)),A=b*b,w=b+A+1,_=b+A*w+1,E=b+A*_+1,k=b+A*E+1,C=b+A*k+1,m=1/(e*e),p=((((v*C*m+c*k)*m+a*E)*m+l*_)*m+s*w)*m+t,p*=u/e,h=f*cn(r/e),g=r*(Math.log(e)-1),h>g?p-g-h:p-h-g}function ur(r){if(r<.6){const p=((((((-.00271935708322958*r+-.0673562214325671)*r+-.402055799310489)*r+-.780427615533591)*r+-.168860593646662)*r+.844203922187225)*r+.577215664901533)/((((((.000667465618796164*r+.0325038868253937)*r+.361951990101499)*r+1.56875193295039)*r+3.12755088914843)*r+2.88743195473681)*r+1);return-r*p}else{const e=.422784335098467,t=.848044614534529,s=.565221050691933,l=.156513060486551,a=.017050248402265,c=.000497958207639485,v=1.24313399877507,u=.548042109832463,f=.10155218743983,d=.00713309612391,m=.000116165475989616,h=r-.5-.5,g=(((((c*h+a)*h+l)*h+s)*h+t)*h+e)/(((((m*h+d)*h+f)*h+u)*h+v)*h+1);return h*g}}function _r(r){const e=.418938533204673,t=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;if(r<=.8)return ur(r)-Math.log(r);if(r<=2.25)return ur(r-.5-.5);if(r<10){let d=Math.round(r-1.25),m=r,h=1;for(let g=1;g<=d;++g)m+=-1,h*=m;return ur(m-1)+Math.log(h)}let u=1/(r*r),f=(((((v*u+c)*u+a)*u+l)*u+s)*u+t)/r;return e+f+(r-.5)*(Math.log(r)-1)}function gl(r,e){const t=.918938533204673;let s=Math.min(r,e),l=Math.max(r,e);function a(c,v,u){let f=Math.round(u-1),d=1;for(let m=1;m<=f;++m)u+=-1,d*=u/(v+u);return c+Math.log(d)+(_r(v)+(_r(u)-Pi(v,u)))}if(s<8){if(s<1)return l<8?_r(s)+(_r(l)-_r(s+l)):_r(s)+an(s,l);let c;if(s<2)return l<=2?_r(s)+_r(l)-Pi(s,l):l<8?(c=0,a(c,s,l)):_r(s)+an(s,l);if(l<=1e3){let v=Math.round(s-1);c=1;for(let u=1;u<=v;++u){s+=-1;let f=s/l;c*=f/(f+1)}return c=Math.log(c),l>=8?c+_r(s)+an(s,l):a(c,s,l)}else{let v=Math.round(s-1);c=1;for(let u=1;u<=v;++u)s+=-1,c*=s/(s/l+1);return log(c)-v*log(l)+(_r(s)+an(s,l))}}else{let c=_o(s,l),v=s/l,u=-(s-.5)*Math.log(v/(v+1)),f=l*cn(v);return u>f?Math.log(l)*-.5+t+c-f-u:Math.log(l)*-.5+t+c-u-f}}function zi(r){return(r==0?1024:-300)*.69314718055995*.99999}function cs(r){const e=.0566749439387324,t=.0456512608815524,s=.333333333333333,l=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,v=.354508718369557;let u,f,d,m,h;return r<-.39||r>.57?(m=r+.5+.5,r-Math.log(m)):(r<-.18?(u=r+.3,u/=.7,h=e-u*.3):r>.18?(u=r*.75-.25,h=t+u/3):(u=r,h=0),f=u/(u+2),d=f*f,m=((a*d+l)*d+s)/((v*d+c)*d+1),d*2*(1/(1-f)-f*m)+h)}function cn(r){if(Math.abs(r)>.375)return Math.log(1+r);const e=-1.29418923021993,t=.405303492862024,s=-.0178874546012214,l=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let v=r/(r+2),u=v*v,f=(((s*u+t)*u+e)*u+1)/(((c*u+a)*u+l)*u+1);return v*2*f}function zf(r){const e=.564189583547756,t=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],l=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],v=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,f,d,m,h;if(d=Math.abs(r),d<=.5)return u=r*r,h=(((t[0]*u+t[1])*u+t[2])*u+t[3])*u+t[4]+1,m=((s[0]*u+s[1])*u+s[2])*u+1,r*(h/m);if(d<=4){h=((((((l[0]*d+l[1])*d+l[2])*d+l[3])*d+l[4])*d+l[5])*d+l[6])*d+l[7],m=((((((a[0]*d+a[1])*d+a[2])*d+a[3])*d+a[4])*d+a[5])*d+a[6])*d+a[7];let p=.5-Math.exp(-r*r)*h/m+.5;return r<0?-p:p}if(d>=5.8)return r>0?1:-1;f=r*r,u=1/f,h=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],m=(((v[0]*u+v[1])*u+v[2])*u+v[3])*u+1,u=(e-h/(f*m))/d;let g=.5-Math.exp(-f)*u+.5;return r<0?-g:g}function Rf(r){const e=914041914819518e-24,t=.0238082361044469,s=-.499999999085958,l=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(r)<=.15)return r*(((t*r+e)*r+1)/((((c*r+a)*r+l)*r+s)*r+1));{let v=Math.exp(r);return r>0?v*(.5-1/v+.5):v-.5-.5}}function Ys(r,e){let t;if(e>0){if(r>0||(t=r+e,t<0))return Math.exp(r)*Math.exp(e)}else if(r<0||(t=r+e,t>0))return Math.exp(r)*Math.exp(e);return Math.exp(t)}function If(r){const e=.785398163397448,t=1.4616321449683622,s=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],l=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let v,u,f,d,m,h,g,p,b,w,_,A,E;if(_=Number.MAX_SAFE_INTEGER,d=.5/(.5*Number.EPSILON),_>d&&(_=d),E=1e-9,p=0,r<.5){if(fabs(r)<=E){if(r==0)return 0;p=-1/r}else{if(m=-r,b=e,m<=0&&(m=-m,b=-b),m>=_)return 0;if(f=Math.round(m),m-=f,f=Math.round(m*4),m=(m-f*.25)*4,u=f/2,u+u!=f&&(m=1-m),h=e*m,v=u/2,v+v!=u&&(b=-b),u=(f+1)/2,v=u/2,v+=v,v==u){if(h==0)return 0;p=b*(cos(h)/sin(h)*4)}else p=b*(sin(h)/cos(h)*4)}r=1-r}if(r<=3){g=r,A=s[0]*r;for(let k=1;k<=5;++k)g=(g+l[k-1])*r,A=(A+s[k])*r;return g=(A+s[6])/(g+l[5]),w=r-t,g*w+p}if(r<_){m=1/(r*r),g=m,A=a[0]*m;for(let k=1;k<=3;++k)g=(g+c[k-1])*m,A=(A+a[k])*m;p=A/(g+c[3])-.5/r+p}return p+log(r)}function Ff(r,e,t,s){let l,a,c,v,u,f;if(r>s*.001){if(v=r*Math.log(t),v<Math.exparg(1))return 0;l=Math.exp(v)}else l=1;for(l*=e/r,f=s/r,u=r+1,v=t,c=v/u,u+=1,v=t*v,a=v/u,c+=a;Math.abs(t)>f;)u+=1,v=t*v,a=v/u,c+=a;return l*=r*c+1,l}function qf(r,e,t,s){const l=.577215664901533;let a,c,v,u,f,d,m=e*t;for(f=t-m,c=e*s<=.02?Math.log(t)+If(e)+l+f:Math.log(m)+l+f,a=s*5*Math.abs(c),v=1,u=0,v+=1,f*=t-m/v,d=f/v,u+=d;Math.abs(d)>a;)v+=1,f*=t-m/v,d=f/v,u+=d;return-r*(c+u)}function pl(r,e,t,s){let l,a,c,v,u,f,d,m,h;if(t==0)return 0;if(d=Math.min(r,e),d>=1)f=r*Math.log(t)-gl(r,e),a=Math.exp(f)/r;else if(m=Math.max(r,e),m<8)if(m<=1){if(a=Math.pow(t,r),a==0)return a;h=r+e,h>1?(u=r+e-1,f=(ut(u)+1)/h):f=ut(h)+1,c=(ut(r)+1)*(ut(e)+1)/f,a*=c*(e/h)}else{if(u=ur(d),l=Math.round(m-1),l>=1){c=1;for(let _=1;_<=l;++_)m+=-1,c*=m/(d+m);u+=Math.log(c)}f=r*Math.log(t)-u,m+=-1,h=d+m,h>1?(u=d+m-1,v=(ut(u)+1)/h):v=ut(h)+1,a=Math.exp(f)*(d/r)*(ut(m)+1)/v}else u=ur(d)+an(d,m),f=r*Math.log(t)-u,a=d/r*Math.exp(f);if(a==0||r<=s*.1)return a;let g=s/r,p=0,b=0,w;for(c=1,p+=1,c*=(.5-e/p+.5)*t,w=c/(r+p),b+=w;p<1e7&&Math.abs(w)>g;)p+=1,c*=(.5-e/p+.5)*t,w=c/(r+p),b+=w;return r*b>-1?a*=r*b+1:a=0,a}function yo(r,e,t,s,l,a){let c,v,u,f,d,m=r+e,h=r+1;if(l>1&&r>=1&&m>=h*1.1?(u=Math.round(Math.abs(zi(1))),v=Math.round(zi(0)),u>v&&(u=v),f=Math.exp(-u)):(u=0,f=1),c=Df(u,r,e,t,s)/r,l==1||c==0)return c;let g=l-1,p=f;if(v=0,e>1){if(s>1e-4){let b=(e-1)*t/s-r;b>=1&&(v=b<g?Math.round(b):g)}else v=g;for(let b=0;b<v;++b)d=b,f*=(m+d)/(h+d)*t,p+=f}for(let b=v;b<g&&(d=b,f*=(m+d)/(h+d)*t,p+=f,!(f<=a*p));++b);return c*=p,c}function Of(r,e,t,s,l,a){let c,v,u,f,d,m,h,g,p,b,w,_,A,E,k,C,N,L,q;if(!Number.isFinite(l)||(q=Bf(r,e,t,s),Number.isNaN(q)))return Number.NaN;if(q==0)return 0;for(c=l+1,p=e/r,b=1/r+1,E=s+1,u=0,f=1,m=r+1,_=0,A=1,k=1,C=c/b,d=b/c,u+=1,h=u/r,g=u*(e-u)*t,v=r/m,L=f*(f+p)*v*v*(g*t),v=(h+1)/(b+h+h),N=u+g/m+v*(c+u*E),f=h+1,m+=2,h=L*_+N*k,_=k,k=h,h=L*A+N*C,A=C,C=h,w=d,d=k/C,_/=C,A/=C,k=d,C=1;u<1e4&&(u+=1,h=u/r,g=u*(e-u)*t,v=r/m,L=f*(f+p)*v*v*(g*t),v=(h+1)/(b+h+h),N=u+g/m+v*(c+u*E),f=h+1,m+=2,h=L*_+N*k,_=k,k=h,h=L*A+N*C,A=C,C=h,w=d,d=k/C,!(Math.abs(d-w)<=a*d));)_/=C,A/=C,k=d,C=1;return q*d}function Bf(r,e,t,s){const l=.398942280401433;let a,c,v,u,f,d,m,h,g;if(t==0||s==0)return 0;if(m=Math.min(r,e),m<8){let p,b;if(t<=.375?(p=Math.log(t),b=cn(-t)):s>.375?(p=Math.log(t),b=Math.log(s)):(p=cn(-s),b=Math.log(s)),d=r*p+e*b,m>=1)return d-=gl(r,e),Math.exp(d);if(h=Math.max(r,e),h>=8)return u=ur(m)+an(m,h),m*Math.exp(d-u);if(h<=1){let _=Math.exp(d);return _==0?0:(g=r+e,g>1?(u=r+e-1,d=(ut(u)+1)/g):d=ut(g)+1,c=(ut(r)+1)*(ut(e)+1)/d,_*(m*c)/(m/h+1))}if(u=ur(m),a=Math.round(h-1),a>=1){c=1;for(let _=1;_<=a;++_)h+=-1,c*=h/(m+h);u=Math.log(c)+u}d-=u,h+=-1,g=m+h;let w;return g>1?(u=m+h-1,w=(ut(u)+1)/g):w=ut(g)+1,m*Math.exp(d)*(ut(h)+1)/w}else{let p,b,w,_;return r<=e?(p=r/e,b=p/(p+1),w=1/(p+1),_=r-(r+e)*t):(p=e/r,b=1/(p+1),w=p/(p+1),_=(r+e)*s-e),v=-_/r,u=Math.abs(v)>.6?v-Math.log(t/b):cs(v),v=_/e,f=Math.abs(v)<=.6?cs(v):v-Math.log(s/w),d=Math.exp(-(r*u+e*f)),l*Math.sqrt(e*b)*d*Math.exp(-_o(r,e))}}function Df(r,e,t,s,l){const a=.398942280401433;let c,v,u,f,d,m,h,g;if(m=Math.min(e,t),m<8){let p,b;if(s<=.375?(p=Math.log(s),b=cn(-s)):l>.375?(p=Math.log(s),b=Math.log(l)):(p=cn(-l),b=Math.log(l)),d=e*p+t*b,m>=1)return d-=gl(e,t),Ys(r,d);if(h=Math.max(e,t),h>=8)return u=ur(m)+an(m,h),m*Ys(r,d-u);if(h<=1){let _=Ys(r,d);return _==0?_:(g=e+t,g>1?(u=e+t-1,d=(ut(u)+1)/g):d=ut(g)+1,c=(ut(e)+1)*(ut(t)+1)/d,_*(m*c)/(m/h+1))}u=ur(m);let w=Math.round(h-1);if(w>=1){c=1;for(let _=1;_<=w;++_)h+=-1,c*=h/(m+h);u+=Math.log(c)}return d-=u,h+=-1,g=m+h,v=g>1?(ut(g-1)+1)/g:ut(g)+1,m*Ys(r,d)*(ut(h)+1)/v}else{let p,b,w,_;e>t?(p=t/e,b=1/(p+1),w=p/(p+1),_=(e+t)*l-t):(p=e/t,b=p/(p+1),w=1/(p+1),_=e-(e+t)*s),-Li(t/e);let A=-_/e;return u=Math.abs(A)>.6?A-Math.log(s/b):cs(A),A=_/t,f=Math.abs(A)>.6?A-Math.log(l/w):cs(A),d=Ys(r,-(e*u+t*f)),a*Math.sqrt(t*b)*d*Math.exp(-_o(e,t))}}function bl(r,e,t,s,l,a){let v=Array(30),u=Array(30),f=e-.5-.5,d=r+f*.5,m=s>.375?Math.log(t):cn(-s),h=-d*m;if(e*h==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+Li(ut(e))+e*Math.log(h)+d*m,p=g-(an(e,r)+e*Math.log(d)),b=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let w=b==0,_=l==0?0:Math.exp(Math.log(l)-p),A=Vf(e,h,g,a),E=.25/(d*d),k=m*.25*m,C=A,N=C,L=1,q=1,T=0;for(let j=1;j<=30;++j){let y=e+T;C=(y*(y+1)*C+(h+y+1)*L)*E,T+=2,L*=k,q/=T*(T+1);let z=j-1;v[z]=q;let V=0;if(j>1){let I=e-j;for(let W=1;W<=z;++W)V+=I*v[W-1]*u[z-W],I+=e}u[z]=f*q+V/j;let D=u[z]*C;if(N+=D,N<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(D)<=a*(N+_))break}return l+=w?Math.exp(p+Math.log(N)):b*N,l}function Vf(r,e,t,s){const l=1.772453850905516;if(r*e==0)return e<=r?Math.exp(-t):0;if(r==.5){if(e<.25)return(.5-zf(Math.sqrt(e))+.5)*Math.exp(-t);{let a=Math.sqrt(e);return Ti(1,a)/a*l}}else if(e<1.1){let a=3,c=e,v=e/(r+3),u=s*.1/(r+1),f;for(a+=1,c*=-(e/a),f=c/(r+a),v+=f;Math.abs(f)>u;)a+=1,c*=-(e/a),f=c/(r+a),v+=f;let d=r*e*((v/6-.5/(r+2))*e+1/(r+1)),m=r*Math.log(e),h=ut(r),g=h+1;if(e>=.25&&r<e/2.59||m>-.13394){let p=Rf(m),b=((p+.5+.5)*d-p)*g-h;return b<=0?0:b*Math.exp(-t)}else return(.5-Math.exp(m)*g*(.5-d+.5)+.5)*Math.exp(-t)}else{let a=1,c=1,v=e,u=e+(1-r),f=1,d,m;a=e*c+f*a,v=e*u+f*v,d=a/v,f+=1;let h=f-r;for(c=a+h*c,u=v+h*u,m=c/u;Math.abs(m-d)>=s*m;)a=e*c+f*a,v=e*u+f*v,d=a/v,f+=1,h=f-r,c=a+h*c,u=v+h*u,m=c/u;return m}}function Yf(r,e,t,s){const a=1.12837916709551,c=.353553390593274,v=Array(21),u=Array(21),f=Array(21),d=Array(21);let m=r*cs(-t/r)+e*cs(t/e),h;if(h=Math.exp(-m),h==0)return 0;let g=Math.sqrt(m),p=g/c*.5,b=m+m,w,_,A,E;r<e?(w=r/e,_=1/(w+1),A=(e-r)/e,E=1/Math.sqrt(r*(w+1))):(w=e/r,_=1/(w+1),A=(e-r)/r,E=1/Math.sqrt(e*(w+1))),v[0]=A*.6666666666666666,f[0]=v[0]*-.5,d[0]=-f[0];let k=.5/a*Ti(1,g),C=c,N=k+d[0]*E*C,L=1,q=w*w,T=1,j=E,y=p,z=b;for(let D=2;D<=20;D+=2){T*=q,v[D-1]=_*2*(w*T+1)/(D+2);let I=D+1;L+=T,v[I-1]=A*2*L/(D+3);for(let te=D;te<=I;++te){let Q=(te+1)*-.5;u[0]=Q*v[0];for(let se=2;se<=te;++se){let he=0;for(let fe=1;fe<=se-1;++fe){let ee=se-fe;he+=(fe*Q-ee)*v[fe-1]*u[ee-1]}u[se-1]=Q*v[se-1]+he/se}f[te-1]=u[te-1]/(te+1);let ne=0;for(let se=1;se<=te-1;++se)ne+=d[te-se-1]*f[se-1];d[te-1]=-(ne+f[te-1])}k=c*y+(D-1)*k,C=c*z+D*C,y=b*y,z=b*z,j*=E;let W=d[D-1]*j*k;j*=E;let le=d[I-1]*j*C;if(N+=W+le,Math.abs(W)+Math.abs(le)<=s*N)break}let V=Math.exp(-_o(r,e));return a*h*V*N}function Wf(r,e,t,s){let a=0,c=0;function v(w,_,A,E){const k=pl(w,_,A,1e-15);return E?.5-k+.5:k}function u(w,_,A,E){const k=pl(_,w,A,1e-15);return E?k:.5-k+.5}function f(w,_,A,E,k,C){const N=Of(w,_,A,E,k,15000000000000002e-30);return C?.5-N+.5:N}function d(w,_,A,E,k){let C=Math.round(_);_=_-C,_===0&&(C=C-1,_=1);let N=yo(_,w,E,A,C,1e-15);return A<=.7?(N=N+pl(w,_,A,1e-15),k?.5-N+.5:N):(w<=15&&(C=20,N=N+yo(w,_,A,E,C,1e-15),w=w+C),N=bl(w,_,A,E,N,15*1e-15),k?.5-N+.5:N)}if(r<1e-15*.001&&e<1e-15*.001)return e/(r+e);let m,h,g,p,b;if(r<=1||e<=1){if(t>.5?(b=!0,m=e,g=s,h=r,p=t):(b=!1,m=r,g=t,h=e,p=s),h<Math.min(1e-15,1e-15*m))return a=Ff(m,h,g,1e-15),b?.5-a+.5:a;if(m<Math.min(1e-15,1e-15*h)&&h*g<=1)return c=qf(m,h,g,1e-15),b?c:.5-c+.5;if(Math.max(m,h)>1){if(h<=1)return v(m,h,g,b);if(g>=.29)return u(m,h,p,b);if(g<.1&&Math.pow(g*h,m)<=.7)return v(m,h,g,b)}else{if(m>=Math.min(.2,h)||Math.pow(g,m)<=.9)return v(m,h,g,b);if(g>=.3)return u(m,h,p,b)}let w=!1;return Math.max(m,h)>1&&h>15?c=0:(w=!0,c=yo(h,m,p,g,20,1e-15),h+=20),c=bl(h,m,p,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(w?c=yo(h-n,m,p,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=bl(h,m,p,g,c,15*1e-15),a=-expm1(c),b?.5-a+.5:a):(a=.5-c+.5,b?.5-a+.5:a)}else{let w=Number.isFinite(r+e)?r>e?(r+e)*s-e:r-(r+e)*t:r*s-e*t;const _=w<0;let A,E,k,C;if(_?(w=-w,A=e,k=s,E=r,C=t):(A=r,k=t,E=e,C=s),E<40)return E*k<=.7?v(A,E,k,_):d(A,E,k,C,_);if(A>E){if(E<=100||w>E*.03)return f(A,E,k,C,w,_)}else{if(A<=100)return f(A,E,k,C,w,_);if(w>A*.03)return f(A,E,k,C,w,_)}return a=Yf(A,E,w,1e-15*100),_?.5-a+.5:a}}function Ri(r){const e=r.nrows,t=r.ncols;if(e<t){const c=Ri(r.subset([],Zt.seq(1,e)));return{Q:c.Q,R:Hf(c.Q,r)}}let s=Xr.eye(e),l=r.t();for(let c=1;c<=t;c++)for(let v=e;v>=c+1;v--){const u=l.v.subarray((v-2)*t,v*t),f=s.v.subarray((v-2)*e,v*e),d=u.slice(),m=f.slice(),[h,g,p]=Uf(d[c-1],d[c-1+t]);for(let b=0;b<t;b++)u[b]=d[b]*h+d[b+t]*g,u[b+t]=d[b]*-g+d[b+t]*h,f[b]=m[b]*h+m[b+e]*g,f[b+e]=m[b]*-g+m[b+e]*h;for(let b=t;b<e;b++)f[b]=m[b]*h+m[b+e]*g,f[b+e]=m[b]*-g+m[b+e]*h}const a=Zt.seq(1,t);return{Q:e===t?s:s.subset([],a),R:e===t?l.t():l.subset([],a).t()}}function Uf(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const a=e/r,c=Math.sqrt(1+a*a),v=1/c;return[v,a*v,r*c]}const t=r/e,s=Math.sqrt(1+t*t),l=1/s;return[t*l,l,e*s]}function wl(r){return typeof r=="number"}function Hf(r,e){if(e===void 0&&(e=r),!un(r)||!un(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=r.nrows,s=r.ncols,l=e.nrows,a=e.ncols,c=s,v=a,u=t,f=new Float64Array(c*v);for(let d=0;d<v;d++){const m=e.v.subarray(d*l,(d+1)*l),h=f.subarray(d*c,(d+1)*c);for(let g=0;g<c;g++){const p=r.v.subarray(g*t,(g+1)*t);let b=0;for(let w=0;w<u;w++)b+=p[w]*m[w];h[g]=b}}return new Xr(f,c,v)}function Ii(r,e,t){if(t===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new He(r.v)}if(r.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new Xr(r.v,e,t)}function un(r){return r&&r.constructor===Xr}function Gf(r,e,t){return new Xr(new Float64Array(r),e,t)}let Xr=(je=class{constructor(e,t,s){if(!ArrayBuffer.isView(e)||e.constructor!==je.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return je.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=je.eye(e),l=je.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],v=e-1;for(let u=0;u<e;u++)l.v[v*e+u]=s.v[v*e+u]/c;for(let u=e-2;u>=0;u--){let f=s.getcolumn(u+1);const d=a.getcolref(u+1);for(let m=u+1;m<e;m++){const h=l.getcolumn(m+1);f=f.subtract(h.mult(d[m]))}l.v.set(f.divide(d[u]).v,u*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(Ei(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=je.eye(e),a=je.eye(e),c=this.t(),v=0,u=c.v[0];for(let f=0;f<e;f++)a.v[v*e+f]=l.v[v*e+f]/u;for(let f=1;f<e;f++){let d=l.getcolumn(f+1);const m=c.getcolref(f+1);for(let h=0;h<f;h++){const g=a.getcolumn(h+1);d=d.subtract(g.mult(m[h]))}a.v.set(d.divide(m[f]).v,f*e)}return a.t()}const t=Ri(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>je.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>je.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let s=0;s<e;s++)t[s]=this.getcolref(s+1)[s];return new He(t)}t(){const e=this.nrows,t=this.ncols,s=new je.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const a=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*t+l]=a[c]}return new je(s,t,e)}for(let l=0;l<this.nrows;l++){const a=s.subarray(l*t,(l+1)*t);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+l]}return new je(s,t,e)}dot(e){if(Ie(e))return new je(xl(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(un(e))return new je(xl(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,s){if(un(e))return new je(_l(this.v,e.v,t),this.nrows,this.ncols);if(wl(e))return new je(yl(this.v,e,t),this.nrows,this.ncols);if(!Ie(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new je.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(yl(this.getcolref(a+1),e.v[a],t),a*this.nrows);return new je(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new je.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(_l(this.getcolref(a+1),e.v,t),a*this.nrows);return new je(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e,t){if(t===void 0&&(t=2),t==2){const s=this.ncols,l=new je.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.getcolref(a+1));return new He(l)}if(t==1)return this.t().apply(e,2);if(t==0){const s=this.v.length,l=new je.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.v[a]);return new je(l,this.nrows,this.ncols)}}replace(e,t,s){typeof t=="number"&&(t=[t]),t.length===0&&(t=Zt.seq(1,this.nrows)),yr(t)||(t=xr(t)),typeof s=="number"&&(s=[s]),s.length===0&&(s=Zt.seq(1,this.ncols)),yr(s)||(s=xr(s));const l=t.length,a=s.length;if(Jr(t)<1||Lr(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Jr(s)<1||Lr(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const v=e.getcolref(c+1),u=(s.v[c]-1)*this.nrows;for(let f=0;f<t.length;f++){const d=t.v[f];this.v[u+d-1]=v[f]}}return this}copy(){return new je(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new He.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)t[s]=this.getcolref(s+1)[e-1];return new He(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new He(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=xr([e])),typeof t=="number"&&(t=xr([t])),Array.isArray(e)&&(e=e.length===0?null:xr(e)),Array.isArray(t)&&(t=t.length===0?null:xr(t)),e!==null&&!yr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!yr(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Jr(e)<1||Lr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(Jr(t)<1||Lr(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const v=t.length,u=this.nrows,f=new je.valuesConstructor(u*v);for(let d=0;d<t.length;d++)f.set(this.v.slice((t.v[d]-1)*this.nrows,t.v[d]*this.nrows),d*this.nrows);return new je(f,u,v)}if(t==null)return this.t().subset(t,e).t();const s=e.length,l=t.length,a=new je.valuesConstructor(s*l);let c=new je.valuesConstructor(s);for(let v=0;v<l;v++){const u=this.v.subarray((t.v[v]-1)*this.nrows,t.v[v]*this.nrows);for(let f=0;f<s;f++)c[f]=u[e.v[f]-1];a.set(c,v*s)}return new je(a,s,l)}toString(e){function t(c,v){return" ".repeat(v-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Lr(this.v))))+e+3;let l="";const a=this.t();for(let c=1;c<=a.ncols;c++)l+=Array.from(a.getcolref(c)).map(v=>t(v.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,t,s,l){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const a=l!=null&&l.length>0,c=s!=null&&s.length>0;if(a&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const v=this.t();let u=c?s.join(e)+`
`:"";for(let f=1;f<=v.ncols;f++)u=u+(a?l[f-1]+e:"")+v.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,t),u}static randn(e,t,s,l){return Ii(Ni(e*t,s,l),e,t)}static rand(e,t,s,l){return Ii(Mi(e*t,s,l),e,t)}static eye(e,t){t===void 0&&(t=e);const s=new Float64Array(e*t);for(let l=0;l<Math.min(e,t);l++)s[l*e+l]=1;return new je(s,e,t)}static diagm(e){if(!Ie(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,s=new Float64Array(t*t);for(let l=0;l<t;l++)s[l*t+l]=e.v[l];return new je(s,t,t)}static zeros(e,t){return t===void 0&&(t=e),new je(new Float64Array(e*t),e,t)}static ones(e,t){return je.fill(1,e,t)}static fill(e,t,s){s===void 0&&(s=t);const l=new Float64Array(t*s);for(let a=0;a<l.length;a++)l[a]=e;return new je(l,t,s)}static outer(e,t,s){if(Array.isArray(e)&&(e=ft(e)),Array.isArray(t)&&(t=ft(t)),!Ie(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Ie(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=je.zeros(e.length,t.length);for(let a=0;a<t.length;a++){const c=t.v[a],v=l.getcolref(a+1);for(let u=0;u<e.length;u++)v[u]=s(e.v[u],c)}return l}static parseCSV(e,t,s,l){function a(w){return w.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}t===void 0&&(t=",");const c=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let v=e.split(/\n/),u=[],f=0;const d=v[0].split(t);(s||s===void 0&&a(d))&&(u=d,f=1),v=v.filter(w=>w.trim().length>1);let m=[],h=0;l&&(h=1);const g=v.length-f,p=d.length-h;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const b=je.zeros(p,g);for(let w=f;w<g+f;w++){const _=v[w].split(t);let A;if(l?(m[w-f]=_[0],A=_.slice(1).map(E=>Number.parseFloat(E.trim().replace(c,".")))):A=_.map(E=>Number.parseFloat(E.trim().replace(c,"."))),A.some(E=>Number.isNaN(E)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=p)throw Error("Wrong number of values in row #"+w);b.v.set(new Float64Array(A),(w-f)*p)}return{values:b.t(),header:u,labels:m,sep:t,dec:c}}},kt(je,"valuesConstructor",Float64Array),kt(je,"TOLERANCE",Math.pow(10,-9)),je);function Ie(r){return r&&r.constructor===He}function ft(r){return new He(new Float64Array(r))}let He=(st=class{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new Zt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new Zt(t.subarray(0,s))}filter(e){const t=new st.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new st(t.subarray(0,s))}shuffle(){return new st(Bi(this.v))}sort(e){return new st(kl(this.v,e))}sortind(e){return new Zt(Di(this.v,e))}rep(e){return qi(this,e)}repeach(e){return Oi(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=Zt.seq(1,this.length)),yr(t)||(t=xr(t));const s=t.length;if(Jr(t)<1||Lr(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<t.length;l++){const a=t.v[l];this.v[a-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=xr([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Zt.bool2ind(e):xr(e)),!yr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=st.zeros(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new st(this.v.slice(e-1,t))}copy(){return new st(this.v.slice())}dot(e){return e===void 0&&(e=this),xl(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(Ie(e))return new st(_l(this.v,e.v,t));if(wl(e))return new st(yl(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e){const t=this.v.length,s=st.zeros(t);for(let l=0;l<t;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const t=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new st.valuesConstructor(t);let l=0;for(const a of e)typeof a=="number"?(s[l]=a,l+=1):(s.set(Ie(a)?a.v:new st.valuesConstructor(a),l),l+=typeof a=="number"?1:a.length);return new st(s)}static seq(e,t,s){return Fi(e,t,s,st)}static randn(e,t,s){return Ni(e,t,s)}static rand(e,t,s){return Mi(e,t,s)}static zeros(e){return new st(new st.valuesConstructor(e))}static ones(e){return st.fill(1,e)}static fill(e,t){const s=new st.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new st(s)}},kt(st,"valuesConstructor",Float64Array),st);function yr(r){return r.constructor===Zt}function xr(r){return new Zt(new Int32Array(r))}let Zt=(dt=class{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new dt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new dt(t.subarray(0,s))}filter(e){const t=new dt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new dt(t.subarray(0,s))}shuffle(){return new dt(Bi(this.v))}sort(e){return new dt(kl(this.v,e))}sortind(e){return new dt(Di(this.v,e))}rep(e){return qi(this,e)}repeach(e){return Oi(this,e)}subset(e){if(typeof e=="number"&&(e=xr([e])),Array.isArray(e)&&(e=xr(e)),!yr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=new dt.valuesConstructor(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new dt(s)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new dt(this.v.slice(e-1,t))}static seq(e,t,s){return Fi(e,t,s,dt)}static ones(e){return dt.fill(1,e)}static fill(e,t){const s=new dt.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new dt(s)}static bool2ind(e){let t=0;const s=new dt.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[t]=l+1,t=t+1);return new dt(s.subarray(0,t))}},kt(dt,"valuesConstructor",Int32Array),dt);function Fi(r,e,t,s){t===void 0&&(t=r<=e?1:-1);const l=Math.floor((e-r)/t)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(l);for(let c=0;c<l;c++)a[c]=r+c*t;return new s(a)}function qi(r,e){const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=1;l<=e;l++)for(let a=0;a<r.length;a++)s[(l-1)*r.length+a]=r.v[a];return new r.constructor(s)}function Oi(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=0;l<r.length;l++)for(let a=0;a<e;a++)s[l*e+a]=r.v[l];return new r.constructor(s)}function _l(r,e,t){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e[l]);return s}function yl(r,e,t){const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e);return s}function xl(r,e,t,s,l,a){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const c=t,v=a,u=s,f=new r.constructor(c*v);for(let d=0;d<v;d++){const m=e.subarray(d*l,(d+1)*l),h=f.subarray(d*c,(d+1)*c);for(let g=0;g<u;g++){const p=m[g],b=r.subarray(g*t,(g+1)*t);for(let w=0;w<c;w++)h[w]+=b[w]*p}}return f}function Bi(r){let e=r.slice(),t=e.length,s,l;for(;t;)l=Math.floor(Math.random()*t--),s=e[t],e[t]=e[l],e[l]=s;return e}function kl(r,e=!1){return e?r.slice().sort((t,s)=>s-t):r.slice().sort((t,s)=>t-s)}function Di(r,e=!1){const t=Zt.seq(1,r.length).v;return e?t.sort((s,l)=>r[l-1]-r[s-1]):t.sort((s,l)=>r[s-1]-r[l-1])}function Vi(r){if(fr(r))return Vi(r.v);let e=1;for(let t=0;t<r.length;t++)e=e*r[t];return e}function Ws(r){return fr(r)||kr(r)?r.v[El(r.v)-1]:r[El(r)-1]}function El(r){if(fr(r)||kr(r))return El(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]<t&&(e=s,t=r[s-1]);return e}function us(r){return fr(r)||kr(r)?r.v[Al(r.v)-1]:r[Al(r)-1]}function Al(r){if(fr(r)||kr(r))return Al(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]>t&&(e=s,t=r[s-1]);return e}function Yi(r,e=0,t=1){let s=vr.zeros(r);for(let l=0;l<r;l++)s.v[l]=e+Math.random()*(t-e);return s}function Wi(r,e=0,t=1){let s=vr.zeros(r);for(let l=0;l<r;l++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[l]=a*Math.sin(c)*t+e}return s}function Ui(r){const e=r.nrows,t=r.ncols;if(e<t){const c=Ui(r.subset([],$t.seq(1,e)));return{Q:c.Q,R:Jf(c.Q,r)}}let s=fn.eye(e),l=r.t();for(let c=1;c<=t;c++)for(let v=e;v>=c+1;v--){const u=l.v.subarray((v-2)*t,v*t),f=s.v.subarray((v-2)*e,v*e),d=u.slice(),m=f.slice(),[h,g,p]=Kf(d[c-1],d[c-1+t]);for(let b=0;b<t;b++)u[b]=d[b]*h+d[b+t]*g,u[b+t]=d[b]*-g+d[b+t]*h,f[b]=m[b]*h+m[b+e]*g,f[b+e]=m[b]*-g+m[b+e]*h;for(let b=t;b<e;b++)f[b]=m[b]*h+m[b+e]*g,f[b+e]=m[b]*-g+m[b+e]*h}const a=$t.seq(1,t);return{Q:e===t?s:s.subset([],a),R:e===t?l.t():l.subset([],a).t()}}function Kf(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const a=e/r,c=Math.sqrt(1+a*a),v=1/c;return[v,a*v,r*c]}const t=r/e,s=Math.sqrt(1+t*t),l=1/s;return[t*l,l,e*s]}function Hi(r){return typeof r=="number"}function Jf(r,e){if(e===void 0&&(e=r),!Fn(r)||!Fn(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=r.nrows,s=r.ncols,l=e.nrows,a=e.ncols,c=s,v=a,u=t,f=new Float64Array(c*v);for(let d=0;d<v;d++){const m=e.v.subarray(d*l,(d+1)*l),h=f.subarray(d*c,(d+1)*c);for(let g=0;g<c;g++){const p=r.v.subarray(g*t,(g+1)*t);let b=0;for(let w=0;w<u;w++)b+=p[w]*m[w];h[g]=b}}return new fn(f,c,v)}function Gi(r,e,t){if(t===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new vr(r.v)}if(r.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new fn(r.v,e,t)}function Fn(r){return r&&r.constructor===fn}const Re=class Re{constructor(e,t,s){if(!ArrayBuffer.isView(e)||e.constructor!==Re.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Re.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=Re.eye(e),l=Re.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],v=e-1;for(let u=0;u<e;u++)l.v[v*e+u]=s.v[v*e+u]/c;for(let u=e-2;u>=0;u--){let f=s.getcolumn(u+1);const d=a.getcolref(u+1);for(let m=u+1;m<e;m++){const h=l.getcolumn(m+1);f=f.subtract(h.mult(d[m]))}l.v.set(f.divide(d[u]).v,u*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(Vi(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=Re.eye(e),a=Re.eye(e),c=this.t(),v=0,u=c.v[0];for(let f=0;f<e;f++)a.v[v*e+f]=l.v[v*e+f]/u;for(let f=1;f<e;f++){let d=l.getcolumn(f+1);const m=c.getcolref(f+1);for(let h=0;h<f;h++){const g=a.getcolumn(h+1);d=d.subtract(g.mult(m[h]))}a.v.set(d.divide(m[f]).v,f*e)}return a.t()}const t=Ui(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Re.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Re.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let s=0;s<e;s++)t[s]=this.getcolref(s+1)[s];return new vr(t)}t(){const e=this.nrows,t=this.ncols,s=new Re.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const a=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*t+l]=a[c]}return new Re(s,t,e)}for(let l=0;l<this.nrows;l++){const a=s.subarray(l*t,(l+1)*t);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+l]}return new Re(s,t,e)}dot(e){if(fr(e))return new Re(Ml(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Fn(e))return new Re(Ml(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,s){if(Fn(e))return new Re(Cl(this.v,e.v,t),this.nrows,this.ncols);if(Hi(e))return new Re(Sl(this.v,e,t),this.nrows,this.ncols);if(!fr(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new Re.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Sl(this.getcolref(a+1),e.v[a],t),a*this.nrows);return new Re(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new Re.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(Cl(this.getcolref(a+1),e.v,t),a*this.nrows);return new Re(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e,t){if(t===void 0&&(t=2),t==2){const s=this.ncols,l=new Re.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.getcolref(a+1));return new vr(l)}if(t==1)return this.t().apply(e,2);if(t==0){const s=this.v.length,l=new Re.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.v[a]);return new Re(l,this.nrows,this.ncols)}}replace(e,t,s){typeof t=="number"&&(t=[t]),t.length===0&&(t=$t.seq(1,this.nrows)),kr(t)||(t=Er(t)),typeof s=="number"&&(s=[s]),s.length===0&&(s=$t.seq(1,this.ncols)),kr(s)||(s=Er(s));const l=t.length,a=s.length;if(Ws(t)<1||us(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Ws(s)<1||us(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const v=e.getcolref(c+1),u=(s.v[c]-1)*this.nrows;for(let f=0;f<t.length;f++){const d=t.v[f];this.v[u+d-1]=v[f]}}return this}copy(){return new Re(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new vr.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)t[s]=this.getcolref(s+1)[e-1];return new vr(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new vr(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=Er([e])),typeof t=="number"&&(t=Er([t])),Array.isArray(e)&&(e=e.length===0?null:Er(e)),Array.isArray(t)&&(t=t.length===0?null:Er(t)),e!==null&&!kr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!kr(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Ws(e)<1||us(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(Ws(t)<1||us(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const v=t.length,u=this.nrows,f=new Re.valuesConstructor(u*v);for(let d=0;d<t.length;d++)f.set(this.v.slice((t.v[d]-1)*this.nrows,t.v[d]*this.nrows),d*this.nrows);return new Re(f,u,v)}if(t==null)return this.t().subset(t,e).t();const s=e.length,l=t.length,a=new Re.valuesConstructor(s*l);let c=new Re.valuesConstructor(s);for(let v=0;v<l;v++){const u=this.v.subarray((t.v[v]-1)*this.nrows,t.v[v]*this.nrows);for(let f=0;f<s;f++)c[f]=u[e.v[f]-1];a.set(c,v*s)}return new Re(a,s,l)}toString(e){function t(c,v){return" ".repeat(v-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(us(this.v))))+e+3;let l="";const a=this.t();for(let c=1;c<=a.ncols;c++)l+=Array.from(a.getcolref(c)).map(v=>t(v.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,t,s,l){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const a=l!=null&&l.length>0,c=s!=null&&s.length>0;if(a&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const v=this.t();let u=c?s.join(e)+`
`:"";for(let f=1;f<=v.ncols;f++)u=u+(a?l[f-1]+e:"")+v.getcolref(f).join(e)+`
`;return u=u.replace(/\./g,t),u}static randn(e,t,s,l){return Gi(Wi(e*t,s,l),e,t)}static rand(e,t,s,l){return Gi(Yi(e*t,s,l),e,t)}static eye(e,t){t===void 0&&(t=e);const s=new Float64Array(e*t);for(let l=0;l<Math.min(e,t);l++)s[l*e+l]=1;return new Re(s,e,t)}static diagm(e){if(!fr(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,s=new Float64Array(t*t);for(let l=0;l<t;l++)s[l*t+l]=e.v[l];return new Re(s,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Re(new Float64Array(e*t),e,t)}static ones(e,t){return Re.fill(1,e,t)}static fill(e,t,s){s===void 0&&(s=t);const l=new Float64Array(t*s);for(let a=0;a<l.length;a++)l[a]=e;return new Re(l,t,s)}static outer(e,t,s){if(Array.isArray(e)&&(e=Ki(e)),Array.isArray(t)&&(t=Ki(t)),!fr(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!fr(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=Re.zeros(e.length,t.length);for(let a=0;a<t.length;a++){const c=t.v[a],v=l.getcolref(a+1);for(let u=0;u<e.length;u++)v[u]=s(e.v[u],c)}return l}static parseCSV(e,t,s,l){function a(w){return w.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}t===void 0&&(t=",");const c=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let v=e.split(/\n/),u=[],f=0;const d=v[0].split(t);(s||s===void 0&&a(d))&&(u=d,f=1),v=v.filter(w=>w.trim().length>1);let m=[],h=0;l&&(h=1);const g=v.length-f,p=d.length-h;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const b=Re.zeros(p,g);for(let w=f;w<g+f;w++){const _=v[w].split(t);let A;if(l?(m[w-f]=_[0],A=_.slice(1).map(E=>Number.parseFloat(E.trim().replace(c,".")))):A=_.map(E=>Number.parseFloat(E.trim().replace(c,"."))),A.some(E=>Number.isNaN(E)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=p)throw Error("Wrong number of values in row #"+w);b.v.set(new Float64Array(A),(w-f)*p)}return{values:b.t(),header:u,labels:m,sep:t,dec:c}}};kt(Re,"valuesConstructor",Float64Array),kt(Re,"TOLERANCE",Math.pow(10,-9));let fn=Re;function fr(r){return r&&r.constructor===vr}function Ki(r){return new vr(new Float64Array(r))}const ht=class ht{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new $t.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new $t(t.subarray(0,s))}filter(e){const t=new ht.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new ht(t.subarray(0,s))}shuffle(){return new ht(Zi(this.v))}sort(e){return new ht($i(this.v,e))}sortind(e){return new $t(ec(this.v,e))}rep(e){return Xi(this,e)}repeach(e){return Qi(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=$t.seq(1,this.length)),kr(t)||(t=Er(t));const s=t.length;if(Ws(t)<1||us(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<t.length;l++){const a=t.v[l];this.v[a-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=Er([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?$t.bool2ind(e):Er(e)),!kr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=ht.zeros(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new ht(this.v.slice(e-1,t))}copy(){return new ht(this.v.slice())}dot(e){return e===void 0&&(e=this),Ml(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(fr(e))return new ht(Cl(this.v,e.v,t));if(Hi(e))return new ht(Sl(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e){const t=this.v.length,s=ht.zeros(t);for(let l=0;l<t;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const t=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new ht.valuesConstructor(t);let l=0;for(const a of e)typeof a=="number"?(s[l]=a,l+=1):(s.set(fr(a)?a.v:new ht.valuesConstructor(a),l),l+=typeof a=="number"?1:a.length);return new ht(s)}static seq(e,t,s){return Ji(e,t,s,ht)}static randn(e,t,s){return Wi(e,t,s)}static rand(e,t,s){return Yi(e,t,s)}static zeros(e){return new ht(new ht.valuesConstructor(e))}static ones(e){return ht.fill(1,e)}static fill(e,t){const s=new ht.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new ht(s)}};kt(ht,"valuesConstructor",Float64Array);let vr=ht;function kr(r){return r.constructor===$t}function Er(r){return new $t(new Int32Array(r))}const Ct=class Ct{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new Ct.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new Ct(t.subarray(0,s))}filter(e){const t=new Ct.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new Ct(t.subarray(0,s))}shuffle(){return new Ct(Zi(this.v))}sort(e){return new Ct($i(this.v,e))}sortind(e){return new Ct(ec(this.v,e))}rep(e){return Xi(this,e)}repeach(e){return Qi(this,e)}subset(e){if(typeof e=="number"&&(e=Er([e])),Array.isArray(e)&&(e=Er(e)),!kr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=new Ct.valuesConstructor(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new Ct(s)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new Ct(this.v.slice(e-1,t))}static seq(e,t,s){return Ji(e,t,s,Ct)}static ones(e){return Ct.fill(1,e)}static fill(e,t){const s=new Ct.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new Ct(s)}static bool2ind(e){let t=0;const s=new Ct.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[t]=l+1,t=t+1);return new Ct(s.subarray(0,t))}};kt(Ct,"valuesConstructor",Int32Array);let $t=Ct;function Ji(r,e,t,s){t===void 0&&(t=r<=e?1:-1);const l=Math.floor((e-r)/t)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(l);for(let c=0;c<l;c++)a[c]=r+c*t;return new s(a)}function Xi(r,e){const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=1;l<=e;l++)for(let a=0;a<r.length;a++)s[(l-1)*r.length+a]=r.v[a];return new r.constructor(s)}function Qi(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=0;l<r.length;l++)for(let a=0;a<e;a++)s[l*e+a]=r.v[l];return new r.constructor(s)}function Cl(r,e,t){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e[l]);return s}function Sl(r,e,t){const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e);return s}function Ml(r,e,t,s,l,a){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const c=t,v=a,u=s,f=new r.constructor(c*v);for(let d=0;d<v;d++){const m=e.subarray(d*l,(d+1)*l),h=f.subarray(d*c,(d+1)*c);for(let g=0;g<u;g++){const p=m[g],b=r.subarray(g*t,(g+1)*t);for(let w=0;w<c;w++)h[w]+=b[w]*p}}return f}function Zi(r){let e=r.slice(),t=e.length,s,l;for(;t;)l=Math.floor(Math.random()*t--),s=e[t],e[t]=e[l],e[l]=s;return e}function $i(r,e=!1){return e?r.slice().sort((t,s)=>s-t):r.slice().sort((t,s)=>t-s)}function ec(r,e=!1){const t=$t.seq(1,r.length).v;return e?t.sort((s,l)=>r[l-1]-r[s-1]):t.sort((s,l)=>r[s-1]-r[l-1])}function Xf(r,e,t){return 5*r*e+e+4*t*e+r*t}function Qr(r,e,t){if(!r||!r.class||!r.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=r.ncols,l=r.ncomp;let a,c;switch(e){case"mX":a=2,c=s;break;case"sX":a=2+s,c=s;break;case"loadings":case"xloadings":a=2+2*s+(t-1)*s,c=s;break;case"P":a=2+2*s,c=l*s;break;case"eigenvals":case"xeigenvals":a=2+2*s+s*l,c=l;break;case"cq0":a=2+2*s+s*l+l,c=l;break;case"cNq":a=2+2*s+s*l+2*l,c=l;break;case"rq0":a=2+2*s+s*l+3*l,c=l;break;case"rNq":a=2+2*s+s*l+4*l,c=l;break;case"ch0":a=2+2*s+s*l+5*l,c=l;break;case"cNh":a=2+2*s+s*l+6*l,c=l;break;case"rh0":a=2+2*s+s*l+7*l,c=l;break;case"rNh":a=2+2*s+s*l+8*l,c=l;break;case"cr0":a=2+2*s+s*l+9*l,c=l;break;case"cNr":a=2+2*s+s*l+10*l,c=l;break;case"rr0":a=2+2*s+s*l+11*l,c=l;break;case"rNr":a=2+2*s+s*l+12*l,c=l;break;case"cg0":a=2+2*s+s*l+13*l,c=l;break;case"cNg":a=2+2*s+s*l+14*l,c=l;break;case"rg0":a=2+2*s+s*l+15*l,c=l;break;case"rNg":a=2+2*s+s*l+16*l,c=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(a,a+c)}function Qf(r,e,t){if(!r||!r.class||!r.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=r.ncols,l=r.nrows,a=r.ncomp;let c,v;switch(e){case"scores":case"xscores":c=(t-1)*l,v=l;break;case"T":c=0,v=l*a;break;case"hdist":c=l*a+(t-1)*l,v=l;break;case"qdist":c=2*l*a+(t-1)*l,v=l;break;case"xcumexpvar":case"cumexpvar":c=3*l*a,v=a;break;case"fdistc":c=3*l*a+a+(t-1)*l,v=l;break;case"fdistr":c=4*l*a+a+(t-1)*l,v=l;break;case"gdist":c=5*l*a+a+(t-1)*s,v=s;break;case"rdist":c=5*l*a+a+s*a+(t-1)*s,v=s;break;case"idistc":c=5*l*a+a+2*s*a+(t-1)*s,v=s;break;case"idistr":c=5*l*a+a+3*s*a+(t-1)*s,v=s;break;case"E":c=5*l*a+a+3*s*a+a*s,v=l*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return r.v.subarray(c,c+v)}function Zf(r,e,t){if(!Array.isArray(r))return!1;if(r.length===0)return!0;for(let s=0;s<r.length;s++){const l=r[s];if(l<e||l>t)return!1}return!0}function $f(r,e,t,s){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!Fn(t))throw new Error("pca_predict: X must be a matrix.");s||(s=[]);const l=s&&Array.isArray(s)?s.length:0;if(!Zf(s,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=t.nrows-l;let c=e.exclvars;t.ncols===e.ncols&&(c=[]);const v=c.length,u=t.ncols-v;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const f=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,f/t.v.BYTES_PER_ELEMENT);let d=null;if(l>0){const T=new Int32Array(s);d=r._malloc(T.length*T.BYTES_PER_ELEMENT),r.HEAP32.set(T,d/T.BYTES_PER_ELEMENT)}let m=null;if(v>0){const T=new Int32Array(c);m=r._malloc(T.length*T.BYTES_PER_ELEMENT),r.HEAP32.set(T,m/T.BYTES_PER_ELEMENT)}const h=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const g=Xf(a,e.ncomp,u),p=Float64Array,b=r._malloc(g*p.BYTES_PER_ELEMENT);if(r.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[f,t.nrows,t.ncols,h,b,d,l,m,v])!==1)throw new Error("pca_predict: PCA prediction failed.");const _=r.HEAPF64.slice(b/p.BYTES_PER_ELEMENT,b/p.BYTES_PER_ELEMENT+g);r._free(f),r._free(h),r._free(b),d&&r._free(d),m&&r._free(m);const A={class:["pcares"],v:_,ncomp:e.ncomp,nrows:a,ncols:u,npred:u,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},E=new Array(e.ncomp),k=new Array(e.ncomp),C=new Array(e.ncomp),N=new Array(e.ncomp),L=new Array(e.ncomp),q=Qf(A,"xcumexpvar");L[0]=1,N[0]=q[0],C[0]=1-q[0],E[0]=q[0],k[0]=1-q[0];for(let T=1;T<e.ncomp;T++)L[T]=T+1,N[T]=q[T],C[T]=1-q[T],E[T]=q[T]-q[T-1],k[T]=1-E[T];return A.stat={components:L,resvar:k,expvar:E,cumexpvar:N,cumresvar:C},A}function ev(r,e){if(e[0]===0){const t=e[1]+2;return 2+r*t+2*r+t}return 3+r}const vn=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(r,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(r,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(r,e)=>2*r,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:ev,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(r,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(r,e)=>2+3*r+e[0],mp:[5,5]}];function tv(r){let e="<ul>";for(let t=0;t<r.ml.length;t++){const s=vn[r.ml[t]].title;e=e+"<li>"+s+" <span>"+r.info[t]+"</span></li>"}return e=e+"</ul>",e}function tc(r,e,t){const s=vn.findIndex(m=>m.id==="trim");let l=0,a=r.ncols-e,c=0;for(let m=0;m<t.ml.length;m++){if(t.ml[m]!==s){c+=t.mpl_new[m];continue}l=Math.max(l,t.mp_new[c]),a=Math.min(a,t.mp_new[c+1]),c+=t.mpl_new[m]}const v=r.nrows,f=a-l+e,d=fn.zeros(v,f);return c=0,e>0&&(d.v.set(r.v.slice(0,e*v),c),c+=e*v),d.v.set(r.v.slice((e+l)*v,(e+a)*v),c),[l,a,d]}function Nl(r,e){if(!r||!e||typeof e!="object"||Object.keys(e).length===0)return r;const t=vn.findIndex(v=>v.id==="trim");if(e.ml.findIndex(v=>v===t)<0)return r;const[l,a,c]=tc(r.values,r.nresp,e);return r.values=c,r.varlabels=r.nresp>0?r.varlabels.slice(0,r.nresp).concat(r.varlabels.slice(r.nresp+l,r.nresp+a)):r.varlabels.slice(l,a),r.varindices=r.nresp>0?Zr(0,r.nresp-1).concat(Zr(0,a-l-1)):Zr(0,a-l-1),r.varvalues=r.nresp>0?r.varvalues.slice(0,r.nresp).concat(r.varvalues.slice(r.nresp+l,r.nresp+a)):r.varvalues.slice(l,a),r}function rc(r,e,t,s,l=!0,a=[]){if(!Fn(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,v;l?(c=e.ncols,v=e.nrows-t):(c=e.nrows,v=e.ncols-t);const u=s.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const f=new Int32Array(u),d=new Int32Array(u),m=new Int32Array(u);let h=0,g=0;for(let z=0;z<s.length;z++){const V=s[z].id,D=s[z].params,I=vn.findIndex(le=>le.id==V);if(I<0)throw new Error("prep_fit: wrong method name: "+V+".");const W=vn[I];if(D.length!==W.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+V+".");f[z]=I,d[z]=W.mpl,m[z]=W.get_mpl_new(v,D),h=h+d[z],g=g+m[z]}const p=new Float64Array(h);let b=0;for(let z=0;z<s.length;z++){const V=s[z].id,D=s[z].params;vn.findIndex(I=>I.id==V),p.set(D,b),b=b+d[z]}const w=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,w/e.v.BYTES_PER_ELEMENT);const _=r._malloc(f.length*f.BYTES_PER_ELEMENT);r.HEAP32.set(f,_/f.BYTES_PER_ELEMENT);const A=r._malloc(d.length*d.BYTES_PER_ELEMENT);r.HEAP32.set(d,A/d.BYTES_PER_ELEMENT);const E=r._malloc(m.length*m.BYTES_PER_ELEMENT);r.HEAP32.set(m,E/m.BYTES_PER_ELEMENT);const k=r._malloc(p.length*p.BYTES_PER_ELEMENT);r.HEAPF64.set(p,k/p.BYTES_PER_ELEMENT);const C=r._malloc(g*p.BYTES_PER_ELEMENT),N=new Int32Array(a),L=N.length,q=r._malloc(L*N.BYTES_PER_ELEMENT);if(r.HEAP32.set(N,q/N.BYTES_PER_ELEMENT),r.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[w,c,v,t,u,_,A,k,E,C,l,q,L])!==1)throw new Error("prep_fit: unexpected error.");const j=r.HEAPF64.slice(C/p.BYTES_PER_ELEMENT,C/p.BYTES_PER_ELEMENT+g);return r._free(w),r._free(_),r._free(k),r._free(A),r._free(q),r._free(C),r._free(E),{ml:f,mpl:d,mp:p,mpl_new:m,mp_new:j,npred:v,class:["prepmodel"]}}function Us(r,e,t,s,l=!0,a=!1){if(!Fn(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let c,v;if(l?(c=e.ncols,v=e.nrows-t):(c=e.nrows,v=e.ncols-t),v!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+v+").");const u=s.ml,f=s.mpl_new,d=s.mp_new,m=f.reduce((C,N)=>C+N,0);if(!u||u.length<1||!f||f.length!==u.length||d.length!==m)throw new Error("prep_apply: wrong structure of the model object.");const h=u.length,g=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const p=r._malloc(u.length*u.BYTES_PER_ELEMENT);r.HEAP32.set(u,p/u.BYTES_PER_ELEMENT);const b=r._malloc(f.length*f.BYTES_PER_ELEMENT);r.HEAP32.set(f,b/f.BYTES_PER_ELEMENT);const w=r._malloc(d.length*d.BYTES_PER_ELEMENT);r.HEAPF64.set(d,w/d.BYTES_PER_ELEMENT);const _=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(r.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[g,c,v,t,h,p,b,w,_,l])!==1)throw new Error("prep_apply: unexpected error.");const E=r.HEAPF64.slice(_/e.v.BYTES_PER_ELEMENT,_/e.v.BYTES_PER_ELEMENT+e.v.length);r._free(g),r._free(p),r._free(b),r._free(w),r._free(_);const k=new fn(E,e.nrows,e.ncols);if(a){const[C,N,L]=tc(k,t,s);return L}return k}function nc(r,e,t,s){e===void 0&&(e=!0),t===void 0&&(t=!1),s===void 0&&(s=!1);function l(u,f,d,m){if(typeof f=="boolean")return f?u.apply(d,2):ft([m]).rep(u.ncols);if(!Ie(f))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(f.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return f}const a=l(r,e,Rn,0),c=l(r,t,go,1),v=Xr.zeros(r.nrows,r.ncols);for(let u=1;u<=r.ncols;u++){const f=r.getcolref(u),d=v.getcolref(u),m=a.v[u-1],h=1/c.v[u-1];for(let g=0;g<r.nrows;g++)d[g]=(f[g]-m)*h}return s?[v,a,c]:v}function sc(r,e,t){return r<e?["regular","in"]:r>t?["outlier","out"]:["extreme","out"]}function rv(r,e,t,s,l,a,c,v){if(!v||v.length===0)return[0,0];let u=0,f=0;for(let d of v){const m=r[d],[h,g]=sc(m,e,t);a[h]+=1,c[g]+=1,s[d]=h,l[d]=g,u=u+(g==="in"),f=f+(g!=="in")}return[u,f]}function oc(r,e,t,s,l,a,c,v,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let f=0,d=0;for(let V of u){const D=r[V],[I,W]=sc(D,t,s);v[W]+=1,l[V]="alien",c.alien+=1,a[V]=W,f=f+(W!=="in"),d=d+(W==="in")}const m=u.slice();m.sort((V,D)=>r[V]-r[D]);let h=m.length;const g=m.map(V=>r[V]);let p=-1,b=0,w=0,_=0,A=0;for(;p<0;)b>0&&(l[m[h-1]]="external",c.alien=c.alien-1,c.external=c.external+1,h=h-1,m.pop(),g.pop()),w=Rn(g),_=po(g),A=_/(w*w),p=4-2*e*A,b=b+1;const E=(2+Math.sqrt(p))/A,k=E-e,C=w/E,N=t/C,L=1-2*(e+k)*(e+3*k)/(3*(e+2*k)**2),q=(L-1)*(1-3*L),T=(e+2*k)/(e+k)**2,j=1+L*T*(L-1-.5*(2-L)*q*T),y=L*Math.sqrt(2*T)*(1+.5*q*T),z=dl((Math.pow(N/(e+k),L)-j)/y);return[f,d,z,k,C,L,j,y,e,w]}function jl(r,e,t,s,l){(!l||!Array.isArray(l))&&(l=[]);let a=r.exclvars;(!a||!Array.isArray(a))&&(a=[]);const c=t.values.nrows,v=l.length,u=c-v,f=t.sep,d=e.classes&&e.classes.length===u,m=d?["","","","",""]:["","","",""];let h="";if(h+=["Reference classes:",d?"provided":"not provided",...m].join(f)+`
`,h+=["Center:",r.center?"yes":"no",...m].join(f)+`
`,h+=["Scale:",r.scale?"yes":"no",...m].join(f)+`
`,h+=["Alpha:",(r.alpha/100).toFixed(3),...m].join(f)+`
`,h+=["Limits estimator:",r.limType,...m].join(f)+`
`,h+=`
`,h+=["Nf:",e.Nf,...m].join(f)+`
`,h+=`
`,h+=["F crit (extremes):",r.eCrit,...m].join(f)+`
`,h+=["F crit (outliers):",r.oCrit,...m].join(f)+`
`,h+=`
`,a.length>0&&(h+=["Number of excluded variables:",a.length,...m].join(f)+`
`,h+=["Indices of excluded variables:",cv(a),...m].join(f)+`
`,h+=`
`),h+=["Objects:",c,...m].join(f)+`
`,h+=["In:",e.outcomes.decsNum.in,...m].join(f)+`
`,h+=["Out:",e.outcomes.decsNum.out,...m].join(f)+`
`,h+=["Excluded:",v,...m].join(f)+`
`,e.nMembers>0&&(h+=`
`,h+=["Members:",e.nMembers,...m].join(f)+`
`,h+=["Regular:",e.outcomes.rolsNum.regular,...m].join(f)+`
`,h+=["Extreme:",e.outcomes.rolsNum.extreme,...m].join(f)+`
`,h+=["Outliers:",e.outcomes.rolsNum.outlier,...m].join(f)+`
`,h+=["Sensitivity:",e.outcomes.stat.sensitivity,...m].join(f)+`
`),e.nStrangers>0&&(h+=`
`,h+=["Strangers:",e.nStrangers,...m].join(f)+`
`,h+=["In:",e.outcomes.decsNum.in-e.outcomes.rolsNum.regular,...m].join(f)+`
`,h+=["Aliens:",e.outcomes.rolsNum.alien,...m].join(f)+`
`,h+=["External:",e.outcomes.rolsNum.external,...m].join(f)+`
`,h+=["Specificity:",e.outcomes.stat.specificity,...m].join(f)+`
`,h+=["Selectivity:",e.outcomes.stat.selectivity,...m].join(f)+`
`,h+=`
`,h+=["Beta:",e.beta,...m].join(f)+`
`,h+=["Non-centrality (s):",e.s,...m].join(f)+`
`,h+=["Scaling (f0):",e.f0,...m].join(f)+`
`,e.nMembers>0)){const A=e.outcomes.TP/(e.outcomes.TP+e.outcomes.FP),E=e.outcomes.stat.sensitivity,k=1-e.outcomes.stat.specificity,C=2*A*E/(A+E),N=E/k,L=(1-E)/(1-k);h+=`
`,h+=["Efficiency:",e.outcomes.stat.efficiency,...m].join(f)+`
`,h+=["Accuracy:",e.outcomes.stat.accuracy,...m].join(f)+`
`,h+=["Precision:",A,...m].join(f)+`
`,h+=["F1-score:",C,...m].join(f)+`
`,h+=["PLR:",N,...m].join(f)+`
`,h+=["NLR:",L,...m].join(f)+`
`}h+=`
`,h+=["","object","class","role","decision","f"].join(f)+`
`;let g=0;for(let A=0;A<c;A++){if(v>0&&l.includes(A)){h+=["",t.objlabels[A],"-","removed","-","-"].join(f)+`
`;continue}h+=["",t.objlabels[A],e.classes[g],e.outcomes.rols[g],e.outcomes.decs[g],e.outcomes.f[g]].join(f)+`
`,g=g+1}h+=`
`,t.dec!=="."&&(h=h.replace(/\./g,t.dec)),h=["Target class:",r.className,...m].join(f)+`
`+h,h=["Data filename:",t.fileName,...m].join(f)+`
`+h;let p=["NIMCA results ("+s+")","https://mda.tools/nimca/",...m].join(f)+`

`;const b=new Blob([p+h],{type:"text/csv"}),w=window.URL.createObjectURL(b),_=document.createElement("a");_.setAttribute("href",w),_.setAttribute("download",`nimca-results-${s}.csv`),_.click()}function Tl(r,e){const t={nimca:r.asJSON(),prep:e},s=new Blob([JSON.stringify(t,Gs)],{type:"application/json"}),l=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download","nimca-model.json"),a.click()}const oa=class oa{constructor(e,t,s,l,a,c,v){Me(this,_s);this.d=e,this.ind=t,this.objlabels=s,this.objindices=l,this.classes=a,this.classNames=c,this.nrows=e.length,this.nMembers=t.members.length,this.nStrangers=t.strangers.length,this.nUnknown=t.unknown.length,xe(this,_s,S(()=>v.oCrit&&v.eCrit?this.getOutcomes(v):null))}get outcomes(){return o(H(this,_s))}set outcomes(e){O(H(this,_s),e)}getOutcomes(e){const t=this.d.apply(T=>T/e.f0*e.Nf).v,s=new Array(this.nrows),l=new Array(this.nrows),a={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[v,u]=rv(t,e.eCrit,e.oCrit,l,s,a,c,this.ind.members),[f,d,m,h,g,p,b,w,_,A]=oc(t,e.Nf,e.eCrit,e.oCrit,l,s,a,c,this.ind.strangers);this.nUnknown>0&&oc(t,e.Nf,e.eCrit,e.oCrit,l,s,a,c,this.ind.unknown);const E=v>0?v/(v+u):0,k=f>0?f/(f+d):0,C=1-m,N=Math.sqrt(E*k),L=v>0&&f>0?(v+f)/(v+f+d+u):0,q={sensitivity:E,specificity:k,selectivity:C,efficiency:N,accuracy:L};return{Nf:e.Nf,f:t,decs:s,rols:l,decsNum:c,rolsNum:a,TP:v,FN:u,TN:f,FP:d,beta:m,s:h,f0:g,hz:p,Mz:b,Sz:w,k:_,m:A,stat:q}}toJSON(){return null}static fromJSON(e){return new oa(...e)}};_s=new WeakMap;let Pl=oa;const js=class js{constructor(e,t,s,l,a,c,v,u,f,d,m,h,g,p,b,w="nimca-model"){Me(this,ys);Me(this,xs);Me(this,ks);Me(this,Es);Me(this,As);Me(this,Cs);Me(this,Ss);Me(this,Ms);Me(this,Ns);this.mX=t,this.sX=s,this.nrows=l,this.ncols=a,this.className=e,this.Nfc=c,this.Nfr=v,this.f0c=u,this.f0r=f,this.hash=d,this.class=["nimcamodel"],this.fileName=w,this.center=p,this.scale=b,xe(this,ys,re(Ne(m))),xe(this,xs,re(Ne(h))),xe(this,ks,re(Ne(g))),xe(this,Es,S(()=>this.limType==="classic"?this.Nfc:this.Nfr)),xe(this,As,S(()=>this.limType==="classic"?this.f0c:this.f0r)),xe(this,Cs,S(()=>1-Number.parseFloat(this.alpha)/100)),xe(this,Ss,S(()=>Math.pow(1-this.gamma/100,1/l))),xe(this,Ms,S(()=>In(this.eConfLim,this.Nf))),xe(this,Ns,S(()=>In(this.oConfLim,this.Nf)))}get alpha(){return o(H(this,ys))}set alpha(e){O(H(this,ys),e,!0)}get gamma(){return o(H(this,xs))}set gamma(e){O(H(this,xs),e,!0)}get limType(){return o(H(this,ks))}set limType(e){O(H(this,ks),e,!0)}get Nf(){return o(H(this,Es))}set Nf(e){O(H(this,Es),e)}get f0(){return o(H(this,As))}set f0(e){O(H(this,As),e)}get eConfLim(){return o(H(this,Cs))}set eConfLim(e){O(H(this,Cs),e)}get oConfLim(){return o(H(this,Ss))}set oConfLim(e){O(H(this,Ss),e)}get eCrit(){return o(H(this,Ms))}set eCrit(e){O(H(this,Ms),e)}get oCrit(){return o(H(this,Ns))}set oCrit(e){O(H(this,Ns),e)}predict(e){if(!e.values||!un(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const t=js.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let l=0;l<e.classes.length;l++)e.classes[l]===this.className?s.members.push(l):s.strangers.push(l);else s.unknown=Zr(0,e.values.nrows-1);return new Pl(t,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,t,s,l={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let a=e.values;const c=e.classNames[0];if(!un(a))throw new Error("nimca.fit: X must be a matrix.");const v=t?a.apply(Rn,2):He.zeros(a.ncols),u=s?a.apply(go,2):He.ones(a.ncols),f=js.getDistance(a,v,u),d=Rn(f),m=po(f);let h=Math.round(2*d*d/m);h<1&&(h=1),h>250&&(h=250);const g=Cf(f),p=Sf(f),b=p/g;let w;b>2.685592117?w=1:b<.194565995?w=100:w=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/b),1.185785)));const _=.5*w*(g/In(.5,w)+p/(In(.75,w)-In(.25,w)));return new js(c,v,u,a.nrows,a.ncols,h,w,d,_,ac(),l.alpha,l.gamma,l.limType,t,s)}static fromJSON(e){const{__type:t,mX:s,sX:l,nrows:a,ncols:c,className:v,Nfc:u,Nfr:f,f0c:d,f0r:m,hash:h,alpha:g,gamma:p,limType:b,fileName:w,center:_,scale:A}=e;return new js(v,s,l,a,c,u,f,d,m,h,g,p,b,_,A,w)}static getDistance(e,t,s){const l=nc(e,t,s),a=l.nrows,c=l.ncols,v=He.zeros(a);for(let u=0;u<c;u++){const f=l.getcolref(u+1);for(let d=0;d<a;d++)v.v[d]+=f[d]**2}return v}};ys=new WeakMap,xs=new WeakMap,ks=new WeakMap,Es=new WeakMap,As=new WeakMap,Cs=new WeakMap,Ss=new WeakMap,Ms=new WeakMap,Ns=new WeakMap;let dr=js;function Zr(r,e,t=1){const s=Math.round((e-r+1)/t),l=Array(s);for(let a=0;a<s;a++)l[a]=r+a*t;return l}function lc(r,e){let t,s,l,a=[];if(e.length>0){const c=r.values.nrows,v=r.objindices,u=c-e.length;t=Array(u),s=Array(u),l=Array(u);let f=0;for(let d=0;d<c;d++)e.includes(d)||(t[f]=v[d],s[f]=r.classes[d],l[f]=r.objlabels[d],(a.length===0||!a.includes(s[f]))&&a.push(s[f]),f=f+1)}else t=r.objindices,l=r.objlabels,s=r.classes,a=r.classNames;return[t,l,s,a]}function ac(){const r=new Date;return`${r.getFullYear()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}${r.getHours().toString().padStart(2,"0")}${r.getMinutes().toString().padStart(2,"0")}${r.getSeconds().toString().padStart(2,"0")}${r.getMilliseconds().toString().padStart(3,"0")}`}function nv(r,e,t,s,l=!1){const[a,c,v]=lc(t,s),u=l&&e.prep&&e.prep.ml&&e.prep.ml.length>0?Us(r,t.values,0,e.prep,!1,!0):t.values,f=$f(r,e,u,s);f.hash=ac(),f.objindices=a,f.objlabels=c,f.classes=v,f.classNames=t.classNames,f.varlabels=t.varlabels,f.eigenvals=Qr(e,"eigenvals"),f.cNh=Qr(e,"cNh"),f.cNq=Qr(e,"cNq"),f.ch0=Qr(e,"ch0"),f.cq0=Qr(e,"cq0"),f.rNh=Qr(e,"rNh"),f.rNq=Qr(e,"rNq"),f.rh0=Qr(e,"rh0"),f.rq0=Qr(e,"rq0");const d=e.nrows;return f.T2lim=2*(d-1)/(d-2)*ji(.95,2,d-2),f}function sv(r,e="."){return Array.isArray(r)&&r.length>0?e==="."?r.map(t=>Number.parseFloat(t.trim())):r.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(r.trim()):Number.parseFloat(r.trim().replace(e,"."))}function Hs(r){return r.some(e=>Number.isNaN(e))}function qn(r){return r.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function ic(r){let e=r.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function ov(r,e,t,s,l,a,c,v=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let f=ic(r);if(f.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");f=f.filter(I=>I.replaceAll(e,"").trim().length>0);const d=f[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let m=0,h;const g=t!=="no";(g||g===void 0&&Hs(firstRow))&&(h=d,m=1);const p=f.length-m;if(p<1)throw new Error("Data file should contain at least 1 row with values.");v===-1&&(v=p);let b,w,_,A=Array(p);s?(b=g?qn(h[0]):"",_=Array(p),w=1):(b="",_=[],w=0);let E,k=[],C;l?(E=g?qn(h[w]):"",C=Array(p),w=w+1):(E="",C=[]);const N=d.length-w;if(N<1)throw new Error("Data file should contain at least 1 column with values.");const L=Xr.zeros(N,p);for(let I=m;I<p+m;I++){const W=I-m;A[W]=W;let le=f[I].split(e);if(s&&(_[W]=le[0],le.shift()),l){const Q=le[0];C[W]=Q,le.shift(),(k.length===0||k.indexOf(Q)<0)&&k.push(Q)}const te=u==="."?le.map((Q,ne)=>Number.parseFloat(Q.trim())):le.map((Q,ne)=>Number.parseFloat(Q.trim().replace(u,".")));if(te.some(Q=>Number.isNaN(Q)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(te.length!=N)throw new Error("Wrong number of values in row #"+I);L.v.set(new Float64Array(te),(I-m)*N)}if(!s||_.length!==p){_=Array(p);for(let I=0;I<p;I++)_[I]="O"+(I+1)}_=_.map(I=>qn(I)),C=C.map(I=>qn(I)),k=k.map(I=>qn(I));let q,T=Array(N),j=Array(N);if(h&&h.length===N+w){q=h.map(I=>qn(I)).slice(w);for(let I=0;I<N;I++)T[I]=I>=v?I-v:I,j[I]=I>=v?I-v+1:I+1}else{q=Array(N);for(let I=0;I<N;I++)T[I]=I>=v?I-v:I,q[I]=I>=v?"V"+(I-v+1):"Y"+(I+1),j[I]=I>=v?I-v+1:I+1}let y;if(t==="values"){if(y=u==="."?q.map((I,W)=>W<v?W:Number.parseFloat(I.trim())):q.map((I,W)=>W<v?W:Number.parseFloat(I.trim().replace(u,"."))),y.some(I=>Number.isNaN(I)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else y=j;Array.isArray(y)||(y=[]),a||(a=""),c||(c=""),a=y.length>0&&a.length>0?a:"Variables",c=y.length>0&&c.length>0?c:"";const z=a+(c.length>0?", "+c:""),V=y[1]<y[0];return{values:L.t(),nresp:v,header:t,hasLabels:s,hasClassNames:l,labelsVarname:b,classLabelsVarname:E,objlabels:_,objindices:A,varlabels:q,varvalues:y,varindices:T,varrev:V,classes:C,classNames:k,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:z}}function lv(r){if(Hs(r[0].slice(2)))return!0;const e=r[0].length,t=[];for(let s=2;s<e;s++){let l=[];for(let f=1;f<r.length;f++)l.push(r[f][s]);const a=r[0][s],c=Rn(l),v=go(l),u=Math.abs((a-c)/v);t.push(u)}return t.every(s=>s>5)}function av(r){const t=r[0].split(","),s=r[1].split(","),l=t.length,a=s.length,c=";",v=r[0].split(c),u=r[1].split(c),f=v.length,d=u.length;let m,h;if(l>1&&a>1&&l===a&&l>f)h=",",m=l;else if(f>1&&d>1&&f===d)h=c,m=f;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",m]}function iv(r,e=0){const t=ic(r),s=t.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,a,c]=av(t),v=Math.min(c,5),u=Math.min(s,5);let f=t[0].split(l).length,d=t.slice(0,u).map(T=>T.split(l).slice(0,v));d=d.map(T=>T.map(j=>qn(j)));const m=d.map(T=>sv(T.slice(),a));for(let T=1;T<u;T++)if(Hs(m[T].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const h=lv(m);let g=0;const p=h?1:0,b=p+1,w=d[p][0],_=d[b][0],A=m[p][0],E=m[b][0],k=m[p][1],C=m[b][1];let N=!1,L=!1;if(Number.isNaN(A)&&Number.isNaN(E)&&w!==_?(N=!0,g=g+1):Number.isNaN(k)&&Number.isNaN(C)&&w!==_&&(N=!0,L=!0,g=g+2),!L){const T=N?1:0,j=m[p][T],y=m[b][T];L=Hs([j,y]),g=g+L}let q="no";if(h){g>0?d[0].slice(g+e):d[e];const T=g>0?m[0].slice(g+e):m[e];q=Hs(T)?"labels":"values"}return[l,N,L,q,f]}function fs(r,e){if(!e||e.length===0)return r;const[t,s,l,a]=lc(r,e);return{values:r.values.subset(t.map(v=>v+1),[]),objlabels:s,objindices:t,classes:l,classNames:a,header:r.header,hasLabels:r.hasLabels,hasClassNames:r.hasClassNames,classNames:r.classNames,labelsVarname:r.labelsVarname,classLabelsVarname:r.classLabelsVarname,varlabels:r.varlabels,varvalues:r.varvalues,varindices:r.varindices,varrev:r.varrev,responses:r.responses,sep:r.sep,dec:r.dec,varvaluesName:r.varvaluesName,varvaluesUnits:r.varvaluesUnits,varAxisTitle:r.varAxisTitle,fileName:r.fileName,nresp:r.nresp}}function cv(r){if(!r.length)return"";r.sort((l,a)=>l-a);let e=[],t=r[0],s=t;for(let l=1;l<r.length;l++)r[l]===s+1?s=r[l]:(t===s?e.push(`${t}`):e.push(`${t}-${s}`),t=r[l],s=t);return t===s?e.push(`${t}`):e.push(`${t}-${s}`),e.join(" ")}function Gs(r,e){return un(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Ie(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof dr?e.asJSON():e}function Ll(r,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Gf(e.v,e.nrows,e.ncols);if(e.__type==="vector")return ft(e.v);if(e.__type==="NIMCA")return dr.fromJSON(e);if(e.__type==="NIMCARes")return null;const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function zl(r){const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),l=String(r.getHours()).padStart(2,"0"),a=String(r.getMinutes()).padStart(2,"0"),c=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${s}${l}${a}${c}`}function cc(r){return Array.from({length:8},(e,t)=>r>>7-t&1).reverse()}function xo(r,e,t){let s="";for(let l=0;l<e;l++){const a=r.getUint8(t++);if(a===0)break;s+=String.fromCharCode(a)}return s}function uv(r){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],t=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],l=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=r.getUint8(a);a+=1;const v=r.getUint8(a);if(a+=1,v===77)throw new Error("SPC file has old format which is not supported.");const u=v===75,f=r.getUint8(a);a+=1;const d=r.getInt8(a);a+=1;const m=r.getUint32(a,u);a+=4;const h=r.getFloat64(a,u);a+=8;const g=r.getFloat64(a,u);a+=8;const p=r.getUint32(a,u);a+=4;const b=r.getUint8(a);a+=1;const w=r.getUint8(a);a+=1;const _=r.getUint8(a);a+=1;const A=r.getUint8(a);a+=1;const E=r.getUint32(a,u);a+=4;const k=xo(r,9,a);a+=9;const C=xo(r,9,a);a+=9;const N=r.getUint16(a,u);a+=2;const L=Array.from({length:8},()=>{const he=r.getFloat32(a,u);return a+=4,he}),q=xo(r,130,a);a+=130;const T=xo(r,30,a);a+=30;const j=r.getUint32(a,u);a+=4;const[y,z,V,D,I,W,le,te]=cc(c),Q=b===255?t[31]:t[b],ne=b===255?e[31]:e[b],se=w<=26?s[w]:w>=128&&w<=131?l[w]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:y,TCGRAM:z,TMULTI:V,TRANDM:D,TORDRD:I,TALABS:W,TXYXYS:le,TXVALS:te},fexper:f,fexp:d,fnpts:m,ffirst:h,flast:g,fnsub:p,fxtype:b,fytype:w,fztype:_,fpost:A,fdate:E,fres:k,fsource:C,fpeakpt:N,fspare:L,fcmnt:q,fcatxt:T,flogoff:j,xaxisName:Q,xaxisUnit:ne,yaxisName:se}}function fv(r,e){const t=cc(r.getUint8(e));e+=1;const s=r.getInt8(e);e+=1;const l=r.getUint16(e,!0);e+=2;const a=r.getFloat32(e,!0);e+=4;const c=r.getFloat32(e,!0);e+=4;const v=r.getFloat32(e,!0);e+=4;const u=r.getInt32(e,!0);e+=4;const f=r.getInt32(e,!0);e+=4;const d=r.getFloat32(e,!0);return e+=4,{flags:t,exp:s,index:l,time:a,next:c,noise:v,nPoints:u,nScans:f,wAxis:d}}async function uc(r){if(r.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${r.name}).`);const t=r.name.slice(0,-4),s=await r.arrayBuffer(),l=new DataView(s);let a=0;const c=uv(l);a+=512;const v=c.fnpts;if(v<2)throw new Error(`Error reading SPC file (${r.name}).`);let u=new Array(v);if(c.ftflgs.TXVALS)for(let m=0;m<v;m++){const h=l.getFloat32(a,!0);a=a+4,u[m]=h}else{(c.flast-c.ffirst)/(v-1);for(let m=0;m<v;m++)u[m]=c.ffirst+m*c.flast}const f=new Float64Array(v*c.fnsub);for(let m=0;m<c.fnsub;m++){fv(l,a),a=a+32;for(let h=0;h<v;h++){const g=l.getFloat32(a,!0);a=a+4,f[m*v+h]=g}}const d=[];return c.fnsub>1?Zr(1,c.fnsub).forEach(h=>{d.push(t+"_"+h)}):d.push(t),{hdr:c,xvalues:u,yvalues:f,objlabels:d}}async function vv(r){if(!(r instanceof FileList||Array.isArray(r)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=r.length,t=[];let s=[],l=[];const a=await uc(r[0]),c=a.xvalues.length;if(t.push(a.yvalues),s=s.concat(a.objlabels),l.push(a.hdr.fnsub),e>1)for(let p=1;p<e;p++){const b=await uc(r[p]);if(b.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");t.push(b.yvalues),s=s.concat(b.objlabels),l.push(b.hdr.fnsub)}const v=l.reduce((p,b)=>p+b,0),u=new Float64Array(v*c);let f=0;for(let p=0;p<t.length;p++)u.set(t[p].slice(),f),f+=l[p]*c;const d=new Xr(u,c,v),m=Zr(0,c-1),h=Zr(0,v-1),g=a.xvalues.map(p=>p.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:h,varlabels:g,varvalues:a.xvalues,varindices:m,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var dv=K('<button tabindex="0" class="button svelte-1to1iow"> </button>');function Nt(r,e){let t=B(e,"text",3,"button");var s=dv();s.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var l=R(s);Z(()=>pe(l,t())),M(r,s)}ct(["click"]);var hv=K('<button tabindex="0"></button>');function vs(r,e){B(e,"disable",3,!1);var t=hv();t.__click=function(...s){var l;(l=e.onclick)==null||l.apply(this,s)},Z(()=>{F(t,"title",e.title),F(t,"aria-label",e.title),F(t,"alt",e.title),yt(t,1,`button ${e.className??""}`,"svelte-qbt64")}),M(r,t)}ct(["click"]);function dn(r,e){let t=B(e,"title",3,"Reset");vs(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function mv(r,e){let t=B(e,"title",3,"Undo");vs(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function gv(r,e){let t=B(e,"title",3,"Add");vs(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-add"})}function fc(r,e){let t=B(e,"title",3,"Settings");vs(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-settings"})}function pv(r,e){let t=B(e,"title",3,"Move up");vs(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-up"})}function bv(r,e){let t=B(e,"title",3,"Move down");vs(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-down"})}function On(r){const e={};for(const t of Object.keys(r))e[t]=r[t].default;return e}var wv=K('<span class="label svelte-1bhp5bp"> </span>'),_v=K("<div><!> <!></div>");function ue(r,e){let t=B(e,"label",3,null),s=B(e,"name",3,""),l=B(e,"status",3,""),a=B(e,"colors",3,""),c=B(e,"labelWidth",3,12);var v=_v(),u=R(v);{var f=m=>{var h=wv(),g=R(h);Z(()=>{pt(h,`flex-basis:${c()??""}ch;`),pe(g,t())}),M(m,h)};Y(u,m=>{t()&&m(f)})}var d=P(u,2);Gr(d,()=>e.children??Ot),Z(()=>{yt(v,1,`control-element ${s()??""} ${l()??""}`,"svelte-1bhp5bp"),pt(v,a())}),M(r,v)}var yv=K('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function ko(r,e){we(e,!0);let t=B(e,"min",7,0),s=B(e,"max",3,100),l=B(e,"value",31,()=>Ne(t())),a=B(e,"decNum",3,1),c=B(e,"step",19,()=>+((s()-t())/100).toFixed(4)),v=B(e,"onchange",3,null);ge(()=>{l()<t()&&(l(t()),v()&&v()(l())),l()>s()&&(l(s()),v()&&v()(l())),t()>s()&&t(s())});let u=re(void 0),f=re(void 0),d=re(!1);const m=j=>{const y=t()+j*(s()-t());return+(Math.round(y/c())*c()).toFixed(4)},h=j=>{const y=o(u).getBoundingClientRect(),z=o(f).getBoundingClientRect(),V=y.x,D=z.x+z.width;return(j.clientX-V)/(D-V)},g=j=>{const y=h(j);y<0||y>1||O(d,y*100>o(E)-5&&y*100<o(E)+5,!0)},p=j=>{O(d,!1)},b=j=>{O(d,!1);const y=h(j);y<0||y>1||(l(m(y)),v()&&v()(l()))},w=j=>{let y=l()+c()*j.deltaY*.5;y<t()&&(y=t()),y>s()&&(y=s()),l(+(Math.round(y/c())*c()).toFixed(4)),j.preventDefault(),v()&&v()(l())},_=j=>{if(!o(d))return;const y=h(j);y<0||y>1||(l(m(y)),v()&&v()(l()))},A=j=>{if(j.key==="ArrowLeft"){l(l()-c()<t()?t():l()-c()),v()&&v()(l());return}if(j.key==="ArrowRight"){l(l()+c()>s()?s():l()+c()),v()&&v()(l());return}},E=S(()=>t()===s()?100:(l()-t())/(s()-t())*100);var k=yv();k.__keydown=A,k.__mousemove=_,k.__mousedown=g,k.__mouseup=b,k.__touchmove=_,k.__touchstart=g,k.__touchend=b;var C=R(k);let N;var L=R(C);let q;var T=R(L);Ln(C,j=>O(u,j),()=>o(u)),Ln(k,j=>O(f,j),()=>o(f)),Z(j=>{F(k,"aria-valuenow",l()),F(k,"aria-valuemin",t()),F(k,"aria-valuemax",s()),N=yt(C,1,"range-slider svelte-7wycr",null,N,{"range-slider_right":o(E)<50}),pt(C,`width:${o(E)??""}%`),q=yt(L,1,"range-value svelte-7wycr",null,q,{"range-value_right":o(E)<50}),pe(T,j)},[()=>l().toFixed(a())]),jn("mousewheel",k,w),jn("mouseleave",k,p),jn("touchcancel",k,p),M(r,k),_e()}ct(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var xv=K('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function Ks(r,e){we(e,!0);let t=B(e,"min",3,0),s=B(e,"max",3,10),l=B(e,"value",31,()=>Ne(t())),a=B(e,"step",3,1);l()<t()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(t())),l()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(s())),t()>s()&&console.error("The min and max values must be distinct.");let c=re(void 0),v=re(void 0),u=re(!1);const f=S(()=>t()===s()?0:(l()-t())/(s()-t()+a())),d=S(()=>a()/(s()-t()+a())),m=S(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${o(d)*100}%, var(--bg-color-light2, #e8e8e8) ${o(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*o(d)}%)`:"background: #f0f0f0"),h=j=>{if(j<0||j>1)return l();let y=l();return Math.round(o(d)/j),j<o(f)&&o(f)>0&&(y=l()-a()*Math.ceil((o(f)-j)/o(d))),j>o(f)+o(d)&&o(f)+o(d)<1&&(y=l()+a()*Math.ceil((j-(o(f)+o(d)))/o(d))),y<t()&&(y=t()),y>s()&&(y=s()),y},g=j=>{const y=o(v).getBoundingClientRect(),z=y.x,V=y.x+y.width;return(j.clientX-z)/(V-z)},p=j=>{const y=g(j);y<0||y>1||O(u,y>o(f)&&y<o(d)+o(f),!0)},b=j=>{O(u,!1)},w=j=>{O(u,!1);const y=g(j);if(y<0||y>1)return;const z=h(y);l()!==z&&l(z)},_=j=>{let y=l()+Math.round(j.deltaY*.5)*a();y<t()&&(y=t()),y>s()&&(y=s()),l(y),j.preventDefault()},A=j=>{if(!o(u))return;const y=g(j);if(y<0||y>1)return;const z=h(y);z!=l()&&l(z)},E=j=>{if(j.key==="ArrowLeft"){l(l()-a()<t()?t():l()-a());return}if(j.key==="ArrowRight"){l(l()+a()>s()?s():l()+a());return}};var k=xv();k.__keydown=E,k.__mousemove=A,k.__mousedown=p,k.__mouseup=w,k.__touchmove=A,k.__touchstart=p,k.__touchend=w;var C=R(k);let N;var L=R(C);let q;var T=R(L);Ln(C,j=>O(c,j),()=>o(c)),Ln(k,j=>O(v,j),()=>o(v)),Z(j=>{F(k,"aria-valuenow",l()),F(k,"aria-valuemin",t()),F(k,"aria-valuemax",s()),pt(k,o(m)),N=yt(C,1,"range-slider svelte-1lbks0y",null,N,{"range-slider_left":o(d)<.1&&o(f)<.5,"range-slider_right":o(d)<.1&&o(f)>=.5}),pt(C,`width: max(2px, ${o(d)*100}%);left:${o(f)*100}%;`),q=yt(L,1,"range-value svelte-1lbks0y",null,q,{"range-value_right":o(d)<.1&&o(f)>.5,"range-value_left":o(d)<.1&&o(f)<=.5}),pe(T,j)},[()=>l().toFixed(0)]),jn("mousewheel",k,_),jn("mouseleave",k,b),jn("touchcancel",k,b),M(r,k),_e()}ct(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var kv=K('<button tabindex="-1"><!></button>'),Ev=K('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function Et(r,e){we(e,!0);let t=B(e,"value",31,()=>Ne(e.options[0])),s=B(e,"className",3,"");const l=u=>{if(u.key==="ArrowLeft"){const f=e.options.findIndex(d=>d===t());f>0&&t(e.options[f-1]);return}if(u.key==="ArrowRight"){const f=e.options.findIndex(d=>d===t());f<e.options.length-1&&t(e.options[f+1]);return}};var a=Ev(),c=J(a);c.__keydown=l,$e(c,20,()=>e.options,u=>u,(u,f)=>{var d=kv();d.__click=()=>t(f);let m;var h=R(d);zt(h,()=>f),Z(g=>m=yt(d,1,`option option_${g??""}`,"svelte-bifhtc",m,{selected:f==t()}),[()=>f.toString().replace(".","_")]),M(u,d)});var v=P(c,2);Z(()=>yt(c,1,`selector ${s()??""}`,"svelte-bifhtc")),pi(v,t),M(r,a),_e()}ct(["keydown","click"]);function Bn(r,e){we(e,!0);let t=B(e,"options",19,()=>["no","yes"]),s=B(e,"value",15,!1),l=re(!0);const a=S(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());ge(()=>O(l,s()?t()[1]:t()[0],!0)),ge(()=>s(o(l)===t()[1]));var c=be(),v=J(c);{var u=f=>{Et(f,{get options(){return o(a)},get value(){return o(l)},set value(d){O(l,d,!0)}})};Y(v,f=>{o(a)&&f(u)})}M(r,c),_e()}var Av=K('<input type="file" multiple class="svelte-xoa0sf"/>'),Cv=K('<input type="file" class="svelte-xoa0sf"/>'),Sv=K('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function Eo(r,e){we(e,!0);let t=B(e,"file",15),s=B(e,"message",3,"Select CSV file with dataset"),l=B(e,"acceptType",3,".csv"),a=B(e,"multiple",3,!1),c=re(void 0);function v(E){o(c)&&o(c).files.length>0?t(o(c).files.length===1?o(c).files[0]:o(c).files):t(null)}function u(E){(E.type==="click"||E.type==="keydown"&&(E.code==="Space"||E.code==="Enter"))&&o(c).click()}function f(E){o(c).value=null,t(null)}var d=Sv(),m=J(d);m.__keydown=u,m.__click=u;let h;var g=R(m),p=P(g);{var b=E=>{var k=Av();k.__change=v,Ln(k,C=>O(c,C),()=>o(c)),Z(()=>F(k,"accept",l())),M(E,k)},w=E=>{var k=Cv();k.__change=v,Ln(k,C=>O(c,C),()=>o(c)),Z(()=>F(k,"accept",l())),M(E,k)};Y(p,E=>{a()?E(b):E(w,!1)})}var _=P(m,2);{var A=E=>{dn(E,{onclick:f})};Y(_,E=>{t()&&E(A)})}Z(()=>{h=yt(m,1,"file-selector svelte-xoa0sf",null,h,{selected:t()}),pe(g,`${(t()?t().length>1?`Selected ${t().length} files`:t().name:s())??""} `)}),M(r,d),_e()}ct(["keydown","click","change"]);var Mv=K('<div class="error-message svelte-11e14eb"> </div>'),Nv=K('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function vc(r,e){we(e,!0);let t=B(e,"value",15,""),s=B(e,"className",3,""),l=B(e,"placeholder",3,""),a=B(e,"maxLength",3,25),c=B(e,"validator",3,null),v=re("");function u(){c()&&O(v,c()(t()),!0)}var f=Nv();let d;var m=R(f);m.__input=u;var h=P(m,2);{var g=p=>{var b=Mv(),w=R(b);Z(()=>pe(w,o(v))),M(p,b)};Y(h,p=>{o(v)&&o(v).length>0&&p(g)})}Z(()=>{d=yt(f,1,`textinput ${s()??""}`,"svelte-11e14eb",d,{error:o(v)&&o(v).length>0}),F(m,"placeholder",l()),F(m,"maxlength",a())}),pi(m,t),M(r,f),_e()}ct(["input"]);var jv=K('<div class="spinner svelte-wlgijz"></div>');function Tv(r){var e=jv();M(r,e)}ct(["keydown","click"]),ct(["keydown","click"]);var Pv=K("<h2> </h2>"),Lv=K("<!> <!>",1),zv=K('<div class="widget"><!></div>');function Rv(r,e){we(e,!0);let t=B(e,"title",3,""),s=B(e,"value",15),l=B(e,"labelWidth",3,13);function a(f){const d={};for(const m of Object.keys(f))d[m]=f[m].default;return d}ge(()=>{!s()&&e.options&&s(a(e.options))});var c=zv(),v=R(c);{var u=f=>{var d=Lv(),m=J(d);{var h=p=>{ue(p,{children:(b,w)=>{var _=Pv(),A=R(_);Z(()=>pe(A,t())),M(b,_)},$$slots:{default:!0}})};Y(m,p=>{t()&&p(h)})}var g=P(m,2);$e(g,17,()=>Object.keys(e.options),nt,(p,b)=>{const w=S(()=>e.options[o(b)]);var _=be(),A=J(_);{var E=k=>{ue(k,{get name(){return o(w).name},get label(){return o(w).label},get labelWidth(){return l()},children:(C,N)=>{var L=be(),q=J(L);Bs(q,()=>o(w).el,(T,j)=>{j(T,cr(()=>o(w).props,{get value(){return s()[o(b)]},set value(y){s(s()[o(b)]=y,!0)}}))}),M(C,L)},$$slots:{default:!0}})};Y(A,k=>{o(w).hidden||k(E)})}M(p,_)}),M(f,d)};Y(v,f=>{s()&&f(u)})}M(r,c),_e()}var Iv=K('<span class="item svelte-igakmm"> </span>'),Fv=K('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function Rl(r,e){we(e,!0);var t=be(),s=J(t);{var l=a=>{ue(a,{children:(c,v)=>{var u=Fv(),f=J(u),d=P(R(f),2);$e(d,17,()=>e.outliers,nt,(p,b)=>{var w=Iv(),_=R(w);Z(()=>pe(_,e.dataset.objlabels[o(b)])),M(p,w)});var m=P(f,2);{var h=p=>{mv(p,{get onclick(){return e.undoOutliers}})};Y(m,p=>{e.outliers.length>1&&p(h)})}var g=P(m,2);dn(g,{get onclick(){return e.resetOutliers}}),M(c,u)},$$slots:{default:!0}})};Y(s,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(l)})}M(r,t),_e()}function qv(r,e){let t=0,s=0;r.nresp>0&&(t=new He(r.values.v.slice(0,r.nresp*r.values.nrows-1)),s=r.nresp);const l=new Xr(r.values.v.slice(s*r.values.nrows),r.values.nrows,r.values.ncols-s).t(),a=l.ncols<e?1:Math.round(l.ncols/e),c=Zt.seq(1,l.ncols,a),v=l.subset(null,c),u=t?t.subset(c):null,f=r.classes?r.classes.filter((d,m)=>c.v.includes(m)):null;return{classNames:r.classNames,classes:f,resp:u,values:v,varvalues:r.varvalues.filter((d,m)=>m>=s),varindices:r.varindices.filter((d,m)=>m>=s),varaxisLabel:r.varvaluesUnits?r.varvaluesName+" "+r.varvaluesUnits:r.varvaluesName,varaxisUnits:r.varvaluesUnits}}function Il(r,e){return{values:e||r.values.copy(),varvalues:r.varvalues,varindices:r.varindices,varaxisLabel:r.varaxisLabel}}function Fl(r,e){if(!e||e.nrows!==r.values.nrows||e.ncols!==r.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const t=structuredClone(r);return t.values=e,t}const Ov=r=>r;function dc(r,{delay:e=0,duration:t=400,easing:s=Ov}={}){const l=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:s,css:a=>`opacity: ${a*l}`}}var Bv=K('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function hc(r,e){we(e,!0);let t=B(e,"isDark",3,!1);function s(m){m.key==="Escape"&&e.closeModal()}var l=Bv();jn("keydown",Jo,s);let a;var c=R(l),v=R(c),u=R(v);u.__click=function(...m){var h;(h=e.closeModal)==null||h.apply(this,m)};var f=P(v,2),d=R(f);Gr(d,()=>e.children),Z(()=>a=yt(l,1,"drop svelte-oie633",null,a,{isdark:t()})),gi(7,l,()=>dc),M(r,l),_e()}ct(["click"]);var Dv=K('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function ql(r,e){we(e,!0);var t=be(),s=J(t);{var l=c=>{var v=Dv(),u=R(v),f=P(u),d=R(f);zt(d,()=>tv(e.prepmodel)),Z(()=>pe(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),M(c,v)},a=c=>{var v=$u("skipped");M(c,v)};Y(s,c=>{e.prepmodel.ml?c(l):c(a,!1)})}M(r,t),_e()}var Vv=K('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),Yv=K('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Wv(r,e){we(e,!0);var t=be(),s=J(t);{var l=a=>{ue(a,{name:"info",children:(c,v)=>{var u=Yv(),f=J(u),d=P(R(f),3);{var m=w=>{var _=Vv(),A=P(J(_),2),E=R(A);Z(()=>{F(A,"title",e.model.fileName),pe(E,e.model.fileName)}),M(w,_)};Y(d,w=>{e.model.fileName&&w(m)})}var h=P(d),g=P(h,3);ql(g,{get prepmodel(){return e.model}});var p=P(f,2);{var b=w=>{dn(w,{get onclick(){return e.reset}})};Y(p,w=>{e.reset&&w(b)})}Z(()=>pe(h,` ${e.model.npred??""} `)),M(c,u)},$$slots:{default:!0}})};Y(s,a=>{e.model&&a(l)})}M(r,t),_e()}var Uv=K("<!> <!>",1),Hv=K("<p><!></p>"),Gv=K("<!> <!>",1);function Kv(r,e){we(e,!0);let t=B(e,"model",15),s=re(""),l=re("neutral"),a=re("");function c(w){try{const _=JSON.parse(w,Ll);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),!Object.keys(_).includes("class")||_.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");_.fileName=o(f),t(_),O(l,"success"),O(a,"")}catch(_){console.log(_),t(null),O(l,"error"),O(a,_,!0)}}function v(w){const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsText(o(s))}function u(){O(s,""),t(null),O(l,"neutral"),O(a,"")}ge(()=>{o(s)===null?(t(null),O(l,"neutral"),O(a,"")):(O(l,"neutral"),O(a,""))}),ge(()=>{(t()===null||t()===0)&&O(s,"")});let f=S(()=>o(s)?o(s).name.replace(/\.[^/.]+$/,""):"");var d=Gv(),m=J(d);{var h=w=>{var _=Uv(),A=J(_);Pn(A,()=>o(s),C=>{ue(C,{name:"file-selector",children:(N,L)=>{Eo(N,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return o(s)},set file(q){O(s,q,!0)}})},$$slots:{default:!0}})});var E=P(A,2);{var k=C=>{ue(C,{name:"load-button",label:" ",children:(N,L)=>{Nt(N,{onclick:v,text:"Load"})},$$slots:{default:!0}})};Y(E,C=>{o(s)&&C(k)})}M(w,_)},g=w=>{Wv(w,{get model(){return t()},reset:u})};Y(m,w=>{t()?w(g,!1):w(h)})}var p=P(m,2);{var b=w=>{ue(w,{name:"error",status:"error",children:(_,A)=>{var E=Hv(),k=R(E);zt(k,()=>o(a)),M(_,E)},$$slots:{default:!0}})};Y(p,w=>{(o(l)==="error"||o(a))&&w(b)})}M(r,d),_e()}var Jv=K('<p class="title"> </p>'),Xv=K("<!>&nbsp;",1),Qv=K("<!> <!>",1),Zv=K('<div class="method-open svelte-10os93"><!> <!> <!></div>'),$v=K('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function ds(r,e){we(e,!0);let t=B(e,"cancel",3,null);var s=be(),l=J(s);{var a=v=>{var u=Zv(),f=R(u);ue(f,{children:(h,g)=>{var p=Jv(),b=R(p);Z(()=>pe(b,e.title)),M(h,p)},$$slots:{default:!0}});var d=P(f,2);Gr(d,()=>e.children);var m=P(d,2);ue(m,{label:" ",children:(h,g)=>{var p=Qv(),b=J(p);{var w=A=>{var E=Xv(),k=J(E);Nt(k,{text:"Cancel",get onclick(){return t()}}),M(A,E)};Y(b,A=>{t()&&A(w)})}var _=P(b,2);Nt(_,{text:"Save",get onclick(){return e.apply}}),M(h,p)},$$slots:{default:!0}}),gi(3,u,()=>dc,()=>({duration:10})),M(v,u)},c=v=>{ue(v,{children:(u,f)=>{var d=$v(),m=J(d),h=R(m),g=P(h);g.__click=()=>e.open(e.pos);var p=R(g),b=P(m,2);pv(b,{onclick:()=>e.moveUp(e.pos)});var w=P(b,2);bv(w,{onclick:()=>e.moveDown(e.pos)});var _=P(w,2);dn(_,{onclick:()=>e.remove(e.pos)}),Z(()=>{pe(h,`${e.title??""} `),pe(p,e.settings)}),M(u,d)},$$slots:{default:!0}})};Y(l,v=>{e.isOpen?v(a):v(c,!1)})}M(r,s),_e()}ct(["click"]);var ed=K("<!> <!>",1);function td(r,e){we(e,!0);let t=B(e,"params",31,()=>Ne([0,0])),s=B(e,"varind",15),l=B(e,"settings",15),a=B(e,"nvars",3,0),c=zn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const v={snv:0,area:1,length:2,var:3},u=Object.keys(v);let f=re(Ne(u[t()[0]])),d=re(t()[1]+1);const m="Normalization";ge(()=>{l(o(f)+(o(f)==="var"?" #"+o(d):""))}),ge(()=>{o(f)==="var"?s(s()[0]=t()[1]>0?t()[1]:1,!0):s(s()[0]=-1,!0)}),ge(()=>{o(f)==="var"&&e.isOpen?s(s()[0]=t()[1],!0):s(s()[0]=-1,!0)}),ge(()=>{o(f)&&t(t()[0]=v[o(f)],!0)}),ge(()=>{o(d)&&t(t()[1]=o(d)-1,!0)}),ds(r,cr({id:"norm",title:m,get settings(){return l()},get isOpen(){return e.isOpen}},()=>c,{children:(h,g)=>{var p=ed(),b=J(p);ue(b,{label:"Type",children:(A,E)=>{Et(A,{get options(){return u},get value(){return o(f)},set value(k){O(f,k,!0)}})},$$slots:{default:!0}});var w=P(b,2);{var _=A=>{ue(A,{label:"Variable index",children:(E,k)=>{Ks(E,{min:1,get max(){return a()},step:1,get value(){return o(d)},set value(C){O(d,C,!0)}})},$$slots:{default:!0}})};Y(w,A=>{o(f)==="var"&&A(_)})}M(h,p)},$$slots:{default:!0}})),_e()}var rd=K("<!> <!> <!>",1);function nd(r,e){we(e,!0);let t=B(e,"params",31,()=>Ne([3,1,0])),s=B(e,"settings",15),l=zn(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const a=S(()=>{if(!e.nvars)return 3;const f=Math.round(e.nvars*.25);return f>39?39:f%2<1?f+1:f}),c=S(()=>t()[1]<2?[0,1]:[0,1,2]),v=S(()=>t()[0]<5?[1,2]:[1,2,3]);ge(()=>{t()[0]<5&&t()[1]>2&&t(t()[1]=2,!0)}),ge(()=>{t()[2]>t()[1]&&t(t()[2]=t()[1],!0)}),ge(()=>{s(t()[0]+", "+t()[1]+", "+t()[2])}),ds(r,cr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>l,{children:(f,d)=>{var m=rd(),h=J(m);ue(h,{label:"Width",children:(b,w)=>{Ks(b,{min:3,get max(){return o(a)},step:2,get value(){return t()[0]},set value(_){t(t()[0]=_,!0)}})},$$slots:{default:!0}});var g=P(h,2);ue(g,{label:"Polynomial",children:(b,w)=>{Et(b,{get options(){return o(v)},get value(){return t()[1]},set value(_){t(t()[1]=_,!0)}})},$$slots:{default:!0}});var p=P(g,2);ue(p,{label:"Derivative",children:(b,w)=>{Et(b,{get options(){return o(c)},get value(){return t()[2]},set value(_){t(t()[2]=_,!0)}})},$$slots:{default:!0}}),M(f,m)},$$slots:{default:!0}})),_e()}var sd=K("<!> <!>",1);function od(r,e){we(e,!0);let t=B(e,"params",31,()=>Ne([1,0]));B(e,"varind",27,()=>-1);let s=B(e,"settings",15);B(e,"nvars",3,0);let l=zn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},v=Object.keys(a),u=Object.keys(c);let f=re(Ne(v[t()[0]])),d=re(Ne(u[t()[1]]));const m="Scaling";ge(()=>{s(o(f)+"/"+o(d))}),ge(()=>{o(f)&&t(t()[0]=a[o(f)],!0)}),ge(()=>{o(d)&&t(t()[1]=c[o(d)],!0)}),ds(r,cr({id:"scale",title:m,get settings(){return s()}},()=>l,{children:(h,g)=>{var p=sd(),b=J(p);ue(b,{label:"Center",children:(_,A)=>{Et(_,{get options(){return v},get value(){return o(f)},set value(E){O(f,E,!0)}})},$$slots:{default:!0}});var w=P(b,2);ue(w,{label:"Scale",children:(_,A)=>{Et(_,{get options(){return u},get value(){return o(d)},set value(E){O(d,E,!0)}})},$$slots:{default:!0}}),M(h,p)},$$slots:{default:!0}})),_e()}var ld=K("<!> <!> <!>",1),ad=K("<!> <!> <!>",1);function id(r,e){we(e,!0);let t=B(e,"params",31,()=>Ne([0,1,.1]));B(e,"varind",27,()=>-1);let s=B(e,"settings",15,"");B(e,"nvars",3,0);let l=zn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Baseline correction",c={emsc:0,als:1},v=Object.keys(c);function u(p){const b=Math.ceil(Math.log10(p));return Math.pow(10,b)}let f=re(Ne(v[t()[0]])),d=re(Ne(t()[2]>0?u(t()[2]).toString():"0.1")),m=S(()=>parseFloat(o(d))),h=S(()=>o(m)/10),g=S(()=>Math.ceil(-Math.log10(o(m)))+1);ge(()=>{if(o(f)!=="als")return;const p=parseFloat(o(d));(t()[2]<o(h)||t()[2]>p-o(h))&&t(t()[2]=o(h),!0)}),ge(()=>{s(o(f)+" ("+(o(f)=="emsc"?t()[1].toFixed(0):t()[1].toFixed(1)+","+t()[2].toFixed(3))+")")}),ge(()=>{o(f)&&t(t()[0]=c[o(f)],!0)}),ds(r,cr({id:"scale",title:a,get settings(){return s()}},()=>l,{children:(p,b)=>{var w=ad(),_=J(w);ue(_,{label:"Type",children:(N,L)=>{Et(N,{get options(){return v},get value(){return o(f)},set value(q){O(f,q,!0)}})},$$slots:{default:!0}});var A=P(_,2);{var E=N=>{var L=ld(),q=J(L);ue(q,{label:"Lambda",children:(y,z)=>{ko(y,{min:1,max:7,step:.1,get value(){return t()[1]},set value(V){t(t()[1]=V,!0)}})},$$slots:{default:!0}});var T=P(q,2);ue(T,{label:"Penalty range",children:(y,z)=>{Et(y,{options:["1","0.1","0.01"],get value(){return o(d)},set value(V){O(d,V,!0)}})},$$slots:{default:!0}});var j=P(T,2);ue(j,{label:"Penalty",children:(y,z)=>{{let V=S(()=>o(m)-o(h));ko(y,{get min(){return o(h)},get max(){return o(V)},get step(){return o(h)},get decNum(){return o(g)},get value(){return t()[2]},set value(D){t(t()[2]=D,!0)}})}},$$slots:{default:!0}}),M(N,L)};Y(A,N=>{o(f)==="als"&&N(E)})}var k=P(A,2);{var C=N=>{ue(N,{label:"Polynomial",children:(L,q)=>{Ks(L,{min:0,max:5,step:1,decNum:0,get value(){return t()[1]},set value(T){t(t()[1]=T,!0)}})},$$slots:{default:!0}})};Y(k,N=>{o(f)==="emsc"&&N(C)})}M(p,w)},$$slots:{default:!0}})),_e()}var cd=K("<!> <!>",1);function ud(r,e){we(e,!0);let t=B(e,"params",15),s=B(e,"varind",15),l=B(e,"settings",15),a=zn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let v=re(!1);const u=S(()=>e.nvars?Math.round(e.nvars*.1):1);ge(()=>{e.isOpen?((t()[0]===void 0||t()[0]===null||t()[0]<e.left||t()[0]>e.right-o(u))&&t(t()[0]=e.left,!0),(t()[1]===void 0||t()[1]===null||t()[1]>e.right||t()[1]<e.left+o(u))&&t(t()[1]=e.right,!0),s(s()[1]=t()[0],!0),s(s()[2]=t()[1],!0),O(v,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),O(v,!1))}),ge(()=>{l("left: "+t()[0]+" right: "+t()[1])}),ds(r,cr({id:"norm",title:c,get settings(){return l()},get isOpen(){return e.isOpen}},()=>a,{children:(f,d)=>{var m=be(),h=J(m);{var g=p=>{var b=cd(),w=J(b);ue(w,{label:"Left",children:(A,E)=>{{let k=S(()=>e.right-o(u));ko(A,{get min(){return e.left},get max(){return o(k)},step:1,decNum:0,get value(){return t()[0]},set value(C){t(t()[0]=C,!0)}})}},$$slots:{default:!0}});var _=P(w,2);ue(_,{label:"Right",children:(A,E)=>{{let k=S(()=>e.left+o(u));ko(A,{get min(){return o(k)},get max(){return e.right},step:1,decNum:0,get value(){return t()[1]},set value(C){t(t()[1]=C,!0)}})}},$$slots:{default:!0}}),M(p,b)};Y(h,p=>{o(v)&&p(g)})}M(f,m)},$$slots:{default:!0}})),_e()}var fd=K("<!> <!>",1);function vd(r,e){we(e,!0);let t=B(e,"params",31,()=>Ne([3,5]));B(e,"varind",27,()=>-1);let s=B(e,"settings",15);B(e,"nvars",3,0);let l=zn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Spike removal";ge(()=>{s(t()[0]+"/"+t()[1])}),ds(r,cr({id:"scale",title:a,get settings(){return s()}},()=>l,{children:(c,v)=>{var u=fd(),f=J(u);ue(f,{label:"Window",children:(m,h)=>{Ks(m,{min:3,max:15,step:2,get value(){return t()[0]},set value(g){t(t()[0]=g,!0)}})},$$slots:{default:!0}});var d=P(f,2);ue(d,{label:"Threshold",children:(m,h)=>{Ks(m,{min:3,max:50,get value(){return t()[1]},set value(g){t(t()[1]=g,!0)}})},$$slots:{default:!0}}),M(c,u)},$$slots:{default:!0}})),_e()}var dd=K("<h2>Selected methods</h2> <!>",1),hd=K("<p>No methods selected</p>"),md=K("<p> </p>"),gd=K("<h2>Available methods</h2>"),pd=K("<p>Maximum number of methods is selected.</p>"),bd=K("<p> </p> <!>",1),wd=K('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function _d(r,e){we(e,!0);let t=B(e,"prepobj",31,()=>Ne([])),s=B(e,"meta",15),l=B(e,"varind",31,()=>-1),a=B(e,"rawdataShort",15),c=B(e,"prepdataShort",15),v=B(e,"prepmodel",3,null),u=B(e,"reset",3,null),f=B(e,"finalize",3,null);const d=30,m=8,h={savgol:nd,norm:td,scale:od,baseline:id,trim:ud,spikes:vd};let g=re("neutral"),p=re(""),b=re(void 0),w=re(""),_=re(Ne([])),A=re(!1),E=re(Ne([])),k=re(Ne([]));s(new Array(m).fill(""));const C=S(()=>e.rawdata.values.ncols-e.rawdata.nresp);let N=Ne(e.rawdata.values.nrows<3?Object.keys(h).filter(ie=>ie!=="scale"):Object.keys(h));q(),t().length!==0&&L();async function L(){t().length!==0&&O(b,e.WASM().then(ie=>{O(g,"applying");const ae=rc(ie,a().values,0,t(),!0,[]),$=Us(ie,a().values,0,ae,!0);c(Il(a(),$)),O(g,"success")}).catch(ie=>{c(Il(a())),console.error(ie),O(g,"error"),O(p,ie,!0)}),!0)}function q(){const ie=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!t()||t().length<1){e.setLeft(0),e.setRight(ie),O(E,[],!0),O(k,[],!0);return}let ae=[],$=[],ve=0,ke=ie;for(let ce of t())ce.id==="trim"?(ae.push(ve),$.push(ke),ce.params[0]<ve&&(ce.params[0]=ve),ce.params[1]>ke&&(ce.params[1]=ke),ve=ce.params[0]>ve?ce.params[0]:ve,ke=ce.params[1]>0&&ce.params[1]<ke?ce.params[1]:ke):(ae.push(ve),$.push(ke));O(E,ae,!0),O(k,$,!0),e.setLeft(ve),e.setRight(ke)}function T(ie){const ae=vn.find($=>$.id===ie);ae&&(o(E).push(e.left),o(k).push(e.right),t().push({id:ae.id,params:ae.mp}),O(A,!0),O(w,t().length-1))}function j(){t().length<1||(o(E).pop(),o(k).pop(),t().pop(),O(A,!1),O(w,-1))}function y(ie){if(ie<=0)return;const ae=t()[ie],$=t()[ie-1];t(t()[ie-1]=ae,!0),t(t()[ie]=$,!0),W()}function z(ie){if(ie<0||ie===t().length-1)return;const ae=t()[ie],$=t()[ie+1];t(t()[ie+1]=ae,!0),t(t()[ie]=$,!0),W()}function V(ie){ie<0||ie>=t().length||(t(t().filter((ae,$)=>$!==ie)),W())}function D(ie){O(w,ie,!0)}function I(){O(w,null)}function W(){O(g,"neutral"),O(p,""),O(A,!1),O(w,null),v()&&u()(),q(),L(),l(l()[1]=-1,!0),l(l()[2]=-1,!0)}ge(()=>{e.rawdata&&!a()&&a(qv(e.rawdata,d))}),ge(()=>{a()&&!c()&&c(Il(a()))}),ge(()=>{(!t()||t().length===0)&&(O(_,[],!0),c(null),O(E,[],!0),O(k,[],!0),O(w,""),s(new Array(m).fill("")))});var le=wd(),te=J(le);let Q;var ne=R(te);ue(ne,{label:"",children:(ie,ae)=>{var $=dd(),ve=P(J($),2);{var ke=ce=>{fc(ce,{text:"edit",get onclick(){return u()}})};Y(ve,ce=>{v()&&u()&&ce(ke)})}M(ie,$)},$$slots:{default:!0}});var se=P(ne,2);{var he=ie=>{ue(ie,{label:"",children:(ae,$)=>{var ve=hd();M(ae,ve)},$$slots:{default:!0}})},fe=ie=>{var ae=be(),$=J(ae);$e($,17,t,nt,(ve,ke,ce)=>{const ze=S(()=>h[o(ke).id]);var Le=be(),Ye=J(Le);{var Qe=vt=>{var G=be(),U=J(G);{let X=S(()=>ce===o(w)),de=S(()=>o(A)?j:null);Bs(U,()=>o(ze),(me,Ce)=>{Ce(me,{get isOpen(){return o(X)},get left(){return o(E)[ce]},get right(){return o(k)[ce]},pos:ce,get nvars(){return o(C)},moveUp:y,moveDown:z,apply:W,open:D,close:I,remove:V,get cancel(){return o(de)},get params(){return o(ke).params},set params(Te){o(ke).params=Te},get varind(){return l()},set varind(Te){l(Te)},get settings(){return s()[ce]},set settings(Te){s(s()[ce]=Te,!0)}})})}M(vt,G)},St=vt=>{var G=be(),U=J(G);{let X=S(()=>ce===o(w)),de=S(()=>o(A)?j:null);Bs(U,()=>o(ze),(me,Ce)=>{Ce(me,{pos:ce,get isOpen(){return o(X)},get left(){return o(E)[ce]},get right(){return o(k)[ce]},get nvars(){return o(C)},moveUp:y,moveDown:z,apply:W,open:D,close:I,remove:V,get cancel(){return o(de)},get params(){return o(ke).params},set params(Te){o(ke).params=Te},get settings(){return s()[ce]},set settings(Te){s(s()[ce]=Te,!0)}})})}M(vt,G)};Y(Ye,vt=>{o(ke).id==="norm"||o(ke).id==="trim"?vt(Qe):vt(St,!1)})}M(ve,Le)}),M(ie,ae)};Y(se,ie=>{t().length===0?ie(he):ie(fe,!1)})}var ee=P(se,2);{var oe=ie=>{ue(ie,{status:"error",children:(ae,$)=>{var ve=md(),ke=R(ve);Z(()=>pe(ke,o(p))),M(ae,ve)},$$slots:{default:!0}})};Y(ee,ie=>{(o(g)==="error"||o(p))&&ie(oe)})}var Ae=P(te,2),De=R(Ae);{var Fe=ie=>{ue(ie,{label:" ",children:(ae,$)=>{Nt(ae,{get onclick(){return f()},text:"Finalize"})},$$slots:{default:!0}})};Y(De,ie=>{!v()&&!o(w)&&t().length>0&&ie(Fe)})}var Ve=P(Ae,2),qe=R(Ve);ue(qe,{label:"",children:(ie,ae)=>{var $=gd();M(ie,$)},$$slots:{default:!0}});var Pe=P(qe,2);{var Oe=ie=>{ue(ie,{label:"",children:(ae,$)=>{var ve=pd();M(ae,ve)},$$slots:{default:!0}})},lt=ie=>{var ae=be(),$=J(ae);$e($,17,()=>N,nt,(ve,ke)=>{const ce=S(()=>vn.find(ze=>ze.id===o(ke)));ue(ve,{children:(ze,Le)=>{var Ye=bd(),Qe=J(Ye),St=R(Qe),vt=P(Qe,2);gv(vt,{onclick:()=>T(o(ce).id)}),Z(()=>pe(St,o(ce).title)),M(ze,Ye)},$$slots:{default:!0}})}),M(ie,ae)};Y(Pe,ie=>{t().length>=m?ie(Oe):ie(lt,!1)})}Z(()=>Q=yt(te,1,"selected-methods-list svelte-9cg1zq",null,Q,{final:v()!==null&&v()!==void 0})),M(r,le),_e()}const yd={small:30,medium:40,large:50,xlarge:60},xd={small:5,medium:8,large:12,xlarge:15},kd={small:6,medium:10,large:14,xlarge:18},Ol={small:4,medium:6,large:8,xlarge:10},Ed={small:12,medium:15,large:19,xlarge:21},Bl={small:11,medium:15,large:17,xlarge:19},Js={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},hs=["●","◼","▲","▼","⬥","＋","✳","✕"],Ad=.8,mc=.5,Cd={small:5,medium:8,large:12,xlarge:15},Rt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function gc(r,e){return Array.isArray(r)&&r.length===e&&!r.some(t=>t===void 0)&&!r.some(t=>isNaN(t))}function pc(r,e){if(r!=null&&(Array.isArray(r)&&(r=ft(r)),!(!Ie(r)||r.length<1)))return r.apply(t=>Hl((t-e[1])*e[0]+e[2])).v}function bt(r,e){return pc(r,e.coords)}function Dl(r,e){return pc(r,e.objects)}function bc(r,e){if(r!=null&&(Array.isArray(r)&&(r=ft(r)),!(!Ie(r)||r.length<1)))return r.apply(t=>(t-e[2])/e[0]+e[1]).v}function wc(r,e){return bc(r,e.coords)}function _c(r,e){return bc(r,e.objects)}function Vl(r){return r===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${r.toString()}</tspan>`}function Dn(r){if(r===Math.round(r))return r;if(Math.abs(r)>10**6)return Math.round(r);if(Math.abs(r)<10**-6)return r;let e=r.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Yl(r){if(r===void 0)return[0,void 0];if(r.length<1)return[0,void 0];if(r.length===1)return[0,[r[0].toString()]];let e=Dn(Math.abs(Jr(xi(r)))),t=0;if(e>=1)return e<100?[0,Array.from(r).map(a=>a.toFixed(0))]:(t=Math.ceil(Dn(Math.log10(e)))-2,[t,Array.from(r).map(a=>(a/Math.pow(10,t)).toFixed(0))]);let s=Math.ceil(-Dn(Math.log10(e)));return s<=2?[0,Array.from(r).map(l=>l.toFixed(s))]:(t=s-2,s=2,Dn(Math.abs(Lr(r)))<=10?[-t,Array.from(r).map(l=>(l*Math.pow(10,t)).toFixed(s))]:[-t,Array.from(r).map(l=>(l/Math.pow(10,t)).toString())])}function Ut(r,e,t){return Array.isArray(r)&&(r=ft(r)),Ie(r)?r.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&r.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):r:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Wl(r,e,t,s){if(!r||!e||r.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=t.coords,a=s.coords;let c="";for(let v=0;v<r.length;v++){const u=Hl((r.v[v]-l[1])*l[0]+l[2]),f=Hl((e.v[v]-a[1])*a[0]+a[2]);c+=u+","+f+" "}return c}function yc(r,e){return r?Array.isArray(r)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==r.length?[null,"number of tick labels and values should be the same."]:[r.map(t=>hn(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function xc(r,e){if(Array.isArray(r)&&(r=ft(r)),!Ie(r))return[null,"tick values must be provided as an array or as a vector."];if(r.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const t=new Set(r.v);if(r.length!==t.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],a=r.filter(c=>c>=s&c<=l);return a.length!==r.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function Ul(r,e,t,s,l,a){l==null&&(l=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(r)return r;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const v=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*v,f=Math.floor(Math.log10(u)),d=1/Math.pow(10,f-1),m=Math.round(u*d)/d;let h=Sd(m/t);l&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let g=Math.ceil((c[0]+v)/h)*h,p=Math.floor((c[1]-v)/h)*h;Math.abs(c[0]-g)<h/10&&(g=g+h),Math.abs(c[1]-p)<h/10&&(p=p-h),t=Math.ceil(Dn((p-g)/h))+1,r=He.zeros(t);for(let b=0;b<t;b++)r.v[b]=g+h*b;if(Math.abs(h)<1){const b=Math.pow(10,1+Math.round(-Math.log10(h)));r=r.apply(w=>Math.round((w+Number.EPSILON)*b)/b)}return r.filter(b=>b>=c[0]&b<=c[1])}function Sd(r,e){const t=Math.floor(Math.log10(r)),s=r/Math.pow(10,t);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,t)}function Hl(r){return Math.round(r*10)/10}function Md(r,e){return e<300.2||r<400.2?"small":e<400.2||r<700.2?"medium":e<650.2||r<850.2?"large":"xlarge"}function kc(r,e){return r<400.2?"small":r<700.2?"medium":r<900.2?"large":"xlarge"}function Nd(){const r=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;r[e]=t}return r}function jd(r){let e=-1,t=Nd();for(let s=0;s<r.length;s++)e=t[(e^r[s])&255]^e>>>8;return e^-1}function Td(r,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const s=jd(t),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(r,0),c.set(a,33),c.set(t,37),c.set(l,50),c}function Pd(r,e){const t=r.split(","),s=t[0],l=t[1],a=33/3*4,c=l.substring(0,a),v=l.substring(a),u=atob(c),f=new Uint8Array(u.length);for(let h=0;h<f.length;h++)f[h]=u.charCodeAt(h);const d=Td(f,e),m=btoa(String.fromCharCode(...d));return[s,",",m,v].join("")}function Ld(r,e,t,s,l){if(t||(t=10),s||(s=10),l||(l=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!r||!(r instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=t/2.54*l,c=s/2.54*l;setTimeout(()=>{const v=r.clientHeight,u=r.clientWidth;let f=Math.max(a/u,c/v),d=1;f<1&&(d=f,f=1);const m=document.createElement("canvas"),h=m.getContext("2d");m.width=u*(d<1?d:f),m.height=v*(d<1?d:f),r.setAttribute("width",u*f),r.setAttribute("height",v*f),h.fillStyle="white",h.fillRect(0,0,m.width,m.height),h.scale(f,f);const g=new XMLSerializer().serializeToString(r),p=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(p),w=new Image;w.onload=function(){d<0&&(w.width=w.width*d,w.height=w.height*d),h.drawImage(w,0,0,m.width,m.height);const _=m.toDataURL("image/png"),A=Pd(_,l),E=document.createElement("a");E.href=A,E.download=`${e}.png`,E.click()},w.src=b},20)}function zd(r,e){if(!r||!(r instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=r.clientHeight,s=r.clientWidth;r.setAttribute("width",s+"px"),r.setAttribute("height",t+"px"),r.setAttribute("viewBox",`0 0 ${s} ${t}`);const l=new Blob([r.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(l),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function Rd(r,e,t,s){const l=r.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Id(e,t,s)})]).then(()=>{r.classList.add("copied"),r.textContent="✓ done",setTimeout(()=>{r.classList.remove("copied"),r.textContent=l},500)},a=>{console.error(a),r.classList.add("error"),r.textContent="x copy",setTimeout(()=>{r.classList.remove("error"),r.textContent=l},500)}).catch(a=>console.error(a))}async function Id(r,e,t){const s=r.clientHeight,l=r.clientWidth,a=Math.max(e/l,t/s),c=document.createElement("canvas"),v=c.getContext("2d");return c.width=l*a,c.height=s*a,v.scale(a,a),r.setAttribute("width",c.width),r.setAttribute("height",c.height),await new Promise((f,d)=>{const m=new XMLSerializer().serializeToString(r),h=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,p=g.createObjectURL(h),b=new Image;b.onload=function(){v.drawImage(b,0,0,c.width,c.height),g.revokeObjectURL(p),c.toBlob(function(w){w?f(w):d(new Error("Failed to create blob"))},"image/png")},b.onerror=function(w){d(w)},b.src=p})}function Ao(r,e){return r>16&&(r=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][r-1]}function Fd(r,e,t,s,l){let a=l.ticks,c=l.tickLabels,v=0;const u=Ul(a,r,xd[t.x],!0,l.whole),f=u.length,d=_c([Ol[t.plot]],s)[0],m=He.fill(e[0],f),h=m.add(d),g=He.fill(e[1],f);if(c||(a?(v=0,c=a.v.map(q=>Dn(q).toString())):[v,c]=Yl(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[u,m],[u,g]],b=[[ft([r[0]]),ft([e[0]])],[ft([r[1]]),ft([e[0]])]],w=[[u,h],[u,m]],_=(r[1]-r[0])*.01,A=[[null,null],[[r[1]-(v>9?1:0)*_],[m.v[f-1]]]],E=Vl(v),k=c.length,C=Math.abs(r[1]>r[0]?r[1]-u.v[k-1]:r[1]-u.v[0]),N=Math.abs(r[1]-r[0]),L=Math.abs(u.v[1]-u.v[0]);if(E.length>0&&C<N*.1&&C<L*.5){const q=r[1]>r[0]?k-1:0;c[q]=" "}return{grid:p,axisLine:b,tickCoords:w,tfCoords:A,ticks:a,tickLabels:c,tickFactor:v,tfLabel:E}}function qd(r,e,t,s,l){let a=l.ticks,c=l.tickLabels,v=0;const u=Ul(l.ticks,e,kd[t.y],!0,l.whole),f=u.length,d=_c([Ol[t.plot]],s)[0],m=He.fill(r[0],f),h=m.add(d),g=He.fill(r[1],f);if(c||(a?(v=0,c=a.v.map(L=>Dn(L).toString())):[v,c]=Yl(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[m,u],[g,u]],b=[[ft([r[0]]),ft([e[0]])],[ft([r[0]]),ft([e[1]])]],w=[[m,u],[h,u]],_=[[[],[]],[[h.v[f-1]+(Math.abs(v)>9?3:2)*d],[e[1]]]],A=Vl(v),E=c.length,k=Math.abs(e[1]>e[0]?e[1]-u.v[E-1]:e[1]-u.v[0]),C=Math.abs(e[1]-e[0]),N=Math.abs(u.v[1]-u.v[0]);if(A.length>0&&k<C*.1&&k<N*.5){const L=e[1]>e[0]?E-1:0;c[L]=" "}return{grid:p,axisLine:b,tickCoords:w,tfCoords:_,ticks:a,tickLabels:c,tickFactor:v,tfLabel:A}}function Od(r){if(!r.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Ie(r.breaks)?r.breaks.v:r.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!r.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(r.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(r.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=r.colmap;let s,l;if(r.labels?(s=r.labels,l=0):[l,s]=Yl(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=s.length===t.length;return{colmap:t,breaks:e,labels:s,isCentered:a,labelsFactor:l,fontSize:r.fontSize,labelColor:r.labelColor}}function Bd(r,e,t,s){const l=r.colmap.length,a=e*Ad,c=a/l,v=t[1]+(e-a)*.5,u=Cd[s.y],f=t[2]+u*mc,d=f+u*(1+mc),m=r.isCentered?c/2:0;return{start:v,top:f,height:u,width:c,dxl:m,ltop:d}}function Vn(r,e,t){if(!r||!e||!t||typeof t!="function")return;const s=r.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;t(l),r.stopPropagation()}}function Dd(r,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(r.replace(/<(.|\n)*?>/g,"")).width}function Vd(r,e){const t="Arial",s=e/8,l=e*1.5,a=Array(r.length),c=Array(r.length);let v=0,u=0,f=0;for(let m=0;m<r.length;m++){const h=Dd("  "+r[m].label+"  ",e+"px "+t);f=h>f?h:f;const g=e*r[m].labelHeight+2*s;a[m]=g,c[m]=v,v=v+g,u=u+g}const d=l+2*s+f;return[c,a,l,s,u,d]}function Yd(r,e,t,s,l){const[a,c,v,u,f,d]=Vd(r.items,s*r.fontSize),m=r.position.includes("left")?e[0]+l:r.position.includes("right")?e[1]-d-l:(e[1]+e[0]-d)*.5,h=r.position.includes("top")?t[1]+l:r.position.includes("bottom")?t[0]-f-l:(t[1]+t[0]-f)*.5;return{lgl:m,lgt:h,lgw:d,lgh:f,ely:a,elh:c,elw:v,elp:u}}function hn(r){if(!r||r.length<1)return r;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function t(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<r.length;){const a=r[s];if((a==="^"||a==="_")&&s<r.length-1){const c=a==="^";if(s++,r[s]==="("){let v=s+1;for(;v<r.length&&r[v]!==")";)v++;const u=r.slice(s+1,v);l+=c?e(u):t(u),s=v+1}else if(r[s]==="-"||r[s]==="–"){const v=r.slice(s,s+2);l+=c?e(v):t(v),s=s+2}else l+=c?e(r[s]):t(r[s]),s++}else l+=a,s++}return l}var Wd=Ee('<line vector-effect="non-scaling-stroke"></line>'),Ud=Ee("<g></g>");function Gl(r,e){we(e,!0);let t=B(e,"lineCoords",19,()=>[]),s=B(e,"lineColor",19,()=>Rt.DARKGRAY),l=B(e,"lineType",3,1),a=B(e,"lineWidth",3,1),c=B(e,"className",3,"");const v=Jt("axes");let u=S(()=>bt(t()[0][0],v.tX())),f=S(()=>bt(t()[1][0],v.tX())),d=S(()=>bt(t()[0][1],v.tY())),m=S(()=>bt(t()[1][1],v.tY())),h=S(()=>`stroke:${s()};stroke-width: ${a()}px;stroke-dasharray:${Js[v.scales().plot][l()-1]}`);var g=be(),p=J(g);{var b=w=>{var _=Ud();$e(_,21,()=>o(u),nt,(A,E,k)=>{var C=Wd();Z(()=>{F(C,"x1",o(u)[k]),F(C,"x2",o(f)[k]),F(C,"y1",o(d)[k]),F(C,"y2",o(m)[k]),pt(C,o(h))}),M(A,C)}),Z(()=>yt(_,0,lf(c()))),M(w,_)};Y(p,w=>{o(u)&&o(d)&&o(f)&&w(b)})}M(r,g),_e()}var Hd=Ee('<text text-anchor="middle"><!></text>'),Gd=Ee("<text><!></text>"),Kd=Ee("<text><!></text>"),Jd=Ee('<g class="tick-labels"><!></g>');function Ec(r,e){we(e,!0);let t=B(e,"pos",3,1),s=B(e,"las",3,1),l=S(()=>["middle","middle","start","middle","end"][t()]),a=S(()=>`fill:${e.textColor};`);const c=Jt("axes");let v=S(()=>bt(e.tickCoords[1][0],c.tX())),u=S(()=>bt(e.tickCoords[1][1],c.tY())),f=S(()=>Bl[c.scales().plot]),d=S(()=>[0,0,o(f),0,-o(f)][t()]),m=S(()=>[0,o(f),0,-o(f),0][t()]);var h=Jd(),g=R(h);{var p=w=>{var _=be(),A=J(_);$e(A,17,()=>o(v),nt,(E,k,C)=>{var N=Hd();F(N,"data-id",C),F(N,"dx",0);var L=R(N);zt(L,()=>e.tickLabels[C],!0),Z(()=>{F(N,"x",o(v)[C]),F(N,"y",o(u)[C]),F(N,"dy",o(d)*1.25),F(N,"transform",`rotate(-90, ${o(v)[C]}, ${o(u)[C]})`)}),M(E,N)}),M(w,_)},b=w=>{var _=be(),A=J(_);{var E=C=>{var N=be(),L=J(N);$e(L,17,()=>o(v),nt,(q,T,j)=>{var y=Gd();F(y,"data-id",j),F(y,"dy",0),F(y,"text-anchor","end");var z=R(y);zt(z,()=>e.tickLabels[j],!0),Z(()=>{F(y,"x",o(v)[j]),F(y,"y",o(u)[j]),F(y,"dx",-o(m)/2),F(y,"transform",`rotate(-90, ${o(v)[j]}, ${o(u)[j]})`)}),M(q,y)}),M(C,N)},k=C=>{var N=be(),L=J(N);$e(L,17,()=>o(v),nt,(q,T,j)=>{var y=Kd();F(y,"data-id",j);var z=R(y);zt(z,()=>e.tickLabels[j],!0),Z(()=>{F(y,"x",o(v)[j]),F(y,"y",o(u)[j]),F(y,"dx",o(d)),F(y,"dy",o(m)),F(y,"text-anchor",o(l))}),M(q,y)}),M(C,N)};Y(A,C=>{s()===2&&t()===1?C(E):C(k,!1)},!0)}M(w,_)};Y(g,w=>{s()===2&&t()===4?w(p):w(b,!1)})}Z(()=>pt(h,o(a))),M(r,h),_e()}const Xd=(r,e=Ot,t=Ot)=>{const s=S(()=>e().colmap.length);var l=nh(),a=J(l);$e(a,17,()=>e().colmap,nt,(d,m,h)=>{const g=S(()=>t().start+h*t().width);var p=eh(),b=J(p),w=P(b);F(w,"dy",0);var _=R(w);zt(_,()=>e().labels[h],!0),Z(()=>{F(b,"x",o(g)),F(b,"y",t().top),F(b,"width",t().width),F(b,"height",t().height),F(b,"fill",o(m)),F(w,"x",o(g)),F(w,"y",t().ltop),F(w,"dx",t().dxl),F(w,"fill",e().labelColor),F(w,"font-size",e().fontSize+"em")}),M(d,p)});var c=P(a);{var v=d=>{const m=S(()=>t().start+o(s)*t().width);var h=th();F(h,"dx",0),F(h,"dy",0);var g=R(h);zt(g,()=>e().labels[o(s)],!0),Z(()=>{F(h,"x",o(m)),F(h,"y",t().ltop),F(h,"fill",e().labelColor),F(h,"font-size",`${e().fontSize??""}em`)}),M(d,h)};Y(c,d=>{e().isCentered||d(v)})}var u=P(c);{var f=d=>{const m=S(()=>t().start+o(s)*t().width);var h=rh(),g=R(h);zt(g,()=>Vl(e().labelsFactor),!0),Z(()=>{F(h,"x",o(m)),F(h,"y",t().ltop),F(h,"fill",e().labelColor),F(h,"font-size",`${e().fontSize??""}em`)}),M(d,h)};Y(u,d=>{e().labelsFactor!==0&&d(f)})}M(r,l)};var Qd=Ee('<text fill="crimson" text-anchor="middle"> </text>'),Zd=Ee('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),$d=Ee("<!><!><!><!><!>",1),eh=Ee('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),th=Ee('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),rh=Ee('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),nh=Ee("<!><!><!>",1),sh=Ee("<line></line>"),oh=Ee('<text dominant-baseline="middle" text-anchor="middle"> </text>'),lh=Ee('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),ah=Ee('<svg><rect height="100%" width="100%"></rect><!></svg>'),ih=Ee('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),ch=Ee('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),uh=Ee('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),fh=Ee('<g class="plot-labels"><!><!><!></g>'),vh=Ee('<g class="axis x-axis"><!></g>'),dh=Ee('<g class="axis y-axis"><!></g>'),hh=Ee('<rect fill="transparent" id="axes-box"></rect>'),mh=Ee('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),gh=Ee('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),ph=Ee('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),bh=Ee('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),wh=K('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),_h=K('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),yh=K(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Ac(r,e){we(e,!0);const t=(ye,Je=Ot,Ge=Ot)=>{var Vt=be(),tr=J(Vt);{var Cr=Ft=>{var at=be(),Xe=J(at);{var Ht=Mt=>{var mt=Qd(),Or=R(mt);Z(()=>{F(mt,"x",o(Pe)[0]-10),F(mt,"y",o(Ve)),F(mt,"transform",`rotate(-90, ${o(Pe)[0]-10}, ${o(Ve)})`),pe(Or,Ge().error)}),M(Mt,mt)},Tt=Mt=>{var mt=Zd(),Or=R(mt);Z(()=>{F(mt,"x",o(qe)),F(mt,"y",o(Oe)[0]),pe(Or,Ge().error)}),M(Mt,mt)};Y(Xe,Mt=>{Ge().pos===4?Mt(Ht):Mt(Tt,!1)})}M(Ft,at)},yn=Ft=>{var at=$d(),Xe=J(at);{var Ht=Se=>{Gl(Se,{get lineCoords(){return Je().grid},get lineColor(){return Rt.MIDDLEGRAY},lineType:3})};Y(Xe,Se=>{Ge().showGrid&&Se(Ht)})}var Tt=P(Xe);Gl(Tt,{get lineCoords(){return Je().axisLine},get lineColor(){return Rt.DARKGRAY},lineType:1});var Mt=P(Tt);Gl(Mt,{get lineCoords(){return Je().tickCoords},get lineColor(){return Rt.DARKGRAY},lineType:1});var mt=P(Mt);{var Or=Se=>{Ec(Se,{get las(){return Ge().las},get pos(){return Ge().pos},get tickCoords(){return Je().tickCoords},get tickLabels(){return Je().tickLabels},get tickColor(){return Rt.DARKGRAY},get hideLast(){return Ge().hideLast}})};Y(mt,Se=>{Je().tickCoords.length===2&&Je().tickLabels.length===Je().tickCoords[1][0].length&&Se(Or)})}var eo=P(mt);{var et=Se=>{{let Gt=S(()=>[Je().tfLabel]);Ec(Se,{get pos(){return Ge().pos},get tickCoords(){return Je().tfCoords},get tickLabels(){return o(Gt)},get textColor(){return Rt.DARKGRAY}})}};Y(eo,Se=>{Je().tickFactor!==0&&Se(et)})}M(Ft,at)};Y(tr,Ft=>{Ge().error?Ft(Cr):Ft(yn,!1)})}M(ye,Vt)},s=(ye,Je=Ot,Ge=Ot)=>{const Vt=S(()=>Ge().elw+2*Ge().elp),tr=S(()=>Ge().elp),Cr=S(()=>Ge().elh),yn=S(()=>Ge().ely);var Ft=ah(),at=R(Ft),Xe=P(at);$e(Xe,17,()=>Je().items,nt,(Ht,Tt,Mt)=>{var mt=lh();F(mt,"x",0);var Or=R(mt);{var eo=Xn=>{var qt=sh();Z(()=>{F(qt,"x1",o(tr)),F(qt,"x2",o(Vt)-o(tr)),F(qt,"y1",o(Cr)[Mt]/2),F(qt,"y2",o(Cr)[Mt]/2),F(qt,"stroke",o(Tt).line.lineColor),F(qt,"stroke-width",o(Tt).line.lineWidth),F(qt,"stroke-dasharray",o(te)[o(Tt).line.lineType-1])}),M(Xn,qt)};Y(Or,Xn=>{o(Tt).line&&Xn(eo)})}var et=P(Or);{var Se=Xn=>{var qt=oh(),um=R(qt);Z(()=>{F(qt,"x",o(Vt)/2),F(qt,"y",o(Cr)[Mt]/2),F(qt,"fill",o(Tt).point.faceColor),F(qt,"stroke-width",o(Tt).point.lineWidth),F(qt,"stroke",o(Tt).point.lineColor),F(qt,"font-size",`${o(Tt).point.markerSize??""}em`),pe(um,hs[o(Tt).point.marker-1])}),M(Xn,qt)};Y(et,Xn=>{o(Tt).point&&Xn(Se)})}var Gt=P(et),cm=R(Gt);zt(cm,()=>o(Tt).label,!0),Z(()=>{F(mt,"y",o(yn)[Mt]),F(mt,"width",Ge().lgw),F(mt,"height",o(Cr)[Mt]),F(Gt,"x",o(Vt)+o(tr)),F(Gt,"y",o(Cr)[Mt]/2),F(Gt,"fill",Rt.LEGEND),F(Gt,"font-size",`${Je().fontSize??""}em`)}),M(Ht,mt)}),Z(()=>{F(Ft,"x",Ge().lgl),F(Ft,"y",Ge().lgt),F(Ft,"height",Ge().lgh),F(Ft,"width",Ge().lgw),F(at,"fill",Je().faceColor),F(at,"stroke",Je().lineColor),F(at,"stroke-width",Je().lineWidth)}),M(ye,Ft)};let l=B(e,"limX",19,()=>[0,1]),a=B(e,"limY",19,()=>[0,1]),c=B(e,"margins",19,()=>[1,1.1,.55,.6]),v=B(e,"downloadLinks",3,"none"),u=B(e,"fileName",3,"plot"),f=B(e,"pngWidth",3,8),d=B(e,"pngHeight",3,8),m=B(e,"pngRes",3,300),h=B(e,"clipboardWidth",3,1200),g=B(e,"clipboardHeight",3,800),p=B(e,"onclick",3,null),b=B(e,"onmousemove",3,null),w=B(e,"onmousedown",3,null),_=B(e,"onmouseup",3,null);function A(ye,Je){if(Je&&ye.target.id=="axes-box"){const Ge=wc([ye.offsetX-o(ne)],o(De))[0],Vt=wc([ye.offsetY-o(se)],o(Fe))[0];Je(Ge,Vt)}}function E(ye){ye.preventDefault(),A(ye,w())}function k(ye){ye.preventDefault(),A(ye,_())}function C(ye){ye.preventDefault(),A(ye,b())}function N(ye){ye.preventDefault(),A(ye,p())}async function L(ye){Rd(ye.target,o(y),h(),g())}function q(){zd(o(y),u())}function T(){Ld(o(y),u(),f(),d(),m())}const j="plottingArea"+Math.round(Math.random()*1e4);let y=re(0),z=re(0),V=re(0);const D=S(()=>({plot:Md(o(z),o(V)),x:kc(o(z)),y:kc(o(V))})),I=S(()=>c().map(ye=>ye*yd[o(D).plot])),W=S(()=>Ed[o(D).plot]),le=S(()=>Ol[o(D).plot]),te=S(()=>Js[o(D).plot]),Q=S(()=>o($).show&&o($).label!==""?o(W)*1.5:0),ne=S(()=>o(ve).show&&o(ve).label!==""?o(W)*1.5:0),se=S(()=>e.title&&e.title!==""?o(W)*1.5:0),he=S(()=>o(z)>o(ne)?o(z)-o(ne):0),fe=S(()=>o(V)>o(Q)+o(se)?o(V)-o(Q)-o(se):0),ee=S(()=>o(fe)-o(I)[0]-o(I)[2]),oe=S(()=>o(he)-o(I)[1]-o(I)[3]),Ae=S(()=>gc(l(),2)&&gc(a(),2)&&o(he)>o(I)[1]+o(I)[3]&&o(fe)>o(I)[0]+o(I)[2]),De=S(()=>o(Ae)?{coords:[o(oe)/(l()[1]-l()[0]),l()[0],o(I)[1]],objects:[o(oe)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Fe=S(()=>o(Ae)?{coords:[-o(ee)/(a()[1]-a()[0]),a()[1],o(I)[2]],objects:[o(ee)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Ve=S(()=>o(ee)*.5+o(se)+o(I)[2]),qe=S(()=>o(oe)*.5+o(ne)+o(I)[1]),Pe=S(()=>o(Ae)?bt(l(),o(De)):[0,1]),Oe=S(()=>o(Ae)?bt(a(),o(Fe)):[1,0]),lt=S(()=>hn(e.title)),ie=S(()=>o(lt)?o(lt).length===e.title.left?1:1.4:0);let ae=re(Ne({show:!1})),$=re(Ne({show:!1,error:""})),ve=re(Ne({show:!1,error:""})),ke=re(Ne({show:!1,colmap:null,breaks:null})),ce=re(Ne({show:!1,items:null,position:null}));const ze=S(()=>o(Ae)&&o(ke)&&o(ke).show?Od(o(ke)):null),Le=S(()=>o(Ae)&&o($).show?Fd(l(),a(),o(D),o(Fe),o($)):null),Ye=S(()=>o(Ae)&&o(ve).show?qd(l(),a(),o(D),o(De),o(ve)):null),Qe=S(()=>o(Ae)&&o(ze)?Bd(o(ze),o(oe),o(I),o(D)):null),St=S(()=>o(Ae)&&o(ce)&&o(ce).show&&o(Pe)?Yd(o(ce),o(Pe),o(Oe),o(W),o(le)):null);yu("axes",{setBox:ye=>O(ae,ye,!0),setXAxis:ye=>O($,ye,!0),setYAxis:ye=>O(ve,ye,!0),setColmapLegend:ye=>O(ke,ye,!0),setGroupLegend:ye=>O(ce,ye,!0),scales:()=>o(D),tX:()=>o(De),tY:()=>o(Fe),limX:()=>l(),limY:()=>a()});var vt=yh();let G;var U=R(vt),X=P(R(U));{var de=ye=>{var Je=fh(),Ge=R(Je);{var Vt=at=>{var Xe=ih();F(Xe,"dx",0),F(Xe,"dy",0);var Ht=R(Xe);zt(Ht,()=>o($).label,!0),Z(()=>{F(Xe,"x",o(qe)),F(Xe,"y",o(fe)+o(se))}),M(at,Xe)};Y(Ge,at=>{o($).show&&o($).label&&o($).label!==""&&at(Vt)})}var tr=P(Ge);{var Cr=at=>{var Xe=ch();F(Xe,"dx",0),F(Xe,"dy",0);var Ht=R(Xe);zt(Ht,()=>o(ve).label,!0),Z(()=>{F(Xe,"x",o(W)/1.1*o(ve).labelHeight),F(Xe,"y",o(Ve)),F(Xe,"transform",`rotate(-90, ${o(W)*o(ve).labelHeight/1.1}, ${o(Ve)})`)}),M(at,Xe)};Y(tr,at=>{o(ve).show&&o(ve).label&&o(ve).label!==""&&at(Cr)})}var yn=P(tr);{var Ft=at=>{var Xe=uh();F(Xe,"dx",0),F(Xe,"dy",0);var Ht=R(Xe);zt(Ht,()=>o(lt),!0),Z(()=>{F(Xe,"x",o(qe)),F(Xe,"y",o(W)*o(ie))}),M(at,Xe)};Y(yn,at=>{o(lt)&&o(lt)!==""&&at(Ft)})}M(ye,Je)};Y(X,ye=>{o(Ae)&&ye(de)})}var me=P(X),Ce=R(me),Te=R(Ce),It=R(Te),qr=P(Ce);{var xt=ye=>{var Je=bh(),Ge=J(Je);{var Vt=et=>{var Se=vh(),Gt=R(Se);t(Gt,()=>o(Le),()=>o($)),M(et,Se)};Y(Ge,et=>{o($).show&&o(Le)&&et(Vt)})}var tr=P(Ge);{var Cr=et=>{var Se=dh(),Gt=R(Se);t(Gt,()=>o(Ye),()=>o(ve)),M(et,Se)};Y(tr,et=>{o(ve).show&&o(Ye)&&et(Cr)})}var yn=P(tr),Ft=R(yn);{var at=et=>{var Se=hh();Se.__keydown=N,Se.__click=N,Se.__mousemove=C,Se.__mousedown=E,Se.__mouseup=k,Z(()=>{F(Se,"stroke",o(ae).lineColor),F(Se,"stroke-width",`${o(ae).lineWidth??""}px`),F(Se,"x",o(Pe)[0]),F(Se,"y",o(Oe)[1]),F(Se,"width",o(Pe)[1]-o(Pe)[0]),F(Se,"height",o(Oe)[0]-o(Oe)[1])}),M(et,Se)},Xe=et=>{var Se=mh();Se.__keydown=N,Se.__click=N,Se.__mousemove=C,Se.__mousedown=E,Se.__mouseup=k,Z(()=>{F(Se,"x",o(Pe)[0]),F(Se,"y",o(Oe)[1]),F(Se,"width",o(Pe)[1]-o(Pe)[0]),F(Se,"height",o(Oe)[0]-o(Oe)[1])}),M(et,Se)};Y(Ft,et=>{o(ae).show?et(at):et(Xe,!1)})}var Ht=P(yn),Tt=R(Ht);Gr(Tt,()=>e.children??Ot);var Mt=P(Ht);{var mt=et=>{var Se=gh(),Gt=R(Se);Xd(Gt,()=>o(ze),()=>o(Qe)),M(et,Se)};Y(Mt,et=>{o(Qe)&&et(mt)})}var Or=P(Mt);{var eo=et=>{var Se=ph(),Gt=R(Se);s(Gt,()=>o(ce),()=>o(St)),M(et,Se)};Y(Or,et=>{o(St)&&et(eo)})}Z(()=>F(Ht,"clip-path",`url(#${j})`)),M(ye,Je)};Y(qr,ye=>{o(Ae)&&ye(xt)})}Ln(U,ye=>O(y,ye),()=>o(y));var Ze=P(U,2);{var ot=ye=>{var Je=wh();M(ye,Je)},wt=ye=>{var Je=_h(),Ge=R(Je);Ge.__click=q,Ge.__keydown=q;var Vt=P(Ge,2);Vt.__click=T,Vt.__keydown=T;var tr=P(Vt,2);tr.__click=L,tr.__keydown=L,M(ye,Je)};Y(Ze,ye=>{o(Ae)?ye(wt,!1):ye(ot)})}Z(()=>{G=yt(vt,1,`plot-container show-download-links-${v()??""}`,"svelte-1t5q9z1",G,{"plot-error":!o(Ae)}),pt(U,`font-size:${o(W)??""}px`),F(me,"x",o(ne)),F(me,"y",o(se)),F(me,"width",o(he)),F(me,"height",o(fe)),F(Te,"id",j),F(It,"x",o(Pe)[0]),F(It,"y",o(Oe)[1]),F(It,"width",o(Pe)[1]-o(Pe)[0]),F(It,"height",o(Oe)[0]-o(Oe)[1])}),bi(U,"clientWidth",ye=>O(z,ye)),bi(U,"clientHeight",ye=>O(V,ye)),M(r,vt),_e()}ct(["keydown","click","mousemove","mousedown","mouseup"]);function Cc(r,e){we(e,!0);let t=B(e,"tickLabels",7),s=B(e,"las",3,1),l=B(e,"whole",3,!1),a=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const v=Jt("axes");ge(()=>{const u=hn(e.label),f=u?u.length===e.label.length?1:1.4:0;let d,m="";e.ticks&&([d,m]=xc(e.ticks,v.limX())),!m&&t()&&(h=>{var g=qo(h,2);t(g[0]),m=g[1]})(yc(t(),d)),v.setXAxis({show:a(),error:m,label:u,ticks:d,labelHeight:f,showGrid:c(),las:s(),whole:l(),tickLabels:t()})}),_e()}function Sc(r,e){we(e,!0);let t=B(e,"tickLabels",7),s=B(e,"las",3,1),l=B(e,"whole",3,!1),a=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const v=Jt("axes");ge(()=>{const u=hn(e.label),f=u?u.length===e.label.length?1:1.4:0;let d,m="";e.ticks&&([d,m]=xc(e.ticks,v.limY())),!m&&t()&&(h=>{var g=qo(h,2);t(g[0]),m=g[1]})(yc(t(),d)),v.setYAxis({show:a(),error:m,label:u,ticks:d,labelHeight:f,showGrid:c(),las:s(),whole:l(),tickLabels:t(),pos:4})}),_e()}function Mc(r,e){we(e,!0);let t=B(e,"lineWidth",3,1),s=B(e,"lineColor",3,"#606060");const l=Jt("axes");ge(()=>{l.setBox({show:!0,lineWidth:t(),lineColor:s()})}),_e()}var xh=Ee("<rect></rect>"),kh=Ee("<g></g>");function Co(r,e){we(e,!0);let t=B(e,"faceColor",19,()=>Rt.PRIMARY),s=B(e,"lineColor",19,t),l=B(e,"lineWidth",3,1),a=B(e,"className",3,"series-rect");const c=S(()=>Ut(e.left,"Rectangles (left)")),v=S(()=>o(c)?Ut(e.top,"Rectangles (top)",o(c).length):null),u=S(()=>o(v)?typeof e.width!="object"?He.fill(e.width,o(c).length):e.width:null),f=S(()=>o(v)?typeof e.height!="object"?He.fill(e.height,o(c).length):e.height:null),d=Jt("axes"),m=S(()=>o(c)?bt(o(c),d.tX()):null),h=S(()=>o(v)?bt(o(v),d.tY()):null),g=S(()=>o(u)?Dl(o(u),d.tX()):null),p=S(()=>o(f)?Dl(o(f),d.tY()):null),b=S(()=>`fill:${t()};stroke:${s()};stroke-width:${l()}px;`),w=S(()=>o(m)&&o(h)&&o(g)&&o(p)&&o(g).length===o(m).length&&o(p).length===o(m).length);var _=be(),A=J(_);{var E=k=>{var C=kh();C.__click=N=>Vn(N,"rect",e.onclick),$e(C,21,()=>e.left,nt,(N,L,q)=>{var T=xh();Z(()=>{F(T,"x",o(m)[q]),F(T,"y",o(h)[q]),F(T,"width",o(g)[q]),F(T,"height",o(p)[q])}),M(N,T)}),Z(()=>{yt(C,0,`series ${a()??""}`),pt(C,o(b))}),M(k,C)};Y(A,k=>{o(w)&&k(E)})}M(r,_),_e()}ct(["click"]);var Eh=Ee("<line></line>"),Ah=Ee('<g class="series series-segment"></g>');function Ch(r,e){we(e,!0);let t=B(e,"lineColor",19,()=>Rt.PRIMARY),s=B(e,"lineType",3,1),l=B(e,"lineWidth",3,1);const a=S(()=>Ut(e.xStart,"Segments")),c=S(()=>o(a)?Ut(e.yStart,"Segments",o(a).length):null),v=S(()=>o(c)?Ut(e.xEnd,"Segments",o(a).length):null),u=S(()=>o(v)?Ut(e.yEnd,"Segments",o(a).length):null),f=Jt("axes"),d=S(()=>o(a)?bt(o(a),f.tX()):null),m=S(()=>o(v)?bt(o(v),f.tX()):null),h=S(()=>o(c)?bt(o(c),f.tY()):null),g=S(()=>o(u)?bt(o(u),f.tY()):null),p=S(()=>`stroke:${t()};stroke-width: ${l()}px;stroke-dasharray:${Js[f.scales().plot][s()-1]}`),b=S(()=>o(d)&&o(m)&&o(h)&&o(g));var w=be(),_=J(w);{var A=E=>{var k=Ah();k.__click=C=>Vn(C,"line",e.onclick),$e(k,21,()=>o(d),nt,(C,N,L)=>{var q=Eh();Z(()=>{F(q,"x1",o(d)[L]),F(q,"x2",o(m)[L]),F(q,"y1",o(h)[L]),F(q,"y2",o(g)[L])}),M(C,q)}),Z(()=>pt(k,o(p))),M(E,k)};Y(_,E=>{o(b)&&E(A)})}M(r,w),_e()}ct(["click"]);var Sh=Ee("<text><!></text>"),Mh=Ee("<text><!></text>"),Nh=Ee("<text><!></text>"),jh=Ee('<g class="series series-textlabels"><!></g>');function So(r,e){we(e,!0);let t=B(e,"pos",3,0),s=B(e,"faceColor",19,()=>Rt.PRIMARY_TEXT),l=B(e,"lineColor",3,"transparent"),a=B(e,"lineWidth",3,0),c=B(e,"textSize",3,1),v=B(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],f=S(()=>Ut(e.xValues,"TextLabels")),d=S(()=>o(f)?Ut(e.yValues,"TextLabels",o(f).length):null),m=S(()=>o(d)?Array.isArray(e.labels)&&e.labels.length!==o(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=S(()=>o(m)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),g=Jt("axes"),p=S(()=>o(f)&&o(h)!==null?bt(o(f),g.tX()):null),b=S(()=>o(d)&&o(p)?bt(o(d),g.tY()):null),w=S(()=>Bl[g.scales().plot]),_=S(()=>[0,0,-o(w),0,o(w),o(w)]),A=S(()=>[0,o(w),0,-o(w),0,o(w)]),E=S(()=>`fill:${s()};stroke-width:${a()}px;stroke:${l()};font-size:${c()}em;`),k=S(()=>o(p)&&o(b)&&o(h)!==null&&o(m)&&o(p).length===o(b).length);var C=be(),N=J(C);{var L=q=>{var T=jh();T.__click=V=>Vn(V,"text",e.onclick);var j=R(T);{var y=V=>{var D=be(),I=J(D);$e(I,17,()=>o(p),nt,(W,le,te)=>{var Q=Sh();F(Q,"data-id",te);var ne=R(Q);zt(ne,()=>e.labels,!0),Z(()=>{F(Q,"x",o(p)[te]),F(Q,"y",o(b)[te]),F(Q,"dx",o(_)[t()]),F(Q,"dy",o(A)[t()]),F(Q,"transform",v()!==void 0?`rotate(${v()}, ${o(p)[te]+o(_)[t()]}, ${o(b)[te]+o(A)[t()]})`:""),F(Q,"text-anchor",u[t()[te]])}),M(W,Q)}),M(V,D)},z=V=>{var D=be(),I=J(D);{var W=te=>{var Q=be(),ne=J(Q);$e(ne,17,()=>o(p),nt,(se,he,fe)=>{var ee=Mh();F(ee,"data-id",fe);var oe=R(ee);zt(oe,()=>e.labels[fe],!0),Z(()=>{F(ee,"x",o(p)[fe]),F(ee,"y",o(b)[fe]),F(ee,"dx",o(_)[t()[fe]]),F(ee,"dy",o(A)[t()[fe]]),F(ee,"transform",v()!==void 0?`rotate(${v()}, ${o(p)[fe]+o(_)[t()]}, ${o(b)[fe]+o(A)[t()]})`:""),F(ee,"text-anchor",u[t()[fe]])}),M(se,ee)}),M(te,Q)},le=te=>{var Q=be(),ne=J(Q);$e(ne,17,()=>o(p),nt,(se,he,fe)=>{var ee=Nh();F(ee,"data-id",fe);var oe=R(ee);zt(oe,()=>e.labels[fe],!0),Z(()=>{F(ee,"x",o(p)[fe]),F(ee,"y",o(b)[fe]),F(ee,"dx",o(_)[t()]),F(ee,"dy",o(A)[t()]),F(ee,"transform",v()!==void 0?`rotate(${v()}, ${o(p)[fe]+o(_)[t()]}, ${o(b)[fe]+o(A)[t()]})`:""),F(ee,"text-anchor",u[t()])}),M(se,ee)}),M(te,Q)};Y(I,te=>{Array.isArray(t())||ArrayBuffer.isView(t())?te(W):te(le,!1)},!0)}M(V,D)};Y(j,V=>{typeof e.labels=="string"?V(y):V(z,!1)})}Z(()=>pt(T,o(E))),M(q,T)};Y(N,q=>{o(k)&&q(L)})}M(r,C),_e()}ct(["click"]),ct(["click"]);var Th=Ee("<text> </text>"),Ph=Ee('<g text-anchor="middle"></g>');function Lh(r,e){we(e,!0);let t=B(e,"marker",3,1),s=B(e,"faceColor",3,"transparent"),l=B(e,"lineColor",19,()=>Rt.PRIMARY),a=B(e,"lineWidth",3,1),c=B(e,"markerSize",3,1);const v=S(()=>typeof t()!="number"||t()<1||t()>hs.length?(console.error('Points: parameter "marker" must be a number from 1 to '+hs.length+"."),null):hs[t()-1]),u=S(()=>Ut(e.xValues,"Points")),f=S(()=>o(u)?Ut(e.yValues,"Points",o(u).length):null),d=Jt("axes"),m=S(()=>o(u)?bt(o(u),d.tX()):null),h=S(()=>o(m)&&o(f)?bt(o(f),d.tY()):null),g=S(()=>["＋","✳","✕"].includes(o(v))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${c()}em;`:`fill:${s()};stroke-width:${a()}px;stroke:${l()}; font-size:${c()}em;`),p=S(()=>["◼","⬥","＋","✳","✕"].includes(o(v))?"series-points2":"series-points1"),b=S(()=>o(m)&&o(h)&&o(m).length===o(h).length);var w=be(),_=J(w);{var A=E=>{var k=Ph();k.__click=C=>Vn(C,"text",e.onclick),$e(k,21,()=>o(m),nt,(C,N,L)=>{var q=Th(),T=R(q);Z(()=>{F(q,"x",o(m)[L]),F(q,"y",o(h)[L]),pe(T,o(v))}),M(C,q)}),Z(()=>{yt(k,0,`series series-points ${o(p)??""}`),pt(k,o(g))}),M(E,k)};Y(_,E=>{o(b)&&E(A)})}M(r,w),_e()}ct(["click"]);var zh=Ee('<g class="series series-line"><polyline class="line"></polyline></g>');function mn(r,e){we(e,!0);let t=B(e,"lineColor",19,()=>Rt.PRIMARY),s=B(e,"lineType",3,1),l=B(e,"lineWidth",3,1);const a=S(()=>Ut(e.xValues,"Lines")),c=S(()=>o(a)?Ut(e.yValues,"Lines",o(a).length):null),v=Jt("axes"),u=S(()=>o(a)&&o(c)?Wl(o(a),o(c),v.tX(),v.tY()):null),f=S(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${Js[v.scales().plot][s()-1]}`);var d=be(),m=J(d);{var h=g=>{var p=zh();p.__click=w=>Vn(w,"polyline",e.onclick);var b=R(p);Z(()=>{pt(p,o(f)),F(b,"points",o(u))}),M(g,p)};Y(m,g=>{o(u)&&g(h)})}M(r,d),_e()}ct(["click"]);var Rh=Ee('<polyline class="line"></polyline>'),Ih=Ee('<g class="series series-multiline"></g>');function Nc(r,e){we(e,!0);let t=B(e,"lineColor",19,()=>Rt.PRIMARY),s=B(e,"lineType",3,1),l=B(e,"lineWidth",3,1);const a=S(()=>Ut(e.xValues,"Multilines")),c=S(()=>o(a)?un(e.yValues)?(o(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),v=Jt("axes"),u=S(()=>{if(!o(a)||!o(c))return null;const g=new Array(o(c).ncols);for(let p=0;p<g.length;p++)g[p]=Wl(o(a),o(c).getcolumn(p+1),v.tX(),v.tY());return g}),f=S(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${Js[v.scales().plot][s()-1]}`);var d=be(),m=J(d);{var h=g=>{var p=Ih();p.__click=b=>Vn(b,"polyline",e.onclick),$e(p,21,()=>o(u),nt,(b,w)=>{var _=Rh();Z(()=>F(_,"points",o(w))),M(b,_)}),Z(()=>pt(p,o(f))),M(g,p)};Y(m,g=>{o(u)&&o(u).length>0&&g(h)})}M(r,d),_e()}ct(["click"]);function Fh(r,e){we(e,!0);let t=B(e,"show",3,!0),s=B(e,"position",3,"topleft"),l=B(e,"lineColor",19,()=>Rt.LEGEND),a=B(e,"lineWidth",3,1),c=B(e,"faceColor",3,"#fff"),v=B(e,"fontSize",3,.85);function u(m){return typeof m!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(m)?m:(console.error('Legend: wrong value of "position" property'),null)}function f(m){if(!m||!Array.isArray(m)||m.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let h=0;h<m.length;h++){const g=m[h];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=hn(g.label),b=p.length===g.label?1:1.4;g.label=p,g.labelHeight=b,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(h+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:Rt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=hs.length||console.error('Legend: parameter "marker" for legend item '+(h+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.markerSize=g.point.markerSize?g.point.markerSize:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:Rt.PRIMARY)}return m}const d=Jt("axes");ge(()=>{const m=f(e.items),h=u(s());d.setGroupLegend(m&&h?{show:t(),position:s(),items:e.items,lineColor:l(),faceColor:c(),lineWidth:a(),fontSize:v()}:{show:!1,position:null,items:null})}),_e()}function jc(r,e){we(e,!0);let t=B(e,"show",3,!0),s=B(e,"labels",3,null),l=B(e,"labelColor",19,()=>Rt.CLEGEND_LABELS),a=B(e,"fontSize",3,.85);const c=Jt("axes");ge(()=>{c.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:l(),fontSize:a()})}),_e()}const qh=[1,1.1,.45,.4],gn={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",alien:"#2679B2",external:"#D22C2F"},Kl={cal:1,pv:2,test:2,new:2},Yn={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},Oh={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Jl={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},Tc="#a0a0a0",Pc="#909090",Lc=8,Bh=8,Dh=8,Vh=600;function Yh(r,e){if(r.length===e.length)return r;const t=e.length,s=new r.constructor(t);for(let l in e)s[l]=r[e[l]];return s}function Wh(r,e){let t=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(let c=0;c<r.length;c++)s=Math.min(s,r[c]),t=Math.max(t,r[c]);let l=Ul(void 0,[s,t],e-1,!0,!1,0).v;const a=l[1]-l[0];if(l[0]>s){const c=l[0]-a;l=[c<s?c:s,...l]}if(l[l.length-1]<t){const c=l[l.length-1]+a;l=[...l,c>t?c:t]}return l}function Uh(r){const e=r.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const t=Ao(e);return r.reduce((l,a,c)=>(l[a]=t[c],l),{})}function zc(r,e,t){const s=e.length,l=new Array(r.length),a=e[1]-e[0];for(let c=0;c<r.length;c++)for(let v=0;v<s-1;v++){const u=r[c]>=e[v],f=v===s-2?r[c]<e[v+1]+a:r[c]<e[v+1];if(u&&f){l[c]=t[v];break}}return l}function Hh(r,e,t,s,l="cal",a){if(!e)return null;let c,v,u,f,d,m,h=!0;if((t==="groups"||t==="classes")&&e.classNames){const g=Uh(e.classNames);v=Object.keys(g).map(p=>g[p]),c=e.classNames,f=e.classes.map(p=>g[p]),u=new Array(c.length+1).map((p,b)=>b-.5),d=null}else if(t==="variable"){const g=Yh(r.values.getcolref(s),e.objindices);d=r.varlabels[s-1],d.length>30&&(d=d.substring(0,29)+"..."),u=Wh(g,10),v=Ao(u.length-1),f=zc(g,u,v)}else if(a){const g=a.values;c=a.labels;const p=a.classColmap;v=Object.keys(p).map(b=>p[b]),f=g.map(b=>p[b]),u=new Array(c.length+1).map((b,w)=>w-.5),d=null,a.filled&&a.filled.length===g.length&&(m=a.filled),a.showBar!==void 0&&(h=a.showBar)}else c=null,u=null,v=null,f=Array(e.nrows).fill(Yn[l]);return{labels:c,map:v,breaks:u,colors:f,varname:d,filled:m,showBar:h,mainColor:Yn[l],faceColor:Oh[l],faceTColor:Jl[l]}}function Gh(r,e,t,s){if(!r)return null;const l=r.length;let a=He.zeros(l),c=Number.NEGATIVE_INFINITY,v=Number.POSITIVE_INFINITY;if(s==="log")for(let u=0;u<l;u++){const f=Math.log(1+r[u]/t);a.v[u]=f,c=Math.max(c,f),v=Math.min(v,f)}else for(let u=0;u<l;u++){const f=r[u]/t;a.v[u]=f,c=Math.max(c,f),v=Math.min(v,f)}return{values:a,min:v,max:c}}var Kh=K("<!> <!>",1),Jh=K("<!> <!>",1),Xh=K("<!> <!>",1),Qh=K("<!> <!> <!> <!> <!> <!> <!> <!>",1),Zh=K("<h2>Plot settings</h2>"),$h=K('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),e1=K('<div class="plot-panel svelte-5p9gcx"><!></div>');function t1(r,e){we(e,!0);let t=re(!0),s=re("none"),l=re(!1);const a=S(()=>(o(t)?"Preprocessed":"Raw")+" data (selected rows)"),c=S(()=>o(t)&&e.prepdata?e.prepdata:e.rawdata),v=S(()=>o(c)?o(c).varaxisLabel:"Variables"),u=S(()=>e.rawdata.varaxisUnits),f=S(()=>e.left>=0||e.right>0&&e.right<o(c).values.nrows),d=S(()=>e.left>=0?e.left+1:1),m=S(()=>e.right>0&&e.right<o(c).values.nrows?e.right:o(c).values.nrows),h=S(()=>o(t)&&o(c)&&o(f)?Zt.seq(o(d),o(m)):null),g=S(()=>o(h)?o(c).varvalues.filter((q,T)=>T>=o(d)-1&&T<o(m)):o(c).varvalues),p=S(()=>o(h)?o(c).values.subset(o(h),null):o(c).values),b=S(()=>o(p)?cl(o(p).v):null),w=S(()=>o(b)?(o(b)[1]-o(b)[0])*.05:null),_=S(()=>o(b)?[o(b)[0],o(b)[1]+(o(s)!=="none")*o(w)]:[0,1]),A=S(()=>o(c)?cl(o(c).varvalues,o(l)?.005:.1):[0,1]),E=S(()=>o(l)&&o(f)?[o(c).varvalues[o(d)-1],o(c).varvalues[o(m)-1]]:o(A)),k=S(()=>{if(!e.rawdata)return null;const q={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const T=Ao(e.rawdata.classNames.length);q.groups={colors:e.rawdata.classes.map(j=>T[e.rawdata.classNames.findIndex(y=>y===j)]),breaks:Zr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:T}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const T=yi(e.rawdata.resp,8),j=Ao(T.length-1);q.response={colors:zc(e.rawdata.resp.v,T.v,j),labels:null,breaks:T,map:j}}return q});ge(()=>{(e.left<1||e.right<1||e.right>=e.left)&&O(l,!1)});var C=e1(),N=R(C);{var L=q=>{var T=$h(),j=J(T),y=R(j),z=R(y);Ac(z,{get title(){return o(a)},get limY(){return o(_)},get limX(){return o(E)},fileName:"plot-preprocessed",children:(ne,se)=>{var he=Qh(),fe=J(he);{var ee=$=>{Nc($,{get xValues(){return o(g)},get yValues(){return o(p)}})},oe=$=>{var ve=be(),ke=J(ve);$e(ke,17,()=>o(k)[o(s)].colors,nt,(ce,ze,Le)=>{{let Ye=S(()=>o(p).getcolumn(Le+1));mn(ce,{get xValues(){return o(g)},get yValues(){return o(Ye)},get lineColor(){return o(ze)}})}}),M($,ve)};Y(fe,$=>{o(s)==="none"?$(ee):$(oe,!1)})}var Ae=P(fe,2);{var De=$=>{const ve=S(()=>o(c).varvalues[e.varind[0]]);var ke=Kh(),ce=J(ke);{let Le=S(()=>[o(ve),o(ve)]);mn(ce,{get xValues(){return o(Le)},get yValues(){return o(_)},lineColor:"#00000060"})}var ze=P(ce,2);{let Le=S(()=>[o(ve)]),Ye=S(()=>[o(_)[1]-o(w)*(o(s)==="none"?1:2)]),Qe=S(()=>hn(o(ve).toFixed(2)+" "+o(u)));So(ze,{get xValues(){return o(Le)},get yValues(){return o(Ye)},get labels(){return o(Qe)},textColor:"#a0a0a0",textSize:.8,pos:2})}M($,ke)};Y(Ae,$=>{e.varind&&e.varind[0]>0&&$(De)})}var Fe=P(Ae,2);{var Ve=$=>{const ve=S(()=>o(c).varvalues[e.varind[1]]);var ke=Jh(),ce=J(ke);{let Le=S(()=>[o(E)[0]]),Ye=S(()=>[o(c).varvalues[e.varind[1]]-o(E)[0]]),Qe=S(()=>[o(_)[1]]),St=S(()=>[o(_)[1]-o(_)[0]]);Co(ce,{get left(){return o(Le)},get width(){return o(Ye)},get top(){return o(Qe)},get height(){return o(St)},lineColor:"transparent",faceColor:"#00000040"})}var ze=P(ce,2);{let Le=S(()=>[o(ve)]),Ye=S(()=>[o(_)[1]-o(w)*(o(s)==="none"?1:2)]),Qe=S(()=>hn(o(ve).toFixed(2)+" "+o(u)));So(ze,{get xValues(){return o(Le)},get yValues(){return o(Ye)},get labels(){return o(Qe)},textColor:"#a0a0a0",textSize:.8,pos:2})}M($,ke)};Y(Fe,$=>{e.varind&&e.varind[1]>0&&$(Ve)})}var qe=P(Fe,2);{var Pe=$=>{const ve=S(()=>o(c).varvalues[e.varind[2]-1]);var ke=Xh(),ce=J(ke);{let Le=S(()=>[o(c).varvalues[e.varind[2]-1]]),Ye=S(()=>[o(E)[1]-o(c).varvalues[e.varind[2]-1]]),Qe=S(()=>[o(_)[1]]),St=S(()=>[o(_)[1]-o(_)[0]]);Co(ce,{get left(){return o(Le)},get width(){return o(Ye)},get top(){return o(Qe)},get height(){return o(St)},lineColor:"transparent",faceColor:"#00000040"})}var ze=P(ce,2);{let Le=S(()=>[o(ve)]),Ye=S(()=>[o(_)[1]-o(w)*(o(s)==="none"?1:2)]),Qe=S(()=>hn(o(ve).toFixed(2)+" "+o(u)));So(ze,{get xValues(){return o(Le)},get yValues(){return o(Ye)},get labels(){return o(Qe)},textColor:"#a0a0a0",textSize:.8,pos:2})}M($,ke)};Y(qe,$=>{e.varind&&e.varind[2]<o(c).varvalues.length&&e.varind[2]>0&&$(Pe)})}var Oe=P(qe,2);{let $=S(()=>o(s)!=="none");jc(Oe,{get show(){return o($)},get labels(){return o(k)[o(s)].labels},get breaks(){return o(k)[o(s)].breaks},get colmap(){return o(k)[o(s)].map}})}var lt=P(Oe,2);Cc(lt,{get label(){return o(v)},showGrid:!0});var ie=P(lt,2);Sc(ie,{showGrid:!0});var ae=P(ie,2);Mc(ae,{}),M(ne,he)},$$slots:{default:!0}});var V=P(j,2),D=R(V);ue(D,{label:"",children:(ne,se)=>{var he=Zh();M(ne,he)},$$slots:{default:!0}});var I=P(D,2);ue(I,{label:"Show",children:(ne,se)=>{Bn(ne,{options:["raw","preprocessed"],get value(){return o(t)},set value(he){O(t,he,!0)}})},$$slots:{default:!0}});var W=P(I,2);{var le=ne=>{ue(ne,{label:"Color by",children:(se,he)=>{{let fe=S(()=>Object.keys(o(k)));Et(se,{get options(){return o(fe)},get value(){return o(s)},set value(ee){O(s,ee,!0)}})}},$$slots:{default:!0}})};Y(W,ne=>{Object.keys(o(k)).length>1&&ne(le)})}var te=P(W,2);{var Q=ne=>{ue(ne,{label:"Zoom (x-axis)",children:(se,he)=>{Bn(se,{options:["off","on"],get value(){return o(l)},set value(fe){O(l,fe,!0)}})},$$slots:{default:!0}})};Y(te,ne=>{e.left>0&&e.right>e.left&&ne(Q)})}M(q,T)};Y(N,q=>{o(g)&&o(p)&&q(L)})}M(r,C),_e()}var r1=K('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function n1(r,e){we(e,!0);let t=B(e,"left",15),s=B(e,"right",15),l=B(e,"prepobj",15),a=B(e,"meta",15),c=B(e,"finalize",3,null),v=re(Ne([-1,0,0])),u=re(null),f=re(null);function d(E){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E>=0&&E<k&&E<s()&&t(E)}function m(E){const k=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E<=k&&E>t()&&s(E)}var h=r1(),g=R(h),p=R(g),b=R(p);_d(b,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return t()},get right(){return s()},setLeft:d,",":!0,setRight:m,get finalize(){return c()},get varind(){return o(v)},set varind(E){O(v,E,!0)},get prepobj(){return l()},set prepobj(E){l(E)},get rawdataShort(){return o(u)},set rawdataShort(E){O(u,E,!0)},get prepdataShort(){return o(f)},set prepdataShort(E){O(f,E,!0)},get meta(){return a()},set meta(E){a(E)}});var w=P(g,2),_=R(w);{var A=E=>{t1(E,{get rawdata(){return o(u)},get prepdata(){return o(f)},get left(){return t()},get right(){return s()},get varind(){return o(v)}})};Y(_,E=>{o(u)&&E(A)})}M(r,h),_e()}var s1=K('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),o1=K("<!> <!> <!>",1),l1=K('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),a1=K("<!> <!> <!>",1),i1=K("<p><strong>Preprocessing model</strong></p>"),c1=K("<!> <!>",1),u1=K("<p> </p>"),f1=K('<div class="prep-widget"><!></div> <!> <!>',1);function v1(r,e){we(e,!0);let t=B(e,"prepType",15),s=B(e,"prepobj",15),l=B(e,"prepdata",15),a=B(e,"prepmodel",15),c=B(e,"prepmeta",15),v=re(!1),u=re(0),f=re(Ne(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),d=re("neutral"),m=re(""),h=re(void 0);async function g(z,V,D){!V||!z||V.length===0||O(h,e.WASM().then(I=>{O(d,"applying");const W=rc(I,z.values,z.nresp,V,!1,D);W.info=c(),a(W)}).catch(I=>{a(null),console.error(I),O(d,"error"),O(m,I,!0)}),!0)}async function p(z,V){if(!V||typeof V!="object"){l(null);return}if(Object.keys(V).length===0){l(z);return}O(h,e.WASM().then(D=>{O(d,"applying");const I=Us(D,z.values,z.nresp,V,!1,!1),W=Fl(Vo(z),I);l(Nl(W,V))}).catch(D=>{l(null),console.error(D),O(d,"error"),O(m,D,!0)}),!0)}function b(){t(null),l(null),a(null),s([]),O(u,0),O(f,e.rawdata.values.ncols-e.rawdata.nresp)}function w(){s()&&s().length>0?g(e.rawdata,s(),e.outliers):(t(null),a(null)),O(v,!1)}function _(){t("create"),l(null),a(null),O(v,!0)}function A(){t("skip"),a({})}ge(()=>{a(),e.rawdata&&p(e.rawdata,a())}),ge(()=>{t()==="create"&&s()&&!a()&&g(e.rawdata,s(),e.outliers)}),ge(()=>{t()==="skip"&&l()===null&&(a({}),s([]),l(e.rawdata))});var E=f1(),k=J(E),C=R(k);{var N=z=>{ue(z,{name:"info",children:(V,D)=>{var I=o1(),W=J(I);{var le=se=>{var he=s1(),fe=P(R(he),2);ql(fe,{get prepmodel(){return a()}}),M(se,he)};Y(W,se=>{o(v)||se(le)})}var te=P(W,2);{var Q=se=>{fc(se,{onclick:_})};Y(te,se=>{t()==="create"&&se(Q)})}var ne=P(te,2);dn(ne,{onclick:b}),M(V,I)},$$slots:{default:!0}})},L=z=>{var V=be(),D=J(V);{var I=le=>{ue(le,{name:"prep-info",children:(te,Q)=>{var ne=l1(),se=P(J(ne),2),he=R(se);dn(he,{onclick:b}),M(te,ne)},$$slots:{default:!0}})},W=le=>{var te=be(),Q=J(te);{var ne=he=>{ue(he,{label:"Preprocessing",name:"prep-container",children:(fe,ee)=>{var oe=a1(),Ae=J(oe);Nt(Ae,{text:"Skip",onclick:A});var De=P(Ae,2);Nt(De,{text:"Load",onclick:()=>t("file")});var Fe=P(De,2);Nt(Fe,{text:"Create",onclick:_}),M(fe,oe)},$$slots:{default:!0}})},se=he=>{var fe=be(),ee=J(fe);{var oe=Ae=>{var De=c1(),Fe=J(De);ue(Fe,{children:(qe,Pe)=>{var Oe=i1();M(qe,Oe)},$$slots:{default:!0}});var Ve=P(Fe,2);Kv(Ve,{get model(){return a()},set model(qe){a(qe)},get prepobj(){return s()},set prepobj(qe){s(qe)},get left(){return o(u)},set left(qe){O(u,qe,!0)},get right(){return o(f)},set right(qe){O(f,qe,!0)}}),M(Ae,De)};Y(ee,Ae=>{t()==="file"&&Ae(oe)},!0)}M(he,fe)};Y(Q,he=>{t()?he(se,!1):he(ne)},!0)}M(le,te)};Y(D,le=>{t()==="skip"?le(I):le(W,!1)},!0)}M(z,V)};Y(C,z=>{a()&&l()&&a().ml?z(N):z(L,!1)})}var q=P(k,2);{var T=z=>{hc(z,{closeModal:w,isDark:!0,children:(V,D)=>{n1(V,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:w,get prepobj(){return s()},set prepobj(I){s(I)},get left(){return o(u)},set left(I){O(u,I,!0)},get right(){return o(f)},set right(I){O(f,I,!0)},get meta(){return c()},set meta(I){c(I)}})},$$slots:{default:!0}})};Y(q,z=>{o(v)&&z(T)})}var j=P(q,2);{var y=z=>{ue(z,{status:"error",children:(V,D)=>{var I=u1(),W=R(I);Z(()=>pe(W,o(m))),M(V,I)},$$slots:{default:!0}})};Y(j,z=>{(o(d)==="error"||o(m))&&z(y)})}M(r,E),_e()}var d1=K('<span style="font-weight:bold"> </span><br/>',1),h1=K('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),m1=K('<span class="file-size svelte-1uxd0r7"> </span>'),g1=K('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function p1(r,e){we(e,!0);let t=B(e,"title",3,"");var s=be(),l=J(s);{var a=c=>{ue(c,{children:(v,u)=>{var f=g1(),d=J(f),m=R(d);{var h=E=>{var k=d1(),C=J(k),N=R(C);Z(()=>pe(N,t())),M(E,k)};Y(m,E=>{t()&&t()!==""&&E(h)})}var g=P(m,4),p=R(g),b=P(g,5);{var w=E=>{var k=h1(),C=J(k),N=R(C),L=P(C,4),q=R(L);Z(()=>{pe(N,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),pe(q,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),M(E,k)},_=E=>{var k=m1(),C=R(k);Z(()=>pe(C,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),M(E,k)};Y(b,E=>{e.dataset.nresp&&e.dataset.nresp>0?E(w):E(_,!1)})}var A=P(d,2);dn(A,{get onclick(){return e.reset}}),Z(()=>{F(g,"title",e.dataset.fileName),pe(p,e.dataset.fileName)}),M(v,f)},$$slots:{default:!0}})};Y(l,c=>{e.dataset&&c(a)})}M(r,s),_e()}var b1=K("<!> <!>",1),w1=K("<!> <!> <!> <!> <!> <!>",1),_1=K("<!> <!>",1),y1=K("<p> </p>"),x1=K("<!> <p> </p>",1),k1=K("<p> </p>"),E1=K("<!> <!> <!>",1);function Xl(r,e){we(e,!0);let t=B(e,"model",3,null),s=B(e,"outliers",19,()=>[]),l=B(e,"className",3,"Class"),a=B(e,"classMandatory",3,!1),c=B(e,"classUnique",3,!1),v=B(e,"title",3,""),u=B(e,"dataset",15),f=B(e,"resobj",15),d=B(e,"csvOnly",3,!0);const m=[",",";"],h=S(()=>t()?["no","yes"]:["no","labels","values"]);let g=re(void 0),p=re(""),b=re(""),w=re(","),_=re("no"),A=re(!1),E=re(!1),k=re(null),C=re("neutral"),N=re("");function L(ee){O(C,"error"),O(N,ee,!0),console.error(ee)}function q(){O(C,"neural"),O(N,"")}function T(){O(C,"success"),O(N,"")}function j(ee,oe,Ae){O(k,e.WASM().then(De=>{f(nv(De,ee,oe,Ae,!0)),T()}).catch(De=>{f(null),L(De)}),!0)}function y(ee,oe){if(!ee||ee.size<10)return;const De=ee.slice(0,1e5),Fe=new FileReader;Fe.onload=()=>{const Ve=Fe.result;!Ve||Ve.length<0||((qe=>{var Pe=qo(qe,4);O(w,Pe[0],!0),O(A,Pe[1],!0),O(E,Pe[2],!0),O(_,Pe[3],!0)})(iv(Ve)),O(E,a()||o(E),!0),oe&&o(_)!=="no"&&O(_,"yes"))},Fe.onerror=function(Ve){csvString=null,O(C,"error"),O(N,Ve,!0),console.error("Error reading CSV file.",Ve)},Fe.readAsText(De)}function z(ee){try{const oe=ov(ee,o(w),o(_)==="yes"?"labels":o(_),o(A),o(E),o(p),o(b));if(oe.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const Ae=t()?t().prep&&Object.keys(t().prep).length>0?t().prep.npred:t().ncols+t().exclvars.length:0;if(t()&&oe.values.ncols!==Ae)throw new Error("Dataset has different number of columns than the training set.");if(oe.classNames.length>oe.values.nrows/2)throw new Error("Dataset has too many unique "+l().toLowerCase()+" labels ("+oe.classNames.length+"), check your CSV file.");if(a()&&oe.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&oe.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");oe.fileName=o(g).name.replace(/\.[^/.]+$/,""),t()&&(oe.varrev=t().varrev,oe.header=t().header,oe.varlabels=t().varlabels,oe.varvalues=t().varvalues,oe.varvaluesName=t().varvaluesName,oe.varvaluesUnits=t().varvaluesUnits),u(oe),T()}catch(oe){u(null),L(oe)}}function V(ee){const oe=new FileReader;oe.onload=()=>{z(oe.result)},oe.readAsText(o(g))}async function D(ee){try{const oe=o(g)instanceof FileList?o(g):[o(g)];u(await vv(oe)),T()}catch(oe){L("Failed to read SPC file: "+oe)}}function I(){O(g,""),u(null),f(null),O(p,""),O(b,""),q()}ge(()=>{if(!(o(g)===0||o(g)===void 0||u())){if(o(g)===null||o(g)===""){I();return}if(Array.isArray(o(g))){if(o(g).filter(ee=>ee.slice(-4)===".spc").length!==o(g).length){L("Multiple file selection is allowed only for SPC files.");return}D(o(g));return}o(g)&&(o(g).type==="text/csv"||o(g).type==="application/vnd.ms-excel")?(y(o(g),t()),q()):D([o(g)])}}),ge(()=>{o(w)&&q()}),ge(()=>{if(u()&&t()&&!f()&&!o(N))try{f(j(t(),u(),s())),T()}catch(ee){u(null),f(null),L(ee)}});var W=E1(),le=J(W);{var te=ee=>{var oe=_1(),Ae=J(oe);Pn(Ae,()=>o(g)===void 0,Ve=>{ue(Ve,{children:(qe,Pe)=>{var Oe=be(),lt=J(Oe);{var ie=$=>{Eo($,{id:"dataFile",message:"Select CSV file with dataset",get file(){return o(g)},set file(ve){O(g,ve,!0)}})},ae=$=>{Eo($,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return o(g)},set file(ve){O(g,ve,!0)}})};Y(lt,$=>{d()?$(ie):$(ae,!1)})}M(qe,Oe)},$$slots:{default:!0}})});var De=P(Ae,2);{var Fe=Ve=>{var qe=w1(),Pe=J(qe);ue(Pe,{label:"Delimiter",children:(ce,ze)=>{Et(ce,{id:"sep",get options(){return m},get value(){return o(w)},set value(Le){O(w,Le,!0)}})},$$slots:{default:!0}});var Oe=P(Pe,2);ue(Oe,{label:"Row labels",children:(ce,ze)=>{Bn(ce,{id:"hasLabels",options:["no","yes"],get value(){return o(A)},set value(Le){O(A,Le,!0)}})},$$slots:{default:!0}});var lt=P(Oe,2);{var ie=ce=>{ue(ce,{get label(){return`${l()??""} labels`},children:(ze,Le)=>{Bn(ze,{id:"hasLabels",options:["no","yes"],get value(){return o(E)},set value(Ye){O(E,Ye,!0)}})},$$slots:{default:!0}})};Y(lt,ce=>{a()||ce(ie)})}var ae=P(lt,2);ue(ae,{label:"Header",children:(ce,ze)=>{Et(ce,{id:"header",get options(){return o(h)},get value(){return o(_)},set value(Le){O(_,Le,!0)}})},$$slots:{default:!0}});var $=P(ae,2);{var ve=ce=>{var ze=b1(),Le=J(ze);ue(Le,{label:"Header name",children:(Qe,St)=>{vc(Qe,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return o(p)},set value(vt){O(p,vt,!0)}})},$$slots:{default:!0}});var Ye=P(Le,2);ue(Ye,{label:"Header units",children:(Qe,St)=>{vc(Qe,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return o(b)},set value(vt){O(b,vt,!0)}})},$$slots:{default:!0}}),M(ce,ze)};Y($,ce=>{o(_)==="values"&&ce(ve)})}var ke=P($,2);ue(ke,{label:" ",children:(ce,ze)=>{Nt(ce,{text:"Load",onclick:V})},$$slots:{default:!0}}),M(Ve,qe)};Y(De,Ve=>{o(g)&&!Array.isArray(o(g))&&(o(g).type==="text/csv"||o(g).type==="application/vnd.ms-excel")&&Ve(Fe)})}M(ee,oe)},Q=ee=>{var oe=be(),Ae=J(oe);{var De=Fe=>{var Ve=be(),qe=J(Ve);sf(qe,()=>o(k),Pe=>{ue(Pe,{children:(Oe,lt)=>{var ie=x1(),ae=J(ie);Tv(ae);var $=P(ae,2),ve=R($);Z(()=>pe(ve,t()?"Loading data and apply model...":"Loading data...")),M(Oe,ie)},$$slots:{default:!0}})},void 0,(Pe,Oe)=>{ue(Pe,{status:"error",children:(lt,ie)=>{var ae=y1(),$=R(ae);Z(()=>pe($,o(Oe))),M(lt,ae)},$$slots:{default:!0}})}),M(Fe,Ve)};Y(Ae,Fe=>{o(k)&&Fe(De)})}M(ee,oe)};Y(le,ee=>{u()?ee(Q,!1):ee(te)})}var ne=P(le,2);{var se=ee=>{p1(ee,{get dataset(){return u()},reset:I,get title(){return v()}})};Y(ne,ee=>{u()&&ee(se)})}var he=P(ne,2);{var fe=ee=>{ue(ee,{status:"error",children:(oe,Ae)=>{var De=k1(),Fe=R(De);Z(()=>pe(Fe,o(N))),M(oe,De)},$$slots:{default:!0}})};Y(he,ee=>{(o(C)==="error"||o(N))&&ee(fe)})}M(r,W),_e()}var A1=K('<tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (outliers)</td><td class="svelte-1fhdfcc"> </td></tr>'),C1=K('<table class="svelte-1fhdfcc"><thead><tr class="svelte-1fhdfcc"><th class="svelte-1fhdfcc"></th><th class="svelte-1fhdfcc">f</th></tr></thead><tbody><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">DoF (Nf)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Mean (f0)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (extreme)</td><td class="svelte-1fhdfcc"> </td></tr><!></tbody></table>');function Ql(r,e){we(e,!0);let t=B(e,"isAlt",3,!1);var s=be(),l=J(s);{var a=c=>{var v=C1(),u=P(R(v)),f=R(u),d=P(R(f)),m=R(d),h=P(f),g=P(R(h)),p=R(g),b=P(h),w=P(R(b)),_=R(w),A=P(b);{var E=k=>{var C=A1(),N=P(R(C)),L=R(N);Z(q=>pe(L,q),[()=>e.nimca.oCrit.toFixed(1)]),M(k,C)};Y(A,k=>{t()||k(E)})}Z((k,C)=>{pe(m,e.nimca.Nf),pe(p,k),pe(_,C)},[()=>e.nimca.f0.toFixed(3),()=>e.nimca.eCrit.toFixed(1)]),M(c,v)};Y(l,c=>{e.nimca&&c(a)})}M(r,s),_e()}var S1=K('<p class="title"> </p>'),M1=K("<!> <!>",1),N1=K("<!> <!> <!> <!> <!>",1);function Zl(r,e){we(e,!0);let t=B(e,"isAlt",3,!1),s=B(e,"fit",3,!0),l=B(e,"nimca",15);const a=[10,5,1,.1],c=[5,1,.1,.01];let v=re(Ne(l()?l().center:!0)),u=re(Ne(l()?l().scale:!1));ge(()=>{s()&&e.calset&&l(dr.fit(e.calset,o(v),o(u)))});var f=be(),d=J(f);{var m=h=>{var g=N1(),p=J(g);ue(p,{name:"target-class",label:"",children:(C,N)=>{var L=S1(),q=R(L);Z(()=>pe(q,`Target class: ${l().className??""}`)),M(C,L)},$$slots:{default:!0}});var b=P(p,2);{var w=C=>{var N=M1(),L=J(N);ue(L,{name:"center",label:"Center",children:(T,j)=>{Bn(T,{id:"center",options:["no","yes"],get value(){return o(v)},set value(y){O(v,y,!0)}})},$$slots:{default:!0}});var q=P(L,2);ue(q,{name:"scale",label:"Scale",children:(T,j)=>{Bn(T,{id:"scale",options:["no","yes"],get value(){return o(u)},set value(y){O(u,y,!0)}})},$$slots:{default:!0}}),M(C,N)};Y(b,C=>{s()&&C(w)})}var _=P(b,2);ue(_,{name:"alpha",label:"Alpha, %:",children:(C,N)=>{Et(C,{get options(){return a},get value(){return l().alpha},set value(L){l(l().alpha=L,!0)}})},$$slots:{default:!0}});var A=P(_,2);{var E=C=>{ue(C,{name:"gamma",label:"Gamma, %:",children:(N,L)=>{Et(N,{get options(){return c},get value(){return l().gamma},set value(q){l(l().gamma=q,!0)}})},$$slots:{default:!0}})};Y(A,C=>{t()||C(E)})}var k=P(A,2);ue(k,{name:"limits",label:"Limits:",children:(C,N)=>{Et(C,{options:["classic","robust"],get value(){return l().limType},set value(L){l(l().limType=L,!0)}})},$$slots:{default:!0}}),M(h,g)};Y(d,h=>{l()&&l().className&&h(m)})}M(r,f),_e()}var j1=K('<table class="svelte-1bca91p"><thead><tr class="svelte-1bca91p"><th class="svelte-1bca91p"></th><th class="svelte-1bca91p">Cal</th></tr></thead><tbody><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Objects</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Extremes</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Outliers</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Sensitivity</td><td class="svelte-1bca91p"> </td></tr></tbody></table>');function T1(r,e){we(e,!0);let t=S(()=>e.calres?e.calres.nrows:0);var s=be(),l=J(s);{var a=c=>{var v=j1(),u=P(R(v)),f=R(u),d=P(R(f)),m=R(d),h=P(f),g=P(R(h)),p=R(g),b=P(h),w=P(R(b)),_=R(w),A=P(b),E=P(R(A)),k=R(E);Z(C=>{pe(m,o(t)),pe(p,e.calres.outcomes.rolsNum.extreme),pe(_,e.calres.outcomes.rolsNum.outlier),pe(k,C)},[()=>e.calres.outcomes.stat.sensitivity.toFixed(3)]),M(c,v)};Y(l,c=>{e.calres&&c(a)})}M(r,s),_e()}var P1=K('<div class="msg-select"> </div>'),L1=K('<div class="msg-select"> </div>'),z1=K('<div class="msg-select"> </div>'),R1=K('<div class="msg-select"> </div>'),I1=K('<div class="selected-buttons svelte-188sk7n"><!></div>'),F1=K('<div class="selected-buttons svelte-188sk7n"><!></div>'),q1=K("<!> <!> <!>",1),O1=K("<button> </button>"),B1=K('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function $l(r,e){we(e,!0);let t=B(e,"selobjText",3,"Click to select an object..."),s=B(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=B(e,"clearText",3,"Click anywhere to remove selection..."),a=B(e,"params",15),c=Ne({objects:-1,variables:[]}),v=re(Ne(Object.keys(e.plots)[0]));function u(T,j){c.objects=j?j[T]:T}function f(T){c.objects=-1}function d(T){c.variables=T}function m(T){c.variables=[]}let h={objects:{select:u,unselect:f},variables:{select:d,unselect:m},stats:{}},g=S(()=>o(v)?e.plots[o(v)]:null),p=S(()=>o(g)?o(g).component:null);var b=B1(),w=R(b),_=R(w),A=R(_);Bs(A,()=>o(p),(T,j)=>{j(T,{get params(){return a()[o(v)]},get callbacks(){return h[o(g).scope]},get selected(){return c[o(g).scope]},get props(){return e.props}})});var E=P(_,2),k=R(E);{var C=T=>{var j=be(),y=J(j);{var z=D=>{var I=P1(),W=R(I);Z(()=>pe(W,t())),M(D,I)},V=D=>{var I=L1(),W=R(I);Z(()=>pe(W,l())),M(D,I)};Y(y,D=>{c[o(g).scope]<0?D(z):D(V,!1)})}M(T,j)};Y(k,T=>{o(g).scope==="objects"&&a()[o(v)].plotType!=="l"&&t().length>0&&T(C)})}var N=P(k,2);{var L=T=>{var j=be(),y=J(j);{var z=D=>{var I=z1(),W=R(I);Z(()=>pe(W,s())),M(D,I)},V=D=>{var I=R1(),W=R(I);Z(()=>pe(W,l())),M(D,I)};Y(y,D=>{c[o(g).scope].length===0?D(z):D(V,!1)})}M(T,j)};Y(N,T=>{o(g).scope==="variables"&&a()[o(v)].plotType!=="l"&&s().length>0&&T(L)})}var q=P(w,2);$e(q,21,()=>Object.keys(e.plots),nt,(T,j)=>{var y=be(),z=J(y);{var V=I=>{var W=q1(),le=J(W);Rv(le,{get title(){return o(g).label},labelWidth:12,get options(){return e.controls[o(v)]},get value(){return a()[o(v)]},set value(he){a(a()[o(v)]=he,!0)}});var te=P(le,2);{var Q=he=>{var fe=I1(),ee=R(fe);Gr(ee,()=>o(g).buttons,()=>c.objects),M(he,fe)};Y(te,he=>{o(g).scope==="objects"&&o(g).buttons&&c.objects>=0&&he(Q)})}var ne=P(te,2);{var se=he=>{var fe=F1(),ee=R(fe);Gr(ee,()=>o(g).buttons,()=>c.variables),M(he,fe)};Y(ne,he=>{o(g).scope==="variables"&&o(g).buttons&&c.variables.length>0&&he(se)})}M(I,W)},D=I=>{var W=O1();W.__keydown=()=>switchPlot(i),W.__click=()=>O(v,o(j),!0);var le=R(W);Z(()=>{yt(W,1,`plot-selector plot-selector-${o(j)??""}`,"svelte-188sk7n"),pe(le,e.plots[o(j)].label)}),M(I,W)};Y(z,I=>{o(g)&&o(v)===o(j)?I(V):I(D,!1)})}M(T,y)}),M(r,b),_e()}ct(["keydown","click"]);var D1=Ee("<text> </text>"),V1=Ee('<g class="series series-textlabels"></g>'),Y1=Ee('<g class="series series-line"><polyline class="line"></polyline></g>'),W1=Ee("<rect></rect>"),U1=Ee('<g class="series series-bar"></g>'),H1=Ee("<text> </text>"),G1=Ee('<g class="series series-points series-points1"></g>'),K1=Ee('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),J1=Ee('<g class="series series-points series-points1"><text> </text></g>'),X1=Ee('<g class="series series-bar"><rect></rect></g>'),Q1=Ee('<g class="series series-text"><text> </text></g>'),Z1=Ee("<!><!><!>",1),$1=Ee("<!><!><!><!><!>",1);function Rc(r,e){we(e,!0);let t=B(e,"shortenLabels",3,!0),s=B(e,"lineWidth",3,1),l=B(e,"nBars",3,1),a=B(e,"barNum",3,1),c=B(e,"markerSize",3,null),v=B(e,"markerWidth",3,2),u=B(e,"marker",3,1),f=B(e,"colors",3,void 0),d=B(e,"filled",3,void 0),m=B(e,"mainColor",19,()=>Yn.cal),h=B(e,"faceColor",3,null),g=B(e,"lineColor",19,m),p=B(e,"selected",19,()=>-1),b=B(e,"maskSelected",3,!0),w=B(e,"xRange",15),_=B(e,"yRange",15),A=B(e,"ind",3,null);function E(ae){!e.callbacks||!e.callbacks.select||Vn(ae,ae.target.tagName,$=>e.callbacks.select($,A()))}function k(ae){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const C=Jt("axes"),N=S(()=>Ut(e.xValues,"PlotSeries")),L=S(()=>o(N)?Ut(e.yValues,"PlotSeries",o(N).length):null);ge(()=>{if(A()){const ae=A().map($=>$+1);w(o(N)?ln(o(N).subset(ae)):null),_(o(L)?ln(o(L).subset(ae)):null)}else w(o(N)?ln(o(N)):null),_(o(L)?ln(o(L)):null)});const q=S(()=>h()===null?e.plotType==="p"?"transparent":"white":h()),T=[1,.8,.8,.8,.8,.8,.8,.8],j=[.85,.65,.65,.65,.65,.65,.65,.65],y=S(()=>c()?c():e.plotType==="p"?T[u()-1]:j[u()-1]),z=S(()=>hs[u()-1]),V=S(()=>Bl[C.scales().plot]),D=S(()=>bt([0],C.tY())[0]),I=S(()=>Dl([.8],C.tX())[0]),W=S(()=>e.plotType==="h"?o(I)/l():0),le=S(()=>e.plotType==="h"?o(I)/2-(a()-1)*o(W):0),te=S(()=>o(V));let Q=S(()=>e.plotType==="l"||e.plotType==="b"?Wl(o(N),o(L),C.tX(),C.tY()):null),ne=S(()=>o(N)?bt(o(N),C.tX()):null),se=S(()=>o(L)?bt(o(L),C.tY()):null),he=S(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(ae=>ae.slice(0,Lc)):e.labels:null);const fe=S(()=>A()?A():Zr(0,o(ne).length-1));let ee=S(()=>f()&&f().length===o(N).length?f():Array(o(N).length).fill(m())),oe=S(()=>d()&&d().length===o(N).length?d().map(ae=>ae?"ff":"30"):Array(o(N).length).fill("30")),Ae=S(()=>f()&&f().length===o(N).length?f().map((ae,$)=>ae+o(oe)[$]):Array(o(N).length).fill(h()));const De=S(()=>`font-size:${o(y)}em;fill:${o(q)};cursor:default;text-anchor:middle;stroke-width:${v()}px;user-select:none;`),Fe=`font-size:0.85em;fill:${Tc};cursor:default;text-anchor:middle;stroke:${Tc};stroke-width:0.1px;user-select:none;`,Ve=S(()=>`font-size:${o(y)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),qe=`fill:transparent;stroke-width:${s()}px;`,Pe=`stroke-width:${s()}px;stroke:${g()}`;ge(()=>{p()&&A()&&A().indexOf(p())<0&&e.callbacks.unselect()});var Oe=be(),lt=J(Oe);{var ie=ae=>{var $=$1(),ve=J($);{var ke=U=>{var X=V1();$e(X,21,()=>o(fe),nt,(de,me)=>{var Ce=D1(),Te=R(Ce);Z(()=>{F(Ce,"opacity",o(me)===p()),F(Ce,"x",o(ne)[o(me)]-o(le)+o(W)/2),F(Ce,"y",o(se)[o(me)]),F(Ce,"dy",o(L).v[o(me)]<0?o(te):-o(te)),pe(Te,o(he)[o(me)])}),M(de,Ce)}),Z(()=>pt(X,Fe+(p()>=0?"opacity:0.2;":""))),M(U,X)};Y(ve,U=>{e.showLabels&&o(he)&&U(ke)})}var ce=P(ve);{var ze=U=>{var X=Y1(),de=R(X);Z(()=>{pt(X,qe),F(de,"points",o(Q)),F(de,"stroke",m())}),M(U,X)};Y(ce,U=>{(e.plotType==="l"||e.plotType==="b")&&U(ze)})}var Le=P(ce);{var Ye=U=>{var X=U1();X.__click=E,$e(X,21,()=>o(fe),nt,(de,me)=>{var Ce=W1();Z(()=>{F(Ce,"x",o(ne)[o(me)]-o(le)),F(Ce,"y",o(L).v[o(me)]<0?o(D):o(se)[o(me)]),F(Ce,"fill",o(ee)[o(me)]),F(Ce,"width",o(W)),F(Ce,"height",o(L).v[o(me)]<0?o(se)[o(me)]-o(D):o(D)-o(se)[o(me)])}),M(de,Ce)}),Z(()=>pt(X,Pe+(p()>=0?"opacity:0.2;":""))),M(U,X)};Y(Le,U=>{e.plotType==="h"&&U(Ye)})}var Qe=P(Le);{var St=U=>{var X=G1();X.__click=E,$e(X,21,()=>o(fe),nt,(de,me)=>{var Ce=H1(),Te=R(Ce);Z(()=>{F(Ce,"x",o(ne)[o(me)]),F(Ce,"y",o(se)[o(me)]),F(Ce,"fill",o(Ae)[o(me)]),F(Ce,"stroke",o(ee)[o(me)]),pe(Te,o(z))}),M(de,Ce)}),Z(()=>pt(X,o(De)+(p()>=0?"opacity:0.2;":""))),M(U,X)};Y(Qe,U=>{(e.plotType==="p"||e.plotType==="b")&&U(St)})}var vt=P(Qe);{var G=U=>{var X=Z1(),de=J(X);{var me=Ze=>{var ot=K1();F(ot,"x",0),F(ot,"y",0),ot.__click=k,M(Ze,ot)};Y(de,Ze=>{b()&&Ze(me)})}var Ce=P(de);{var Te=Ze=>{var ot=J1(),wt=R(ot),ye=R(wt);Z(()=>{pt(ot,o(Ve)),F(wt,"x",o(ne)[p()]),F(wt,"y",o(se)[p()]),F(wt,"stroke",o(ee)[p()]),F(wt,"fill",o(Ae)[p()]),pe(ye,o(z))}),M(Ze,ot)},It=Ze=>{var ot=X1(),wt=R(ot);Z(()=>{pt(ot,Pe),F(wt,"stroke",o(ee)[p()]),F(wt,"fill",o(ee)[p()]),F(wt,"x",o(ne)[p()]-o(le)),F(wt,"y",o(L).v[p()]<0?o(D):o(se)[p()]),F(wt,"width",o(W)),F(wt,"height",o(L).v[p()]<0?o(se)[p()]-o(D):o(D)-o(se)[p()])}),M(Ze,ot)};Y(Ce,Ze=>{e.plotType!=="h"?Ze(Te):Ze(It,!1)})}var qr=P(Ce);{var xt=Ze=>{var ot=Q1(),wt=R(ot),ye=R(wt);Z(()=>{pt(ot,Fe),F(wt,"stroke",Pc),F(wt,"fill",Pc),F(wt,"x",o(ne)[p()]),F(wt,"y",o(se)[p()]),F(wt,"dy",o(L).v[p()]<0?o(te):-o(te)),pe(ye,o(he)[p()])}),M(Ze,ot)};Y(qr,Ze=>{e.showLabels&&o(he)&&o(he).length>0&&Ze(xt)})}M(U,X)};Y(vt,U=>{p()>=0&&U(G)})}M(ae,$)};Y(lt,ae=>{o(ne)&&o(se)&&ae(ie)})}M(r,Oe),_e()}ct(["click"]);var e0=K("<!> <!> <!> <!>",1);function ea(r,e){let t=B(e,"whole",3,!1),s=zn(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Ac(r,cr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return qh},get pngWidth(){return Bh},get pngHeight(){return Dh},get pngRes(){return Vh}},()=>s,{children:(l,a)=>{var c=e0(),v=J(c);Gr(v,()=>e.children);var u=P(v,2);Cc(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var f=P(u,2);Sc(f,{showGrid:!0,get label(){return e.yLabel}});var d=P(f,2);Mc(d,{}),M(l,c)},$$slots:{default:!0}}))}var t0=K("<!> <!> <!> <!>",1);function ta(r,e){we(e,!0);const t=S(()=>e.props&&e.props.data?e.props.data:null),s=S(()=>e.props&&e.props.res?e.props.res:null),l=S(()=>o(s)&&e.params.resID?o(s)[e.params.resID]:null),a=S(()=>o(s)&&e.params.resID?o(t)[e.params.resID]:null),c=S(()=>e.props&&e.props.model?e.props.model:null),v="#909090";let u=S(()=>o(c)&&o(c).oCrit?o(c).oCrit:0),f=S(()=>o(c)&&o(c).eCrit?o(c).eCrit:0),d=S(()=>o(l).objindices.map(D=>D+1)),m=S(()=>Gh(o(l).outcomes.f,1,1,e.params.transType)),h=S(()=>o(l).objlabels.map(D=>D.slice(0,Lc))),g="Full dustance",p="Objects",b=S(()=>e.params.transType==="log"?"Full distance, log(1 + f)":"Full distance, f"),w=re(void 0),_=re(void 0),A=S(()=>Hh(o(a),o(l),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),E=S(()=>e.params.colorByObj?e.params.colorByObj.ind:null),k=S(()=>o(E)?Lr(o(E))+1:Lr(o(l).objindices)+1),C=S(()=>o(E)?Jr(o(E)):Jr(o(l).objindices)),N=S(()=>(o(k)-o(C))*.025),L=S(()=>[o(C)-o(N),o(k)+o(N)]),q=S(()=>({x:o(L),y:e.params.transType==="log"?[Math.log(1+o(u)),Math.log(1+o(u))]:[o(u),o(u)]})),T=S(()=>({x:o(L),y:e.params.transType==="log"?[Math.log(1+o(f)),Math.log(1+o(f))]:[o(f),o(f)]})),j=S(()=>{if(!o(q)||!o(_))return[0,1];const D=Math.max(o(_)[1],o(q).y[0]);return[-.02*(D-o(_)[0]),(1.05+.1*(e.params.colorBy!=="none")+.05*e.params.showLabels)*D]});var y=be(),z=J(y);{var V=D=>{ea(D,{title:g,get limX(){return o(L)},get limY(){return o(j)},xLabel:p,get yLabel(){return o(b)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(I,W)=>{var le=t0(),te=J(le);{var Q=oe=>{mn(oe,{get xValues(){return o(T).x},get yValues(){return o(T).y},lineColor:v,lineType:2})};Y(te,oe=>{o(T)&&oe(Q)})}var ne=P(te,2);{var se=oe=>{mn(oe,{get xValues(){return o(q).x},get yValues(){return o(q).y},lineColor:v,lineType:3})};Y(ne,oe=>{o(q)&&(e.params.resID!=="test"||e.params.subset&&e.params.subset==="members")&&e.params.resID&&e.params.resID!=="new"&&oe(se)})}var he=P(ne,2);Rc(he,{get labels(){return o(h)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return o(d)},get yValues(){return o(m).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Kl[e.params.resID]},get colors(){return o(A).colors},get filled(){return o(A).filled},get ind(){return o(E)},get xRange(){return o(w)},set xRange(oe){O(w,oe,!0)},get yRange(){return o(_)},set yRange(oe){O(_,oe,!0)}});var fe=P(he,2);{var ee=oe=>{{let Ae=S(()=>o(A).breaks!==null);jc(oe,{get show(){return o(Ae)},get colmap(){return o(A).map},get breaks(){return o(A).breaks},get labels(){return o(A).labels}})}};Y(fe,oe=>{o(A)&&o(A).showBar&&oe(ee)})}M(I,le)},$$slots:{default:!0}})};Y(z,D=>{o(d)&&o(m)&&D(V)})}M(r,y),_e()}var r0=K("<!> <!> <!>",1),n0=K("<!> <!> <!>",1);function s0(r,e){we(e,!0);const t="#e0e0e0",s="Number of extremes (expected)",l="Number of extremes (observed)",a="plot-extremes";function c(T){const j=He.zeros(T+1),y=He.zeros(T+1),z=He.zeros(T+1),V=He.zeros(T+1);for(let D=1;D<T;D++){const I=D/T,W=2*Math.sqrt(D*(1-I));j.v[D]=D,z.v[D]=D,y.v[D]=D-W,V.v[D]=D+W}return j.v[T]=T,z.v[T]=T,y.v[T]=T,V.v[T]=T,{xStart:j,xEnd:z,yStart:y,yEnd:V}}function v(T,j,y){const z=j.f,V=T.nMembers,D=He.zeros(V);for(let I=1;I<=V;I++){const W=I/V,le=In(1-W,y);let te=0;for(let Q=0;Q<V;Q++)z[T.ind.members[Q]]>le&&(te+=1);D.v[I-1]=te}return D}let u=S(()=>e.props&&e.props.res?e.props.res:null),f=S(()=>e.props&&e.props.model?e.props.model:null),d=S(()=>o(f)&&o(f).Nf?o(f).Nf:0),m=S(()=>Object.keys(o(u))),h=S(()=>e.params.resID!=="both"?[e.params.resID]:o(m)),g=S(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),p=S(()=>o(h)?o(h).map(T=>({id:T,label:T,point:{marker:1,lineColor:Yn[T],faceColor:Jl[T],marker:Kl[T],markerSize:.85,lineWidth:1.5}})):null),b=S(()=>o(u)&&o(h)?o(h).reduce((T,j)=>(T[j]=He.seq(1,o(u)[j].nMembers),T),{}):null),w=S(()=>o(u)&&o(m)?o(m).reduce((T,j)=>(T[j]=v(o(u)[j],o(u)[j].outcomes,o(d)),T),{}):null),_=S(()=>o(h)?o(h).reduce((T,j)=>Math.max(T,o(b)[j].length),0):1),A=S(()=>o(_)>1?c(o(_)):null),E=S(()=>o(b)?[-1,o(_)+2]:[0,1]),k=S(()=>o(b)?[-1,o(_)+2]:[0,1]),C="Extremes";var N=be(),L=J(N);{var q=T=>{ea(T,{title:C,xLabel:s,yLabel:l,get limX(){return o(E)},get limY(){return o(k)},fileName:a,whole:!0,children:(j,y)=>{var z=n0(),V=J(z);{var D=te=>{var Q=r0(),ne=J(Q);Ch(ne,cr(()=>o(A),{lineColor:t}));var se=P(ne,2);mn(se,{get xValues(){return o(A).xStart},get yValues(){return o(A).yStart},lineColor:t});var he=P(se,2);mn(he,{get xValues(){return o(A).xEnd},get yValues(){return o(A).yEnd},lineColor:t}),M(te,Q)};Y(V,te=>{o(A)&&te(D)})}var I=P(V,2);$e(I,17,()=>o(h),nt,(te,Q)=>{Rc(te,{get xValues(){return o(b)[o(Q)]},get yValues(){return o(w)[o(Q)]},plotType:"p",showLabels:!1,get faceColor(){return Jl[o(Q)]},get mainColor(){return Yn[o(Q)]},get marker(){return Kl[o(Q)]},lineWidth:1.5})});var W=P(I,2);{var le=te=>{Fh(te,{get items(){return o(p)},get position(){return o(g)}})};Y(W,te=>{o(p)&&o(p).length>0&&te(le)})}M(j,z)},$$slots:{default:!0}})};Y(L,T=>{o(u)&&T(q)})}M(r,N),_e()}var o0=K("<!> <!> <!>",1),l0=K("<!> <!> <!> <!> <!>",1),a0=K('<div class="plot-container svelte-1838sos" role="tooltip"><!></div>');function ra(r,e){we(e,!0);let t=B(e,"outliers",19,()=>[]);const s=S(()=>e.props&&e.props.data?e.props.data:null),l=S(()=>o(s)&&e.params.resID?o(s)[e.params.resID]:null);let a=re(-1);function c(C){if(C.target.tagName!=="rect"){O(a,-1);return}const N=Array.from(C.target.parentNode.children).indexOf(C.target);if(N<0){O(a,-1);return}o(a)!==N&&O(a,N,!0)}const v=S(()=>{const C=ft(o(l).varvalues),N=C.length,L=(C.v[1]-C.v[0])/2,q=(C.v[N-1]-C.v[N-2])/2,T=[C.v[0],C.v[N-1]],j=[T[0]-L,T[1]+q],y=(T[1]-T[0])/N;return{values:C,lim:j,width:y,hwidth:y*.5}}),u=S(()=>o(v)?o(v).values.apply(C=>C-o(v).hwidth):null),f=S(()=>o(l)&&e.props&&e.props.model?nc(o(l).values,e.props.model.mX,e.props.model.sX):null),d=S(()=>o(f)?o(f).t():null);let m=S(()=>o(d)?o(d).getcolumn(e.selected>=0?e.selected+1:1):null),h=S(()=>{const C={all:o(d),sel:o(m),label:"Preprocessed data, X"},N=ln(C.all.v),L=N[1]-N[0],q=[N[0]-L/50,N[1]+L/12],T=He.fill(N[1],C.sel.length);return C.lim=q,C.top=T,C.height=L,C});const g=S(()=>o(v)&&o(a)>=0?o(v).values.v[o(a)]:null),p=S(()=>o(h)&&o(a)>=0?o(h).sel.v[o(a)]:null),b=S(()=>o(l)&&o(a)>=0?o(l).varlabels[o(a)]:null),w=S(()=>o(l)&&e.selected>=0?`Object ${o(l).objlabels[e.selected].replace("_","-")}`:null),_=S(()=>o(l)?o(l).varvaluesName+(o(l).varvaluesUnits?", "+o(l).varvaluesUnits:""):null);var A=be(),E=J(A);{var k=C=>{var N=a0();N.__click=c;var L=R(N);ea(L,{get title(){return o(w)},get yLabel(){return o(h).label},get xLabel(){return o(_)},get limY(){return o(h).lim},get limX(){return o(v).lim},fileName:"plot-contributions",children:(q,T)=>{var j=l0(),y=J(j);{let Q=S(()=>e.selected>=0?"#e0e0e0":"#a0a0a0");Nc(y,{get xValues(){return o(v).values},get yValues(){return o(h).all},get lineColor(){return o(Q)}})}var z=P(y,2);{var V=Q=>{var ne=be(),se=J(ne);$e(se,17,t,nt,(he,fe)=>{{let ee=S(()=>o(h).all.getcolumn(o(fe)+1));mn(he,{get xValues(){return o(v).values},get yValues(){return o(ee)},lineColor:"#ffdd88"})}}),M(Q,ne)};Y(z,Q=>{t().length>0&&Q(V)})}var D=P(z,2);{var I=Q=>{mn(Q,{get xValues(){return o(v).values},get yValues(){return o(h).sel},lineColor:"crimson"})};Y(D,Q=>{e.selected>=0&&Q(I)})}var W=P(D,2);Co(W,{get left(){return o(u)},get top(){return o(h).top},get height(){return o(h).height},get width(){return o(v).width},faceColor:"transparent",borderColor:"transparent"});var le=P(W,2);{var te=Q=>{var ne=o0(),se=J(ne);{let ee=S(()=>[o(g)]),oe=S(()=>[o(h).top.v[0]]),Ae=S(()=>[o(b)]);So(se,{get xValues(){return o(ee)},get yValues(){return o(oe)},get labels(){return o(Ae)},pos:3,textSize:.85})}var he=P(se,2);{let ee=S(()=>[o(g)]),oe=S(()=>[o(p)]);Lh(he,{get xValues(){return o(ee)},get yValues(){return o(oe)},faceColor:"crimson",lineColor:"crimson"})}var fe=P(he,2);{let ee=S(()=>[o(u).v[o(a)]]),oe=S(()=>[o(h).top.v[o(a)]]);Co(fe,{get left(){return o(ee)},get top(){return o(oe)},get height(){return o(h).height},get width(){return o(v).width},faceColor:"#ff000015"})}M(Q,ne)};Y(le,Q=>{o(a)>=0&&Q(te)})}M(q,j)},$$slots:{default:!0}}),M(C,N)};Y(E,C=>{o(v)&&o(h)&&C(k)})}M(r,A),_e()}ct(["click"]);function na(r){const e=Object.keys(r),t=r[e[0]],s=t.nMembers>0&&t.nStrangers>0,l=e[0]==="new",a=t.nMembers>0?"members":t.nStrangers>0?"strangers":"all",c={resID:{el:Et,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},subset:{el:Et,hidden:!s||l,default:a,label:"Show",props:{options:["members","strangers","all"]}},transType:{el:Et,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:Bn,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}};return t.nStrangers>0&&t.nStrangers==0&&t.classNames&&t.classNames.length>1&&(c.colorBy={el:Et,hidden:!1,default:"roles",label:"Color by",props:{options:["roles","classes"]}}),c}function Mo(r){return{resID:{el:Et,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function i0(r,e){we(e,!0);const t=(d,m=Ot)=>{ue(d,{label:"Selected",children:(h,g)=>{Nt(h,{onclick:()=>e.markOutlier(m()),text:"remove"})},$$slots:{default:!0}})},s={cal:e.calsetp},l=S(()=>({cal:e.calres})),a={regular:gn.regular,extreme:gn.extreme,outlier:gn.outlier};ge(()=>{if(e.nimca.limType){const d=o(l)[o(u).acceptance.resID].outcomes;o(u).acceptance.colorByObj={classColmap:a,labels:[`regular: ${d.rolsNum.regular}`,`extreme: ${d.rolsNum.extreme}`,`outliers: ${d.rolsNum.outlier}`],values:d.rols}}});const c=S(()=>({acceptance:{label:"Acceptance",scope:"objects",component:ta,buttons:t},extremes:{label:"Extremes",scope:"stats",component:s0},dataset:{label:"Datasets",scope:"objects",component:ra,buttons:t}})),v=Ne({acceptance:na(o(l)),extremes:Mo(["cal"]),dataset:Mo(["cal"])});let u=re(Ne({acceptance:On(v.acceptance),extremes:On(v.extremes),dataset:On(v.extremes)}));const f=S(()=>({res:o(l),model:e.nimca,data:s}));$l(r,{get plots(){return o(c)},get controls(){return v},get props(){return o(f)},get params(){return o(u)},set params(d){O(u,d,!0)}}),_e()}var c0=K('<div class="outliers-pane svelte-1mp4dba"><!></div>'),u0=K('<div class="buttons"><!> <!></div>'),f0=K('<div class="model-stats svelte-1mp4dba"><!></div> <div class="result-stats svelte-1mp4dba"><!></div>',1),v0=K(`<p class="svelte-1mp4dba">In this tab you can train a Naïve DD-SIMCA (NIMCA) model. After creating the model you can save it to a file and use it in other tabs. For example, validate it using test set (tab <strong>Test</strong>) or apply it to a dataset with unknown class membership (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1mp4dba">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1mp4dba">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),d0=K(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to apply proper preprocessing methods. You can create a chain of the methods directly in the app
               (button <strong>Create</strong>), load previously created preprocessing model (<strong>Load</strong>), or just skip this step. In this case the data will be only mean centered for computing the distances.</p>`,1),h0=K('<div class="help-text svelte-1mp4dba"><!></div>'),m0=K('<div class="app-container svelte-1mp4dba"><div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <div class="nimca-settings svelte-1mp4dba"><!> <!></div> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function g0(r,e){we(e,!0);const t=S(()=>e.session.train);ge(()=>{o(t).nimca&&!(o(t).nimca instanceof dr)&&(o(t).nimca=dr.fromJSON(o(t).nimca))});function s(){o(t).nimca=null,o(t).calres=null,o(t).calsetp=null,o(t).prepmodel=null}function l(j){if(j<0||j>o(t).calres.nrows-1)return;const y=o(t).calseto.objindices[j];y>=0&&!o(t).outliers.includes(y)&&(o(t).nimca=null,o(t).outliers.push(y),o(t).calseto=fs(o(t).calset,o(t).outliers),s())}function a(){o(t).nimca=null,o(t).outliers=[],o(t).calseto=o(t).calset,s()}function c(){o(t).nimca=null,o(t).outliers.pop(),o(t).calseto=fs(o(t).calset,o(t).outliers),s()}uo(()=>{o(t).calset===null?(o(t).outliers=[],o(t).calsetp=null,o(t).calseto=null,o(t).className=null,o(t).prepmodel=null,o(t).prepobj=[],o(t).prepType=null,o(t).nimca=null):o(t).calset&&!o(t).className&&(o(t).className=o(t).calset.classNames[0],o(t).calseto=o(t).calset)}),ge(()=>{o(t).calset===null&&(o(t).nimca=null,o(t).calseto=null,o(t).calsetp=null)}),ge(()=>{o(t).calsetp===null&&(o(t).nimca=null,o(t).calres=null)}),ge(()=>{o(t).calsetp&&o(t).nimca&&(o(t).calres=o(t).nimca.predict(o(t).calsetp))}),ge(()=>{const j=wr(()=>JSON.stringify(e.session,Gs));o(t).nimca?e.backupSession(j,o(t).calset,o(t).nimca):e.backupSession(j,o(t).calset)});var v=m0(),u=R(v),f=R(u),d=R(f);Xl(d,{className:"Class",classMandatory:!0,classUnique:!0,get dataset(){return o(t).calset},set dataset(j){o(t).calset=j}});var m=P(f,2);{var h=j=>{var y=c0(),z=R(y);Rl(z,{get outliers(){return o(t).outliers},get dataset(){return o(t).calset},resetOutliers:a,undoOutliers:c}),M(j,y)};Y(m,j=>{o(t).outliers&&o(t).outliers.length>0&&j(h)})}var g=P(m,2);{var p=j=>{v1(j,{get WASM(){return e.WASM},get rawdata(){return o(t).calseto},get prepType(){return o(t).prepType},set prepType(y){o(t).prepType=y},get prepobj(){return o(t).prepobj},set prepobj(y){o(t).prepobj=y},get prepdata(){return o(t).calsetp},set prepdata(y){o(t).calsetp=y},get prepmeta(){return o(t).prepmeta},set prepmeta(y){o(t).prepmeta=y},get prepmodel(){return o(t).prepmodel},set prepmodel(y){o(t).prepmodel=y}})};Y(g,j=>{o(t).calseto&&j(p)})}var b=P(g,2),w=R(b);{var _=j=>{Zl(j,{get className(){return o(t).className},get calset(){return o(t).calsetp},get nimca(){return o(t).nimca},set nimca(y){o(t).nimca=y}})};Y(w,j=>{o(t).calsetp&&j(_)})}var A=P(w,2);{var E=j=>{ue(j,{label:"Download",children:(y,z)=>{var V=u0(),D=R(V);Nt(D,{onclick:()=>jl(o(t).nimca,o(t).calres,o(t).calset,"train",o(t).outliers),text:"Res (cal)"});var I=P(D,2);Nt(I,{onclick:()=>Tl(o(t).nimca,o(t).prepmodel),text:"Model"}),M(y,V)},$$slots:{default:!0}})};Y(A,j=>{o(t).nimca&&o(t).calres&&j(E)})}var k=P(b,2);{var C=j=>{var y=f0(),z=J(y),V=R(z);Ql(V,{get nimca(){return o(t).nimca}});var D=P(z,2),I=R(D);T1(I,{get calres(){return o(t).calres}}),M(j,y)};Y(k,j=>{o(t).nimca&&o(t).calres&&j(C)})}var N=P(u,2),L=R(N);{var q=j=>{var y=h0(),z=R(y);{var V=I=>{var W=v0();M(I,W)},D=I=>{var W=be(),le=J(W);{var te=Q=>{var ne=d0();M(Q,ne)};Y(le,Q=>{o(t).calsetp||Q(te)})}M(I,W)};Y(z,I=>{o(t).calset?I(D,!1):I(V)})}M(j,y)},T=j=>{var y=be(),z=J(y);{var V=D=>{var I=be(),W=J(I);Pn(W,()=>o(t).calres,le=>{i0(le,cr({markOutlier:l},()=>o(t)))}),M(D,I)};Y(z,D=>{o(t).nimca&&o(t).calres&&D(V)},!0)}M(j,y)};Y(L,j=>{!o(t).nimca||!o(t).calres?j(q):j(T,!1)})}M(r,v),_e()}var p0=K("<!> <!>",1),b0=K('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),w0=K('<p class="model-info svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model:</span> <!></p> <!>',1),_0=K("<p><!></p>"),y0=K("<!> <!>",1);function Ic(r,e){we(e,!0);let t=B(e,"prep",15),s=B(e,"nimca",15),l=re(""),a=re("neutral"),c=re("");function v(_){try{const A=JSON.parse(_,Ll);if(!Object.keys(A).includes("nimca")||!Object.keys(A).includes("prep")||A.nimca.class[0]!=="nimcamodel")throw new Error("The JSON file you selected does not contain NIMCA mdel.");A.nimca.fileName=o(d),t(A.prep),s(dr.fromJSON(A.nimca)),O(a,"success"),O(c,"")}catch(A){s(null),t(null),O(a,"error"),O(c,A,!0)}}function u(_){const A=new FileReader;A.onload=()=>{v(A.result)},A.readAsText(o(l))}function f(){O(l,""),s(null),t(null),O(a,"neutral"),O(c,"")}ge(()=>{o(l)===null?(s(null),t(null),O(a,"neutral"),O(c,"")):(O(a,"neutral"),O(c,""))});let d=S(()=>o(l)?o(l).name.replace(/\.[^/.]+$/,""):"");var m=y0(),h=J(m);{var g=_=>{var A=p0(),E=J(A);Pn(E,()=>o(l),N=>{ue(N,{children:(L,q)=>{Eo(L,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return o(l)},set file(T){O(l,T,!0)}})},$$slots:{default:!0}})});var k=P(E,2);{var C=N=>{ue(N,{label:" ",children:(L,q)=>{Nt(L,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(k,N=>{o(l)&&N(C)})}M(_,A)},p=_=>{ue(_,{name:"info",children:(A,E)=>{var k=w0(),C=J(k),N=P(R(C),2),L=R(N),q=P(N,4),T=P(q);{var j=z=>{var V=b0(),D=P(J(V),3);ql(D,{get prepmodel(){return t()}}),M(z,V)};Y(T,z=>{t()&&z(j)})}var y=P(C,2);dn(y,{onclick:f}),Z(()=>{F(N,"title",s().fileName),pe(L,s().fileName),pe(q,` ${s().ncols??""} predictors${s().center?", centered":""}${s().scale?", scaled":""} `)}),M(A,k)},$$slots:{default:!0}})};Y(h,_=>{s()?_(p,!1):_(g)})}var b=P(h,2);{var w=_=>{ue(_,{status:"error",children:(A,E)=>{var k=_0(),C=R(k);zt(C,()=>o(c)),M(A,k)},$$slots:{default:!0}})};Y(b,_=>{(o(a)==="error"||o(c))&&_(w)})}M(r,m),_e()}var x0=K('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Out</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Sensitivity</td><td class="svelte-k5uafz"> </td></tr>',1),k0=K('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">In</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Specificity</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Selectivity</td><td class="svelte-k5uafz"> </td></tr>',1),E0=K('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Efficiency</td><td class="svelte-k5uafz"> </td></tr>'),A0=K('<table class="svelte-k5uafz"><thead><tr class="svelte-k5uafz"><th class="svelte-k5uafz"></th><th class="svelte-k5uafz">Test</th></tr></thead><tbody><tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Members</td><td class="svelte-k5uafz"> </td></tr><!><tr class="section svelte-k5uafz"><td class="label svelte-k5uafz">Strangers</td><td class="svelte-k5uafz"> </td></tr><!><!></tbody></table>');function C0(r,e){we(e,!0);var t=be(),s=J(t);{var l=a=>{var c=A0(),v=P(R(c)),u=R(v),f=P(R(u)),d=R(f),m=P(u);{var h=k=>{var C=x0(),N=J(C),L=P(R(N)),q=R(L),T=P(N,2),j=P(R(T)),y=R(j);Z(z=>{pe(q,e.res.outcomes.rolsNum.outlier+e.res.outcomes.rolsNum.extreme),pe(y,z)},[()=>e.res.outcomes.stat.sensitivity.toFixed(3)]),M(k,C)};Y(m,k=>{e.res.nMembers>0&&k(h)})}var g=P(m),p=P(R(g)),b=R(p),w=P(g);{var _=k=>{var C=k0(),N=J(C),L=P(R(N)),q=R(L),T=P(N,2),j=P(R(T)),y=R(j),z=P(T,2),V=P(R(z)),D=R(V);Z((I,W)=>{pe(q,e.res.outcomes.decsNum.in-e.res.outcomes.rolsNum.regular),pe(y,I),pe(D,W)},[()=>e.res.outcomes.stat.specificity.toFixed(3),()=>e.res.outcomes.stat.selectivity.toFixed(3)]),M(k,C)};Y(w,k=>{e.res.nStrangers>0&&k(_)})}var A=P(w);{var E=k=>{var C=E0(),N=P(R(C)),L=R(N);Z(q=>pe(L,q),[()=>e.res.outcomes.stat.efficiency.toFixed(3)]),M(k,C)};Y(A,k=>{e.res.nStrangers>0&&e.res.nMembers>0&&k(E)})}Z(()=>{pe(d,e.res.nMembers),pe(b,e.res.nStrangers)}),M(a,c)};Y(s,a=>{e.res&&a(l)})}M(r,t),_e()}function S0(r,e){we(e,!0);const t=(h,g=Ot)=>{ue(h,{label:"Selected",children:(p,b)=>{Nt(p,{onclick:()=>e.markOutlier(g()),text:"remove"})},$$slots:{default:!0}})},s={test:e.testsetp},l=S(()=>({test:e.testres})),a={regular:gn.regular,extreme:gn.extreme,outlier:gn.outlier},c={alien:gn.alien,external:gn.external},v=S(()=>{const h=e.testres.outcomes;return{members:{classColmap:a,labels:[`regular: ${h.rolsNum.regular}`,`extreme: ${h.rolsNum.extreme}`,`outliers: ${h.rolsNum.outlier}`],values:h.rols,ind:e.testres.ind.members},strangers:{classColmap:c,labels:[`aliens: ${h.rolsNum.alien}`,`external: ${h.rolsNum.external}`],values:h.rols,ind:e.testres.ind.strangers}}}),u=S(()=>({acceptance:{label:"Acceptance",scope:"objects",component:ta,buttons:t},dataset:{label:"Datasets",scope:"objects",component:ra,buttons:t}})),f=Ne({acceptance:na(o(l)),dataset:Mo(["test"])});let d=re(Ne({acceptance:On(f.acceptance),dataset:On(f.dataset)}));ge(()=>{o(v)&&o(d).acceptance.subset&&(o(d).acceptance.colorByObj=o(d).acceptance.subset!=="all"?o(v)[o(d).acceptance.subset]:null)}),ge(()=>{o(d).acceptance.colorBy=o(d).acceptance.subset!=="all"?"roles":"classes"});const m=S(()=>({res:o(l),model:e.nimca,data:s}));$l(r,{get plots(){return o(u)},get controls(){return f},get props(){return o(m)},get params(){return o(d)},set params(h){O(d,h,!0)}}),_e()}var M0=K("<p> </p>"),N0=K('<div class="data-loader svelte-1w77c1q"><!> <!></div>'),j0=K('<div class="outliers-pane svelte-1w77c1q"><!></div>'),T0=K('<div class="buttons"><!> <!></div>'),P0=K('<div class="model-stats svelte-1w77c1q"><!></div> <div class="result-stats svelte-1w77c1q"><!></div>',1),L0=K('<p class="svelte-1w77c1q"><strong>Step 1</strong></p> <p class="svelte-1w77c1q">Load previously trained NIMCA model from file.</p>',1),z0=K(`<p class="svelte-1w77c1q"><strong>Step 2</strong></p> <p class="svelte-1w77c1q">Load test set set from CSV file. The requirements to the file are the same as for the training set (column with
               class labels is mandatory), but test set may contain class labels both for target class (members) as well as for
               alternative classes (strangers).</p>`,1),R0=K(`<div class="help-text svelte-1w77c1q"><p class="svelte-1w77c1q">In this tab you can apply previously trained NIMCA model to a test set. The test set can include target class members,
            objects belonging to alternative classes or both. You can use them for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),I0=K('<div class="app-container svelte-1w77c1q"><div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!> <!> <div class="nimca-settings svelte-1w77c1q"><!> <!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function F0(r,e){we(e,!0);let t=re("");const s=S(()=>e.session.test);ge(()=>{o(s).nimca&&!(o(s).nimca instanceof dr)&&(o(s).nimca=dr.fromJSON(o(s).nimca))});function l(y){if(y<0||y>o(s).testres.nrows-1)return;const z=o(s).testseto.objindices[y];z>=0&&!o(s).outliers.includes(z)&&(o(s).outliers.push(z),o(s).testseto=fs(o(s).testset,o(s).outliers),o(s).testsetp=null,o(s).testres=null)}function a(){o(s).outliers=[],o(s).testseto=o(s).testset,o(s).testsetp=null,o(s).testres=null}function c(){o(s).outliers.pop(),o(s).testseto=fs(o(s).testset,o(s).outliers),o(s).testsetp=null,o(s).testres=null}async function v(y,z){if(O(t,""),!y)return null;if(!z||Object.keys(z).length===0){o(s).testsetp=y;return}e.WASM().then(V=>{const D=Us(V,y.values,y.nresp,z,!1,!1),I=Fl(Vo(y),D);o(s).testsetp=Nl(I,z)}).catch(V=>{o(s).testsetp=null,console.error(V),O(t,V,!0)})}uo(()=>{o(s).testset===null&&(O(t,""),o(s).outliers=[],o(s).testsetp=null,o(s).testseto=null,o(s).testres=null),o(s).nimca===null&&(O(t,""),o(s).outliers=[],o(s).testset=null,o(s).testsetp=null,o(s).testseto=null,o(s).testres=null)}),ge(()=>{o(s).nimca===null&&(O(t,""),o(s).outliers=[],o(s).testset=null,o(s).testsetp=null,o(s).testseto=null,o(s).testres=null)}),ge(()=>{o(s).teset===null&&(O(t,""),o(s).outliers=[],o(s).testsetp=null,o(s).testseto=null,o(s).testres=null)}),ge(()=>{if(o(s).testset&&!o(s).testseto){if(O(t,""),o(s).testset.values.ncols!==o(s).nimca.ncols){O(t,`Wrong number of predictors (expected ${o(s).nimca.ncols}, got ${o(s).testset.values.ncols}), check settings and try to load again.`);return}o(s).testseto=o(s).testset}}),ge(()=>{o(s).testseto&&!o(s).testsetp&&(O(t,""),v(o(s).testseto,o(s).prep))}),ge(()=>{o(s).testsetp&&o(s).nimca&&(o(s).testres=o(s).nimca.predict(o(s).testsetp))}),ge(()=>{const y=wr(()=>JSON.stringify(e.session,Gs));e.backupSession(y,o(s).testset,o(s).testres,o(s).nimca)});var u=I0(),f=R(u),d=R(f),m=R(d);Ic(m,{get nimca(){return o(s).nimca},set nimca(y){o(s).nimca=y},get prep(){return o(s).prep},set prep(y){o(s).prep=y}});var h=P(d,2);{var g=y=>{var z=N0(),V=R(z);Xl(V,{className:"Class",classMandatory:!0,get dataset(){return o(s).testset},set dataset(W){o(s).testset=W}});var D=P(V,2);{var I=W=>{ue(W,{status:"error",children:(le,te)=>{var Q=M0(),ne=R(Q);Z(()=>pe(ne,o(t))),M(le,Q)},$$slots:{default:!0}})};Y(D,W=>{o(t)&&W(I)})}M(y,z)};Y(h,y=>{o(s).nimca&&y(g)})}var p=P(h,2);{var b=y=>{var z=j0(),V=R(z);Rl(V,{get outliers(){return o(s).outliers},get dataset(){return o(s).testset},resetOutliers:a,undoOutliers:c}),M(y,z)};Y(p,y=>{o(s).outliers&&o(s).outliers.length>0&&y(b)})}var w=P(p,2),_=R(w);{var A=y=>{Zl(y,{get className(){return o(s).className},fit:!1,get nimca(){return o(s).nimca},set nimca(z){o(s).nimca=z}})};Y(_,y=>{o(s).nimca&&o(s).testsetp&&y(A)})}var E=P(_,2);{var k=y=>{ue(y,{label:"Download",children:(z,V)=>{var D=T0(),I=R(D);Nt(I,{onclick:()=>jl(o(s).nimca,o(s).testres,o(s).testset,"test",o(s).outliers),text:"Res (test)"});var W=P(I,2);Nt(W,{onclick:()=>Tl(o(s).nimca,o(s).prep),text:"Model"}),M(z,D)},$$slots:{default:!0}})};Y(E,y=>{o(s).nimca&&o(s).testres&&y(k)})}var C=P(w,2);{var N=y=>{var z=P0(),V=J(z),D=R(V);Ql(D,{get nimca(){return o(s).nimca}});var I=P(V,2),W=R(I);C0(W,{get res(){return o(s).testres}}),M(y,z)};Y(C,y=>{o(s).nimca&&o(s).testres&&y(N)})}var L=P(f,2),q=R(L);{var T=y=>{var z=R0(),V=P(R(z),2);{var D=W=>{var le=L0();M(W,le)},I=W=>{var le=be(),te=J(le);{var Q=ne=>{var se=z0();M(ne,se)};Y(te,ne=>{o(s).testset||ne(Q)},!0)}M(W,le)};Y(V,W=>{o(s).nimca?W(I,!1):W(D)})}M(y,z)},j=y=>{var z=be(),V=J(z);{var D=I=>{var W=be(),le=J(W);Pn(le,()=>o(s).testres,te=>{S0(te,cr({markOutlier:l},()=>o(s)))}),M(I,W)};Y(V,I=>{o(s).nimca&&o(s).testres&&I(D)},!0)}M(y,z)};Y(q,y=>{!o(s).nimca||!o(s).testres?y(T):y(j,!1)})}M(r,u),_e()}var q0=K('<table class="svelte-vm8g95"><thead><tr class="svelte-vm8g95"><th class="svelte-vm8g95"></th><th class="svelte-vm8g95">New</th></tr></thead><tbody><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Objects</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">In</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Out</td><td class="svelte-vm8g95"> </td></tr></tbody></table>');function O0(r,e){we(e,!0);var t=be(),s=J(t);{var l=a=>{var c=q0(),v=P(R(c)),u=R(v),f=P(R(u)),d=R(f),m=P(u),h=P(R(m)),g=R(h),p=P(m),b=P(R(p)),w=R(b);Z(()=>{pe(d,e.res.outcomes.decs.length),pe(g,e.res.outcomes.decsNum.in),pe(w,e.res.outcomes.decsNum.out)}),M(a,c)};Y(s,a=>{e.res&&a(l)})}M(r,t),_e()}function B0(r,e){we(e,!0);const t=(f,d=Ot)=>{ue(f,{label:"Selected",children:(m,h)=>{Nt(m,{onclick:()=>e.markOutlier(d()),text:"remove"})},$$slots:{default:!0}})},s={new:e.newsetp},l=S(()=>({new:e.newres})),a=S(()=>({acceptance:{label:"Acceptance",scope:"objects",component:ta,buttons:t},dataset:{label:"Datasets",scope:"objects",component:ra,buttons:t}})),c=Ne({acceptance:na(o(l)),dataset:Mo(["new"])});let v=re(Ne({acceptance:On(c.acceptance),dataset:On(c.dataset)}));ge(()=>{o(v).acceptance.colorByObj={values:e.newres.outcomes.decs,classColmap:{in:Yn.new,out:Yn.new},labels:["in","out"],filled:e.newres.outcomes.decs.map(f=>f==="in"),showBar:!1}});const u=S(()=>({res:o(l),model:e.nimca,data:s}));$l(r,{get plots(){return o(a)},get controls(){return c},get props(){return o(u)},get params(){return o(v)},set params(f){O(v,f,!0)}}),_e()}var D0=K("<p> </p>"),V0=K('<div class="data-loader svelte-1rjc99q"><!> <!></div>'),Y0=K('<div class="outliers-pane svelte-1rjc99q"><!></div>'),W0=K('<div class="buttons"><!> <!></div>'),U0=K('<div class="model-stats svelte-1rjc99q"><!></div> <div class="result-stats svelte-1rjc99q"><!></div>',1),H0=K('<p class="svelte-1rjc99q"><strong>Step 1</strong></p> <p class="svelte-1rjc99q">Load previously trained NIMCA model from file.</p>',1),G0=K(`<p class="svelte-1rjc99q"><strong>Step 2</strong></p> <p class="svelte-1rjc99q">Load data set from CSV file (or SPC files). The requirements to the file are the same as for the
               training set but no columns with reference classes is expected. If you have reference classes, use <em>Test</em> tab.</p>`,1),K0=K(`<div class="help-text svelte-1rjc99q"><p class="svelte-1rjc99q">In this tab you can apply previously trained NIMCA model to a new dataset with objects whose class is unknown (hence the app
            does not expect column with target classes).</p> <!></div>`),J0=K('<div class="app-container svelte-1rjc99q"><div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <div class="nimca-settings svelte-1rjc99q"><!> <!></div> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function X0(r,e){we(e,!0);let t=re("");const s=S(()=>e.session.new);ge(()=>{o(s).nimca&&!(o(s).nimca instanceof dr)&&(o(s).nimca=dr.fromJSON(o(s).nimca))});function l(y){if(y<0||y>o(s).newres.nrows-1)return;const z=o(s).newseto.objindices[y];z>=0&&!o(s).outliers.includes(z)&&(o(s).outliers.push(z),o(s).newseto=fs(o(s).newset,o(s).outliers),o(s).newsetp=null,o(s).newres=null)}function a(){o(s).outliers=[],o(s).newseto=o(s).newset,o(s).newsetp=null,o(s).newres=null}function c(){o(s).outliers.pop(),o(s).newseto=fs(o(s).newset,o(s).outliers),o(s).newsetp=null,o(s).newres=null}async function v(y,z){if(O(t,""),!y)return null;if(!z||Object.keys(z).length===0){o(s).newsetp=y;return}e.WASM().then(V=>{const D=Us(V,y.values,y.nresp,z,!1,!1),I=Fl(Vo(y),D);o(s).newsetp=Nl(I,z)}).catch(V=>{o(s).newsetp=null,console.error(V),O(t,V,!0)})}uo(()=>{o(s).newset===null&&(O(t,""),o(s).outliers=[],o(s).newsetp=null,o(s).newseto=null,o(s).newres=null),o(s).nimca===null&&(O(t,""),o(s).outliers=[],o(s).newset=null,o(s).newsetp=null,o(s).newseto=null,o(s).newres=null)}),ge(()=>{o(s).nimca===null&&(O(t,""),o(s).outliers=[],o(s).newset=null,o(s).newsetp=null,o(s).newseto=null,o(s).newres=null)}),ge(()=>{o(s).newset===null&&(O(t,""),o(s).outliers=[],o(s).newsetp=null,o(s).newseto=null,o(s).newres=null)}),ge(()=>{if(o(s).newset&&!o(s).newseto){if(O(t,""),o(s).newset.values.ncols!==o(s).nimca.ncols){O(t,`Wrong number of predictors (expected ${o(s).nimca.ncols}, got ${o(s).newset.values.ncols}), check settings and try to load again.`);return}o(s).newseto=o(s).newset}}),ge(()=>{o(s).newseto&&!o(s).newsetp&&(O(t,""),v(o(s).newseto,o(s).prep))}),ge(()=>{o(s).newsetp&&o(s).nimca&&(o(s).newres=o(s).nimca.predict(o(s).newsetp))}),ge(()=>{const y=wr(()=>JSON.stringify(e.session,Gs));e.backupSession(y,o(s).newset,o(s).newres,o(s).nimca)});var u=J0(),f=R(u),d=R(f),m=R(d);Ic(m,{get nimca(){return o(s).nimca},set nimca(y){o(s).nimca=y},get prep(){return o(s).prep},set prep(y){o(s).prep=y}});var h=P(d,2);{var g=y=>{var z=V0(),V=R(z);Xl(V,{className:"Class",classMandatory:!1,csvOnly:!1,get dataset(){return o(s).newset},set dataset(W){o(s).newset=W}});var D=P(V,2);{var I=W=>{ue(W,{status:"error",children:(le,te)=>{var Q=D0(),ne=R(Q);Z(()=>pe(ne,o(t))),M(le,Q)},$$slots:{default:!0}})};Y(D,W=>{o(t)&&W(I)})}M(y,z)};Y(h,y=>{o(s).nimca&&y(g)})}var p=P(h,2);{var b=y=>{var z=Y0(),V=R(z);Rl(V,{get outliers(){return o(s).outliers},get dataset(){return o(s).newset},resetOutliers:a,undoOutliers:c}),M(y,z)};Y(p,y=>{o(s).outliers&&o(s).outliers.length>0&&y(b)})}var w=P(p,2),_=R(w);{var A=y=>{Zl(y,{get className(){return o(s).className},isAlt:!0,fit:!1,get nimca(){return o(s).nimca},set nimca(z){o(s).nimca=z}})};Y(_,y=>{o(s).nimca&&o(s).newsetp&&y(A)})}var E=P(_,2);{var k=y=>{ue(y,{label:"Download",children:(z,V)=>{var D=W0(),I=R(D);Nt(I,{onclick:()=>jl(o(s).nimca,o(s).newres,o(s).newset,"new",o(s).outliers),text:"Res (new)"});var W=P(I,2);Nt(W,{onclick:()=>Tl(o(s).nimca,o(s).prep),text:"Model"}),M(z,D)},$$slots:{default:!0}})};Y(E,y=>{o(s).nimca&&o(s).newres&&y(k)})}var C=P(w,2);{var N=y=>{var z=U0(),V=J(z),D=R(V);Ql(D,{get nimca(){return o(s).nimca}});var I=P(V,2),W=R(I);O0(W,{get res(){return o(s).newres}}),M(y,z)};Y(C,y=>{o(s).nimca&&o(s).newres&&y(N)})}var L=P(f,2),q=R(L);{var T=y=>{var z=K0(),V=P(R(z),2);{var D=W=>{var le=H0();M(W,le)},I=W=>{var le=be(),te=J(le);{var Q=ne=>{var se=G0();M(ne,se)};Y(te,ne=>{o(s).newset||ne(Q)})}M(W,le)};Y(V,W=>{o(s).nimca?W(I,!1):W(D)})}M(y,z)},j=y=>{var z=be(),V=J(z);{var D=I=>{var W=be(),le=J(W);Pn(le,()=>o(s).newres,te=>{B0(te,cr({markOutlier:l},()=>o(s)))}),M(I,W)};Y(V,I=>{o(s).nimca&&o(s).newres&&I(D)},!0)}M(y,z)};Y(q,y=>{!o(s).nimca||!o(s).newres?y(T):y(j,!1)})}M(r,u),_e()}var Q0=K('<sup style="color:red">β</sup>'),Z0=K('<li><button class="svelte-1josccy"> </button></li>'),$0=K("<div><!></div>"),em=K('<div class="info-container svelte-1josccy"><!></div>'),tm=K('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function rm(r,e){we(e,!0);let t=B(e,"tabs",19,()=>[]),s=B(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let a=re(!1),c=re(void 0),v=re("Current session "),u=re(!1);function f(L){O(v,L,!0),O(u,!0),setTimeout(()=>{O(v,"Current session "),O(u,!1)},1e3)}function d(){O(a,!0)}function m(){O(a,!1)}function h(L){o(c).tab=L}function g(){const L=indexedDB.open(l,1);L.onsuccess=q=>{const j=q.target.result.transaction(e.appID,"readwrite");j.objectStore(e.appID).delete("session"),j.oncomplete=()=>{O(c,e.initSession(),!0),f("Session was reinitialzed.")},j.onerror=()=>console.error("Failed to session from DB.")}}function p(L,q){window.localStorage.removeItem(e.appID+"-blocked");const T=indexedDB.open(l,1);T.onsuccess=j=>{const V=j.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);V.put(L,"session"),V.put(zl(new Date),"session-update")}}function b(){new Promise((L,q)=>{const T=indexedDB.open(l,1);T.onsuccess=j=>{const D=j.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");D.onsuccess=()=>L(D.result),D.onerror=()=>q(D.error)}}).then(L=>{w(L),O(v,"Last session is restored "),O(u,!0),setTimeout(()=>{O(v,"Current session "),O(u,!1)},1500)}).catch(L=>{console.error(L),O(c,e.initSession(),!0)})}function w(L){if(!L||L==="undefined"){O(c,e.initSession(),!0);return}const q=JSON.parse(L,Ll);O(c,e.checkSession(q)?q:e.initSession(e.appID),!0)}function _(){const L=zl(new Date),q=e.appID+"-session-"+L+".json";o(c).date=L;const T=JSON.stringify(o(c),Gs),j=new Blob([T],{type:"text/json"}),y=window.URL.createObjectURL(j),z=document.createElement("a");z.setAttribute("href",y),z.setAttribute("download",q),z.click()}function A(L){const q=new FileReader;q.onload=()=>{w(q.result),L.target.value=""},q.readAsText(L.target.files[0])}function E(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&g()}kf(()=>{const L=e.appID,q=indexedDB.open(l,1);q.onupgradeneeded=T=>{const j=T.target.result;j.objectStoreNames.contains(L)||j.createObjectStore(L)},q.onsuccess=T=>{b()}});var k=be(),C=J(k);{var N=L=>{var q=tm(),T=R(q),j=R(T),y=R(j),z=P(y,2),V=R(z),D=P(V);{var I=ae=>{var $=Q0();M(ae,$)};Y(D,ae=>{s()&&ae(I)})}var W=P(z,2),le=R(W),te=P(j,2);$e(te,21,t,nt,(ae,$,ve)=>{var ke=Z0();let ce;var ze=R(ke);ze.__click=()=>h(ve),ze.__keydown=()=>h(ve);var Le=R(ze);Z(()=>{ce=yt(ke,1,"nav-item svelte-1josccy",null,ce,{selected:o(c).tab===ve}),pe(Le,o($).name)}),M(ae,ke)});var Q=P(T,2),ne=R(Q);Pn(ne,()=>o(c).date,ae=>{var $=be(),ve=J($);$e(ve,17,t,nt,(ke,ce,ze)=>{var Le=$0();let Ye;var Qe=R(Le);Bs(Qe,()=>o(ce).component,(St,vt)=>{vt(St,{get WASM(){return e.WASM},get session(){return o(c)},backupSession:p})}),Z(()=>Ye=yt(Le,1,"tab-content svelte-1josccy",null,Ye,{hidden:o(c).tab!==ze})),M(ke,Le)}),M(ae,$)});var se=P(Q,2),he=R(se);let fe;var ee=R(he),oe=R(ee),Ae=P(ee,2),De=R(Ae);De.__change=A;var Fe=P(Ae,2);Fe.__click=_;var Ve=P(Fe,2);Ve.__click=E;var qe=P(he,2),Pe=R(qe);Pe.__click=d,Pe.__keydown=d;var Oe=P(Pe,2);Gr(Oe,()=>e.footer);var lt=P(se,2);{var ie=ae=>{hc(ae,{closeModal:m,children:($,ve)=>{var ke=em(),ce=R(ke);Gr(ce,()=>e.info),M($,ke)},$$slots:{default:!0}})};Y(lt,ae=>{o(a)&&ae(ie)})}Z(()=>{F(y,"alt",e.appShortTitle),pe(V,e.appTitle),pe(le,e.appSlogan),fe=yt(he,1,"session svelte-1josccy",null,fe,{"no-buttons":o(u)}),pe(oe,o(v))}),M(L,q)};Y(C,L=>{o(c)&&L(N)})}M(r,k),_e()}ct(["click","keydown","change"]);const mm="modulepreload",gm=function(r){return"/"+r},pm={},nm=function(e,t,s){let l=Promise.resolve();function a(c){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=c,window.dispatchEvent(v),!v.defaultPrevented)throw c}return l.then(c=>{for(const v of c||[])v.status==="rejected"&&a(v.reason);return e().catch(a)})};async function sm(r={}){var Qe,St,vt;var e,t=r,s=!!globalThis.window,l=!!globalThis.WorkerGlobalScope,a=((St=(Qe=globalThis.process)==null?void 0:Qe.versions)==null?void 0:St.node)&&((vt=globalThis.process)==null?void 0:vt.type)!="renderer";if(a){const{createRequire:G}=await nm(async()=>{const{createRequire:U}=await Promise.resolve().then(()=>im);return{createRequire:U}},void 0);var c=G(We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href)}var v="./this.program",u=(G,U)=>{throw U},f=We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href,d="",m,h;if(a){var g=c("fs");f.startsWith("file:")&&(d=c("path").dirname(c("url").fileURLToPath(f))+"/"),h=G=>(G=E(G)?new URL(G):G,g.readFileSync(G)),m=async G=>(G=E(G)?new URL(G):G,g.readFileSync(G,void 0)),1<process.argv.length&&(v=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),u=(G,U)=>{throw process.exitCode=G,U}}else if(s||l){try{d=new URL(".",f).href}catch{}l&&(h=G=>{var U=new XMLHttpRequest;return U.open("GET",G,!1),U.responseType="arraybuffer",U.send(null),new Uint8Array(U.response)}),m=async G=>{if(E(G))return new Promise((X,de)=>{var me=new XMLHttpRequest;me.open("GET",G,!0),me.responseType="arraybuffer",me.onload=()=>{me.status==200||me.status==0&&me.response?X(me.response):de(me.status)},me.onerror=de,me.send(null)});var U=await fetch(G,{credentials:"same-origin"});if(U.ok)return U.arrayBuffer();throw Error(U.status+" : "+U.url)}}var p=console.log.bind(console),b=console.error.bind(console),w,_=!1,A,E=G=>G.startsWith("file://"),k,C,N,L,q,T=!1;function j(){var G=ze.buffer;N=new Int8Array(G),L=new Uint8Array(G),t.HEAP32=new Int32Array(G),q=new Uint32Array(G),t.HEAPF64=new Float64Array(G),new BigInt64Array(G),new BigUint64Array(G)}function y(G){var U;throw(U=t.onAbort)==null||U.call(t,G),G="Aborted("+G+")",b(G),_=!0,G=new WebAssembly.RuntimeError(G+". Build with -sASSERTIONS for more info."),C==null||C(G),G}var z;async function V(G){if(!w)try{var U=await m(G);return new Uint8Array(U)}catch{}if(G==z&&w)G=new Uint8Array(w);else if(h)G=h(G);else throw"both async and sync fetching of the wasm failed";return G}async function D(G,U){try{var X=await V(G);return await WebAssembly.instantiate(X,U)}catch(de){b(`failed to asynchronously prepare wasm: ${de}`),y(de)}}async function I(G){var U=z;if(!w&&!E(U)&&!a)try{var X=fetch(U,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(X,G)}catch(de){b(`wasm streaming compile failed: ${de}`),b("falling back to ArrayBuffer instantiation")}return D(U,G)}class W{constructor(U){kt(this,"name","ExitStatus");this.message=`Program terminated with exit(${U})`,this.status=U}}var le=G=>{for(;0<G.length;)G.shift()(t)},te=[],Q=[],ne=()=>{var G=t.preRun.shift();Q.push(G)},se=!0,he=0,fe={},ee=G=>{var U;A=G,se||0<he||((U=t.onExit)==null||U.call(t,G),_=!0),u(G,new W(G))},oe=G=>{if(!_)try{if(G(),!(se||0<he))try{A=G=A,ee(G)}catch(U){U instanceof W||U=="unwind"||u(1,U)}}catch(U){U instanceof W||U=="unwind"||u(1,U)}},Ae=globalThis.TextDecoder&&new TextDecoder,De=(G,U=0)=>{for(var X=U,de=X+void 0;G[X]&&!(X>=de);)++X;if(16<X-U&&G.buffer&&Ae)return Ae.decode(G.subarray(U,X));for(de="";U<X;){var me=G[U++];if(me&128){var Ce=G[U++]&63;if((me&224)==192)de+=String.fromCharCode((me&31)<<6|Ce);else{var Te=G[U++]&63;me=(me&240)==224?(me&15)<<12|Ce<<6|Te:(me&7)<<18|Ce<<12|Te<<6|G[U++]&63,65536>me?de+=String.fromCharCode(me):(me-=65536,de+=String.fromCharCode(55296|me>>10,56320|me&1023))}}else de+=String.fromCharCode(me)}return de},Fe={},Ve=()=>{if(!qe){var G={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:v||"./this.program"},U;for(U in Fe)Fe[U]===void 0?delete G[U]:G[U]=Fe[U];var X=[];for(U in G)X.push(`${U}=${G[U]}`);qe=X}return qe},qe,Pe=(G,U,X)=>{var de=L;if(!(0<X))return 0;var me=U;X=U+X-1;for(var Ce=0;Ce<G.length;++Ce){var Te=G.codePointAt(Ce);if(127>=Te){if(U>=X)break;de[U++]=Te}else if(2047>=Te){if(U+1>=X)break;de[U++]=192|Te>>6,de[U++]=128|Te&63}else if(65535>=Te){if(U+2>=X)break;de[U++]=224|Te>>12,de[U++]=128|Te>>6&63,de[U++]=128|Te&63}else{if(U+3>=X)break;de[U++]=240|Te>>18,de[U++]=128|Te>>12&63,de[U++]=128|Te>>6&63,de[U++]=128|Te&63,Ce++}}return de[U]=0,U-me},Oe=G=>{for(var U=0,X=0;X<G.length;++X){var de=G.charCodeAt(X);127>=de?U++:2047>=de?U+=2:55296<=de&&57343>=de?(U+=4,++X):U+=3}return U},lt=[null,[],[]],ie=()=>{if(a){var G=c("crypto");return U=>G.randomFillSync(U)}return U=>crypto.getRandomValues(U)},ae=G=>{(ae=ie())(G)};if(t.noExitRuntime&&(se=t.noExitRuntime),t.print&&(p=t.print),t.printErr&&(b=t.printErr),t.wasmBinary&&(w=t.wasmBinary),t.thisProgram&&(v=t.thisProgram),t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.shift()();t.ccall=(G,U,X,de)=>{var me={string:xt=>{var Ze=0;if(xt!=null&&xt!==0){Ze=Oe(xt)+1;var ot=ke(Ze);Pe(xt,ot,Ze),Ze=ot}return Ze},array:xt=>{var Ze=ke(xt.length);return N.set(xt,Ze),Ze}};G=t["_"+G];var Ce=[],Te=0;if(de)for(var It=0;It<de.length;It++){var qr=me[X[It]];qr?(Te===0&&(Te=ce()),Ce[It]=qr(de[It])):Ce[It]=de[It]}return X=G(...Ce),X=(function(xt){return Te!==0&&ve(Te),U==="string"?xt?De(L,xt):"":U==="boolean"?!!xt:xt})(X)};var $,ve,ke,ce,ze,Le={g:()=>y(""),j:()=>{se=!1,he=0},k:(G,U)=>{if(fe[G]&&(clearTimeout(fe[G].id),delete fe[G]),!U)return 0;var X=setTimeout(()=>{delete fe[G],oe(()=>$(G,performance.now()))},U);return fe[G]={id:X,U},0},a:()=>Date.now(),c:G=>b(G?De(L,G):""),b:()=>performance.now(),l:G=>{var U=L.length;if(G>>>=0,2147483648<G)return!1;for(var X=1;4>=X;X*=2){var de=U*(1+.2/X);de=Math.min(de,G+100663296);e:{de=(Math.min(2147483648,65536*Math.ceil(Math.max(G,de)/65536))-ze.buffer.byteLength+65535)/65536|0;try{ze.grow(de),j();var me=1;break e}catch{}me=void 0}if(me)return!0}return!1},e:(G,U)=>{var X=0,de=0,me;for(me of Ve()){var Ce=U+X;q[G+de>>2]=Ce,X+=Pe(me,Ce,1/0)+1,de+=4}return 0},f:(G,U)=>{var X=Ve();q[G>>2]=X.length,G=0;for(var de of X)G+=Oe(de)+1;return q[U>>2]=G,0},h:(G,U,X,de)=>{for(var me=0,Ce=0;Ce<X;Ce++){var Te=q[U>>2],It=q[U+4>>2];U+=8;for(var qr=0;qr<It;qr++){var xt=G,Ze=L[Te+qr],ot=lt[xt];Ze===0||Ze===10?((xt===1?p:b)(De(ot)),ot.length=0):ot.push(Ze)}me+=It}return q[de>>2]=me,0},i:ee,d:(G,U)=>(ae(L.subarray(G,G+U)),0)},Ye;return Ye=await(async function(){function G(X){return X=Ye=X.exports,t._pcafit_wasm=X.o,t._free=X.p,t._malloc=X.q,t._pcapredict_wasm=X.r,t._pcvpca_wasm=X.s,t._prepfit_wasm=X.t,t._prepapply_wasm=X.u,$=X.v,t._strdup=X.w,t._strndup=X.x,t.__ZdaPv=X.y,t.__ZdaPvm=X.z,t.__ZdlPv=X.A,t.__ZdlPvm=X.B,t.__Znaj=X.C,t.__ZnajSt11align_val_t=X.D,t.__Znwj=X.E,t.__ZnwjSt11align_val_t=X.F,t.___libc_calloc=X.G,t.___libc_free=X.H,t.___libc_malloc=X.I,t.___libc_realloc=X.J,t._emscripten_builtin_malloc=X.K,t._emscripten_builtin_calloc=X.L,t._emscripten_builtin_free=X.M,t._emscripten_builtin_realloc=X.N,t._malloc_size=X.O,t._malloc_usable_size=X.P,t._reallocf=X.Q,ve=X.R,ke=X.S,ce=X.T,ze=X.m,j(),Ye}var U={a:Le};return t.instantiateWasm?new Promise(X=>{t.instantiateWasm(U,(de,me)=>{X(G(de))})}):(z??(z=t.locateFile?t.locateFile?t.locateFile("pca_wasm.wasm",d):d+"pca_wasm.wasm":new URL("/nimca.wasm",We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href).href),G((await I(U)).instance))})(),(function(){function G(){var X;if(t.calledRun=!0,!_){if(T=!0,Ye.n(),k==null||k(t),(X=t.onRuntimeInitialized)==null||X.call(t),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var U=t.postRun.shift();te.push(U)}le(te)}}if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)ne();le(Q),t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),G()},1)):G()})(),T?e=t:e=new Promise((G,U)=>{k=G,C=U}),e}var om=K('<p>Current release: <span>1.2.0</span> &nbsp;Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=NIMCA app">help@mda.tools</a></p>'),lm=K(`<h2>NIMCA</h2> <p>Authors: <em>Oxana Rodionova, Alexey Pomerantsev, Sergey Kucheryavskiy</em></p> <p>Interactive web-application for creating and using Naïve DD-SIMCA (NIMCA) one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check <a href="">paper</a></p> <h3>v. 1.2.0</h3> <p class="release-info">released 24/11/2025</p> <ul><li>Corrected help text in Train tab.</li> <li>Dataset plot now show centered/scaled values.</li></ul>`,1);function am(r,e){we(e,!1);function t(a){const c=Object.keys(a);if(!["date","tab","train","test","new"].every(d=>c.includes(d)))return!1;const v=Object.keys(a.train);if(!["nimca","calset","calres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(d=>v.includes(d)))return!1;const u=Object.keys(a.test);if(!["nimca","prep","testset","testres","outliers"].every(d=>u.includes(d)))return!1;const f=Object.keys(a.new);return!!["nimca","prep","newset","newres","outliers"].every(d=>f.includes(d))}function s(){return{date:zl(new Date),tab:0,train:{nimca:0,calset:0,calseto:0,calsetp:0,calres:0,outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{nimca:0,prep:0,testset:0,testseto:0,testres:0,outliers:[],ind:null},new:{nimca:0,prep:0,newset:0,newres:0,outliers:[]}}}const l=[{name:"Train",label:"train",component:g0},{name:"Test",label:"test",component:F0},{name:"Predict",label:"new",component:X0}];wf(),rm(r,{appID:"nimca",appTitle:"NIMCA",appShortTitle:"NIMCA",appSlogan:"Naïve DD-SIMCA classifier",get WASM(){return sm},get tabs(){return l},initSession:s,checkSession:t,footer:v=>{var u=om();M(v,u)},info:v=>{var u=lm();M(v,u)},$$slots:{footer:!0,info:!0}}),_e()}ef(am,{target:document.body});const im=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=nimca.js.map
