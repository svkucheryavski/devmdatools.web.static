var Fm=Object.defineProperty;var Dc=st=>{throw TypeError(st)};var qm=(st,He,pt)=>He in st?Fm(st,He,{enumerable:!0,configurable:!0,writable:!0,value:pt}):st[He]=pt;var zt=(st,He,pt)=>qm(st,typeof He!="symbol"?He+"":He,pt),ta=(st,He,pt)=>He.has(st)||Dc("Cannot "+pt);var Z=(st,He,pt)=>(ta(st,He,"read from private field"),pt?pt.call(st):He.get(st)),je=(st,He,pt)=>He.has(st)?Dc("Cannot add the same private member more than once"):He instanceof WeakSet?He.add(st):He.set(st,pt),ye=(st,He,pt,un)=>(ta(st,He,"write to private field"),un?un.call(st,pt):He.set(st,pt),pt),Rt=(st,He,pt)=>(ta(st,He,"access private method"),pt);(function(){"use strict";var zs,rs,rn,Rs,Is,Rn,ns,In,nn,ss,Fs,qs,pr,Vc,Ao,ra,br,lr,$l,xr,Fn,kr,ar,Ht,Er,sn,qn,on,On,ln,yo,xo,Ot,Om,Bm,Co,So,na,an,os,Os,ko,Yc,Bc,Le,lt,ft,ls,as,is,cs,us,fs,vs,ds,hs,ms;var st=document.createElement("style");st.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media (min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media (min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1fhdfcc{width:100%;border-collapse:collapse}tr.svelte-1fhdfcc{width:100%}th.svelte-1fhdfcc{border-bottom:1px solid #a0a0a0}th.svelte-1fhdfcc,td.svelte-1fhdfcc{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1fhdfcc{text-align:left;padding:.1em .5em}table.svelte-1bca91p{width:100%;border-collapse:collapse}tr.svelte-1bca91p{width:100%}th.svelte-1bca91p{border-bottom:1px solid #a0a0a0}th.svelte-1bca91p,td.svelte-1bca91p{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1bca91p{text-align:left;padding:.1em .5em}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.plot-container.svelte-1838sos{width:100%;height:100%}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(325px,30%) 1fr}}.model-info.svelte-7h7avz{line-height:1.5em}.model-info.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-k5uafz{width:100%;border-collapse:collapse}tr.svelte-k5uafz{width:100%}th.svelte-k5uafz{border-bottom:1px solid #a0a0a0}tr.section.svelte-k5uafz>td:where(.svelte-k5uafz){border-top:1px solid #a0a0a0}th.svelte-k5uafz,td.svelte-k5uafz{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-k5uafz{text-align:left;padding:.1em .5em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(325px,30%) 1fr}}table.svelte-vm8g95{width:100%;border-collapse:collapse}tr.svelte-vm8g95{width:100%}th.svelte-vm8g95{border-bottom:1px solid #a0a0a0}th.svelte-vm8g95,td.svelte-vm8g95{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-vm8g95{text-align:left;padding:.1em .5em}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){background:#e8e8e8}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(325px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(st);var He=typeof document<"u"?document.currentScript:null;const pt=!1;var un=Array.isArray,Wc=Array.prototype.indexOf,No=Array.from,Mo=Object.defineProperty,Ir=Object.getOwnPropertyDescriptor,sa=Object.getOwnPropertyDescriptors,oa=Object.prototype,Uc=Array.prototype,Ds=Object.getPrototypeOf,la=Object.isExtensible;function Dn(r){return typeof r=="function"}const At=()=>{};function Hc(r){return typeof(r==null?void 0:r.then)=="function"}function Gc(r){return r()}function Vs(r){for(var e=0;e<r.length;e++)r[e]()}function Kc(){var r,e,t=new Promise((s,l)=>{r=s,e=l});return{promise:t,resolve:r,reject:e}}function jo(r,e){if(Array.isArray(r))return r;if(e===void 0||!(Symbol.iterator in r))return Array.from(r);const t=[];for(const s of r)if(t.push(s),t.length===e)break;return t}const Gt=2,To=4,Ys=8,fn=16,Cr=32,vn=64,Po=128,Qt=256,Ws=512,Tt=1024,Zt=2048,Fr=4096,ir=8192,dn=16384,Us=32768,hn=65536,aa=1<<17,Jc=1<<18,Vn=1<<19,ia=1<<20,Lo=1<<21,zo=1<<22,mn=1<<23,qr=Symbol("$state"),ca=Symbol("legacy props"),Xc=Symbol(""),Ro=new class extends Error{constructor(){super(...arguments);zt(this,"name","StaleReactionError");zt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ua(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Qc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Zc(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function $c(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function eu(r){throw new Error("https://svelte.dev/e/effect_orphan")}function tu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ru(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function nu(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function su(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ou(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function lu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Hs=1,Gs=2,fa=4,au=8,iu=16,cu=1,uu=2,fu=4,vu=8,du=16,hu=1,mu=2,gu=4,va=1,pu=2,bt=Symbol(),bu="http://www.w3.org/1999/xhtml";function wu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let _u=!1;function da(r){return r===this.v}function ha(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function yu(r,e){return r!==e}function ma(r){return!ha(r,this.v)}let Yn=!1,xu=!1;function ku(){Yn=!0}const Eu=[];function Io(r,e=!1,t=!1){return Ks(r,new Map,"",Eu,null,t)}function Ks(r,e,t,s,l=null,a=!1){if(typeof r=="object"&&r!==null){var c=e.get(r);if(c!==void 0)return c;if(r instanceof Map)return new Map(r);if(r instanceof Set)return new Set(r);if(un(r)){var f=Array(r.length);e.set(r,f),l!==null&&e.set(l,f);for(var u=0;u<r.length;u+=1){var v=r[u];u in r&&(f[u]=Ks(v,e,t,s,null,a))}return f}if(Ds(r)===oa){f={},e.set(r,f),l!==null&&e.set(l,f);for(var d in r)f[d]=Ks(r[d],e,t,s,null,a);return f}if(r instanceof Date)return structuredClone(r);if(typeof r.toJSON=="function"&&!a)return Ks(r.toJSON(),e,t,s,r)}if(r instanceof EventTarget)return r;try{return structuredClone(r)}catch{return r}}let et=null;function Or(r){et=r}function Vt(r){return ga().get(r)}function Au(r,e){return ga().set(r,e),e}function be(r,e=!1,t){et={p:et,c:null,e:null,s:r,x:null,l:Yn&&!e?{s:null,u:null,$:[]}:null}}function we(r){var e=et,t=e.e;if(t!==null){e.e=null;for(var s of t)Pa(s)}return et=e.p,{}}function gn(){return!Yn||et!==null&&et.l===null}function ga(r){return et===null&&ua(),et.c??(et.c=new Map(Cu(et)||void 0))}function Cu(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}let Br=[],Js=[];function pa(){var r=Br;Br=[],Vs(r)}function Su(){var r=Js;Js=[],Vs(r)}function Nu(){return Br.length>0||Js.length>0}function Dr(r){if(Br.length===0&&!ps){var e=Br;queueMicrotask(()=>{e===Br&&pa()})}Br.push(r)}function Mu(){Br.length>0&&pa(),Js.length>0&&Su()}const ju=new WeakMap;function ba(r){var e=Ve;if(e===null)return De.f|=mn,r;if((e.f&Us)===0){if((e.f&Po)===0)throw!e.parent&&r instanceof Error&&wa(r),r;e.b.error(r)}else Wn(r,e)}function Wn(r,e){for(;e!==null;){if((e.f&Po)!==0)try{e.b.error(r);return}catch(t){r=t}e=e.parent}throw r instanceof Error&&wa(r),r}function wa(r){const e=ju.get(r);e&&(Mo(r,"message",{value:e.message}),Mo(r,"stack",{value:e.stack}))}const Fo=new Set;let Qe=null,Xs=null,qo=new Set,pn=[],Qs=null,Oo=!1,ps=!1;const _o=class _o{constructor(){je(this,pr);zt(this,"current",new Map);je(this,zs,new Map);je(this,rs,new Set);je(this,rn,0);je(this,Rs,null);je(this,Is,!1);je(this,Rn,[]);je(this,ns,[]);je(this,In,[]);je(this,nn,[]);je(this,ss,[]);je(this,Fs,[]);je(this,qs,[]);zt(this,"skipped_effects",new Set)}process(e){var l;pn=[],Xs=null;for(const a of e)Rt(this,pr,Vc).call(this,a);if(Z(this,Rn).length===0&&Z(this,rn)===0){Rt(this,pr,ra).call(this);var t=Z(this,In),s=Z(this,nn);ye(this,In,[]),ye(this,nn,[]),ye(this,ss,[]),Xs=Qe,Qe=null,xa(t),xa(s),Qe===null?Qe=this:Fo.delete(this),(l=Z(this,Rs))==null||l.resolve()}else Rt(this,pr,Ao).call(this,Z(this,In)),Rt(this,pr,Ao).call(this,Z(this,nn)),Rt(this,pr,Ao).call(this,Z(this,ss));for(const a of Z(this,Rn))Kn(a);for(const a of Z(this,ns))Kn(a);ye(this,Rn,[]),ye(this,ns,[])}capture(e,t){Z(this,zs).has(e)||Z(this,zs).set(e,t),this.current.set(e,e.v)}activate(){Qe=this}deactivate(){Qe=null,Xs=null;for(const e of qo)if(qo.delete(e),e(),Qe!==null)break}neuter(){ye(this,Is,!0)}flush(){pn.length>0?ya():Rt(this,pr,ra).call(this),Qe===this&&(Z(this,rn)===0&&Fo.delete(this),this.deactivate())}increment(){ye(this,rn,Z(this,rn)+1)}decrement(){if(ye(this,rn,Z(this,rn)-1),Z(this,rn)===0){for(const e of Z(this,Fs))Yt(e,Zt),Un(e);for(const e of Z(this,qs))Yt(e,Fr),Un(e);ye(this,In,[]),ye(this,nn,[]),this.flush()}else this.deactivate()}add_callback(e){Z(this,rs).add(e)}settled(){return(Z(this,Rs)??ye(this,Rs,Kc())).promise}static ensure(){if(Qe===null){const e=Qe=new _o;Fo.add(Qe),ps||_o.enqueue(()=>{Qe===e&&e.flush()})}return Qe}static enqueue(e){Dr(e)}};zs=new WeakMap,rs=new WeakMap,rn=new WeakMap,Rs=new WeakMap,Is=new WeakMap,Rn=new WeakMap,ns=new WeakMap,In=new WeakMap,nn=new WeakMap,ss=new WeakMap,Fs=new WeakMap,qs=new WeakMap,pr=new WeakSet,Vc=function(e){var d;e.f^=Tt;for(var t=e.first;t!==null;){var s=t.f,l=(s&(Cr|vn))!==0,a=l&&(s&Tt)!==0,c=a||(s&ir)!==0||this.skipped_effects.has(t);if(!c&&t.fn!==null){if(l)t.f^=Tt;else if((s&To)!==0)Z(this,nn).push(t);else if((s&Tt)===0)if((s&zo)!==0){var f=(d=t.b)!=null&&d.is_pending()?Z(this,ns):Z(this,Rn);f.push(t)}else eo(t)&&((t.f&fn)!==0&&Z(this,ss).push(t),Kn(t));var u=t.first;if(u!==null){t=u;continue}}var v=t.parent;for(t=t.next;t===null&&v!==null;)t=v.next,v=v.parent}},Ao=function(e){for(const t of e)((t.f&Zt)!==0?Z(this,Fs):Z(this,qs)).push(t),Yt(t,Tt);e.length=0},ra=function(){if(!Z(this,Is))for(const e of Z(this,rs))e();Z(this,rs).clear()};let Vr=_o;function _a(r){var e=ps;ps=!0;try{for(var t;;){if(Mu(),pn.length===0&&!Nu()&&(Qe==null||Qe.flush(),pn.length===0))return Qs=null,t;ya()}}finally{ps=e}}function ya(){var r=Gn;Oo=!0;try{var e=0;for(Oa(!0);pn.length>0;){var t=Vr.ensure();if(e++>1e3){var s,l;Tu()}t.process(pn),Yr.clear()}}finally{Oo=!1,Oa(r),Qs=null}}function Tu(){try{tu()}catch(r){Wn(r,Qs)}}let Sr=null;function xa(r){var e=r.length;if(e!==0){for(var t=0;t<e;){var s=r[t++];if((s.f&(dn|ir))===0&&eo(s)&&(Sr=[],Kn(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?Ia(s):s.fn=null),(Sr==null?void 0:Sr.length)>0)){Yr.clear();for(const l of Sr)Kn(l);Sr=[]}}Sr=null}}function Un(r){for(var e=Qs=r;e.parent!==null;){e=e.parent;var t=e.f;if(Oo&&e===Ve&&(t&fn)!==0)return;if((t&(vn|Cr))!==0){if((t&Tt)===0)return;e.f^=Tt}}pn.push(e)}function Pu(r){let e=0,t=Nr(0),s;return()=>{Hu()&&(o(t),Uo(()=>(e===0&&(s=fr(()=>r(()=>ws(t)))),e+=1,()=>{Dr(()=>{e-=1,e===0&&(s==null||s(),s=void 0,ws(t))})})))}}var Lu=hn|Vn|Po;function zu(r,e,t){new Ru(r,e,t)}class Ru{constructor(e,t,s){je(this,Ot);zt(this,"parent");je(this,br,!1);je(this,lr);je(this,$l,null);je(this,xr);je(this,Fn);je(this,kr);je(this,ar,null);je(this,Ht,null);je(this,Er,null);je(this,sn,null);je(this,qn,0);je(this,on,0);je(this,On,!1);je(this,ln,null);je(this,yo,()=>{Z(this,ln)&&Mr(Z(this,ln),Z(this,qn))});je(this,xo,Pu(()=>(ye(this,ln,Nr(Z(this,qn))),()=>{ye(this,ln,null)})));ye(this,lr,e),ye(this,xr,t),ye(this,Fn,s),this.parent=Ve.b,ye(this,br,!!Z(this,xr).pending),ye(this,kr,bn(()=>{Ve.b=this;{try{ye(this,ar,Pt(()=>s(Z(this,lr))))}catch(l){this.error(l)}Z(this,on)>0?Rt(this,Ot,So).call(this):ye(this,br,!1)}},Lu))}is_pending(){return Z(this,br)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!Z(this,xr).pending}update_pending_count(e){Rt(this,Ot,na).call(this,e),ye(this,qn,Z(this,qn)+e),qo.add(Z(this,yo))}get_effect_pending(){return Z(this,xo).call(this),o(Z(this,ln))}error(e){var t=Z(this,xr).onerror;let s=Z(this,xr).failed;if(Z(this,On)||!t&&!s)throw e;Z(this,ar)&&(Jt(Z(this,ar)),ye(this,ar,null)),Z(this,Ht)&&(Jt(Z(this,Ht)),ye(this,Ht,null)),Z(this,Er)&&(Jt(Z(this,Er)),ye(this,Er,null));var l=!1,a=!1;const c=()=>{if(l){wu();return}l=!0,a&&lu(),Vr.ensure(),ye(this,qn,0),Z(this,Er)!==null&&cr(Z(this,Er),()=>{ye(this,Er,null)}),ye(this,br,this.has_pending_snippet()),ye(this,ar,Rt(this,Ot,Co).call(this,()=>(ye(this,On,!1),Pt(()=>Z(this,Fn).call(this,Z(this,lr)))))),Z(this,on)>0?Rt(this,Ot,So).call(this):ye(this,br,!1)};var f=De;try{Lt(null),a=!0,t==null||t(e,c),a=!1}catch(u){Wn(u,Z(this,kr)&&Z(this,kr).parent)}finally{Lt(f)}s&&Dr(()=>{ye(this,Er,Rt(this,Ot,Co).call(this,()=>{ye(this,On,!0);try{return Pt(()=>{s(Z(this,lr),()=>e,()=>c)})}catch(u){return Wn(u,Z(this,kr).parent),null}finally{ye(this,On,!1)}}))})}}br=new WeakMap,lr=new WeakMap,$l=new WeakMap,xr=new WeakMap,Fn=new WeakMap,kr=new WeakMap,ar=new WeakMap,Ht=new WeakMap,Er=new WeakMap,sn=new WeakMap,qn=new WeakMap,on=new WeakMap,On=new WeakMap,ln=new WeakMap,yo=new WeakMap,xo=new WeakMap,Ot=new WeakSet,Om=function(){try{ye(this,ar,Pt(()=>Z(this,Fn).call(this,Z(this,lr))))}catch(e){this.error(e)}ye(this,br,!1)},Bm=function(){const e=Z(this,xr).pending;e&&(ye(this,Ht,Pt(()=>e(Z(this,lr)))),Vr.enqueue(()=>{ye(this,ar,Rt(this,Ot,Co).call(this,()=>(Vr.ensure(),Pt(()=>Z(this,Fn).call(this,Z(this,lr)))))),Z(this,on)>0?Rt(this,Ot,So).call(this):(cr(Z(this,Ht),()=>{ye(this,Ht,null)}),ye(this,br,!1))}))},Co=function(e){var t=Ve,s=De,l=et;$t(Z(this,kr)),Lt(Z(this,kr)),Or(Z(this,kr).ctx);try{return e()}catch(a){return ba(a),null}finally{$t(t),Lt(s),Or(l)}},So=function(){const e=Z(this,xr).pending;Z(this,ar)!==null&&(ye(this,sn,document.createDocumentFragment()),Iu(Z(this,ar),Z(this,sn))),Z(this,Ht)===null&&ye(this,Ht,Pt(()=>e(Z(this,lr))))},na=function(e){var t;if(!this.has_pending_snippet()){this.parent&&Rt(t=this.parent,Ot,na).call(t,e);return}ye(this,on,Z(this,on)+e),Z(this,on)===0&&(ye(this,br,!1),Z(this,Ht)&&cr(Z(this,Ht),()=>{ye(this,Ht,null)}),Z(this,sn)&&(Z(this,lr).before(Z(this,sn)),ye(this,sn,null)))};function Iu(r,e){for(var t=r.nodes_start,s=r.nodes_end;t!==null;){var l=t===s?null:_s(t);e.append(t),t=l}}function Fu(r,e,t){const s=gn()?bs:Bo;if(e.length===0){t(r.map(s));return}var l=Qe,a=Ve,c=qu();Promise.all(e.map(f=>Ou(f))).then(f=>{l==null||l.activate(),c();try{t([...r.map(s),...f])}catch(u){(a.f&dn)===0&&Wn(u,a)}l==null||l.deactivate(),ka()}).catch(f=>{Wn(f,a)})}function qu(){var r=Ve,e=De,t=et,s=Qe;return function(){$t(r),Lt(e),Or(t),s==null||s.activate()}}function ka(){$t(null),Lt(null),Or(null)}function bs(r){var e=Gt|Zt,t=De!==null&&(De.f&Gt)!==0?De:null;return Ve===null||t!==null&&(t.f&Qt)!==0?e|=Qt:Ve.f|=Vn,{ctx:et,deps:null,effects:null,equals:da,f:e,fn:r,reactions:null,rv:0,v:bt,wv:0,parent:t??Ve,ac:null}}function Ou(r,e){let t=Ve;t===null&&Qc();var s=t.b,l=void 0,a=Nr(bt),c=null,f=!De;return Ju(()=>{try{var u=r();c&&Promise.resolve(u).catch(()=>{})}catch(g){u=Promise.reject(g)}var v=()=>u;l=(c==null?void 0:c.then(v,v))??Promise.resolve(u),c=l;var d=Qe,h=s.is_pending();f&&(s.update_pending_count(1),h||d.increment());const m=(g,p=void 0)=>{c=null,h||d.activate(),p?p!==Ro&&(a.f|=mn,Mr(a,p)):((a.f&mn)!==0&&(a.f^=mn),Mr(a,g)),f&&(s.update_pending_count(-1),h||d.decrement()),ka()};if(l.then(m,g=>m(null,g||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(u=>{function v(d){function h(){d===l?u(a):v(l)}d.then(h,h)}v(l)})}function S(r){const e=bs(r);return Da(e),e}function Bo(r){const e=bs(r);return e.equals=ma,e}function Ea(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)Jt(e[t])}}function Bu(r){for(var e=r.parent;e!==null;){if((e.f&Gt)===0)return e;e=e.parent}return null}function Do(r){var e,t=Ve;$t(Bu(r));try{Ea(r),e=Ha(r)}finally{$t(t)}return e}function Aa(r){var e=Do(r);if(r.equals(e)||(r.v=e,r.wv=Wa()),!wn){var t=(Ur||(r.f&Qt)!==0)&&r.deps!==null?Fr:Tt;Yt(r,t)}}const Yr=new Map;function Nr(r,e){var t={f:0,v:r,reactions:null,equals:da,rv:0,wv:0};return t}function ne(r,e){const t=Nr(r);return Da(t),t}function Vo(r,e=!1,t=!0){var l;const s=Nr(r);return e||(s.equals=ma),Yn&&t&&et!==null&&et.l!==null&&((l=et.l).s??(l.s=[])).push(s),s}function q(r,e,t=!1){De!==null&&(!ur||(De.f&aa)!==0)&&gn()&&(De.f&(Gt|fn|zo|aa))!==0&&!(It!=null&&It.includes(r))&&ou();let s=t?Te(e):e;return Mr(r,s)}function Mr(r,e){if(!r.equals(e)){var t=r.v;wn?Yr.set(r,e):Yr.set(r,t),r.v=e;var s=Vr.ensure();s.capture(r,t),(r.f&Gt)!==0&&((r.f&Zt)!==0&&Do(r),Yt(r,(r.f&Qt)===0?Tt:Fr)),r.wv=Wa(),Ca(r,Zt),gn()&&Ve!==null&&(Ve.f&Tt)!==0&&(Ve.f&(Cr|vn))===0&&(er===null?Qu([r]):er.push(r))}return e}function ws(r){q(r,r.v+1)}function Ca(r,e){var t=r.reactions;if(t!==null)for(var s=gn(),l=t.length,a=0;a<l;a++){var c=t[a],f=c.f;if(!(!s&&c===Ve)){var u=(f&Zt)===0;u&&Yt(c,e),(f&Gt)!==0?Ca(c,Fr):u&&((f&fn)!==0&&Sr!==null&&Sr.push(c),Un(c))}}}function Te(r){if(typeof r!="object"||r===null||qr in r)return r;const e=Ds(r);if(e!==oa&&e!==Uc)return r;var t=new Map,s=un(r),l=ne(0),a=_n,c=f=>{if(_n===a)return f();var u=De,v=_n;Lt(null),Ya(a);var d=f();return Lt(u),Ya(v),d};return s&&t.set("length",ne(r.length)),new Proxy(r,{defineProperty(f,u,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&nu();var d=t.get(u);return d===void 0?d=c(()=>{var h=ne(v.value);return t.set(u,h),h}):q(d,v.value,!0),!0},deleteProperty(f,u){var v=t.get(u);if(v===void 0){if(u in f){const d=c(()=>ne(bt));t.set(u,d),ws(l)}}else q(v,bt),ws(l);return!0},get(f,u,v){var g;if(u===qr)return r;var d=t.get(u),h=u in f;if(d===void 0&&(!h||(g=Ir(f,u))!=null&&g.writable)&&(d=c(()=>{var p=Te(h?f[u]:bt),b=ne(p);return b}),t.set(u,d)),d!==void 0){var m=o(d);return m===bt?void 0:m}return Reflect.get(f,u,v)},getOwnPropertyDescriptor(f,u){var v=Reflect.getOwnPropertyDescriptor(f,u);if(v&&"value"in v){var d=t.get(u);d&&(v.value=o(d))}else if(v===void 0){var h=t.get(u),m=h==null?void 0:h.v;if(h!==void 0&&m!==bt)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return v},has(f,u){var m;if(u===qr)return!0;var v=t.get(u),d=v!==void 0&&v.v!==bt||Reflect.has(f,u);if(v!==void 0||Ve!==null&&(!d||(m=Ir(f,u))!=null&&m.writable)){v===void 0&&(v=c(()=>{var g=d?Te(f[u]):bt,p=ne(g);return p}),t.set(u,v));var h=o(v);if(h===bt)return!1}return d},set(f,u,v,d){var E;var h=t.get(u),m=u in f;if(s&&u==="length")for(var g=v;g<h.v;g+=1){var p=t.get(g+"");p!==void 0?q(p,bt):g in f&&(p=c(()=>ne(bt)),t.set(g+"",p))}if(h===void 0)(!m||(E=Ir(f,u))!=null&&E.writable)&&(h=c(()=>ne(void 0)),q(h,Te(v)),t.set(u,h));else{m=h.v!==bt;var b=c(()=>Te(v));q(h,b)}var w=Reflect.getOwnPropertyDescriptor(f,u);if(w!=null&&w.set&&w.set.call(d,v),!m){if(s&&typeof u=="string"){var _=t.get("length"),k=Number(u);Number.isInteger(k)&&k>=_.v&&q(_,k+1)}ws(l)}return!0},ownKeys(f){o(l);var u=Reflect.ownKeys(f).filter(h=>{var m=t.get(h);return m===void 0||m.v!==bt});for(var[v,d]of t)d.v!==bt&&!(v in f)&&u.push(v);return u},setPrototypeOf(){su()}})}var Yo,Sa,Na,Ma;function Du(){if(Yo===void 0){Yo=window,Sa=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Na=Ir(e,"firstChild").get,Ma=Ir(e,"nextSibling").get,la(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),la(t)&&(t.__t=void 0)}}function Wr(r=""){return document.createTextNode(r)}function Kt(r){return Na.call(r)}function _s(r){return Ma.call(r)}function L(r,e){return Kt(r)}function K(r,e=!1){{var t=Kt(r);return t instanceof Comment&&t.data===""?_s(t):t}}function P(r,e=1,t=!1){let s=r;for(;e--;)s=_s(s);return s}function Vu(r){r.textContent=""}function Zs(){return!1}let ja=!1;function Yu(){ja||(ja=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Hn(r){var e=De,t=Ve;Lt(null),$t(null);try{return r()}finally{Lt(e),$t(t)}}function Wu(r,e,t,s=t){r.addEventListener(e,()=>Hn(t));const l=r.__on_r;l?r.__on_r=()=>{l(),s(!0)}:r.__on_r=()=>s(!0),Yu()}function Ta(r){Ve===null&&De===null&&eu(),De!==null&&(De.f&Qt)!==0&&Ve===null&&$c(),wn&&Zc()}function Uu(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function wr(r,e,t,s=!0){var l=Ve;l!==null&&(l.f&ir)!==0&&(r|=ir);var a={ctx:et,deps:null,nodes_start:null,nodes_end:null,f:r|Zt,first:null,fn:e,last:null,next:null,parent:l,b:l&&l.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Kn(a),a.f|=Us}catch(u){throw Jt(a),u}else e!==null&&Un(a);if(s){var c=a;if(t&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&Vn)===0&&(c=c.first),c!==null&&(c.parent=l,l!==null&&Uu(c,l),De!==null&&(De.f&Gt)!==0&&(r&vn)===0)){var f=De;(f.effects??(f.effects=[])).push(c)}}return a}function Hu(){return De!==null&&!ur}function Gu(r){const e=wr(Ys,null,!1);return Yt(e,Tt),e.teardown=r,e}function he(r){Ta();var e=Ve.f,t=!De&&(e&Cr)!==0&&(e&Us)===0;if(t){var s=et;(s.e??(s.e=[])).push(r)}else return Pa(r)}function Pa(r){return wr(To|ia,r,!1)}function $s(r){return Ta(),wr(Ys|ia,r,!0)}function Ku(r){Vr.ensure();const e=wr(vn|Vn,r,!0);return(t={})=>new Promise(s=>{t.outro?cr(e,()=>{Jt(e),s(void 0)}):(Jt(e),s(void 0))})}function Wo(r){return wr(To,r,!1)}function Ju(r){return wr(zo|Vn,r,!0)}function Uo(r,e=0){return wr(Ys|e,r,!0)}function $(r,e=[],t=[]){Fu(e,t,s=>{wr(Ys,()=>r(...s.map(o)),!0)})}function bn(r,e=0){var t=wr(fn|e,r,!0);return t}function Pt(r,e=!0){return wr(Cr|Vn,r,!0,e)}function La(r){var e=r.teardown;if(e!==null){const t=wn,s=De;Ba(!0),Lt(null);try{e.call(null)}finally{Ba(t),Lt(s)}}}function za(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){const l=t.ac;l!==null&&Hn(()=>{l.abort(Ro)});var s=t.next;(t.f&vn)!==0?t.parent=null:Jt(t,e),t=s}}function Xu(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Cr)===0&&Jt(e),e=t}}function Jt(r,e=!0){var t=!1;(e||(r.f&Jc)!==0)&&r.nodes_start!==null&&r.nodes_end!==null&&(Ra(r.nodes_start,r.nodes_end),t=!0),za(r,e&&!t),to(r,0),Yt(r,dn);var s=r.transitions;if(s!==null)for(const a of s)a.stop();La(r);var l=r.parent;l!==null&&l.first!==null&&Ia(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=r.ac=null}function Ra(r,e){for(;r!==null;){var t=r===e?null:_s(r);r.remove(),r=t}}function Ia(r){var e=r.parent,t=r.prev,s=r.next;t!==null&&(t.next=s),s!==null&&(s.prev=t),e!==null&&(e.first===r&&(e.first=s),e.last===r&&(e.last=t))}function cr(r,e){var t=[];Ho(r,t,!0),Fa(t,()=>{Jt(r),e&&e()})}function Fa(r,e){var t=r.length;if(t>0){var s=()=>--t||e();for(var l of r)l.out(s)}else e()}function Ho(r,e,t){if((r.f&ir)===0){if(r.f^=ir,r.transitions!==null)for(const c of r.transitions)(c.is_global||t)&&e.push(c);for(var s=r.first;s!==null;){var l=s.next,a=(s.f&hn)!==0||(s.f&Cr)!==0;Ho(s,e,a?t:!1),s=l}}}function ys(r){qa(r,!0)}function qa(r,e){if((r.f&ir)!==0){r.f^=ir,(r.f&Tt)===0&&(Yt(r,Zt),Un(r));for(var t=r.first;t!==null;){var s=t.next,l=(t.f&hn)!==0||(t.f&Cr)!==0;qa(t,l?e:!1),t=s}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}let Gn=!1;function Oa(r){Gn=r}let wn=!1;function Ba(r){wn=r}let De=null,ur=!1;function Lt(r){De=r}let Ve=null;function $t(r){Ve=r}let It=null;function Da(r){De!==null&&(It===null?It=[r]:It.push(r))}let Ft=null,Xt=0,er=null;function Qu(r){er=r}let Va=1,xs=0,_n=xs;function Ya(r){_n=r}let Ur=!1;function Wa(){return++Va}function eo(r){var h;var e=r.f;if((e&Zt)!==0)return!0;if((e&Fr)!==0){var t=r.deps,s=(e&Qt)!==0;if(t!==null){var l,a,c=(e&Ws)!==0,f=s&&Ve!==null&&!Ur,u=t.length;if((c||f)&&(Ve===null||(Ve.f&dn)===0)){var v=r,d=v.parent;for(l=0;l<u;l++)a=t[l],(c||!((h=a==null?void 0:a.reactions)!=null&&h.includes(v)))&&(a.reactions??(a.reactions=[])).push(v);c&&(v.f^=Ws),f&&d!==null&&(d.f&Qt)===0&&(v.f^=Qt)}for(l=0;l<u;l++)if(a=t[l],eo(a)&&Aa(a),a.wv>r.wv)return!0}(!s||Ve!==null&&!Ur)&&Yt(r,Tt)}return!1}function Ua(r,e,t=!0){var s=r.reactions;if(s!==null&&!(It!=null&&It.includes(r)))for(var l=0;l<s.length;l++){var a=s[l];(a.f&Gt)!==0?Ua(a,e,!1):e===a&&(t?Yt(a,Zt):(a.f&Tt)!==0&&Yt(a,Fr),Un(a))}}function Ha(r){var b;var e=Ft,t=Xt,s=er,l=De,a=Ur,c=It,f=et,u=ur,v=_n,d=r.f;Ft=null,Xt=0,er=null,Ur=(d&Qt)!==0&&(ur||!Gn||De===null),De=(d&(Cr|vn))===0?r:null,It=null,Or(r.ctx),ur=!1,_n=++xs,r.ac!==null&&(Hn(()=>{r.ac.abort(Ro)}),r.ac=null);try{r.f|=Lo;var h=r.fn,m=h(),g=r.deps;if(Ft!==null){var p;if(to(r,Xt),g!==null&&Xt>0)for(g.length=Xt+Ft.length,p=0;p<Ft.length;p++)g[Xt+p]=Ft[p];else r.deps=g=Ft;if(!Ur||(d&Gt)!==0&&r.reactions!==null)for(p=Xt;p<g.length;p++)((b=g[p]).reactions??(b.reactions=[])).push(r)}else g!==null&&Xt<g.length&&(to(r,Xt),g.length=Xt);if(gn()&&er!==null&&!ur&&g!==null&&(r.f&(Gt|Fr|Zt))===0)for(p=0;p<er.length;p++)Ua(er[p],r);return l!==null&&l!==r&&(xs++,er!==null&&(s===null?s=er:s.push(...er))),(r.f&mn)!==0&&(r.f^=mn),m}catch(w){return ba(w)}finally{r.f^=Lo,Ft=e,Xt=t,er=s,De=l,Ur=a,It=c,Or(f),ur=u,_n=v}}function Zu(r,e){let t=e.reactions;if(t!==null){var s=Wc.call(t,r);if(s!==-1){var l=t.length-1;l===0?t=e.reactions=null:(t[s]=t[l],t.pop())}}t===null&&(e.f&Gt)!==0&&(Ft===null||!Ft.includes(e))&&(Yt(e,Fr),(e.f&(Qt|Ws))===0&&(e.f^=Ws),Ea(e),to(e,0))}function to(r,e){var t=r.deps;if(t!==null)for(var s=e;s<t.length;s++)Zu(r,t[s])}function Kn(r){var e=r.f;if((e&dn)===0){Yt(r,Tt);var t=Ve,s=Gn;Ve=r,Gn=!0;try{(e&fn)!==0?Xu(r):za(r),La(r);var l=Ha(r);r.teardown=typeof l=="function"?l:null,r.wv=Va;var a;pt&&xu&&(r.f&Zt)!==0&&r.deps}finally{Gn=s,Ve=t}}}async function $u(){await Promise.resolve(),_a()}function o(r){var e=r.f,t=(e&Gt)!==0;if(De!==null&&!ur){var s=Ve!==null&&(Ve.f&dn)!==0;if(!s&&!(It!=null&&It.includes(r))){var l=De.deps;if((De.f&Lo)!==0)r.rv<xs&&(r.rv=xs,Ft===null&&l!==null&&l[Xt]===r?Xt++:Ft===null?Ft=[r]:(!Ur||!Ft.includes(r))&&Ft.push(r));else{(De.deps??(De.deps=[])).push(r);var a=r.reactions;a===null?r.reactions=[De]:a.includes(De)||a.push(De)}}}else if(t&&r.deps===null&&r.effects===null){var c=r,f=c.parent;f!==null&&(f.f&Qt)===0&&(c.f^=Qt)}if(wn){if(Yr.has(r))return Yr.get(r);if(t){c=r;var u=c.v;return((c.f&Tt)===0&&c.reactions!==null||Ga(c))&&(u=Do(c)),Yr.set(c,u),u}}else t&&(c=r,eo(c)&&Aa(c));if((r.f&mn)!==0)throw r.v;return r.v}function Ga(r){if(r.v===bt)return!0;if(r.deps===null)return!1;for(const e of r.deps)if(Yr.has(e)||(e.f&Gt)!==0&&Ga(e))return!0;return!1}function fr(r){var e=ur;try{return ur=!0,r()}finally{ur=e}}const ef=-7169;function Yt(r,e){r.f=r.f&ef|e}function tf(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(qr in r)Go(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&qr in t&&Go(t)}}}function Go(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let s in r)try{Go(r[s],e)}catch{}const t=Ds(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const s=sa(t);for(let l in s){const a=s[l].get;if(a)try{a.call(r)}catch{}}}}}const rf=["touchstart","touchmove"];function nf(r){return rf.includes(r)}const Ka=new Set,Ko=new Set;function sf(r,e,t,s={}){function l(a){if(s.capture||ks.call(e,a),!a.cancelBubble)return Hn(()=>t==null?void 0:t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Dr(()=>{e.addEventListener(r,l,s)}):e.addEventListener(r,l,s),l}function yn(r,e,t,s,l){var a={capture:s,passive:l},c=sf(r,e,t,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Gu(()=>{e.removeEventListener(r,c,a)})}function it(r){for(var e=0;e<r.length;e++)Ka.add(r[e]);for(var t of Ko)t(r)}let Ja=null;function ks(r){var k;var e=this,t=e.ownerDocument,s=r.type,l=((k=r.composedPath)==null?void 0:k.call(r))||[],a=l[0]||r.target;Ja=r;var c=0,f=Ja===r&&r.__root;if(f){var u=l.indexOf(f);if(u!==-1&&(e===document||e===window)){r.__root=e;return}var v=l.indexOf(e);if(v===-1)return;u<=v&&(c=u)}if(a=l[c]||r.target,a!==e){Mo(r,"currentTarget",{configurable:!0,get(){return a||t}});var d=De,h=Ve;Lt(null),$t(null);try{for(var m,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var b=a["__"+s];if(b!=null&&(!a.disabled||r.target===a))if(un(b)){var[w,..._]=b;w.apply(a,[r,..._])}else b.call(a,r)}catch(E){m?g.push(E):m=E}if(r.cancelBubble||p===e||p===null)break;a=p}if(m){for(let E of g)queueMicrotask(()=>{throw E});throw m}}finally{r.__root=e,delete r.currentTarget,Lt(d),$t(h)}}}function Jo(r){var e=document.createElement("template");return e.innerHTML=r.replaceAll("<!>","<!---->"),e.content}function xn(r,e){var t=Ve;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function H(r,e){var t=(e&va)!==0,s=(e&pu)!==0,l,a=!r.startsWith("<!>");return()=>{l===void 0&&(l=Jo(a?r:"<!>"+r),t||(l=Kt(l)));var c=s||Sa?document.importNode(l,!0):l.cloneNode(!0);if(t){var f=Kt(c),u=c.lastChild;xn(f,u)}else xn(c,c);return c}}function of(r,e,t="svg"){var s=!r.startsWith("<!>"),l=(e&va)!==0,a=`<${t}>${s?r:"<!>"+r}</${t}>`,c;return()=>{if(!c){var f=Jo(a),u=Kt(f);if(l)for(c=document.createDocumentFragment();Kt(u);)c.appendChild(Kt(u));else c=Kt(u)}var v=c.cloneNode(!0);if(l){var d=Kt(v),h=v.lastChild;xn(d,h)}else xn(v,v);return v}}function xe(r,e){return of(r,e,"svg")}function lf(r=""){{var e=Wr(r+"");return xn(e,e),e}}function ge(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Wr();return r.append(e,t),xn(e,t),r}function N(r,e){r!==null&&r.before(e)}let Xo=!0;function me(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function af(r,e){return cf(r,e)}const Jn=new Map;function cf(r,{target:e,anchor:t,props:s={},events:l,context:a,intro:c=!0}){Du();var f=new Set,u=h=>{for(var m=0;m<h.length;m++){var g=h[m];if(!f.has(g)){f.add(g);var p=nf(g);e.addEventListener(g,ks,{passive:p});var b=Jn.get(g);b===void 0?(document.addEventListener(g,ks,{passive:p}),Jn.set(g,1)):Jn.set(g,b+1)}}};u(No(Ka)),Ko.add(u);var v=void 0,d=Ku(()=>{var h=t??e.appendChild(Wr());return zu(h,{pending:()=>{}},m=>{if(a){be({});var g=et;g.c=a}l&&(s.$$events=l),Xo=c,v=r(m,s)||{},Xo=!0,a&&we()}),()=>{var p;for(var m of f){e.removeEventListener(m,ks);var g=Jn.get(m);--g===0?(document.removeEventListener(m,ks),Jn.delete(m)):Jn.set(m,g)}Ko.delete(u),h!==t&&((p=h.parentNode)==null||p.removeChild(h))}});return uf.set(v,d),v}let uf=new WeakMap;const Qo=0,ro=1,Zo=2;function ff(r,e,t,s,l){var a=r,c=gn(),f=et,u=bt,v,d,h,m=c?Nr(void 0):Vo(void 0,!1,!1),g=c?Nr(void 0):Vo(void 0,!1,!1),p=!1;function b(_,k){p=!0,k&&($t(w),Lt(w),Or(f));try{_===Qo&&t&&(v?ys(v):v=Pt(()=>t(a))),_===Zo&&l&&(h?ys(h):h=Pt(()=>l(a,g))),_!==Qo&&v&&cr(v,()=>v=null),_!==ro&&d&&cr(d,()=>d=null),_!==Zo&&h&&cr(h,()=>h=null)}finally{k&&(Or(null),Lt(null),$t(null),_a())}}var w=bn(()=>{if(u!==(u=e())){if(Hc(u)){var _=u;p=!1,_.then(k=>{_===u&&(Mr(m,k),b(ro,!0))},k=>{if(_===u&&(Mr(g,k),b(Zo,!0),!l))throw g.v}),Dr(()=>{p||b(Qo,!0)})}else Mr(m,u),b(ro,!1);return()=>u=bt}})}function Y(r,e,t=!1){var s=r,l=null,a=null,c=bt,f=t?hn:0,u=!1;const v=(g,p=!0)=>{u=!0,m(p,g)};var d=null;function h(){d!==null&&(d.lastChild.remove(),s.before(d),d=null);var g=c?l:a,p=c?a:l;g&&ys(g),p&&cr(p,()=>{c?a=null:l=null})}const m=(g,p)=>{if(c!==(c=g)){var b=Zs(),w=s;if(b&&(d=document.createDocumentFragment(),d.append(w=Wr())),c?l??(l=p&&Pt(()=>p(w))):a??(a=p&&Pt(()=>p(w))),b){var _=Qe,k=c?l:a,E=c?a:l;k&&_.skipped_effects.delete(k),E&&_.skipped_effects.add(E),_.add_callback(h)}else h()}};bn(()=>{u=!1,e(v),u||m(null,null)},f)}function kn(r,e,t){var s=r,l=bt,a,c,f=null,u=gn()?yu:ha;function v(){a&&cr(a),f!==null&&(f.lastChild.remove(),s.before(f),f=null),a=c}bn(()=>{if(u(l,l=e())){var d=s,h=Zs();h&&(f=document.createDocumentFragment(),f.append(d=Wr())),c=Pt(()=>t(d)),h?Qe.add_callback(v):v()}})}function ot(r,e){return e}function vf(r,e,t){for(var s=r.items,l=[],a=e.length,c=0;c<a;c++)Ho(e[c].e,l,!0);var f=a>0&&l.length===0&&t!==null;if(f){var u=t.parentNode;Vu(u),u.append(t),s.clear(),_r(r,e[0].prev,e[a-1].next)}Fa(l,()=>{for(var v=0;v<a;v++){var d=e[v];f||(s.delete(d.k),_r(r,d.prev,d.next)),Jt(d.e,!f)}})}function tt(r,e,t,s,l,a=null){var c=r,f={flags:e,items:new Map,first:null},u=(e&fa)!==0;if(u){var v=r;c=v.appendChild(Wr())}var d=null,h=!1,m=new Map,g=Bo(()=>{var _=t();return un(_)?_:_==null?[]:No(_)}),p,b;function w(){df(b,p,f,m,c,l,e,s,t),a!==null&&(p.length===0?d?ys(d):d=Pt(()=>a(c)):d!==null&&cr(d,()=>{d=null}))}bn(()=>{b??(b=Ve),p=o(g);var _=p.length;if(!(h&&_===0)){h=_===0;var k,E,y,A;if(Zs()){var C=new Set,j=Qe;for(E=0;E<_;E+=1){y=p[E],A=s(y,E);var R=f.items.get(A)??m.get(A);R?(e&(Hs|Gs))!==0&&Xa(R,y,E,e):(k=Qa(null,f,null,null,y,A,E,l,e,t,!0),m.set(A,k)),C.add(A)}for(const[T,B]of f.items)C.has(T)||j.skipped_effects.add(B.e);j.add_callback(w)}else w();o(g)}})}function df(r,e,t,s,l,a,c,f,u){var J,se,ae,de;var v=(c&au)!==0,d=(c&(Hs|Gs))!==0,h=e.length,m=t.items,g=t.first,p=g,b,w=null,_,k=[],E=[],y,A,C,j;if(v)for(j=0;j<h;j+=1)y=e[j],A=f(y,j),C=m.get(A),C!==void 0&&((J=C.a)==null||J.measure(),(_??(_=new Set)).add(C));for(j=0;j<h;j+=1){if(y=e[j],A=f(y,j),C=m.get(A),C===void 0){var R=s.get(A);if(R!==void 0){s.delete(A),m.set(A,R);var T=w?w.next:p;_r(t,w,R),_r(t,R,T),$o(R,T,l),w=R}else{var B=p?p.e.nodes_start:l;w=Qa(B,t,w,w===null?t.first:w.next,y,A,j,a,c,u)}m.set(A,w),k=[],E=[],p=w.next;continue}if(d&&Xa(C,y,j,c),(C.e.f&ir)!==0&&(ys(C.e),v&&((se=C.a)==null||se.unfix(),(_??(_=new Set)).delete(C))),C!==p){if(b!==void 0&&b.has(C)){if(k.length<E.length){var M=E[0],I;w=M.prev;var U=k[0],D=k[k.length-1];for(I=0;I<k.length;I+=1)$o(k[I],M,l);for(I=0;I<E.length;I+=1)b.delete(E[I]);_r(t,U.prev,D.next),_r(t,w,U),_r(t,D,M),p=M,w=D,j-=1,k=[],E=[]}else b.delete(C),$o(C,p,l),_r(t,C.prev,C.next),_r(t,C,w===null?t.first:w.next),_r(t,w,C),w=C;continue}for(k=[],E=[];p!==null&&p.k!==A;)(p.e.f&ir)===0&&(b??(b=new Set)).add(p),E.push(p),p=p.next;if(p===null)continue;C=p}k.push(C),w=C,p=C.next}if(p!==null||b!==void 0){for(var z=b===void 0?[]:No(b);p!==null;)(p.e.f&ir)===0&&z.push(p),p=p.next;var W=z.length;if(W>0){var oe=(c&fa)!==0&&h===0?l:null;if(v){for(j=0;j<W;j+=1)(ae=z[j].a)==null||ae.measure();for(j=0;j<W;j+=1)(de=z[j].a)==null||de.fix()}vf(t,z,oe)}}v&&Dr(()=>{var ue;if(_!==void 0)for(C of _)(ue=C.a)==null||ue.apply()}),r.first=t.first&&t.first.e,r.last=w&&w.e;for(var Q of s.values())Jt(Q.e);s.clear()}function Xa(r,e,t,s){(s&Hs)!==0&&Mr(r.v,e),(s&Gs)!==0?Mr(r.i,t):r.i=t}function Qa(r,e,t,s,l,a,c,f,u,v,d){var h=(u&Hs)!==0,m=(u&iu)===0,g=h?m?Vo(l,!1,!1):Nr(l):l,p=(u&Gs)===0?c:Nr(c),b={i:p,v:g,k:a,a:null,e:null,prev:t,next:s};try{if(r===null){var w=document.createDocumentFragment();w.append(r=Wr())}return b.e=Pt(()=>f(r,g,p,v),_u),b.e.prev=t&&t.e,b.e.next=s&&s.e,t===null?d||(e.first=b):(t.next=b,t.e.next=b.e),s!==null&&(s.prev=b,s.e.prev=b.e),b}finally{}}function $o(r,e,t){for(var s=r.next?r.next.e.nodes_start:t,l=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==null&&a!==s;){var c=_s(a);l.before(a),a=c}}function _r(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Ct(r,e,t=!1,s=!1,l=!1){var a=r,c="";$(()=>{var f=Ve;if(c!==(c=e()??"")&&(f.nodes_start!==null&&(Ra(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),c!=="")){var u=c+"";t?u=`<svg>${u}</svg>`:s&&(u=`<math>${u}</math>`);var v=Jo(u);if((t||s)&&(v=Kt(v)),xn(Kt(v),v.lastChild),t||s)for(;Kt(v);)a.before(Kt(v));else a.before(v)}})}function jr(r,e,...t){var s=r,l=At,a;bn(()=>{l!==(l=e())&&(a&&(Jt(a),a=null),a=Pt(()=>l(s,...t)))},hn)}function Es(r,e,t){var s=r,l,a,c=null,f=null;function u(){a&&(cr(a),a=null),c&&(c.lastChild.remove(),s.before(c),c=null),a=f,f=null}bn(()=>{if(l!==(l=e())){var v=Zs();if(l){var d=s;v&&(c=document.createDocumentFragment(),c.append(d=Wr()),a&&Qe.skipped_effects.add(a)),f=Pt(()=>t(d,l))}v?Qe.add_callback(u):u()}},hn)}function Za(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var l=r.length;for(e=0;e<l;e++)r[e]&&(t=Za(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function hf(){for(var r,e,t=0,s="",l=arguments.length;t<l;t++)(r=arguments[t])&&(e=Za(r))&&(s&&(s+=" "),s+=e);return s}function mf(r){return typeof r=="object"?hf(r):r??""}const $a=[...`
\r\f \v\uFEFF`];function gf(r,e,t){var s=r==null?"":""+r;if(e&&(s=s?s+" "+e:e),t){for(var l in t)if(t[l])s=s?s+" "+l:l;else if(s.length)for(var a=l.length,c=0;(c=s.indexOf(l,c))>=0;){var f=c+a;(c===0||$a.includes(s[c-1]))&&(f===s.length||$a.includes(s[f]))?s=(c===0?"":s.substring(0,c))+s.substring(f+1):c=f}}return s===""?null:s}function pf(r,e){return r==null?null:String(r)}function wt(r,e,t,s,l,a){var c=r.__className;if(c!==t||c===void 0){var f=gf(t,s,a);f==null?r.removeAttribute("class"):e?r.className=f:r.setAttribute("class",f),r.__className=t}else if(a&&l!==a)for(var u in a){var v=!!a[u];(l==null||v!==!!l[u])&&r.classList.toggle(u,v)}return a}function mt(r,e,t,s){var l=r.__style;if(l!==e){var a=pf(e);a==null?r.removeAttribute("style"):r.style.cssText=a,r.__style=e}return s}const bf=Symbol("is custom element"),wf=Symbol("is html");function F(r,e,t,s){var l=_f(r);l[e]!==(l[e]=t)&&(e==="loading"&&(r[Xc]=t),t==null?r.removeAttribute(e):typeof t!="string"&&yf(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function _f(r){return r.__attributes??(r.__attributes={[bf]:r.nodeName.includes("-"),[wf]:r.namespaceURI===bu})}var ei=new Map;function yf(r){var e=r.getAttribute("is")||r.nodeName,t=ei.get(e);if(t)return t;ei.set(e,t=[]);for(var s,l=r,a=Element.prototype;a!==l;){s=sa(l);for(var c in s)s[c].set&&t.push(c);l=Ds(l)}return t}const xf=()=>performance.now(),Tr={tick:r=>requestAnimationFrame(r),now:()=>xf(),tasks:new Set};function ti(){const r=Tr.now();Tr.tasks.forEach(e=>{e.c(r)||(Tr.tasks.delete(e),e.f())}),Tr.tasks.size!==0&&Tr.tick(ti)}function kf(r){let e;return Tr.tasks.size===0&&Tr.tick(ti),{promise:new Promise(t=>{Tr.tasks.add(e={c:r,f:t})}),abort(){Tr.tasks.delete(e)}}}function no(r,e){Hn(()=>{r.dispatchEvent(new CustomEvent(e))})}function Ef(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function ri(r){const e={},t=r.split(";");for(const s of t){const[l,a]=s.split(":");if(!l||a===void 0)break;const c=Ef(l.trim());e[c]=a.trim()}return e}const Af=r=>r;function ni(r,e,t,s){var l=(r&hu)!==0,a=(r&mu)!==0,c=l&&a,f=(r&gu)!==0,u=c?"both":l?"in":"out",v,d=e.inert,h=e.style.overflow,m,g;function p(){return Hn(()=>v??(v=t()(e,(s==null?void 0:s())??{},{direction:u})))}var b={is_global:f,in(){var E;if(e.inert=d,!l){g==null||g.abort(),(E=g==null?void 0:g.reset)==null||E.call(g);return}a||m==null||m.abort(),no(e,"introstart"),m=el(e,p(),g,1,()=>{no(e,"introend"),m==null||m.abort(),m=v=void 0,e.style.overflow=h})},out(E){if(!a){E==null||E(),v=void 0;return}e.inert=!0,no(e,"outrostart"),g=el(e,p(),m,0,()=>{no(e,"outroend"),E==null||E()})},stop:()=>{m==null||m.abort(),g==null||g.abort()}},w=Ve;if((w.transitions??(w.transitions=[])).push(b),l&&Xo){var _=f;if(!_){for(var k=w.parent;k&&(k.f&hn)!==0;)for(;(k=k.parent)&&(k.f&fn)===0;);_=!k||(k.f&Us)!==0}_&&Wo(()=>{fr(()=>b.in())})}}function el(r,e,t,s,l){var a=s===1;if(Dn(e)){var c,f=!1;return Dr(()=>{if(!f){var w=e({direction:a?"in":"out"});c=el(r,w,t,s,l)}}),{abort:()=>{f=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return l(),{abort:At,deactivate:At,reset:At,t:()=>s};const{delay:u=0,css:v,tick:d,easing:h=Af}=e;var m=[];if(a&&t===void 0&&(d&&d(0,1),v)){var g=ri(v(0,1));m.push(g,g)}var p=()=>1-s,b=r.animate(m,{duration:u,fill:"forwards"});return b.onfinish=()=>{b.cancel();var w=(t==null?void 0:t.t())??1-s;t==null||t.abort();var _=s-w,k=e.duration*Math.abs(_),E=[];if(k>0){var y=!1;if(v)for(var A=Math.ceil(k/16.666666666666668),C=0;C<=A;C+=1){var j=w+_*h(C/A),R=ri(v(j,1-j));E.push(R),y||(y=R.overflow==="hidden")}y&&(r.style.overflow="hidden"),p=()=>{var T=b.currentTime;return w+_*h(T/k)},d&&kf(()=>{if(b.playState!=="running")return!1;var T=p();return d(T,1-T),!0})}b=r.animate(E,{duration:k,fill:"forwards"}),b.onfinish=()=>{p=()=>s,d==null||d(s,1-s),l()}},{abort:()=>{b&&(b.cancel(),b.effect=null,b.onfinish=At)},deactivate:()=>{l=At},reset:()=>{s===0&&(d==null||d(1,0))},t:()=>p()}}function si(r,e,t=e){var s=new WeakSet;Wu(r,"input",async l=>{var a=l?r.defaultValue:r.value;if(a=tl(r)?rl(a):a,t(a),Qe!==null&&s.add(Qe),await $u(),a!==(a=e())){var c=r.selectionStart,f=r.selectionEnd;r.value=a??"",f!==null&&(r.selectionStart=c,r.selectionEnd=Math.min(f,r.value.length))}}),fr(e)==null&&r.value&&(t(tl(r)?rl(r.value):r.value),Qe!==null&&s.add(Qe)),Uo(()=>{var l=e();if(r===document.activeElement){var a=Xs??Qe;if(s.has(a))return}tl(r)&&l===rl(r.value)||r.type==="date"&&!l&&!r.value||l!==r.value&&(r.value=l??"")})}function tl(r){var e=r.type;return e==="number"||e==="range"}function rl(r){return r===""?null:+r}const Eo=class Eo{constructor(e){je(this,ko);je(this,an,new WeakMap);je(this,os);je(this,Os);ye(this,Os,e)}observe(e,t){var s=Z(this,an).get(e)||new Set;return s.add(t),Z(this,an).set(e,s),Rt(this,ko,Yc).call(this).observe(e,Z(this,Os)),()=>{var l=Z(this,an).get(e);l.delete(t),l.size===0&&(Z(this,an).delete(e),Z(this,os).unobserve(e))}}};an=new WeakMap,os=new WeakMap,Os=new WeakMap,ko=new WeakSet,Yc=function(){return Z(this,os)??ye(this,os,new ResizeObserver(e=>{for(var t of e){Eo.entries.set(t.target,t);for(var s of Z(this,an).get(t.target)||[])s(t)}}))},zt(Eo,"entries",new WeakMap);let nl=Eo;var Cf=new nl({box:"border-box"});function oi(r,e,t){var s=Cf.observe(r,()=>t(r[e]));Wo(()=>(fr(()=>t(r[e])),s))}function li(r,e){return r===e||(r==null?void 0:r[qr])===e}function En(r={},e,t,s){return Wo(()=>{var l,a;return Uo(()=>{l=a,a=[],fr(()=>{r!==t(...a)&&(e(r,...a),l&&li(t(...l),r)&&e(null,...l))})}),()=>{Dr(()=>{a&&li(t(...a),r)&&e(null,...a)})}}),r}function Sf(r=!1){const e=et,t=e.l.u;if(!t)return;let s=()=>tf(e.s);if(r){let l=0,a={};const c=bs(()=>{let f=!1;const u=e.s;for(const v in u)u[v]!==a[v]&&(a[v]=u[v],f=!0);return f&&l++,l});s=()=>o(c)}t.b.length&&$s(()=>{ai(e,s),Vs(t.b)}),he(()=>{const l=fr(()=>t.m.map(Gc));return()=>{for(const a of l)typeof a=="function"&&a()}}),t.a.length&&he(()=>{ai(e,s),Vs(t.a)})}function ai(r,e){if(r.l.s)for(const t of r.l.s)o(t);e()}let so=!1;function Nf(r){var e=so;try{return so=!1,[r(),so]}finally{so=e}}const Mf={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function An(r,e,t){return new Proxy({props:r,exclude:e},Mf)}const jf={get(r,e){let t=r.props.length;for(;t--;){let s=r.props[t];if(Dn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(r,e,t){let s=r.props.length;for(;s--;){let l=r.props[s];Dn(l)&&(l=l());const a=Ir(l,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let s=r.props[t];if(Dn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=Ir(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(r,e){if(e===qr||e===ca)return!1;for(let t of r.props)if(Dn(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props)if(Dn(t)&&(t=t()),!!t){for(const s in t)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(t))e.includes(s)||e.push(s)}return e}};function tr(...r){return new Proxy({props:r},jf)}function O(r,e,t,s){var E;var l=!Yn||(t&uu)!==0,a=(t&vu)!==0,c=(t&du)!==0,f=s,u=!0,v=()=>(u&&(u=!1,f=c?fr(s):s),f),d;if(a){var h=qr in r||ca in r;d=((E=Ir(r,e))==null?void 0:E.set)??(h&&e in r?y=>r[e]=y:void 0)}var m,g=!1;a?[m,g]=Nf(()=>r[e]):m=r[e],m===void 0&&s!==void 0&&(m=v(),d&&(l&&ru(),d(m)));var p;if(l?p=()=>{var y=r[e];return y===void 0?v():(u=!0,y)}:p=()=>{var y=r[e];return y!==void 0&&(f=void 0),y===void 0?f:y},l&&(t&fu)===0)return p;if(d){var b=r.$$legacy;return(function(y,A){return arguments.length>0?((!l||!A||b||g)&&d(A?p():y),y):p()})}var w=!1,_=((t&cu)!==0?bs:Bo)(()=>(w=!1,p()));a&&o(_);var k=Ve;return(function(y,A){if(arguments.length>0){const C=A?o(_):l&&a?Te(y):y;return q(_,C),w=!0,f!==void 0&&(f=C),y}return wn&&w||(k.f&dn)!==0?_.v:o(_)})}function Tf(r){et===null&&ua(),Yn&&et.l!==null?Pf(et).m.push(r):he(()=>{const e=fr(r);if(typeof e=="function")return e})}function Pf(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Lf="5";typeof window<"u"&&((Bc=window.__svelte??(window.__svelte={})).v??(Bc.v=new Set)).add(Lf),ku();function zf(r){return As(r,.5)}function Rf(r){return As(r,.75)-As(r,.25)}function As(r,e){if(We(r))return As(r.v,e);if(We(e))return As(r,e.v);const t=r.length;if(Array.isArray(e)||(e=[e]),!hl(e[0])||Pr(e)<0||yr(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(c,f){const u=(t-1)*f+1,v=Math.floor(u),d=Math.ceil(u);return c[v-1]+(c[d-1]-c[v-1])*(u-Math.floor(u))}const l=bl(r),a=e.map(c=>s(l,c));return e.length==1?a[0]:ut(a)}function ii(r,e){We(r)&&ii(r.v,e);const t=Hr(r);if(t[0]===t[1])throw new Error('split: values in a vector "x" should vary.');const s=(t[1]-t[0])/e;return Ge.seq(t[0],t[1],s)}function ci(r){if(We(r))return ci(r.v);const e=new Ge.valuesConstructor(r.length-1);for(let t=0;t<r.length-1;t++)e[t]=r[t+1]-r[t];return new Ge(e)}function sl(r,e){if(We(r))return sl(r.v,e);e===void 0&&(e=.1);const t=Hr(r),s=(t[1]-t[0])*e;return[t[0]-s,t[1]+s]}function Hr(r){if(We(r))return Hr(r.v);let e=r[0],t=r[0];for(let s=1;s<r.length;s++)r[s]<e&&(e=r[s]),r[s]>t&&(t=r[s]);return[e,t]}function oo(r,e){return We(r)?oo(r.v,e):Math.sqrt(lo(r,e))}function lo(r,e){if(e===void 0&&(e=!1),We(r))return lo(r.v);const t=Cn(r);let s=0;for(let l=0;l<r.length;l++){const a=r[l]-t;s=s+a*a}return s/(e?r.length:r.length-1)}function Cn(r){return We(r)?Cn(r.v):ui(r)/r.length}function ui(r){if(We(r))return ui(r.v);let e=0;for(let t=0;t<r.length;t++)e=e+r[t];return e}function fi(r){if(We(r))return fi(r.v);let e=1;for(let t=0;t<r.length;t++)e=e*r[t];return e}function Pr(r){return We(r)||dr(r)?r.v[ol(r.v)-1]:r[ol(r)-1]}function ol(r){if(We(r)||dr(r))return ol(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]<t&&(e=s,t=r[s-1]);return e}function yr(r){return We(r)||dr(r)?r.v[ll(r.v)-1]:r[ll(r)-1]}function ll(r){if(We(r)||dr(r))return ll(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]>t&&(e=s,t=r[s-1]);return e}const al=30,If=1e-7,Ff=1e-7,vi=1e-13,di=1e3,qf=100;function hi(r,e,t,s,l){s===void 0&&(s=di),t===void 0&&(t=vi),l===void 0&&(l=qf);let a=t,c=s,f=(c-a)/l;for(let u=0;u<l;u++){let v,d;for(let g=0;g<l;g++){v=a+g*f,d=a+(g+1)*f;const p=e(v),b=e(d);if(p<=r&&b>=r)break}const h=(v+d)/2,m=e(h);if(Math.abs(m-r)<If||(a=v,c=d,f=(c-a)/l,f/c<Ff))return h}return(a+c)/2}function mi(r,e=0,t=1){let s=Ge.zeros(r);for(let l=0;l<r;l++)s.v[l]=e+Math.random()*(t-e);return s}function gi(r,e=0,t=1){let s=Ge.zeros(r);for(let l=0;l<r;l++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[l]=a*Math.sin(c)*t+e}return s}function il(r,e=0,t=1){if(We(r))return r.apply(l=>il(l,e,t));const s=1/(Math.sqrt(2)*t);return .5*(1+Bf((r-e)*s))}function cl(r,e=0,t=1){if(We(r))return r.apply(U=>cl(U,e,t));if(e!==0||t!==1)return cl(r)*t+e;if(r<0||r>1)throw Error('Parameter "p" must be between 0 and 1.');if(r<1e-10)return-1/0;if(r>.9999999999)return 1/0;const s=.425,l=5,a=.180625,c=1.6,f=3.3871327179,u=5.0434271938*10,v=1.5929113202*100,d=5.910937472*10,h=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,p=1.4234372777,b=2.75681539,w=1.3067284816,_=1.7023821103*.1,k=7.370016425*.1,E=1.2021132975*.1,y=6.657905115,A=3.081226386,C=4.2868294337*.1,j=1.7337203997*.01,R=2.4197894225*.1,T=1.2258202635*.01,B=r-.5;let M;if(Math.abs(B)<=s)return M=a-B*B,B*(((d*M+v)*M+u)*M+f)/(((g*M+m)*M+h)*M+1);M=B<0?r:1-r,M=Math.sqrt(-Math.log(M));let I;return M<=l?(M=M-c,I=(((_*M+w)*M+b)*M+p)/((E*M+k)*M+1)):(M=M-l,I=((j*M+C)*M+A+y)/((T*M+R)*M+1)),B<0?-I:I}function ul(r,e,t){if(t<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(r))return ul(ut(r),e,t);if(We(r))return r.apply(s=>ul(s,e,t));if(r<=0)return 0;if(t<=0&&ML_ERR_return_NAN,t==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(r<1)return 0;if(r==1)return .5;if(r>1)return 1}return ao(r*e,e)}return e==Number.POSITIVE_INFINITY?1-ao(t/r,t):e*r>t?1-io(t/(t+e*r),t/2,e/2):io(e*r/(t+e*r),e/2,t/2)}function pi(r,e,t){if(r===0)return 0;if(r===1)return Inf;if(t<=0)return NaN;let s=di,l=vi;if(r>.9997&&t===1?(s=1e7,l=6e5,r=.9997):r>.9992&&t===1?(s=1e7,l=6e5):r>.997&&t===1?(s=1e6,l=45e3):r>.992&&t===1?(s=1e5,l=5e3):r>.97&&t===1&&(s=1e4,l=400),Array.isArray(r))return pi(ut(r),e,t);const a=f=>ul(f,e,t);function c(f,u,v){return f===0?0:f===1?Inf:u===0?NaN:v===0?NaN:hi(f,a,l,s)}return We(r)?r.apply(c,e,t):c(r,e,t)}function ao(r,e){if(Array.isArray(r))return ao(ut(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const v=u/e,d=Math.pow(v,1/6)-.5*Math.pow(v,1/3)+1/3*Math.pow(v,1/2);return il(d,t,l)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:Of(u/2,e/2)/Cs(e/2)}const f=e>al?a:c;return We(r)?r.apply(f):f(r)}function Sn(r,e){if(Array.isArray(r))return Sn(ut(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const v=cl(u,t,l),d=Math.pow(Math.sqrt(36*v*v-30*v+13)/4+(3*v-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:hi(u,d=>ao(d,e),0,al*10)}const f=e>al?a:c;return We(r)?r.apply(f):f(r)}function io(r,e,t){if(Array.isArray(r))return io(ut(r),e,t);if(We(r))return r.apply(l=>io(l,e,t));if(r<=0)return 0;if(r>=1)return 1;if(e==0||t==0||!Number.isFinite(e)||!Number.isFinite(t))return e==0&&t==0?.5:e==0||e/t==0?1:t==0||t/e==0||r<.5?0:1;const s=.5-r+.5;return Zf(e,t,r,s)}function Cs(r){if(We(r))return r.apply(Cs);if(r<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(r<.5)return Math.PI/(Math.sin(Math.PI*r)+Cs(1-r));r=r-1;let t=.9999999999998099;for(let l=0;l<e.length;l++)t=t+e[l]/(r+l+1);const s=r+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,r+.5)*Math.exp(-s)*t}function Of(r,e){let l=0;for(let a=0;a<1e4;a++){const c=Math.pow(r,a)/Cs(e+a+1);if(isNaN(c)||c<1e-18)break;l+=c}return Math.pow(r,e)*Cs(e)*Math.exp(-r)*l}function Bf(r){const e=r>=0?1:-1;r=Math.abs(r);const t=.254829592,s=-.284496736,l=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*r),v=1-((((c*u+a)*u+l)*u+s)*u+t)*u*Math.exp(-r*r);return e*v}function bi(r,e){const t=.564189583547756,s=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],f=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let v,d,h,m,g=Math.abs(e);if(g<=.5)return d=e*e,m=(((s[0]*d+s[1])*d+s[2])*d+s[3])*d+s[4]+1,h=((l[0]*d+l[1])*d+l[2])*d+1,v=.5-e*(m/h)+.5,v=Math.exp(d)*v,v;if(g<=4)m=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],h=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],v=m/h;else{if(e<=-5.6)return v=2,v=Math.exp(e*e)*2,v;d=1/(e*e),m=(((f[0]*d+f[1])*d+f[2])*d+f[3])*d+f[4],h=(((u[0]*d+u[1])*d+u[2])*d+u[3])*d+1,v=(t-d*m/h)/g}return e<0&&(v=Math.exp(e*e)*2-v),v}function wi(r,e){let t=r+e-2;return t<=.25?rr(t+1):t<=1.25?rr(t)+Kr(t):rr(t-1)+Math.log(t*(t+1))}function co(r,e){const t=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,v,d,h,m,g,p,b,w,_,k,E,y,A,C;return d=Math.min(r,e),h=Math.max(r,e),g=d/h,m=g/(g+1),w=1/(g+1),E=w*w,_=w+E+1,k=w+E*_+1,y=w+E*k+1,A=w+E*y+1,C=w+E*A+1,v=1/h,p=v*v,b=((((f*C*p+c*A)*p+a*y)*p+l*k)*p+s*_)*p+t,b*=m/h,v=1/d,p=v*v,u=(((((f*p+c)*p+a)*p+l)*p+s)*p+t)/d+b,u}function ct(r){let e,t,s,l,a;if(t=r,e=r-.5,e>0&&(t=e-.5),t<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],f=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*t+c[7])*t+c[6])*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],l=(u*t+f)*t+1,s=a/l,e>0?t*s/r:r*(s+.5+.5)}else{if(t==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],f=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],l=(((f[4]*t+f[3])*t+f[2])*t+f[1])*t+1,s=a/l,e>0?t/r*(s-.5-.5):r*s}}}function Df(r,e,t){let s,l,a,c;if(r<-1.1||r>1.1)return Number.NaN;c=r*2,a=l=0,s=0;for(let f=1;f<=t;f++)a=l,l=s,s=c*l-a+e[t-f];return(s-a)*.5}function _i(r){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],t=22,s=-.999999985;if(r==0)return 0;if(r==-1)return Number.NEGATIVE_INFINITY;if(r<-1)return Number.NaN;if(Math.abs(r)<=.375)return Math.abs(r)<.5*Number.EPSILON?r:0<r&&r<1e-8||-1e-9<r&&r<0?r*(1-.5*r):r*(1-r*Df(r/.375,e,t));if(r<s)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+r)}function Gr(r,e){const t=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,v,d,h,m,g,p,b,w,_,k,E,y,A;return r>e?(d=e/r,u=1/(d+1),b=d/(d+1),v=r+(e-.5)):(d=r/e,u=d/(d+1),b=1/(d+1),v=e+(r-.5)),k=b*b,w=b+k+1,_=b+k*w+1,E=b+k*_+1,y=b+k*E+1,A=b+k*y+1,h=1/(e*e),p=((((f*A*h+c*y)*h+a*E)*h+l*_)*h+s*w)*h+t,p*=u/e,m=v*Kr(r/e),g=r*(Math.log(e)-1),m>g?p-g-m:p-m-g}function rr(r){if(r<.6){const p=((((((-.00271935708322958*r+-.0673562214325671)*r+-.402055799310489)*r+-.780427615533591)*r+-.168860593646662)*r+.844203922187225)*r+.577215664901533)/((((((.000667465618796164*r+.0325038868253937)*r+.361951990101499)*r+1.56875193295039)*r+3.12755088914843)*r+2.88743195473681)*r+1);return-r*p}else{const e=.422784335098467,t=.848044614534529,s=.565221050691933,l=.156513060486551,a=.017050248402265,c=.000497958207639485,f=1.24313399877507,u=.548042109832463,v=.10155218743983,d=.00713309612391,h=.000116165475989616,m=r-.5-.5,g=(((((c*m+a)*m+l)*m+s)*m+t)*m+e)/(((((h*m+d)*m+v)*m+u)*m+f)*m+1);return m*g}}function vr(r){const e=.418938533204673,t=.0833333333333333,s=-.00277777777760991,l=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;if(r<=.8)return rr(r)-Math.log(r);if(r<=2.25)return rr(r-.5-.5);if(r<10){let d=Math.round(r-1.25),h=r,m=1;for(let g=1;g<=d;++g)h+=-1,m*=h;return rr(h-1)+Math.log(m)}let u=1/(r*r),v=(((((f*u+c)*u+a)*u+l)*u+s)*u+t)/r;return e+v+(r-.5)*(Math.log(r)-1)}function fl(r,e){const t=.918938533204673;let s=Math.min(r,e),l=Math.max(r,e);function a(c,f,u){let v=Math.round(u-1),d=1;for(let h=1;h<=v;++h)u+=-1,d*=u/(f+u);return c+Math.log(d)+(vr(f)+(vr(u)-wi(f,u)))}if(s<8){if(s<1)return l<8?vr(s)+(vr(l)-vr(s+l)):vr(s)+Gr(s,l);let c;if(s<2)return l<=2?vr(s)+vr(l)-wi(s,l):l<8?(c=0,a(c,s,l)):vr(s)+Gr(s,l);if(l<=1e3){let f=Math.round(s-1);c=1;for(let u=1;u<=f;++u){s+=-1;let v=s/l;c*=v/(v+1)}return c=Math.log(c),l>=8?c+vr(s)+Gr(s,l):a(c,s,l)}else{let f=Math.round(s-1);c=1;for(let u=1;u<=f;++u)s+=-1,c*=s/(s/l+1);return log(c)-f*log(l)+(vr(s)+Gr(s,l))}}else{let c=co(s,l),f=s/l,u=-(s-.5)*Math.log(f/(f+1)),v=l*Kr(f);return u>v?Math.log(l)*-.5+t+c-v-u:Math.log(l)*-.5+t+c-u-v}}function yi(r){return(r==0?1024:-300)*.69314718055995*.99999}function Xn(r){const e=.0566749439387324,t=.0456512608815524,s=.333333333333333,l=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,f=.354508718369557;let u,v,d,h,m;return r<-.39||r>.57?(h=r+.5+.5,r-Math.log(h)):(r<-.18?(u=r+.3,u/=.7,m=e-u*.3):r>.18?(u=r*.75-.25,m=t+u/3):(u=r,m=0),v=u/(u+2),d=v*v,h=((a*d+l)*d+s)/((f*d+c)*d+1),d*2*(1/(1-v)-v*h)+m)}function Kr(r){if(Math.abs(r)>.375)return Math.log(1+r);const e=-1.29418923021993,t=.405303492862024,s=-.0178874546012214,l=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let f=r/(r+2),u=f*f,v=(((s*u+t)*u+e)*u+1)/(((c*u+a)*u+l)*u+1);return f*2*v}function Vf(r){const e=.564189583547756,t=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],l=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,v,d,h,m;if(d=Math.abs(r),d<=.5)return u=r*r,m=(((t[0]*u+t[1])*u+t[2])*u+t[3])*u+t[4]+1,h=((s[0]*u+s[1])*u+s[2])*u+1,r*(m/h);if(d<=4){m=((((((l[0]*d+l[1])*d+l[2])*d+l[3])*d+l[4])*d+l[5])*d+l[6])*d+l[7],h=((((((a[0]*d+a[1])*d+a[2])*d+a[3])*d+a[4])*d+a[5])*d+a[6])*d+a[7];let p=.5-Math.exp(-r*r)*m/h+.5;return r<0?-p:p}if(d>=5.8)return r>0?1:-1;v=r*r,u=1/v,m=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],h=(((f[0]*u+f[1])*u+f[2])*u+f[3])*u+1,u=(e-m/(v*h))/d;let g=.5-Math.exp(-v)*u+.5;return r<0?-g:g}function Yf(r){const e=914041914819518e-24,t=.0238082361044469,s=-.499999999085958,l=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(r)<=.15)return r*(((t*r+e)*r+1)/((((c*r+a)*r+l)*r+s)*r+1));{let f=Math.exp(r);return r>0?f*(.5-1/f+.5):f-.5-.5}}function Ss(r,e){let t;if(e>0){if(r>0||(t=r+e,t<0))return Math.exp(r)*Math.exp(e)}else if(r<0||(t=r+e,t>0))return Math.exp(r)*Math.exp(e);return Math.exp(t)}function Wf(r){const e=.785398163397448,t=1.4616321449683622,s=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],l=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let f,u,v,d,h,m,g,p,b,w,_,k,E;if(_=Number.MAX_SAFE_INTEGER,d=.5/(.5*Number.EPSILON),_>d&&(_=d),E=1e-9,p=0,r<.5){if(fabs(r)<=E){if(r==0)return 0;p=-1/r}else{if(h=-r,b=e,h<=0&&(h=-h,b=-b),h>=_)return 0;if(v=Math.round(h),h-=v,v=Math.round(h*4),h=(h-v*.25)*4,u=v/2,u+u!=v&&(h=1-h),m=e*h,f=u/2,f+f!=u&&(b=-b),u=(v+1)/2,f=u/2,f+=f,f==u){if(m==0)return 0;p=b*(cos(m)/sin(m)*4)}else p=b*(sin(m)/cos(m)*4)}r=1-r}if(r<=3){g=r,k=s[0]*r;for(let y=1;y<=5;++y)g=(g+l[y-1])*r,k=(k+s[y])*r;return g=(k+s[6])/(g+l[5]),w=r-t,g*w+p}if(r<_){h=1/(r*r),g=h,k=a[0]*h;for(let y=1;y<=3;++y)g=(g+c[y-1])*h,k=(k+a[y])*h;p=k/(g+c[3])-.5/r+p}return p+log(r)}function Uf(r,e,t,s){let l,a,c,f,u,v;if(r>s*.001){if(f=r*Math.log(t),f<Math.exparg(1))return 0;l=Math.exp(f)}else l=1;for(l*=e/r,v=s/r,u=r+1,f=t,c=f/u,u+=1,f=t*f,a=f/u,c+=a;Math.abs(t)>v;)u+=1,f=t*f,a=f/u,c+=a;return l*=r*c+1,l}function Hf(r,e,t,s){const l=.577215664901533;let a,c,f,u,v,d,h=e*t;for(v=t-h,c=e*s<=.02?Math.log(t)+Wf(e)+l+v:Math.log(h)+l+v,a=s*5*Math.abs(c),f=1,u=0,f+=1,v*=t-h/f,d=v/f,u+=d;Math.abs(d)>a;)f+=1,v*=t-h/f,d=v/f,u+=d;return-r*(c+u)}function vl(r,e,t,s){let l,a,c,f,u,v,d,h,m;if(t==0)return 0;if(d=Math.min(r,e),d>=1)v=r*Math.log(t)-fl(r,e),a=Math.exp(v)/r;else if(h=Math.max(r,e),h<8)if(h<=1){if(a=Math.pow(t,r),a==0)return a;m=r+e,m>1?(u=r+e-1,v=(ct(u)+1)/m):v=ct(m)+1,c=(ct(r)+1)*(ct(e)+1)/v,a*=c*(e/m)}else{if(u=rr(d),l=Math.round(h-1),l>=1){c=1;for(let _=1;_<=l;++_)h+=-1,c*=h/(d+h);u+=Math.log(c)}v=r*Math.log(t)-u,h+=-1,m=d+h,m>1?(u=d+h-1,f=(ct(u)+1)/m):f=ct(m)+1,a=Math.exp(v)*(d/r)*(ct(h)+1)/f}else u=rr(d)+Gr(d,h),v=r*Math.log(t)-u,a=d/r*Math.exp(v);if(a==0||r<=s*.1)return a;let g=s/r,p=0,b=0,w;for(c=1,p+=1,c*=(.5-e/p+.5)*t,w=c/(r+p),b+=w;p<1e7&&Math.abs(w)>g;)p+=1,c*=(.5-e/p+.5)*t,w=c/(r+p),b+=w;return r*b>-1?a*=r*b+1:a=0,a}function uo(r,e,t,s,l,a){let c,f,u,v,d,h=r+e,m=r+1;if(l>1&&r>=1&&h>=m*1.1?(u=Math.round(Math.abs(yi(1))),f=Math.round(yi(0)),u>f&&(u=f),v=Math.exp(-u)):(u=0,v=1),c=Jf(u,r,e,t,s)/r,l==1||c==0)return c;let g=l-1,p=v;if(f=0,e>1){if(s>1e-4){let b=(e-1)*t/s-r;b>=1&&(f=b<g?Math.round(b):g)}else f=g;for(let b=0;b<f;++b)d=b,v*=(h+d)/(m+d)*t,p+=v}for(let b=f;b<g&&(d=b,v*=(h+d)/(m+d)*t,p+=v,!(v<=a*p));++b);return c*=p,c}function Gf(r,e,t,s,l,a){let c,f,u,v,d,h,m,g,p,b,w,_,k,E,y,A,C,j,R;if(!Number.isFinite(l)||(R=Kf(r,e,t,s),Number.isNaN(R)))return Number.NaN;if(R==0)return 0;for(c=l+1,p=e/r,b=1/r+1,E=s+1,u=0,v=1,h=r+1,_=0,k=1,y=1,A=c/b,d=b/c,u+=1,m=u/r,g=u*(e-u)*t,f=r/h,j=v*(v+p)*f*f*(g*t),f=(m+1)/(b+m+m),C=u+g/h+f*(c+u*E),v=m+1,h+=2,m=j*_+C*y,_=y,y=m,m=j*k+C*A,k=A,A=m,w=d,d=y/A,_/=A,k/=A,y=d,A=1;u<1e4&&(u+=1,m=u/r,g=u*(e-u)*t,f=r/h,j=v*(v+p)*f*f*(g*t),f=(m+1)/(b+m+m),C=u+g/h+f*(c+u*E),v=m+1,h+=2,m=j*_+C*y,_=y,y=m,m=j*k+C*A,k=A,A=m,w=d,d=y/A,!(Math.abs(d-w)<=a*d));)_/=A,k/=A,y=d,A=1;return R*d}function Kf(r,e,t,s){const l=.398942280401433;let a,c,f,u,v,d,h,m,g;if(t==0||s==0)return 0;if(h=Math.min(r,e),h<8){let p,b;if(t<=.375?(p=Math.log(t),b=Kr(-t)):s>.375?(p=Math.log(t),b=Math.log(s)):(p=Kr(-s),b=Math.log(s)),d=r*p+e*b,h>=1)return d-=fl(r,e),Math.exp(d);if(m=Math.max(r,e),m>=8)return u=rr(h)+Gr(h,m),h*Math.exp(d-u);if(m<=1){let _=Math.exp(d);return _==0?0:(g=r+e,g>1?(u=r+e-1,d=(ct(u)+1)/g):d=ct(g)+1,c=(ct(r)+1)*(ct(e)+1)/d,_*(h*c)/(h/m+1))}if(u=rr(h),a=Math.round(m-1),a>=1){c=1;for(let _=1;_<=a;++_)m+=-1,c*=m/(h+m);u=Math.log(c)+u}d-=u,m+=-1,g=h+m;let w;return g>1?(u=h+m-1,w=(ct(u)+1)/g):w=ct(g)+1,h*Math.exp(d)*(ct(m)+1)/w}else{let p,b,w,_;return r<=e?(p=r/e,b=p/(p+1),w=1/(p+1),_=r-(r+e)*t):(p=e/r,b=1/(p+1),w=p/(p+1),_=(r+e)*s-e),f=-_/r,u=Math.abs(f)>.6?f-Math.log(t/b):Xn(f),f=_/e,v=Math.abs(f)<=.6?Xn(f):f-Math.log(s/w),d=Math.exp(-(r*u+e*v)),l*Math.sqrt(e*b)*d*Math.exp(-co(r,e))}}function Jf(r,e,t,s,l){const a=.398942280401433;let c,f,u,v,d,h,m,g;if(h=Math.min(e,t),h<8){let p,b;if(s<=.375?(p=Math.log(s),b=Kr(-s)):l>.375?(p=Math.log(s),b=Math.log(l)):(p=Kr(-l),b=Math.log(l)),d=e*p+t*b,h>=1)return d-=fl(e,t),Ss(r,d);if(m=Math.max(e,t),m>=8)return u=rr(h)+Gr(h,m),h*Ss(r,d-u);if(m<=1){let _=Ss(r,d);return _==0?_:(g=e+t,g>1?(u=e+t-1,d=(ct(u)+1)/g):d=ct(g)+1,c=(ct(e)+1)*(ct(t)+1)/d,_*(h*c)/(h/m+1))}u=rr(h);let w=Math.round(m-1);if(w>=1){c=1;for(let _=1;_<=w;++_)m+=-1,c*=m/(h+m);u+=Math.log(c)}return d-=u,m+=-1,g=h+m,f=g>1?(ct(g-1)+1)/g:ct(g)+1,h*Ss(r,d)*(ct(m)+1)/f}else{let p,b,w,_;e>t?(p=t/e,b=1/(p+1),w=p/(p+1),_=(e+t)*l-t):(p=e/t,b=p/(p+1),w=1/(p+1),_=e-(e+t)*s),-_i(t/e);let k=-_/e;return u=Math.abs(k)>.6?k-Math.log(s/b):Xn(k),k=_/t,v=Math.abs(k)>.6?k-Math.log(l/w):Xn(k),d=Ss(r,-(e*u+t*v)),a*Math.sqrt(t*b)*d*Math.exp(-co(e,t))}}function dl(r,e,t,s,l,a){let f=Array(30),u=Array(30),v=e-.5-.5,d=r+v*.5,h=s>.375?Math.log(t):Kr(-s),m=-d*h;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+_i(ct(e))+e*Math.log(m)+d*h,p=g-(Gr(e,r)+e*Math.log(d)),b=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let w=b==0,_=l==0?0:Math.exp(Math.log(l)-p),k=Xf(e,m,g,a),E=.25/(d*d),y=h*.25*h,A=k,C=A,j=1,R=1,T=0;for(let B=1;B<=30;++B){let M=e+T;A=(M*(M+1)*A+(m+M+1)*j)*E,T+=2,j*=y,R/=T*(T+1);let I=B-1;f[I]=R;let U=0;if(B>1){let z=e-B;for(let W=1;W<=I;++W)U+=z*f[W-1]*u[I-W],z+=e}u[I]=v*R+U/B;let D=u[I]*A;if(C+=D,C<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(D)<=a*(C+_))break}return l+=w?Math.exp(p+Math.log(C)):b*C,l}function Xf(r,e,t,s){const l=1.772453850905516;if(r*e==0)return e<=r?Math.exp(-t):0;if(r==.5){if(e<.25)return(.5-Vf(Math.sqrt(e))+.5)*Math.exp(-t);{let a=Math.sqrt(e);return bi(1,a)/a*l}}else if(e<1.1){let a=3,c=e,f=e/(r+3),u=s*.1/(r+1),v;for(a+=1,c*=-(e/a),v=c/(r+a),f+=v;Math.abs(v)>u;)a+=1,c*=-(e/a),v=c/(r+a),f+=v;let d=r*e*((f/6-.5/(r+2))*e+1/(r+1)),h=r*Math.log(e),m=ct(r),g=m+1;if(e>=.25&&r<e/2.59||h>-.13394){let p=Yf(h),b=((p+.5+.5)*d-p)*g-m;return b<=0?0:b*Math.exp(-t)}else return(.5-Math.exp(h)*g*(.5-d+.5)+.5)*Math.exp(-t)}else{let a=1,c=1,f=e,u=e+(1-r),v=1,d,h;a=e*c+v*a,f=e*u+v*f,d=a/f,v+=1;let m=v-r;for(c=a+m*c,u=f+m*u,h=c/u;Math.abs(h-d)>=s*h;)a=e*c+v*a,f=e*u+v*f,d=a/f,v+=1,m=v-r,c=a+m*c,u=f+m*u,h=c/u;return h}}function Qf(r,e,t,s){const a=1.12837916709551,c=.353553390593274,f=Array(21),u=Array(21),v=Array(21),d=Array(21);let h=r*Xn(-t/r)+e*Xn(t/e),m;if(m=Math.exp(-h),m==0)return 0;let g=Math.sqrt(h),p=g/c*.5,b=h+h,w,_,k,E;r<e?(w=r/e,_=1/(w+1),k=(e-r)/e,E=1/Math.sqrt(r*(w+1))):(w=e/r,_=1/(w+1),k=(e-r)/r,E=1/Math.sqrt(e*(w+1))),f[0]=k*.6666666666666666,v[0]=f[0]*-.5,d[0]=-v[0];let y=.5/a*bi(1,g),A=c,C=y+d[0]*E*A,j=1,R=w*w,T=1,B=E,M=p,I=b;for(let D=2;D<=20;D+=2){T*=R,f[D-1]=_*2*(w*T+1)/(D+2);let z=D+1;j+=T,f[z-1]=k*2*j/(D+3);for(let Q=D;Q<=z;++Q){let J=(Q+1)*-.5;u[0]=J*f[0];for(let ae=2;ae<=Q;++ae){let de=0;for(let ue=1;ue<=ae-1;++ue){let ee=ae-ue;de+=(ue*J-ee)*f[ue-1]*u[ee-1]}u[ae-1]=J*f[ae-1]+de/ae}v[Q-1]=u[Q-1]/(Q+1);let se=0;for(let ae=1;ae<=Q-1;++ae)se+=d[Q-ae-1]*v[ae-1];d[Q-1]=-(se+v[Q-1])}y=c*M+(D-1)*y,A=c*I+D*A,M=b*M,I=b*I,B*=E;let W=d[D-1]*B*y;B*=E;let oe=d[z-1]*B*A;if(C+=W+oe,Math.abs(W)+Math.abs(oe)<=s*C)break}let U=Math.exp(-co(r,e));return a*m*U*C}function Zf(r,e,t,s){let a=0,c=0;function f(w,_,k,E){const y=vl(w,_,k,1e-15);return E?.5-y+.5:y}function u(w,_,k,E){const y=vl(_,w,k,1e-15);return E?y:.5-y+.5}function v(w,_,k,E,y,A){const C=Gf(w,_,k,E,y,15000000000000002e-30);return A?.5-C+.5:C}function d(w,_,k,E,y){let A=Math.round(_);_=_-A,_===0&&(A=A-1,_=1);let C=uo(_,w,E,k,A,1e-15);return k<=.7?(C=C+vl(w,_,k,1e-15),y?.5-C+.5:C):(w<=15&&(A=20,C=C+uo(w,_,k,E,A,1e-15),w=w+A),C=dl(w,_,k,E,C,15*1e-15),y?.5-C+.5:C)}if(r<1e-15*.001&&e<1e-15*.001)return e/(r+e);let h,m,g,p,b;if(r<=1||e<=1){if(t>.5?(b=!0,h=e,g=s,m=r,p=t):(b=!1,h=r,g=t,m=e,p=s),m<Math.min(1e-15,1e-15*h))return a=Uf(h,m,g,1e-15),b?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=Hf(h,m,g,1e-15),b?c:.5-c+.5;if(Math.max(h,m)>1){if(m<=1)return f(h,m,g,b);if(g>=.29)return u(h,m,p,b);if(g<.1&&Math.pow(g*m,h)<=.7)return f(h,m,g,b)}else{if(h>=Math.min(.2,m)||Math.pow(g,h)<=.9)return f(h,m,g,b);if(g>=.3)return u(h,m,p,b)}let w=!1;return Math.max(h,m)>1&&m>15?c=0:(w=!0,c=uo(m,h,p,g,20,1e-15),m+=20),c=dl(m,h,p,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(w?c=uo(m-n,h,p,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=dl(m,h,p,g,c,15*1e-15),a=-expm1(c),b?.5-a+.5:a):(a=.5-c+.5,b?.5-a+.5:a)}else{let w=Number.isFinite(r+e)?r>e?(r+e)*s-e:r-(r+e)*t:r*s-e*t;const _=w<0;let k,E,y,A;if(_?(w=-w,k=e,y=s,E=r,A=t):(k=r,y=t,E=e,A=s),E<40)return E*y<=.7?f(k,E,y,_):d(k,E,y,A,_);if(k>E){if(E<=100||w>E*.03)return v(k,E,y,A,w,_)}else{if(k<=100)return v(k,E,y,A,w,_);if(w>k*.03)return v(k,E,y,A,w,_)}return a=Qf(k,E,w,1e-15*100),_?.5-a+.5:a}}function xi(r){const e=r.nrows,t=r.ncols;if(e<t){const c=xi(r.subset([],Wt.seq(1,e)));return{Q:c.Q,R:ev(c.Q,r)}}let s=Lr.eye(e),l=r.t();for(let c=1;c<=t;c++)for(let f=e;f>=c+1;f--){const u=l.v.subarray((f-2)*t,f*t),v=s.v.subarray((f-2)*e,f*e),d=u.slice(),h=v.slice(),[m,g,p]=$f(d[c-1],d[c-1+t]);for(let b=0;b<t;b++)u[b]=d[b]*m+d[b+t]*g,u[b+t]=d[b]*-g+d[b+t]*m,v[b]=h[b]*m+h[b+e]*g,v[b+e]=h[b]*-g+h[b+e]*m;for(let b=t;b<e;b++)v[b]=h[b]*m+h[b+e]*g,v[b+e]=h[b]*-g+h[b+e]*m}const a=Wt.seq(1,t);return{Q:e===t?s:s.subset([],a),R:e===t?l.t():l.subset([],a).t()}}function $f(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const a=e/r,c=Math.sqrt(1+a*a),f=1/c;return[f,a*f,r*c]}const t=r/e,s=Math.sqrt(1+t*t),l=1/s;return[t*l,l,e*s]}function hl(r){return typeof r=="number"}function ev(r,e){if(e===void 0&&(e=r),!Jr(r)||!Jr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=r.nrows,s=r.ncols,l=e.nrows,a=e.ncols,c=s,f=a,u=t,v=new Float64Array(c*f);for(let d=0;d<f;d++){const h=e.v.subarray(d*l,(d+1)*l),m=v.subarray(d*c,(d+1)*c);for(let g=0;g<c;g++){const p=r.v.subarray(g*t,(g+1)*t);let b=0;for(let w=0;w<u;w++)b+=p[w]*h[w];m[g]=b}}return new Lr(v,c,f)}function ki(r,e,t){if(t===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ge(r.v)}if(r.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new Lr(r.v,e,t)}function Jr(r){return r&&r.constructor===Lr}function tv(r,e,t){return new Lr(new Float64Array(r),e,t)}let Lr=(Le=class{constructor(e,t,s){if(!ArrayBuffer.isView(e)||e.constructor!==Le.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Le.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=Le.eye(e),l=Le.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],f=e-1;for(let u=0;u<e;u++)l.v[f*e+u]=s.v[f*e+u]/c;for(let u=e-2;u>=0;u--){let v=s.getcolumn(u+1);const d=a.getcolref(u+1);for(let h=u+1;h<e;h++){const m=l.getcolumn(h+1);v=v.subtract(m.mult(d[h]))}l.v.set(v.divide(d[u]).v,u*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(fi(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=Le.eye(e),a=Le.eye(e),c=this.t(),f=0,u=c.v[0];for(let v=0;v<e;v++)a.v[f*e+v]=l.v[f*e+v]/u;for(let v=1;v<e;v++){let d=l.getcolumn(v+1);const h=c.getcolref(v+1);for(let m=0;m<v;m++){const g=a.getcolumn(m+1);d=d.subtract(g.mult(h[m]))}a.v.set(d.divide(h[v]).v,v*e)}return a.t()}const t=xi(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Le.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Le.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let s=0;s<e;s++)t[s]=this.getcolref(s+1)[s];return new Ge(t)}t(){const e=this.nrows,t=this.ncols,s=new Le.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const a=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*t+l]=a[c]}return new Le(s,t,e)}for(let l=0;l<this.nrows;l++){const a=s.subarray(l*t,(l+1)*t);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+l]}return new Le(s,t,e)}dot(e){if(We(e))return new Le(pl(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Jr(e))return new Le(pl(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,s){if(Jr(e))return new Le(ml(this.v,e.v,t),this.nrows,this.ncols);if(hl(e))return new Le(gl(this.v,e,t),this.nrows,this.ncols);if(!We(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new Le.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(gl(this.getcolref(a+1),e.v[a],t),a*this.nrows);return new Le(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new Le.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(ml(this.getcolref(a+1),e.v,t),a*this.nrows);return new Le(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e,t){if(t===void 0&&(t=2),t==2){const s=this.ncols,l=new Le.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.getcolref(a+1));return new Ge(l)}if(t==1)return this.t().apply(e,2);if(t==0){const s=this.v.length,l=new Le.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.v[a]);return new Le(l,this.nrows,this.ncols)}}replace(e,t,s){typeof t=="number"&&(t=[t]),t.length===0&&(t=Wt.seq(1,this.nrows)),dr(t)||(t=hr(t)),typeof s=="number"&&(s=[s]),s.length===0&&(s=Wt.seq(1,this.ncols)),dr(s)||(s=hr(s));const l=t.length,a=s.length;if(Pr(t)<1||yr(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Pr(s)<1||yr(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const f=e.getcolref(c+1),u=(s.v[c]-1)*this.nrows;for(let v=0;v<t.length;v++){const d=t.v[v];this.v[u+d-1]=f[v]}}return this}copy(){return new Le(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new Ge.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)t[s]=this.getcolref(s+1)[e-1];return new Ge(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ge(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=hr([e])),typeof t=="number"&&(t=hr([t])),Array.isArray(e)&&(e=e.length===0?null:hr(e)),Array.isArray(t)&&(t=t.length===0?null:hr(t)),e!==null&&!dr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!dr(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Pr(e)<1||yr(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(Pr(t)<1||yr(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const f=t.length,u=this.nrows,v=new Le.valuesConstructor(u*f);for(let d=0;d<t.length;d++)v.set(this.v.slice((t.v[d]-1)*this.nrows,t.v[d]*this.nrows),d*this.nrows);return new Le(v,u,f)}if(t==null)return this.t().subset(t,e).t();const s=e.length,l=t.length,a=new Le.valuesConstructor(s*l);let c=new Le.valuesConstructor(s);for(let f=0;f<l;f++){const u=this.v.subarray((t.v[f]-1)*this.nrows,t.v[f]*this.nrows);for(let v=0;v<s;v++)c[v]=u[e.v[v]-1];a.set(c,f*s)}return new Le(a,s,l)}toString(e){function t(c,f){return" ".repeat(f-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(yr(this.v))))+e+3;let l="";const a=this.t();for(let c=1;c<=a.ncols;c++)l+=Array.from(a.getcolref(c)).map(f=>t(f.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,t,s,l){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const a=l!=null&&l.length>0,c=s!=null&&s.length>0;if(a&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const f=this.t();let u=c?s.join(e)+`
`:"";for(let v=1;v<=f.ncols;v++)u=u+(a?l[v-1]+e:"")+f.getcolref(v).join(e)+`
`;return u=u.replace(/\./g,t),u}static randn(e,t,s,l){return ki(gi(e*t,s,l),e,t)}static rand(e,t,s,l){return ki(mi(e*t,s,l),e,t)}static eye(e,t){t===void 0&&(t=e);const s=new Float64Array(e*t);for(let l=0;l<Math.min(e,t);l++)s[l*e+l]=1;return new Le(s,e,t)}static diagm(e){if(!We(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,s=new Float64Array(t*t);for(let l=0;l<t;l++)s[l*t+l]=e.v[l];return new Le(s,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Le(new Float64Array(e*t),e,t)}static ones(e,t){return Le.fill(1,e,t)}static fill(e,t,s){s===void 0&&(s=t);const l=new Float64Array(t*s);for(let a=0;a<l.length;a++)l[a]=e;return new Le(l,t,s)}static outer(e,t,s){if(Array.isArray(e)&&(e=ut(e)),Array.isArray(t)&&(t=ut(t)),!We(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!We(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=Le.zeros(e.length,t.length);for(let a=0;a<t.length;a++){const c=t.v[a],f=l.getcolref(a+1);for(let u=0;u<e.length;u++)f[u]=s(e.v[u],c)}return l}static parseCSV(e,t,s,l){function a(w){return w.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}t===void 0&&(t=",");const c=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let f=e.split(/\n/),u=[],v=0;const d=f[0].split(t);(s||s===void 0&&a(d))&&(u=d,v=1),f=f.filter(w=>w.trim().length>1);let h=[],m=0;l&&(m=1);const g=f.length-v,p=d.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const b=Le.zeros(p,g);for(let w=v;w<g+v;w++){const _=f[w].split(t);let k;if(l?(h[w-v]=_[0],k=_.slice(1).map(E=>Number.parseFloat(E.trim().replace(c,".")))):k=_.map(E=>Number.parseFloat(E.trim().replace(c,"."))),k.some(E=>Number.isNaN(E)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(k.length!=p)throw Error("Wrong number of values in row #"+w);b.v.set(new Float64Array(k),(w-v)*p)}return{values:b.t(),header:u,labels:h,sep:t,dec:c}}},zt(Le,"valuesConstructor",Float64Array),zt(Le,"TOLERANCE",Math.pow(10,-9)),Le);function We(r){return r&&r.constructor===Ge}function ut(r){return new Ge(new Float64Array(r))}let Ge=(lt=class{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new Wt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new Wt(t.subarray(0,s))}filter(e){const t=new lt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new lt(t.subarray(0,s))}shuffle(){return new lt(Si(this.v))}sort(e){return new lt(bl(this.v,e))}sortind(e){return new Wt(Ni(this.v,e))}rep(e){return Ai(this,e)}repeach(e){return Ci(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=Wt.seq(1,this.length)),dr(t)||(t=hr(t));const s=t.length;if(Pr(t)<1||yr(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<t.length;l++){const a=t.v[l];this.v[a-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=hr([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Wt.bool2ind(e):hr(e)),!dr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=lt.zeros(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new lt(this.v.slice(e-1,t))}copy(){return new lt(this.v.slice())}dot(e){return e===void 0&&(e=this),pl(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(We(e))return new lt(ml(this.v,e.v,t));if(hl(e))return new lt(gl(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e){const t=this.v.length,s=lt.zeros(t);for(let l=0;l<t;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const t=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new lt.valuesConstructor(t);let l=0;for(const a of e)typeof a=="number"?(s[l]=a,l+=1):(s.set(We(a)?a.v:new lt.valuesConstructor(a),l),l+=typeof a=="number"?1:a.length);return new lt(s)}static seq(e,t,s){return Ei(e,t,s,lt)}static randn(e,t,s){return gi(e,t,s)}static rand(e,t,s){return mi(e,t,s)}static zeros(e){return new lt(new lt.valuesConstructor(e))}static ones(e){return lt.fill(1,e)}static fill(e,t){const s=new lt.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new lt(s)}},zt(lt,"valuesConstructor",Float64Array),lt);function dr(r){return r.constructor===Wt}function hr(r){return new Wt(new Int32Array(r))}let Wt=(ft=class{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new ft.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new ft(t.subarray(0,s))}filter(e){const t=new ft.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new ft(t.subarray(0,s))}shuffle(){return new ft(Si(this.v))}sort(e){return new ft(bl(this.v,e))}sortind(e){return new ft(Ni(this.v,e))}rep(e){return Ai(this,e)}repeach(e){return Ci(this,e)}subset(e){if(typeof e=="number"&&(e=hr([e])),Array.isArray(e)&&(e=hr(e)),!dr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=new ft.valuesConstructor(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new ft(s)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new ft(this.v.slice(e-1,t))}static seq(e,t,s){return Ei(e,t,s,ft)}static ones(e){return ft.fill(1,e)}static fill(e,t){const s=new ft.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new ft(s)}static bool2ind(e){let t=0;const s=new ft.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[t]=l+1,t=t+1);return new ft(s.subarray(0,t))}},zt(ft,"valuesConstructor",Int32Array),ft);function Ei(r,e,t,s){t===void 0&&(t=r<=e?1:-1);const l=Math.floor((e-r)/t)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(l);for(let c=0;c<l;c++)a[c]=r+c*t;return new s(a)}function Ai(r,e){const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=1;l<=e;l++)for(let a=0;a<r.length;a++)s[(l-1)*r.length+a]=r.v[a];return new r.constructor(s)}function Ci(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=0;l<r.length;l++)for(let a=0;a<e;a++)s[l*e+a]=r.v[l];return new r.constructor(s)}function ml(r,e,t){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e[l]);return s}function gl(r,e,t){const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e);return s}function pl(r,e,t,s,l,a){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const c=t,f=a,u=s,v=new r.constructor(c*f);for(let d=0;d<f;d++){const h=e.subarray(d*l,(d+1)*l),m=v.subarray(d*c,(d+1)*c);for(let g=0;g<u;g++){const p=h[g],b=r.subarray(g*t,(g+1)*t);for(let w=0;w<c;w++)m[w]+=b[w]*p}}return v}function Si(r){let e=r.slice(),t=e.length,s,l;for(;t;)l=Math.floor(Math.random()*t--),s=e[t],e[t]=e[l],e[l]=s;return e}function bl(r,e=!1){return e?r.slice().sort((t,s)=>s-t):r.slice().sort((t,s)=>t-s)}function Ni(r,e=!1){const t=Wt.seq(1,r.length).v;return e?t.sort((s,l)=>r[l-1]-r[s-1]):t.sort((s,l)=>r[s-1]-r[l-1])}function Mi(r){if(nr(r))return Mi(r.v);let e=1;for(let t=0;t<r.length;t++)e=e*r[t];return e}function Ns(r){return nr(r)||mr(r)?r.v[wl(r.v)-1]:r[wl(r)-1]}function wl(r){if(nr(r)||mr(r))return wl(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]<t&&(e=s,t=r[s-1]);return e}function Qn(r){return nr(r)||mr(r)?r.v[_l(r.v)-1]:r[_l(r)-1]}function _l(r){if(nr(r)||mr(r))return _l(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]>t&&(e=s,t=r[s-1]);return e}function ji(r,e=0,t=1){let s=sr.zeros(r);for(let l=0;l<r;l++)s.v[l]=e+Math.random()*(t-e);return s}function Ti(r,e=0,t=1){let s=sr.zeros(r);for(let l=0;l<r;l++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[l]=a*Math.sin(c)*t+e}return s}function Pi(r){const e=r.nrows,t=r.ncols;if(e<t){const c=Pi(r.subset([],Ut.seq(1,e)));return{Q:c.Q,R:nv(c.Q,r)}}let s=Xr.eye(e),l=r.t();for(let c=1;c<=t;c++)for(let f=e;f>=c+1;f--){const u=l.v.subarray((f-2)*t,f*t),v=s.v.subarray((f-2)*e,f*e),d=u.slice(),h=v.slice(),[m,g,p]=rv(d[c-1],d[c-1+t]);for(let b=0;b<t;b++)u[b]=d[b]*m+d[b+t]*g,u[b+t]=d[b]*-g+d[b+t]*m,v[b]=h[b]*m+h[b+e]*g,v[b+e]=h[b]*-g+h[b+e]*m;for(let b=t;b<e;b++)v[b]=h[b]*m+h[b+e]*g,v[b+e]=h[b]*-g+h[b+e]*m}const a=Ut.seq(1,t);return{Q:e===t?s:s.subset([],a),R:e===t?l.t():l.subset([],a).t()}}function rv(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const a=e/r,c=Math.sqrt(1+a*a),f=1/c;return[f,a*f,r*c]}const t=r/e,s=Math.sqrt(1+t*t),l=1/s;return[t*l,l,e*s]}function Li(r){return typeof r=="number"}function nv(r,e){if(e===void 0&&(e=r),!Nn(r)||!Nn(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=r.nrows,s=r.ncols,l=e.nrows,a=e.ncols,c=s,f=a,u=t,v=new Float64Array(c*f);for(let d=0;d<f;d++){const h=e.v.subarray(d*l,(d+1)*l),m=v.subarray(d*c,(d+1)*c);for(let g=0;g<c;g++){const p=r.v.subarray(g*t,(g+1)*t);let b=0;for(let w=0;w<u;w++)b+=p[w]*h[w];m[g]=b}}return new Xr(v,c,f)}function zi(r,e,t){if(t===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new sr(r.v)}if(r.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new Xr(r.v,e,t)}function Nn(r){return r&&r.constructor===Xr}const Fe=class Fe{constructor(e,t,s){if(!ArrayBuffer.isView(e)||e.constructor!==Fe.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Fe.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=Fe.eye(e),l=Fe.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],f=e-1;for(let u=0;u<e;u++)l.v[f*e+u]=s.v[f*e+u]/c;for(let u=e-2;u>=0;u--){let v=s.getcolumn(u+1);const d=a.getcolref(u+1);for(let h=u+1;h<e;h++){const m=l.getcolumn(h+1);v=v.subtract(m.mult(d[h]))}l.v.set(v.divide(d[u]).v,u*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(Mi(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=Fe.eye(e),a=Fe.eye(e),c=this.t(),f=0,u=c.v[0];for(let v=0;v<e;v++)a.v[f*e+v]=l.v[f*e+v]/u;for(let v=1;v<e;v++){let d=l.getcolumn(v+1);const h=c.getcolref(v+1);for(let m=0;m<v;m++){const g=a.getcolumn(m+1);d=d.subtract(g.mult(h[m]))}a.v.set(d.divide(h[v]).v,v*e)}return a.t()}const t=Pi(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Fe.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Fe.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let s=0;s<e;s++)t[s]=this.getcolref(s+1)[s];return new sr(t)}t(){const e=this.nrows,t=this.ncols,s=new Fe.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const a=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*t+l]=a[c]}return new Fe(s,t,e)}for(let l=0;l<this.nrows;l++){const a=s.subarray(l*t,(l+1)*t);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+l]}return new Fe(s,t,e)}dot(e){if(nr(e))return new Fe(kl(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Nn(e))return new Fe(kl(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,s){if(Nn(e))return new Fe(yl(this.v,e.v,t),this.nrows,this.ncols);if(Li(e))return new Fe(xl(this.v,e,t),this.nrows,this.ncols);if(!nr(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new Fe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(xl(this.getcolref(a+1),e.v[a],t),a*this.nrows);return new Fe(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new Fe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)l.set(yl(this.getcolref(a+1),e.v,t),a*this.nrows);return new Fe(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e,t){if(t===void 0&&(t=2),t==2){const s=this.ncols,l=new Fe.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.getcolref(a+1));return new sr(l)}if(t==1)return this.t().apply(e,2);if(t==0){const s=this.v.length,l=new Fe.valuesConstructor(s);for(let a=0;a<s;a++)l[a]=e(this.v[a]);return new Fe(l,this.nrows,this.ncols)}}replace(e,t,s){typeof t=="number"&&(t=[t]),t.length===0&&(t=Ut.seq(1,this.nrows)),mr(t)||(t=gr(t)),typeof s=="number"&&(s=[s]),s.length===0&&(s=Ut.seq(1,this.ncols)),mr(s)||(s=gr(s));const l=t.length,a=s.length;if(Ns(t)<1||Qn(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Ns(s)<1||Qn(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const f=e.getcolref(c+1),u=(s.v[c]-1)*this.nrows;for(let v=0;v<t.length;v++){const d=t.v[v];this.v[u+d-1]=f[v]}}return this}copy(){return new Fe(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new sr.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)t[s]=this.getcolref(s+1)[e-1];return new sr(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new sr(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=gr([e])),typeof t=="number"&&(t=gr([t])),Array.isArray(e)&&(e=e.length===0?null:gr(e)),Array.isArray(t)&&(t=t.length===0?null:gr(t)),e!==null&&!mr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!mr(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Ns(e)<1||Qn(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(Ns(t)<1||Qn(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const f=t.length,u=this.nrows,v=new Fe.valuesConstructor(u*f);for(let d=0;d<t.length;d++)v.set(this.v.slice((t.v[d]-1)*this.nrows,t.v[d]*this.nrows),d*this.nrows);return new Fe(v,u,f)}if(t==null)return this.t().subset(t,e).t();const s=e.length,l=t.length,a=new Fe.valuesConstructor(s*l);let c=new Fe.valuesConstructor(s);for(let f=0;f<l;f++){const u=this.v.subarray((t.v[f]-1)*this.nrows,t.v[f]*this.nrows);for(let v=0;v<s;v++)c[v]=u[e.v[v]-1];a.set(c,f*s)}return new Fe(a,s,l)}toString(e){function t(c,f){return" ".repeat(f-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Qn(this.v))))+e+3;let l="";const a=this.t();for(let c=1;c<=a.ncols;c++)l+=Array.from(a.getcolref(c)).map(f=>t(f.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,t,s,l){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const a=l!=null&&l.length>0,c=s!=null&&s.length>0;if(a&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const f=this.t();let u=c?s.join(e)+`
`:"";for(let v=1;v<=f.ncols;v++)u=u+(a?l[v-1]+e:"")+f.getcolref(v).join(e)+`
`;return u=u.replace(/\./g,t),u}static randn(e,t,s,l){return zi(Ti(e*t,s,l),e,t)}static rand(e,t,s,l){return zi(ji(e*t,s,l),e,t)}static eye(e,t){t===void 0&&(t=e);const s=new Float64Array(e*t);for(let l=0;l<Math.min(e,t);l++)s[l*e+l]=1;return new Fe(s,e,t)}static diagm(e){if(!nr(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,s=new Float64Array(t*t);for(let l=0;l<t;l++)s[l*t+l]=e.v[l];return new Fe(s,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Fe(new Float64Array(e*t),e,t)}static ones(e,t){return Fe.fill(1,e,t)}static fill(e,t,s){s===void 0&&(s=t);const l=new Float64Array(t*s);for(let a=0;a<l.length;a++)l[a]=e;return new Fe(l,t,s)}static outer(e,t,s){if(Array.isArray(e)&&(e=Ri(e)),Array.isArray(t)&&(t=Ri(t)),!nr(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!nr(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=Fe.zeros(e.length,t.length);for(let a=0;a<t.length;a++){const c=t.v[a],f=l.getcolref(a+1);for(let u=0;u<e.length;u++)f[u]=s(e.v[u],c)}return l}static parseCSV(e,t,s,l){function a(w){return w.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}t===void 0&&(t=",");const c=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let f=e.split(/\n/),u=[],v=0;const d=f[0].split(t);(s||s===void 0&&a(d))&&(u=d,v=1),f=f.filter(w=>w.trim().length>1);let h=[],m=0;l&&(m=1);const g=f.length-v,p=d.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const b=Fe.zeros(p,g);for(let w=v;w<g+v;w++){const _=f[w].split(t);let k;if(l?(h[w-v]=_[0],k=_.slice(1).map(E=>Number.parseFloat(E.trim().replace(c,".")))):k=_.map(E=>Number.parseFloat(E.trim().replace(c,"."))),k.some(E=>Number.isNaN(E)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(k.length!=p)throw Error("Wrong number of values in row #"+w);b.v.set(new Float64Array(k),(w-v)*p)}return{values:b.t(),header:u,labels:h,sep:t,dec:c}}};zt(Fe,"valuesConstructor",Float64Array),zt(Fe,"TOLERANCE",Math.pow(10,-9));let Xr=Fe;function nr(r){return r&&r.constructor===sr}function Ri(r){return new sr(new Float64Array(r))}const vt=class vt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new Ut.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new Ut(t.subarray(0,s))}filter(e){const t=new vt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new vt(t.subarray(0,s))}shuffle(){return new vt(Oi(this.v))}sort(e){return new vt(Bi(this.v,e))}sortind(e){return new Ut(Di(this.v,e))}rep(e){return Fi(this,e)}repeach(e){return qi(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=Ut.seq(1,this.length)),mr(t)||(t=gr(t));const s=t.length;if(Ns(t)<1||Qn(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<t.length;l++){const a=t.v[l];this.v[a-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=gr([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Ut.bool2ind(e):gr(e)),!mr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=vt.zeros(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new vt(this.v.slice(e-1,t))}copy(){return new vt(this.v.slice())}dot(e){return e===void 0&&(e=this),kl(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(nr(e))return new vt(yl(this.v,e.v,t));if(Li(e))return new vt(xl(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e){const t=this.v.length,s=vt.zeros(t);for(let l=0;l<t;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const t=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new vt.valuesConstructor(t);let l=0;for(const a of e)typeof a=="number"?(s[l]=a,l+=1):(s.set(nr(a)?a.v:new vt.valuesConstructor(a),l),l+=typeof a=="number"?1:a.length);return new vt(s)}static seq(e,t,s){return Ii(e,t,s,vt)}static randn(e,t,s){return Ti(e,t,s)}static rand(e,t,s){return ji(e,t,s)}static zeros(e){return new vt(new vt.valuesConstructor(e))}static ones(e){return vt.fill(1,e)}static fill(e,t){const s=new vt.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new vt(s)}};zt(vt,"valuesConstructor",Float64Array);let sr=vt;function mr(r){return r.constructor===Ut}function gr(r){return new Ut(new Int32Array(r))}const yt=class yt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new yt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new yt(t.subarray(0,s))}filter(e){const t=new yt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new yt(t.subarray(0,s))}shuffle(){return new yt(Oi(this.v))}sort(e){return new yt(Bi(this.v,e))}sortind(e){return new yt(Di(this.v,e))}rep(e){return Fi(this,e)}repeach(e){return qi(this,e)}subset(e){if(typeof e=="number"&&(e=gr([e])),Array.isArray(e)&&(e=gr(e)),!mr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=new yt.valuesConstructor(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new yt(s)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new yt(this.v.slice(e-1,t))}static seq(e,t,s){return Ii(e,t,s,yt)}static ones(e){return yt.fill(1,e)}static fill(e,t){const s=new yt.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new yt(s)}static bool2ind(e){let t=0;const s=new yt.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[t]=l+1,t=t+1);return new yt(s.subarray(0,t))}};zt(yt,"valuesConstructor",Int32Array);let Ut=yt;function Ii(r,e,t,s){t===void 0&&(t=r<=e?1:-1);const l=Math.floor((e-r)/t)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(l);for(let c=0;c<l;c++)a[c]=r+c*t;return new s(a)}function Fi(r,e){const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=1;l<=e;l++)for(let a=0;a<r.length;a++)s[(l-1)*r.length+a]=r.v[a];return new r.constructor(s)}function qi(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=0;l<r.length;l++)for(let a=0;a<e;a++)s[l*e+a]=r.v[l];return new r.constructor(s)}function yl(r,e,t){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e[l]);return s}function xl(r,e,t){const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e);return s}function kl(r,e,t,s,l,a){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const c=t,f=a,u=s,v=new r.constructor(c*f);for(let d=0;d<f;d++){const h=e.subarray(d*l,(d+1)*l),m=v.subarray(d*c,(d+1)*c);for(let g=0;g<u;g++){const p=h[g],b=r.subarray(g*t,(g+1)*t);for(let w=0;w<c;w++)m[w]+=b[w]*p}}return v}function Oi(r){let e=r.slice(),t=e.length,s,l;for(;t;)l=Math.floor(Math.random()*t--),s=e[t],e[t]=e[l],e[l]=s;return e}function Bi(r,e=!1){return e?r.slice().sort((t,s)=>s-t):r.slice().sort((t,s)=>t-s)}function Di(r,e=!1){const t=Ut.seq(1,r.length).v;return e?t.sort((s,l)=>r[l-1]-r[s-1]):t.sort((s,l)=>r[s-1]-r[l-1])}function sv(r,e,t){return 5*r*e+e+4*t*e+r*t}function zr(r,e,t){if(!r||!r.class||!r.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=r.ncols,l=r.ncomp;let a,c;switch(e){case"mX":a=2,c=s;break;case"sX":a=2+s,c=s;break;case"loadings":case"xloadings":a=2+2*s+(t-1)*s,c=s;break;case"P":a=2+2*s,c=l*s;break;case"eigenvals":case"xeigenvals":a=2+2*s+s*l,c=l;break;case"cq0":a=2+2*s+s*l+l,c=l;break;case"cNq":a=2+2*s+s*l+2*l,c=l;break;case"rq0":a=2+2*s+s*l+3*l,c=l;break;case"rNq":a=2+2*s+s*l+4*l,c=l;break;case"ch0":a=2+2*s+s*l+5*l,c=l;break;case"cNh":a=2+2*s+s*l+6*l,c=l;break;case"rh0":a=2+2*s+s*l+7*l,c=l;break;case"rNh":a=2+2*s+s*l+8*l,c=l;break;case"cr0":a=2+2*s+s*l+9*l,c=l;break;case"cNr":a=2+2*s+s*l+10*l,c=l;break;case"rr0":a=2+2*s+s*l+11*l,c=l;break;case"rNr":a=2+2*s+s*l+12*l,c=l;break;case"cg0":a=2+2*s+s*l+13*l,c=l;break;case"cNg":a=2+2*s+s*l+14*l,c=l;break;case"rg0":a=2+2*s+s*l+15*l,c=l;break;case"rNg":a=2+2*s+s*l+16*l,c=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(a,a+c)}function ov(r,e,t){if(!r||!r.class||!r.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=r.ncols,l=r.nrows,a=r.ncomp;let c,f;switch(e){case"scores":case"xscores":c=(t-1)*l,f=l;break;case"T":c=0,f=l*a;break;case"hdist":c=l*a+(t-1)*l,f=l;break;case"qdist":c=2*l*a+(t-1)*l,f=l;break;case"xcumexpvar":case"cumexpvar":c=3*l*a,f=a;break;case"fdistc":c=3*l*a+a+(t-1)*l,f=l;break;case"fdistr":c=4*l*a+a+(t-1)*l,f=l;break;case"gdist":c=5*l*a+a+(t-1)*s,f=s;break;case"rdist":c=5*l*a+a+s*a+(t-1)*s,f=s;break;case"idistc":c=5*l*a+a+2*s*a+(t-1)*s,f=s;break;case"idistr":c=5*l*a+a+3*s*a+(t-1)*s,f=s;break;case"E":c=5*l*a+a+3*s*a+a*s,f=l*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return r.v.subarray(c,c+f)}function lv(r,e,t){if(!Array.isArray(r))return!1;if(r.length===0)return!0;for(let s=0;s<r.length;s++){const l=r[s];if(l<e||l>t)return!1}return!0}function av(r,e,t,s){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!Nn(t))throw new Error("pca_predict: X must be a matrix.");s||(s=[]);const l=s&&Array.isArray(s)?s.length:0;if(!lv(s,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=t.nrows-l;let c=e.exclvars;t.ncols===e.ncols&&(c=[]);const f=c.length,u=t.ncols-f;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const v=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,v/t.v.BYTES_PER_ELEMENT);let d=null;if(l>0){const T=new Int32Array(s);d=r._malloc(T.length*T.BYTES_PER_ELEMENT),r.HEAP32.set(T,d/T.BYTES_PER_ELEMENT)}let h=null;if(f>0){const T=new Int32Array(c);h=r._malloc(T.length*T.BYTES_PER_ELEMENT),r.HEAP32.set(T,h/T.BYTES_PER_ELEMENT)}const m=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const g=sv(a,e.ncomp,u),p=Float64Array,b=r._malloc(g*p.BYTES_PER_ELEMENT);if(r.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[v,t.nrows,t.ncols,m,b,d,l,h,f])!==1)throw new Error("pca_predict: PCA prediction failed.");const _=r.HEAPF64.slice(b/p.BYTES_PER_ELEMENT,b/p.BYTES_PER_ELEMENT+g);r._free(v),r._free(m),r._free(b),d&&r._free(d),h&&r._free(h);const k={class:["pcares"],v:_,ncomp:e.ncomp,nrows:a,ncols:u,npred:u,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},E=new Array(e.ncomp),y=new Array(e.ncomp),A=new Array(e.ncomp),C=new Array(e.ncomp),j=new Array(e.ncomp),R=ov(k,"xcumexpvar");j[0]=1,C[0]=R[0],A[0]=1-R[0],E[0]=R[0],y[0]=1-R[0];for(let T=1;T<e.ncomp;T++)j[T]=T+1,C[T]=R[T],A[T]=1-R[T],E[T]=R[T]-R[T-1],y[T]=1-E[T];return k.stat={components:j,resvar:y,expvar:E,cumexpvar:C,cumresvar:A},k}function iv(r,e){if(e[0]===0){const t=e[1]+2;return 2+r*t+2*r+t}return 3+r}const Qr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(r,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(r,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(r,e)=>2*r,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:iv,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(r,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(r,e)=>2+3*r+e[0],mp:[5,5]}];function cv(r){let e="<ul>";for(let t=0;t<r.ml.length;t++){const s=Qr[r.ml[t]].title;e=e+"<li>"+s+" <span>"+r.info[t]+"</span></li>"}return e=e+"</ul>",e}function Vi(r,e,t){const s=Qr.findIndex(h=>h.id==="trim");let l=0,a=r.ncols-e,c=0;for(let h=0;h<t.ml.length;h++){if(t.ml[h]!==s){c+=t.mpl_new[h];continue}l=Math.max(l,t.mp_new[c]),a=Math.min(a,t.mp_new[c+1]),c+=t.mpl_new[h]}const f=r.nrows,v=a-l+e,d=Xr.zeros(f,v);return c=0,e>0&&(d.v.set(r.v.slice(0,e*f),c),c+=e*f),d.v.set(r.v.slice((e+l)*f,(e+a)*f),c),[l,a,d]}function El(r,e){if(!r||!e||typeof e!="object"||Object.keys(e).length===0)return r;const t=Qr.findIndex(f=>f.id==="trim");if(e.ml.findIndex(f=>f===t)<0)return r;const[l,a,c]=Vi(r.values,r.nresp,e);return r.values=c,r.varlabels=r.nresp>0?r.varlabels.slice(0,r.nresp).concat(r.varlabels.slice(r.nresp+l,r.nresp+a)):r.varlabels.slice(l,a),r.varindices=r.nresp>0?Rr(0,r.nresp-1).concat(Rr(0,a-l-1)):Rr(0,a-l-1),r.varvalues=r.nresp>0?r.varvalues.slice(0,r.nresp).concat(r.varvalues.slice(r.nresp+l,r.nresp+a)):r.varvalues.slice(l,a),r}function Yi(r,e,t,s,l=!0,a=[]){if(!Nn(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,f;l?(c=e.ncols,f=e.nrows-t):(c=e.nrows,f=e.ncols-t);const u=s.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const v=new Int32Array(u),d=new Int32Array(u),h=new Int32Array(u);let m=0,g=0;for(let I=0;I<s.length;I++){const U=s[I].id,D=s[I].params,z=Qr.findIndex(oe=>oe.id==U);if(z<0)throw new Error("prep_fit: wrong method name: "+U+".");const W=Qr[z];if(D.length!==W.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+U+".");v[I]=z,d[I]=W.mpl,h[I]=W.get_mpl_new(f,D),m=m+d[I],g=g+h[I]}const p=new Float64Array(m);let b=0;for(let I=0;I<s.length;I++){const U=s[I].id,D=s[I].params;Qr.findIndex(z=>z.id==U),p.set(D,b),b=b+d[I]}const w=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,w/e.v.BYTES_PER_ELEMENT);const _=r._malloc(v.length*v.BYTES_PER_ELEMENT);r.HEAP32.set(v,_/v.BYTES_PER_ELEMENT);const k=r._malloc(d.length*d.BYTES_PER_ELEMENT);r.HEAP32.set(d,k/d.BYTES_PER_ELEMENT);const E=r._malloc(h.length*h.BYTES_PER_ELEMENT);r.HEAP32.set(h,E/h.BYTES_PER_ELEMENT);const y=r._malloc(p.length*p.BYTES_PER_ELEMENT);r.HEAPF64.set(p,y/p.BYTES_PER_ELEMENT);const A=r._malloc(g*p.BYTES_PER_ELEMENT),C=new Int32Array(a),j=C.length,R=r._malloc(j*C.BYTES_PER_ELEMENT);if(r.HEAP32.set(C,R/C.BYTES_PER_ELEMENT),r.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[w,c,f,t,u,_,k,y,E,A,l,R,j])!==1)throw new Error("prep_fit: unexpected error.");const B=r.HEAPF64.slice(A/p.BYTES_PER_ELEMENT,A/p.BYTES_PER_ELEMENT+g);return r._free(w),r._free(_),r._free(y),r._free(k),r._free(R),r._free(A),r._free(E),{ml:v,mpl:d,mp:p,mpl_new:h,mp_new:B,npred:f,class:["prepmodel"]}}function Ms(r,e,t,s,l=!0,a=!1){if(!Nn(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let c,f;if(l?(c=e.ncols,f=e.nrows-t):(c=e.nrows,f=e.ncols-t),f!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+f+").");const u=s.ml,v=s.mpl_new,d=s.mp_new,h=v.reduce((A,C)=>A+C,0);if(!u||u.length<1||!v||v.length!==u.length||d.length!==h)throw new Error("prep_apply: wrong structure of the model object.");const m=u.length,g=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const p=r._malloc(u.length*u.BYTES_PER_ELEMENT);r.HEAP32.set(u,p/u.BYTES_PER_ELEMENT);const b=r._malloc(v.length*v.BYTES_PER_ELEMENT);r.HEAP32.set(v,b/v.BYTES_PER_ELEMENT);const w=r._malloc(d.length*d.BYTES_PER_ELEMENT);r.HEAPF64.set(d,w/d.BYTES_PER_ELEMENT);const _=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(r.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[g,c,f,t,m,p,b,w,_,l])!==1)throw new Error("prep_apply: unexpected error.");const E=r.HEAPF64.slice(_/e.v.BYTES_PER_ELEMENT,_/e.v.BYTES_PER_ELEMENT+e.v.length);r._free(g),r._free(p),r._free(b),r._free(w),r._free(_);const y=new Xr(E,e.nrows,e.ncols);if(a){const[A,C,j]=Vi(y,t,s);return j}return y}function Wi(r,e,t,s){e===void 0&&(e=!0),t===void 0&&(t=!1),s===void 0&&(s=!1);function l(u,v,d,h){if(typeof v=="boolean")return v?u.apply(d,2):ut([h]).rep(u.ncols);if(!We(v))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(v.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return v}const a=l(r,e,Cn,0),c=l(r,t,oo,1),f=Lr.zeros(r.nrows,r.ncols);for(let u=1;u<=r.ncols;u++){const v=r.getcolref(u),d=f.getcolref(u),h=a.v[u-1],m=1/c.v[u-1];for(let g=0;g<r.nrows;g++)d[g]=(v[g]-h)*m}return s?[f,a,c]:f}function Ui(r,e,t){return r<e?["regular","in"]:r>t?["outlier","out"]:["extreme","out"]}function uv(r,e,t,s,l,a,c,f){if(!f||f.length===0)return[0,0];let u=0,v=0;for(let d of f){const h=r[d],[m,g]=Ui(h,e,t);a[m]+=1,c[g]+=1,s[d]=m,l[d]=g,u=u+(g==="in"),v=v+(g!=="in")}return[u,v]}function Hi(r,e,t,s,l,a,c,f,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let v=0,d=0;for(let U of u){const D=r[U],[z,W]=Ui(D,t,s);f[W]+=1,l[U]="alien",c.alien+=1,a[U]=W,v=v+(W!=="in"),d=d+(W==="in")}const h=u.slice();h.sort((U,D)=>r[U]-r[D]);let m=h.length;const g=h.map(U=>r[U]);let p=-1,b=0,w=0,_=0,k=0;for(;p<0;)b>0&&(l[h[m-1]]="external",c.alien=c.alien-1,c.external=c.external+1,m=m-1,h.pop(),g.pop()),w=Cn(g),_=lo(g),k=_/(w*w),p=4-2*e*k,b=b+1;const E=(2+Math.sqrt(p))/k,y=E-e,A=w/E,C=t/A,j=1-2*(e+y)*(e+3*y)/(3*(e+2*y)**2),R=(j-1)*(1-3*j),T=(e+2*y)/(e+y)**2,B=1+j*T*(j-1-.5*(2-j)*R*T),M=j*Math.sqrt(2*T)*(1+.5*R*T),I=il((Math.pow(C/(e+y),j)-B)/M);return[v,d,I,y,A,j,B,M,e,w]}function Al(r,e,t,s,l){(!l||!Array.isArray(l))&&(l=[]);let a=r.exclvars;(!a||!Array.isArray(a))&&(a=[]);const c=t.values.nrows,f=l.length,u=c-f,v=t.sep,d=e.classes&&e.classes.length===u,h=d?["","","","",""]:["","","",""];let m="";if(m+=["Reference classes:",d?"provided":"not provided",...h].join(v)+`
`,m+=["Center:",r.center?"yes":"no",...h].join(v)+`
`,m+=["Scale:",r.scale?"yes":"no",...h].join(v)+`
`,m+=["Alpha:",(r.alpha/100).toFixed(3),...h].join(v)+`
`,m+=["Limits estimator:",r.limType,...h].join(v)+`
`,m+=`
`,m+=["Nf:",e.Nf,...h].join(v)+`
`,m+=`
`,m+=["F crit (extremes):",r.eCrit,...h].join(v)+`
`,m+=["F crit (outliers):",r.oCrit,...h].join(v)+`
`,m+=`
`,a.length>0&&(m+=["Number of excluded variables:",a.length,...h].join(v)+`
`,m+=["Indices of excluded variables:",pv(a),...h].join(v)+`
`,m+=`
`),m+=["Objects:",c,...h].join(v)+`
`,m+=["In:",e.outcomes.decsNum.in,...h].join(v)+`
`,m+=["Out:",e.outcomes.decsNum.out,...h].join(v)+`
`,m+=["Excluded:",f,...h].join(v)+`
`,e.nMembers>0&&(m+=`
`,m+=["Members:",e.nMembers,...h].join(v)+`
`,m+=["Regular:",e.outcomes.rolsNum.regular,...h].join(v)+`
`,m+=["Extreme:",e.outcomes.rolsNum.extreme,...h].join(v)+`
`,m+=["Outliers:",e.outcomes.rolsNum.outlier,...h].join(v)+`
`,m+=["Sensitivity:",e.outcomes.stat.sensitivity,...h].join(v)+`
`),e.nStrangers>0&&(m+=`
`,m+=["Strangers:",e.nStrangers,...h].join(v)+`
`,m+=["In:",e.outcomes.decsNum.in-e.outcomes.rolsNum.regular,...h].join(v)+`
`,m+=["Aliens:",e.outcomes.rolsNum.alien,...h].join(v)+`
`,m+=["External:",e.outcomes.rolsNum.external,...h].join(v)+`
`,m+=["Specificity:",e.outcomes.stat.specificity,...h].join(v)+`
`,m+=["Selectivity:",e.outcomes.stat.selectivity,...h].join(v)+`
`,m+=`
`,m+=["Beta:",e.beta,...h].join(v)+`
`,m+=["Non-centrality (s):",e.s,...h].join(v)+`
`,m+=["Scaling (f0):",e.f0,...h].join(v)+`
`,e.nMembers>0)){const k=e.outcomes.TP/(e.outcomes.TP+e.outcomes.FP),E=e.outcomes.stat.sensitivity,y=1-e.outcomes.stat.specificity,A=2*k*E/(k+E),C=E/y,j=(1-E)/(1-y);m+=`
`,m+=["Efficiency:",e.outcomes.stat.efficiency,...h].join(v)+`
`,m+=["Accuracy:",e.outcomes.stat.accuracy,...h].join(v)+`
`,m+=["Precision:",k,...h].join(v)+`
`,m+=["F1-score:",A,...h].join(v)+`
`,m+=["PLR:",C,...h].join(v)+`
`,m+=["NLR:",j,...h].join(v)+`
`}m+=`
`,m+=["","object","class","role","decision","f"].join(v)+`
`;let g=0;for(let k=0;k<c;k++){if(f>0&&l.includes(k)){m+=["",t.objlabels[k],"-","removed","-","-"].join(v)+`
`;continue}m+=["",t.objlabels[k],e.classes[g],e.outcomes.rols[g],e.outcomes.decs[g],e.outcomes.f[g]].join(v)+`
`,g=g+1}m+=`
`,t.dec!=="."&&(m=m.replace(/\./g,t.dec)),m=["Target class:",r.className,...h].join(v)+`
`+m,m=["Data filename:",t.fileName,...h].join(v)+`
`+m;let p=["NIMCA results ("+s+")","https://mda.tools/nimca/",...h].join(v)+`

`;const b=new Blob([p+m],{type:"text/csv"}),w=window.URL.createObjectURL(b),_=document.createElement("a");_.setAttribute("href",w),_.setAttribute("download",`nimca-results-${s}.csv`),_.click()}function Cl(r,e){const t={nimca:r.asJSON(),prep:e},s=new Blob([JSON.stringify(t,Ts)],{type:"application/json"}),l=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",l),a.setAttribute("download","nimca-model.json"),a.click()}const ea=class ea{constructor(e,t,s,l,a,c,f){je(this,ls);this.d=e,this.ind=t,this.objlabels=s,this.objindices=l,this.classes=a,this.classNames=c,this.nrows=e.length,this.nMembers=t.members.length,this.nStrangers=t.strangers.length,this.nUnknown=t.unknown.length,ye(this,ls,S(()=>f.oCrit&&f.eCrit?this.getOutcomes(f):null))}get outcomes(){return o(Z(this,ls))}set outcomes(e){q(Z(this,ls),e)}getOutcomes(e){const t=this.d.apply(T=>T/e.f0*e.Nf).v,s=new Array(this.nrows),l=new Array(this.nrows),a={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[f,u]=uv(t,e.eCrit,e.oCrit,l,s,a,c,this.ind.members),[v,d,h,m,g,p,b,w,_,k]=Hi(t,e.Nf,e.eCrit,e.oCrit,l,s,a,c,this.ind.strangers);this.nUnknown>0&&Hi(t,e.Nf,e.eCrit,e.oCrit,l,s,a,c,this.ind.unknown);const E=f>0?f/(f+u):0,y=v>0?v/(v+d):0,A=1-h,C=Math.sqrt(E*y),j=f>0&&v>0?(f+v)/(f+v+d+u):0,R={sensitivity:E,specificity:y,selectivity:A,efficiency:C,accuracy:j};return{Nf:e.Nf,f:t,decs:s,rols:l,decsNum:c,rolsNum:a,TP:f,FN:u,TN:v,FP:d,beta:h,s:m,f0:g,hz:p,Mz:b,Sz:w,k:_,m:k,stat:R}}toJSON(){return null}static fromJSON(e){return new ea(...e)}};ls=new WeakMap;let Sl=ea;const gs=class gs{constructor(e,t,s,l,a,c,f,u,v,d,h,m,g,p,b,w="nimca-model"){je(this,as);je(this,is);je(this,cs);je(this,us);je(this,fs);je(this,vs);je(this,ds);je(this,hs);je(this,ms);this.mX=t,this.sX=s,this.nrows=l,this.ncols=a,this.className=e,this.Nfc=c,this.Nfr=f,this.f0c=u,this.f0r=v,this.hash=d,this.class=["nimcamodel"],this.fileName=w,this.center=p,this.scale=b,ye(this,as,ne(Te(h))),ye(this,is,ne(Te(m))),ye(this,cs,ne(Te(g))),ye(this,us,S(()=>this.limType==="classic"?this.Nfc:this.Nfr)),ye(this,fs,S(()=>this.limType==="classic"?this.f0c:this.f0r)),ye(this,vs,S(()=>1-Number.parseFloat(this.alpha)/100)),ye(this,ds,S(()=>Math.pow(1-this.gamma/100,1/l))),ye(this,hs,S(()=>Sn(this.eConfLim,this.Nf))),ye(this,ms,S(()=>Sn(this.oConfLim,this.Nf)))}get alpha(){return o(Z(this,as))}set alpha(e){q(Z(this,as),e,!0)}get gamma(){return o(Z(this,is))}set gamma(e){q(Z(this,is),e,!0)}get limType(){return o(Z(this,cs))}set limType(e){q(Z(this,cs),e,!0)}get Nf(){return o(Z(this,us))}set Nf(e){q(Z(this,us),e)}get f0(){return o(Z(this,fs))}set f0(e){q(Z(this,fs),e)}get eConfLim(){return o(Z(this,vs))}set eConfLim(e){q(Z(this,vs),e)}get oConfLim(){return o(Z(this,ds))}set oConfLim(e){q(Z(this,ds),e)}get eCrit(){return o(Z(this,hs))}set eCrit(e){q(Z(this,hs),e)}get oCrit(){return o(Z(this,ms))}set oCrit(e){q(Z(this,ms),e)}predict(e){if(!e.values||!Jr(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const t=gs.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let l=0;l<e.classes.length;l++)e.classes[l]===this.className?s.members.push(l):s.strangers.push(l);else s.unknown=Rr(0,e.values.nrows-1);return new Sl(t,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,t,s,l={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let a=e.values;const c=e.classNames[0];if(!Jr(a))throw new Error("nimca.fit: X must be a matrix.");const f=t?a.apply(Cn,2):Ge.zeros(a.ncols),u=s?a.apply(oo,2):Ge.ones(a.ncols),v=gs.getDistance(a,f,u),d=Cn(v),h=lo(v);let m=Math.round(2*d*d/h);m<1&&(m=1),m>250&&(m=250);const g=zf(v),p=Rf(v),b=p/g;let w;b>2.685592117?w=1:b<.194565995?w=100:w=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/b),1.185785)));const _=.5*w*(g/Sn(.5,w)+p/(Sn(.75,w)-Sn(.25,w)));return new gs(c,f,u,a.nrows,a.ncols,m,w,d,_,Ki(),l.alpha,l.gamma,l.limType,t,s)}static fromJSON(e){const{__type:t,mX:s,sX:l,nrows:a,ncols:c,className:f,Nfc:u,Nfr:v,f0c:d,f0r:h,hash:m,alpha:g,gamma:p,limType:b,fileName:w,center:_,scale:k}=e;return new gs(f,s,l,a,c,u,v,d,h,m,g,p,b,_,k,w)}static getDistance(e,t,s){const l=Wi(e,t,s),a=l.nrows,c=l.ncols,f=Ge.zeros(a);for(let u=0;u<c;u++){const v=l.getcolref(u+1);for(let d=0;d<a;d++)f.v[d]+=v[d]**2}return f}};as=new WeakMap,is=new WeakMap,cs=new WeakMap,us=new WeakMap,fs=new WeakMap,vs=new WeakMap,ds=new WeakMap,hs=new WeakMap,ms=new WeakMap;let or=gs;function Rr(r,e,t=1){const s=Math.round((e-r+1)/t),l=Array(s);for(let a=0;a<s;a++)l[a]=r+a*t;return l}function Gi(r,e){let t,s,l,a=[];if(e.length>0){const c=r.values.nrows,f=r.objindices,u=c-e.length;t=Array(u),s=Array(u),l=Array(u);let v=0;for(let d=0;d<c;d++)e.includes(d)||(t[v]=f[d],s[v]=r.classes[d],l[v]=r.objlabels[d],(a.length===0||!a.includes(s[v]))&&a.push(s[v]),v=v+1)}else t=r.objindices,l=r.objlabels,s=r.classes,a=r.classNames;return[t,l,s,a]}function Ki(){const r=new Date;return`${r.getFullYear()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}${r.getHours().toString().padStart(2,"0")}${r.getMinutes().toString().padStart(2,"0")}${r.getSeconds().toString().padStart(2,"0")}${r.getMilliseconds().toString().padStart(3,"0")}`}function fv(r,e,t,s,l=!1){const[a,c,f]=Gi(t,s),u=l&&e.prep&&e.prep.ml&&e.prep.ml.length>0?Ms(r,t.values,0,e.prep,!1,!0):t.values,v=av(r,e,u,s);v.hash=Ki(),v.objindices=a,v.objlabels=c,v.classes=f,v.classNames=t.classNames,v.varlabels=t.varlabels,v.eigenvals=zr(e,"eigenvals"),v.cNh=zr(e,"cNh"),v.cNq=zr(e,"cNq"),v.ch0=zr(e,"ch0"),v.cq0=zr(e,"cq0"),v.rNh=zr(e,"rNh"),v.rNq=zr(e,"rNq"),v.rh0=zr(e,"rh0"),v.rq0=zr(e,"rq0");const d=e.nrows;return v.T2lim=2*(d-1)/(d-2)*pi(.95,2,d-2),v}function vv(r,e="."){return Array.isArray(r)&&r.length>0?e==="."?r.map(t=>Number.parseFloat(t.trim())):r.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(r.trim()):Number.parseFloat(r.trim().replace(e,"."))}function js(r){return r.some(e=>Number.isNaN(e))}function Mn(r){return r.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ji(r){let e=r.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function dv(r,e,t,s,l,a,c,f=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let v=Ji(r);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");v=v.filter(z=>z.replaceAll(e,"").trim().length>0);const d=v[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,m;const g=t!=="no";(g||g===void 0&&js(firstRow))&&(m=d,h=1);const p=v.length-h;if(p<1)throw new Error("Data file should contain at least 1 row with values.");f===-1&&(f=p);let b,w,_,k=Array(p);s?(b=g?Mn(m[0]):"",_=Array(p),w=1):(b="",_=[],w=0);let E,y=[],A;l?(E=g?Mn(m[w]):"",A=Array(p),w=w+1):(E="",A=[]);const C=d.length-w;if(C<1)throw new Error("Data file should contain at least 1 column with values.");const j=Lr.zeros(C,p);for(let z=h;z<p+h;z++){const W=z-h;k[W]=W;let oe=v[z].split(e);if(s&&(_[W]=oe[0],oe.shift()),l){const J=oe[0];A[W]=J,oe.shift(),(y.length===0||y.indexOf(J)<0)&&y.push(J)}const Q=u==="."?oe.map((J,se)=>Number.parseFloat(J.trim())):oe.map((J,se)=>Number.parseFloat(J.trim().replace(u,".")));if(Q.some(J=>Number.isNaN(J)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(Q.length!=C)throw new Error("Wrong number of values in row #"+z);j.v.set(new Float64Array(Q),(z-h)*C)}if(!s||_.length!==p){_=Array(p);for(let z=0;z<p;z++)_[z]="O"+(z+1)}_=_.map(z=>Mn(z)),A=A.map(z=>Mn(z)),y=y.map(z=>Mn(z));let R,T=Array(C),B=Array(C);if(m&&m.length===C+w){R=m.map(z=>Mn(z)).slice(w);for(let z=0;z<C;z++)T[z]=z>=f?z-f:z,B[z]=z>=f?z-f+1:z+1}else{R=Array(C);for(let z=0;z<C;z++)T[z]=z>=f?z-f:z,R[z]=z>=f?"V"+(z-f+1):"Y"+(z+1),B[z]=z>=f?z-f+1:z+1}let M;if(t==="values"){if(M=u==="."?R.map((z,W)=>W<f?W:Number.parseFloat(z.trim())):R.map((z,W)=>W<f?W:Number.parseFloat(z.trim().replace(u,"."))),M.some(z=>Number.isNaN(z)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else M=B;Array.isArray(M)||(M=[]),a||(a=""),c||(c=""),a=M.length>0&&a.length>0?a:"Variables",c=M.length>0&&c.length>0?c:"";const I=a+(c.length>0?", "+c:""),U=M[1]<M[0];return{values:j.t(),nresp:f,header:t,hasLabels:s,hasClassNames:l,labelsVarname:b,classLabelsVarname:E,objlabels:_,objindices:k,varlabels:R,varvalues:M,varindices:T,varrev:U,classes:A,classNames:y,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:I}}function hv(r){if(js(r[0].slice(2)))return!0;const e=r[0].length,t=[];for(let s=2;s<e;s++){let l=[];for(let v=1;v<r.length;v++)l.push(r[v][s]);const a=r[0][s],c=Cn(l),f=oo(l),u=Math.abs((a-c)/f);t.push(u)}return t.every(s=>s>5)}function mv(r){const t=r[0].split(","),s=r[1].split(","),l=t.length,a=s.length,c=";",f=r[0].split(c),u=r[1].split(c),v=f.length,d=u.length;let h,m;if(l>1&&a>1&&l===a&&l>v)m=",",h=l;else if(v>1&&d>1&&v===d)m=c,h=v;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",h]}function gv(r,e=0){const t=Ji(r),s=t.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,a,c]=mv(t),f=Math.min(c,5),u=Math.min(s,5);let v=t[0].split(l).length,d=t.slice(0,u).map(T=>T.split(l).slice(0,f));d=d.map(T=>T.map(B=>Mn(B)));const h=d.map(T=>vv(T.slice(),a));for(let T=1;T<u;T++)if(js(h[T].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const m=hv(h);let g=0;const p=m?1:0,b=p+1,w=d[p][0],_=d[b][0],k=h[p][0],E=h[b][0],y=h[p][1],A=h[b][1];let C=!1,j=!1;if(Number.isNaN(k)&&Number.isNaN(E)&&w!==_?(C=!0,g=g+1):Number.isNaN(y)&&Number.isNaN(A)&&w!==_&&(C=!0,j=!0,g=g+2),!j){const T=C?1:0,B=h[p][T],M=h[b][T];j=js([B,M]),g=g+j}let R="no";if(m){g>0?d[0].slice(g+e):d[e];const T=g>0?h[0].slice(g+e):h[e];R=js(T)?"labels":"values"}return[l,C,j,R,v]}function Zn(r,e){if(!e||e.length===0)return r;const[t,s,l,a]=Gi(r,e);return{values:r.values.subset(t.map(f=>f+1),[]),objlabels:s,objindices:t,classes:l,classNames:a,header:r.header,hasLabels:r.hasLabels,hasClassNames:r.hasClassNames,classNames:r.classNames,labelsVarname:r.labelsVarname,classLabelsVarname:r.classLabelsVarname,varlabels:r.varlabels,varvalues:r.varvalues,varindices:r.varindices,varrev:r.varrev,responses:r.responses,sep:r.sep,dec:r.dec,varvaluesName:r.varvaluesName,varvaluesUnits:r.varvaluesUnits,varAxisTitle:r.varAxisTitle,fileName:r.fileName,nresp:r.nresp}}function pv(r){if(!r.length)return"";r.sort((l,a)=>l-a);let e=[],t=r[0],s=t;for(let l=1;l<r.length;l++)r[l]===s+1?s=r[l]:(t===s?e.push(`${t}`):e.push(`${t}-${s}`),t=r[l],s=t);return t===s?e.push(`${t}`):e.push(`${t}-${s}`),e.join(" ")}function Ts(r,e){return Jr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:We(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof or?e.asJSON():e}function Nl(r,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return tv(e.v,e.nrows,e.ncols);if(e.__type==="vector")return ut(e.v);if(e.__type==="NIMCA")return or.fromJSON(e);if(e.__type==="NIMCARes")return null;const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function Ml(r){const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),l=String(r.getHours()).padStart(2,"0"),a=String(r.getMinutes()).padStart(2,"0"),c=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${s}${l}${a}${c}`}function Xi(r){return Array.from({length:8},(e,t)=>r>>7-t&1).reverse()}function fo(r,e,t){let s="";for(let l=0;l<e;l++){const a=r.getUint8(t++);if(a===0)break;s+=String.fromCharCode(a)}return s}function bv(r){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],t=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],l=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=r.getUint8(a);a+=1;const f=r.getUint8(a);if(a+=1,f===77)throw new Error("SPC file has old format which is not supported.");const u=f===75,v=r.getUint8(a);a+=1;const d=r.getInt8(a);a+=1;const h=r.getUint32(a,u);a+=4;const m=r.getFloat64(a,u);a+=8;const g=r.getFloat64(a,u);a+=8;const p=r.getUint32(a,u);a+=4;const b=r.getUint8(a);a+=1;const w=r.getUint8(a);a+=1;const _=r.getUint8(a);a+=1;const k=r.getUint8(a);a+=1;const E=r.getUint32(a,u);a+=4;const y=fo(r,9,a);a+=9;const A=fo(r,9,a);a+=9;const C=r.getUint16(a,u);a+=2;const j=Array.from({length:8},()=>{const de=r.getFloat32(a,u);return a+=4,de}),R=fo(r,130,a);a+=130;const T=fo(r,30,a);a+=30;const B=r.getUint32(a,u);a+=4;const[M,I,U,D,z,W,oe,Q]=Xi(c),J=b===255?t[31]:t[b],se=b===255?e[31]:e[b],ae=w<=26?s[w]:w>=128&&w<=131?l[w]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:M,TCGRAM:I,TMULTI:U,TRANDM:D,TORDRD:z,TALABS:W,TXYXYS:oe,TXVALS:Q},fexper:v,fexp:d,fnpts:h,ffirst:m,flast:g,fnsub:p,fxtype:b,fytype:w,fztype:_,fpost:k,fdate:E,fres:y,fsource:A,fpeakpt:C,fspare:j,fcmnt:R,fcatxt:T,flogoff:B,xaxisName:J,xaxisUnit:se,yaxisName:ae}}function wv(r,e){const t=Xi(r.getUint8(e));e+=1;const s=r.getInt8(e);e+=1;const l=r.getUint16(e,!0);e+=2;const a=r.getFloat32(e,!0);e+=4;const c=r.getFloat32(e,!0);e+=4;const f=r.getFloat32(e,!0);e+=4;const u=r.getInt32(e,!0);e+=4;const v=r.getInt32(e,!0);e+=4;const d=r.getFloat32(e,!0);return e+=4,{flags:t,exp:s,index:l,time:a,next:c,noise:f,nPoints:u,nScans:v,wAxis:d}}async function Qi(r){if(r.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${r.name}).`);const t=r.name.slice(0,-4),s=await r.arrayBuffer(),l=new DataView(s);let a=0;const c=bv(l);a+=512;const f=c.fnpts;if(f<2)throw new Error(`Error reading SPC file (${r.name}).`);let u=new Array(f);if(c.ftflgs.TXVALS)for(let h=0;h<f;h++){const m=l.getFloat32(a,!0);a=a+4,u[h]=m}else{(c.flast-c.ffirst)/(f-1);for(let h=0;h<f;h++)u[h]=c.ffirst+h*c.flast}const v=new Float64Array(f*c.fnsub);for(let h=0;h<c.fnsub;h++){wv(l,a),a=a+32;for(let m=0;m<f;m++){const g=l.getFloat32(a,!0);a=a+4,v[h*f+m]=g}}const d=[];return c.fnsub>1?Rr(1,c.fnsub).forEach(m=>{d.push(t+"_"+m)}):d.push(t),{hdr:c,xvalues:u,yvalues:v,objlabels:d}}async function _v(r){if(!(r instanceof FileList||Array.isArray(r)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=r.length,t=[];let s=[],l=[];const a=await Qi(r[0]),c=a.xvalues.length;if(t.push(a.yvalues),s=s.concat(a.objlabels),l.push(a.hdr.fnsub),e>1)for(let p=1;p<e;p++){const b=await Qi(r[p]);if(b.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");t.push(b.yvalues),s=s.concat(b.objlabels),l.push(b.hdr.fnsub)}const f=l.reduce((p,b)=>p+b,0),u=new Float64Array(f*c);let v=0;for(let p=0;p<t.length;p++)u.set(t[p].slice(),v),v+=l[p]*c;const d=new Lr(u,c,f),h=Rr(0,c-1),m=Rr(0,f-1),g=a.xvalues.map(p=>p.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:m,varlabels:g,varvalues:a.xvalues,varindices:h,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var yv=H('<button tabindex="0" class="button svelte-1to1iow"> </button>');function kt(r,e){let t=O(e,"text",3,"button");var s=yv();s.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var l=L(s);$(()=>me(l,t())),N(r,s)}it(["click"]);var xv=H('<button tabindex="0"></button>');function $n(r,e){O(e,"disable",3,!1);var t=xv();t.__click=function(...s){var l;(l=e.onclick)==null||l.apply(this,s)},$(()=>{F(t,"title",e.title),F(t,"aria-label",e.title),F(t,"alt",e.title),wt(t,1,`button ${e.className??""}`,"svelte-qbt64")}),N(r,t)}it(["click"]);function Zr(r,e){let t=O(e,"title",3,"Reset");$n(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function kv(r,e){let t=O(e,"title",3,"Undo");$n(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function Ev(r,e){let t=O(e,"title",3,"Add");$n(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-add"})}function Zi(r,e){let t=O(e,"title",3,"Settings");$n(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-settings"})}function Av(r,e){let t=O(e,"title",3,"Move up");$n(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-up"})}function Cv(r,e){let t=O(e,"title",3,"Move down");$n(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-down"})}function jn(r){const e={};for(const t of Object.keys(r))e[t]=r[t].default;return e}var Sv=H('<span class="label svelte-1bhp5bp"> </span>'),Nv=H("<div><!> <!></div>");function fe(r,e){let t=O(e,"label",3,null),s=O(e,"name",3,""),l=O(e,"status",3,""),a=O(e,"colors",3,""),c=O(e,"labelWidth",3,12);var f=Nv(),u=L(f);{var v=h=>{var m=Sv(),g=L(m);$(()=>{mt(m,`flex-basis:${c()??""}ch;`),me(g,t())}),N(h,m)};Y(u,h=>{t()&&h(v)})}var d=P(u,2);jr(d,()=>e.children??At),$(()=>{wt(f,1,`control-element ${s()??""} ${l()??""}`,"svelte-1bhp5bp"),mt(f,a())}),N(r,f)}const $i=(r,e,t,s)=>{const l=e(r);l<0||l>1||q(t,l*100>o(s)-5&&l*100<o(s)+5,!0)},ec=(r,e,t,s,l,a)=>{q(e,!1);const c=t(r);c<0||c>1||(s(l(c)),a()&&a()(s()))},tc=(r,e,t,s,l,a)=>{if(!o(e))return;const c=t(r);c<0||c>1||(s(l(c)),a()&&a()(s()))},Mv=(r,e,t,s,l,a)=>{if(r.key==="ArrowLeft"){e(e()-t()<s()?s():e()-t()),l()&&l()(e());return}if(r.key==="ArrowRight"){e(e()+t()>a()?a():e()+t()),l()&&l()(e());return}};var jv=H('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function vo(r,e){be(e,!0);let t=O(e,"min",7,0),s=O(e,"max",3,100),l=O(e,"value",31,()=>Te(t())),a=O(e,"decNum",3,1),c=O(e,"step",19,()=>+((s()-t())/100).toFixed(4)),f=O(e,"onchange",3,null);he(()=>{l()<t()&&(l(t()),f()&&f()(l())),l()>s()&&(l(s()),f()&&f()(l())),t()>s()&&t(s())});let u=ne(void 0),v=ne(void 0),d=ne(!1);const h=C=>{const j=t()+C*(s()-t());return+(Math.round(j/c())*c()).toFixed(4)},m=C=>{const j=o(u).getBoundingClientRect(),R=o(v).getBoundingClientRect(),T=j.x,B=R.x+R.width;return(C.clientX-T)/(B-T)},g=C=>{q(d,!1)},p=C=>{let j=l()+c()*C.deltaY*.5;j<t()&&(j=t()),j>s()&&(j=s()),l(+(Math.round(j/c())*c()).toFixed(4)),C.preventDefault(),f()&&f()(l())},b=S(()=>t()===s()?100:(l()-t())/(s()-t())*100);var w=jv();w.__keydown=[Mv,l,c,t,f,s],w.__mousemove=[tc,d,m,l,h,f],w.__mousedown=[$i,m,d,b],w.__mouseup=[ec,d,m,l,h,f],w.__touchmove=[tc,d,m,l,h,f],w.__touchstart=[$i,m,d,b],w.__touchend=[ec,d,m,l,h,f];var _=L(w);let k;var E=L(_);let y;var A=L(E);En(_,C=>q(u,C),()=>o(u)),En(w,C=>q(v,C),()=>o(v)),$((C,j,R)=>{F(w,"aria-valuenow",l()),F(w,"aria-valuemin",t()),F(w,"aria-valuemax",s()),k=wt(_,1,"range-slider svelte-7wycr",null,k,C),mt(_,`width:${o(b)??""}%`),y=wt(E,1,"range-value svelte-7wycr",null,y,j),me(A,R)},[()=>({"range-slider_right":o(b)<50}),()=>({"range-value_right":o(b)<50}),()=>l().toFixed(a())]),yn("mousewheel",w,p),yn("mouseleave",w,g),yn("touchcancel",w,g),N(r,w),we()}it(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const rc=(r,e,t,s,l)=>{const a=e(r);a<0||a>1||q(t,a>o(s)&&a<o(l)+o(s),!0)},nc=(r,e,t,s,l)=>{q(e,!1);const a=t(r);if(a<0||a>1)return;const c=s(a);l()!==c&&l(c)},sc=(r,e,t,s,l)=>{if(!o(e))return;const a=t(r);if(a<0||a>1)return;const c=s(a);c!=l()&&l(c)},Tv=(r,e,t,s,l)=>{if(r.key==="ArrowLeft"){e(e()-t()<s()?s():e()-t());return}if(r.key==="ArrowRight"){e(e()+t()>l()?l():e()+t());return}};var Pv=H('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function Ps(r,e){be(e,!0);let t=O(e,"min",3,0),s=O(e,"max",3,10),l=O(e,"value",31,()=>Te(t())),a=O(e,"step",3,1);l()<t()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(t())),l()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(s())),t()>s()&&console.error("The min and max values must be distinct.");let c=ne(void 0),f=ne(void 0),u=ne(!1);const v=S(()=>t()===s()?0:(l()-t())/(s()-t()+a())),d=S(()=>a()/(s()-t()+a())),h=S(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${o(d)*100}%, var(--bg-color-light2, #e8e8e8) ${o(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*o(d)}%)`:"background: #f0f0f0"),m=C=>{if(C<0||C>1)return l();let j=l();return Math.round(o(d)/C),C<o(v)&&o(v)>0&&(j=l()-a()*Math.ceil((o(v)-C)/o(d))),C>o(v)+o(d)&&o(v)+o(d)<1&&(j=l()+a()*Math.ceil((C-(o(v)+o(d)))/o(d))),j<t()&&(j=t()),j>s()&&(j=s()),j},g=C=>{const j=o(f).getBoundingClientRect(),R=j.x,T=j.x+j.width;return(C.clientX-R)/(T-R)},p=C=>{q(u,!1)},b=C=>{let j=l()+Math.round(C.deltaY*.5)*a();j<t()&&(j=t()),j>s()&&(j=s()),l(j),C.preventDefault()};var w=Pv();w.__keydown=[Tv,l,a,t,s],w.__mousemove=[sc,u,g,m,l],w.__mousedown=[rc,g,u,v,d],w.__mouseup=[nc,u,g,m,l],w.__touchmove=[sc,u,g,m,l],w.__touchstart=[rc,g,u,v,d],w.__touchend=[nc,u,g,m,l];var _=L(w);let k;var E=L(_);let y;var A=L(E);En(_,C=>q(c,C),()=>o(c)),En(w,C=>q(f,C),()=>o(f)),$((C,j,R)=>{F(w,"aria-valuenow",l()),F(w,"aria-valuemin",t()),F(w,"aria-valuemax",s()),mt(w,o(h)),k=wt(_,1,"range-slider svelte-1lbks0y",null,k,C),mt(_,`width: max(2px, ${o(d)*100}%);left:${o(v)*100}%;`),y=wt(E,1,"range-value svelte-1lbks0y",null,y,j),me(A,R)},[()=>({"range-slider_left":o(d)<.1&&o(v)<.5,"range-slider_right":o(d)<.1&&o(v)>=.5}),()=>({"range-value_right":o(d)<.1&&o(v)>.5,"range-value_left":o(d)<.1&&o(v)<=.5}),()=>l().toFixed(0)]),yn("mousewheel",w,b),yn("mouseleave",w,p),yn("touchcancel",w,p),N(r,w),we()}it(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Lv=(r,e,t)=>{if(r.key==="ArrowLeft"){const s=e.options.findIndex(l=>l===t());s>0&&t(e.options[s-1]);return}if(r.key==="ArrowRight"){const s=e.options.findIndex(l=>l===t());s<e.options.length-1&&t(e.options[s+1]);return}};var zv=(r,e,t)=>e(t),Rv=H('<button tabindex="-1"><!></button>'),Iv=H('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function _t(r,e){be(e,!0);let t=O(e,"value",31,()=>Te(e.options[0])),s=O(e,"className",3,"");var l=Iv(),a=K(l);a.__keydown=[Lv,e,t],tt(a,20,()=>e.options,f=>f,(f,u)=>{var v=Rv();v.__click=[zv,t,u];let d;var h=L(v);Ct(h,()=>u),$((m,g)=>d=wt(v,1,`option option_${m??""}`,"svelte-bifhtc",d,g),[()=>u.toString().replace(".","_"),()=>({selected:u==t()})]),N(f,v)});var c=P(a,2);$(()=>wt(a,1,`selector ${s()??""}`,"svelte-bifhtc")),si(c,t),N(r,l),we()}it(["keydown","click"]);function Tn(r,e){be(e,!0);let t=O(e,"options",19,()=>["no","yes"]),s=O(e,"value",15,!1),l=ne(!0);const a=S(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());he(()=>q(l,s()?t()[1]:t()[0],!0)),he(()=>s(o(l)===t()[1]));var c=ge(),f=K(c);{var u=v=>{_t(v,{get options(){return o(a)},get value(){return o(l)},set value(d){q(l,d,!0)}})};Y(f,v=>{o(a)&&v(u)})}N(r,c),we()}function oc(r,e,t){o(e)&&o(e).files.length>0?t(o(e).files.length===1?o(e).files[0]:o(e).files):t(null)}function lc(r,e){(r.type==="click"||r.type==="keydown"&&(r.code==="Space"||r.code==="Enter"))&&o(e).click()}var Fv=H('<input type="file" multiple class="svelte-xoa0sf"/>'),qv=H('<input type="file" class="svelte-xoa0sf"/>'),Ov=H('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function ho(r,e){be(e,!0);let t=O(e,"file",15),s=O(e,"message",3,"Select CSV file with dataset"),l=O(e,"acceptType",3,".csv"),a=O(e,"multiple",3,!1),c=ne(void 0);function f(_){o(c).value=null,t(null)}var u=Ov(),v=K(u);v.__keydown=[lc,c],v.__click=[lc,c];let d;var h=L(v),m=P(h);{var g=_=>{var k=Fv();k.__change=[oc,c,t],En(k,E=>q(c,E),()=>o(c)),$(()=>F(k,"accept",l())),N(_,k)},p=_=>{var k=qv();k.__change=[oc,c,t],En(k,E=>q(c,E),()=>o(c)),$(()=>F(k,"accept",l())),N(_,k)};Y(m,_=>{a()?_(g):_(p,!1)})}var b=P(v,2);{var w=_=>{Zr(_,{onclick:f})};Y(b,_=>{t()&&_(w)})}$(_=>{d=wt(v,1,"file-selector svelte-xoa0sf",null,d,_),me(h,`${(t()?t().length>1?`Selected ${t().length} files`:t().name:s())??""} `)},[()=>({selected:t()})]),N(r,u),we()}it(["keydown","click","change"]);function Bv(r,e,t,s){e()&&q(t,e()(s()),!0)}var Dv=H('<div class="error-message svelte-11e14eb"> </div>'),Vv=H('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function ac(r,e){be(e,!0);let t=O(e,"value",15,""),s=O(e,"className",3,""),l=O(e,"placeholder",3,""),a=O(e,"maxLength",3,25),c=O(e,"validator",3,null),f=ne("");var u=Vv();let v;var d=L(u);d.__input=[Bv,c,f,t];var h=P(d,2);{var m=g=>{var p=Dv(),b=L(p);$(()=>me(b,o(f))),N(g,p)};Y(h,g=>{o(f)&&o(f).length>0&&g(m)})}$(g=>{v=wt(u,1,`textinput ${s()??""}`,"svelte-11e14eb",v,g),F(d,"placeholder",l()),F(d,"maxlength",a())},[()=>({error:o(f)&&o(f).length>0})]),si(d,t),N(r,u),we()}it(["input"]);var Yv=H('<div class="spinner svelte-wlgijz"></div>');function Wv(r){var e=Yv();N(r,e)}it(["keydown","click"]),it(["keydown","click"]);var Uv=H("<h2> </h2>"),Hv=H("<!> <!>",1),Gv=H('<div class="widget"><!></div>');function Kv(r,e){be(e,!0);let t=O(e,"title",3,""),s=O(e,"value",15),l=O(e,"labelWidth",3,13);function a(v){const d={};for(const h of Object.keys(v))d[h]=v[h].default;return d}he(()=>{!s()&&e.options&&s(a(e.options))});var c=Gv(),f=L(c);{var u=v=>{var d=Hv(),h=K(d);{var m=p=>{fe(p,{children:(b,w)=>{var _=Uv(),k=L(_);$(()=>me(k,t())),N(b,_)},$$slots:{default:!0}})};Y(h,p=>{t()&&p(m)})}var g=P(h,2);tt(g,17,()=>Object.keys(e.options),ot,(p,b)=>{const w=S(()=>e.options[o(b)]);var _=ge(),k=K(_);{var E=y=>{fe(y,{get name(){return o(w).name},get label(){return o(w).label},get labelWidth(){return l()},children:(A,C)=>{var j=ge(),R=K(j);Es(R,()=>o(w).el,(T,B)=>{B(T,tr(()=>o(w).props,{get value(){return s()[o(b)]},set value(M){s(s()[o(b)]=M,!0)}}))}),N(A,j)},$$slots:{default:!0}})};Y(k,y=>{o(w).hidden||y(E)})}N(p,_)}),N(v,d)};Y(f,v=>{s()&&v(u)})}N(r,c),we()}var Jv=H('<span class="item svelte-igakmm"> </span>'),Xv=H('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function jl(r,e){be(e,!0);var t=ge(),s=K(t);{var l=a=>{fe(a,{children:(c,f)=>{var u=Xv(),v=K(u),d=P(L(v),2);tt(d,17,()=>e.outliers,ot,(p,b)=>{var w=Jv(),_=L(w);$(()=>me(_,e.dataset.objlabels[o(b)])),N(p,w)});var h=P(v,2);{var m=p=>{kv(p,{get onclick(){return e.undoOutliers}})};Y(h,p=>{e.outliers.length>1&&p(m)})}var g=P(h,2);Zr(g,{get onclick(){return e.resetOutliers}}),N(c,u)},$$slots:{default:!0}})};Y(s,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(l)})}N(r,t),we()}function Qv(r,e){let t=0,s=0;r.nresp>0&&(t=new Ge(r.values.v.slice(0,r.nresp*r.values.nrows-1)),s=r.nresp);const l=new Lr(r.values.v.slice(s*r.values.nrows),r.values.nrows,r.values.ncols-s).t(),a=l.ncols<e?1:Math.round(l.ncols/e),c=Wt.seq(1,l.ncols,a),f=l.subset(null,c),u=t?t.subset(c):null,v=r.classes?r.classes.filter((d,h)=>c.v.includes(h)):null;return{classNames:r.classNames,classes:v,resp:u,values:f,varvalues:r.varvalues.filter((d,h)=>h>=s),varindices:r.varindices.filter((d,h)=>h>=s),varaxisLabel:r.varvaluesUnits?r.varvaluesName+" "+r.varvaluesUnits:r.varvaluesName,varaxisUnits:r.varvaluesUnits}}function Tl(r,e){return{values:e||r.values.copy(),varvalues:r.varvalues,varindices:r.varindices,varaxisLabel:r.varaxisLabel}}function Pl(r,e){if(!e||e.nrows!==r.values.nrows||e.ncols!==r.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const t=structuredClone(r);return t.values=e,t}const Zv=r=>r;function ic(r,{delay:e=0,duration:t=400,easing:s=Zv}={}){const l=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:s,css:a=>`opacity: ${a*l}`}}var $v=H('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function cc(r,e){be(e,!0);let t=O(e,"isDark",3,!1);function s(h){h.key==="Escape"&&e.closeModal()}var l=$v();yn("keydown",Yo,s);let a;var c=L(l),f=L(c),u=L(f);u.__click=function(...h){var m;(m=e.closeModal)==null||m.apply(this,h)};var v=P(f,2),d=L(v);jr(d,()=>e.children),$(h=>a=wt(l,1,"drop svelte-oie633",null,a,h),[()=>({isdark:t()})]),ni(7,l,()=>ic),N(r,l),we()}it(["click"]);var ed=H('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function Ll(r,e){be(e,!0);var t=ge(),s=K(t);{var l=c=>{var f=ed(),u=L(f),v=P(u),d=L(v);Ct(d,()=>cv(e.prepmodel)),$(()=>me(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),N(c,f)},a=c=>{var f=lf("skipped");N(c,f)};Y(s,c=>{e.prepmodel.ml?c(l):c(a,!1)})}N(r,t),we()}var td=H('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),rd=H('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function nd(r,e){be(e,!0);var t=ge(),s=K(t);{var l=a=>{fe(a,{name:"info",children:(c,f)=>{var u=rd(),v=K(u),d=P(L(v),3);{var h=w=>{var _=td(),k=P(K(_),2),E=L(k);$(()=>{F(k,"title",e.model.fileName),me(E,e.model.fileName)}),N(w,_)};Y(d,w=>{e.model.fileName&&w(h)})}var m=P(d),g=P(m,3);Ll(g,{get prepmodel(){return e.model}});var p=P(v,2);{var b=w=>{Zr(w,{get onclick(){return e.reset}})};Y(p,w=>{e.reset&&w(b)})}$(()=>me(m,` ${e.model.npred??""} `)),N(c,u)},$$slots:{default:!0}})};Y(s,a=>{e.model&&a(l)})}N(r,t),we()}var sd=H("<!> <!>",1),od=H("<p><!></p>"),ld=H("<!> <!>",1);function ad(r,e){be(e,!0);let t=O(e,"model",15),s=ne(""),l=ne("neutral"),a=ne("");function c(w){try{const _=JSON.parse(w,Nl);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),!Object.keys(_).includes("class")||_.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");_.fileName=o(v),t(_),q(l,"success"),q(a,"")}catch(_){console.log(_),t(null),q(l,"error"),q(a,_,!0)}}function f(w){const _=new FileReader;_.onload=()=>{c(_.result)},_.readAsText(o(s))}function u(){q(s,""),t(null),q(l,"neutral"),q(a,"")}he(()=>{o(s)===null?(t(null),q(l,"neutral"),q(a,"")):(q(l,"neutral"),q(a,""))}),he(()=>{(t()===null||t()===0)&&q(s,"")});let v=S(()=>o(s)?o(s).name.replace(/\.[^/.]+$/,""):"");var d=ld(),h=K(d);{var m=w=>{var _=sd(),k=K(_);kn(k,()=>o(s),A=>{fe(A,{name:"file-selector",children:(C,j)=>{ho(C,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return o(s)},set file(R){q(s,R,!0)}})},$$slots:{default:!0}})});var E=P(k,2);{var y=A=>{fe(A,{name:"load-button",label:" ",children:(C,j)=>{kt(C,{onclick:f,text:"Load"})},$$slots:{default:!0}})};Y(E,A=>{o(s)&&A(y)})}N(w,_)},g=w=>{nd(w,{get model(){return t()},reset:u})};Y(h,w=>{t()?w(g,!1):w(m)})}var p=P(h,2);{var b=w=>{fe(w,{name:"error",status:"error",children:(_,k)=>{var E=od(),y=L(E);Ct(y,()=>o(a)),N(_,E)},$$slots:{default:!0}})};Y(p,w=>{(o(l)==="error"||o(a))&&w(b)})}N(r,d),we()}var id=H('<p class="title"> </p>'),cd=H("<!>&nbsp;",1),ud=H("<!> <!>",1),fd=H('<div class="method-open svelte-10os93"><!> <!> <!></div>'),vd=(r,e)=>e.open(e.pos),dd=H('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function es(r,e){be(e,!0);let t=O(e,"cancel",3,null);var s=ge(),l=K(s);{var a=f=>{var u=fd(),v=L(u);fe(v,{children:(m,g)=>{var p=id(),b=L(p);$(()=>me(b,e.title)),N(m,p)},$$slots:{default:!0}});var d=P(v,2);jr(d,()=>e.children);var h=P(d,2);fe(h,{label:" ",children:(m,g)=>{var p=ud(),b=K(p);{var w=k=>{var E=cd(),y=K(E);kt(y,{text:"Cancel",get onclick(){return t()}}),N(k,E)};Y(b,k=>{t()&&k(w)})}var _=P(b,2);kt(_,{text:"Save",get onclick(){return e.apply}}),N(m,p)},$$slots:{default:!0}}),ni(3,u,()=>ic,()=>({duration:10})),N(f,u)},c=f=>{fe(f,{children:(u,v)=>{var d=dd(),h=K(d),m=L(h),g=P(m);g.__click=[vd,e];var p=L(g),b=P(h,2);Av(b,{onclick:()=>e.moveUp(e.pos)});var w=P(b,2);Cv(w,{onclick:()=>e.moveDown(e.pos)});var _=P(w,2);Zr(_,{onclick:()=>e.remove(e.pos)}),$(()=>{me(m,`${e.title??""} `),me(p,e.settings)}),N(u,d)},$$slots:{default:!0}})};Y(l,f=>{e.isOpen?f(a):f(c,!1)})}N(r,s),we()}it(["click"]);var hd=H("<!> <!>",1);function md(r,e){be(e,!0);let t=O(e,"params",31,()=>Te([0,0])),s=O(e,"varind",15),l=O(e,"settings",15),a=O(e,"nvars",3,0),c=An(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const f={snv:0,area:1,length:2,var:3},u=Object.keys(f);let v=ne(Te(u[t()[0]])),d=ne(t()[1]+1);const h="Normalization";he(()=>{l(o(v)+(o(v)==="var"?" #"+o(d):""))}),he(()=>{o(v)==="var"?s(s()[0]=t()[1]>0?t()[1]:1,!0):s(s()[0]=-1,!0)}),he(()=>{o(v)==="var"&&e.isOpen?s(s()[0]=t()[1],!0):s(s()[0]=-1,!0)}),he(()=>{o(v)&&t(t()[0]=f[o(v)],!0)}),he(()=>{o(d)&&t(t()[1]=o(d)-1,!0)}),es(r,tr({id:"norm",title:h,get settings(){return l()},get isOpen(){return e.isOpen}},()=>c,{children:(m,g)=>{var p=hd(),b=K(p);fe(b,{label:"Type",children:(k,E)=>{_t(k,{get options(){return u},get value(){return o(v)},set value(y){q(v,y,!0)}})},$$slots:{default:!0}});var w=P(b,2);{var _=k=>{fe(k,{label:"Variable index",children:(E,y)=>{Ps(E,{min:1,get max(){return a()},step:1,get value(){return o(d)},set value(A){q(d,A,!0)}})},$$slots:{default:!0}})};Y(w,k=>{o(v)==="var"&&k(_)})}N(m,p)},$$slots:{default:!0}})),we()}var gd=H("<!> <!> <!>",1);function pd(r,e){be(e,!0);let t=O(e,"params",31,()=>Te([3,1,0])),s=O(e,"settings",15),l=An(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const a=S(()=>{if(!e.nvars)return 3;const v=Math.round(e.nvars*.25);return v>39?39:v%2<1?v+1:v}),c=S(()=>t()[1]<2?[0,1]:[0,1,2]),f=S(()=>t()[0]<5?[1,2]:[1,2,3]);he(()=>{t()[0]<5&&t()[1]>2&&t(t()[1]=2,!0)}),he(()=>{t()[2]>t()[1]&&t(t()[2]=t()[1],!0)}),he(()=>{s(t()[0]+", "+t()[1]+", "+t()[2])}),es(r,tr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>l,{children:(v,d)=>{var h=gd(),m=K(h);fe(m,{label:"Width",children:(b,w)=>{Ps(b,{min:3,get max(){return o(a)},step:2,get value(){return t()[0]},set value(_){t(t()[0]=_,!0)}})},$$slots:{default:!0}});var g=P(m,2);fe(g,{label:"Polynomial",children:(b,w)=>{_t(b,{get options(){return o(f)},get value(){return t()[1]},set value(_){t(t()[1]=_,!0)}})},$$slots:{default:!0}});var p=P(g,2);fe(p,{label:"Derivative",children:(b,w)=>{_t(b,{get options(){return o(c)},get value(){return t()[2]},set value(_){t(t()[2]=_,!0)}})},$$slots:{default:!0}}),N(v,h)},$$slots:{default:!0}})),we()}var bd=H("<!> <!>",1);function wd(r,e){be(e,!0);let t=O(e,"params",31,()=>Te([1,0]));O(e,"varind",27,()=>-1);let s=O(e,"settings",15);O(e,"nvars",3,0);let l=An(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},f=Object.keys(a),u=Object.keys(c);let v=ne(Te(f[t()[0]])),d=ne(Te(u[t()[1]]));const h="Scaling";he(()=>{s(o(v)+"/"+o(d))}),he(()=>{o(v)&&t(t()[0]=a[o(v)],!0)}),he(()=>{o(d)&&t(t()[1]=c[o(d)],!0)}),es(r,tr({id:"scale",title:h,get settings(){return s()}},()=>l,{children:(m,g)=>{var p=bd(),b=K(p);fe(b,{label:"Center",children:(_,k)=>{_t(_,{get options(){return f},get value(){return o(v)},set value(E){q(v,E,!0)}})},$$slots:{default:!0}});var w=P(b,2);fe(w,{label:"Scale",children:(_,k)=>{_t(_,{get options(){return u},get value(){return o(d)},set value(E){q(d,E,!0)}})},$$slots:{default:!0}}),N(m,p)},$$slots:{default:!0}})),we()}var _d=H("<!> <!> <!>",1),yd=H("<!> <!> <!>",1);function xd(r,e){be(e,!0);let t=O(e,"params",31,()=>Te([0,1,.1]));O(e,"varind",27,()=>-1);let s=O(e,"settings",15,"");O(e,"nvars",3,0);let l=An(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Baseline correction",c={emsc:0,als:1},f=Object.keys(c);function u(p){const b=Math.ceil(Math.log10(p));return Math.pow(10,b)}let v=ne(Te(f[t()[0]])),d=ne(Te(t()[2]>0?u(t()[2]).toString():"0.1")),h=S(()=>parseFloat(o(d))),m=S(()=>o(h)/10),g=S(()=>Math.ceil(-Math.log10(o(h)))+1);he(()=>{if(o(v)!=="als")return;const p=parseFloat(o(d));(t()[2]<o(m)||t()[2]>p-o(m))&&t(t()[2]=o(m),!0)}),he(()=>{s(o(v)+" ("+(o(v)=="emsc"?t()[1].toFixed(0):t()[1].toFixed(1)+","+t()[2].toFixed(3))+")")}),he(()=>{o(v)&&t(t()[0]=c[o(v)],!0)}),es(r,tr({id:"scale",title:a,get settings(){return s()}},()=>l,{children:(p,b)=>{var w=yd(),_=K(w);fe(_,{label:"Type",children:(C,j)=>{_t(C,{get options(){return f},get value(){return o(v)},set value(R){q(v,R,!0)}})},$$slots:{default:!0}});var k=P(_,2);{var E=C=>{var j=_d(),R=K(j);fe(R,{label:"Lambda",children:(M,I)=>{vo(M,{min:1,max:7,step:.1,get value(){return t()[1]},set value(U){t(t()[1]=U,!0)}})},$$slots:{default:!0}});var T=P(R,2);fe(T,{label:"Penalty range",children:(M,I)=>{_t(M,{options:["1","0.1","0.01"],get value(){return o(d)},set value(U){q(d,U,!0)}})},$$slots:{default:!0}});var B=P(T,2);fe(B,{label:"Penalty",children:(M,I)=>{{let U=S(()=>o(h)-o(m));vo(M,{get min(){return o(m)},get max(){return o(U)},get step(){return o(m)},get decNum(){return o(g)},get value(){return t()[2]},set value(D){t(t()[2]=D,!0)}})}},$$slots:{default:!0}}),N(C,j)};Y(k,C=>{o(v)==="als"&&C(E)})}var y=P(k,2);{var A=C=>{fe(C,{label:"Polynomial",children:(j,R)=>{Ps(j,{min:0,max:5,step:1,decNum:0,get value(){return t()[1]},set value(T){t(t()[1]=T,!0)}})},$$slots:{default:!0}})};Y(y,C=>{o(v)==="emsc"&&C(A)})}N(p,w)},$$slots:{default:!0}})),we()}var kd=H("<!> <!>",1);function Ed(r,e){be(e,!0);let t=O(e,"params",15),s=O(e,"varind",15),l=O(e,"settings",15),a=An(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let f=ne(!1);const u=S(()=>e.nvars?Math.round(e.nvars*.1):1);he(()=>{e.isOpen?((t()[0]===void 0||t()[0]===null||t()[0]<e.left||t()[0]>e.right-o(u))&&t(t()[0]=e.left,!0),(t()[1]===void 0||t()[1]===null||t()[1]>e.right||t()[1]<e.left+o(u))&&t(t()[1]=e.right,!0),s(s()[1]=t()[0],!0),s(s()[2]=t()[1],!0),q(f,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),q(f,!1))}),he(()=>{l("left: "+t()[0]+" right: "+t()[1])}),es(r,tr({id:"norm",title:c,get settings(){return l()},get isOpen(){return e.isOpen}},()=>a,{children:(v,d)=>{var h=ge(),m=K(h);{var g=p=>{var b=kd(),w=K(b);fe(w,{label:"Left",children:(k,E)=>{{let y=S(()=>e.right-o(u));vo(k,{get min(){return e.left},get max(){return o(y)},step:1,decNum:0,get value(){return t()[0]},set value(A){t(t()[0]=A,!0)}})}},$$slots:{default:!0}});var _=P(w,2);fe(_,{label:"Right",children:(k,E)=>{{let y=S(()=>e.left+o(u));vo(k,{get min(){return o(y)},get max(){return e.right},step:1,decNum:0,get value(){return t()[1]},set value(A){t(t()[1]=A,!0)}})}},$$slots:{default:!0}}),N(p,b)};Y(m,p=>{o(f)&&p(g)})}N(v,h)},$$slots:{default:!0}})),we()}var Ad=H("<!> <!>",1);function Cd(r,e){be(e,!0);let t=O(e,"params",31,()=>Te([3,5]));O(e,"varind",27,()=>-1);let s=O(e,"settings",15);O(e,"nvars",3,0);let l=An(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Spike removal";he(()=>{s(t()[0]+"/"+t()[1])}),es(r,tr({id:"scale",title:a,get settings(){return s()}},()=>l,{children:(c,f)=>{var u=Ad(),v=K(u);fe(v,{label:"Window",children:(h,m)=>{Ps(h,{min:3,max:15,step:2,get value(){return t()[0]},set value(g){t(t()[0]=g,!0)}})},$$slots:{default:!0}});var d=P(v,2);fe(d,{label:"Threshold",children:(h,m)=>{Ps(h,{min:3,max:50,get value(){return t()[1]},set value(g){t(t()[1]=g,!0)}})},$$slots:{default:!0}}),N(c,u)},$$slots:{default:!0}})),we()}var Sd=H("<h2>Selected methods</h2> <!>",1),Nd=H("<p>No methods selected</p>"),Md=H("<p> </p>"),jd=H("<h2>Available methods</h2>"),Td=H("<p>Maximum number of methods is selected.</p>"),Pd=H("<p> </p> <!>",1),Ld=H('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function zd(r,e){be(e,!0);let t=O(e,"prepobj",31,()=>Te([])),s=O(e,"meta",15),l=O(e,"varind",31,()=>-1),a=O(e,"rawdataShort",15),c=O(e,"prepdataShort",15),f=O(e,"prepmodel",3,null),u=O(e,"reset",3,null),v=O(e,"finalize",3,null);const d=30,h=8,m={savgol:pd,norm:md,scale:wd,baseline:xd,trim:Ed,spikes:Cd};let g=ne("neutral"),p=ne(""),b=ne(void 0),w=ne(""),_=ne(Te([])),k=ne(!1),E=ne(Te([])),y=ne(Te([]));s(new Array(h).fill(""));const A=S(()=>e.rawdata.values.ncols-e.rawdata.nresp);let C=Te(e.rawdata.values.nrows<3?Object.keys(m).filter(te=>te!=="scale"):Object.keys(m));R(),t().length!==0&&j();async function j(){t().length!==0&&q(b,e.WASM().then(te=>{q(g,"applying");const pe=Yi(te,a().values,0,t(),!0,[]),ce=Ms(te,a().values,0,pe,!0);c(Tl(a(),ce)),q(g,"success")}).catch(te=>{c(Tl(a())),console.error(te),q(g,"error"),q(p,te,!0)}),!0)}function R(){const te=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!t()||t().length<1){e.setLeft(0),e.setRight(te),q(E,[],!0),q(y,[],!0);return}let pe=[],ce=[],_e=0,Ee=te;for(let ve of t())ve.id==="trim"?(pe.push(_e),ce.push(Ee),ve.params[0]<_e&&(ve.params[0]=_e),ve.params[1]>Ee&&(ve.params[1]=Ee),_e=ve.params[0]>_e?ve.params[0]:_e,Ee=ve.params[1]>0&&ve.params[1]<Ee?ve.params[1]:Ee):(pe.push(_e),ce.push(Ee));q(E,pe,!0),q(y,ce,!0),e.setLeft(_e),e.setRight(Ee)}function T(te){const pe=Qr.find(ce=>ce.id===te);pe&&(o(E).push(e.left),o(y).push(e.right),t().push({id:pe.id,params:pe.mp}),q(k,!0),q(w,t().length-1))}function B(){t().length<1||(o(E).pop(),o(y).pop(),t().pop(),q(k,!1),q(w,-1))}function M(te){if(te<=0)return;const pe=t()[te],ce=t()[te-1];t(t()[te-1]=pe,!0),t(t()[te]=ce,!0),W()}function I(te){if(te<0||te===t().length-1)return;const pe=t()[te],ce=t()[te+1];t(t()[te+1]=pe,!0),t(t()[te]=ce,!0),W()}function U(te){te<0||te>=t().length||(t(t().filter((pe,ce)=>ce!==te)),W())}function D(te){q(w,te,!0)}function z(){q(w,null)}function W(){q(g,"neutral"),q(p,""),q(k,!1),q(w,null),f()&&u()(),R(),j(),l(l()[1]=-1,!0),l(l()[2]=-1,!0)}he(()=>{e.rawdata&&!a()&&a(Qv(e.rawdata,d))}),he(()=>{a()&&!c()&&c(Tl(a()))}),he(()=>{(!t()||t().length===0)&&(q(_,[],!0),c(null),q(E,[],!0),q(y,[],!0),q(w,""),s(new Array(h).fill("")))});var oe=Ld(),Q=K(oe);let J;var se=L(Q);fe(se,{label:"",children:(te,pe)=>{var ce=Sd(),_e=P(K(ce),2);{var Ee=ve=>{Zi(ve,{text:"edit",get onclick(){return u()}})};Y(_e,ve=>{f()&&u()&&ve(Ee)})}N(te,ce)},$$slots:{default:!0}});var ae=P(se,2);{var de=te=>{fe(te,{label:"",children:(pe,ce)=>{var _e=Nd();N(pe,_e)},$$slots:{default:!0}})},ue=te=>{var pe=ge(),ce=K(pe);tt(ce,17,t,ot,(_e,Ee,ve)=>{const Oe=S(()=>m[o(Ee).id]);var Be=ge(),Je=K(Be);{var $e=Ye=>{var V=ge(),G=K(V);{let X=S(()=>ve===o(w)),le=S(()=>o(k)?B:null);Es(G,()=>o(Oe),(Ae,rt)=>{rt(Ae,{get isOpen(){return o(X)},get left(){return o(E)[ve]},get right(){return o(y)[ve]},pos:ve,get nvars(){return o(A)},moveUp:M,moveDown:I,apply:W,open:D,close:z,remove:U,get cancel(){return o(le)},get params(){return o(Ee).params},set params(ie){o(Ee).params=ie},get varind(){return l()},set varind(ie){l(ie)},get settings(){return s()[ve]},set settings(ie){s(s()[ve]=ie,!0)}})})}N(Ye,V)},Nt=Ye=>{var V=ge(),G=K(V);{let X=S(()=>ve===o(w)),le=S(()=>o(k)?B:null);Es(G,()=>o(Oe),(Ae,rt)=>{rt(Ae,{pos:ve,get isOpen(){return o(X)},get left(){return o(E)[ve]},get right(){return o(y)[ve]},get nvars(){return o(A)},moveUp:M,moveDown:I,apply:W,open:D,close:z,remove:U,get cancel(){return o(le)},get params(){return o(Ee).params},set params(ie){o(Ee).params=ie},get settings(){return s()[ve]},set settings(ie){s(s()[ve]=ie,!0)}})})}N(Ye,V)};Y(Je,Ye=>{o(Ee).id==="norm"||o(Ee).id==="trim"?Ye($e):Ye(Nt,!1)})}N(_e,Be)}),N(te,pe)};Y(ae,te=>{t().length===0?te(de):te(ue,!1)})}var ee=P(ae,2);{var re=te=>{fe(te,{status:"error",children:(pe,ce)=>{var _e=Md(),Ee=L(_e);$(()=>me(Ee,o(p))),N(pe,_e)},$$slots:{default:!0}})};Y(ee,te=>{(o(g)==="error"||o(p))&&te(re)})}var qe=P(Q,2),Ke=L(qe);{var Ue=te=>{fe(te,{label:" ",children:(pe,ce)=>{kt(pe,{get onclick(){return v()},text:"Finalize"})},$$slots:{default:!0}})};Y(Ke,te=>{!f()&&!o(w)&&t().length>0&&te(Ue)})}var ze=P(qe,2),Ne=L(ze);fe(Ne,{label:"",children:(te,pe)=>{var ce=jd();N(te,ce)},$$slots:{default:!0}});var Ze=P(Ne,2);{var Re=te=>{fe(te,{label:"",children:(pe,ce)=>{var _e=Td();N(pe,_e)},$$slots:{default:!0}})},Ie=te=>{var pe=ge(),ce=K(pe);tt(ce,17,()=>C,ot,(_e,Ee)=>{const ve=S(()=>Qr.find(Oe=>Oe.id===o(Ee)));fe(_e,{children:(Oe,Be)=>{var Je=Pd(),$e=K(Je),Nt=L($e),Ye=P($e,2);Ev(Ye,{onclick:()=>T(o(ve).id)}),$(()=>me(Nt,o(ve).title)),N(Oe,Je)},$$slots:{default:!0}})}),N(te,pe)};Y(Ze,te=>{t().length>=h?te(Re):te(Ie,!1)})}$(te=>J=wt(Q,1,"selected-methods-list svelte-9cg1zq",null,J,te),[()=>({final:f()!==null&&f()!==void 0})]),N(r,oe),we()}const Rd={small:30,medium:40,large:50,xlarge:60},Id={small:5,medium:8,large:12,xlarge:15},Fd={small:6,medium:10,large:14,xlarge:18},zl={small:4,medium:6,large:8,xlarge:10},qd={small:12,medium:15,large:19,xlarge:21},Rl={small:11,medium:15,large:17,xlarge:19},Ls={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},ts=["●","◼","▲","▼","⬥","＋","✳","✕"],Od=.8,uc=.5,Bd={small:5,medium:8,large:12,xlarge:15},St={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function fc(r,e){return Array.isArray(r)&&r.length===e&&!r.some(t=>t===void 0)&&!r.some(t=>isNaN(t))}function vc(r,e){if(r!=null&&(Array.isArray(r)&&(r=ut(r)),!(!We(r)||r.length<1)))return r.apply(t=>Dl((t-e[1])*e[0]+e[2])).v}function gt(r,e){return vc(r,e.coords)}function Il(r,e){return vc(r,e.objects)}function dc(r,e){if(r!=null&&(Array.isArray(r)&&(r=ut(r)),!(!We(r)||r.length<1)))return r.apply(t=>(t-e[2])/e[0]+e[1]).v}function hc(r,e){return dc(r,e.coords)}function mc(r,e){return dc(r,e.objects)}function Fl(r){return r===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${r.toString()}</tspan>`}function Pn(r){if(r===Math.round(r))return r;if(Math.abs(r)>10**6)return Math.round(r);if(Math.abs(r)<10**-6)return r;let e=r.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function ql(r){if(r===void 0)return[0,void 0];if(r.length<1)return[0,void 0];if(r.length===1)return[0,[r[0].toString()]];let e=Pn(Math.abs(Pr(ci(r)))),t=0;if(e>=1)return e<100?[0,Array.from(r).map(a=>a.toFixed(0))]:(t=Math.ceil(Pn(Math.log10(e)))-2,[t,Array.from(r).map(a=>(a/Math.pow(10,t)).toFixed(0))]);let s=Math.ceil(-Pn(Math.log10(e)));return s<=2?[0,Array.from(r).map(l=>l.toFixed(s))]:(t=s-2,s=2,Pn(Math.abs(yr(r)))<=10?[-t,Array.from(r).map(l=>(l*Math.pow(10,t)).toFixed(s))]:[-t,Array.from(r).map(l=>(l/Math.pow(10,t)).toString())])}function qt(r,e,t){return Array.isArray(r)&&(r=ut(r)),We(r)?r.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&r.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):r:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Ol(r,e,t,s){if(!r||!e||r.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=t.coords,a=s.coords;let c="";for(let f=0;f<r.length;f++){const u=Dl((r.v[f]-l[1])*l[0]+l[2]),v=Dl((e.v[f]-a[1])*a[0]+a[2]);c+=u+","+v+" "}return c}function gc(r,e){return r?Array.isArray(r)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==r.length?[null,"number of tick labels and values should be the same."]:[r.map(t=>$r(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function pc(r,e){if(Array.isArray(r)&&(r=ut(r)),!We(r))return[null,"tick values must be provided as an array or as a vector."];if(r.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const t=new Set(r.v);if(r.length!==t.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],a=r.filter(c=>c>=s&c<=l);return a.length!==r.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function Bl(r,e,t,s,l,a){l==null&&(l=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(r)return r;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const f=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*f,v=Math.floor(Math.log10(u)),d=1/Math.pow(10,v-1),h=Math.round(u*d)/d;let m=Dd(h/t);l&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+f)/m)*m,p=Math.floor((c[1]-f)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-p)<m/10&&(p=p-m),t=Math.ceil(Pn((p-g)/m))+1,r=Ge.zeros(t);for(let b=0;b<t;b++)r.v[b]=g+m*b;if(Math.abs(m)<1){const b=Math.pow(10,1+Math.round(-Math.log10(m)));r=r.apply(w=>Math.round((w+Number.EPSILON)*b)/b)}return r.filter(b=>b>=c[0]&b<=c[1])}function Dd(r,e){const t=Math.floor(Math.log10(r)),s=r/Math.pow(10,t);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,t)}function Dl(r){return Math.round(r*10)/10}function Vd(r,e){return e<300.2||r<400.2?"small":e<400.2||r<700.2?"medium":e<650.2||r<850.2?"large":"xlarge"}function bc(r,e){return r<400.2?"small":r<700.2?"medium":r<900.2?"large":"xlarge"}function Yd(){const r=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;r[e]=t}return r}function Wd(r){let e=-1,t=Yd();for(let s=0;s<r.length;s++)e=t[(e^r[s])&255]^e>>>8;return e^-1}function Ud(r,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const s=Wd(t),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(r,0),c.set(a,33),c.set(t,37),c.set(l,50),c}function Hd(r,e){const t=r.split(","),s=t[0],l=t[1],a=33/3*4,c=l.substring(0,a),f=l.substring(a),u=atob(c),v=new Uint8Array(u.length);for(let m=0;m<v.length;m++)v[m]=u.charCodeAt(m);const d=Ud(v,e),h=btoa(String.fromCharCode(...d));return[s,",",h,f].join("")}function Gd(r,e,t,s,l){if(t||(t=10),s||(s=10),l||(l=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!r||!(r instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=t/2.54*l,c=s/2.54*l;setTimeout(()=>{const f=r.clientHeight,u=r.clientWidth;let v=Math.max(a/u,c/f),d=1;v<1&&(d=v,v=1);const h=document.createElement("canvas"),m=h.getContext("2d");h.width=u*(d<1?d:v),h.height=f*(d<1?d:v),r.setAttribute("width",u*v),r.setAttribute("height",f*v),m.fillStyle="white",m.fillRect(0,0,h.width,h.height),m.scale(v,v);const g=new XMLSerializer().serializeToString(r),p=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),b=URL.createObjectURL(p),w=new Image;w.onload=function(){d<0&&(w.width=w.width*d,w.height=w.height*d),m.drawImage(w,0,0,h.width,h.height);const _=h.toDataURL("image/png"),k=Hd(_,l),E=document.createElement("a");E.href=k,E.download=`${e}.png`,E.click()},w.src=b},20)}function Kd(r,e){if(!r||!(r instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=r.clientHeight,s=r.clientWidth;r.setAttribute("width",s+"px"),r.setAttribute("height",t+"px"),r.setAttribute("viewBox",`0 0 ${s} ${t}`);const l=new Blob([r.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(l),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function Jd(r,e,t,s){const l=r.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Xd(e,t,s)})]).then(()=>{r.classList.add("copied"),r.textContent="✓ done",setTimeout(()=>{r.classList.remove("copied"),r.textContent=l},500)},a=>{console.error(a),r.classList.add("error"),r.textContent="x copy",setTimeout(()=>{r.classList.remove("error"),r.textContent=l},500)}).catch(a=>console.error(a))}async function Xd(r,e,t){const s=r.clientHeight,l=r.clientWidth,a=Math.max(e/l,t/s),c=document.createElement("canvas"),f=c.getContext("2d");return c.width=l*a,c.height=s*a,f.scale(a,a),r.setAttribute("width",c.width),r.setAttribute("height",c.height),await new Promise((v,d)=>{const h=new XMLSerializer().serializeToString(r),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,p=g.createObjectURL(m),b=new Image;b.onload=function(){f.drawImage(b,0,0,c.width,c.height),g.revokeObjectURL(p),c.toBlob(function(w){w?v(w):d(new Error("Failed to create blob"))},"image/png")},b.onerror=function(w){d(w)},b.src=p})}function mo(r,e){return r>16&&(r=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][r-1]}function Qd(r,e,t,s,l){let a=l.ticks,c=l.tickLabels,f=0;const u=Bl(a,r,Id[t.x],!0,l.whole),v=u.length,d=mc([zl[t.plot]],s)[0],h=Ge.fill(e[0],v),m=h.add(d),g=Ge.fill(e[1],v);if(c||(a?(f=0,c=a.v.map(R=>Pn(R).toString())):[f,c]=ql(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[u,h],[u,g]],b=[[ut([r[0]]),ut([e[0]])],[ut([r[1]]),ut([e[0]])]],w=[[u,m],[u,h]],_=(r[1]-r[0])*.01,k=[[null,null],[[r[1]-(f>9?1:0)*_],[h.v[v-1]]]],E=Fl(f),y=c.length,A=Math.abs(r[1]>r[0]?r[1]-u.v[y-1]:r[1]-u.v[0]),C=Math.abs(r[1]-r[0]),j=Math.abs(u.v[1]-u.v[0]);if(E.length>0&&A<C*.1&&A<j*.5){const R=r[1]>r[0]?y-1:0;c[R]=" "}return{grid:p,axisLine:b,tickCoords:w,tfCoords:k,ticks:a,tickLabels:c,tickFactor:f,tfLabel:E}}function Zd(r,e,t,s,l){let a=l.ticks,c=l.tickLabels,f=0;const u=Bl(l.ticks,e,Fd[t.y],!0,l.whole),v=u.length,d=mc([zl[t.plot]],s)[0],h=Ge.fill(r[0],v),m=h.add(d),g=Ge.fill(r[1],v);if(c||(a?(f=0,c=a.v.map(j=>Pn(j).toString())):[f,c]=ql(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[h,u],[g,u]],b=[[ut([r[0]]),ut([e[0]])],[ut([r[0]]),ut([e[1]])]],w=[[h,u],[m,u]],_=[[[],[]],[[m.v[v-1]+(Math.abs(f)>9?3:2)*d],[e[1]]]],k=Fl(f),E=c.length,y=Math.abs(e[1]>e[0]?e[1]-u.v[E-1]:e[1]-u.v[0]),A=Math.abs(e[1]-e[0]),C=Math.abs(u.v[1]-u.v[0]);if(k.length>0&&y<A*.1&&y<C*.5){const j=e[1]>e[0]?E-1:0;c[j]=" "}return{grid:p,axisLine:b,tickCoords:w,tfCoords:_,ticks:a,tickLabels:c,tickFactor:f,tfLabel:k}}function $d(r){if(!r.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=We(r.breaks)?r.breaks.v:r.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!r.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(r.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(r.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=r.colmap;let s,l;if(r.labels?(s=r.labels,l=0):[l,s]=ql(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=s.length===t.length;return{colmap:t,breaks:e,labels:s,isCentered:a,labelsFactor:l,fontSize:r.fontSize,labelColor:r.labelColor}}function e1(r,e,t,s){const l=r.colmap.length,a=e*Od,c=a/l,f=t[1]+(e-a)*.5,u=Bd[s.y],v=t[2]+u*uc,d=v+u*(1+uc),h=r.isCentered?c/2:0;return{start:f,top:v,height:u,width:c,dxl:h,ltop:d}}function Ln(r,e,t){if(!r||!e||!t||typeof t!="function")return;const s=r.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;t(l),r.stopPropagation()}}function t1(r,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(r.replace(/<(.|\n)*?>/g,"")).width}function r1(r,e){const t="Arial",s=e/8,l=e*1.5,a=Array(r.length),c=Array(r.length);let f=0,u=0,v=0;for(let h=0;h<r.length;h++){const m=t1("  "+r[h].label+"  ",e+"px "+t);v=m>v?m:v;const g=e*r[h].labelHeight+2*s;a[h]=g,c[h]=f,f=f+g,u=u+g}const d=l+2*s+v;return[c,a,l,s,u,d]}function n1(r,e,t,s,l){const[a,c,f,u,v,d]=r1(r.items,s*r.fontSize),h=r.position.includes("left")?e[0]+l:r.position.includes("right")?e[1]-d-l:(e[1]+e[0]-d)*.5,m=r.position.includes("top")?t[1]+l:r.position.includes("bottom")?t[0]-v-l:(t[1]+t[0]-v)*.5;return{lgl:h,lgt:m,lgw:d,lgh:v,ely:a,elh:c,elw:f,elp:u}}function $r(r){if(!r||r.length<1)return r;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function t(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<r.length;){const a=r[s];if((a==="^"||a==="_")&&s<r.length-1){const c=a==="^";if(s++,r[s]==="("){let f=s+1;for(;f<r.length&&r[f]!==")";)f++;const u=r.slice(s+1,f);l+=c?e(u):t(u),s=f+1}else if(r[s]==="-"||r[s]==="–"){const f=r.slice(s,s+2);l+=c?e(f):t(f),s=s+2}else l+=c?e(r[s]):t(r[s]),s++}else l+=a,s++}return l}var s1=xe('<line vector-effect="non-scaling-stroke"></line>'),o1=xe("<g></g>");function Vl(r,e){be(e,!0);let t=O(e,"lineCoords",19,()=>[]),s=O(e,"lineColor",19,()=>St.DARKGRAY),l=O(e,"lineType",3,1),a=O(e,"lineWidth",3,1),c=O(e,"className",3,"");const f=Vt("axes");let u=S(()=>gt(t()[0][0],f.tX())),v=S(()=>gt(t()[1][0],f.tX())),d=S(()=>gt(t()[0][1],f.tY())),h=S(()=>gt(t()[1][1],f.tY())),m=S(()=>`stroke:${s()};stroke-width: ${a()}px;stroke-dasharray:${Ls[f.scales().plot][l()-1]}`);var g=ge(),p=K(g);{var b=w=>{var _=o1();tt(_,21,()=>o(u),ot,(k,E,y)=>{var A=s1();$(()=>{F(A,"x1",o(u)[y]),F(A,"x2",o(v)[y]),F(A,"y1",o(d)[y]),F(A,"y2",o(h)[y]),mt(A,o(m))}),N(k,A)}),$(()=>wt(_,0,mf(c()))),N(w,_)};Y(p,w=>{o(u)&&o(d)&&o(v)&&w(b)})}N(r,g),we()}var l1=xe('<text text-anchor="middle"><!></text>'),a1=xe("<text><!></text>"),i1=xe("<text><!></text>"),c1=xe('<g class="tick-labels"><!></g>');function wc(r,e){be(e,!0);let t=O(e,"pos",3,1),s=O(e,"las",3,1),l=S(()=>["middle","middle","start","middle","end"][t()]),a=S(()=>`fill:${e.textColor};`);const c=Vt("axes");let f=S(()=>gt(e.tickCoords[1][0],c.tX())),u=S(()=>gt(e.tickCoords[1][1],c.tY())),v=S(()=>Rl[c.scales().plot]),d=S(()=>[0,0,o(v),0,-o(v)][t()]),h=S(()=>[0,o(v),0,-o(v),0][t()]);var m=c1(),g=L(m);{var p=w=>{var _=ge(),k=K(_);tt(k,17,()=>o(f),ot,(E,y,A)=>{var C=l1();F(C,"data-id",A),F(C,"dx",0);var j=L(C);Ct(j,()=>e.tickLabels[A],!0),$(()=>{F(C,"x",o(f)[A]),F(C,"y",o(u)[A]),F(C,"dy",o(d)*1.25),F(C,"transform",`rotate(-90, ${o(f)[A]}, ${o(u)[A]})`)}),N(E,C)}),N(w,_)},b=w=>{var _=ge(),k=K(_);{var E=A=>{var C=ge(),j=K(C);tt(j,17,()=>o(f),ot,(R,T,B)=>{var M=a1();F(M,"data-id",B),F(M,"dy",0),F(M,"text-anchor","end");var I=L(M);Ct(I,()=>e.tickLabels[B],!0),$(()=>{F(M,"x",o(f)[B]),F(M,"y",o(u)[B]),F(M,"dx",-o(h)/2),F(M,"transform",`rotate(-90, ${o(f)[B]}, ${o(u)[B]})`)}),N(R,M)}),N(A,C)},y=A=>{var C=ge(),j=K(C);tt(j,17,()=>o(f),ot,(R,T,B)=>{var M=i1();F(M,"data-id",B);var I=L(M);Ct(I,()=>e.tickLabels[B],!0),$(()=>{F(M,"x",o(f)[B]),F(M,"y",o(u)[B]),F(M,"dx",o(d)),F(M,"dy",o(h)),F(M,"text-anchor",o(l))}),N(R,M)}),N(A,C)};Y(k,A=>{s()===2&&t()===1?A(E):A(y,!1)},!0)}N(w,_)};Y(g,w=>{s()===2&&t()===4?w(p):w(b,!1)})}$(()=>mt(m,o(a))),N(r,m),we()}const u1=(r,e=At,t=At)=>{const s=S(()=>e().colmap.length);var l=p1(),a=K(l);tt(a,17,()=>e().colmap,ot,(d,h,m)=>{const g=S(()=>t().start+m*t().width);var p=h1(),b=K(p),w=P(b);F(w,"dy",0);var _=L(w);Ct(_,()=>e().labels[m],!0),$(()=>{F(b,"x",o(g)),F(b,"y",t().top),F(b,"width",t().width),F(b,"height",t().height),F(b,"fill",o(h)),F(w,"x",o(g)),F(w,"y",t().ltop),F(w,"dx",t().dxl),F(w,"fill",e().labelColor),F(w,"font-size",e().fontSize+"em")}),N(d,p)});var c=P(a);{var f=d=>{const h=S(()=>t().start+o(s)*t().width);var m=m1();F(m,"dx",0),F(m,"dy",0);var g=L(m);Ct(g,()=>e().labels[o(s)],!0),$(()=>{F(m,"x",o(h)),F(m,"y",t().ltop),F(m,"fill",e().labelColor),F(m,"font-size",`${e().fontSize??""}em`)}),N(d,m)};Y(c,d=>{e().isCentered||d(f)})}var u=P(c);{var v=d=>{const h=S(()=>t().start+o(s)*t().width);var m=g1(),g=L(m);Ct(g,()=>Fl(e().labelsFactor),!0),$(()=>{F(m,"x",o(h)),F(m,"y",t().ltop),F(m,"fill",e().labelColor),F(m,"font-size",`${e().fontSize??""}em`)}),N(d,m)};Y(u,d=>{e().labelsFactor!==0&&d(v)})}N(r,l)};function _c(r,e,t){r.preventDefault(),e(r,t())}function yc(r,e,t){r.preventDefault(),e(r,t())}function xc(r,e,t){r.preventDefault(),e(r,t())}function go(r,e,t){r.preventDefault(),e(r,t())}async function kc(r,e,t,s){Jd(r.target,o(e),t(),s())}function Ec(r,e,t){Kd(o(e),t())}function Ac(r,e,t,s,l,a){Gd(o(e),t(),s(),l(),a())}var f1=xe('<text fill="crimson" text-anchor="middle"> </text>'),v1=xe('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),d1=xe("<!><!><!><!><!>",1),h1=xe('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),m1=xe('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),g1=xe('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),p1=xe("<!><!><!>",1),b1=xe("<line></line>"),w1=xe('<text dominant-baseline="middle" text-anchor="middle"> </text>'),_1=xe('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),y1=xe('<svg><rect height="100%" width="100%"></rect><!></svg>'),x1=xe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),k1=xe('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),E1=xe('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),A1=xe('<g class="plot-labels"><!><!><!></g>'),C1=xe('<g class="axis x-axis"><!></g>'),S1=xe('<g class="axis y-axis"><!></g>'),N1=xe('<rect fill="transparent" id="axes-box"></rect>'),M1=xe('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),j1=xe('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),T1=xe('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),P1=xe('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),L1=H('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),z1=H('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),R1=H(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Cc(r,e){be(e,!0);const t=(ie,Pe=At,ke=At)=>{var Ce=ge(),Me=K(Ce);{var dt=Mt=>{var at=ge(),Xe=K(at);{var Bt=xt=>{var ht=f1(),Ar=L(ht);$(()=>{F(ht,"x",o(ee)[0]-10),F(ht,"y",o(de)),F(ht,"transform",`rotate(-90, ${o(ee)[0]-10}, ${o(de)})`),me(Ar,ke().error)}),N(xt,ht)},Et=xt=>{var ht=v1(),Ar=L(ht);$(()=>{F(ht,"x",o(ue)),F(ht,"y",o(re)[0]),me(Ar,ke().error)}),N(xt,ht)};Y(Xe,xt=>{ke().pos===4?xt(Bt):xt(Et,!1)})}N(Mt,at)},cn=Mt=>{var at=d1(),Xe=K(at);{var Bt=Se=>{Vl(Se,{get lineCoords(){return Pe().grid},get lineColor(){return St.MIDDLEGRAY},lineType:3})};Y(Xe,Se=>{ke().showGrid&&Se(Bt)})}var Et=P(Xe);Vl(Et,{get lineCoords(){return Pe().axisLine},get lineColor(){return St.DARKGRAY},lineType:1});var xt=P(Et);Vl(xt,{get lineCoords(){return Pe().tickCoords},get lineColor(){return St.DARKGRAY},lineType:1});var ht=P(xt);{var Ar=Se=>{wc(Se,{get las(){return ke().las},get pos(){return ke().pos},get tickCoords(){return Pe().tickCoords},get tickLabels(){return Pe().tickLabels},get tickColor(){return St.DARKGRAY},get hideLast(){return ke().hideLast}})};Y(ht,Se=>{Pe().tickCoords.length===2&&Pe().tickLabels.length===Pe().tickCoords[1][0].length&&Se(Ar)})}var Bs=P(ht);{var nt=Se=>{{let Dt=S(()=>[Pe().tfLabel]);wc(Se,{get pos(){return ke().pos},get tickCoords(){return Pe().tfCoords},get tickLabels(){return o(Dt)},get textColor(){return St.DARKGRAY}})}};Y(Bs,Se=>{Pe().tickFactor!==0&&Se(nt)})}N(Mt,at)};Y(Me,Mt=>{ke().error?Mt(dt):Mt(cn,!1)})}N(ie,Ce)},s=(ie,Pe=At,ke=At)=>{const Ce=S(()=>ke().elw+2*ke().elp),Me=S(()=>ke().elp),dt=S(()=>ke().elh),cn=S(()=>ke().ely);var Mt=y1(),at=L(Mt),Xe=P(at);tt(Xe,17,()=>Pe().items,ot,(Bt,Et,xt)=>{var ht=_1();F(ht,"x",0);var Ar=L(ht);{var Bs=Bn=>{var jt=b1();$(()=>{F(jt,"x1",o(Me)),F(jt,"x2",o(Ce)-o(Me)),F(jt,"y1",o(dt)[xt]/2),F(jt,"y2",o(dt)[xt]/2),F(jt,"stroke",o(Et).line.lineColor),F(jt,"stroke-width",o(Et).line.lineWidth),F(jt,"stroke-dasharray",o(M)[o(Et).line.lineType-1])}),N(Bn,jt)};Y(Ar,Bn=>{o(Et).line&&Bn(Bs)})}var nt=P(Ar);{var Se=Bn=>{var jt=w1(),Im=L(jt);$(()=>{F(jt,"x",o(Ce)/2),F(jt,"y",o(dt)[xt]/2),F(jt,"fill",o(Et).point.faceColor),F(jt,"stroke-width",o(Et).point.lineWidth),F(jt,"stroke",o(Et).point.lineColor),F(jt,"font-size",`${o(Et).point.markerSize??""}em`),me(Im,ts[o(Et).point.marker-1])}),N(Bn,jt)};Y(nt,Bn=>{o(Et).point&&Bn(Se)})}var Dt=P(nt),Rm=L(Dt);Ct(Rm,()=>o(Et).label,!0),$(()=>{F(ht,"y",o(cn)[xt]),F(ht,"width",ke().lgw),F(ht,"height",o(dt)[xt]),F(Dt,"x",o(Ce)+o(Me)),F(Dt,"y",o(dt)[xt]/2),F(Dt,"fill",St.LEGEND),F(Dt,"font-size",`${Pe().fontSize??""}em`)}),N(Bt,ht)}),$(()=>{F(Mt,"x",ke().lgl),F(Mt,"y",ke().lgt),F(Mt,"height",ke().lgh),F(Mt,"width",ke().lgw),F(at,"fill",Pe().faceColor),F(at,"stroke",Pe().lineColor),F(at,"stroke-width",Pe().lineWidth)}),N(ie,Mt)};let l=O(e,"limX",19,()=>[0,1]),a=O(e,"limY",19,()=>[0,1]),c=O(e,"margins",19,()=>[1,1.1,.55,.6]),f=O(e,"downloadLinks",3,"none"),u=O(e,"fileName",3,"plot"),v=O(e,"pngWidth",3,8),d=O(e,"pngHeight",3,8),h=O(e,"pngRes",3,300),m=O(e,"clipboardWidth",3,1200),g=O(e,"clipboardHeight",3,800),p=O(e,"onclick",3,null),b=O(e,"onmousemove",3,null),w=O(e,"onmousedown",3,null),_=O(e,"onmouseup",3,null);function k(ie,Pe){if(Pe&&ie.target.id=="axes-box"){const ke=hc([ie.offsetX-o(U)],o(se))[0],Ce=hc([ie.offsetY-o(D)],o(ae))[0];Pe(ke,Ce)}}const E="plottingArea"+Math.round(Math.random()*1e4);let y=ne(0),A=ne(0),C=ne(0);const j=S(()=>({plot:Vd(o(A),o(C)),x:bc(o(A)),y:bc(o(C))})),R=S(()=>c().map(ie=>ie*Rd[o(j).plot])),T=S(()=>qd[o(j).plot]),B=S(()=>zl[o(j).plot]),M=S(()=>Ls[o(j).plot]),I=S(()=>o(ze).show&&o(ze).label!==""?o(T)*1.5:0),U=S(()=>o(Ne).show&&o(Ne).label!==""?o(T)*1.5:0),D=S(()=>e.title&&e.title!==""?o(T)*1.5:0),z=S(()=>o(A)>o(U)?o(A)-o(U):0),W=S(()=>o(C)>o(I)+o(D)?o(C)-o(I)-o(D):0),oe=S(()=>o(W)-o(R)[0]-o(R)[2]),Q=S(()=>o(z)-o(R)[1]-o(R)[3]),J=S(()=>fc(l(),2)&&fc(a(),2)&&o(z)>o(R)[1]+o(R)[3]&&o(W)>o(R)[0]+o(R)[2]),se=S(()=>o(J)?{coords:[o(Q)/(l()[1]-l()[0]),l()[0],o(R)[1]],objects:[o(Q)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),ae=S(()=>o(J)?{coords:[-o(oe)/(a()[1]-a()[0]),a()[1],o(R)[2]],objects:[o(oe)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),de=S(()=>o(oe)*.5+o(D)+o(R)[2]),ue=S(()=>o(Q)*.5+o(U)+o(R)[1]),ee=S(()=>o(J)?gt(l(),o(se)):[0,1]),re=S(()=>o(J)?gt(a(),o(ae)):[1,0]),qe=S(()=>$r(e.title)),Ke=S(()=>o(qe)?o(qe).length===e.title.left?1:1.4:0);let Ue=ne(Te({show:!1})),ze=ne(Te({show:!1,error:""})),Ne=ne(Te({show:!1,error:""})),Ze=ne(Te({show:!1,colmap:null,breaks:null})),Re=ne(Te({show:!1,items:null,position:null}));const Ie=S(()=>o(J)&&o(Ze)&&o(Ze).show?$d(o(Ze)):null),te=S(()=>o(J)&&o(ze).show?Qd(l(),a(),o(j),o(ae),o(ze)):null),pe=S(()=>o(J)&&o(Ne).show?Zd(l(),a(),o(j),o(se),o(Ne)):null),ce=S(()=>o(J)&&o(Ie)?e1(o(Ie),o(Q),o(R),o(j)):null),_e=S(()=>o(J)&&o(Re)&&o(Re).show&&o(ee)?n1(o(Re),o(ee),o(re),o(T),o(B)):null);Au("axes",{setBox:ie=>q(Ue,ie,!0),setXAxis:ie=>q(ze,ie,!0),setYAxis:ie=>q(Ne,ie,!0),setColmapLegend:ie=>q(Ze,ie,!0),setGroupLegend:ie=>q(Re,ie,!0),scales:()=>o(j),tX:()=>o(se),tY:()=>o(ae),limX:()=>l(),limY:()=>a()});var Ee=R1();let ve;var Oe=L(Ee),Be=P(L(Oe));{var Je=ie=>{var Pe=A1(),ke=L(Pe);{var Ce=at=>{var Xe=x1();F(Xe,"dx",0),F(Xe,"dy",0);var Bt=L(Xe);Ct(Bt,()=>o(ze).label,!0),$(()=>{F(Xe,"x",o(ue)),F(Xe,"y",o(W)+o(D))}),N(at,Xe)};Y(ke,at=>{o(ze).show&&o(ze).label&&o(ze).label!==""&&at(Ce)})}var Me=P(ke);{var dt=at=>{var Xe=k1();F(Xe,"dx",0),F(Xe,"dy",0);var Bt=L(Xe);Ct(Bt,()=>o(Ne).label,!0),$(()=>{F(Xe,"x",o(T)/1.1*o(Ne).labelHeight),F(Xe,"y",o(de)),F(Xe,"transform",`rotate(-90, ${o(T)*o(Ne).labelHeight/1.1}, ${o(de)})`)}),N(at,Xe)};Y(Me,at=>{o(Ne).show&&o(Ne).label&&o(Ne).label!==""&&at(dt)})}var cn=P(Me);{var Mt=at=>{var Xe=E1();F(Xe,"dx",0),F(Xe,"dy",0);var Bt=L(Xe);Ct(Bt,()=>o(qe),!0),$(()=>{F(Xe,"x",o(ue)),F(Xe,"y",o(T)*o(Ke))}),N(at,Xe)};Y(cn,at=>{o(qe)&&o(qe)!==""&&at(Mt)})}N(ie,Pe)};Y(Be,ie=>{o(J)&&ie(Je)})}var $e=P(Be),Nt=L($e),Ye=L(Nt),V=L(Ye),G=P(Nt);{var X=ie=>{var Pe=P1(),ke=K(Pe);{var Ce=nt=>{var Se=C1(),Dt=L(Se);t(Dt,()=>o(te),()=>o(ze)),N(nt,Se)};Y(ke,nt=>{o(ze).show&&o(te)&&nt(Ce)})}var Me=P(ke);{var dt=nt=>{var Se=S1(),Dt=L(Se);t(Dt,()=>o(pe),()=>o(Ne)),N(nt,Se)};Y(Me,nt=>{o(Ne).show&&o(pe)&&nt(dt)})}var cn=P(Me),Mt=L(cn);{var at=nt=>{var Se=N1();Se.__keydown=[go,k,p],Se.__click=[go,k,p],Se.__mousemove=[xc,k,b],Se.__mousedown=[_c,k,w],Se.__mouseup=[yc,k,_],$(()=>{F(Se,"stroke",o(Ue).lineColor),F(Se,"stroke-width",`${o(Ue).lineWidth??""}px`),F(Se,"x",o(ee)[0]),F(Se,"y",o(re)[1]),F(Se,"width",o(ee)[1]-o(ee)[0]),F(Se,"height",o(re)[0]-o(re)[1])}),N(nt,Se)},Xe=nt=>{var Se=M1();Se.__keydown=[go,k,p],Se.__click=[go,k,p],Se.__mousemove=[xc,k,b],Se.__mousedown=[_c,k,w],Se.__mouseup=[yc,k,_],$(()=>{F(Se,"x",o(ee)[0]),F(Se,"y",o(re)[1]),F(Se,"width",o(ee)[1]-o(ee)[0]),F(Se,"height",o(re)[0]-o(re)[1])}),N(nt,Se)};Y(Mt,nt=>{o(Ue).show?nt(at):nt(Xe,!1)})}var Bt=P(cn),Et=L(Bt);jr(Et,()=>e.children??At);var xt=P(Bt);{var ht=nt=>{var Se=j1(),Dt=L(Se);u1(Dt,()=>o(Ie),()=>o(ce)),N(nt,Se)};Y(xt,nt=>{o(ce)&&nt(ht)})}var Ar=P(xt);{var Bs=nt=>{var Se=T1(),Dt=L(Se);s(Dt,()=>o(Re),()=>o(_e)),N(nt,Se)};Y(Ar,nt=>{o(_e)&&nt(Bs)})}$(()=>F(Bt,"clip-path",`url(#${E})`)),N(ie,Pe)};Y(G,ie=>{o(J)&&ie(X)})}En(Oe,ie=>q(y,ie),()=>o(y));var le=P(Oe,2);{var Ae=ie=>{var Pe=L1();N(ie,Pe)},rt=ie=>{var Pe=z1(),ke=L(Pe);ke.__click=[Ec,y,u],ke.__keydown=[Ec,y,u];var Ce=P(ke,2);Ce.__click=[Ac,y,u,v,d,h],Ce.__keydown=[Ac,y,u,v,d,h];var Me=P(Ce,2);Me.__click=[kc,y,m,g],Me.__keydown=[kc,y,m,g],N(ie,Pe)};Y(le,ie=>{o(J)?ie(rt,!1):ie(Ae)})}$(ie=>{ve=wt(Ee,1,`plot-container show-download-links-${f()??""}`,"svelte-1t5q9z1",ve,ie),mt(Oe,`font-size:${o(T)??""}px`),F($e,"x",o(U)),F($e,"y",o(D)),F($e,"width",o(z)),F($e,"height",o(W)),F(Ye,"id",E),F(V,"x",o(ee)[0]),F(V,"y",o(re)[1]),F(V,"width",o(ee)[1]-o(ee)[0]),F(V,"height",o(re)[0]-o(re)[1])},[()=>({"plot-error":!o(J)})]),oi(Oe,"clientWidth",ie=>q(A,ie)),oi(Oe,"clientHeight",ie=>q(C,ie)),N(r,Ee),we()}it(["keydown","click","mousemove","mousedown","mouseup"]);function Sc(r,e){be(e,!0);let t=O(e,"tickLabels",7),s=O(e,"las",3,1),l=O(e,"whole",3,!1),a=O(e,"show",3,!0),c=O(e,"showGrid",3,!1);const f=Vt("axes");he(()=>{const u=$r(e.label),v=u?u.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=pc(e.ticks,f.limX())),!h&&t()&&(m=>{var g=jo(m,2);t(g[0]),h=g[1]})(gc(t(),d)),f.setXAxis({show:a(),error:h,label:u,ticks:d,labelHeight:v,showGrid:c(),las:s(),whole:l(),tickLabels:t()})}),we()}function Nc(r,e){be(e,!0);let t=O(e,"tickLabels",7),s=O(e,"las",3,1),l=O(e,"whole",3,!1),a=O(e,"show",3,!0),c=O(e,"showGrid",3,!1);const f=Vt("axes");he(()=>{const u=$r(e.label),v=u?u.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=pc(e.ticks,f.limY())),!h&&t()&&(m=>{var g=jo(m,2);t(g[0]),h=g[1]})(gc(t(),d)),f.setYAxis({show:a(),error:h,label:u,ticks:d,labelHeight:v,showGrid:c(),las:s(),whole:l(),tickLabels:t(),pos:4})}),we()}function Mc(r,e){be(e,!0);let t=O(e,"lineWidth",3,1),s=O(e,"lineColor",3,"#606060");const l=Vt("axes");he(()=>{l.setBox({show:!0,lineWidth:t(),lineColor:s()})}),we()}var I1=(r,e)=>Ln(r,"rect",e.onclick),F1=xe("<rect></rect>"),q1=xe("<g></g>");function po(r,e){be(e,!0);let t=O(e,"faceColor",19,()=>St.PRIMARY),s=O(e,"lineColor",19,t),l=O(e,"lineWidth",3,1),a=O(e,"className",3,"series-rect");const c=S(()=>qt(e.left,"Rectangles (left)")),f=S(()=>o(c)?qt(e.top,"Rectangles (top)",o(c).length):null),u=S(()=>o(f)?typeof e.width!="object"?Ge.fill(e.width,o(c).length):e.width:null),v=S(()=>o(f)?typeof e.height!="object"?Ge.fill(e.height,o(c).length):e.height:null),d=Vt("axes"),h=S(()=>o(c)?gt(o(c),d.tX()):null),m=S(()=>o(f)?gt(o(f),d.tY()):null),g=S(()=>o(u)?Il(o(u),d.tX()):null),p=S(()=>o(v)?Il(o(v),d.tY()):null),b=S(()=>`fill:${t()};stroke:${s()};stroke-width:${l()}px;`),w=S(()=>o(h)&&o(m)&&o(g)&&o(p)&&o(g).length===o(h).length&&o(p).length===o(h).length);var _=ge(),k=K(_);{var E=y=>{var A=q1();A.__click=[I1,e],tt(A,21,()=>e.left,ot,(C,j,R)=>{var T=F1();$(()=>{F(T,"x",o(h)[R]),F(T,"y",o(m)[R]),F(T,"width",o(g)[R]),F(T,"height",o(p)[R])}),N(C,T)}),$(()=>{wt(A,0,`series ${a()??""}`),mt(A,o(b))}),N(y,A)};Y(k,y=>{o(w)&&y(E)})}N(r,_),we()}it(["click"]);var O1=(r,e)=>Ln(r,"line",e.onclick),B1=xe("<line></line>"),D1=xe('<g class="series series-segment"></g>');function V1(r,e){be(e,!0);let t=O(e,"lineColor",19,()=>St.PRIMARY),s=O(e,"lineType",3,1),l=O(e,"lineWidth",3,1);const a=S(()=>qt(e.xStart,"Segments")),c=S(()=>o(a)?qt(e.yStart,"Segments",o(a).length):null),f=S(()=>o(c)?qt(e.xEnd,"Segments",o(a).length):null),u=S(()=>o(f)?qt(e.yEnd,"Segments",o(a).length):null),v=Vt("axes"),d=S(()=>o(a)?gt(o(a),v.tX()):null),h=S(()=>o(f)?gt(o(f),v.tX()):null),m=S(()=>o(c)?gt(o(c),v.tY()):null),g=S(()=>o(u)?gt(o(u),v.tY()):null),p=S(()=>`stroke:${t()};stroke-width: ${l()}px;stroke-dasharray:${Ls[v.scales().plot][s()-1]}`),b=S(()=>o(d)&&o(h)&&o(m)&&o(g));var w=ge(),_=K(w);{var k=E=>{var y=D1();y.__click=[O1,e],tt(y,21,()=>o(d),ot,(A,C,j)=>{var R=B1();$(()=>{F(R,"x1",o(d)[j]),F(R,"x2",o(h)[j]),F(R,"y1",o(m)[j]),F(R,"y2",o(g)[j])}),N(A,R)}),$(()=>mt(y,o(p))),N(E,y)};Y(_,E=>{o(b)&&E(k)})}N(r,w),we()}it(["click"]);var Y1=(r,e)=>Ln(r,"text",e.onclick),W1=xe("<text><!></text>"),U1=xe("<text><!></text>"),H1=xe("<text><!></text>"),G1=xe('<g class="series series-textlabels"><!></g>');function bo(r,e){be(e,!0);let t=O(e,"pos",3,0),s=O(e,"faceColor",19,()=>St.PRIMARY_TEXT),l=O(e,"lineColor",3,"transparent"),a=O(e,"lineWidth",3,0),c=O(e,"textSize",3,1),f=O(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],v=S(()=>qt(e.xValues,"TextLabels")),d=S(()=>o(v)?qt(e.yValues,"TextLabels",o(v).length):null),h=S(()=>o(d)?Array.isArray(e.labels)&&e.labels.length!==o(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=S(()=>o(h)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),g=Vt("axes"),p=S(()=>o(v)&&o(m)!==null?gt(o(v),g.tX()):null),b=S(()=>o(d)&&o(p)?gt(o(d),g.tY()):null),w=S(()=>Rl[g.scales().plot]),_=S(()=>[0,0,-o(w),0,o(w),o(w)]),k=S(()=>[0,o(w),0,-o(w),0,o(w)]),E=S(()=>`fill:${s()};stroke-width:${a()}px;stroke:${l()};font-size:${c()}em;`),y=S(()=>o(p)&&o(b)&&o(m)!==null&&o(h)&&o(p).length===o(b).length);var A=ge(),C=K(A);{var j=R=>{var T=G1();T.__click=[Y1,e];var B=L(T);{var M=U=>{var D=ge(),z=K(D);tt(z,17,()=>o(p),ot,(W,oe,Q)=>{var J=W1();F(J,"data-id",Q);var se=L(J);Ct(se,()=>e.labels,!0),$(()=>{F(J,"x",o(p)[Q]),F(J,"y",o(b)[Q]),F(J,"dx",o(_)[t()]),F(J,"dy",o(k)[t()]),F(J,"transform",f()!==void 0?`rotate(${f()}, ${o(p)[Q]+o(_)[t()]}, ${o(b)[Q]+o(k)[t()]})`:""),F(J,"text-anchor",u[t()[Q]])}),N(W,J)}),N(U,D)},I=U=>{var D=ge(),z=K(D);{var W=Q=>{var J=ge(),se=K(J);tt(se,17,()=>o(p),ot,(ae,de,ue)=>{var ee=U1();F(ee,"data-id",ue);var re=L(ee);Ct(re,()=>e.labels[ue],!0),$(()=>{F(ee,"x",o(p)[ue]),F(ee,"y",o(b)[ue]),F(ee,"dx",o(_)[t()[ue]]),F(ee,"dy",o(k)[t()[ue]]),F(ee,"transform",f()!==void 0?`rotate(${f()}, ${o(p)[ue]+o(_)[t()]}, ${o(b)[ue]+o(k)[t()]})`:""),F(ee,"text-anchor",u[t()[ue]])}),N(ae,ee)}),N(Q,J)},oe=Q=>{var J=ge(),se=K(J);tt(se,17,()=>o(p),ot,(ae,de,ue)=>{var ee=H1();F(ee,"data-id",ue);var re=L(ee);Ct(re,()=>e.labels[ue],!0),$(()=>{F(ee,"x",o(p)[ue]),F(ee,"y",o(b)[ue]),F(ee,"dx",o(_)[t()]),F(ee,"dy",o(k)[t()]),F(ee,"transform",f()!==void 0?`rotate(${f()}, ${o(p)[ue]+o(_)[t()]}, ${o(b)[ue]+o(k)[t()]})`:""),F(ee,"text-anchor",u[t()])}),N(ae,ee)}),N(Q,J)};Y(z,Q=>{Array.isArray(t())||ArrayBuffer.isView(t())?Q(W):Q(oe,!1)},!0)}N(U,D)};Y(B,U=>{typeof e.labels=="string"?U(M):U(I,!1)})}$(()=>mt(T,o(E))),N(R,T)};Y(C,R=>{o(y)&&R(j)})}N(r,A),we()}it(["click"]),it(["click"]);var K1=(r,e)=>Ln(r,"text",e.onclick),J1=xe("<text> </text>"),X1=xe('<g text-anchor="middle"></g>');function Q1(r,e){be(e,!0);let t=O(e,"marker",3,1),s=O(e,"faceColor",3,"transparent"),l=O(e,"lineColor",19,()=>St.PRIMARY),a=O(e,"lineWidth",3,1),c=O(e,"markerSize",3,1);const f=S(()=>typeof t()!="number"||t()<1||t()>ts.length?(console.error('Points: parameter "marker" must be a number from 1 to '+ts.length+"."),null):ts[t()-1]),u=S(()=>qt(e.xValues,"Points")),v=S(()=>o(u)?qt(e.yValues,"Points",o(u).length):null),d=Vt("axes"),h=S(()=>o(u)?gt(o(u),d.tX()):null),m=S(()=>o(h)&&o(v)?gt(o(v),d.tY()):null),g=S(()=>["＋","✳","✕"].includes(o(f))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${c()}em;`:`fill:${s()};stroke-width:${a()}px;stroke:${l()}; font-size:${c()}em;`),p=S(()=>["◼","⬥","＋","✳","✕"].includes(o(f))?"series-points2":"series-points1"),b=S(()=>o(h)&&o(m)&&o(h).length===o(m).length);var w=ge(),_=K(w);{var k=E=>{var y=X1();y.__click=[K1,e],tt(y,21,()=>o(h),ot,(A,C,j)=>{var R=J1(),T=L(R);$(()=>{F(R,"x",o(h)[j]),F(R,"y",o(m)[j]),me(T,o(f))}),N(A,R)}),$(()=>{wt(y,0,`series series-points ${o(p)??""}`),mt(y,o(g))}),N(E,y)};Y(_,E=>{o(b)&&E(k)})}N(r,w),we()}it(["click"]);var Z1=(r,e)=>Ln(r,"polyline",e.onclick),$1=xe('<g class="series series-line"><polyline class="line"></polyline></g>');function en(r,e){be(e,!0);let t=O(e,"lineColor",19,()=>St.PRIMARY),s=O(e,"lineType",3,1),l=O(e,"lineWidth",3,1);const a=S(()=>qt(e.xValues,"Lines")),c=S(()=>o(a)?qt(e.yValues,"Lines",o(a).length):null),f=Vt("axes"),u=S(()=>o(a)&&o(c)?Ol(o(a),o(c),f.tX(),f.tY()):null),v=S(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${Ls[f.scales().plot][s()-1]}`);var d=ge(),h=K(d);{var m=g=>{var p=$1();p.__click=[Z1,e];var b=L(p);$(()=>{mt(p,o(v)),F(b,"points",o(u))}),N(g,p)};Y(h,g=>{o(u)&&g(m)})}N(r,d),we()}it(["click"]);var eh=(r,e)=>Ln(r,"polyline",e.onclick),th=xe('<polyline class="line"></polyline>'),rh=xe('<g class="series series-multiline"></g>');function jc(r,e){be(e,!0);let t=O(e,"lineColor",19,()=>St.PRIMARY),s=O(e,"lineType",3,1),l=O(e,"lineWidth",3,1);const a=S(()=>qt(e.xValues,"Multilines")),c=S(()=>o(a)?Jr(e.yValues)?(o(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),f=Vt("axes"),u=S(()=>{if(!o(a)||!o(c))return null;const g=new Array(o(c).ncols);for(let p=0;p<g.length;p++)g[p]=Ol(o(a),o(c).getcolumn(p+1),f.tX(),f.tY());return g}),v=S(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${Ls[f.scales().plot][s()-1]}`);var d=ge(),h=K(d);{var m=g=>{var p=rh();p.__click=[eh,e],tt(p,21,()=>o(u),ot,(b,w)=>{var _=th();$(()=>F(_,"points",o(w))),N(b,_)}),$(()=>mt(p,o(v))),N(g,p)};Y(h,g=>{o(u)&&o(u).length>0&&g(m)})}N(r,d),we()}it(["click"]);function nh(r,e){be(e,!0);let t=O(e,"show",3,!0),s=O(e,"position",3,"topleft"),l=O(e,"lineColor",19,()=>St.LEGEND),a=O(e,"lineWidth",3,1),c=O(e,"faceColor",3,"#fff"),f=O(e,"fontSize",3,.85);function u(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function v(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let m=0;m<h.length;m++){const g=h[m];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=$r(g.label),b=p.length===g.label?1:1.4;g.label=p,g.labelHeight=b,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(m+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:St.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=ts.length||console.error('Legend: parameter "marker" for legend item '+(m+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.markerSize=g.point.markerSize?g.point.markerSize:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:St.PRIMARY)}return h}const d=Vt("axes");he(()=>{const h=v(e.items),m=u(s());d.setGroupLegend(h&&m?{show:t(),position:s(),items:e.items,lineColor:l(),faceColor:c(),lineWidth:a(),fontSize:f()}:{show:!1,position:null,items:null})}),we()}function Tc(r,e){be(e,!0);let t=O(e,"show",3,!0),s=O(e,"labels",3,null),l=O(e,"labelColor",19,()=>St.CLEGEND_LABELS),a=O(e,"fontSize",3,.85);const c=Vt("axes");he(()=>{c.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:l(),fontSize:a()})}),we()}const sh=[1,1.1,.45,.4],tn={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",alien:"#2679B2",external:"#D22C2F"},Yl={cal:1,pv:2,test:2,new:2},zn={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},oh={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Wl={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},Pc="#a0a0a0",Lc="#909090",zc=8,lh=8,ah=8,ih=600;function ch(r,e){if(r.length===e.length)return r;const t=e.length,s=new r.constructor(t);for(let l in e)s[l]=r[e[l]];return s}function uh(r,e){let t=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(let c=0;c<r.length;c++)s=Math.min(s,r[c]),t=Math.max(t,r[c]);let l=Bl(void 0,[s,t],e-1,!0,!1,0).v;const a=l[1]-l[0];if(l[0]>s){const c=l[0]-a;l=[c<s?c:s,...l]}if(l[l.length-1]<t){const c=l[l.length-1]+a;l=[...l,c>t?c:t]}return l}function fh(r){const e=r.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const t=mo(e);return r.reduce((l,a,c)=>(l[a]=t[c],l),{})}function Rc(r,e,t){const s=e.length,l=new Array(r.length),a=e[1]-e[0];for(let c=0;c<r.length;c++)for(let f=0;f<s-1;f++){const u=r[c]>=e[f],v=f===s-2?r[c]<e[f+1]+a:r[c]<e[f+1];if(u&&v){l[c]=t[f];break}}return l}function vh(r,e,t,s,l="cal",a){if(!e)return null;let c,f,u,v,d,h,m=!0;if((t==="groups"||t==="classes")&&e.classNames){const g=fh(e.classNames);f=Object.keys(g).map(p=>g[p]),c=e.classNames,v=e.classes.map(p=>g[p]),u=new Array(c.length+1).map((p,b)=>b-.5),d=null}else if(t==="variable"){const g=ch(r.values.getcolref(s),e.objindices);d=r.varlabels[s-1],d.length>30&&(d=d.substring(0,29)+"..."),u=uh(g,10),f=mo(u.length-1),v=Rc(g,u,f)}else if(a){const g=a.values;c=a.labels;const p=a.classColmap;f=Object.keys(p).map(b=>p[b]),v=g.map(b=>p[b]),u=new Array(c.length+1).map((b,w)=>w-.5),d=null,a.filled&&a.filled.length===g.length&&(h=a.filled),a.showBar!==void 0&&(m=a.showBar)}else c=null,u=null,f=null,v=Array(e.nrows).fill(zn[l]);return{labels:c,map:f,breaks:u,colors:v,varname:d,filled:h,showBar:m,mainColor:zn[l],faceColor:oh[l],faceTColor:Wl[l]}}function dh(r,e,t,s){if(!r)return null;const l=r.length;let a=Ge.zeros(l),c=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(s==="log")for(let u=0;u<l;u++){const v=Math.log(1+r[u]/t);a.v[u]=v,c=Math.max(c,v),f=Math.min(f,v)}else for(let u=0;u<l;u++){const v=r[u]/t;a.v[u]=v,c=Math.max(c,v),f=Math.min(f,v)}return{values:a,min:f,max:c}}var hh=H("<!> <!>",1),mh=H("<!> <!>",1),gh=H("<!> <!>",1),ph=H("<!> <!> <!> <!> <!> <!> <!> <!>",1),bh=H("<h2>Plot settings</h2>"),wh=H('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),_h=H('<div class="plot-panel svelte-5p9gcx"><!></div>');function yh(r,e){be(e,!0);let t=ne(!0),s=ne("none"),l=ne(!1);const a=S(()=>(o(t)?"Preprocessed":"Raw")+" data (selected rows)"),c=S(()=>o(t)&&e.prepdata?e.prepdata:e.rawdata),f=S(()=>o(c)?o(c).varaxisLabel:"Variables"),u=S(()=>e.rawdata.varaxisUnits),v=S(()=>e.left>=0||e.right>0&&e.right<o(c).values.nrows),d=S(()=>e.left>=0?e.left+1:1),h=S(()=>e.right>0&&e.right<o(c).values.nrows?e.right:o(c).values.nrows),m=S(()=>o(t)&&o(c)&&o(v)?Wt.seq(o(d),o(h)):null),g=S(()=>o(m)?o(c).varvalues.filter((R,T)=>T>=o(d)-1&&T<o(h)):o(c).varvalues),p=S(()=>o(m)?o(c).values.subset(o(m),null):o(c).values),b=S(()=>o(p)?sl(o(p).v):null),w=S(()=>o(b)?(o(b)[1]-o(b)[0])*.05:null),_=S(()=>o(b)?[o(b)[0],o(b)[1]+(o(s)!=="none")*o(w)]:[0,1]),k=S(()=>o(c)?sl(o(c).varvalues,o(l)?.005:.1):[0,1]),E=S(()=>o(l)&&o(v)?[o(c).varvalues[o(d)-1],o(c).varvalues[o(h)-1]]:o(k)),y=S(()=>{if(!e.rawdata)return null;const R={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const T=mo(e.rawdata.classNames.length);R.groups={colors:e.rawdata.classes.map(B=>T[e.rawdata.classNames.findIndex(M=>M===B)]),breaks:Rr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:T}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const T=ii(e.rawdata.resp,8),B=mo(T.length-1);R.response={colors:Rc(e.rawdata.resp.v,T.v,B),labels:null,breaks:T,map:B}}return R});he(()=>{(e.left<1||e.right<1||e.right>=e.left)&&q(l,!1)});var A=_h(),C=L(A);{var j=R=>{var T=wh(),B=K(T),M=L(B),I=L(M);Cc(I,{get title(){return o(a)},get limY(){return o(_)},get limX(){return o(E)},fileName:"plot-preprocessed",children:(se,ae)=>{var de=ph(),ue=K(de);{var ee=ce=>{jc(ce,{get xValues(){return o(g)},get yValues(){return o(p)}})},re=ce=>{var _e=ge(),Ee=K(_e);tt(Ee,17,()=>o(y)[o(s)].colors,ot,(ve,Oe,Be)=>{{let Je=S(()=>o(p).getcolumn(Be+1));en(ve,{get xValues(){return o(g)},get yValues(){return o(Je)},get lineColor(){return o(Oe)}})}}),N(ce,_e)};Y(ue,ce=>{o(s)==="none"?ce(ee):ce(re,!1)})}var qe=P(ue,2);{var Ke=ce=>{const _e=S(()=>o(c).varvalues[e.varind[0]]);var Ee=hh(),ve=K(Ee);{let Be=S(()=>[o(_e),o(_e)]);en(ve,{get xValues(){return o(Be)},get yValues(){return o(_)},lineColor:"#00000060"})}var Oe=P(ve,2);{let Be=S(()=>[o(_e)]),Je=S(()=>[o(_)[1]-o(w)*(o(s)==="none"?1:2)]),$e=S(()=>$r(o(_e).toFixed(2)+" "+o(u)));bo(Oe,{get xValues(){return o(Be)},get yValues(){return o(Je)},get labels(){return o($e)},textColor:"#a0a0a0",textSize:.8,pos:2})}N(ce,Ee)};Y(qe,ce=>{e.varind&&e.varind[0]>0&&ce(Ke)})}var Ue=P(qe,2);{var ze=ce=>{const _e=S(()=>o(c).varvalues[e.varind[1]]);var Ee=mh(),ve=K(Ee);{let Be=S(()=>[o(E)[0]]),Je=S(()=>[o(c).varvalues[e.varind[1]]-o(E)[0]]),$e=S(()=>[o(_)[1]]),Nt=S(()=>[o(_)[1]-o(_)[0]]);po(ve,{get left(){return o(Be)},get width(){return o(Je)},get top(){return o($e)},get height(){return o(Nt)},lineColor:"transparent",faceColor:"#00000040"})}var Oe=P(ve,2);{let Be=S(()=>[o(_e)]),Je=S(()=>[o(_)[1]-o(w)*(o(s)==="none"?1:2)]),$e=S(()=>$r(o(_e).toFixed(2)+" "+o(u)));bo(Oe,{get xValues(){return o(Be)},get yValues(){return o(Je)},get labels(){return o($e)},textColor:"#a0a0a0",textSize:.8,pos:2})}N(ce,Ee)};Y(Ue,ce=>{e.varind&&e.varind[1]>0&&ce(ze)})}var Ne=P(Ue,2);{var Ze=ce=>{const _e=S(()=>o(c).varvalues[e.varind[2]-1]);var Ee=gh(),ve=K(Ee);{let Be=S(()=>[o(c).varvalues[e.varind[2]-1]]),Je=S(()=>[o(E)[1]-o(c).varvalues[e.varind[2]-1]]),$e=S(()=>[o(_)[1]]),Nt=S(()=>[o(_)[1]-o(_)[0]]);po(ve,{get left(){return o(Be)},get width(){return o(Je)},get top(){return o($e)},get height(){return o(Nt)},lineColor:"transparent",faceColor:"#00000040"})}var Oe=P(ve,2);{let Be=S(()=>[o(_e)]),Je=S(()=>[o(_)[1]-o(w)*(o(s)==="none"?1:2)]),$e=S(()=>$r(o(_e).toFixed(2)+" "+o(u)));bo(Oe,{get xValues(){return o(Be)},get yValues(){return o(Je)},get labels(){return o($e)},textColor:"#a0a0a0",textSize:.8,pos:2})}N(ce,Ee)};Y(Ne,ce=>{e.varind&&e.varind[2]<o(c).varvalues.length&&e.varind[2]>0&&ce(Ze)})}var Re=P(Ne,2);{let ce=S(()=>o(s)!=="none");Tc(Re,{get show(){return o(ce)},get labels(){return o(y)[o(s)].labels},get breaks(){return o(y)[o(s)].breaks},get colmap(){return o(y)[o(s)].map}})}var Ie=P(Re,2);Sc(Ie,{get label(){return o(f)},showGrid:!0});var te=P(Ie,2);Nc(te,{showGrid:!0});var pe=P(te,2);Mc(pe,{}),N(se,de)},$$slots:{default:!0}});var U=P(B,2),D=L(U);fe(D,{label:"",children:(se,ae)=>{var de=bh();N(se,de)},$$slots:{default:!0}});var z=P(D,2);fe(z,{label:"Show",children:(se,ae)=>{Tn(se,{options:["raw","preprocessed"],get value(){return o(t)},set value(de){q(t,de,!0)}})},$$slots:{default:!0}});var W=P(z,2);{var oe=se=>{fe(se,{label:"Color by",children:(ae,de)=>{{let ue=S(()=>Object.keys(o(y)));_t(ae,{get options(){return o(ue)},get value(){return o(s)},set value(ee){q(s,ee,!0)}})}},$$slots:{default:!0}})};Y(W,se=>{Object.keys(o(y)).length>1&&se(oe)})}var Q=P(W,2);{var J=se=>{fe(se,{label:"Zoom (x-axis)",children:(ae,de)=>{Tn(ae,{options:["off","on"],get value(){return o(l)},set value(ue){q(l,ue,!0)}})},$$slots:{default:!0}})};Y(Q,se=>{e.left>0&&e.right>e.left&&se(J)})}N(R,T)};Y(C,R=>{o(g)&&o(p)&&R(j)})}N(r,A),we()}var xh=H('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function kh(r,e){be(e,!0);let t=O(e,"left",15),s=O(e,"right",15),l=O(e,"prepobj",15),a=O(e,"meta",15),c=O(e,"finalize",3,null),f=ne(Te([-1,0,0])),u=ne(null),v=ne(null);function d(E){const y=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E>=0&&E<y&&E<s()&&t(E)}function h(E){const y=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E<=y&&E>t()&&s(E)}var m=xh(),g=L(m),p=L(g),b=L(p);zd(b,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return t()},get right(){return s()},setLeft:d,",":!0,setRight:h,get finalize(){return c()},get varind(){return o(f)},set varind(E){q(f,E,!0)},get prepobj(){return l()},set prepobj(E){l(E)},get rawdataShort(){return o(u)},set rawdataShort(E){q(u,E,!0)},get prepdataShort(){return o(v)},set prepdataShort(E){q(v,E,!0)},get meta(){return a()},set meta(E){a(E)}});var w=P(g,2),_=L(w);{var k=E=>{yh(E,{get rawdata(){return o(u)},get prepdata(){return o(v)},get left(){return t()},get right(){return s()},get varind(){return o(f)}})};Y(_,E=>{o(u)&&E(k)})}N(r,m),we()}var Eh=H('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),Ah=H("<!> <!> <!>",1),Ch=H('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),Sh=H("<!> <!> <!>",1),Nh=H("<p><strong>Preprocessing model</strong></p>"),Mh=H("<!> <!>",1),jh=H("<p> </p>"),Th=H('<div class="prep-widget"><!></div> <!> <!>',1);function Ph(r,e){be(e,!0);let t=O(e,"prepType",15),s=O(e,"prepobj",15),l=O(e,"prepdata",15),a=O(e,"prepmodel",15),c=O(e,"prepmeta",15),f=ne(!1),u=ne(0),v=ne(Te(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),d=ne("neutral"),h=ne(""),m=ne(void 0);async function g(I,U,D){!U||!I||U.length===0||q(m,e.WASM().then(z=>{q(d,"applying");const W=Yi(z,I.values,I.nresp,U,!1,D);W.info=c(),a(W)}).catch(z=>{a(null),console.error(z),q(d,"error"),q(h,z,!0)}),!0)}async function p(I,U){if(!U||typeof U!="object"){l(null);return}if(Object.keys(U).length===0){l(I);return}q(m,e.WASM().then(D=>{q(d,"applying");const z=Ms(D,I.values,I.nresp,U,!1,!1),W=Pl(Io(I),z);l(El(W,U))}).catch(D=>{l(null),console.error(D),q(d,"error"),q(h,D,!0)}),!0)}function b(){t(null),l(null),a(null),s([]),q(u,0),q(v,e.rawdata.values.ncols-e.rawdata.nresp)}function w(){s()&&s().length>0?g(e.rawdata,s(),e.outliers):(t(null),a(null)),q(f,!1)}function _(){t("create"),l(null),a(null),q(f,!0)}function k(){t("skip"),a({})}he(()=>{a(),e.rawdata&&p(e.rawdata,a())}),he(()=>{t()==="create"&&s()&&!a()&&g(e.rawdata,s(),e.outliers)}),he(()=>{t()==="skip"&&l()===null&&(a({}),s([]),l(e.rawdata))});var E=Th(),y=K(E),A=L(y);{var C=I=>{fe(I,{name:"info",children:(U,D)=>{var z=Ah(),W=K(z);{var oe=ae=>{var de=Eh(),ue=P(L(de),2);Ll(ue,{get prepmodel(){return a()}}),N(ae,de)};Y(W,ae=>{o(f)||ae(oe)})}var Q=P(W,2);{var J=ae=>{Zi(ae,{onclick:_})};Y(Q,ae=>{t()==="create"&&ae(J)})}var se=P(Q,2);Zr(se,{onclick:b}),N(U,z)},$$slots:{default:!0}})},j=I=>{var U=ge(),D=K(U);{var z=oe=>{fe(oe,{name:"prep-info",children:(Q,J)=>{var se=Ch(),ae=P(K(se),2),de=L(ae);Zr(de,{onclick:b}),N(Q,se)},$$slots:{default:!0}})},W=oe=>{var Q=ge(),J=K(Q);{var se=de=>{fe(de,{label:"Preprocessing",name:"prep-container",children:(ue,ee)=>{var re=Sh(),qe=K(re);kt(qe,{text:"Skip",onclick:k});var Ke=P(qe,2);kt(Ke,{text:"Load",onclick:()=>t("file")});var Ue=P(Ke,2);kt(Ue,{text:"Create",onclick:_}),N(ue,re)},$$slots:{default:!0}})},ae=de=>{var ue=ge(),ee=K(ue);{var re=qe=>{var Ke=Mh(),Ue=K(Ke);fe(Ue,{children:(Ne,Ze)=>{var Re=Nh();N(Ne,Re)},$$slots:{default:!0}});var ze=P(Ue,2);ad(ze,{get model(){return a()},set model(Ne){a(Ne)},get prepobj(){return s()},set prepobj(Ne){s(Ne)},get left(){return o(u)},set left(Ne){q(u,Ne,!0)},get right(){return o(v)},set right(Ne){q(v,Ne,!0)}}),N(qe,Ke)};Y(ee,qe=>{t()==="file"&&qe(re)},!0)}N(de,ue)};Y(J,de=>{t()?de(ae,!1):de(se)},!0)}N(oe,Q)};Y(D,oe=>{t()==="skip"?oe(z):oe(W,!1)},!0)}N(I,U)};Y(A,I=>{a()&&l()&&a().ml?I(C):I(j,!1)})}var R=P(y,2);{var T=I=>{cc(I,{closeModal:w,isDark:!0,children:(U,D)=>{kh(U,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:w,get prepobj(){return s()},set prepobj(z){s(z)},get left(){return o(u)},set left(z){q(u,z,!0)},get right(){return o(v)},set right(z){q(v,z,!0)},get meta(){return c()},set meta(z){c(z)}})},$$slots:{default:!0}})};Y(R,I=>{o(f)&&I(T)})}var B=P(R,2);{var M=I=>{fe(I,{status:"error",children:(U,D)=>{var z=jh(),W=L(z);$(()=>me(W,o(h))),N(U,z)},$$slots:{default:!0}})};Y(B,I=>{(o(d)==="error"||o(h))&&I(M)})}N(r,E),we()}var Lh=H('<span style="font-weight:bold"> </span><br/>',1),zh=H('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),Rh=H('<span class="file-size svelte-1uxd0r7"> </span>'),Ih=H('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Fh(r,e){be(e,!0);let t=O(e,"title",3,"");var s=ge(),l=K(s);{var a=c=>{fe(c,{children:(f,u)=>{var v=Ih(),d=K(v),h=L(d);{var m=E=>{var y=Lh(),A=K(y),C=L(A);$(()=>me(C,t())),N(E,y)};Y(h,E=>{t()&&t()!==""&&E(m)})}var g=P(h,4),p=L(g),b=P(g,5);{var w=E=>{var y=zh(),A=K(y),C=L(A),j=P(A,4),R=L(j);$(()=>{me(C,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),me(R,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),N(E,y)},_=E=>{var y=Rh(),A=L(y);$(()=>me(A,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),N(E,y)};Y(b,E=>{e.dataset.nresp&&e.dataset.nresp>0?E(w):E(_,!1)})}var k=P(d,2);Zr(k,{get onclick(){return e.reset}}),$(()=>{F(g,"title",e.dataset.fileName),me(p,e.dataset.fileName)}),N(f,v)},$$slots:{default:!0}})};Y(l,c=>{e.dataset&&c(a)})}N(r,s),we()}var qh=H("<!> <!>",1),Oh=H("<!> <!> <!> <!> <!> <!>",1),Bh=H("<!> <!>",1),Dh=H("<p> </p>"),Vh=H("<!> <p> </p>",1),Yh=H("<p> </p>"),Wh=H("<!> <!> <!>",1);function Ul(r,e){be(e,!0);let t=O(e,"model",3,null),s=O(e,"outliers",19,()=>[]),l=O(e,"className",3,"Class"),a=O(e,"classMandatory",3,!1),c=O(e,"classUnique",3,!1),f=O(e,"title",3,""),u=O(e,"dataset",15),v=O(e,"resobj",15),d=O(e,"csvOnly",3,!0);const h=[",",";"],m=S(()=>t()?["no","yes"]:["no","labels","values"]);let g=ne(void 0),p=ne(""),b=ne(""),w=ne(","),_=ne("no"),k=ne(!1),E=ne(!1),y=ne(null),A=ne("neutral"),C=ne("");function j(ee){q(A,"error"),q(C,ee,!0),console.error(ee)}function R(){q(A,"neural"),q(C,"")}function T(){q(A,"success"),q(C,"")}function B(ee,re,qe){q(y,e.WASM().then(Ke=>{v(fv(Ke,ee,re,qe,!0)),T()}).catch(Ke=>{v(null),j(Ke)}),!0)}function M(ee,re){if(!ee||ee.size<10)return;const Ke=ee.slice(0,1e5),Ue=new FileReader;Ue.onload=()=>{const ze=Ue.result;!ze||ze.length<0||((Ne=>{var Ze=jo(Ne,4);q(w,Ze[0],!0),q(k,Ze[1],!0),q(E,Ze[2],!0),q(_,Ze[3],!0)})(gv(ze)),q(E,a()||o(E),!0),re&&o(_)!=="no"&&q(_,"yes"))},Ue.onerror=function(ze){csvString=null,q(A,"error"),q(C,ze,!0),console.error("Error reading CSV file.",ze)},Ue.readAsText(Ke)}function I(ee){try{const re=dv(ee,o(w),o(_)==="yes"?"labels":o(_),o(k),o(E),o(p),o(b));if(re.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const qe=t()?t().prep&&Object.keys(t().prep).length>0?t().prep.npred:t().ncols+t().exclvars.length:0;if(t()&&re.values.ncols!==qe)throw new Error("Dataset has different number of columns than the training set.");if(re.classNames.length>re.values.nrows/2)throw new Error("Dataset has too many unique "+l().toLowerCase()+" labels ("+re.classNames.length+"), check your CSV file.");if(a()&&re.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&re.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");re.fileName=o(g).name.replace(/\.[^/.]+$/,""),t()&&(re.varrev=t().varrev,re.header=t().header,re.varlabels=t().varlabels,re.varvalues=t().varvalues,re.varvaluesName=t().varvaluesName,re.varvaluesUnits=t().varvaluesUnits),u(re),T()}catch(re){u(null),j(re)}}function U(ee){const re=new FileReader;re.onload=()=>{I(re.result)},re.readAsText(o(g))}async function D(ee){try{const re=o(g)instanceof FileList?o(g):[o(g)];u(await _v(re)),T()}catch(re){j("Failed to read SPC file: "+re)}}function z(){q(g,""),u(null),v(null),q(p,""),q(b,""),R()}he(()=>{if(!(o(g)===0||o(g)===void 0||u())){if(o(g)===null||o(g)===""){z();return}if(Array.isArray(o(g))){if(o(g).filter(ee=>ee.slice(-4)===".spc").length!==o(g).length){j("Multiple file selection is allowed only for SPC files.");return}D(o(g));return}o(g)&&(o(g).type==="text/csv"||o(g).type==="application/vnd.ms-excel")?(M(o(g),t()),R()):D([o(g)])}}),he(()=>{o(w)&&R()}),he(()=>{if(u()&&t()&&!v()&&!o(C))try{v(B(t(),u(),s())),T()}catch(ee){u(null),v(null),j(ee)}});var W=Wh(),oe=K(W);{var Q=ee=>{var re=Bh(),qe=K(re);kn(qe,()=>o(g)===void 0,ze=>{fe(ze,{children:(Ne,Ze)=>{var Re=ge(),Ie=K(Re);{var te=ce=>{ho(ce,{id:"dataFile",message:"Select CSV file with dataset",get file(){return o(g)},set file(_e){q(g,_e,!0)}})},pe=ce=>{ho(ce,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return o(g)},set file(_e){q(g,_e,!0)}})};Y(Ie,ce=>{d()?ce(te):ce(pe,!1)})}N(Ne,Re)},$$slots:{default:!0}})});var Ke=P(qe,2);{var Ue=ze=>{var Ne=Oh(),Ze=K(Ne);fe(Ze,{label:"Delimiter",children:(ve,Oe)=>{_t(ve,{id:"sep",get options(){return h},get value(){return o(w)},set value(Be){q(w,Be,!0)}})},$$slots:{default:!0}});var Re=P(Ze,2);fe(Re,{label:"Row labels",children:(ve,Oe)=>{Tn(ve,{id:"hasLabels",options:["no","yes"],get value(){return o(k)},set value(Be){q(k,Be,!0)}})},$$slots:{default:!0}});var Ie=P(Re,2);{var te=ve=>{fe(ve,{get label(){return`${l()??""} labels`},children:(Oe,Be)=>{Tn(Oe,{id:"hasLabels",options:["no","yes"],get value(){return o(E)},set value(Je){q(E,Je,!0)}})},$$slots:{default:!0}})};Y(Ie,ve=>{a()||ve(te)})}var pe=P(Ie,2);fe(pe,{label:"Header",children:(ve,Oe)=>{_t(ve,{id:"header",get options(){return o(m)},get value(){return o(_)},set value(Be){q(_,Be,!0)}})},$$slots:{default:!0}});var ce=P(pe,2);{var _e=ve=>{var Oe=qh(),Be=K(Oe);fe(Be,{label:"Header name",children:($e,Nt)=>{ac($e,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return o(p)},set value(Ye){q(p,Ye,!0)}})},$$slots:{default:!0}});var Je=P(Be,2);fe(Je,{label:"Header units",children:($e,Nt)=>{ac($e,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return o(b)},set value(Ye){q(b,Ye,!0)}})},$$slots:{default:!0}}),N(ve,Oe)};Y(ce,ve=>{o(_)==="values"&&ve(_e)})}var Ee=P(ce,2);fe(Ee,{label:" ",children:(ve,Oe)=>{kt(ve,{text:"Load",onclick:U})},$$slots:{default:!0}}),N(ze,Ne)};Y(Ke,ze=>{o(g)&&!Array.isArray(o(g))&&(o(g).type==="text/csv"||o(g).type==="application/vnd.ms-excel")&&ze(Ue)})}N(ee,re)},J=ee=>{var re=ge(),qe=K(re);{var Ke=Ue=>{var ze=ge(),Ne=K(ze);ff(Ne,()=>o(y),Ze=>{fe(Ze,{children:(Re,Ie)=>{var te=Vh(),pe=K(te);Wv(pe);var ce=P(pe,2),_e=L(ce);$(()=>me(_e,t()?"Loading data and apply model...":"Loading data...")),N(Re,te)},$$slots:{default:!0}})},void 0,(Ze,Re)=>{fe(Ze,{status:"error",children:(Ie,te)=>{var pe=Dh(),ce=L(pe);$(()=>me(ce,o(Re))),N(Ie,pe)},$$slots:{default:!0}})}),N(Ue,ze)};Y(qe,Ue=>{o(y)&&Ue(Ke)})}N(ee,re)};Y(oe,ee=>{u()?ee(J,!1):ee(Q)})}var se=P(oe,2);{var ae=ee=>{Fh(ee,{get dataset(){return u()},reset:z,get title(){return f()}})};Y(se,ee=>{u()&&ee(ae)})}var de=P(se,2);{var ue=ee=>{fe(ee,{status:"error",children:(re,qe)=>{var Ke=Yh(),Ue=L(Ke);$(()=>me(Ue,o(C))),N(re,Ke)},$$slots:{default:!0}})};Y(de,ee=>{(o(A)==="error"||o(C))&&ee(ue)})}N(r,W),we()}var Uh=H('<tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (outliers)</td><td class="svelte-1fhdfcc"> </td></tr>'),Hh=H('<table class="svelte-1fhdfcc"><thead><tr class="svelte-1fhdfcc"><th class="svelte-1fhdfcc"></th><th class="svelte-1fhdfcc">f</th></tr></thead><tbody><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">DoF (Nf)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Mean (f0)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (extreme)</td><td class="svelte-1fhdfcc"> </td></tr><!></tbody></table>');function Hl(r,e){be(e,!0);let t=O(e,"isAlt",3,!1);var s=ge(),l=K(s);{var a=c=>{var f=Hh(),u=P(L(f)),v=L(u),d=P(L(v)),h=L(d),m=P(v),g=P(L(m)),p=L(g),b=P(m),w=P(L(b)),_=L(w),k=P(b);{var E=y=>{var A=Uh(),C=P(L(A)),j=L(C);$(R=>me(j,R),[()=>e.nimca.oCrit.toFixed(1)]),N(y,A)};Y(k,y=>{t()||y(E)})}$((y,A)=>{me(h,e.nimca.Nf),me(p,y),me(_,A)},[()=>e.nimca.f0.toFixed(3),()=>e.nimca.eCrit.toFixed(1)]),N(c,f)};Y(l,c=>{e.nimca&&c(a)})}N(r,s),we()}var Gh=H('<p class="title"> </p>'),Kh=H("<!> <!>",1),Jh=H("<!> <!> <!> <!> <!>",1);function Gl(r,e){be(e,!0);let t=O(e,"isAlt",3,!1),s=O(e,"fit",3,!0),l=O(e,"nimca",15);const a=[10,5,1,.1],c=[5,1,.1,.01];let f=ne(Te(l()?l().center:!0)),u=ne(Te(l()?l().scale:!1));he(()=>{s()&&e.calset&&l(or.fit(e.calset,o(f),o(u)))});var v=ge(),d=K(v);{var h=m=>{var g=Jh(),p=K(g);fe(p,{name:"target-class",label:"",children:(A,C)=>{var j=Gh(),R=L(j);$(()=>me(R,`Target class: ${l().className??""}`)),N(A,j)},$$slots:{default:!0}});var b=P(p,2);{var w=A=>{var C=Kh(),j=K(C);fe(j,{name:"center",label:"Center",children:(T,B)=>{Tn(T,{id:"center",options:["no","yes"],get value(){return o(f)},set value(M){q(f,M,!0)}})},$$slots:{default:!0}});var R=P(j,2);fe(R,{name:"scale",label:"Scale",children:(T,B)=>{Tn(T,{id:"scale",options:["no","yes"],get value(){return o(u)},set value(M){q(u,M,!0)}})},$$slots:{default:!0}}),N(A,C)};Y(b,A=>{s()&&A(w)})}var _=P(b,2);fe(_,{name:"alpha",label:"Alpha, %:",children:(A,C)=>{_t(A,{get options(){return a},get value(){return l().alpha},set value(j){l(l().alpha=j,!0)}})},$$slots:{default:!0}});var k=P(_,2);{var E=A=>{fe(A,{name:"gamma",label:"Gamma, %:",children:(C,j)=>{_t(C,{get options(){return c},get value(){return l().gamma},set value(R){l(l().gamma=R,!0)}})},$$slots:{default:!0}})};Y(k,A=>{t()||A(E)})}var y=P(k,2);fe(y,{name:"limits",label:"Limits:",children:(A,C)=>{_t(A,{options:["classic","robust"],get value(){return l().limType},set value(j){l(l().limType=j,!0)}})},$$slots:{default:!0}}),N(m,g)};Y(d,m=>{l()&&l().className&&m(h)})}N(r,v),we()}var Xh=H('<table class="svelte-1bca91p"><thead><tr class="svelte-1bca91p"><th class="svelte-1bca91p"></th><th class="svelte-1bca91p">Cal</th></tr></thead><tbody><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Objects</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Extremes</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Outliers</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Sensitivity</td><td class="svelte-1bca91p"> </td></tr></tbody></table>');function Qh(r,e){be(e,!0);let t=S(()=>e.calres?e.calres.nrows:0);var s=ge(),l=K(s);{var a=c=>{var f=Xh(),u=P(L(f)),v=L(u),d=P(L(v)),h=L(d),m=P(v),g=P(L(m)),p=L(g),b=P(m),w=P(L(b)),_=L(w),k=P(b),E=P(L(k)),y=L(E);$(A=>{me(h,o(t)),me(p,e.calres.outcomes.rolsNum.extreme),me(_,e.calres.outcomes.rolsNum.outlier),me(y,A)},[()=>e.calres.outcomes.stat.sensitivity.toFixed(3)]),N(c,f)};Y(l,c=>{e.calres&&c(a)})}N(r,s),we()}var Zh=H('<div class="msg-select"> </div>'),$h=H('<div class="msg-select"> </div>'),e0=H('<div class="msg-select"> </div>'),t0=H('<div class="msg-select"> </div>'),r0=H('<div class="selected-buttons svelte-188sk7n"><!></div>'),n0=H('<div class="selected-buttons svelte-188sk7n"><!></div>'),s0=H("<!> <!> <!>",1),o0=()=>switchPlot(i),l0=(r,e,t)=>q(e,o(t),!0),a0=H("<button> </button>"),i0=H('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Kl(r,e){be(e,!0);let t=O(e,"selobjText",3,"Click to select an object..."),s=O(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=O(e,"clearText",3,"Click anywhere to remove selection..."),a=O(e,"params",15),c=Te({objects:-1,variables:[]}),f=ne(Te(Object.keys(e.plots)[0]));function u(T,B){c.objects=B?B[T]:T}function v(T){c.objects=-1}function d(T){c.variables=T}function h(T){c.variables=[]}let m={objects:{select:u,unselect:v},variables:{select:d,unselect:h},stats:{}},g=S(()=>o(f)?e.plots[o(f)]:null),p=S(()=>o(g)?o(g).component:null);var b=i0(),w=L(b),_=L(w),k=L(_);Es(k,()=>o(p),(T,B)=>{B(T,{get params(){return a()[o(f)]},get callbacks(){return m[o(g).scope]},get selected(){return c[o(g).scope]},get props(){return e.props}})});var E=P(_,2),y=L(E);{var A=T=>{var B=ge(),M=K(B);{var I=D=>{var z=Zh(),W=L(z);$(()=>me(W,t())),N(D,z)},U=D=>{var z=$h(),W=L(z);$(()=>me(W,l())),N(D,z)};Y(M,D=>{c[o(g).scope]<0?D(I):D(U,!1)})}N(T,B)};Y(y,T=>{o(g).scope==="objects"&&a()[o(f)].plotType!=="l"&&t().length>0&&T(A)})}var C=P(y,2);{var j=T=>{var B=ge(),M=K(B);{var I=D=>{var z=e0(),W=L(z);$(()=>me(W,s())),N(D,z)},U=D=>{var z=t0(),W=L(z);$(()=>me(W,l())),N(D,z)};Y(M,D=>{c[o(g).scope].length===0?D(I):D(U,!1)})}N(T,B)};Y(C,T=>{o(g).scope==="variables"&&a()[o(f)].plotType!=="l"&&s().length>0&&T(j)})}var R=P(w,2);tt(R,21,()=>Object.keys(e.plots),ot,(T,B)=>{var M=ge(),I=K(M);{var U=z=>{var W=s0(),oe=K(W);Kv(oe,{get title(){return o(g).label},labelWidth:12,get options(){return e.controls[o(f)]},get value(){return a()[o(f)]},set value(de){a(a()[o(f)]=de,!0)}});var Q=P(oe,2);{var J=de=>{var ue=r0(),ee=L(ue);jr(ee,()=>o(g).buttons,()=>c.objects),N(de,ue)};Y(Q,de=>{o(g).scope==="objects"&&o(g).buttons&&c.objects>=0&&de(J)})}var se=P(Q,2);{var ae=de=>{var ue=n0(),ee=L(ue);jr(ee,()=>o(g).buttons,()=>c.variables),N(de,ue)};Y(se,de=>{o(g).scope==="variables"&&o(g).buttons&&c.variables.length>0&&de(ae)})}N(z,W)},D=z=>{var W=a0();W.__keydown=[o0],W.__click=[l0,f,B];var oe=L(W);$(()=>{wt(W,1,`plot-selector plot-selector-${o(B)??""}`,"svelte-188sk7n"),me(oe,e.plots[o(B)].label)}),N(z,W)};Y(I,z=>{o(g)&&o(f)===o(B)?z(U):z(D,!1)})}N(T,M)}),N(r,b),we()}it(["keydown","click"]);function Ic(r,e,t){!e.callbacks||!e.callbacks.select||Ln(r,r.target.tagName,s=>e.callbacks.select(s,t()))}function c0(r,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var u0=xe("<text> </text>"),f0=xe('<g class="series series-textlabels"></g>'),v0=xe('<g class="series series-line"><polyline class="line"></polyline></g>'),d0=xe("<rect></rect>"),h0=xe('<g class="series series-bar"></g>'),m0=xe("<text> </text>"),g0=xe('<g class="series series-points series-points1"></g>'),p0=xe('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),b0=xe('<g class="series series-points series-points1"><text> </text></g>'),w0=xe('<g class="series series-bar"><rect></rect></g>'),_0=xe('<g class="series series-text"><text> </text></g>'),y0=xe("<!><!><!>",1),x0=xe("<!><!><!><!><!>",1);function Fc(r,e){be(e,!0);let t=O(e,"shortenLabels",3,!0),s=O(e,"lineWidth",3,1),l=O(e,"nBars",3,1),a=O(e,"barNum",3,1),c=O(e,"markerSize",3,null),f=O(e,"markerWidth",3,2),u=O(e,"marker",3,1),v=O(e,"colors",3,void 0),d=O(e,"filled",3,void 0),h=O(e,"mainColor",19,()=>zn.cal),m=O(e,"faceColor",3,null),g=O(e,"lineColor",19,h),p=O(e,"selected",19,()=>-1),b=O(e,"maskSelected",3,!0),w=O(e,"xRange",15),_=O(e,"yRange",15),k=O(e,"ind",3,null);const E=Vt("axes"),y=S(()=>qt(e.xValues,"PlotSeries")),A=S(()=>o(y)?qt(e.yValues,"PlotSeries",o(y).length):null);he(()=>{if(k()){const Ie=k().map(te=>te+1);w(o(y)?Hr(o(y).subset(Ie)):null),_(o(A)?Hr(o(A).subset(Ie)):null)}else w(o(y)?Hr(o(y)):null),_(o(A)?Hr(o(A)):null)});const C=S(()=>m()===null?e.plotType==="p"?"transparent":"white":m()),j=[1,.8,.8,.8,.8,.8,.8,.8],R=[.85,.65,.65,.65,.65,.65,.65,.65],T=S(()=>c()?c():e.plotType==="p"?j[u()-1]:R[u()-1]),B=S(()=>ts[u()-1]),M=S(()=>Rl[E.scales().plot]),I=S(()=>gt([0],E.tY())[0]),U=S(()=>Il([.8],E.tX())[0]),D=S(()=>e.plotType==="h"?o(U)/l():0),z=S(()=>e.plotType==="h"?o(U)/2-(a()-1)*o(D):0),W=S(()=>o(M));let oe=S(()=>e.plotType==="l"||e.plotType==="b"?Ol(o(y),o(A),E.tX(),E.tY()):null),Q=S(()=>o(y)?gt(o(y),E.tX()):null),J=S(()=>o(A)?gt(o(A),E.tY()):null),se=S(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(Ie=>Ie.slice(0,zc)):e.labels:null);const ae=S(()=>k()?k():Rr(0,o(Q).length-1));let de=S(()=>v()&&v().length===o(y).length?v():Array(o(y).length).fill(h())),ue=S(()=>d()&&d().length===o(y).length?d().map(Ie=>Ie?"ff":"30"):Array(o(y).length).fill("30")),ee=S(()=>v()&&v().length===o(y).length?v().map((Ie,te)=>Ie+o(ue)[te]):Array(o(y).length).fill(m()));const re=S(()=>`font-size:${o(T)}em;fill:${o(C)};cursor:default;text-anchor:middle;stroke-width:${f()}px;user-select:none;`),qe=`font-size:0.85em;fill:${Pc};cursor:default;text-anchor:middle;stroke:${Pc};stroke-width:0.1px;user-select:none;`,Ke=S(()=>`font-size:${o(T)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),Ue=`fill:transparent;stroke-width:${s()}px;`,ze=`stroke-width:${s()}px;stroke:${g()}`;he(()=>{p()&&k()&&k().indexOf(p())<0&&e.callbacks.unselect()});var Ne=ge(),Ze=K(Ne);{var Re=Ie=>{var te=x0(),pe=K(te);{var ce=Ye=>{var V=f0();tt(V,21,()=>o(ae),ot,(G,X)=>{var le=u0(),Ae=L(le);$(()=>{F(le,"opacity",o(X)===p()),F(le,"x",o(Q)[o(X)]-o(z)+o(D)/2),F(le,"y",o(J)[o(X)]),F(le,"dy",o(A).v[o(X)]<0?o(W):-o(W)),me(Ae,o(se)[o(X)])}),N(G,le)}),$(()=>mt(V,qe+(p()>=0?"opacity:0.2;":""))),N(Ye,V)};Y(pe,Ye=>{e.showLabels&&o(se)&&Ye(ce)})}var _e=P(pe);{var Ee=Ye=>{var V=v0(),G=L(V);$(()=>{mt(V,Ue),F(G,"points",o(oe)),F(G,"stroke",h())}),N(Ye,V)};Y(_e,Ye=>{(e.plotType==="l"||e.plotType==="b")&&Ye(Ee)})}var ve=P(_e);{var Oe=Ye=>{var V=h0();V.__click=[Ic,e,k],tt(V,21,()=>o(ae),ot,(G,X)=>{var le=d0();$(()=>{F(le,"x",o(Q)[o(X)]-o(z)),F(le,"y",o(A).v[o(X)]<0?o(I):o(J)[o(X)]),F(le,"fill",o(de)[o(X)]),F(le,"width",o(D)),F(le,"height",o(A).v[o(X)]<0?o(J)[o(X)]-o(I):o(I)-o(J)[o(X)])}),N(G,le)}),$(()=>mt(V,ze+(p()>=0?"opacity:0.2;":""))),N(Ye,V)};Y(ve,Ye=>{e.plotType==="h"&&Ye(Oe)})}var Be=P(ve);{var Je=Ye=>{var V=g0();V.__click=[Ic,e,k],tt(V,21,()=>o(ae),ot,(G,X)=>{var le=m0(),Ae=L(le);$(()=>{F(le,"x",o(Q)[o(X)]),F(le,"y",o(J)[o(X)]),F(le,"fill",o(ee)[o(X)]),F(le,"stroke",o(de)[o(X)]),me(Ae,o(B))}),N(G,le)}),$(()=>mt(V,o(re)+(p()>=0?"opacity:0.2;":""))),N(Ye,V)};Y(Be,Ye=>{(e.plotType==="p"||e.plotType==="b")&&Ye(Je)})}var $e=P(Be);{var Nt=Ye=>{var V=y0(),G=K(V);{var X=ke=>{var Ce=p0();F(Ce,"x",0),F(Ce,"y",0),Ce.__click=[c0,e],N(ke,Ce)};Y(G,ke=>{b()&&ke(X)})}var le=P(G);{var Ae=ke=>{var Ce=b0(),Me=L(Ce),dt=L(Me);$(()=>{mt(Ce,o(Ke)),F(Me,"x",o(Q)[p()]),F(Me,"y",o(J)[p()]),F(Me,"stroke",o(de)[p()]),F(Me,"fill",o(ee)[p()]),me(dt,o(B))}),N(ke,Ce)},rt=ke=>{var Ce=w0(),Me=L(Ce);$(()=>{mt(Ce,ze),F(Me,"stroke",o(de)[p()]),F(Me,"fill",o(de)[p()]),F(Me,"x",o(Q)[p()]-o(z)),F(Me,"y",o(A).v[p()]<0?o(I):o(J)[p()]),F(Me,"width",o(D)),F(Me,"height",o(A).v[p()]<0?o(J)[p()]-o(I):o(I)-o(J)[p()])}),N(ke,Ce)};Y(le,ke=>{e.plotType!=="h"?ke(Ae):ke(rt,!1)})}var ie=P(le);{var Pe=ke=>{var Ce=_0(),Me=L(Ce),dt=L(Me);$(()=>{mt(Ce,qe),F(Me,"stroke",Lc),F(Me,"fill",Lc),F(Me,"x",o(Q)[p()]),F(Me,"y",o(J)[p()]),F(Me,"dy",o(A).v[p()]<0?o(W):-o(W)),me(dt,o(se)[p()])}),N(ke,Ce)};Y(ie,ke=>{e.showLabels&&o(se)&&o(se).length>0&&ke(Pe)})}N(Ye,V)};Y($e,Ye=>{p()>=0&&Ye(Nt)})}N(Ie,te)};Y(Ze,Ie=>{o(Q)&&o(J)&&Ie(Re)})}N(r,Ne),we()}it(["click"]);var k0=H("<!> <!> <!> <!>",1);function Jl(r,e){let t=O(e,"whole",3,!1),s=An(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Cc(r,tr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return sh},get pngWidth(){return lh},get pngHeight(){return ah},get pngRes(){return ih}},()=>s,{children:(l,a)=>{var c=k0(),f=K(c);jr(f,()=>e.children);var u=P(f,2);Sc(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var v=P(u,2);Nc(v,{showGrid:!0,get label(){return e.yLabel}});var d=P(v,2);Mc(d,{}),N(l,c)},$$slots:{default:!0}}))}var E0=H("<!> <!> <!> <!>",1);function Xl(r,e){be(e,!0);const t=S(()=>e.props&&e.props.data?e.props.data:null),s=S(()=>e.props&&e.props.res?e.props.res:null),l=S(()=>o(s)&&e.params.resID?o(s)[e.params.resID]:null),a=S(()=>o(s)&&e.params.resID?o(t)[e.params.resID]:null),c=S(()=>e.props&&e.props.model?e.props.model:null),f="#909090";let u=S(()=>o(c)&&o(c).oCrit?o(c).oCrit:0),v=S(()=>o(c)&&o(c).eCrit?o(c).eCrit:0),d=S(()=>o(l).objindices.map(D=>D+1)),h=S(()=>dh(o(l).outcomes.f,1,1,e.params.transType)),m=S(()=>o(l).objlabels.map(D=>D.slice(0,zc))),g="Full dustance",p="Objects",b=S(()=>e.params.transType==="log"?"Full distance, log(1 + f)":"Full distance, f"),w=ne(void 0),_=ne(void 0),k=S(()=>vh(o(a),o(l),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),E=S(()=>e.params.colorByObj?e.params.colorByObj.ind:null),y=S(()=>o(E)?yr(o(E))+1:yr(o(l).objindices)+1),A=S(()=>o(E)?Pr(o(E)):Pr(o(l).objindices)),C=S(()=>(o(y)-o(A))*.025),j=S(()=>[o(A)-o(C),o(y)+o(C)]),R=S(()=>({x:o(j),y:e.params.transType==="log"?[Math.log(1+o(u)),Math.log(1+o(u))]:[o(u),o(u)]})),T=S(()=>({x:o(j),y:e.params.transType==="log"?[Math.log(1+o(v)),Math.log(1+o(v))]:[o(v),o(v)]})),B=S(()=>{if(!o(R)||!o(_))return[0,1];const D=Math.max(o(_)[1],o(R).y[0]);return[-.02*(D-o(_)[0]),(1.05+.1*(e.params.colorBy!=="none")+.05*e.params.showLabels)*D]});var M=ge(),I=K(M);{var U=D=>{Jl(D,{title:g,get limX(){return o(j)},get limY(){return o(B)},xLabel:p,get yLabel(){return o(b)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(z,W)=>{var oe=E0(),Q=K(oe);{var J=re=>{en(re,{get xValues(){return o(T).x},get yValues(){return o(T).y},lineColor:f,lineType:2})};Y(Q,re=>{o(T)&&re(J)})}var se=P(Q,2);{var ae=re=>{en(re,{get xValues(){return o(R).x},get yValues(){return o(R).y},lineColor:f,lineType:3})};Y(se,re=>{o(R)&&(e.params.resID!=="test"||e.params.subset&&e.params.subset==="members")&&e.params.resID&&e.params.resID!=="new"&&re(ae)})}var de=P(se,2);Fc(de,{get labels(){return o(m)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return o(d)},get yValues(){return o(h).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Yl[e.params.resID]},get colors(){return o(k).colors},get filled(){return o(k).filled},get ind(){return o(E)},get xRange(){return o(w)},set xRange(re){q(w,re,!0)},get yRange(){return o(_)},set yRange(re){q(_,re,!0)}});var ue=P(de,2);{var ee=re=>{{let qe=S(()=>o(k).breaks!==null);Tc(re,{get show(){return o(qe)},get colmap(){return o(k).map},get breaks(){return o(k).breaks},get labels(){return o(k).labels}})}};Y(ue,re=>{o(k)&&o(k).showBar&&re(ee)})}N(z,oe)},$$slots:{default:!0}})};Y(I,D=>{o(d)&&o(h)&&D(U)})}N(r,M),we()}var A0=H("<!> <!> <!>",1),C0=H("<!> <!> <!>",1);function S0(r,e){be(e,!0);const t="#e0e0e0",s="Number of extremes (expected)",l="Number of extremes (observed)",a="plot-extremes";function c(T){const B=Ge.zeros(T+1),M=Ge.zeros(T+1),I=Ge.zeros(T+1),U=Ge.zeros(T+1);for(let D=1;D<T;D++){const z=D/T,W=2*Math.sqrt(D*(1-z));B.v[D]=D,I.v[D]=D,M.v[D]=D-W,U.v[D]=D+W}return B.v[T]=T,I.v[T]=T,M.v[T]=T,U.v[T]=T,{xStart:B,xEnd:I,yStart:M,yEnd:U}}function f(T,B,M){const I=B.f,U=T.nMembers,D=Ge.zeros(U);for(let z=1;z<=U;z++){const W=z/U,oe=Sn(1-W,M);let Q=0;for(let J=0;J<U;J++)I[T.ind.members[J]]>oe&&(Q+=1);D.v[z-1]=Q}return D}let u=S(()=>e.props&&e.props.res?e.props.res:null),v=S(()=>e.props&&e.props.model?e.props.model:null),d=S(()=>o(v)&&o(v).Nf?o(v).Nf:0),h=S(()=>Object.keys(o(u))),m=S(()=>e.params.resID!=="both"?[e.params.resID]:o(h)),g=S(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),p=S(()=>o(m)?o(m).map(T=>({id:T,label:T,point:{marker:1,lineColor:zn[T],faceColor:Wl[T],marker:Yl[T],markerSize:.85,lineWidth:1.5}})):null),b=S(()=>o(u)&&o(m)?o(m).reduce((T,B)=>(T[B]=Ge.seq(1,o(u)[B].nMembers),T),{}):null),w=S(()=>o(u)&&o(h)?o(h).reduce((T,B)=>(T[B]=f(o(u)[B],o(u)[B].outcomes,o(d)),T),{}):null),_=S(()=>o(m)?o(m).reduce((T,B)=>Math.max(T,o(b)[B].length),0):1),k=S(()=>o(_)>1?c(o(_)):null),E=S(()=>o(b)?[-1,o(_)+2]:[0,1]),y=S(()=>o(b)?[-1,o(_)+2]:[0,1]),A="Extremes";var C=ge(),j=K(C);{var R=T=>{Jl(T,{title:A,xLabel:s,yLabel:l,get limX(){return o(E)},get limY(){return o(y)},fileName:a,whole:!0,children:(B,M)=>{var I=C0(),U=K(I);{var D=Q=>{var J=A0(),se=K(J);V1(se,tr(()=>o(k),{lineColor:t}));var ae=P(se,2);en(ae,{get xValues(){return o(k).xStart},get yValues(){return o(k).yStart},lineColor:t});var de=P(ae,2);en(de,{get xValues(){return o(k).xEnd},get yValues(){return o(k).yEnd},lineColor:t}),N(Q,J)};Y(U,Q=>{o(k)&&Q(D)})}var z=P(U,2);tt(z,17,()=>o(m),ot,(Q,J)=>{Fc(Q,{get xValues(){return o(b)[o(J)]},get yValues(){return o(w)[o(J)]},plotType:"p",showLabels:!1,get faceColor(){return Wl[o(J)]},get mainColor(){return zn[o(J)]},get marker(){return Yl[o(J)]},lineWidth:1.5})});var W=P(z,2);{var oe=Q=>{nh(Q,{get items(){return o(p)},get position(){return o(g)}})};Y(W,Q=>{o(p)&&o(p).length>0&&Q(oe)})}N(B,I)},$$slots:{default:!0}})};Y(j,T=>{o(u)&&T(R)})}N(r,C),we()}function N0(r,e){if(r.target.tagName!=="rect"){q(e,-1);return}const t=Array.from(r.target.parentNode.children).indexOf(r.target);if(t<0){q(e,-1);return}o(e)!==t&&q(e,t,!0)}var M0=H("<!> <!> <!>",1),j0=H("<!> <!> <!> <!> <!>",1),T0=H('<div class="plot-container svelte-1838sos" role="tooltip"><!></div>');function Ql(r,e){be(e,!0);let t=O(e,"outliers",19,()=>[]);const s=S(()=>e.props&&e.props.data?e.props.data:null),l=S(()=>o(s)&&e.params.resID?o(s)[e.params.resID]:null);let a=ne(-1);const c=S(()=>{const y=ut(o(l).varvalues),A=y.length,C=(y.v[1]-y.v[0])/2,j=(y.v[A-1]-y.v[A-2])/2,R=[y.v[0],y.v[A-1]],T=[R[0]-C,R[1]+j],B=(R[1]-R[0])/A;return{values:y,lim:T,width:B,hwidth:B*.5}}),f=S(()=>o(c)?o(c).values.apply(y=>y-o(c).hwidth):null),u=S(()=>o(l)&&e.props&&e.props.model?Wi(o(l).values,e.props.model.mX,e.props.model.sX):null),v=S(()=>o(u)?o(u).t():null);let d=S(()=>o(v)?o(v).getcolumn(e.selected>=0?e.selected+1:1):null),h=S(()=>{const y={all:o(v),sel:o(d),label:"Preprocessed data, X"},A=Hr(y.all.v),C=A[1]-A[0],j=[A[0]-C/50,A[1]+C/12],R=Ge.fill(A[1],y.sel.length);return y.lim=j,y.top=R,y.height=C,y});const m=S(()=>o(c)&&o(a)>=0?o(c).values.v[o(a)]:null),g=S(()=>o(h)&&o(a)>=0?o(h).sel.v[o(a)]:null),p=S(()=>o(l)&&o(a)>=0?o(l).varlabels[o(a)]:null),b=S(()=>o(l)&&e.selected>=0?`Object ${o(l).objlabels[e.selected].replace("_","-")}`:null),w=S(()=>o(l)?o(l).varvaluesName+(o(l).varvaluesUnits?", "+o(l).varvaluesUnits:""):null);var _=ge(),k=K(_);{var E=y=>{var A=T0();A.__click=[N0,a];var C=L(A);Jl(C,{get title(){return o(b)},get yLabel(){return o(h).label},get xLabel(){return o(w)},get limY(){return o(h).lim},get limX(){return o(c).lim},fileName:"plot-contributions",children:(j,R)=>{var T=j0(),B=K(T);{let Q=S(()=>e.selected>=0?"#e0e0e0":"#a0a0a0");jc(B,{get xValues(){return o(c).values},get yValues(){return o(h).all},get lineColor(){return o(Q)}})}var M=P(B,2);{var I=Q=>{var J=ge(),se=K(J);tt(se,17,t,ot,(ae,de)=>{{let ue=S(()=>o(h).all.getcolumn(o(de)+1));en(ae,{get xValues(){return o(c).values},get yValues(){return o(ue)},lineColor:"#ffdd88"})}}),N(Q,J)};Y(M,Q=>{t().length>0&&Q(I)})}var U=P(M,2);{var D=Q=>{en(Q,{get xValues(){return o(c).values},get yValues(){return o(h).sel},lineColor:"crimson"})};Y(U,Q=>{e.selected>=0&&Q(D)})}var z=P(U,2);po(z,{get left(){return o(f)},get top(){return o(h).top},get height(){return o(h).height},get width(){return o(c).width},faceColor:"transparent",borderColor:"transparent"});var W=P(z,2);{var oe=Q=>{var J=M0(),se=K(J);{let ue=S(()=>[o(m)]),ee=S(()=>[o(h).top.v[0]]),re=S(()=>[o(p)]);bo(se,{get xValues(){return o(ue)},get yValues(){return o(ee)},get labels(){return o(re)},pos:3,textSize:.85})}var ae=P(se,2);{let ue=S(()=>[o(m)]),ee=S(()=>[o(g)]);Q1(ae,{get xValues(){return o(ue)},get yValues(){return o(ee)},faceColor:"crimson",lineColor:"crimson"})}var de=P(ae,2);{let ue=S(()=>[o(f).v[o(a)]]),ee=S(()=>[o(h).top.v[o(a)]]);po(de,{get left(){return o(ue)},get top(){return o(ee)},get height(){return o(h).height},get width(){return o(c).width},faceColor:"#ff000015"})}N(Q,J)};Y(W,Q=>{o(a)>=0&&Q(oe)})}N(j,T)},$$slots:{default:!0}}),N(y,A)};Y(k,y=>{o(c)&&o(h)&&y(E)})}N(r,_),we()}it(["click"]);function Zl(r){const e=Object.keys(r),t=r[e[0]],s=t.nMembers>0&&t.nStrangers>0,l=e[0]==="new",a=t.nMembers>0?"members":t.nStrangers>0?"strangers":"all",c={resID:{el:_t,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},subset:{el:_t,hidden:!s||l,default:a,label:"Show",props:{options:["members","strangers","all"]}},transType:{el:_t,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:Tn,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}};return t.nStrangers>0&&t.nStrangers==0&&t.classNames&&t.classNames.length>1&&(c.colorBy={el:_t,hidden:!1,default:"roles",label:"Color by",props:{options:["roles","classes"]}}),c}function wo(r){return{resID:{el:_t,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function P0(r,e){be(e,!0);const t=(d,h=At)=>{fe(d,{label:"Selected",children:(m,g)=>{kt(m,{onclick:()=>e.markOutlier(h()),text:"remove"})},$$slots:{default:!0}})},s={cal:e.calsetp},l=S(()=>({cal:e.calres})),a={regular:tn.regular,extreme:tn.extreme,outlier:tn.outlier};he(()=>{if(e.nimca.limType){const d=o(l)[o(u).acceptance.resID].outcomes;o(u).acceptance.colorByObj={classColmap:a,labels:[`regular: ${d.rolsNum.regular}`,`extreme: ${d.rolsNum.extreme}`,`outliers: ${d.rolsNum.outlier}`],values:d.rols}}});const c=S(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Xl,buttons:t},extremes:{label:"Extremes",scope:"stats",component:S0},dataset:{label:"Datasets",scope:"objects",component:Ql,buttons:t}})),f=Te({acceptance:Zl(o(l)),extremes:wo(["cal"]),dataset:wo(["cal"])});let u=ne(Te({acceptance:jn(f.acceptance),extremes:jn(f.extremes),dataset:jn(f.extremes)}));const v=S(()=>({res:o(l),model:e.nimca,data:s}));Kl(r,{get plots(){return o(c)},get controls(){return f},get props(){return o(v)},get params(){return o(u)},set params(d){q(u,d,!0)}}),we()}var L0=H('<div class="outliers-pane svelte-1mp4dba"><!></div>'),z0=H('<div class="buttons"><!> <!></div>'),R0=H('<div class="model-stats svelte-1mp4dba"><!></div> <div class="result-stats svelte-1mp4dba"><!></div>',1),I0=H(`<p class="svelte-1mp4dba">In this tab you can train a Naïve DD-SIMCA (NIMCA) model. After creating the model you can save it to a file and use it in other tabs. For example, validate it using test set (tab <strong>Test</strong>) or apply it to a dataset with unknown class membership (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1mp4dba">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1mp4dba">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),F0=H(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to apply proper preprocessing methods. You can create a chain of the methods directly in the app
               (button <strong>Create</strong>), load previously created preprocessing model (<strong>Load</strong>), or just skip this step. In this case the data will be only mean centered for computing the distances.</p>`,1),q0=H('<div class="help-text svelte-1mp4dba"><!></div>'),O0=H('<div class="app-container svelte-1mp4dba"><div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <div class="nimca-settings svelte-1mp4dba"><!> <!></div> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function B0(r,e){be(e,!0);const t=S(()=>e.session.train);he(()=>{o(t).nimca&&!(o(t).nimca instanceof or)&&(o(t).nimca=or.fromJSON(o(t).nimca))});function s(){o(t).nimca=null,o(t).calres=null,o(t).calsetp=null,o(t).prepmodel=null}function l(B){if(B<0||B>o(t).calres.nrows-1)return;const M=o(t).calseto.objindices[B];M>=0&&!o(t).outliers.includes(M)&&(o(t).nimca=null,o(t).outliers.push(M),o(t).calseto=Zn(o(t).calset,o(t).outliers),s())}function a(){o(t).nimca=null,o(t).outliers=[],o(t).calseto=o(t).calset,s()}function c(){o(t).nimca=null,o(t).outliers.pop(),o(t).calseto=Zn(o(t).calset,o(t).outliers),s()}$s(()=>{o(t).calset===null?(o(t).outliers=[],o(t).calsetp=null,o(t).calseto=null,o(t).className=null,o(t).prepmodel=null,o(t).prepobj=[],o(t).prepType=null,o(t).nimca=null):o(t).calset&&!o(t).className&&(o(t).className=o(t).calset.classNames[0],o(t).calseto=o(t).calset)}),he(()=>{o(t).calset===null&&(o(t).nimca=null,o(t).calseto=null,o(t).calsetp=null)}),he(()=>{o(t).calsetp===null&&(o(t).nimca=null,o(t).calres=null)}),he(()=>{o(t).calsetp&&o(t).nimca&&(o(t).calres=o(t).nimca.predict(o(t).calsetp))}),he(()=>{const B=fr(()=>JSON.stringify(e.session,Ts));o(t).nimca?e.backupSession(B,o(t).calset,o(t).nimca):e.backupSession(B,o(t).calset)});var f=O0(),u=L(f),v=L(u),d=L(v);Ul(d,{className:"Class",classMandatory:!0,classUnique:!0,get dataset(){return o(t).calset},set dataset(B){o(t).calset=B}});var h=P(v,2);{var m=B=>{var M=L0(),I=L(M);jl(I,{get outliers(){return o(t).outliers},get dataset(){return o(t).calset},resetOutliers:a,undoOutliers:c}),N(B,M)};Y(h,B=>{o(t).outliers&&o(t).outliers.length>0&&B(m)})}var g=P(h,2);{var p=B=>{Ph(B,{get WASM(){return e.WASM},get rawdata(){return o(t).calseto},get prepType(){return o(t).prepType},set prepType(M){o(t).prepType=M},get prepobj(){return o(t).prepobj},set prepobj(M){o(t).prepobj=M},get prepdata(){return o(t).calsetp},set prepdata(M){o(t).calsetp=M},get prepmeta(){return o(t).prepmeta},set prepmeta(M){o(t).prepmeta=M},get prepmodel(){return o(t).prepmodel},set prepmodel(M){o(t).prepmodel=M}})};Y(g,B=>{o(t).calseto&&B(p)})}var b=P(g,2),w=L(b);{var _=B=>{Gl(B,{get className(){return o(t).className},get calset(){return o(t).calsetp},get nimca(){return o(t).nimca},set nimca(M){o(t).nimca=M}})};Y(w,B=>{o(t).calsetp&&B(_)})}var k=P(w,2);{var E=B=>{fe(B,{label:"Download",children:(M,I)=>{var U=z0(),D=L(U);kt(D,{onclick:()=>Al(o(t).nimca,o(t).calres,o(t).calset,"train",o(t).outliers),text:"Res (cal)"});var z=P(D,2);kt(z,{onclick:()=>Cl(o(t).nimca,o(t).prepmodel),text:"Model"}),N(M,U)},$$slots:{default:!0}})};Y(k,B=>{o(t).nimca&&o(t).calres&&B(E)})}var y=P(b,2);{var A=B=>{var M=R0(),I=K(M),U=L(I);Hl(U,{get nimca(){return o(t).nimca}});var D=P(I,2),z=L(D);Qh(z,{get calres(){return o(t).calres}}),N(B,M)};Y(y,B=>{o(t).nimca&&o(t).calres&&B(A)})}var C=P(u,2),j=L(C);{var R=B=>{var M=q0(),I=L(M);{var U=z=>{var W=I0();N(z,W)},D=z=>{var W=ge(),oe=K(W);{var Q=J=>{var se=F0();N(J,se)};Y(oe,J=>{o(t).calsetp||J(Q)})}N(z,W)};Y(I,z=>{o(t).calset?z(D,!1):z(U)})}N(B,M)},T=B=>{var M=ge(),I=K(M);{var U=D=>{var z=ge(),W=K(z);kn(W,()=>o(t).calres,oe=>{P0(oe,tr({markOutlier:l},()=>o(t)))}),N(D,z)};Y(I,D=>{o(t).nimca&&o(t).calres&&D(U)},!0)}N(B,M)};Y(j,B=>{!o(t).nimca||!o(t).calres?B(R):B(T,!1)})}N(r,f),we()}var D0=H("<!> <!>",1),V0=H('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),Y0=H('<p class="model-info svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model:</span> <!></p> <!>',1),W0=H("<p><!></p>"),U0=H("<!> <!>",1);function qc(r,e){be(e,!0);let t=O(e,"prep",15),s=O(e,"nimca",15),l=ne(""),a=ne("neutral"),c=ne("");function f(_){try{const k=JSON.parse(_,Nl);if(!Object.keys(k).includes("nimca")||!Object.keys(k).includes("prep")||k.nimca.class[0]!=="nimcamodel")throw new Error("The JSON file you selected does not contain NIMCA mdel.");k.nimca.fileName=o(d),t(k.prep),s(or.fromJSON(k.nimca)),q(a,"success"),q(c,"")}catch(k){s(null),t(null),q(a,"error"),q(c,k,!0)}}function u(_){const k=new FileReader;k.onload=()=>{f(k.result)},k.readAsText(o(l))}function v(){q(l,""),s(null),t(null),q(a,"neutral"),q(c,"")}he(()=>{o(l)===null?(s(null),t(null),q(a,"neutral"),q(c,"")):(q(a,"neutral"),q(c,""))});let d=S(()=>o(l)?o(l).name.replace(/\.[^/.]+$/,""):"");var h=U0(),m=K(h);{var g=_=>{var k=D0(),E=K(k);kn(E,()=>o(l),C=>{fe(C,{children:(j,R)=>{ho(j,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return o(l)},set file(T){q(l,T,!0)}})},$$slots:{default:!0}})});var y=P(E,2);{var A=C=>{fe(C,{label:" ",children:(j,R)=>{kt(j,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(y,C=>{o(l)&&C(A)})}N(_,k)},p=_=>{fe(_,{name:"info",children:(k,E)=>{var y=Y0(),A=K(y),C=P(L(A),2),j=L(C),R=P(C,4),T=P(R);{var B=I=>{var U=V0(),D=P(K(U),3);Ll(D,{get prepmodel(){return t()}}),N(I,U)};Y(T,I=>{t()&&I(B)})}var M=P(A,2);Zr(M,{onclick:v}),$(()=>{F(C,"title",s().fileName),me(j,s().fileName),me(R,` ${s().ncols??""} predictors${s().center?", centered":""}${s().scale?", scaled":""} `)}),N(k,y)},$$slots:{default:!0}})};Y(m,_=>{s()?_(p,!1):_(g)})}var b=P(m,2);{var w=_=>{fe(_,{status:"error",children:(k,E)=>{var y=W0(),A=L(y);Ct(A,()=>o(c)),N(k,y)},$$slots:{default:!0}})};Y(b,_=>{(o(a)==="error"||o(c))&&_(w)})}N(r,h),we()}var H0=H('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Out</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Sensitivity</td><td class="svelte-k5uafz"> </td></tr>',1),G0=H('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">In</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Specificity</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Selectivity</td><td class="svelte-k5uafz"> </td></tr>',1),K0=H('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Efficiency</td><td class="svelte-k5uafz"> </td></tr>'),J0=H('<table class="svelte-k5uafz"><thead><tr class="svelte-k5uafz"><th class="svelte-k5uafz"></th><th class="svelte-k5uafz">Test</th></tr></thead><tbody><tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Members</td><td class="svelte-k5uafz"> </td></tr><!><tr class="section svelte-k5uafz"><td class="label svelte-k5uafz">Strangers</td><td class="svelte-k5uafz"> </td></tr><!><!></tbody></table>');function X0(r,e){be(e,!0);var t=ge(),s=K(t);{var l=a=>{var c=J0(),f=P(L(c)),u=L(f),v=P(L(u)),d=L(v),h=P(u);{var m=y=>{var A=H0(),C=K(A),j=P(L(C)),R=L(j),T=P(C,2),B=P(L(T)),M=L(B);$(I=>{me(R,e.res.outcomes.rolsNum.outlier+e.res.outcomes.rolsNum.extreme),me(M,I)},[()=>e.res.outcomes.stat.sensitivity.toFixed(3)]),N(y,A)};Y(h,y=>{e.res.nMembers>0&&y(m)})}var g=P(h),p=P(L(g)),b=L(p),w=P(g);{var _=y=>{var A=G0(),C=K(A),j=P(L(C)),R=L(j),T=P(C,2),B=P(L(T)),M=L(B),I=P(T,2),U=P(L(I)),D=L(U);$((z,W)=>{me(R,e.res.outcomes.decsNum.in-e.res.outcomes.rolsNum.regular),me(M,z),me(D,W)},[()=>e.res.outcomes.stat.specificity.toFixed(3),()=>e.res.outcomes.stat.selectivity.toFixed(3)]),N(y,A)};Y(w,y=>{e.res.nStrangers>0&&y(_)})}var k=P(w);{var E=y=>{var A=K0(),C=P(L(A)),j=L(C);$(R=>me(j,R),[()=>e.res.outcomes.stat.efficiency.toFixed(3)]),N(y,A)};Y(k,y=>{e.res.nStrangers>0&&e.res.nMembers>0&&y(E)})}$(()=>{me(d,e.res.nMembers),me(b,e.res.nStrangers)}),N(a,c)};Y(s,a=>{e.res&&a(l)})}N(r,t),we()}function Q0(r,e){be(e,!0);const t=(m,g=At)=>{fe(m,{label:"Selected",children:(p,b)=>{kt(p,{onclick:()=>e.markOutlier(g()),text:"remove"})},$$slots:{default:!0}})},s={test:e.testsetp},l=S(()=>({test:e.testres})),a={regular:tn.regular,extreme:tn.extreme,outlier:tn.outlier},c={alien:tn.alien,external:tn.external},f=S(()=>{const m=e.testres.outcomes;return{members:{classColmap:a,labels:[`regular: ${m.rolsNum.regular}`,`extreme: ${m.rolsNum.extreme}`,`outliers: ${m.rolsNum.outlier}`],values:m.rols,ind:e.testres.ind.members},strangers:{classColmap:c,labels:[`aliens: ${m.rolsNum.alien}`,`external: ${m.rolsNum.external}`],values:m.rols,ind:e.testres.ind.strangers}}}),u=S(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Xl,buttons:t},dataset:{label:"Datasets",scope:"objects",component:Ql,buttons:t}})),v=Te({acceptance:Zl(o(l)),dataset:wo(["test"])});let d=ne(Te({acceptance:jn(v.acceptance),dataset:jn(v.dataset)}));he(()=>{o(f)&&o(d).acceptance.subset&&(o(d).acceptance.colorByObj=o(d).acceptance.subset!=="all"?o(f)[o(d).acceptance.subset]:null)}),he(()=>{o(d).acceptance.colorBy=o(d).acceptance.subset!=="all"?"roles":"classes"});const h=S(()=>({res:o(l),model:e.nimca,data:s}));Kl(r,{get plots(){return o(u)},get controls(){return v},get props(){return o(h)},get params(){return o(d)},set params(m){q(d,m,!0)}}),we()}var Z0=H("<p> </p>"),$0=H('<div class="data-loader svelte-1w77c1q"><!> <!></div>'),em=H('<div class="outliers-pane svelte-1w77c1q"><!></div>'),tm=H('<div class="buttons"><!> <!></div>'),rm=H('<div class="model-stats svelte-1w77c1q"><!></div> <div class="result-stats svelte-1w77c1q"><!></div>',1),nm=H('<p class="svelte-1w77c1q"><strong>Step 1</strong></p> <p class="svelte-1w77c1q">Load previously trained NIMCA model from file.</p>',1),sm=H(`<p class="svelte-1w77c1q"><strong>Step 2</strong></p> <p class="svelte-1w77c1q">Load test set set from CSV file. The requirements to the file are the same as for the training set (column with
               class labels is mandatory), but test set may contain class labels both for target class (members) as well as for
               alternative classes (strangers).</p>`,1),om=H(`<div class="help-text svelte-1w77c1q"><p class="svelte-1w77c1q">In this tab you can apply previously trained NIMCA model to a test set. The test set can include target class members,
            objects belonging to alternative classes or both. You can use them for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),lm=H('<div class="app-container svelte-1w77c1q"><div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!> <!> <div class="nimca-settings svelte-1w77c1q"><!> <!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function am(r,e){be(e,!0);let t=ne("");const s=S(()=>e.session.test);he(()=>{o(s).nimca&&!(o(s).nimca instanceof or)&&(o(s).nimca=or.fromJSON(o(s).nimca))});function l(M){if(M<0||M>o(s).testres.nrows-1)return;const I=o(s).testseto.objindices[M];I>=0&&!o(s).outliers.includes(I)&&(o(s).outliers.push(I),o(s).testseto=Zn(o(s).testset,o(s).outliers),o(s).testsetp=null,o(s).testres=null)}function a(){o(s).outliers=[],o(s).testseto=o(s).testset,o(s).testsetp=null,o(s).testres=null}function c(){o(s).outliers.pop(),o(s).testseto=Zn(o(s).testset,o(s).outliers),o(s).testsetp=null,o(s).testres=null}async function f(M,I){if(q(t,""),!M)return null;if(!I||Object.keys(I).length===0){o(s).testsetp=M;return}e.WASM().then(U=>{const D=Ms(U,M.values,M.nresp,I,!1,!1),z=Pl(Io(M),D);o(s).testsetp=El(z,I)}).catch(U=>{o(s).testsetp=null,console.error(U),q(t,U,!0)})}$s(()=>{o(s).testset===null&&(q(t,""),o(s).outliers=[],o(s).testsetp=null,o(s).testseto=null,o(s).testres=null),o(s).nimca===null&&(q(t,""),o(s).outliers=[],o(s).testset=null,o(s).testsetp=null,o(s).testseto=null,o(s).testres=null)}),he(()=>{o(s).nimca===null&&(q(t,""),o(s).outliers=[],o(s).testset=null,o(s).testsetp=null,o(s).testseto=null,o(s).testres=null)}),he(()=>{o(s).teset===null&&(q(t,""),o(s).outliers=[],o(s).testsetp=null,o(s).testseto=null,o(s).testres=null)}),he(()=>{if(o(s).testset&&!o(s).testseto){if(q(t,""),o(s).testset.values.ncols!==o(s).nimca.ncols){q(t,`Wrong number of predictors (expected ${o(s).nimca.ncols}, got ${o(s).testset.values.ncols}), check settings and try to load again.`);return}o(s).testseto=o(s).testset}}),he(()=>{o(s).testseto&&!o(s).testsetp&&(q(t,""),f(o(s).testseto,o(s).prep))}),he(()=>{o(s).testsetp&&o(s).nimca&&(o(s).testres=o(s).nimca.predict(o(s).testsetp))}),he(()=>{const M=fr(()=>JSON.stringify(e.session,Ts));e.backupSession(M,o(s).testset,o(s).testres,o(s).nimca)});var u=lm(),v=L(u),d=L(v),h=L(d);qc(h,{get nimca(){return o(s).nimca},set nimca(M){o(s).nimca=M},get prep(){return o(s).prep},set prep(M){o(s).prep=M}});var m=P(d,2);{var g=M=>{var I=$0(),U=L(I);Ul(U,{className:"Class",classMandatory:!0,get dataset(){return o(s).testset},set dataset(W){o(s).testset=W}});var D=P(U,2);{var z=W=>{fe(W,{status:"error",children:(oe,Q)=>{var J=Z0(),se=L(J);$(()=>me(se,o(t))),N(oe,J)},$$slots:{default:!0}})};Y(D,W=>{o(t)&&W(z)})}N(M,I)};Y(m,M=>{o(s).nimca&&M(g)})}var p=P(m,2);{var b=M=>{var I=em(),U=L(I);jl(U,{get outliers(){return o(s).outliers},get dataset(){return o(s).testset},resetOutliers:a,undoOutliers:c}),N(M,I)};Y(p,M=>{o(s).outliers&&o(s).outliers.length>0&&M(b)})}var w=P(p,2),_=L(w);{var k=M=>{Gl(M,{get className(){return o(s).className},fit:!1,get nimca(){return o(s).nimca},set nimca(I){o(s).nimca=I}})};Y(_,M=>{o(s).nimca&&o(s).testsetp&&M(k)})}var E=P(_,2);{var y=M=>{fe(M,{label:"Download",children:(I,U)=>{var D=tm(),z=L(D);kt(z,{onclick:()=>Al(o(s).nimca,o(s).testres,o(s).testset,"test",o(s).outliers),text:"Res (test)"});var W=P(z,2);kt(W,{onclick:()=>Cl(o(s).nimca,o(s).prep),text:"Model"}),N(I,D)},$$slots:{default:!0}})};Y(E,M=>{o(s).nimca&&o(s).testres&&M(y)})}var A=P(w,2);{var C=M=>{var I=rm(),U=K(I),D=L(U);Hl(D,{get nimca(){return o(s).nimca}});var z=P(U,2),W=L(z);X0(W,{get res(){return o(s).testres}}),N(M,I)};Y(A,M=>{o(s).nimca&&o(s).testres&&M(C)})}var j=P(v,2),R=L(j);{var T=M=>{var I=om(),U=P(L(I),2);{var D=W=>{var oe=nm();N(W,oe)},z=W=>{var oe=ge(),Q=K(oe);{var J=se=>{var ae=sm();N(se,ae)};Y(Q,se=>{o(s).testset||se(J)},!0)}N(W,oe)};Y(U,W=>{o(s).nimca?W(z,!1):W(D)})}N(M,I)},B=M=>{var I=ge(),U=K(I);{var D=z=>{var W=ge(),oe=K(W);kn(oe,()=>o(s).testres,Q=>{Q0(Q,tr({markOutlier:l},()=>o(s)))}),N(z,W)};Y(U,z=>{o(s).nimca&&o(s).testres&&z(D)},!0)}N(M,I)};Y(R,M=>{!o(s).nimca||!o(s).testres?M(T):M(B,!1)})}N(r,u),we()}var im=H('<table class="svelte-vm8g95"><thead><tr class="svelte-vm8g95"><th class="svelte-vm8g95"></th><th class="svelte-vm8g95">New</th></tr></thead><tbody><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Objects</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">In</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Out</td><td class="svelte-vm8g95"> </td></tr></tbody></table>');function cm(r,e){be(e,!0);var t=ge(),s=K(t);{var l=a=>{var c=im(),f=P(L(c)),u=L(f),v=P(L(u)),d=L(v),h=P(u),m=P(L(h)),g=L(m),p=P(h),b=P(L(p)),w=L(b);$(()=>{me(d,e.res.outcomes.decs.length),me(g,e.res.outcomes.decsNum.in),me(w,e.res.outcomes.decsNum.out)}),N(a,c)};Y(s,a=>{e.res&&a(l)})}N(r,t),we()}function um(r,e){be(e,!0);const t=(v,d=At)=>{fe(v,{label:"Selected",children:(h,m)=>{kt(h,{onclick:()=>e.markOutlier(d()),text:"remove"})},$$slots:{default:!0}})},s={new:e.newsetp},l=S(()=>({new:e.newres})),a=S(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Xl,buttons:t},dataset:{label:"Datasets",scope:"objects",component:Ql,buttons:t}})),c=Te({acceptance:Zl(o(l)),dataset:wo(["new"])});let f=ne(Te({acceptance:jn(c.acceptance),dataset:jn(c.dataset)}));he(()=>{o(f).acceptance.colorByObj={values:e.newres.outcomes.decs,classColmap:{in:zn.new,out:zn.new},labels:["in","out"],filled:e.newres.outcomes.decs.map(v=>v==="in"),showBar:!1}});const u=S(()=>({res:o(l),model:e.nimca,data:s}));Kl(r,{get plots(){return o(a)},get controls(){return c},get props(){return o(u)},get params(){return o(f)},set params(v){q(f,v,!0)}}),we()}var fm=H("<p> </p>"),vm=H('<div class="data-loader svelte-1rjc99q"><!> <!></div>'),dm=H('<div class="outliers-pane svelte-1rjc99q"><!></div>'),hm=H('<div class="buttons"><!> <!></div>'),mm=H('<div class="model-stats svelte-1rjc99q"><!></div> <div class="result-stats svelte-1rjc99q"><!></div>',1),gm=H('<p class="svelte-1rjc99q"><strong>Step 1</strong></p> <p class="svelte-1rjc99q">Load previously trained NIMCA model from file.</p>',1),pm=H(`<p class="svelte-1rjc99q"><strong>Step 2</strong></p> <p class="svelte-1rjc99q">Load data set from CSV file (or SPC files). The requirements to the file are the same as for the
               training set but no columns with reference classes is expected. If you have reference classes, use <em>Test</em> tab.</p>`,1),bm=H(`<div class="help-text svelte-1rjc99q"><p class="svelte-1rjc99q">In this tab you can apply previously trained NIMCA model to a new dataset with objects whose class is unknown (hence the app
            does not expect column with target classes).</p> <!></div>`),wm=H('<div class="app-container svelte-1rjc99q"><div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <div class="nimca-settings svelte-1rjc99q"><!> <!></div> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function _m(r,e){be(e,!0);let t=ne("");const s=S(()=>e.session.new);he(()=>{o(s).nimca&&!(o(s).nimca instanceof or)&&(o(s).nimca=or.fromJSON(o(s).nimca))});function l(M){if(M<0||M>o(s).newres.nrows-1)return;const I=o(s).newseto.objindices[M];I>=0&&!o(s).outliers.includes(I)&&(o(s).outliers.push(I),o(s).newseto=Zn(o(s).newset,o(s).outliers),o(s).newsetp=null,o(s).newres=null)}function a(){o(s).outliers=[],o(s).newseto=o(s).newset,o(s).newsetp=null,o(s).newres=null}function c(){o(s).outliers.pop(),o(s).newseto=Zn(o(s).newset,o(s).outliers),o(s).newsetp=null,o(s).newres=null}async function f(M,I){if(q(t,""),!M)return null;if(!I||Object.keys(I).length===0){o(s).newsetp=M;return}e.WASM().then(U=>{const D=Ms(U,M.values,M.nresp,I,!1,!1),z=Pl(Io(M),D);o(s).newsetp=El(z,I)}).catch(U=>{o(s).newsetp=null,console.error(U),q(t,U,!0)})}$s(()=>{o(s).newset===null&&(q(t,""),o(s).outliers=[],o(s).newsetp=null,o(s).newseto=null,o(s).newres=null),o(s).nimca===null&&(q(t,""),o(s).outliers=[],o(s).newset=null,o(s).newsetp=null,o(s).newseto=null,o(s).newres=null)}),he(()=>{o(s).nimca===null&&(q(t,""),o(s).outliers=[],o(s).newset=null,o(s).newsetp=null,o(s).newseto=null,o(s).newres=null)}),he(()=>{o(s).newset===null&&(q(t,""),o(s).outliers=[],o(s).newsetp=null,o(s).newseto=null,o(s).newres=null)}),he(()=>{if(o(s).newset&&!o(s).newseto){if(q(t,""),o(s).newset.values.ncols!==o(s).nimca.ncols){q(t,`Wrong number of predictors (expected ${o(s).nimca.ncols}, got ${o(s).newset.values.ncols}), check settings and try to load again.`);return}o(s).newseto=o(s).newset}}),he(()=>{o(s).newseto&&!o(s).newsetp&&(q(t,""),f(o(s).newseto,o(s).prep))}),he(()=>{o(s).newsetp&&o(s).nimca&&(o(s).newres=o(s).nimca.predict(o(s).newsetp))}),he(()=>{const M=fr(()=>JSON.stringify(e.session,Ts));e.backupSession(M,o(s).newset,o(s).newres,o(s).nimca)});var u=wm(),v=L(u),d=L(v),h=L(d);qc(h,{get nimca(){return o(s).nimca},set nimca(M){o(s).nimca=M},get prep(){return o(s).prep},set prep(M){o(s).prep=M}});var m=P(d,2);{var g=M=>{var I=vm(),U=L(I);Ul(U,{className:"Class",classMandatory:!1,csvOnly:!1,get dataset(){return o(s).newset},set dataset(W){o(s).newset=W}});var D=P(U,2);{var z=W=>{fe(W,{status:"error",children:(oe,Q)=>{var J=fm(),se=L(J);$(()=>me(se,o(t))),N(oe,J)},$$slots:{default:!0}})};Y(D,W=>{o(t)&&W(z)})}N(M,I)};Y(m,M=>{o(s).nimca&&M(g)})}var p=P(m,2);{var b=M=>{var I=dm(),U=L(I);jl(U,{get outliers(){return o(s).outliers},get dataset(){return o(s).newset},resetOutliers:a,undoOutliers:c}),N(M,I)};Y(p,M=>{o(s).outliers&&o(s).outliers.length>0&&M(b)})}var w=P(p,2),_=L(w);{var k=M=>{Gl(M,{get className(){return o(s).className},isAlt:!0,fit:!1,get nimca(){return o(s).nimca},set nimca(I){o(s).nimca=I}})};Y(_,M=>{o(s).nimca&&o(s).newsetp&&M(k)})}var E=P(_,2);{var y=M=>{fe(M,{label:"Download",children:(I,U)=>{var D=hm(),z=L(D);kt(z,{onclick:()=>Al(o(s).nimca,o(s).newres,o(s).newset,"new",o(s).outliers),text:"Res (new)"});var W=P(z,2);kt(W,{onclick:()=>Cl(o(s).nimca,o(s).prep),text:"Model"}),N(I,D)},$$slots:{default:!0}})};Y(E,M=>{o(s).nimca&&o(s).newres&&M(y)})}var A=P(w,2);{var C=M=>{var I=mm(),U=K(I),D=L(U);Hl(D,{get nimca(){return o(s).nimca}});var z=P(U,2),W=L(z);cm(W,{get res(){return o(s).newres}}),N(M,I)};Y(A,M=>{o(s).nimca&&o(s).newres&&M(C)})}var j=P(v,2),R=L(j);{var T=M=>{var I=bm(),U=P(L(I),2);{var D=W=>{var oe=gm();N(W,oe)},z=W=>{var oe=ge(),Q=K(oe);{var J=se=>{var ae=pm();N(se,ae)};Y(Q,se=>{o(s).newset||se(J)})}N(W,oe)};Y(U,W=>{o(s).nimca?W(z,!1):W(D)})}N(M,I)},B=M=>{var I=ge(),U=K(I);{var D=z=>{var W=ge(),oe=K(W);kn(oe,()=>o(s).newres,Q=>{um(Q,tr({markOutlier:l},()=>o(s)))}),N(z,W)};Y(U,z=>{o(s).nimca&&o(s).newres&&z(D)},!0)}N(M,I)};Y(R,M=>{!o(s).nimca||!o(s).newres?M(T):M(B,!1)})}N(r,u),we()}function Oc(r,e){q(e,!0)}function ym(r,e,t){const s=Ml(new Date),l=e.appID+"-session-"+s+".json";o(t).date=s;const a=JSON.stringify(o(t),Ts),c=new Blob([a],{type:"text/json"}),f=window.URL.createObjectURL(c),u=document.createElement("a");u.setAttribute("href",f),u.setAttribute("download",l),u.click()}function xm(r,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var km=H('<sup style="color:red">β</sup>'),Em=H('<li><button class="svelte-1josccy"> </button></li>'),Am=H("<div><!></div>"),Cm=H('<div class="info-container svelte-1josccy"><!></div>'),Sm=H('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function Nm(r,e){be(e,!0);let t=O(e,"tabs",19,()=>[]),s=O(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let a=ne(!1),c=ne(void 0),f=ne("Current session "),u=ne(!1);function v(y){q(f,y,!0),q(u,!0),setTimeout(()=>{q(f,"Current session "),q(u,!1)},1e3)}function d(){q(a,!1)}function h(y){o(c).tab=y}function m(){const y=indexedDB.open(l,1);y.onsuccess=A=>{const j=A.target.result.transaction(e.appID,"readwrite");j.objectStore(e.appID).delete("session"),j.oncomplete=()=>{q(c,e.initSession(),!0),v("Session was reinitialzed.")},j.onerror=()=>console.error("Failed to session from DB.")}}function g(y,A){window.localStorage.removeItem(e.appID+"-blocked");const C=indexedDB.open(l,1);C.onsuccess=j=>{const B=j.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);B.put(y,"session"),B.put(Ml(new Date),"session-update")}}function p(){new Promise((y,A)=>{const C=indexedDB.open(l,1);C.onsuccess=j=>{const M=j.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");M.onsuccess=()=>y(M.result),M.onerror=()=>A(M.error)}}).then(y=>{b(y),q(f,"Last session is restored "),q(u,!0),setTimeout(()=>{q(f,"Current session "),q(u,!1)},1500)}).catch(y=>{console.error(y),q(c,e.initSession(),!0)})}function b(y){if(!y||y==="undefined"){q(c,e.initSession(),!0);return}const A=JSON.parse(y,Nl);q(c,e.checkSession(A)?A:e.initSession(e.appID),!0)}function w(y){const A=new FileReader;A.onload=()=>{b(A.result),y.target.value=""},A.readAsText(y.target.files[0])}Tf(()=>{const y=e.appID,A=indexedDB.open(l,1);A.onupgradeneeded=C=>{const j=C.target.result;j.objectStoreNames.contains(y)||j.createObjectStore(y)},A.onsuccess=C=>{p()}});var _=ge(),k=K(_);{var E=y=>{var A=Sm(),C=L(A),j=L(C),R=L(j),T=P(R,2),B=L(T),M=P(B);{var I=Re=>{var Ie=km();N(Re,Ie)};Y(M,Re=>{s()&&Re(I)})}var U=P(T,2),D=L(U),z=P(j,2);tt(z,21,t,ot,(Re,Ie,te)=>{var pe=Em();let ce;var _e=L(pe);_e.__click=()=>h(te),_e.__keydown=()=>h(te);var Ee=L(_e);$(ve=>{ce=wt(pe,1,"nav-item svelte-1josccy",null,ce,ve),me(Ee,o(Ie).name)},[()=>({selected:o(c).tab===te})]),N(Re,pe)});var W=P(C,2),oe=L(W);kn(oe,()=>o(c).date,Re=>{var Ie=ge(),te=K(Ie);tt(te,17,t,ot,(pe,ce,_e)=>{var Ee=Am();let ve;var Oe=L(Ee);Es(Oe,()=>o(ce).component,(Be,Je)=>{Je(Be,{get WASM(){return e.WASM},get session(){return o(c)},backupSession:g})}),$(Be=>ve=wt(Ee,1,"tab-content svelte-1josccy",null,ve,Be),[()=>({hidden:o(c).tab!==_e})]),N(pe,Ee)}),N(Re,Ie)});var Q=P(W,2),J=L(Q);let se;var ae=L(J),de=L(ae),ue=P(ae,2),ee=L(ue);ee.__change=w;var re=P(ue,2);re.__click=[ym,e,c];var qe=P(re,2);qe.__click=[xm,m];var Ke=P(J,2),Ue=L(Ke);Ue.__click=[Oc,a],Ue.__keydown=[Oc,a];var ze=P(Ue,2);jr(ze,()=>e.footer);var Ne=P(Q,2);{var Ze=Re=>{cc(Re,{closeModal:d,children:(Ie,te)=>{var pe=Cm(),ce=L(pe);jr(ce,()=>e.info),N(Ie,pe)},$$slots:{default:!0}})};Y(Ne,Re=>{o(a)&&Re(Ze)})}$(Re=>{F(R,"alt",e.appShortTitle),me(B,e.appTitle),me(D,e.appSlogan),se=wt(J,1,"session svelte-1josccy",null,se,Re),me(de,o(f))},[()=>({"no-buttons":o(u)})]),N(y,A)};Y(k,y=>{o(c)&&y(E)})}N(r,_),we()}it(["click","keydown","change"]);const Dm="modulepreload",Vm=function(r){return"/"+r},Ym={},Mm=function(e,t,s){let l=Promise.resolve();function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return l.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};async function jm(r={}){var $e,Nt,Ye;var e,t=r,s=!!globalThis.window,l=!!globalThis.WorkerGlobalScope,a=((Nt=($e=globalThis.process)==null?void 0:$e.versions)==null?void 0:Nt.node)&&((Ye=globalThis.process)==null?void 0:Ye.type)!="renderer";if(a){const{createRequire:V}=await Mm(async()=>{const{createRequire:G}=await Promise.resolve().then(()=>zm);return{createRequire:G}},void 0);var c=V(He&&He.tagName.toUpperCase()==="SCRIPT"&&He.src||new URL("nimca.js",document.baseURI).href)}var f="./this.program",u=(V,G)=>{throw G},v=He&&He.tagName.toUpperCase()==="SCRIPT"&&He.src||new URL("nimca.js",document.baseURI).href,d="",h,m;if(a){var g=c("fs");v.startsWith("file:")&&(d=c("path").dirname(c("url").fileURLToPath(v))+"/"),m=V=>(V=E(V)?new URL(V):V,g.readFileSync(V)),h=async V=>(V=E(V)?new URL(V):V,g.readFileSync(V,void 0)),1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),u=(V,G)=>{throw process.exitCode=V,G}}else if(s||l){try{d=new URL(".",v).href}catch{}l&&(m=V=>{var G=new XMLHttpRequest;return G.open("GET",V,!1),G.responseType="arraybuffer",G.send(null),new Uint8Array(G.response)}),h=async V=>{if(E(V))return new Promise((X,le)=>{var Ae=new XMLHttpRequest;Ae.open("GET",V,!0),Ae.responseType="arraybuffer",Ae.onload=()=>{Ae.status==200||Ae.status==0&&Ae.response?X(Ae.response):le(Ae.status)},Ae.onerror=le,Ae.send(null)});var G=await fetch(V,{credentials:"same-origin"});if(G.ok)return G.arrayBuffer();throw Error(G.status+" : "+G.url)}}var p=console.log.bind(console),b=console.error.bind(console),w,_=!1,k,E=V=>V.startsWith("file://"),y,A,C,j,R,T=!1;function B(){var V=Oe.buffer;C=new Int8Array(V),j=new Uint8Array(V),t.HEAP32=new Int32Array(V),R=new Uint32Array(V),t.HEAPF64=new Float64Array(V),new BigInt64Array(V),new BigUint64Array(V)}function M(V){var G;throw(G=t.onAbort)==null||G.call(t,V),V="Aborted("+V+")",b(V),_=!0,V=new WebAssembly.RuntimeError(V+". Build with -sASSERTIONS for more info."),A==null||A(V),V}var I;async function U(V){if(!w)try{var G=await h(V);return new Uint8Array(G)}catch{}if(V==I&&w)V=new Uint8Array(w);else if(m)V=m(V);else throw"both async and sync fetching of the wasm failed";return V}async function D(V,G){try{var X=await U(V);return await WebAssembly.instantiate(X,G)}catch(le){b(`failed to asynchronously prepare wasm: ${le}`),M(le)}}async function z(V){var G=I;if(!w&&!E(G)&&!a)try{var X=fetch(G,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(X,V)}catch(le){b(`wasm streaming compile failed: ${le}`),b("falling back to ArrayBuffer instantiation")}return D(G,V)}class W{constructor(G){zt(this,"name","ExitStatus");this.message=`Program terminated with exit(${G})`,this.status=G}}var oe=V=>{for(;0<V.length;)V.shift()(t)},Q=[],J=[],se=()=>{var V=t.preRun.shift();J.push(V)},ae=!0,de=0,ue={},ee=V=>{var G;k=V,ae||0<de||((G=t.onExit)==null||G.call(t,V),_=!0),u(V,new W(V))},re=V=>{if(!_)try{if(V(),!(ae||0<de))try{k=V=k,ee(V)}catch(G){G instanceof W||G=="unwind"||u(1,G)}}catch(G){G instanceof W||G=="unwind"||u(1,G)}},qe=globalThis.TextDecoder&&new TextDecoder,Ke=(V,G=0)=>{for(var X=G,le=X+void 0;V[X]&&!(X>=le);)++X;if(16<X-G&&V.buffer&&qe)return qe.decode(V.subarray(G,X));for(le="";G<X;){var Ae=V[G++];if(Ae&128){var rt=V[G++]&63;if((Ae&224)==192)le+=String.fromCharCode((Ae&31)<<6|rt);else{var ie=V[G++]&63;Ae=(Ae&240)==224?(Ae&15)<<12|rt<<6|ie:(Ae&7)<<18|rt<<12|ie<<6|V[G++]&63,65536>Ae?le+=String.fromCharCode(Ae):(Ae-=65536,le+=String.fromCharCode(55296|Ae>>10,56320|Ae&1023))}}else le+=String.fromCharCode(Ae)}return le},Ue={},ze=()=>{if(!Ne){var V={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.language||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},G;for(G in Ue)Ue[G]===void 0?delete V[G]:V[G]=Ue[G];var X=[];for(G in V)X.push(`${G}=${V[G]}`);Ne=X}return Ne},Ne,Ze=(V,G,X)=>{var le=j;if(!(0<X))return 0;var Ae=G;X=G+X-1;for(var rt=0;rt<V.length;++rt){var ie=V.codePointAt(rt);if(127>=ie){if(G>=X)break;le[G++]=ie}else if(2047>=ie){if(G+1>=X)break;le[G++]=192|ie>>6,le[G++]=128|ie&63}else if(65535>=ie){if(G+2>=X)break;le[G++]=224|ie>>12,le[G++]=128|ie>>6&63,le[G++]=128|ie&63}else{if(G+3>=X)break;le[G++]=240|ie>>18,le[G++]=128|ie>>12&63,le[G++]=128|ie>>6&63,le[G++]=128|ie&63,rt++}}return le[G]=0,G-Ae},Re=V=>{for(var G=0,X=0;X<V.length;++X){var le=V.charCodeAt(X);127>=le?G++:2047>=le?G+=2:55296<=le&&57343>=le?(G+=4,++X):G+=3}return G},Ie=[null,[],[]],te=()=>{if(a){var V=c("crypto");return G=>V.randomFillSync(G)}return G=>crypto.getRandomValues(G)},pe=V=>{(pe=te())(V)};if(t.noExitRuntime&&(ae=t.noExitRuntime),t.print&&(p=t.print),t.printErr&&(b=t.printErr),t.wasmBinary&&(w=t.wasmBinary),t.thisProgram&&(f=t.thisProgram),t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);0<t.preInit.length;)t.preInit.shift()();t.ccall=(V,G,X,le)=>{var Ae={string:Ce=>{var Me=0;if(Ce!=null&&Ce!==0){Me=Re(Ce)+1;var dt=Ee(Me);Ze(Ce,dt,Me),Me=dt}return Me},array:Ce=>{var Me=Ee(Ce.length);return C.set(Ce,Me),Me}};V=t["_"+V];var rt=[],ie=0;if(le)for(var Pe=0;Pe<le.length;Pe++){var ke=Ae[X[Pe]];ke?(ie===0&&(ie=ve()),rt[Pe]=ke(le[Pe])):rt[Pe]=le[Pe]}return X=V(...rt),X=(function(Ce){return ie!==0&&_e(ie),G==="string"?Ce?Ke(j,Ce):"":G==="boolean"?!!Ce:Ce})(X)};var ce,_e,Ee,ve,Oe,Be={g:()=>M(""),j:()=>{ae=!1,de=0},k:(V,G)=>{if(ue[V]&&(clearTimeout(ue[V].id),delete ue[V]),!G)return 0;var X=setTimeout(()=>{delete ue[V],re(()=>ce(V,performance.now()))},G);return ue[V]={id:X,U:G},0},a:()=>Date.now(),c:V=>b(V?Ke(j,V):""),b:()=>performance.now(),l:V=>{var G=j.length;if(V>>>=0,2147483648<V)return!1;for(var X=1;4>=X;X*=2){var le=G*(1+.2/X);le=Math.min(le,V+100663296);e:{le=(Math.min(2147483648,65536*Math.ceil(Math.max(V,le)/65536))-Oe.buffer.byteLength+65535)/65536|0;try{Oe.grow(le),B();var Ae=1;break e}catch{}Ae=void 0}if(Ae)return!0}return!1},e:(V,G)=>{var X=0,le=0,Ae;for(Ae of ze()){var rt=G+X;R[V+le>>2]=rt,X+=Ze(Ae,rt,1/0)+1,le+=4}return 0},f:(V,G)=>{var X=ze();R[V>>2]=X.length,V=0;for(var le of X)V+=Re(le)+1;return R[G>>2]=V,0},h:(V,G,X,le)=>{for(var Ae=0,rt=0;rt<X;rt++){var ie=R[G>>2],Pe=R[G+4>>2];G+=8;for(var ke=0;ke<Pe;ke++){var Ce=V,Me=j[ie+ke],dt=Ie[Ce];Me===0||Me===10?((Ce===1?p:b)(Ke(dt)),dt.length=0):dt.push(Me)}Ae+=Pe}return R[le>>2]=Ae,0},i:ee,d:(V,G)=>(pe(j.subarray(V,V+G)),0)},Je;return Je=await(async function(){function V(X){return X=Je=X.exports,t._pcafit_wasm=X.o,t._free=X.p,t._malloc=X.q,t._pcapredict_wasm=X.r,t._pcvpca_wasm=X.s,t._prepfit_wasm=X.t,t._prepapply_wasm=X.u,ce=X.v,t._strdup=X.w,t._strndup=X.x,t.__ZdaPv=X.y,t.__ZdaPvm=X.z,t.__ZdlPv=X.A,t.__ZdlPvm=X.B,t.__Znaj=X.C,t.__ZnajSt11align_val_t=X.D,t.__Znwj=X.E,t.__ZnwjSt11align_val_t=X.F,t.___libc_calloc=X.G,t.___libc_free=X.H,t.___libc_malloc=X.I,t.___libc_realloc=X.J,t._emscripten_builtin_malloc=X.K,t._emscripten_builtin_calloc=X.L,t._emscripten_builtin_free=X.M,t._emscripten_builtin_realloc=X.N,t._malloc_size=X.O,t._malloc_usable_size=X.P,t._reallocf=X.Q,_e=X.R,Ee=X.S,ve=X.T,Oe=X.m,B(),Je}var G={a:Be};return t.instantiateWasm?new Promise(X=>{t.instantiateWasm(G,(le,Ae)=>{X(V(le))})}):(I??(I=t.locateFile?t.locateFile?t.locateFile("pca_wasm.wasm",d):d+"pca_wasm.wasm":new URL("/nimca/nimca.wasm",He&&He.tagName.toUpperCase()==="SCRIPT"&&He.src||new URL("nimca.js",document.baseURI).href).href),V((await z(G)).instance))})(),(function(){function V(){var X;if(t.calledRun=!0,!_){if(T=!0,Je.n(),y==null||y(t),(X=t.onRuntimeInitialized)==null||X.call(t),t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;){var G=t.postRun.shift();Q.push(G)}oe(Q)}}if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)se();oe(J),t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),V()},1)):V()})(),T?e=t:e=new Promise((V,G)=>{y=V,A=G}),e}var Tm=H('<p>Current release: <span>1.2.0</span> &nbsp;Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=NIMCA app">help@mda.tools</a></p>'),Pm=H(`<h2>NIMCA</h2> <p>Authors: <em>Oxana Rodionova, Alexey Pomerantsev, Sergey Kucheryavskiy</em></p> <p>Interactive web-application for creating and using Naïve DD-SIMCA (NIMCA) one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check <a href="">paper</a></p> <h3>v. 1.2.0</h3> <p class="release-info">released 24/11/2025</p> <ul><li>Corrected help text in Train tab.</li> <li>Dataset plot now show centered/scaled values.</li></ul>`,1);function Lm(r,e){be(e,!1);function t(a){const c=Object.keys(a);if(!["date","tab","train","test","new"].every(d=>c.includes(d)))return!1;const f=Object.keys(a.train);if(!["nimca","calset","calres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(d=>f.includes(d)))return!1;const u=Object.keys(a.test);if(!["nimca","prep","testset","testres","outliers"].every(d=>u.includes(d)))return!1;const v=Object.keys(a.new);return!!["nimca","prep","newset","newres","outliers"].every(d=>v.includes(d))}function s(){return{date:Ml(new Date),tab:0,train:{nimca:0,calset:0,calseto:0,calsetp:0,calres:0,outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{nimca:0,prep:0,testset:0,testseto:0,testres:0,outliers:[],ind:null},new:{nimca:0,prep:0,newset:0,newres:0,outliers:[]}}}const l=[{name:"Train",label:"train",component:B0},{name:"Test",label:"test",component:am},{name:"Predict",label:"new",component:_m}];Sf(),Nm(r,{appID:"nimca",appTitle:"NIMCA",appShortTitle:"NIMCA",appSlogan:"Naïve DD-SIMCA classifier",get WASM(){return jm},get tabs(){return l},initSession:s,checkSession:t,footer:f=>{var u=Tm();N(f,u)},info:f=>{var u=Pm();N(f,u)},$$slots:{footer:!0,info:!0}}),we()}af(Lm,{target:document.body});const zm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=nimca.js.map
