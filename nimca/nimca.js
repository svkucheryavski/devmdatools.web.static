var Dm=Object.defineProperty;var Lc=st=>{throw TypeError(st)};var Vm=(st,Ue,yt)=>Ue in st?Dm(st,Ue,{enumerable:!0,configurable:!0,writable:!0,value:yt}):st[Ue]=yt;var fr=(st,Ue,yt)=>Vm(st,typeof Ue!="symbol"?Ue+"":Ue,yt),na=(st,Ue,yt)=>Ue.has(st)||Lc("Cannot "+yt);var Z=(st,Ue,yt)=>(na(st,Ue,"read from private field"),yt?yt.call(st):Ue.get(st)),Ce=(st,Ue,yt)=>Ue.has(st)?Lc("Cannot add the same private member more than once"):Ue instanceof WeakSet?Ue.add(st):Ue.set(st,yt),be=(st,Ue,yt,dn)=>(na(st,Ue,"write to private field"),dn?dn.call(st,yt):Ue.set(st,yt),yt),qt=(st,Ue,yt)=>(na(st,Ue,"access private method"),yt);(function(){"use strict";var Is,ss,ln,Fs,qs,qn,ls,On,on,os,Os,Bs,_r,Rc,Cl,sa,wr,ir,Zo,Nr,Bn,Sr,cr,Ht,Cr,an,Dn,cn,Vn,un,kl,El,Vt,Ym,Um,Ml,jl,la,fn,as,Ds,Al,zc,jc,is,cs,us,fs,vs,ds,hs,ms,gs,ps;var st=document.createElement("style");st.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media (min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media (min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1fhdfcc{width:100%;border-collapse:collapse}tr.svelte-1fhdfcc{width:100%}th.svelte-1fhdfcc{border-bottom:1px solid #a0a0a0}th.svelte-1fhdfcc,td.svelte-1fhdfcc{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1fhdfcc{text-align:left;padding:.1em .5em}table.svelte-1bca91p{width:100%;border-collapse:collapse}tr.svelte-1bca91p{width:100%}th.svelte-1bca91p{border-bottom:1px solid #a0a0a0}th.svelte-1bca91p,td.svelte-1bca91p{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1bca91p{text-align:left;padding:.1em .5em}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.plot-container.svelte-1838sos{width:100%;height:100%}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(325px,30%) 1fr}}.model-info.svelte-7h7avz{line-height:1.5em}.model-info.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-k5uafz{width:100%;border-collapse:collapse}tr.svelte-k5uafz{width:100%}th.svelte-k5uafz{border-bottom:1px solid #a0a0a0}tr.section.svelte-k5uafz>td:where(.svelte-k5uafz){border-top:1px solid #a0a0a0}th.svelte-k5uafz,td.svelte-k5uafz{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-k5uafz{text-align:left;padding:.1em .5em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(325px,30%) 1fr}}table.svelte-vm8g95{width:100%;border-collapse:collapse}tr.svelte-vm8g95{width:100%}th.svelte-vm8g95{border-bottom:1px solid #a0a0a0}th.svelte-vm8g95,td.svelte-vm8g95{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-vm8g95{text-align:left;padding:.1em .5em}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){background:#e8e8e8}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(325px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(st);var Ue=typeof document<"u"?document.currentScript:null;const yt=!1;var dn=Array.isArray,Ic=Array.prototype.indexOf,Tl=Array.from,Pl=Object.defineProperty,Vr=Object.getOwnPropertyDescriptor,oa=Object.getOwnPropertyDescriptors,aa=Object.prototype,Fc=Array.prototype,Us=Object.getPrototypeOf,ia=Object.isExtensible;function Wn(t){return typeof t=="function"}const jt=()=>{};function qc(t){return typeof(t==null?void 0:t.then)=="function"}function Oc(t){return t()}function Ws(t){for(var e=0;e<t.length;e++)t[e]()}function Bc(){var t,e,r=new Promise((l,o)=>{t=l,e=o});return{promise:r,resolve:t,reject:e}}function Ll(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const l of t)if(r.push(l),r.length===e)break;return r}const Gt=2,Rl=4,Hs=8,hn=16,jr=32,mn=64,zl=128,tr=256,Gs=512,Rt=1024,rr=2048,Yr=4096,vr=8192,gn=16384,Ks=32768,pn=65536,ca=1<<17,Dc=1<<18,Hn=1<<19,ua=1<<20,Il=1<<21,Fl=1<<22,bn=1<<23,Ur=Symbol("$state"),fa=Symbol("legacy props"),Vc=Symbol(""),ql=new class extends Error{constructor(){super(...arguments);fr(this,"name","StaleReactionError");fr(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function va(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Yc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Uc(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Wc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Hc(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Gc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Kc(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Jc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Zc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Js=1,Xs=2,da=4,$c=8,eu=16,tu=1,ru=2,nu=4,su=8,lu=16,ou=1,au=2,iu=4,ha=1,cu=2,xt=Symbol(),uu="http://www.w3.org/1999/xhtml";function fu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let vu=!1;function ma(t){return t===this.v}function ga(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function du(t,e){return t!==e}function pa(t){return!ga(t,this.v)}let Gn=!1,hu=!1;function mu(){Gn=!0}const gu=[];function Ol(t,e=!1,r=!1){return Qs(t,new Map,"",gu,null,r)}function Qs(t,e,r,l,o=null,a=!1){if(typeof t=="object"&&t!==null){var c=e.get(t);if(c!==void 0)return c;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(dn(t)){var f=Array(t.length);e.set(t,f),o!==null&&e.set(o,f);for(var u=0;u<t.length;u+=1){var v=t[u];u in t&&(f[u]=Qs(v,e,r,l,null,a))}return f}if(Us(t)===aa){f={},e.set(t,f),o!==null&&e.set(o,f);for(var d in t)f[d]=Qs(t[d],e,r,l,null,a);return f}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!a)return Qs(t.toJSON(),e,r,l,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let rt=null;function Wr(t){rt=t}function Yt(t){return ba().get(t)}function pu(t,e){return ba().set(t,e),e}function me(t,e=!1,r){rt={p:rt,c:null,e:null,s:t,x:null,l:Gn&&!e?{s:null,u:null,$:[]}:null}}function ge(t){var e=rt,r=e.e;if(r!==null){e.e=null;for(var l of r)Ra(l)}return rt=e.p,{}}function _n(){return!Gn||rt!==null&&rt.l===null}function ba(t){return rt===null&&va(),rt.c??(rt.c=new Map(bu(rt)||void 0))}function bu(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let Hr=[],Zs=[];function _a(){var t=Hr;Hr=[],Ws(t)}function _u(){var t=Zs;Zs=[],Ws(t)}function wu(){return Hr.length>0||Zs.length>0}function Gr(t){if(Hr.length===0&&!_s){var e=Hr;queueMicrotask(()=>{e===Hr&&_a()})}Hr.push(t)}function yu(){Hr.length>0&&_a(),Zs.length>0&&_u()}const xu=new WeakMap;function wa(t){var e=ze;if(e===null)return Re.f|=bn,t;if((e.f&Ks)===0){if((e.f&zl)===0)throw!e.parent&&t instanceof Error&&ya(t),t;e.b.error(t)}else Kn(t,e)}function Kn(t,e){for(;e!==null;){if((e.f&zl)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t instanceof Error&&ya(t),t}function ya(t){const e=xu.get(t);e&&(Pl(t,"message",{value:e.message}),Pl(t,"stack",{value:e.stack}))}const Bl=new Set;let Xe=null,$s=null,Dl=new Set,wn=[],el=null,Vl=!1,_s=!1;const xl=class xl{constructor(){Ce(this,_r);fr(this,"current",new Map);Ce(this,Is,new Map);Ce(this,ss,new Set);Ce(this,ln,0);Ce(this,Fs,null);Ce(this,qs,!1);Ce(this,qn,[]);Ce(this,ls,[]);Ce(this,On,[]);Ce(this,on,[]);Ce(this,os,[]);Ce(this,Os,[]);Ce(this,Bs,[]);fr(this,"skipped_effects",new Set)}process(e){var o;wn=[],$s=null;for(const a of e)qt(this,_r,Rc).call(this,a);if(Z(this,qn).length===0&&Z(this,ln)===0){qt(this,_r,sa).call(this);var r=Z(this,On),l=Z(this,on);be(this,On,[]),be(this,on,[]),be(this,os,[]),$s=Xe,Xe=null,Ea(r),Ea(l),Xe===null?Xe=this:Bl.delete(this),(o=Z(this,Fs))==null||o.resolve()}else qt(this,_r,Cl).call(this,Z(this,On)),qt(this,_r,Cl).call(this,Z(this,on)),qt(this,_r,Cl).call(this,Z(this,os));for(const a of Z(this,qn))Zn(a);for(const a of Z(this,ls))Zn(a);be(this,qn,[]),be(this,ls,[])}capture(e,r){Z(this,Is).has(e)||Z(this,Is).set(e,r),this.current.set(e,e.v)}activate(){Xe=this}deactivate(){Xe=null,$s=null;for(const e of Dl)if(Dl.delete(e),e(),Xe!==null)break}neuter(){be(this,qs,!0)}flush(){wn.length>0?ka():qt(this,_r,sa).call(this),Xe===this&&(Z(this,ln)===0&&Bl.delete(this),this.deactivate())}increment(){be(this,ln,Z(this,ln)+1)}decrement(){if(be(this,ln,Z(this,ln)-1),Z(this,ln)===0){for(const e of Z(this,Os))Ut(e,rr),Jn(e);for(const e of Z(this,Bs))Ut(e,Yr),Jn(e);be(this,On,[]),be(this,on,[]),this.flush()}else this.deactivate()}add_callback(e){Z(this,ss).add(e)}settled(){return(Z(this,Fs)??be(this,Fs,Bc())).promise}static ensure(){if(Xe===null){const e=Xe=new xl;Bl.add(Xe),_s||xl.enqueue(()=>{Xe===e&&e.flush()})}return Xe}static enqueue(e){Gr(e)}};Is=new WeakMap,ss=new WeakMap,ln=new WeakMap,Fs=new WeakMap,qs=new WeakMap,qn=new WeakMap,ls=new WeakMap,On=new WeakMap,on=new WeakMap,os=new WeakMap,Os=new WeakMap,Bs=new WeakMap,_r=new WeakSet,Rc=function(e){var d;e.f^=Rt;for(var r=e.first;r!==null;){var l=r.f,o=(l&(jr|mn))!==0,a=o&&(l&Rt)!==0,c=a||(l&vr)!==0||this.skipped_effects.has(r);if(!c&&r.fn!==null){if(o)r.f^=Rt;else if((l&Rl)!==0)Z(this,on).push(r);else if((l&Rt)===0)if((l&Fl)!==0){var f=(d=r.b)!=null&&d.is_pending()?Z(this,ls):Z(this,qn);f.push(r)}else nl(r)&&((r.f&hn)!==0&&Z(this,os).push(r),Zn(r));var u=r.first;if(u!==null){r=u;continue}}var v=r.parent;for(r=r.next;r===null&&v!==null;)r=v.next,v=v.parent}},Cl=function(e){for(const r of e)((r.f&rr)!==0?Z(this,Os):Z(this,Bs)).push(r),Ut(r,Rt);e.length=0},sa=function(){if(!Z(this,qs))for(const e of Z(this,ss))e();Z(this,ss).clear()};let Kr=xl;function xa(t){var e=_s;_s=!0;try{for(var r;;){if(yu(),wn.length===0&&!wu()&&(Xe==null||Xe.flush(),wn.length===0))return el=null,r;ka()}}finally{_s=e}}function ka(){var t=Qn;Vl=!0;try{var e=0;for(Da(!0);wn.length>0;){var r=Kr.ensure();if(e++>1e3){var l,o;ku()}r.process(wn),Jr.clear()}}finally{Vl=!1,Da(t),el=null}}function ku(){try{Gc()}catch(t){Kn(t,el)}}let Tr=null;function Ea(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var l=t[r++];if((l.f&(gn|vr))===0&&nl(l)&&(Tr=[],Zn(l),l.deps===null&&l.first===null&&l.nodes_start===null&&(l.teardown===null&&l.ac===null?qa(l):l.fn=null),(Tr==null?void 0:Tr.length)>0)){Jr.clear();for(const o of Tr)Zn(o);Tr=[]}}Tr=null}}function Jn(t){for(var e=el=t;e.parent!==null;){e=e.parent;var r=e.f;if(Vl&&e===ze&&(r&hn)!==0)return;if((r&(mn|jr))!==0){if((r&Rt)===0)return;e.f^=Rt}}wn.push(e)}function Eu(t){let e=0,r=Pr(0),l;return()=>{qu()&&(s(r),Kl(()=>(e===0&&(l=mr(()=>t(()=>ys(r)))),e+=1,()=>{Gr(()=>{e-=1,e===0&&(l==null||l(),l=void 0,ys(r))})})))}}var Au=pn|Hn|zl;function Nu(t,e,r){new Su(t,e,r)}class Su{constructor(e,r,l){Ce(this,Vt);fr(this,"parent");Ce(this,wr,!1);Ce(this,ir);Ce(this,Zo,null);Ce(this,Nr);Ce(this,Bn);Ce(this,Sr);Ce(this,cr,null);Ce(this,Ht,null);Ce(this,Cr,null);Ce(this,an,null);Ce(this,Dn,0);Ce(this,cn,0);Ce(this,Vn,!1);Ce(this,un,null);Ce(this,kl,()=>{Z(this,un)&&Lr(Z(this,un),Z(this,Dn))});Ce(this,El,Eu(()=>(be(this,un,Pr(Z(this,Dn))),()=>{be(this,un,null)})));be(this,ir,e),be(this,Nr,r),be(this,Bn,l),this.parent=ze.b,be(this,wr,!!Z(this,Nr).pending),be(this,Sr,yn(()=>{ze.b=this;{try{be(this,cr,zt(()=>l(Z(this,ir))))}catch(o){this.error(o)}Z(this,cn)>0?qt(this,Vt,jl).call(this):be(this,wr,!1)}},Au))}is_pending(){return Z(this,wr)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!Z(this,Nr).pending}update_pending_count(e){qt(this,Vt,la).call(this,e),be(this,Dn,Z(this,Dn)+e),Dl.add(Z(this,kl))}get_effect_pending(){return Z(this,El).call(this),s(Z(this,un))}error(e){var r=Z(this,Nr).onerror;let l=Z(this,Nr).failed;if(Z(this,Vn)||!r&&!l)throw e;Z(this,cr)&&(Jt(Z(this,cr)),be(this,cr,null)),Z(this,Ht)&&(Jt(Z(this,Ht)),be(this,Ht,null)),Z(this,Cr)&&(Jt(Z(this,Cr)),be(this,Cr,null));var o=!1,a=!1;const c=()=>{if(o){fu();return}o=!0,a&&Zc(),Kr.ensure(),be(this,Dn,0),Z(this,Cr)!==null&&dr(Z(this,Cr),()=>{be(this,Cr,null)}),be(this,wr,this.has_pending_snippet()),be(this,cr,qt(this,Vt,Ml).call(this,()=>(be(this,Vn,!1),zt(()=>Z(this,Bn).call(this,Z(this,ir)))))),Z(this,cn)>0?qt(this,Vt,jl).call(this):be(this,wr,!1)};var f=Re;try{It(null),a=!0,r==null||r(e,c),a=!1}catch(u){Kn(u,Z(this,Sr)&&Z(this,Sr).parent)}finally{It(f)}l&&Gr(()=>{be(this,Cr,qt(this,Vt,Ml).call(this,()=>{be(this,Vn,!0);try{return zt(()=>{l(Z(this,ir),()=>e,()=>c)})}catch(u){return Kn(u,Z(this,Sr).parent),null}finally{be(this,Vn,!1)}}))})}}wr=new WeakMap,ir=new WeakMap,Zo=new WeakMap,Nr=new WeakMap,Bn=new WeakMap,Sr=new WeakMap,cr=new WeakMap,Ht=new WeakMap,Cr=new WeakMap,an=new WeakMap,Dn=new WeakMap,cn=new WeakMap,Vn=new WeakMap,un=new WeakMap,kl=new WeakMap,El=new WeakMap,Vt=new WeakSet,Ym=function(){try{be(this,cr,zt(()=>Z(this,Bn).call(this,Z(this,ir))))}catch(e){this.error(e)}be(this,wr,!1)},Um=function(){const e=Z(this,Nr).pending;e&&(be(this,Ht,zt(()=>e(Z(this,ir)))),Kr.enqueue(()=>{be(this,cr,qt(this,Vt,Ml).call(this,()=>(Kr.ensure(),zt(()=>Z(this,Bn).call(this,Z(this,ir)))))),Z(this,cn)>0?qt(this,Vt,jl).call(this):(dr(Z(this,Ht),()=>{be(this,Ht,null)}),be(this,wr,!1))}))},Ml=function(e){var r=ze,l=Re,o=rt;nr(Z(this,Sr)),It(Z(this,Sr)),Wr(Z(this,Sr).ctx);try{return e()}catch(a){return wa(a),null}finally{nr(r),It(l),Wr(o)}},jl=function(){const e=Z(this,Nr).pending;Z(this,cr)!==null&&(be(this,an,document.createDocumentFragment()),Cu(Z(this,cr),Z(this,an))),Z(this,Ht)===null&&be(this,Ht,zt(()=>e(Z(this,ir))))},la=function(e){var r;if(!this.has_pending_snippet()){this.parent&&qt(r=this.parent,Vt,la).call(r,e);return}be(this,cn,Z(this,cn)+e),Z(this,cn)===0&&(be(this,wr,!1),Z(this,Ht)&&dr(Z(this,Ht),()=>{be(this,Ht,null)}),Z(this,an)&&(Z(this,ir).before(Z(this,an)),be(this,an,null)))};function Cu(t,e){for(var r=t.nodes_start,l=t.nodes_end;r!==null;){var o=r===l?null:xs(r);e.append(r),r=o}}function Mu(t,e,r){const l=_n()?ws:Yl;if(e.length===0){r(t.map(l));return}var o=Xe,a=ze,c=ju();Promise.all(e.map(f=>Tu(f))).then(f=>{o==null||o.activate(),c();try{r([...t.map(l),...f])}catch(u){(a.f&gn)===0&&Kn(u,a)}o==null||o.deactivate(),Aa()}).catch(f=>{Kn(f,a)})}function ju(){var t=ze,e=Re,r=rt,l=Xe;return function(){nr(t),It(e),Wr(r),l==null||l.activate()}}function Aa(){nr(null),It(null),Wr(null)}function ws(t){var e=Gt|rr,r=Re!==null&&(Re.f&Gt)!==0?Re:null;return ze===null||r!==null&&(r.f&tr)!==0?e|=tr:ze.f|=Hn,{ctx:rt,deps:null,effects:null,equals:ma,f:e,fn:t,reactions:null,rv:0,v:xt,wv:0,parent:r??ze,ac:null}}function Tu(t,e){let r=ze;r===null&&Yc();var l=r.b,o=void 0,a=Pr(xt),c=null,f=!Re;return Du(()=>{try{var u=t();c&&Promise.resolve(u).catch(()=>{})}catch(g){u=Promise.reject(g)}var v=()=>u;o=(c==null?void 0:c.then(v,v))??Promise.resolve(u),c=o;var d=Xe,h=l.is_pending();f&&(l.update_pending_count(1),h||d.increment());const m=(g,p=void 0)=>{c=null,h||d.activate(),p?p!==ql&&(a.f|=bn,Lr(a,p)):((a.f&bn)!==0&&(a.f^=bn),Lr(a,g)),f&&(l.update_pending_count(-1),h||d.decrement()),Aa()};if(o.then(m,g=>m(null,g||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(u=>{function v(d){function h(){d===o?u(a):v(o)}d.then(h,h)}v(o)})}function C(t){const e=ws(t);return Ya(e),e}function Yl(t){const e=ws(t);return e.equals=pa,e}function Na(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Jt(e[r])}}function Pu(t){for(var e=t.parent;e!==null;){if((e.f&Gt)===0)return e;e=e.parent}return null}function Ul(t){var e,r=ze;nr(Pu(t));try{Na(t),e=Ka(t)}finally{nr(r)}return e}function Sa(t){var e=Ul(t);if(t.equals(e)||(t.v=e,t.wv=Ha()),!xn){var r=(Qr||(t.f&tr)!==0)&&t.deps!==null?Yr:Rt;Ut(t,r)}}const Jr=new Map;function Pr(t,e){var r={f:0,v:t,reactions:null,equals:ma,rv:0,wv:0};return r}function re(t,e){const r=Pr(t);return Ya(r),r}function Wl(t,e=!1,r=!0){var o;const l=Pr(t);return e||(l.equals=pa),Gn&&r&&rt!==null&&rt.l!==null&&((o=rt.l).s??(o.s=[])).push(l),l}function F(t,e,r=!1){Re!==null&&(!hr||(Re.f&ca)!==0)&&_n()&&(Re.f&(Gt|hn|Fl|ca))!==0&&!(Ot!=null&&Ot.includes(t))&&Qc();let l=r?Me(e):e;return Lr(t,l)}function Lr(t,e){if(!t.equals(e)){var r=t.v;xn?Jr.set(t,e):Jr.set(t,r),t.v=e;var l=Kr.ensure();l.capture(t,r),(t.f&Gt)!==0&&((t.f&rr)!==0&&Ul(t),Ut(t,(t.f&tr)===0?Rt:Yr)),t.wv=Ha(),Ca(t,rr),_n()&&ze!==null&&(ze.f&Rt)!==0&&(ze.f&(jr|mn))===0&&(sr===null?Yu([t]):sr.push(t))}return e}function ys(t){F(t,t.v+1)}function Ca(t,e){var r=t.reactions;if(r!==null)for(var l=_n(),o=r.length,a=0;a<o;a++){var c=r[a],f=c.f;if(!(!l&&c===ze)){var u=(f&rr)===0;u&&Ut(c,e),(f&Gt)!==0?Ca(c,Yr):u&&((f&hn)!==0&&Tr!==null&&Tr.push(c),Jn(c))}}}function Me(t){if(typeof t!="object"||t===null||Ur in t)return t;const e=Us(t);if(e!==aa&&e!==Fc)return t;var r=new Map,l=dn(t),o=re(0),a=kn,c=f=>{if(kn===a)return f();var u=Re,v=kn;It(null),Wa(a);var d=f();return It(u),Wa(v),d};return l&&r.set("length",re(t.length)),new Proxy(t,{defineProperty(f,u,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Jc();var d=r.get(u);return d===void 0?d=c(()=>{var h=re(v.value);return r.set(u,h),h}):F(d,v.value,!0),!0},deleteProperty(f,u){var v=r.get(u);if(v===void 0){if(u in f){const d=c(()=>re(xt));r.set(u,d),ys(o)}}else F(v,xt),ys(o);return!0},get(f,u,v){var g;if(u===Ur)return t;var d=r.get(u),h=u in f;if(d===void 0&&(!h||(g=Vr(f,u))!=null&&g.writable)&&(d=c(()=>{var p=Me(h?f[u]:xt),_=re(p);return _}),r.set(u,d)),d!==void 0){var m=s(d);return m===xt?void 0:m}return Reflect.get(f,u,v)},getOwnPropertyDescriptor(f,u){var v=Reflect.getOwnPropertyDescriptor(f,u);if(v&&"value"in v){var d=r.get(u);d&&(v.value=s(d))}else if(v===void 0){var h=r.get(u),m=h==null?void 0:h.v;if(h!==void 0&&m!==xt)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return v},has(f,u){var m;if(u===Ur)return!0;var v=r.get(u),d=v!==void 0&&v.v!==xt||Reflect.has(f,u);if(v!==void 0||ze!==null&&(!d||(m=Vr(f,u))!=null&&m.writable)){v===void 0&&(v=c(()=>{var g=d?Me(f[u]):xt,p=re(g);return p}),r.set(u,v));var h=s(v);if(h===xt)return!1}return d},set(f,u,v,d){var y;var h=r.get(u),m=u in f;if(l&&u==="length")for(var g=v;g<h.v;g+=1){var p=r.get(g+"");p!==void 0?F(p,xt):g in f&&(p=c(()=>re(xt)),r.set(g+"",p))}if(h===void 0)(!m||(y=Vr(f,u))!=null&&y.writable)&&(h=c(()=>re(void 0)),F(h,Me(v)),r.set(u,h));else{m=h.v!==xt;var _=c(()=>Me(v));F(h,_)}var b=Reflect.getOwnPropertyDescriptor(f,u);if(b!=null&&b.set&&b.set.call(d,v),!m){if(l&&typeof u=="string"){var w=r.get("length"),k=Number(u);Number.isInteger(k)&&k>=w.v&&F(w,k+1)}ys(o)}return!0},ownKeys(f){s(o);var u=Reflect.ownKeys(f).filter(h=>{var m=r.get(h);return m===void 0||m.v!==xt});for(var[v,d]of r)d.v!==xt&&!(v in f)&&u.push(v);return u},setPrototypeOf(){Xc()}})}var Hl,Ma,ja,Ta;function Lu(){if(Hl===void 0){Hl=window,Ma=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;ja=Vr(e,"firstChild").get,Ta=Vr(e,"nextSibling").get,ia(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ia(r)&&(r.__t=void 0)}}function Xr(t=""){return document.createTextNode(t)}function Kt(t){return ja.call(t)}function xs(t){return Ta.call(t)}function I(t,e){return Kt(t)}function G(t,e=!1){{var r=Kt(t);return r instanceof Comment&&r.data===""?xs(r):r}}function M(t,e=1,r=!1){let l=t;for(;e--;)l=xs(l);return l}function Ru(t){t.textContent=""}function tl(){return!1}let Pa=!1;function zu(){Pa||(Pa=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Xn(t){var e=Re,r=ze;It(null),nr(null);try{return t()}finally{It(e),nr(r)}}function Iu(t,e,r,l=r){t.addEventListener(e,()=>Xn(r));const o=t.__on_r;o?t.__on_r=()=>{o(),l(!0)}:t.__on_r=()=>l(!0),zu()}function La(t){ze===null&&Re===null&&Hc(),Re!==null&&(Re.f&tr)!==0&&ze===null&&Wc(),xn&&Uc()}function Fu(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function kr(t,e,r,l=!0){var o=ze;o!==null&&(o.f&vr)!==0&&(t|=vr);var a={ctx:rt,deps:null,nodes_start:null,nodes_end:null,f:t|rr,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Zn(a),a.f|=Ks}catch(u){throw Jt(a),u}else e!==null&&Jn(a);if(l){var c=a;if(r&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&Hn)===0&&(c=c.first),c!==null&&(c.parent=o,o!==null&&Fu(c,o),Re!==null&&(Re.f&Gt)!==0&&(t&mn)===0)){var f=Re;(f.effects??(f.effects=[])).push(c)}}return a}function qu(){return Re!==null&&!hr}function Ou(t){const e=kr(Hs,null,!1);return Ut(e,Rt),e.teardown=t,e}function ue(t){La();var e=ze.f,r=!Re&&(e&jr)!==0&&(e&Ks)===0;if(r){var l=rt;(l.e??(l.e=[])).push(t)}else return Ra(t)}function Ra(t){return kr(Rl|ua,t,!1)}function rl(t){return La(),kr(Hs|ua,t,!0)}function Bu(t){Kr.ensure();const e=kr(mn|Hn,t,!0);return(r={})=>new Promise(l=>{r.outro?dr(e,()=>{Jt(e),l(void 0)}):(Jt(e),l(void 0))})}function Gl(t){return kr(Rl,t,!1)}function Du(t){return kr(Fl|Hn,t,!0)}function Kl(t,e=0){return kr(Hs|e,t,!0)}function ee(t,e=[],r=[]){Mu(e,r,l=>{kr(Hs,()=>t(...l.map(s)),!0)})}function yn(t,e=0){var r=kr(hn|e,t,!0);return r}function zt(t,e=!0){return kr(jr|Hn,t,!0,e)}function za(t){var e=t.teardown;if(e!==null){const r=xn,l=Re;Va(!0),It(null);try{e.call(null)}finally{Va(r),It(l)}}}function Ia(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const o=r.ac;o!==null&&Xn(()=>{o.abort(ql)});var l=r.next;(r.f&mn)!==0?r.parent=null:Jt(r,e),r=l}}function Vu(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&jr)===0&&Jt(e),e=r}}function Jt(t,e=!0){var r=!1;(e||(t.f&Dc)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Fa(t.nodes_start,t.nodes_end),r=!0),Ia(t,e&&!r),sl(t,0),Ut(t,gn);var l=t.transitions;if(l!==null)for(const a of l)a.stop();za(t);var o=t.parent;o!==null&&o.first!==null&&qa(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Fa(t,e){for(;t!==null;){var r=t===e?null:xs(t);t.remove(),t=r}}function qa(t){var e=t.parent,r=t.prev,l=t.next;r!==null&&(r.next=l),l!==null&&(l.prev=r),e!==null&&(e.first===t&&(e.first=l),e.last===t&&(e.last=r))}function dr(t,e){var r=[];Jl(t,r,!0),Oa(r,()=>{Jt(t),e&&e()})}function Oa(t,e){var r=t.length;if(r>0){var l=()=>--r||e();for(var o of t)o.out(l)}else e()}function Jl(t,e,r){if((t.f&vr)===0){if(t.f^=vr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var l=t.first;l!==null;){var o=l.next,a=(l.f&pn)!==0||(l.f&jr)!==0;Jl(l,e,a?r:!1),l=o}}}function ks(t){Ba(t,!0)}function Ba(t,e){if((t.f&vr)!==0){t.f^=vr,(t.f&Rt)===0&&(Ut(t,rr),Jn(t));for(var r=t.first;r!==null;){var l=r.next,o=(r.f&pn)!==0||(r.f&jr)!==0;Ba(r,o?e:!1),r=l}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let Qn=!1;function Da(t){Qn=t}let xn=!1;function Va(t){xn=t}let Re=null,hr=!1;function It(t){Re=t}let ze=null;function nr(t){ze=t}let Ot=null;function Ya(t){Re!==null&&(Ot===null?Ot=[t]:Ot.push(t))}let Bt=null,Xt=0,sr=null;function Yu(t){sr=t}let Ua=1,Es=0,kn=Es;function Wa(t){kn=t}let Qr=!1;function Ha(){return++Ua}function nl(t){var h;var e=t.f;if((e&rr)!==0)return!0;if((e&Yr)!==0){var r=t.deps,l=(e&tr)!==0;if(r!==null){var o,a,c=(e&Gs)!==0,f=l&&ze!==null&&!Qr,u=r.length;if((c||f)&&(ze===null||(ze.f&gn)===0)){var v=t,d=v.parent;for(o=0;o<u;o++)a=r[o],(c||!((h=a==null?void 0:a.reactions)!=null&&h.includes(v)))&&(a.reactions??(a.reactions=[])).push(v);c&&(v.f^=Gs),f&&d!==null&&(d.f&tr)===0&&(v.f^=tr)}for(o=0;o<u;o++)if(a=r[o],nl(a)&&Sa(a),a.wv>t.wv)return!0}(!l||ze!==null&&!Qr)&&Ut(t,Rt)}return!1}function Ga(t,e,r=!0){var l=t.reactions;if(l!==null&&!(Ot!=null&&Ot.includes(t)))for(var o=0;o<l.length;o++){var a=l[o];(a.f&Gt)!==0?Ga(a,e,!1):e===a&&(r?Ut(a,rr):(a.f&Rt)!==0&&Ut(a,Yr),Jn(a))}}function Ka(t){var _;var e=Bt,r=Xt,l=sr,o=Re,a=Qr,c=Ot,f=rt,u=hr,v=kn,d=t.f;Bt=null,Xt=0,sr=null,Qr=(d&tr)!==0&&(hr||!Qn||Re===null),Re=(d&(jr|mn))===0?t:null,Ot=null,Wr(t.ctx),hr=!1,kn=++Es,t.ac!==null&&(Xn(()=>{t.ac.abort(ql)}),t.ac=null);try{t.f|=Il;var h=t.fn,m=h(),g=t.deps;if(Bt!==null){var p;if(sl(t,Xt),g!==null&&Xt>0)for(g.length=Xt+Bt.length,p=0;p<Bt.length;p++)g[Xt+p]=Bt[p];else t.deps=g=Bt;if(!Qr||(d&Gt)!==0&&t.reactions!==null)for(p=Xt;p<g.length;p++)((_=g[p]).reactions??(_.reactions=[])).push(t)}else g!==null&&Xt<g.length&&(sl(t,Xt),g.length=Xt);if(_n()&&sr!==null&&!hr&&g!==null&&(t.f&(Gt|Yr|rr))===0)for(p=0;p<sr.length;p++)Ga(sr[p],t);return o!==null&&o!==t&&(Es++,sr!==null&&(l===null?l=sr:l.push(...sr))),(t.f&bn)!==0&&(t.f^=bn),m}catch(b){return wa(b)}finally{t.f^=Il,Bt=e,Xt=r,sr=l,Re=o,Qr=a,Ot=c,Wr(f),hr=u,kn=v}}function Uu(t,e){let r=e.reactions;if(r!==null){var l=Ic.call(r,t);if(l!==-1){var o=r.length-1;o===0?r=e.reactions=null:(r[l]=r[o],r.pop())}}r===null&&(e.f&Gt)!==0&&(Bt===null||!Bt.includes(e))&&(Ut(e,Yr),(e.f&(tr|Gs))===0&&(e.f^=Gs),Na(e),sl(e,0))}function sl(t,e){var r=t.deps;if(r!==null)for(var l=e;l<r.length;l++)Uu(t,r[l])}function Zn(t){var e=t.f;if((e&gn)===0){Ut(t,Rt);var r=ze,l=Qn;ze=t,Qn=!0;try{(e&hn)!==0?Vu(t):Ia(t),za(t);var o=Ka(t);t.teardown=typeof o=="function"?o:null,t.wv=Ua;var a;yt&&hu&&(t.f&rr)!==0&&t.deps}finally{Qn=l,ze=r}}}async function Wu(){await Promise.resolve(),xa()}function s(t){var e=t.f,r=(e&Gt)!==0;if(Re!==null&&!hr){var l=ze!==null&&(ze.f&gn)!==0;if(!l&&!(Ot!=null&&Ot.includes(t))){var o=Re.deps;if((Re.f&Il)!==0)t.rv<Es&&(t.rv=Es,Bt===null&&o!==null&&o[Xt]===t?Xt++:Bt===null?Bt=[t]:(!Qr||!Bt.includes(t))&&Bt.push(t));else{(Re.deps??(Re.deps=[])).push(t);var a=t.reactions;a===null?t.reactions=[Re]:a.includes(Re)||a.push(Re)}}}else if(r&&t.deps===null&&t.effects===null){var c=t,f=c.parent;f!==null&&(f.f&tr)===0&&(c.f^=tr)}if(xn){if(Jr.has(t))return Jr.get(t);if(r){c=t;var u=c.v;return((c.f&Rt)===0&&c.reactions!==null||Ja(c))&&(u=Ul(c)),Jr.set(c,u),u}}else r&&(c=t,nl(c)&&Sa(c));if((t.f&bn)!==0)throw t.v;return t.v}function Ja(t){if(t.v===xt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Jr.has(e)||(e.f&Gt)!==0&&Ja(e))return!0;return!1}function mr(t){var e=hr;try{return hr=!0,t()}finally{hr=e}}const Hu=-7169;function Ut(t,e){t.f=t.f&Hu|e}function Gu(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ur in t)Xl(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Ur in r&&Xl(r)}}}function Xl(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let l in t)try{Xl(t[l],e)}catch{}const r=Us(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const l=oa(r);for(let o in l){const a=l[o].get;if(a)try{a.call(t)}catch{}}}}}const Ku=["touchstart","touchmove"];function Ju(t){return Ku.includes(t)}const Xa=new Set,Ql=new Set;function Xu(t,e,r,l={}){function o(a){if(l.capture||As.call(e,a),!a.cancelBubble)return Xn(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Gr(()=>{e.addEventListener(t,o,l)}):e.addEventListener(t,o,l),o}function En(t,e,r,l,o){var a={capture:l,passive:o},c=Xu(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ou(()=>{e.removeEventListener(t,c,a)})}function vt(t){for(var e=0;e<t.length;e++)Xa.add(t[e]);for(var r of Ql)r(t)}let Qa=null;function As(t){var k;var e=this,r=e.ownerDocument,l=t.type,o=((k=t.composedPath)==null?void 0:k.call(t))||[],a=o[0]||t.target;Qa=t;var c=0,f=Qa===t&&t.__root;if(f){var u=o.indexOf(f);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var v=o.indexOf(e);if(v===-1)return;u<=v&&(c=u)}if(a=o[c]||t.target,a!==e){Pl(t,"currentTarget",{configurable:!0,get(){return a||r}});var d=Re,h=ze;It(null),nr(null);try{for(var m,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var _=a["__"+l];if(_!=null&&(!a.disabled||t.target===a))if(dn(_)){var[b,...w]=_;b.apply(a,[t,...w])}else _.call(a,t)}catch(y){m?g.push(y):m=y}if(t.cancelBubble||p===e||p===null)break;a=p}if(m){for(let y of g)queueMicrotask(()=>{throw y});throw m}}finally{t.__root=e,delete t.currentTarget,It(d),nr(h)}}}function Zl(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function An(t,e){var r=ze;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function W(t,e){var r=(e&ha)!==0,l=(e&cu)!==0,o,a=!t.startsWith("<!>");return()=>{o===void 0&&(o=Zl(a?t:"<!>"+t),r||(o=Kt(o)));var c=l||Ma?document.importNode(o,!0):o.cloneNode(!0);if(r){var f=Kt(c),u=c.lastChild;An(f,u)}else An(c,c);return c}}function Qu(t,e,r="svg"){var l=!t.startsWith("<!>"),o=(e&ha)!==0,a=`<${r}>${l?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var f=Zl(a),u=Kt(f);if(o)for(c=document.createDocumentFragment();Kt(u);)c.appendChild(Kt(u));else c=Kt(u)}var v=c.cloneNode(!0);if(o){var d=Kt(v),h=v.lastChild;An(d,h)}else An(v,v);return v}}function ye(t,e){return Qu(t,e,"svg")}function Zu(t=""){{var e=Xr(t+"");return An(e,e),e}}function he(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Xr();return t.append(e,r),An(e,r),t}function S(t,e){t!==null&&t.before(e)}let $l=!0;function fe(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function $u(t,e){return ef(t,e)}const $n=new Map;function ef(t,{target:e,anchor:r,props:l={},events:o,context:a,intro:c=!0}){Lu();var f=new Set,u=h=>{for(var m=0;m<h.length;m++){var g=h[m];if(!f.has(g)){f.add(g);var p=Ju(g);e.addEventListener(g,As,{passive:p});var _=$n.get(g);_===void 0?(document.addEventListener(g,As,{passive:p}),$n.set(g,1)):$n.set(g,_+1)}}};u(Tl(Xa)),Ql.add(u);var v=void 0,d=Bu(()=>{var h=r??e.appendChild(Xr());return Nu(h,{pending:()=>{}},m=>{if(a){me({});var g=rt;g.c=a}o&&(l.$$events=o),$l=c,v=t(m,l)||{},$l=!0,a&&ge()}),()=>{var p;for(var m of f){e.removeEventListener(m,As);var g=$n.get(m);--g===0?(document.removeEventListener(m,As),$n.delete(m)):$n.set(m,g)}Ql.delete(u),h!==r&&((p=h.parentNode)==null||p.removeChild(h))}});return tf.set(v,d),v}let tf=new WeakMap;const eo=0,ll=1,to=2;function Za(t,e,r,l,o){var a=t,c=_n(),f=rt,u=xt,v,d,h,m=c?Pr(void 0):Wl(void 0,!1,!1),g=c?Pr(void 0):Wl(void 0,!1,!1),p=!1;function _(w,k){p=!0,k&&(nr(b),It(b),Wr(f));try{w===eo&&r&&(v?ks(v):v=zt(()=>r(a))),w===to&&o&&(h?ks(h):h=zt(()=>o(a,g))),w!==eo&&v&&dr(v,()=>v=null),w!==ll&&d&&dr(d,()=>d=null),w!==to&&h&&dr(h,()=>h=null)}finally{k&&(Wr(null),It(null),nr(null),xa())}}var b=yn(()=>{if(u!==(u=e())){if(qc(u)){var w=u;p=!1,w.then(k=>{w===u&&(Lr(m,k),_(ll,!0))},k=>{if(w===u&&(Lr(g,k),_(to,!0),!o))throw g.v}),Gr(()=>{p||_(eo,!0)})}else Lr(m,u),_(ll,!1);return()=>u=xt}})}function Y(t,e,r=!1){var l=t,o=null,a=null,c=xt,f=r?pn:0,u=!1;const v=(g,p=!0)=>{u=!0,m(p,g)};var d=null;function h(){d!==null&&(d.lastChild.remove(),l.before(d),d=null);var g=c?o:a,p=c?a:o;g&&ks(g),p&&dr(p,()=>{c?a=null:o=null})}const m=(g,p)=>{if(c!==(c=g)){var _=tl(),b=l;if(_&&(d=document.createDocumentFragment(),d.append(b=Xr())),c?o??(o=p&&zt(()=>p(b))):a??(a=p&&zt(()=>p(b))),_){var w=Xe,k=c?o:a,y=c?a:o;k&&w.skipped_effects.delete(k),y&&w.skipped_effects.add(y),w.add_callback(h)}else h()}};yn(()=>{u=!1,e(v),u||m(null,null)},f)}function Nn(t,e,r){var l=t,o=xt,a,c,f=null,u=_n()?du:ga;function v(){a&&dr(a),f!==null&&(f.lastChild.remove(),l.before(f),f=null),a=c}yn(()=>{if(u(o,o=e())){var d=l,h=tl();h&&(f=document.createDocumentFragment(),f.append(d=Xr())),c=zt(()=>r(d)),h?Xe.add_callback(v):v()}})}function lt(t,e){return e}function rf(t,e,r){for(var l=t.items,o=[],a=e.length,c=0;c<a;c++)Jl(e[c].e,o,!0);var f=a>0&&o.length===0&&r!==null;if(f){var u=r.parentNode;Ru(u),u.append(r),l.clear(),Er(t,e[0].prev,e[a-1].next)}Oa(o,()=>{for(var v=0;v<a;v++){var d=e[v];f||(l.delete(d.k),Er(t,d.prev,d.next)),Jt(d.e,!f)}})}function nt(t,e,r,l,o,a=null){var c=t,f={flags:e,items:new Map,first:null},u=(e&da)!==0;if(u){var v=t;c=v.appendChild(Xr())}var d=null,h=!1,m=new Map,g=Yl(()=>{var w=r();return dn(w)?w:w==null?[]:Tl(w)}),p,_;function b(){nf(_,p,f,m,c,o,e,l,r),a!==null&&(p.length===0?d?ks(d):d=zt(()=>a(c)):d!==null&&dr(d,()=>{d=null}))}yn(()=>{_??(_=ze),p=s(g);var w=p.length;if(!(h&&w===0)){h=w===0;var k,y,E,N;if(tl()){var A=new Set,P=Xe;for(y=0;y<w;y+=1){E=p[y],N=l(E,y);var O=f.items.get(N)??m.get(N);O?(e&(Js|Xs))!==0&&$a(O,E,y,e):(k=ei(null,f,null,null,E,N,y,o,e,r,!0),m.set(N,k)),A.add(N)}for(const[T,H]of f.items)A.has(T)||P.skipped_effects.add(H.e);P.add_callback(b)}else b();s(g)}})}function nf(t,e,r,l,o,a,c,f,u){var X,te,ae,le;var v=(c&$c)!==0,d=(c&(Js|Xs))!==0,h=e.length,m=r.items,g=r.first,p=g,_,b=null,w,k=[],y=[],E,N,A,P;if(v)for(P=0;P<h;P+=1)E=e[P],N=f(E,P),A=m.get(N),A!==void 0&&((X=A.a)==null||X.measure(),(w??(w=new Set)).add(A));for(P=0;P<h;P+=1){if(E=e[P],N=f(E,P),A=m.get(N),A===void 0){var O=l.get(N);if(O!==void 0){l.delete(N),m.set(N,O);var T=b?b.next:p;Er(r,b,O),Er(r,O,T),ro(O,T,o),b=O}else{var H=p?p.e.nodes_start:o;b=ei(H,r,b,b===null?r.first:b.next,E,N,P,a,c,u)}m.set(N,b),k=[],y=[],p=b.next;continue}if(d&&$a(A,E,P,c),(A.e.f&vr)!==0&&(ks(A.e),v&&((te=A.a)==null||te.unfix(),(w??(w=new Set)).delete(A))),A!==p){if(_!==void 0&&_.has(A)){if(k.length<y.length){var j=y[0],L;b=j.prev;var R=k[0],D=k[k.length-1];for(L=0;L<k.length;L+=1)ro(k[L],j,o);for(L=0;L<y.length;L+=1)_.delete(y[L]);Er(r,R.prev,D.next),Er(r,b,R),Er(r,D,j),p=j,b=D,P-=1,k=[],y=[]}else _.delete(A),ro(A,p,o),Er(r,A.prev,A.next),Er(r,A,b===null?r.first:b.next),Er(r,b,A),b=A;continue}for(k=[],y=[];p!==null&&p.k!==N;)(p.e.f&vr)===0&&(_??(_=new Set)).add(p),y.push(p),p=p.next;if(p===null)continue;A=p}k.push(A),b=A,p=A.next}if(p!==null||_!==void 0){for(var z=_===void 0?[]:Tl(_);p!==null;)(p.e.f&vr)===0&&z.push(p),p=p.next;var V=z.length;if(V>0){var K=(c&da)!==0&&h===0?o:null;if(v){for(P=0;P<V;P+=1)(ae=z[P].a)==null||ae.measure();for(P=0;P<V;P+=1)(le=z[P].a)==null||le.fix()}rf(r,z,K)}}v&&Gr(()=>{var oe;if(w!==void 0)for(A of w)(oe=A.a)==null||oe.apply()}),t.first=r.first&&r.first.e,t.last=b&&b.e;for(var J of l.values())Jt(J.e);l.clear()}function $a(t,e,r,l){(l&Js)!==0&&Lr(t.v,e),(l&Xs)!==0?Lr(t.i,r):t.i=r}function ei(t,e,r,l,o,a,c,f,u,v,d){var h=(u&Js)!==0,m=(u&eu)===0,g=h?m?Wl(o,!1,!1):Pr(o):o,p=(u&Xs)===0?c:Pr(c),_={i:p,v:g,k:a,a:null,e:null,prev:r,next:l};try{if(t===null){var b=document.createDocumentFragment();b.append(t=Xr())}return _.e=zt(()=>f(t,g,p,v),vu),_.e.prev=r&&r.e,_.e.next=l&&l.e,r===null?d||(e.first=_):(r.next=_,r.e.next=_.e),l!==null&&(l.prev=_,l.e.prev=_.e),_}finally{}}function ro(t,e,r){for(var l=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==null&&a!==l;){var c=xs(a);o.before(a),a=c}}function Er(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Tt(t,e,r=!1,l=!1,o=!1){var a=t,c="";ee(()=>{var f=ze;if(c!==(c=e()??"")&&(f.nodes_start!==null&&(Fa(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),c!=="")){var u=c+"";r?u=`<svg>${u}</svg>`:l&&(u=`<math>${u}</math>`);var v=Zl(u);if((r||l)&&(v=Kt(v)),An(Kt(v),v.lastChild),r||l)for(;Kt(v);)a.before(Kt(v));else a.before(v)}})}function Rr(t,e,...r){var l=t,o=jt,a;yn(()=>{o!==(o=e())&&(a&&(Jt(a),a=null),a=zt(()=>o(l,...r)))},pn)}function Ns(t,e,r){var l=t,o,a,c=null,f=null;function u(){a&&(dr(a),a=null),c&&(c.lastChild.remove(),l.before(c),c=null),a=f,f=null}yn(()=>{if(o!==(o=e())){var v=tl();if(o){var d=l;v&&(c=document.createDocumentFragment(),c.append(d=Xr()),a&&Xe.skipped_effects.add(a)),f=zt(()=>r(d,o))}v?Xe.add_callback(u):u()}},pn)}function ti(t){var e,r,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=ti(t[e]))&&(l&&(l+=" "),l+=r)}else for(r in t)t[r]&&(l&&(l+=" "),l+=r);return l}function sf(){for(var t,e,r=0,l="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=ti(t))&&(l&&(l+=" "),l+=e);return l}function lf(t){return typeof t=="object"?sf(t):t??""}const ri=[...`
\r\f \v\uFEFF`];function of(t,e,r){var l=t==null?"":""+t;if(e&&(l=l?l+" "+e:e),r){for(var o in r)if(r[o])l=l?l+" "+o:o;else if(l.length)for(var a=o.length,c=0;(c=l.indexOf(o,c))>=0;){var f=c+a;(c===0||ri.includes(l[c-1]))&&(f===l.length||ri.includes(l[f]))?l=(c===0?"":l.substring(0,c))+l.substring(f+1):c=f}}return l===""?null:l}function af(t,e){return t==null?null:String(t)}function kt(t,e,r,l,o,a){var c=t.__className;if(c!==r||c===void 0){var f=of(r,l,a);f==null?t.removeAttribute("class"):e?t.className=f:t.setAttribute("class",f),t.__className=r}else if(a&&o!==a)for(var u in a){var v=!!a[u];(o==null||v!==!!o[u])&&t.classList.toggle(u,v)}return a}function gt(t,e,r,l){var o=t.__style;if(o!==e){var a=af(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return l}const cf=Symbol("is custom element"),uf=Symbol("is html");function q(t,e,r,l){var o=ff(t);o[e]!==(o[e]=r)&&(e==="loading"&&(t[Vc]=r),r==null?t.removeAttribute(e):typeof r!="string"&&vf(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function ff(t){return t.__attributes??(t.__attributes={[cf]:t.nodeName.includes("-"),[uf]:t.namespaceURI===uu})}var ni=new Map;function vf(t){var e=t.getAttribute("is")||t.nodeName,r=ni.get(e);if(r)return r;ni.set(e,r=[]);for(var l,o=t,a=Element.prototype;a!==o;){l=oa(o);for(var c in l)l[c].set&&r.push(c);o=Us(o)}return r}const df=()=>performance.now(),zr={tick:t=>requestAnimationFrame(t),now:()=>df(),tasks:new Set};function si(){const t=zr.now();zr.tasks.forEach(e=>{e.c(t)||(zr.tasks.delete(e),e.f())}),zr.tasks.size!==0&&zr.tick(si)}function hf(t){let e;return zr.tasks.size===0&&zr.tick(si),{promise:new Promise(r=>{zr.tasks.add(e={c:t,f:r})}),abort(){zr.tasks.delete(e)}}}function ol(t,e){Xn(()=>{t.dispatchEvent(new CustomEvent(e))})}function mf(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function li(t){const e={},r=t.split(";");for(const l of r){const[o,a]=l.split(":");if(!o||a===void 0)break;const c=mf(o.trim());e[c]=a.trim()}return e}const gf=t=>t;function oi(t,e,r,l){var o=(t&ou)!==0,a=(t&au)!==0,c=o&&a,f=(t&iu)!==0,u=c?"both":o?"in":"out",v,d=e.inert,h=e.style.overflow,m,g;function p(){return Xn(()=>v??(v=r()(e,(l==null?void 0:l())??{},{direction:u})))}var _={is_global:f,in(){var y;if(e.inert=d,!o){g==null||g.abort(),(y=g==null?void 0:g.reset)==null||y.call(g);return}a||m==null||m.abort(),ol(e,"introstart"),m=no(e,p(),g,1,()=>{ol(e,"introend"),m==null||m.abort(),m=v=void 0,e.style.overflow=h})},out(y){if(!a){y==null||y(),v=void 0;return}e.inert=!0,ol(e,"outrostart"),g=no(e,p(),m,0,()=>{ol(e,"outroend"),y==null||y()})},stop:()=>{m==null||m.abort(),g==null||g.abort()}},b=ze;if((b.transitions??(b.transitions=[])).push(_),o&&$l){var w=f;if(!w){for(var k=b.parent;k&&(k.f&pn)!==0;)for(;(k=k.parent)&&(k.f&hn)===0;);w=!k||(k.f&Ks)!==0}w&&Gl(()=>{mr(()=>_.in())})}}function no(t,e,r,l,o){var a=l===1;if(Wn(e)){var c,f=!1;return Gr(()=>{if(!f){var b=e({direction:a?"in":"out"});c=no(t,b,r,l,o)}}),{abort:()=>{f=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return o(),{abort:jt,deactivate:jt,reset:jt,t:()=>l};const{delay:u=0,css:v,tick:d,easing:h=gf}=e;var m=[];if(a&&r===void 0&&(d&&d(0,1),v)){var g=li(v(0,1));m.push(g,g)}var p=()=>1-l,_=t.animate(m,{duration:u,fill:"forwards"});return _.onfinish=()=>{_.cancel();var b=(r==null?void 0:r.t())??1-l;r==null||r.abort();var w=l-b,k=e.duration*Math.abs(w),y=[];if(k>0){var E=!1;if(v)for(var N=Math.ceil(k/16.666666666666668),A=0;A<=N;A+=1){var P=b+w*h(A/N),O=li(v(P,1-P));y.push(O),E||(E=O.overflow==="hidden")}E&&(t.style.overflow="hidden"),p=()=>{var T=_.currentTime;return b+w*h(T/k)},d&&hf(()=>{if(_.playState!=="running")return!1;var T=p();return d(T,1-T),!0})}_=t.animate(y,{duration:k,fill:"forwards"}),_.onfinish=()=>{p=()=>l,d==null||d(l,1-l),o()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=jt)},deactivate:()=>{o=jt},reset:()=>{l===0&&(d==null||d(1,0))},t:()=>p()}}function ai(t,e,r=e){var l=new WeakSet;Iu(t,"input",async o=>{var a=o?t.defaultValue:t.value;if(a=so(t)?lo(a):a,r(a),Xe!==null&&l.add(Xe),await Wu(),a!==(a=e())){var c=t.selectionStart,f=t.selectionEnd;t.value=a??"",f!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(f,t.value.length))}}),mr(e)==null&&t.value&&(r(so(t)?lo(t.value):t.value),Xe!==null&&l.add(Xe)),Kl(()=>{var o=e();if(t===document.activeElement){var a=$s??Xe;if(l.has(a))return}so(t)&&o===lo(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function so(t){var e=t.type;return e==="number"||e==="range"}function lo(t){return t===""?null:+t}const Nl=class Nl{constructor(e){Ce(this,Al);Ce(this,fn,new WeakMap);Ce(this,as);Ce(this,Ds);be(this,Ds,e)}observe(e,r){var l=Z(this,fn).get(e)||new Set;return l.add(r),Z(this,fn).set(e,l),qt(this,Al,zc).call(this).observe(e,Z(this,Ds)),()=>{var o=Z(this,fn).get(e);o.delete(r),o.size===0&&(Z(this,fn).delete(e),Z(this,as).unobserve(e))}}};fn=new WeakMap,as=new WeakMap,Ds=new WeakMap,Al=new WeakSet,zc=function(){return Z(this,as)??be(this,as,new ResizeObserver(e=>{for(var r of e){Nl.entries.set(r.target,r);for(var l of Z(this,fn).get(r.target)||[])l(r)}}))},fr(Nl,"entries",new WeakMap);let oo=Nl;var pf=new oo({box:"border-box"});function ii(t,e,r){var l=pf.observe(t,()=>r(t[e]));Gl(()=>(mr(()=>r(t[e])),l))}function ci(t,e){return t===e||(t==null?void 0:t[Ur])===e}function Sn(t={},e,r,l){return Gl(()=>{var o,a;return Kl(()=>{o=a,a=[],mr(()=>{t!==r(...a)&&(e(t,...a),o&&ci(r(...o),t)&&e(null,...o))})}),()=>{Gr(()=>{a&&ci(r(...a),t)&&e(null,...a)})}}),t}function bf(t=!1){const e=rt,r=e.l.u;if(!r)return;let l=()=>Gu(e.s);if(t){let o=0,a={};const c=ws(()=>{let f=!1;const u=e.s;for(const v in u)u[v]!==a[v]&&(a[v]=u[v],f=!0);return f&&o++,o});l=()=>s(c)}r.b.length&&rl(()=>{ui(e,l),Ws(r.b)}),ue(()=>{const o=mr(()=>r.m.map(Oc));return()=>{for(const a of o)typeof a=="function"&&a()}}),r.a.length&&ue(()=>{ui(e,l),Ws(r.a)})}function ui(t,e){if(t.l.s)for(const r of t.l.s)s(r);e()}let al=!1;function _f(t){var e=al;try{return al=!1,[t(),al]}finally{al=e}}const wf={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Cn(t,e,r){return new Proxy({props:t,exclude:e},wf)}const yf={get(t,e){let r=t.props.length;for(;r--;){let l=t.props[r];if(Wn(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l)return l[e]}},set(t,e,r){let l=t.props.length;for(;l--;){let o=t.props[l];Wn(o)&&(o=o());const a=Vr(o,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let l=t.props[r];if(Wn(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l){const o=Vr(l,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Ur||e===fa)return!1;for(let r of t.props)if(Wn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Wn(r)&&(r=r()),!!r){for(const l in r)e.includes(l)||e.push(l);for(const l of Object.getOwnPropertySymbols(r))e.includes(l)||e.push(l)}return e}};function lr(...t){return new Proxy({props:t},yf)}function B(t,e,r,l){var y;var o=!Gn||(r&ru)!==0,a=(r&su)!==0,c=(r&lu)!==0,f=l,u=!0,v=()=>(u&&(u=!1,f=c?mr(l):l),f),d;if(a){var h=Ur in t||fa in t;d=((y=Vr(t,e))==null?void 0:y.set)??(h&&e in t?E=>t[e]=E:void 0)}var m,g=!1;a?[m,g]=_f(()=>t[e]):m=t[e],m===void 0&&l!==void 0&&(m=v(),d&&(o&&Kc(),d(m)));var p;if(o?p=()=>{var E=t[e];return E===void 0?v():(u=!0,E)}:p=()=>{var E=t[e];return E!==void 0&&(f=void 0),E===void 0?f:E},o&&(r&nu)===0)return p;if(d){var _=t.$$legacy;return(function(E,N){return arguments.length>0?((!o||!N||_||g)&&d(N?p():E),E):p()})}var b=!1,w=((r&tu)!==0?ws:Yl)(()=>(b=!1,p()));a&&s(w);var k=ze;return(function(E,N){if(arguments.length>0){const A=N?s(w):o&&a?Me(E):E;return F(w,A),b=!0,f!==void 0&&(f=A),E}return xn&&b||(k.f&gn)!==0?w.v:s(w)})}function xf(t){rt===null&&va(),Gn&&rt.l!==null?kf(rt).m.push(t):ue(()=>{const e=mr(t);if(typeof e=="function")return e})}function kf(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ef="5";typeof window<"u"&&((jc=window.__svelte??(window.__svelte={})).v??(jc.v=new Set)).add(Ef),mu();function Af(t){return Ss(t,.5)}function Nf(t){return Ss(t,.75)-Ss(t,.25)}function Ss(t,e){if(qe(t))return Ss(t.v,e);if(qe(e))return Ss(t,e.v);const r=t.length;if(Array.isArray(e)||(e=[e]),!_o(e[0])||Ir(e)<0||Ar(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function l(c,f){const u=(r-1)*f+1,v=Math.floor(u),d=Math.ceil(u);return c[v-1]+(c[d-1]-c[v-1])*(u-Math.floor(u))}const o=ko(t),a=e.map(c=>l(o,c));return e.length==1?a[0]:ht(a)}function fi(t,e){qe(t)&&fi(t.v,e);const r=Zr(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const l=(r[1]-r[0])/e;return We.seq(r[0],r[1],l)}function vi(t){if(qe(t))return vi(t.v);const e=new We.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new We(e)}function ao(t,e){if(qe(t))return ao(t.v,e);e===void 0&&(e=.1);const r=Zr(t),l=(r[1]-r[0])*e;return[r[0]-l,r[1]+l]}function Zr(t){if(qe(t))return Zr(t.v);let e=t[0],r=t[0];for(let l=1;l<t.length;l++)t[l]<e&&(e=t[l]),t[l]>r&&(r=t[l]);return[e,r]}function io(t,e){return qe(t)?io(t.v,e):Math.sqrt(il(t,e))}function il(t,e){if(e===void 0&&(e=!1),qe(t))return il(t.v);const r=Mn(t);let l=0;for(let o=0;o<t.length;o++){const a=t[o]-r;l=l+a*a}return l/(e?t.length:t.length-1)}function Mn(t){return qe(t)?Mn(t.v):di(t)/t.length}function di(t){if(qe(t))return di(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function hi(t){if(qe(t))return hi(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Ir(t){return qe(t)||pr(t)?t.v[co(t.v)-1]:t[co(t)-1]}function co(t){if(qe(t)||pr(t))return co(t.v);let e=1,r=t[0];for(let l=2;l<=t.length;l++)t[l-1]<r&&(e=l,r=t[l-1]);return e}function Ar(t){return qe(t)||pr(t)?t.v[uo(t.v)-1]:t[uo(t)-1]}function uo(t){if(qe(t)||pr(t))return uo(t.v);let e=1,r=t[0];for(let l=2;l<=t.length;l++)t[l-1]>r&&(e=l,r=t[l-1]);return e}const fo=30,Sf=1e-7,Cf=1e-7,mi=1e-13,gi=1e3,Mf=100;function pi(t,e,r,l,o){l===void 0&&(l=gi),r===void 0&&(r=mi),o===void 0&&(o=Mf);let a=r,c=l,f=(c-a)/o;for(let u=0;u<o;u++){let v,d;for(let g=0;g<o;g++){v=a+g*f,d=a+(g+1)*f;const p=e(v),_=e(d);if(p<=t&&_>=t)break}const h=(v+d)/2,m=e(h);if(Math.abs(m-t)<Sf||(a=v,c=d,f=(c-a)/o,f/c<Cf))return h}return(a+c)/2}function bi(t,e=0,r=1){let l=We.zeros(t);for(let o=0;o<t;o++)l.v[o]=e+Math.random()*(r-e);return l}function _i(t,e=0,r=1){let l=We.zeros(t);for(let o=0;o<t;o++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();l.v[o]=a*Math.sin(c)*r+e}return l}function vo(t,e=0,r=1){if(qe(t))return t.apply(o=>vo(o,e,r));const l=1/(Math.sqrt(2)*r);return .5*(1+Tf((t-e)*l))}function ho(t,e=0,r=1){if(qe(t))return t.apply(R=>ho(R,e,r));if(e!==0||r!==1)return ho(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const l=.425,o=5,a=.180625,c=1.6,f=3.3871327179,u=5.0434271938*10,v=1.5929113202*100,d=5.910937472*10,h=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,p=1.4234372777,_=2.75681539,b=1.3067284816,w=1.7023821103*.1,k=7.370016425*.1,y=1.2021132975*.1,E=6.657905115,N=3.081226386,A=4.2868294337*.1,P=1.7337203997*.01,O=2.4197894225*.1,T=1.2258202635*.01,H=t-.5;let j;if(Math.abs(H)<=l)return j=a-H*H,H*(((d*j+v)*j+u)*j+f)/(((g*j+m)*j+h)*j+1);j=H<0?t:1-t,j=Math.sqrt(-Math.log(j));let L;return j<=o?(j=j-c,L=(((w*j+b)*j+_)*j+p)/((y*j+k)*j+1)):(j=j-o,L=((P*j+A)*j+N+E)/((T*j+O)*j+1)),H<0?-L:L}function mo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return mo(ht(t),e,r);if(qe(t))return t.apply(l=>mo(l,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return cl(t*e,e)}return e==Number.POSITIVE_INFINITY?1-cl(r/t,r):e*t>r?1-ul(r/(r+e*t),r/2,e/2):ul(e*t/(r+e*t),e/2,r/2)}function wi(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let l=gi,o=mi;if(t>.9997&&r===1?(l=1e7,o=6e5,t=.9997):t>.9992&&r===1?(l=1e7,o=6e5):t>.997&&r===1?(l=1e6,o=45e3):t>.992&&r===1?(l=1e5,o=5e3):t>.97&&r===1&&(l=1e4,o=400),Array.isArray(t))return wi(ht(t),e,r);const a=f=>mo(f,e,r);function c(f,u,v){return f===0?0:f===1?Inf:u===0?NaN:v===0?NaN:pi(f,a,o,l)}return qe(t)?t.apply(c,e,r):c(t,e,r)}function cl(t,e){if(Array.isArray(t))return cl(ht(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(l);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const v=u/e,d=Math.pow(v,1/6)-.5*Math.pow(v,1/3)+1/3*Math.pow(v,1/2);return vo(d,r,o)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:jf(u/2,e/2)/Cs(e/2)}const f=e>fo?a:c;return qe(t)?t.apply(f):f(t)}function jn(t,e){if(Array.isArray(t))return jn(ht(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(l);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const v=ho(u,r,o),d=Math.pow(Math.sqrt(36*v*v-30*v+13)/4+(3*v-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:pi(u,d=>cl(d,e),0,fo*10)}const f=e>fo?a:c;return qe(t)?t.apply(f):f(t)}function ul(t,e,r){if(Array.isArray(t))return ul(ht(t),e,r);if(qe(t))return t.apply(o=>ul(o,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const l=.5-t+.5;return Yf(e,r,t,l)}function Cs(t){if(qe(t))return t.apply(Cs);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+Cs(1-t));t=t-1;let r=.9999999999998099;for(let o=0;o<e.length;o++)r=r+e[o]/(t+o+1);const l=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(l,t+.5)*Math.exp(-l)*r}function jf(t,e){let o=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/Cs(e+a+1);if(isNaN(c)||c<1e-18)break;o+=c}return Math.pow(t,e)*Cs(e)*Math.exp(-t)*o}function Tf(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,l=-.284496736,o=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*t),v=1-((((c*u+a)*u+o)*u+l)*u+r)*u*Math.exp(-t*t);return e*v}function yi(t,e){const r=.564189583547756,l=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],f=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let v,d,h,m,g=Math.abs(e);if(g<=.5)return d=e*e,m=(((l[0]*d+l[1])*d+l[2])*d+l[3])*d+l[4]+1,h=((o[0]*d+o[1])*d+o[2])*d+1,v=.5-e*(m/h)+.5,v=Math.exp(d)*v,v;if(g<=4)m=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],h=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],v=m/h;else{if(e<=-5.6)return v=2,v=Math.exp(e*e)*2,v;d=1/(e*e),m=(((f[0]*d+f[1])*d+f[2])*d+f[3])*d+f[4],h=(((u[0]*d+u[1])*d+u[2])*d+u[3])*d+1,v=(r-d*m/h)/g}return e<0&&(v=Math.exp(e*e)*2-v),v}function xi(t,e){let r=t+e-2;return r<=.25?or(r+1):r<=1.25?or(r)+en(r):or(r-1)+Math.log(r*(r+1))}function fl(t,e){const r=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,v,d,h,m,g,p,_,b,w,k,y,E,N,A;return d=Math.min(t,e),h=Math.max(t,e),g=d/h,m=g/(g+1),b=1/(g+1),y=b*b,w=b+y+1,k=b+y*w+1,E=b+y*k+1,N=b+y*E+1,A=b+y*N+1,v=1/h,p=v*v,_=((((f*A*p+c*N)*p+a*E)*p+o*k)*p+l*w)*p+r,_*=m/h,v=1/d,p=v*v,u=(((((f*p+c)*p+a)*p+o)*p+l)*p+r)/d+_,u}function dt(t){let e,r,l,o,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],f=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(u*r+f)*r+1,l=a/o,e>0?r*l/t:t*(l+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],f=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(((f[4]*r+f[3])*r+f[2])*r+f[1])*r+1,l=a/o,e>0?r/t*(l-.5-.5):t*l}}}function Pf(t,e,r){let l,o,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=o=0,l=0;for(let f=1;f<=r;f++)a=o,o=l,l=c*o-a+e[r-f];return(l-a)*.5}function ki(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,l=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*Pf(t/.375,e,r));if(t<l)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function $r(t,e){const r=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,v,d,h,m,g,p,_,b,w,k,y,E,N;return t>e?(d=e/t,u=1/(d+1),_=d/(d+1),v=t+(e-.5)):(d=t/e,u=d/(d+1),_=1/(d+1),v=e+(t-.5)),k=_*_,b=_+k+1,w=_+k*b+1,y=_+k*w+1,E=_+k*y+1,N=_+k*E+1,h=1/(e*e),p=((((f*N*h+c*E)*h+a*y)*h+o*w)*h+l*b)*h+r,p*=u/e,m=v*en(t/e),g=t*(Math.log(e)-1),m>g?p-g-m:p-m-g}function or(t){if(t<.6){const p=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*p}else{const e=.422784335098467,r=.848044614534529,l=.565221050691933,o=.156513060486551,a=.017050248402265,c=.000497958207639485,f=1.24313399877507,u=.548042109832463,v=.10155218743983,d=.00713309612391,h=.000116165475989616,m=t-.5-.5,g=(((((c*m+a)*m+o)*m+l)*m+r)*m+e)/(((((h*m+d)*m+v)*m+u)*m+f)*m+1);return m*g}}function gr(t){const e=.418938533204673,r=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;if(t<=.8)return or(t)-Math.log(t);if(t<=2.25)return or(t-.5-.5);if(t<10){let d=Math.round(t-1.25),h=t,m=1;for(let g=1;g<=d;++g)h+=-1,m*=h;return or(h-1)+Math.log(m)}let u=1/(t*t),v=(((((f*u+c)*u+a)*u+o)*u+l)*u+r)/t;return e+v+(t-.5)*(Math.log(t)-1)}function go(t,e){const r=.918938533204673;let l=Math.min(t,e),o=Math.max(t,e);function a(c,f,u){let v=Math.round(u-1),d=1;for(let h=1;h<=v;++h)u+=-1,d*=u/(f+u);return c+Math.log(d)+(gr(f)+(gr(u)-xi(f,u)))}if(l<8){if(l<1)return o<8?gr(l)+(gr(o)-gr(l+o)):gr(l)+$r(l,o);let c;if(l<2)return o<=2?gr(l)+gr(o)-xi(l,o):o<8?(c=0,a(c,l,o)):gr(l)+$r(l,o);if(o<=1e3){let f=Math.round(l-1);c=1;for(let u=1;u<=f;++u){l+=-1;let v=l/o;c*=v/(v+1)}return c=Math.log(c),o>=8?c+gr(l)+$r(l,o):a(c,l,o)}else{let f=Math.round(l-1);c=1;for(let u=1;u<=f;++u)l+=-1,c*=l/(l/o+1);return log(c)-f*log(o)+(gr(l)+$r(l,o))}}else{let c=fl(l,o),f=l/o,u=-(l-.5)*Math.log(f/(f+1)),v=o*en(f);return u>v?Math.log(o)*-.5+r+c-v-u:Math.log(o)*-.5+r+c-u-v}}function Ei(t){return(t==0?1024:-300)*.69314718055995*.99999}function es(t){const e=.0566749439387324,r=.0456512608815524,l=.333333333333333,o=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,f=.354508718369557;let u,v,d,h,m;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(u=t+.3,u/=.7,m=e-u*.3):t>.18?(u=t*.75-.25,m=r+u/3):(u=t,m=0),v=u/(u+2),d=v*v,h=((a*d+o)*d+l)/((f*d+c)*d+1),d*2*(1/(1-v)-v*h)+m)}function en(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,l=-.0178874546012214,o=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let f=t/(t+2),u=f*f,v=(((l*u+r)*u+e)*u+1)/(((c*u+a)*u+o)*u+1);return f*2*v}function Lf(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,v,d,h,m;if(d=Math.abs(t),d<=.5)return u=t*t,m=(((r[0]*u+r[1])*u+r[2])*u+r[3])*u+r[4]+1,h=((l[0]*u+l[1])*u+l[2])*u+1,t*(m/h);if(d<=4){m=((((((o[0]*d+o[1])*d+o[2])*d+o[3])*d+o[4])*d+o[5])*d+o[6])*d+o[7],h=((((((a[0]*d+a[1])*d+a[2])*d+a[3])*d+a[4])*d+a[5])*d+a[6])*d+a[7];let p=.5-Math.exp(-t*t)*m/h+.5;return t<0?-p:p}if(d>=5.8)return t>0?1:-1;v=t*t,u=1/v,m=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],h=(((f[0]*u+f[1])*u+f[2])*u+f[3])*u+1,u=(e-m/(v*h))/d;let g=.5-Math.exp(-v)*u+.5;return t<0?-g:g}function Rf(t){const e=914041914819518e-24,r=.0238082361044469,l=-.499999999085958,o=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+o)*t+l)*t+1));{let f=Math.exp(t);return t>0?f*(.5-1/f+.5):f-.5-.5}}function Ms(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function zf(t){const e=.785398163397448,r=1.4616321449683622,l=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],o=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let f,u,v,d,h,m,g,p,_,b,w,k,y;if(w=Number.MAX_SAFE_INTEGER,d=.5/(.5*Number.EPSILON),w>d&&(w=d),y=1e-9,p=0,t<.5){if(fabs(t)<=y){if(t==0)return 0;p=-1/t}else{if(h=-t,_=e,h<=0&&(h=-h,_=-_),h>=w)return 0;if(v=Math.round(h),h-=v,v=Math.round(h*4),h=(h-v*.25)*4,u=v/2,u+u!=v&&(h=1-h),m=e*h,f=u/2,f+f!=u&&(_=-_),u=(v+1)/2,f=u/2,f+=f,f==u){if(m==0)return 0;p=_*(cos(m)/sin(m)*4)}else p=_*(sin(m)/cos(m)*4)}t=1-t}if(t<=3){g=t,k=l[0]*t;for(let E=1;E<=5;++E)g=(g+o[E-1])*t,k=(k+l[E])*t;return g=(k+l[6])/(g+o[5]),b=t-r,g*b+p}if(t<w){h=1/(t*t),g=h,k=a[0]*h;for(let E=1;E<=3;++E)g=(g+c[E-1])*h,k=(k+a[E])*h;p=k/(g+c[3])-.5/t+p}return p+log(t)}function If(t,e,r,l){let o,a,c,f,u,v;if(t>l*.001){if(f=t*Math.log(r),f<Math.exparg(1))return 0;o=Math.exp(f)}else o=1;for(o*=e/t,v=l/t,u=t+1,f=r,c=f/u,u+=1,f=r*f,a=f/u,c+=a;Math.abs(r)>v;)u+=1,f=r*f,a=f/u,c+=a;return o*=t*c+1,o}function Ff(t,e,r,l){const o=.577215664901533;let a,c,f,u,v,d,h=e*r;for(v=r-h,c=e*l<=.02?Math.log(r)+zf(e)+o+v:Math.log(h)+o+v,a=l*5*Math.abs(c),f=1,u=0,f+=1,v*=r-h/f,d=v/f,u+=d;Math.abs(d)>a;)f+=1,v*=r-h/f,d=v/f,u+=d;return-t*(c+u)}function po(t,e,r,l){let o,a,c,f,u,v,d,h,m;if(r==0)return 0;if(d=Math.min(t,e),d>=1)v=t*Math.log(r)-go(t,e),a=Math.exp(v)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(a=Math.pow(r,t),a==0)return a;m=t+e,m>1?(u=t+e-1,v=(dt(u)+1)/m):v=dt(m)+1,c=(dt(t)+1)*(dt(e)+1)/v,a*=c*(e/m)}else{if(u=or(d),o=Math.round(h-1),o>=1){c=1;for(let w=1;w<=o;++w)h+=-1,c*=h/(d+h);u+=Math.log(c)}v=t*Math.log(r)-u,h+=-1,m=d+h,m>1?(u=d+h-1,f=(dt(u)+1)/m):f=dt(m)+1,a=Math.exp(v)*(d/t)*(dt(h)+1)/f}else u=or(d)+$r(d,h),v=t*Math.log(r)-u,a=d/t*Math.exp(v);if(a==0||t<=l*.1)return a;let g=l/t,p=0,_=0,b;for(c=1,p+=1,c*=(.5-e/p+.5)*r,b=c/(t+p),_+=b;p<1e7&&Math.abs(b)>g;)p+=1,c*=(.5-e/p+.5)*r,b=c/(t+p),_+=b;return t*_>-1?a*=t*_+1:a=0,a}function vl(t,e,r,l,o,a){let c,f,u,v,d,h=t+e,m=t+1;if(o>1&&t>=1&&h>=m*1.1?(u=Math.round(Math.abs(Ei(1))),f=Math.round(Ei(0)),u>f&&(u=f),v=Math.exp(-u)):(u=0,v=1),c=Bf(u,t,e,r,l)/t,o==1||c==0)return c;let g=o-1,p=v;if(f=0,e>1){if(l>1e-4){let _=(e-1)*r/l-t;_>=1&&(f=_<g?Math.round(_):g)}else f=g;for(let _=0;_<f;++_)d=_,v*=(h+d)/(m+d)*r,p+=v}for(let _=f;_<g&&(d=_,v*=(h+d)/(m+d)*r,p+=v,!(v<=a*p));++_);return c*=p,c}function qf(t,e,r,l,o,a){let c,f,u,v,d,h,m,g,p,_,b,w,k,y,E,N,A,P,O;if(!Number.isFinite(o)||(O=Of(t,e,r,l),Number.isNaN(O)))return Number.NaN;if(O==0)return 0;for(c=o+1,p=e/t,_=1/t+1,y=l+1,u=0,v=1,h=t+1,w=0,k=1,E=1,N=c/_,d=_/c,u+=1,m=u/t,g=u*(e-u)*r,f=t/h,P=v*(v+p)*f*f*(g*r),f=(m+1)/(_+m+m),A=u+g/h+f*(c+u*y),v=m+1,h+=2,m=P*w+A*E,w=E,E=m,m=P*k+A*N,k=N,N=m,b=d,d=E/N,w/=N,k/=N,E=d,N=1;u<1e4&&(u+=1,m=u/t,g=u*(e-u)*r,f=t/h,P=v*(v+p)*f*f*(g*r),f=(m+1)/(_+m+m),A=u+g/h+f*(c+u*y),v=m+1,h+=2,m=P*w+A*E,w=E,E=m,m=P*k+A*N,k=N,N=m,b=d,d=E/N,!(Math.abs(d-b)<=a*d));)w/=N,k/=N,E=d,N=1;return O*d}function Of(t,e,r,l){const o=.398942280401433;let a,c,f,u,v,d,h,m,g;if(r==0||l==0)return 0;if(h=Math.min(t,e),h<8){let p,_;if(r<=.375?(p=Math.log(r),_=en(-r)):l>.375?(p=Math.log(r),_=Math.log(l)):(p=en(-l),_=Math.log(l)),d=t*p+e*_,h>=1)return d-=go(t,e),Math.exp(d);if(m=Math.max(t,e),m>=8)return u=or(h)+$r(h,m),h*Math.exp(d-u);if(m<=1){let w=Math.exp(d);return w==0?0:(g=t+e,g>1?(u=t+e-1,d=(dt(u)+1)/g):d=dt(g)+1,c=(dt(t)+1)*(dt(e)+1)/d,w*(h*c)/(h/m+1))}if(u=or(h),a=Math.round(m-1),a>=1){c=1;for(let w=1;w<=a;++w)m+=-1,c*=m/(h+m);u=Math.log(c)+u}d-=u,m+=-1,g=h+m;let b;return g>1?(u=h+m-1,b=(dt(u)+1)/g):b=dt(g)+1,h*Math.exp(d)*(dt(m)+1)/b}else{let p,_,b,w;return t<=e?(p=t/e,_=p/(p+1),b=1/(p+1),w=t-(t+e)*r):(p=e/t,_=1/(p+1),b=p/(p+1),w=(t+e)*l-e),f=-w/t,u=Math.abs(f)>.6?f-Math.log(r/_):es(f),f=w/e,v=Math.abs(f)<=.6?es(f):f-Math.log(l/b),d=Math.exp(-(t*u+e*v)),o*Math.sqrt(e*_)*d*Math.exp(-fl(t,e))}}function Bf(t,e,r,l,o){const a=.398942280401433;let c,f,u,v,d,h,m,g;if(h=Math.min(e,r),h<8){let p,_;if(l<=.375?(p=Math.log(l),_=en(-l)):o>.375?(p=Math.log(l),_=Math.log(o)):(p=en(-o),_=Math.log(o)),d=e*p+r*_,h>=1)return d-=go(e,r),Ms(t,d);if(m=Math.max(e,r),m>=8)return u=or(h)+$r(h,m),h*Ms(t,d-u);if(m<=1){let w=Ms(t,d);return w==0?w:(g=e+r,g>1?(u=e+r-1,d=(dt(u)+1)/g):d=dt(g)+1,c=(dt(e)+1)*(dt(r)+1)/d,w*(h*c)/(h/m+1))}u=or(h);let b=Math.round(m-1);if(b>=1){c=1;for(let w=1;w<=b;++w)m+=-1,c*=m/(h+m);u+=Math.log(c)}return d-=u,m+=-1,g=h+m,f=g>1?(dt(g-1)+1)/g:dt(g)+1,h*Ms(t,d)*(dt(m)+1)/f}else{let p,_,b,w;e>r?(p=r/e,_=1/(p+1),b=p/(p+1),w=(e+r)*o-r):(p=e/r,_=p/(p+1),b=1/(p+1),w=e-(e+r)*l),-ki(r/e);let k=-w/e;return u=Math.abs(k)>.6?k-Math.log(l/_):es(k),k=w/r,v=Math.abs(k)>.6?k-Math.log(o/b):es(k),d=Ms(t,-(e*u+r*v)),a*Math.sqrt(r*_)*d*Math.exp(-fl(e,r))}}function bo(t,e,r,l,o,a){let f=Array(30),u=Array(30),v=e-.5-.5,d=t+v*.5,h=l>.375?Math.log(r):en(-l),m=-d*h;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+ki(dt(e))+e*Math.log(m)+d*h,p=g-($r(e,t)+e*Math.log(d)),_=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let b=_==0,w=o==0?0:Math.exp(Math.log(o)-p),k=Df(e,m,g,a),y=.25/(d*d),E=h*.25*h,N=k,A=N,P=1,O=1,T=0;for(let H=1;H<=30;++H){let j=e+T;N=(j*(j+1)*N+(m+j+1)*P)*y,T+=2,P*=E,O/=T*(T+1);let L=H-1;f[L]=O;let R=0;if(H>1){let z=e-H;for(let V=1;V<=L;++V)R+=z*f[V-1]*u[L-V],z+=e}u[L]=v*O+R/H;let D=u[L]*N;if(A+=D,A<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(D)<=a*(A+w))break}return o+=b?Math.exp(p+Math.log(A)):_*A,o}function Df(t,e,r,l){const o=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-Lf(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return yi(1,a)/a*o}}else if(e<1.1){let a=3,c=e,f=e/(t+3),u=l*.1/(t+1),v;for(a+=1,c*=-(e/a),v=c/(t+a),f+=v;Math.abs(v)>u;)a+=1,c*=-(e/a),v=c/(t+a),f+=v;let d=t*e*((f/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),m=dt(t),g=m+1;if(e>=.25&&t<e/2.59||h>-.13394){let p=Rf(h),_=((p+.5+.5)*d-p)*g-m;return _<=0?0:_*Math.exp(-r)}else return(.5-Math.exp(h)*g*(.5-d+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,f=e,u=e+(1-t),v=1,d,h;a=e*c+v*a,f=e*u+v*f,d=a/f,v+=1;let m=v-t;for(c=a+m*c,u=f+m*u,h=c/u;Math.abs(h-d)>=l*h;)a=e*c+v*a,f=e*u+v*f,d=a/f,v+=1,m=v-t,c=a+m*c,u=f+m*u,h=c/u;return h}}function Vf(t,e,r,l){const a=1.12837916709551,c=.353553390593274,f=Array(21),u=Array(21),v=Array(21),d=Array(21);let h=t*es(-r/t)+e*es(r/e),m;if(m=Math.exp(-h),m==0)return 0;let g=Math.sqrt(h),p=g/c*.5,_=h+h,b,w,k,y;t<e?(b=t/e,w=1/(b+1),k=(e-t)/e,y=1/Math.sqrt(t*(b+1))):(b=e/t,w=1/(b+1),k=(e-t)/t,y=1/Math.sqrt(e*(b+1))),f[0]=k*.6666666666666666,v[0]=f[0]*-.5,d[0]=-v[0];let E=.5/a*yi(1,g),N=c,A=E+d[0]*y*N,P=1,O=b*b,T=1,H=y,j=p,L=_;for(let D=2;D<=20;D+=2){T*=O,f[D-1]=w*2*(b*T+1)/(D+2);let z=D+1;P+=T,f[z-1]=k*2*P/(D+3);for(let J=D;J<=z;++J){let X=(J+1)*-.5;u[0]=X*f[0];for(let ae=2;ae<=J;++ae){let le=0;for(let oe=1;oe<=ae-1;++oe){let $=ae-oe;le+=(oe*X-$)*f[oe-1]*u[$-1]}u[ae-1]=X*f[ae-1]+le/ae}v[J-1]=u[J-1]/(J+1);let te=0;for(let ae=1;ae<=J-1;++ae)te+=d[J-ae-1]*v[ae-1];d[J-1]=-(te+v[J-1])}E=c*j+(D-1)*E,N=c*L+D*N,j=_*j,L=_*L,H*=y;let V=d[D-1]*H*E;H*=y;let K=d[z-1]*H*N;if(A+=V+K,Math.abs(V)+Math.abs(K)<=l*A)break}let R=Math.exp(-fl(t,e));return a*m*R*A}function Yf(t,e,r,l){let a=0,c=0;function f(b,w,k,y){const E=po(b,w,k,1e-15);return y?.5-E+.5:E}function u(b,w,k,y){const E=po(w,b,k,1e-15);return y?E:.5-E+.5}function v(b,w,k,y,E,N){const A=qf(b,w,k,y,E,15000000000000002e-30);return N?.5-A+.5:A}function d(b,w,k,y,E){let N=Math.round(w);w=w-N,w===0&&(N=N-1,w=1);let A=vl(w,b,y,k,N,1e-15);return k<=.7?(A=A+po(b,w,k,1e-15),E?.5-A+.5:A):(b<=15&&(N=20,A=A+vl(b,w,k,y,N,1e-15),b=b+N),A=bo(b,w,k,y,A,15*1e-15),E?.5-A+.5:A)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,m,g,p,_;if(t<=1||e<=1){if(r>.5?(_=!0,h=e,g=l,m=t,p=r):(_=!1,h=t,g=r,m=e,p=l),m<Math.min(1e-15,1e-15*h))return a=If(h,m,g,1e-15),_?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=Ff(h,m,g,1e-15),_?c:.5-c+.5;if(Math.max(h,m)>1){if(m<=1)return f(h,m,g,_);if(g>=.29)return u(h,m,p,_);if(g<.1&&Math.pow(g*m,h)<=.7)return f(h,m,g,_)}else{if(h>=Math.min(.2,m)||Math.pow(g,h)<=.9)return f(h,m,g,_);if(g>=.3)return u(h,m,p,_)}let b=!1;return Math.max(h,m)>1&&m>15?c=0:(b=!0,c=vl(m,h,p,g,20,1e-15),m+=20),c=bo(m,h,p,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(b?c=vl(m-n,h,p,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=bo(m,h,p,g,c,15*1e-15),a=-expm1(c),_?.5-a+.5:a):(a=.5-c+.5,_?.5-a+.5:a)}else{let b=Number.isFinite(t+e)?t>e?(t+e)*l-e:t-(t+e)*r:t*l-e*r;const w=b<0;let k,y,E,N;if(w?(b=-b,k=e,E=l,y=t,N=r):(k=t,E=r,y=e,N=l),y<40)return y*E<=.7?f(k,y,E,w):d(k,y,E,N,w);if(k>y){if(y<=100||b>y*.03)return v(k,y,E,N,b,w)}else{if(k<=100)return v(k,y,E,N,b,w);if(b>k*.03)return v(k,y,E,N,b,w)}return a=Vf(k,y,b,1e-15*100),w?.5-a+.5:a}}function Ai(t){const e=t.nrows,r=t.ncols;if(e<r){const c=Ai(t.subset([],Ft.seq(1,e)));return{Q:c.Q,R:Wf(c.Q,t)}}let l=Wt.eye(e),o=t.t();for(let c=1;c<=r;c++)for(let f=e;f>=c+1;f--){const u=o.v.subarray((f-2)*r,f*r),v=l.v.subarray((f-2)*e,f*e),d=u.slice(),h=v.slice(),[m,g,p]=Uf(d[c-1],d[c-1+r]);for(let _=0;_<r;_++)u[_]=d[_]*m+d[_+r]*g,u[_+r]=d[_]*-g+d[_+r]*m,v[_]=h[_]*m+h[_+e]*g,v[_+e]=h[_]*-g+h[_+e]*m;for(let _=r;_<e;_++)v[_]=h[_]*m+h[_+e]*g,v[_+e]=h[_]*-g+h[_+e]*m}const a=Ft.seq(1,r);return{Q:e===r?l:l.subset([],a),R:e===r?o.t():o.subset([],a).t()}}function Uf(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),f=1/c;return[f,a*f,t*c]}const r=t/e,l=Math.sqrt(1+r*r),o=1/l;return[r*o,o,e*l]}function _o(t){return typeof t=="number"}function Wf(t,e){if(e===void 0&&(e=t),!Qt(t)||!Qt(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,l=t.ncols,o=e.nrows,a=e.ncols,c=l,f=a,u=r,v=new Float64Array(c*f);for(let d=0;d<f;d++){const h=e.v.subarray(d*o,(d+1)*o),m=v.subarray(d*c,(d+1)*c);for(let g=0;g<c;g++){const p=t.v.subarray(g*r,(g+1)*r);let _=0;for(let b=0;b<u;b++)_+=p[b]*h[b];m[g]=_}}return new Wt(v,c,f)}function Ni(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new We(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new Wt(t.v,e,r)}function Qt(t){return t&&t.constructor===Wt}function Hf(t,e,r){return new Wt(new Float64Array(t),e,r)}const Pe=class Pe{constructor(e,r,l){if(!ArrayBuffer.isView(e)||e.constructor!==Pe.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||l===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*l)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=l}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Pe.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const l=Pe.eye(e),o=Pe.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],f=e-1;for(let u=0;u<e;u++)o.v[f*e+u]=l.v[f*e+u]/c;for(let u=e-2;u>=0;u--){let v=l.getcolumn(u+1);const d=a.getcolref(u+1);for(let h=u+1;h<e;h++){const m=o.getcolumn(h+1);v=v.subtract(m.mult(d[h]))}o.v.set(v.divide(d[u]).v,u*e)}return o.t()}if(this.islowertriangular()){const l=this.diag();if(hi(l)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=Pe.eye(e),a=Pe.eye(e),c=this.t(),f=0,u=c.v[0];for(let v=0;v<e;v++)a.v[f*e+v]=o.v[f*e+v]/u;for(let v=1;v<e;v++){let d=o.getcolumn(v+1);const h=c.getcolref(v+1);for(let m=0;m<v;m++){const g=a.getcolumn(m+1);d=d.subtract(g.mult(h[m]))}a.v.set(d.divide(h[v]).v,v*e)}return a.t()}const r=Ai(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>Pe.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>Pe.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let l=0;l<e;l++)r[l]=this.getcolref(l+1)[l];return new We(r)}t(){const e=this.nrows,r=this.ncols,l=new Pe.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const a=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let c=0;c<this.nrows;c++)l[c*r+o]=a[c]}return new Pe(l,r,e)}for(let o=0;o<this.nrows;o++){const a=l.subarray(o*r,(o+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+o]}return new Pe(l,r,e)}dot(e){if(qe(e))return new Pe(xo(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Qt(e))return new Pe(xo(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,l){if(Qt(e))return new Pe(wo(this.v,e.v,r),this.nrows,this.ncols);if(_o(e))return new Pe(yo(this.v,e,r),this.nrows,this.ncols);if(!qe(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(l===void 0&&(l=e.length===this.ncols?2:1),l===2&&e.length===this.ncols){const o=new Pe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(yo(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new Pe(o,this.nrows,this.ncols)}if(l===1&&e.length===this.nrows){const o=new Pe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(wo(this.getcolref(a+1),e.v,r),a*this.nrows);return new Pe(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,l)=>r+l)}subtract(e){return this.op(e,(r,l)=>r-l)}mult(e){return this.op(e,(r,l)=>r*l)}divide(e){return this.op(e,(r,l)=>r/l)}apply(e,r){if(r===void 0&&(r=2),r==2){const l=this.ncols,o=new Pe.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=e(this.getcolref(a+1));return new We(o)}if(r==1)return this.t().apply(e,2);if(r==0){const l=this.v.length,o=new Pe.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=e(this.v[a]);return new Pe(o,this.nrows,this.ncols)}}replace(e,r,l){typeof r=="number"&&(r=[r]),r.length===0&&(r=Ft.seq(1,this.nrows)),pr(r)||(r=br(r)),typeof l=="number"&&(l=[l]),l.length===0&&(l=Ft.seq(1,this.ncols)),pr(l)||(l=br(l));const o=r.length,a=l.length;if(Ir(r)<1||Ar(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Ir(l)<1||Ar(l)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<l.length;c++){const f=e.getcolref(c+1),u=(l.v[c]-1)*this.nrows;for(let v=0;v<r.length;v++){const d=r.v[v];this.v[u+d-1]=f[v]}}return this}copy(){return new Pe(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new We.valuesConstructor(this.ncols);for(let l=0;l<this.ncols;l++)r[l]=this.getcolref(l+1)[e-1];return new We(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new We(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=br([e])),typeof r=="number"&&(r=br([r])),Array.isArray(e)&&(e=e.length===0?null:br(e)),Array.isArray(r)&&(r=r.length===0?null:br(r)),e!==null&&!pr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!pr(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Ir(e)<1||Ar(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Ir(r)<1||Ar(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const f=r.length,u=this.nrows,v=new Pe.valuesConstructor(u*f);for(let d=0;d<r.length;d++)v.set(this.v.slice((r.v[d]-1)*this.nrows,r.v[d]*this.nrows),d*this.nrows);return new Pe(v,u,f)}if(r==null)return this.t().subset(r,e).t();const l=e.length,o=r.length,a=new Pe.valuesConstructor(l*o);let c=new Pe.valuesConstructor(l);for(let f=0;f<o;f++){const u=this.v.subarray((r.v[f]-1)*this.nrows,r.v[f]*this.nrows);for(let v=0;v<l;v++)c[v]=u[e.v[v]-1];a.set(c,f*l)}return new Pe(a,l,o)}toString(e){function r(c,f){return" ".repeat(f-c.length)+c}e===void 0&&(e=2),this.ncols;const l=Math.round(Math.abs(Math.log10(Ar(this.v))))+e+3;let o="";const a=this.t();for(let c=1;c<=a.ncols;c++)o+=Array.from(a.getcolref(c)).map(f=>r(f.toFixed(e),l)).join(" ")+`
`;return o}toCSV(e,r,l,o){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=o!=null&&o.length>0,c=l!=null&&l.length>0;if(a&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&l.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const f=this.t();let u=c?l.join(e)+`
`:"";for(let v=1;v<=f.ncols;v++)u=u+(a?o[v-1]+e:"")+f.getcolref(v).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,l,o){return Ni(_i(e*r,l,o),e,r)}static rand(e,r,l,o){return Ni(bi(e*r,l,o),e,r)}static eye(e,r){r===void 0&&(r=e);const l=new Float64Array(e*r);for(let o=0;o<Math.min(e,r);o++)l[o*e+o]=1;return new Pe(l,e,r)}static diagm(e){if(!qe(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,l=new Float64Array(r*r);for(let o=0;o<r;o++)l[o*r+o]=e.v[o];return new Pe(l,r,r)}static zeros(e,r){return r===void 0&&(r=e),new Pe(new Float64Array(e*r),e,r)}static ones(e,r){return Pe.fill(1,e,r)}static fill(e,r,l){l===void 0&&(l=r);const o=new Float64Array(r*l);for(let a=0;a<o.length;a++)o[a]=e;return new Pe(o,r,l)}static outer(e,r,l){if(Array.isArray(e)&&(e=ht(e)),Array.isArray(r)&&(r=ht(r)),!qe(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!qe(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=Pe.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],f=o.getcolref(a+1);for(let u=0;u<e.length;u++)f[u]=l(e.v[u],c)}return o}static parseCSV(e,r,l,o){function a(b){return b.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let f=e.split(/\n/),u=[],v=0;const d=f[0].split(r);(l||l===void 0&&a(d))&&(u=d,v=1),f=f.filter(b=>b.trim().length>1);let h=[],m=0;o&&(m=1);const g=f.length-v,p=d.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const _=Pe.zeros(p,g);for(let b=v;b<g+v;b++){const w=f[b].split(r);let k;if(o?(h[b-v]=w[0],k=w.slice(1).map(y=>Number.parseFloat(y.trim().replace(c,".")))):k=w.map(y=>Number.parseFloat(y.trim().replace(c,"."))),k.some(y=>Number.isNaN(y)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(k.length!=p)throw Error("Wrong number of values in row #"+b);_.v.set(new Float64Array(k),(b-v)*p)}return{values:_.t(),header:u,labels:h,sep:r,dec:c}}};fr(Pe,"valuesConstructor",Float64Array),fr(Pe,"TOLERANCE",Math.pow(10,-9));let Wt=Pe;function qe(t){return t&&t.constructor===We}function ht(t){return new We(new Float64Array(t))}const mt=class mt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new Ft.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[l]=o+1,l=l+1);return new Ft(r.subarray(0,l))}filter(e){const r=new mt.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[l]=this.v[o],l=l+1);return new mt(r.subarray(0,l))}shuffle(){return new mt(ji(this.v))}sort(e){return new mt(ko(this.v,e))}sortind(e){return new Ft(Ti(this.v,e))}rep(e){return Ci(this,e)}repeach(e){return Mi(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=Ft.seq(1,this.length)),pr(r)||(r=br(r));const l=r.length;if(Ir(r)<1||Ar(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==l)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<r.length;o++){const a=r.v[o];this.v[a-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=br([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Ft.bool2ind(e):br(e)),!pr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,l=mt.zeros(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");l.v[o]=this.v[e.v[o]-1]}return l}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new mt(this.v.slice(e-1,r))}copy(){return new mt(this.v.slice())}dot(e){return e===void 0&&(e=this),xo(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(qe(e))return new mt(wo(this.v,e.v,r));if(_o(e))return new mt(yo(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,l)=>r+l)}subtract(e){return this.op(e,(r,l)=>r-l)}mult(e){return this.op(e,(r,l)=>r*l)}divide(e){return this.op(e,(r,l)=>r/l)}apply(e){const r=this.v.length,l=mt.zeros(r);for(let o=0;o<r;o++)l.v[o]=e(this.v[o]);return l}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),l=new mt.valuesConstructor(r);let o=0;for(const a of e)typeof a=="number"?(l[o]=a,o+=1):(l.set(qe(a)?a.v:new mt.valuesConstructor(a),o),o+=typeof a=="number"?1:a.length);return new mt(l)}static seq(e,r,l){return Si(e,r,l,mt)}static randn(e,r,l){return _i(e,r,l)}static rand(e,r,l){return bi(e,r,l)}static zeros(e){return new mt(new mt.valuesConstructor(e))}static ones(e){return mt.fill(1,e)}static fill(e,r){const l=new mt.valuesConstructor(r);for(let o=0;o<l.length;o++)l[o]=e;return new mt(l)}};fr(mt,"valuesConstructor",Float64Array);let We=mt;function pr(t){return t.constructor===Ft}function br(t){return new Ft(new Int32Array(t))}const St=class St{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new St.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[l]=o+1,l=l+1);return new St(r.subarray(0,l))}filter(e){const r=new St.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[l]=this.v[o],l=l+1);return new St(r.subarray(0,l))}shuffle(){return new St(ji(this.v))}sort(e){return new St(ko(this.v,e))}sortind(e){return new St(Ti(this.v,e))}rep(e){return Ci(this,e)}repeach(e){return Mi(this,e)}subset(e){if(typeof e=="number"&&(e=br([e])),Array.isArray(e)&&(e=br(e)),!pr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,l=new St.valuesConstructor(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");l[o]=this.v[e.v[o]-1]}return new St(l)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new St(this.v.slice(e-1,r))}static seq(e,r,l){return Si(e,r,l,St)}static ones(e){return St.fill(1,e)}static fill(e,r){const l=new St.valuesConstructor(r);for(let o=0;o<l.length;o++)l[o]=e;return new St(l)}static bool2ind(e){let r=0;const l=new St.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(l[r]=o+1,r=r+1);return new St(l.subarray(0,r))}};fr(St,"valuesConstructor",Int32Array);let Ft=St;function Si(t,e,r,l){r===void 0&&(r=t<=e?1:-1);const o=Math.floor((e-t)/r)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const a=new l.valuesConstructor(o);for(let c=0;c<o;c++)a[c]=t+c*r;return new l(a)}function Ci(t,e){const r=t.length*e,l=new t.constructor.valuesConstructor(r);for(let o=1;o<=e;o++)for(let a=0;a<t.length;a++)l[(o-1)*t.length+a]=t.v[a];return new t.constructor(l)}function Mi(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,l=new t.constructor.valuesConstructor(r);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)l[o*e+a]=t.v[o];return new t.constructor(l)}function wo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const l=new t.constructor(t.length);for(let o=0;o<t.length;o++)l[o]=r(t[o],e[o]);return l}function yo(t,e,r){const l=new t.constructor(t.length);for(let o=0;o<t.length;o++)l[o]=r(t[o],e);return l}function xo(t,e,r,l,o,a){if(l!==o)throw Error("_dot: matrix dimensions do not much.");const c=r,f=a,u=l,v=new t.constructor(c*f);for(let d=0;d<f;d++){const h=e.subarray(d*o,(d+1)*o),m=v.subarray(d*c,(d+1)*c);for(let g=0;g<u;g++){const p=h[g],_=t.subarray(g*r,(g+1)*r);for(let b=0;b<c;b++)m[b]+=_[b]*p}}return v}function ji(t){let e=t.slice(),r=e.length,l,o;for(;r;)o=Math.floor(Math.random()*r--),l=e[r],e[r]=e[o],e[o]=l;return e}function ko(t,e=!1){return e?t.slice().sort((r,l)=>l-r):t.slice().sort((r,l)=>r-l)}function Ti(t,e=!1){const r=Ft.seq(1,t.length).v;return e?r.sort((l,o)=>t[o-1]-t[l-1]):r.sort((l,o)=>t[l-1]-t[o-1])}function Gf(t,e,r){return 5*t*e+e+4*r*e+t*r}function Kf(t,e){return 2+2*t+t*e+17*e}function Fr(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=t.ncols,o=t.ncomp;let a,c;switch(e){case"mX":a=2,c=l;break;case"sX":a=2+l,c=l;break;case"loadings":case"xloadings":a=2+2*l+(r-1)*l,c=l;break;case"P":a=2+2*l,c=o*l;break;case"eigenvals":case"xeigenvals":a=2+2*l+l*o,c=o;break;case"cq0":a=2+2*l+l*o+o,c=o;break;case"cNq":a=2+2*l+l*o+2*o,c=o;break;case"rq0":a=2+2*l+l*o+3*o,c=o;break;case"rNq":a=2+2*l+l*o+4*o,c=o;break;case"ch0":a=2+2*l+l*o+5*o,c=o;break;case"cNh":a=2+2*l+l*o+6*o,c=o;break;case"rh0":a=2+2*l+l*o+7*o,c=o;break;case"rNh":a=2+2*l+l*o+8*o,c=o;break;case"cr0":a=2+2*l+l*o+9*o,c=o;break;case"cNr":a=2+2*l+l*o+10*o,c=o;break;case"rr0":a=2+2*l+l*o+11*o,c=o;break;case"rNr":a=2+2*l+l*o+12*o,c=o;break;case"cg0":a=2+2*l+l*o+13*o,c=o;break;case"cNg":a=2+2*l+l*o+14*o,c=o;break;case"rg0":a=2+2*l+l*o+15*o,c=o;break;case"rNg":a=2+2*l+l*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function Jf(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const l=t.ncols,o=t.nrows,a=t.ncomp;let c,f;switch(e){case"scores":case"xscores":c=(r-1)*o,f=o;break;case"T":c=0,f=o*a;break;case"hdist":c=o*a+(r-1)*o,f=o;break;case"qdist":c=2*o*a+(r-1)*o,f=o;break;case"xcumexpvar":case"cumexpvar":c=3*o*a,f=a;break;case"fdistc":c=3*o*a+a+(r-1)*o,f=o;break;case"fdistr":c=4*o*a+a+(r-1)*o,f=o;break;case"gdist":c=5*o*a+a+(r-1)*l,f=l;break;case"rdist":c=5*o*a+a+l*a+(r-1)*l,f=l;break;case"idistc":c=5*o*a+a+2*l*a+(r-1)*l,f=l;break;case"idistr":c=5*o*a+a+3*l*a+(r-1)*l,f=l;break;case"E":c=5*o*a+a+3*l*a+a*l,f=o*l;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+f)}function dl(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let l=0;l<t.length;l++){const o=t[l];if(o<e||o>r)return!1}return!0}function Xf(t,e,r,l,o,a,c){if(!Qt(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const f=a&&Array.isArray(a)?a.length:0;if(!dl(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!dl(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const v=e.nrows-f,d=e.ncols-u;if(v<3||d<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),r===void 0&&(r=Math.min(v-1,d)),r<1||r>Math.min(v-1,d))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const h=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(f>0){const y=new Int32Array(a);m=t._malloc(y.length*y.BYTES_PER_ELEMENT),t.HEAP32.set(y,m/y.BYTES_PER_ELEMENT)}let g=null;if(u>0){const y=new Int32Array(c);g=t._malloc(y.length*y.BYTES_PER_ELEMENT),t.HEAP32.set(y,g/y.BYTES_PER_ELEMENT)}const p=Kf(d,r),_=Float64Array,b=t._malloc(p*_.BYTES_PER_ELEMENT);if(t.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols,r,l,o,b,m,f,g,u])!==1)throw new Error("pca_fit: PCA failed.");const k=t.HEAPF64.slice(b/_.BYTES_PER_ELEMENT,b/_.BYTES_PER_ELEMENT+p);return t._free(h),t._free(b),m&&t._free(m),g&&t._free(g),{class:["pcamodel"],v:k,ncomp:r,nrows:v,ncols:d,exclvars:c,center:l,scale:o}}function Qf(t,e,r,l){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!Qt(r))throw new Error("pca_predict: X must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!dl(l,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=r.nrows-o;let c=e.exclvars;r.ncols===e.ncols&&(c=[]);const f=c.length,u=r.ncols-f;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const v=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,v/r.v.BYTES_PER_ELEMENT);let d=null;if(o>0){const T=new Int32Array(l);d=t._malloc(T.length*T.BYTES_PER_ELEMENT),t.HEAP32.set(T,d/T.BYTES_PER_ELEMENT)}let h=null;if(f>0){const T=new Int32Array(c);h=t._malloc(T.length*T.BYTES_PER_ELEMENT),t.HEAP32.set(T,h/T.BYTES_PER_ELEMENT)}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const g=Gf(a,e.ncomp,u),p=Float64Array,_=t._malloc(g*p.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[v,r.nrows,r.ncols,m,_,d,o,h,f])!==1)throw new Error("pca_predict: PCA prediction failed.");const w=t.HEAPF64.slice(_/p.BYTES_PER_ELEMENT,_/p.BYTES_PER_ELEMENT+g);t._free(v),t._free(m),t._free(_),d&&t._free(d),h&&t._free(h);const k={class:["pcares"],v:w,ncomp:e.ncomp,nrows:a,ncols:u,npred:u,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},y=new Array(e.ncomp),E=new Array(e.ncomp),N=new Array(e.ncomp),A=new Array(e.ncomp),P=new Array(e.ncomp),O=Jf(k,"xcumexpvar");P[0]=1,A[0]=O[0],N[0]=1-O[0],y[0]=O[0],E[0]=1-O[0];for(let T=1;T<e.ncomp;T++)P[T]=T+1,A[T]=O[T],N[T]=1-O[T],y[T]=O[T]-O[T-1],E[T]=1-y[T];return k.stat={components:P,resvar:E,expvar:y,cumexpvar:A,cumresvar:N},k}function Zf(t,e,r,l,o,a,c,f){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!Qt(r))throw new Error("pcapcv: X must be a matrix.");f||(f=[]);const u=f&&Array.isArray(f)?f.length:0;if(!dl(f,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const v=e.exclvars.length,d=r.nrows-u,h=r.ncols-v;if(d<3)throw new Error("pcapcv: X must have at least 3 rows.");if(h!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>d)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(l)||l<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?d-2:d-Math.ceil(d/o)-1,h,e.ncomp);if(l>m)throw new Error('pcapcv: the value of "ncomp" is too large.');const g=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,g/r.v.BYTES_PER_ELEMENT);let p=null;if(u>0){const A=new Int32Array(f);p=t._malloc(A.length*A.BYTES_PER_ELEMENT),t.HEAP32.set(A,p/A.BYTES_PER_ELEMENT)}let _=null;if(v>0){const A=new Int32Array(e.exclvars);_=t._malloc(A.length*A.BYTES_PER_ELEMENT),t.HEAP32.set(A,_/A.BYTES_PER_ELEMENT)}const b=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,b/e.v.BYTES_PER_ELEMENT);const w=d*h,k=r.v.constructor,y=t._malloc(w*k.BYTES_PER_ELEMENT);if(t.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,r.nrows,r.ncols,l,e.center,e.scale,a,o,c,b,y,p,u,_,v])!==1)throw new Error("pcapcv: PCVPCA failed.");const N=t.HEAPF64.slice(y/k.BYTES_PER_ELEMENT,y/k.BYTES_PER_ELEMENT+w);return t._free(g),t._free(b),t._free(y),p&&t._free(p),_&&t._free(_),new Wt(N,d,h)}function $f(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const tn=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:$f,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function ev(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const l=tn[t.ml[r]].title;e=e+"<li>"+l+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function Pi(t,e,r){const l=tn.findIndex(h=>h.id==="trim");let o=0,a=t.ncols-e,c=0;for(let h=0;h<r.ml.length;h++){if(r.ml[h]!==l){c+=r.mpl_new[h];continue}o=Math.max(o,r.mp_new[c]),a=Math.min(a,r.mp_new[c+1]),c+=r.mpl_new[h]}const f=t.nrows,v=a-o+e,d=Wt.zeros(f,v);return c=0,e>0&&(d.v.set(t.v.slice(0,e*f),c),c+=e*f),d.v.set(t.v.slice((e+o)*f,(e+a)*f),c),[o,a,d]}function Eo(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=tn.findIndex(f=>f.id==="trim");if(e.ml.findIndex(f=>f===r)<0)return t;const[o,a,c]=Pi(t.values,t.nresp,e);return t.values=c,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+o,t.nresp+a)):t.varlabels.slice(o,a),t.varindices=t.nresp>0?qr(0,t.nresp-1).concat(qr(0,a-o-1)):qr(0,a-o-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+o,t.nresp+a)):t.varvalues.slice(o,a),t}function Li(t,e,r,l,o=!0,a=[]){if(!Qt(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(l)||l.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,f;o?(c=e.ncols,f=e.nrows-r):(c=e.nrows,f=e.ncols-r);const u=l.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const v=new Int32Array(u),d=new Int32Array(u),h=new Int32Array(u);let m=0,g=0;for(let L=0;L<l.length;L++){const R=l[L].id,D=l[L].params,z=tn.findIndex(K=>K.id==R);if(z<0)throw new Error("prep_fit: wrong method name: "+R+".");const V=tn[z];if(D.length!==V.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+R+".");v[L]=z,d[L]=V.mpl,h[L]=V.get_mpl_new(f,D),m=m+d[L],g=g+h[L]}const p=new Float64Array(m);let _=0;for(let L=0;L<l.length;L++){const R=l[L].id,D=l[L].params;tn.findIndex(z=>z.id==R),p.set(D,_),_=_+d[L]}const b=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,b/e.v.BYTES_PER_ELEMENT);const w=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,w/v.BYTES_PER_ELEMENT);const k=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,k/d.BYTES_PER_ELEMENT);const y=t._malloc(h.length*h.BYTES_PER_ELEMENT);t.HEAP32.set(h,y/h.BYTES_PER_ELEMENT);const E=t._malloc(p.length*p.BYTES_PER_ELEMENT);t.HEAPF64.set(p,E/p.BYTES_PER_ELEMENT);const N=t._malloc(g*p.BYTES_PER_ELEMENT),A=new Int32Array(a),P=A.length,O=t._malloc(P*A.BYTES_PER_ELEMENT);if(t.HEAP32.set(A,O/A.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[b,c,f,r,u,w,k,E,y,N,o,O,P])!==1)throw new Error("prep_fit: unexpected error.");const H=t.HEAPF64.slice(N/p.BYTES_PER_ELEMENT,N/p.BYTES_PER_ELEMENT+g);return t._free(b),t._free(w),t._free(E),t._free(k),t._free(O),t._free(N),t._free(y),{ml:v,mpl:d,mp:p,mpl_new:h,mp_new:H,npred:f,class:["prepmodel"]}}function js(t,e,r,l,o=!0,a=!1){if(!Qt(e))throw new Error("prep_apply: D must be a matrix.");let c,f;if(o?(c=e.ncols,f=e.nrows-r):(c=e.nrows,f=e.ncols-r),f!==l.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+l.npred+" got "+f+").");const u=l.ml,v=l.mpl_new,d=l.mp_new,h=v.reduce((N,A)=>N+A,0);if(!u||u.length<1||!v||v.length!==u.length||d.length!==h)throw new Error("prep_apply: wrong structure of the model object.");const m=u.length,g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const p=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,p/u.BYTES_PER_ELEMENT);const _=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,_/v.BYTES_PER_ELEMENT);const b=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAPF64.set(d,b/d.BYTES_PER_ELEMENT);const w=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[g,c,f,r,m,p,_,b,w,o])!==1)throw new Error("prep_apply: unexpected error.");const y=t.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(g),t._free(p),t._free(_),t._free(b),t._free(w);const E=new Wt(y,e.nrows,e.ncols);if(a){const[N,A,P]=Pi(E,r,l);return P}return E}function tv(t,e,r,l){e===void 0&&(e=!0),l===void 0&&(l=!1);function o(u,v,d,h){if(typeof v=="boolean")return v?u.apply(d,2):ht([h]).rep(u.ncols);if(!qe(v))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(v.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return v}const a=o(t,e,Mn,0),c=o(t,r,io,1),f=Wt.zeros(t.nrows,t.ncols);for(let u=1;u<=t.ncols;u++){const v=t.getcolref(u),d=f.getcolref(u),h=a.v[u-1],m=1/c.v[u-1];for(let g=0;g<t.nrows;g++)d[g]=(v[g]-h)*m}return l?[f,a,c]:f}function Ri(t,e,r){return t<e?["regular","in"]:t>r?["outlier","out"]:["extreme","out"]}function rv(t,e,r,l,o,a,c,f){if(!f||f.length===0)return[0,0];let u=0,v=0;for(let d of f){const h=t[d],[m,g]=Ri(h,e,r);a[m]+=1,c[g]+=1,l[d]=m,o[d]=g,u=u+(g==="in"),v=v+(g!=="in")}return[u,v]}function zi(t,e,r,l,o,a,c,f,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let v=0,d=0;for(let R of u){const D=t[R],[z,V]=Ri(D,r,l);f[V]+=1,o[R]="alien",c.alien+=1,a[R]=V,v=v+(V!=="in"),d=d+(V==="in")}const h=u.slice();h.sort((R,D)=>t[R]-t[D]);let m=h.length;const g=h.map(R=>t[R]);let p=-1,_=0,b=0,w=0,k=0;for(;p<0;)_>0&&(o[h[m-1]]="external",c.alien=c.alien-1,c.external=c.external+1,m=m-1,h.pop(),g.pop()),b=Mn(g),w=il(g),k=w/(b*b),p=4-2*e*k,_=_+1;const y=(2+Math.sqrt(p))/k,E=y-e,N=b/y,A=r/N,P=1-2*(e+E)*(e+3*E)/(3*(e+2*E)**2),O=(P-1)*(1-3*P),T=(e+2*E)/(e+E)**2,H=1+P*T*(P-1-.5*(2-P)*O*T),j=P*Math.sqrt(2*T)*(1+.5*O*T),L=vo((Math.pow(A/(e+E),P)-H)/j);return[v,d,L,E,N,P,H,j,e,b]}function hl(t,e,r,l,o){(!o||!Array.isArray(o))&&(o=[]);let a=t.exclvars;(!a||!Array.isArray(a))&&(a=[]);const c=r.values.nrows,f=o.length,u=c-f,v=r.sep,d=e.classes&&e.classes.length===u,h=d?["","","","",""]:["","","",""];let m="";if(m+=["Reference classes:",d?"provided":"not provided",...h].join(v)+`
`,m+=["Alpha:",(t.alpha/100).toFixed(3),...h].join(v)+`
`,m+=["Limits estimator:",t.limType,...h].join(v)+`
`,m+=`
`,m+=["Nf:",e.Nf,...h].join(v)+`
`,m+=`
`,m+=["F crit (extremes):",t.eCrit,...h].join(v)+`
`,m+=["F crit (outliers):",t.oCrit,...h].join(v)+`
`,m+=`
`,a.length>0&&(m+=["Number of excluded variables:",a.length,...h].join(v)+`
`,m+=["Indices of excluded variables:",fv(a),...h].join(v)+`
`,m+=`
`),m+=["Objects:",c,...h].join(v)+`
`,m+=["In:",e.outcomes.decsNum.in,...h].join(v)+`
`,m+=["Out:",e.outcomes.decsNum.out,...h].join(v)+`
`,m+=["Excluded:",f,...h].join(v)+`
`,e.nMembers>0&&(m+=`
`,m+=["Members:",e.nMembers,...h].join(v)+`
`,m+=["Regular:",e.outcomes.rolsNum.regular,...h].join(v)+`
`,m+=["Extreme:",e.outcomes.rolsNum.extreme,...h].join(v)+`
`,m+=["Outliers:",e.outcomes.rolsNum.outlier,...h].join(v)+`
`,m+=["Sensitivity:",e.outcomes.stat.sensitivity,...h].join(v)+`
`),e.nStrangers>0&&(m+=`
`,m+=["Strangers:",e.nStrangers,...h].join(v)+`
`,m+=["In:",e.outcomes.decsNum.in-e.outcomes.rolsNum.regular,...h].join(v)+`
`,m+=["Aliens:",e.outcomes.rolsNum.alien,...h].join(v)+`
`,m+=["External:",e.outcomes.rolsNum.external,...h].join(v)+`
`,m+=["Specificity:",e.outcomes.stat.specificity,...h].join(v)+`
`,m+=["Selectivity:",e.outcomes.stat.selectivity,...h].join(v)+`
`,m+=`
`,m+=["Beta:",e.beta,...h].join(v)+`
`,m+=["Non-centrality (s):",e.s,...h].join(v)+`
`,m+=["Scaling (f0):",e.f0,...h].join(v)+`
`,e.nMembers>0)){const k=e.outcomes.TP/(e.outcomes.TP+e.outcomes.FP),y=e.outcomes.stat.sensitivity,E=1-e.outcomes.stat.specificity,N=2*k*y/(k+y),A=y/E,P=(1-y)/(1-E);m+=`
`,m+=["Efficiency:",e.outcomes.stat.efficiency,...h].join(v)+`
`,m+=["Accuracy:",e.outcomes.stat.accuracy,...h].join(v)+`
`,m+=["Precision:",k,...h].join(v)+`
`,m+=["F1-score:",N,...h].join(v)+`
`,m+=["PLR:",A,...h].join(v)+`
`,m+=["NLR:",P,...h].join(v)+`
`}m+=`
`,m+=["","object","class","role","decision","f"].join(v)+`
`;let g=0;for(let k=0;k<c;k++){if(f>0&&o.includes(k)){m+=["",r.objlabels[k],"-","removed","-","-"].join(v)+`
`;continue}m+=["",r.objlabels[k],e.classes[g],e.outcomes.rols[g],e.outcomes.decs[g],e.outcomes.f[g]].join(v)+`
`,g=g+1}m+=`
`,r.dec!=="."&&(m=m.replace(/\./g,r.dec)),m=["Target class:",t.className,...h].join(v)+`
`+m,m=["Data filename:",r.fileName,...h].join(v)+`
`+m;let p=["NIMCA results ("+l+")","https://mda.tools/nimca/",...h].join(v)+`

`;const _=new Blob([p+m],{type:"text/csv"}),b=window.URL.createObjectURL(_),w=document.createElement("a");w.setAttribute("href",b),w.setAttribute("download",`nimca-results-${l}.csv`),w.click()}function Ao(t,e){const r={nimca:t.asJSON(),prep:e},l=new Blob([JSON.stringify(r,Ps)],{type:"application/json"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download","nimca-model.json"),a.click()}const $o=class $o{constructor(e,r,l,o,a,c,f){Ce(this,is);this.d=e,this.ind=r,this.objlabels=l,this.objindices=o,this.classes=a,this.classNames=c,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,be(this,is,C(()=>f.oCrit&&f.eCrit?this.getOutcomes(f):null))}get outcomes(){return s(Z(this,is))}set outcomes(e){F(Z(this,is),e)}getOutcomes(e){const r=this.d.apply(T=>T/e.f0*e.Nf).v,l=new Array(this.nrows),o=new Array(this.nrows),a={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[f,u]=rv(r,e.eCrit,e.oCrit,o,l,a,c,this.ind.members),[v,d,h,m,g,p,_,b,w,k]=zi(r,e.Nf,e.eCrit,e.oCrit,o,l,a,c,this.ind.strangers);this.nUnknown>0&&zi(r,e.Nf,e.eCrit,e.oCrit,o,l,a,c,this.ind.unknown);const y=f>0?f/(f+u):0,E=v>0?v/(v+d):0,N=1-h,A=Math.sqrt(y*E),P=f>0&&v>0?(f+v)/(f+v+d+u):0,O={sensitivity:y,specificity:E,selectivity:N,efficiency:A,accuracy:P};return{Nf:e.Nf,f:r,decs:l,rols:o,decsNum:c,rolsNum:a,TP:f,FN:u,TN:v,FP:d,beta:h,s:m,f0:g,hz:p,Mz:_,Sz:b,k:w,m:k,stat:O}}toJSON(){return null}static fromJSON(e){return new $o(...e)}};is=new WeakMap;let No=$o;const bs=class bs{constructor(e,r,l,o,a,c,f,u,v,d,h,m,g="nimca-model"){Ce(this,cs);Ce(this,us);Ce(this,fs);Ce(this,vs);Ce(this,ds);Ce(this,hs);Ce(this,ms);Ce(this,gs);Ce(this,ps);this.mX=r,this.nrows=l,this.ncols=o,this.className=e,this.Nfc=a,this.Nfr=c,this.f0c=f,this.f0r=u,this.hash=v,this.class=["nimcamodel"],this.fileName=g,be(this,cs,re(Me(d))),be(this,us,re(Me(h))),be(this,fs,re(Me(m))),be(this,vs,C(()=>this.limType==="classic"?this.Nfc:this.Nfr)),be(this,ds,C(()=>this.limType==="classic"?this.f0c:this.f0r)),be(this,hs,C(()=>1-Number.parseFloat(this.alpha)/100)),be(this,ms,C(()=>Math.pow(1-this.gamma/100,1/l))),be(this,gs,C(()=>jn(this.eConfLim,this.Nf))),be(this,ps,C(()=>jn(this.oConfLim,this.Nf)))}get alpha(){return s(Z(this,cs))}set alpha(e){F(Z(this,cs),e,!0)}get gamma(){return s(Z(this,us))}set gamma(e){F(Z(this,us),e,!0)}get limType(){return s(Z(this,fs))}set limType(e){F(Z(this,fs),e,!0)}get Nf(){return s(Z(this,vs))}set Nf(e){F(Z(this,vs),e)}get f0(){return s(Z(this,ds))}set f0(e){F(Z(this,ds),e)}get eConfLim(){return s(Z(this,hs))}set eConfLim(e){F(Z(this,hs),e)}get oConfLim(){return s(Z(this,ms))}set oConfLim(e){F(Z(this,ms),e)}get eCrit(){return s(Z(this,gs))}set eCrit(e){F(Z(this,gs),e)}get oCrit(){return s(Z(this,ps))}set oCrit(e){F(Z(this,ps),e)}predict(e){if(!e.values||!Qt(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=bs.getDistance(e.values,this.mX),l={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let o=0;o<e.classes.length;o++)e.classes[o]===this.className?l.members.push(o):l.strangers.push(o);else l.unknown=qr(0,e.values.nrows-1);return new No(r,l,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let l=e.values;const o=e.classNames[0];if(!Qt(l))throw new Error("nimca.fit: X must be a matrix.");const a=l.apply(Mn,2),c=bs.getDistance(l,a),f=Mn(c),u=il(c);let v=Math.round(2*f*f/u);v<1&&(v=1),v>250&&(v=250);const d=Af(c),h=Nf(c),m=h/d;let g;m>2.685592117?g=1:m<.194565995?g=100:g=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/m),1.185785)));const p=.5*g*(d/jn(.5,g)+h/(jn(.75,g)-jn(.25,g)));return new bs(o,a,l.nrows,l.ncols,v,g,f,p,Fi(),r.alpha,r.gamma,r.limType)}static fromJSON(e){const{__type:r,mX:l,nrows:o,ncols:a,className:c,Nfc:f,Nfr:u,f0c:v,f0r:d,hash:h,alpha:m,gamma:g,limType:p,fileName:_}=e;return new bs(c,l,o,a,f,u,v,d,h,m,g,p,_)}static getDistance(e,r){const l=tv(e,r,!1),o=l.nrows,a=l.ncols,c=We.zeros(o);for(let f=0;f<a;f++){const u=l.getcolref(f+1);for(let v=0;v<o;v++)c.v[v]+=u[v]**2}return c}};cs=new WeakMap,us=new WeakMap,fs=new WeakMap,vs=new WeakMap,ds=new WeakMap,hs=new WeakMap,ms=new WeakMap,gs=new WeakMap,ps=new WeakMap;let ar=bs;function qr(t,e,r=1){const l=Math.round((e-t+1)/r),o=Array(l);for(let a=0;a<l;a++)o[a]=t+a*r;return o}function Ii(t,e){let r,l,o,a=[];if(e.length>0){const c=t.values.nrows,f=t.objindices,u=c-e.length;r=Array(u),l=Array(u),o=Array(u);let v=0;for(let d=0;d<c;d++)e.includes(d)||(r[v]=f[d],l[v]=t.classes[d],o[v]=t.objlabels[d],(a.length===0||!a.includes(l[v]))&&a.push(l[v]),v=v+1)}else r=t.objindices,o=t.objlabels,l=t.classes,a=t.classNames;return[r,o,l,a]}function Fi(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function nv(t,e,r,l,o=!1){const[a,c,f]=Ii(r,l),u=o&&e.prep&&e.prep.ml&&e.prep.ml.length>0?js(t,r.values,0,e.prep,!1,!0):r.values,v=Qf(t,e,u,l);v.hash=Fi(),v.objindices=a,v.objlabels=c,v.classes=f,v.classNames=r.classNames,v.varlabels=r.varlabels,v.eigenvals=Fr(e,"eigenvals"),v.cNh=Fr(e,"cNh"),v.cNq=Fr(e,"cNq"),v.ch0=Fr(e,"ch0"),v.cq0=Fr(e,"cq0"),v.rNh=Fr(e,"rNh"),v.rNq=Fr(e,"rNq"),v.rh0=Fr(e,"rh0"),v.rq0=Fr(e,"rq0");const d=e.nrows;return v.T2lim=2*(d-1)/(d-2)*wi(.95,2,d-2),v}function sv(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function Ts(t){return t.some(e=>Number.isNaN(e))}function Tn(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function qi(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function lv(t,e,r,l,o,a,c,f=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let v=qi(t);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");v=v.filter(z=>z.replaceAll(e,"").trim().length>0);const d=v[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,m;const g=r!=="no";(g||g===void 0&&Ts(firstRow))&&(m=d,h=1);const p=v.length-h;if(p<1)throw new Error("Data file should contain at least 1 row with values.");f===-1&&(f=p);let _,b,w,k=Array(p);l?(_=g?Tn(m[0]):"",w=Array(p),b=1):(_="",w=[],b=0);let y,E=[],N;o?(y=g?Tn(m[b]):"",N=Array(p),b=b+1):(y="",N=[]);const A=d.length-b;if(A<1)throw new Error("Data file should contain at least 1 column with values.");const P=Wt.zeros(A,p);for(let z=h;z<p+h;z++){const V=z-h;k[V]=V;let K=v[z].split(e);if(l&&(w[V]=K[0],K.shift()),o){const X=K[0];N[V]=X,K.shift(),(E.length===0||E.indexOf(X)<0)&&E.push(X)}const J=u==="."?K.map((X,te)=>Number.parseFloat(X.trim())):K.map((X,te)=>Number.parseFloat(X.trim().replace(u,".")));if(J.some(X=>Number.isNaN(X)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(J.length!=A)throw new Error("Wrong number of values in row #"+z);P.v.set(new Float64Array(J),(z-h)*A)}if(!l||w.length!==p){w=Array(p);for(let z=0;z<p;z++)w[z]="O"+(z+1)}w=w.map(z=>Tn(z)),N=N.map(z=>Tn(z)),E=E.map(z=>Tn(z));let O,T=Array(A),H=Array(A);if(m&&m.length===A+b){O=m.map(z=>Tn(z)).slice(b);for(let z=0;z<A;z++)T[z]=z>=f?z-f:z,H[z]=z>=f?z-f+1:z+1}else{O=Array(A);for(let z=0;z<A;z++)T[z]=z>=f?z-f:z,O[z]=z>=f?"V"+(z-f+1):"Y"+(z+1),H[z]=z>=f?z-f+1:z+1}let j;if(r==="values"){if(j=u==="."?O.map((z,V)=>V<f?V:Number.parseFloat(z.trim())):O.map((z,V)=>V<f?V:Number.parseFloat(z.trim().replace(u,"."))),j.some(z=>Number.isNaN(z)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else j=H;Array.isArray(j)||(j=[]),a||(a=""),c||(c=""),a=j.length>0&&a.length>0?a:"Variables",c=j.length>0&&c.length>0?c:"";const L=a+(c.length>0?", "+c:""),R=j[1]<j[0];return{values:P.t(),nresp:f,header:r,hasLabels:l,hasClassNames:o,labelsVarname:_,classLabelsVarname:y,objlabels:w,objindices:k,varlabels:O,varvalues:j,varindices:T,varrev:R,classes:N,classNames:E,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:L}}function ov(t){if(Ts(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let l=2;l<e;l++){let o=[];for(let v=1;v<t.length;v++)o.push(t[v][l]);const a=t[0][l],c=Mn(o),f=io(o),u=Math.abs((a-c)/f);r.push(u)}return r.every(l=>l>5)}function av(t){const r=t[0].split(","),l=t[1].split(","),o=r.length,a=l.length,c=";",f=t[0].split(c),u=t[1].split(c),v=f.length,d=u.length;let h,m;if(o>1&&a>1&&o===a&&o>v)m=",",h=o;else if(v>1&&d>1&&v===d)m=c,h=v;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",h]}function iv(t,e=0){const r=qi(t),l=r.length;if(l<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,a,c]=av(r),f=Math.min(c,5),u=Math.min(l,5);let v=r[0].split(o).length,d=r.slice(0,u).map(T=>T.split(o).slice(0,f));d=d.map(T=>T.map(H=>Tn(H)));const h=d.map(T=>sv(T.slice(),a));for(let T=1;T<u;T++)if(Ts(h[T].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const m=ov(h);let g=0;const p=m?1:0,_=p+1,b=d[p][0],w=d[_][0],k=h[p][0],y=h[_][0],E=h[p][1],N=h[_][1];let A=!1,P=!1;if(Number.isNaN(k)&&Number.isNaN(y)&&b!==w?(A=!0,g=g+1):Number.isNaN(E)&&Number.isNaN(N)&&b!==w&&(A=!0,P=!0,g=g+2),!P){const T=A?1:0,H=h[p][T],j=h[_][T];P=Ts([H,j]),g=g+P}let O="no";if(m){g>0?d[0].slice(g+e):d[e];const T=g>0?h[0].slice(g+e):h[e];O=Ts(T)?"labels":"values"}return[o,A,P,O,v]}function cv(t){const e=t.values.t(),r=t.sep,l=t.dec;let o=null;t.header!=="no"&&(o=t.header==="values"?t.nresp&&t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp)):t.varvalues.slice():t.varlabels.slice()),o&&t.hasClassNames&&(o=[t.classLabelsVarname,...o]),o&&t.hasLabels&&(o=[t.labelsVarname,...o]);const a=t.classes&&t.classes.length===e.ncols,c=t.objlabels&&t.objlabels.length===e.ncols;let f=o?o.join(r):"";for(let u=0;u<e.ncols;u++){let v=e.getcolref(u+1).join(r);l!=="."&&(v=v.replace(".",l)),a&&(v=t.classes[u]+t.sep+v),c&&(v=t.objlabels[u]+t.sep+v),f=f+`
`+v}return f=f+`
`,l!=="."&&(f=f.replace(/\./g,l)),f}function uv(t,e){const r=cv(t),l=new Blob([r],{type:"text/csv"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.csv`),a.click()}function ts(t,e){if(!e||e.length===0)return t;const[r,l,o,a]=Ii(t,e);return{values:t.values.subset(r.map(f=>f+1),[]),objlabels:l,objindices:r,classes:o,classNames:a,header:t.header,hasLabels:t.hasLabels,hasClassNames:t.hasClassNames,classNames:t.classNames,labelsVarname:t.labelsVarname,classLabelsVarname:t.classLabelsVarname,varlabels:t.varlabels,varvalues:t.varvalues,varindices:t.varindices,varrev:t.varrev,responses:t.responses,sep:t.sep,dec:t.dec,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits,varAxisTitle:t.varAxisTitle,fileName:t.fileName,nresp:t.nresp}}function fv(t){if(!t.length)return"";t.sort((o,a)=>o-a);let e=[],r=t[0],l=r;for(let o=1;o<t.length;o++)t[o]===l+1?l=t[o]:(r===l?e.push(`${r}`):e.push(`${r}-${l}`),r=t[o],l=r);return r===l?e.push(`${r}`):e.push(`${r}-${l}`),e.join(" ")}function Ps(t,e){return Qt(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:qe(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof ar?e.asJSON():e}function So(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Hf(e.v,e.nrows,e.ncols);if(e.__type==="vector")return ht(e.v);if(e.__type==="NIMCA")return ar.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Co(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${l}${o}${a}${c}`}function Oi(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function ml(t,e,r){let l="";for(let o=0;o<e;o++){const a=t.getUint8(r++);if(a===0)break;l+=String.fromCharCode(a)}return l}function vv(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],l=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],o=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=t.getUint8(a);a+=1;const f=t.getUint8(a);if(a+=1,f===77)throw new Error("SPC file has old format which is not supported.");const u=f===75,v=t.getUint8(a);a+=1;const d=t.getInt8(a);a+=1;const h=t.getUint32(a,u);a+=4;const m=t.getFloat64(a,u);a+=8;const g=t.getFloat64(a,u);a+=8;const p=t.getUint32(a,u);a+=4;const _=t.getUint8(a);a+=1;const b=t.getUint8(a);a+=1;const w=t.getUint8(a);a+=1;const k=t.getUint8(a);a+=1;const y=t.getUint32(a,u);a+=4;const E=ml(t,9,a);a+=9;const N=ml(t,9,a);a+=9;const A=t.getUint16(a,u);a+=2;const P=Array.from({length:8},()=>{const le=t.getFloat32(a,u);return a+=4,le}),O=ml(t,130,a);a+=130;const T=ml(t,30,a);a+=30;const H=t.getUint32(a,u);a+=4;const[j,L,R,D,z,V,K,J]=Oi(c),X=_===255?r[31]:r[_],te=_===255?e[31]:e[_],ae=b<=26?l[b]:b>=128&&b<=131?o[b]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:j,TCGRAM:L,TMULTI:R,TRANDM:D,TORDRD:z,TALABS:V,TXYXYS:K,TXVALS:J},fexper:v,fexp:d,fnpts:h,ffirst:m,flast:g,fnsub:p,fxtype:_,fytype:b,fztype:w,fpost:k,fdate:y,fres:E,fsource:N,fpeakpt:A,fspare:P,fcmnt:O,fcatxt:T,flogoff:H,xaxisName:X,xaxisUnit:te,yaxisName:ae}}function dv(t,e){const r=Oi(t.getUint8(e));e+=1;const l=t.getInt8(e);e+=1;const o=t.getUint16(e,!0);e+=2;const a=t.getFloat32(e,!0);e+=4;const c=t.getFloat32(e,!0);e+=4;const f=t.getFloat32(e,!0);e+=4;const u=t.getInt32(e,!0);e+=4;const v=t.getInt32(e,!0);e+=4;const d=t.getFloat32(e,!0);return e+=4,{flags:r,exp:l,index:o,time:a,next:c,noise:f,nPoints:u,nScans:v,wAxis:d}}async function Bi(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),l=await t.arrayBuffer(),o=new DataView(l);let a=0;const c=vv(o);a+=512;const f=c.fnpts;if(f<2)throw new Error(`Error reading SPC file (${t.name}).`);let u=new Array(f);if(c.ftflgs.TXVALS)for(let h=0;h<f;h++){const m=o.getFloat32(a,!0);a=a+4,u[h]=m}else{(c.flast-c.ffirst)/(f-1);for(let h=0;h<f;h++)u[h]=c.ffirst+h*c.flast}const v=new Float64Array(f*c.fnsub);for(let h=0;h<c.fnsub;h++){dv(o,a),a=a+32;for(let m=0;m<f;m++){const g=o.getFloat32(a,!0);a=a+4,v[h*f+m]=g}}const d=[];return c.fnsub>1?qr(1,c.fnsub).forEach(m=>{d.push(r+"_"+m)}):d.push(r),{hdr:c,xvalues:u,yvalues:v,objlabels:d}}async function hv(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let l=[],o=[];const a=await Bi(t[0]),c=a.xvalues.length;if(r.push(a.yvalues),l=l.concat(a.objlabels),o.push(a.hdr.fnsub),e>1)for(let p=1;p<e;p++){const _=await Bi(t[p]);if(_.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");r.push(_.yvalues),l=l.concat(_.objlabels),o.push(_.hdr.fnsub)}const f=o.reduce((p,_)=>p+_,0),u=new Float64Array(f*c);let v=0;for(let p=0;p<r.length;p++)u.set(r[p].slice(),v),v+=o[p]*c;const d=new Wt(u,c,f),h=qr(0,c-1),m=qr(0,f-1),g=a.xvalues.map(p=>p.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:l,objindices:m,varlabels:g,varvalues:a.xvalues,varindices:h,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var mv=W('<button tabindex="0" class="button svelte-1to1iow"> </button>');function Et(t,e){let r=B(e,"text",3,"button");var l=mv();l.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var o=I(l);ee(()=>fe(o,r())),S(t,l)}vt(["click"]);var gv=W('<button tabindex="0"></button>');function Pn(t,e){B(e,"disable",3,!1);var r=gv();r.__click=function(...l){var o;(o=e.onclick)==null||o.apply(this,l)},ee(()=>{q(r,"title",e.title),q(r,"aria-label",e.title),q(r,"alt",e.title),kt(r,1,`button ${e.className??""}`,"svelte-qbt64")}),S(t,r)}vt(["click"]);function Or(t,e){let r=B(e,"title",3,"Reset");Pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function pv(t,e){let r=B(e,"title",3,"Undo");Pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function bv(t,e){let r=B(e,"title",3,"Download");Pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function _v(t,e){let r=B(e,"title",3,"Add");Pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function Di(t,e){let r=B(e,"title",3,"Settings");Pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function wv(t,e){let r=B(e,"title",3,"Move up");Pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function yv(t,e){let r=B(e,"title",3,"Move down");Pn(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}function Ln(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var xv=W('<span class="label svelte-1bhp5bp"> </span>'),kv=W("<div><!> <!></div>");function ie(t,e){let r=B(e,"label",3,null),l=B(e,"name",3,""),o=B(e,"status",3,""),a=B(e,"colors",3,""),c=B(e,"labelWidth",3,12);var f=kv(),u=I(f);{var v=h=>{var m=xv(),g=I(m);ee(()=>{gt(m,`flex-basis:${c()??""}ch;`),fe(g,r())}),S(h,m)};Y(u,h=>{r()&&h(v)})}var d=M(u,2);Rr(d,()=>e.children??jt),ee(()=>{kt(f,1,`control-element ${l()??""} ${o()??""}`,"svelte-1bhp5bp"),gt(f,a())}),S(t,f)}const Vi=(t,e,r,l)=>{const o=e(t);o<0||o>1||F(r,o*100>s(l)-5&&o*100<s(l)+5,!0)},Yi=(t,e,r,l,o,a)=>{F(e,!1);const c=r(t);c<0||c>1||(l(o(c)),a()&&a()(l()))},Ui=(t,e,r,l,o,a)=>{if(!s(e))return;const c=r(t);c<0||c>1||(l(o(c)),a()&&a()(l()))},Ev=(t,e,r,l,o,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<l()?l():e()-r()),o()&&o()(e());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r()),o()&&o()(e());return}};var Av=W('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function Ls(t,e){me(e,!0);let r=B(e,"min",7,0),l=B(e,"max",3,100),o=B(e,"value",31,()=>Me(r())),a=B(e,"decNum",3,1),c=B(e,"step",19,()=>+((l()-r())/100).toFixed(4)),f=B(e,"onchange",3,null);ue(()=>{o()<r()&&(o(r()),f()&&f()(o())),o()>l()&&(o(l()),f()&&f()(o())),r()>l()&&r(l())});let u=re(void 0),v=re(void 0),d=re(!1);const h=A=>{const P=r()+A*(l()-r());return+(Math.round(P/c())*c()).toFixed(4)},m=A=>{const P=s(u).getBoundingClientRect(),O=s(v).getBoundingClientRect(),T=P.x,H=O.x+O.width;return(A.clientX-T)/(H-T)},g=A=>{F(d,!1)},p=A=>{let P=o()+c()*A.deltaY*.5;P<r()&&(P=r()),P>l()&&(P=l()),o(+(Math.round(P/c())*c()).toFixed(4)),A.preventDefault(),f()&&f()(o())},_=C(()=>r()===l()?100:(o()-r())/(l()-r())*100);var b=Av();b.__keydown=[Ev,o,c,r,f,l],b.__mousemove=[Ui,d,m,o,h,f],b.__mousedown=[Vi,m,d,_],b.__mouseup=[Yi,d,m,o,h,f],b.__touchmove=[Ui,d,m,o,h,f],b.__touchstart=[Vi,m,d,_],b.__touchend=[Yi,d,m,o,h,f];var w=I(b);let k;var y=I(w);let E;var N=I(y);Sn(w,A=>F(u,A),()=>s(u)),Sn(b,A=>F(v,A),()=>s(v)),ee((A,P,O)=>{q(b,"aria-valuenow",o()),q(b,"aria-valuemin",r()),q(b,"aria-valuemax",l()),k=kt(w,1,"range-slider svelte-7wycr",null,k,A),gt(w,`width:${s(_)??""}%`),E=kt(y,1,"range-value svelte-7wycr",null,E,P),fe(N,O)},[()=>({"range-slider_right":s(_)<50}),()=>({"range-value_right":s(_)<50}),()=>o().toFixed(a())]),En("mousewheel",b,p),En("mouseleave",b,g),En("touchcancel",b,g),S(t,b),ge()}vt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Wi=(t,e,r,l,o)=>{const a=e(t);a<0||a>1||F(r,a>s(l)&&a<s(o)+s(l),!0)},Hi=(t,e,r,l,o)=>{F(e,!1);const a=r(t);if(a<0||a>1)return;const c=l(a);o()!==c&&o(c)},Gi=(t,e,r,l,o)=>{if(!s(e))return;const a=r(t);if(a<0||a>1)return;const c=l(a);c!=o()&&o(c)},Nv=(t,e,r,l,o)=>{if(t.key==="ArrowLeft"){e(e()-r()<l()?l():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>o()?o():e()+r());return}};var Sv=W('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function Rs(t,e){me(e,!0);let r=B(e,"min",3,0),l=B(e,"max",3,10),o=B(e,"value",31,()=>Me(r())),a=B(e,"step",3,1);o()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(r())),o()>l()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(l())),r()>l()&&console.error("The min and max values must be distinct.");let c=re(void 0),f=re(void 0),u=re(!1);const v=C(()=>r()===l()?0:(o()-r())/(l()-r()+a())),d=C(()=>a()/(l()-r()+a())),h=C(()=>l()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${s(d)*100}%, var(--bg-color-light2, #e8e8e8) ${s(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*s(d)}%)`:"background: #f0f0f0"),m=A=>{if(A<0||A>1)return o();let P=o();return Math.round(s(d)/A),A<s(v)&&s(v)>0&&(P=o()-a()*Math.ceil((s(v)-A)/s(d))),A>s(v)+s(d)&&s(v)+s(d)<1&&(P=o()+a()*Math.ceil((A-(s(v)+s(d)))/s(d))),P<r()&&(P=r()),P>l()&&(P=l()),P},g=A=>{const P=s(f).getBoundingClientRect(),O=P.x,T=P.x+P.width;return(A.clientX-O)/(T-O)},p=A=>{F(u,!1)},_=A=>{let P=o()+Math.round(A.deltaY*.5)*a();P<r()&&(P=r()),P>l()&&(P=l()),o(P),A.preventDefault()};var b=Sv();b.__keydown=[Nv,o,a,r,l],b.__mousemove=[Gi,u,g,m,o],b.__mousedown=[Wi,g,u,v,d],b.__mouseup=[Hi,u,g,m,o],b.__touchmove=[Gi,u,g,m,o],b.__touchstart=[Wi,g,u,v,d],b.__touchend=[Hi,u,g,m,o];var w=I(b);let k;var y=I(w);let E;var N=I(y);Sn(w,A=>F(c,A),()=>s(c)),Sn(b,A=>F(f,A),()=>s(f)),ee((A,P,O)=>{q(b,"aria-valuenow",o()),q(b,"aria-valuemin",r()),q(b,"aria-valuemax",l()),gt(b,s(h)),k=kt(w,1,"range-slider svelte-1lbks0y",null,k,A),gt(w,`width: max(2px, ${s(d)*100}%);left:${s(v)*100}%;`),E=kt(y,1,"range-value svelte-1lbks0y",null,E,P),fe(N,O)},[()=>({"range-slider_left":s(d)<.1&&s(v)<.5,"range-slider_right":s(d)<.1&&s(v)>=.5}),()=>({"range-value_right":s(d)<.1&&s(v)>.5,"range-value_left":s(d)<.1&&s(v)<=.5}),()=>o().toFixed(0)]),En("mousewheel",b,_),En("mouseleave",b,p),En("touchcancel",b,p),S(t,b),ge()}vt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Cv=(t,e,r)=>{if(t.key==="ArrowLeft"){const l=e.options.findIndex(o=>o===r());l>0&&r(e.options[l-1]);return}if(t.key==="ArrowRight"){const l=e.options.findIndex(o=>o===r());l<e.options.length-1&&r(e.options[l+1]);return}};var Mv=(t,e,r)=>e(r),jv=W('<button tabindex="-1"><!></button>'),Tv=W('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function pt(t,e){me(e,!0);let r=B(e,"value",31,()=>Me(e.options[0])),l=B(e,"className",3,"");var o=Tv(),a=G(o);a.__keydown=[Cv,e,r],nt(a,20,()=>e.options,f=>f,(f,u)=>{var v=jv();v.__click=[Mv,r,u];let d;var h=I(v);Tt(h,()=>u),ee((m,g)=>d=kt(v,1,`option option_${m??""}`,"svelte-bifhtc",d,g),[()=>u.toString().replace(".","_"),()=>({selected:u==r()})]),S(f,v)});var c=M(a,2);ee(()=>kt(a,1,`selector ${l()??""}`,"svelte-bifhtc")),ai(c,r),S(t,o),ge()}vt(["keydown","click"]);function Rn(t,e){me(e,!0);let r=B(e,"options",19,()=>["no","yes"]),l=B(e,"value",15,!1),o=re(!0);const a=C(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());ue(()=>F(o,l()?r()[1]:r()[0],!0)),ue(()=>l(s(o)===r()[1]));var c=he(),f=G(c);{var u=v=>{pt(v,{get options(){return s(a)},get value(){return s(o)},set value(d){F(o,d,!0)}})};Y(f,v=>{s(a)&&v(u)})}S(t,c),ge()}function Ki(t,e,r){s(e)&&s(e).files.length>0?r(s(e).files.length===1?s(e).files[0]:s(e).files):r(null)}function Ji(t,e){(t.type==="click"||t.type==="keydown"&&(t.code==="Space"||t.code==="Enter"))&&s(e).click()}var Pv=W('<input type="file" multiple class="svelte-xoa0sf"/>'),Lv=W('<input type="file" class="svelte-xoa0sf"/>'),Rv=W('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function gl(t,e){me(e,!0);let r=B(e,"file",15),l=B(e,"message",3,"Select CSV file with dataset"),o=B(e,"acceptType",3,".csv"),a=B(e,"multiple",3,!1),c=re(void 0);function f(w){s(c).value=null,r(null)}var u=Rv(),v=G(u);v.__keydown=[Ji,c],v.__click=[Ji,c];let d;var h=I(v),m=M(h);{var g=w=>{var k=Pv();k.__change=[Ki,c,r],Sn(k,y=>F(c,y),()=>s(c)),ee(()=>q(k,"accept",o())),S(w,k)},p=w=>{var k=Lv();k.__change=[Ki,c,r],Sn(k,y=>F(c,y),()=>s(c)),ee(()=>q(k,"accept",o())),S(w,k)};Y(m,w=>{a()?w(g):w(p,!1)})}var _=M(v,2);{var b=w=>{Or(w,{onclick:f})};Y(_,w=>{r()&&w(b)})}ee(w=>{d=kt(v,1,"file-selector svelte-xoa0sf",null,d,w),fe(h,`${(r()?r().name:l())??""} `)},[()=>({selected:r()})]),S(t,u),ge()}vt(["keydown","click","change"]);function zv(t,e,r,l){e()&&F(r,e()(l()),!0)}var Iv=W('<div class="error-message svelte-11e14eb"> </div>'),Fv=W('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function Xi(t,e){me(e,!0);let r=B(e,"value",15,""),l=B(e,"className",3,""),o=B(e,"placeholder",3,""),a=B(e,"maxLength",3,25),c=B(e,"validator",3,null),f=re("");var u=Fv();let v;var d=I(u);d.__input=[zv,c,f,r];var h=M(d,2);{var m=g=>{var p=Iv(),_=I(p);ee(()=>fe(_,s(f))),S(g,p)};Y(h,g=>{s(f)&&s(f).length>0&&g(m)})}ee(g=>{v=kt(u,1,`textinput ${l()??""}`,"svelte-11e14eb",v,g),q(d,"placeholder",o()),q(d,"maxlength",a())},[()=>({error:s(f)&&s(f).length>0})]),ai(d,r),S(t,u),ge()}vt(["input"]);var qv=W('<div class="spinner svelte-wlgijz"></div>');function Qi(t){var e=qv();S(t,e)}vt(["keydown","click"]),vt(["keydown","click"]);var Ov=W("<h2> </h2>"),Bv=W("<!> <!>",1),Dv=W('<div class="widget"><!></div>');function Vv(t,e){me(e,!0);let r=B(e,"title",3,""),l=B(e,"value",15),o=B(e,"labelWidth",3,13);function a(v){const d={};for(const h of Object.keys(v))d[h]=v[h].default;return d}ue(()=>{!l()&&e.options&&l(a(e.options))});var c=Dv(),f=I(c);{var u=v=>{var d=Bv(),h=G(d);{var m=p=>{ie(p,{children:(_,b)=>{var w=Ov(),k=I(w);ee(()=>fe(k,r())),S(_,w)},$$slots:{default:!0}})};Y(h,p=>{r()&&p(m)})}var g=M(h,2);nt(g,17,()=>Object.keys(e.options),lt,(p,_)=>{const b=C(()=>e.options[s(_)]);var w=he(),k=G(w);{var y=E=>{ie(E,{get name(){return s(b).name},get label(){return s(b).label},get labelWidth(){return o()},children:(N,A)=>{var P=he(),O=G(P);Ns(O,()=>s(b).el,(T,H)=>{H(T,lr(()=>s(b).props,{get value(){return l()[s(_)]},set value(j){l(l()[s(_)]=j,!0)}}))}),S(N,P)},$$slots:{default:!0}})};Y(k,E=>{s(b).hidden||E(y)})}S(p,w)}),S(v,d)};Y(f,v=>{l()&&v(u)})}S(t,c),ge()}var Yv=W('<span class="item svelte-igakmm"> </span>'),Uv=W('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function Mo(t,e){me(e,!0);var r=he(),l=G(r);{var o=a=>{ie(a,{children:(c,f)=>{var u=Uv(),v=G(u),d=M(I(v),2);nt(d,17,()=>e.outliers,lt,(p,_)=>{var b=Yv(),w=I(b);ee(()=>fe(w,e.dataset.objlabels[s(_)])),S(p,b)});var h=M(v,2);{var m=p=>{pv(p,{get onclick(){return e.undoOutliers}})};Y(h,p=>{e.outliers.length>1&&p(m)})}var g=M(h,2);Or(g,{get onclick(){return e.resetOutliers}}),S(c,u)},$$slots:{default:!0}})};Y(l,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(o)})}S(t,r),ge()}function Wv(t,e){let r=0,l=0;t.nresp>0&&(r=new We(t.values.v.slice(0,t.nresp*t.values.nrows-1)),l=t.nresp);const o=new Wt(t.values.v.slice(l*t.values.nrows),t.values.nrows,t.values.ncols-l).t(),a=o.ncols<e?1:Math.round(o.ncols/e),c=Ft.seq(1,o.ncols,a),f=o.subset(null,c),u=r?r.subset(c):null,v=t.classes?t.classes.filter((d,h)=>c.v.includes(h)):null;return{classNames:t.classNames,classes:v,resp:u,values:f,varvalues:t.varvalues.filter((d,h)=>h>=l),varindices:t.varindices.filter((d,h)=>h>=l),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function jo(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function To(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}const Hv=t=>t;function Zi(t,{delay:e=0,duration:r=400,easing:l=Hv}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:l,css:a=>`opacity: ${a*o}`}}var Gv=W('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function $i(t,e){me(e,!0);let r=B(e,"isDark",3,!1);function l(h){h.key==="Escape"&&e.closeModal()}var o=Gv();En("keydown",Hl,l);let a;var c=I(o),f=I(c),u=I(f);u.__click=function(...h){var m;(m=e.closeModal)==null||m.apply(this,h)};var v=M(f,2),d=I(v);Rr(d,()=>e.children),ee(h=>a=kt(o,1,"drop svelte-oie633",null,a,h),[()=>({isdark:r()})]),oi(7,o,()=>Zi),S(t,o),ge()}vt(["click"]);var Kv=W('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function Po(t,e){me(e,!0);var r=he(),l=G(r);{var o=c=>{var f=Kv(),u=I(f),v=M(u),d=I(v);Tt(d,()=>ev(e.prepmodel)),ee(()=>fe(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),S(c,f)},a=c=>{var f=Zu("skipped");S(c,f)};Y(l,c=>{e.prepmodel.ml?c(o):c(a,!1)})}S(t,r),ge()}var Jv=W('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),Xv=W('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Qv(t,e){me(e,!0);var r=he(),l=G(r);{var o=a=>{ie(a,{name:"info",children:(c,f)=>{var u=Xv(),v=G(u),d=M(I(v),3);{var h=b=>{var w=Jv(),k=M(G(w),2),y=I(k);ee(()=>{q(k,"title",e.model.fileName),fe(y,e.model.fileName)}),S(b,w)};Y(d,b=>{e.model.fileName&&b(h)})}var m=M(d),g=M(m,3);Po(g,{get prepmodel(){return e.model}});var p=M(v,2);{var _=b=>{Or(b,{get onclick(){return e.reset}})};Y(p,b=>{e.reset&&b(_)})}ee(()=>fe(m,` ${e.model.npred??""} `)),S(c,u)},$$slots:{default:!0}})};Y(l,a=>{e.model&&a(o)})}S(t,r),ge()}var Zv=W("<!> <!>",1),$v=W("<p><!></p>"),ed=W("<!> <!>",1);function td(t,e){me(e,!0);let r=B(e,"model",15),l=re(""),o=re("neutral"),a=re("");function c(b){try{const w=JSON.parse(b,So);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");w.fileName=s(v),r(w),F(o,"success"),F(a,"")}catch(w){console.log(w),r(null),F(o,"error"),F(a,w,!0)}}function f(b){const w=new FileReader;w.onload=()=>{c(w.result)},w.readAsText(s(l))}function u(){F(l,""),r(null),F(o,"neutral"),F(a,"")}ue(()=>{s(l)===null?(r(null),F(o,"neutral"),F(a,"")):(F(o,"neutral"),F(a,""))}),ue(()=>{(r()===null||r()===0)&&F(l,"")});let v=C(()=>s(l)?s(l).name.replace(/\.[^/.]+$/,""):"");var d=ed(),h=G(d);{var m=b=>{var w=Zv(),k=G(w);Nn(k,()=>s(l),N=>{ie(N,{name:"file-selector",children:(A,P)=>{gl(A,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return s(l)},set file(O){F(l,O,!0)}})},$$slots:{default:!0}})});var y=M(k,2);{var E=N=>{ie(N,{name:"load-button",label:" ",children:(A,P)=>{Et(A,{onclick:f,text:"Load"})},$$slots:{default:!0}})};Y(y,N=>{s(l)&&N(E)})}S(b,w)},g=b=>{Qv(b,{get model(){return r()},reset:u})};Y(h,b=>{r()?b(g,!1):b(m)})}var p=M(h,2);{var _=b=>{ie(b,{name:"error",status:"error",children:(w,k)=>{var y=$v(),E=I(y);Tt(E,()=>s(a)),S(w,y)},$$slots:{default:!0}})};Y(p,b=>{(s(o)==="error"||s(a))&&b(_)})}S(t,d),ge()}var rd=W('<p class="title"> </p>'),nd=W("<!>&nbsp;",1),sd=W("<!> <!>",1),ld=W('<div class="method-open svelte-10os93"><!> <!> <!></div>'),od=(t,e)=>e.open(e.pos),ad=W('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function rs(t,e){me(e,!0);let r=B(e,"cancel",3,null);var l=he(),o=G(l);{var a=f=>{var u=ld(),v=I(u);ie(v,{children:(m,g)=>{var p=rd(),_=I(p);ee(()=>fe(_,e.title)),S(m,p)},$$slots:{default:!0}});var d=M(v,2);Rr(d,()=>e.children);var h=M(d,2);ie(h,{label:" ",children:(m,g)=>{var p=sd(),_=G(p);{var b=k=>{var y=nd(),E=G(y);Et(E,{text:"Cancel",get onclick(){return r()}}),S(k,y)};Y(_,k=>{r()&&k(b)})}var w=M(_,2);Et(w,{text:"Save",get onclick(){return e.apply}}),S(m,p)},$$slots:{default:!0}}),oi(3,u,()=>Zi,()=>({duration:10})),S(f,u)},c=f=>{ie(f,{children:(u,v)=>{var d=ad(),h=G(d),m=I(h),g=M(m);g.__click=[od,e];var p=I(g),_=M(h,2);wv(_,{onclick:()=>e.moveUp(e.pos)});var b=M(_,2);yv(b,{onclick:()=>e.moveDown(e.pos)});var w=M(b,2);Or(w,{onclick:()=>e.remove(e.pos)}),ee(()=>{fe(m,`${e.title??""} `),fe(p,e.settings)}),S(u,d)},$$slots:{default:!0}})};Y(o,f=>{e.isOpen?f(a):f(c,!1)})}S(t,l),ge()}vt(["click"]);var id=W("<!> <!>",1);function cd(t,e){me(e,!0);let r=B(e,"params",31,()=>Me([0,0])),l=B(e,"varind",15),o=B(e,"settings",15),a=B(e,"nvars",3,0),c=Cn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const f={snv:0,area:1,length:2,var:3},u=Object.keys(f);let v=re(Me(u[r()[0]])),d=re(r()[1]+1);const h="Normalization";ue(()=>{o(s(v)+(s(v)==="var"?" #"+s(d):""))}),ue(()=>{s(v)==="var"?l(l()[0]=r()[1]>0?r()[1]:1,!0):l(l()[0]=-1,!0)}),ue(()=>{s(v)==="var"&&e.isOpen?l(l()[0]=r()[1],!0):l(l()[0]=-1,!0)}),ue(()=>{s(v)&&r(r()[0]=f[s(v)],!0)}),ue(()=>{s(d)&&r(r()[1]=s(d)-1,!0)}),rs(t,lr({id:"norm",title:h,get settings(){return o()},get isOpen(){return e.isOpen}},()=>c,{children:(m,g)=>{var p=id(),_=G(p);ie(_,{label:"Type",children:(k,y)=>{pt(k,{get options(){return u},get value(){return s(v)},set value(E){F(v,E,!0)}})},$$slots:{default:!0}});var b=M(_,2);{var w=k=>{ie(k,{label:"Variable index",children:(y,E)=>{Rs(y,{min:1,get max(){return a()},step:1,get value(){return s(d)},set value(N){F(d,N,!0)}})},$$slots:{default:!0}})};Y(b,k=>{s(v)==="var"&&k(w)})}S(m,p)},$$slots:{default:!0}})),ge()}var ud=W("<!> <!> <!>",1);function fd(t,e){me(e,!0);let r=B(e,"params",31,()=>Me([3,1,0])),l=B(e,"settings",15),o=Cn(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const a=C(()=>{if(!e.nvars)return 3;const v=Math.round(e.nvars*.25);return v>39?39:v%2<1?v+1:v}),c=C(()=>r()[1]<2?[0,1]:[0,1,2]),f=C(()=>r()[0]<5?[1,2]:[1,2,3]);ue(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),ue(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),ue(()=>{l(r()[0]+", "+r()[1]+", "+r()[2])}),rs(t,lr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return l()}},()=>o,{children:(v,d)=>{var h=ud(),m=G(h);ie(m,{label:"Width",children:(_,b)=>{Rs(_,{min:3,get max(){return s(a)},step:2,get value(){return r()[0]},set value(w){r(r()[0]=w,!0)}})},$$slots:{default:!0}});var g=M(m,2);ie(g,{label:"Polynomial",children:(_,b)=>{pt(_,{get options(){return s(f)},get value(){return r()[1]},set value(w){r(r()[1]=w,!0)}})},$$slots:{default:!0}});var p=M(g,2);ie(p,{label:"Derivative",children:(_,b)=>{pt(_,{get options(){return s(c)},get value(){return r()[2]},set value(w){r(r()[2]=w,!0)}})},$$slots:{default:!0}}),S(v,h)},$$slots:{default:!0}})),ge()}var vd=W("<!> <!>",1);function dd(t,e){me(e,!0);let r=B(e,"params",31,()=>Me([1,0]));B(e,"varind",27,()=>-1);let l=B(e,"settings",15);B(e,"nvars",3,0);let o=Cn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},f=Object.keys(a),u=Object.keys(c);let v=re(Me(f[r()[0]])),d=re(Me(u[r()[1]]));const h="Scaling";ue(()=>{l(s(v)+"/"+s(d))}),ue(()=>{s(v)&&r(r()[0]=a[s(v)],!0)}),ue(()=>{s(d)&&r(r()[1]=c[s(d)],!0)}),rs(t,lr({id:"scale",title:h,get settings(){return l()}},()=>o,{children:(m,g)=>{var p=vd(),_=G(p);ie(_,{label:"Center",children:(w,k)=>{pt(w,{get options(){return f},get value(){return s(v)},set value(y){F(v,y,!0)}})},$$slots:{default:!0}});var b=M(_,2);ie(b,{label:"Scale",children:(w,k)=>{pt(w,{get options(){return u},get value(){return s(d)},set value(y){F(d,y,!0)}})},$$slots:{default:!0}}),S(m,p)},$$slots:{default:!0}})),ge()}var hd=W("<!> <!> <!>",1),md=W("<!> <!> <!>",1);function gd(t,e){me(e,!0);let r=B(e,"params",31,()=>Me([0,1,.1]));B(e,"varind",27,()=>-1);let l=B(e,"settings",15,"");B(e,"nvars",3,0);let o=Cn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Baseline correction",c={emsc:0,als:1},f=Object.keys(c);function u(p){const _=Math.ceil(Math.log10(p));return Math.pow(10,_)}let v=re(Me(f[r()[0]])),d=re(Me(r()[2]>0?u(r()[2]).toString():"0.1")),h=C(()=>parseFloat(s(d))),m=C(()=>s(h)/10),g=C(()=>Math.ceil(-Math.log10(s(h)))+1);ue(()=>{if(s(v)!=="als")return;const p=parseFloat(s(d));(r()[2]<s(m)||r()[2]>p-s(m))&&r(r()[2]=s(m),!0)}),ue(()=>{l(s(v)+" ("+(s(v)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),ue(()=>{s(v)&&r(r()[0]=c[s(v)],!0)}),rs(t,lr({id:"scale",title:a,get settings(){return l()}},()=>o,{children:(p,_)=>{var b=md(),w=G(b);ie(w,{label:"Type",children:(A,P)=>{pt(A,{get options(){return f},get value(){return s(v)},set value(O){F(v,O,!0)}})},$$slots:{default:!0}});var k=M(w,2);{var y=A=>{var P=hd(),O=G(P);ie(O,{label:"Lambda",children:(j,L)=>{Ls(j,{min:1,max:7,step:.1,get value(){return r()[1]},set value(R){r(r()[1]=R,!0)}})},$$slots:{default:!0}});var T=M(O,2);ie(T,{label:"Penalty range",children:(j,L)=>{pt(j,{options:["1","0.1","0.01"],get value(){return s(d)},set value(R){F(d,R,!0)}})},$$slots:{default:!0}});var H=M(T,2);ie(H,{label:"Penalty",children:(j,L)=>{{let R=C(()=>s(h)-s(m));Ls(j,{get min(){return s(m)},get max(){return s(R)},get step(){return s(m)},get decNum(){return s(g)},get value(){return r()[2]},set value(D){r(r()[2]=D,!0)}})}},$$slots:{default:!0}}),S(A,P)};Y(k,A=>{s(v)==="als"&&A(y)})}var E=M(k,2);{var N=A=>{ie(A,{label:"Polynomial",children:(P,O)=>{Rs(P,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(T){r(r()[1]=T,!0)}})},$$slots:{default:!0}})};Y(E,A=>{s(v)==="emsc"&&A(N)})}S(p,b)},$$slots:{default:!0}})),ge()}var pd=W("<!> <!>",1);function bd(t,e){me(e,!0);let r=B(e,"params",15),l=B(e,"varind",15),o=B(e,"settings",15),a=Cn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let f=re(!1);const u=C(()=>e.nvars?Math.round(e.nvars*.1):1);ue(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-s(u))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+s(u))&&r(r()[1]=e.right,!0),l(l()[1]=r()[0],!0),l(l()[2]=r()[1],!0),F(f,!0)):(l(l()[1]=-1,!0),l(l()[2]=-1,!0),F(f,!1))}),ue(()=>{o("left: "+r()[0]+" right: "+r()[1])}),rs(t,lr({id:"norm",title:c,get settings(){return o()},get isOpen(){return e.isOpen}},()=>a,{children:(v,d)=>{var h=he(),m=G(h);{var g=p=>{var _=pd(),b=G(_);ie(b,{label:"Left",children:(k,y)=>{{let E=C(()=>e.right-s(u));Ls(k,{get min(){return e.left},get max(){return s(E)},step:1,decNum:0,get value(){return r()[0]},set value(N){r(r()[0]=N,!0)}})}},$$slots:{default:!0}});var w=M(b,2);ie(w,{label:"Right",children:(k,y)=>{{let E=C(()=>e.left+s(u));Ls(k,{get min(){return s(E)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(N){r(r()[1]=N,!0)}})}},$$slots:{default:!0}}),S(p,_)};Y(m,p=>{s(f)&&p(g)})}S(v,h)},$$slots:{default:!0}})),ge()}var _d=W("<!> <!>",1);function wd(t,e){me(e,!0);let r=B(e,"params",31,()=>Me([3,5]));B(e,"varind",27,()=>-1);let l=B(e,"settings",15);B(e,"nvars",3,0);let o=Cn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Spike removal";ue(()=>{l(r()[0]+"/"+r()[1])}),rs(t,lr({id:"scale",title:a,get settings(){return l()}},()=>o,{children:(c,f)=>{var u=_d(),v=G(u);ie(v,{label:"Window",children:(h,m)=>{Rs(h,{min:3,max:15,step:2,get value(){return r()[0]},set value(g){r(r()[0]=g,!0)}})},$$slots:{default:!0}});var d=M(v,2);ie(d,{label:"Threshold",children:(h,m)=>{Rs(h,{min:3,max:50,get value(){return r()[1]},set value(g){r(r()[1]=g,!0)}})},$$slots:{default:!0}}),S(c,u)},$$slots:{default:!0}})),ge()}var yd=W("<h2>Selected methods</h2> <!>",1),xd=W("<p>No methods selected</p>"),kd=W("<p> </p>"),Ed=W("<h2>Available methods</h2>"),Ad=W("<p>Maximum number of methods is selected.</p>"),Nd=W("<p> </p> <!>",1),Sd=W('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function Cd(t,e){me(e,!0);let r=B(e,"prepobj",31,()=>Me([])),l=B(e,"meta",15),o=B(e,"varind",31,()=>-1),a=B(e,"rawdataShort",15),c=B(e,"prepdataShort",15),f=B(e,"prepmodel",3,null),u=B(e,"reset",3,null),v=B(e,"finalize",3,null);const d=30,h=8,m={savgol:fd,norm:cd,scale:dd,baseline:gd,trim:bd,spikes:wd};let g=re("neutral"),p=re(""),_=re(void 0),b=re(""),w=re(Me([])),k=re(!1),y=re(Me([])),E=re(Me([]));l(new Array(h).fill(""));const N=C(()=>e.rawdata.values.ncols-e.rawdata.nresp);let A=Me(e.rawdata.values.nrows<3?Object.keys(m).filter(se=>se!=="scale"):Object.keys(m));O(),r().length!==0&&P();async function P(){r().length!==0&&F(_,e.WASM().then(se=>{F(g,"applying");const pe=Li(se,a().values,0,r(),!0,[]),ce=js(se,a().values,0,pe,!0);c(jo(a(),ce)),F(g,"success")}).catch(se=>{c(jo(a())),console.error(se),F(g,"error"),F(p,se,!0)}),!0)}function O(){const se=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(se),F(y,[],!0),F(E,[],!0);return}let pe=[],ce=[],_e=0,ke=se;for(let ve of r())ve.id==="trim"?(pe.push(_e),ce.push(ke),ve.params[0]<_e&&(ve.params[0]=_e),ve.params[1]>ke&&(ve.params[1]=ke),_e=ve.params[0]>_e?ve.params[0]:_e,ke=ve.params[1]>0&&ve.params[1]<ke?ve.params[1]:ke):(pe.push(_e),ce.push(ke));F(y,pe,!0),F(E,ce,!0),e.setLeft(_e),e.setRight(ke)}function T(se){const pe=tn.find(ce=>ce.id===se);pe&&(s(y).push(e.left),s(E).push(e.right),r().push({id:pe.id,params:pe.mp}),F(k,!0),F(b,r().length-1))}function H(){r().length<1||(s(y).pop(),s(E).pop(),r().pop(),F(k,!1),F(b,-1))}function j(se){if(se<=0)return;const pe=r()[se],ce=r()[se-1];r(r()[se-1]=pe,!0),r(r()[se]=ce,!0),V()}function L(se){if(se<0||se===r().length-1)return;const pe=r()[se],ce=r()[se+1];r(r()[se+1]=pe,!0),r(r()[se]=ce,!0),V()}function R(se){se<0||se>=r().length||(r(r().filter((pe,ce)=>ce!==se)),V())}function D(se){F(b,se,!0)}function z(){F(b,null)}function V(){F(g,"neutral"),F(p,""),F(k,!1),F(b,null),f()&&u()(),O(),P(),o(o()[1]=-1,!0),o(o()[2]=-1,!0)}ue(()=>{e.rawdata&&!a()&&a(Wv(e.rawdata,d))}),ue(()=>{a()&&!c()&&c(jo(a()))}),ue(()=>{(!r()||r().length===0)&&(F(w,[],!0),c(null),F(y,[],!0),F(E,[],!0),F(b,""),l(new Array(h).fill("")))});var K=Sd(),J=G(K);let X;var te=I(J);ie(te,{label:"",children:(se,pe)=>{var ce=yd(),_e=M(G(ce),2);{var ke=ve=>{Di(ve,{text:"edit",get onclick(){return u()}})};Y(_e,ve=>{f()&&u()&&ve(ke)})}S(se,ce)},$$slots:{default:!0}});var ae=M(te,2);{var le=se=>{ie(se,{label:"",children:(pe,ce)=>{var _e=xd();S(pe,_e)},$$slots:{default:!0}})},oe=se=>{var pe=he(),ce=G(pe);nt(ce,17,r,lt,(_e,ke,ve)=>{const Te=C(()=>m[s(ke).id]);var Le=he(),Qe=G(Le);{var Ze=Ie=>{var ct=he(),tt=G(ct);{let Ge=C(()=>ve===s(b)),Zt=C(()=>s(k)?H:null);Ns(tt,()=>s(Te),(Br,Dr)=>{Dr(Br,{get isOpen(){return s(Ge)},get left(){return s(y)[ve]},get right(){return s(E)[ve]},pos:ve,get nvars(){return s(N)},moveUp:j,moveDown:L,apply:V,open:D,close:z,remove:R,get cancel(){return s(Zt)},get params(){return s(ke).params},set params(we){s(ke).params=we},get varind(){return o()},set varind(we){o(we)},get settings(){return l()[ve]},set settings(we){l(l()[ve]=we,!0)}})})}S(Ie,ct)},Ve=Ie=>{var ct=he(),tt=G(ct);{let Ge=C(()=>ve===s(b)),Zt=C(()=>s(k)?H:null);Ns(tt,()=>s(Te),(Br,Dr)=>{Dr(Br,{pos:ve,get isOpen(){return s(Ge)},get left(){return s(y)[ve]},get right(){return s(E)[ve]},get nvars(){return s(N)},moveUp:j,moveDown:L,apply:V,open:D,close:z,remove:R,get cancel(){return s(Zt)},get params(){return s(ke).params},set params(we){s(ke).params=we},get settings(){return l()[ve]},set settings(we){l(l()[ve]=we,!0)}})})}S(Ie,ct)};Y(Qe,Ie=>{s(ke).id==="norm"||s(ke).id==="trim"?Ie(Ze):Ie(Ve,!1)})}S(_e,Le)}),S(se,pe)};Y(ae,se=>{r().length===0?se(le):se(oe,!1)})}var $=M(ae,2);{var ne=se=>{ie(se,{status:"error",children:(pe,ce)=>{var _e=kd(),ke=I(_e);ee(()=>fe(ke,s(p))),S(pe,_e)},$$slots:{default:!0}})};Y($,se=>{(s(g)==="error"||s(p))&&se(ne)})}var Oe=M(J,2),Ke=I(Oe);{var Be=se=>{ie(se,{label:" ",children:(pe,ce)=>{Et(pe,{get onclick(){return v()},text:"Finalize"})},$$slots:{default:!0}})};Y(Ke,se=>{!f()&&!s(b)&&r().length>0&&se(Be)})}var je=M(Oe,2),Se=I(je);ie(Se,{label:"",children:(se,pe)=>{var ce=Ed();S(se,ce)},$$slots:{default:!0}});var et=M(Se,2);{var xe=se=>{ie(se,{label:"",children:(pe,ce)=>{var _e=Ad();S(pe,_e)},$$slots:{default:!0}})},De=se=>{var pe=he(),ce=G(pe);nt(ce,17,()=>A,lt,(_e,ke)=>{const ve=C(()=>tn.find(Te=>Te.id===s(ke)));ie(_e,{children:(Te,Le)=>{var Qe=Nd(),Ze=G(Qe),Ve=I(Ze),Ie=M(Ze,2);_v(Ie,{onclick:()=>T(s(ve).id)}),ee(()=>fe(Ve,s(ve).title)),S(Te,Qe)},$$slots:{default:!0}})}),S(se,pe)};Y(et,se=>{r().length>=h?se(xe):se(De,!1)})}ee(se=>X=kt(J,1,"selected-methods-list svelte-9cg1zq",null,X,se),[()=>({final:f()!==null&&f()!==void 0})]),S(t,K),ge()}const Md={small:30,medium:40,large:50,xlarge:60},jd={small:5,medium:8,large:12,xlarge:15},Td={small:6,medium:10,large:14,xlarge:18},Lo={small:4,medium:6,large:8,xlarge:10},Pd={small:12,medium:15,large:19,xlarge:21},Ro={small:11,medium:15,large:17,xlarge:19},zs={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},ns=["●","◼","▲","▼","⬥","＋","✳","✕"],Ld=.8,ec=.5,Rd={small:5,medium:8,large:12,xlarge:15},Pt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function tc(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function rc(t,e){if(t!=null&&(Array.isArray(t)&&(t=ht(t)),!(!qe(t)||t.length<1)))return t.apply(r=>Bo((r-e[1])*e[0]+e[2])).v}function bt(t,e){return rc(t,e.coords)}function zo(t,e){return rc(t,e.objects)}function nc(t,e){if(t!=null&&(Array.isArray(t)&&(t=ht(t)),!(!qe(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function sc(t,e){return nc(t,e.coords)}function lc(t,e){return nc(t,e.objects)}function Io(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function zn(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Fo(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=zn(Math.abs(Ir(vi(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(zn(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let l=Math.ceil(-zn(Math.log10(e)));return l<=2?[0,Array.from(t).map(o=>o.toFixed(l))]:(r=l-2,l=2,zn(Math.abs(Ar(t)))<=10?[-r,Array.from(t).map(o=>(o*Math.pow(10,r)).toFixed(l))]:[-r,Array.from(t).map(o=>(o/Math.pow(10,r)).toString())])}function Dt(t,e,r){return Array.isArray(t)&&(t=ht(t)),qe(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function qo(t,e,r,l){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=r.coords,a=l.coords;let c="";for(let f=0;f<t.length;f++){const u=Bo((t.v[f]-o[1])*o[0]+o[2]),v=Bo((e.v[f]-a[1])*a[0]+a[2]);c+=u+","+v+" "}return c}function oc(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>rn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function ac(t,e){if(Array.isArray(t)&&(t=ht(t)),!qe(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const l=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=l&c<=o);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function Oo(t,e,r,l,o,a){o==null&&(o=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const f=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*f,v=Math.floor(Math.log10(u)),d=1/Math.pow(10,v-1),h=Math.round(u*d)/d;let m=zd(h/r);o&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+f)/m)*m,p=Math.floor((c[1]-f)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-p)<m/10&&(p=p-m),r=Math.ceil(zn((p-g)/m))+1,t=We.zeros(r);for(let _=0;_<r;_++)t.v[_]=g+m*_;if(Math.abs(m)<1){const _=Math.pow(10,1+Math.round(-Math.log10(m)));t=t.apply(b=>Math.round((b+Number.EPSILON)*_)/_)}return t.filter(_=>_>=c[0]&_<=c[1])}function zd(t,e){const r=Math.floor(Math.log10(t)),l=t/Math.pow(10,r);let o;return l<=1?o=1:l<=2?o=2:l<=5?o=5:o=10,o*Math.pow(10,r)}function Bo(t){return Math.round(t*10)/10}function Id(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function ic(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Fd(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let l=0;l<8;l++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function qd(t){let e=-1,r=Fd();for(let l=0;l<t.length;l++)e=r[(e^t[l])&255]^e>>>8;return e^-1}function Od(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const l=qd(r),o=new Uint8Array(4);o[0]=l>>>24,o[1]=l>>>16,o[2]=l>>>8,o[3]=l&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(o,50),c}function Bd(t,e){const r=t.split(","),l=r[0],o=r[1],a=33/3*4,c=o.substring(0,a),f=o.substring(a),u=atob(c),v=new Uint8Array(u.length);for(let m=0;m<v.length;m++)v[m]=u.charCodeAt(m);const d=Od(v,e),h=btoa(String.fromCharCode(...d));return[l,",",h,f].join("")}function Dd(t,e,r,l,o){if(r||(r=10),l||(l=10),o||(o=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(l<1||l>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*o,c=l/2.54*o;setTimeout(()=>{const f=t.clientHeight,u=t.clientWidth;let v=Math.max(a/u,c/f),d=1;v<1&&(d=v,v=1);const h=document.createElement("canvas"),m=h.getContext("2d");h.width=u*(d<1?d:v),h.height=f*(d<1?d:v),t.setAttribute("width",u*v),t.setAttribute("height",f*v),m.fillStyle="white",m.fillRect(0,0,h.width,h.height),m.scale(v,v);const g=new XMLSerializer().serializeToString(t),p=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(p),b=new Image;b.onload=function(){d<0&&(b.width=b.width*d,b.height=b.height*d),m.drawImage(b,0,0,h.width,h.height);const w=h.toDataURL("image/png"),k=Bd(w,o),y=document.createElement("a");y.href=k,y.download=`${e}.png`,y.click()},b.src=_},20)}function Vd(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,l=t.clientWidth;t.setAttribute("width",l+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${l} ${r}`);const o=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(o),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function Yd(t,e,r,l){const o=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Ud(e,r,l)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=o},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=o},500)}).catch(a=>console.error(a))}async function Ud(t,e,r){const l=t.clientHeight,o=t.clientWidth,a=Math.max(e/o,r/l),c=document.createElement("canvas"),f=c.getContext("2d");return c.width=o*a,c.height=l*a,f.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((v,d)=>{const h=new XMLSerializer().serializeToString(t),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,p=g.createObjectURL(m),_=new Image;_.onload=function(){f.drawImage(_,0,0,c.width,c.height),g.revokeObjectURL(p),c.toBlob(function(b){b?v(b):d(new Error("Failed to create blob"))},"image/png")},_.onerror=function(b){d(b)},_.src=p})}function pl(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function Wd(t,e,r,l,o){let a=o.ticks,c=o.tickLabels,f=0;const u=Oo(a,t,jd[r.x],!0,o.whole),v=u.length,d=lc([Lo[r.plot]],l)[0],h=We.fill(e[0],v),m=h.add(d),g=We.fill(e[1],v);if(c||(a?(f=0,c=a.v.map(O=>zn(O).toString())):[f,c]=Fo(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[u,h],[u,g]],_=[[ht([t[0]]),ht([e[0]])],[ht([t[1]]),ht([e[0]])]],b=[[u,m],[u,h]],w=(t[1]-t[0])*.01,k=[[null,null],[[t[1]-(f>9?1:0)*w],[h.v[v-1]]]],y=Io(f),E=c.length,N=Math.abs(t[1]>t[0]?t[1]-u.v[E-1]:t[1]-u.v[0]),A=Math.abs(t[1]-t[0]),P=Math.abs(u.v[1]-u.v[0]);if(y.length>0&&N<A*.1&&N<P*.5){const O=t[1]>t[0]?E-1:0;c[O]=" "}return{grid:p,axisLine:_,tickCoords:b,tfCoords:k,ticks:a,tickLabels:c,tickFactor:f,tfLabel:y}}function Hd(t,e,r,l,o){let a=o.ticks,c=o.tickLabels,f=0;const u=Oo(o.ticks,e,Td[r.y],!0,o.whole),v=u.length,d=lc([Lo[r.plot]],l)[0],h=We.fill(t[0],v),m=h.add(d),g=We.fill(t[1],v);if(c||(a?(f=0,c=a.v.map(P=>zn(P).toString())):[f,c]=Fo(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[h,u],[g,u]],_=[[ht([t[0]]),ht([e[0]])],[ht([t[0]]),ht([e[1]])]],b=[[h,u],[m,u]],w=[[[],[]],[[m.v[v-1]+(Math.abs(f)>9?3:2)*d],[e[1]]]],k=Io(f),y=c.length,E=Math.abs(e[1]>e[0]?e[1]-u.v[y-1]:e[1]-u.v[0]),N=Math.abs(e[1]-e[0]),A=Math.abs(u.v[1]-u.v[0]);if(k.length>0&&E<N*.1&&E<A*.5){const P=e[1]>e[0]?y-1:0;c[P]=" "}return{grid:p,axisLine:_,tickCoords:b,tfCoords:w,ticks:a,tickLabels:c,tickFactor:f,tfLabel:k}}function Gd(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=qe(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let l,o;if(t.labels?(l=t.labels,o=0):[o,l]=Fo(e),!(l.length===e.length-1||l.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=l.length===r.length;return{colmap:r,breaks:e,labels:l,isCentered:a,labelsFactor:o,fontSize:t.fontSize,labelColor:t.labelColor}}function Kd(t,e,r,l){const o=t.colmap.length,a=e*Ld,c=a/o,f=r[1]+(e-a)*.5,u=Rd[l.y],v=r[2]+u*ec,d=v+u*(1+ec),h=t.isCentered?c/2:0;return{start:f,top:v,height:u,width:c,dxl:h,ltop:d}}function In(t,e,r){if(!t||!e||!r||typeof r!="function")return;const l=t.target;if(l.tagName===e){const o=Array.prototype.indexOf.call(l.parentNode.children,l);if(o<0)return;r(o),t.stopPropagation()}}function Jd(t,e){const l=document.createElement("canvas").getContext("2d");return l.font=e,l.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function Xd(t,e){const r="Arial",l=e/8,o=e*1.5,a=Array(t.length),c=Array(t.length);let f=0,u=0,v=0;for(let h=0;h<t.length;h++){const m=Jd("  "+t[h].label+"  ",e+"px "+r);v=m>v?m:v;const g=e*t[h].labelHeight+2*l;a[h]=g,c[h]=f,f=f+g,u=u+g}const d=o+2*l+v;return[c,a,o,l,u,d]}function Qd(t,e,r,l,o){const[a,c,f,u,v,d]=Xd(t.items,l*t.fontSize),h=t.position.includes("left")?e[0]+o:t.position.includes("right")?e[1]-d-o:(e[1]+e[0]-d)*.5,m=t.position.includes("top")?r[1]+o:t.position.includes("bottom")?r[0]-v-o:(r[1]+r[0]-v)*.5;return{lgl:h,lgt:m,lgw:d,lgh:v,ely:a,elh:c,elw:f,elp:u}}function rn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let l=0,o="";for(;l<t.length;){const a=t[l];if((a==="^"||a==="_")&&l<t.length-1){const c=a==="^";if(l++,t[l]==="("){let f=l+1;for(;f<t.length&&t[f]!==")";)f++;const u=t.slice(l+1,f);o+=c?e(u):r(u),l=f+1}else if(t[l]==="-"||t[l]==="–"){const f=t.slice(l,l+2);o+=c?e(f):r(f),l=l+2}else o+=c?e(t[l]):r(t[l]),l++}else o+=a,l++}return o}var Zd=ye('<line vector-effect="non-scaling-stroke"></line>'),$d=ye("<g></g>");function Do(t,e){me(e,!0);let r=B(e,"lineCoords",19,()=>[]),l=B(e,"lineColor",19,()=>Pt.DARKGRAY),o=B(e,"lineType",3,1),a=B(e,"lineWidth",3,1),c=B(e,"className",3,"");const f=Yt("axes");let u=C(()=>bt(r()[0][0],f.tX())),v=C(()=>bt(r()[1][0],f.tX())),d=C(()=>bt(r()[0][1],f.tY())),h=C(()=>bt(r()[1][1],f.tY())),m=C(()=>`stroke:${l()};stroke-width: ${a()}px;stroke-dasharray:${zs[f.scales().plot][o()-1]}`);var g=he(),p=G(g);{var _=b=>{var w=$d();nt(w,21,()=>s(u),lt,(k,y,E)=>{var N=Zd();ee(()=>{q(N,"x1",s(u)[E]),q(N,"x2",s(v)[E]),q(N,"y1",s(d)[E]),q(N,"y2",s(h)[E]),gt(N,s(m))}),S(k,N)}),ee(()=>kt(w,0,lf(c()))),S(b,w)};Y(p,b=>{s(u)&&s(d)&&s(v)&&b(_)})}S(t,g),ge()}var e1=ye('<text text-anchor="middle"><!></text>'),t1=ye("<text><!></text>"),r1=ye("<text><!></text>"),n1=ye('<g class="tick-labels"><!></g>');function cc(t,e){me(e,!0);let r=B(e,"pos",3,1),l=B(e,"las",3,1),o=C(()=>["middle","middle","start","middle","end"][r()]),a=C(()=>`fill:${e.textColor};`);const c=Yt("axes");let f=C(()=>bt(e.tickCoords[1][0],c.tX())),u=C(()=>bt(e.tickCoords[1][1],c.tY())),v=C(()=>Ro[c.scales().plot]),d=C(()=>[0,0,s(v),0,-s(v)][r()]),h=C(()=>[0,s(v),0,-s(v),0][r()]);var m=n1(),g=I(m);{var p=b=>{var w=he(),k=G(w);nt(k,17,()=>s(f),lt,(y,E,N)=>{var A=e1();q(A,"data-id",N),q(A,"dx",0);var P=I(A);Tt(P,()=>e.tickLabels[N],!0),ee(()=>{q(A,"x",s(f)[N]),q(A,"y",s(u)[N]),q(A,"dy",s(d)*1.25),q(A,"transform",`rotate(-90, ${s(f)[N]}, ${s(u)[N]})`)}),S(y,A)}),S(b,w)},_=b=>{var w=he(),k=G(w);{var y=N=>{var A=he(),P=G(A);nt(P,17,()=>s(f),lt,(O,T,H)=>{var j=t1();q(j,"data-id",H),q(j,"dy",0),q(j,"text-anchor","end");var L=I(j);Tt(L,()=>e.tickLabels[H],!0),ee(()=>{q(j,"x",s(f)[H]),q(j,"y",s(u)[H]),q(j,"dx",-s(h)/2),q(j,"transform",`rotate(-90, ${s(f)[H]}, ${s(u)[H]})`)}),S(O,j)}),S(N,A)},E=N=>{var A=he(),P=G(A);nt(P,17,()=>s(f),lt,(O,T,H)=>{var j=r1();q(j,"data-id",H);var L=I(j);Tt(L,()=>e.tickLabels[H],!0),ee(()=>{q(j,"x",s(f)[H]),q(j,"y",s(u)[H]),q(j,"dx",s(d)),q(j,"dy",s(h)),q(j,"text-anchor",s(o))}),S(O,j)}),S(N,A)};Y(k,N=>{l()===2&&r()===1?N(y):N(E,!1)},!0)}S(b,w)};Y(g,b=>{l()===2&&r()===4?b(p):b(_,!1)})}ee(()=>gt(m,s(a))),S(t,m),ge()}const s1=(t,e=jt,r=jt)=>{const l=C(()=>e().colmap.length);var o=f1(),a=G(o);nt(a,17,()=>e().colmap,lt,(d,h,m)=>{const g=C(()=>r().start+m*r().width);var p=i1(),_=G(p),b=M(_);q(b,"dy",0);var w=I(b);Tt(w,()=>e().labels[m],!0),ee(()=>{q(_,"x",s(g)),q(_,"y",r().top),q(_,"width",r().width),q(_,"height",r().height),q(_,"fill",s(h)),q(b,"x",s(g)),q(b,"y",r().ltop),q(b,"dx",r().dxl),q(b,"fill",e().labelColor),q(b,"font-size",e().fontSize+"em")}),S(d,p)});var c=M(a);{var f=d=>{const h=C(()=>r().start+s(l)*r().width);var m=c1();q(m,"dx",0),q(m,"dy",0);var g=I(m);Tt(g,()=>e().labels[s(l)],!0),ee(()=>{q(m,"x",s(h)),q(m,"y",r().ltop),q(m,"fill",e().labelColor),q(m,"font-size",`${e().fontSize??""}em`)}),S(d,m)};Y(c,d=>{e().isCentered||d(f)})}var u=M(c);{var v=d=>{const h=C(()=>r().start+s(l)*r().width);var m=u1(),g=I(m);Tt(g,()=>Io(e().labelsFactor),!0),ee(()=>{q(m,"x",s(h)),q(m,"y",r().ltop),q(m,"fill",e().labelColor),q(m,"font-size",`${e().fontSize??""}em`)}),S(d,m)};Y(u,d=>{e().labelsFactor!==0&&d(v)})}S(t,o)};function uc(t,e,r){t.preventDefault(),e(t,r())}function fc(t,e,r){t.preventDefault(),e(t,r())}function vc(t,e,r){t.preventDefault(),e(t,r())}function bl(t,e,r){t.preventDefault(),e(t,r())}async function dc(t,e,r,l){Yd(t.target,s(e),r(),l())}function hc(t,e,r){Vd(s(e),r())}function mc(t,e,r,l,o,a){Dd(s(e),r(),l(),o(),a())}var l1=ye('<text fill="crimson" text-anchor="middle"> </text>'),o1=ye('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),a1=ye("<!><!><!><!><!>",1),i1=ye('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),c1=ye('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),u1=ye('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),f1=ye("<!><!><!>",1),v1=ye("<line></line>"),d1=ye('<text dominant-baseline="middle" text-anchor="middle"> </text>'),h1=ye('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),m1=ye('<svg><rect height="100%" width="100%"></rect><!></svg>'),g1=ye('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),p1=ye('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),b1=ye('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),_1=ye('<g class="plot-labels"><!><!><!></g>'),w1=ye('<g class="axis x-axis"><!></g>'),y1=ye('<g class="axis y-axis"><!></g>'),x1=ye('<rect fill="transparent" id="axes-box"></rect>'),k1=ye('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),E1=ye('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),A1=ye('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),N1=ye('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),S1=W('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),C1=W('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),M1=W(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function gc(t,e){me(e,!0);const r=(we,Ne=jt,Ee=jt)=>{var Fe=he(),_t=G(Fe);{var $t=Ct=>{var ot=he(),He=G(ot);{var Lt=wt=>{var ut=l1(),ur=I(ut);ee(()=>{q(ut,"x",s($)[0]-10),q(ut,"y",s(le)),q(ut,"transform",`rotate(-90, ${s($)[0]-10}, ${s(le)})`),fe(ur,Ee().error)}),S(wt,ut)},At=wt=>{var ut=o1(),ur=I(ut);ee(()=>{q(ut,"x",s(oe)),q(ut,"y",s(ne)[0]),fe(ur,Ee().error)}),S(wt,ut)};Y(He,wt=>{Ee().pos===4?wt(Lt):wt(At,!1)})}S(Ct,ot)},yr=Ct=>{var ot=a1(),He=G(ot);{var Lt=Ae=>{Do(Ae,{get lineCoords(){return Ne().grid},get lineColor(){return Pt.MIDDLEGRAY},lineType:3})};Y(He,Ae=>{Ee().showGrid&&Ae(Lt)})}var At=M(He);Do(At,{get lineCoords(){return Ne().axisLine},get lineColor(){return Pt.DARKGRAY},lineType:1});var wt=M(At);Do(wt,{get lineCoords(){return Ne().tickCoords},get lineColor(){return Pt.DARKGRAY},lineType:1});var ut=M(wt);{var ur=Ae=>{cc(Ae,{get las(){return Ee().las},get pos(){return Ee().pos},get tickCoords(){return Ne().tickCoords},get tickLabels(){return Ne().tickLabels},get tickColor(){return Pt.DARKGRAY},get hideLast(){return Ee().hideLast}})};Y(ut,Ae=>{Ne().tickCoords.length===2&&Ne().tickLabels.length===Ne().tickCoords[1][0].length&&Ae(ur)})}var vn=M(ut);{var $e=Ae=>{{let Mt=C(()=>[Ne().tfLabel]);cc(Ae,{get pos(){return Ee().pos},get tickCoords(){return Ne().tfCoords},get tickLabels(){return s(Mt)},get textColor(){return Pt.DARKGRAY}})}};Y(vn,Ae=>{Ne().tickFactor!==0&&Ae($e)})}S(Ct,ot)};Y(_t,Ct=>{Ee().error?Ct($t):Ct(yr,!1)})}S(we,Fe)},l=(we,Ne=jt,Ee=jt)=>{const Fe=C(()=>Ee().elw+2*Ee().elp),_t=C(()=>Ee().elp),$t=C(()=>Ee().elh),yr=C(()=>Ee().ely);var Ct=m1(),ot=I(Ct),He=M(ot);nt(He,17,()=>Ne().items,lt,(Lt,At,wt)=>{var ut=h1();q(ut,"x",0);var ur=I(ut);{var vn=Mr=>{var Nt=v1();ee(()=>{q(Nt,"x1",s(_t)),q(Nt,"x2",s(Fe)-s(_t)),q(Nt,"y1",s($t)[wt]/2),q(Nt,"y2",s($t)[wt]/2),q(Nt,"stroke",s(At).line.lineColor),q(Nt,"stroke-width",s(At).line.lineWidth),q(Nt,"stroke-dasharray",s(j)[s(At).line.lineType-1])}),S(Mr,Nt)};Y(ur,Mr=>{s(At).line&&Mr(vn)})}var $e=M(ur);{var Ae=Mr=>{var Nt=d1(),ea=I(Nt);ee(()=>{q(Nt,"x",s(Fe)/2),q(Nt,"y",s($t)[wt]/2),q(Nt,"fill",s(At).point.faceColor),q(Nt,"stroke-width",s(At).point.lineWidth),q(Nt,"stroke",s(At).point.lineColor),q(Nt,"font-size",`${s(At).point.markerSize??""}em`),fe(ea,ns[s(At).point.marker-1])}),S(Mr,Nt)};Y($e,Mr=>{s(At).point&&Mr(Ae)})}var Mt=M($e),Sl=I(Mt);Tt(Sl,()=>s(At).label,!0),ee(()=>{q(ut,"y",s(yr)[wt]),q(ut,"width",Ee().lgw),q(ut,"height",s($t)[wt]),q(Mt,"x",s(Fe)+s(_t)),q(Mt,"y",s($t)[wt]/2),q(Mt,"fill",Pt.LEGEND),q(Mt,"font-size",`${Ne().fontSize??""}em`)}),S(Lt,ut)}),ee(()=>{q(Ct,"x",Ee().lgl),q(Ct,"y",Ee().lgt),q(Ct,"height",Ee().lgh),q(Ct,"width",Ee().lgw),q(ot,"fill",Ne().faceColor),q(ot,"stroke",Ne().lineColor),q(ot,"stroke-width",Ne().lineWidth)}),S(we,Ct)};let o=B(e,"limX",19,()=>[0,1]),a=B(e,"limY",19,()=>[0,1]),c=B(e,"margins",19,()=>[1,1.1,.55,.6]),f=B(e,"downloadLinks",3,"none"),u=B(e,"fileName",3,"plot"),v=B(e,"pngWidth",3,8),d=B(e,"pngHeight",3,8),h=B(e,"pngRes",3,300),m=B(e,"clipboardWidth",3,1200),g=B(e,"clipboardHeight",3,800),p=B(e,"onclick",3,null),_=B(e,"onmousemove",3,null),b=B(e,"onmousedown",3,null),w=B(e,"onmouseup",3,null);function k(we,Ne){if(Ne&&we.target.id=="axes-box"){const Ee=sc([we.offsetX-s(R)],s(te))[0],Fe=sc([we.offsetY-s(D)],s(ae))[0];Ne(Ee,Fe)}}const y="plottingArea"+Math.round(Math.random()*1e4);let E=re(0),N=re(0),A=re(0);const P=C(()=>({plot:Id(s(N),s(A)),x:ic(s(N)),y:ic(s(A))})),O=C(()=>c().map(we=>we*Md[s(P).plot])),T=C(()=>Pd[s(P).plot]),H=C(()=>Lo[s(P).plot]),j=C(()=>zs[s(P).plot]),L=C(()=>s(je).show&&s(je).label!==""?s(T)*1.5:0),R=C(()=>s(Se).show&&s(Se).label!==""?s(T)*1.5:0),D=C(()=>e.title&&e.title!==""?s(T)*1.5:0),z=C(()=>s(N)>s(R)?s(N)-s(R):0),V=C(()=>s(A)>s(L)+s(D)?s(A)-s(L)-s(D):0),K=C(()=>s(V)-s(O)[0]-s(O)[2]),J=C(()=>s(z)-s(O)[1]-s(O)[3]),X=C(()=>tc(o(),2)&&tc(a(),2)&&s(z)>s(O)[1]+s(O)[3]&&s(V)>s(O)[0]+s(O)[2]),te=C(()=>s(X)?{coords:[s(J)/(o()[1]-o()[0]),o()[0],s(O)[1]],objects:[s(J)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),ae=C(()=>s(X)?{coords:[-s(K)/(a()[1]-a()[0]),a()[1],s(O)[2]],objects:[s(K)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),le=C(()=>s(K)*.5+s(D)+s(O)[2]),oe=C(()=>s(J)*.5+s(R)+s(O)[1]),$=C(()=>s(X)?bt(o(),s(te)):[0,1]),ne=C(()=>s(X)?bt(a(),s(ae)):[1,0]),Oe=C(()=>rn(e.title)),Ke=C(()=>s(Oe)?s(Oe).length===e.title.left?1:1.4:0);let Be=re(Me({show:!1})),je=re(Me({show:!1,error:""})),Se=re(Me({show:!1,error:""})),et=re(Me({show:!1,colmap:null,breaks:null})),xe=re(Me({show:!1,items:null,position:null}));const De=C(()=>s(X)&&s(et)&&s(et).show?Gd(s(et)):null),se=C(()=>s(X)&&s(je).show?Wd(o(),a(),s(P),s(ae),s(je)):null),pe=C(()=>s(X)&&s(Se).show?Hd(o(),a(),s(P),s(te),s(Se)):null),ce=C(()=>s(X)&&s(De)?Kd(s(De),s(J),s(O),s(P)):null),_e=C(()=>s(X)&&s(xe)&&s(xe).show&&s($)?Qd(s(xe),s($),s(ne),s(T),s(H)):null);pu("axes",{setBox:we=>F(Be,we,!0),setXAxis:we=>F(je,we,!0),setYAxis:we=>F(Se,we,!0),setColmapLegend:we=>F(et,we,!0),setGroupLegend:we=>F(xe,we,!0),scales:()=>s(P),tX:()=>s(te),tY:()=>s(ae),limX:()=>o(),limY:()=>a()});var ke=M1();let ve;var Te=I(ke),Le=M(I(Te));{var Qe=we=>{var Ne=_1(),Ee=I(Ne);{var Fe=ot=>{var He=g1();q(He,"dx",0),q(He,"dy",0);var Lt=I(He);Tt(Lt,()=>s(je).label,!0),ee(()=>{q(He,"x",s(oe)),q(He,"y",s(V)+s(D))}),S(ot,He)};Y(Ee,ot=>{s(je).show&&s(je).label&&s(je).label!==""&&ot(Fe)})}var _t=M(Ee);{var $t=ot=>{var He=p1();q(He,"dx",0),q(He,"dy",0);var Lt=I(He);Tt(Lt,()=>s(Se).label,!0),ee(()=>{q(He,"x",s(T)/1.1*s(Se).labelHeight),q(He,"y",s(le)),q(He,"transform",`rotate(-90, ${s(T)*s(Se).labelHeight/1.1}, ${s(le)})`)}),S(ot,He)};Y(_t,ot=>{s(Se).show&&s(Se).label&&s(Se).label!==""&&ot($t)})}var yr=M(_t);{var Ct=ot=>{var He=b1();q(He,"dx",0),q(He,"dy",0);var Lt=I(He);Tt(Lt,()=>s(Oe),!0),ee(()=>{q(He,"x",s(oe)),q(He,"y",s(T)*s(Ke))}),S(ot,He)};Y(yr,ot=>{s(Oe)&&s(Oe)!==""&&ot(Ct)})}S(we,Ne)};Y(Le,we=>{s(X)&&we(Qe)})}var Ze=M(Le),Ve=I(Ze),Ie=I(Ve),ct=I(Ie),tt=M(Ve);{var Ge=we=>{var Ne=N1(),Ee=G(Ne);{var Fe=$e=>{var Ae=w1(),Mt=I(Ae);r(Mt,()=>s(se),()=>s(je)),S($e,Ae)};Y(Ee,$e=>{s(je).show&&s(se)&&$e(Fe)})}var _t=M(Ee);{var $t=$e=>{var Ae=y1(),Mt=I(Ae);r(Mt,()=>s(pe),()=>s(Se)),S($e,Ae)};Y(_t,$e=>{s(Se).show&&s(pe)&&$e($t)})}var yr=M(_t),Ct=I(yr);{var ot=$e=>{var Ae=x1();Ae.__keydown=[bl,k,p],Ae.__click=[bl,k,p],Ae.__mousemove=[vc,k,_],Ae.__mousedown=[uc,k,b],Ae.__mouseup=[fc,k,w],ee(()=>{q(Ae,"stroke",s(Be).lineColor),q(Ae,"stroke-width",`${s(Be).lineWidth??""}px`),q(Ae,"x",s($)[0]),q(Ae,"y",s(ne)[1]),q(Ae,"width",s($)[1]-s($)[0]),q(Ae,"height",s(ne)[0]-s(ne)[1])}),S($e,Ae)},He=$e=>{var Ae=k1();Ae.__keydown=[bl,k,p],Ae.__click=[bl,k,p],Ae.__mousemove=[vc,k,_],Ae.__mousedown=[uc,k,b],Ae.__mouseup=[fc,k,w],ee(()=>{q(Ae,"x",s($)[0]),q(Ae,"y",s(ne)[1]),q(Ae,"width",s($)[1]-s($)[0]),q(Ae,"height",s(ne)[0]-s(ne)[1])}),S($e,Ae)};Y(Ct,$e=>{s(Be).show?$e(ot):$e(He,!1)})}var Lt=M(yr),At=I(Lt);Rr(At,()=>e.children??jt);var wt=M(Lt);{var ut=$e=>{var Ae=E1(),Mt=I(Ae);s1(Mt,()=>s(De),()=>s(ce)),S($e,Ae)};Y(wt,$e=>{s(ce)&&$e(ut)})}var ur=M(wt);{var vn=$e=>{var Ae=A1(),Mt=I(Ae);l(Mt,()=>s(xe),()=>s(_e)),S($e,Ae)};Y(ur,$e=>{s(_e)&&$e(vn)})}ee(()=>q(Lt,"clip-path",`url(#${y})`)),S(we,Ne)};Y(tt,we=>{s(X)&&we(Ge)})}Sn(Te,we=>F(E,we),()=>s(E));var Zt=M(Te,2);{var Br=we=>{var Ne=S1();S(we,Ne)},Dr=we=>{var Ne=C1(),Ee=I(Ne);Ee.__click=[hc,E,u],Ee.__keydown=[hc,E,u];var Fe=M(Ee,2);Fe.__click=[mc,E,u,v,d,h],Fe.__keydown=[mc,E,u,v,d,h];var _t=M(Fe,2);_t.__click=[dc,E,m,g],_t.__keydown=[dc,E,m,g],S(we,Ne)};Y(Zt,we=>{s(X)?we(Dr,!1):we(Br)})}ee(we=>{ve=kt(ke,1,`plot-container show-download-links-${f()??""}`,"svelte-1t5q9z1",ve,we),gt(Te,`font-size:${s(T)??""}px`),q(Ze,"x",s(R)),q(Ze,"y",s(D)),q(Ze,"width",s(z)),q(Ze,"height",s(V)),q(Ie,"id",y),q(ct,"x",s($)[0]),q(ct,"y",s(ne)[1]),q(ct,"width",s($)[1]-s($)[0]),q(ct,"height",s(ne)[0]-s(ne)[1])},[()=>({"plot-error":!s(X)})]),ii(Te,"clientWidth",we=>F(N,we)),ii(Te,"clientHeight",we=>F(A,we)),S(t,ke),ge()}vt(["keydown","click","mousemove","mousedown","mouseup"]);function pc(t,e){me(e,!0);let r=B(e,"tickLabels",7),l=B(e,"las",3,1),o=B(e,"whole",3,!1),a=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const f=Yt("axes");ue(()=>{const u=rn(e.label),v=u?u.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=ac(e.ticks,f.limX())),!h&&r()&&(m=>{var g=Ll(m,2);r(g[0]),h=g[1]})(oc(r(),d)),f.setXAxis({show:a(),error:h,label:u,ticks:d,labelHeight:v,showGrid:c(),las:l(),whole:o(),tickLabels:r()})}),ge()}function bc(t,e){me(e,!0);let r=B(e,"tickLabels",7),l=B(e,"las",3,1),o=B(e,"whole",3,!1),a=B(e,"show",3,!0),c=B(e,"showGrid",3,!1);const f=Yt("axes");ue(()=>{const u=rn(e.label),v=u?u.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=ac(e.ticks,f.limY())),!h&&r()&&(m=>{var g=Ll(m,2);r(g[0]),h=g[1]})(oc(r(),d)),f.setYAxis({show:a(),error:h,label:u,ticks:d,labelHeight:v,showGrid:c(),las:l(),whole:o(),tickLabels:r(),pos:4})}),ge()}function _c(t,e){me(e,!0);let r=B(e,"lineWidth",3,1),l=B(e,"lineColor",3,"#606060");const o=Yt("axes");ue(()=>{o.setBox({show:!0,lineWidth:r(),lineColor:l()})}),ge()}var j1=(t,e)=>In(t,"rect",e.onclick),T1=ye("<rect></rect>"),P1=ye("<g></g>");function _l(t,e){me(e,!0);let r=B(e,"faceColor",19,()=>Pt.PRIMARY),l=B(e,"lineColor",19,r),o=B(e,"lineWidth",3,1),a=B(e,"className",3,"series-rect");const c=C(()=>Dt(e.left,"Rectangles (left)")),f=C(()=>s(c)?Dt(e.top,"Rectangles (top)",s(c).length):null),u=C(()=>s(f)?typeof e.width!="object"?We.fill(e.width,s(c).length):e.width:null),v=C(()=>s(f)?typeof e.height!="object"?We.fill(e.height,s(c).length):e.height:null),d=Yt("axes"),h=C(()=>s(c)?bt(s(c),d.tX()):null),m=C(()=>s(f)?bt(s(f),d.tY()):null),g=C(()=>s(u)?zo(s(u),d.tX()):null),p=C(()=>s(v)?zo(s(v),d.tY()):null),_=C(()=>`fill:${r()};stroke:${l()};stroke-width:${o()}px;`),b=C(()=>s(h)&&s(m)&&s(g)&&s(p)&&s(g).length===s(h).length&&s(p).length===s(h).length);var w=he(),k=G(w);{var y=E=>{var N=P1();N.__click=[j1,e],nt(N,21,()=>e.left,lt,(A,P,O)=>{var T=T1();ee(()=>{q(T,"x",s(h)[O]),q(T,"y",s(m)[O]),q(T,"width",s(g)[O]),q(T,"height",s(p)[O])}),S(A,T)}),ee(()=>{kt(N,0,`series ${a()??""}`),gt(N,s(_))}),S(E,N)};Y(k,E=>{s(b)&&E(y)})}S(t,w),ge()}vt(["click"]);var L1=(t,e)=>In(t,"line",e.onclick),R1=ye("<line></line>"),z1=ye('<g class="series series-segment"></g>');function I1(t,e){me(e,!0);let r=B(e,"lineColor",19,()=>Pt.PRIMARY),l=B(e,"lineType",3,1),o=B(e,"lineWidth",3,1);const a=C(()=>Dt(e.xStart,"Segments")),c=C(()=>s(a)?Dt(e.yStart,"Segments",s(a).length):null),f=C(()=>s(c)?Dt(e.xEnd,"Segments",s(a).length):null),u=C(()=>s(f)?Dt(e.yEnd,"Segments",s(a).length):null),v=Yt("axes"),d=C(()=>s(a)?bt(s(a),v.tX()):null),h=C(()=>s(f)?bt(s(f),v.tX()):null),m=C(()=>s(c)?bt(s(c),v.tY()):null),g=C(()=>s(u)?bt(s(u),v.tY()):null),p=C(()=>`stroke:${r()};stroke-width: ${o()}px;stroke-dasharray:${zs[v.scales().plot][l()-1]}`),_=C(()=>s(d)&&s(h)&&s(m)&&s(g));var b=he(),w=G(b);{var k=y=>{var E=z1();E.__click=[L1,e],nt(E,21,()=>s(d),lt,(N,A,P)=>{var O=R1();ee(()=>{q(O,"x1",s(d)[P]),q(O,"x2",s(h)[P]),q(O,"y1",s(m)[P]),q(O,"y2",s(g)[P])}),S(N,O)}),ee(()=>gt(E,s(p))),S(y,E)};Y(w,y=>{s(_)&&y(k)})}S(t,b),ge()}vt(["click"]);var F1=(t,e)=>In(t,"text",e.onclick),q1=ye("<text><!></text>"),O1=ye("<text><!></text>"),B1=ye("<text><!></text>"),D1=ye('<g class="series series-textlabels"><!></g>');function wl(t,e){me(e,!0);let r=B(e,"pos",3,0),l=B(e,"faceColor",19,()=>Pt.PRIMARY_TEXT),o=B(e,"lineColor",3,"transparent"),a=B(e,"lineWidth",3,0),c=B(e,"textSize",3,1),f=B(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],v=C(()=>Dt(e.xValues,"TextLabels")),d=C(()=>s(v)?Dt(e.yValues,"TextLabels",s(v).length):null),h=C(()=>s(d)?Array.isArray(e.labels)&&e.labels.length!==s(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=C(()=>s(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Yt("axes"),p=C(()=>s(v)&&s(m)!==null?bt(s(v),g.tX()):null),_=C(()=>s(d)&&s(p)?bt(s(d),g.tY()):null),b=C(()=>Ro[g.scales().plot]),w=C(()=>[0,0,-s(b),0,s(b),s(b)]),k=C(()=>[0,s(b),0,-s(b),0,s(b)]),y=C(()=>`fill:${l()};stroke-width:${a()}px;stroke:${o()};font-size:${c()}em;`),E=C(()=>s(p)&&s(_)&&s(m)!==null&&s(h)&&s(p).length===s(_).length);var N=he(),A=G(N);{var P=O=>{var T=D1();T.__click=[F1,e];var H=I(T);{var j=R=>{var D=he(),z=G(D);nt(z,17,()=>s(p),lt,(V,K,J)=>{var X=q1();q(X,"data-id",J);var te=I(X);Tt(te,()=>e.labels,!0),ee(()=>{q(X,"x",s(p)[J]),q(X,"y",s(_)[J]),q(X,"dx",s(w)[r()]),q(X,"dy",s(k)[r()]),q(X,"transform",f()!==void 0?`rotate(${f()}, ${s(p)[J]+s(w)[r()]}, ${s(_)[J]+s(k)[r()]})`:""),q(X,"text-anchor",u[r()[J]])}),S(V,X)}),S(R,D)},L=R=>{var D=he(),z=G(D);{var V=J=>{var X=he(),te=G(X);nt(te,17,()=>s(p),lt,(ae,le,oe)=>{var $=O1();q($,"data-id",oe);var ne=I($);Tt(ne,()=>e.labels[oe],!0),ee(()=>{q($,"x",s(p)[oe]),q($,"y",s(_)[oe]),q($,"dx",s(w)[r()[oe]]),q($,"dy",s(k)[r()[oe]]),q($,"transform",f()!==void 0?`rotate(${f()}, ${s(p)[oe]+s(w)[r()]}, ${s(_)[oe]+s(k)[r()]})`:""),q($,"text-anchor",u[r()[oe]])}),S(ae,$)}),S(J,X)},K=J=>{var X=he(),te=G(X);nt(te,17,()=>s(p),lt,(ae,le,oe)=>{var $=B1();q($,"data-id",oe);var ne=I($);Tt(ne,()=>e.labels[oe],!0),ee(()=>{q($,"x",s(p)[oe]),q($,"y",s(_)[oe]),q($,"dx",s(w)[r()]),q($,"dy",s(k)[r()]),q($,"transform",f()!==void 0?`rotate(${f()}, ${s(p)[oe]+s(w)[r()]}, ${s(_)[oe]+s(k)[r()]})`:""),q($,"text-anchor",u[r()])}),S(ae,$)}),S(J,X)};Y(z,J=>{Array.isArray(r())||ArrayBuffer.isView(r())?J(V):J(K,!1)},!0)}S(R,D)};Y(H,R=>{typeof e.labels=="string"?R(j):R(L,!1)})}ee(()=>gt(T,s(y))),S(O,T)};Y(A,O=>{s(E)&&O(P)})}S(t,N),ge()}vt(["click"]),vt(["click"]);var V1=(t,e)=>In(t,"text",e.onclick),Y1=ye("<text> </text>"),U1=ye('<g text-anchor="middle"></g>');function W1(t,e){me(e,!0);let r=B(e,"marker",3,1),l=B(e,"faceColor",3,"transparent"),o=B(e,"lineColor",19,()=>Pt.PRIMARY),a=B(e,"lineWidth",3,1),c=B(e,"markerSize",3,1);const f=C(()=>typeof r()!="number"||r()<1||r()>ns.length?(console.error('Points: parameter "marker" must be a number from 1 to '+ns.length+"."),null):ns[r()-1]),u=C(()=>Dt(e.xValues,"Points")),v=C(()=>s(u)?Dt(e.yValues,"Points",s(u).length):null),d=Yt("axes"),h=C(()=>s(u)?bt(s(u),d.tX()):null),m=C(()=>s(h)&&s(v)?bt(s(v),d.tY()):null),g=C(()=>["＋","✳","✕"].includes(s(f))?`fill:${o()&&o()!=="transparent"?o():l()};stroke-width:0px;font-size:${c()}em;`:`fill:${l()};stroke-width:${a()}px;stroke:${o()}; font-size:${c()}em;`),p=C(()=>["◼","⬥","＋","✳","✕"].includes(s(f))?"series-points2":"series-points1"),_=C(()=>s(h)&&s(m)&&s(h).length===s(m).length);var b=he(),w=G(b);{var k=y=>{var E=U1();E.__click=[V1,e],nt(E,21,()=>s(h),lt,(N,A,P)=>{var O=Y1(),T=I(O);ee(()=>{q(O,"x",s(h)[P]),q(O,"y",s(m)[P]),fe(T,s(f))}),S(N,O)}),ee(()=>{kt(E,0,`series series-points ${s(p)??""}`),gt(E,s(g))}),S(y,E)};Y(w,y=>{s(_)&&y(k)})}S(t,b),ge()}vt(["click"]);var H1=(t,e)=>In(t,"polyline",e.onclick),G1=ye('<g class="series series-line"><polyline class="line"></polyline></g>');function nn(t,e){me(e,!0);let r=B(e,"lineColor",19,()=>Pt.PRIMARY),l=B(e,"lineType",3,1),o=B(e,"lineWidth",3,1);const a=C(()=>Dt(e.xValues,"Lines")),c=C(()=>s(a)?Dt(e.yValues,"Lines",s(a).length):null),f=Yt("axes"),u=C(()=>s(a)&&s(c)?qo(s(a),s(c),f.tX(),f.tY()):null),v=C(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${zs[f.scales().plot][l()-1]}`);var d=he(),h=G(d);{var m=g=>{var p=G1();p.__click=[H1,e];var _=I(p);ee(()=>{gt(p,s(v)),q(_,"points",s(u))}),S(g,p)};Y(h,g=>{s(u)&&g(m)})}S(t,d),ge()}vt(["click"]);var K1=(t,e)=>In(t,"polyline",e.onclick),J1=ye('<polyline class="line"></polyline>'),X1=ye('<g class="series series-multiline"></g>');function wc(t,e){me(e,!0);let r=B(e,"lineColor",19,()=>Pt.PRIMARY),l=B(e,"lineType",3,1),o=B(e,"lineWidth",3,1);const a=C(()=>Dt(e.xValues,"Multilines")),c=C(()=>s(a)?Qt(e.yValues)?(s(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),f=Yt("axes"),u=C(()=>{if(!s(a)||!s(c))return null;const g=new Array(s(c).ncols);for(let p=0;p<g.length;p++)g[p]=qo(s(a),s(c).getcolumn(p+1),f.tX(),f.tY());return g}),v=C(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${zs[f.scales().plot][l()-1]}`);var d=he(),h=G(d);{var m=g=>{var p=X1();p.__click=[K1,e],nt(p,21,()=>s(u),lt,(_,b)=>{var w=J1();ee(()=>q(w,"points",s(b))),S(_,w)}),ee(()=>gt(p,s(v))),S(g,p)};Y(h,g=>{s(u)&&s(u).length>0&&g(m)})}S(t,d),ge()}vt(["click"]);function Q1(t,e){me(e,!0);let r=B(e,"show",3,!0),l=B(e,"position",3,"topleft"),o=B(e,"lineColor",19,()=>Pt.LEGEND),a=B(e,"lineWidth",3,1),c=B(e,"faceColor",3,"#fff"),f=B(e,"fontSize",3,.85);function u(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function v(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let m=0;m<h.length;m++){const g=h[m];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=rn(g.label),_=p.length===g.label?1:1.4;g.label=p,g.labelHeight=_,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(m+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:Pt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=ns.length||console.error('Legend: parameter "marker" for legend item '+(m+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.markerSize=g.point.markerSize?g.point.markerSize:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:Pt.PRIMARY)}return h}const d=Yt("axes");ue(()=>{const h=v(e.items),m=u(l());d.setGroupLegend(h&&m?{show:r(),position:l(),items:e.items,lineColor:o(),faceColor:c(),lineWidth:a(),fontSize:f()}:{show:!1,position:null,items:null})}),ge()}function yc(t,e){me(e,!0);let r=B(e,"show",3,!0),l=B(e,"labels",3,null),o=B(e,"labelColor",19,()=>Pt.CLEGEND_LABELS),a=B(e,"fontSize",3,.85);const c=Yt("axes");ue(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:l(),labelColor:o(),fontSize:a()})}),ge()}const Z1=[1,1.1,.45,.4],sn={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",alien:"#2679B2",external:"#D22C2F"},Vo={cal:1,pv:2,test:2,new:2},Fn={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},$1={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Yo={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},xc="#a0a0a0",kc="#909090",Ec=8,eh=8,th=8,rh=600;function nh(t,e){if(t.length===e.length)return t;const r=e.length,l=new t.constructor(r);for(let o in e)l[o]=t[e[o]];return l}function sh(t,e){let r=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)l=Math.min(l,t[c]),r=Math.max(r,t[c]);let o=Oo(void 0,[l,r],e-1,!0,!1,0).v;const a=o[1]-o[0];if(o[0]>l){const c=o[0]-a;o=[c<l?c:l,...o]}if(o[o.length-1]<r){const c=o[o.length-1]+a;o=[...o,c>r?c:r]}return o}function lh(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=pl(e);return t.reduce((o,a,c)=>(o[a]=r[c],o),{})}function Ac(t,e,r){const l=e.length,o=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let f=0;f<l-1;f++){const u=t[c]>=e[f],v=f===l-2?t[c]<e[f+1]+a:t[c]<e[f+1];if(u&&v){o[c]=r[f];break}}return o}function oh(t,e,r,l,o="cal",a){if(!e)return null;let c,f,u,v,d,h,m=!0;if((r==="groups"||r==="classes")&&e.classNames){const g=lh(e.classNames);f=Object.keys(g).map(p=>g[p]),c=e.classNames,v=e.classes.map(p=>g[p]),u=new Array(c.length+1).map((p,_)=>_-.5),d=null}else if(r==="variable"){const g=nh(t.values.getcolref(l),e.objindices);d=t.varlabels[l-1],d.length>30&&(d=d.substring(0,29)+"..."),u=sh(g,10),f=pl(u.length-1),v=Ac(g,u,f)}else if(a){const g=a.values;c=a.labels;const p=a.classColmap;f=Object.keys(p).map(_=>p[_]),v=g.map(_=>p[_]),u=new Array(c.length+1).map((_,b)=>b-.5),d=null,a.filled&&a.filled.length===g.length&&(h=a.filled),a.showBar!==void 0&&(m=a.showBar)}else c=null,u=null,f=null,v=Array(e.nrows).fill(Fn[o]);return{labels:c,map:f,breaks:u,colors:v,varname:d,filled:h,showBar:m,mainColor:Fn[o],faceColor:$1[o],faceTColor:Yo[o]}}function ah(t,e,r,l){if(!t)return null;const o=t.length;let a=We.zeros(o),c=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(l==="log")for(let u=0;u<o;u++){const v=Math.log(1+t[u]/r);a.v[u]=v,c=Math.max(c,v),f=Math.min(f,v)}else for(let u=0;u<o;u++){const v=t[u]/r;a.v[u]=v,c=Math.max(c,v),f=Math.min(f,v)}return{values:a,min:f,max:c}}var ih=W("<!> <!>",1),ch=W("<!> <!>",1),uh=W("<!> <!>",1),fh=W("<!> <!> <!> <!> <!> <!> <!> <!>",1),vh=W("<h2>Plot settings</h2>"),dh=W('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),hh=W('<div class="plot-panel svelte-5p9gcx"><!></div>');function mh(t,e){me(e,!0);let r=re(!0),l=re("none"),o=re(!1);const a=C(()=>(s(r)?"Preprocessed":"Raw")+" data (selected rows)"),c=C(()=>s(r)&&e.prepdata?e.prepdata:e.rawdata),f=C(()=>s(c)?s(c).varaxisLabel:"Variables"),u=C(()=>e.rawdata.varaxisUnits),v=C(()=>e.left>=0||e.right>0&&e.right<s(c).values.nrows),d=C(()=>e.left>=0?e.left+1:1),h=C(()=>e.right>0&&e.right<s(c).values.nrows?e.right:s(c).values.nrows),m=C(()=>s(r)&&s(c)&&s(v)?Ft.seq(s(d),s(h)):null),g=C(()=>s(m)?s(c).varvalues.filter((O,T)=>T>=s(d)-1&&T<s(h)):s(c).varvalues),p=C(()=>s(m)?s(c).values.subset(s(m),null):s(c).values),_=C(()=>s(p)?ao(s(p).v):null),b=C(()=>s(_)?(s(_)[1]-s(_)[0])*.05:null),w=C(()=>s(_)?[s(_)[0],s(_)[1]+(s(l)!=="none")*s(b)]:[0,1]),k=C(()=>s(c)?ao(s(c).varvalues,s(o)?.005:.1):[0,1]),y=C(()=>s(o)&&s(v)?[s(c).varvalues[s(d)-1],s(c).varvalues[s(h)-1]]:s(k)),E=C(()=>{if(!e.rawdata)return null;const O={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const T=pl(e.rawdata.classNames.length);O.groups={colors:e.rawdata.classes.map(H=>T[e.rawdata.classNames.findIndex(j=>j===H)]),breaks:qr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:T}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const T=fi(e.rawdata.resp,8),H=pl(T.length-1);O.response={colors:Ac(e.rawdata.resp.v,T.v,H),labels:null,breaks:T,map:H}}return O});ue(()=>{(e.left<1||e.right<1||e.right>=e.left)&&F(o,!1)});var N=hh(),A=I(N);{var P=O=>{var T=dh(),H=G(T),j=I(H),L=I(j);gc(L,{get title(){return s(a)},get limY(){return s(w)},get limX(){return s(y)},fileName:"plot-preprocessed",children:(te,ae)=>{var le=fh(),oe=G(le);{var $=ce=>{wc(ce,{get xValues(){return s(g)},get yValues(){return s(p)}})},ne=ce=>{var _e=he(),ke=G(_e);nt(ke,17,()=>s(E)[s(l)].colors,lt,(ve,Te,Le)=>{{let Qe=C(()=>s(p).getcolumn(Le+1));nn(ve,{get xValues(){return s(g)},get yValues(){return s(Qe)},get lineColor(){return s(Te)}})}}),S(ce,_e)};Y(oe,ce=>{s(l)==="none"?ce($):ce(ne,!1)})}var Oe=M(oe,2);{var Ke=ce=>{const _e=C(()=>s(c).varvalues[e.varind[0]]);var ke=ih(),ve=G(ke);{let Le=C(()=>[s(_e),s(_e)]);nn(ve,{get xValues(){return s(Le)},get yValues(){return s(w)},lineColor:"#00000060"})}var Te=M(ve,2);{let Le=C(()=>[s(_e)]),Qe=C(()=>[s(w)[1]-s(b)*(s(l)==="none"?1:2)]),Ze=C(()=>rn(s(_e).toFixed(2)+" "+s(u)));wl(Te,{get xValues(){return s(Le)},get yValues(){return s(Qe)},get labels(){return s(Ze)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(ce,ke)};Y(Oe,ce=>{e.varind&&e.varind[0]>0&&ce(Ke)})}var Be=M(Oe,2);{var je=ce=>{const _e=C(()=>s(c).varvalues[e.varind[1]]);var ke=ch(),ve=G(ke);{let Le=C(()=>[s(y)[0]]),Qe=C(()=>[s(c).varvalues[e.varind[1]]-s(y)[0]]),Ze=C(()=>[s(w)[1]]),Ve=C(()=>[s(w)[1]-s(w)[0]]);_l(ve,{get left(){return s(Le)},get width(){return s(Qe)},get top(){return s(Ze)},get height(){return s(Ve)},lineColor:"transparent",faceColor:"#00000040"})}var Te=M(ve,2);{let Le=C(()=>[s(_e)]),Qe=C(()=>[s(w)[1]-s(b)*(s(l)==="none"?1:2)]),Ze=C(()=>rn(s(_e).toFixed(2)+" "+s(u)));wl(Te,{get xValues(){return s(Le)},get yValues(){return s(Qe)},get labels(){return s(Ze)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(ce,ke)};Y(Be,ce=>{e.varind&&e.varind[1]>0&&ce(je)})}var Se=M(Be,2);{var et=ce=>{const _e=C(()=>s(c).varvalues[e.varind[2]-1]);var ke=uh(),ve=G(ke);{let Le=C(()=>[s(c).varvalues[e.varind[2]-1]]),Qe=C(()=>[s(y)[1]-s(c).varvalues[e.varind[2]-1]]),Ze=C(()=>[s(w)[1]]),Ve=C(()=>[s(w)[1]-s(w)[0]]);_l(ve,{get left(){return s(Le)},get width(){return s(Qe)},get top(){return s(Ze)},get height(){return s(Ve)},lineColor:"transparent",faceColor:"#00000040"})}var Te=M(ve,2);{let Le=C(()=>[s(_e)]),Qe=C(()=>[s(w)[1]-s(b)*(s(l)==="none"?1:2)]),Ze=C(()=>rn(s(_e).toFixed(2)+" "+s(u)));wl(Te,{get xValues(){return s(Le)},get yValues(){return s(Qe)},get labels(){return s(Ze)},textColor:"#a0a0a0",textSize:.8,pos:2})}S(ce,ke)};Y(Se,ce=>{e.varind&&e.varind[2]<s(c).varvalues.length&&e.varind[2]>0&&ce(et)})}var xe=M(Se,2);{let ce=C(()=>s(l)!=="none");yc(xe,{get show(){return s(ce)},get labels(){return s(E)[s(l)].labels},get breaks(){return s(E)[s(l)].breaks},get colmap(){return s(E)[s(l)].map}})}var De=M(xe,2);pc(De,{get label(){return s(f)},showGrid:!0});var se=M(De,2);bc(se,{showGrid:!0});var pe=M(se,2);_c(pe,{}),S(te,le)},$$slots:{default:!0}});var R=M(H,2),D=I(R);ie(D,{label:"",children:(te,ae)=>{var le=vh();S(te,le)},$$slots:{default:!0}});var z=M(D,2);ie(z,{label:"Show",children:(te,ae)=>{Rn(te,{options:["raw","preprocessed"],get value(){return s(r)},set value(le){F(r,le,!0)}})},$$slots:{default:!0}});var V=M(z,2);{var K=te=>{ie(te,{label:"Color by",children:(ae,le)=>{{let oe=C(()=>Object.keys(s(E)));pt(ae,{get options(){return s(oe)},get value(){return s(l)},set value($){F(l,$,!0)}})}},$$slots:{default:!0}})};Y(V,te=>{Object.keys(s(E)).length>1&&te(K)})}var J=M(V,2);{var X=te=>{ie(te,{label:"Zoom (x-axis)",children:(ae,le)=>{Rn(ae,{options:["off","on"],get value(){return s(o)},set value(oe){F(o,oe,!0)}})},$$slots:{default:!0}})};Y(J,te=>{e.left>0&&e.right>e.left&&te(X)})}S(O,T)};Y(A,O=>{s(g)&&s(p)&&O(P)})}S(t,N),ge()}var gh=W('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function ph(t,e){me(e,!0);let r=B(e,"left",15),l=B(e,"right",15),o=B(e,"prepobj",15),a=B(e,"meta",15),c=B(e,"finalize",3,null),f=re(Me([-1,0,0])),u=re(null),v=re(null);function d(y){const E=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&y>=0&&y<E&&y<l()&&r(y)}function h(y){const E=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&y<=E&&y>r()&&l(y)}var m=gh(),g=I(m),p=I(g),_=I(p);Cd(_,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return r()},get right(){return l()},setLeft:d,",":!0,setRight:h,get finalize(){return c()},get varind(){return s(f)},set varind(y){F(f,y,!0)},get prepobj(){return o()},set prepobj(y){o(y)},get rawdataShort(){return s(u)},set rawdataShort(y){F(u,y,!0)},get prepdataShort(){return s(v)},set prepdataShort(y){F(v,y,!0)},get meta(){return a()},set meta(y){a(y)}});var b=M(g,2),w=I(b);{var k=y=>{mh(y,{get rawdata(){return s(u)},get prepdata(){return s(v)},get left(){return r()},get right(){return l()},get varind(){return s(f)}})};Y(w,y=>{s(u)&&y(k)})}S(t,m),ge()}var bh=W('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),_h=W("<!> <!> <!>",1),wh=W('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),yh=W("<!> <!> <!>",1),xh=W("<p><strong>Preprocessing model</strong></p>"),kh=W("<!> <!>",1),Eh=W("<p> </p>"),Ah=W('<div class="prep-widget"><!></div> <!> <!>',1);function Nh(t,e){me(e,!0);let r=B(e,"prepType",15),l=B(e,"prepobj",15),o=B(e,"prepdata",15),a=B(e,"prepmodel",15),c=B(e,"prepmeta",15),f=re(!1),u=re(0),v=re(Me(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),d=re("neutral"),h=re(""),m=re(void 0);async function g(L,R,D){!R||!L||R.length===0||F(m,e.WASM().then(z=>{F(d,"applying");const V=Li(z,L.values,L.nresp,R,!1,D);V.info=c(),a(V)}).catch(z=>{a(null),console.error(z),F(d,"error"),F(h,z,!0)}),!0)}async function p(L,R){if(!R||typeof R!="object"){o(null);return}if(Object.keys(R).length===0){o(L);return}F(m,e.WASM().then(D=>{F(d,"applying");const z=js(D,L.values,L.nresp,R,!1,!1),V=To(Ol(L),z);o(Eo(V,R))}).catch(D=>{o(null),console.error(D),F(d,"error"),F(h,D,!0)}),!0)}function _(){r(null),o(null),a(null),l([]),F(u,0),F(v,e.rawdata.values.ncols-e.rawdata.nresp)}function b(){l()&&l().length>0?g(e.rawdata,l(),e.outliers):(r(null),a(null)),F(f,!1)}function w(){r("create"),o(null),a(null),F(f,!0)}function k(){r("skip"),a({})}ue(()=>{a(),e.rawdata&&p(e.rawdata,a())}),ue(()=>{r()==="create"&&l()&&!a()&&g(e.rawdata,l(),e.outliers)}),ue(()=>{r()==="skip"&&o()===null&&(a({}),l([]),o(e.rawdata))});var y=Ah(),E=G(y),N=I(E);{var A=L=>{ie(L,{name:"info",children:(R,D)=>{var z=_h(),V=G(z);{var K=ae=>{var le=bh(),oe=M(I(le),2);Po(oe,{get prepmodel(){return a()}}),S(ae,le)};Y(V,ae=>{s(f)||ae(K)})}var J=M(V,2);{var X=ae=>{Di(ae,{onclick:w})};Y(J,ae=>{r()==="create"&&ae(X)})}var te=M(J,2);Or(te,{onclick:_}),S(R,z)},$$slots:{default:!0}})},P=L=>{var R=he(),D=G(R);{var z=K=>{ie(K,{name:"prep-info",children:(J,X)=>{var te=wh(),ae=M(G(te),2),le=I(ae);Or(le,{onclick:_}),S(J,te)},$$slots:{default:!0}})},V=K=>{var J=he(),X=G(J);{var te=le=>{ie(le,{label:"Preprocessing",name:"prep-container",children:(oe,$)=>{var ne=yh(),Oe=G(ne);Et(Oe,{text:"Skip",onclick:k});var Ke=M(Oe,2);Et(Ke,{text:"Load",onclick:()=>r("file")});var Be=M(Ke,2);Et(Be,{text:"Create",onclick:w}),S(oe,ne)},$$slots:{default:!0}})},ae=le=>{var oe=he(),$=G(oe);{var ne=Oe=>{var Ke=kh(),Be=G(Ke);ie(Be,{children:(Se,et)=>{var xe=xh();S(Se,xe)},$$slots:{default:!0}});var je=M(Be,2);td(je,{get model(){return a()},set model(Se){a(Se)},get prepobj(){return l()},set prepobj(Se){l(Se)},get left(){return s(u)},set left(Se){F(u,Se,!0)},get right(){return s(v)},set right(Se){F(v,Se,!0)}}),S(Oe,Ke)};Y($,Oe=>{r()==="file"&&Oe(ne)},!0)}S(le,oe)};Y(X,le=>{r()?le(ae,!1):le(te)},!0)}S(K,J)};Y(D,K=>{r()==="skip"?K(z):K(V,!1)},!0)}S(L,R)};Y(N,L=>{a()&&o()&&a().ml?L(A):L(P,!1)})}var O=M(E,2);{var T=L=>{$i(L,{closeModal:b,isDark:!0,children:(R,D)=>{ph(R,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:b,get prepobj(){return l()},set prepobj(z){l(z)},get left(){return s(u)},set left(z){F(u,z,!0)},get right(){return s(v)},set right(z){F(v,z,!0)},get meta(){return c()},set meta(z){c(z)}})},$$slots:{default:!0}})};Y(O,L=>{s(f)&&L(T)})}var H=M(O,2);{var j=L=>{ie(L,{status:"error",children:(R,D)=>{var z=Eh(),V=I(z);ee(()=>fe(V,s(h))),S(R,z)},$$slots:{default:!0}})};Y(H,L=>{(s(d)==="error"||s(h))&&L(j)})}S(t,y),ge()}var Sh=W('<span style="font-weight:bold"> </span><br/>',1),Ch=W('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),Mh=W('<span class="file-size svelte-1uxd0r7"> </span>'),jh=W('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Th(t,e){me(e,!0);let r=B(e,"title",3,"");var l=he(),o=G(l);{var a=c=>{ie(c,{children:(f,u)=>{var v=jh(),d=G(v),h=I(d);{var m=y=>{var E=Sh(),N=G(E),A=I(N);ee(()=>fe(A,r())),S(y,E)};Y(h,y=>{r()&&r()!==""&&y(m)})}var g=M(h,4),p=I(g),_=M(g,5);{var b=y=>{var E=Ch(),N=G(E),A=I(N),P=M(N,4),O=I(P);ee(()=>{fe(A,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),fe(O,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),S(y,E)},w=y=>{var E=Mh(),N=I(E);ee(()=>fe(N,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),S(y,E)};Y(_,y=>{e.dataset.nresp&&e.dataset.nresp>0?y(b):y(w,!1)})}var k=M(d,2);Or(k,{get onclick(){return e.reset}}),ee(()=>{q(g,"title",e.dataset.fileName),fe(p,e.dataset.fileName)}),S(f,v)},$$slots:{default:!0}})};Y(o,c=>{e.dataset&&c(a)})}S(t,l),ge()}var Ph=W("<!> <!>",1),Lh=W("<!> <!> <!> <!> <!> <!>",1),Rh=W("<!> <!>",1),zh=W("<p> </p>"),Ih=W("<!> <p> </p>",1),Fh=W("<p> </p>"),qh=W("<!> <!> <!>",1);function Uo(t,e){me(e,!0);let r=B(e,"model",3,null),l=B(e,"outliers",19,()=>[]),o=B(e,"className",3,"Class"),a=B(e,"classMandatory",3,!1),c=B(e,"classUnique",3,!1),f=B(e,"title",3,""),u=B(e,"dataset",15),v=B(e,"resobj",15),d=B(e,"csvOnly",3,!0);const h=[",",";"],m=C(()=>r()?["no","yes"]:["no","labels","values"]);let g=re(void 0),p=re(""),_=re(""),b=re(","),w=re("no"),k=re(!1),y=re(!1),E=re(null),N=re("neutral"),A=re("");function P($){F(N,"error"),F(A,$,!0),console.error($)}function O(){F(N,"neural"),F(A,"")}function T(){F(N,"success"),F(A,"")}function H($,ne,Oe){F(E,e.WASM().then(Ke=>{v(nv(Ke,$,ne,Oe,!0)),T()}).catch(Ke=>{v(null),P(Ke)}),!0)}function j($,ne){if(!$||$.size<10)return;const Ke=$.slice(0,1e5),Be=new FileReader;Be.onload=()=>{const je=Be.result;!je||je.length<0||((Se=>{var et=Ll(Se,4);F(b,et[0],!0),F(k,et[1],!0),F(y,et[2],!0),F(w,et[3],!0)})(iv(je)),F(y,a()||s(y),!0),ne&&s(w)!=="no"&&F(w,"yes"))},Be.onerror=function(je){csvString=null,F(N,"error"),F(A,je,!0),console.error("Error reading CSV file.",je)},Be.readAsText(Ke)}function L($){try{const ne=lv($,s(b),s(w)==="yes"?"labels":s(w),s(k),s(y),s(p),s(_));if(ne.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const Oe=r()?r().prep&&Object.keys(r().prep).length>0?r().prep.npred:r().ncols+r().exclvars.length:0;if(r()&&ne.values.ncols!==Oe)throw new Error("Dataset has different number of columns than the training set.");if(ne.classNames.length>ne.values.nrows/2)throw new Error("Dataset has too many unique "+o().toLowerCase()+" labels ("+ne.classNames.length+"), check your CSV file.");if(a()&&ne.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&ne.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");ne.fileName=s(g).name.replace(/\.[^/.]+$/,""),r()&&(ne.varrev=r().varrev,ne.header=r().header,ne.varlabels=r().varlabels,ne.varvalues=r().varvalues,ne.varvaluesName=r().varvaluesName,ne.varvaluesUnits=r().varvaluesUnits),u(ne),T()}catch(ne){u(null),P(ne)}}function R($){const ne=new FileReader;ne.onload=()=>{L(ne.result)},ne.readAsText(s(g))}async function D($){try{const ne=s(g)instanceof FileList?s(g):[s(g)];u(await hv(ne)),T()}catch(ne){P("Failed to read SPC file: "+ne)}}function z(){F(g,""),u(null),v(null),F(p,""),F(_,""),O()}ue(()=>{if(!(s(g)===0||s(g)===void 0||u())){if(s(g)===null||s(g)===""){z();return}if(Array.isArray(s(g))){if(s(g).filter($=>$.slice(-4)===".spc").length!==s(g).length){P("Multiple file selection is allowed only for SPC files.");return}D(s(g));return}s(g)&&(s(g).type==="text/csv"||s(g).type==="application/vnd.ms-excel")?(j(s(g),r()),O()):D([s(g)])}}),ue(()=>{s(b)&&O()}),ue(()=>{if(u()&&r()&&!v()&&!s(A))try{v(H(r(),u(),l())),T()}catch($){u(null),v(null),P($)}});var V=qh(),K=G(V);{var J=$=>{var ne=Rh(),Oe=G(ne);Nn(Oe,()=>s(g)===void 0,je=>{ie(je,{children:(Se,et)=>{var xe=he(),De=G(xe);{var se=ce=>{gl(ce,{id:"dataFile",message:"Select CSV file with dataset",get file(){return s(g)},set file(_e){F(g,_e,!0)}})},pe=ce=>{gl(ce,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return s(g)},set file(_e){F(g,_e,!0)}})};Y(De,ce=>{d()?ce(se):ce(pe,!1)})}S(Se,xe)},$$slots:{default:!0}})});var Ke=M(Oe,2);{var Be=je=>{var Se=Lh(),et=G(Se);ie(et,{label:"Delimiter",children:(ve,Te)=>{pt(ve,{id:"sep",get options(){return h},get value(){return s(b)},set value(Le){F(b,Le,!0)}})},$$slots:{default:!0}});var xe=M(et,2);ie(xe,{label:"Row labels",children:(ve,Te)=>{Rn(ve,{id:"hasLabels",options:["no","yes"],get value(){return s(k)},set value(Le){F(k,Le,!0)}})},$$slots:{default:!0}});var De=M(xe,2);{var se=ve=>{ie(ve,{get label(){return`${o()??""} labels`},children:(Te,Le)=>{Rn(Te,{id:"hasLabels",options:["no","yes"],get value(){return s(y)},set value(Qe){F(y,Qe,!0)}})},$$slots:{default:!0}})};Y(De,ve=>{a()||ve(se)})}var pe=M(De,2);ie(pe,{label:"Header",children:(ve,Te)=>{pt(ve,{id:"header",get options(){return s(m)},get value(){return s(w)},set value(Le){F(w,Le,!0)}})},$$slots:{default:!0}});var ce=M(pe,2);{var _e=ve=>{var Te=Ph(),Le=G(Te);ie(Le,{label:"Header name",children:(Ze,Ve)=>{Xi(Ze,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return s(p)},set value(Ie){F(p,Ie,!0)}})},$$slots:{default:!0}});var Qe=M(Le,2);ie(Qe,{label:"Header units",children:(Ze,Ve)=>{Xi(Ze,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return s(_)},set value(Ie){F(_,Ie,!0)}})},$$slots:{default:!0}}),S(ve,Te)};Y(ce,ve=>{s(w)==="values"&&ve(_e)})}var ke=M(ce,2);ie(ke,{label:" ",children:(ve,Te)=>{Et(ve,{text:"Load",onclick:R})},$$slots:{default:!0}}),S(je,Se)};Y(Ke,je=>{s(g)&&!Array.isArray(s(g))&&(s(g).type==="text/csv"||s(g).type==="application/vnd.ms-excel")&&je(Be)})}S($,ne)},X=$=>{var ne=he(),Oe=G(ne);{var Ke=Be=>{var je=he(),Se=G(je);Za(Se,()=>s(E),et=>{ie(et,{children:(xe,De)=>{var se=Ih(),pe=G(se);Qi(pe);var ce=M(pe,2),_e=I(ce);ee(()=>fe(_e,r()?"Loading data and apply model...":"Loading data...")),S(xe,se)},$$slots:{default:!0}})},void 0,(et,xe)=>{ie(et,{status:"error",children:(De,se)=>{var pe=zh(),ce=I(pe);ee(()=>fe(ce,s(xe))),S(De,pe)},$$slots:{default:!0}})}),S(Be,je)};Y(Oe,Be=>{s(E)&&Be(Ke)})}S($,ne)};Y(K,$=>{u()?$(X,!1):$(J)})}var te=M(K,2);{var ae=$=>{Th($,{get dataset(){return u()},reset:z,get title(){return f()}})};Y(te,$=>{u()&&$(ae)})}var le=M(te,2);{var oe=$=>{ie($,{status:"error",children:(ne,Oe)=>{var Ke=Fh(),Be=I(Ke);ee(()=>fe(Be,s(A))),S(ne,Ke)},$$slots:{default:!0}})};Y(le,$=>{(s(N)==="error"||s(A))&&$(oe)})}S(t,V),ge()}var Oh=W("<!> <!> <!> <!> <!> <!>",1),Bh=W("<p> </p>"),Dh=W("<!> <p>Computing PV-set...</p>",1),Vh=W('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!> <!>',1),Yh=W("<p> </p>"),Uh=W("<!> <!> <!> <!>",1);function Wh(t,e){me(e,!0);let r=B(e,"outliers",19,()=>[]),l=B(e,"pvset",15),o=re("neutral"),a=re(""),c=re(1),f=re(!0),u=re(!1),v=re(Me(["ven","rand","loo"])),d=re("ven"),h=re(void 0),m=e.calset.values.nrows-r().length,g=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(R=>R>=m/(m-s(c)-1)&&R<=m/2):[],p=re(Me(g.length>0?g[0]:0));ue(()=>{g.length===0&&(F(v,["loo"],!0),F(d,"loo"))});function _(R,D){return D.length===0?R:e.calset.classes.filter((z,V)=>!D.includes(z))}async function b(R,D){F(h,e.WASM().then(z=>{const V=D.type=="loo"?0:D.type=="rand"?2:1,K=Xf(z,R.values,s(c),s(f),s(u),r()),J=Zf(z,K,R.values,s(c),D.nseg,V,0,r());l({classLabelsVarname:R.classLabelsVarname,classNames:R.classNames,dec:R.dec,fileName:R.fileName+"-pcv",hasClassNames:R.hasClassNames,hasLabels:R.hasLabels,header:R.header,labelsVarname:R.labelsVarname,classes:_(R.classes,r()),objindices:_(R.objindices,r()),objlabels:_(R.objlabels,r()),sep:R.sep,values:J,varAxisTitle:R.varAxisTitle,varindices:R.varindices,varlabels:R.varlabels,varrev:R.varrev,varvalues:R.varvalues,varvaluesName:R.varvaluesName,varvaluesUnits:R.varvaluesUnits})}).catch(z=>{console.error(z),l(null),F(o,"error"),F(a,z,!0)}),!0)}function w(R){F(o,"neutral"),F(a,""),b(e.calset,{type:s(d),nseg:s(p)})}function k(){F(o,"neutral"),F(a,""),F(h,null),l(null)}let y=C(()=>e.calset?Math.min(e.calset.values.nrows-2-r().length,e.calset.values.ncols-1,50):null);ue(()=>{e.calset===null&&k()}),ue(()=>{F(c,s(y)?Math.min(s(y),20):null,!0)});var E=Uh(),N=G(E);{var A=R=>{var D=Oh(),z=G(D);ie(z,{name:"ncomp",label:"# of PCs",children:(le,oe)=>{Ls(le,{id:"ncomp",min:1,get max(){return s(y)},step:1,decNum:0,get value(){return s(c)},set value($){F(c,$,!0)}})},$$slots:{default:!0}});var V=M(z,2);ie(V,{name:"center",label:"Center",children:(le,oe)=>{Rn(le,{id:"center",options:["no","yes"],get value(){return s(f)},set value($){F(f,$,!0)}})},$$slots:{default:!0}});var K=M(V,2);ie(K,{name:"scale",label:"Scale",children:(le,oe)=>{Rn(le,{id:"scale",options:["no","yes"],get value(){return s(u)},set value($){F(u,$,!0)}})},$$slots:{default:!0}});var J=M(K,2);ie(J,{name:"split",label:"Split type:",children:(le,oe)=>{pt(le,{id:"cvType",get options(){return s(v)},get value(){return s(d)},set value($){F(d,$,!0)}})},$$slots:{default:!0}});var X=M(J,2);{var te=le=>{ie(le,{name:"nseg",label:"Segments:",children:(oe,$)=>{pt(oe,{id:"nseg",get options(){return g},get value(){return s(p)},set value(ne){F(p,ne,!0)}})},$$slots:{default:!0}})};Y(X,le=>{s(d)!=="loo"&&le(te)})}var ae=M(X,2);ie(ae,{name:"run-button",label:" ",children:(le,oe)=>{Et(le,{onclick:w,text:"Compute PV-set"})},$$slots:{default:!0}}),S(R,D)};Y(N,R=>{!l()&&s(o)!=="busy"&&R(A)})}var P=M(N,2);{var O=R=>{var D=he(),z=G(D);Za(z,()=>s(h),V=>{ie(V,{name:"spinner",children:(K,J)=>{var X=Dh(),te=G(X);Qi(te),S(K,X)},$$slots:{default:!0}})},void 0,(V,K)=>{ie(V,{name:"error",status:"error",children:(J,X)=>{var te=Bh(),ae=I(te);ee(()=>fe(ae,s(K))),S(J,te)},$$slots:{default:!0}})}),S(R,D)};Y(P,R=>{s(h)&&R(O)})}var T=M(P,2);{var H=R=>{ie(R,{name:"info",children:(D,z)=>{var V=Vh(),K=G(V),J=M(I(K)),X=M(K,2);bv(X,{onclick:()=>uv(l(),e.calset.fileName+"-pv")});var te=M(X,2);Or(te,{onclick:k}),ee(()=>fe(J,` ${l().values.nrows??""} × ${l().values.ncols??""}, ${s(d)??""}
      ${s(d)!=="loo"?s(p)+" seg":""}`)),S(D,V)},$$slots:{default:!0}})};Y(T,R=>{l()&&R(H)})}var j=M(T,2);{var L=R=>{ie(R,{name:"error",status:"error",children:(D,z)=>{var V=Yh(),K=I(V);ee(()=>fe(K,s(a))),S(D,V)},$$slots:{default:!0}})};Y(j,R=>{s(o)==="error"&&s(a)&&R(L)})}S(t,E),ge()}var Hh=W('<tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (outliers)</td><td class="svelte-1fhdfcc"> </td></tr>'),Gh=W('<table class="svelte-1fhdfcc"><thead><tr class="svelte-1fhdfcc"><th class="svelte-1fhdfcc"></th><th class="svelte-1fhdfcc">f</th></tr></thead><tbody><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">DoF (Nf)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Mean (f0)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (extreme)</td><td class="svelte-1fhdfcc"> </td></tr><!></tbody></table>');function Wo(t,e){me(e,!0);let r=B(e,"isAlt",3,!1);var l=he(),o=G(l);{var a=c=>{var f=Gh(),u=M(I(f)),v=I(u),d=M(I(v)),h=I(d),m=M(v),g=M(I(m)),p=I(g),_=M(m),b=M(I(_)),w=I(b),k=M(_);{var y=E=>{var N=Hh(),A=M(I(N)),P=I(A);ee(O=>fe(P,O),[()=>e.nimca.oCrit.toFixed(1)]),S(E,N)};Y(k,E=>{r()||E(y)})}ee((E,N)=>{fe(h,e.nimca.Nf),fe(p,E),fe(w,N)},[()=>e.nimca.f0.toFixed(3),()=>e.nimca.eCrit.toFixed(1)]),S(c,f)};Y(o,c=>{e.nimca&&c(a)})}S(t,l),ge()}var Kh=W('<p class="title"> </p>'),Jh=W("<!> <!> <!> <!>",1);function Ho(t,e){me(e,!0);let r=B(e,"isAlt",3,!1),l=B(e,"nimca",15);const o=[10,5,1,.1],a=[5,1,.1,.01];ue(()=>{!l()&&e.calset&&l(ar.fit(e.calset))});var c=he(),f=G(c);{var u=v=>{var d=Jh(),h=G(d);ie(h,{name:"target-class",label:"",children:(b,w)=>{var k=Kh(),y=I(k);ee(()=>fe(y,`Target class: ${l().className??""}`)),S(b,k)},$$slots:{default:!0}});var m=M(h,2);ie(m,{name:"alpha",label:"Alpha, %:",children:(b,w)=>{pt(b,{get options(){return o},get value(){return l().alpha},set value(k){l(l().alpha=k,!0)}})},$$slots:{default:!0}});var g=M(m,2);{var p=b=>{ie(b,{name:"gamma",label:"Gamma, %:",children:(w,k)=>{pt(w,{get options(){return a},get value(){return l().gamma},set value(y){l(l().gamma=y,!0)}})},$$slots:{default:!0}})};Y(g,b=>{r()||b(p)})}var _=M(g,2);ie(_,{name:"limits",label:"Limits:",children:(b,w)=>{pt(b,{options:["classic","robust"],get value(){return l().limType},set value(k){l(l().limType=k,!0)}})},$$slots:{default:!0}}),S(v,d)};Y(f,v=>{l()&&l().className&&v(u)})}S(t,c),ge()}var Xh=W('<table class="svelte-1bca91p"><thead><tr class="svelte-1bca91p"><th class="svelte-1bca91p"></th><th class="svelte-1bca91p">Cal</th><th class="svelte-1bca91p">PV</th></tr></thead><tbody><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Objects</td><td class="svelte-1bca91p"> </td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Extremes</td><td class="svelte-1bca91p"> </td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Outliers</td><td class="svelte-1bca91p"> </td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Sensitivity</td><td class="svelte-1bca91p"> </td><td class="svelte-1bca91p"> </td></tr></tbody></table>');function Qh(t,e){me(e,!0);let r=C(()=>e.calres?e.calres.nrows:0);var l=he(),o=G(l);{var a=c=>{var f=Xh(),u=M(I(f)),v=I(u),d=M(I(v)),h=I(d),m=M(d),g=I(m),p=M(v),_=M(I(p)),b=I(_),w=M(_),k=I(w),y=M(p),E=M(I(y)),N=I(E),A=M(E),P=I(A),O=M(y),T=M(I(O)),H=I(T),j=M(T),L=I(j);ee((R,D)=>{fe(h,s(r)),fe(g,s(r)),fe(b,e.calres.outcomes.rolsNum.extreme),fe(k,e.pvres.outcomes.rolsNum.extreme),fe(N,e.calres.outcomes.rolsNum.outlier),fe(P,e.pvres.outcomes.rolsNum.outlier),fe(H,R),fe(L,D)},[()=>e.calres.outcomes.stat.sensitivity.toFixed(3),()=>e.pvres.outcomes.stat.sensitivity.toFixed(3)]),S(c,f)};Y(o,c=>{e.calres&&e.pvres&&c(a)})}S(t,l),ge()}var Zh=W('<div class="msg-select"> </div>'),$h=W('<div class="msg-select"> </div>'),e0=W('<div class="msg-select"> </div>'),t0=W('<div class="msg-select"> </div>'),r0=W('<div class="selected-buttons svelte-188sk7n"><!></div>'),n0=W('<div class="selected-buttons svelte-188sk7n"><!></div>'),s0=W("<!> <!> <!>",1),l0=()=>switchPlot(i),o0=(t,e,r)=>F(e,s(r),!0),a0=W("<button> </button>"),i0=W('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Go(t,e){me(e,!0);let r=B(e,"selobjText",3,"Click to select an object..."),l=B(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),o=B(e,"clearText",3,"Click anywhere to remove selection..."),a=B(e,"params",15),c=Me({objects:-1,variables:[]}),f=re(Me(Object.keys(e.plots)[0]));function u(T,H){c.objects=H?H[T]:T}function v(T){c.objects=-1}function d(T){c.variables=T}function h(T){c.variables=[]}let m={objects:{select:u,unselect:v},variables:{select:d,unselect:h},stats:{}},g=C(()=>s(f)?e.plots[s(f)]:null),p=C(()=>s(g)?s(g).component:null);var _=i0(),b=I(_),w=I(b),k=I(w);Ns(k,()=>s(p),(T,H)=>{H(T,{get params(){return a()[s(f)]},get callbacks(){return m[s(g).scope]},get selected(){return c[s(g).scope]},get props(){return e.props}})});var y=M(w,2),E=I(y);{var N=T=>{var H=he(),j=G(H);{var L=D=>{var z=Zh(),V=I(z);ee(()=>fe(V,r())),S(D,z)},R=D=>{var z=$h(),V=I(z);ee(()=>fe(V,o())),S(D,z)};Y(j,D=>{c[s(g).scope]<0?D(L):D(R,!1)})}S(T,H)};Y(E,T=>{s(g).scope==="objects"&&a()[s(f)].plotType!=="l"&&r().length>0&&T(N)})}var A=M(E,2);{var P=T=>{var H=he(),j=G(H);{var L=D=>{var z=e0(),V=I(z);ee(()=>fe(V,l())),S(D,z)},R=D=>{var z=t0(),V=I(z);ee(()=>fe(V,o())),S(D,z)};Y(j,D=>{c[s(g).scope].length===0?D(L):D(R,!1)})}S(T,H)};Y(A,T=>{s(g).scope==="variables"&&a()[s(f)].plotType!=="l"&&l().length>0&&T(P)})}var O=M(b,2);nt(O,21,()=>Object.keys(e.plots),lt,(T,H)=>{var j=he(),L=G(j);{var R=z=>{var V=s0(),K=G(V);Vv(K,{get title(){return s(g).label},labelWidth:12,get options(){return e.controls[s(f)]},get value(){return a()[s(f)]},set value(le){a(a()[s(f)]=le,!0)}});var J=M(K,2);{var X=le=>{var oe=r0(),$=I(oe);Rr($,()=>s(g).buttons,()=>c.objects),S(le,oe)};Y(J,le=>{s(g).scope==="objects"&&s(g).buttons&&c.objects>=0&&le(X)})}var te=M(J,2);{var ae=le=>{var oe=n0(),$=I(oe);Rr($,()=>s(g).buttons,()=>c.variables),S(le,oe)};Y(te,le=>{s(g).scope==="variables"&&s(g).buttons&&c.variables.length>0&&le(ae)})}S(z,V)},D=z=>{var V=a0();V.__keydown=[l0],V.__click=[o0,f,H];var K=I(V);ee(()=>{kt(V,1,`plot-selector plot-selector-${s(H)??""}`,"svelte-188sk7n"),fe(K,e.plots[s(H)].label)}),S(z,V)};Y(L,z=>{s(g)&&s(f)===s(H)?z(R):z(D,!1)})}S(T,j)}),S(t,_),ge()}vt(["keydown","click"]);function Nc(t,e,r){!e.callbacks||!e.callbacks.select||In(t,t.target.tagName,l=>e.callbacks.select(l,r()))}function c0(t,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var u0=ye("<text> </text>"),f0=ye('<g class="series series-textlabels"></g>'),v0=ye('<g class="series series-line"><polyline class="line"></polyline></g>'),d0=ye("<rect></rect>"),h0=ye('<g class="series series-bar"></g>'),m0=ye("<text> </text>"),g0=ye('<g class="series series-points series-points1"></g>'),p0=ye('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),b0=ye('<g class="series series-points series-points1"><text> </text></g>'),_0=ye('<g class="series series-bar"><rect></rect></g>'),w0=ye('<g class="series series-text"><text> </text></g>'),y0=ye("<!><!><!>",1),x0=ye("<!><!><!><!><!>",1);function Sc(t,e){me(e,!0);let r=B(e,"shortenLabels",3,!0),l=B(e,"lineWidth",3,1),o=B(e,"nBars",3,1),a=B(e,"barNum",3,1),c=B(e,"markerSize",3,null),f=B(e,"markerWidth",3,2),u=B(e,"marker",3,1),v=B(e,"colors",3,void 0),d=B(e,"filled",3,void 0),h=B(e,"mainColor",19,()=>Fn.cal),m=B(e,"faceColor",3,null),g=B(e,"selected",19,()=>-1),p=B(e,"maskSelected",3,!0),_=B(e,"xRange",15),b=B(e,"yRange",15),w=B(e,"ind",3,null);const k=Yt("axes"),y=C(()=>Dt(e.xValues,"PlotSeries")),E=C(()=>s(y)?Dt(e.yValues,"PlotSeries",s(y).length):null);ue(()=>{if(w()){const xe=w().map(De=>De+1);_(s(y)?Zr(s(y).subset(xe)):null),b(s(E)?Zr(s(E).subset(xe)):null)}else _(s(y)?Zr(s(y)):null),b(s(E)?Zr(s(E)):null)});const N=C(()=>m()===null?e.plotType==="p"?"transparent":"white":m()),A=[1,.8,.8,.8,.8,.8,.8,.8],P=[.85,.65,.65,.65,.65,.65,.65,.65],O=C(()=>c()?c():e.plotType==="p"?A[u()-1]:P[u()-1]),T=C(()=>ns[u()-1]),H=C(()=>Ro[k.scales().plot]),j=C(()=>bt([0],k.tY())[0]),L=C(()=>zo([.8],k.tX())[0]),R=C(()=>e.plotType==="h"?s(L)/o():0),D=C(()=>e.plotType==="h"?s(L)/2-(a()-1)*s(R):0),z=C(()=>s(H));let V=C(()=>e.plotType==="l"||e.plotType==="b"?qo(s(y),s(E),k.tX(),k.tY()):null),K=C(()=>s(y)?bt(s(y),k.tX()):null),J=C(()=>s(E)?bt(s(E),k.tY()):null),X=C(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(xe=>xe.slice(0,Ec)):e.labels:null);const te=C(()=>w()?w():qr(0,s(K).length-1));let ae=C(()=>v()&&v().length===s(y).length?v():Array(s(y).length).fill(h())),le=C(()=>d()&&d().length===s(y).length?d().map(xe=>xe?"ff":"30"):Array(s(y).length).fill("30")),oe=C(()=>v()&&v().length===s(y).length?v().map((xe,De)=>xe+s(le)[De]):Array(s(y).length).fill(m()));const $=C(()=>`font-size:${s(O)}em;fill:${s(N)};cursor:default;text-anchor:middle;stroke-width:${f()}px;user-select:none;`),ne=`font-size:0.85em;fill:${xc};cursor:default;text-anchor:middle;stroke:${xc};stroke-width:0.1px;user-select:none;`,Oe=C(()=>`font-size:${s(O)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),Ke=`fill:transparent;stroke-width:${l()}px;`,Be=`stroke-width:${l()}px;`;ue(()=>{g()&&w()&&w().indexOf(g())<0&&e.callbacks.unselect()});var je=he(),Se=G(je);{var et=xe=>{var De=x0(),se=G(De);{var pe=Ve=>{var Ie=f0();nt(Ie,21,()=>s(te),lt,(ct,tt)=>{var Ge=u0(),Zt=I(Ge);ee(()=>{q(Ge,"opacity",s(tt)===g()),q(Ge,"x",s(K)[s(tt)]-s(D)+s(R)/2),q(Ge,"y",s(J)[s(tt)]),q(Ge,"dy",s(E).v[s(tt)]<0?s(z):-s(z)),fe(Zt,s(X)[s(tt)])}),S(ct,Ge)}),ee(()=>gt(Ie,ne+(g()>=0?"opacity:0.2;":""))),S(Ve,Ie)};Y(se,Ve=>{e.showLabels&&s(X)&&Ve(pe)})}var ce=M(se);{var _e=Ve=>{var Ie=v0(),ct=I(Ie);ee(()=>{gt(Ie,Ke),q(ct,"points",s(V)),q(ct,"stroke",h())}),S(Ve,Ie)};Y(ce,Ve=>{(e.plotType==="l"||e.plotType==="b")&&Ve(_e)})}var ke=M(ce);{var ve=Ve=>{var Ie=h0();Ie.__click=[Nc,e,w],nt(Ie,21,()=>s(te),lt,(ct,tt)=>{var Ge=d0();ee(()=>{q(Ge,"x",s(K)[s(tt)]-s(D)),q(Ge,"y",s(E).v[s(tt)]<0?s(j):s(J)[s(tt)]),q(Ge,"fill",s(ae)[s(tt)]),q(Ge,"width",s(R)),q(Ge,"height",s(E).v[s(tt)]<0?s(J)[s(tt)]-s(j):s(j)-s(J)[s(tt)])}),S(ct,Ge)}),ee(()=>gt(Ie,Be+(g()>=0?"opacity:0.2;":""))),S(Ve,Ie)};Y(ke,Ve=>{e.plotType==="h"&&Ve(ve)})}var Te=M(ke);{var Le=Ve=>{var Ie=g0();Ie.__click=[Nc,e,w],nt(Ie,21,()=>s(te),lt,(ct,tt)=>{var Ge=m0(),Zt=I(Ge);ee(()=>{q(Ge,"x",s(K)[s(tt)]),q(Ge,"y",s(J)[s(tt)]),q(Ge,"fill",s(oe)[s(tt)]),q(Ge,"stroke",s(ae)[s(tt)]),fe(Zt,s(T))}),S(ct,Ge)}),ee(()=>gt(Ie,s($)+(g()>=0?"opacity:0.2;":""))),S(Ve,Ie)};Y(Te,Ve=>{(e.plotType==="p"||e.plotType==="b")&&Ve(Le)})}var Qe=M(Te);{var Ze=Ve=>{var Ie=y0(),ct=G(Ie);{var tt=Ne=>{var Ee=p0();q(Ee,"x",0),q(Ee,"y",0),Ee.__click=[c0,e],S(Ne,Ee)};Y(ct,Ne=>{p()&&Ne(tt)})}var Ge=M(ct);{var Zt=Ne=>{var Ee=b0(),Fe=I(Ee),_t=I(Fe);ee(()=>{gt(Ee,s(Oe)),q(Fe,"x",s(K)[g()]),q(Fe,"y",s(J)[g()]),q(Fe,"stroke",s(ae)[g()]),q(Fe,"fill",s(oe)[g()]),fe(_t,s(T))}),S(Ne,Ee)},Br=Ne=>{var Ee=_0(),Fe=I(Ee);ee(()=>{gt(Ee,Be),q(Fe,"stroke",s(ae)[g()]),q(Fe,"fill",s(ae)[g()]),q(Fe,"x",s(K)[g()]-s(D)),q(Fe,"y",s(E).v[g()]<0?s(j):s(J)[g()]),q(Fe,"width",s(R)),q(Fe,"height",s(E).v[g()]<0?s(J)[g()]-s(j):s(j)-s(J)[g()])}),S(Ne,Ee)};Y(Ge,Ne=>{e.plotType!=="h"?Ne(Zt):Ne(Br,!1)})}var Dr=M(Ge);{var we=Ne=>{var Ee=w0(),Fe=I(Ee),_t=I(Fe);ee(()=>{gt(Ee,ne),q(Fe,"stroke",kc),q(Fe,"fill",kc),q(Fe,"x",s(K)[g()]),q(Fe,"y",s(J)[g()]),q(Fe,"dy",s(E).v[g()]<0?s(z):-s(z)),fe(_t,s(X)[g()])}),S(Ne,Ee)};Y(Dr,Ne=>{e.showLabels&&s(X)&&s(X).length>0&&Ne(we)})}S(Ve,Ie)};Y(Qe,Ve=>{g()>=0&&Ve(Ze)})}S(xe,De)};Y(Se,xe=>{s(K)&&s(J)&&xe(et)})}S(t,je),ge()}vt(["click"]);var k0=W("<!> <!> <!> <!>",1);function Ko(t,e){let r=B(e,"whole",3,!1),l=Cn(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);gc(t,lr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return Z1},get pngWidth(){return eh},get pngHeight(){return th},get pngRes(){return rh}},()=>l,{children:(o,a)=>{var c=k0(),f=G(c);Rr(f,()=>e.children);var u=M(f,2);pc(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var v=M(u,2);bc(v,{showGrid:!0,get label(){return e.yLabel}});var d=M(v,2);_c(d,{}),S(o,c)},$$slots:{default:!0}}))}var E0=W("<!> <!> <!> <!>",1);function Jo(t,e){me(e,!0);const r=C(()=>e.props&&e.props.data?e.props.data:null),l=C(()=>e.props&&e.props.res?e.props.res:null),o=C(()=>s(l)&&e.params.resID?s(l)[e.params.resID]:null),a=C(()=>s(l)&&e.params.resID?s(r)[e.params.resID]:null),c=C(()=>e.props&&e.props.model?e.props.model:null),f="#909090";let u=C(()=>s(c)&&s(c).oCrit?s(c).oCrit:0),v=C(()=>s(c)&&s(c).eCrit?s(c).eCrit:0),d=C(()=>s(o).objindices.map(D=>D+1)),h=C(()=>ah(s(o).outcomes.f,1,1,e.params.transType)),m=C(()=>s(o).objlabels.map(D=>D.slice(0,Ec))),g="Full dustance",p="Objects",_=C(()=>e.params.transType==="log"?"Full distance, log(1 + f)":"Full distance, f"),b=re(void 0),w=re(void 0),k=C(()=>oh(s(a),s(o),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),y=C(()=>e.params.colorByObj?e.params.colorByObj.ind:null),E=C(()=>s(y)?Ar(s(y))+1:Ar(s(o).objindices)+1),N=C(()=>s(y)?Ir(s(y)):Ir(s(o).objindices)),A=C(()=>(s(E)-s(N))*.025),P=C(()=>[s(N)-s(A),s(E)+s(A)]),O=C(()=>({x:s(P),y:e.params.transType==="log"?[Math.log(1+s(u)),Math.log(1+s(u))]:[s(u),s(u)]})),T=C(()=>({x:s(P),y:e.params.transType==="log"?[Math.log(1+s(v)),Math.log(1+s(v))]:[s(v),s(v)]})),H=C(()=>{if(!s(O)||!s(w))return[0,1];const D=Math.max(s(w)[1],s(O).y[0]);return[-.02*(D-s(w)[0]),(1.05+.1*(e.params.colorBy!=="none")+.05*e.params.showLabels)*D]});var j=he(),L=G(j);{var R=D=>{Ko(D,{title:g,get limX(){return s(P)},get limY(){return s(H)},xLabel:p,get yLabel(){return s(_)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(z,V)=>{var K=E0(),J=G(K);{var X=ne=>{nn(ne,{get xValues(){return s(T).x},get yValues(){return s(T).y},lineColor:f,lineType:2})};Y(J,ne=>{s(T)&&ne(X)})}var te=M(J,2);{var ae=ne=>{nn(ne,{get xValues(){return s(O).x},get yValues(){return s(O).y},lineColor:f,lineType:3})};Y(te,ne=>{s(O)&&(e.params.resID!=="test"||e.params.subset&&e.params.subset==="members")&&e.params.resID&&e.params.resID!=="new"&&ne(ae)})}var le=M(te,2);Sc(le,{get labels(){return s(m)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return s(d)},get yValues(){return s(h).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Vo[e.params.resID]},get colors(){return s(k).colors},get filled(){return s(k).filled},get ind(){return s(y)},get xRange(){return s(b)},set xRange(ne){F(b,ne,!0)},get yRange(){return s(w)},set yRange(ne){F(w,ne,!0)}});var oe=M(le,2);{var $=ne=>{{let Oe=C(()=>s(k).breaks!==null);yc(ne,{get show(){return s(Oe)},get colmap(){return s(k).map},get breaks(){return s(k).breaks},get labels(){return s(k).labels}})}};Y(oe,ne=>{s(k)&&s(k).showBar&&ne($)})}S(z,K)},$$slots:{default:!0}})};Y(L,D=>{s(d)&&s(h)&&D(R)})}S(t,j),ge()}var A0=W("<!> <!> <!>",1),N0=W("<!> <!> <!>",1);function S0(t,e){me(e,!0);const r="#e0e0e0",l="Number of extremes (expected)",o="Number of extremes (observed)",a="plot-extremes";function c(T){const H=We.zeros(T+1),j=We.zeros(T+1),L=We.zeros(T+1),R=We.zeros(T+1);for(let D=1;D<T;D++){const z=D/T,V=2*Math.sqrt(D*(1-z));H.v[D]=D,L.v[D]=D,j.v[D]=D-V,R.v[D]=D+V}return H.v[T]=T,L.v[T]=T,j.v[T]=T,R.v[T]=T,{xStart:H,xEnd:L,yStart:j,yEnd:R}}function f(T,H,j){const L=H.f,R=T.nMembers,D=We.zeros(R);for(let z=1;z<=R;z++){const V=z/R,K=jn(1-V,j);let J=0;for(let X=0;X<R;X++)L[T.ind.members[X]]>K&&(J+=1);D.v[z-1]=J}return D}let u=C(()=>e.props&&e.props.res?e.props.res:null),v=C(()=>e.props&&e.props.model?e.props.model:null),d=C(()=>s(v)&&s(v).Nf?s(v).Nf:0),h=C(()=>Object.keys(s(u))),m=C(()=>e.params.resID!=="both"?[e.params.resID]:s(h)),g=C(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),p=C(()=>s(m)?s(m).map(T=>({id:T,label:T,point:{marker:1,lineColor:Fn[T],faceColor:Yo[T],marker:Vo[T],markerSize:.85,lineWidth:1.5}})):null),_=C(()=>s(u)&&s(m)?s(m).reduce((T,H)=>(T[H]=We.seq(1,s(u)[H].nMembers),T),{}):null),b=C(()=>s(u)&&s(h)?s(h).reduce((T,H)=>(T[H]=f(s(u)[H],s(u)[H].outcomes,s(d)),T),{}):null),w=C(()=>s(m)?s(m).reduce((T,H)=>Math.max(T,s(_)[H].length),0):1),k=C(()=>s(w)>1?c(s(w)):null),y=C(()=>s(_)?[-1,s(w)+2]:[0,1]),E=C(()=>s(_)?[-1,s(w)+2]:[0,1]),N="Extremes";var A=he(),P=G(A);{var O=T=>{Ko(T,{title:N,xLabel:l,yLabel:o,get limX(){return s(y)},get limY(){return s(E)},fileName:a,whole:!0,children:(H,j)=>{var L=N0(),R=G(L);{var D=J=>{var X=A0(),te=G(X);I1(te,lr(()=>s(k),{lineColor:r}));var ae=M(te,2);nn(ae,{get xValues(){return s(k).xStart},get yValues(){return s(k).yStart},lineColor:r});var le=M(ae,2);nn(le,{get xValues(){return s(k).xEnd},get yValues(){return s(k).yEnd},lineColor:r}),S(J,X)};Y(R,J=>{s(k)&&J(D)})}var z=M(R,2);nt(z,17,()=>s(m),lt,(J,X)=>{Sc(J,{get xValues(){return s(_)[s(X)]},get yValues(){return s(b)[s(X)]},plotType:"p",showLabels:!1,get faceColor(){return Yo[s(X)]},get mainColor(){return Fn[s(X)]},get marker(){return Vo[s(X)]},lineWidth:1.5})});var V=M(z,2);{var K=J=>{Q1(J,{get items(){return s(p)},get position(){return s(g)}})};Y(V,J=>{s(p)&&s(p).length>0&&J(K)})}S(H,L)},$$slots:{default:!0}})};Y(P,T=>{s(u)&&T(O)})}S(t,A),ge()}function C0(t,e){if(t.target.tagName!=="rect"){F(e,-1);return}const r=Array.from(t.target.parentNode.children).indexOf(t.target);if(r<0){F(e,-1);return}s(e)!==r&&F(e,r,!0)}var M0=W("<!> <!> <!>",1),j0=W("<!> <!> <!> <!> <!>",1),T0=W('<div class="plot-container svelte-1838sos" role="tooltip"><!></div>');function Xo(t,e){me(e,!0);let r=B(e,"outliers",19,()=>[]);const l=C(()=>e.props&&e.props.data?e.props.data:null),o=C(()=>s(l)&&e.params.resID?s(l)[e.params.resID]:null);let a=re(-1);const c=C(()=>{const y=ht(s(o).varvalues),E=y.length,N=(y.v[1]-y.v[0])/2,A=(y.v[E-1]-y.v[E-2])/2,P=[y.v[0],y.v[E-1]],O=[P[0]-N,P[1]+A],T=(P[1]-P[0])/E;return{values:y,lim:O,width:T,hwidth:T*.5}}),f=C(()=>s(c)?s(c).values.apply(y=>y-s(c).hwidth):null),u=C(()=>s(o)?s(o).values.t():null);let v=C(()=>s(u)?s(u).getcolumn(e.selected>=0?e.selected+1:1):null),d=C(()=>{const y={all:s(u),sel:s(v),label:"Preprocessed data, X"},E=Zr(y.all.v),N=E[1]-E[0],A=[E[0]-N/50,E[1]+N/12],P=We.fill(E[1],y.sel.length);return y.lim=A,y.top=P,y.height=N,y});const h=C(()=>s(c)&&s(a)>=0?s(c).values.v[s(a)]:null),m=C(()=>s(d)&&s(a)>=0?s(d).sel.v[s(a)]:null),g=C(()=>s(o)&&s(a)>=0?s(o).varlabels[s(a)]:null),p=C(()=>s(o)&&e.selected>=0?`Object ${s(o).objlabels[e.selected].replace("_","-")}`:null),_=C(()=>s(o)?s(o).varvaluesName+(s(o).varvaluesUnits?", "+s(o).varvaluesUnits:""):null);var b=he(),w=G(b);{var k=y=>{var E=T0();E.__click=[C0,a];var N=I(E);Ko(N,{get title(){return s(p)},get yLabel(){return s(d).label},get xLabel(){return s(_)},get limY(){return s(d).lim},get limX(){return s(c).lim},fileName:"plot-contributions",children:(A,P)=>{var O=j0(),T=G(O);{let K=C(()=>e.selected>=0?"#e0e0e0":"#a0a0a0");wc(T,{get xValues(){return s(c).values},get yValues(){return s(d).all},get lineColor(){return s(K)}})}var H=M(T,2);{var j=K=>{var J=he(),X=G(J);nt(X,17,r,lt,(te,ae)=>{{let le=C(()=>s(d).all.getcolumn(s(ae)+1));nn(te,{get xValues(){return s(c).values},get yValues(){return s(le)},lineColor:"#ffdd88"})}}),S(K,J)};Y(H,K=>{r().length>0&&K(j)})}var L=M(H,2);{var R=K=>{nn(K,{get xValues(){return s(c).values},get yValues(){return s(d).sel},lineColor:"crimson"})};Y(L,K=>{e.selected>=0&&K(R)})}var D=M(L,2);_l(D,{get left(){return s(f)},get top(){return s(d).top},get height(){return s(d).height},get width(){return s(c).width},faceColor:"transparent",borderColor:"transparent"});var z=M(D,2);{var V=K=>{var J=M0(),X=G(J);{let le=C(()=>[s(h)]),oe=C(()=>[s(d).top.v[0]]),$=C(()=>[s(g)]);wl(X,{get xValues(){return s(le)},get yValues(){return s(oe)},get labels(){return s($)},pos:3,textSize:.85})}var te=M(X,2);{let le=C(()=>[s(h)]),oe=C(()=>[s(m)]);W1(te,{get xValues(){return s(le)},get yValues(){return s(oe)},faceColor:"crimson",lineColor:"crimson"})}var ae=M(te,2);{let le=C(()=>[s(f).v[s(a)]]),oe=C(()=>[s(d).top.v[s(a)]]);_l(ae,{get left(){return s(le)},get top(){return s(oe)},get height(){return s(d).height},get width(){return s(c).width},faceColor:"#ff000015"})}S(K,J)};Y(z,K=>{s(a)>=0&&K(V)})}S(A,O)},$$slots:{default:!0}}),S(y,E)};Y(w,y=>{s(c)&&s(d)&&y(k)})}S(t,b),ge()}vt(["click"]);function Qo(t){const e=Object.keys(t),r=t[e[0]],l=r.nMembers>0&&r.nStrangers>0,o=e[0]==="new",a=r.nMembers>0?"members":r.nStrangers>0?"strangers":"all",c={resID:{el:pt,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},subset:{el:pt,hidden:!l||o,default:a,label:"Show",props:{options:["members","strangers","all"]}},transType:{el:pt,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:Rn,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}};return r.nStrangers>0&&r.nStrangers==0&&r.classNames&&r.classNames.length>1&&(c.colorBy={el:pt,hidden:!1,default:"roles",label:"Color by",props:{options:["roles","classes"]}}),c}function yl(t){return{resID:{el:pt,hidden:t.length==1,default:t[0],label:"Results",props:{options:t}}}}function P0(t,e){me(e,!0);const r=(d,h=jt)=>{ie(d,{label:"Selected",children:(m,g)=>{Et(m,{onclick:()=>e.markOutlier(h()),text:"remove"})},$$slots:{default:!0}})},l={cal:e.calsetp,pv:e.pvset},o=C(()=>({cal:e.calres,pv:e.pvres})),a={regular:sn.regular,extreme:sn.extreme,outlier:sn.outlier};ue(()=>{if(e.nimca.limType){const d=s(o)[s(u).acceptance.resID].outcomes;s(u).acceptance.colorByObj={classColmap:a,labels:[`regular: ${d.rolsNum.regular}`,`extreme: ${d.rolsNum.extreme}`,`outliers: ${d.rolsNum.outlier}`],values:d.rols}}});const c=C(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Jo,buttons:r},extremes:{label:"Extremes",scope:"stats",component:S0},dataset:{label:"Datasets",scope:"objects",component:Xo,buttons:r}})),f=Me({acceptance:Qo(s(o)),extremes:yl(["cal","pv","both"]),dataset:yl(["cal","pv"])});let u=re(Me({acceptance:Ln(f.acceptance),extremes:Ln(f.extremes),dataset:Ln(f.extremes)}));const v=C(()=>({res:s(o),model:e.nimca,data:l}));Go(t,{get plots(){return s(c)},get controls(){return f},get props(){return s(v)},get params(){return s(u)},set params(d){F(u,d,!0)}}),ge()}var L0=W('<div class="outliers-pane svelte-1mp4dba"><!></div>'),R0=W('<div class="pcv-calculator svelte-1mp4dba"><!></div>'),z0=W('<div class="buttons"><!> <!> <!></div>'),I0=W('<div class="model-stats svelte-1mp4dba"><!></div> <div class="result-stats svelte-1mp4dba"><!></div>',1),F0=W(`<p class="svelte-1mp4dba">In this tab you can train a Naïve DD-SIMCA (NIMCA) model and validate it using Procrustes cross-validation. After creating the model you can save it to a file and use it in other tabs. For example, validate it using test set (tab <strong>Test</strong>) or apply it to a dataset with unknown class membership (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1mp4dba">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1mp4dba">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),q0=W(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to apply proper preprocessing methods. You can create a chain of the methods directly in the app
               (button <strong>Create</strong>), load previously created preprocessing model (<strong>Load</strong>), or just skip this step. In this case the data will be only mean centered for computing the distances.</p>`,1),O0=W(`<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">PCV is based on PCA decomposition, so you also have to select a number
               of components, just use large enough to cover all possible systematic variance. PCV is not sensitive to overfitting.</p> <p class="svelte-1mp4dba">After this step NIMCA model will be created automatically and you will be able to tune its parameters.</p>`,1),B0=W("<!> <!>",1),D0=W('<div class="help-text svelte-1mp4dba"><!></div>'),V0=W('<div class="app-container svelte-1mp4dba"><div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <!> <div class="nimca-settings svelte-1mp4dba"><!> <!></div> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function Y0(t,e){me(e,!0);const r=C(()=>e.session.train);ue(()=>{s(r).nimca&&!(s(r).nimca instanceof ar)&&(s(r).nimca=ar.fromJSON(s(r).nimca))});function l(){s(r).nimca=null,s(r).pvres=null,s(r).calres=null,s(r).calsetp=null,s(r).prepmodel=null,s(r).pvset=null}function o(L){if(L<0||L>s(r).calres.nrows-1)return;const R=s(r).calseto.objindices[L];R>=0&&!s(r).outliers.includes(R)&&(s(r).nimca=null,s(r).outliers.push(R),s(r).calseto=ts(s(r).calset,s(r).outliers),l())}function a(){s(r).nimca=null,s(r).outliers=[],s(r).calseto=s(r).calset,l()}function c(){s(r).nimca=null,s(r).outliers.pop(),s(r).calseto=ts(s(r).calset,s(r).outliers),l()}rl(()=>{s(r).calset===null?(s(r).outliers=[],s(r).calsetp=null,s(r).calseto=null,s(r).className=null,s(r).pvset=null,s(r).prepmodel=null,s(r).prepobj=[],s(r).prepType=null,s(r).nimca=null):s(r).calset&&!s(r).className&&(s(r).className=s(r).calset.classNames[0],s(r).calseto=s(r).calset)}),ue(()=>{s(r).calset===null&&(s(r).nimca=null,s(r).calseto=null,s(r).calsetp=null)}),ue(()=>{s(r).calsetp===null&&(s(r).nimca=null,s(r).calres=null,s(r).pvset=null)}),ue(()=>{s(r).pvset===null&&(s(r).nimca=null,s(r).pvres=null)}),ue(()=>{s(r).pvset&&s(r).nimca&&!s(r).pvres&&(s(r).pvres=s(r).nimca.predict(s(r).pvset))}),ue(()=>{s(r).calsetp&&s(r).nimca&&!s(r).calres&&(s(r).calres=s(r).nimca.predict(s(r).calsetp))}),ue(()=>{const L=mr(()=>JSON.stringify(e.session,Ps));s(r).nimca?e.backupSession(L,s(r).calset,s(r).pvset,s(r).pvres,s(r).nimca):e.backupSession(L,s(r).calset,s(r).pvset)});var f=V0(),u=I(f),v=I(u),d=I(v);Uo(d,{className:"Class",classMandatory:!0,classUnique:!0,get dataset(){return s(r).calset},set dataset(L){s(r).calset=L}});var h=M(v,2);{var m=L=>{var R=L0(),D=I(R);Mo(D,{get outliers(){return s(r).outliers},get dataset(){return s(r).calset},resetOutliers:a,undoOutliers:c}),S(L,R)};Y(h,L=>{s(r).outliers&&s(r).outliers.length>0&&L(m)})}var g=M(h,2);{var p=L=>{Nh(L,{get WASM(){return e.WASM},get rawdata(){return s(r).calseto},get prepType(){return s(r).prepType},set prepType(R){s(r).prepType=R},get prepobj(){return s(r).prepobj},set prepobj(R){s(r).prepobj=R},get prepdata(){return s(r).calsetp},set prepdata(R){s(r).calsetp=R},get prepmeta(){return s(r).prepmeta},set prepmeta(R){s(r).prepmeta=R},get prepmodel(){return s(r).prepmodel},set prepmodel(R){s(r).prepmodel=R}})};Y(g,L=>{s(r).calseto&&L(p)})}var _=M(g,2);{var b=L=>{var R=R0(),D=I(R);Wh(D,{get WASM(){return e.WASM},get calset(){return s(r).calsetp},get pvset(){return s(r).pvset},set pvset(z){s(r).pvset=z}}),S(L,R)};Y(_,L=>{s(r).calsetp&&L(b)})}var w=M(_,2),k=I(w);{var y=L=>{Ho(L,{get className(){return s(r).className},get calset(){return s(r).calsetp},get nimca(){return s(r).nimca},set nimca(R){s(r).nimca=R}})};Y(k,L=>{s(r).calsetp&&s(r).pvset&&L(y)})}var E=M(k,2);{var N=L=>{ie(L,{label:"Download",children:(R,D)=>{var z=z0(),V=I(z);Et(V,{onclick:()=>hl(s(r).nimca,s(r).calres,s(r).calset,"train",s(r).outliers),text:"Res (cal)"});var K=M(V,2);Et(K,{onclick:()=>hl(s(r).nimca,s(r).pvres,s(r).pvset,"PV",s(r).outliers),text:"Res (pv)"});var J=M(K,2);Et(J,{onclick:()=>Ao(s(r).nimca,s(r).prepmodel),text:"Model"}),S(R,z)},$$slots:{default:!0}})};Y(E,L=>{s(r).nimca&&s(r).pvres&&s(r).calres&&L(N)})}var A=M(w,2);{var P=L=>{var R=I0(),D=G(R),z=I(D);Wo(z,{get nimca(){return s(r).nimca}});var V=M(D,2),K=I(V);Qh(K,{get calres(){return s(r).calres},get pvres(){return s(r).pvres}}),S(L,R)};Y(A,L=>{s(r).nimca&&s(r).pvres&&s(r).calres&&L(P)})}var O=M(u,2),T=I(O);{var H=L=>{var R=D0(),D=I(R);{var z=K=>{var J=F0();S(K,J)},V=K=>{var J=B0(),X=G(J);{var te=oe=>{var $=q0();S(oe,$)};Y(X,oe=>{s(r).calsetp||oe(te)})}var ae=M(X,2);{var le=oe=>{var $=O0();S(oe,$)};Y(ae,oe=>{s(r).calsetp&&!s(r).pvset&&oe(le)})}S(K,J)};Y(D,K=>{s(r).calset?K(V,!1):K(z)})}S(L,R)},j=L=>{var R=he(),D=G(R);{var z=V=>{var K=he(),J=G(K);Nn(J,()=>s(r).pvres,X=>{P0(X,lr({markOutlier:o},()=>s(r)))}),S(V,K)};Y(D,V=>{s(r).nimca&&s(r).calres&&s(r).pvres&&V(z)},!0)}S(L,R)};Y(T,L=>{!s(r).nimca||!s(r).pvres||!s(r).calres?L(H):L(j,!1)})}S(t,f),ge()}var U0=W("<!> <!>",1),W0=W('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),H0=W('<p class="model-info svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">NIMCA model:</span> <!></p> <!>',1),G0=W("<p><!></p>"),K0=W("<!> <!>",1);function Cc(t,e){me(e,!0);let r=B(e,"prep",15),l=B(e,"nimca",15),o=re(""),a=re("neutral"),c=re("");function f(w){try{const k=JSON.parse(w,So);if(!Object.keys(k).includes("nimca")||!Object.keys(k).includes("prep")||k.nimca.class[0]!=="nimcamodel")throw new Error("The JSON file you selected does not contain NIMCA mdel.");k.nimca.fileName=s(d),r(k.prep),l(ar.fromJSON(k.nimca)),F(a,"success"),F(c,"")}catch(k){l(null),r(null),F(a,"error"),F(c,k,!0)}}function u(w){const k=new FileReader;k.onload=()=>{f(k.result)},k.readAsText(s(o))}function v(){F(o,""),l(null),r(null),F(a,"neutral"),F(c,"")}ue(()=>{s(o)===null?(l(null),r(null),F(a,"neutral"),F(c,"")):(F(a,"neutral"),F(c,""))});let d=C(()=>s(o)?s(o).name.replace(/\.[^/.]+$/,""):"");var h=K0(),m=G(h);{var g=w=>{var k=U0(),y=G(k);Nn(y,()=>s(o),A=>{ie(A,{children:(P,O)=>{gl(P,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return s(o)},set file(T){F(o,T,!0)}})},$$slots:{default:!0}})});var E=M(y,2);{var N=A=>{ie(A,{label:" ",children:(P,O)=>{Et(P,{onclick:u,text:"Load"})},$$slots:{default:!0}})};Y(E,A=>{s(o)&&A(N)})}S(w,k)},p=w=>{ie(w,{name:"info",children:(k,y)=>{var E=H0(),N=G(E),A=M(I(N),2),P=I(A),O=M(A,4),T=M(O);{var H=L=>{var R=W0(),D=M(G(R),3);Po(D,{get prepmodel(){return r()}}),S(L,R)};Y(T,L=>{r()&&L(H)})}var j=M(N,2);Or(j,{onclick:v}),ee(()=>{q(A,"title",l().fileName),fe(P,l().fileName),fe(O,` ${l().ncols??""} predictors. `)}),S(k,E)},$$slots:{default:!0}})};Y(m,w=>{l()?w(p,!1):w(g)})}var _=M(m,2);{var b=w=>{ie(w,{status:"error",children:(k,y)=>{var E=G0(),N=I(E);Tt(N,()=>s(c)),S(k,E)},$$slots:{default:!0}})};Y(_,w=>{(s(a)==="error"||s(c))&&w(b)})}S(t,h),ge()}var J0=W('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Out</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Sensitivity</td><td class="svelte-k5uafz"> </td></tr>',1),X0=W('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">In</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Specificity</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Selectivity</td><td class="svelte-k5uafz"> </td></tr>',1),Q0=W('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Efficiency</td><td class="svelte-k5uafz"> </td></tr>'),Z0=W('<table class="svelte-k5uafz"><thead><tr class="svelte-k5uafz"><th class="svelte-k5uafz"></th><th class="svelte-k5uafz">Test</th></tr></thead><tbody><tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Members</td><td class="svelte-k5uafz"> </td></tr><!><tr class="section svelte-k5uafz"><td class="label svelte-k5uafz">Strangers</td><td class="svelte-k5uafz"> </td></tr><!><!></tbody></table>');function $0(t,e){me(e,!0);var r=he(),l=G(r);{var o=a=>{var c=Z0(),f=M(I(c)),u=I(f),v=M(I(u)),d=I(v),h=M(u);{var m=E=>{var N=J0(),A=G(N),P=M(I(A)),O=I(P),T=M(A,2),H=M(I(T)),j=I(H);ee(L=>{fe(O,e.res.outcomes.rolsNum.outlier+e.res.outcomes.rolsNum.extreme),fe(j,L)},[()=>e.res.outcomes.stat.sensitivity.toFixed(3)]),S(E,N)};Y(h,E=>{e.res.nMembers>0&&E(m)})}var g=M(h),p=M(I(g)),_=I(p),b=M(g);{var w=E=>{var N=X0(),A=G(N),P=M(I(A)),O=I(P),T=M(A,2),H=M(I(T)),j=I(H),L=M(T,2),R=M(I(L)),D=I(R);ee((z,V)=>{fe(O,e.res.outcomes.decsNum.in-e.res.outcomes.rolsNum.regular),fe(j,z),fe(D,V)},[()=>e.res.outcomes.stat.specificity.toFixed(3),()=>e.res.outcomes.stat.selectivity.toFixed(3)]),S(E,N)};Y(b,E=>{e.res.nStrangers>0&&E(w)})}var k=M(b);{var y=E=>{var N=Q0(),A=M(I(N)),P=I(A);ee(O=>fe(P,O),[()=>e.res.outcomes.stat.efficiency.toFixed(3)]),S(E,N)};Y(k,E=>{e.res.nStrangers>0&&e.res.nMembers>0&&E(y)})}ee(()=>{fe(d,e.res.nMembers),fe(_,e.res.nStrangers)}),S(a,c)};Y(l,a=>{e.res&&a(o)})}S(t,r),ge()}function em(t,e){me(e,!0);const r=(m,g=jt)=>{ie(m,{label:"Selected",children:(p,_)=>{Et(p,{onclick:()=>e.markOutlier(g()),text:"remove"})},$$slots:{default:!0}})},l={test:e.testsetp},o=C(()=>({test:e.testres})),a={regular:sn.regular,extreme:sn.extreme,outlier:sn.outlier},c={alien:sn.alien,external:sn.external},f=C(()=>{const m=e.testres.outcomes;return{members:{classColmap:a,labels:[`regular: ${m.rolsNum.regular}`,`extreme: ${m.rolsNum.extreme}`,`outliers: ${m.rolsNum.outlier}`],values:m.rols,ind:e.testres.ind.members},strangers:{classColmap:c,labels:[`aliens: ${m.rolsNum.alien}`,`external: ${m.rolsNum.external}`],values:m.rols,ind:e.testres.ind.strangers}}}),u=C(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Jo,buttons:r},dataset:{label:"Datasets",scope:"objects",component:Xo,buttons:r}})),v=Me({acceptance:Qo(s(o)),dataset:yl(["test"])});let d=re(Me({acceptance:Ln(v.acceptance),dataset:Ln(v.dataset)}));ue(()=>{s(f)&&s(d).acceptance.subset&&(s(d).acceptance.colorByObj=s(d).acceptance.subset!=="all"?s(f)[s(d).acceptance.subset]:null)}),ue(()=>{s(d).acceptance.colorBy=s(d).acceptance.subset!=="all"?"roles":"classes"});const h=C(()=>({res:s(o),model:e.nimca,data:l}));Go(t,{get plots(){return s(u)},get controls(){return v},get props(){return s(h)},get params(){return s(d)},set params(m){F(d,m,!0)}}),ge()}var tm=W("<p> </p>"),rm=W('<div class="data-loader svelte-1w77c1q"><!> <!></div>'),nm=W('<div class="outliers-pane svelte-1w77c1q"><!></div>'),sm=W('<div class="buttons"><!> <!></div>'),lm=W('<div class="model-stats svelte-1w77c1q"><!></div> <div class="result-stats svelte-1w77c1q"><!></div>',1),om=W('<p class="svelte-1w77c1q"><strong>Step 1</strong></p> <p class="svelte-1w77c1q">Load previously trained NIMCA model from file.</p>',1),am=W(`<p class="svelte-1w77c1q"><strong>Step 2</strong></p> <p class="svelte-1w77c1q">Load test set set from CSV file. The requirements to the file are the same as for the training set (column with
               class labels is mandatory), but test set may contain class labels both for target class (members) as well as for
               alternative classes (strangers).</p>`,1),im=W(`<div class="help-text svelte-1w77c1q"><p class="svelte-1w77c1q">In this tab you can apply previously trained NIMCA model to a test set. The test set can include target class members,
            objects belonging to alternative classes or both. You can use them for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),cm=W('<div class="app-container svelte-1w77c1q"><div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!> <!> <div class="nimca-settings svelte-1w77c1q"><!> <!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function um(t,e){me(e,!0);let r=re("");const l=C(()=>e.session.test);ue(()=>{s(l).nimca&&!(s(l).nimca instanceof ar)&&(s(l).nimca=ar.fromJSON(s(l).nimca))});function o(j){if(j<0||j>s(l).testres.nrows-1)return;const L=s(l).testseto.objindices[j];L>=0&&!s(l).outliers.includes(L)&&(s(l).outliers.push(L),s(l).testseto=ts(s(l).testset,s(l).outliers),s(l).testsetp=null,s(l).testres=null)}function a(){s(l).outliers=[],s(l).testseto=s(l).testset,s(l).testsetp=null,s(l).testres=null}function c(){s(l).outliers.pop(),s(l).testseto=ts(s(l).testset,s(l).outliers),s(l).testsetp=null,s(l).testres=null}async function f(j,L){if(F(r,""),!j)return null;if(!L||Object.keys(L).length===0){s(l).testsetp=j;return}e.WASM().then(R=>{const D=js(R,j.values,j.nresp,L,!1,!1),z=To(Ol(j),D);s(l).testsetp=Eo(z,L)}).catch(R=>{s(l).testsetp=null,console.error(R),F(r,R,!0)})}rl(()=>{s(l).testset===null&&(F(r,""),s(l).outliers=[],s(l).testsetp=null,s(l).testseto=null,s(l).testres=null),s(l).nimca===null&&(F(r,""),s(l).outliers=[],s(l).testset=null,s(l).testsetp=null,s(l).testseto=null,s(l).testres=null)}),ue(()=>{s(l).nimca===null&&(F(r,""),s(l).outliers=[],s(l).testset=null,s(l).testsetp=null,s(l).testseto=null,s(l).testres=null)}),ue(()=>{s(l).teset===null&&(F(r,""),s(l).outliers=[],s(l).testsetp=null,s(l).testseto=null,s(l).testres=null)}),ue(()=>{if(s(l).testset&&!s(l).testseto){if(F(r,""),s(l).testset.values.ncols!==s(l).nimca.ncols){F(r,`Wrong number of predictors (expected ${s(l).nimca.ncols}, got ${s(l).testset.values.ncols}), check settings and try to load again.`);return}s(l).testseto=s(l).testset}}),ue(()=>{s(l).testseto&&!s(l).testsetp&&(F(r,""),f(s(l).testseto,s(l).prep))}),ue(()=>{s(l).testsetp&&s(l).nimca&&!s(l).testres&&(s(l).testres=s(l).nimca.predict(s(l).testsetp))}),ue(()=>{const j=mr(()=>JSON.stringify(e.session,Ps));e.backupSession(j,s(l).testset,s(l).testres,s(l).nimca)});var u=cm(),v=I(u),d=I(v),h=I(d);Cc(h,{get nimca(){return s(l).nimca},set nimca(j){s(l).nimca=j},get prep(){return s(l).prep},set prep(j){s(l).prep=j}});var m=M(d,2);{var g=j=>{var L=rm(),R=I(L);Uo(R,{className:"Class",classMandatory:!0,get dataset(){return s(l).testset},set dataset(V){s(l).testset=V}});var D=M(R,2);{var z=V=>{ie(V,{status:"error",children:(K,J)=>{var X=tm(),te=I(X);ee(()=>fe(te,s(r))),S(K,X)},$$slots:{default:!0}})};Y(D,V=>{s(r)&&V(z)})}S(j,L)};Y(m,j=>{s(l).nimca&&j(g)})}var p=M(m,2);{var _=j=>{var L=nm(),R=I(L);Mo(R,{get outliers(){return s(l).outliers},get dataset(){return s(l).testset},resetOutliers:a,undoOutliers:c}),S(j,L)};Y(p,j=>{s(l).outliers&&s(l).outliers.length>0&&j(_)})}var b=M(p,2),w=I(b);{var k=j=>{Ho(j,{get className(){return s(l).className},get nimca(){return s(l).nimca},set nimca(L){s(l).nimca=L}})};Y(w,j=>{s(l).nimca&&s(l).testsetp&&j(k)})}var y=M(w,2);{var E=j=>{ie(j,{label:"Download",children:(L,R)=>{var D=sm(),z=I(D);Et(z,{onclick:()=>hl(s(l).nimca,s(l).testres,s(l).testset,"test",s(l).outliers),text:"Res (test)"});var V=M(z,2);Et(V,{onclick:()=>Ao(s(l).nimca,s(l).prep.model),text:"Model"}),S(L,D)},$$slots:{default:!0}})};Y(y,j=>{s(l).nimca&&s(l).testres&&j(E)})}var N=M(b,2);{var A=j=>{var L=lm(),R=G(L),D=I(R);Wo(D,{get nimca(){return s(l).nimca}});var z=M(R,2),V=I(z);$0(V,{get res(){return s(l).testres}}),S(j,L)};Y(N,j=>{s(l).nimca&&s(l).testres&&j(A)})}var P=M(v,2),O=I(P);{var T=j=>{var L=im(),R=M(I(L),2);{var D=V=>{var K=om();S(V,K)},z=V=>{var K=he(),J=G(K);{var X=te=>{var ae=am();S(te,ae)};Y(J,te=>{s(l).testset||te(X)},!0)}S(V,K)};Y(R,V=>{s(l).nimca?V(z,!1):V(D)})}S(j,L)},H=j=>{var L=he(),R=G(L);{var D=z=>{var V=he(),K=G(V);Nn(K,()=>s(l).testres,J=>{em(J,lr({markOutlier:o},()=>s(l)))}),S(z,V)};Y(R,z=>{s(l).nimca&&s(l).testres&&z(D)},!0)}S(j,L)};Y(O,j=>{!s(l).nimca||!s(l).testres?j(T):j(H,!1)})}S(t,u),ge()}var fm=W('<table class="svelte-vm8g95"><thead><tr class="svelte-vm8g95"><th class="svelte-vm8g95"></th><th class="svelte-vm8g95">New</th></tr></thead><tbody><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Objects</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">In</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Out</td><td class="svelte-vm8g95"> </td></tr></tbody></table>');function vm(t,e){me(e,!0);var r=he(),l=G(r);{var o=a=>{var c=fm(),f=M(I(c)),u=I(f),v=M(I(u)),d=I(v),h=M(u),m=M(I(h)),g=I(m),p=M(h),_=M(I(p)),b=I(_);ee(()=>{fe(d,e.res.outcomes.decs.length),fe(g,e.res.outcomes.decsNum.in),fe(b,e.res.outcomes.decsNum.out)}),S(a,c)};Y(l,a=>{e.res&&a(o)})}S(t,r),ge()}function dm(t,e){me(e,!0);const r=(v,d=jt)=>{ie(v,{label:"Selected",children:(h,m)=>{Et(h,{onclick:()=>e.markOutlier(d()),text:"remove"})},$$slots:{default:!0}})},l={new:e.newsetp},o=C(()=>({new:e.newres})),a=C(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Jo,buttons:r},dataset:{label:"Datasets",scope:"objects",component:Xo,buttons:r}})),c=Me({acceptance:Qo(s(o)),dataset:yl(["new"])});let f=re(Me({acceptance:Ln(c.acceptance),dataset:Ln(c.dataset)}));ue(()=>{s(f).acceptance.colorByObj={values:e.newres.outcomes.decs,classColmap:{in:Fn.new,out:Fn.new},labels:["in","out"],filled:e.newres.outcomes.decs.map(v=>v==="in"),showBar:!1}});const u=C(()=>({res:s(o),model:e.nimca,data:l}));Go(t,{get plots(){return s(a)},get controls(){return c},get props(){return s(u)},get params(){return s(f)},set params(v){F(f,v,!0)}}),ge()}var hm=W("<p> </p>"),mm=W('<div class="data-loader svelte-1rjc99q"><!> <!></div>'),gm=W('<div class="outliers-pane svelte-1rjc99q"><!></div>'),pm=W('<div class="buttons"><!> <!></div>'),bm=W('<div class="model-stats svelte-1rjc99q"><!></div> <div class="result-stats svelte-1rjc99q"><!></div>',1),_m=W('<p class="svelte-1rjc99q"><strong>Step 1</strong></p> <p class="svelte-1rjc99q">Load previously trained NIMCA model from file.</p>',1),wm=W(`<p class="svelte-1rjc99q"><strong>Step 2</strong></p> <p class="svelte-1rjc99q">Load data set from CSV file (or SPC files). The requirements to the file are the same as for the
               training set but no columns with reference classes is expected. If you have reference classes, use <em>Test</em> tab.</p>`,1),ym=W(`<div class="help-text svelte-1rjc99q"><p class="svelte-1rjc99q">In this tab you can apply previously trained NIMCA model to a new dataset with objects whose class is unknown (hence the app
            does not expect column with target classes).</p> <!></div>`),xm=W('<div class="app-container svelte-1rjc99q"><div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <div class="nimca-settings svelte-1rjc99q"><!> <!></div> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function km(t,e){me(e,!0);let r=re("");const l=C(()=>e.session.new);ue(()=>{s(l).nimca&&!(s(l).nimca instanceof ar)&&(s(l).nimca=ar.fromJSON(s(l).nimca))});function o(j){if(j<0||j>s(l).newres.nrows-1)return;const L=s(l).newseto.objindices[j];L>=0&&!s(l).outliers.includes(L)&&(s(l).outliers.push(L),s(l).newseto=ts(s(l).newset,s(l).outliers),s(l).newsetp=null,s(l).newres=null)}function a(){s(l).outliers=[],s(l).newseto=s(l).newset,s(l).newsetp=null,s(l).newres=null}function c(){s(l).outliers.pop(),s(l).newseto=ts(s(l).newset,s(l).outliers),s(l).newsetp=null,s(l).newres=null}async function f(j,L){if(F(r,""),!j)return null;if(!L||Object.keys(L).length===0){s(l).newsetp=j;return}e.WASM().then(R=>{const D=js(R,j.values,j.nresp,L,!1,!1),z=To(Ol(j),D);s(l).newsetp=Eo(z,L)}).catch(R=>{s(l).newsetp=null,console.error(R),F(r,R,!0)})}rl(()=>{s(l).newset===null&&(F(r,""),s(l).outliers=[],s(l).newsetp=null,s(l).newseto=null,s(l).newres=null),s(l).nimca===null&&(F(r,""),s(l).outliers=[],s(l).newset=null,s(l).newsetp=null,s(l).newseto=null,s(l).newres=null)}),ue(()=>{s(l).nimca===null&&(F(r,""),s(l).outliers=[],s(l).newset=null,s(l).newsetp=null,s(l).newseto=null,s(l).newres=null)}),ue(()=>{s(l).newset===null&&(F(r,""),s(l).outliers=[],s(l).newsetp=null,s(l).newseto=null,s(l).newres=null)}),ue(()=>{if(s(l).newset&&!s(l).newseto){if(F(r,""),s(l).newset.values.ncols!==s(l).nimca.ncols){F(r,`Wrong number of predictors (expected ${s(l).nimca.ncols}, got ${s(l).newset.values.ncols}), check settings and try to load again.`);return}s(l).newseto=s(l).newset}}),ue(()=>{s(l).newseto&&!s(l).newsetp&&(F(r,""),f(s(l).newseto,s(l).prep))}),ue(()=>{s(l).newsetp&&s(l).nimca&&!s(l).newres&&(s(l).newres=s(l).nimca.predict(s(l).newsetp))}),ue(()=>{const j=mr(()=>JSON.stringify(e.session,Ps));e.backupSession(j,s(l).newset,s(l).newres,s(l).nimca)});var u=xm(),v=I(u),d=I(v),h=I(d);Cc(h,{get nimca(){return s(l).nimca},set nimca(j){s(l).nimca=j},get prep(){return s(l).prep},set prep(j){s(l).prep=j}});var m=M(d,2);{var g=j=>{var L=mm(),R=I(L);Uo(R,{className:"Class",classMandatory:!1,csvOnly:!1,get dataset(){return s(l).newset},set dataset(V){s(l).newset=V}});var D=M(R,2);{var z=V=>{ie(V,{status:"error",children:(K,J)=>{var X=hm(),te=I(X);ee(()=>fe(te,s(r))),S(K,X)},$$slots:{default:!0}})};Y(D,V=>{s(r)&&V(z)})}S(j,L)};Y(m,j=>{s(l).nimca&&j(g)})}var p=M(m,2);{var _=j=>{var L=gm(),R=I(L);Mo(R,{get outliers(){return s(l).outliers},get dataset(){return s(l).newset},resetOutliers:a,undoOutliers:c}),S(j,L)};Y(p,j=>{s(l).outliers&&s(l).outliers.length>0&&j(_)})}var b=M(p,2),w=I(b);{var k=j=>{Ho(j,{get className(){return s(l).className},isAlt:!0,get nimca(){return s(l).nimca},set nimca(L){s(l).nimca=L}})};Y(w,j=>{s(l).nimca&&s(l).newsetp&&j(k)})}var y=M(w,2);{var E=j=>{ie(j,{label:"Download",children:(L,R)=>{var D=pm(),z=I(D);Et(z,{onclick:()=>hl(s(l).nimca,s(l).newres,s(l).newset,"new",s(l).outliers),text:"Res (new)"});var V=M(z,2);Et(V,{onclick:()=>Ao(s(l).nimca,s(l).prep.model),text:"Model"}),S(L,D)},$$slots:{default:!0}})};Y(y,j=>{s(l).nimca&&s(l).newres&&j(E)})}var N=M(b,2);{var A=j=>{var L=bm(),R=G(L),D=I(R);Wo(D,{get nimca(){return s(l).nimca}});var z=M(R,2),V=I(z);vm(V,{get res(){return s(l).newres}}),S(j,L)};Y(N,j=>{s(l).nimca&&s(l).newres&&j(A)})}var P=M(v,2),O=I(P);{var T=j=>{var L=ym(),R=M(I(L),2);{var D=V=>{var K=_m();S(V,K)},z=V=>{var K=he(),J=G(K);{var X=te=>{var ae=wm();S(te,ae)};Y(J,te=>{s(l).newset||te(X)})}S(V,K)};Y(R,V=>{s(l).nimca?V(z,!1):V(D)})}S(j,L)},H=j=>{var L=he(),R=G(L);{var D=z=>{var V=he(),K=G(V);Nn(K,()=>s(l).newres,J=>{dm(J,lr({markOutlier:o},()=>s(l)))}),S(z,V)};Y(R,z=>{s(l).nimca&&s(l).newres&&z(D)},!0)}S(j,L)};Y(O,j=>{!s(l).nimca||!s(l).newres?j(T):j(H,!1)})}S(t,u),ge()}function Mc(t,e){F(e,!0)}function Em(t,e,r){const l=Co(new Date),o=e.appID+"-session-"+l+".json";s(r).date=l;const a=JSON.stringify(s(r),Ps),c=new Blob([a],{type:"text/json"}),f=window.URL.createObjectURL(c),u=document.createElement("a");u.setAttribute("href",f),u.setAttribute("download",o),u.click()}function Am(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var Nm=W('<sup style="color:red">β</sup>'),Sm=W('<li><button class="svelte-1josccy"> </button></li>'),Cm=W("<div><!></div>"),Mm=W('<div class="info-container svelte-1josccy"><!></div>'),jm=W('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function Tm(t,e){me(e,!0);let r=B(e,"tabs",19,()=>[]),l=B(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let a=re(!1),c=re(void 0),f=re("Current session "),u=re(!1);function v(E){F(f,E,!0),F(u,!0),setTimeout(()=>{F(f,"Current session "),F(u,!1)},1e3)}function d(){F(a,!1)}function h(E){s(c).tab=E}function m(){const E=indexedDB.open(o,1);E.onsuccess=N=>{const P=N.target.result.transaction(e.appID,"readwrite");P.objectStore(e.appID).delete("session"),P.oncomplete=()=>{F(c,e.initSession(),!0),v("Session was reinitialzed.")},P.onerror=()=>console.error("Failed to session from DB.")}}function g(E,N){window.localStorage.removeItem(e.appID+"-blocked");const A=indexedDB.open(o,1);A.onsuccess=P=>{const H=P.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);H.put(E,"session"),H.put(Co(new Date),"session-update")}}function p(){new Promise((E,N)=>{const A=indexedDB.open(o,1);A.onsuccess=P=>{const j=P.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");j.onsuccess=()=>E(j.result),j.onerror=()=>N(j.error)}}).then(E=>{_(E),F(f,"Last session is restored "),F(u,!0),setTimeout(()=>{F(f,"Current session "),F(u,!1)},1500)}).catch(E=>{console.error(E),F(c,e.initSession(),!0)})}function _(E){if(!E||E==="undefined"){F(c,e.initSession(),!0);return}const N=JSON.parse(E,So);F(c,e.checkSession(N)?N:e.initSession(e.appID),!0)}function b(E){const N=new FileReader;N.onload=()=>{_(N.result),E.target.value=""},N.readAsText(E.target.files[0])}xf(()=>{const E=e.appID,N=indexedDB.open(o,1);N.onupgradeneeded=A=>{const P=A.target.result;P.objectStoreNames.contains(E)||P.createObjectStore(E)},N.onsuccess=A=>{p()}});var w=he(),k=G(w);{var y=E=>{var N=jm(),A=I(N),P=I(A),O=I(P),T=M(O,2),H=I(T),j=M(H);{var L=xe=>{var De=Nm();S(xe,De)};Y(j,xe=>{l()&&xe(L)})}var R=M(T,2),D=I(R),z=M(P,2);nt(z,21,r,lt,(xe,De,se)=>{var pe=Sm();let ce;var _e=I(pe);_e.__click=()=>h(se),_e.__keydown=()=>h(se);var ke=I(_e);ee(ve=>{ce=kt(pe,1,"nav-item svelte-1josccy",null,ce,ve),fe(ke,s(De).name)},[()=>({selected:s(c).tab===se})]),S(xe,pe)});var V=M(A,2),K=I(V);Nn(K,()=>s(c).date,xe=>{var De=he(),se=G(De);nt(se,17,r,lt,(pe,ce,_e)=>{var ke=Cm();let ve;var Te=I(ke);Ns(Te,()=>s(ce).component,(Le,Qe)=>{Qe(Le,{get WASM(){return e.WASM},get session(){return s(c)},backupSession:g})}),ee(Le=>ve=kt(ke,1,"tab-content svelte-1josccy",null,ve,Le),[()=>({hidden:s(c).tab!==_e})]),S(pe,ke)}),S(xe,De)});var J=M(V,2),X=I(J);let te;var ae=I(X),le=I(ae),oe=M(ae,2),$=I(oe);$.__change=b;var ne=M(oe,2);ne.__click=[Em,e,c];var Oe=M(ne,2);Oe.__click=[Am,m];var Ke=M(X,2),Be=I(Ke);Be.__click=[Mc,a],Be.__keydown=[Mc,a];var je=M(Be,2);Rr(je,()=>e.footer);var Se=M(J,2);{var et=xe=>{$i(xe,{closeModal:d,children:(De,se)=>{var pe=Mm(),ce=I(pe);Rr(ce,()=>e.info),S(De,pe)},$$slots:{default:!0}})};Y(Se,xe=>{s(a)&&xe(et)})}ee(xe=>{q(O,"alt",e.appShortTitle),fe(H,e.appTitle),fe(D,e.appSlogan),te=kt(X,1,"session svelte-1josccy",null,te,xe),fe(le,s(f))},[()=>({"no-buttons":s(u)})]),S(E,N)};Y(k,E=>{s(c)&&E(y)})}S(t,w),ge()}vt(["click","keydown","change"]);const Wm="modulepreload",Hm=function(t){return"/"+t},Gm={},Pm=function(e,r,l){let o=Promise.resolve();function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return o.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};async function Lm(t={}){var Tc;var e,r=t,l=typeof window=="object",o=typeof WorkerGlobalScope<"u",a=typeof process=="object"&&((Tc=process.versions)==null?void 0:Tc.node)&&process.type!="renderer";if(a){const{createRequire:U}=await Pm(()=>Promise.resolve().then(()=>Fm),void 0);var c=U(Ue&&Ue.tagName.toUpperCase()==="SCRIPT"&&Ue.src||new URL("nimca.js",document.baseURI).href)}var f=(U,Q)=>{throw Q},u=Ue&&Ue.tagName.toUpperCase()==="SCRIPT"&&Ue.src||new URL("nimca.js",document.baseURI).href,v="";function d(U){return r.locateFile?r.locateFile(U,v):v+U}var h,m;if(a){var g=c("fs");u.startsWith("file:")&&(v=c("path").dirname(c("url").fileURLToPath(u))+"/"),m=U=>{U=y(U)?new URL(U):U;var Q=g.readFileSync(U);return Q},h=async(U,Q=!0)=>{U=y(U)?new URL(U):U;var de=g.readFileSync(U,Q?void 0:"utf8");return de},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),f=(U,Q)=>{throw process.exitCode=U,Q}}else if(l||o){try{v=new URL(".",u).href}catch{}o&&(m=U=>{var Q=new XMLHttpRequest;return Q.open("GET",U,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),h=async U=>{if(y(U))return new Promise((de,Je)=>{var Ye=new XMLHttpRequest;Ye.open("GET",U,!0),Ye.responseType="arraybuffer",Ye.onload=()=>{if(Ye.status==200||Ye.status==0&&Ye.response){de(Ye.response);return}Je(Ye.status)},Ye.onerror=Je,Ye.send(null)});var Q=await fetch(U,{credentials:"same-origin"});if(Q.ok)return Q.arrayBuffer();throw new Error(Q.status+" : "+Q.url)}}var p=console.log.bind(console),_=console.error.bind(console),b,w=!1,k,y=U=>U.startsWith("file://"),E,N,A,P,O,T,H=!1;function j(){var U=A.buffer;P=new Int8Array(U),O=new Uint8Array(U),r.HEAP32=new Int32Array(U),T=new Uint32Array(U),r.HEAPF64=new Float64Array(U),new BigInt64Array(U),new BigUint64Array(U)}function L(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)De(r.preRun.shift());je(xe)}function R(){H=!0,Vs.i()}function D(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)et(r.postRun.shift());je(Se)}var z=0,V=null;function K(U){var Q;z++,(Q=r.monitorRunDependencies)==null||Q.call(r,z)}function J(U){var de;if(z--,(de=r.monitorRunDependencies)==null||de.call(r,z),z==0&&V){var Q=V;V=null,Q()}}function X(U){var de;(de=r.onAbort)==null||de.call(r,U),U="Aborted("+U+")",_(U),w=!0,U+=". Build with -sASSERTIONS for more info.";var Q=new WebAssembly.RuntimeError(U);throw N==null||N(Q),Q}var te;function ae(){return r.locateFile?d("pca_wasm.wasm"):new URL("/nimca/nimca.wasm",Ue&&Ue.tagName.toUpperCase()==="SCRIPT"&&Ue.src||new URL("nimca.js",document.baseURI).href).href}function le(U){if(U==te&&b)return new Uint8Array(b);if(m)return m(U);throw"both async and sync fetching of the wasm failed"}async function oe(U){if(!b)try{var Q=await h(U);return new Uint8Array(Q)}catch{}return le(U)}async function $(U,Q){try{var de=await oe(U),Je=await WebAssembly.instantiate(de,Q);return Je}catch(Ye){_(`failed to asynchronously prepare wasm: ${Ye}`),X(Ye)}}async function ne(U,Q,de){if(!U&&!y(Q)&&!a)try{var Je=fetch(Q,{credentials:"same-origin"}),Ye=await WebAssembly.instantiateStreaming(Je,de);return Ye}catch(at){_(`wasm streaming compile failed: ${at}`),_("falling back to ArrayBuffer instantiation")}return $(Q,de)}function Oe(){return{a:qm}}async function Ke(){function U(at,it){return Vs=at.exports,A=Vs.h,j(),ea(Vs),J(),Vs}K();function Q(at){return U(at.instance)}var de=Oe();if(r.instantiateWasm)return new Promise((at,it)=>{r.instantiateWasm(de,(ft,xr)=>{at(U(ft))})});te??(te=ae());var Je=await ne(b,te,de),Ye=Q(Je);return Ye}class Be{constructor(Q){fr(this,"name","ExitStatus");this.message=`Program terminated with exit(${Q})`,this.status=Q}}var je=U=>{for(;U.length>0;)U.shift()(r)},Se=[],et=U=>Se.push(U),xe=[],De=U=>xe.push(U),se=!0,pe=U=>Sl(U),ce=()=>Nt(),_e=()=>X(""),ke=0,ve=()=>{se=!1,ke=0},Te={},Le=U=>{if(U instanceof Be||U=="unwind")return k;f(1,U)},Qe=()=>se||ke>0,Ze=U=>{var Q;k=U,Qe()||((Q=r.onExit)==null||Q.call(r,U),w=!0),f(U,new Be(U))},Ve=(U,Q)=>{k=U,Ze(U)},Ie=Ve,ct=()=>{if(!Qe())try{Ie(k)}catch(U){Le(U)}},tt=U=>{if(!w)try{U(),ct()}catch(Q){Le(Q)}},Ge=()=>performance.now(),Zt=(U,Q)=>{if(Te[U]&&(clearTimeout(Te[U].id),delete Te[U]),!Q)return 0;var de=setTimeout(()=>{delete Te[U],tt(()=>Mt(U,Ge()))},Q);return Te[U]={id:de,timeout_ms:Q},0},Br=()=>Date.now(),Dr=()=>2147483648,we=(U,Q)=>Math.ceil(U/Q)*Q,Ne=U=>{var Q=A.buffer.byteLength,de=(U-Q+65535)/65536|0;try{return A.grow(de),j(),1}catch{}},Ee=U=>{var Q=O.length;U>>>=0;var de=Dr();if(U>de)return!1;for(var Je=1;Je<=4;Je*=2){var Ye=Q*(1+.2/Je);Ye=Math.min(Ye,U+100663296);var at=Math.min(de,we(Math.max(U,Ye),65536)),it=Ne(at);if(it)return!0}return!1},Fe=[null,[],[]],_t=typeof TextDecoder<"u"?new TextDecoder:void 0,$t=(U,Q,de,Je)=>{for(var Ye=Q+de;U[Q]&&!(Q>=Ye);)++Q;return Q},yr=(U,Q=0,de,Je)=>{var Ye=$t(U,Q,de);if(Ye-Q>16&&U.buffer&&_t)return _t.decode(U.subarray(Q,Ye));for(var at="";Q<Ye;){var it=U[Q++];if(!(it&128)){at+=String.fromCharCode(it);continue}var ft=U[Q++]&63;if((it&224)==192){at+=String.fromCharCode((it&31)<<6|ft);continue}var xr=U[Q++]&63;if((it&240)==224?it=(it&15)<<12|ft<<6|xr:it=(it&7)<<18|ft<<12|xr<<6|U[Q++]&63,it<65536)at+=String.fromCharCode(it);else{var Yn=it-65536;at+=String.fromCharCode(55296|Yn>>10,56320|Yn&1023)}}return at},Ct=(U,Q)=>{var de=Fe[U];Q===0||Q===10?((U===1?p:_)(yr(de)),de.length=0):de.push(Q)},ot=(U,Q,de)=>U?yr(O,U,Q):"",He=(U,Q,de,Je)=>{for(var Ye=0,at=0;at<de;at++){var it=T[Q>>2],ft=T[Q+4>>2];Q+=8;for(var xr=0;xr<ft;xr++)Ct(U,O[it+xr]);Ye+=ft}return T[Je>>2]=Ye,0},Lt=U=>{var Q=r["_"+U];return Q},At=(U,Q)=>{P.set(U,Q)},wt=U=>{for(var Q=0,de=0;de<U.length;++de){var Je=U.charCodeAt(de);Je<=127?Q++:Je<=2047?Q+=2:Je>=55296&&Je<=57343?(Q+=4,++de):Q+=3}return Q},ut=(U,Q,de,Je)=>{if(!(Je>0))return 0;for(var Ye=de,at=de+Je-1,it=0;it<U.length;++it){var ft=U.codePointAt(it);if(ft<=127){if(de>=at)break;Q[de++]=ft}else if(ft<=2047){if(de+1>=at)break;Q[de++]=192|ft>>6,Q[de++]=128|ft&63}else if(ft<=65535){if(de+2>=at)break;Q[de++]=224|ft>>12,Q[de++]=128|ft>>6&63,Q[de++]=128|ft&63}else{if(de+3>=at)break;Q[de++]=240|ft>>18,Q[de++]=128|ft>>12&63,Q[de++]=128|ft>>6&63,Q[de++]=128|ft&63,it++}}return Q[de]=0,de-Ye},ur=(U,Q,de)=>ut(U,O,Q,de),vn=U=>Mr(U),$e=U=>{var Q=wt(U)+1,de=vn(Q);return ur(U,de,Q),de},Ae=(U,Q,de,Je,Ye)=>{var at={string:er=>{var Ys=0;return er!=null&&er!==0&&(Ys=$e(er)),Ys},array:er=>{var Ys=vn(er.length);return At(er,Ys),Ys}};function it(er){return Q==="string"?ot(er):Q==="boolean"?!!er:er}var ft=Lt(U),xr=[],Yn=0;if(Je)for(var Un=0;Un<Je.length;Un++){var Pc=at[de[Un]];Pc?(Yn===0&&(Yn=ce()),xr[Un]=Pc(Je[Un])):xr[Un]=Je[Un]}var ra=ft(...xr);function Bm(er){return Yn!==0&&pe(Yn),it(er)}return ra=Bm(ra),ra};r.noExitRuntime&&(se=r.noExitRuntime),r.print&&(p=r.print),r.printErr&&(_=r.printErr),r.wasmBinary&&(b=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=Ae;var Mt,Sl,Mr,Nt;function ea(U){r._pcafit_wasm=U.j,r._malloc=U.k,r._free=U.l,r._pcapredict_wasm=U.m,r._pcvpca_wasm=U.n,r._prepfit_wasm=U.o,r._prepapply_wasm=U.p,Mt=U.q,Sl=U.r,Mr=U.s,Nt=U.t}var qm={c:_e,b:ve,d:Zt,g:Br,e:Ee,f:He,a:Ze},Vs=await Ke();function ta(){if(z>0){V=ta;return}if(L(),z>0){V=ta;return}function U(){var Q;r.calledRun=!0,!w&&(R(),E==null||E(r),(Q=r.onRuntimeInitialized)==null||Q.call(r),D())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),U()},1)):U()}function Om(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return Om(),ta(),H?e=r:e=new Promise((U,Q)=>{E=U,N=Q}),e}var Rm=W('<p>Current release: <span>1.0.1</span> &nbsp;Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=NIMCA app">help@mda.tools</a></p>'),zm=W(`<h2>NIMCA</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using Naïve DD-SIMCA (NIMCA) one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check <a href="">paper</a></p> <h3>v. 1.0.1</h3> <p class="release-info">released 08/10/2025</p> <ul><li>Fixed bug with wrong calculation of robust d0/f0.</li> <li>Fixed bug related wrong handling of model without preprocessing object in New tab.</li></ul>`,1);function Im(t,e){me(e,!1);function r(a){const c=Object.keys(a);if(!["date","tab","train","test","new"].every(d=>c.includes(d)))return!1;const f=Object.keys(a.train);if(!["nimca","calset","pvset","calres","pvres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(d=>f.includes(d)))return!1;const u=Object.keys(a.test);if(!["nimca","prep","testset","testres","outliers"].every(d=>u.includes(d)))return!1;const v=Object.keys(a.new);return!!["nimca","prep","newset","newres","outliers"].every(d=>v.includes(d))}function l(){return{date:Co(new Date),tab:0,train:{nimca:0,calset:0,calseto:0,calsetp:0,pvset:0,calres:0,pvres:0,outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{nimca:0,prep:0,testset:0,testseto:0,testres:0,outliers:[],ind:null},new:{nimca:0,prep:0,newset:0,newres:0,outliers:[]}}}const o=[{name:"Train",label:"train",component:Y0},{name:"Test",label:"test",component:um},{name:"Predict",label:"new",component:km}];bf(),Tm(t,{appID:"nimca",appTitle:"NIMCA",appShortTitle:"NIMCA",appSlogan:"Naïve DD-SIMCA classifier",get WASM(){return Lm},get tabs(){return o},initSession:l,checkSession:r,footer:f=>{var u=Rm();S(f,u)},info:f=>{var u=zm();S(f,u)},$$slots:{footer:!0,info:!0}}),ge()}$u(Im,{target:document.body});const Fm=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=nimca.js.map
