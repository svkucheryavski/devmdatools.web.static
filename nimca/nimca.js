var Nm=Object.defineProperty;var jc=st=>{throw TypeError(st)};var Mm=(st,We,wt)=>We in st?Nm(st,We,{enumerable:!0,configurable:!0,writable:!0,value:wt}):st[We]=wt;var ur=(st,We,wt)=>Mm(st,typeof We!="symbol"?We+"":We,wt),ra=(st,We,wt)=>We.has(st)||jc("Cannot "+wt);var K=(st,We,wt)=>(ra(st,We,"read from private field"),wt?wt.call(st):We.get(st)),Ne=(st,We,wt)=>We.has(st)?jc("Cannot add the same private member more than once"):We instanceof WeakSet?We.add(st):We.set(st,wt),be=(st,We,wt,dn)=>(ra(st,We,"write to private field"),dn?dn.call(st,wt):We.set(st,wt),wt),qt=(st,We,wt)=>(ra(st,We,"access private method"),wt);(function(){"use strict";var zs,ss,ln,Is,Fs,Fn,ls,qn,on,os,qs,Os,_r,Tc,Cl,na,wr,ar,Qo,Sr,On,Cr,ir,Wt,Nr,an,Bn,cn,Dn,un,xl,kl,Vt,jm,Tm,Nl,Ml,sa,fn,as,Bs,El,Pc,Cc,is,cs,us,fs,vs,ds,hs,ms,gs,ps;var st=document.createElement("style");st.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media (min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media (min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-1fhdfcc{width:100%;border-collapse:collapse}tr.svelte-1fhdfcc{width:100%}th.svelte-1fhdfcc{border-bottom:1px solid #a0a0a0}th.svelte-1fhdfcc,td.svelte-1fhdfcc{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1fhdfcc{text-align:left;padding:.1em .5em}table.svelte-1bca91p{width:100%;border-collapse:collapse}tr.svelte-1bca91p{width:100%}th.svelte-1bca91p{border-bottom:1px solid #a0a0a0}th.svelte-1bca91p,td.svelte-1bca91p{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-1bca91p{text-align:left;padding:.1em .5em}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}.plot-container.svelte-1838sos{width:100%;height:100%}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.app-controls.svelte-1mp4dba>.model-stats:where(.svelte-1mp4dba),.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(325px,30%) 1fr}}.model-info.svelte-7h7avz{line-height:1.5em}.model-info.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-k5uafz{width:100%;border-collapse:collapse}tr.svelte-k5uafz{width:100%}th.svelte-k5uafz{border-bottom:1px solid #a0a0a0}tr.section.svelte-k5uafz>td:where(.svelte-k5uafz){border-top:1px solid #a0a0a0}th.svelte-k5uafz,td.svelte-k5uafz{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-k5uafz{text-align:left;padding:.1em .5em}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.app-controls.svelte-1w77c1q>.model-stats:where(.svelte-1w77c1q),.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(325px,30%) 1fr}}table.svelte-vm8g95{width:100%;border-collapse:collapse}tr.svelte-vm8g95{width:100%}th.svelte-vm8g95{border-bottom:1px solid #a0a0a0}th.svelte-vm8g95,td.svelte-vm8g95{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-vm8g95{text-align:left;padding:.1em .5em}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){background:#e8e8e8}.app-controls.svelte-1rjc99q>.model-stats:where(.svelte-1rjc99q),.app-controls.svelte-1rjc99q>.result-stats:where(.svelte-1rjc99q){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(325px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(st);var We=typeof document<"u"?document.currentScript:null;const wt=!1;var dn=Array.isArray,Lc=Array.prototype.indexOf,jl=Array.from,Tl=Object.defineProperty,Dr=Object.getOwnPropertyDescriptor,la=Object.getOwnPropertyDescriptors,oa=Object.prototype,Rc=Array.prototype,Ys=Object.getPrototypeOf,aa=Object.isExtensible;function Un(t){return typeof t=="function"}const jt=()=>{};function zc(t){return typeof(t==null?void 0:t.then)=="function"}function Ic(t){return t()}function Us(t){for(var e=0;e<t.length;e++)t[e]()}function Fc(){var t,e,r=new Promise((s,o)=>{t=s,e=o});return{promise:r,resolve:t,reject:e}}function Pl(t,e){if(Array.isArray(t))return t;if(e===void 0||!(Symbol.iterator in t))return Array.from(t);const r=[];for(const s of t)if(r.push(s),r.length===e)break;return r}const Ht=2,Ll=4,Ws=8,hn=16,jr=32,mn=64,Rl=128,er=256,Hs=512,Rt=1024,tr=2048,Vr=4096,fr=8192,gn=16384,Gs=32768,pn=65536,ia=1<<17,qc=1<<18,Wn=1<<19,ca=1<<20,zl=1<<21,Il=1<<22,bn=1<<23,Yr=Symbol("$state"),ua=Symbol("legacy props"),Oc=Symbol(""),Fl=new class extends Error{constructor(){super(...arguments);ur(this,"name","StaleReactionError");ur(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function fa(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Bc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Dc(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Vc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Yc(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Uc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Wc(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Hc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Gc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Xc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Kc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Xs=1,Ks=2,va=4,Jc=8,Qc=16,Zc=1,$c=2,eu=4,tu=8,ru=16,nu=1,su=2,lu=4,da=1,ou=2,yt=Symbol(),au="http://www.w3.org/1999/xhtml";function iu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let cu=!1;function ha(t){return t===this.v}function ma(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function uu(t,e){return t!==e}function ga(t){return!ma(t,this.v)}let Hn=!1,fu=!1;function vu(){Hn=!0}const du=[];function ql(t,e=!1,r=!1){return Js(t,new Map,"",du,null,r)}function Js(t,e,r,s,o=null,a=!1){if(typeof t=="object"&&t!==null){var c=e.get(t);if(c!==void 0)return c;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(dn(t)){var f=Array(t.length);e.set(t,f),o!==null&&e.set(o,f);for(var u=0;u<t.length;u+=1){var v=t[u];u in t&&(f[u]=Js(v,e,r,s,null,a))}return f}if(Ys(t)===oa){f={},e.set(t,f),o!==null&&e.set(o,f);for(var d in t)f[d]=Js(t[d],e,r,s,null,a);return f}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!a)return Js(t.toJSON(),e,r,s,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let rt=null;function Ur(t){rt=t}function Yt(t){return pa().get(t)}function hu(t,e){return pa().set(t,e),e}function me(t,e=!1,r){rt={p:rt,c:null,e:null,s:t,x:null,l:Hn&&!e?{s:null,u:null,$:[]}:null}}function ge(t){var e=rt,r=e.e;if(r!==null){e.e=null;for(var s of r)La(s)}return rt=e.p,{}}function _n(){return!Hn||rt!==null&&rt.l===null}function pa(t){return rt===null&&fa(),rt.c??(rt.c=new Map(mu(rt)||void 0))}function mu(t){let e=t.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let Wr=[],Qs=[];function ba(){var t=Wr;Wr=[],Us(t)}function gu(){var t=Qs;Qs=[],Us(t)}function pu(){return Wr.length>0||Qs.length>0}function Hr(t){if(Wr.length===0&&!_s){var e=Wr;queueMicrotask(()=>{e===Wr&&ba()})}Wr.push(t)}function bu(){Wr.length>0&&ba(),Qs.length>0&&gu()}const _u=new WeakMap;function _a(t){var e=ze;if(e===null)return Re.f|=bn,t;if((e.f&Gs)===0){if((e.f&Rl)===0)throw!e.parent&&t instanceof Error&&wa(t),t;e.b.error(t)}else Gn(t,e)}function Gn(t,e){for(;e!==null;){if((e.f&Rl)!==0)try{e.b.error(t);return}catch(r){t=r}e=e.parent}throw t instanceof Error&&wa(t),t}function wa(t){const e=_u.get(t);e&&(Tl(t,"message",{value:e.message}),Tl(t,"stack",{value:e.stack}))}const Ol=new Set;let Je=null,Zs=null,Bl=new Set,wn=[],$s=null,Dl=!1,_s=!1;const yl=class yl{constructor(){Ne(this,_r);ur(this,"current",new Map);Ne(this,zs,new Map);Ne(this,ss,new Set);Ne(this,ln,0);Ne(this,Is,null);Ne(this,Fs,!1);Ne(this,Fn,[]);Ne(this,ls,[]);Ne(this,qn,[]);Ne(this,on,[]);Ne(this,os,[]);Ne(this,qs,[]);Ne(this,Os,[]);ur(this,"skipped_effects",new Set)}process(e){var o;wn=[],Zs=null;for(const a of e)qt(this,_r,Tc).call(this,a);if(K(this,Fn).length===0&&K(this,ln)===0){qt(this,_r,na).call(this);var r=K(this,qn),s=K(this,on);be(this,qn,[]),be(this,on,[]),be(this,os,[]),Zs=Je,Je=null,ka(r),ka(s),Je===null?Je=this:Ol.delete(this),(o=K(this,Is))==null||o.resolve()}else qt(this,_r,Cl).call(this,K(this,qn)),qt(this,_r,Cl).call(this,K(this,on)),qt(this,_r,Cl).call(this,K(this,os));for(const a of K(this,Fn))Qn(a);for(const a of K(this,ls))Qn(a);be(this,Fn,[]),be(this,ls,[])}capture(e,r){K(this,zs).has(e)||K(this,zs).set(e,r),this.current.set(e,e.v)}activate(){Je=this}deactivate(){Je=null,Zs=null;for(const e of Bl)if(Bl.delete(e),e(),Je!==null)break}neuter(){be(this,Fs,!0)}flush(){wn.length>0?xa():qt(this,_r,na).call(this),Je===this&&(K(this,ln)===0&&Ol.delete(this),this.deactivate())}increment(){be(this,ln,K(this,ln)+1)}decrement(){if(be(this,ln,K(this,ln)-1),K(this,ln)===0){for(const e of K(this,qs))Ut(e,tr),Xn(e);for(const e of K(this,Os))Ut(e,Vr),Xn(e);be(this,qn,[]),be(this,on,[]),this.flush()}else this.deactivate()}add_callback(e){K(this,ss).add(e)}settled(){return(K(this,Is)??be(this,Is,Fc())).promise}static ensure(){if(Je===null){const e=Je=new yl;Ol.add(Je),_s||yl.enqueue(()=>{Je===e&&e.flush()})}return Je}static enqueue(e){Hr(e)}};zs=new WeakMap,ss=new WeakMap,ln=new WeakMap,Is=new WeakMap,Fs=new WeakMap,Fn=new WeakMap,ls=new WeakMap,qn=new WeakMap,on=new WeakMap,os=new WeakMap,qs=new WeakMap,Os=new WeakMap,_r=new WeakSet,Tc=function(e){var d;e.f^=Rt;for(var r=e.first;r!==null;){var s=r.f,o=(s&(jr|mn))!==0,a=o&&(s&Rt)!==0,c=a||(s&fr)!==0||this.skipped_effects.has(r);if(!c&&r.fn!==null){if(o)r.f^=Rt;else if((s&Ll)!==0)K(this,on).push(r);else if((s&Rt)===0)if((s&Il)!==0){var f=(d=r.b)!=null&&d.is_pending()?K(this,ls):K(this,Fn);f.push(r)}else rl(r)&&((r.f&hn)!==0&&K(this,os).push(r),Qn(r));var u=r.first;if(u!==null){r=u;continue}}var v=r.parent;for(r=r.next;r===null&&v!==null;)r=v.next,v=v.parent}},Cl=function(e){for(const r of e)((r.f&tr)!==0?K(this,qs):K(this,Os)).push(r),Ut(r,Rt);e.length=0},na=function(){if(!K(this,Fs))for(const e of K(this,ss))e();K(this,ss).clear()};let Gr=yl;function ya(t){var e=_s;_s=!0;try{for(var r;;){if(bu(),wn.length===0&&!pu()&&(Je==null||Je.flush(),wn.length===0))return $s=null,r;xa()}}finally{_s=e}}function xa(){var t=Jn;Dl=!0;try{var e=0;for(Ba(!0);wn.length>0;){var r=Gr.ensure();if(e++>1e3){var s,o;wu()}r.process(wn),Xr.clear()}}finally{Dl=!1,Ba(t),$s=null}}function wu(){try{Uc()}catch(t){Gn(t,$s)}}let Tr=null;function ka(t){var e=t.length;if(e!==0){for(var r=0;r<e;){var s=t[r++];if((s.f&(gn|fr))===0&&rl(s)&&(Tr=[],Qn(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null&&s.ac===null?Fa(s):s.fn=null),(Tr==null?void 0:Tr.length)>0)){Xr.clear();for(const o of Tr)Qn(o);Tr=[]}}Tr=null}}function Xn(t){for(var e=$s=t;e.parent!==null;){e=e.parent;var r=e.f;if(Dl&&e===ze&&(r&hn)!==0)return;if((r&(mn|jr))!==0){if((r&Rt)===0)return;e.f^=Rt}}wn.push(e)}function yu(t){let e=0,r=Pr(0),s;return()=>{zu()&&(l(r),Gl(()=>(e===0&&(s=hr(()=>t(()=>ys(r)))),e+=1,()=>{Hr(()=>{e-=1,e===0&&(s==null||s(),s=void 0,ys(r))})})))}}var xu=pn|Wn|Rl;function ku(t,e,r){new Eu(t,e,r)}class Eu{constructor(e,r,s){Ne(this,Vt);ur(this,"parent");Ne(this,wr,!1);Ne(this,ar);Ne(this,Qo,null);Ne(this,Sr);Ne(this,On);Ne(this,Cr);Ne(this,ir,null);Ne(this,Wt,null);Ne(this,Nr,null);Ne(this,an,null);Ne(this,Bn,0);Ne(this,cn,0);Ne(this,Dn,!1);Ne(this,un,null);Ne(this,xl,()=>{K(this,un)&&Lr(K(this,un),K(this,Bn))});Ne(this,kl,yu(()=>(be(this,un,Pr(K(this,Bn))),()=>{be(this,un,null)})));be(this,ar,e),be(this,Sr,r),be(this,On,s),this.parent=ze.b,be(this,wr,!!K(this,Sr).pending),be(this,Cr,yn(()=>{ze.b=this;{try{be(this,ir,zt(()=>s(K(this,ar))))}catch(o){this.error(o)}K(this,cn)>0?qt(this,Vt,Ml).call(this):be(this,wr,!1)}},xu))}is_pending(){return K(this,wr)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!K(this,Sr).pending}update_pending_count(e){qt(this,Vt,sa).call(this,e),be(this,Bn,K(this,Bn)+e),Bl.add(K(this,xl))}get_effect_pending(){return K(this,kl).call(this),l(K(this,un))}error(e){var r=K(this,Sr).onerror;let s=K(this,Sr).failed;if(K(this,Dn)||!r&&!s)throw e;K(this,ir)&&(Xt(K(this,ir)),be(this,ir,null)),K(this,Wt)&&(Xt(K(this,Wt)),be(this,Wt,null)),K(this,Nr)&&(Xt(K(this,Nr)),be(this,Nr,null));var o=!1,a=!1;const c=()=>{if(o){iu();return}o=!0,a&&Kc(),Gr.ensure(),be(this,Bn,0),K(this,Nr)!==null&&vr(K(this,Nr),()=>{be(this,Nr,null)}),be(this,wr,this.has_pending_snippet()),be(this,ir,qt(this,Vt,Nl).call(this,()=>(be(this,Dn,!1),zt(()=>K(this,On).call(this,K(this,ar)))))),K(this,cn)>0?qt(this,Vt,Ml).call(this):be(this,wr,!1)};var f=Re;try{It(null),a=!0,r==null||r(e,c),a=!1}catch(u){Gn(u,K(this,Cr)&&K(this,Cr).parent)}finally{It(f)}s&&Hr(()=>{be(this,Nr,qt(this,Vt,Nl).call(this,()=>{be(this,Dn,!0);try{return zt(()=>{s(K(this,ar),()=>e,()=>c)})}catch(u){return Gn(u,K(this,Cr).parent),null}finally{be(this,Dn,!1)}}))})}}wr=new WeakMap,ar=new WeakMap,Qo=new WeakMap,Sr=new WeakMap,On=new WeakMap,Cr=new WeakMap,ir=new WeakMap,Wt=new WeakMap,Nr=new WeakMap,an=new WeakMap,Bn=new WeakMap,cn=new WeakMap,Dn=new WeakMap,un=new WeakMap,xl=new WeakMap,kl=new WeakMap,Vt=new WeakSet,jm=function(){try{be(this,ir,zt(()=>K(this,On).call(this,K(this,ar))))}catch(e){this.error(e)}be(this,wr,!1)},Tm=function(){const e=K(this,Sr).pending;e&&(be(this,Wt,zt(()=>e(K(this,ar)))),Gr.enqueue(()=>{be(this,ir,qt(this,Vt,Nl).call(this,()=>(Gr.ensure(),zt(()=>K(this,On).call(this,K(this,ar)))))),K(this,cn)>0?qt(this,Vt,Ml).call(this):(vr(K(this,Wt),()=>{be(this,Wt,null)}),be(this,wr,!1))}))},Nl=function(e){var r=ze,s=Re,o=rt;rr(K(this,Cr)),It(K(this,Cr)),Ur(K(this,Cr).ctx);try{return e()}catch(a){return _a(a),null}finally{rr(r),It(s),Ur(o)}},Ml=function(){const e=K(this,Sr).pending;K(this,ir)!==null&&(be(this,an,document.createDocumentFragment()),Au(K(this,ir),K(this,an))),K(this,Wt)===null&&be(this,Wt,zt(()=>e(K(this,ar))))},sa=function(e){var r;if(!this.has_pending_snippet()){this.parent&&qt(r=this.parent,Vt,sa).call(r,e);return}be(this,cn,K(this,cn)+e),K(this,cn)===0&&(be(this,wr,!1),K(this,Wt)&&vr(K(this,Wt),()=>{be(this,Wt,null)}),K(this,an)&&(K(this,ar).before(K(this,an)),be(this,an,null)))};function Au(t,e){for(var r=t.nodes_start,s=t.nodes_end;r!==null;){var o=r===s?null:xs(r);e.append(r),r=o}}function Su(t,e,r){const s=_n()?ws:Vl;if(e.length===0){r(t.map(s));return}var o=Je,a=ze,c=Cu();Promise.all(e.map(f=>Nu(f))).then(f=>{o==null||o.activate(),c();try{r([...t.map(s),...f])}catch(u){(a.f&gn)===0&&Gn(u,a)}o==null||o.deactivate(),Ea()}).catch(f=>{Gn(f,a)})}function Cu(){var t=ze,e=Re,r=rt,s=Je;return function(){rr(t),It(e),Ur(r),s==null||s.activate()}}function Ea(){rr(null),It(null),Ur(null)}function ws(t){var e=Ht|tr,r=Re!==null&&(Re.f&Ht)!==0?Re:null;return ze===null||r!==null&&(r.f&er)!==0?e|=er:ze.f|=Wn,{ctx:rt,deps:null,effects:null,equals:ha,f:e,fn:t,reactions:null,rv:0,v:yt,wv:0,parent:r??ze,ac:null}}function Nu(t,e){let r=ze;r===null&&Bc();var s=r.b,o=void 0,a=Pr(yt),c=null,f=!Re;return qu(()=>{try{var u=t();c&&Promise.resolve(u).catch(()=>{})}catch(g){u=Promise.reject(g)}var v=()=>u;o=(c==null?void 0:c.then(v,v))??Promise.resolve(u),c=o;var d=Je,h=s.is_pending();f&&(s.update_pending_count(1),h||d.increment());const m=(g,p=void 0)=>{c=null,h||d.activate(),p?p!==Fl&&(a.f|=bn,Lr(a,p)):((a.f&bn)!==0&&(a.f^=bn),Lr(a,g)),f&&(s.update_pending_count(-1),h||d.decrement()),Ea()};if(o.then(m,g=>m(null,g||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(u=>{function v(d){function h(){d===o?u(a):v(o)}d.then(h,h)}v(o)})}function N(t){const e=ws(t);return Va(e),e}function Vl(t){const e=ws(t);return e.equals=ga,e}function Aa(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)Xt(e[r])}}function Mu(t){for(var e=t.parent;e!==null;){if((e.f&Ht)===0)return e;e=e.parent}return null}function Yl(t){var e,r=ze;rr(Mu(t));try{Aa(t),e=Ga(t)}finally{rr(r)}return e}function Sa(t){var e=Yl(t);if(t.equals(e)||(t.v=e,t.wv=Wa()),!xn){var r=(Jr||(t.f&er)!==0)&&t.deps!==null?Vr:Rt;Ut(t,r)}}const Xr=new Map;function Pr(t,e){var r={f:0,v:t,reactions:null,equals:ha,rv:0,wv:0};return r}function re(t,e){const r=Pr(t);return Va(r),r}function Ul(t,e=!1,r=!0){var o;const s=Pr(t);return e||(s.equals=ga),Hn&&r&&rt!==null&&rt.l!==null&&((o=rt.l).s??(o.s=[])).push(s),s}function F(t,e,r=!1){Re!==null&&(!dr||(Re.f&ia)!==0)&&_n()&&(Re.f&(Ht|hn|Il|ia))!==0&&!(Ot!=null&&Ot.includes(t))&&Xc();let s=r?Me(e):e;return Lr(t,s)}function Lr(t,e){if(!t.equals(e)){var r=t.v;xn?Xr.set(t,e):Xr.set(t,r),t.v=e;var s=Gr.ensure();s.capture(t,r),(t.f&Ht)!==0&&((t.f&tr)!==0&&Yl(t),Ut(t,(t.f&er)===0?Rt:Vr)),t.wv=Wa(),Ca(t,tr),_n()&&ze!==null&&(ze.f&Rt)!==0&&(ze.f&(jr|mn))===0&&(nr===null?Bu([t]):nr.push(t))}return e}function ys(t){F(t,t.v+1)}function Ca(t,e){var r=t.reactions;if(r!==null)for(var s=_n(),o=r.length,a=0;a<o;a++){var c=r[a],f=c.f;if(!(!s&&c===ze)){var u=(f&tr)===0;u&&Ut(c,e),(f&Ht)!==0?Ca(c,Vr):u&&((f&hn)!==0&&Tr!==null&&Tr.push(c),Xn(c))}}}function Me(t){if(typeof t!="object"||t===null||Yr in t)return t;const e=Ys(t);if(e!==oa&&e!==Rc)return t;var r=new Map,s=dn(t),o=re(0),a=kn,c=f=>{if(kn===a)return f();var u=Re,v=kn;It(null),Ua(a);var d=f();return It(u),Ua(v),d};return s&&r.set("length",re(t.length)),new Proxy(t,{defineProperty(f,u,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Hc();var d=r.get(u);return d===void 0?d=c(()=>{var h=re(v.value);return r.set(u,h),h}):F(d,v.value,!0),!0},deleteProperty(f,u){var v=r.get(u);if(v===void 0){if(u in f){const d=c(()=>re(yt));r.set(u,d),ys(o)}}else F(v,yt),ys(o);return!0},get(f,u,v){var g;if(u===Yr)return t;var d=r.get(u),h=u in f;if(d===void 0&&(!h||(g=Dr(f,u))!=null&&g.writable)&&(d=c(()=>{var p=Me(h?f[u]:yt),_=re(p);return _}),r.set(u,d)),d!==void 0){var m=l(d);return m===yt?void 0:m}return Reflect.get(f,u,v)},getOwnPropertyDescriptor(f,u){var v=Reflect.getOwnPropertyDescriptor(f,u);if(v&&"value"in v){var d=r.get(u);d&&(v.value=l(d))}else if(v===void 0){var h=r.get(u),m=h==null?void 0:h.v;if(h!==void 0&&m!==yt)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return v},has(f,u){var m;if(u===Yr)return!0;var v=r.get(u),d=v!==void 0&&v.v!==yt||Reflect.has(f,u);if(v!==void 0||ze!==null&&(!d||(m=Dr(f,u))!=null&&m.writable)){v===void 0&&(v=c(()=>{var g=d?Me(f[u]):yt,p=re(g);return p}),r.set(u,v));var h=l(v);if(h===yt)return!1}return d},set(f,u,v,d){var E;var h=r.get(u),m=u in f;if(s&&u==="length")for(var g=v;g<h.v;g+=1){var p=r.get(g+"");p!==void 0?F(p,yt):g in f&&(p=c(()=>re(yt)),r.set(g+"",p))}if(h===void 0)(!m||(E=Dr(f,u))!=null&&E.writable)&&(h=c(()=>re(void 0)),F(h,Me(v)),r.set(u,h));else{m=h.v!==yt;var _=c(()=>Me(v));F(h,_)}var b=Reflect.getOwnPropertyDescriptor(f,u);if(b!=null&&b.set&&b.set.call(d,v),!m){if(s&&typeof u=="string"){var w=r.get("length"),k=Number(u);Number.isInteger(k)&&k>=w.v&&F(w,k+1)}ys(o)}return!0},ownKeys(f){l(o);var u=Reflect.ownKeys(f).filter(h=>{var m=r.get(h);return m===void 0||m.v!==yt});for(var[v,d]of r)d.v!==yt&&!(v in f)&&u.push(v);return u},setPrototypeOf(){Gc()}})}var Wl,Na,Ma,ja;function ju(){if(Wl===void 0){Wl=window,Na=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Ma=Dr(e,"firstChild").get,ja=Dr(e,"nextSibling").get,aa(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),aa(r)&&(r.__t=void 0)}}function Kr(t=""){return document.createTextNode(t)}function Gt(t){return Ma.call(t)}function xs(t){return ja.call(t)}function L(t,e){return Gt(t)}function G(t,e=!1){{var r=Gt(t);return r instanceof Comment&&r.data===""?xs(r):r}}function P(t,e=1,r=!1){let s=t;for(;e--;)s=xs(s);return s}function Tu(t){t.textContent=""}function el(){return!1}let Ta=!1;function Pu(){Ta||(Ta=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function Kn(t){var e=Re,r=ze;It(null),rr(null);try{return t()}finally{It(e),rr(r)}}function Lu(t,e,r,s=r){t.addEventListener(e,()=>Kn(r));const o=t.__on_r;o?t.__on_r=()=>{o(),s(!0)}:t.__on_r=()=>s(!0),Pu()}function Pa(t){ze===null&&Re===null&&Yc(),Re!==null&&(Re.f&er)!==0&&ze===null&&Vc(),xn&&Dc()}function Ru(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function kr(t,e,r,s=!0){var o=ze;o!==null&&(o.f&fr)!==0&&(t|=fr);var a={ctx:rt,deps:null,nodes_start:null,nodes_end:null,f:t|tr,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(r)try{Qn(a),a.f|=Gs}catch(u){throw Xt(a),u}else e!==null&&Xn(a);if(s){var c=a;if(r&&c.deps===null&&c.teardown===null&&c.nodes_start===null&&c.first===c.last&&(c.f&Wn)===0&&(c=c.first),c!==null&&(c.parent=o,o!==null&&Ru(c,o),Re!==null&&(Re.f&Ht)!==0&&(t&mn)===0)){var f=Re;(f.effects??(f.effects=[])).push(c)}}return a}function zu(){return Re!==null&&!dr}function Iu(t){const e=kr(Ws,null,!1);return Ut(e,Rt),e.teardown=t,e}function fe(t){Pa();var e=ze.f,r=!Re&&(e&jr)!==0&&(e&Gs)===0;if(r){var s=rt;(s.e??(s.e=[])).push(t)}else return La(t)}function La(t){return kr(Ll|ca,t,!1)}function tl(t){return Pa(),kr(Ws|ca,t,!0)}function Fu(t){Gr.ensure();const e=kr(mn|Wn,t,!0);return(r={})=>new Promise(s=>{r.outro?vr(e,()=>{Xt(e),s(void 0)}):(Xt(e),s(void 0))})}function Hl(t){return kr(Ll,t,!1)}function qu(t){return kr(Il|Wn,t,!0)}function Gl(t,e=0){return kr(Ws|e,t,!0)}function $(t,e=[],r=[]){Su(e,r,s=>{kr(Ws,()=>t(...s.map(l)),!0)})}function yn(t,e=0){var r=kr(hn|e,t,!0);return r}function zt(t,e=!0){return kr(jr|Wn,t,!0,e)}function Ra(t){var e=t.teardown;if(e!==null){const r=xn,s=Re;Da(!0),It(null);try{e.call(null)}finally{Da(r),It(s)}}}function za(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){const o=r.ac;o!==null&&Kn(()=>{o.abort(Fl)});var s=r.next;(r.f&mn)!==0?r.parent=null:Xt(r,e),r=s}}function Ou(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&jr)===0&&Xt(e),e=r}}function Xt(t,e=!0){var r=!1;(e||(t.f&qc)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Ia(t.nodes_start,t.nodes_end),r=!0),za(t,e&&!r),nl(t,0),Ut(t,gn);var s=t.transitions;if(s!==null)for(const a of s)a.stop();Ra(t);var o=t.parent;o!==null&&o.first!==null&&Fa(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Ia(t,e){for(;t!==null;){var r=t===e?null:xs(t);t.remove(),t=r}}function Fa(t){var e=t.parent,r=t.prev,s=t.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===t&&(e.first=s),e.last===t&&(e.last=r))}function vr(t,e){var r=[];Xl(t,r,!0),qa(r,()=>{Xt(t),e&&e()})}function qa(t,e){var r=t.length;if(r>0){var s=()=>--r||e();for(var o of t)o.out(s)}else e()}function Xl(t,e,r){if((t.f&fr)===0){if(t.f^=fr,t.transitions!==null)for(const c of t.transitions)(c.is_global||r)&&e.push(c);for(var s=t.first;s!==null;){var o=s.next,a=(s.f&pn)!==0||(s.f&jr)!==0;Xl(s,e,a?r:!1),s=o}}}function ks(t){Oa(t,!0)}function Oa(t,e){if((t.f&fr)!==0){t.f^=fr,(t.f&Rt)===0&&(Ut(t,tr),Xn(t));for(var r=t.first;r!==null;){var s=r.next,o=(r.f&pn)!==0||(r.f&jr)!==0;Oa(r,o?e:!1),r=s}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let Jn=!1;function Ba(t){Jn=t}let xn=!1;function Da(t){xn=t}let Re=null,dr=!1;function It(t){Re=t}let ze=null;function rr(t){ze=t}let Ot=null;function Va(t){Re!==null&&(Ot===null?Ot=[t]:Ot.push(t))}let Bt=null,Kt=0,nr=null;function Bu(t){nr=t}let Ya=1,Es=0,kn=Es;function Ua(t){kn=t}let Jr=!1;function Wa(){return++Ya}function rl(t){var h;var e=t.f;if((e&tr)!==0)return!0;if((e&Vr)!==0){var r=t.deps,s=(e&er)!==0;if(r!==null){var o,a,c=(e&Hs)!==0,f=s&&ze!==null&&!Jr,u=r.length;if((c||f)&&(ze===null||(ze.f&gn)===0)){var v=t,d=v.parent;for(o=0;o<u;o++)a=r[o],(c||!((h=a==null?void 0:a.reactions)!=null&&h.includes(v)))&&(a.reactions??(a.reactions=[])).push(v);c&&(v.f^=Hs),f&&d!==null&&(d.f&er)===0&&(v.f^=er)}for(o=0;o<u;o++)if(a=r[o],rl(a)&&Sa(a),a.wv>t.wv)return!0}(!s||ze!==null&&!Jr)&&Ut(t,Rt)}return!1}function Ha(t,e,r=!0){var s=t.reactions;if(s!==null&&!(Ot!=null&&Ot.includes(t)))for(var o=0;o<s.length;o++){var a=s[o];(a.f&Ht)!==0?Ha(a,e,!1):e===a&&(r?Ut(a,tr):(a.f&Rt)!==0&&Ut(a,Vr),Xn(a))}}function Ga(t){var _;var e=Bt,r=Kt,s=nr,o=Re,a=Jr,c=Ot,f=rt,u=dr,v=kn,d=t.f;Bt=null,Kt=0,nr=null,Jr=(d&er)!==0&&(dr||!Jn||Re===null),Re=(d&(jr|mn))===0?t:null,Ot=null,Ur(t.ctx),dr=!1,kn=++Es,t.ac!==null&&(Kn(()=>{t.ac.abort(Fl)}),t.ac=null);try{t.f|=zl;var h=t.fn,m=h(),g=t.deps;if(Bt!==null){var p;if(nl(t,Kt),g!==null&&Kt>0)for(g.length=Kt+Bt.length,p=0;p<Bt.length;p++)g[Kt+p]=Bt[p];else t.deps=g=Bt;if(!Jr||(d&Ht)!==0&&t.reactions!==null)for(p=Kt;p<g.length;p++)((_=g[p]).reactions??(_.reactions=[])).push(t)}else g!==null&&Kt<g.length&&(nl(t,Kt),g.length=Kt);if(_n()&&nr!==null&&!dr&&g!==null&&(t.f&(Ht|Vr|tr))===0)for(p=0;p<nr.length;p++)Ha(nr[p],t);return o!==null&&o!==t&&(Es++,nr!==null&&(s===null?s=nr:s.push(...nr))),(t.f&bn)!==0&&(t.f^=bn),m}catch(b){return _a(b)}finally{t.f^=zl,Bt=e,Kt=r,nr=s,Re=o,Jr=a,Ot=c,Ur(f),dr=u,kn=v}}function Du(t,e){let r=e.reactions;if(r!==null){var s=Lc.call(r,t);if(s!==-1){var o=r.length-1;o===0?r=e.reactions=null:(r[s]=r[o],r.pop())}}r===null&&(e.f&Ht)!==0&&(Bt===null||!Bt.includes(e))&&(Ut(e,Vr),(e.f&(er|Hs))===0&&(e.f^=Hs),Aa(e),nl(e,0))}function nl(t,e){var r=t.deps;if(r!==null)for(var s=e;s<r.length;s++)Du(t,r[s])}function Qn(t){var e=t.f;if((e&gn)===0){Ut(t,Rt);var r=ze,s=Jn;ze=t,Jn=!0;try{(e&hn)!==0?Ou(t):za(t),Ra(t);var o=Ga(t);t.teardown=typeof o=="function"?o:null,t.wv=Ya;var a;wt&&fu&&(t.f&tr)!==0&&t.deps}finally{Jn=s,ze=r}}}async function Vu(){await Promise.resolve(),ya()}function l(t){var e=t.f,r=(e&Ht)!==0;if(Re!==null&&!dr){var s=ze!==null&&(ze.f&gn)!==0;if(!s&&!(Ot!=null&&Ot.includes(t))){var o=Re.deps;if((Re.f&zl)!==0)t.rv<Es&&(t.rv=Es,Bt===null&&o!==null&&o[Kt]===t?Kt++:Bt===null?Bt=[t]:(!Jr||!Bt.includes(t))&&Bt.push(t));else{(Re.deps??(Re.deps=[])).push(t);var a=t.reactions;a===null?t.reactions=[Re]:a.includes(Re)||a.push(Re)}}}else if(r&&t.deps===null&&t.effects===null){var c=t,f=c.parent;f!==null&&(f.f&er)===0&&(c.f^=er)}if(xn){if(Xr.has(t))return Xr.get(t);if(r){c=t;var u=c.v;return((c.f&Rt)===0&&c.reactions!==null||Xa(c))&&(u=Yl(c)),Xr.set(c,u),u}}else r&&(c=t,rl(c)&&Sa(c));if((t.f&bn)!==0)throw t.v;return t.v}function Xa(t){if(t.v===yt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Xr.has(e)||(e.f&Ht)!==0&&Xa(e))return!0;return!1}function hr(t){var e=dr;try{return dr=!0,t()}finally{dr=e}}const Yu=-7169;function Ut(t,e){t.f=t.f&Yu|e}function Uu(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Yr in t)Kl(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&Yr in r&&Kl(r)}}}function Kl(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let s in t)try{Kl(t[s],e)}catch{}const r=Ys(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=la(r);for(let o in s){const a=s[o].get;if(a)try{a.call(t)}catch{}}}}}const Wu=["touchstart","touchmove"];function Hu(t){return Wu.includes(t)}const Ka=new Set,Jl=new Set;function Gu(t,e,r,s={}){function o(a){if(s.capture||As.call(e,a),!a.cancelBubble)return Kn(()=>r==null?void 0:r.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Hr(()=>{e.addEventListener(t,o,s)}):e.addEventListener(t,o,s),o}function En(t,e,r,s,o){var a={capture:s,passive:o},c=Gu(t,e,r,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Iu(()=>{e.removeEventListener(t,c,a)})}function vt(t){for(var e=0;e<t.length;e++)Ka.add(t[e]);for(var r of Jl)r(t)}let Ja=null;function As(t){var k;var e=this,r=e.ownerDocument,s=t.type,o=((k=t.composedPath)==null?void 0:k.call(t))||[],a=o[0]||t.target;Ja=t;var c=0,f=Ja===t&&t.__root;if(f){var u=o.indexOf(f);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var v=o.indexOf(e);if(v===-1)return;u<=v&&(c=u)}if(a=o[c]||t.target,a!==e){Tl(t,"currentTarget",{configurable:!0,get(){return a||r}});var d=Re,h=ze;It(null),rr(null);try{for(var m,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var _=a["__"+s];if(_!=null&&(!a.disabled||t.target===a))if(dn(_)){var[b,...w]=_;b.apply(a,[t,...w])}else _.call(a,t)}catch(E){m?g.push(E):m=E}if(t.cancelBubble||p===e||p===null)break;a=p}if(m){for(let E of g)queueMicrotask(()=>{throw E});throw m}}finally{t.__root=e,delete t.currentTarget,It(d),rr(h)}}}function Ql(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function An(t,e){var r=ze;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function H(t,e){var r=(e&da)!==0,s=(e&ou)!==0,o,a=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ql(a?t:"<!>"+t),r||(o=Gt(o)));var c=s||Na?document.importNode(o,!0):o.cloneNode(!0);if(r){var f=Gt(c),u=c.lastChild;An(f,u)}else An(c,c);return c}}function Xu(t,e,r="svg"){var s=!t.startsWith("<!>"),o=(e&da)!==0,a=`<${r}>${s?t:"<!>"+t}</${r}>`,c;return()=>{if(!c){var f=Ql(a),u=Gt(f);if(o)for(c=document.createDocumentFragment();Gt(u);)c.appendChild(Gt(u));else c=Gt(u)}var v=c.cloneNode(!0);if(o){var d=Gt(v),h=v.lastChild;An(d,h)}else An(v,v);return v}}function ye(t,e){return Xu(t,e,"svg")}function Ku(t=""){{var e=Kr(t+"");return An(e,e),e}}function he(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Kr();return t.append(e,r),An(e,r),t}function M(t,e){t!==null&&t.before(e)}let Zl=!0;function ve(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function Ju(t,e){return Qu(t,e)}const Zn=new Map;function Qu(t,{target:e,anchor:r,props:s={},events:o,context:a,intro:c=!0}){ju();var f=new Set,u=h=>{for(var m=0;m<h.length;m++){var g=h[m];if(!f.has(g)){f.add(g);var p=Hu(g);e.addEventListener(g,As,{passive:p});var _=Zn.get(g);_===void 0?(document.addEventListener(g,As,{passive:p}),Zn.set(g,1)):Zn.set(g,_+1)}}};u(jl(Ka)),Jl.add(u);var v=void 0,d=Fu(()=>{var h=r??e.appendChild(Kr());return ku(h,{pending:()=>{}},m=>{if(a){me({});var g=rt;g.c=a}o&&(s.$$events=o),Zl=c,v=t(m,s)||{},Zl=!0,a&&ge()}),()=>{var p;for(var m of f){e.removeEventListener(m,As);var g=Zn.get(m);--g===0?(document.removeEventListener(m,As),Zn.delete(m)):Zn.set(m,g)}Jl.delete(u),h!==r&&((p=h.parentNode)==null||p.removeChild(h))}});return Zu.set(v,d),v}let Zu=new WeakMap;const $l=0,sl=1,eo=2;function $u(t,e,r,s,o){var a=t,c=_n(),f=rt,u=yt,v,d,h,m=c?Pr(void 0):Ul(void 0,!1,!1),g=c?Pr(void 0):Ul(void 0,!1,!1),p=!1;function _(w,k){p=!0,k&&(rr(b),It(b),Ur(f));try{w===$l&&r&&(v?ks(v):v=zt(()=>r(a))),w===eo&&o&&(h?ks(h):h=zt(()=>o(a,g))),w!==$l&&v&&vr(v,()=>v=null),w!==sl&&d&&vr(d,()=>d=null),w!==eo&&h&&vr(h,()=>h=null)}finally{k&&(Ur(null),It(null),rr(null),ya())}}var b=yn(()=>{if(u!==(u=e())){if(zc(u)){var w=u;p=!1,w.then(k=>{w===u&&(Lr(m,k),_(sl,!0))},k=>{if(w===u&&(Lr(g,k),_(eo,!0),!o))throw g.v}),Hr(()=>{p||_($l,!0)})}else Lr(m,u),_(sl,!1);return()=>u=yt}})}function D(t,e,r=!1){var s=t,o=null,a=null,c=yt,f=r?pn:0,u=!1;const v=(g,p=!0)=>{u=!0,m(p,g)};var d=null;function h(){d!==null&&(d.lastChild.remove(),s.before(d),d=null);var g=c?o:a,p=c?a:o;g&&ks(g),p&&vr(p,()=>{c?a=null:o=null})}const m=(g,p)=>{if(c!==(c=g)){var _=el(),b=s;if(_&&(d=document.createDocumentFragment(),d.append(b=Kr())),c?o??(o=p&&zt(()=>p(b))):a??(a=p&&zt(()=>p(b))),_){var w=Je,k=c?o:a,E=c?a:o;k&&w.skipped_effects.delete(k),E&&w.skipped_effects.add(E),w.add_callback(h)}else h()}};yn(()=>{u=!1,e(v),u||m(null,null)},f)}function Sn(t,e,r){var s=t,o=yt,a,c,f=null,u=_n()?uu:ma;function v(){a&&vr(a),f!==null&&(f.lastChild.remove(),s.before(f),f=null),a=c}yn(()=>{if(u(o,o=e())){var d=s,h=el();h&&(f=document.createDocumentFragment(),f.append(d=Kr())),c=zt(()=>r(d)),h?Je.add_callback(v):v()}})}function lt(t,e){return e}function ef(t,e,r){for(var s=t.items,o=[],a=e.length,c=0;c<a;c++)Xl(e[c].e,o,!0);var f=a>0&&o.length===0&&r!==null;if(f){var u=r.parentNode;Tu(u),u.append(r),s.clear(),Er(t,e[0].prev,e[a-1].next)}qa(o,()=>{for(var v=0;v<a;v++){var d=e[v];f||(s.delete(d.k),Er(t,d.prev,d.next)),Xt(d.e,!f)}})}function nt(t,e,r,s,o,a=null){var c=t,f={flags:e,items:new Map,first:null},u=(e&va)!==0;if(u){var v=t;c=v.appendChild(Kr())}var d=null,h=!1,m=new Map,g=Vl(()=>{var w=r();return dn(w)?w:w==null?[]:jl(w)}),p,_;function b(){tf(_,p,f,m,c,o,e,s,r),a!==null&&(p.length===0?d?ks(d):d=zt(()=>a(c)):d!==null&&vr(d,()=>{d=null}))}yn(()=>{_??(_=ze),p=l(g);var w=p.length;if(!(h&&w===0)){h=w===0;var k,E,y,A;if(el()){var S=new Set,j=Je;for(E=0;E<w;E+=1){y=p[E],A=s(y,E);var z=f.items.get(A)??m.get(A);z?(e&(Xs|Ks))!==0&&Qa(z,y,E,e):(k=Za(null,f,null,null,y,A,E,o,e,r,!0),m.set(A,k)),S.add(A)}for(const[T,B]of f.items)S.has(T)||j.skipped_effects.add(B.e);j.add_callback(b)}else b();l(g)}})}function tf(t,e,r,s,o,a,c,f,u){var Q,se,le,ie;var v=(c&Jc)!==0,d=(c&(Xs|Ks))!==0,h=e.length,m=r.items,g=r.first,p=g,_,b=null,w,k=[],E=[],y,A,S,j;if(v)for(j=0;j<h;j+=1)y=e[j],A=f(y,j),S=m.get(A),S!==void 0&&((Q=S.a)==null||Q.measure(),(w??(w=new Set)).add(S));for(j=0;j<h;j+=1){if(y=e[j],A=f(y,j),S=m.get(A),S===void 0){var z=s.get(A);if(z!==void 0){s.delete(A),m.set(A,z);var T=b?b.next:p;Er(r,b,z),Er(r,z,T),to(z,T,o),b=z}else{var B=p?p.e.nodes_start:o;b=Za(B,r,b,b===null?r.first:b.next,y,A,j,a,c,u)}m.set(A,b),k=[],E=[],p=b.next;continue}if(d&&Qa(S,y,j,c),(S.e.f&fr)!==0&&(ks(S.e),v&&((se=S.a)==null||se.unfix(),(w??(w=new Set)).delete(S))),S!==p){if(_!==void 0&&_.has(S)){if(k.length<E.length){var C=E[0],q;b=C.prev;var Y=k[0],V=k[k.length-1];for(q=0;q<k.length;q+=1)to(k[q],C,o);for(q=0;q<E.length;q+=1)_.delete(E[q]);Er(r,Y.prev,V.next),Er(r,b,Y),Er(r,V,C),p=C,b=V,j-=1,k=[],E=[]}else _.delete(S),to(S,p,o),Er(r,S.prev,S.next),Er(r,S,b===null?r.first:b.next),Er(r,b,S),b=S;continue}for(k=[],E=[];p!==null&&p.k!==A;)(p.e.f&fr)===0&&(_??(_=new Set)).add(p),E.push(p),p=p.next;if(p===null)continue;S=p}k.push(S),b=S,p=S.next}if(p!==null||_!==void 0){for(var R=_===void 0?[]:jl(_);p!==null;)(p.e.f&fr)===0&&R.push(p),p=p.next;var U=R.length;if(U>0){var Z=(c&va)!==0&&h===0?o:null;if(v){for(j=0;j<U;j+=1)(le=R[j].a)==null||le.measure();for(j=0;j<U;j+=1)(ie=R[j].a)==null||ie.fix()}ef(r,R,Z)}}v&&Hr(()=>{var ce;if(w!==void 0)for(S of w)(ce=S.a)==null||ce.apply()}),t.first=r.first&&r.first.e,t.last=b&&b.e;for(var J of s.values())Xt(J.e);s.clear()}function Qa(t,e,r,s){(s&Xs)!==0&&Lr(t.v,e),(s&Ks)!==0?Lr(t.i,r):t.i=r}function Za(t,e,r,s,o,a,c,f,u,v,d){var h=(u&Xs)!==0,m=(u&Qc)===0,g=h?m?Ul(o,!1,!1):Pr(o):o,p=(u&Ks)===0?c:Pr(c),_={i:p,v:g,k:a,a:null,e:null,prev:r,next:s};try{if(t===null){var b=document.createDocumentFragment();b.append(t=Kr())}return _.e=zt(()=>f(t,g,p,v),cu),_.e.prev=r&&r.e,_.e.next=s&&s.e,r===null?d||(e.first=_):(r.next=_,r.e.next=_.e),s!==null&&(s.prev=_,s.e.prev=_.e),_}finally{}}function to(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,a=t.e.nodes_start;a!==null&&a!==s;){var c=xs(a);o.before(a),a=c}}function Er(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function Tt(t,e,r=!1,s=!1,o=!1){var a=t,c="";$(()=>{var f=ze;if(c!==(c=e()??"")&&(f.nodes_start!==null&&(Ia(f.nodes_start,f.nodes_end),f.nodes_start=f.nodes_end=null),c!=="")){var u=c+"";r?u=`<svg>${u}</svg>`:s&&(u=`<math>${u}</math>`);var v=Ql(u);if((r||s)&&(v=Gt(v)),An(Gt(v),v.lastChild),r||s)for(;Gt(v);)a.before(Gt(v));else a.before(v)}})}function Rr(t,e,...r){var s=t,o=jt,a;yn(()=>{o!==(o=e())&&(a&&(Xt(a),a=null),a=zt(()=>o(s,...r)))},pn)}function Ss(t,e,r){var s=t,o,a,c=null,f=null;function u(){a&&(vr(a),a=null),c&&(c.lastChild.remove(),s.before(c),c=null),a=f,f=null}yn(()=>{if(o!==(o=e())){var v=el();if(o){var d=s;v&&(c=document.createDocumentFragment(),c.append(d=Kr()),a&&Je.skipped_effects.add(a)),f=zt(()=>r(d,o))}v?Je.add_callback(u):u()}},pn)}function $a(t){var e,r,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(r=$a(t[e]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r);return s}function rf(){for(var t,e,r=0,s="",o=arguments.length;r<o;r++)(t=arguments[r])&&(e=$a(t))&&(s&&(s+=" "),s+=e);return s}function nf(t){return typeof t=="object"?rf(t):t??""}const ei=[...`
\r\f \v\uFEFF`];function sf(t,e,r){var s=t==null?"":""+t;if(e&&(s=s?s+" "+e:e),r){for(var o in r)if(r[o])s=s?s+" "+o:o;else if(s.length)for(var a=o.length,c=0;(c=s.indexOf(o,c))>=0;){var f=c+a;(c===0||ei.includes(s[c-1]))&&(f===s.length||ei.includes(s[f]))?s=(c===0?"":s.substring(0,c))+s.substring(f+1):c=f}}return s===""?null:s}function lf(t,e){return t==null?null:String(t)}function xt(t,e,r,s,o,a){var c=t.__className;if(c!==r||c===void 0){var f=sf(r,s,a);f==null?t.removeAttribute("class"):e?t.className=f:t.setAttribute("class",f),t.__className=r}else if(a&&o!==a)for(var u in a){var v=!!a[u];(o==null||v!==!!o[u])&&t.classList.toggle(u,v)}return a}function gt(t,e,r,s){var o=t.__style;if(o!==e){var a=lf(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return s}const of=Symbol("is custom element"),af=Symbol("is html");function I(t,e,r,s){var o=cf(t);o[e]!==(o[e]=r)&&(e==="loading"&&(t[Oc]=r),r==null?t.removeAttribute(e):typeof r!="string"&&uf(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function cf(t){return t.__attributes??(t.__attributes={[of]:t.nodeName.includes("-"),[af]:t.namespaceURI===au})}var ti=new Map;function uf(t){var e=t.getAttribute("is")||t.nodeName,r=ti.get(e);if(r)return r;ti.set(e,r=[]);for(var s,o=t,a=Element.prototype;a!==o;){s=la(o);for(var c in s)s[c].set&&r.push(c);o=Ys(o)}return r}const ff=()=>performance.now(),zr={tick:t=>requestAnimationFrame(t),now:()=>ff(),tasks:new Set};function ri(){const t=zr.now();zr.tasks.forEach(e=>{e.c(t)||(zr.tasks.delete(e),e.f())}),zr.tasks.size!==0&&zr.tick(ri)}function vf(t){let e;return zr.tasks.size===0&&zr.tick(ri),{promise:new Promise(r=>{zr.tasks.add(e={c:t,f:r})}),abort(){zr.tasks.delete(e)}}}function ll(t,e){Kn(()=>{t.dispatchEvent(new CustomEvent(e))})}function df(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function ni(t){const e={},r=t.split(";");for(const s of r){const[o,a]=s.split(":");if(!o||a===void 0)break;const c=df(o.trim());e[c]=a.trim()}return e}const hf=t=>t;function si(t,e,r,s){var o=(t&nu)!==0,a=(t&su)!==0,c=o&&a,f=(t&lu)!==0,u=c?"both":o?"in":"out",v,d=e.inert,h=e.style.overflow,m,g;function p(){return Kn(()=>v??(v=r()(e,(s==null?void 0:s())??{},{direction:u})))}var _={is_global:f,in(){var E;if(e.inert=d,!o){g==null||g.abort(),(E=g==null?void 0:g.reset)==null||E.call(g);return}a||m==null||m.abort(),ll(e,"introstart"),m=ro(e,p(),g,1,()=>{ll(e,"introend"),m==null||m.abort(),m=v=void 0,e.style.overflow=h})},out(E){if(!a){E==null||E(),v=void 0;return}e.inert=!0,ll(e,"outrostart"),g=ro(e,p(),m,0,()=>{ll(e,"outroend"),E==null||E()})},stop:()=>{m==null||m.abort(),g==null||g.abort()}},b=ze;if((b.transitions??(b.transitions=[])).push(_),o&&Zl){var w=f;if(!w){for(var k=b.parent;k&&(k.f&pn)!==0;)for(;(k=k.parent)&&(k.f&hn)===0;);w=!k||(k.f&Gs)!==0}w&&Hl(()=>{hr(()=>_.in())})}}function ro(t,e,r,s,o){var a=s===1;if(Un(e)){var c,f=!1;return Hr(()=>{if(!f){var b=e({direction:a?"in":"out"});c=ro(t,b,r,s,o)}}),{abort:()=>{f=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return o(),{abort:jt,deactivate:jt,reset:jt,t:()=>s};const{delay:u=0,css:v,tick:d,easing:h=hf}=e;var m=[];if(a&&r===void 0&&(d&&d(0,1),v)){var g=ni(v(0,1));m.push(g,g)}var p=()=>1-s,_=t.animate(m,{duration:u,fill:"forwards"});return _.onfinish=()=>{_.cancel();var b=(r==null?void 0:r.t())??1-s;r==null||r.abort();var w=s-b,k=e.duration*Math.abs(w),E=[];if(k>0){var y=!1;if(v)for(var A=Math.ceil(k/16.666666666666668),S=0;S<=A;S+=1){var j=b+w*h(S/A),z=ni(v(j,1-j));E.push(z),y||(y=z.overflow==="hidden")}y&&(t.style.overflow="hidden"),p=()=>{var T=_.currentTime;return b+w*h(T/k)},d&&vf(()=>{if(_.playState!=="running")return!1;var T=p();return d(T,1-T),!0})}_=t.animate(E,{duration:k,fill:"forwards"}),_.onfinish=()=>{p=()=>s,d==null||d(s,1-s),o()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=jt)},deactivate:()=>{o=jt},reset:()=>{s===0&&(d==null||d(1,0))},t:()=>p()}}function li(t,e,r=e){var s=new WeakSet;Lu(t,"input",async o=>{var a=o?t.defaultValue:t.value;if(a=no(t)?so(a):a,r(a),Je!==null&&s.add(Je),await Vu(),a!==(a=e())){var c=t.selectionStart,f=t.selectionEnd;t.value=a??"",f!==null&&(t.selectionStart=c,t.selectionEnd=Math.min(f,t.value.length))}}),hr(e)==null&&t.value&&(r(no(t)?so(t.value):t.value),Je!==null&&s.add(Je)),Gl(()=>{var o=e();if(t===document.activeElement){var a=Zs??Je;if(s.has(a))return}no(t)&&o===so(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function no(t){var e=t.type;return e==="number"||e==="range"}function so(t){return t===""?null:+t}const Al=class Al{constructor(e){Ne(this,El);Ne(this,fn,new WeakMap);Ne(this,as);Ne(this,Bs);be(this,Bs,e)}observe(e,r){var s=K(this,fn).get(e)||new Set;return s.add(r),K(this,fn).set(e,s),qt(this,El,Pc).call(this).observe(e,K(this,Bs)),()=>{var o=K(this,fn).get(e);o.delete(r),o.size===0&&(K(this,fn).delete(e),K(this,as).unobserve(e))}}};fn=new WeakMap,as=new WeakMap,Bs=new WeakMap,El=new WeakSet,Pc=function(){return K(this,as)??be(this,as,new ResizeObserver(e=>{for(var r of e){Al.entries.set(r.target,r);for(var s of K(this,fn).get(r.target)||[])s(r)}}))},ur(Al,"entries",new WeakMap);let lo=Al;var mf=new lo({box:"border-box"});function oi(t,e,r){var s=mf.observe(t,()=>r(t[e]));Hl(()=>(hr(()=>r(t[e])),s))}function ai(t,e){return t===e||(t==null?void 0:t[Yr])===e}function Cn(t={},e,r,s){return Hl(()=>{var o,a;return Gl(()=>{o=a,a=[],hr(()=>{t!==r(...a)&&(e(t,...a),o&&ai(r(...o),t)&&e(null,...o))})}),()=>{Hr(()=>{a&&ai(r(...a),t)&&e(null,...a)})}}),t}function gf(t=!1){const e=rt,r=e.l.u;if(!r)return;let s=()=>Uu(e.s);if(t){let o=0,a={};const c=ws(()=>{let f=!1;const u=e.s;for(const v in u)u[v]!==a[v]&&(a[v]=u[v],f=!0);return f&&o++,o});s=()=>l(c)}r.b.length&&tl(()=>{ii(e,s),Us(r.b)}),fe(()=>{const o=hr(()=>r.m.map(Ic));return()=>{for(const a of o)typeof a=="function"&&a()}}),r.a.length&&fe(()=>{ii(e,s),Us(r.a)})}function ii(t,e){if(t.l.s)for(const r of t.l.s)l(r);e()}let ol=!1;function pf(t){var e=ol;try{return ol=!1,[t(),ol]}finally{ol=e}}const bf={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Nn(t,e,r){return new Proxy({props:t,exclude:e},bf)}const _f={get(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Un(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(t,e,r){let s=t.props.length;for(;s--;){let o=t.props[s];Un(o)&&(o=o());const a=Dr(o,e);if(a&&a.set)return a.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let s=t.props[r];if(Un(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const o=Dr(s,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Yr||e===ua)return!1;for(let r of t.props)if(Un(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props)if(Un(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function sr(...t){return new Proxy({props:t},_f)}function O(t,e,r,s){var E;var o=!Hn||(r&$c)!==0,a=(r&tu)!==0,c=(r&ru)!==0,f=s,u=!0,v=()=>(u&&(u=!1,f=c?hr(s):s),f),d;if(a){var h=Yr in t||ua in t;d=((E=Dr(t,e))==null?void 0:E.set)??(h&&e in t?y=>t[e]=y:void 0)}var m,g=!1;a?[m,g]=pf(()=>t[e]):m=t[e],m===void 0&&s!==void 0&&(m=v(),d&&(o&&Wc(),d(m)));var p;if(o?p=()=>{var y=t[e];return y===void 0?v():(u=!0,y)}:p=()=>{var y=t[e];return y!==void 0&&(f=void 0),y===void 0?f:y},o&&(r&eu)===0)return p;if(d){var _=t.$$legacy;return(function(y,A){return arguments.length>0?((!o||!A||_||g)&&d(A?p():y),y):p()})}var b=!1,w=((r&Zc)!==0?ws:Vl)(()=>(b=!1,p()));a&&l(w);var k=ze;return(function(y,A){if(arguments.length>0){const S=A?l(w):o&&a?Me(y):y;return F(w,S),b=!0,f!==void 0&&(f=S),y}return xn&&b||(k.f&gn)!==0?w.v:l(w)})}function wf(t){rt===null&&fa(),Hn&&rt.l!==null?yf(rt).m.push(t):fe(()=>{const e=hr(t);if(typeof e=="function")return e})}function yf(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const xf="5";typeof window<"u"&&((Cc=window.__svelte??(window.__svelte={})).v??(Cc.v=new Set)).add(xf),vu();function kf(t){return Cs(t,.5)}function Ef(t){return Cs(t,.75)-Cs(t,.25)}function Cs(t,e){if(qe(t))return Cs(t.v,e);if(qe(e))return Cs(t,e.v);const r=t.length;if(Array.isArray(e)||(e=[e]),!po(e[0])||Ir(e)<0||Ar(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(c,f){const u=(r-1)*f+1,v=Math.floor(u),d=Math.ceil(u);return c[v-1]+(c[d-1]-c[v-1])*(u-Math.floor(u))}const o=yo(t),a=e.map(c=>s(o,c));return e.length==1?a[0]:ht(a)}function ci(t,e){qe(t)&&ci(t.v,e);const r=Qr(t);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const s=(r[1]-r[0])/e;return De.seq(r[0],r[1],s)}function ui(t){if(qe(t))return ui(t.v);const e=new De.valuesConstructor(t.length-1);for(let r=0;r<t.length-1;r++)e[r]=t[r+1]-t[r];return new De(e)}function oo(t,e){if(qe(t))return oo(t.v,e);e===void 0&&(e=.1);const r=Qr(t),s=(r[1]-r[0])*e;return[r[0]-s,r[1]+s]}function Qr(t){if(qe(t))return Qr(t.v);let e=t[0],r=t[0];for(let s=1;s<t.length;s++)t[s]<e&&(e=t[s]),t[s]>r&&(r=t[s]);return[e,r]}function al(t,e){return qe(t)?al(t.v,e):Math.sqrt(il(t,e))}function il(t,e){if(e===void 0&&(e=!1),qe(t))return il(t.v);const r=Mn(t);let s=0;for(let o=0;o<t.length;o++){const a=t[o]-r;s=s+a*a}return s/(e?t.length:t.length-1)}function Mn(t){return qe(t)?Mn(t.v):fi(t)/t.length}function fi(t){if(qe(t))return fi(t.v);let e=0;for(let r=0;r<t.length;r++)e=e+t[r];return e}function vi(t){if(qe(t))return vi(t.v);let e=1;for(let r=0;r<t.length;r++)e=e*t[r];return e}function Ir(t){return qe(t)||pr(t)?t.v[ao(t.v)-1]:t[ao(t)-1]}function ao(t){if(qe(t)||pr(t))return ao(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]<r&&(e=s,r=t[s-1]);return e}function Ar(t){return qe(t)||pr(t)?t.v[io(t.v)-1]:t[io(t)-1]}function io(t){if(qe(t)||pr(t))return io(t.v);let e=1,r=t[0];for(let s=2;s<=t.length;s++)t[s-1]>r&&(e=s,r=t[s-1]);return e}const co=30,Af=1e-7,Sf=1e-7,di=1e-13,hi=1e3,Cf=100;function mi(t,e,r,s,o){s===void 0&&(s=hi),r===void 0&&(r=di),o===void 0&&(o=Cf);let a=r,c=s,f=(c-a)/o;for(let u=0;u<o;u++){let v,d;for(let g=0;g<o;g++){v=a+g*f,d=a+(g+1)*f;const p=e(v),_=e(d);if(p<=t&&_>=t)break}const h=(v+d)/2,m=e(h);if(Math.abs(m-t)<Af||(a=v,c=d,f=(c-a)/o,f/c<Sf))return h}return(a+c)/2}function gi(t,e=0,r=1){let s=De.zeros(t);for(let o=0;o<t;o++)s.v[o]=e+Math.random()*(r-e);return s}function pi(t,e=0,r=1){let s=De.zeros(t);for(let o=0;o<t;o++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();s.v[o]=a*Math.sin(c)*r+e}return s}function uo(t,e=0,r=1){if(qe(t))return t.apply(o=>uo(o,e,r));const s=1/(Math.sqrt(2)*r);return .5*(1+Mf((t-e)*s))}function fo(t,e=0,r=1){if(qe(t))return t.apply(Y=>fo(Y,e,r));if(e!==0||r!==1)return fo(t)*r+e;if(t<0||t>1)throw Error('Parameter "p" must be between 0 and 1.');if(t<1e-10)return-1/0;if(t>.9999999999)return 1/0;const s=.425,o=5,a=.180625,c=1.6,f=3.3871327179,u=5.0434271938*10,v=1.5929113202*100,d=5.910937472*10,h=1.7895169469*10,m=7.8757757664*10,g=6.71875636*10,p=1.4234372777,_=2.75681539,b=1.3067284816,w=1.7023821103*.1,k=7.370016425*.1,E=1.2021132975*.1,y=6.657905115,A=3.081226386,S=4.2868294337*.1,j=1.7337203997*.01,z=2.4197894225*.1,T=1.2258202635*.01,B=t-.5;let C;if(Math.abs(B)<=s)return C=a-B*B,B*(((d*C+v)*C+u)*C+f)/(((g*C+m)*C+h)*C+1);C=B<0?t:1-t,C=Math.sqrt(-Math.log(C));let q;return C<=o?(C=C-c,q=(((w*C+b)*C+_)*C+p)/((E*C+k)*C+1)):(C=C-o,q=((j*C+S)*C+A+y)/((T*C+z)*C+1)),B<0?-q:q}function vo(t,e,r){if(r<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(t))return vo(ht(t),e,r);if(qe(t))return t.apply(s=>vo(s,e,r));if(t<=0)return 0;if(r<=0&&ML_ERR_return_NAN,r==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(t<1)return 0;if(t==1)return .5;if(t>1)return 1}return cl(t*e,e)}return e==Number.POSITIVE_INFINITY?1-cl(r/t,r):e*t>r?1-ul(r/(r+e*t),r/2,e/2):ul(e*t/(r+e*t),e/2,r/2)}function bi(t,e,r){if(t===0)return 0;if(t===1)return Inf;if(r<=0)return NaN;let s=hi,o=di;if(t>.9997&&r===1?(s=1e7,o=6e5,t=.9997):t>.9992&&r===1?(s=1e7,o=6e5):t>.997&&r===1?(s=1e6,o=45e3):t>.992&&r===1?(s=1e5,o=5e3):t>.97&&r===1&&(s=1e4,o=400),Array.isArray(t))return bi(ht(t),e,r);const a=f=>vo(f,e,r);function c(f,u,v){return f===0?0:f===1?Inf:u===0?NaN:v===0?NaN:mi(f,a,o,s)}return qe(t)?t.apply(c,e,r):c(t,e,r)}function cl(t,e){if(Array.isArray(t))return cl(ht(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(s);function a(u){if(u===0)return 0;if(e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30)return 1;const v=u/e,d=Math.pow(v,1/6)-.5*Math.pow(v,1/3)+1/3*Math.pow(v,1/2);return uo(d,r,o)}function c(u){return u===0?0:e===0||e>100&&u>e*2||e>50&&u>e*3||e>10&&u>e*5||e>5&&u>e*8||u>e*30?1:Nf(u/2,e/2)/Ns(e/2)}const f=e>co?a:c;return qe(t)?t.apply(f):f(t)}function jn(t,e){if(Array.isArray(t))return jn(ht(t),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(s);function a(u){if(u===0)return 0;if(u===1)return Inf;if(e===0)return 0;const v=fo(u,r,o),d=Math.pow(Math.sqrt(36*v*v-30*v+13)/4+(3*v-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function c(u){return u===0?0:u===1?Inf:e===0?0:mi(u,d=>cl(d,e),0,co*10)}const f=e>co?a:c;return qe(t)?t.apply(f):f(t)}function ul(t,e,r){if(Array.isArray(t))return ul(ht(t),e,r);if(qe(t))return t.apply(o=>ul(o,e,r));if(t<=0)return 0;if(t>=1)return 1;if(e==0||r==0||!Number.isFinite(e)||!Number.isFinite(r))return e==0&&r==0?.5:e==0||e/r==0?1:r==0||r/e==0||t<.5?0:1;const s=.5-t+.5;return Df(e,r,t,s)}function Ns(t){if(qe(t))return t.apply(Ns);if(t<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(t<.5)return Math.PI/(Math.sin(Math.PI*t)+Ns(1-t));t=t-1;let r=.9999999999998099;for(let o=0;o<e.length;o++)r=r+e[o]/(t+o+1);const s=t+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,t+.5)*Math.exp(-s)*r}function Nf(t,e){let o=0;for(let a=0;a<1e4;a++){const c=Math.pow(t,a)/Ns(e+a+1);if(isNaN(c)||c<1e-18)break;o+=c}return Math.pow(t,e)*Ns(e)*Math.exp(-t)*o}function Mf(t){const e=t>=0?1:-1;t=Math.abs(t);const r=.254829592,s=-.284496736,o=1.421413741,a=-1.453152027,c=1.061405429,u=1/(1+.3275911*t),v=1-((((c*u+a)*u+o)*u+s)*u+r)*u*Math.exp(-t*t);return e*v}function _i(t,e){const r=.564189583547756,s=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],f=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],u=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let v,d,h,m,g=Math.abs(e);if(g<=.5)return d=e*e,m=(((s[0]*d+s[1])*d+s[2])*d+s[3])*d+s[4]+1,h=((o[0]*d+o[1])*d+o[2])*d+1,v=.5-e*(m/h)+.5,v=Math.exp(d)*v,v;if(g<=4)m=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],h=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],v=m/h;else{if(e<=-5.6)return v=2,v=Math.exp(e*e)*2,v;d=1/(e*e),m=(((f[0]*d+f[1])*d+f[2])*d+f[3])*d+f[4],h=(((u[0]*d+u[1])*d+u[2])*d+u[3])*d+1,v=(r-d*m/h)/g}return e<0&&(v=Math.exp(e*e)*2-v),v}function wi(t,e){let r=t+e-2;return r<=.25?lr(r+1):r<=1.25?lr(r)+$r(r):lr(r-1)+Math.log(r*(r+1))}function fl(t,e){const r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,v,d,h,m,g,p,_,b,w,k,E,y,A,S;return d=Math.min(t,e),h=Math.max(t,e),g=d/h,m=g/(g+1),b=1/(g+1),E=b*b,w=b+E+1,k=b+E*w+1,y=b+E*k+1,A=b+E*y+1,S=b+E*A+1,v=1/h,p=v*v,_=((((f*S*p+c*A)*p+a*y)*p+o*k)*p+s*w)*p+r,_*=m/h,v=1/d,p=v*v,u=(((((f*p+c)*p+a)*p+o)*p+s)*p+r)/d+_,u}function dt(t){let e,r,s,o,a;if(r=t,e=t-.5,e>0&&(r=e-.5),r<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],f=.273076135303957,u=.0559398236957378;return a=(((((((c[8]*r+c[7])*r+c[6])*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(u*r+f)*r+1,s=a/o,e>0?r*s/t:t*(s+.5+.5)}else{if(r==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],f=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*r+c[5])*r+c[4])*r+c[3])*r+c[2])*r+c[1])*r+c[0],o=(((f[4]*r+f[3])*r+f[2])*r+f[1])*r+1,s=a/o,e>0?r/t*(s-.5-.5):t*s}}}function jf(t,e,r){let s,o,a,c;if(t<-1.1||t>1.1)return Number.NaN;c=t*2,a=o=0,s=0;for(let f=1;f<=r;f++)a=o,o=s,s=c*o-a+e[r-f];return(s-a)*.5}function yi(t){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],r=22,s=-.999999985;if(t==0)return 0;if(t==-1)return Number.NEGATIVE_INFINITY;if(t<-1)return Number.NaN;if(Math.abs(t)<=.375)return Math.abs(t)<.5*Number.EPSILON?t:0<t&&t<1e-8||-1e-9<t&&t<0?t*(1-.5*t):t*(1-t*jf(t/.375,e,r));if(t<s)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+t)}function Zr(t,e){const r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;let u,v,d,h,m,g,p,_,b,w,k,E,y,A;return t>e?(d=e/t,u=1/(d+1),_=d/(d+1),v=t+(e-.5)):(d=t/e,u=d/(d+1),_=1/(d+1),v=e+(t-.5)),k=_*_,b=_+k+1,w=_+k*b+1,E=_+k*w+1,y=_+k*E+1,A=_+k*y+1,h=1/(e*e),p=((((f*A*h+c*y)*h+a*E)*h+o*w)*h+s*b)*h+r,p*=u/e,m=v*$r(t/e),g=t*(Math.log(e)-1),m>g?p-g-m:p-m-g}function lr(t){if(t<.6){const p=((((((-.00271935708322958*t+-.0673562214325671)*t+-.402055799310489)*t+-.780427615533591)*t+-.168860593646662)*t+.844203922187225)*t+.577215664901533)/((((((.000667465618796164*t+.0325038868253937)*t+.361951990101499)*t+1.56875193295039)*t+3.12755088914843)*t+2.88743195473681)*t+1);return-t*p}else{const e=.422784335098467,r=.848044614534529,s=.565221050691933,o=.156513060486551,a=.017050248402265,c=.000497958207639485,f=1.24313399877507,u=.548042109832463,v=.10155218743983,d=.00713309612391,h=.000116165475989616,m=t-.5-.5,g=(((((c*m+a)*m+o)*m+s)*m+r)*m+e)/(((((h*m+d)*m+v)*m+u)*m+f)*m+1);return m*g}}function mr(t){const e=.418938533204673,r=.0833333333333333,s=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,f=-.00165322962780713;if(t<=.8)return lr(t)-Math.log(t);if(t<=2.25)return lr(t-.5-.5);if(t<10){let d=Math.round(t-1.25),h=t,m=1;for(let g=1;g<=d;++g)h+=-1,m*=h;return lr(h-1)+Math.log(m)}let u=1/(t*t),v=(((((f*u+c)*u+a)*u+o)*u+s)*u+r)/t;return e+v+(t-.5)*(Math.log(t)-1)}function ho(t,e){const r=.918938533204673;let s=Math.min(t,e),o=Math.max(t,e);function a(c,f,u){let v=Math.round(u-1),d=1;for(let h=1;h<=v;++h)u+=-1,d*=u/(f+u);return c+Math.log(d)+(mr(f)+(mr(u)-wi(f,u)))}if(s<8){if(s<1)return o<8?mr(s)+(mr(o)-mr(s+o)):mr(s)+Zr(s,o);let c;if(s<2)return o<=2?mr(s)+mr(o)-wi(s,o):o<8?(c=0,a(c,s,o)):mr(s)+Zr(s,o);if(o<=1e3){let f=Math.round(s-1);c=1;for(let u=1;u<=f;++u){s+=-1;let v=s/o;c*=v/(v+1)}return c=Math.log(c),o>=8?c+mr(s)+Zr(s,o):a(c,s,o)}else{let f=Math.round(s-1);c=1;for(let u=1;u<=f;++u)s+=-1,c*=s/(s/o+1);return log(c)-f*log(o)+(mr(s)+Zr(s,o))}}else{let c=fl(s,o),f=s/o,u=-(s-.5)*Math.log(f/(f+1)),v=o*$r(f);return u>v?Math.log(o)*-.5+r+c-v-u:Math.log(o)*-.5+r+c-u-v}}function xi(t){return(t==0?1024:-300)*.69314718055995*.99999}function $n(t){const e=.0566749439387324,r=.0456512608815524,s=.333333333333333,o=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,f=.354508718369557;let u,v,d,h,m;return t<-.39||t>.57?(h=t+.5+.5,t-Math.log(h)):(t<-.18?(u=t+.3,u/=.7,m=e-u*.3):t>.18?(u=t*.75-.25,m=r+u/3):(u=t,m=0),v=u/(u+2),d=v*v,h=((a*d+o)*d+s)/((f*d+c)*d+1),d*2*(1/(1-v)-v*h)+m)}function $r(t){if(Math.abs(t)>.375)return Math.log(1+t);const e=-1.29418923021993,r=.405303492862024,s=-.0178874546012214,o=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let f=t/(t+2),u=f*f,v=(((s*u+r)*u+e)*u+1)/(((c*u+a)*u+o)*u+1);return f*2*v}function Tf(t){const e=.564189583547756,r=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],s=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,v,d,h,m;if(d=Math.abs(t),d<=.5)return u=t*t,m=(((r[0]*u+r[1])*u+r[2])*u+r[3])*u+r[4]+1,h=((s[0]*u+s[1])*u+s[2])*u+1,t*(m/h);if(d<=4){m=((((((o[0]*d+o[1])*d+o[2])*d+o[3])*d+o[4])*d+o[5])*d+o[6])*d+o[7],h=((((((a[0]*d+a[1])*d+a[2])*d+a[3])*d+a[4])*d+a[5])*d+a[6])*d+a[7];let p=.5-Math.exp(-t*t)*m/h+.5;return t<0?-p:p}if(d>=5.8)return t>0?1:-1;v=t*t,u=1/v,m=(((c[0]*u+c[1])*u+c[2])*u+c[3])*u+c[4],h=(((f[0]*u+f[1])*u+f[2])*u+f[3])*u+1,u=(e-m/(v*h))/d;let g=.5-Math.exp(-v)*u+.5;return t<0?-g:g}function Pf(t){const e=914041914819518e-24,r=.0238082361044469,s=-.499999999085958,o=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(t)<=.15)return t*(((r*t+e)*t+1)/((((c*t+a)*t+o)*t+s)*t+1));{let f=Math.exp(t);return t>0?f*(.5-1/f+.5):f-.5-.5}}function Ms(t,e){let r;if(e>0){if(t>0||(r=t+e,r<0))return Math.exp(t)*Math.exp(e)}else if(t<0||(r=t+e,r>0))return Math.exp(t)*Math.exp(e);return Math.exp(r)}function Lf(t){const e=.785398163397448,r=1.4616321449683622,s=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],o=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let f,u,v,d,h,m,g,p,_,b,w,k,E;if(w=Number.MAX_SAFE_INTEGER,d=.5/(.5*Number.EPSILON),w>d&&(w=d),E=1e-9,p=0,t<.5){if(fabs(t)<=E){if(t==0)return 0;p=-1/t}else{if(h=-t,_=e,h<=0&&(h=-h,_=-_),h>=w)return 0;if(v=Math.round(h),h-=v,v=Math.round(h*4),h=(h-v*.25)*4,u=v/2,u+u!=v&&(h=1-h),m=e*h,f=u/2,f+f!=u&&(_=-_),u=(v+1)/2,f=u/2,f+=f,f==u){if(m==0)return 0;p=_*(cos(m)/sin(m)*4)}else p=_*(sin(m)/cos(m)*4)}t=1-t}if(t<=3){g=t,k=s[0]*t;for(let y=1;y<=5;++y)g=(g+o[y-1])*t,k=(k+s[y])*t;return g=(k+s[6])/(g+o[5]),b=t-r,g*b+p}if(t<w){h=1/(t*t),g=h,k=a[0]*h;for(let y=1;y<=3;++y)g=(g+c[y-1])*h,k=(k+a[y])*h;p=k/(g+c[3])-.5/t+p}return p+log(t)}function Rf(t,e,r,s){let o,a,c,f,u,v;if(t>s*.001){if(f=t*Math.log(r),f<Math.exparg(1))return 0;o=Math.exp(f)}else o=1;for(o*=e/t,v=s/t,u=t+1,f=r,c=f/u,u+=1,f=r*f,a=f/u,c+=a;Math.abs(r)>v;)u+=1,f=r*f,a=f/u,c+=a;return o*=t*c+1,o}function zf(t,e,r,s){const o=.577215664901533;let a,c,f,u,v,d,h=e*r;for(v=r-h,c=e*s<=.02?Math.log(r)+Lf(e)+o+v:Math.log(h)+o+v,a=s*5*Math.abs(c),f=1,u=0,f+=1,v*=r-h/f,d=v/f,u+=d;Math.abs(d)>a;)f+=1,v*=r-h/f,d=v/f,u+=d;return-t*(c+u)}function mo(t,e,r,s){let o,a,c,f,u,v,d,h,m;if(r==0)return 0;if(d=Math.min(t,e),d>=1)v=t*Math.log(r)-ho(t,e),a=Math.exp(v)/t;else if(h=Math.max(t,e),h<8)if(h<=1){if(a=Math.pow(r,t),a==0)return a;m=t+e,m>1?(u=t+e-1,v=(dt(u)+1)/m):v=dt(m)+1,c=(dt(t)+1)*(dt(e)+1)/v,a*=c*(e/m)}else{if(u=lr(d),o=Math.round(h-1),o>=1){c=1;for(let w=1;w<=o;++w)h+=-1,c*=h/(d+h);u+=Math.log(c)}v=t*Math.log(r)-u,h+=-1,m=d+h,m>1?(u=d+h-1,f=(dt(u)+1)/m):f=dt(m)+1,a=Math.exp(v)*(d/t)*(dt(h)+1)/f}else u=lr(d)+Zr(d,h),v=t*Math.log(r)-u,a=d/t*Math.exp(v);if(a==0||t<=s*.1)return a;let g=s/t,p=0,_=0,b;for(c=1,p+=1,c*=(.5-e/p+.5)*r,b=c/(t+p),_+=b;p<1e7&&Math.abs(b)>g;)p+=1,c*=(.5-e/p+.5)*r,b=c/(t+p),_+=b;return t*_>-1?a*=t*_+1:a=0,a}function vl(t,e,r,s,o,a){let c,f,u,v,d,h=t+e,m=t+1;if(o>1&&t>=1&&h>=m*1.1?(u=Math.round(Math.abs(xi(1))),f=Math.round(xi(0)),u>f&&(u=f),v=Math.exp(-u)):(u=0,v=1),c=qf(u,t,e,r,s)/t,o==1||c==0)return c;let g=o-1,p=v;if(f=0,e>1){if(s>1e-4){let _=(e-1)*r/s-t;_>=1&&(f=_<g?Math.round(_):g)}else f=g;for(let _=0;_<f;++_)d=_,v*=(h+d)/(m+d)*r,p+=v}for(let _=f;_<g&&(d=_,v*=(h+d)/(m+d)*r,p+=v,!(v<=a*p));++_);return c*=p,c}function If(t,e,r,s,o,a){let c,f,u,v,d,h,m,g,p,_,b,w,k,E,y,A,S,j,z;if(!Number.isFinite(o)||(z=Ff(t,e,r,s),Number.isNaN(z)))return Number.NaN;if(z==0)return 0;for(c=o+1,p=e/t,_=1/t+1,E=s+1,u=0,v=1,h=t+1,w=0,k=1,y=1,A=c/_,d=_/c,u+=1,m=u/t,g=u*(e-u)*r,f=t/h,j=v*(v+p)*f*f*(g*r),f=(m+1)/(_+m+m),S=u+g/h+f*(c+u*E),v=m+1,h+=2,m=j*w+S*y,w=y,y=m,m=j*k+S*A,k=A,A=m,b=d,d=y/A,w/=A,k/=A,y=d,A=1;u<1e4&&(u+=1,m=u/t,g=u*(e-u)*r,f=t/h,j=v*(v+p)*f*f*(g*r),f=(m+1)/(_+m+m),S=u+g/h+f*(c+u*E),v=m+1,h+=2,m=j*w+S*y,w=y,y=m,m=j*k+S*A,k=A,A=m,b=d,d=y/A,!(Math.abs(d-b)<=a*d));)w/=A,k/=A,y=d,A=1;return z*d}function Ff(t,e,r,s){const o=.398942280401433;let a,c,f,u,v,d,h,m,g;if(r==0||s==0)return 0;if(h=Math.min(t,e),h<8){let p,_;if(r<=.375?(p=Math.log(r),_=$r(-r)):s>.375?(p=Math.log(r),_=Math.log(s)):(p=$r(-s),_=Math.log(s)),d=t*p+e*_,h>=1)return d-=ho(t,e),Math.exp(d);if(m=Math.max(t,e),m>=8)return u=lr(h)+Zr(h,m),h*Math.exp(d-u);if(m<=1){let w=Math.exp(d);return w==0?0:(g=t+e,g>1?(u=t+e-1,d=(dt(u)+1)/g):d=dt(g)+1,c=(dt(t)+1)*(dt(e)+1)/d,w*(h*c)/(h/m+1))}if(u=lr(h),a=Math.round(m-1),a>=1){c=1;for(let w=1;w<=a;++w)m+=-1,c*=m/(h+m);u=Math.log(c)+u}d-=u,m+=-1,g=h+m;let b;return g>1?(u=h+m-1,b=(dt(u)+1)/g):b=dt(g)+1,h*Math.exp(d)*(dt(m)+1)/b}else{let p,_,b,w;return t<=e?(p=t/e,_=p/(p+1),b=1/(p+1),w=t-(t+e)*r):(p=e/t,_=1/(p+1),b=p/(p+1),w=(t+e)*s-e),f=-w/t,u=Math.abs(f)>.6?f-Math.log(r/_):$n(f),f=w/e,v=Math.abs(f)<=.6?$n(f):f-Math.log(s/b),d=Math.exp(-(t*u+e*v)),o*Math.sqrt(e*_)*d*Math.exp(-fl(t,e))}}function qf(t,e,r,s,o){const a=.398942280401433;let c,f,u,v,d,h,m,g;if(h=Math.min(e,r),h<8){let p,_;if(s<=.375?(p=Math.log(s),_=$r(-s)):o>.375?(p=Math.log(s),_=Math.log(o)):(p=$r(-o),_=Math.log(o)),d=e*p+r*_,h>=1)return d-=ho(e,r),Ms(t,d);if(m=Math.max(e,r),m>=8)return u=lr(h)+Zr(h,m),h*Ms(t,d-u);if(m<=1){let w=Ms(t,d);return w==0?w:(g=e+r,g>1?(u=e+r-1,d=(dt(u)+1)/g):d=dt(g)+1,c=(dt(e)+1)*(dt(r)+1)/d,w*(h*c)/(h/m+1))}u=lr(h);let b=Math.round(m-1);if(b>=1){c=1;for(let w=1;w<=b;++w)m+=-1,c*=m/(h+m);u+=Math.log(c)}return d-=u,m+=-1,g=h+m,f=g>1?(dt(g-1)+1)/g:dt(g)+1,h*Ms(t,d)*(dt(m)+1)/f}else{let p,_,b,w;e>r?(p=r/e,_=1/(p+1),b=p/(p+1),w=(e+r)*o-r):(p=e/r,_=p/(p+1),b=1/(p+1),w=e-(e+r)*s),-yi(r/e);let k=-w/e;return u=Math.abs(k)>.6?k-Math.log(s/_):$n(k),k=w/r,v=Math.abs(k)>.6?k-Math.log(o/b):$n(k),d=Ms(t,-(e*u+r*v)),a*Math.sqrt(r*_)*d*Math.exp(-fl(e,r))}}function go(t,e,r,s,o,a){let f=Array(30),u=Array(30),v=e-.5-.5,d=t+v*.5,h=s>.375?Math.log(r):$r(-s),m=-d*h;if(e*m==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+yi(dt(e))+e*Math.log(m)+d*h,p=g-(Zr(e,t)+e*Math.log(d)),_=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let b=_==0,w=o==0?0:Math.exp(Math.log(o)-p),k=Of(e,m,g,a),E=.25/(d*d),y=h*.25*h,A=k,S=A,j=1,z=1,T=0;for(let B=1;B<=30;++B){let C=e+T;A=(C*(C+1)*A+(m+C+1)*j)*E,T+=2,j*=y,z/=T*(T+1);let q=B-1;f[q]=z;let Y=0;if(B>1){let R=e-B;for(let U=1;U<=q;++U)Y+=R*f[U-1]*u[q-U],R+=e}u[q]=v*z+Y/B;let V=u[q]*A;if(S+=V,S<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(V)<=a*(S+w))break}return o+=b?Math.exp(p+Math.log(S)):_*S,o}function Of(t,e,r,s){const o=1.772453850905516;if(t*e==0)return e<=t?Math.exp(-r):0;if(t==.5){if(e<.25)return(.5-Tf(Math.sqrt(e))+.5)*Math.exp(-r);{let a=Math.sqrt(e);return _i(1,a)/a*o}}else if(e<1.1){let a=3,c=e,f=e/(t+3),u=s*.1/(t+1),v;for(a+=1,c*=-(e/a),v=c/(t+a),f+=v;Math.abs(v)>u;)a+=1,c*=-(e/a),v=c/(t+a),f+=v;let d=t*e*((f/6-.5/(t+2))*e+1/(t+1)),h=t*Math.log(e),m=dt(t),g=m+1;if(e>=.25&&t<e/2.59||h>-.13394){let p=Pf(h),_=((p+.5+.5)*d-p)*g-m;return _<=0?0:_*Math.exp(-r)}else return(.5-Math.exp(h)*g*(.5-d+.5)+.5)*Math.exp(-r)}else{let a=1,c=1,f=e,u=e+(1-t),v=1,d,h;a=e*c+v*a,f=e*u+v*f,d=a/f,v+=1;let m=v-t;for(c=a+m*c,u=f+m*u,h=c/u;Math.abs(h-d)>=s*h;)a=e*c+v*a,f=e*u+v*f,d=a/f,v+=1,m=v-t,c=a+m*c,u=f+m*u,h=c/u;return h}}function Bf(t,e,r,s){const a=1.12837916709551,c=.353553390593274,f=Array(21),u=Array(21),v=Array(21),d=Array(21);let h=t*$n(-r/t)+e*$n(r/e),m;if(m=Math.exp(-h),m==0)return 0;let g=Math.sqrt(h),p=g/c*.5,_=h+h,b,w,k,E;t<e?(b=t/e,w=1/(b+1),k=(e-t)/e,E=1/Math.sqrt(t*(b+1))):(b=e/t,w=1/(b+1),k=(e-t)/t,E=1/Math.sqrt(e*(b+1))),f[0]=k*.6666666666666666,v[0]=f[0]*-.5,d[0]=-v[0];let y=.5/a*_i(1,g),A=c,S=y+d[0]*E*A,j=1,z=b*b,T=1,B=E,C=p,q=_;for(let V=2;V<=20;V+=2){T*=z,f[V-1]=w*2*(b*T+1)/(V+2);let R=V+1;j+=T,f[R-1]=k*2*j/(V+3);for(let J=V;J<=R;++J){let Q=(J+1)*-.5;u[0]=Q*f[0];for(let le=2;le<=J;++le){let ie=0;for(let ce=1;ce<=le-1;++ce){let ee=le-ce;ie+=(ce*Q-ee)*f[ce-1]*u[ee-1]}u[le-1]=Q*f[le-1]+ie/le}v[J-1]=u[J-1]/(J+1);let se=0;for(let le=1;le<=J-1;++le)se+=d[J-le-1]*v[le-1];d[J-1]=-(se+v[J-1])}y=c*C+(V-1)*y,A=c*q+V*A,C=_*C,q=_*q,B*=E;let U=d[V-1]*B*y;B*=E;let Z=d[R-1]*B*A;if(S+=U+Z,Math.abs(U)+Math.abs(Z)<=s*S)break}let Y=Math.exp(-fl(t,e));return a*m*Y*S}function Df(t,e,r,s){let a=0,c=0;function f(b,w,k,E){const y=mo(b,w,k,1e-15);return E?.5-y+.5:y}function u(b,w,k,E){const y=mo(w,b,k,1e-15);return E?y:.5-y+.5}function v(b,w,k,E,y,A){const S=If(b,w,k,E,y,15000000000000002e-30);return A?.5-S+.5:S}function d(b,w,k,E,y){let A=Math.round(w);w=w-A,w===0&&(A=A-1,w=1);let S=vl(w,b,E,k,A,1e-15);return k<=.7?(S=S+mo(b,w,k,1e-15),y?.5-S+.5:S):(b<=15&&(A=20,S=S+vl(b,w,k,E,A,1e-15),b=b+A),S=go(b,w,k,E,S,15*1e-15),y?.5-S+.5:S)}if(t<1e-15*.001&&e<1e-15*.001)return e/(t+e);let h,m,g,p,_;if(t<=1||e<=1){if(r>.5?(_=!0,h=e,g=s,m=t,p=r):(_=!1,h=t,g=r,m=e,p=s),m<Math.min(1e-15,1e-15*h))return a=Rf(h,m,g,1e-15),_?.5-a+.5:a;if(h<Math.min(1e-15,1e-15*m)&&m*g<=1)return c=zf(h,m,g,1e-15),_?c:.5-c+.5;if(Math.max(h,m)>1){if(m<=1)return f(h,m,g,_);if(g>=.29)return u(h,m,p,_);if(g<.1&&Math.pow(g*m,h)<=.7)return f(h,m,g,_)}else{if(h>=Math.min(.2,m)||Math.pow(g,h)<=.9)return f(h,m,g,_);if(g>=.3)return u(h,m,p,_)}let b=!1;return Math.max(h,m)>1&&m>15?c=0:(b=!0,c=vl(m,h,p,g,20,1e-15),m+=20),c=go(m,h,p,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(b?c=vl(m-n,h,p,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=go(m,h,p,g,c,15*1e-15),a=-expm1(c),_?.5-a+.5:a):(a=.5-c+.5,_?.5-a+.5:a)}else{let b=Number.isFinite(t+e)?t>e?(t+e)*s-e:t-(t+e)*r:t*s-e*r;const w=b<0;let k,E,y,A;if(w?(b=-b,k=e,y=s,E=t,A=r):(k=t,y=r,E=e,A=s),E<40)return E*y<=.7?f(k,E,y,w):d(k,E,y,A,w);if(k>E){if(E<=100||b>E*.03)return v(k,E,y,A,b,w)}else{if(k<=100)return v(k,E,y,A,b,w);if(b>k*.03)return v(k,E,y,A,b,w)}return a=Bf(k,E,b,1e-15*100),w?.5-a+.5:a}}function ki(t){const e=t.nrows,r=t.ncols;if(e<r){const c=ki(t.subset([],Ft.seq(1,e)));return{Q:c.Q,R:Yf(c.Q,t)}}let s=Jt.eye(e),o=t.t();for(let c=1;c<=r;c++)for(let f=e;f>=c+1;f--){const u=o.v.subarray((f-2)*r,f*r),v=s.v.subarray((f-2)*e,f*e),d=u.slice(),h=v.slice(),[m,g,p]=Vf(d[c-1],d[c-1+r]);for(let _=0;_<r;_++)u[_]=d[_]*m+d[_+r]*g,u[_+r]=d[_]*-g+d[_+r]*m,v[_]=h[_]*m+h[_+e]*g,v[_+e]=h[_]*-g+h[_+e]*m;for(let _=r;_<e;_++)v[_]=h[_]*m+h[_+e]*g,v[_+e]=h[_]*-g+h[_+e]*m}const a=Ft.seq(1,r);return{Q:e===r?s:s.subset([],a),R:e===r?o.t():o.subset([],a).t()}}function Vf(t,e){if(t==0)return[0,1,e];if(Math.abs(t)>Math.abs(e)){const a=e/t,c=Math.sqrt(1+a*a),f=1/c;return[f,a*f,t*c]}const r=t/e,s=Math.sqrt(1+r*r),o=1/s;return[r*o,o,e*s]}function po(t){return typeof t=="number"}function Yf(t,e){if(e===void 0&&(e=t),!gr(t)||!gr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=t.nrows,s=t.ncols,o=e.nrows,a=e.ncols,c=s,f=a,u=r,v=new Float64Array(c*f);for(let d=0;d<f;d++){const h=e.v.subarray(d*o,(d+1)*o),m=v.subarray(d*c,(d+1)*c);for(let g=0;g<c;g++){const p=t.v.subarray(g*r,(g+1)*r);let _=0;for(let b=0;b<u;b++)_+=p[b]*h[b];m[g]=_}}return new Jt(v,c,f)}function Ei(t,e,r){if(r===void 0){if(e!==t.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new De(t.v)}if(t.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new Jt(t.v,e,r)}function gr(t){return t&&t.constructor===Jt}function Uf(t,e,r){return new Jt(new Float64Array(t),e,r)}const Pe=class Pe{constructor(e,r,s){if(!ArrayBuffer.isView(e)||e.constructor!==Pe.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Pe.diagm(this.diag().apply(u=>Math.abs(u)>Number.EPSILON?1/u:x));const s=Pe.eye(e),o=Pe.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],f=e-1;for(let u=0;u<e;u++)o.v[f*e+u]=s.v[f*e+u]/c;for(let u=e-2;u>=0;u--){let v=s.getcolumn(u+1);const d=a.getcolref(u+1);for(let h=u+1;h<e;h++){const m=o.getcolumn(h+1);v=v.subtract(m.mult(d[h]))}o.v.set(v.divide(d[u]).v,u*e)}return o.t()}if(this.islowertriangular()){const s=this.diag();if(vi(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=Pe.eye(e),a=Pe.eye(e),c=this.t(),f=0,u=c.v[0];for(let v=0;v<e;v++)a.v[f*e+v]=o.v[f*e+v]/u;for(let v=1;v<e;v++){let d=o.getcolumn(v+1);const h=c.getcolref(v+1);for(let m=0;m<v;m++){const g=a.getcolumn(m+1);d=d.subtract(g.mult(h[m]))}a.v.set(d.divide(h[v]).v,v*e)}return a.t()}const r=ki(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>Pe.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>Pe.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let s=0;s<e;s++)r[s]=this.getcolref(s+1)[s];return new De(r)}t(){const e=this.nrows,r=this.ncols,s=new Pe.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const a=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let c=0;c<this.nrows;c++)s[c*r+o]=a[c]}return new Pe(s,r,e)}for(let o=0;o<this.nrows;o++){const a=s.subarray(o*r,(o+1)*r);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+o]}return new Pe(s,r,e)}dot(e){if(qe(e))return new Pe(wo(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(gr(e))return new Pe(wo(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,s){if(gr(e))return new Pe(bo(this.v,e.v,r),this.nrows,this.ncols);if(po(e))return new Pe(_o(this.v,e,r),this.nrows,this.ncols);if(!qe(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const o=new Pe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(_o(this.getcolref(a+1),e.v[a],r),a*this.nrows);return new Pe(o,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const o=new Pe.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(bo(this.getcolref(a+1),e.v,r),a*this.nrows);return new Pe(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e,r){if(r===void 0&&(r=2),r==2){const s=this.ncols,o=new Pe.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=e(this.getcolref(a+1));return new De(o)}if(r==1)return this.t().apply(e,2);if(r==0){const s=this.v.length,o=new Pe.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=e(this.v[a]);return new Pe(o,this.nrows,this.ncols)}}replace(e,r,s){typeof r=="number"&&(r=[r]),r.length===0&&(r=Ft.seq(1,this.nrows)),pr(r)||(r=br(r)),typeof s=="number"&&(s=[s]),s.length===0&&(s=Ft.seq(1,this.ncols)),pr(s)||(s=br(s));const o=r.length,a=s.length;if(Ir(r)<1||Ar(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Ir(s)<1||Ar(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<s.length;c++){const f=e.getcolref(c+1),u=(s.v[c]-1)*this.nrows;for(let v=0;v<r.length;v++){const d=r.v[v];this.v[u+d-1]=f[v]}}return this}copy(){return new Pe(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new De.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)r[s]=this.getcolref(s+1)[e-1];return new De(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new De(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=br([e])),typeof r=="number"&&(r=br([r])),Array.isArray(e)&&(e=e.length===0?null:br(e)),Array.isArray(r)&&(r=r.length===0?null:br(r)),e!==null&&!pr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!pr(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Ir(e)<1||Ar(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(Ir(r)<1||Ar(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const f=r.length,u=this.nrows,v=new Pe.valuesConstructor(u*f);for(let d=0;d<r.length;d++)v.set(this.v.slice((r.v[d]-1)*this.nrows,r.v[d]*this.nrows),d*this.nrows);return new Pe(v,u,f)}if(r==null)return this.t().subset(r,e).t();const s=e.length,o=r.length,a=new Pe.valuesConstructor(s*o);let c=new Pe.valuesConstructor(s);for(let f=0;f<o;f++){const u=this.v.subarray((r.v[f]-1)*this.nrows,r.v[f]*this.nrows);for(let v=0;v<s;v++)c[v]=u[e.v[v]-1];a.set(c,f*s)}return new Pe(a,s,o)}toString(e){function r(c,f){return" ".repeat(f-c.length)+c}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Ar(this.v))))+e+3;let o="";const a=this.t();for(let c=1;c<=a.ncols;c++)o+=Array.from(a.getcolref(c)).map(f=>r(f.toFixed(e),s)).join(" ")+`
`;return o}toCSV(e,r,s,o){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const a=o!=null&&o.length>0,c=s!=null&&s.length>0;if(a&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&s.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const f=this.t();let u=c?s.join(e)+`
`:"";for(let v=1;v<=f.ncols;v++)u=u+(a?o[v-1]+e:"")+f.getcolref(v).join(e)+`
`;return u=u.replace(/\./g,r),u}static randn(e,r,s,o){return Ei(pi(e*r,s,o),e,r)}static rand(e,r,s,o){return Ei(gi(e*r,s,o),e,r)}static eye(e,r){r===void 0&&(r=e);const s=new Float64Array(e*r);for(let o=0;o<Math.min(e,r);o++)s[o*e+o]=1;return new Pe(s,e,r)}static diagm(e){if(!qe(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,s=new Float64Array(r*r);for(let o=0;o<r;o++)s[o*r+o]=e.v[o];return new Pe(s,r,r)}static zeros(e,r){return r===void 0&&(r=e),new Pe(new Float64Array(e*r),e,r)}static ones(e,r){return Pe.fill(1,e,r)}static fill(e,r,s){s===void 0&&(s=r);const o=new Float64Array(r*s);for(let a=0;a<o.length;a++)o[a]=e;return new Pe(o,r,s)}static outer(e,r,s){if(Array.isArray(e)&&(e=ht(e)),Array.isArray(r)&&(r=ht(r)),!qe(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!qe(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=Pe.zeros(e.length,r.length);for(let a=0;a<r.length;a++){const c=r.v[a],f=o.getcolref(a+1);for(let u=0;u<e.length;u++)f[u]=s(e.v[u],c)}return o}static parseCSV(e,r,s,o){function a(b){return b.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const c=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let f=e.split(/\n/),u=[],v=0;const d=f[0].split(r);(s||s===void 0&&a(d))&&(u=d,v=1),f=f.filter(b=>b.trim().length>1);let h=[],m=0;o&&(m=1);const g=f.length-v,p=d.length-m;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const _=Pe.zeros(p,g);for(let b=v;b<g+v;b++){const w=f[b].split(r);let k;if(o?(h[b-v]=w[0],k=w.slice(1).map(E=>Number.parseFloat(E.trim().replace(c,".")))):k=w.map(E=>Number.parseFloat(E.trim().replace(c,"."))),k.some(E=>Number.isNaN(E)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(k.length!=p)throw Error("Wrong number of values in row #"+b);_.v.set(new Float64Array(k),(b-v)*p)}return{values:_.t(),header:u,labels:h,sep:r,dec:c}}};ur(Pe,"valuesConstructor",Float64Array),ur(Pe,"TOLERANCE",Math.pow(10,-9));let Jt=Pe;function qe(t){return t&&t.constructor===De}function ht(t){return new De(new Float64Array(t))}const mt=class mt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new Ft.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=o+1,s=s+1);return new Ft(r.subarray(0,s))}filter(e){const r=new mt.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=this.v[o],s=s+1);return new mt(r.subarray(0,s))}shuffle(){return new mt(Ni(this.v))}sort(e){return new mt(yo(this.v,e))}sortind(e){return new Ft(Mi(this.v,e))}rep(e){return Si(this,e)}repeach(e){return Ci(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=Ft.seq(1,this.length)),pr(r)||(r=br(r));const s=r.length;if(Ir(r)<1||Ar(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<r.length;o++){const a=r.v[o];this.v[a-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=br([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Ft.bool2ind(e):br(e)),!pr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=mt.zeros(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[o]=this.v[e.v[o]-1]}return s}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new mt(this.v.slice(e-1,r))}copy(){return new mt(this.v.slice())}dot(e){return e===void 0&&(e=this),wo(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(qe(e))return new mt(bo(this.v,e.v,r));if(po(e))return new mt(_o(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e){const r=this.v.length,s=mt.zeros(r);for(let o=0;o<r;o++)s.v[o]=e(this.v[o]);return s}static c(...e){if(e.length===1)return e[0];const r=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),s=new mt.valuesConstructor(r);let o=0;for(const a of e)typeof a=="number"?(s[o]=a,o+=1):(s.set(qe(a)?a.v:new mt.valuesConstructor(a),o),o+=typeof a=="number"?1:a.length);return new mt(s)}static seq(e,r,s){return Ai(e,r,s,mt)}static randn(e,r,s){return pi(e,r,s)}static rand(e,r,s){return gi(e,r,s)}static zeros(e){return new mt(new mt.valuesConstructor(e))}static ones(e){return mt.fill(1,e)}static fill(e,r){const s=new mt.valuesConstructor(r);for(let o=0;o<s.length;o++)s[o]=e;return new mt(s)}};ur(mt,"valuesConstructor",Float64Array);let De=mt;function pr(t){return t.constructor===Ft}function br(t){return new Ft(new Int32Array(t))}const St=class St{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new St.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=o+1,s=s+1);return new St(r.subarray(0,s))}filter(e){const r=new St.valuesConstructor(this.length);let s=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(r[s]=this.v[o],s=s+1);return new St(r.subarray(0,s))}shuffle(){return new St(Ni(this.v))}sort(e){return new St(yo(this.v,e))}sortind(e){return new St(Mi(this.v,e))}rep(e){return Si(this,e)}repeach(e){return Ci(this,e)}subset(e){if(typeof e=="number"&&(e=br([e])),Array.isArray(e)&&(e=br(e)),!pr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=new St.valuesConstructor(r);for(let o=0;o<r;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");s[o]=this.v[e.v[o]-1]}return new St(s)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new St(this.v.slice(e-1,r))}static seq(e,r,s){return Ai(e,r,s,St)}static ones(e){return St.fill(1,e)}static fill(e,r){const s=new St.valuesConstructor(r);for(let o=0;o<s.length;o++)s[o]=e;return new St(s)}static bool2ind(e){let r=0;const s=new St.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(s[r]=o+1,r=r+1);return new St(s.subarray(0,r))}};ur(St,"valuesConstructor",Int32Array);let Ft=St;function Ai(t,e,r,s){r===void 0&&(r=t<=e?1:-1);const o=Math.floor((e-t)/r)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const a=new s.valuesConstructor(o);for(let c=0;c<o;c++)a[c]=t+c*r;return new s(a)}function Si(t,e){const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let o=1;o<=e;o++)for(let a=0;a<t.length;a++)s[(o-1)*t.length+a]=t.v[a];return new t.constructor(s)}function Ci(t,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=t.length*e,s=new t.constructor.valuesConstructor(r);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)s[o*e+a]=t.v[o];return new t.constructor(s)}function bo(t,e,r){if(t.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(t.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new t.constructor(t.length);for(let o=0;o<t.length;o++)s[o]=r(t[o],e[o]);return s}function _o(t,e,r){const s=new t.constructor(t.length);for(let o=0;o<t.length;o++)s[o]=r(t[o],e);return s}function wo(t,e,r,s,o,a){if(s!==o)throw Error("_dot: matrix dimensions do not much.");const c=r,f=a,u=s,v=new t.constructor(c*f);for(let d=0;d<f;d++){const h=e.subarray(d*o,(d+1)*o),m=v.subarray(d*c,(d+1)*c);for(let g=0;g<u;g++){const p=h[g],_=t.subarray(g*r,(g+1)*r);for(let b=0;b<c;b++)m[b]+=_[b]*p}}return v}function Ni(t){let e=t.slice(),r=e.length,s,o;for(;r;)o=Math.floor(Math.random()*r--),s=e[r],e[r]=e[o],e[o]=s;return e}function yo(t,e=!1){return e?t.slice().sort((r,s)=>s-r):t.slice().sort((r,s)=>r-s)}function Mi(t,e=!1){const r=Ft.seq(1,t.length).v;return e?r.sort((s,o)=>t[o-1]-t[s-1]):r.sort((s,o)=>t[s-1]-t[o-1])}function Wf(t,e,r){return 5*t*e+e+4*r*e+t*r}function Fr(t,e,r){if(!t||!t.class||!t.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=t.ncols,o=t.ncomp;let a,c;switch(e){case"mX":a=2,c=s;break;case"sX":a=2+s,c=s;break;case"loadings":case"xloadings":a=2+2*s+(r-1)*s,c=s;break;case"P":a=2+2*s,c=o*s;break;case"eigenvals":case"xeigenvals":a=2+2*s+s*o,c=o;break;case"cq0":a=2+2*s+s*o+o,c=o;break;case"cNq":a=2+2*s+s*o+2*o,c=o;break;case"rq0":a=2+2*s+s*o+3*o,c=o;break;case"rNq":a=2+2*s+s*o+4*o,c=o;break;case"ch0":a=2+2*s+s*o+5*o,c=o;break;case"cNh":a=2+2*s+s*o+6*o,c=o;break;case"rh0":a=2+2*s+s*o+7*o,c=o;break;case"rNh":a=2+2*s+s*o+8*o,c=o;break;case"cr0":a=2+2*s+s*o+9*o,c=o;break;case"cNr":a=2+2*s+s*o+10*o,c=o;break;case"rr0":a=2+2*s+s*o+11*o,c=o;break;case"rNr":a=2+2*s+s*o+12*o,c=o;break;case"cg0":a=2+2*s+s*o+13*o,c=o;break;case"cNg":a=2+2*s+s*o+14*o,c=o;break;case"rg0":a=2+2*s+s*o+15*o,c=o;break;case"rNg":a=2+2*s+s*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return t.v.subarray(a,a+c)}function Hf(t,e,r){if(!t||!t.class||!t.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=t.ncols,o=t.nrows,a=t.ncomp;let c,f;switch(e){case"scores":case"xscores":c=(r-1)*o,f=o;break;case"T":c=0,f=o*a;break;case"hdist":c=o*a+(r-1)*o,f=o;break;case"qdist":c=2*o*a+(r-1)*o,f=o;break;case"xcumexpvar":case"cumexpvar":c=3*o*a,f=a;break;case"fdistc":c=3*o*a+a+(r-1)*o,f=o;break;case"fdistr":c=4*o*a+a+(r-1)*o,f=o;break;case"gdist":c=5*o*a+a+(r-1)*s,f=s;break;case"rdist":c=5*o*a+a+s*a+(r-1)*s,f=s;break;case"idistc":c=5*o*a+a+2*s*a+(r-1)*s,f=s;break;case"idistr":c=5*o*a+a+3*s*a+(r-1)*s,f=s;break;case"E":c=5*o*a+a+3*s*a+a*s,f=o*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return t.v.subarray(c,c+f)}function Gf(t,e,r){if(!Array.isArray(t))return!1;if(t.length===0)return!0;for(let s=0;s<t.length;s++){const o=t[s];if(o<e||o>r)return!1}return!0}function Xf(t,e,r,s){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!gr(r))throw new Error("pca_predict: X must be a matrix.");s||(s=[]);const o=s&&Array.isArray(s)?s.length:0;if(!Gf(s,0,r.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const a=r.nrows-o;let c=e.exclvars;r.ncols===e.ncols&&(c=[]);const f=c.length,u=r.ncols-f;if(a<1)throw new Error("pca_predict: X must have at least 1 row.");if(u!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const v=t._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);t.HEAPF64.set(r.v,v/r.v.BYTES_PER_ELEMENT);let d=null;if(o>0){const T=new Int32Array(s);d=t._malloc(T.length*T.BYTES_PER_ELEMENT),t.HEAP32.set(T,d/T.BYTES_PER_ELEMENT)}let h=null;if(f>0){const T=new Int32Array(c);h=t._malloc(T.length*T.BYTES_PER_ELEMENT),t.HEAP32.set(T,h/T.BYTES_PER_ELEMENT)}const m=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const g=Wf(a,e.ncomp,u),p=Float64Array,_=t._malloc(g*p.BYTES_PER_ELEMENT);if(t.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[v,r.nrows,r.ncols,m,_,d,o,h,f])!==1)throw new Error("pca_predict: PCA prediction failed.");const w=t.HEAPF64.slice(_/p.BYTES_PER_ELEMENT,_/p.BYTES_PER_ELEMENT+g);t._free(v),t._free(m),t._free(_),d&&t._free(d),h&&t._free(h);const k={class:["pcares"],v:w,ncomp:e.ncomp,nrows:a,ncols:u,npred:u,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},E=new Array(e.ncomp),y=new Array(e.ncomp),A=new Array(e.ncomp),S=new Array(e.ncomp),j=new Array(e.ncomp),z=Hf(k,"xcumexpvar");j[0]=1,S[0]=z[0],A[0]=1-z[0],E[0]=z[0],y[0]=1-z[0];for(let T=1;T<e.ncomp;T++)j[T]=T+1,S[T]=z[T],A[T]=1-z[T],E[T]=z[T]-z[T-1],y[T]=1-E[T];return k.stat={components:j,resvar:y,expvar:E,cumexpvar:S,cumresvar:A},k}function Kf(t,e){if(e[0]===0){const r=e[1]+2;return 2+t*r+2*t+r}return 3+t}const en=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(t,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(t,e)=>2*t,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:Kf,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(t,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(t,e)=>2+3*t+e[0],mp:[5,5]}];function Jf(t){let e="<ul>";for(let r=0;r<t.ml.length;r++){const s=en[t.ml[r]].title;e=e+"<li>"+s+" <span>"+t.info[r]+"</span></li>"}return e=e+"</ul>",e}function ji(t,e,r){const s=en.findIndex(h=>h.id==="trim");let o=0,a=t.ncols-e,c=0;for(let h=0;h<r.ml.length;h++){if(r.ml[h]!==s){c+=r.mpl_new[h];continue}o=Math.max(o,r.mp_new[c]),a=Math.min(a,r.mp_new[c+1]),c+=r.mpl_new[h]}const f=t.nrows,v=a-o+e,d=Jt.zeros(f,v);return c=0,e>0&&(d.v.set(t.v.slice(0,e*f),c),c+=e*f),d.v.set(t.v.slice((e+o)*f,(e+a)*f),c),[o,a,d]}function xo(t,e){if(!t||!e||typeof e!="object"||Object.keys(e).length===0)return t;const r=en.findIndex(f=>f.id==="trim");if(e.ml.findIndex(f=>f===r)<0)return t;const[o,a,c]=ji(t.values,t.nresp,e);return t.values=c,t.varlabels=t.nresp>0?t.varlabels.slice(0,t.nresp).concat(t.varlabels.slice(t.nresp+o,t.nresp+a)):t.varlabels.slice(o,a),t.varindices=t.nresp>0?qr(0,t.nresp-1).concat(qr(0,a-o-1)):qr(0,a-o-1),t.varvalues=t.nresp>0?t.varvalues.slice(0,t.nresp).concat(t.varvalues.slice(t.nresp+o,t.nresp+a)):t.varvalues.slice(o,a),t}function Ti(t,e,r,s,o=!0,a=[]){if(!gr(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let c,f;o?(c=e.ncols,f=e.nrows-r):(c=e.nrows,f=e.ncols-r);const u=s.length;if(u<1)throw new Error("prep_fit: no preprocessing methods are provided.");const v=new Int32Array(u),d=new Int32Array(u),h=new Int32Array(u);let m=0,g=0;for(let q=0;q<s.length;q++){const Y=s[q].id,V=s[q].params,R=en.findIndex(Z=>Z.id==Y);if(R<0)throw new Error("prep_fit: wrong method name: "+Y+".");const U=en[R];if(V.length!==U.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+Y+".");v[q]=R,d[q]=U.mpl,h[q]=U.get_mpl_new(f,V),m=m+d[q],g=g+h[q]}const p=new Float64Array(m);let _=0;for(let q=0;q<s.length;q++){const Y=s[q].id,V=s[q].params;en.findIndex(R=>R.id==Y),p.set(V,_),_=_+d[q]}const b=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,b/e.v.BYTES_PER_ELEMENT);const w=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,w/v.BYTES_PER_ELEMENT);const k=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAP32.set(d,k/d.BYTES_PER_ELEMENT);const E=t._malloc(h.length*h.BYTES_PER_ELEMENT);t.HEAP32.set(h,E/h.BYTES_PER_ELEMENT);const y=t._malloc(p.length*p.BYTES_PER_ELEMENT);t.HEAPF64.set(p,y/p.BYTES_PER_ELEMENT);const A=t._malloc(g*p.BYTES_PER_ELEMENT),S=new Int32Array(a),j=S.length,z=t._malloc(j*S.BYTES_PER_ELEMENT);if(t.HEAP32.set(S,z/S.BYTES_PER_ELEMENT),t.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[b,c,f,r,u,w,k,y,E,A,o,z,j])!==1)throw new Error("prep_fit: unexpected error.");const B=t.HEAPF64.slice(A/p.BYTES_PER_ELEMENT,A/p.BYTES_PER_ELEMENT+g);return t._free(b),t._free(w),t._free(y),t._free(k),t._free(z),t._free(A),t._free(E),{ml:v,mpl:d,mp:p,mpl_new:h,mp_new:B,npred:f,class:["prepmodel"]}}function js(t,e,r,s,o=!0,a=!1){if(!gr(e))throw new Error("prep_apply: D must be a matrix.");let c,f;if(o?(c=e.ncols,f=e.nrows-r):(c=e.nrows,f=e.ncols-r),f!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+f+").");const u=s.ml,v=s.mpl_new,d=s.mp_new,h=v.reduce((A,S)=>A+S,0);if(!u||u.length<1||!v||v.length!==u.length||d.length!==h)throw new Error("prep_apply: wrong structure of the model object.");const m=u.length,g=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);t.HEAPF64.set(e.v,g/e.v.BYTES_PER_ELEMENT);const p=t._malloc(u.length*u.BYTES_PER_ELEMENT);t.HEAP32.set(u,p/u.BYTES_PER_ELEMENT);const _=t._malloc(v.length*v.BYTES_PER_ELEMENT);t.HEAP32.set(v,_/v.BYTES_PER_ELEMENT);const b=t._malloc(d.length*d.BYTES_PER_ELEMENT);t.HEAPF64.set(d,b/d.BYTES_PER_ELEMENT);const w=t._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(t.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[g,c,f,r,m,p,_,b,w,o])!==1)throw new Error("prep_apply: unexpected error.");const E=t.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);t._free(g),t._free(p),t._free(_),t._free(b),t._free(w);const y=new Jt(E,e.nrows,e.ncols);if(a){const[A,S,j]=ji(y,r,s);return j}return y}function Qf(t,e,r,s){e===void 0&&(e=!0),r===void 0&&(r=!1),s===void 0&&(s=!1);function o(u,v,d,h){if(typeof v=="boolean")return v?u.apply(d,2):ht([h]).rep(u.ncols);if(!qe(v))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(v.length!==u.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return v}const a=o(t,e,Mn,0),c=o(t,r,al,1),f=Jt.zeros(t.nrows,t.ncols);for(let u=1;u<=t.ncols;u++){const v=t.getcolref(u),d=f.getcolref(u),h=a.v[u-1],m=1/c.v[u-1];for(let g=0;g<t.nrows;g++)d[g]=(v[g]-h)*m}return s?[f,a,c]:f}function Pi(t,e,r){return t<e?["regular","in"]:t>r?["outlier","out"]:["extreme","out"]}function Zf(t,e,r,s,o,a,c,f){if(!f||f.length===0)return[0,0];let u=0,v=0;for(let d of f){const h=t[d],[m,g]=Pi(h,e,r);a[m]+=1,c[g]+=1,s[d]=m,o[d]=g,u=u+(g==="in"),v=v+(g!=="in")}return[u,v]}function Li(t,e,r,s,o,a,c,f,u){if(!u||u.length===0)return[0,0,0,0,0,0,0,0,0,0];let v=0,d=0;for(let Y of u){const V=t[Y],[R,U]=Pi(V,r,s);f[U]+=1,o[Y]="alien",c.alien+=1,a[Y]=U,v=v+(U!=="in"),d=d+(U==="in")}const h=u.slice();h.sort((Y,V)=>t[Y]-t[V]);let m=h.length;const g=h.map(Y=>t[Y]);let p=-1,_=0,b=0,w=0,k=0;for(;p<0;)_>0&&(o[h[m-1]]="external",c.alien=c.alien-1,c.external=c.external+1,m=m-1,h.pop(),g.pop()),b=Mn(g),w=il(g),k=w/(b*b),p=4-2*e*k,_=_+1;const E=(2+Math.sqrt(p))/k,y=E-e,A=b/E,S=r/A,j=1-2*(e+y)*(e+3*y)/(3*(e+2*y)**2),z=(j-1)*(1-3*j),T=(e+2*y)/(e+y)**2,B=1+j*T*(j-1-.5*(2-j)*z*T),C=j*Math.sqrt(2*T)*(1+.5*z*T),q=uo((Math.pow(S/(e+y),j)-B)/C);return[v,d,q,y,A,j,B,C,e,b]}function ko(t,e,r,s,o){(!o||!Array.isArray(o))&&(o=[]);let a=t.exclvars;(!a||!Array.isArray(a))&&(a=[]);const c=r.values.nrows,f=o.length,u=c-f,v=r.sep,d=e.classes&&e.classes.length===u,h=d?["","","","",""]:["","","",""];let m="";if(m+=["Reference classes:",d?"provided":"not provided",...h].join(v)+`
`,m+=["Center:",t.center?"yes":"no",...h].join(v)+`
`,m+=["Scale:",t.scale?"yes":"no",...h].join(v)+`
`,m+=["Alpha:",(t.alpha/100).toFixed(3),...h].join(v)+`
`,m+=["Limits estimator:",t.limType,...h].join(v)+`
`,m+=`
`,m+=["Nf:",e.Nf,...h].join(v)+`
`,m+=`
`,m+=["F crit (extremes):",t.eCrit,...h].join(v)+`
`,m+=["F crit (outliers):",t.oCrit,...h].join(v)+`
`,m+=`
`,a.length>0&&(m+=["Number of excluded variables:",a.length,...h].join(v)+`
`,m+=["Indices of excluded variables:",lv(a),...h].join(v)+`
`,m+=`
`),m+=["Objects:",c,...h].join(v)+`
`,m+=["In:",e.outcomes.decsNum.in,...h].join(v)+`
`,m+=["Out:",e.outcomes.decsNum.out,...h].join(v)+`
`,m+=["Excluded:",f,...h].join(v)+`
`,e.nMembers>0&&(m+=`
`,m+=["Members:",e.nMembers,...h].join(v)+`
`,m+=["Regular:",e.outcomes.rolsNum.regular,...h].join(v)+`
`,m+=["Extreme:",e.outcomes.rolsNum.extreme,...h].join(v)+`
`,m+=["Outliers:",e.outcomes.rolsNum.outlier,...h].join(v)+`
`,m+=["Sensitivity:",e.outcomes.stat.sensitivity,...h].join(v)+`
`),e.nStrangers>0&&(m+=`
`,m+=["Strangers:",e.nStrangers,...h].join(v)+`
`,m+=["In:",e.outcomes.decsNum.in-e.outcomes.rolsNum.regular,...h].join(v)+`
`,m+=["Aliens:",e.outcomes.rolsNum.alien,...h].join(v)+`
`,m+=["External:",e.outcomes.rolsNum.external,...h].join(v)+`
`,m+=["Specificity:",e.outcomes.stat.specificity,...h].join(v)+`
`,m+=["Selectivity:",e.outcomes.stat.selectivity,...h].join(v)+`
`,m+=`
`,m+=["Beta:",e.beta,...h].join(v)+`
`,m+=["Non-centrality (s):",e.s,...h].join(v)+`
`,m+=["Scaling (f0):",e.f0,...h].join(v)+`
`,e.nMembers>0)){const k=e.outcomes.TP/(e.outcomes.TP+e.outcomes.FP),E=e.outcomes.stat.sensitivity,y=1-e.outcomes.stat.specificity,A=2*k*E/(k+E),S=E/y,j=(1-E)/(1-y);m+=`
`,m+=["Efficiency:",e.outcomes.stat.efficiency,...h].join(v)+`
`,m+=["Accuracy:",e.outcomes.stat.accuracy,...h].join(v)+`
`,m+=["Precision:",k,...h].join(v)+`
`,m+=["F1-score:",A,...h].join(v)+`
`,m+=["PLR:",S,...h].join(v)+`
`,m+=["NLR:",j,...h].join(v)+`
`}m+=`
`,m+=["","object","class","role","decision","f"].join(v)+`
`;let g=0;for(let k=0;k<c;k++){if(f>0&&o.includes(k)){m+=["",r.objlabels[k],"-","removed","-","-"].join(v)+`
`;continue}m+=["",r.objlabels[k],e.classes[g],e.outcomes.rols[g],e.outcomes.decs[g],e.outcomes.f[g]].join(v)+`
`,g=g+1}m+=`
`,r.dec!=="."&&(m=m.replace(/\./g,r.dec)),m=["Target class:",t.className,...h].join(v)+`
`+m,m=["Data filename:",r.fileName,...h].join(v)+`
`+m;let p=["NIMCA results ("+s+")","https://mda.tools/nimca/",...h].join(v)+`

`;const _=new Blob([p+m],{type:"text/csv"}),b=window.URL.createObjectURL(_),w=document.createElement("a");w.setAttribute("href",b),w.setAttribute("download",`nimca-results-${s}.csv`),w.click()}function Eo(t,e){const r={nimca:t.asJSON(),prep:e},s=new Blob([JSON.stringify(r,Ps)],{type:"application/json"}),o=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download","nimca-model.json"),a.click()}const Zo=class Zo{constructor(e,r,s,o,a,c,f){Ne(this,is);this.d=e,this.ind=r,this.objlabels=s,this.objindices=o,this.classes=a,this.classNames=c,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,be(this,is,N(()=>f.oCrit&&f.eCrit?this.getOutcomes(f):null))}get outcomes(){return l(K(this,is))}set outcomes(e){F(K(this,is),e)}getOutcomes(e){const r=this.d.apply(T=>T/e.f0*e.Nf).v,s=new Array(this.nrows),o=new Array(this.nrows),a={regular:0,extreme:0,outlier:0,alien:0,external:0},c={in:0,out:0},[f,u]=Zf(r,e.eCrit,e.oCrit,o,s,a,c,this.ind.members),[v,d,h,m,g,p,_,b,w,k]=Li(r,e.Nf,e.eCrit,e.oCrit,o,s,a,c,this.ind.strangers);this.nUnknown>0&&Li(r,e.Nf,e.eCrit,e.oCrit,o,s,a,c,this.ind.unknown);const E=f>0?f/(f+u):0,y=v>0?v/(v+d):0,A=1-h,S=Math.sqrt(E*y),j=f>0&&v>0?(f+v)/(f+v+d+u):0,z={sensitivity:E,specificity:y,selectivity:A,efficiency:S,accuracy:j};return{Nf:e.Nf,f:r,decs:s,rols:o,decsNum:c,rolsNum:a,TP:f,FN:u,TN:v,FP:d,beta:h,s:m,f0:g,hz:p,Mz:_,Sz:b,k:w,m:k,stat:z}}toJSON(){return null}static fromJSON(e){return new Zo(...e)}};is=new WeakMap;let Ao=Zo;const bs=class bs{constructor(e,r,s,o,a,c,f,u,v,d,h,m,g,p,_,b="nimca-model"){Ne(this,cs);Ne(this,us);Ne(this,fs);Ne(this,vs);Ne(this,ds);Ne(this,hs);Ne(this,ms);Ne(this,gs);Ne(this,ps);this.mX=r,this.sX=s,this.nrows=o,this.ncols=a,this.className=e,this.Nfc=c,this.Nfr=f,this.f0c=u,this.f0r=v,this.hash=d,this.class=["nimcamodel"],this.fileName=b,this.center=p,this.scale=_,be(this,cs,re(Me(h))),be(this,us,re(Me(m))),be(this,fs,re(Me(g))),be(this,vs,N(()=>this.limType==="classic"?this.Nfc:this.Nfr)),be(this,ds,N(()=>this.limType==="classic"?this.f0c:this.f0r)),be(this,hs,N(()=>1-Number.parseFloat(this.alpha)/100)),be(this,ms,N(()=>Math.pow(1-this.gamma/100,1/o))),be(this,gs,N(()=>jn(this.eConfLim,this.Nf))),be(this,ps,N(()=>jn(this.oConfLim,this.Nf)))}get alpha(){return l(K(this,cs))}set alpha(e){F(K(this,cs),e,!0)}get gamma(){return l(K(this,us))}set gamma(e){F(K(this,us),e,!0)}get limType(){return l(K(this,fs))}set limType(e){F(K(this,fs),e,!0)}get Nf(){return l(K(this,vs))}set Nf(e){F(K(this,vs),e)}get f0(){return l(K(this,ds))}set f0(e){F(K(this,ds),e)}get eConfLim(){return l(K(this,hs))}set eConfLim(e){F(K(this,hs),e)}get oConfLim(){return l(K(this,ms))}set oConfLim(e){F(K(this,ms),e)}get eCrit(){return l(K(this,gs))}set eCrit(e){F(K(this,gs),e)}get oCrit(){return l(K(this,ps))}set oCrit(e){F(K(this,ps),e)}predict(e){if(!e.values||!gr(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=bs.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let o=0;o<e.classes.length;o++)e.classes[o]===this.className?s.members.push(o):s.strangers.push(o);else s.unknown=qr(0,e.values.nrows-1);return new Ao(r,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r,s,o={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let a=e.values;const c=e.classNames[0];if(!gr(a))throw new Error("nimca.fit: X must be a matrix.");const f=r?a.apply(Mn,2):De.zeros(a.ncols),u=s?a.apply(al,2):De.ones(a.ncols),v=bs.getDistance(a,f,u),d=Mn(v),h=il(v);let m=Math.round(2*d*d/h);m<1&&(m=1),m>250&&(m=250);const g=kf(v),p=Ef(v),_=p/g;let b;_>2.685592117?b=1:_<.194565995?b=100:b=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/_),1.185785)));const w=.5*b*(g/jn(.5,b)+p/(jn(.75,b)-jn(.25,b)));return new bs(c,f,u,a.nrows,a.ncols,m,b,d,w,zi(),o.alpha,o.gamma,o.limType,r,s)}static fromJSON(e){const{__type:r,mX:s,sX:o,nrows:a,ncols:c,className:f,Nfc:u,Nfr:v,f0c:d,f0r:h,hash:m,alpha:g,gamma:p,limType:_,fileName:b,center:w,scale:k}=e;return new bs(f,s,o,a,c,u,v,d,h,m,g,p,_,w,k,b)}static getDistance(e,r,s){const o=Qf(e,r,s),a=o.nrows,c=o.ncols,f=De.zeros(a);for(let u=0;u<c;u++){const v=o.getcolref(u+1);for(let d=0;d<a;d++)f.v[d]+=v[d]**2}return f}};cs=new WeakMap,us=new WeakMap,fs=new WeakMap,vs=new WeakMap,ds=new WeakMap,hs=new WeakMap,ms=new WeakMap,gs=new WeakMap,ps=new WeakMap;let or=bs;function qr(t,e,r=1){const s=Math.round((e-t+1)/r),o=Array(s);for(let a=0;a<s;a++)o[a]=t+a*r;return o}function Ri(t,e){let r,s,o,a=[];if(e.length>0){const c=t.values.nrows,f=t.objindices,u=c-e.length;r=Array(u),s=Array(u),o=Array(u);let v=0;for(let d=0;d<c;d++)e.includes(d)||(r[v]=f[d],s[v]=t.classes[d],o[v]=t.objlabels[d],(a.length===0||!a.includes(s[v]))&&a.push(s[v]),v=v+1)}else r=t.objindices,o=t.objlabels,s=t.classes,a=t.classNames;return[r,o,s,a]}function zi(){const t=new Date;return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}${t.getDate().toString().padStart(2,"0")}${t.getHours().toString().padStart(2,"0")}${t.getMinutes().toString().padStart(2,"0")}${t.getSeconds().toString().padStart(2,"0")}${t.getMilliseconds().toString().padStart(3,"0")}`}function $f(t,e,r,s,o=!1){const[a,c,f]=Ri(r,s),u=o&&e.prep&&e.prep.ml&&e.prep.ml.length>0?js(t,r.values,0,e.prep,!1,!0):r.values,v=Xf(t,e,u,s);v.hash=zi(),v.objindices=a,v.objlabels=c,v.classes=f,v.classNames=r.classNames,v.varlabels=r.varlabels,v.eigenvals=Fr(e,"eigenvals"),v.cNh=Fr(e,"cNh"),v.cNq=Fr(e,"cNq"),v.ch0=Fr(e,"ch0"),v.cq0=Fr(e,"cq0"),v.rNh=Fr(e,"rNh"),v.rNq=Fr(e,"rNq"),v.rh0=Fr(e,"rh0"),v.rq0=Fr(e,"rq0");const d=e.nrows;return v.T2lim=2*(d-1)/(d-2)*bi(.95,2,d-2),v}function ev(t,e="."){return Array.isArray(t)&&t.length>0?e==="."?t.map(r=>Number.parseFloat(r.trim())):t.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(t.trim()):Number.parseFloat(t.trim().replace(e,"."))}function Ts(t){return t.some(e=>Number.isNaN(e))}function Tn(t){return t.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ii(t){let e=t.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function tv(t,e,r,s,o,a,c,f=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let v=Ii(t);if(v.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");v=v.filter(R=>R.replaceAll(e,"").trim().length>0);const d=v[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,m;const g=r!=="no";(g||g===void 0&&Ts(firstRow))&&(m=d,h=1);const p=v.length-h;if(p<1)throw new Error("Data file should contain at least 1 row with values.");f===-1&&(f=p);let _,b,w,k=Array(p);s?(_=g?Tn(m[0]):"",w=Array(p),b=1):(_="",w=[],b=0);let E,y=[],A;o?(E=g?Tn(m[b]):"",A=Array(p),b=b+1):(E="",A=[]);const S=d.length-b;if(S<1)throw new Error("Data file should contain at least 1 column with values.");const j=Jt.zeros(S,p);for(let R=h;R<p+h;R++){const U=R-h;k[U]=U;let Z=v[R].split(e);if(s&&(w[U]=Z[0],Z.shift()),o){const Q=Z[0];A[U]=Q,Z.shift(),(y.length===0||y.indexOf(Q)<0)&&y.push(Q)}const J=u==="."?Z.map((Q,se)=>Number.parseFloat(Q.trim())):Z.map((Q,se)=>Number.parseFloat(Q.trim().replace(u,".")));if(J.some(Q=>Number.isNaN(Q)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(J.length!=S)throw new Error("Wrong number of values in row #"+R);j.v.set(new Float64Array(J),(R-h)*S)}if(!s||w.length!==p){w=Array(p);for(let R=0;R<p;R++)w[R]="O"+(R+1)}w=w.map(R=>Tn(R)),A=A.map(R=>Tn(R)),y=y.map(R=>Tn(R));let z,T=Array(S),B=Array(S);if(m&&m.length===S+b){z=m.map(R=>Tn(R)).slice(b);for(let R=0;R<S;R++)T[R]=R>=f?R-f:R,B[R]=R>=f?R-f+1:R+1}else{z=Array(S);for(let R=0;R<S;R++)T[R]=R>=f?R-f:R,z[R]=R>=f?"V"+(R-f+1):"Y"+(R+1),B[R]=R>=f?R-f+1:R+1}let C;if(r==="values"){if(C=u==="."?z.map((R,U)=>U<f?U:Number.parseFloat(R.trim())):z.map((R,U)=>U<f?U:Number.parseFloat(R.trim().replace(u,"."))),C.some(R=>Number.isNaN(R)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else C=B;Array.isArray(C)||(C=[]),a||(a=""),c||(c=""),a=C.length>0&&a.length>0?a:"Variables",c=C.length>0&&c.length>0?c:"";const q=a+(c.length>0?", "+c:""),Y=C[1]<C[0];return{values:j.t(),nresp:f,header:r,hasLabels:s,hasClassNames:o,labelsVarname:_,classLabelsVarname:E,objlabels:w,objindices:k,varlabels:z,varvalues:C,varindices:T,varrev:Y,classes:A,classNames:y,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:q}}function rv(t){if(Ts(t[0].slice(2)))return!0;const e=t[0].length,r=[];for(let s=2;s<e;s++){let o=[];for(let v=1;v<t.length;v++)o.push(t[v][s]);const a=t[0][s],c=Mn(o),f=al(o),u=Math.abs((a-c)/f);r.push(u)}return r.every(s=>s>5)}function nv(t){const r=t[0].split(","),s=t[1].split(","),o=r.length,a=s.length,c=";",f=t[0].split(c),u=t[1].split(c),v=f.length,d=u.length;let h,m;if(o>1&&a>1&&o===a&&o>v)m=",",h=o;else if(v>1&&d>1&&v===d)m=c,h=v;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[m,m===","?".":",",h]}function sv(t,e=0){const r=Ii(t),s=r.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[o,a,c]=nv(r),f=Math.min(c,5),u=Math.min(s,5);let v=r[0].split(o).length,d=r.slice(0,u).map(T=>T.split(o).slice(0,f));d=d.map(T=>T.map(B=>Tn(B)));const h=d.map(T=>ev(T.slice(),a));for(let T=1;T<u;T++)if(Ts(h[T].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const m=rv(h);let g=0;const p=m?1:0,_=p+1,b=d[p][0],w=d[_][0],k=h[p][0],E=h[_][0],y=h[p][1],A=h[_][1];let S=!1,j=!1;if(Number.isNaN(k)&&Number.isNaN(E)&&b!==w?(S=!0,g=g+1):Number.isNaN(y)&&Number.isNaN(A)&&b!==w&&(S=!0,j=!0,g=g+2),!j){const T=S?1:0,B=h[p][T],C=h[_][T];j=Ts([B,C]),g=g+j}let z="no";if(m){g>0?d[0].slice(g+e):d[e];const T=g>0?h[0].slice(g+e):h[e];z=Ts(T)?"labels":"values"}return[o,S,j,z,v]}function es(t,e){if(!e||e.length===0)return t;const[r,s,o,a]=Ri(t,e);return{values:t.values.subset(r.map(f=>f+1),[]),objlabels:s,objindices:r,classes:o,classNames:a,header:t.header,hasLabels:t.hasLabels,hasClassNames:t.hasClassNames,classNames:t.classNames,labelsVarname:t.labelsVarname,classLabelsVarname:t.classLabelsVarname,varlabels:t.varlabels,varvalues:t.varvalues,varindices:t.varindices,varrev:t.varrev,responses:t.responses,sep:t.sep,dec:t.dec,varvaluesName:t.varvaluesName,varvaluesUnits:t.varvaluesUnits,varAxisTitle:t.varAxisTitle,fileName:t.fileName,nresp:t.nresp}}function lv(t){if(!t.length)return"";t.sort((o,a)=>o-a);let e=[],r=t[0],s=r;for(let o=1;o<t.length;o++)t[o]===s+1?s=t[o]:(r===s?e.push(`${r}`):e.push(`${r}-${s}`),r=t[o],s=r);return r===s?e.push(`${r}`):e.push(`${r}-${s}`),e.join(" ")}function Ps(t,e){return gr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:qe(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof or?e.asJSON():e}function So(t,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Uf(e.v,e.nrows,e.ncols);if(e.__type==="vector")return ht(e.v);if(e.__type==="NIMCA")return or.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function Co(t){const e=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${e}${r}${s}${o}${a}${c}`}function Fi(t){return Array.from({length:8},(e,r)=>t>>7-r&1).reverse()}function dl(t,e,r){let s="";for(let o=0;o<e;o++){const a=t.getUint8(r++);if(a===0)break;s+=String.fromCharCode(a)}return s}function ov(t){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],o=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let a=0;const c=t.getUint8(a);a+=1;const f=t.getUint8(a);if(a+=1,f===77)throw new Error("SPC file has old format which is not supported.");const u=f===75,v=t.getUint8(a);a+=1;const d=t.getInt8(a);a+=1;const h=t.getUint32(a,u);a+=4;const m=t.getFloat64(a,u);a+=8;const g=t.getFloat64(a,u);a+=8;const p=t.getUint32(a,u);a+=4;const _=t.getUint8(a);a+=1;const b=t.getUint8(a);a+=1;const w=t.getUint8(a);a+=1;const k=t.getUint8(a);a+=1;const E=t.getUint32(a,u);a+=4;const y=dl(t,9,a);a+=9;const A=dl(t,9,a);a+=9;const S=t.getUint16(a,u);a+=2;const j=Array.from({length:8},()=>{const ie=t.getFloat32(a,u);return a+=4,ie}),z=dl(t,130,a);a+=130;const T=dl(t,30,a);a+=30;const B=t.getUint32(a,u);a+=4;const[C,q,Y,V,R,U,Z,J]=Fi(c),Q=_===255?r[31]:r[_],se=_===255?e[31]:e[_],le=b<=26?s[b]:b>=128&&b<=131?o[b]:"Unknown";return{ftflgsv:c,ftflgs:{TSPREC:C,TCGRAM:q,TMULTI:Y,TRANDM:V,TORDRD:R,TALABS:U,TXYXYS:Z,TXVALS:J},fexper:v,fexp:d,fnpts:h,ffirst:m,flast:g,fnsub:p,fxtype:_,fytype:b,fztype:w,fpost:k,fdate:E,fres:y,fsource:A,fpeakpt:S,fspare:j,fcmnt:z,fcatxt:T,flogoff:B,xaxisName:Q,xaxisUnit:se,yaxisName:le}}function av(t,e){const r=Fi(t.getUint8(e));e+=1;const s=t.getInt8(e);e+=1;const o=t.getUint16(e,!0);e+=2;const a=t.getFloat32(e,!0);e+=4;const c=t.getFloat32(e,!0);e+=4;const f=t.getFloat32(e,!0);e+=4;const u=t.getInt32(e,!0);e+=4;const v=t.getInt32(e,!0);e+=4;const d=t.getFloat32(e,!0);return e+=4,{flags:r,exp:s,index:o,time:a,next:c,noise:f,nPoints:u,nScans:v,wAxis:d}}async function qi(t){if(t.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${t.name}).`);const r=t.name.slice(0,-4),s=await t.arrayBuffer(),o=new DataView(s);let a=0;const c=ov(o);a+=512;const f=c.fnpts;if(f<2)throw new Error(`Error reading SPC file (${t.name}).`);let u=new Array(f);if(c.ftflgs.TXVALS)for(let h=0;h<f;h++){const m=o.getFloat32(a,!0);a=a+4,u[h]=m}else{(c.flast-c.ffirst)/(f-1);for(let h=0;h<f;h++)u[h]=c.ffirst+h*c.flast}const v=new Float64Array(f*c.fnsub);for(let h=0;h<c.fnsub;h++){av(o,a),a=a+32;for(let m=0;m<f;m++){const g=o.getFloat32(a,!0);a=a+4,v[h*f+m]=g}}const d=[];return c.fnsub>1?qr(1,c.fnsub).forEach(m=>{d.push(r+"_"+m)}):d.push(r),{hdr:c,xvalues:u,yvalues:v,objlabels:d}}async function iv(t){if(!(t instanceof FileList||Array.isArray(t)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=t.length,r=[];let s=[],o=[];const a=await qi(t[0]),c=a.xvalues.length;if(r.push(a.yvalues),s=s.concat(a.objlabels),o.push(a.hdr.fnsub),e>1)for(let p=1;p<e;p++){const _=await qi(t[p]);if(_.xvalues.length!==c)throw new Error("Number of spectral values in SPC files is different.");r.push(_.yvalues),s=s.concat(_.objlabels),o.push(_.hdr.fnsub)}const f=o.reduce((p,_)=>p+_,0),u=new Float64Array(f*c);let v=0;for(let p=0;p<r.length;p++)u.set(r[p].slice(),v),v+=o[p]*c;const d=new Jt(u,c,f),h=qr(0,c-1),m=qr(0,f-1),g=a.xvalues.map(p=>p.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:m,varlabels:g,varvalues:a.xvalues,varindices:h,varev:a.xvalues[1]<a.xvalues[0],sep:",",dec:".",varvaluesName:a.hdr.xaxisName,varvaluesUnits:a.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}var cv=H('<button tabindex="0" class="button svelte-1to1iow"> </button>');function Nt(t,e){let r=O(e,"text",3,"button");var s=cv();s.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var o=L(s);$(()=>ve(o,r())),M(t,s)}vt(["click"]);var uv=H('<button tabindex="0"></button>');function ts(t,e){O(e,"disable",3,!1);var r=uv();r.__click=function(...s){var o;(o=e.onclick)==null||o.apply(this,s)},$(()=>{I(r,"title",e.title),I(r,"aria-label",e.title),I(r,"alt",e.title),xt(r,1,`button ${e.className??""}`,"svelte-qbt64")}),M(t,r)}vt(["click"]);function tn(t,e){let r=O(e,"title",3,"Reset");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function fv(t,e){let r=O(e,"title",3,"Undo");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function vv(t,e){let r=O(e,"title",3,"Add");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function Oi(t,e){let r=O(e,"title",3,"Settings");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function dv(t,e){let r=O(e,"title",3,"Move up");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function hv(t,e){let r=O(e,"title",3,"Move down");ts(t,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}function Pn(t){const e={};for(const r of Object.keys(t))e[r]=t[r].default;return e}var mv=H('<span class="label svelte-1bhp5bp"> </span>'),gv=H("<div><!> <!></div>");function ae(t,e){let r=O(e,"label",3,null),s=O(e,"name",3,""),o=O(e,"status",3,""),a=O(e,"colors",3,""),c=O(e,"labelWidth",3,12);var f=gv(),u=L(f);{var v=h=>{var m=mv(),g=L(m);$(()=>{gt(m,`flex-basis:${c()??""}ch;`),ve(g,r())}),M(h,m)};D(u,h=>{r()&&h(v)})}var d=P(u,2);Rr(d,()=>e.children??jt),$(()=>{xt(f,1,`control-element ${s()??""} ${o()??""}`,"svelte-1bhp5bp"),gt(f,a())}),M(t,f)}const Bi=(t,e,r,s)=>{const o=e(t);o<0||o>1||F(r,o*100>l(s)-5&&o*100<l(s)+5,!0)},Di=(t,e,r,s,o,a)=>{F(e,!1);const c=r(t);c<0||c>1||(s(o(c)),a()&&a()(s()))},Vi=(t,e,r,s,o,a)=>{if(!l(e))return;const c=r(t);c<0||c>1||(s(o(c)),a()&&a()(s()))},pv=(t,e,r,s,o,a)=>{if(t.key==="ArrowLeft"){e(e()-r()<s()?s():e()-r()),o()&&o()(e());return}if(t.key==="ArrowRight"){e(e()+r()>a()?a():e()+r()),o()&&o()(e());return}};var bv=H('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function hl(t,e){me(e,!0);let r=O(e,"min",7,0),s=O(e,"max",3,100),o=O(e,"value",31,()=>Me(r())),a=O(e,"decNum",3,1),c=O(e,"step",19,()=>+((s()-r())/100).toFixed(4)),f=O(e,"onchange",3,null);fe(()=>{o()<r()&&(o(r()),f()&&f()(o())),o()>s()&&(o(s()),f()&&f()(o())),r()>s()&&r(s())});let u=re(void 0),v=re(void 0),d=re(!1);const h=S=>{const j=r()+S*(s()-r());return+(Math.round(j/c())*c()).toFixed(4)},m=S=>{const j=l(u).getBoundingClientRect(),z=l(v).getBoundingClientRect(),T=j.x,B=z.x+z.width;return(S.clientX-T)/(B-T)},g=S=>{F(d,!1)},p=S=>{let j=o()+c()*S.deltaY*.5;j<r()&&(j=r()),j>s()&&(j=s()),o(+(Math.round(j/c())*c()).toFixed(4)),S.preventDefault(),f()&&f()(o())},_=N(()=>r()===s()?100:(o()-r())/(s()-r())*100);var b=bv();b.__keydown=[pv,o,c,r,f,s],b.__mousemove=[Vi,d,m,o,h,f],b.__mousedown=[Bi,m,d,_],b.__mouseup=[Di,d,m,o,h,f],b.__touchmove=[Vi,d,m,o,h,f],b.__touchstart=[Bi,m,d,_],b.__touchend=[Di,d,m,o,h,f];var w=L(b);let k;var E=L(w);let y;var A=L(E);Cn(w,S=>F(u,S),()=>l(u)),Cn(b,S=>F(v,S),()=>l(v)),$((S,j,z)=>{I(b,"aria-valuenow",o()),I(b,"aria-valuemin",r()),I(b,"aria-valuemax",s()),k=xt(w,1,"range-slider svelte-7wycr",null,k,S),gt(w,`width:${l(_)??""}%`),y=xt(E,1,"range-value svelte-7wycr",null,y,j),ve(A,z)},[()=>({"range-slider_right":l(_)<50}),()=>({"range-value_right":l(_)<50}),()=>o().toFixed(a())]),En("mousewheel",b,p),En("mouseleave",b,g),En("touchcancel",b,g),M(t,b),ge()}vt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Yi=(t,e,r,s,o)=>{const a=e(t);a<0||a>1||F(r,a>l(s)&&a<l(o)+l(s),!0)},Ui=(t,e,r,s,o)=>{F(e,!1);const a=r(t);if(a<0||a>1)return;const c=s(a);o()!==c&&o(c)},Wi=(t,e,r,s,o)=>{if(!l(e))return;const a=r(t);if(a<0||a>1)return;const c=s(a);c!=o()&&o(c)},_v=(t,e,r,s,o)=>{if(t.key==="ArrowLeft"){e(e()-r()<s()?s():e()-r());return}if(t.key==="ArrowRight"){e(e()+r()>o()?o():e()+r());return}};var wv=H('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function Ls(t,e){me(e,!0);let r=O(e,"min",3,0),s=O(e,"max",3,10),o=O(e,"value",31,()=>Me(r())),a=O(e,"step",3,1);o()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(r())),o()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),o(s())),r()>s()&&console.error("The min and max values must be distinct.");let c=re(void 0),f=re(void 0),u=re(!1);const v=N(()=>r()===s()?0:(o()-r())/(s()-r()+a())),d=N(()=>a()/(s()-r()+a())),h=N(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${l(d)*100}%, var(--bg-color-light2, #e8e8e8) ${l(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*l(d)}%)`:"background: #f0f0f0"),m=S=>{if(S<0||S>1)return o();let j=o();return Math.round(l(d)/S),S<l(v)&&l(v)>0&&(j=o()-a()*Math.ceil((l(v)-S)/l(d))),S>l(v)+l(d)&&l(v)+l(d)<1&&(j=o()+a()*Math.ceil((S-(l(v)+l(d)))/l(d))),j<r()&&(j=r()),j>s()&&(j=s()),j},g=S=>{const j=l(f).getBoundingClientRect(),z=j.x,T=j.x+j.width;return(S.clientX-z)/(T-z)},p=S=>{F(u,!1)},_=S=>{let j=o()+Math.round(S.deltaY*.5)*a();j<r()&&(j=r()),j>s()&&(j=s()),o(j),S.preventDefault()};var b=wv();b.__keydown=[_v,o,a,r,s],b.__mousemove=[Wi,u,g,m,o],b.__mousedown=[Yi,g,u,v,d],b.__mouseup=[Ui,u,g,m,o],b.__touchmove=[Wi,u,g,m,o],b.__touchstart=[Yi,g,u,v,d],b.__touchend=[Ui,u,g,m,o];var w=L(b);let k;var E=L(w);let y;var A=L(E);Cn(w,S=>F(c,S),()=>l(c)),Cn(b,S=>F(f,S),()=>l(f)),$((S,j,z)=>{I(b,"aria-valuenow",o()),I(b,"aria-valuemin",r()),I(b,"aria-valuemax",s()),gt(b,l(h)),k=xt(w,1,"range-slider svelte-1lbks0y",null,k,S),gt(w,`width: max(2px, ${l(d)*100}%);left:${l(v)*100}%;`),y=xt(E,1,"range-value svelte-1lbks0y",null,y,j),ve(A,z)},[()=>({"range-slider_left":l(d)<.1&&l(v)<.5,"range-slider_right":l(d)<.1&&l(v)>=.5}),()=>({"range-value_right":l(d)<.1&&l(v)>.5,"range-value_left":l(d)<.1&&l(v)<=.5}),()=>o().toFixed(0)]),En("mousewheel",b,_),En("mouseleave",b,p),En("touchcancel",b,p),M(t,b),ge()}vt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const yv=(t,e,r)=>{if(t.key==="ArrowLeft"){const s=e.options.findIndex(o=>o===r());s>0&&r(e.options[s-1]);return}if(t.key==="ArrowRight"){const s=e.options.findIndex(o=>o===r());s<e.options.length-1&&r(e.options[s+1]);return}};var xv=(t,e,r)=>e(r),kv=H('<button tabindex="-1"><!></button>'),Ev=H('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function At(t,e){me(e,!0);let r=O(e,"value",31,()=>Me(e.options[0])),s=O(e,"className",3,"");var o=Ev(),a=G(o);a.__keydown=[yv,e,r],nt(a,20,()=>e.options,f=>f,(f,u)=>{var v=kv();v.__click=[xv,r,u];let d;var h=L(v);Tt(h,()=>u),$((m,g)=>d=xt(v,1,`option option_${m??""}`,"svelte-bifhtc",d,g),[()=>u.toString().replace(".","_"),()=>({selected:u==r()})]),M(f,v)});var c=P(a,2);$(()=>xt(a,1,`selector ${s()??""}`,"svelte-bifhtc")),li(c,r),M(t,o),ge()}vt(["keydown","click"]);function Ln(t,e){me(e,!0);let r=O(e,"options",19,()=>["no","yes"]),s=O(e,"value",15,!1),o=re(!0);const a=N(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());fe(()=>F(o,s()?r()[1]:r()[0],!0)),fe(()=>s(l(o)===r()[1]));var c=he(),f=G(c);{var u=v=>{At(v,{get options(){return l(a)},get value(){return l(o)},set value(d){F(o,d,!0)}})};D(f,v=>{l(a)&&v(u)})}M(t,c),ge()}function Hi(t,e,r){l(e)&&l(e).files.length>0?r(l(e).files.length===1?l(e).files[0]:l(e).files):r(null)}function Gi(t,e){(t.type==="click"||t.type==="keydown"&&(t.code==="Space"||t.code==="Enter"))&&l(e).click()}var Av=H('<input type="file" multiple class="svelte-xoa0sf"/>'),Sv=H('<input type="file" class="svelte-xoa0sf"/>'),Cv=H('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function ml(t,e){me(e,!0);let r=O(e,"file",15),s=O(e,"message",3,"Select CSV file with dataset"),o=O(e,"acceptType",3,".csv"),a=O(e,"multiple",3,!1),c=re(void 0);function f(w){l(c).value=null,r(null)}var u=Cv(),v=G(u);v.__keydown=[Gi,c],v.__click=[Gi,c];let d;var h=L(v),m=P(h);{var g=w=>{var k=Av();k.__change=[Hi,c,r],Cn(k,E=>F(c,E),()=>l(c)),$(()=>I(k,"accept",o())),M(w,k)},p=w=>{var k=Sv();k.__change=[Hi,c,r],Cn(k,E=>F(c,E),()=>l(c)),$(()=>I(k,"accept",o())),M(w,k)};D(m,w=>{a()?w(g):w(p,!1)})}var _=P(v,2);{var b=w=>{tn(w,{onclick:f})};D(_,w=>{r()&&w(b)})}$(w=>{d=xt(v,1,"file-selector svelte-xoa0sf",null,d,w),ve(h,`${(r()?r().name:s())??""} `)},[()=>({selected:r()})]),M(t,u),ge()}vt(["keydown","click","change"]);function Nv(t,e,r,s){e()&&F(r,e()(s()),!0)}var Mv=H('<div class="error-message svelte-11e14eb"> </div>'),jv=H('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function Xi(t,e){me(e,!0);let r=O(e,"value",15,""),s=O(e,"className",3,""),o=O(e,"placeholder",3,""),a=O(e,"maxLength",3,25),c=O(e,"validator",3,null),f=re("");var u=jv();let v;var d=L(u);d.__input=[Nv,c,f,r];var h=P(d,2);{var m=g=>{var p=Mv(),_=L(p);$(()=>ve(_,l(f))),M(g,p)};D(h,g=>{l(f)&&l(f).length>0&&g(m)})}$(g=>{v=xt(u,1,`textinput ${s()??""}`,"svelte-11e14eb",v,g),I(d,"placeholder",o()),I(d,"maxlength",a())},[()=>({error:l(f)&&l(f).length>0})]),li(d,r),M(t,u),ge()}vt(["input"]);var Tv=H('<div class="spinner svelte-wlgijz"></div>');function Pv(t){var e=Tv();M(t,e)}vt(["keydown","click"]),vt(["keydown","click"]);var Lv=H("<h2> </h2>"),Rv=H("<!> <!>",1),zv=H('<div class="widget"><!></div>');function Iv(t,e){me(e,!0);let r=O(e,"title",3,""),s=O(e,"value",15),o=O(e,"labelWidth",3,13);function a(v){const d={};for(const h of Object.keys(v))d[h]=v[h].default;return d}fe(()=>{!s()&&e.options&&s(a(e.options))});var c=zv(),f=L(c);{var u=v=>{var d=Rv(),h=G(d);{var m=p=>{ae(p,{children:(_,b)=>{var w=Lv(),k=L(w);$(()=>ve(k,r())),M(_,w)},$$slots:{default:!0}})};D(h,p=>{r()&&p(m)})}var g=P(h,2);nt(g,17,()=>Object.keys(e.options),lt,(p,_)=>{const b=N(()=>e.options[l(_)]);var w=he(),k=G(w);{var E=y=>{ae(y,{get name(){return l(b).name},get label(){return l(b).label},get labelWidth(){return o()},children:(A,S)=>{var j=he(),z=G(j);Ss(z,()=>l(b).el,(T,B)=>{B(T,sr(()=>l(b).props,{get value(){return s()[l(_)]},set value(C){s(s()[l(_)]=C,!0)}}))}),M(A,j)},$$slots:{default:!0}})};D(k,y=>{l(b).hidden||y(E)})}M(p,w)}),M(v,d)};D(f,v=>{s()&&v(u)})}M(t,c),ge()}var Fv=H('<span class="item svelte-igakmm"> </span>'),qv=H('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function No(t,e){me(e,!0);var r=he(),s=G(r);{var o=a=>{ae(a,{children:(c,f)=>{var u=qv(),v=G(u),d=P(L(v),2);nt(d,17,()=>e.outliers,lt,(p,_)=>{var b=Fv(),w=L(b);$(()=>ve(w,e.dataset.objlabels[l(_)])),M(p,b)});var h=P(v,2);{var m=p=>{fv(p,{get onclick(){return e.undoOutliers}})};D(h,p=>{e.outliers.length>1&&p(m)})}var g=P(h,2);tn(g,{get onclick(){return e.resetOutliers}}),M(c,u)},$$slots:{default:!0}})};D(s,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(o)})}M(t,r),ge()}function Ov(t,e){let r=0,s=0;t.nresp>0&&(r=new De(t.values.v.slice(0,t.nresp*t.values.nrows-1)),s=t.nresp);const o=new Jt(t.values.v.slice(s*t.values.nrows),t.values.nrows,t.values.ncols-s).t(),a=o.ncols<e?1:Math.round(o.ncols/e),c=Ft.seq(1,o.ncols,a),f=o.subset(null,c),u=r?r.subset(c):null,v=t.classes?t.classes.filter((d,h)=>c.v.includes(h)):null;return{classNames:t.classNames,classes:v,resp:u,values:f,varvalues:t.varvalues.filter((d,h)=>h>=s),varindices:t.varindices.filter((d,h)=>h>=s),varaxisLabel:t.varvaluesUnits?t.varvaluesName+" "+t.varvaluesUnits:t.varvaluesName,varaxisUnits:t.varvaluesUnits}}function Mo(t,e){return{values:e||t.values.copy(),varvalues:t.varvalues,varindices:t.varindices,varaxisLabel:t.varaxisLabel}}function jo(t,e){if(!e||e.nrows!==t.values.nrows||e.ncols!==t.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(t);return r.values=e,r}const Bv=t=>t;function Ki(t,{delay:e=0,duration:r=400,easing:s=Bv}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:r,easing:s,css:a=>`opacity: ${a*o}`}}var Dv=H('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function Ji(t,e){me(e,!0);let r=O(e,"isDark",3,!1);function s(h){h.key==="Escape"&&e.closeModal()}var o=Dv();En("keydown",Wl,s);let a;var c=L(o),f=L(c),u=L(f);u.__click=function(...h){var m;(m=e.closeModal)==null||m.apply(this,h)};var v=P(f,2),d=L(v);Rr(d,()=>e.children),$(h=>a=xt(o,1,"drop svelte-oie633",null,a,h),[()=>({isdark:r()})]),si(7,o,()=>Ki),M(t,o),ge()}vt(["click"]);var Vv=H('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function To(t,e){me(e,!0);var r=he(),s=G(r);{var o=c=>{var f=Vv(),u=L(f),v=P(u),d=L(v);Tt(d,()=>Jf(e.prepmodel)),$(()=>ve(u,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),M(c,f)},a=c=>{var f=Ku("skipped");M(c,f)};D(s,c=>{e.prepmodel.ml?c(o):c(a,!1)})}M(t,r),ge()}var Yv=H('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),Uv=H('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Wv(t,e){me(e,!0);var r=he(),s=G(r);{var o=a=>{ae(a,{name:"info",children:(c,f)=>{var u=Uv(),v=G(u),d=P(L(v),3);{var h=b=>{var w=Yv(),k=P(G(w),2),E=L(k);$(()=>{I(k,"title",e.model.fileName),ve(E,e.model.fileName)}),M(b,w)};D(d,b=>{e.model.fileName&&b(h)})}var m=P(d),g=P(m,3);To(g,{get prepmodel(){return e.model}});var p=P(v,2);{var _=b=>{tn(b,{get onclick(){return e.reset}})};D(p,b=>{e.reset&&b(_)})}$(()=>ve(m,` ${e.model.npred??""} `)),M(c,u)},$$slots:{default:!0}})};D(s,a=>{e.model&&a(o)})}M(t,r),ge()}var Hv=H("<!> <!>",1),Gv=H("<p><!></p>"),Xv=H("<!> <!>",1);function Kv(t,e){me(e,!0);let r=O(e,"model",15),s=re(""),o=re("neutral"),a=re("");function c(b){try{const w=JSON.parse(b,So);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");w.fileName=l(v),r(w),F(o,"success"),F(a,"")}catch(w){console.log(w),r(null),F(o,"error"),F(a,w,!0)}}function f(b){const w=new FileReader;w.onload=()=>{c(w.result)},w.readAsText(l(s))}function u(){F(s,""),r(null),F(o,"neutral"),F(a,"")}fe(()=>{l(s)===null?(r(null),F(o,"neutral"),F(a,"")):(F(o,"neutral"),F(a,""))}),fe(()=>{(r()===null||r()===0)&&F(s,"")});let v=N(()=>l(s)?l(s).name.replace(/\.[^/.]+$/,""):"");var d=Xv(),h=G(d);{var m=b=>{var w=Hv(),k=G(w);Sn(k,()=>l(s),A=>{ae(A,{name:"file-selector",children:(S,j)=>{ml(S,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(s)},set file(z){F(s,z,!0)}})},$$slots:{default:!0}})});var E=P(k,2);{var y=A=>{ae(A,{name:"load-button",label:" ",children:(S,j)=>{Nt(S,{onclick:f,text:"Load"})},$$slots:{default:!0}})};D(E,A=>{l(s)&&A(y)})}M(b,w)},g=b=>{Wv(b,{get model(){return r()},reset:u})};D(h,b=>{r()?b(g,!1):b(m)})}var p=P(h,2);{var _=b=>{ae(b,{name:"error",status:"error",children:(w,k)=>{var E=Gv(),y=L(E);Tt(y,()=>l(a)),M(w,E)},$$slots:{default:!0}})};D(p,b=>{(l(o)==="error"||l(a))&&b(_)})}M(t,d),ge()}var Jv=H('<p class="title"> </p>'),Qv=H("<!>&nbsp;",1),Zv=H("<!> <!>",1),$v=H('<div class="method-open svelte-10os93"><!> <!> <!></div>'),ed=(t,e)=>e.open(e.pos),td=H('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function rs(t,e){me(e,!0);let r=O(e,"cancel",3,null);var s=he(),o=G(s);{var a=f=>{var u=$v(),v=L(u);ae(v,{children:(m,g)=>{var p=Jv(),_=L(p);$(()=>ve(_,e.title)),M(m,p)},$$slots:{default:!0}});var d=P(v,2);Rr(d,()=>e.children);var h=P(d,2);ae(h,{label:" ",children:(m,g)=>{var p=Zv(),_=G(p);{var b=k=>{var E=Qv(),y=G(E);Nt(y,{text:"Cancel",get onclick(){return r()}}),M(k,E)};D(_,k=>{r()&&k(b)})}var w=P(_,2);Nt(w,{text:"Save",get onclick(){return e.apply}}),M(m,p)},$$slots:{default:!0}}),si(3,u,()=>Ki,()=>({duration:10})),M(f,u)},c=f=>{ae(f,{children:(u,v)=>{var d=td(),h=G(d),m=L(h),g=P(m);g.__click=[ed,e];var p=L(g),_=P(h,2);dv(_,{onclick:()=>e.moveUp(e.pos)});var b=P(_,2);hv(b,{onclick:()=>e.moveDown(e.pos)});var w=P(b,2);tn(w,{onclick:()=>e.remove(e.pos)}),$(()=>{ve(m,`${e.title??""} `),ve(p,e.settings)}),M(u,d)},$$slots:{default:!0}})};D(o,f=>{e.isOpen?f(a):f(c,!1)})}M(t,s),ge()}vt(["click"]);var rd=H("<!> <!>",1);function nd(t,e){me(e,!0);let r=O(e,"params",31,()=>Me([0,0])),s=O(e,"varind",15),o=O(e,"settings",15),a=O(e,"nvars",3,0),c=Nn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const f={snv:0,area:1,length:2,var:3},u=Object.keys(f);let v=re(Me(u[r()[0]])),d=re(r()[1]+1);const h="Normalization";fe(()=>{o(l(v)+(l(v)==="var"?" #"+l(d):""))}),fe(()=>{l(v)==="var"?s(s()[0]=r()[1]>0?r()[1]:1,!0):s(s()[0]=-1,!0)}),fe(()=>{l(v)==="var"&&e.isOpen?s(s()[0]=r()[1],!0):s(s()[0]=-1,!0)}),fe(()=>{l(v)&&r(r()[0]=f[l(v)],!0)}),fe(()=>{l(d)&&r(r()[1]=l(d)-1,!0)}),rs(t,sr({id:"norm",title:h,get settings(){return o()},get isOpen(){return e.isOpen}},()=>c,{children:(m,g)=>{var p=rd(),_=G(p);ae(_,{label:"Type",children:(k,E)=>{At(k,{get options(){return u},get value(){return l(v)},set value(y){F(v,y,!0)}})},$$slots:{default:!0}});var b=P(_,2);{var w=k=>{ae(k,{label:"Variable index",children:(E,y)=>{Ls(E,{min:1,get max(){return a()},step:1,get value(){return l(d)},set value(A){F(d,A,!0)}})},$$slots:{default:!0}})};D(b,k=>{l(v)==="var"&&k(w)})}M(m,p)},$$slots:{default:!0}})),ge()}var sd=H("<!> <!> <!>",1);function ld(t,e){me(e,!0);let r=O(e,"params",31,()=>Me([3,1,0])),s=O(e,"settings",15),o=Nn(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const a=N(()=>{if(!e.nvars)return 3;const v=Math.round(e.nvars*.25);return v>39?39:v%2<1?v+1:v}),c=N(()=>r()[1]<2?[0,1]:[0,1,2]),f=N(()=>r()[0]<5?[1,2]:[1,2,3]);fe(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),fe(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),fe(()=>{s(r()[0]+", "+r()[1]+", "+r()[2])}),rs(t,sr({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>o,{children:(v,d)=>{var h=sd(),m=G(h);ae(m,{label:"Width",children:(_,b)=>{Ls(_,{min:3,get max(){return l(a)},step:2,get value(){return r()[0]},set value(w){r(r()[0]=w,!0)}})},$$slots:{default:!0}});var g=P(m,2);ae(g,{label:"Polynomial",children:(_,b)=>{At(_,{get options(){return l(f)},get value(){return r()[1]},set value(w){r(r()[1]=w,!0)}})},$$slots:{default:!0}});var p=P(g,2);ae(p,{label:"Derivative",children:(_,b)=>{At(_,{get options(){return l(c)},get value(){return r()[2]},set value(w){r(r()[2]=w,!0)}})},$$slots:{default:!0}}),M(v,h)},$$slots:{default:!0}})),ge()}var od=H("<!> <!>",1);function ad(t,e){me(e,!0);let r=O(e,"params",31,()=>Me([1,0]));O(e,"varind",27,()=>-1);let s=O(e,"settings",15);O(e,"nvars",3,0);let o=Nn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a={no:0,mean:1,median:2},c={no:0,sd:1,iqr:2,range:3,pareto:4},f=Object.keys(a),u=Object.keys(c);let v=re(Me(f[r()[0]])),d=re(Me(u[r()[1]]));const h="Scaling";fe(()=>{s(l(v)+"/"+l(d))}),fe(()=>{l(v)&&r(r()[0]=a[l(v)],!0)}),fe(()=>{l(d)&&r(r()[1]=c[l(d)],!0)}),rs(t,sr({id:"scale",title:h,get settings(){return s()}},()=>o,{children:(m,g)=>{var p=od(),_=G(p);ae(_,{label:"Center",children:(w,k)=>{At(w,{get options(){return f},get value(){return l(v)},set value(E){F(v,E,!0)}})},$$slots:{default:!0}});var b=P(_,2);ae(b,{label:"Scale",children:(w,k)=>{At(w,{get options(){return u},get value(){return l(d)},set value(E){F(d,E,!0)}})},$$slots:{default:!0}}),M(m,p)},$$slots:{default:!0}})),ge()}var id=H("<!> <!> <!>",1),cd=H("<!> <!> <!>",1);function ud(t,e){me(e,!0);let r=O(e,"params",31,()=>Me([0,1,.1]));O(e,"varind",27,()=>-1);let s=O(e,"settings",15,"");O(e,"nvars",3,0);let o=Nn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Baseline correction",c={emsc:0,als:1},f=Object.keys(c);function u(p){const _=Math.ceil(Math.log10(p));return Math.pow(10,_)}let v=re(Me(f[r()[0]])),d=re(Me(r()[2]>0?u(r()[2]).toString():"0.1")),h=N(()=>parseFloat(l(d))),m=N(()=>l(h)/10),g=N(()=>Math.ceil(-Math.log10(l(h)))+1);fe(()=>{if(l(v)!=="als")return;const p=parseFloat(l(d));(r()[2]<l(m)||r()[2]>p-l(m))&&r(r()[2]=l(m),!0)}),fe(()=>{s(l(v)+" ("+(l(v)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),fe(()=>{l(v)&&r(r()[0]=c[l(v)],!0)}),rs(t,sr({id:"scale",title:a,get settings(){return s()}},()=>o,{children:(p,_)=>{var b=cd(),w=G(b);ae(w,{label:"Type",children:(S,j)=>{At(S,{get options(){return f},get value(){return l(v)},set value(z){F(v,z,!0)}})},$$slots:{default:!0}});var k=P(w,2);{var E=S=>{var j=id(),z=G(j);ae(z,{label:"Lambda",children:(C,q)=>{hl(C,{min:1,max:7,step:.1,get value(){return r()[1]},set value(Y){r(r()[1]=Y,!0)}})},$$slots:{default:!0}});var T=P(z,2);ae(T,{label:"Penalty range",children:(C,q)=>{At(C,{options:["1","0.1","0.01"],get value(){return l(d)},set value(Y){F(d,Y,!0)}})},$$slots:{default:!0}});var B=P(T,2);ae(B,{label:"Penalty",children:(C,q)=>{{let Y=N(()=>l(h)-l(m));hl(C,{get min(){return l(m)},get max(){return l(Y)},get step(){return l(m)},get decNum(){return l(g)},get value(){return r()[2]},set value(V){r(r()[2]=V,!0)}})}},$$slots:{default:!0}}),M(S,j)};D(k,S=>{l(v)==="als"&&S(E)})}var y=P(k,2);{var A=S=>{ae(S,{label:"Polynomial",children:(j,z)=>{Ls(j,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(T){r(r()[1]=T,!0)}})},$$slots:{default:!0}})};D(y,S=>{l(v)==="emsc"&&S(A)})}M(p,b)},$$slots:{default:!0}})),ge()}var fd=H("<!> <!>",1);function vd(t,e){me(e,!0);let r=O(e,"params",15),s=O(e,"varind",15),o=O(e,"settings",15),a=Nn(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const c="Trim tails";let f=re(!1);const u=N(()=>e.nvars?Math.round(e.nvars*.1):1);fe(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-l(u))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+l(u))&&r(r()[1]=e.right,!0),s(s()[1]=r()[0],!0),s(s()[2]=r()[1],!0),F(f,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),F(f,!1))}),fe(()=>{o("left: "+r()[0]+" right: "+r()[1])}),rs(t,sr({id:"norm",title:c,get settings(){return o()},get isOpen(){return e.isOpen}},()=>a,{children:(v,d)=>{var h=he(),m=G(h);{var g=p=>{var _=fd(),b=G(_);ae(b,{label:"Left",children:(k,E)=>{{let y=N(()=>e.right-l(u));hl(k,{get min(){return e.left},get max(){return l(y)},step:1,decNum:0,get value(){return r()[0]},set value(A){r(r()[0]=A,!0)}})}},$$slots:{default:!0}});var w=P(b,2);ae(w,{label:"Right",children:(k,E)=>{{let y=N(()=>e.left+l(u));hl(k,{get min(){return l(y)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(A){r(r()[1]=A,!0)}})}},$$slots:{default:!0}}),M(p,_)};D(m,p=>{l(f)&&p(g)})}M(v,h)},$$slots:{default:!0}})),ge()}var dd=H("<!> <!>",1);function hd(t,e){me(e,!0);let r=O(e,"params",31,()=>Me([3,5]));O(e,"varind",27,()=>-1);let s=O(e,"settings",15);O(e,"nvars",3,0);let o=Nn(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const a="Spike removal";fe(()=>{s(r()[0]+"/"+r()[1])}),rs(t,sr({id:"scale",title:a,get settings(){return s()}},()=>o,{children:(c,f)=>{var u=dd(),v=G(u);ae(v,{label:"Window",children:(h,m)=>{Ls(h,{min:3,max:15,step:2,get value(){return r()[0]},set value(g){r(r()[0]=g,!0)}})},$$slots:{default:!0}});var d=P(v,2);ae(d,{label:"Threshold",children:(h,m)=>{Ls(h,{min:3,max:50,get value(){return r()[1]},set value(g){r(r()[1]=g,!0)}})},$$slots:{default:!0}}),M(c,u)},$$slots:{default:!0}})),ge()}var md=H("<h2>Selected methods</h2> <!>",1),gd=H("<p>No methods selected</p>"),pd=H("<p> </p>"),bd=H("<h2>Available methods</h2>"),_d=H("<p>Maximum number of methods is selected.</p>"),wd=H("<p> </p> <!>",1),yd=H('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function xd(t,e){me(e,!0);let r=O(e,"prepobj",31,()=>Me([])),s=O(e,"meta",15),o=O(e,"varind",31,()=>-1),a=O(e,"rawdataShort",15),c=O(e,"prepdataShort",15),f=O(e,"prepmodel",3,null),u=O(e,"reset",3,null),v=O(e,"finalize",3,null);const d=30,h=8,m={savgol:ld,norm:nd,scale:ad,baseline:ud,trim:vd,spikes:hd};let g=re("neutral"),p=re(""),_=re(void 0),b=re(""),w=re(Me([])),k=re(!1),E=re(Me([])),y=re(Me([]));s(new Array(h).fill(""));const A=N(()=>e.rawdata.values.ncols-e.rawdata.nresp);let S=Me(e.rawdata.values.nrows<3?Object.keys(m).filter(te=>te!=="scale"):Object.keys(m));z(),r().length!==0&&j();async function j(){r().length!==0&&F(_,e.WASM().then(te=>{F(g,"applying");const pe=Ti(te,a().values,0,r(),!0,[]),oe=js(te,a().values,0,pe,!0);c(Mo(a(),oe)),F(g,"success")}).catch(te=>{c(Mo(a())),console.error(te),F(g,"error"),F(p,te,!0)}),!0)}function z(){const te=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(te),F(E,[],!0),F(y,[],!0);return}let pe=[],oe=[],_e=0,ke=te;for(let ue of r())ue.id==="trim"?(pe.push(_e),oe.push(ke),ue.params[0]<_e&&(ue.params[0]=_e),ue.params[1]>ke&&(ue.params[1]=ke),_e=ue.params[0]>_e?ue.params[0]:_e,ke=ue.params[1]>0&&ue.params[1]<ke?ue.params[1]:ke):(pe.push(_e),oe.push(ke));F(E,pe,!0),F(y,oe,!0),e.setLeft(_e),e.setRight(ke)}function T(te){const pe=en.find(oe=>oe.id===te);pe&&(l(E).push(e.left),l(y).push(e.right),r().push({id:pe.id,params:pe.mp}),F(k,!0),F(b,r().length-1))}function B(){r().length<1||(l(E).pop(),l(y).pop(),r().pop(),F(k,!1),F(b,-1))}function C(te){if(te<=0)return;const pe=r()[te],oe=r()[te-1];r(r()[te-1]=pe,!0),r(r()[te]=oe,!0),U()}function q(te){if(te<0||te===r().length-1)return;const pe=r()[te],oe=r()[te+1];r(r()[te+1]=pe,!0),r(r()[te]=oe,!0),U()}function Y(te){te<0||te>=r().length||(r(r().filter((pe,oe)=>oe!==te)),U())}function V(te){F(b,te,!0)}function R(){F(b,null)}function U(){F(g,"neutral"),F(p,""),F(k,!1),F(b,null),f()&&u()(),z(),j(),o(o()[1]=-1,!0),o(o()[2]=-1,!0)}fe(()=>{e.rawdata&&!a()&&a(Ov(e.rawdata,d))}),fe(()=>{a()&&!c()&&c(Mo(a()))}),fe(()=>{(!r()||r().length===0)&&(F(w,[],!0),c(null),F(E,[],!0),F(y,[],!0),F(b,""),s(new Array(h).fill("")))});var Z=yd(),J=G(Z);let Q;var se=L(J);ae(se,{label:"",children:(te,pe)=>{var oe=md(),_e=P(G(oe),2);{var ke=ue=>{Oi(ue,{text:"edit",get onclick(){return u()}})};D(_e,ue=>{f()&&u()&&ue(ke)})}M(te,oe)},$$slots:{default:!0}});var le=P(se,2);{var ie=te=>{ae(te,{label:"",children:(pe,oe)=>{var _e=gd();M(pe,_e)},$$slots:{default:!0}})},ce=te=>{var pe=he(),oe=G(pe);nt(oe,17,r,lt,(_e,ke,ue)=>{const Te=N(()=>m[l(ke).id]);var Le=he(),Qe=G(Le);{var Ze=Ie=>{var ct=he(),tt=G(ct);{let Ge=N(()=>ue===l(b)),Qt=N(()=>l(k)?B:null);Ss(tt,()=>l(Te),(Or,Br)=>{Br(Or,{get isOpen(){return l(Ge)},get left(){return l(E)[ue]},get right(){return l(y)[ue]},pos:ue,get nvars(){return l(A)},moveUp:C,moveDown:q,apply:U,open:V,close:R,remove:Y,get cancel(){return l(Qt)},get params(){return l(ke).params},set params(we){l(ke).params=we},get varind(){return o()},set varind(we){o(we)},get settings(){return s()[ue]},set settings(we){s(s()[ue]=we,!0)}})})}M(Ie,ct)},Ye=Ie=>{var ct=he(),tt=G(ct);{let Ge=N(()=>ue===l(b)),Qt=N(()=>l(k)?B:null);Ss(tt,()=>l(Te),(Or,Br)=>{Br(Or,{pos:ue,get isOpen(){return l(Ge)},get left(){return l(E)[ue]},get right(){return l(y)[ue]},get nvars(){return l(A)},moveUp:C,moveDown:q,apply:U,open:V,close:R,remove:Y,get cancel(){return l(Qt)},get params(){return l(ke).params},set params(we){l(ke).params=we},get settings(){return s()[ue]},set settings(we){s(s()[ue]=we,!0)}})})}M(Ie,ct)};D(Qe,Ie=>{l(ke).id==="norm"||l(ke).id==="trim"?Ie(Ze):Ie(Ye,!1)})}M(_e,Le)}),M(te,pe)};D(le,te=>{r().length===0?te(ie):te(ce,!1)})}var ee=P(le,2);{var ne=te=>{ae(te,{status:"error",children:(pe,oe)=>{var _e=pd(),ke=L(_e);$(()=>ve(ke,l(p))),M(pe,_e)},$$slots:{default:!0}})};D(ee,te=>{(l(g)==="error"||l(p))&&te(ne)})}var Oe=P(J,2),Xe=L(Oe);{var Be=te=>{ae(te,{label:" ",children:(pe,oe)=>{Nt(pe,{get onclick(){return v()},text:"Finalize"})},$$slots:{default:!0}})};D(Xe,te=>{!f()&&!l(b)&&r().length>0&&te(Be)})}var je=P(Oe,2),Ce=L(je);ae(Ce,{label:"",children:(te,pe)=>{var oe=bd();M(te,oe)},$$slots:{default:!0}});var et=P(Ce,2);{var xe=te=>{ae(te,{label:"",children:(pe,oe)=>{var _e=_d();M(pe,_e)},$$slots:{default:!0}})},Ve=te=>{var pe=he(),oe=G(pe);nt(oe,17,()=>S,lt,(_e,ke)=>{const ue=N(()=>en.find(Te=>Te.id===l(ke)));ae(_e,{children:(Te,Le)=>{var Qe=wd(),Ze=G(Qe),Ye=L(Ze),Ie=P(Ze,2);vv(Ie,{onclick:()=>T(l(ue).id)}),$(()=>ve(Ye,l(ue).title)),M(Te,Qe)},$$slots:{default:!0}})}),M(te,pe)};D(et,te=>{r().length>=h?te(xe):te(Ve,!1)})}$(te=>Q=xt(J,1,"selected-methods-list svelte-9cg1zq",null,Q,te),[()=>({final:f()!==null&&f()!==void 0})]),M(t,Z),ge()}const kd={small:30,medium:40,large:50,xlarge:60},Ed={small:5,medium:8,large:12,xlarge:15},Ad={small:6,medium:10,large:14,xlarge:18},Po={small:4,medium:6,large:8,xlarge:10},Sd={small:12,medium:15,large:19,xlarge:21},Lo={small:11,medium:15,large:17,xlarge:19},Rs={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},ns=["●","◼","▲","▼","⬥","＋","✳","✕"],Cd=.8,Qi=.5,Nd={small:5,medium:8,large:12,xlarge:15},Pt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Zi(t,e){return Array.isArray(t)&&t.length===e&&!t.some(r=>r===void 0)&&!t.some(r=>isNaN(r))}function $i(t,e){if(t!=null&&(Array.isArray(t)&&(t=ht(t)),!(!qe(t)||t.length<1)))return t.apply(r=>Oo((r-e[1])*e[0]+e[2])).v}function pt(t,e){return $i(t,e.coords)}function Ro(t,e){return $i(t,e.objects)}function ec(t,e){if(t!=null&&(Array.isArray(t)&&(t=ht(t)),!(!qe(t)||t.length<1)))return t.apply(r=>(r-e[2])/e[0]+e[1]).v}function tc(t,e){return ec(t,e.coords)}function rc(t,e){return ec(t,e.objects)}function zo(t){return t===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${t.toString()}</tspan>`}function Rn(t){if(t===Math.round(t))return t;if(Math.abs(t)>10**6)return Math.round(t);if(Math.abs(t)<10**-6)return t;let e=t.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Io(t){if(t===void 0)return[0,void 0];if(t.length<1)return[0,void 0];if(t.length===1)return[0,[t[0].toString()]];let e=Rn(Math.abs(Ir(ui(t)))),r=0;if(e>=1)return e<100?[0,Array.from(t).map(a=>a.toFixed(0))]:(r=Math.ceil(Rn(Math.log10(e)))-2,[r,Array.from(t).map(a=>(a/Math.pow(10,r)).toFixed(0))]);let s=Math.ceil(-Rn(Math.log10(e)));return s<=2?[0,Array.from(t).map(o=>o.toFixed(s))]:(r=s-2,s=2,Rn(Math.abs(Ar(t)))<=10?[-r,Array.from(t).map(o=>(o*Math.pow(10,r)).toFixed(s))]:[-r,Array.from(t).map(o=>(o/Math.pow(10,r)).toString())])}function Dt(t,e,r){return Array.isArray(t)&&(t=ht(t)),qe(t)?t.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&t.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):t:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Fo(t,e,r,s){if(!t||!e||t.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=r.coords,a=s.coords;let c="";for(let f=0;f<t.length;f++){const u=Oo((t.v[f]-o[1])*o[0]+o[2]),v=Oo((e.v[f]-a[1])*a[0]+a[2]);c+=u+","+v+" "}return c}function nc(t,e){return t?Array.isArray(t)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==t.length?[null,"number of tick labels and values should be the same."]:[t.map(r=>rn(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function sc(t,e){if(Array.isArray(t)&&(t=ht(t)),!qe(t))return[null,"tick values must be provided as an array or as a vector."];if(t.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const r=new Set(t.v);if(t.length!==r.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],a=t.filter(c=>c>=s&c<=o);return a.length!==t.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function qo(t,e,r,s,o,a){o==null&&(o=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(t)return t;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const f=Math.abs(c[1]-c[0])*a,u=c[1]-c[0]-2*f,v=Math.floor(Math.log10(u)),d=1/Math.pow(10,v-1),h=Math.round(u*d)/d;let m=Md(h/r);o&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(m<1&&(m=1),m=Math.round(m)));let g=Math.ceil((c[0]+f)/m)*m,p=Math.floor((c[1]-f)/m)*m;Math.abs(c[0]-g)<m/10&&(g=g+m),Math.abs(c[1]-p)<m/10&&(p=p-m),r=Math.ceil(Rn((p-g)/m))+1,t=De.zeros(r);for(let _=0;_<r;_++)t.v[_]=g+m*_;if(Math.abs(m)<1){const _=Math.pow(10,1+Math.round(-Math.log10(m)));t=t.apply(b=>Math.round((b+Number.EPSILON)*_)/_)}return t.filter(_=>_>=c[0]&_<=c[1])}function Md(t,e){const r=Math.floor(Math.log10(t)),s=t/Math.pow(10,r);let o;return s<=1?o=1:s<=2?o=2:s<=5?o=5:o=10,o*Math.pow(10,r)}function Oo(t){return Math.round(t*10)/10}function jd(t,e){return e<300.2||t<400.2?"small":e<400.2||t<700.2?"medium":e<650.2||t<850.2?"large":"xlarge"}function lc(t,e){return t<400.2?"small":t<700.2?"medium":t<900.2?"large":"xlarge"}function Td(){const t=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;t[e]=r}return t}function Pd(t){let e=-1,r=Td();for(let s=0;s<t.length;s++)e=r[(e^t[s])&255]^e>>>8;return e^-1}function Ld(t,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const s=Pd(r),o=new Uint8Array(4);o[0]=s>>>24,o[1]=s>>>16,o[2]=s>>>8,o[3]=s&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(t,0),c.set(a,33),c.set(r,37),c.set(o,50),c}function Rd(t,e){const r=t.split(","),s=r[0],o=r[1],a=33/3*4,c=o.substring(0,a),f=o.substring(a),u=atob(c),v=new Uint8Array(u.length);for(let m=0;m<v.length;m++)v[m]=u.charCodeAt(m);const d=Ld(v,e),h=btoa(String.fromCharCode(...d));return[s,",",h,f].join("")}function zd(t,e,r,s,o){if(r||(r=10),s||(s=10),o||(o=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!t||!(t instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=r/2.54*o,c=s/2.54*o;setTimeout(()=>{const f=t.clientHeight,u=t.clientWidth;let v=Math.max(a/u,c/f),d=1;v<1&&(d=v,v=1);const h=document.createElement("canvas"),m=h.getContext("2d");h.width=u*(d<1?d:v),h.height=f*(d<1?d:v),t.setAttribute("width",u*v),t.setAttribute("height",f*v),m.fillStyle="white",m.fillRect(0,0,h.width,h.height),m.scale(v,v);const g=new XMLSerializer().serializeToString(t),p=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(p),b=new Image;b.onload=function(){d<0&&(b.width=b.width*d,b.height=b.height*d),m.drawImage(b,0,0,h.width,h.height);const w=h.toDataURL("image/png"),k=Rd(w,o),E=document.createElement("a");E.href=k,E.download=`${e}.png`,E.click()},b.src=_},20)}function Id(t,e){if(!t||!(t instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=t.clientHeight,s=t.clientWidth;t.setAttribute("width",s+"px"),t.setAttribute("height",r+"px"),t.setAttribute("viewBox",`0 0 ${s} ${r}`);const o=new Blob([t.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(o),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function Fd(t,e,r,s){const o=t.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":qd(e,r,s)})]).then(()=>{t.classList.add("copied"),t.textContent="✓ done",setTimeout(()=>{t.classList.remove("copied"),t.textContent=o},500)},a=>{console.error(a),t.classList.add("error"),t.textContent="x copy",setTimeout(()=>{t.classList.remove("error"),t.textContent=o},500)}).catch(a=>console.error(a))}async function qd(t,e,r){const s=t.clientHeight,o=t.clientWidth,a=Math.max(e/o,r/s),c=document.createElement("canvas"),f=c.getContext("2d");return c.width=o*a,c.height=s*a,f.scale(a,a),t.setAttribute("width",c.width),t.setAttribute("height",c.height),await new Promise((v,d)=>{const h=new XMLSerializer().serializeToString(t),m=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,p=g.createObjectURL(m),_=new Image;_.onload=function(){f.drawImage(_,0,0,c.width,c.height),g.revokeObjectURL(p),c.toBlob(function(b){b?v(b):d(new Error("Failed to create blob"))},"image/png")},_.onerror=function(b){d(b)},_.src=p})}function gl(t,e){return t>16&&(t=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][t-1]}function Od(t,e,r,s,o){let a=o.ticks,c=o.tickLabels,f=0;const u=qo(a,t,Ed[r.x],!0,o.whole),v=u.length,d=rc([Po[r.plot]],s)[0],h=De.fill(e[0],v),m=h.add(d),g=De.fill(e[1],v);if(c||(a?(f=0,c=a.v.map(z=>Rn(z).toString())):[f,c]=Io(u.v)),!c||c.length!==u.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[u,h],[u,g]],_=[[ht([t[0]]),ht([e[0]])],[ht([t[1]]),ht([e[0]])]],b=[[u,m],[u,h]],w=(t[1]-t[0])*.01,k=[[null,null],[[t[1]-(f>9?1:0)*w],[h.v[v-1]]]],E=zo(f),y=c.length,A=Math.abs(t[1]>t[0]?t[1]-u.v[y-1]:t[1]-u.v[0]),S=Math.abs(t[1]-t[0]),j=Math.abs(u.v[1]-u.v[0]);if(E.length>0&&A<S*.1&&A<j*.5){const z=t[1]>t[0]?y-1:0;c[z]=" "}return{grid:p,axisLine:_,tickCoords:b,tfCoords:k,ticks:a,tickLabels:c,tickFactor:f,tfLabel:E}}function Bd(t,e,r,s,o){let a=o.ticks,c=o.tickLabels,f=0;const u=qo(o.ticks,e,Ad[r.y],!0,o.whole),v=u.length,d=rc([Po[r.plot]],s)[0],h=De.fill(t[0],v),m=h.add(d),g=De.fill(t[1],v);if(c||(a?(f=0,c=a.v.map(j=>Rn(j).toString())):[f,c]=Io(u.v)),c.length!==u.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[h,u],[g,u]],_=[[ht([t[0]]),ht([e[0]])],[ht([t[0]]),ht([e[1]])]],b=[[h,u],[m,u]],w=[[[],[]],[[m.v[v-1]+(Math.abs(f)>9?3:2)*d],[e[1]]]],k=zo(f),E=c.length,y=Math.abs(e[1]>e[0]?e[1]-u.v[E-1]:e[1]-u.v[0]),A=Math.abs(e[1]-e[0]),S=Math.abs(u.v[1]-u.v[0]);if(k.length>0&&y<A*.1&&y<S*.5){const j=e[1]>e[0]?E-1:0;c[j]=" "}return{grid:p,axisLine:_,tickCoords:b,tfCoords:w,ticks:a,tickLabels:c,tickFactor:f,tfLabel:k}}function Dd(t){if(!t.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=qe(t.breaks)?t.breaks.v:t.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!t.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(t.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(t.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=t.colmap;let s,o;if(t.labels?(s=t.labels,o=0):[o,s]=Io(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=s.length===r.length;return{colmap:r,breaks:e,labels:s,isCentered:a,labelsFactor:o,fontSize:t.fontSize,labelColor:t.labelColor}}function Vd(t,e,r,s){const o=t.colmap.length,a=e*Cd,c=a/o,f=r[1]+(e-a)*.5,u=Nd[s.y],v=r[2]+u*Qi,d=v+u*(1+Qi),h=t.isCentered?c/2:0;return{start:f,top:v,height:u,width:c,dxl:h,ltop:d}}function zn(t,e,r){if(!t||!e||!r||typeof r!="function")return;const s=t.target;if(s.tagName===e){const o=Array.prototype.indexOf.call(s.parentNode.children,s);if(o<0)return;r(o),t.stopPropagation()}}function Yd(t,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(t.replace(/<(.|\n)*?>/g,"")).width}function Ud(t,e){const r="Arial",s=e/8,o=e*1.5,a=Array(t.length),c=Array(t.length);let f=0,u=0,v=0;for(let h=0;h<t.length;h++){const m=Yd("  "+t[h].label+"  ",e+"px "+r);v=m>v?m:v;const g=e*t[h].labelHeight+2*s;a[h]=g,c[h]=f,f=f+g,u=u+g}const d=o+2*s+v;return[c,a,o,s,u,d]}function Wd(t,e,r,s,o){const[a,c,f,u,v,d]=Ud(t.items,s*t.fontSize),h=t.position.includes("left")?e[0]+o:t.position.includes("right")?e[1]-d-o:(e[1]+e[0]-d)*.5,m=t.position.includes("top")?r[1]+o:t.position.includes("bottom")?r[0]-v-o:(r[1]+r[0]-v)*.5;return{lgl:h,lgt:m,lgw:d,lgh:v,ely:a,elh:c,elw:f,elp:u}}function rn(t){if(!t||t.length<1)return t;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function r(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,o="";for(;s<t.length;){const a=t[s];if((a==="^"||a==="_")&&s<t.length-1){const c=a==="^";if(s++,t[s]==="("){let f=s+1;for(;f<t.length&&t[f]!==")";)f++;const u=t.slice(s+1,f);o+=c?e(u):r(u),s=f+1}else if(t[s]==="-"||t[s]==="–"){const f=t.slice(s,s+2);o+=c?e(f):r(f),s=s+2}else o+=c?e(t[s]):r(t[s]),s++}else o+=a,s++}return o}var Hd=ye('<line vector-effect="non-scaling-stroke"></line>'),Gd=ye("<g></g>");function Bo(t,e){me(e,!0);let r=O(e,"lineCoords",19,()=>[]),s=O(e,"lineColor",19,()=>Pt.DARKGRAY),o=O(e,"lineType",3,1),a=O(e,"lineWidth",3,1),c=O(e,"className",3,"");const f=Yt("axes");let u=N(()=>pt(r()[0][0],f.tX())),v=N(()=>pt(r()[1][0],f.tX())),d=N(()=>pt(r()[0][1],f.tY())),h=N(()=>pt(r()[1][1],f.tY())),m=N(()=>`stroke:${s()};stroke-width: ${a()}px;stroke-dasharray:${Rs[f.scales().plot][o()-1]}`);var g=he(),p=G(g);{var _=b=>{var w=Gd();nt(w,21,()=>l(u),lt,(k,E,y)=>{var A=Hd();$(()=>{I(A,"x1",l(u)[y]),I(A,"x2",l(v)[y]),I(A,"y1",l(d)[y]),I(A,"y2",l(h)[y]),gt(A,l(m))}),M(k,A)}),$(()=>xt(w,0,nf(c()))),M(b,w)};D(p,b=>{l(u)&&l(d)&&l(v)&&b(_)})}M(t,g),ge()}var Xd=ye('<text text-anchor="middle"><!></text>'),Kd=ye("<text><!></text>"),Jd=ye("<text><!></text>"),Qd=ye('<g class="tick-labels"><!></g>');function oc(t,e){me(e,!0);let r=O(e,"pos",3,1),s=O(e,"las",3,1),o=N(()=>["middle","middle","start","middle","end"][r()]),a=N(()=>`fill:${e.textColor};`);const c=Yt("axes");let f=N(()=>pt(e.tickCoords[1][0],c.tX())),u=N(()=>pt(e.tickCoords[1][1],c.tY())),v=N(()=>Lo[c.scales().plot]),d=N(()=>[0,0,l(v),0,-l(v)][r()]),h=N(()=>[0,l(v),0,-l(v),0][r()]);var m=Qd(),g=L(m);{var p=b=>{var w=he(),k=G(w);nt(k,17,()=>l(f),lt,(E,y,A)=>{var S=Xd();I(S,"data-id",A),I(S,"dx",0);var j=L(S);Tt(j,()=>e.tickLabels[A],!0),$(()=>{I(S,"x",l(f)[A]),I(S,"y",l(u)[A]),I(S,"dy",l(d)*1.25),I(S,"transform",`rotate(-90, ${l(f)[A]}, ${l(u)[A]})`)}),M(E,S)}),M(b,w)},_=b=>{var w=he(),k=G(w);{var E=A=>{var S=he(),j=G(S);nt(j,17,()=>l(f),lt,(z,T,B)=>{var C=Kd();I(C,"data-id",B),I(C,"dy",0),I(C,"text-anchor","end");var q=L(C);Tt(q,()=>e.tickLabels[B],!0),$(()=>{I(C,"x",l(f)[B]),I(C,"y",l(u)[B]),I(C,"dx",-l(h)/2),I(C,"transform",`rotate(-90, ${l(f)[B]}, ${l(u)[B]})`)}),M(z,C)}),M(A,S)},y=A=>{var S=he(),j=G(S);nt(j,17,()=>l(f),lt,(z,T,B)=>{var C=Jd();I(C,"data-id",B);var q=L(C);Tt(q,()=>e.tickLabels[B],!0),$(()=>{I(C,"x",l(f)[B]),I(C,"y",l(u)[B]),I(C,"dx",l(d)),I(C,"dy",l(h)),I(C,"text-anchor",l(o))}),M(z,C)}),M(A,S)};D(k,A=>{s()===2&&r()===1?A(E):A(y,!1)},!0)}M(b,w)};D(g,b=>{s()===2&&r()===4?b(p):b(_,!1)})}$(()=>gt(m,l(a))),M(t,m),ge()}const Zd=(t,e=jt,r=jt)=>{const s=N(()=>e().colmap.length);var o=l1(),a=G(o);nt(a,17,()=>e().colmap,lt,(d,h,m)=>{const g=N(()=>r().start+m*r().width);var p=r1(),_=G(p),b=P(_);I(b,"dy",0);var w=L(b);Tt(w,()=>e().labels[m],!0),$(()=>{I(_,"x",l(g)),I(_,"y",r().top),I(_,"width",r().width),I(_,"height",r().height),I(_,"fill",l(h)),I(b,"x",l(g)),I(b,"y",r().ltop),I(b,"dx",r().dxl),I(b,"fill",e().labelColor),I(b,"font-size",e().fontSize+"em")}),M(d,p)});var c=P(a);{var f=d=>{const h=N(()=>r().start+l(s)*r().width);var m=n1();I(m,"dx",0),I(m,"dy",0);var g=L(m);Tt(g,()=>e().labels[l(s)],!0),$(()=>{I(m,"x",l(h)),I(m,"y",r().ltop),I(m,"fill",e().labelColor),I(m,"font-size",`${e().fontSize??""}em`)}),M(d,m)};D(c,d=>{e().isCentered||d(f)})}var u=P(c);{var v=d=>{const h=N(()=>r().start+l(s)*r().width);var m=s1(),g=L(m);Tt(g,()=>zo(e().labelsFactor),!0),$(()=>{I(m,"x",l(h)),I(m,"y",r().ltop),I(m,"fill",e().labelColor),I(m,"font-size",`${e().fontSize??""}em`)}),M(d,m)};D(u,d=>{e().labelsFactor!==0&&d(v)})}M(t,o)};function ac(t,e,r){t.preventDefault(),e(t,r())}function ic(t,e,r){t.preventDefault(),e(t,r())}function cc(t,e,r){t.preventDefault(),e(t,r())}function pl(t,e,r){t.preventDefault(),e(t,r())}async function uc(t,e,r,s){Fd(t.target,l(e),r(),s())}function fc(t,e,r){Id(l(e),r())}function vc(t,e,r,s,o,a){zd(l(e),r(),s(),o(),a())}var $d=ye('<text fill="crimson" text-anchor="middle"> </text>'),e1=ye('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),t1=ye("<!><!><!><!><!>",1),r1=ye('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),n1=ye('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),s1=ye('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),l1=ye("<!><!><!>",1),o1=ye("<line></line>"),a1=ye('<text dominant-baseline="middle" text-anchor="middle"> </text>'),i1=ye('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),c1=ye('<svg><rect height="100%" width="100%"></rect><!></svg>'),u1=ye('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),f1=ye('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),v1=ye('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),d1=ye('<g class="plot-labels"><!><!><!></g>'),h1=ye('<g class="axis x-axis"><!></g>'),m1=ye('<g class="axis y-axis"><!></g>'),g1=ye('<rect fill="transparent" id="axes-box"></rect>'),p1=ye('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),b1=ye('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),_1=ye('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),w1=ye('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),y1=H('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),x1=H('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),k1=H(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function dc(t,e){me(e,!0);const r=(we,Se=jt,Ee=jt)=>{var Fe=he(),bt=G(Fe);{var Zt=Ct=>{var ot=he(),He=G(ot);{var Lt=_t=>{var ut=$d(),cr=L(ut);$(()=>{I(ut,"x",l(ee)[0]-10),I(ut,"y",l(ie)),I(ut,"transform",`rotate(-90, ${l(ee)[0]-10}, ${l(ie)})`),ve(cr,Ee().error)}),M(_t,ut)},kt=_t=>{var ut=e1(),cr=L(ut);$(()=>{I(ut,"x",l(ce)),I(ut,"y",l(ne)[0]),ve(cr,Ee().error)}),M(_t,ut)};D(He,_t=>{Ee().pos===4?_t(Lt):_t(kt,!1)})}M(Ct,ot)},yr=Ct=>{var ot=t1(),He=G(ot);{var Lt=Ae=>{Bo(Ae,{get lineCoords(){return Se().grid},get lineColor(){return Pt.MIDDLEGRAY},lineType:3})};D(He,Ae=>{Ee().showGrid&&Ae(Lt)})}var kt=P(He);Bo(kt,{get lineCoords(){return Se().axisLine},get lineColor(){return Pt.DARKGRAY},lineType:1});var _t=P(kt);Bo(_t,{get lineCoords(){return Se().tickCoords},get lineColor(){return Pt.DARKGRAY},lineType:1});var ut=P(_t);{var cr=Ae=>{oc(Ae,{get las(){return Ee().las},get pos(){return Ee().pos},get tickCoords(){return Se().tickCoords},get tickLabels(){return Se().tickLabels},get tickColor(){return Pt.DARKGRAY},get hideLast(){return Ee().hideLast}})};D(ut,Ae=>{Se().tickCoords.length===2&&Se().tickLabels.length===Se().tickCoords[1][0].length&&Ae(cr)})}var vn=P(ut);{var $e=Ae=>{{let Mt=N(()=>[Se().tfLabel]);oc(Ae,{get pos(){return Ee().pos},get tickCoords(){return Se().tfCoords},get tickLabels(){return l(Mt)},get textColor(){return Pt.DARKGRAY}})}};D(vn,Ae=>{Se().tickFactor!==0&&Ae($e)})}M(Ct,ot)};D(bt,Ct=>{Ee().error?Ct(Zt):Ct(yr,!1)})}M(we,Fe)},s=(we,Se=jt,Ee=jt)=>{const Fe=N(()=>Ee().elw+2*Ee().elp),bt=N(()=>Ee().elp),Zt=N(()=>Ee().elh),yr=N(()=>Ee().ely);var Ct=c1(),ot=L(Ct),He=P(ot);nt(He,17,()=>Se().items,lt,(Lt,kt,_t)=>{var ut=i1();I(ut,"x",0);var cr=L(ut);{var vn=Mr=>{var Et=o1();$(()=>{I(Et,"x1",l(bt)),I(Et,"x2",l(Fe)-l(bt)),I(Et,"y1",l(Zt)[_t]/2),I(Et,"y2",l(Zt)[_t]/2),I(Et,"stroke",l(kt).line.lineColor),I(Et,"stroke-width",l(kt).line.lineWidth),I(Et,"stroke-dasharray",l(C)[l(kt).line.lineType-1])}),M(Mr,Et)};D(cr,Mr=>{l(kt).line&&Mr(vn)})}var $e=P(cr);{var Ae=Mr=>{var Et=a1(),$o=L(Et);$(()=>{I(Et,"x",l(Fe)/2),I(Et,"y",l(Zt)[_t]/2),I(Et,"fill",l(kt).point.faceColor),I(Et,"stroke-width",l(kt).point.lineWidth),I(Et,"stroke",l(kt).point.lineColor),I(Et,"font-size",`${l(kt).point.markerSize??""}em`),ve($o,ns[l(kt).point.marker-1])}),M(Mr,Et)};D($e,Mr=>{l(kt).point&&Mr(Ae)})}var Mt=P($e),Sl=L(Mt);Tt(Sl,()=>l(kt).label,!0),$(()=>{I(ut,"y",l(yr)[_t]),I(ut,"width",Ee().lgw),I(ut,"height",l(Zt)[_t]),I(Mt,"x",l(Fe)+l(bt)),I(Mt,"y",l(Zt)[_t]/2),I(Mt,"fill",Pt.LEGEND),I(Mt,"font-size",`${Se().fontSize??""}em`)}),M(Lt,ut)}),$(()=>{I(Ct,"x",Ee().lgl),I(Ct,"y",Ee().lgt),I(Ct,"height",Ee().lgh),I(Ct,"width",Ee().lgw),I(ot,"fill",Se().faceColor),I(ot,"stroke",Se().lineColor),I(ot,"stroke-width",Se().lineWidth)}),M(we,Ct)};let o=O(e,"limX",19,()=>[0,1]),a=O(e,"limY",19,()=>[0,1]),c=O(e,"margins",19,()=>[1,1.1,.55,.6]),f=O(e,"downloadLinks",3,"none"),u=O(e,"fileName",3,"plot"),v=O(e,"pngWidth",3,8),d=O(e,"pngHeight",3,8),h=O(e,"pngRes",3,300),m=O(e,"clipboardWidth",3,1200),g=O(e,"clipboardHeight",3,800),p=O(e,"onclick",3,null),_=O(e,"onmousemove",3,null),b=O(e,"onmousedown",3,null),w=O(e,"onmouseup",3,null);function k(we,Se){if(Se&&we.target.id=="axes-box"){const Ee=tc([we.offsetX-l(Y)],l(se))[0],Fe=tc([we.offsetY-l(V)],l(le))[0];Se(Ee,Fe)}}const E="plottingArea"+Math.round(Math.random()*1e4);let y=re(0),A=re(0),S=re(0);const j=N(()=>({plot:jd(l(A),l(S)),x:lc(l(A)),y:lc(l(S))})),z=N(()=>c().map(we=>we*kd[l(j).plot])),T=N(()=>Sd[l(j).plot]),B=N(()=>Po[l(j).plot]),C=N(()=>Rs[l(j).plot]),q=N(()=>l(je).show&&l(je).label!==""?l(T)*1.5:0),Y=N(()=>l(Ce).show&&l(Ce).label!==""?l(T)*1.5:0),V=N(()=>e.title&&e.title!==""?l(T)*1.5:0),R=N(()=>l(A)>l(Y)?l(A)-l(Y):0),U=N(()=>l(S)>l(q)+l(V)?l(S)-l(q)-l(V):0),Z=N(()=>l(U)-l(z)[0]-l(z)[2]),J=N(()=>l(R)-l(z)[1]-l(z)[3]),Q=N(()=>Zi(o(),2)&&Zi(a(),2)&&l(R)>l(z)[1]+l(z)[3]&&l(U)>l(z)[0]+l(z)[2]),se=N(()=>l(Q)?{coords:[l(J)/(o()[1]-o()[0]),o()[0],l(z)[1]],objects:[l(J)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),le=N(()=>l(Q)?{coords:[-l(Z)/(a()[1]-a()[0]),a()[1],l(z)[2]],objects:[l(Z)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ie=N(()=>l(Z)*.5+l(V)+l(z)[2]),ce=N(()=>l(J)*.5+l(Y)+l(z)[1]),ee=N(()=>l(Q)?pt(o(),l(se)):[0,1]),ne=N(()=>l(Q)?pt(a(),l(le)):[1,0]),Oe=N(()=>rn(e.title)),Xe=N(()=>l(Oe)?l(Oe).length===e.title.left?1:1.4:0);let Be=re(Me({show:!1})),je=re(Me({show:!1,error:""})),Ce=re(Me({show:!1,error:""})),et=re(Me({show:!1,colmap:null,breaks:null})),xe=re(Me({show:!1,items:null,position:null}));const Ve=N(()=>l(Q)&&l(et)&&l(et).show?Dd(l(et)):null),te=N(()=>l(Q)&&l(je).show?Od(o(),a(),l(j),l(le),l(je)):null),pe=N(()=>l(Q)&&l(Ce).show?Bd(o(),a(),l(j),l(se),l(Ce)):null),oe=N(()=>l(Q)&&l(Ve)?Vd(l(Ve),l(J),l(z),l(j)):null),_e=N(()=>l(Q)&&l(xe)&&l(xe).show&&l(ee)?Wd(l(xe),l(ee),l(ne),l(T),l(B)):null);hu("axes",{setBox:we=>F(Be,we,!0),setXAxis:we=>F(je,we,!0),setYAxis:we=>F(Ce,we,!0),setColmapLegend:we=>F(et,we,!0),setGroupLegend:we=>F(xe,we,!0),scales:()=>l(j),tX:()=>l(se),tY:()=>l(le),limX:()=>o(),limY:()=>a()});var ke=k1();let ue;var Te=L(ke),Le=P(L(Te));{var Qe=we=>{var Se=d1(),Ee=L(Se);{var Fe=ot=>{var He=u1();I(He,"dx",0),I(He,"dy",0);var Lt=L(He);Tt(Lt,()=>l(je).label,!0),$(()=>{I(He,"x",l(ce)),I(He,"y",l(U)+l(V))}),M(ot,He)};D(Ee,ot=>{l(je).show&&l(je).label&&l(je).label!==""&&ot(Fe)})}var bt=P(Ee);{var Zt=ot=>{var He=f1();I(He,"dx",0),I(He,"dy",0);var Lt=L(He);Tt(Lt,()=>l(Ce).label,!0),$(()=>{I(He,"x",l(T)/1.1*l(Ce).labelHeight),I(He,"y",l(ie)),I(He,"transform",`rotate(-90, ${l(T)*l(Ce).labelHeight/1.1}, ${l(ie)})`)}),M(ot,He)};D(bt,ot=>{l(Ce).show&&l(Ce).label&&l(Ce).label!==""&&ot(Zt)})}var yr=P(bt);{var Ct=ot=>{var He=v1();I(He,"dx",0),I(He,"dy",0);var Lt=L(He);Tt(Lt,()=>l(Oe),!0),$(()=>{I(He,"x",l(ce)),I(He,"y",l(T)*l(Xe))}),M(ot,He)};D(yr,ot=>{l(Oe)&&l(Oe)!==""&&ot(Ct)})}M(we,Se)};D(Le,we=>{l(Q)&&we(Qe)})}var Ze=P(Le),Ye=L(Ze),Ie=L(Ye),ct=L(Ie),tt=P(Ye);{var Ge=we=>{var Se=w1(),Ee=G(Se);{var Fe=$e=>{var Ae=h1(),Mt=L(Ae);r(Mt,()=>l(te),()=>l(je)),M($e,Ae)};D(Ee,$e=>{l(je).show&&l(te)&&$e(Fe)})}var bt=P(Ee);{var Zt=$e=>{var Ae=m1(),Mt=L(Ae);r(Mt,()=>l(pe),()=>l(Ce)),M($e,Ae)};D(bt,$e=>{l(Ce).show&&l(pe)&&$e(Zt)})}var yr=P(bt),Ct=L(yr);{var ot=$e=>{var Ae=g1();Ae.__keydown=[pl,k,p],Ae.__click=[pl,k,p],Ae.__mousemove=[cc,k,_],Ae.__mousedown=[ac,k,b],Ae.__mouseup=[ic,k,w],$(()=>{I(Ae,"stroke",l(Be).lineColor),I(Ae,"stroke-width",`${l(Be).lineWidth??""}px`),I(Ae,"x",l(ee)[0]),I(Ae,"y",l(ne)[1]),I(Ae,"width",l(ee)[1]-l(ee)[0]),I(Ae,"height",l(ne)[0]-l(ne)[1])}),M($e,Ae)},He=$e=>{var Ae=p1();Ae.__keydown=[pl,k,p],Ae.__click=[pl,k,p],Ae.__mousemove=[cc,k,_],Ae.__mousedown=[ac,k,b],Ae.__mouseup=[ic,k,w],$(()=>{I(Ae,"x",l(ee)[0]),I(Ae,"y",l(ne)[1]),I(Ae,"width",l(ee)[1]-l(ee)[0]),I(Ae,"height",l(ne)[0]-l(ne)[1])}),M($e,Ae)};D(Ct,$e=>{l(Be).show?$e(ot):$e(He,!1)})}var Lt=P(yr),kt=L(Lt);Rr(kt,()=>e.children??jt);var _t=P(Lt);{var ut=$e=>{var Ae=b1(),Mt=L(Ae);Zd(Mt,()=>l(Ve),()=>l(oe)),M($e,Ae)};D(_t,$e=>{l(oe)&&$e(ut)})}var cr=P(_t);{var vn=$e=>{var Ae=_1(),Mt=L(Ae);s(Mt,()=>l(xe),()=>l(_e)),M($e,Ae)};D(cr,$e=>{l(_e)&&$e(vn)})}$(()=>I(Lt,"clip-path",`url(#${E})`)),M(we,Se)};D(tt,we=>{l(Q)&&we(Ge)})}Cn(Te,we=>F(y,we),()=>l(y));var Qt=P(Te,2);{var Or=we=>{var Se=y1();M(we,Se)},Br=we=>{var Se=x1(),Ee=L(Se);Ee.__click=[fc,y,u],Ee.__keydown=[fc,y,u];var Fe=P(Ee,2);Fe.__click=[vc,y,u,v,d,h],Fe.__keydown=[vc,y,u,v,d,h];var bt=P(Fe,2);bt.__click=[uc,y,m,g],bt.__keydown=[uc,y,m,g],M(we,Se)};D(Qt,we=>{l(Q)?we(Br,!1):we(Or)})}$(we=>{ue=xt(ke,1,`plot-container show-download-links-${f()??""}`,"svelte-1t5q9z1",ue,we),gt(Te,`font-size:${l(T)??""}px`),I(Ze,"x",l(Y)),I(Ze,"y",l(V)),I(Ze,"width",l(R)),I(Ze,"height",l(U)),I(Ie,"id",E),I(ct,"x",l(ee)[0]),I(ct,"y",l(ne)[1]),I(ct,"width",l(ee)[1]-l(ee)[0]),I(ct,"height",l(ne)[0]-l(ne)[1])},[()=>({"plot-error":!l(Q)})]),oi(Te,"clientWidth",we=>F(A,we)),oi(Te,"clientHeight",we=>F(S,we)),M(t,ke),ge()}vt(["keydown","click","mousemove","mousedown","mouseup"]);function hc(t,e){me(e,!0);let r=O(e,"tickLabels",7),s=O(e,"las",3,1),o=O(e,"whole",3,!1),a=O(e,"show",3,!0),c=O(e,"showGrid",3,!1);const f=Yt("axes");fe(()=>{const u=rn(e.label),v=u?u.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=sc(e.ticks,f.limX())),!h&&r()&&(m=>{var g=Pl(m,2);r(g[0]),h=g[1]})(nc(r(),d)),f.setXAxis({show:a(),error:h,label:u,ticks:d,labelHeight:v,showGrid:c(),las:s(),whole:o(),tickLabels:r()})}),ge()}function mc(t,e){me(e,!0);let r=O(e,"tickLabels",7),s=O(e,"las",3,1),o=O(e,"whole",3,!1),a=O(e,"show",3,!0),c=O(e,"showGrid",3,!1);const f=Yt("axes");fe(()=>{const u=rn(e.label),v=u?u.length===e.label.length?1:1.4:0;let d,h="";e.ticks&&([d,h]=sc(e.ticks,f.limY())),!h&&r()&&(m=>{var g=Pl(m,2);r(g[0]),h=g[1]})(nc(r(),d)),f.setYAxis({show:a(),error:h,label:u,ticks:d,labelHeight:v,showGrid:c(),las:s(),whole:o(),tickLabels:r(),pos:4})}),ge()}function gc(t,e){me(e,!0);let r=O(e,"lineWidth",3,1),s=O(e,"lineColor",3,"#606060");const o=Yt("axes");fe(()=>{o.setBox({show:!0,lineWidth:r(),lineColor:s()})}),ge()}var E1=(t,e)=>zn(t,"rect",e.onclick),A1=ye("<rect></rect>"),S1=ye("<g></g>");function bl(t,e){me(e,!0);let r=O(e,"faceColor",19,()=>Pt.PRIMARY),s=O(e,"lineColor",19,r),o=O(e,"lineWidth",3,1),a=O(e,"className",3,"series-rect");const c=N(()=>Dt(e.left,"Rectangles (left)")),f=N(()=>l(c)?Dt(e.top,"Rectangles (top)",l(c).length):null),u=N(()=>l(f)?typeof e.width!="object"?De.fill(e.width,l(c).length):e.width:null),v=N(()=>l(f)?typeof e.height!="object"?De.fill(e.height,l(c).length):e.height:null),d=Yt("axes"),h=N(()=>l(c)?pt(l(c),d.tX()):null),m=N(()=>l(f)?pt(l(f),d.tY()):null),g=N(()=>l(u)?Ro(l(u),d.tX()):null),p=N(()=>l(v)?Ro(l(v),d.tY()):null),_=N(()=>`fill:${r()};stroke:${s()};stroke-width:${o()}px;`),b=N(()=>l(h)&&l(m)&&l(g)&&l(p)&&l(g).length===l(h).length&&l(p).length===l(h).length);var w=he(),k=G(w);{var E=y=>{var A=S1();A.__click=[E1,e],nt(A,21,()=>e.left,lt,(S,j,z)=>{var T=A1();$(()=>{I(T,"x",l(h)[z]),I(T,"y",l(m)[z]),I(T,"width",l(g)[z]),I(T,"height",l(p)[z])}),M(S,T)}),$(()=>{xt(A,0,`series ${a()??""}`),gt(A,l(_))}),M(y,A)};D(k,y=>{l(b)&&y(E)})}M(t,w),ge()}vt(["click"]);var C1=(t,e)=>zn(t,"line",e.onclick),N1=ye("<line></line>"),M1=ye('<g class="series series-segment"></g>');function j1(t,e){me(e,!0);let r=O(e,"lineColor",19,()=>Pt.PRIMARY),s=O(e,"lineType",3,1),o=O(e,"lineWidth",3,1);const a=N(()=>Dt(e.xStart,"Segments")),c=N(()=>l(a)?Dt(e.yStart,"Segments",l(a).length):null),f=N(()=>l(c)?Dt(e.xEnd,"Segments",l(a).length):null),u=N(()=>l(f)?Dt(e.yEnd,"Segments",l(a).length):null),v=Yt("axes"),d=N(()=>l(a)?pt(l(a),v.tX()):null),h=N(()=>l(f)?pt(l(f),v.tX()):null),m=N(()=>l(c)?pt(l(c),v.tY()):null),g=N(()=>l(u)?pt(l(u),v.tY()):null),p=N(()=>`stroke:${r()};stroke-width: ${o()}px;stroke-dasharray:${Rs[v.scales().plot][s()-1]}`),_=N(()=>l(d)&&l(h)&&l(m)&&l(g));var b=he(),w=G(b);{var k=E=>{var y=M1();y.__click=[C1,e],nt(y,21,()=>l(d),lt,(A,S,j)=>{var z=N1();$(()=>{I(z,"x1",l(d)[j]),I(z,"x2",l(h)[j]),I(z,"y1",l(m)[j]),I(z,"y2",l(g)[j])}),M(A,z)}),$(()=>gt(y,l(p))),M(E,y)};D(w,E=>{l(_)&&E(k)})}M(t,b),ge()}vt(["click"]);var T1=(t,e)=>zn(t,"text",e.onclick),P1=ye("<text><!></text>"),L1=ye("<text><!></text>"),R1=ye("<text><!></text>"),z1=ye('<g class="series series-textlabels"><!></g>');function _l(t,e){me(e,!0);let r=O(e,"pos",3,0),s=O(e,"faceColor",19,()=>Pt.PRIMARY_TEXT),o=O(e,"lineColor",3,"transparent"),a=O(e,"lineWidth",3,0),c=O(e,"textSize",3,1),f=O(e,"rotateAngle",3,0);const u=["middle","middle","start","middle","end"],v=N(()=>Dt(e.xValues,"TextLabels")),d=N(()=>l(v)?Dt(e.yValues,"TextLabels",l(v).length):null),h=N(()=>l(d)?Array.isArray(e.labels)&&e.labels.length!==l(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),m=N(()=>l(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),g=Yt("axes"),p=N(()=>l(v)&&l(m)!==null?pt(l(v),g.tX()):null),_=N(()=>l(d)&&l(p)?pt(l(d),g.tY()):null),b=N(()=>Lo[g.scales().plot]),w=N(()=>[0,0,-l(b),0,l(b),l(b)]),k=N(()=>[0,l(b),0,-l(b),0,l(b)]),E=N(()=>`fill:${s()};stroke-width:${a()}px;stroke:${o()};font-size:${c()}em;`),y=N(()=>l(p)&&l(_)&&l(m)!==null&&l(h)&&l(p).length===l(_).length);var A=he(),S=G(A);{var j=z=>{var T=z1();T.__click=[T1,e];var B=L(T);{var C=Y=>{var V=he(),R=G(V);nt(R,17,()=>l(p),lt,(U,Z,J)=>{var Q=P1();I(Q,"data-id",J);var se=L(Q);Tt(se,()=>e.labels,!0),$(()=>{I(Q,"x",l(p)[J]),I(Q,"y",l(_)[J]),I(Q,"dx",l(w)[r()]),I(Q,"dy",l(k)[r()]),I(Q,"transform",f()!==void 0?`rotate(${f()}, ${l(p)[J]+l(w)[r()]}, ${l(_)[J]+l(k)[r()]})`:""),I(Q,"text-anchor",u[r()[J]])}),M(U,Q)}),M(Y,V)},q=Y=>{var V=he(),R=G(V);{var U=J=>{var Q=he(),se=G(Q);nt(se,17,()=>l(p),lt,(le,ie,ce)=>{var ee=L1();I(ee,"data-id",ce);var ne=L(ee);Tt(ne,()=>e.labels[ce],!0),$(()=>{I(ee,"x",l(p)[ce]),I(ee,"y",l(_)[ce]),I(ee,"dx",l(w)[r()[ce]]),I(ee,"dy",l(k)[r()[ce]]),I(ee,"transform",f()!==void 0?`rotate(${f()}, ${l(p)[ce]+l(w)[r()]}, ${l(_)[ce]+l(k)[r()]})`:""),I(ee,"text-anchor",u[r()[ce]])}),M(le,ee)}),M(J,Q)},Z=J=>{var Q=he(),se=G(Q);nt(se,17,()=>l(p),lt,(le,ie,ce)=>{var ee=R1();I(ee,"data-id",ce);var ne=L(ee);Tt(ne,()=>e.labels[ce],!0),$(()=>{I(ee,"x",l(p)[ce]),I(ee,"y",l(_)[ce]),I(ee,"dx",l(w)[r()]),I(ee,"dy",l(k)[r()]),I(ee,"transform",f()!==void 0?`rotate(${f()}, ${l(p)[ce]+l(w)[r()]}, ${l(_)[ce]+l(k)[r()]})`:""),I(ee,"text-anchor",u[r()])}),M(le,ee)}),M(J,Q)};D(R,J=>{Array.isArray(r())||ArrayBuffer.isView(r())?J(U):J(Z,!1)},!0)}M(Y,V)};D(B,Y=>{typeof e.labels=="string"?Y(C):Y(q,!1)})}$(()=>gt(T,l(E))),M(z,T)};D(S,z=>{l(y)&&z(j)})}M(t,A),ge()}vt(["click"]),vt(["click"]);var I1=(t,e)=>zn(t,"text",e.onclick),F1=ye("<text> </text>"),q1=ye('<g text-anchor="middle"></g>');function O1(t,e){me(e,!0);let r=O(e,"marker",3,1),s=O(e,"faceColor",3,"transparent"),o=O(e,"lineColor",19,()=>Pt.PRIMARY),a=O(e,"lineWidth",3,1),c=O(e,"markerSize",3,1);const f=N(()=>typeof r()!="number"||r()<1||r()>ns.length?(console.error('Points: parameter "marker" must be a number from 1 to '+ns.length+"."),null):ns[r()-1]),u=N(()=>Dt(e.xValues,"Points")),v=N(()=>l(u)?Dt(e.yValues,"Points",l(u).length):null),d=Yt("axes"),h=N(()=>l(u)?pt(l(u),d.tX()):null),m=N(()=>l(h)&&l(v)?pt(l(v),d.tY()):null),g=N(()=>["＋","✳","✕"].includes(l(f))?`fill:${o()&&o()!=="transparent"?o():s()};stroke-width:0px;font-size:${c()}em;`:`fill:${s()};stroke-width:${a()}px;stroke:${o()}; font-size:${c()}em;`),p=N(()=>["◼","⬥","＋","✳","✕"].includes(l(f))?"series-points2":"series-points1"),_=N(()=>l(h)&&l(m)&&l(h).length===l(m).length);var b=he(),w=G(b);{var k=E=>{var y=q1();y.__click=[I1,e],nt(y,21,()=>l(h),lt,(A,S,j)=>{var z=F1(),T=L(z);$(()=>{I(z,"x",l(h)[j]),I(z,"y",l(m)[j]),ve(T,l(f))}),M(A,z)}),$(()=>{xt(y,0,`series series-points ${l(p)??""}`),gt(y,l(g))}),M(E,y)};D(w,E=>{l(_)&&E(k)})}M(t,b),ge()}vt(["click"]);var B1=(t,e)=>zn(t,"polyline",e.onclick),D1=ye('<g class="series series-line"><polyline class="line"></polyline></g>');function nn(t,e){me(e,!0);let r=O(e,"lineColor",19,()=>Pt.PRIMARY),s=O(e,"lineType",3,1),o=O(e,"lineWidth",3,1);const a=N(()=>Dt(e.xValues,"Lines")),c=N(()=>l(a)?Dt(e.yValues,"Lines",l(a).length):null),f=Yt("axes"),u=N(()=>l(a)&&l(c)?Fo(l(a),l(c),f.tX(),f.tY()):null),v=N(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Rs[f.scales().plot][s()-1]}`);var d=he(),h=G(d);{var m=g=>{var p=D1();p.__click=[B1,e];var _=L(p);$(()=>{gt(p,l(v)),I(_,"points",l(u))}),M(g,p)};D(h,g=>{l(u)&&g(m)})}M(t,d),ge()}vt(["click"]);var V1=(t,e)=>zn(t,"polyline",e.onclick),Y1=ye('<polyline class="line"></polyline>'),U1=ye('<g class="series series-multiline"></g>');function pc(t,e){me(e,!0);let r=O(e,"lineColor",19,()=>Pt.PRIMARY),s=O(e,"lineType",3,1),o=O(e,"lineWidth",3,1);const a=N(()=>Dt(e.xValues,"Multilines")),c=N(()=>l(a)?gr(e.yValues)?(l(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),f=Yt("axes"),u=N(()=>{if(!l(a)||!l(c))return null;const g=new Array(l(c).ncols);for(let p=0;p<g.length;p++)g[p]=Fo(l(a),l(c).getcolumn(p+1),f.tX(),f.tY());return g}),v=N(()=>`fill:transparent;stroke:${r()};stroke-width: ${o()}px; stroke-dasharray:${Rs[f.scales().plot][s()-1]}`);var d=he(),h=G(d);{var m=g=>{var p=U1();p.__click=[V1,e],nt(p,21,()=>l(u),lt,(_,b)=>{var w=Y1();$(()=>I(w,"points",l(b))),M(_,w)}),$(()=>gt(p,l(v))),M(g,p)};D(h,g=>{l(u)&&l(u).length>0&&g(m)})}M(t,d),ge()}vt(["click"]);function W1(t,e){me(e,!0);let r=O(e,"show",3,!0),s=O(e,"position",3,"topleft"),o=O(e,"lineColor",19,()=>Pt.LEGEND),a=O(e,"lineWidth",3,1),c=O(e,"faceColor",3,"#fff"),f=O(e,"fontSize",3,.85);function u(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function v(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let m=0;m<h.length;m++){const g=h[m];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=rn(g.label),_=p.length===g.label?1:1.4;g.label=p,g.labelHeight=_,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(m+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:Pt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=ns.length||console.error('Legend: parameter "marker" for legend item '+(m+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.markerSize=g.point.markerSize?g.point.markerSize:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:Pt.PRIMARY)}return h}const d=Yt("axes");fe(()=>{const h=v(e.items),m=u(s());d.setGroupLegend(h&&m?{show:r(),position:s(),items:e.items,lineColor:o(),faceColor:c(),lineWidth:a(),fontSize:f()}:{show:!1,position:null,items:null})}),ge()}function bc(t,e){me(e,!0);let r=O(e,"show",3,!0),s=O(e,"labels",3,null),o=O(e,"labelColor",19,()=>Pt.CLEGEND_LABELS),a=O(e,"fontSize",3,.85);const c=Yt("axes");fe(()=>{c.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:o(),fontSize:a()})}),ge()}const H1=[1,1.1,.45,.4],sn={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",alien:"#2679B2",external:"#D22C2F"},Do={cal:1,pv:2,test:2,new:2},In={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},G1={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Vo={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},_c="#a0a0a0",wc="#909090",yc=8,X1=8,K1=8,J1=600;function Q1(t,e){if(t.length===e.length)return t;const r=e.length,s=new t.constructor(r);for(let o in e)s[o]=t[e[o]];return s}function Z1(t,e){let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(let c=0;c<t.length;c++)s=Math.min(s,t[c]),r=Math.max(r,t[c]);let o=qo(void 0,[s,r],e-1,!0,!1,0).v;const a=o[1]-o[0];if(o[0]>s){const c=o[0]-a;o=[c<s?c:s,...o]}if(o[o.length-1]<r){const c=o[o.length-1]+a;o=[...o,c>r?c:r]}return o}function $1(t){const e=t.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const r=gl(e);return t.reduce((o,a,c)=>(o[a]=r[c],o),{})}function xc(t,e,r){const s=e.length,o=new Array(t.length),a=e[1]-e[0];for(let c=0;c<t.length;c++)for(let f=0;f<s-1;f++){const u=t[c]>=e[f],v=f===s-2?t[c]<e[f+1]+a:t[c]<e[f+1];if(u&&v){o[c]=r[f];break}}return o}function eh(t,e,r,s,o="cal",a){if(!e)return null;let c,f,u,v,d,h,m=!0;if((r==="groups"||r==="classes")&&e.classNames){const g=$1(e.classNames);f=Object.keys(g).map(p=>g[p]),c=e.classNames,v=e.classes.map(p=>g[p]),u=new Array(c.length+1).map((p,_)=>_-.5),d=null}else if(r==="variable"){const g=Q1(t.values.getcolref(s),e.objindices);d=t.varlabels[s-1],d.length>30&&(d=d.substring(0,29)+"..."),u=Z1(g,10),f=gl(u.length-1),v=xc(g,u,f)}else if(a){const g=a.values;c=a.labels;const p=a.classColmap;f=Object.keys(p).map(_=>p[_]),v=g.map(_=>p[_]),u=new Array(c.length+1).map((_,b)=>b-.5),d=null,a.filled&&a.filled.length===g.length&&(h=a.filled),a.showBar!==void 0&&(m=a.showBar)}else c=null,u=null,f=null,v=Array(e.nrows).fill(In[o]);return{labels:c,map:f,breaks:u,colors:v,varname:d,filled:h,showBar:m,mainColor:In[o],faceColor:G1[o],faceTColor:Vo[o]}}function th(t,e,r,s){if(!t)return null;const o=t.length;let a=De.zeros(o),c=Number.NEGATIVE_INFINITY,f=Number.POSITIVE_INFINITY;if(s==="log")for(let u=0;u<o;u++){const v=Math.log(1+t[u]/r);a.v[u]=v,c=Math.max(c,v),f=Math.min(f,v)}else for(let u=0;u<o;u++){const v=t[u]/r;a.v[u]=v,c=Math.max(c,v),f=Math.min(f,v)}return{values:a,min:f,max:c}}var rh=H("<!> <!>",1),nh=H("<!> <!>",1),sh=H("<!> <!>",1),lh=H("<!> <!> <!> <!> <!> <!> <!> <!>",1),oh=H("<h2>Plot settings</h2>"),ah=H('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),ih=H('<div class="plot-panel svelte-5p9gcx"><!></div>');function ch(t,e){me(e,!0);let r=re(!0),s=re("none"),o=re(!1);const a=N(()=>(l(r)?"Preprocessed":"Raw")+" data (selected rows)"),c=N(()=>l(r)&&e.prepdata?e.prepdata:e.rawdata),f=N(()=>l(c)?l(c).varaxisLabel:"Variables"),u=N(()=>e.rawdata.varaxisUnits),v=N(()=>e.left>=0||e.right>0&&e.right<l(c).values.nrows),d=N(()=>e.left>=0?e.left+1:1),h=N(()=>e.right>0&&e.right<l(c).values.nrows?e.right:l(c).values.nrows),m=N(()=>l(r)&&l(c)&&l(v)?Ft.seq(l(d),l(h)):null),g=N(()=>l(m)?l(c).varvalues.filter((z,T)=>T>=l(d)-1&&T<l(h)):l(c).varvalues),p=N(()=>l(m)?l(c).values.subset(l(m),null):l(c).values),_=N(()=>l(p)?oo(l(p).v):null),b=N(()=>l(_)?(l(_)[1]-l(_)[0])*.05:null),w=N(()=>l(_)?[l(_)[0],l(_)[1]+(l(s)!=="none")*l(b)]:[0,1]),k=N(()=>l(c)?oo(l(c).varvalues,l(o)?.005:.1):[0,1]),E=N(()=>l(o)&&l(v)?[l(c).varvalues[l(d)-1],l(c).varvalues[l(h)-1]]:l(k)),y=N(()=>{if(!e.rawdata)return null;const z={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const T=gl(e.rawdata.classNames.length);z.groups={colors:e.rawdata.classes.map(B=>T[e.rawdata.classNames.findIndex(C=>C===B)]),breaks:qr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:T}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const T=ci(e.rawdata.resp,8),B=gl(T.length-1);z.response={colors:xc(e.rawdata.resp.v,T.v,B),labels:null,breaks:T,map:B}}return z});fe(()=>{(e.left<1||e.right<1||e.right>=e.left)&&F(o,!1)});var A=ih(),S=L(A);{var j=z=>{var T=ah(),B=G(T),C=L(B),q=L(C);dc(q,{get title(){return l(a)},get limY(){return l(w)},get limX(){return l(E)},fileName:"plot-preprocessed",children:(se,le)=>{var ie=lh(),ce=G(ie);{var ee=oe=>{pc(oe,{get xValues(){return l(g)},get yValues(){return l(p)}})},ne=oe=>{var _e=he(),ke=G(_e);nt(ke,17,()=>l(y)[l(s)].colors,lt,(ue,Te,Le)=>{{let Qe=N(()=>l(p).getcolumn(Le+1));nn(ue,{get xValues(){return l(g)},get yValues(){return l(Qe)},get lineColor(){return l(Te)}})}}),M(oe,_e)};D(ce,oe=>{l(s)==="none"?oe(ee):oe(ne,!1)})}var Oe=P(ce,2);{var Xe=oe=>{const _e=N(()=>l(c).varvalues[e.varind[0]]);var ke=rh(),ue=G(ke);{let Le=N(()=>[l(_e),l(_e)]);nn(ue,{get xValues(){return l(Le)},get yValues(){return l(w)},lineColor:"#00000060"})}var Te=P(ue,2);{let Le=N(()=>[l(_e)]),Qe=N(()=>[l(w)[1]-l(b)*(l(s)==="none"?1:2)]),Ze=N(()=>rn(l(_e).toFixed(2)+" "+l(u)));_l(Te,{get xValues(){return l(Le)},get yValues(){return l(Qe)},get labels(){return l(Ze)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(oe,ke)};D(Oe,oe=>{e.varind&&e.varind[0]>0&&oe(Xe)})}var Be=P(Oe,2);{var je=oe=>{const _e=N(()=>l(c).varvalues[e.varind[1]]);var ke=nh(),ue=G(ke);{let Le=N(()=>[l(E)[0]]),Qe=N(()=>[l(c).varvalues[e.varind[1]]-l(E)[0]]),Ze=N(()=>[l(w)[1]]),Ye=N(()=>[l(w)[1]-l(w)[0]]);bl(ue,{get left(){return l(Le)},get width(){return l(Qe)},get top(){return l(Ze)},get height(){return l(Ye)},lineColor:"transparent",faceColor:"#00000040"})}var Te=P(ue,2);{let Le=N(()=>[l(_e)]),Qe=N(()=>[l(w)[1]-l(b)*(l(s)==="none"?1:2)]),Ze=N(()=>rn(l(_e).toFixed(2)+" "+l(u)));_l(Te,{get xValues(){return l(Le)},get yValues(){return l(Qe)},get labels(){return l(Ze)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(oe,ke)};D(Be,oe=>{e.varind&&e.varind[1]>0&&oe(je)})}var Ce=P(Be,2);{var et=oe=>{const _e=N(()=>l(c).varvalues[e.varind[2]-1]);var ke=sh(),ue=G(ke);{let Le=N(()=>[l(c).varvalues[e.varind[2]-1]]),Qe=N(()=>[l(E)[1]-l(c).varvalues[e.varind[2]-1]]),Ze=N(()=>[l(w)[1]]),Ye=N(()=>[l(w)[1]-l(w)[0]]);bl(ue,{get left(){return l(Le)},get width(){return l(Qe)},get top(){return l(Ze)},get height(){return l(Ye)},lineColor:"transparent",faceColor:"#00000040"})}var Te=P(ue,2);{let Le=N(()=>[l(_e)]),Qe=N(()=>[l(w)[1]-l(b)*(l(s)==="none"?1:2)]),Ze=N(()=>rn(l(_e).toFixed(2)+" "+l(u)));_l(Te,{get xValues(){return l(Le)},get yValues(){return l(Qe)},get labels(){return l(Ze)},textColor:"#a0a0a0",textSize:.8,pos:2})}M(oe,ke)};D(Ce,oe=>{e.varind&&e.varind[2]<l(c).varvalues.length&&e.varind[2]>0&&oe(et)})}var xe=P(Ce,2);{let oe=N(()=>l(s)!=="none");bc(xe,{get show(){return l(oe)},get labels(){return l(y)[l(s)].labels},get breaks(){return l(y)[l(s)].breaks},get colmap(){return l(y)[l(s)].map}})}var Ve=P(xe,2);hc(Ve,{get label(){return l(f)},showGrid:!0});var te=P(Ve,2);mc(te,{showGrid:!0});var pe=P(te,2);gc(pe,{}),M(se,ie)},$$slots:{default:!0}});var Y=P(B,2),V=L(Y);ae(V,{label:"",children:(se,le)=>{var ie=oh();M(se,ie)},$$slots:{default:!0}});var R=P(V,2);ae(R,{label:"Show",children:(se,le)=>{Ln(se,{options:["raw","preprocessed"],get value(){return l(r)},set value(ie){F(r,ie,!0)}})},$$slots:{default:!0}});var U=P(R,2);{var Z=se=>{ae(se,{label:"Color by",children:(le,ie)=>{{let ce=N(()=>Object.keys(l(y)));At(le,{get options(){return l(ce)},get value(){return l(s)},set value(ee){F(s,ee,!0)}})}},$$slots:{default:!0}})};D(U,se=>{Object.keys(l(y)).length>1&&se(Z)})}var J=P(U,2);{var Q=se=>{ae(se,{label:"Zoom (x-axis)",children:(le,ie)=>{Ln(le,{options:["off","on"],get value(){return l(o)},set value(ce){F(o,ce,!0)}})},$$slots:{default:!0}})};D(J,se=>{e.left>0&&e.right>e.left&&se(Q)})}M(z,T)};D(S,z=>{l(g)&&l(p)&&z(j)})}M(t,A),ge()}var uh=H('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function fh(t,e){me(e,!0);let r=O(e,"left",15),s=O(e,"right",15),o=O(e,"prepobj",15),a=O(e,"meta",15),c=O(e,"finalize",3,null),f=re(Me([-1,0,0])),u=re(null),v=re(null);function d(E){const y=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E>=0&&E<y&&E<s()&&r(E)}function h(E){const y=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&E<=y&&E>r()&&s(E)}var m=uh(),g=L(m),p=L(g),_=L(p);xd(_,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return r()},get right(){return s()},setLeft:d,",":!0,setRight:h,get finalize(){return c()},get varind(){return l(f)},set varind(E){F(f,E,!0)},get prepobj(){return o()},set prepobj(E){o(E)},get rawdataShort(){return l(u)},set rawdataShort(E){F(u,E,!0)},get prepdataShort(){return l(v)},set prepdataShort(E){F(v,E,!0)},get meta(){return a()},set meta(E){a(E)}});var b=P(g,2),w=L(b);{var k=E=>{ch(E,{get rawdata(){return l(u)},get prepdata(){return l(v)},get left(){return r()},get right(){return s()},get varind(){return l(f)}})};D(w,E=>{l(u)&&E(k)})}M(t,m),ge()}var vh=H('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),dh=H("<!> <!> <!>",1),hh=H('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),mh=H("<!> <!> <!>",1),gh=H("<p><strong>Preprocessing model</strong></p>"),ph=H("<!> <!>",1),bh=H("<p> </p>"),_h=H('<div class="prep-widget"><!></div> <!> <!>',1);function wh(t,e){me(e,!0);let r=O(e,"prepType",15),s=O(e,"prepobj",15),o=O(e,"prepdata",15),a=O(e,"prepmodel",15),c=O(e,"prepmeta",15),f=re(!1),u=re(0),v=re(Me(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),d=re("neutral"),h=re(""),m=re(void 0);async function g(q,Y,V){!Y||!q||Y.length===0||F(m,e.WASM().then(R=>{F(d,"applying");const U=Ti(R,q.values,q.nresp,Y,!1,V);U.info=c(),a(U)}).catch(R=>{a(null),console.error(R),F(d,"error"),F(h,R,!0)}),!0)}async function p(q,Y){if(!Y||typeof Y!="object"){o(null);return}if(Object.keys(Y).length===0){o(q);return}F(m,e.WASM().then(V=>{F(d,"applying");const R=js(V,q.values,q.nresp,Y,!1,!1),U=jo(ql(q),R);o(xo(U,Y))}).catch(V=>{o(null),console.error(V),F(d,"error"),F(h,V,!0)}),!0)}function _(){r(null),o(null),a(null),s([]),F(u,0),F(v,e.rawdata.values.ncols-e.rawdata.nresp)}function b(){s()&&s().length>0?g(e.rawdata,s(),e.outliers):(r(null),a(null)),F(f,!1)}function w(){r("create"),o(null),a(null),F(f,!0)}function k(){r("skip"),a({})}fe(()=>{a(),e.rawdata&&p(e.rawdata,a())}),fe(()=>{r()==="create"&&s()&&!a()&&g(e.rawdata,s(),e.outliers)}),fe(()=>{r()==="skip"&&o()===null&&(a({}),s([]),o(e.rawdata))});var E=_h(),y=G(E),A=L(y);{var S=q=>{ae(q,{name:"info",children:(Y,V)=>{var R=dh(),U=G(R);{var Z=le=>{var ie=vh(),ce=P(L(ie),2);To(ce,{get prepmodel(){return a()}}),M(le,ie)};D(U,le=>{l(f)||le(Z)})}var J=P(U,2);{var Q=le=>{Oi(le,{onclick:w})};D(J,le=>{r()==="create"&&le(Q)})}var se=P(J,2);tn(se,{onclick:_}),M(Y,R)},$$slots:{default:!0}})},j=q=>{var Y=he(),V=G(Y);{var R=Z=>{ae(Z,{name:"prep-info",children:(J,Q)=>{var se=hh(),le=P(G(se),2),ie=L(le);tn(ie,{onclick:_}),M(J,se)},$$slots:{default:!0}})},U=Z=>{var J=he(),Q=G(J);{var se=ie=>{ae(ie,{label:"Preprocessing",name:"prep-container",children:(ce,ee)=>{var ne=mh(),Oe=G(ne);Nt(Oe,{text:"Skip",onclick:k});var Xe=P(Oe,2);Nt(Xe,{text:"Load",onclick:()=>r("file")});var Be=P(Xe,2);Nt(Be,{text:"Create",onclick:w}),M(ce,ne)},$$slots:{default:!0}})},le=ie=>{var ce=he(),ee=G(ce);{var ne=Oe=>{var Xe=ph(),Be=G(Xe);ae(Be,{children:(Ce,et)=>{var xe=gh();M(Ce,xe)},$$slots:{default:!0}});var je=P(Be,2);Kv(je,{get model(){return a()},set model(Ce){a(Ce)},get prepobj(){return s()},set prepobj(Ce){s(Ce)},get left(){return l(u)},set left(Ce){F(u,Ce,!0)},get right(){return l(v)},set right(Ce){F(v,Ce,!0)}}),M(Oe,Xe)};D(ee,Oe=>{r()==="file"&&Oe(ne)},!0)}M(ie,ce)};D(Q,ie=>{r()?ie(le,!1):ie(se)},!0)}M(Z,J)};D(V,Z=>{r()==="skip"?Z(R):Z(U,!1)},!0)}M(q,Y)};D(A,q=>{a()&&o()&&a().ml?q(S):q(j,!1)})}var z=P(y,2);{var T=q=>{Ji(q,{closeModal:b,isDark:!0,children:(Y,V)=>{fh(Y,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:b,get prepobj(){return s()},set prepobj(R){s(R)},get left(){return l(u)},set left(R){F(u,R,!0)},get right(){return l(v)},set right(R){F(v,R,!0)},get meta(){return c()},set meta(R){c(R)}})},$$slots:{default:!0}})};D(z,q=>{l(f)&&q(T)})}var B=P(z,2);{var C=q=>{ae(q,{status:"error",children:(Y,V)=>{var R=bh(),U=L(R);$(()=>ve(U,l(h))),M(Y,R)},$$slots:{default:!0}})};D(B,q=>{(l(d)==="error"||l(h))&&q(C)})}M(t,E),ge()}var yh=H('<span style="font-weight:bold"> </span><br/>',1),xh=H('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),kh=H('<span class="file-size svelte-1uxd0r7"> </span>'),Eh=H('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Ah(t,e){me(e,!0);let r=O(e,"title",3,"");var s=he(),o=G(s);{var a=c=>{ae(c,{children:(f,u)=>{var v=Eh(),d=G(v),h=L(d);{var m=E=>{var y=yh(),A=G(y),S=L(A);$(()=>ve(S,r())),M(E,y)};D(h,E=>{r()&&r()!==""&&E(m)})}var g=P(h,4),p=L(g),_=P(g,5);{var b=E=>{var y=xh(),A=G(y),S=L(A),j=P(A,4),z=L(j);$(()=>{ve(S,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),ve(z,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),M(E,y)},w=E=>{var y=kh(),A=L(y);$(()=>ve(A,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),M(E,y)};D(_,E=>{e.dataset.nresp&&e.dataset.nresp>0?E(b):E(w,!1)})}var k=P(d,2);tn(k,{get onclick(){return e.reset}}),$(()=>{I(g,"title",e.dataset.fileName),ve(p,e.dataset.fileName)}),M(f,v)},$$slots:{default:!0}})};D(o,c=>{e.dataset&&c(a)})}M(t,s),ge()}var Sh=H("<!> <!>",1),Ch=H("<!> <!> <!> <!> <!> <!>",1),Nh=H("<!> <!>",1),Mh=H("<p> </p>"),jh=H("<!> <p> </p>",1),Th=H("<p> </p>"),Ph=H("<!> <!> <!>",1);function Yo(t,e){me(e,!0);let r=O(e,"model",3,null),s=O(e,"outliers",19,()=>[]),o=O(e,"className",3,"Class"),a=O(e,"classMandatory",3,!1),c=O(e,"classUnique",3,!1),f=O(e,"title",3,""),u=O(e,"dataset",15),v=O(e,"resobj",15),d=O(e,"csvOnly",3,!0);const h=[",",";"],m=N(()=>r()?["no","yes"]:["no","labels","values"]);let g=re(void 0),p=re(""),_=re(""),b=re(","),w=re("no"),k=re(!1),E=re(!1),y=re(null),A=re("neutral"),S=re("");function j(ee){F(A,"error"),F(S,ee,!0),console.error(ee)}function z(){F(A,"neural"),F(S,"")}function T(){F(A,"success"),F(S,"")}function B(ee,ne,Oe){F(y,e.WASM().then(Xe=>{v($f(Xe,ee,ne,Oe,!0)),T()}).catch(Xe=>{v(null),j(Xe)}),!0)}function C(ee,ne){if(!ee||ee.size<10)return;const Xe=ee.slice(0,1e5),Be=new FileReader;Be.onload=()=>{const je=Be.result;!je||je.length<0||((Ce=>{var et=Pl(Ce,4);F(b,et[0],!0),F(k,et[1],!0),F(E,et[2],!0),F(w,et[3],!0)})(sv(je)),F(E,a()||l(E),!0),ne&&l(w)!=="no"&&F(w,"yes"))},Be.onerror=function(je){csvString=null,F(A,"error"),F(S,je,!0),console.error("Error reading CSV file.",je)},Be.readAsText(Xe)}function q(ee){try{const ne=tv(ee,l(b),l(w)==="yes"?"labels":l(w),l(k),l(E),l(p),l(_));if(ne.values.nrows<1)throw new Error("Dataset must have at least 1 row.");const Oe=r()?r().prep&&Object.keys(r().prep).length>0?r().prep.npred:r().ncols+r().exclvars.length:0;if(r()&&ne.values.ncols!==Oe)throw new Error("Dataset has different number of columns than the training set.");if(ne.classNames.length>ne.values.nrows/2)throw new Error("Dataset has too many unique "+o().toLowerCase()+" labels ("+ne.classNames.length+"), check your CSV file.");if(a()&&ne.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&ne.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");ne.fileName=l(g).name.replace(/\.[^/.]+$/,""),r()&&(ne.varrev=r().varrev,ne.header=r().header,ne.varlabels=r().varlabels,ne.varvalues=r().varvalues,ne.varvaluesName=r().varvaluesName,ne.varvaluesUnits=r().varvaluesUnits),u(ne),T()}catch(ne){u(null),j(ne)}}function Y(ee){const ne=new FileReader;ne.onload=()=>{q(ne.result)},ne.readAsText(l(g))}async function V(ee){try{const ne=l(g)instanceof FileList?l(g):[l(g)];u(await iv(ne)),T()}catch(ne){j("Failed to read SPC file: "+ne)}}function R(){F(g,""),u(null),v(null),F(p,""),F(_,""),z()}fe(()=>{if(!(l(g)===0||l(g)===void 0||u())){if(l(g)===null||l(g)===""){R();return}if(Array.isArray(l(g))){if(l(g).filter(ee=>ee.slice(-4)===".spc").length!==l(g).length){j("Multiple file selection is allowed only for SPC files.");return}V(l(g));return}l(g)&&(l(g).type==="text/csv"||l(g).type==="application/vnd.ms-excel")?(C(l(g),r()),z()):V([l(g)])}}),fe(()=>{l(b)&&z()}),fe(()=>{if(u()&&r()&&!v()&&!l(S))try{v(B(r(),u(),s())),T()}catch(ee){u(null),v(null),j(ee)}});var U=Ph(),Z=G(U);{var J=ee=>{var ne=Nh(),Oe=G(ne);Sn(Oe,()=>l(g)===void 0,je=>{ae(je,{children:(Ce,et)=>{var xe=he(),Ve=G(xe);{var te=oe=>{ml(oe,{id:"dataFile",message:"Select CSV file with dataset",get file(){return l(g)},set file(_e){F(g,_e,!0)}})},pe=oe=>{ml(oe,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return l(g)},set file(_e){F(g,_e,!0)}})};D(Ve,oe=>{d()?oe(te):oe(pe,!1)})}M(Ce,xe)},$$slots:{default:!0}})});var Xe=P(Oe,2);{var Be=je=>{var Ce=Ch(),et=G(Ce);ae(et,{label:"Delimiter",children:(ue,Te)=>{At(ue,{id:"sep",get options(){return h},get value(){return l(b)},set value(Le){F(b,Le,!0)}})},$$slots:{default:!0}});var xe=P(et,2);ae(xe,{label:"Row labels",children:(ue,Te)=>{Ln(ue,{id:"hasLabels",options:["no","yes"],get value(){return l(k)},set value(Le){F(k,Le,!0)}})},$$slots:{default:!0}});var Ve=P(xe,2);{var te=ue=>{ae(ue,{get label(){return`${o()??""} labels`},children:(Te,Le)=>{Ln(Te,{id:"hasLabels",options:["no","yes"],get value(){return l(E)},set value(Qe){F(E,Qe,!0)}})},$$slots:{default:!0}})};D(Ve,ue=>{a()||ue(te)})}var pe=P(Ve,2);ae(pe,{label:"Header",children:(ue,Te)=>{At(ue,{id:"header",get options(){return l(m)},get value(){return l(w)},set value(Le){F(w,Le,!0)}})},$$slots:{default:!0}});var oe=P(pe,2);{var _e=ue=>{var Te=Sh(),Le=G(Te);ae(Le,{label:"Header name",children:(Ze,Ye)=>{Xi(Ze,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return l(p)},set value(Ie){F(p,Ie,!0)}})},$$slots:{default:!0}});var Qe=P(Le,2);ae(Qe,{label:"Header units",children:(Ze,Ye)=>{Xi(Ze,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return l(_)},set value(Ie){F(_,Ie,!0)}})},$$slots:{default:!0}}),M(ue,Te)};D(oe,ue=>{l(w)==="values"&&ue(_e)})}var ke=P(oe,2);ae(ke,{label:" ",children:(ue,Te)=>{Nt(ue,{text:"Load",onclick:Y})},$$slots:{default:!0}}),M(je,Ce)};D(Xe,je=>{l(g)&&!Array.isArray(l(g))&&(l(g).type==="text/csv"||l(g).type==="application/vnd.ms-excel")&&je(Be)})}M(ee,ne)},Q=ee=>{var ne=he(),Oe=G(ne);{var Xe=Be=>{var je=he(),Ce=G(je);$u(Ce,()=>l(y),et=>{ae(et,{children:(xe,Ve)=>{var te=jh(),pe=G(te);Pv(pe);var oe=P(pe,2),_e=L(oe);$(()=>ve(_e,r()?"Loading data and apply model...":"Loading data...")),M(xe,te)},$$slots:{default:!0}})},void 0,(et,xe)=>{ae(et,{status:"error",children:(Ve,te)=>{var pe=Mh(),oe=L(pe);$(()=>ve(oe,l(xe))),M(Ve,pe)},$$slots:{default:!0}})}),M(Be,je)};D(Oe,Be=>{l(y)&&Be(Xe)})}M(ee,ne)};D(Z,ee=>{u()?ee(Q,!1):ee(J)})}var se=P(Z,2);{var le=ee=>{Ah(ee,{get dataset(){return u()},reset:R,get title(){return f()}})};D(se,ee=>{u()&&ee(le)})}var ie=P(se,2);{var ce=ee=>{ae(ee,{status:"error",children:(ne,Oe)=>{var Xe=Th(),Be=L(Xe);$(()=>ve(Be,l(S))),M(ne,Xe)},$$slots:{default:!0}})};D(ie,ee=>{(l(A)==="error"||l(S))&&ee(ce)})}M(t,U),ge()}var Lh=H('<tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (outliers)</td><td class="svelte-1fhdfcc"> </td></tr>'),Rh=H('<table class="svelte-1fhdfcc"><thead><tr class="svelte-1fhdfcc"><th class="svelte-1fhdfcc"></th><th class="svelte-1fhdfcc">f</th></tr></thead><tbody><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">DoF (Nf)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Mean (f0)</td><td class="svelte-1fhdfcc"> </td></tr><tr class="svelte-1fhdfcc"><td class="label svelte-1fhdfcc">Crit (extreme)</td><td class="svelte-1fhdfcc"> </td></tr><!></tbody></table>');function Uo(t,e){me(e,!0);let r=O(e,"isAlt",3,!1);var s=he(),o=G(s);{var a=c=>{var f=Rh(),u=P(L(f)),v=L(u),d=P(L(v)),h=L(d),m=P(v),g=P(L(m)),p=L(g),_=P(m),b=P(L(_)),w=L(b),k=P(_);{var E=y=>{var A=Lh(),S=P(L(A)),j=L(S);$(z=>ve(j,z),[()=>e.nimca.oCrit.toFixed(1)]),M(y,A)};D(k,y=>{r()||y(E)})}$((y,A)=>{ve(h,e.nimca.Nf),ve(p,y),ve(w,A)},[()=>e.nimca.f0.toFixed(3),()=>e.nimca.eCrit.toFixed(1)]),M(c,f)};D(o,c=>{e.nimca&&c(a)})}M(t,s),ge()}var zh=H('<p class="title"> </p>'),Ih=H("<!> <!>",1),Fh=H("<!> <!> <!> <!> <!>",1);function Wo(t,e){me(e,!0);let r=O(e,"isAlt",3,!1),s=O(e,"fit",3,!0),o=O(e,"nimca",15);const a=[10,5,1,.1],c=[5,1,.1,.01];let f=re(Me(o()?o().center:!0)),u=re(Me(o()?o().scale:!1));fe(()=>{s()&&e.calset&&o(or.fit(e.calset,l(f),l(u)))});var v=he(),d=G(v);{var h=m=>{var g=Fh(),p=G(g);ae(p,{name:"target-class",label:"",children:(A,S)=>{var j=zh(),z=L(j);$(()=>ve(z,`Target class: ${o().className??""}`)),M(A,j)},$$slots:{default:!0}});var _=P(p,2);{var b=A=>{var S=Ih(),j=G(S);ae(j,{name:"center",label:"Center",children:(T,B)=>{Ln(T,{id:"center",options:["no","yes"],get value(){return l(f)},set value(C){F(f,C,!0)}})},$$slots:{default:!0}});var z=P(j,2);ae(z,{name:"scale",label:"Scale",children:(T,B)=>{Ln(T,{id:"scale",options:["no","yes"],get value(){return l(u)},set value(C){F(u,C,!0)}})},$$slots:{default:!0}}),M(A,S)};D(_,A=>{s()&&A(b)})}var w=P(_,2);ae(w,{name:"alpha",label:"Alpha, %:",children:(A,S)=>{At(A,{get options(){return a},get value(){return o().alpha},set value(j){o(o().alpha=j,!0)}})},$$slots:{default:!0}});var k=P(w,2);{var E=A=>{ae(A,{name:"gamma",label:"Gamma, %:",children:(S,j)=>{At(S,{get options(){return c},get value(){return o().gamma},set value(z){o(o().gamma=z,!0)}})},$$slots:{default:!0}})};D(k,A=>{r()||A(E)})}var y=P(k,2);ae(y,{name:"limits",label:"Limits:",children:(A,S)=>{At(A,{options:["classic","robust"],get value(){return o().limType},set value(j){o(o().limType=j,!0)}})},$$slots:{default:!0}}),M(m,g)};D(d,m=>{o()&&o().className&&m(h)})}M(t,v),ge()}var qh=H('<table class="svelte-1bca91p"><thead><tr class="svelte-1bca91p"><th class="svelte-1bca91p"></th><th class="svelte-1bca91p">Cal</th></tr></thead><tbody><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Objects</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Extremes</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Outliers</td><td class="svelte-1bca91p"> </td></tr><tr class="svelte-1bca91p"><td class="label svelte-1bca91p">Sensitivity</td><td class="svelte-1bca91p"> </td></tr></tbody></table>');function Oh(t,e){me(e,!0);let r=N(()=>e.calres?e.calres.nrows:0);var s=he(),o=G(s);{var a=c=>{var f=qh(),u=P(L(f)),v=L(u),d=P(L(v)),h=L(d),m=P(v),g=P(L(m)),p=L(g),_=P(m),b=P(L(_)),w=L(b),k=P(_),E=P(L(k)),y=L(E);$(A=>{ve(h,l(r)),ve(p,e.calres.outcomes.rolsNum.extreme),ve(w,e.calres.outcomes.rolsNum.outlier),ve(y,A)},[()=>e.calres.outcomes.stat.sensitivity.toFixed(3)]),M(c,f)};D(o,c=>{e.calres&&c(a)})}M(t,s),ge()}var Bh=H('<div class="msg-select"> </div>'),Dh=H('<div class="msg-select"> </div>'),Vh=H('<div class="msg-select"> </div>'),Yh=H('<div class="msg-select"> </div>'),Uh=H('<div class="selected-buttons svelte-188sk7n"><!></div>'),Wh=H('<div class="selected-buttons svelte-188sk7n"><!></div>'),Hh=H("<!> <!> <!>",1),Gh=()=>switchPlot(i),Xh=(t,e,r)=>F(e,l(r),!0),Kh=H("<button> </button>"),Jh=H('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Ho(t,e){me(e,!0);let r=O(e,"selobjText",3,"Click to select an object..."),s=O(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),o=O(e,"clearText",3,"Click anywhere to remove selection..."),a=O(e,"params",15),c=Me({objects:-1,variables:[]}),f=re(Me(Object.keys(e.plots)[0]));function u(T,B){c.objects=B?B[T]:T}function v(T){c.objects=-1}function d(T){c.variables=T}function h(T){c.variables=[]}let m={objects:{select:u,unselect:v},variables:{select:d,unselect:h},stats:{}},g=N(()=>l(f)?e.plots[l(f)]:null),p=N(()=>l(g)?l(g).component:null);var _=Jh(),b=L(_),w=L(b),k=L(w);Ss(k,()=>l(p),(T,B)=>{B(T,{get params(){return a()[l(f)]},get callbacks(){return m[l(g).scope]},get selected(){return c[l(g).scope]},get props(){return e.props}})});var E=P(w,2),y=L(E);{var A=T=>{var B=he(),C=G(B);{var q=V=>{var R=Bh(),U=L(R);$(()=>ve(U,r())),M(V,R)},Y=V=>{var R=Dh(),U=L(R);$(()=>ve(U,o())),M(V,R)};D(C,V=>{c[l(g).scope]<0?V(q):V(Y,!1)})}M(T,B)};D(y,T=>{l(g).scope==="objects"&&a()[l(f)].plotType!=="l"&&r().length>0&&T(A)})}var S=P(y,2);{var j=T=>{var B=he(),C=G(B);{var q=V=>{var R=Vh(),U=L(R);$(()=>ve(U,s())),M(V,R)},Y=V=>{var R=Yh(),U=L(R);$(()=>ve(U,o())),M(V,R)};D(C,V=>{c[l(g).scope].length===0?V(q):V(Y,!1)})}M(T,B)};D(S,T=>{l(g).scope==="variables"&&a()[l(f)].plotType!=="l"&&s().length>0&&T(j)})}var z=P(b,2);nt(z,21,()=>Object.keys(e.plots),lt,(T,B)=>{var C=he(),q=G(C);{var Y=R=>{var U=Hh(),Z=G(U);Iv(Z,{get title(){return l(g).label},labelWidth:12,get options(){return e.controls[l(f)]},get value(){return a()[l(f)]},set value(ie){a(a()[l(f)]=ie,!0)}});var J=P(Z,2);{var Q=ie=>{var ce=Uh(),ee=L(ce);Rr(ee,()=>l(g).buttons,()=>c.objects),M(ie,ce)};D(J,ie=>{l(g).scope==="objects"&&l(g).buttons&&c.objects>=0&&ie(Q)})}var se=P(J,2);{var le=ie=>{var ce=Wh(),ee=L(ce);Rr(ee,()=>l(g).buttons,()=>c.variables),M(ie,ce)};D(se,ie=>{l(g).scope==="variables"&&l(g).buttons&&c.variables.length>0&&ie(le)})}M(R,U)},V=R=>{var U=Kh();U.__keydown=[Gh],U.__click=[Xh,f,B];var Z=L(U);$(()=>{xt(U,1,`plot-selector plot-selector-${l(B)??""}`,"svelte-188sk7n"),ve(Z,e.plots[l(B)].label)}),M(R,U)};D(q,R=>{l(g)&&l(f)===l(B)?R(Y):R(V,!1)})}M(T,C)}),M(t,_),ge()}vt(["keydown","click"]);function kc(t,e,r){!e.callbacks||!e.callbacks.select||zn(t,t.target.tagName,s=>e.callbacks.select(s,r()))}function Qh(t,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var Zh=ye("<text> </text>"),$h=ye('<g class="series series-textlabels"></g>'),e0=ye('<g class="series series-line"><polyline class="line"></polyline></g>'),t0=ye("<rect></rect>"),r0=ye('<g class="series series-bar"></g>'),n0=ye("<text> </text>"),s0=ye('<g class="series series-points series-points1"></g>'),l0=ye('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),o0=ye('<g class="series series-points series-points1"><text> </text></g>'),a0=ye('<g class="series series-bar"><rect></rect></g>'),i0=ye('<g class="series series-text"><text> </text></g>'),c0=ye("<!><!><!>",1),u0=ye("<!><!><!><!><!>",1);function Ec(t,e){me(e,!0);let r=O(e,"shortenLabels",3,!0),s=O(e,"lineWidth",3,1),o=O(e,"nBars",3,1),a=O(e,"barNum",3,1),c=O(e,"markerSize",3,null),f=O(e,"markerWidth",3,2),u=O(e,"marker",3,1),v=O(e,"colors",3,void 0),d=O(e,"filled",3,void 0),h=O(e,"mainColor",19,()=>In.cal),m=O(e,"faceColor",3,null),g=O(e,"selected",19,()=>-1),p=O(e,"maskSelected",3,!0),_=O(e,"xRange",15),b=O(e,"yRange",15),w=O(e,"ind",3,null);const k=Yt("axes"),E=N(()=>Dt(e.xValues,"PlotSeries")),y=N(()=>l(E)?Dt(e.yValues,"PlotSeries",l(E).length):null);fe(()=>{if(w()){const xe=w().map(Ve=>Ve+1);_(l(E)?Qr(l(E).subset(xe)):null),b(l(y)?Qr(l(y).subset(xe)):null)}else _(l(E)?Qr(l(E)):null),b(l(y)?Qr(l(y)):null)});const A=N(()=>m()===null?e.plotType==="p"?"transparent":"white":m()),S=[1,.8,.8,.8,.8,.8,.8,.8],j=[.85,.65,.65,.65,.65,.65,.65,.65],z=N(()=>c()?c():e.plotType==="p"?S[u()-1]:j[u()-1]),T=N(()=>ns[u()-1]),B=N(()=>Lo[k.scales().plot]),C=N(()=>pt([0],k.tY())[0]),q=N(()=>Ro([.8],k.tX())[0]),Y=N(()=>e.plotType==="h"?l(q)/o():0),V=N(()=>e.plotType==="h"?l(q)/2-(a()-1)*l(Y):0),R=N(()=>l(B));let U=N(()=>e.plotType==="l"||e.plotType==="b"?Fo(l(E),l(y),k.tX(),k.tY()):null),Z=N(()=>l(E)?pt(l(E),k.tX()):null),J=N(()=>l(y)?pt(l(y),k.tY()):null),Q=N(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(xe=>xe.slice(0,yc)):e.labels:null);const se=N(()=>w()?w():qr(0,l(Z).length-1));let le=N(()=>v()&&v().length===l(E).length?v():Array(l(E).length).fill(h())),ie=N(()=>d()&&d().length===l(E).length?d().map(xe=>xe?"ff":"30"):Array(l(E).length).fill("30")),ce=N(()=>v()&&v().length===l(E).length?v().map((xe,Ve)=>xe+l(ie)[Ve]):Array(l(E).length).fill(m()));const ee=N(()=>`font-size:${l(z)}em;fill:${l(A)};cursor:default;text-anchor:middle;stroke-width:${f()}px;user-select:none;`),ne=`font-size:0.85em;fill:${_c};cursor:default;text-anchor:middle;stroke:${_c};stroke-width:0.1px;user-select:none;`,Oe=N(()=>`font-size:${l(z)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),Xe=`fill:transparent;stroke-width:${s()}px;`,Be=`stroke-width:${s()}px;`;fe(()=>{g()&&w()&&w().indexOf(g())<0&&e.callbacks.unselect()});var je=he(),Ce=G(je);{var et=xe=>{var Ve=u0(),te=G(Ve);{var pe=Ye=>{var Ie=$h();nt(Ie,21,()=>l(se),lt,(ct,tt)=>{var Ge=Zh(),Qt=L(Ge);$(()=>{I(Ge,"opacity",l(tt)===g()),I(Ge,"x",l(Z)[l(tt)]-l(V)+l(Y)/2),I(Ge,"y",l(J)[l(tt)]),I(Ge,"dy",l(y).v[l(tt)]<0?l(R):-l(R)),ve(Qt,l(Q)[l(tt)])}),M(ct,Ge)}),$(()=>gt(Ie,ne+(g()>=0?"opacity:0.2;":""))),M(Ye,Ie)};D(te,Ye=>{e.showLabels&&l(Q)&&Ye(pe)})}var oe=P(te);{var _e=Ye=>{var Ie=e0(),ct=L(Ie);$(()=>{gt(Ie,Xe),I(ct,"points",l(U)),I(ct,"stroke",h())}),M(Ye,Ie)};D(oe,Ye=>{(e.plotType==="l"||e.plotType==="b")&&Ye(_e)})}var ke=P(oe);{var ue=Ye=>{var Ie=r0();Ie.__click=[kc,e,w],nt(Ie,21,()=>l(se),lt,(ct,tt)=>{var Ge=t0();$(()=>{I(Ge,"x",l(Z)[l(tt)]-l(V)),I(Ge,"y",l(y).v[l(tt)]<0?l(C):l(J)[l(tt)]),I(Ge,"fill",l(le)[l(tt)]),I(Ge,"width",l(Y)),I(Ge,"height",l(y).v[l(tt)]<0?l(J)[l(tt)]-l(C):l(C)-l(J)[l(tt)])}),M(ct,Ge)}),$(()=>gt(Ie,Be+(g()>=0?"opacity:0.2;":""))),M(Ye,Ie)};D(ke,Ye=>{e.plotType==="h"&&Ye(ue)})}var Te=P(ke);{var Le=Ye=>{var Ie=s0();Ie.__click=[kc,e,w],nt(Ie,21,()=>l(se),lt,(ct,tt)=>{var Ge=n0(),Qt=L(Ge);$(()=>{I(Ge,"x",l(Z)[l(tt)]),I(Ge,"y",l(J)[l(tt)]),I(Ge,"fill",l(ce)[l(tt)]),I(Ge,"stroke",l(le)[l(tt)]),ve(Qt,l(T))}),M(ct,Ge)}),$(()=>gt(Ie,l(ee)+(g()>=0?"opacity:0.2;":""))),M(Ye,Ie)};D(Te,Ye=>{(e.plotType==="p"||e.plotType==="b")&&Ye(Le)})}var Qe=P(Te);{var Ze=Ye=>{var Ie=c0(),ct=G(Ie);{var tt=Se=>{var Ee=l0();I(Ee,"x",0),I(Ee,"y",0),Ee.__click=[Qh,e],M(Se,Ee)};D(ct,Se=>{p()&&Se(tt)})}var Ge=P(ct);{var Qt=Se=>{var Ee=o0(),Fe=L(Ee),bt=L(Fe);$(()=>{gt(Ee,l(Oe)),I(Fe,"x",l(Z)[g()]),I(Fe,"y",l(J)[g()]),I(Fe,"stroke",l(le)[g()]),I(Fe,"fill",l(ce)[g()]),ve(bt,l(T))}),M(Se,Ee)},Or=Se=>{var Ee=a0(),Fe=L(Ee);$(()=>{gt(Ee,Be),I(Fe,"stroke",l(le)[g()]),I(Fe,"fill",l(le)[g()]),I(Fe,"x",l(Z)[g()]-l(V)),I(Fe,"y",l(y).v[g()]<0?l(C):l(J)[g()]),I(Fe,"width",l(Y)),I(Fe,"height",l(y).v[g()]<0?l(J)[g()]-l(C):l(C)-l(J)[g()])}),M(Se,Ee)};D(Ge,Se=>{e.plotType!=="h"?Se(Qt):Se(Or,!1)})}var Br=P(Ge);{var we=Se=>{var Ee=i0(),Fe=L(Ee),bt=L(Fe);$(()=>{gt(Ee,ne),I(Fe,"stroke",wc),I(Fe,"fill",wc),I(Fe,"x",l(Z)[g()]),I(Fe,"y",l(J)[g()]),I(Fe,"dy",l(y).v[g()]<0?l(R):-l(R)),ve(bt,l(Q)[g()])}),M(Se,Ee)};D(Br,Se=>{e.showLabels&&l(Q)&&l(Q).length>0&&Se(we)})}M(Ye,Ie)};D(Qe,Ye=>{g()>=0&&Ye(Ze)})}M(xe,Ve)};D(Ce,xe=>{l(Z)&&l(J)&&xe(et)})}M(t,je),ge()}vt(["click"]);var f0=H("<!> <!> <!> <!>",1);function Go(t,e){let r=O(e,"whole",3,!1),s=Nn(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);dc(t,sr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return H1},get pngWidth(){return X1},get pngHeight(){return K1},get pngRes(){return J1}},()=>s,{children:(o,a)=>{var c=f0(),f=G(c);Rr(f,()=>e.children);var u=P(f,2);hc(u,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var v=P(u,2);mc(v,{showGrid:!0,get label(){return e.yLabel}});var d=P(v,2);gc(d,{}),M(o,c)},$$slots:{default:!0}}))}var v0=H("<!> <!> <!> <!>",1);function Xo(t,e){me(e,!0);const r=N(()=>e.props&&e.props.data?e.props.data:null),s=N(()=>e.props&&e.props.res?e.props.res:null),o=N(()=>l(s)&&e.params.resID?l(s)[e.params.resID]:null),a=N(()=>l(s)&&e.params.resID?l(r)[e.params.resID]:null),c=N(()=>e.props&&e.props.model?e.props.model:null),f="#909090";let u=N(()=>l(c)&&l(c).oCrit?l(c).oCrit:0),v=N(()=>l(c)&&l(c).eCrit?l(c).eCrit:0),d=N(()=>l(o).objindices.map(V=>V+1)),h=N(()=>th(l(o).outcomes.f,1,1,e.params.transType)),m=N(()=>l(o).objlabels.map(V=>V.slice(0,yc))),g="Full dustance",p="Objects",_=N(()=>e.params.transType==="log"?"Full distance, log(1 + f)":"Full distance, f"),b=re(void 0),w=re(void 0),k=N(()=>eh(l(a),l(o),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),E=N(()=>e.params.colorByObj?e.params.colorByObj.ind:null),y=N(()=>l(E)?Ar(l(E))+1:Ar(l(o).objindices)+1),A=N(()=>l(E)?Ir(l(E)):Ir(l(o).objindices)),S=N(()=>(l(y)-l(A))*.025),j=N(()=>[l(A)-l(S),l(y)+l(S)]),z=N(()=>({x:l(j),y:e.params.transType==="log"?[Math.log(1+l(u)),Math.log(1+l(u))]:[l(u),l(u)]})),T=N(()=>({x:l(j),y:e.params.transType==="log"?[Math.log(1+l(v)),Math.log(1+l(v))]:[l(v),l(v)]})),B=N(()=>{if(!l(z)||!l(w))return[0,1];const V=Math.max(l(w)[1],l(z).y[0]);return[-.02*(V-l(w)[0]),(1.05+.1*(e.params.colorBy!=="none")+.05*e.params.showLabels)*V]});var C=he(),q=G(C);{var Y=V=>{Go(V,{title:g,get limX(){return l(j)},get limY(){return l(B)},xLabel:p,get yLabel(){return l(_)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(R,U)=>{var Z=v0(),J=G(Z);{var Q=ne=>{nn(ne,{get xValues(){return l(T).x},get yValues(){return l(T).y},lineColor:f,lineType:2})};D(J,ne=>{l(T)&&ne(Q)})}var se=P(J,2);{var le=ne=>{nn(ne,{get xValues(){return l(z).x},get yValues(){return l(z).y},lineColor:f,lineType:3})};D(se,ne=>{l(z)&&(e.params.resID!=="test"||e.params.subset&&e.params.subset==="members")&&e.params.resID&&e.params.resID!=="new"&&ne(le)})}var ie=P(se,2);Ec(ie,{get labels(){return l(m)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return l(d)},get yValues(){return l(h).values},plotType:"p",get showLabels(){return e.params.showLabels},get marker(){return Do[e.params.resID]},get colors(){return l(k).colors},get filled(){return l(k).filled},get ind(){return l(E)},get xRange(){return l(b)},set xRange(ne){F(b,ne,!0)},get yRange(){return l(w)},set yRange(ne){F(w,ne,!0)}});var ce=P(ie,2);{var ee=ne=>{{let Oe=N(()=>l(k).breaks!==null);bc(ne,{get show(){return l(Oe)},get colmap(){return l(k).map},get breaks(){return l(k).breaks},get labels(){return l(k).labels}})}};D(ce,ne=>{l(k)&&l(k).showBar&&ne(ee)})}M(R,Z)},$$slots:{default:!0}})};D(q,V=>{l(d)&&l(h)&&V(Y)})}M(t,C),ge()}var d0=H("<!> <!> <!>",1),h0=H("<!> <!> <!>",1);function m0(t,e){me(e,!0);const r="#e0e0e0",s="Number of extremes (expected)",o="Number of extremes (observed)",a="plot-extremes";function c(T){const B=De.zeros(T+1),C=De.zeros(T+1),q=De.zeros(T+1),Y=De.zeros(T+1);for(let V=1;V<T;V++){const R=V/T,U=2*Math.sqrt(V*(1-R));B.v[V]=V,q.v[V]=V,C.v[V]=V-U,Y.v[V]=V+U}return B.v[T]=T,q.v[T]=T,C.v[T]=T,Y.v[T]=T,{xStart:B,xEnd:q,yStart:C,yEnd:Y}}function f(T,B,C){const q=B.f,Y=T.nMembers,V=De.zeros(Y);for(let R=1;R<=Y;R++){const U=R/Y,Z=jn(1-U,C);let J=0;for(let Q=0;Q<Y;Q++)q[T.ind.members[Q]]>Z&&(J+=1);V.v[R-1]=J}return V}let u=N(()=>e.props&&e.props.res?e.props.res:null),v=N(()=>e.props&&e.props.model?e.props.model:null),d=N(()=>l(v)&&l(v).Nf?l(v).Nf:0),h=N(()=>Object.keys(l(u))),m=N(()=>e.params.resID!=="both"?[e.params.resID]:l(h)),g=N(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),p=N(()=>l(m)?l(m).map(T=>({id:T,label:T,point:{marker:1,lineColor:In[T],faceColor:Vo[T],marker:Do[T],markerSize:.85,lineWidth:1.5}})):null),_=N(()=>l(u)&&l(m)?l(m).reduce((T,B)=>(T[B]=De.seq(1,l(u)[B].nMembers),T),{}):null),b=N(()=>l(u)&&l(h)?l(h).reduce((T,B)=>(T[B]=f(l(u)[B],l(u)[B].outcomes,l(d)),T),{}):null),w=N(()=>l(m)?l(m).reduce((T,B)=>Math.max(T,l(_)[B].length),0):1),k=N(()=>l(w)>1?c(l(w)):null),E=N(()=>l(_)?[-1,l(w)+2]:[0,1]),y=N(()=>l(_)?[-1,l(w)+2]:[0,1]),A="Extremes";var S=he(),j=G(S);{var z=T=>{Go(T,{title:A,xLabel:s,yLabel:o,get limX(){return l(E)},get limY(){return l(y)},fileName:a,whole:!0,children:(B,C)=>{var q=h0(),Y=G(q);{var V=J=>{var Q=d0(),se=G(Q);j1(se,sr(()=>l(k),{lineColor:r}));var le=P(se,2);nn(le,{get xValues(){return l(k).xStart},get yValues(){return l(k).yStart},lineColor:r});var ie=P(le,2);nn(ie,{get xValues(){return l(k).xEnd},get yValues(){return l(k).yEnd},lineColor:r}),M(J,Q)};D(Y,J=>{l(k)&&J(V)})}var R=P(Y,2);nt(R,17,()=>l(m),lt,(J,Q)=>{Ec(J,{get xValues(){return l(_)[l(Q)]},get yValues(){return l(b)[l(Q)]},plotType:"p",showLabels:!1,get faceColor(){return Vo[l(Q)]},get mainColor(){return In[l(Q)]},get marker(){return Do[l(Q)]},lineWidth:1.5})});var U=P(R,2);{var Z=J=>{W1(J,{get items(){return l(p)},get position(){return l(g)}})};D(U,J=>{l(p)&&l(p).length>0&&J(Z)})}M(B,q)},$$slots:{default:!0}})};D(j,T=>{l(u)&&T(z)})}M(t,S),ge()}function g0(t,e){if(t.target.tagName!=="rect"){F(e,-1);return}const r=Array.from(t.target.parentNode.children).indexOf(t.target);if(r<0){F(e,-1);return}l(e)!==r&&F(e,r,!0)}var p0=H("<!> <!> <!>",1),b0=H("<!> <!> <!> <!> <!>",1),_0=H('<div class="plot-container svelte-1838sos" role="tooltip"><!></div>');function Ko(t,e){me(e,!0);let r=O(e,"outliers",19,()=>[]);const s=N(()=>e.props&&e.props.data?e.props.data:null),o=N(()=>l(s)&&e.params.resID?l(s)[e.params.resID]:null);let a=re(-1);const c=N(()=>{const E=ht(l(o).varvalues),y=E.length,A=(E.v[1]-E.v[0])/2,S=(E.v[y-1]-E.v[y-2])/2,j=[E.v[0],E.v[y-1]],z=[j[0]-A,j[1]+S],T=(j[1]-j[0])/y;return{values:E,lim:z,width:T,hwidth:T*.5}}),f=N(()=>l(c)?l(c).values.apply(E=>E-l(c).hwidth):null),u=N(()=>l(o)?l(o).values.t():null);let v=N(()=>l(u)?l(u).getcolumn(e.selected>=0?e.selected+1:1):null),d=N(()=>{const E={all:l(u),sel:l(v),label:"Preprocessed data, X"},y=Qr(E.all.v),A=y[1]-y[0],S=[y[0]-A/50,y[1]+A/12],j=De.fill(y[1],E.sel.length);return E.lim=S,E.top=j,E.height=A,E});const h=N(()=>l(c)&&l(a)>=0?l(c).values.v[l(a)]:null),m=N(()=>l(d)&&l(a)>=0?l(d).sel.v[l(a)]:null),g=N(()=>l(o)&&l(a)>=0?l(o).varlabels[l(a)]:null),p=N(()=>l(o)&&e.selected>=0?`Object ${l(o).objlabels[e.selected].replace("_","-")}`:null),_=N(()=>l(o)?l(o).varvaluesName+(l(o).varvaluesUnits?", "+l(o).varvaluesUnits:""):null);var b=he(),w=G(b);{var k=E=>{var y=_0();y.__click=[g0,a];var A=L(y);Go(A,{get title(){return l(p)},get yLabel(){return l(d).label},get xLabel(){return l(_)},get limY(){return l(d).lim},get limX(){return l(c).lim},fileName:"plot-contributions",children:(S,j)=>{var z=b0(),T=G(z);{let Z=N(()=>e.selected>=0?"#e0e0e0":"#a0a0a0");pc(T,{get xValues(){return l(c).values},get yValues(){return l(d).all},get lineColor(){return l(Z)}})}var B=P(T,2);{var C=Z=>{var J=he(),Q=G(J);nt(Q,17,r,lt,(se,le)=>{{let ie=N(()=>l(d).all.getcolumn(l(le)+1));nn(se,{get xValues(){return l(c).values},get yValues(){return l(ie)},lineColor:"#ffdd88"})}}),M(Z,J)};D(B,Z=>{r().length>0&&Z(C)})}var q=P(B,2);{var Y=Z=>{nn(Z,{get xValues(){return l(c).values},get yValues(){return l(d).sel},lineColor:"crimson"})};D(q,Z=>{e.selected>=0&&Z(Y)})}var V=P(q,2);bl(V,{get left(){return l(f)},get top(){return l(d).top},get height(){return l(d).height},get width(){return l(c).width},faceColor:"transparent",borderColor:"transparent"});var R=P(V,2);{var U=Z=>{var J=p0(),Q=G(J);{let ie=N(()=>[l(h)]),ce=N(()=>[l(d).top.v[0]]),ee=N(()=>[l(g)]);_l(Q,{get xValues(){return l(ie)},get yValues(){return l(ce)},get labels(){return l(ee)},pos:3,textSize:.85})}var se=P(Q,2);{let ie=N(()=>[l(h)]),ce=N(()=>[l(m)]);O1(se,{get xValues(){return l(ie)},get yValues(){return l(ce)},faceColor:"crimson",lineColor:"crimson"})}var le=P(se,2);{let ie=N(()=>[l(f).v[l(a)]]),ce=N(()=>[l(d).top.v[l(a)]]);bl(le,{get left(){return l(ie)},get top(){return l(ce)},get height(){return l(d).height},get width(){return l(c).width},faceColor:"#ff000015"})}M(Z,J)};D(R,Z=>{l(a)>=0&&Z(U)})}M(S,z)},$$slots:{default:!0}}),M(E,y)};D(w,E=>{l(c)&&l(d)&&E(k)})}M(t,b),ge()}vt(["click"]);function Jo(t){const e=Object.keys(t),r=t[e[0]],s=r.nMembers>0&&r.nStrangers>0,o=e[0]==="new",a=r.nMembers>0?"members":r.nStrangers>0?"strangers":"all",c={resID:{el:At,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},subset:{el:At,hidden:!s||o,default:a,label:"Show",props:{options:["members","strangers","all"]}},transType:{el:At,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:Ln,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}};return r.nStrangers>0&&r.nStrangers==0&&r.classNames&&r.classNames.length>1&&(c.colorBy={el:At,hidden:!1,default:"roles",label:"Color by",props:{options:["roles","classes"]}}),c}function wl(t){return{resID:{el:At,hidden:t.length==1,default:t[0],label:"Results",props:{options:t}}}}function w0(t,e){me(e,!0);const r=(d,h=jt)=>{ae(d,{label:"Selected",children:(m,g)=>{Nt(m,{onclick:()=>e.markOutlier(h()),text:"remove"})},$$slots:{default:!0}})},s={cal:e.calsetp},o=N(()=>({cal:e.calres})),a={regular:sn.regular,extreme:sn.extreme,outlier:sn.outlier};fe(()=>{if(e.nimca.limType){const d=l(o)[l(u).acceptance.resID].outcomes;l(u).acceptance.colorByObj={classColmap:a,labels:[`regular: ${d.rolsNum.regular}`,`extreme: ${d.rolsNum.extreme}`,`outliers: ${d.rolsNum.outlier}`],values:d.rols}}});const c=N(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Xo,buttons:r},extremes:{label:"Extremes",scope:"stats",component:m0},dataset:{label:"Datasets",scope:"objects",component:Ko,buttons:r}})),f=Me({acceptance:Jo(l(o)),extremes:wl(["cal"]),dataset:wl(["cal"])});let u=re(Me({acceptance:Pn(f.acceptance),extremes:Pn(f.extremes),dataset:Pn(f.extremes)}));const v=N(()=>({res:l(o),model:e.nimca,data:s}));Ho(t,{get plots(){return l(c)},get controls(){return f},get props(){return l(v)},get params(){return l(u)},set params(d){F(u,d,!0)}}),ge()}var y0=H('<div class="outliers-pane svelte-1mp4dba"><!></div>'),x0=H('<div class="buttons"><!> <!></div>'),k0=H('<div class="model-stats svelte-1mp4dba"><!></div> <div class="result-stats svelte-1mp4dba"><!></div>',1),E0=H(`<p class="svelte-1mp4dba">In this tab you can train a Naïve DD-SIMCA (NIMCA) model and validate it using Procrustes cross-validation. After creating the model you can save it to a file and use it in other tabs. For example, validate it using test set (tab <strong>Test</strong>) or apply it to a dataset with unknown class membership (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1mp4dba">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1mp4dba">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">Class</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">A</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),A0=H(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to apply proper preprocessing methods. You can create a chain of the methods directly in the app
               (button <strong>Create</strong>), load previously created preprocessing model (<strong>Load</strong>), or just skip this step. In this case the data will be only mean centered for computing the distances.</p>`,1),S0=H(`<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">PCV is based on PCA decomposition, so you also have to select a number
               of components, just use large enough to cover all possible systematic variance. PCV is not sensitive to overfitting.</p> <p class="svelte-1mp4dba">After this step NIMCA model will be created automatically and you will be able to tune its parameters.</p>`,1),C0=H("<!> <!>",1),N0=H('<div class="help-text svelte-1mp4dba"><!></div>'),M0=H('<div class="app-container svelte-1mp4dba"><div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <div class="nimca-settings svelte-1mp4dba"><!> <!></div> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function j0(t,e){me(e,!0);const r=N(()=>e.session.train);fe(()=>{l(r).nimca&&!(l(r).nimca instanceof or)&&(l(r).nimca=or.fromJSON(l(r).nimca))});function s(){l(r).nimca=null,l(r).calres=null,l(r).calsetp=null,l(r).prepmodel=null}function o(B){if(B<0||B>l(r).calres.nrows-1)return;const C=l(r).calseto.objindices[B];C>=0&&!l(r).outliers.includes(C)&&(l(r).nimca=null,l(r).outliers.push(C),l(r).calseto=es(l(r).calset,l(r).outliers),s())}function a(){l(r).nimca=null,l(r).outliers=[],l(r).calseto=l(r).calset,s()}function c(){l(r).nimca=null,l(r).outliers.pop(),l(r).calseto=es(l(r).calset,l(r).outliers),s()}tl(()=>{l(r).calset===null?(l(r).outliers=[],l(r).calsetp=null,l(r).calseto=null,l(r).className=null,l(r).prepmodel=null,l(r).prepobj=[],l(r).prepType=null,l(r).nimca=null):l(r).calset&&!l(r).className&&(l(r).className=l(r).calset.classNames[0],l(r).calseto=l(r).calset)}),fe(()=>{l(r).calset===null&&(l(r).nimca=null,l(r).calseto=null,l(r).calsetp=null)}),fe(()=>{l(r).calsetp===null&&(l(r).nimca=null,l(r).calres=null)}),fe(()=>{l(r).calsetp&&l(r).nimca&&(l(r).calres=l(r).nimca.predict(l(r).calsetp))}),fe(()=>{const B=hr(()=>JSON.stringify(e.session,Ps));l(r).nimca?e.backupSession(B,l(r).calset,l(r).nimca):e.backupSession(B,l(r).calset)});var f=M0(),u=L(f),v=L(u),d=L(v);Yo(d,{className:"Class",classMandatory:!0,classUnique:!0,get dataset(){return l(r).calset},set dataset(B){l(r).calset=B}});var h=P(v,2);{var m=B=>{var C=y0(),q=L(C);No(q,{get outliers(){return l(r).outliers},get dataset(){return l(r).calset},resetOutliers:a,undoOutliers:c}),M(B,C)};D(h,B=>{l(r).outliers&&l(r).outliers.length>0&&B(m)})}var g=P(h,2);{var p=B=>{wh(B,{get WASM(){return e.WASM},get rawdata(){return l(r).calseto},get prepType(){return l(r).prepType},set prepType(C){l(r).prepType=C},get prepobj(){return l(r).prepobj},set prepobj(C){l(r).prepobj=C},get prepdata(){return l(r).calsetp},set prepdata(C){l(r).calsetp=C},get prepmeta(){return l(r).prepmeta},set prepmeta(C){l(r).prepmeta=C},get prepmodel(){return l(r).prepmodel},set prepmodel(C){l(r).prepmodel=C}})};D(g,B=>{l(r).calseto&&B(p)})}var _=P(g,2),b=L(_);{var w=B=>{Wo(B,{get className(){return l(r).className},get calset(){return l(r).calsetp},get nimca(){return l(r).nimca},set nimca(C){l(r).nimca=C}})};D(b,B=>{l(r).calsetp&&B(w)})}var k=P(b,2);{var E=B=>{ae(B,{label:"Download",children:(C,q)=>{var Y=x0(),V=L(Y);Nt(V,{onclick:()=>ko(l(r).nimca,l(r).calres,l(r).calset,"train",l(r).outliers),text:"Res (cal)"});var R=P(V,2);Nt(R,{onclick:()=>Eo(l(r).nimca,l(r).prepmodel),text:"Model"}),M(C,Y)},$$slots:{default:!0}})};D(k,B=>{l(r).nimca&&l(r).calres&&B(E)})}var y=P(_,2);{var A=B=>{var C=k0(),q=G(C),Y=L(q);Uo(Y,{get nimca(){return l(r).nimca}});var V=P(q,2),R=L(V);Oh(R,{get calres(){return l(r).calres}}),M(B,C)};D(y,B=>{l(r).nimca&&l(r).calres&&B(A)})}var S=P(u,2),j=L(S);{var z=B=>{var C=N0(),q=L(C);{var Y=R=>{var U=E0();M(R,U)},V=R=>{var U=C0(),Z=G(U);{var J=le=>{var ie=A0();M(le,ie)};D(Z,le=>{l(r).calsetp||le(J)})}var Q=P(Z,2);{var se=le=>{var ie=S0();M(le,ie)};D(Q,le=>{l(r).calsetp&&!l(r).pvset&&le(se)})}M(R,U)};D(q,R=>{l(r).calset?R(V,!1):R(Y)})}M(B,C)},T=B=>{var C=he(),q=G(C);{var Y=V=>{var R=he(),U=G(R);Sn(U,()=>l(r).calres,Z=>{w0(Z,sr({markOutlier:o},()=>l(r)))}),M(V,R)};D(q,V=>{l(r).nimca&&l(r).calres&&V(Y)},!0)}M(B,C)};D(j,B=>{!l(r).nimca||!l(r).calres?B(z):B(T,!1)})}M(t,f),ge()}var T0=H("<!> <!>",1),P0=H('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),L0=H('<p class="model-info svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model:</span> <!></p> <!>',1),R0=H("<p><!></p>"),z0=H("<!> <!>",1);function Ac(t,e){me(e,!0);let r=O(e,"prep",15),s=O(e,"nimca",15),o=re(""),a=re("neutral"),c=re("");function f(w){try{const k=JSON.parse(w,So);if(!Object.keys(k).includes("nimca")||!Object.keys(k).includes("prep")||k.nimca.class[0]!=="nimcamodel")throw new Error("The JSON file you selected does not contain NIMCA mdel.");k.nimca.fileName=l(d),r(k.prep),s(or.fromJSON(k.nimca)),F(a,"success"),F(c,"")}catch(k){s(null),r(null),F(a,"error"),F(c,k,!0)}}function u(w){const k=new FileReader;k.onload=()=>{f(k.result)},k.readAsText(l(o))}function v(){F(o,""),s(null),r(null),F(a,"neutral"),F(c,"")}fe(()=>{l(o)===null?(s(null),r(null),F(a,"neutral"),F(c,"")):(F(a,"neutral"),F(c,""))});let d=N(()=>l(o)?l(o).name.replace(/\.[^/.]+$/,""):"");var h=z0(),m=G(h);{var g=w=>{var k=T0(),E=G(k);Sn(E,()=>l(o),S=>{ae(S,{children:(j,z)=>{ml(j,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return l(o)},set file(T){F(o,T,!0)}})},$$slots:{default:!0}})});var y=P(E,2);{var A=S=>{ae(S,{label:" ",children:(j,z)=>{Nt(j,{onclick:u,text:"Load"})},$$slots:{default:!0}})};D(y,S=>{l(o)&&S(A)})}M(w,k)},p=w=>{ae(w,{name:"info",children:(k,E)=>{var y=L0(),A=G(y),S=P(L(A),2),j=L(S),z=P(S,4),T=P(z);{var B=q=>{var Y=P0(),V=P(G(Y),3);To(V,{get prepmodel(){return r()}}),M(q,Y)};D(T,q=>{r()&&q(B)})}var C=P(A,2);tn(C,{onclick:v}),$(()=>{I(S,"title",s().fileName),ve(j,s().fileName),ve(z,` ${s().ncols??""} predictors${s().center?", centered":""}${s().scale?", scaled":""} `)}),M(k,y)},$$slots:{default:!0}})};D(m,w=>{s()?w(p,!1):w(g)})}var _=P(m,2);{var b=w=>{ae(w,{status:"error",children:(k,E)=>{var y=R0(),A=L(y);Tt(A,()=>l(c)),M(k,y)},$$slots:{default:!0}})};D(_,w=>{(l(a)==="error"||l(c))&&w(b)})}M(t,h),ge()}var I0=H('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Out</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Sensitivity</td><td class="svelte-k5uafz"> </td></tr>',1),F0=H('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">In</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Specificity</td><td class="svelte-k5uafz"> </td></tr> <tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Selectivity</td><td class="svelte-k5uafz"> </td></tr>',1),q0=H('<tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Efficiency</td><td class="svelte-k5uafz"> </td></tr>'),O0=H('<table class="svelte-k5uafz"><thead><tr class="svelte-k5uafz"><th class="svelte-k5uafz"></th><th class="svelte-k5uafz">Test</th></tr></thead><tbody><tr class="svelte-k5uafz"><td class="label svelte-k5uafz">Members</td><td class="svelte-k5uafz"> </td></tr><!><tr class="section svelte-k5uafz"><td class="label svelte-k5uafz">Strangers</td><td class="svelte-k5uafz"> </td></tr><!><!></tbody></table>');function B0(t,e){me(e,!0);var r=he(),s=G(r);{var o=a=>{var c=O0(),f=P(L(c)),u=L(f),v=P(L(u)),d=L(v),h=P(u);{var m=y=>{var A=I0(),S=G(A),j=P(L(S)),z=L(j),T=P(S,2),B=P(L(T)),C=L(B);$(q=>{ve(z,e.res.outcomes.rolsNum.outlier+e.res.outcomes.rolsNum.extreme),ve(C,q)},[()=>e.res.outcomes.stat.sensitivity.toFixed(3)]),M(y,A)};D(h,y=>{e.res.nMembers>0&&y(m)})}var g=P(h),p=P(L(g)),_=L(p),b=P(g);{var w=y=>{var A=F0(),S=G(A),j=P(L(S)),z=L(j),T=P(S,2),B=P(L(T)),C=L(B),q=P(T,2),Y=P(L(q)),V=L(Y);$((R,U)=>{ve(z,e.res.outcomes.decsNum.in-e.res.outcomes.rolsNum.regular),ve(C,R),ve(V,U)},[()=>e.res.outcomes.stat.specificity.toFixed(3),()=>e.res.outcomes.stat.selectivity.toFixed(3)]),M(y,A)};D(b,y=>{e.res.nStrangers>0&&y(w)})}var k=P(b);{var E=y=>{var A=q0(),S=P(L(A)),j=L(S);$(z=>ve(j,z),[()=>e.res.outcomes.stat.efficiency.toFixed(3)]),M(y,A)};D(k,y=>{e.res.nStrangers>0&&e.res.nMembers>0&&y(E)})}$(()=>{ve(d,e.res.nMembers),ve(_,e.res.nStrangers)}),M(a,c)};D(s,a=>{e.res&&a(o)})}M(t,r),ge()}function D0(t,e){me(e,!0);const r=(m,g=jt)=>{ae(m,{label:"Selected",children:(p,_)=>{Nt(p,{onclick:()=>e.markOutlier(g()),text:"remove"})},$$slots:{default:!0}})},s={test:e.testsetp},o=N(()=>({test:e.testres})),a={regular:sn.regular,extreme:sn.extreme,outlier:sn.outlier},c={alien:sn.alien,external:sn.external},f=N(()=>{const m=e.testres.outcomes;return{members:{classColmap:a,labels:[`regular: ${m.rolsNum.regular}`,`extreme: ${m.rolsNum.extreme}`,`outliers: ${m.rolsNum.outlier}`],values:m.rols,ind:e.testres.ind.members},strangers:{classColmap:c,labels:[`aliens: ${m.rolsNum.alien}`,`external: ${m.rolsNum.external}`],values:m.rols,ind:e.testres.ind.strangers}}}),u=N(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Xo,buttons:r},dataset:{label:"Datasets",scope:"objects",component:Ko,buttons:r}})),v=Me({acceptance:Jo(l(o)),dataset:wl(["test"])});let d=re(Me({acceptance:Pn(v.acceptance),dataset:Pn(v.dataset)}));fe(()=>{l(f)&&l(d).acceptance.subset&&(l(d).acceptance.colorByObj=l(d).acceptance.subset!=="all"?l(f)[l(d).acceptance.subset]:null)}),fe(()=>{l(d).acceptance.colorBy=l(d).acceptance.subset!=="all"?"roles":"classes"});const h=N(()=>({res:l(o),model:e.nimca,data:s}));Ho(t,{get plots(){return l(u)},get controls(){return v},get props(){return l(h)},get params(){return l(d)},set params(m){F(d,m,!0)}}),ge()}var V0=H("<p> </p>"),Y0=H('<div class="data-loader svelte-1w77c1q"><!> <!></div>'),U0=H('<div class="outliers-pane svelte-1w77c1q"><!></div>'),W0=H('<div class="buttons"><!> <!></div>'),H0=H('<div class="model-stats svelte-1w77c1q"><!></div> <div class="result-stats svelte-1w77c1q"><!></div>',1),G0=H('<p class="svelte-1w77c1q"><strong>Step 1</strong></p> <p class="svelte-1w77c1q">Load previously trained NIMCA model from file.</p>',1),X0=H(`<p class="svelte-1w77c1q"><strong>Step 2</strong></p> <p class="svelte-1w77c1q">Load test set set from CSV file. The requirements to the file are the same as for the training set (column with
               class labels is mandatory), but test set may contain class labels both for target class (members) as well as for
               alternative classes (strangers).</p>`,1),K0=H(`<div class="help-text svelte-1w77c1q"><p class="svelte-1w77c1q">In this tab you can apply previously trained NIMCA model to a test set. The test set can include target class members,
            objects belonging to alternative classes or both. You can use them for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),J0=H('<div class="app-container svelte-1w77c1q"><div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!> <!> <div class="nimca-settings svelte-1w77c1q"><!> <!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function Q0(t,e){me(e,!0);let r=re("");const s=N(()=>e.session.test);fe(()=>{l(s).nimca&&!(l(s).nimca instanceof or)&&(l(s).nimca=or.fromJSON(l(s).nimca))});function o(C){if(C<0||C>l(s).testres.nrows-1)return;const q=l(s).testseto.objindices[C];q>=0&&!l(s).outliers.includes(q)&&(l(s).outliers.push(q),l(s).testseto=es(l(s).testset,l(s).outliers),l(s).testsetp=null,l(s).testres=null)}function a(){l(s).outliers=[],l(s).testseto=l(s).testset,l(s).testsetp=null,l(s).testres=null}function c(){l(s).outliers.pop(),l(s).testseto=es(l(s).testset,l(s).outliers),l(s).testsetp=null,l(s).testres=null}async function f(C,q){if(F(r,""),!C)return null;if(!q||Object.keys(q).length===0){l(s).testsetp=C;return}e.WASM().then(Y=>{const V=js(Y,C.values,C.nresp,q,!1,!1),R=jo(ql(C),V);l(s).testsetp=xo(R,q)}).catch(Y=>{l(s).testsetp=null,console.error(Y),F(r,Y,!0)})}tl(()=>{l(s).testset===null&&(F(r,""),l(s).outliers=[],l(s).testsetp=null,l(s).testseto=null,l(s).testres=null),l(s).nimca===null&&(F(r,""),l(s).outliers=[],l(s).testset=null,l(s).testsetp=null,l(s).testseto=null,l(s).testres=null)}),fe(()=>{l(s).nimca===null&&(F(r,""),l(s).outliers=[],l(s).testset=null,l(s).testsetp=null,l(s).testseto=null,l(s).testres=null)}),fe(()=>{l(s).teset===null&&(F(r,""),l(s).outliers=[],l(s).testsetp=null,l(s).testseto=null,l(s).testres=null)}),fe(()=>{if(l(s).testset&&!l(s).testseto){if(F(r,""),l(s).testset.values.ncols!==l(s).nimca.ncols){F(r,`Wrong number of predictors (expected ${l(s).nimca.ncols}, got ${l(s).testset.values.ncols}), check settings and try to load again.`);return}l(s).testseto=l(s).testset}}),fe(()=>{l(s).testseto&&!l(s).testsetp&&(F(r,""),f(l(s).testseto,l(s).prep))}),fe(()=>{l(s).testsetp&&l(s).nimca&&(l(s).testres=l(s).nimca.predict(l(s).testsetp))}),fe(()=>{const C=hr(()=>JSON.stringify(e.session,Ps));e.backupSession(C,l(s).testset,l(s).testres,l(s).nimca)});var u=J0(),v=L(u),d=L(v),h=L(d);Ac(h,{get nimca(){return l(s).nimca},set nimca(C){l(s).nimca=C},get prep(){return l(s).prep},set prep(C){l(s).prep=C}});var m=P(d,2);{var g=C=>{var q=Y0(),Y=L(q);Yo(Y,{className:"Class",classMandatory:!0,get dataset(){return l(s).testset},set dataset(U){l(s).testset=U}});var V=P(Y,2);{var R=U=>{ae(U,{status:"error",children:(Z,J)=>{var Q=V0(),se=L(Q);$(()=>ve(se,l(r))),M(Z,Q)},$$slots:{default:!0}})};D(V,U=>{l(r)&&U(R)})}M(C,q)};D(m,C=>{l(s).nimca&&C(g)})}var p=P(m,2);{var _=C=>{var q=U0(),Y=L(q);No(Y,{get outliers(){return l(s).outliers},get dataset(){return l(s).testset},resetOutliers:a,undoOutliers:c}),M(C,q)};D(p,C=>{l(s).outliers&&l(s).outliers.length>0&&C(_)})}var b=P(p,2),w=L(b);{var k=C=>{Wo(C,{get className(){return l(s).className},fit:!1,get nimca(){return l(s).nimca},set nimca(q){l(s).nimca=q}})};D(w,C=>{l(s).nimca&&l(s).testsetp&&C(k)})}var E=P(w,2);{var y=C=>{ae(C,{label:"Download",children:(q,Y)=>{var V=W0(),R=L(V);Nt(R,{onclick:()=>ko(l(s).nimca,l(s).testres,l(s).testset,"test",l(s).outliers),text:"Res (test)"});var U=P(R,2);Nt(U,{onclick:()=>Eo(l(s).nimca,l(s).prep),text:"Model"}),M(q,V)},$$slots:{default:!0}})};D(E,C=>{l(s).nimca&&l(s).testres&&C(y)})}var A=P(b,2);{var S=C=>{var q=H0(),Y=G(q),V=L(Y);Uo(V,{get nimca(){return l(s).nimca}});var R=P(Y,2),U=L(R);B0(U,{get res(){return l(s).testres}}),M(C,q)};D(A,C=>{l(s).nimca&&l(s).testres&&C(S)})}var j=P(v,2),z=L(j);{var T=C=>{var q=K0(),Y=P(L(q),2);{var V=U=>{var Z=G0();M(U,Z)},R=U=>{var Z=he(),J=G(Z);{var Q=se=>{var le=X0();M(se,le)};D(J,se=>{l(s).testset||se(Q)},!0)}M(U,Z)};D(Y,U=>{l(s).nimca?U(R,!1):U(V)})}M(C,q)},B=C=>{var q=he(),Y=G(q);{var V=R=>{var U=he(),Z=G(U);Sn(Z,()=>l(s).testres,J=>{D0(J,sr({markOutlier:o},()=>l(s)))}),M(R,U)};D(Y,R=>{l(s).nimca&&l(s).testres&&R(V)},!0)}M(C,q)};D(z,C=>{!l(s).nimca||!l(s).testres?C(T):C(B,!1)})}M(t,u),ge()}var Z0=H('<table class="svelte-vm8g95"><thead><tr class="svelte-vm8g95"><th class="svelte-vm8g95"></th><th class="svelte-vm8g95">New</th></tr></thead><tbody><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Objects</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">In</td><td class="svelte-vm8g95"> </td></tr><tr class="svelte-vm8g95"><td class="label svelte-vm8g95">Out</td><td class="svelte-vm8g95"> </td></tr></tbody></table>');function $0(t,e){me(e,!0);var r=he(),s=G(r);{var o=a=>{var c=Z0(),f=P(L(c)),u=L(f),v=P(L(u)),d=L(v),h=P(u),m=P(L(h)),g=L(m),p=P(h),_=P(L(p)),b=L(_);$(()=>{ve(d,e.res.outcomes.decs.length),ve(g,e.res.outcomes.decsNum.in),ve(b,e.res.outcomes.decsNum.out)}),M(a,c)};D(s,a=>{e.res&&a(o)})}M(t,r),ge()}function em(t,e){me(e,!0);const r=(v,d=jt)=>{ae(v,{label:"Selected",children:(h,m)=>{Nt(h,{onclick:()=>e.markOutlier(d()),text:"remove"})},$$slots:{default:!0}})},s={new:e.newsetp},o=N(()=>({new:e.newres})),a=N(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Xo,buttons:r},dataset:{label:"Datasets",scope:"objects",component:Ko,buttons:r}})),c=Me({acceptance:Jo(l(o)),dataset:wl(["new"])});let f=re(Me({acceptance:Pn(c.acceptance),dataset:Pn(c.dataset)}));fe(()=>{l(f).acceptance.colorByObj={values:e.newres.outcomes.decs,classColmap:{in:In.new,out:In.new},labels:["in","out"],filled:e.newres.outcomes.decs.map(v=>v==="in"),showBar:!1}});const u=N(()=>({res:l(o),model:e.nimca,data:s}));Ho(t,{get plots(){return l(a)},get controls(){return c},get props(){return l(u)},get params(){return l(f)},set params(v){F(f,v,!0)}}),ge()}var tm=H("<p> </p>"),rm=H('<div class="data-loader svelte-1rjc99q"><!> <!></div>'),nm=H('<div class="outliers-pane svelte-1rjc99q"><!></div>'),sm=H('<div class="buttons"><!> <!></div>'),lm=H('<div class="model-stats svelte-1rjc99q"><!></div> <div class="result-stats svelte-1rjc99q"><!></div>',1),om=H('<p class="svelte-1rjc99q"><strong>Step 1</strong></p> <p class="svelte-1rjc99q">Load previously trained NIMCA model from file.</p>',1),am=H(`<p class="svelte-1rjc99q"><strong>Step 2</strong></p> <p class="svelte-1rjc99q">Load data set from CSV file (or SPC files). The requirements to the file are the same as for the
               training set but no columns with reference classes is expected. If you have reference classes, use <em>Test</em> tab.</p>`,1),im=H(`<div class="help-text svelte-1rjc99q"><p class="svelte-1rjc99q">In this tab you can apply previously trained NIMCA model to a new dataset with objects whose class is unknown (hence the app
            does not expect column with target classes).</p> <!></div>`),cm=H('<div class="app-container svelte-1rjc99q"><div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <div class="nimca-settings svelte-1rjc99q"><!> <!></div> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function um(t,e){me(e,!0);let r=re("");const s=N(()=>e.session.new);fe(()=>{l(s).nimca&&!(l(s).nimca instanceof or)&&(l(s).nimca=or.fromJSON(l(s).nimca))});function o(C){if(C<0||C>l(s).newres.nrows-1)return;const q=l(s).newseto.objindices[C];q>=0&&!l(s).outliers.includes(q)&&(l(s).outliers.push(q),l(s).newseto=es(l(s).newset,l(s).outliers),l(s).newsetp=null,l(s).newres=null)}function a(){l(s).outliers=[],l(s).newseto=l(s).newset,l(s).newsetp=null,l(s).newres=null}function c(){l(s).outliers.pop(),l(s).newseto=es(l(s).newset,l(s).outliers),l(s).newsetp=null,l(s).newres=null}async function f(C,q){if(F(r,""),!C)return null;if(!q||Object.keys(q).length===0){l(s).newsetp=C;return}e.WASM().then(Y=>{const V=js(Y,C.values,C.nresp,q,!1,!1),R=jo(ql(C),V);l(s).newsetp=xo(R,q)}).catch(Y=>{l(s).newsetp=null,console.error(Y),F(r,Y,!0)})}tl(()=>{l(s).newset===null&&(F(r,""),l(s).outliers=[],l(s).newsetp=null,l(s).newseto=null,l(s).newres=null),l(s).nimca===null&&(F(r,""),l(s).outliers=[],l(s).newset=null,l(s).newsetp=null,l(s).newseto=null,l(s).newres=null)}),fe(()=>{l(s).nimca===null&&(F(r,""),l(s).outliers=[],l(s).newset=null,l(s).newsetp=null,l(s).newseto=null,l(s).newres=null)}),fe(()=>{l(s).newset===null&&(F(r,""),l(s).outliers=[],l(s).newsetp=null,l(s).newseto=null,l(s).newres=null)}),fe(()=>{if(l(s).newset&&!l(s).newseto){if(F(r,""),l(s).newset.values.ncols!==l(s).nimca.ncols){F(r,`Wrong number of predictors (expected ${l(s).nimca.ncols}, got ${l(s).newset.values.ncols}), check settings and try to load again.`);return}l(s).newseto=l(s).newset}}),fe(()=>{l(s).newseto&&!l(s).newsetp&&(F(r,""),f(l(s).newseto,l(s).prep))}),fe(()=>{l(s).newsetp&&l(s).nimca&&(l(s).newres=l(s).nimca.predict(l(s).newsetp))}),fe(()=>{const C=hr(()=>JSON.stringify(e.session,Ps));e.backupSession(C,l(s).newset,l(s).newres,l(s).nimca)});var u=cm(),v=L(u),d=L(v),h=L(d);Ac(h,{get nimca(){return l(s).nimca},set nimca(C){l(s).nimca=C},get prep(){return l(s).prep},set prep(C){l(s).prep=C}});var m=P(d,2);{var g=C=>{var q=rm(),Y=L(q);Yo(Y,{className:"Class",classMandatory:!1,csvOnly:!1,get dataset(){return l(s).newset},set dataset(U){l(s).newset=U}});var V=P(Y,2);{var R=U=>{ae(U,{status:"error",children:(Z,J)=>{var Q=tm(),se=L(Q);$(()=>ve(se,l(r))),M(Z,Q)},$$slots:{default:!0}})};D(V,U=>{l(r)&&U(R)})}M(C,q)};D(m,C=>{l(s).nimca&&C(g)})}var p=P(m,2);{var _=C=>{var q=nm(),Y=L(q);No(Y,{get outliers(){return l(s).outliers},get dataset(){return l(s).newset},resetOutliers:a,undoOutliers:c}),M(C,q)};D(p,C=>{l(s).outliers&&l(s).outliers.length>0&&C(_)})}var b=P(p,2),w=L(b);{var k=C=>{Wo(C,{get className(){return l(s).className},isAlt:!0,fit:!1,get nimca(){return l(s).nimca},set nimca(q){l(s).nimca=q}})};D(w,C=>{l(s).nimca&&l(s).newsetp&&C(k)})}var E=P(w,2);{var y=C=>{ae(C,{label:"Download",children:(q,Y)=>{var V=sm(),R=L(V);Nt(R,{onclick:()=>ko(l(s).nimca,l(s).newres,l(s).newset,"new",l(s).outliers),text:"Res (new)"});var U=P(R,2);Nt(U,{onclick:()=>Eo(l(s).nimca,l(s).prep),text:"Model"}),M(q,V)},$$slots:{default:!0}})};D(E,C=>{l(s).nimca&&l(s).newres&&C(y)})}var A=P(b,2);{var S=C=>{var q=lm(),Y=G(q),V=L(Y);Uo(V,{get nimca(){return l(s).nimca}});var R=P(Y,2),U=L(R);$0(U,{get res(){return l(s).newres}}),M(C,q)};D(A,C=>{l(s).nimca&&l(s).newres&&C(S)})}var j=P(v,2),z=L(j);{var T=C=>{var q=im(),Y=P(L(q),2);{var V=U=>{var Z=om();M(U,Z)},R=U=>{var Z=he(),J=G(Z);{var Q=se=>{var le=am();M(se,le)};D(J,se=>{l(s).newset||se(Q)})}M(U,Z)};D(Y,U=>{l(s).nimca?U(R,!1):U(V)})}M(C,q)},B=C=>{var q=he(),Y=G(q);{var V=R=>{var U=he(),Z=G(U);Sn(Z,()=>l(s).newres,J=>{em(J,sr({markOutlier:o},()=>l(s)))}),M(R,U)};D(Y,R=>{l(s).nimca&&l(s).newres&&R(V)},!0)}M(C,q)};D(z,C=>{!l(s).nimca||!l(s).newres?C(T):C(B,!1)})}M(t,u),ge()}function Sc(t,e){F(e,!0)}function fm(t,e,r){const s=Co(new Date),o=e.appID+"-session-"+s+".json";l(r).date=s;const a=JSON.stringify(l(r),Ps),c=new Blob([a],{type:"text/json"}),f=window.URL.createObjectURL(c),u=document.createElement("a");u.setAttribute("href",f),u.setAttribute("download",o),u.click()}function vm(t,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var dm=H('<sup style="color:red">β</sup>'),hm=H('<li><button class="svelte-1josccy"> </button></li>'),mm=H("<div><!></div>"),gm=H('<div class="info-container svelte-1josccy"><!></div>'),pm=H('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function bm(t,e){me(e,!0);let r=O(e,"tabs",19,()=>[]),s=O(e,"isBeta",3,!1);const o="mdatools-"+e.appID;let a=re(!1),c=re(void 0),f=re("Current session "),u=re(!1);function v(y){F(f,y,!0),F(u,!0),setTimeout(()=>{F(f,"Current session "),F(u,!1)},1e3)}function d(){F(a,!1)}function h(y){l(c).tab=y}function m(){const y=indexedDB.open(o,1);y.onsuccess=A=>{const j=A.target.result.transaction(e.appID,"readwrite");j.objectStore(e.appID).delete("session"),j.oncomplete=()=>{F(c,e.initSession(),!0),v("Session was reinitialzed.")},j.onerror=()=>console.error("Failed to session from DB.")}}function g(y,A){window.localStorage.removeItem(e.appID+"-blocked");const S=indexedDB.open(o,1);S.onsuccess=j=>{const B=j.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);B.put(y,"session"),B.put(Co(new Date),"session-update")}}function p(){new Promise((y,A)=>{const S=indexedDB.open(o,1);S.onsuccess=j=>{const C=j.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");C.onsuccess=()=>y(C.result),C.onerror=()=>A(C.error)}}).then(y=>{_(y),F(f,"Last session is restored "),F(u,!0),setTimeout(()=>{F(f,"Current session "),F(u,!1)},1500)}).catch(y=>{console.error(y),F(c,e.initSession(),!0)})}function _(y){if(!y||y==="undefined"){F(c,e.initSession(),!0);return}const A=JSON.parse(y,So);F(c,e.checkSession(A)?A:e.initSession(e.appID),!0)}function b(y){const A=new FileReader;A.onload=()=>{_(A.result),y.target.value=""},A.readAsText(y.target.files[0])}wf(()=>{const y=e.appID,A=indexedDB.open(o,1);A.onupgradeneeded=S=>{const j=S.target.result;j.objectStoreNames.contains(y)||j.createObjectStore(y)},A.onsuccess=S=>{p()}});var w=he(),k=G(w);{var E=y=>{var A=pm(),S=L(A),j=L(S),z=L(j),T=P(z,2),B=L(T),C=P(B);{var q=xe=>{var Ve=dm();M(xe,Ve)};D(C,xe=>{s()&&xe(q)})}var Y=P(T,2),V=L(Y),R=P(j,2);nt(R,21,r,lt,(xe,Ve,te)=>{var pe=hm();let oe;var _e=L(pe);_e.__click=()=>h(te),_e.__keydown=()=>h(te);var ke=L(_e);$(ue=>{oe=xt(pe,1,"nav-item svelte-1josccy",null,oe,ue),ve(ke,l(Ve).name)},[()=>({selected:l(c).tab===te})]),M(xe,pe)});var U=P(S,2),Z=L(U);Sn(Z,()=>l(c).date,xe=>{var Ve=he(),te=G(Ve);nt(te,17,r,lt,(pe,oe,_e)=>{var ke=mm();let ue;var Te=L(ke);Ss(Te,()=>l(oe).component,(Le,Qe)=>{Qe(Le,{get WASM(){return e.WASM},get session(){return l(c)},backupSession:g})}),$(Le=>ue=xt(ke,1,"tab-content svelte-1josccy",null,ue,Le),[()=>({hidden:l(c).tab!==_e})]),M(pe,ke)}),M(xe,Ve)});var J=P(U,2),Q=L(J);let se;var le=L(Q),ie=L(le),ce=P(le,2),ee=L(ce);ee.__change=b;var ne=P(ce,2);ne.__click=[fm,e,c];var Oe=P(ne,2);Oe.__click=[vm,m];var Xe=P(Q,2),Be=L(Xe);Be.__click=[Sc,a],Be.__keydown=[Sc,a];var je=P(Be,2);Rr(je,()=>e.footer);var Ce=P(J,2);{var et=xe=>{Ji(xe,{closeModal:d,children:(Ve,te)=>{var pe=gm(),oe=L(pe);Rr(oe,()=>e.info),M(Ve,pe)},$$slots:{default:!0}})};D(Ce,xe=>{l(a)&&xe(et)})}$(xe=>{I(z,"alt",e.appShortTitle),ve(B,e.appTitle),ve(V,e.appSlogan),se=xt(Q,1,"session svelte-1josccy",null,se,xe),ve(ie,l(f))},[()=>({"no-buttons":l(u)})]),M(y,A)};D(k,y=>{l(c)&&y(E)})}M(t,w),ge()}vt(["click","keydown","change"]);const Pm="modulepreload",Lm=function(t){return"/"+t},Rm={},_m=function(e,r,s){let o=Promise.resolve();function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return o.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};async function wm(t={}){var Nc;var e,r=t,s=typeof window=="object",o=typeof WorkerGlobalScope<"u",a=typeof process=="object"&&((Nc=process.versions)==null?void 0:Nc.node)&&process.type!="renderer";if(a){const{createRequire:W}=await _m(()=>Promise.resolve().then(()=>Em),void 0);var c=W(We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href)}var f=(W,X)=>{throw X},u=We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href,v="";function d(W){return r.locateFile?r.locateFile(W,v):v+W}var h,m;if(a){var g=c("fs");u.startsWith("file:")&&(v=c("path").dirname(c("url").fileURLToPath(u))+"/"),m=W=>{W=E(W)?new URL(W):W;var X=g.readFileSync(W);return X},h=async(W,X=!0)=>{W=E(W)?new URL(W):W;var de=g.readFileSync(W,X?void 0:"utf8");return de},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),f=(W,X)=>{throw process.exitCode=W,X}}else if(s||o){try{v=new URL(".",u).href}catch{}o&&(m=W=>{var X=new XMLHttpRequest;return X.open("GET",W,!1),X.responseType="arraybuffer",X.send(null),new Uint8Array(X.response)}),h=async W=>{if(E(W))return new Promise((de,Ke)=>{var Ue=new XMLHttpRequest;Ue.open("GET",W,!0),Ue.responseType="arraybuffer",Ue.onload=()=>{if(Ue.status==200||Ue.status==0&&Ue.response){de(Ue.response);return}Ke(Ue.status)},Ue.onerror=Ke,Ue.send(null)});var X=await fetch(W,{credentials:"same-origin"});if(X.ok)return X.arrayBuffer();throw new Error(X.status+" : "+X.url)}}var p=console.log.bind(console),_=console.error.bind(console),b,w=!1,k,E=W=>W.startsWith("file://"),y,A,S,j,z,T,B=!1;function C(){var W=S.buffer;j=new Int8Array(W),z=new Uint8Array(W),r.HEAP32=new Int32Array(W),T=new Uint32Array(W),r.HEAPF64=new Float64Array(W),new BigInt64Array(W),new BigUint64Array(W)}function q(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)Ve(r.preRun.shift());je(xe)}function Y(){B=!0,Ds.i()}function V(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)et(r.postRun.shift());je(Ce)}var R=0,U=null;function Z(W){var X;R++,(X=r.monitorRunDependencies)==null||X.call(r,R)}function J(W){var de;if(R--,(de=r.monitorRunDependencies)==null||de.call(r,R),R==0&&U){var X=U;U=null,X()}}function Q(W){var de;(de=r.onAbort)==null||de.call(r,W),W="Aborted("+W+")",_(W),w=!0,W+=". Build with -sASSERTIONS for more info.";var X=new WebAssembly.RuntimeError(W);throw A==null||A(X),X}var se;function le(){return r.locateFile?d("pca_wasm.wasm"):new URL("/nimca/nimca.wasm",We&&We.tagName.toUpperCase()==="SCRIPT"&&We.src||new URL("nimca.js",document.baseURI).href).href}function ie(W){if(W==se&&b)return new Uint8Array(b);if(m)return m(W);throw"both async and sync fetching of the wasm failed"}async function ce(W){if(!b)try{var X=await h(W);return new Uint8Array(X)}catch{}return ie(W)}async function ee(W,X){try{var de=await ce(W),Ke=await WebAssembly.instantiate(de,X);return Ke}catch(Ue){_(`failed to asynchronously prepare wasm: ${Ue}`),Q(Ue)}}async function ne(W,X,de){if(!W&&!E(X)&&!a)try{var Ke=fetch(X,{credentials:"same-origin"}),Ue=await WebAssembly.instantiateStreaming(Ke,de);return Ue}catch(at){_(`wasm streaming compile failed: ${at}`),_("falling back to ArrayBuffer instantiation")}return ee(X,de)}function Oe(){return{a:Am}}async function Xe(){function W(at,it){return Ds=at.exports,S=Ds.h,C(),$o(Ds),J(),Ds}Z();function X(at){return W(at.instance)}var de=Oe();if(r.instantiateWasm)return new Promise((at,it)=>{r.instantiateWasm(de,(ft,xr)=>{at(W(ft))})});se??(se=le());var Ke=await ne(b,se,de),Ue=X(Ke);return Ue}class Be{constructor(X){ur(this,"name","ExitStatus");this.message=`Program terminated with exit(${X})`,this.status=X}}var je=W=>{for(;W.length>0;)W.shift()(r)},Ce=[],et=W=>Ce.push(W),xe=[],Ve=W=>xe.push(W),te=!0,pe=W=>Sl(W),oe=()=>Et(),_e=()=>Q(""),ke=0,ue=()=>{te=!1,ke=0},Te={},Le=W=>{if(W instanceof Be||W=="unwind")return k;f(1,W)},Qe=()=>te||ke>0,Ze=W=>{var X;k=W,Qe()||((X=r.onExit)==null||X.call(r,W),w=!0),f(W,new Be(W))},Ye=(W,X)=>{k=W,Ze(W)},Ie=Ye,ct=()=>{if(!Qe())try{Ie(k)}catch(W){Le(W)}},tt=W=>{if(!w)try{W(),ct()}catch(X){Le(X)}},Ge=()=>performance.now(),Qt=(W,X)=>{if(Te[W]&&(clearTimeout(Te[W].id),delete Te[W]),!X)return 0;var de=setTimeout(()=>{delete Te[W],tt(()=>Mt(W,Ge()))},X);return Te[W]={id:de,timeout_ms:X},0},Or=()=>Date.now(),Br=()=>2147483648,we=(W,X)=>Math.ceil(W/X)*X,Se=W=>{var X=S.buffer.byteLength,de=(W-X+65535)/65536|0;try{return S.grow(de),C(),1}catch{}},Ee=W=>{var X=z.length;W>>>=0;var de=Br();if(W>de)return!1;for(var Ke=1;Ke<=4;Ke*=2){var Ue=X*(1+.2/Ke);Ue=Math.min(Ue,W+100663296);var at=Math.min(de,we(Math.max(W,Ue),65536)),it=Se(at);if(it)return!0}return!1},Fe=[null,[],[]],bt=typeof TextDecoder<"u"?new TextDecoder:void 0,Zt=(W,X,de,Ke)=>{for(var Ue=X+de;W[X]&&!(X>=Ue);)++X;return X},yr=(W,X=0,de,Ke)=>{var Ue=Zt(W,X,de);if(Ue-X>16&&W.buffer&&bt)return bt.decode(W.subarray(X,Ue));for(var at="";X<Ue;){var it=W[X++];if(!(it&128)){at+=String.fromCharCode(it);continue}var ft=W[X++]&63;if((it&224)==192){at+=String.fromCharCode((it&31)<<6|ft);continue}var xr=W[X++]&63;if((it&240)==224?it=(it&15)<<12|ft<<6|xr:it=(it&7)<<18|ft<<12|xr<<6|W[X++]&63,it<65536)at+=String.fromCharCode(it);else{var Vn=it-65536;at+=String.fromCharCode(55296|Vn>>10,56320|Vn&1023)}}return at},Ct=(W,X)=>{var de=Fe[W];X===0||X===10?((W===1?p:_)(yr(de)),de.length=0):de.push(X)},ot=(W,X,de)=>W?yr(z,W,X):"",He=(W,X,de,Ke)=>{for(var Ue=0,at=0;at<de;at++){var it=T[X>>2],ft=T[X+4>>2];X+=8;for(var xr=0;xr<ft;xr++)Ct(W,z[it+xr]);Ue+=ft}return T[Ke>>2]=Ue,0},Lt=W=>{var X=r["_"+W];return X},kt=(W,X)=>{j.set(W,X)},_t=W=>{for(var X=0,de=0;de<W.length;++de){var Ke=W.charCodeAt(de);Ke<=127?X++:Ke<=2047?X+=2:Ke>=55296&&Ke<=57343?(X+=4,++de):X+=3}return X},ut=(W,X,de,Ke)=>{if(!(Ke>0))return 0;for(var Ue=de,at=de+Ke-1,it=0;it<W.length;++it){var ft=W.codePointAt(it);if(ft<=127){if(de>=at)break;X[de++]=ft}else if(ft<=2047){if(de+1>=at)break;X[de++]=192|ft>>6,X[de++]=128|ft&63}else if(ft<=65535){if(de+2>=at)break;X[de++]=224|ft>>12,X[de++]=128|ft>>6&63,X[de++]=128|ft&63}else{if(de+3>=at)break;X[de++]=240|ft>>18,X[de++]=128|ft>>12&63,X[de++]=128|ft>>6&63,X[de++]=128|ft&63,it++}}return X[de]=0,de-Ue},cr=(W,X,de)=>ut(W,z,X,de),vn=W=>Mr(W),$e=W=>{var X=_t(W)+1,de=vn(X);return cr(W,de,X),de},Ae=(W,X,de,Ke,Ue)=>{var at={string:$t=>{var Vs=0;return $t!=null&&$t!==0&&(Vs=$e($t)),Vs},array:$t=>{var Vs=vn($t.length);return kt($t,Vs),Vs}};function it($t){return X==="string"?ot($t):X==="boolean"?!!$t:$t}var ft=Lt(W),xr=[],Vn=0;if(Ke)for(var Yn=0;Yn<Ke.length;Yn++){var Mc=at[de[Yn]];Mc?(Vn===0&&(Vn=oe()),xr[Yn]=Mc(Ke[Yn])):xr[Yn]=Ke[Yn]}var ta=ft(...xr);function Cm($t){return Vn!==0&&pe(Vn),it($t)}return ta=Cm(ta),ta};r.noExitRuntime&&(te=r.noExitRuntime),r.print&&(p=r.print),r.printErr&&(_=r.printErr),r.wasmBinary&&(b=r.wasmBinary),r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.ccall=Ae;var Mt,Sl,Mr,Et;function $o(W){r._pcafit_wasm=W.j,r._malloc=W.k,r._free=W.l,r._pcapredict_wasm=W.m,r._pcvpca_wasm=W.n,r._prepfit_wasm=W.o,r._prepapply_wasm=W.p,Mt=W.q,Sl=W.r,Mr=W.s,Et=W.t}var Am={c:_e,b:ue,d:Qt,g:Or,e:Ee,f:He,a:Ze},Ds=await Xe();function ea(){if(R>0){U=ea;return}if(q(),R>0){U=ea;return}function W(){var X;r.calledRun=!0,!w&&(Y(),y==null||y(r),(X=r.onRuntimeInitialized)==null||X.call(r),V())}r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),W()},1)):W()}function Sm(){if(r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.shift()()}return Sm(),ea(),B?e=r:e=new Promise((W,X)=>{y=W,A=X}),e}var ym=H('<p>Current release: <span>1.1.0</span> &nbsp;Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=NIMCA app">help@mda.tools</a></p>'),xm=H(`<h2>NIMCA</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using Naïve DD-SIMCA (NIMCA) one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check <a href="">paper</a></p> <h3>v. 1.1.0</h3> <p class="release-info">released 14/10/2025</p> <ul><li>Removed PCV widget (not needed).</li> <li>Added possibility to center/scale NIMCA model.</li></ul>`,1);function km(t,e){me(e,!1);function r(a){const c=Object.keys(a);if(!["date","tab","train","test","new"].every(d=>c.includes(d)))return!1;const f=Object.keys(a.train);if(!["nimca","calset","calres","outliers","prepType","prepmodel","prepmeta","prepobj"].every(d=>f.includes(d)))return!1;const u=Object.keys(a.test);if(!["nimca","prep","testset","testres","outliers"].every(d=>u.includes(d)))return!1;const v=Object.keys(a.new);return!!["nimca","prep","newset","newres","outliers"].every(d=>v.includes(d))}function s(){return{date:Co(new Date),tab:0,train:{nimca:0,calset:0,calseto:0,calsetp:0,calres:0,outliers:[],prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{nimca:0,prep:0,testset:0,testseto:0,testres:0,outliers:[],ind:null},new:{nimca:0,prep:0,newset:0,newres:0,outliers:[]}}}const o=[{name:"Train",label:"train",component:j0},{name:"Test",label:"test",component:Q0},{name:"Predict",label:"new",component:um}];gf(),bm(t,{appID:"nimca",appTitle:"NIMCA",appShortTitle:"NIMCA",appSlogan:"Naïve DD-SIMCA classifier",get WASM(){return wm},get tabs(){return o},initSession:s,checkSession:r,footer:f=>{var u=ym();M(f,u)},info:f=>{var u=xm();M(f,u)},$$slots:{footer:!0,info:!0}}),ge()}Ju(km,{target:document.body});const Em=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=nimca.js.map
