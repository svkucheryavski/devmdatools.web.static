(function(){"use strict";var Rl=document.createElement("style");Rl.textContent=`button.svelte-1to1iow{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-1to1iow:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-qbt64{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-qbt64:last-of-type{margin-right:0}.button.svelte-qbt64:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1bhp5bp{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1bhp5bp:hover{background:var(--container-bg-color-hover, #fafdff)}.control-element.svelte-1bhp5bp:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1bhp5bp:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1bhp5bp{display:none}.control-element.error.svelte-1bhp5bp{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1bhp5bp{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1bhp5bp>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1bhp5bp>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1bhp5bp>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1bhp5bp>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1bhp5bp .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1bhp5bp .range-value_left,.control-element.svelte-1bhp5bp .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1bhp5bp .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1bhp5bp .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1bhp5bp .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1bhp5bp .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1bhp5bp .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1bhp5bp .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1bhp5bp .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1bhp5bp .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1bhp5bp .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1bhp5bp .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1bhp5bp .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1bhp5bp .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1bhp5bp .textinput>input:active::placeholder,.control-element.svelte-1bhp5bp .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1bhp5bp .textinput>input:focus,.control-element.svelte-1bhp5bp .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .textinput.error>input,.control-element.svelte-1bhp5bp .textinput.error>input:focus,.control-element.svelte-1bhp5bp .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1bhp5bp .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1bhp5bp .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1bhp5bp .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1bhp5bp .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1bhp5bp .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1bhp5bp .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1bhp5bp .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-7wycr{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-7wycr:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-7wycr{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-7wycr{justify-content:left}.range-value.svelte-7wycr{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-7wycr{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-1lbks0y{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-1lbks0y:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-1lbks0y{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-1lbks0y{justify-content:left}.range-slider_right.svelte-1lbks0y{justify-content:right}.range-value.svelte-1lbks0y{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-1lbks0y{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-1lbks0y{position:relative;right:calc(100% + .25em)}input.svelte-bifhtc{display:none}.selector.svelte-bifhtc{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-bifhtc:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-bifhtc{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-bifhtc:not(.selected):hover{border:1px solid}.file-selector.svelte-xoa0sf>input:where(.svelte-xoa0sf){display:none}.file-selector.svelte-xoa0sf{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-xoa0sf:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-xoa0sf:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-xoa0sf:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-11e14eb{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):focus,.textinput.svelte-11e14eb>input:where(.svelte-11e14eb):active{border:1px solid}.error-message.svelte-11e14eb{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-wlgijz{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-wlgijz:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-wlgijz-spinner 1.2s linear infinite}@keyframes svelte-wlgijz-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-142p4sy{display:none}.selector.svelte-142p4sy{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-142p4sy{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-142p4sy:not(.selected):hover{border:1px solid}.outliers.svelte-igakmm{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-igakmm>.item:where(.svelte-igakmm){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.exclvars.svelte-12e65an{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.show-download-links-none.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){display:none}.show-download-links-hover.svelte-1t5q9z1:hover>.download-links:where(.svelte-1t5q9z1){bottom:0}.show-download-links-fixed.svelte-1t5q9z1>.download-links:where(.svelte-1t5q9z1){bottom:0}.download-links.svelte-1t5q9z1{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1t5q9z1>button:where(.svelte-1t5q9z1):hover{background:#433;color:#fafafa}.download-links.svelte-1t5q9z1>button.error{background:#e43}.download-links.svelte-1t5q9z1>button.copied{background:#48e}.plot-container.svelte-1t5q9z1{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1t5q9z1{display:flex;justify-content:center;align-items:center}.message-error.svelte-1t5q9z1{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1t5q9z1{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;inset:0;width:100%;height:100%}.axes-content.svelte-1t5q9z1{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-oie633{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-oie633{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-oie633{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-oie633{grid-area:header}.close-button.svelte-oie633{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-oie633:hover{background-color:#4e5052}.isdark.svelte-oie633,.isdark.svelte-oie633 .header:where(.svelte-oie633),.isdark.svelte-oie633 .body:where(.svelte-oie633){background-color:#606060}.isdark.svelte-oie633 .close-button:where(.svelte-oie633){color:#433201;background-color:#c2be9b}.isdark.svelte-oie633 .close-button:where(.svelte-oie633):hover{background-color:#f0f674}.wrapper.svelte-1di9qjd{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-1di9qjd{grid-area:plot}.plot-controls.svelte-1di9qjd{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-1di9qjd>.control-element{background:transparent}.msg-select.svelte-1di9qjd{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.info-details.svelte-p7c0hz{position:relative;border-bottom:dashed 1px #606060;cursor:help}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz){position:absolute;z-index:1;background:#505050;visibility:hidden;width:300px;top:100%;left:50%;margin-left:-100px;color:beige;box-shadow:0 0 5px #00000060;padding:.5em 1em;border-radius:.25em}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul{padding:0;margin:0;list-style:none}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li{padding:.25em 0}.info-details.svelte-p7c0hz>span:where(.svelte-p7c0hz) ul>li>span{margin-left:1em;padding:.15em .5em;background-color:#707070;border-radius:3px}.info-details.svelte-p7c0hz:hover>span:where(.svelte-p7c0hz){visibility:visible}.info{position:relative}.info-text.svelte-1cde14j{line-height:1.5em}.info-text.svelte-1cde14j>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-1cde14j>.file-name:where(.svelte-1cde14j){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.prep-info{position:relative}span.svelte-10os93{cursor:default;display:inline-block;border-radius:3px;border:solid 1px #a0a0a0;color:gray;background-color:#fafafa;padding:.2em .5em;margin:0 .5em}span.svelte-10os93:hover{border:solid 1px #6eb8ff;color:#5086b9;background-color:#6eb8ff20}button.button-down{box-sizing:border-box;margin:0 .3em 0 0}botton.button-up{box-sizing:border-box;margin:0}.method-open.svelte-10os93{position:absolute;height:100vh;top:0;left:inherit;width:340px;padding:200px 1em 1em;margin-left:-18px;background:#000000a0;z-index:999;box-sizing:border-box}.selected-methods-list.svelte-9cg1zq{background:#fefafaa0;border-radius:5px}.selected-methods-list.svelte-9cg1zq>.control-element:last-child .button-down,.selected-methods-list.svelte-9cg1zq>.control-element:nth-child(2) .button-up{cursor:text;background-color:transparent;color:transparent}.selected-methods-list.svelte-9cg1zq:not(.editable)>.control-element .button-settings{display:block}.methods-list.svelte-9cg1zq{margin-top:1em;font-size:.9em}.methods-list.svelte-9cg1zq>div{background:#ebf0f0}.final.svelte-9cg1zq .button-up,.final.svelte-9cg1zq .button-down,.final.svelte-9cg1zq .button-cancel{visibility:hidden}.plot-panel.svelte-5p9gcx{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-5p9gcx{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-5p9gcx{padding:0 .25em 0 .5em}.plot.svelte-5p9gcx{width:100%;height:calc(100% - 15px)}@media(min-width:1100px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-5p9gcx{grid-template-columns:1fr 400px}}.widget-container.svelte-pth1xe{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr;background-color:#606060;width:98vw;height:95vh}.app-controls.svelte-pth1xe{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-pth1xe{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-pth1xe>div:where(.svelte-pth1xe){border-radius:.25rem}@media(min-width:1300px){.widget-container.svelte-pth1xe{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.widget-container.svelte-pth1xe{grid-template-columns:min(320px,30%) 1fr}}.prep-container>button{margin-left:.25em}table.svelte-110ino2{width:100%;border-collapse:collapse}tr.svelte-110ino2{width:100%}th.svelte-110ino2{border-bottom:1px solid #a0a0a0}th.svelte-110ino2,td.svelte-110ino2{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}td.svelte-110ino2:first-of-type{width:25%}p.svelte-7klqqw{line-height:1.5em}span.svelte-7klqqw{color:#a0a0a0}.dataset-info.svelte-1uxd0r7{line-height:1.5em}.dataset-info.svelte-1uxd0r7>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-1uxd0r7>.file-name:where(.svelte-1uxd0r7),.dataset-info.svelte-1uxd0r7>.file-size:where(.svelte-1uxd0r7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.selected-buttons.svelte-188sk7n>.control-element{background:#fff0c8}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-188sk7n>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-188sk7n{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-188sk7n{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-188sk7n{padding:0 .25em 0 .5em}.plot-selector.svelte-188sk7n{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-188sk7n:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-188sk7n{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-188sk7n{height:15px;font-size:12px;color:#aaa;text-align:center}@media(min-width:1100px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr minmax(285px,30%)}}@media(min-width:1300px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr max(300px,30%)}}@media(min-width:1600px){.plot-panel.svelte-188sk7n{grid-template-columns:1fr 400px}}div.svelte-z3o1sd{width:100%;height:100%}div.svelte-z3o1sd .plot .axes{cursor:crosshair}div.svelte-z3o1sd .plot .axes-content rect{pointer-events:none}.plot-controls-area>.plot-selector-fom,.plot-controls-area>.plot-selector-loadings{margin-top:1em}.app-container.svelte-1mp4dba{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1mp4dba{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1mp4dba{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1mp4dba>div:where(.svelte-1mp4dba){border-radius:.25rem}.app-controls.svelte-1mp4dba>.result-stats:where(.svelte-1mp4dba){background:#e8e8e8}.help-text.svelte-1mp4dba{margin-top:.25rem}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba),.help-text.svelte-1mp4dba>div:where(.svelte-1mp4dba){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba){border-collapse:collapse}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) thead:where(.svelte-1mp4dba) tr:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba){font-weight:700;background:#f8f4e0}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1mp4dba table:where(.svelte-1mp4dba) tbody:where(.svelte-1mp4dba) td:where(.svelte-1mp4dba):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1mp4dba>p:where(.svelte-1mp4dba):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1mp4dba{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1mp4dba{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1mp4dba{grid-template-columns:min(330px,30%) 1fr}}.info-text.svelte-7h7avz{line-height:1.5em}.info-text.svelte-7h7avz>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-7h7avz>.file-name:where(.svelte-7h7avz){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-1w77c1q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1w77c1q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1w77c1q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1w77c1q>div:where(.svelte-1w77c1q){border-radius:.25rem}.app-controls.svelte-1w77c1q>.result-stats:where(.svelte-1w77c1q){background:#e8e8e8}.help-text.svelte-1w77c1q{margin-top:.25rem}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q),.help-text.svelte-1w77c1q>div:where(.svelte-1w77c1q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q){border-collapse:collapse}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) thead:where(.svelte-1w77c1q) tr:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q){font-weight:700;background:#f8f4e0}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1w77c1q table:where(.svelte-1w77c1q) tbody:where(.svelte-1w77c1q) td:where(.svelte-1w77c1q):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1w77c1q>p:where(.svelte-1w77c1q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-1w77c1q{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media(min-width:1300px){.app-container.svelte-1w77c1q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1w77c1q{grid-template-columns:min(330px,30%) 1fr}}.app-container.svelte-1rjc99q{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1rjc99q{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1rjc99q{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1rjc99q>div:where(.svelte-1rjc99q){border-radius:.25rem}.help-text.svelte-1rjc99q{margin-top:.25rem}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q),.help-text.svelte-1rjc99q>div:where(.svelte-1rjc99q){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q){border-collapse:collapse}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) thead:where(.svelte-1rjc99q) tr:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q){font-weight:700;background:#f8f4e0}.help-text.svelte-1rjc99q table:where(.svelte-1rjc99q) td:where(.svelte-1rjc99q):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1rjc99q>p:where(.svelte-1rjc99q):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media(min-width:1300px){.app-container.svelte-1rjc99q{grid-template-columns:min(340px,30%) 1fr}}@media(min-width:1100px){.app-container.svelte-1rjc99q{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1josccy{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1josccy{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1josccy{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1josccy{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1josccy>h1:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1josccy>p:where(.svelte-1josccy){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1josccy{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1josccy>div:where(.svelte-1josccy){height:100%}footer.svelte-1josccy{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1josccy .session:where(.svelte-1josccy) input:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .session-message:where(.svelte-1josccy){color:silver;padding-right:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .session-message:where(.svelte-1josccy){color:#fafafa}footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session.no-buttons:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){display:none}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy){background:#35332d}footer.svelte-1josccy .session:where(.svelte-1josccy):hover .clear-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .upload-button:where(.svelte-1josccy) svg:where(.svelte-1josccy),footer.svelte-1josccy .session:where(.svelte-1josccy):hover .download-button:where(.svelte-1josccy) svg:where(.svelte-1josccy){stroke:#fafafa}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy){margin-left:.5em}footer.svelte-1josccy .session:where(.svelte-1josccy) .upload-button:where(.svelte-1josccy):hover,footer.svelte-1josccy .session:where(.svelte-1josccy) .download-button:where(.svelte-1josccy):hover{background-color:#6eb8ff}footer.svelte-1josccy .session:where(.svelte-1josccy) .clear-button:where(.svelte-1josccy):hover{background-color:#dc143c}footer.svelte-1josccy .info:where(.svelte-1josccy){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1josccy .info:where(.svelte-1josccy) .button-info:where(.svelte-1josccy):hover{background-color:#f7db89}footer.svelte-1josccy p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1josccy span,footer.svelte-1josccy a{color:#f8ebc5}.hidden.svelte-1josccy{display:none}.nav.svelte-1josccy,.nav.svelte-1josccy :where(.svelte-1josccy){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1josccy{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1josccy{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1josccy>button:where(.svelte-1josccy){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1josccy>button:where(.svelte-1josccy)>span{color:#888}.nav-item.svelte-1josccy:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1josccy:hover>button:where(.svelte-1josccy){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1josccy{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1josccy>button:where(.svelte-1josccy){font-weight:700;cursor:default}.nav-item.selected.svelte-1josccy:hover{border-bottom:5px solid #80888f}@media(min-width:1600px){.page.svelte-1josccy>header:where(.svelte-1josccy){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1josccy>footer:where(.svelte-1josccy){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1josccy{width:900px}.info-container.svelte-1josccy>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1josccy>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1josccy>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1josccy>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1josccy>ul{margin:0}.info-container.svelte-1josccy>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1josccy>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1josccy a{color:#ae8032}.info-container.svelte-1josccy a:hover{color:#eb9707}.info-container.svelte-1josccy:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Rl);var pr=typeof document<"u"?document.currentScript:null;const hs=!1;var ms=Array.isArray,$a=Array.prototype.indexOf,dn=Array.prototype.includes,Gn=Array.from,ei=Object.defineProperty,Nr=Object.getOwnPropertyDescriptor,Il=Object.getOwnPropertyDescriptors,Fl=Object.prototype,ti=Array.prototype,Kn=Object.getPrototypeOf,zl=Object.isExtensible;function vn(n){return typeof n=="function"}const yt=()=>{};function ri(n){return typeof n?.then=="function"}function ni(n){return n()}function gs(n){for(var e=0;e<n.length;e++)n[e]()}function Ol(){var n,e,r=new Promise((s,l)=>{n=s,e=l});return{promise:r,resolve:n,reject:e}}function si(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const r=[];for(const s of n)if(r.push(s),r.length===e)break;return r}const xt=2,Jn=4,Sn=8,Vl=1<<24,cr=16,Zt=32,Yr=64,ps=128,Ut=512,mt=1024,kt=2048,Qt=4096,Vt=8192,br=16384,Zn=32768,_r=65536,Bl=1<<17,Yl=1<<18,hn=1<<19,Dl=1<<20,wr=1<<25,Dr=32768,bs=1<<21,_s=1<<22,Lr=1<<23,jr=Symbol("$state"),Wl=Symbol("legacy props"),li=Symbol(""),mn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Hl(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function oi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function ai(n,e,r){throw new Error("https://svelte.dev/e/each_key_duplicate")}function ii(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ci(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ui(n){throw new Error("https://svelte.dev/e/effect_orphan")}function fi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function di(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function vi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function hi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function gi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const pi=1,bi=2,Ul=4,_i=8,wi=16,yi=1,xi=2,ki=4,Ei=8,Si=16,Ci=1,Ai=2,Ti=4,Xl=1,Pi=2,gt=Symbol(),Ni="http://www.w3.org/1999/xhtml";function Li(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Gl(n){return n===this.v}function ji(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Kl(n){return!ji(n,this.v)}let gn=!1,Mi=!1;function qi(){gn=!0}const Ri=[];function Ii(n,e=!1,r=!1){return Qn(n,new Map,"",Ri,null,r)}function Qn(n,e,r,s,l=null,o=!1){if(typeof n=="object"&&n!==null){var a=e.get(n);if(a!==void 0)return a;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(ms(n)){var c=Array(n.length);e.set(n,c),l!==null&&e.set(l,c);for(var f=0;f<n.length;f+=1){var u=n[f];f in n&&(c[f]=Qn(u,e,r,s,null,o))}return c}if(Kn(n)===Fl){c={},e.set(n,c),l!==null&&e.set(l,c);for(var d in n)c[d]=Qn(n[d],e,r,s,null,o);return c}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function"&&!o)return Qn(n.toJSON(),e,r,s,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}let rt=null;function pn(n){rt=n}function Nt(n){return Jl().get(n)}function Fi(n,e){return Jl().set(n,e),e}function be(n,e=!1,r){rt={p:rt,i:!1,c:null,e:null,s:n,x:null,l:gn&&!e?{s:null,u:null,$:[]}:null}}function _e(n){var e=rt,r=e.e;if(r!==null){e.e=null;for(var s of r)wo(s)}return e.i=!0,rt=e.p,{}}function Wr(){return!gn||rt!==null&&rt.l===null}function Jl(n){return rt===null&&Hl(),rt.c??=new Map(zi(rt)||void 0)}function zi(n){let e=n.p;for(;e!==null;){const r=e.c;if(r!==null)return r;e=e.p}return null}let Hr=[];function Zl(){var n=Hr;Hr=[],gs(n)}function $t(n){if(Hr.length===0&&!_n){var e=Hr;queueMicrotask(()=>{e===Hr&&Zl()})}Hr.push(n)}function Oi(){for(;Hr.length>0;)Zl()}function Ql(n){var e=Ke;if(e===null)return Xe.f|=Lr,n;if((e.f&Zn)===0){if((e.f&ps)===0)throw n;e.b.error(n)}else bn(n,e)}function bn(n,e){for(;e!==null;){if((e.f&ps)!==0)try{e.b.error(n);return}catch(r){n=r}e=e.parent}throw n}const Vi=-7169;function it(n,e){n.f=n.f&Vi|e}function ws(n){(n.f&Ut)!==0||n.deps===null?it(n,mt):it(n,Qt)}function $l(n){if(n!==null)for(const e of n)(e.f&xt)===0||(e.f&Dr)===0||(e.f^=Dr,$l(e.deps))}function eo(n,e,r){(n.f&kt)!==0?e.add(n):(n.f&Qt)!==0&&r.add(n),$l(n.deps),it(n,mt)}const $n=new Set;let $e=null,ys=null,er=null,Mt=[],es=null,xs=!1,_n=!1;class yr{committed=!1;current=new Map;previous=new Map;#e=new Set;#n=new Set;#t=0;#s=0;#a=null;#l=new Set;#r=new Set;#o=new Map;is_fork=!1;#i=!1;is_deferred(){return this.is_fork||this.#s>0}skip_effect(e){this.#o.has(e)||this.#o.set(e,{d:[],m:[]})}unskip_effect(e){var r=this.#o.get(e);if(r){this.#o.delete(e);for(var s of r.d)it(s,kt),tr(s);for(s of r.m)it(s,Qt),tr(s)}}process(e){Mt=[],this.apply();var r=[],s=[];for(const l of e)this.#c(l,r,s);if(this.is_deferred()){this.#u(s),this.#u(r);for(const[l,o]of this.#o)oo(l,o)}else{for(const l of this.#e)l();this.#e.clear(),this.#t===0&&this.#f(),ys=this,$e=null,no(s),no(r),ys=null,this.#a?.resolve()}er=null}#c(e,r,s){e.f^=mt;for(var l=e.first,o=null;l!==null;){var a=l.f,c=(a&(Zt|Yr))!==0,f=c&&(a&mt)!==0,u=f||(a&Vt)!==0||this.#o.has(l);if(!u&&l.fn!==null){c?l.f^=mt:o!==null&&(a&(Jn|Sn|Vl))!==0?o.b.defer_effect(l):(a&Jn)!==0?r.push(l):Pn(l)&&((a&cr)!==0&&this.#r.add(l),Nn(l));var d=l.first;if(d!==null){l=d;continue}}var h=l.parent;for(l=l.next;l===null&&h!==null;)h===o&&(o=null),l=h.next,h=h.parent}}#u(e){for(var r=0;r<e.length;r+=1)eo(e[r],this.#l,this.#r)}capture(e,r){r!==gt&&!this.previous.has(e)&&this.previous.set(e,r),(e.f&Lr)===0&&(this.current.set(e,e.v),er?.set(e,e.v))}activate(){$e=this,this.apply()}deactivate(){$e===this&&($e=null,er=null)}flush(){if(this.activate(),Mt.length>0){if(ro(),$e!==null&&$e!==this)return}else this.#t===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#n)e(this);this.#n.clear()}#f(){if($n.size>1){this.previous.clear();var e=er,r=!0;for(const l of $n){if(l===this){r=!1;continue}const o=[];for(const[c,f]of this.current){if(l.current.has(c))if(r&&f!==l.current.get(c))l.current.set(c,f);else continue;o.push(c)}if(o.length===0)continue;const a=[...l.current.keys()].filter(c=>!this.current.has(c));if(a.length>0){var s=Mt;Mt=[];const c=new Set,f=new Map;for(const u of o)so(u,a,c,f);if(Mt.length>0){$e=l,l.apply();for(const u of Mt)l.#c(u,[],[]);l.deactivate()}Mt=s}}$e=null,er=e}this.committed=!0,$n.delete(this)}increment(e){this.#t+=1,e&&(this.#s+=1)}decrement(e){this.#t-=1,e&&(this.#s-=1),!this.#i&&(this.#i=!0,$t(()=>{this.#i=!1,this.is_deferred()?Mt.length>0&&this.flush():this.revive()}))}revive(){for(const e of this.#l)this.#r.delete(e),it(e,kt),tr(e);for(const e of this.#r)it(e,Qt),tr(e);this.flush()}oncommit(e){this.#e.add(e)}ondiscard(e){this.#n.add(e)}settled(){return(this.#a??=Ol()).promise}static ensure(){if($e===null){const e=$e=new yr;$n.add($e),_n||$t(()=>{$e===e&&e.flush()})}return $e}apply(){}}function to(n){var e=_n;_n=!0;try{for(var r;;){if(Oi(),Mt.length===0&&($e?.flush(),Mt.length===0))return es=null,r;ro()}}finally{_n=e}}function ro(){xs=!0;var n=null;try{for(var e=0;Mt.length>0;){var r=yr.ensure();if(e++>1e3){var s,l;Bi()}r.process(Mt),Mr.clear()}}finally{Mt=[],xs=!1,es=null}}function Bi(){try{fi()}catch(n){bn(n,es)}}let xr=null;function no(n){var e=n.length;if(e!==0){for(var r=0;r<e;){var s=n[r++];if((s.f&(br|Vt))===0&&Pn(s)&&(xr=new Set,Nn(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?Eo(s):s.fn=null),xr?.size>0)){Mr.clear();for(const l of xr){if((l.f&(br|Vt))!==0)continue;const o=[l];let a=l.parent;for(;a!==null;)xr.has(a)&&(xr.delete(a),o.push(a)),a=a.parent;for(let c=o.length-1;c>=0;c--){const f=o[c];(f.f&(br|Vt))===0&&Nn(f)}}xr.clear()}}xr=null}}function so(n,e,r,s){if(!r.has(n)&&(r.add(n),n.reactions!==null))for(const l of n.reactions){const o=l.f;(o&xt)!==0?so(l,e,r,s):(o&(_s|cr))!==0&&(o&kt)===0&&lo(l,e,s)&&(it(l,kt),tr(l))}}function lo(n,e,r){const s=r.get(n);if(s!==void 0)return s;if(n.deps!==null)for(const l of n.deps){if(dn.call(e,l))return!0;if((l.f&xt)!==0&&lo(l,e,r))return r.set(l,!0),!0}return r.set(n,!1),!1}function tr(n){for(var e=es=n;e.parent!==null;){e=e.parent;var r=e.f;if(xs&&e===Ke&&(r&cr)!==0&&(r&Yl)===0)return;if((r&(Yr|Zt))!==0){if((r&mt)===0)return;e.f^=mt}}Mt.push(e)}function oo(n,e){if(!((n.f&Zt)!==0&&(n.f&mt)!==0)){(n.f&kt)!==0?e.d.push(n):(n.f&Qt)!==0&&e.m.push(n),it(n,mt);for(var r=n.first;r!==null;)oo(r,e),r=r.next}}function Yi(n){let e=0,r=kr(0),s;return()=>{Ts()&&(t(r),Ns(()=>(e===0&&(s=nr(()=>n(()=>An(r)))),e+=1,()=>{$t(()=>{e-=1,e===0&&(s?.(),s=void 0,An(r))})})))}}var Di=_r|hn|ps;function Wi(n,e,r){new Hi(n,e,r)}class Hi{parent;is_pending=!1;#e;#n=null;#t;#s;#a;#l=null;#r=null;#o=null;#i=null;#c=null;#u=0;#f=0;#h=!1;#v=!1;#m=new Set;#g=new Set;#d=null;#y=Yi(()=>(this.#d=kr(this.#u),()=>{this.#d=null}));constructor(e,r,s){this.#e=e,this.#t=r,this.#s=s,this.parent=Ke.b,this.is_pending=!!this.#t.pending,this.#a=Ur(()=>{Ke.b=this;{var l=this.#_();try{this.#l=Xt(()=>s(l))}catch(o){this.error(o)}this.#f>0?this.#b():this.is_pending=!1}return()=>{this.#c?.remove()}},Di)}#x(){try{this.#l=Xt(()=>this.#s(this.#e))}catch(e){this.error(e)}}#k(){const e=this.#t.pending;e&&(this.#r=Xt(()=>e(this.#e)),$t(()=>{var r=this.#_();this.#l=this.#p(()=>(yr.ensure(),Xt(()=>this.#s(r)))),this.#f>0?this.#b():(Xr(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#_(){var e=this.#e;return this.is_pending&&(this.#c=Sr(),this.#e.before(this.#c),e=this.#c),e}defer_effect(e){eo(e,this.#m,this.#g)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#t.pending}#p(e){var r=Ke,s=Xe,l=rt;fr(this.#a),Gt(this.#a),pn(this.#a.ctx);try{return e()}catch(o){return Ql(o),null}finally{fr(r),Gt(s),pn(l)}}#b(){const e=this.#t.pending;this.#l!==null&&(this.#i=document.createDocumentFragment(),this.#i.append(this.#c),Ao(this.#l,this.#i)),this.#r===null&&(this.#r=Xt(()=>e(this.#e)))}#w(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#w(e);return}if(this.#f+=e,this.#f===0){this.is_pending=!1;for(const r of this.#m)it(r,kt),tr(r);for(const r of this.#g)it(r,Qt),tr(r);this.#m.clear(),this.#g.clear(),this.#r&&Xr(this.#r,()=>{this.#r=null}),this.#i&&(this.#e.before(this.#i),this.#i=null)}}update_pending_count(e){this.#w(e),this.#u+=e,!(!this.#d||this.#h)&&(this.#h=!0,$t(()=>{this.#h=!1,this.#d&&Er(this.#d,this.#u)}))}get_effect_pending(){return this.#y(),t(this.#d)}error(e){var r=this.#t.onerror;let s=this.#t.failed;if(this.#v||!r&&!s)throw e;this.#l&&(qt(this.#l),this.#l=null),this.#r&&(qt(this.#r),this.#r=null),this.#o&&(qt(this.#o),this.#o=null);var l=!1,o=!1;const a=()=>{if(l){Li();return}l=!0,o&&gi(),yr.ensure(),this.#u=0,this.#o!==null&&Xr(this.#o,()=>{this.#o=null}),this.is_pending=this.has_pending_snippet(),this.#l=this.#p(()=>(this.#v=!1,Xt(()=>this.#s(this.#e)))),this.#f>0?this.#b():this.is_pending=!1};$t(()=>{try{o=!0,r?.(e,a),o=!1}catch(c){bn(c,this.#a&&this.#a.parent)}s&&(this.#o=this.#p(()=>{yr.ensure(),this.#v=!0;try{return Xt(()=>{s(this.#e,()=>e,()=>a)})}catch(c){return bn(c,this.#a.parent),null}finally{this.#v=!1}}))})}}function Ui(n,e,r,s){const l=Wr()?Cn:ks;var o=n.filter(v=>!v.settled);if(r.length===0&&o.length===0){s(e.map(l));return}var a=$e,c=Ke,f=ao(),u=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(v=>v.promise)):null;function d(v){f();try{s(v)}catch(m){(c.f&br)===0&&bn(m,c)}a?.deactivate(),ts()}if(r.length===0){u.then(()=>d(e.map(l)));return}function h(){f(),Promise.all(r.map(v=>Xi(v))).then(v=>d([...e.map(l),...v])).catch(v=>bn(v,c))}u?u.then(h):h()}function ao(){var n=Ke,e=Xe,r=rt,s=$e;return function(o=!0){fr(n),Gt(e),pn(r),o&&s?.activate()}}function ts(){fr(null),Gt(null),pn(null)}function Cn(n){var e=xt|kt,r=Xe!==null&&(Xe.f&xt)!==0?Xe:null;return Ke!==null&&(Ke.f|=hn),{ctx:rt,deps:null,effects:null,equals:Gl,f:e,fn:n,reactions:null,rv:0,v:gt,wv:0,parent:r??Ke,ac:null}}function Xi(n,e,r){let s=Ke;s===null&&oi();var l=s.b,o=void 0,a=kr(gt),c=!Xe,f=new Map;return nc(()=>{var u=Ol();o=u.promise;try{Promise.resolve(n()).then(u.resolve,u.reject).then(()=>{d===$e&&d.committed&&d.deactivate(),ts()})}catch(m){u.reject(m),ts()}var d=$e;if(c){var h=l.is_rendered();l.update_pending_count(1),d.increment(h),f.get(d)?.reject(mn),f.delete(d),f.set(d,u)}const v=(m,b=void 0)=>{if(d.activate(),b)b!==mn&&(a.f|=Lr,Er(a,b));else{(a.f&Lr)!==0&&(a.f^=Lr),Er(a,m);for(const[_,p]of f){if(f.delete(_),_===d)break;p.reject(mn)}}c&&(l.update_pending_count(-1),d.decrement(h))};u.promise.then(v,m=>v(null,m||"unknown"))}),_o(()=>{for(const u of f.values())u.reject(mn)}),new Promise(u=>{function d(h){function v(){h===o?u(a):d(o)}h.then(v,v)}d(o)})}function g(n){const e=Cn(n);return Po(e),e}function ks(n){const e=Cn(n);return e.equals=Kl,e}function io(n){var e=n.effects;if(e!==null){n.effects=null;for(var r=0;r<e.length;r+=1)qt(e[r])}}function Gi(n){for(var e=n.parent;e!==null;){if((e.f&xt)===0)return(e.f&br)===0?e:null;e=e.parent}return null}function Es(n){var e,r=Ke;fr(Gi(n));try{n.f&=~Dr,io(n),e=qo(n)}finally{fr(r)}return e}function co(n){var e=Es(n);if(!n.equals(e)&&(n.wv=jo(),(!$e?.is_fork||n.deps===null)&&(n.v=e,n.deps===null))){it(n,mt);return}qr||(er!==null?(Ts()||$e?.is_fork)&&er.set(n,e):ws(n))}let Ss=new Set;const Mr=new Map;let uo=!1;function kr(n,e){var r={f:0,v:n,reactions:null,equals:Gl,rv:0,wv:0};return r}function te(n,e){const r=kr(n);return Po(r),r}function Cs(n,e=!1,r=!0){const s=kr(n);return e||(s.equals=Kl),gn&&r&&rt!==null&&rt.l!==null&&(rt.l.s??=[]).push(s),s}function R(n,e,r=!1){Xe!==null&&(!rr||(Xe.f&Bl)!==0)&&Wr()&&(Xe.f&(xt|cr|_s|Bl))!==0&&(Kt===null||!dn.call(Kt,n))&&mi();let s=r?Me(e):e;return Er(n,s)}function Er(n,e){if(!n.equals(e)){var r=n.v;qr?Mr.set(n,e):Mr.set(n,r),n.v=e;var s=yr.ensure();if(s.capture(n,r),(n.f&xt)!==0){const l=n;(n.f&kt)!==0&&Es(l),ws(l)}n.wv=jo(),fo(n,kt),Wr()&&Ke!==null&&(Ke.f&mt)!==0&&(Ke.f&(Zt|Yr))===0&&(Jt===null?lc([n]):Jt.push(n)),!s.is_fork&&Ss.size>0&&!uo&&Ki()}return e}function Ki(){uo=!1;for(const n of Ss)(n.f&mt)!==0&&it(n,Qt),Pn(n)&&Nn(n);Ss.clear()}function An(n){R(n,n.v+1)}function fo(n,e){var r=n.reactions;if(r!==null)for(var s=Wr(),l=r.length,o=0;o<l;o++){var a=r[o],c=a.f;if(!(!s&&a===Ke)){var f=(c&kt)===0;if(f&&it(a,e),(c&xt)!==0){var u=a;er?.delete(u),(c&Dr)===0&&(c&Ut&&(a.f|=Dr),fo(u,Qt))}else f&&((c&cr)!==0&&xr!==null&&xr.add(a),tr(a))}}}function Me(n){if(typeof n!="object"||n===null||jr in n)return n;const e=Kn(n);if(e!==Fl&&e!==ti)return n;var r=new Map,s=ms(n),l=te(0),o=Kr,a=c=>{if(Kr===o)return c();var f=Xe,u=Kr;Gt(null),Lo(o);var d=c();return Gt(f),Lo(u),d};return s&&r.set("length",te(n.length)),new Proxy(n,{defineProperty(c,f,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&vi();var d=r.get(f);return d===void 0?d=a(()=>{var h=te(u.value);return r.set(f,h),h}):R(d,u.value,!0),!0},deleteProperty(c,f){var u=r.get(f);if(u===void 0){if(f in c){const d=a(()=>te(gt));r.set(f,d),An(l)}}else R(u,gt),An(l);return!0},get(c,f,u){if(f===jr)return n;var d=r.get(f),h=f in c;if(d===void 0&&(!h||Nr(c,f)?.writable)&&(d=a(()=>{var m=Me(h?c[f]:gt),b=te(m);return b}),r.set(f,d)),d!==void 0){var v=t(d);return v===gt?void 0:v}return Reflect.get(c,f,u)},getOwnPropertyDescriptor(c,f){var u=Reflect.getOwnPropertyDescriptor(c,f);if(u&&"value"in u){var d=r.get(f);d&&(u.value=t(d))}else if(u===void 0){var h=r.get(f),v=h?.v;if(h!==void 0&&v!==gt)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(c,f){if(f===jr)return!0;var u=r.get(f),d=u!==void 0&&u.v!==gt||Reflect.has(c,f);if(u!==void 0||Ke!==null&&(!d||Nr(c,f)?.writable)){u===void 0&&(u=a(()=>{var v=d?Me(c[f]):gt,m=te(v);return m}),r.set(f,u));var h=t(u);if(h===gt)return!1}return d},set(c,f,u,d){var h=r.get(f),v=f in c;if(s&&f==="length")for(var m=u;m<h.v;m+=1){var b=r.get(m+"");b!==void 0?R(b,gt):m in c&&(b=a(()=>te(gt)),r.set(m+"",b))}if(h===void 0)(!v||Nr(c,f)?.writable)&&(h=a(()=>te(void 0)),R(h,Me(u)),r.set(f,h));else{v=h.v!==gt;var _=a(()=>Me(u));R(h,_)}var p=Reflect.getOwnPropertyDescriptor(c,f);if(p?.set&&p.set.call(d,u),!v){if(s&&typeof f=="string"){var w=r.get("length"),T=Number(f);Number.isInteger(T)&&T>=w.v&&R(w,T+1)}An(l)}return!0},ownKeys(c){t(l);var f=Reflect.ownKeys(c).filter(h=>{var v=r.get(h);return v===void 0||v.v!==gt});for(var[u,d]of r)d.v!==gt&&!(u in c)&&f.push(u);return f},setPrototypeOf(){hi()}})}var As,vo,ho,mo;function Ji(){if(As===void 0){As=window,vo=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,r=Text.prototype;ho=Nr(e,"firstChild").get,mo=Nr(e,"nextSibling").get,zl(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),zl(r)&&(r.__t=void 0)}}function Sr(n=""){return document.createTextNode(n)}function Bt(n){return ho.call(n)}function Tn(n){return mo.call(n)}function W(n,e){return Bt(n)}function U(n,e=!1){{var r=Bt(n);return r instanceof Comment&&r.data===""?Tn(r):r}}function q(n,e=1,r=!1){let s=n;for(;e--;)s=Tn(s);return s}function Zi(n){n.textContent=""}function go(){return!1}let po=!1;function Qi(){po||(po=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function wn(n){var e=Xe,r=Ke;Gt(null),fr(null);try{return n()}finally{Gt(e),fr(r)}}function $i(n,e,r,s=r){n.addEventListener(e,()=>wn(r));const l=n.__on_r;l?n.__on_r=()=>{l(),s(!0)}:n.__on_r=()=>s(!0),Qi()}function bo(n){Ke===null&&(Xe===null&&ui(),ci()),qr&&ii()}function ec(n,e){var r=e.last;r===null?e.last=e.first=n:(r.next=n,n.prev=r,e.last=n)}function ur(n,e,r){var s=Ke;s!==null&&(s.f&Vt)!==0&&(n|=Vt);var l={ctx:rt,deps:null,nodes:null,f:n|kt|Ut,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{Nn(l),l.f|=Zn}catch(c){throw qt(l),c}else e!==null&&tr(l);var o=l;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&hn)===0&&(o=o.first,(n&cr)!==0&&(n&_r)!==0&&o!==null&&(o.f|=_r)),o!==null&&(o.parent=s,s!==null&&ec(o,s),Xe!==null&&(Xe.f&xt)!==0&&(n&Yr)===0)){var a=Xe;(a.effects??=[]).push(o)}return l}function Ts(){return Xe!==null&&!rr}function _o(n){const e=ur(Sn,null,!1);return it(e,mt),e.teardown=n,e}function we(n){bo();var e=Ke.f,r=!Xe&&(e&Zt)!==0&&(e&Zn)===0;if(r){var s=rt;(s.e??=[]).push(n)}else return wo(n)}function wo(n){return ur(Jn|Dl,n,!1)}function tc(n){return bo(),ur(Sn|Dl,n,!0)}function rc(n){yr.ensure();const e=ur(Yr|hn,n,!0);return(r={})=>new Promise(s=>{r.outro?Xr(e,()=>{qt(e),s(void 0)}):(qt(e),s(void 0))})}function Ps(n){return ur(Jn,n,!1)}function nc(n){return ur(_s|hn,n,!0)}function Ns(n,e=0){return ur(Sn|e,n,!0)}function le(n,e=[],r=[],s=[]){Ui(s,e,r,l=>{ur(Sn,()=>n(...l.map(t)),!0)})}function Ur(n,e=0){var r=ur(cr|e,n,!0);return r}function Xt(n){return ur(Zt|hn,n,!0)}function yo(n){var e=n.teardown;if(e!==null){const r=qr,s=Xe;To(!0),Gt(null);try{e.call(null)}finally{To(r),Gt(s)}}}function xo(n,e=!1){var r=n.first;for(n.first=n.last=null;r!==null;){const l=r.ac;l!==null&&wn(()=>{l.abort(mn)});var s=r.next;(r.f&Yr)!==0?r.parent=null:qt(r,e),r=s}}function sc(n){for(var e=n.first;e!==null;){var r=e.next;(e.f&Zt)===0&&qt(e),e=r}}function qt(n,e=!0){var r=!1;(e||(n.f&Yl)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(ko(n.nodes.start,n.nodes.end),r=!0),xo(n,e&&!r),ns(n,0),it(n,br);var s=n.nodes&&n.nodes.t;if(s!==null)for(const o of s)o.stop();yo(n);var l=n.parent;l!==null&&l.first!==null&&Eo(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function ko(n,e){for(;n!==null;){var r=n===e?null:Tn(n);n.remove(),n=r}}function Eo(n){var e=n.parent,r=n.prev,s=n.next;r!==null&&(r.next=s),s!==null&&(s.prev=r),e!==null&&(e.first===n&&(e.first=s),e.last===n&&(e.last=r))}function Xr(n,e,r=!0){var s=[];So(n,s,!0);var l=()=>{r&&qt(n),e&&e()},o=s.length;if(o>0){var a=()=>--o||l();for(var c of s)c.out(a)}else l()}function So(n,e,r){if((n.f&Vt)===0){n.f^=Vt;var s=n.nodes&&n.nodes.t;if(s!==null)for(const c of s)(c.is_global||r)&&e.push(c);for(var l=n.first;l!==null;){var o=l.next,a=(l.f&_r)!==0||(l.f&Zt)!==0&&(n.f&cr)!==0;So(l,e,a?r:!1),l=o}}}function Ls(n){Co(n,!0)}function Co(n,e){if((n.f&Vt)!==0){n.f^=Vt,(n.f&mt)===0&&(it(n,kt),tr(n));for(var r=n.first;r!==null;){var s=r.next,l=(r.f&_r)!==0||(r.f&Zt)!==0;Co(r,l?e:!1),r=s}var o=n.nodes&&n.nodes.t;if(o!==null)for(const a of o)(a.is_global||e)&&a.in()}}function Ao(n,e){if(n.nodes)for(var r=n.nodes.start,s=n.nodes.end;r!==null;){var l=r===s?null:Tn(r);e.append(r),r=l}}let rs=!1,qr=!1;function To(n){qr=n}let Xe=null,rr=!1;function Gt(n){Xe=n}let Ke=null;function fr(n){Ke=n}let Kt=null;function Po(n){Xe!==null&&(Kt===null?Kt=[n]:Kt.push(n))}let Rt=null,Yt=0,Jt=null;function lc(n){Jt=n}let No=1,Gr=0,Kr=Gr;function Lo(n){Kr=n}function jo(){return++No}function Pn(n){var e=n.f;if((e&kt)!==0)return!0;if(e&xt&&(n.f&=~Dr),(e&Qt)!==0){for(var r=n.deps,s=r.length,l=0;l<s;l++){var o=r[l];if(Pn(o)&&co(o),o.wv>n.wv)return!0}(e&Ut)!==0&&er===null&&it(n,mt)}return!1}function Mo(n,e,r=!0){var s=n.reactions;if(s!==null&&!(Kt!==null&&dn.call(Kt,n)))for(var l=0;l<s.length;l++){var o=s[l];(o.f&xt)!==0?Mo(o,e,!1):e===o&&(r?it(o,kt):(o.f&mt)!==0&&it(o,Qt),tr(o))}}function qo(n){var e=Rt,r=Yt,s=Jt,l=Xe,o=Kt,a=rt,c=rr,f=Kr,u=n.f;Rt=null,Yt=0,Jt=null,Xe=(u&(Zt|Yr))===0?n:null,Kt=null,pn(n.ctx),rr=!1,Kr=++Gr,n.ac!==null&&(wn(()=>{n.ac.abort(mn)}),n.ac=null);try{n.f|=bs;var d=n.fn,h=d(),v=n.deps,m=$e?.is_fork;if(Rt!==null){var b;if(m||ns(n,Yt),v!==null&&Yt>0)for(v.length=Yt+Rt.length,b=0;b<Rt.length;b++)v[Yt+b]=Rt[b];else n.deps=v=Rt;if(Ts()&&(n.f&Ut)!==0)for(b=Yt;b<v.length;b++)(v[b].reactions??=[]).push(n)}else!m&&v!==null&&Yt<v.length&&(ns(n,Yt),v.length=Yt);if(Wr()&&Jt!==null&&!rr&&v!==null&&(n.f&(xt|Qt|kt))===0)for(b=0;b<Jt.length;b++)Mo(Jt[b],n);if(l!==null&&l!==n){if(Gr++,l.deps!==null)for(let _=0;_<r;_+=1)l.deps[_].rv=Gr;if(e!==null)for(const _ of e)_.rv=Gr;Jt!==null&&(s===null?s=Jt:s.push(...Jt))}return(n.f&Lr)!==0&&(n.f^=Lr),h}catch(_){return Ql(_)}finally{n.f^=bs,Rt=e,Yt=r,Jt=s,Xe=l,Kt=o,pn(a),rr=c,Kr=f}}function oc(n,e){let r=e.reactions;if(r!==null){var s=$a.call(r,n);if(s!==-1){var l=r.length-1;l===0?r=e.reactions=null:(r[s]=r[l],r.pop())}}if(r===null&&(e.f&xt)!==0&&(Rt===null||!dn.call(Rt,e))){var o=e;(o.f&Ut)!==0&&(o.f^=Ut,o.f&=~Dr),ws(o),io(o),ns(o,0)}}function ns(n,e){var r=n.deps;if(r!==null)for(var s=e;s<r.length;s++)oc(n,r[s])}function Nn(n){var e=n.f;if((e&br)===0){it(n,mt);var r=Ke,s=rs;Ke=n,rs=!0;try{(e&(cr|Vl))!==0?sc(n):xo(n),yo(n);var l=qo(n);n.teardown=typeof l=="function"?l:null,n.wv=No;var o;hs&&Mi&&(n.f&kt)!==0&&n.deps}finally{rs=s,Ke=r}}}async function ac(){await Promise.resolve(),to()}function t(n){var e=n.f,r=(e&xt)!==0;if(Xe!==null&&!rr){var s=Ke!==null&&(Ke.f&br)!==0;if(!s&&(Kt===null||!dn.call(Kt,n))){var l=Xe.deps;if((Xe.f&bs)!==0)n.rv<Gr&&(n.rv=Gr,Rt===null&&l!==null&&l[Yt]===n?Yt++:Rt===null?Rt=[n]:Rt.push(n));else{(Xe.deps??=[]).push(n);var o=n.reactions;o===null?n.reactions=[Xe]:dn.call(o,Xe)||o.push(Xe)}}}if(qr&&Mr.has(n))return Mr.get(n);if(r){var a=n;if(qr){var c=a.v;return((a.f&mt)===0&&a.reactions!==null||Io(a))&&(c=Es(a)),Mr.set(a,c),c}var f=(a.f&Ut)===0&&!rr&&Xe!==null&&(rs||(Xe.f&Ut)!==0),u=a.deps===null;Pn(a)&&(f&&(a.f|=Ut),co(a)),f&&!u&&Ro(a)}if(er?.has(n))return er.get(n);if((n.f&Lr)!==0)throw n.v;return n.v}function Ro(n){if(n.deps!==null){n.f|=Ut;for(const e of n.deps)(e.reactions??=[]).push(n),(e.f&xt)!==0&&(e.f&Ut)===0&&Ro(e)}}function Io(n){if(n.v===gt)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Mr.has(e)||(e.f&xt)!==0&&Io(e))return!0;return!1}function nr(n){var e=rr;try{return rr=!0,n()}finally{rr=e}}function ic(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(jr in n)js(n);else if(!Array.isArray(n))for(let e in n){const r=n[e];typeof r=="object"&&r&&jr in r&&js(r)}}}function js(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let s in n)try{js(n[s],e)}catch{}const r=Kn(n);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const s=Il(r);for(let l in s){const o=s[l].get;if(o)try{o.call(n)}catch{}}}}}const cc=["touchstart","touchmove"];function uc(n){return cc.includes(n)}const Fo=new Set,Ms=new Set;function fc(n,e,r,s={}){function l(o){if(s.capture||Ln.call(e,o),!o.cancelBubble)return wn(()=>r?.call(this,o))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?$t(()=>{e.addEventListener(n,l,s)}):e.addEventListener(n,l,s),l}function Jr(n,e,r,s,l){var o={capture:s,passive:l},a=fc(n,e,r,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&_o(()=>{e.removeEventListener(n,a,o)})}function st(n){for(var e=0;e<n.length;e++)Fo.add(n[e]);for(var r of Ms)r(n)}let zo=null;function Ln(n){var e=this,r=e.ownerDocument,s=n.type,l=n.composedPath?.()||[],o=l[0]||n.target;zo=n;var a=0,c=zo===n&&n.__root;if(c){var f=l.indexOf(c);if(f!==-1&&(e===document||e===window)){n.__root=e;return}var u=l.indexOf(e);if(u===-1)return;f<=u&&(a=f)}if(o=l[a]||n.target,o!==e){ei(n,"currentTarget",{configurable:!0,get(){return o||r}});var d=Xe,h=Ke;Gt(null),fr(null);try{for(var v,m=[];o!==null;){var b=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+s];_!=null&&(!o.disabled||n.target===o)&&_.call(o,n)}catch(p){v?m.push(p):v=p}if(n.cancelBubble||b===e||b===null)break;o=b}if(v){for(let p of m)queueMicrotask(()=>{throw p});throw v}}finally{n.__root=e,delete n.currentTarget,Gt(d),fr(h)}}}function qs(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function Zr(n,e){var r=Ke;r.nodes===null&&(r.nodes={start:n,end:e,a:null,t:null})}function H(n,e){var r=(e&Xl)!==0,s=(e&Pi)!==0,l,o=!n.startsWith("<!>");return()=>{l===void 0&&(l=qs(o?n:"<!>"+n),r||(l=Bt(l)));var a=s||vo?document.importNode(l,!0):l.cloneNode(!0);if(r){var c=Bt(a),f=a.lastChild;Zr(c,f)}else Zr(a,a);return a}}function dc(n,e,r="svg"){var s=!n.startsWith("<!>"),l=(e&Xl)!==0,o=`<${r}>${s?n:"<!>"+n}</${r}>`,a;return()=>{if(!a){var c=qs(o),f=Bt(c);if(l)for(a=document.createDocumentFragment();Bt(f);)a.appendChild(Bt(f));else a=Bt(f)}var u=a.cloneNode(!0);if(l){var d=Bt(u),h=u.lastChild;Zr(d,h)}else Zr(u,u);return u}}function Ae(n,e){return dc(n,e,"svg")}function vc(n=""){{var e=Sr(n+"");return Zr(e,e),e}}function he(){var n=document.createDocumentFragment(),e=document.createComment(""),r=Sr();return n.append(e,r),Zr(e,r),n}function E(n,e){n!==null&&n.before(e)}let Rs=!0;function Te(n,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(n.__t??=n.nodeValue)&&(n.__t=r,n.nodeValue=r+"")}function hc(n,e){return mc(n,e)}const yn=new Map;function mc(n,{target:e,anchor:r,props:s={},events:l,context:o,intro:a=!0}){Ji();var c=new Set,f=h=>{for(var v=0;v<h.length;v++){var m=h[v];if(!c.has(m)){c.add(m);var b=uc(m);e.addEventListener(m,Ln,{passive:b});var _=yn.get(m);_===void 0?(document.addEventListener(m,Ln,{passive:b}),yn.set(m,1)):yn.set(m,_+1)}}};f(Gn(Fo)),Ms.add(f);var u=void 0,d=rc(()=>{var h=r??e.appendChild(Sr());return Wi(h,{pending:()=>{}},v=>{be({});var m=rt;o&&(m.c=o),l&&(s.$$events=l),Rs=a,u=n(v,s)||{},Rs=!0,_e()}),()=>{for(var v of c){e.removeEventListener(v,Ln);var m=yn.get(v);--m===0?(document.removeEventListener(v,Ln),yn.delete(v)):yn.set(v,m)}Ms.delete(f),h!==r&&h.parentNode?.removeChild(h)}});return gc.set(u,d),u}let gc=new WeakMap;class jn{anchor;#e=new Map;#n=new Map;#t=new Map;#s=new Set;#a=!0;constructor(e,r=!0){this.anchor=e,this.#a=r}#l=()=>{var e=$e;if(this.#e.has(e)){var r=this.#e.get(e),s=this.#n.get(r);if(s)Ls(s),this.#s.delete(r);else{var l=this.#t.get(r);l&&(this.#n.set(r,l.effect),this.#t.delete(r),l.fragment.lastChild.remove(),this.anchor.before(l.fragment),s=l.effect)}for(const[o,a]of this.#e){if(this.#e.delete(o),o===e)break;const c=this.#t.get(a);c&&(qt(c.effect),this.#t.delete(a))}for(const[o,a]of this.#n){if(o===r||this.#s.has(o))continue;const c=()=>{if(Array.from(this.#e.values()).includes(o)){var u=document.createDocumentFragment();Ao(a,u),u.append(Sr()),this.#t.set(o,{effect:a,fragment:u})}else qt(a);this.#s.delete(o),this.#n.delete(o)};this.#a||!s?(this.#s.add(o),Xr(a,c,!1)):c()}}};#r=e=>{this.#e.delete(e);const r=Array.from(this.#e.values());for(const[s,l]of this.#t)r.includes(s)||(qt(l.effect),this.#t.delete(s))};ensure(e,r){var s=$e,l=go();if(r&&!this.#n.has(e)&&!this.#t.has(e))if(l){var o=document.createDocumentFragment(),a=Sr();o.append(a),this.#t.set(e,{effect:Xt(()=>r(a)),fragment:o})}else this.#n.set(e,Xt(()=>r(this.anchor)));if(this.#e.set(s,e),l){for(const[c,f]of this.#n)c===e?s.unskip_effect(f):s.skip_effect(f);for(const[c,f]of this.#t)c===e?s.unskip_effect(f.effect):s.skip_effect(f.effect);s.oncommit(this.#l),s.ondiscard(this.#r)}else this.#l()}}const pc=0,Is=1;function Fs(n,e,r,s,l){var o=Wr(),a=gt,c=o?kr(a):Cs(a,!1,!1),f=o?kr(a):Cs(a,!1,!1),u=new jn(n);Ur(()=>{var d=e(),h=!1;if(ri(d)){var v=ao(),m=!1;const b=_=>{if(!h){m=!0,v(!1),yr.ensure();try{_()}finally{ts(),_n||to()}}};d.then(_=>{b(()=>{Er(c,_),u.ensure(Is,s&&(p=>s(p,c)))})},_=>{b(()=>{if(Er(f,_),u.ensure(Is,l&&(p=>l(p,f))),!l)throw f.v})}),$t(()=>{m||b(()=>{u.ensure(pc,r)})})}else Er(c,d),u.ensure(Is,s);return()=>{h=!0}})}function D(n,e,r=!1){var s=new jn(n),l=r?_r:0;function o(a,c){s.ensure(a,c)}Ur(()=>{var a=!1;e((c,f=!0)=>{a=!0,o(f,c)}),a||o(!1,null)},l)}const bc=Symbol("NaN");function Qr(n,e,r){var s=new jn(n),l=!Wr();Ur(()=>{var o=e();o!==o&&(o=bc),l&&o!==null&&typeof o=="object"&&(o={}),s.ensure(o,r)})}function Ye(n,e){return e}function _c(n,e,r){for(var s=[],l=e.length,o,a=e.length,c=0;c<l;c++){let h=e[c];Xr(h,()=>{if(o){if(o.pending.delete(h),o.done.add(h),o.pending.size===0){var v=n.outrogroups;zs(Gn(o.done)),v.delete(o),v.size===0&&(n.outrogroups=null)}}else a-=1},!1)}if(a===0){var f=s.length===0&&r!==null;if(f){var u=r,d=u.parentNode;Zi(d),d.append(u),n.items.clear()}zs(e,!f)}else o={pending:new Set(e),done:new Set},(n.outrogroups??=new Set).add(o)}function zs(n,e=!0){for(var r=0;r<n.length;r++)qt(n[r],e)}var Oo;function Be(n,e,r,s,l,o=null){var a=n,c=new Map,f=(e&Ul)!==0;if(f){var u=n;a=u.appendChild(Sr())}var d=null,h=ks(()=>{var w=r();return ms(w)?w:w==null?[]:Gn(w)}),v,m=!0;function b(){p.fallback=d,wc(p,v,a,e,s),d!==null&&(v.length===0?(d.f&wr)===0?Ls(d):(d.f^=wr,qn(d,null,a)):Xr(d,()=>{d=null}))}var _=Ur(()=>{v=t(h);for(var w=v.length,T=new Set,y=$e,S=go(),L=0;L<w;L+=1){var N=v[L],P=s(N,L),M=m?null:c.get(P);M?(M.v&&Er(M.v,N),M.i&&Er(M.i,L),S&&y.unskip_effect(M.e)):(M=yc(c,m?a:Oo??=Sr(),N,P,L,l,e,r),m||(M.e.f|=wr),c.set(P,M)),T.add(P)}if(w===0&&o&&!d&&(m?d=Xt(()=>o(a)):(d=Xt(()=>o(Oo??=Sr())),d.f|=wr)),w>T.size&&ai(),!m)if(S){for(const[F,C]of c)T.has(F)||y.skip_effect(C.e);y.oncommit(b),y.ondiscard(()=>{})}else b();t(h)}),p={effect:_,items:c,outrogroups:null,fallback:d};m=!1}function Mn(n){for(;n!==null&&(n.f&Zt)===0;)n=n.next;return n}function wc(n,e,r,s,l){var o=(s&_i)!==0,a=e.length,c=n.items,f=Mn(n.effect.first),u,d=null,h,v=[],m=[],b,_,p,w;if(o)for(w=0;w<a;w+=1)b=e[w],_=l(b,w),p=c.get(_).e,(p.f&wr)===0&&(p.nodes?.a?.measure(),(h??=new Set).add(p));for(w=0;w<a;w+=1){if(b=e[w],_=l(b,w),p=c.get(_).e,n.outrogroups!==null)for(const C of n.outrogroups)C.pending.delete(p),C.done.delete(p);if((p.f&wr)!==0)if(p.f^=wr,p===f)qn(p,null,r);else{var T=d?d.next:f;p===n.effect.last&&(n.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Rr(n,d,p),Rr(n,p,T),qn(p,T,r),d=p,v=[],m=[],f=Mn(d.next);continue}if((p.f&Vt)!==0&&(Ls(p),o&&(p.nodes?.a?.unfix(),(h??=new Set).delete(p))),p!==f){if(u!==void 0&&u.has(p)){if(v.length<m.length){var y=m[0],S;d=y.prev;var L=v[0],N=v[v.length-1];for(S=0;S<v.length;S+=1)qn(v[S],y,r);for(S=0;S<m.length;S+=1)u.delete(m[S]);Rr(n,L.prev,N.next),Rr(n,d,L),Rr(n,N,y),f=y,d=N,w-=1,v=[],m=[]}else u.delete(p),qn(p,f,r),Rr(n,p.prev,p.next),Rr(n,p,d===null?n.effect.first:d.next),Rr(n,d,p),d=p;continue}for(v=[],m=[];f!==null&&f!==p;)(u??=new Set).add(f),m.push(f),f=Mn(f.next);if(f===null)continue}(p.f&wr)===0&&v.push(p),d=p,f=Mn(p.next)}if(n.outrogroups!==null){for(const C of n.outrogroups)C.pending.size===0&&(zs(Gn(C.done)),n.outrogroups?.delete(C));n.outrogroups.size===0&&(n.outrogroups=null)}if(f!==null||u!==void 0){var P=[];if(u!==void 0)for(p of u)(p.f&Vt)===0&&P.push(p);for(;f!==null;)(f.f&Vt)===0&&f!==n.fallback&&P.push(f),f=Mn(f.next);var M=P.length;if(M>0){var F=(s&Ul)!==0&&a===0?r:null;if(o){for(w=0;w<M;w+=1)P[w].nodes?.a?.measure();for(w=0;w<M;w+=1)P[w].nodes?.a?.fix()}_c(n,P,F)}}o&&$t(()=>{if(h!==void 0)for(p of h)p.nodes?.a?.apply()})}function yc(n,e,r,s,l,o,a,c){var f=(a&pi)!==0?(a&wi)===0?Cs(r,!1,!1):kr(r):null,u=(a&bi)!==0?kr(l):null;return{v:f,i:u,e:Xt(()=>(o(e,f??r,u??l,c),()=>{n.delete(s)}))}}function qn(n,e,r){if(n.nodes)for(var s=n.nodes.start,l=n.nodes.end,o=e&&(e.f&wr)===0?e.nodes.start:r;s!==null;){var a=Tn(s);if(o.before(s),s===l)return;s=a}}function Rr(n,e,r){e===null?n.effect.first=r:e.next=r,r===null?n.effect.last=e:r.prev=e}function pt(n,e,r=!1,s=!1,l=!1){var o=n,a="";le(()=>{var c=Ke;if(a!==(a=e()??"")&&(c.nodes!==null&&(ko(c.nodes.start,c.nodes.end),c.nodes=null),a!=="")){var f=a+"";r?f=`<svg>${f}</svg>`:s&&(f=`<math>${f}</math>`);var u=qs(f);if((r||s)&&(u=Bt(u)),Zr(Bt(u),u.lastChild),r||s)for(;Bt(u);)o.before(Bt(u));else o.before(u)}})}function Cr(n,e,...r){var s=new jn(n);Ur(()=>{const l=e()??null;s.ensure(l,l&&(o=>l(o,...r)))},_r)}function Rn(n,e,r){var s=new jn(n);Ur(()=>{var l=e()??null;s.ensure(l,l&&(o=>r(o,l)))},_r)}const xc=()=>performance.now(),Ar={tick:n=>requestAnimationFrame(n),now:()=>xc(),tasks:new Set};function Vo(){const n=Ar.now();Ar.tasks.forEach(e=>{e.c(n)||(Ar.tasks.delete(e),e.f())}),Ar.tasks.size!==0&&Ar.tick(Vo)}function kc(n){let e;return Ar.tasks.size===0&&Ar.tick(Vo),{promise:new Promise(r=>{Ar.tasks.add(e={c:n,f:r})}),abort(){Ar.tasks.delete(e)}}}function ss(n,e){wn(()=>{n.dispatchEvent(new CustomEvent(e))})}function Ec(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Bo(n){const e={},r=n.split(";");for(const s of r){const[l,o]=s.split(":");if(!l||o===void 0)break;const a=Ec(l.trim());e[a]=o.trim()}return e}const Sc=n=>n;function Yo(n,e,r,s){var l=(n&Ci)!==0,o=(n&Ai)!==0,a=l&&o,c=(n&Ti)!==0,f=a?"both":l?"in":"out",u,d=e.inert,h=e.style.overflow,v,m;function b(){return wn(()=>u??=r()(e,s?.()??{},{direction:f}))}var _={is_global:c,in(){if(e.inert=d,!l){m?.abort(),m?.reset?.();return}o||v?.abort(),v=Os(e,b(),m,1,()=>{ss(e,"introend"),v?.abort(),v=u=void 0,e.style.overflow=h})},out(y){if(!o){y?.(),u=void 0;return}e.inert=!0,m=Os(e,b(),v,0,()=>{ss(e,"outroend"),y?.()})},stop:()=>{v?.abort(),m?.abort()}},p=Ke;if((p.nodes.t??=[]).push(_),l&&Rs){var w=c;if(!w){for(var T=p.parent;T&&(T.f&_r)!==0;)for(;(T=T.parent)&&(T.f&cr)===0;);w=!T||(T.f&Zn)!==0}w&&Ps(()=>{nr(()=>_.in())})}}function Os(n,e,r,s,l){var o=s===1;if(vn(e)){var a,c=!1;return $t(()=>{if(!c){var p=e({direction:o?"in":"out"});a=Os(n,p,r,s,l)}}),{abort:()=>{c=!0,a?.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r?.deactivate(),!e?.duration&&!e?.delay)return ss(n,o?"introstart":"outrostart"),l(),{abort:yt,deactivate:yt,reset:yt,t:()=>s};const{delay:f=0,css:u,tick:d,easing:h=Sc}=e;var v=[];if(o&&r===void 0&&(d&&d(0,1),u)){var m=Bo(u(0,1));v.push(m,m)}var b=()=>1-s,_=n.animate(v,{duration:f,fill:"forwards"});return _.onfinish=()=>{_.cancel(),ss(n,o?"introstart":"outrostart");var p=r?.t()??1-s;r?.abort();var w=s-p,T=e.duration*Math.abs(w),y=[];if(T>0){var S=!1;if(u)for(var L=Math.ceil(T/16.666666666666668),N=0;N<=L;N+=1){var P=p+w*h(N/L),M=Bo(u(P,1-P));y.push(M),S||=M.overflow==="hidden"}S&&(n.style.overflow="hidden"),b=()=>{var F=_.currentTime;return p+w*h(F/T)},d&&kc(()=>{if(_.playState!=="running")return!1;var F=b();return d(F,1-F),!0})}_=n.animate(y,{duration:T,fill:"forwards"}),_.onfinish=()=>{b=()=>s,d?.(s,1-s),l()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=yt)},deactivate:()=>{l=yt},reset:()=>{s===0&&d?.(1,0)},t:()=>b()}}function Do(n){var e,r,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var l=n.length;for(e=0;e<l;e++)n[e]&&(r=Do(n[e]))&&(s&&(s+=" "),s+=r)}else for(r in n)n[r]&&(s&&(s+=" "),s+=r);return s}function Cc(){for(var n,e,r=0,s="",l=arguments.length;r<l;r++)(n=arguments[r])&&(e=Do(n))&&(s&&(s+=" "),s+=e);return s}function Ac(n){return typeof n=="object"?Cc(n):n??""}const Wo=[...`
\r\f \v\uFEFF`];function Tc(n,e,r){var s=n==null?"":""+n;if(e&&(s=s?s+" "+e:e),r){for(var l in r)if(r[l])s=s?s+" "+l:l;else if(s.length)for(var o=l.length,a=0;(a=s.indexOf(l,a))>=0;){var c=a+o;(a===0||Wo.includes(s[a-1]))&&(c===s.length||Wo.includes(s[c]))?s=(a===0?"":s.substring(0,a))+s.substring(c+1):a=c}}return s===""?null:s}function Pc(n,e){return n==null?null:String(n)}function ct(n,e,r,s,l,o){var a=n.__className;if(a!==r||a===void 0){var c=Tc(r,s,o);c==null?n.removeAttribute("class"):e?n.className=c:n.setAttribute("class",c),n.__className=r}else if(o&&l!==o)for(var f in o){var u=!!o[f];(l==null||u!==!!l[f])&&n.classList.toggle(f,u)}return o}function ot(n,e,r,s){var l=n.__style;if(l!==e){var o=Pc(e);o==null?n.removeAttribute("style"):n.style.cssText=o,n.__style=e}return s}const Nc=Symbol("is custom element"),Lc=Symbol("is html");function V(n,e,r,s){var l=jc(n);l[e]!==(l[e]=r)&&(e==="loading"&&(n[li]=r),r==null?n.removeAttribute(e):typeof r!="string"&&Mc(n).includes(e)?n[e]=r:n.setAttribute(e,r))}function jc(n){return n.__attributes??={[Nc]:n.nodeName.includes("-"),[Lc]:n.namespaceURI===Ni}}var Ho=new Map;function Mc(n){var e=n.getAttribute("is")||n.nodeName,r=Ho.get(e);if(r)return r;Ho.set(e,r=[]);for(var s,l=n,o=Element.prototype;o!==l;){s=Il(l);for(var a in s)s[a].set&&r.push(a);l=Kn(l)}return r}function Vs(n,e,r=e){var s=new WeakSet;$i(n,"input",async l=>{var o=l?n.defaultValue:n.value;if(o=Bs(n)?Ys(o):o,r(o),$e!==null&&s.add($e),await ac(),o!==(o=e())){var a=n.selectionStart,c=n.selectionEnd,f=n.value.length;if(n.value=o??"",c!==null){var u=n.value.length;a===c&&c===f&&u>f?(n.selectionStart=u,n.selectionEnd=u):(n.selectionStart=a,n.selectionEnd=Math.min(c,u))}}}),nr(e)==null&&n.value&&(r(Bs(n)?Ys(n.value):n.value),$e!==null&&s.add($e)),Ns(()=>{var l=e();if(n===document.activeElement){var o=ys??$e;if(s.has(o))return}Bs(n)&&l===Ys(n.value)||n.type==="date"&&!l&&!n.value||l!==n.value&&(n.value=l??"")})}function Bs(n){var e=n.type;return e==="number"||e==="range"}function Ys(n){return n===""?null:+n}class Ds{#e=new WeakMap;#n;#t;static entries=new WeakMap;constructor(e){this.#t=e}observe(e,r){var s=this.#e.get(e)||new Set;return s.add(r),this.#e.set(e,s),this.#s().observe(e,this.#t),()=>{var l=this.#e.get(e);l.delete(r),l.size===0&&(this.#e.delete(e),this.#n.unobserve(e))}}#s(){return this.#n??(this.#n=new ResizeObserver(e=>{for(var r of e){Ds.entries.set(r.target,r);for(var s of this.#e.get(r.target)||[])s(r)}}))}}var qc=new Ds({box:"border-box"});function Uo(n,e,r){var s=qc.observe(n,()=>r(n[e]));Ps(()=>(nr(()=>r(n[e])),s))}function Xo(n,e){return n===e||n?.[jr]===e}function $r(n={},e,r,s){return Ps(()=>{var l,o;return Ns(()=>{l=o,o=[],nr(()=>{n!==r(...o)&&(e(n,...o),l&&Xo(r(...l),n)&&e(null,...l))})}),()=>{$t(()=>{o&&Xo(r(...o),n)&&e(null,...o)})}}),n}function Rc(n=!1){const e=rt,r=e.l.u;if(!r)return;let s=()=>ic(e.s);if(n){let l=0,o={};const a=Cn(()=>{let c=!1;const f=e.s;for(const u in f)f[u]!==o[u]&&(o[u]=f[u],c=!0);return c&&l++,l});s=()=>t(a)}r.b.length&&tc(()=>{Go(e,s),gs(r.b)}),we(()=>{const l=nr(()=>r.m.map(ni));return()=>{for(const o of l)typeof o=="function"&&o()}}),r.a.length&&we(()=>{Go(e,s),gs(r.a)})}function Go(n,e){if(n.l.s)for(const r of n.l.s)t(r);e()}let ls=!1;function Ic(n){var e=ls;try{return ls=!1,[n(),ls]}finally{ls=e}}const Fc={get(n,e){if(!n.exclude.includes(e))return n.props[e]},set(n,e){return!1},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function en(n,e,r){return new Proxy({props:n,exclude:e},Fc)}const zc={get(n,e){let r=n.props.length;for(;r--;){let s=n.props[r];if(vn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(n,e,r){let s=n.props.length;for(;s--;){let l=n.props[s];vn(l)&&(l=l());const o=Nr(l,e);if(o&&o.set)return o.set(r),!0}return!1},getOwnPropertyDescriptor(n,e){let r=n.props.length;for(;r--;){let s=n.props[r];if(vn(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=Nr(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(n,e){if(e===jr||e===Wl)return!1;for(let r of n.props)if(vn(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(n){const e=[];for(let r of n.props)if(vn(r)&&(r=r()),!!r){for(const s in r)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(r))e.includes(s)||e.push(s)}return e}};function Ir(...n){return new Proxy({props:n},zc)}function z(n,e,r,s){var l=!gn||(r&xi)!==0,o=(r&Ei)!==0,a=(r&Si)!==0,c=s,f=!0,u=()=>(f&&(f=!1,c=a?nr(s):s),c),d;if(o){var h=jr in n||Wl in n;d=Nr(n,e)?.set??(h&&e in n?y=>n[e]=y:void 0)}var v,m=!1;o?[v,m]=Ic(()=>n[e]):v=n[e],v===void 0&&s!==void 0&&(v=u(),d&&(l&&di(),d(v)));var b;if(l?b=()=>{var y=n[e];return y===void 0?u():(f=!0,y)}:b=()=>{var y=n[e];return y!==void 0&&(c=void 0),y===void 0?c:y},l&&(r&ki)===0)return b;if(d){var _=n.$$legacy;return(function(y,S){return arguments.length>0?((!l||!S||_||m)&&d(S?b():y),y):b()})}var p=!1,w=((r&yi)!==0?Cn:ks)(()=>(p=!1,b()));o&&t(w);var T=Ke;return(function(y,S){if(arguments.length>0){const L=S?t(w):l&&o?Me(y):y;return R(w,L),p=!0,c!==void 0&&(c=L),y}return qr&&p||(T.f&br)!==0?w.v:t(w)})}function Oc(n){rt===null&&Hl(),gn&&rt.l!==null?Vc(rt).m.push(n):we(()=>{const e=nr(n);if(typeof e=="function")return e})}function Vc(n){var e=n.l;return e.u??={a:[],b:[],m:[]}}const Bc="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Bc),qi();function Yc(n){return In(n,.5)}function Dc(n){return In(n,.75)-In(n,.25)}function In(n,e){if(ze(n))return In(n.v,e);if(ze(e))return In(n,e.v);const r=n.length;if(Array.isArray(e)||(e=[e]),!Ks(e[0])||It(e)<0||Dt(e)>1)throw new Error("Parameter 'p' must be between 0 and 1 (both included).");function s(a,c){const f=(r-1)*c+1,u=Math.floor(f),d=Math.ceil(f);return a[u-1]+(a[d-1]-a[u-1])*(f-Math.floor(f))}const l=$s(n),o=e.map(a=>s(l,a));return e.length==1?o[0]:He(o)}function Ko(n,e){if(ze(n))return Ko(n.v,ze(e)?e.v:e);const r=e.length;e[r-1]=e[r-1]*1.0001;let s=new Ee.valuesConstructor(r-1);for(let l=0;l<n.length;l++)for(let o=0;o<r-1;o++)n[l]>=e[o]&&n[l]<e[o+1]&&(s[o]+=1);return new Ee(s)}function Jo(n){if(ze(n))return Jo(n.v);const e=new Ee.valuesConstructor(n.length-1);for(let r=0;r<e.length;r++)e[r]=.5*(n[r]+n[r+1]);return new Ee(e)}function os(n,e){ze(n)&&os(n.v,e);const r=Tr(n);if(r[0]===r[1])throw new Error('split: values in a vector "x" should vary.');const s=(r[1]-r[0])/e;return Ee.seq(r[0],r[1],s)}function Zo(n){if(ze(n))return Zo(n.v);const e=new Ee.valuesConstructor(n.length-1);for(let r=0;r<n.length-1;r++)e[r]=n[r+1]-n[r];return new Ee(e)}function Wc(n){const e=n<10?.375:.5,r=new Ee.valuesConstructor(n);for(let s=0;s<n;s++)r[s]=(s+1-e)/(n+(1-e)-e);return new Ee(r)}function Qo(n,e,r=!1,s=void 0,l=void 0){if(ze(n))return Qo(n.v,e.v,r,s,l);const o=n.length;if(e.length!==o)throw Error("Vectors 'x' and 'y' must have the same length.");if(o<2)throw Error("Vectors 'x' and 'y' must have at least two values.");s===void 0&&(s=sr(n)),l===void 0&&(l=sr(e));let a=0;for(let c=0;c<o;c++)a=a+(n[c]-s)*(e[c]-l);return a/(r?o:o-1)}function dr(n,e){if(ze(n))return dr(n.v,e);e===void 0&&(e=.1);const r=Tr(n),s=(r[1]-r[0])*e;return[r[0]-s,r[1]+s]}function Tr(n){if(ze(n))return Tr(n.v);let e=n[0],r=n[0];for(let s=1;s<n.length;s++)n[s]<e&&(e=n[s]),n[s]>r&&(r=n[s]);return[e,r]}function as(n,e){return ze(n)?as(n.v,e):Math.sqrt(Fn(n,e))}function Fn(n,e){if(e===void 0&&(e=!1),ze(n))return Fn(n.v);const r=sr(n);let s=0;for(let l=0;l<n.length;l++){const o=n[l]-r;s=s+o*o}return s/(e?n.length:n.length-1)}function sr(n){return ze(n)?sr(n.v):$o(n)/n.length}function $o(n){if(ze(n))return $o(n.v);let e=0;for(let r=0;r<n.length;r++)e=e+n[r];return e}function Ws(n){if(ze(n))return Ws(n.v);let e=1;for(let r=0;r<n.length;r++)e=e*n[r];return e}function It(n){return ze(n)||lr(n)?n.v[Hs(n.v)-1]:n[Hs(n)-1]}function Hs(n){if(ze(n)||lr(n))return Hs(n.v);let e=1,r=n[0];for(let s=2;s<=n.length;s++)n[s-1]<r&&(e=s,r=n[s-1]);return e}function Dt(n){return ze(n)||lr(n)?n.v[Us(n.v)-1]:n[Us(n)-1]}function Us(n){if(ze(n)||lr(n))return Us(n.v);let e=1,r=n[0];for(let s=2;s<=n.length;s++)n[s-1]>r&&(e=s,r=n[s-1]);return e}const Xs=30,Hc=1e-7,Uc=1e-7,Xc=100;function Gc(n,e,r,s,l){l===void 0&&(l=Xc);let o=r,a=s,c=(a-o)/l;for(let f=0;f<l;f++){let u,d;for(let m=0;m<l;m++){u=o+m*c,d=o+(m+1)*c;const b=e(u),_=e(d);if(b<=n&&_>=n)break}const h=(u+d)/2,v=e(h);if(Math.abs(v-n)<Hc||(o=u,a=d,c=(a-o)/l,c/a<Uc))return h}return(o+a)/2}function ea(n,e=0,r=1){let s=Ee.zeros(n);for(let l=0;l<n;l++)s.v[l]=e+Math.random()*(r-e);return s}function ta(n,e=0,r=1){let s=Ee.zeros(n);for(let l=0;l<n;l++){const o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random();s.v[l]=o*Math.sin(a)*r+e}return s}function Gs(n,e=0,r=1){if(ze(n))return n.apply(l=>Gs(l,e,r));const s=1/(Math.sqrt(2)*r);return .5*(1+Jc((n-e)*s))}function is(n,e=0,r=1){if(ze(n))return n.apply(B=>is(B,e,r));if(e!==0||r!==1)return is(n)*r+e;if(n<0||n>1)throw Error('Parameter "p" must be between 0 and 1.');if(n<1e-10)return-1/0;if(n>.9999999999)return 1/0;const s=.425,l=5,o=.180625,a=1.6,c=3.3871327179,f=5.0434271938*10,u=1.5929113202*100,d=5.910937472*10,h=1.7895169469*10,v=7.8757757664*10,m=6.71875636*10,b=1.4234372777,_=2.75681539,p=1.3067284816,w=1.7023821103*.1,T=7.370016425*.1,y=1.2021132975*.1,S=6.657905115,L=3.081226386,N=4.2868294337*.1,P=1.7337203997*.01,M=2.4197894225*.1,F=1.2258202635*.01,C=n-.5;let k;if(Math.abs(C)<=s)return k=o-C*C,C*(((d*k+u)*k+f)*k+c)/(((m*k+v)*k+h)*k+1);k=C<0?n:1-n,k=Math.sqrt(-Math.log(k));let j;return k<=l?(k=k-a,j=(((w*k+p)*k+_)*k+b)/((y*k+T)*k+1)):(k=k-l,j=((P*k+N)*k+L+S)/((F*k+M)*k+1)),C<0?-j:j}function ra(n,e){if(Array.isArray(n))return ra(He(n),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const u=f/e,d=Math.pow(u,1/6)-.5*Math.pow(u,1/3)+1/3*Math.pow(u,1/2);return Gs(d,r,l)}function a(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:Kc(f/2,e/2)/zn(e/2)}const c=e>Xs?o:a;return ze(n)?n.apply(c):c(n)}function tn(n,e){if(Array.isArray(n))return tn(He(n),e);const r=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const u=is(f,r,l),d=Math.pow(Math.sqrt(36*u*u-30*u+13)/4+(3*u-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function a(f){return f===0?0:f===1?Inf:e===0?0:Gc(f,d=>ra(d,e),0,Xs*10)}const c=e>Xs?o:a;return ze(n)?n.apply(c):c(n)}function zn(n){if(ze(n))return n.apply(zn);if(n<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(n<.5)return Math.PI/(Math.sin(Math.PI*n)+zn(1-n));n=n-1;let r=.9999999999998099;for(let l=0;l<e.length;l++)r=r+e[l]/(n+l+1);const s=n+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,n+.5)*Math.exp(-s)*r}function Kc(n,e){let l=0;for(let o=0;o<1e4;o++){const a=Math.pow(n,o)/zn(e+o+1);if(isNaN(a)||a<1e-18)break;l+=a}return Math.pow(n,e)*zn(e)*Math.exp(-n)*l}function Jc(n){const e=n>=0?1:-1;n=Math.abs(n);const r=.254829592,s=-.284496736,l=1.421413741,o=-1.453152027,a=1.061405429,f=1/(1+.3275911*n),u=1-((((a*f+o)*f+l)*f+s)*f+r)*f*Math.exp(-n*n);return e*u}function na(n){const e=n.nrows,r=n.ncols;if(e<r){const a=na(n.subset([],We.seq(1,e)));return{Q:a.Q,R:Qc(a.Q,n)}}let s=ke.eye(e),l=n.t();for(let a=1;a<=r;a++)for(let c=e;c>=a+1;c--){const f=l.v.subarray((c-2)*r,c*r),u=s.v.subarray((c-2)*e,c*e),d=f.slice(),h=u.slice(),[v,m,b]=Zc(d[a-1],d[a-1+r]);for(let _=0;_<r;_++)f[_]=d[_]*v+d[_+r]*m,f[_+r]=d[_]*-m+d[_+r]*v,u[_]=h[_]*v+h[_+e]*m,u[_+e]=h[_]*-m+h[_+e]*v;for(let _=r;_<e;_++)u[_]=h[_]*v+h[_+e]*m,u[_+e]=h[_]*-m+h[_+e]*v}const o=We.seq(1,r);return{Q:e===r?s:s.subset([],o),R:e===r?l.t():l.subset([],o).t()}}function Zc(n,e){if(n==0)return[0,1,e];if(Math.abs(n)>Math.abs(e)){const o=e/n,a=Math.sqrt(1+o*o),c=1/a;return[c,o*c,n*a]}const r=n/e,s=Math.sqrt(1+r*r),l=1/s;return[r*l,l,e*s]}function Ks(n){return typeof n=="number"}function sa(n,e){e===void 0&&(e=n);const r=n.nrows,s=n.ncols,l=e.nrows;e.ncols;const o=r,a=l,c=s,f=new Float64Array(o*a);for(let u=0;u<c;u++){const d=n.v.subarray(u*r,(u+1)*r),h=e.v.subarray(u*l,(u+1)*l);for(let v=0;v<a;v++){const m=f.subarray(v*o,(v+1)*o);for(let b=0;b<o;b++)m[b]+=d[b]*h[v]}}return new ke(f,o,a)}function Qc(n,e){if(e===void 0&&(e=n),!Ft(n)||!Ft(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const r=n.nrows,s=n.ncols,l=e.nrows,o=e.ncols,a=s,c=o,f=r,u=new Float64Array(a*c);for(let d=0;d<c;d++){const h=e.v.subarray(d*l,(d+1)*l),v=u.subarray(d*a,(d+1)*a);for(let m=0;m<a;m++){const b=n.v.subarray(m*r,(m+1)*r);let _=0;for(let p=0;p<f;p++)_+=b[p]*h[p];v[m]=_}}return new ke(u,a,c)}function la(n,e,r){if(r===void 0){if(e!==n.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ee(n.v)}if(n.v.length!==e*r)throw Error("reshape: provided dimension does not match number of values in the object.");return new ke(n.v,e,r)}function Ft(n){return n&&n.constructor===ke}function $c(n,e,r){return new ke(new Float64Array(n),e,r)}class ke{static valuesConstructor=Float64Array;static TOLERANCE=Math.pow(10,-9);constructor(e,r,s){if(!ArrayBuffer.isView(e)||e.constructor!==ke.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(r===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==r*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=r,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return ke.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const s=ke.eye(e),l=ke.eye(e),o=this.t(),a=o.v[(e-1)*e+(e-1)],c=e-1;for(let f=0;f<e;f++)l.v[c*e+f]=s.v[c*e+f]/a;for(let f=e-2;f>=0;f--){let u=s.getcolumn(f+1);const d=o.getcolref(f+1);for(let h=f+1;h<e;h++){const v=l.getcolumn(h+1);u=u.subtract(v.mult(d[h]))}l.v.set(u.divide(d[f]).v,f*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(Ws(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=ke.eye(e),o=ke.eye(e),a=this.t(),c=0,f=a.v[0];for(let u=0;u<e;u++)o.v[c*e+u]=l.v[c*e+u]/f;for(let u=1;u<e;u++){let d=l.getcolumn(u+1);const h=a.getcolref(u+1);for(let v=0;v<u;v++){const m=o.getcolumn(v+1);d=d.subtract(m.mult(h[v]))}o.v.set(d.divide(h[u]).v,u*e)}return o.t()}const r=na(this);if(!r.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return r.R.inv().dot(r.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let r=0;r<e;r++)if(Math.abs(this.v[e*this.nrows+r])>ke.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let r=e+1;r<this.nrows;r++)if(Math.abs(this.v[e*this.nrows+r])>ke.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),r=new Float64Array(e);for(let s=0;s<e;s++)r[s]=this.getcolref(s+1)[s];return new Ee(r)}t(){const e=this.nrows,r=this.ncols,s=new ke.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const o=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let a=0;a<this.nrows;a++)s[a*r+l]=o[a]}return new ke(s,r,e)}for(let l=0;l<this.nrows;l++){const o=s.subarray(l*r,(l+1)*r);for(let a=0;a<this.ncols;a++)o[a]=this.v[a*this.nrows+l]}return new ke(s,r,e)}dot(e){if(ze(e))return new ke(Qs(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(Ft(e))return new ke(Qs(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,r,s){if(Ft(e))return new ke(Js(this.v,e.v,r),this.nrows,this.ncols);if(Ks(e))return new ke(Zs(this.v,e,r),this.nrows,this.ncols);if(!ze(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new ke.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(Zs(this.getcolref(o+1),e.v[o],r),o*this.nrows);return new ke(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new ke.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(Js(this.getcolref(o+1),e.v,r),o*this.nrows);return new ke(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e,r){if(r===void 0&&(r=2),r==2){const s=this.ncols,l=new ke.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.getcolref(o+1));return new Ee(l)}if(r==1)return this.t().apply(e,2);if(r==0){const s=this.v.length,l=new ke.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.v[o]);return new ke(l,this.nrows,this.ncols)}}replace(e,r,s){typeof r=="number"&&(r=[r]),r.length===0&&(r=We.seq(1,this.nrows)),lr(r)||(r=or(r)),typeof s=="number"&&(s=[s]),s.length===0&&(s=We.seq(1,this.ncols)),lr(s)||(s=or(s));const l=r.length,o=s.length;if(It(r)<1||Dt(r)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(It(s)<1||Dt(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==o)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let a=0;a<s.length;a++){const c=e.getcolref(a+1),f=(s.v[a]-1)*this.nrows;for(let u=0;u<r.length;u++){const d=r.v[u];this.v[f+d-1]=c[u]}}return this}copy(){return new ke(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const r=new Ee.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)r[s]=this.getcolref(s+1)[e-1];return new Ee(r)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ee(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,r){if(typeof e=="number"&&(e=or([e])),typeof r=="number"&&(r=or([r])),Array.isArray(e)&&(e=e.length===0?null:or(e)),Array.isArray(r)&&(r=r.length===0?null:or(r)),e!==null&&!lr(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(r!==null&&!lr(r))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(It(e)<1||Dt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(r!==null&&(It(r)<1||Dt(r)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const c=r.length,f=this.nrows,u=new ke.valuesConstructor(f*c);for(let d=0;d<r.length;d++)u.set(this.v.slice((r.v[d]-1)*this.nrows,r.v[d]*this.nrows),d*this.nrows);return new ke(u,f,c)}if(r==null)return this.t().subset(r,e).t();const s=e.length,l=r.length,o=new ke.valuesConstructor(s*l);let a=new ke.valuesConstructor(s);for(let c=0;c<l;c++){const f=this.v.subarray((r.v[c]-1)*this.nrows,r.v[c]*this.nrows);for(let u=0;u<s;u++)a[u]=f[e.v[u]-1];o.set(a,c*s)}return new ke(o,s,l)}toString(e){function r(a,c){return" ".repeat(c-a.length)+a}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Dt(this.v))))+e+3;let l="";const o=this.t();for(let a=1;a<=o.ncols;a++)l+=Array.from(o.getcolref(a)).map(c=>r(c.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,r,s,l){e===void 0&&(e=","),r===void 0&&(r=e===";"?",":".");const o=l!=null&&l.length>0,a=s!=null&&s.length>0;if(o&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(a&&s.length!==this.ncols+(o?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const c=this.t();let f=a?s.join(e)+`
`:"";for(let u=1;u<=c.ncols;u++)f=f+(o?l[u-1]+e:"")+c.getcolref(u).join(e)+`
`;return f=f.replace(/\./g,r),f}static randn(e,r,s,l){return la(ta(e*r,s,l),e,r)}static rand(e,r,s,l){return la(ea(e*r,s,l),e,r)}static eye(e,r){r===void 0&&(r=e);const s=new Float64Array(e*r);for(let l=0;l<Math.min(e,r);l++)s[l*e+l]=1;return new ke(s,e,r)}static diagm(e){if(!ze(e))throw Error('diagm: the argument "x" must be a Vector.');const r=e.length,s=new Float64Array(r*r);for(let l=0;l<r;l++)s[l*r+l]=e.v[l];return new ke(s,r,r)}static zeros(e,r){return r===void 0&&(r=e),new ke(new Float64Array(e*r),e,r)}static ones(e,r){return ke.fill(1,e,r)}static fill(e,r,s){s===void 0&&(s=r);const l=new Float64Array(r*s);for(let o=0;o<l.length;o++)l[o]=e;return new ke(l,r,s)}static outer(e,r,s){if(Array.isArray(e)&&(e=He(e)),Array.isArray(r)&&(r=He(r)),!ze(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!ze(r))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=ke.zeros(e.length,r.length);for(let o=0;o<r.length;o++){const a=r.v[o],c=l.getcolref(o+1);for(let f=0;f<e.length;f++)c[f]=s(e.v[f],a)}return l}static parseCSV(e,r,s,l){function o(p){return p.some(w=>Number.isNaN(Number.parseFloat(w.trim())))}r===void 0&&(r=",");const a=r===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let c=e.split(/\n/),f=[],u=0;const d=c[0].split(r);(s||s===void 0&&o(d))&&(f=d,u=1),c=c.filter(p=>p.trim().length>1);let h=[],v=0;l&&(v=1);const m=c.length-u,b=d.length-v;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const _=ke.zeros(b,m);for(let p=u;p<m+u;p++){const w=c[p].split(r);let T;if(l?(h[p-u]=w[0],T=w.slice(1).map(y=>Number.parseFloat(y.trim().replace(a,".")))):T=w.map(y=>Number.parseFloat(y.trim().replace(a,"."))),T.some(y=>Number.isNaN(y)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(T.length!=b)throw Error("Wrong number of values in row #"+p);_.v.set(new Float64Array(T),(p-u)*b)}return{values:_.t(),header:f,labels:h,sep:r,dec:a}}}function ze(n){return n&&n.constructor===Ee}function He(n){return new Ee(new Float64Array(n))}class Ee{static valuesConstructor=Float64Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const r=new We.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=l+1,s=s+1);return new We(r.subarray(0,s))}filter(e){const r=new Ee.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=this.v[l],s=s+1);return new Ee(r.subarray(0,s))}shuffle(){return new Ee(ca(this.v))}sort(e){return new Ee($s(this.v,e))}sortind(e){return new We(ua(this.v,e))}rep(e){return aa(this,e)}repeach(e){return ia(this,e)}replace(e,r){typeof r=="number"&&(r=[r]),r.length===0&&(r=We.seq(1,this.length)),lr(r)||(r=or(r));const s=r.length;if(It(r)<1||Dt(r)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<r.length;l++){const o=r.v[l];this.v[o-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=or([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?We.bool2ind(e):or(e)),!lr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=Ee.zeros(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new Ee(this.v.slice(e-1,r))}copy(){return new Ee(this.v.slice())}dot(e){return e===void 0&&(e=this),Qs(this.v,e.v,1,this.length,e.length,1)[0]}op(e,r){if(ze(e))return new Ee(Js(this.v,e.v,r));if(Ks(e))return new Ee(Zs(this.v,e,r));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(r,s)=>r+s)}subtract(e){return this.op(e,(r,s)=>r-s)}mult(e){return this.op(e,(r,s)=>r*s)}divide(e){return this.op(e,(r,s)=>r/s)}apply(e){const r=this.v.length,s=Ee.zeros(r);for(let l=0;l<r;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const r=e.reduce((o,a)=>o+(typeof a=="number"?1:a.length),0),s=new Ee.valuesConstructor(r);let l=0;for(const o of e)typeof o=="number"?(s[l]=o,l+=1):(s.set(ze(o)?o.v:new Ee.valuesConstructor(o),l),l+=typeof o=="number"?1:o.length);return new Ee(s)}static seq(e,r,s){return oa(e,r,s,Ee)}static randn(e,r,s){return ta(e,r,s)}static rand(e,r,s){return ea(e,r,s)}static zeros(e){return new Ee(new Ee.valuesConstructor(e))}static ones(e){return Ee.fill(1,e)}static fill(e,r){const s=new Ee.valuesConstructor(r);for(let l=0;l<s.length;l++)s[l]=e;return new Ee(s)}}function lr(n){return n.constructor===We}function or(n){return new We(new Int32Array(n))}class We{static valuesConstructor=Int32Array;constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const r=new We.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=l+1,s=s+1);return new We(r.subarray(0,s))}filter(e){const r=new We.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(r[s]=this.v[l],s=s+1);return new We(r.subarray(0,s))}shuffle(){return new We(ca(this.v))}sort(e){return new We($s(this.v,e))}sortind(e){return new We(ua(this.v,e))}rep(e){return aa(this,e)}repeach(e){return ia(this,e)}subset(e){if(typeof e=="number"&&(e=or([e])),Array.isArray(e)&&(e=or(e)),!lr(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const r=e.length,s=new We.valuesConstructor(r);for(let l=0;l<r;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new We(s)}slice(e,r){if(e===null&&(e=1),r==null&&(r=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(r>this.length)throw Error("slice: index exceeds the length of the vector.");if(r<e)throw Error('slice: "end" must not be smaller than "start".');return new We(this.v.slice(e-1,r))}static seq(e,r,s){return oa(e,r,s,We)}static ones(e){return We.fill(1,e)}static fill(e,r){const s=new We.valuesConstructor(r);for(let l=0;l<s.length;l++)s[l]=e;return new We(s)}static bool2ind(e){let r=0;const s=new We.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[r]=l+1,r=r+1);return new We(s.subarray(0,r))}}function oa(n,e,r,s){r===void 0&&(r=n<=e?1:-1);const l=Math.floor((e-n)/r)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const o=new s.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=n+a*r;return new s(o)}function aa(n,e){const r=n.length*e,s=new n.constructor.valuesConstructor(r);for(let l=1;l<=e;l++)for(let o=0;o<n.length;o++)s[(l-1)*n.length+o]=n.v[o];return new n.constructor(s)}function ia(n,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const r=n.length*e,s=new n.constructor.valuesConstructor(r);for(let l=0;l<n.length;l++)for(let o=0;o<e;o++)s[l*e+o]=n.v[l];return new n.constructor(s)}function Js(n,e,r){if(n.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(n.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new n.constructor(n.length);for(let l=0;l<n.length;l++)s[l]=r(n[l],e[l]);return s}function Zs(n,e,r){const s=new n.constructor(n.length);for(let l=0;l<n.length;l++)s[l]=r(n[l],e);return s}function Qs(n,e,r,s,l,o){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const a=r,c=o,f=s,u=new n.constructor(a*c);for(let d=0;d<c;d++){const h=e.subarray(d*l,(d+1)*l),v=u.subarray(d*a,(d+1)*a);for(let m=0;m<f;m++){const b=h[m],_=n.subarray(m*r,(m+1)*r);for(let p=0;p<a;p++)v[p]+=_[p]*b}}return u}function ca(n){let e=n.slice(),r=e.length,s,l;for(;r;)l=Math.floor(Math.random()*r--),s=e[r],e[r]=e[l],e[l]=s;return e}function $s(n,e=!1){return e?n.slice().sort((r,s)=>s-r):n.slice().sort((r,s)=>r-s)}function ua(n,e=!1){const r=We.seq(1,n.length).v;return e?r.sort((s,l)=>n[l-1]-n[s-1]):r.sort((s,l)=>n[s-1]-n[l-1])}function eu(n,e,r){if(!n||!n.class||!n.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=n.ncols,l=n.ncomp;let o,a;switch(e){case"mX":o=2,a=s;break;case"sX":o=2+s,a=s;break;case"loadings":case"xloadings":o=2+2*s+(r-1)*s,a=s;break;case"P":o=2+2*s,a=l*s;break;case"eigenvals":case"xeigenvals":o=2+2*s+s*l,a=l;break;case"cq0":o=2+2*s+s*l+l,a=l;break;case"cNq":o=2+2*s+s*l+2*l,a=l;break;case"rq0":o=2+2*s+s*l+3*l,a=l;break;case"rNq":o=2+2*s+s*l+4*l,a=l;break;case"ch0":o=2+2*s+s*l+5*l,a=l;break;case"cNh":o=2+2*s+s*l+6*l,a=l;break;case"rh0":o=2+2*s+s*l+7*l,a=l;break;case"rNh":o=2+2*s+s*l+8*l,a=l;break;case"cr0":o=2+2*s+s*l+9*l,a=l;break;case"cNr":o=2+2*s+s*l+10*l,a=l;break;case"rr0":o=2+2*s+s*l+11*l,a=l;break;case"rNr":o=2+2*s+s*l+12*l,a=l;break;case"cg0":o=2+2*s+s*l+13*l,a=l;break;case"cNg":o=2+2*s+s*l+14*l,a=l;break;case"rg0":o=2+2*s+s*l+15*l,a=l;break;case"rNg":o=2+2*s+s*l+16*l,a=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return n.v.subarray(o,o+a)}function fa(n,e,r){if(!n||!n.class||!n.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=n.ncols,l=n.nrows,o=n.ncomp;let a,c;switch(e){case"scores":case"xscores":a=(r-1)*l,c=l;break;case"T":a=0,c=l*o;break;case"hdist":a=l*o+(r-1)*l,c=l;break;case"qdist":a=2*l*o+(r-1)*l,c=l;break;case"xcumexpvar":case"cumexpvar":a=3*l*o,c=o;break;case"fdistc":a=3*l*o+o+(r-1)*l,c=l;break;case"fdistr":a=4*l*o+o+(r-1)*l,c=l;break;case"gdist":a=5*l*o+o+(r-1)*s,c=s;break;case"rdist":a=5*l*o+o+s*o+(r-1)*s,c=s;break;case"idistc":a=5*l*o+o+2*s*o+(r-1)*s,c=s;break;case"idistr":a=5*l*o+o+3*s*o+(r-1)*s,c=s;break;case"E":a=5*l*o+o+3*s*o+o*s,c=l*s;break;default:throw new Error("pcares_get: wrong outcome name.")}return n.v.subarray(a,a+c)}function tu(n,e,r,s){return n*r+n*r+n*r+r+n*e*r+n*r+n*r+r+e*r+e*r+e*r+e*r+n*s}function da(n,e,r){return 3+2*(n+e)+n*r+1*r+4*r+4*r+4*r+n*r+e*r+1*r}function At(n,e,r){if(!n||!n.class||!n.class.includes("plsmodel"))throw new Error('plsmodel_get: parameter "m" must be JSON with PLS model.');const s=n.npred,l=n.nresp,o=n.ncomp;let a,c=da(s,l,o)-s*o-l*o-2*l;switch(e){case"mY":c=3,a=l;break;case"mX":c=3+l,a=s;break;case"sY":c=3+l+s,a=l;break;case"sX":c=3+l+s+l,a=s;break;case"P":c=3+2*(l+s),a=o*s;break;case"loadings":case"xloadings":c=3+2*(l+s)+(r-1)*s,a=s;break;case"eigenvals":case"xeigenvals":c=3+2*(l+s)+o*s,a=o;break;case"cq0":c=3+2*(l+s)+o*s+o,a=o;break;case"cNq":c=3+2*(l+s)+o*s+2*o,a=o;break;case"rq0":c=3+2*(l+s)+o*s+3*o,a=o;break;case"rNq":c=3+2*(l+s)+o*s+4*o,a=o;break;case"ch0":c=3+2*(l+s)+o*s+5*o,a=o;break;case"cNh":c=3+2*(l+s)+o*s+6*o,a=o;break;case"rh0":c=3+2*(l+s)+o*s+7*o,a=o;break;case"rNh":c=3+2*(l+s)+o*s+8*o,a=o;break;case"cz0":c=3+2*(l+s)+o*s+9*o,a=o;break;case"cNz":c=3+2*(l+s)+o*s+10*o,a=o;break;case"rz0":c=3+2*(l+s)+o*s+11*o,a=o;break;case"rNz":c=3+2*(l+s)+o*s+12*o,a=o;break;case"weights":c=3+2*(l+s)+o*s+13*o+(r-1)*s,a=s;break;case"yloadings":c=3+2*(l+s)+o*s+13*o+o*s+(r-1)*l,a=l;break;case"yeigenvals":c=3+2*(l+s)+o*s+13*o+o*s+o*l,a=o;break;default:throw Error("plsmodel_get: wrong outcome name.")}return n.v.subarray(c,c+a)}function bt(n,e,r,s){if(!n||!n.class||!n.class.includes("plsres"))throw new Error('plsres_get: parameter "r" must be JSON with PLS results.');s||(s=1);const l=n.nrows,o=n.ncomp,a=n.nresp,c=n.npred,f=n.nresp_model;let u,d=3*l*o+o;switch(e){case"Yp":d=d+(r-1)*f*l+(s-1)*l,u=l;break;case"yscores":d=d+o*f*l+(r-1)*l,u=l;break;case"zdist":d=d+o*f*l+o*l+(r-1)*l,u=l;break;case"ycumexpvar":d=d+o*f*l+o*l+o*l,u=o;break;case"rmse":d=d+o*f*l+o*l+o*l+o,u=f*o;break;case"r2":d=d+o*f*l+o*l+o*l+o+a*o,u=f*o;break;case"bias":d=d+o*f*l+o*l+o*l+o+2*a*o,u=f*o;break;case"slope":d=d+o*f*l+o*l+o*l+o+3*a*o,u=f*o;break;case"E":d=d+o*f*l+o*l+o*l+o+4*a*o,u=l*c;break;case"T":d=0,u=l*o;break;default:return fa(n,e,r)}return n.v.subarray(d,d+u)}function ru(n,e,r,s,l,o,a,c){if(!Ft(e))throw new Error("pls_fit: D must be a matrix.");if(r<1||e.ncols<2+r)throw new Error("pls_fit: training set should have at least 2 predictors and 1 response.");a||(a=[]);const f=a&&Array.isArray(a)?a.length:0;if(!us(a,0,e.nrows-1))throw new Error('pls_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!us(c,0,e.ncols-r-1))throw new Error('pls_fit: some indices in "exclvars" array are outside the expected range.');const d=e.nrows-f,h=e.ncols-r-u;if(d<3||h<2)throw new Error("pls_fit: X must have at least 3 rows and 2 predictors.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),s===void 0&&(s=Math.min(d-1,h)),s<1||s>Math.min(d-1,h))throw new Error('pls_fit: the value of "ncomp" does not match the dimension of D.');const v=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,v/e.v.BYTES_PER_ELEMENT);let m=null;if(f>0){const j=new Int32Array(a);m=n._malloc(j.length*j.BYTES_PER_ELEMENT),n.HEAP32.set(j,m/j.BYTES_PER_ELEMENT)}let b=null;if(u>0){const j=new Int32Array(c);b=n._malloc(j.length*j.BYTES_PER_ELEMENT),n.HEAP32.set(j,b/j.BYTES_PER_ELEMENT)}const _=da(h,r,s),p=Float64Array,w=n._malloc(_*p.BYTES_PER_ELEMENT),T=h*r*s,y=Float64Array,S=n._malloc(T*p.BYTES_PER_ELEMENT),L=n._malloc(T*p.BYTES_PER_ELEMENT),N=n._malloc(T*p.BYTES_PER_ELEMENT);if(n.ccall("plsfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[v,e.nrows,e.ncols-r,r,s,l,o,w,m,f,b,u,L,S,N])!==1)throw new Error("pls_fit: unexpected error.");const M=n.HEAPF64.slice(w/p.BYTES_PER_ELEMENT,w/p.BYTES_PER_ELEMENT+_),F=n.HEAPF64.slice(L/y.BYTES_PER_ELEMENT,L/y.BYTES_PER_ELEMENT+T),C=n.HEAPF64.slice(S/y.BYTES_PER_ELEMENT,S/y.BYTES_PER_ELEMENT+T),k=n.HEAPF64.slice(N/y.BYTES_PER_ELEMENT,N/y.BYTES_PER_ELEMENT+T);return n._free(v),n._free(w),n._free(L),n._free(S),n._free(N),m&&n._free(m),b&&n._free(b),{class:["plsmodel","pcamodel"],v:M,ncomp:s,nrows:d,npred:h,nresp:r,exclvars:c,center:l,scale:o,coeffs:F,vip:C,sr:k}}function nu(n,e,r,s,l){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pls_predict: parameter "m" must be JSON with PLS results.');if(!Ft(r))throw new Error("pls_predict: D must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!us(l,0,r.nrows-1))throw new Error('pls_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=r.nrows-o;r.ncols-s===e.npred&&(a=0);const f=r.ncols-a-s;if(c<1)throw new Error("pls_predict: D must have at least 1 row.");if(f!==e.npred)throw new Error("pls_predict: D must have the same number of predictors (without excluded ones) as the training set.");const u=n._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);n.HEAPF64.set(r.v,u/r.v.BYTES_PER_ELEMENT);let d=null;if(o>0){const Y=new Int32Array(l);d=n._malloc(Y.length*Y.BYTES_PER_ELEMENT),n.HEAP32.set(Y,d/Y.BYTES_PER_ELEMENT)}let h=null;if(a>0){const Y=new Int32Array(e.exclvars);h=n._malloc(Y.length*Y.BYTES_PER_ELEMENT),n.HEAP32.set(Y,h/Y.BYTES_PER_ELEMENT)}const v=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,v/e.v.BYTES_PER_ELEMENT);const m=tu(c,e.nresp,e.ncomp,e.npred),b=Float64Array,_=n._malloc(m*b.BYTES_PER_ELEMENT);if(n.ccall("plspredict_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[u,r.nrows,r.ncols-s,s,v,_,d,o,h,a])!==1)throw new Error("pls_predict: unexpected error.");const w=n.HEAPF64.slice(_/b.BYTES_PER_ELEMENT,_/b.BYTES_PER_ELEMENT+m);n._free(u),n._free(v),n._free(_),d&&n._free(d),h&&n._free(h);const T={class:["plsres","pcares"],v:w,ncomp:e.ncomp,nrows:c,npred:f,nresp:s,nresp_model:e.nresp,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},y=new Array(e.ncomp),S=new Array(e.ncomp),L=new Array(e.ncomp),N=new Array(e.ncomp),P=new Array(e.ncomp),M=new Array(e.ncomp),F=new Array(e.ncomp),C=new Array(e.ncomp),k=new Array(e.ncomp),j=bt(T,"xcumexpvar"),B=bt(T,"ycumexpvar");if(s>0){y[0]=1,P[0]=j[0],N[0]=1-j[0],S[0]=j[0],L[0]=1-j[0],k[0]=B[0],C[0]=1-B[0],M[0]=B[0],F[0]=1-B[0];for(let I=1;I<e.ncomp;I++)y[I]=I+1,P[I]=j[I],N[I]=1-j[I],S[I]=j[I]-j[I-1],L[I]=1-S[I],k[I]=B[I],C[I]=1-B[I],M[I]=B[I]-B[I-1],F[I]=1-M[I];const Y=new ke(bt(T,"rmse"),e.nresp,e.ncomp),A=new ke(bt(T,"r2"),e.nresp,e.ncomp),O=new ke(bt(T,"slope"),e.nresp,e.ncomp),$=new ke(bt(T,"bias"),e.nresp,e.ncomp);T.stat={components:y,xresvar:L,xexpvar:S,xcumexpvar:P,xcumresvar:N,yresvar:F,yexpvar:M,ycumexpvar:k,ycumresvar:C,rmse:Y.t(),r2:A.t(),slope:O.t(),bias:$.t()}}else T.stat=null;return T}function su(n,e,r,s,l,o,a,c,f){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pcvpls: parameter "m" must be JSON with PLS model.');if(!Ft(r))throw new Error("pcvpls: D must be a matrix.");if(s<1)throw new Error("pcvpls: D must have at least one response.");f||(f=[]);const u=f&&Array.isArray(f)?f.length:0;if(!us(f,0,r.nrows-1))throw new Error('pcvpls: some indices in "outliers" array are outside the expected range.');const d=e.exclvars.length,h=r.nrows-u,v=r.ncols-s-d;if(h<3)throw new Error("plspcv: D must have at least 3 rows.");if(v<2)throw new Error("plspcv: D must have at least 2 predictors.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('plspcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('plspcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('plspcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>h)throw new Error('plspcv: the value of "cv_nseg" is too large for the given X.');if(a===0&&(o=h),!Number.isInteger(l)||l<1)throw new Error('plspcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?h-2:h-Math.ceil(h/o)-1,v,e.ncomp);if(l>m)throw new Error('plspcv: the value of "ncomp" is too large.');const b=n._malloc(r.v.length*r.v.BYTES_PER_ELEMENT);n.HEAPF64.set(r.v,b/r.v.BYTES_PER_ELEMENT);let _=null;if(u>0){const k=new Int32Array(f);_=n._malloc(k.length*k.BYTES_PER_ELEMENT),n.HEAP32.set(k,_/k.BYTES_PER_ELEMENT)}let p=null;if(d>0){const k=new Int32Array(e.exclvars);p=n._malloc(k.length*k.BYTES_PER_ELEMENT),n.HEAP32.set(k,p/k.BYTES_PER_ELEMENT)}const w=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,w/e.v.BYTES_PER_ELEMENT);const T=r.v.constructor,y=h*(s+v),S=n._malloc(y*T.BYTES_PER_ELEMENT),L=o*l,N=r.v.constructor,P=n._malloc(L*N.BYTES_PER_ELEMENT);if(n.ccall("pcvpls_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[b,r.nrows,r.ncols-s,s,l,e.center,e.scale,a,o,c,w,S,P,_,u,p,d])!==1)throw new Error("plspcv: unexpected error.");const F=n.HEAPF64.slice(S/T.BYTES_PER_ELEMENT,S/T.BYTES_PER_ELEMENT+y),C=n.HEAPF64.slice(P/N.BYTES_PER_ELEMENT,P/N.BYTES_PER_ELEMENT+L);return n._free(b),n._free(w),n._free(S),n._free(P),_&&n._free(_),p&&n._free(p),[new ke(F,h,s+v),new ke(C,o,l)]}function lu(n,e){if(e[0]===0){const r=e[1]+2;return 2+n*r+2*n+r}return 3+n}const Fr=[{id:"norm",title:"Normalization",mpl:2,get_mpl_new:(n,e)=>2,mp:[0,0]},{id:"savgol",title:"Savitzky-Golay",mpl:3,get_mpl_new:(n,e)=>e[0]*e[0],mp:[3,1,0]},{id:"scale",title:"Scaling",mpl:2,get_mpl_new:(n,e)=>2*n,mp:[1,0]},{id:"baseline",title:"Baseline",mpl:3,get_mpl_new:lu,mp:[0,0,0]},{id:"trim",title:"Trim tails",mpl:2,get_mpl_new:(n,e)=>2,mp:[0,0]},{id:"spikes",title:"Spike removal",mpl:2,get_mpl_new:(n,e)=>2+3*n+e[0],mp:[5,5]}];function ou(n){let e="<ul>";for(let r=0;r<n.ml.length;r++){const s=Fr[n.ml[r]].title;e=e+"<li>"+s+" <span>"+n.info[r]+"</span></li>"}return e=e+"</ul>",e}function va(n,e,r){const s=Fr.findIndex(h=>h.id==="trim");let l=0,o=n.ncols-e,a=0;for(let h=0;h<r.ml.length;h++){if(r.ml[h]!==s){a+=r.mpl_new[h];continue}l=Math.max(l,r.mp_new[a]),o=Math.min(o,r.mp_new[a+1]),a+=r.mpl_new[h]}const c=n.nrows,u=o-l+e,d=ke.zeros(c,u);return a=0,e>0&&(d.v.set(n.v.slice(0,e*c),a),a+=e*c),d.v.set(n.v.slice((e+l)*c,(e+o)*c),a),[l,o,d]}function au(n,e){if(!n||!e||typeof e!="object"||Object.keys(e).length===0)return n;const r=Fr.findIndex(c=>c.id==="trim");if(e.ml.findIndex(c=>c===r)<0)return n;const[l,o,a]=va(n.values,n.nresp,e);return n.values=a,n.varlabels=n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varlabels.slice(n.nresp+l,n.nresp+o)):n.varlabels.slice(l,o),n.varindices=n.nresp>0?Pr(0,n.nresp-1).concat(Pr(0,o-l-1)):Pr(0,o-l-1),n.varvalues=n.nresp>0?n.varvalues.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp+l,n.nresp+o)):n.varvalues.slice(l,o),n}function ha(n,e,r,s,l=!0,o=[]){if(!Ft(e))throw new Error("prep: D must be a matrix.");if(!Array.isArray(s)||s.length<1)throw new Error("prep_fit: list with methods is not correct.");let a,c;l?(a=e.ncols,c=e.nrows-r):(a=e.nrows,c=e.ncols-r);const f=s.length;if(f<1)throw new Error("prep_fit: no preprocessing methods are provided.");const u=new Int32Array(f),d=new Int32Array(f),h=new Int32Array(f);let v=0,m=0;for(let j=0;j<s.length;j++){const B=s[j].id,Y=s[j].params,A=Fr.findIndex($=>$.id==B);if(A<0)throw new Error("prep_fit: wrong method name: "+B+".");const O=Fr[A];if(Y.length!==O.mpl)throw new Error("prep_fit: wrong number of parameters for method: "+B+".");u[j]=A,d[j]=O.mpl,h[j]=O.get_mpl_new(c,Y),v=v+d[j],m=m+h[j]}const b=new Float64Array(v);let _=0;for(let j=0;j<s.length;j++){const B=s[j].id,Y=s[j].params;Fr.findIndex(A=>A.id==B),b.set(Y,_),_=_+d[j]}const p=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,p/e.v.BYTES_PER_ELEMENT);const w=n._malloc(u.length*u.BYTES_PER_ELEMENT);n.HEAP32.set(u,w/u.BYTES_PER_ELEMENT);const T=n._malloc(d.length*d.BYTES_PER_ELEMENT);n.HEAP32.set(d,T/d.BYTES_PER_ELEMENT);const y=n._malloc(h.length*h.BYTES_PER_ELEMENT);n.HEAP32.set(h,y/h.BYTES_PER_ELEMENT);const S=n._malloc(b.length*b.BYTES_PER_ELEMENT);n.HEAPF64.set(b,S/b.BYTES_PER_ELEMENT);const L=n._malloc(m*b.BYTES_PER_ELEMENT),N=new Int32Array(o),P=N.length,M=n._malloc(P*N.BYTES_PER_ELEMENT);if(n.HEAP32.set(N,M/N.BYTES_PER_ELEMENT),n.ccall("prepfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","numbers"],[p,a,c,r,f,w,T,S,y,L,l,M,P])!==1)throw new Error("prep_fit: unexpected error.");const C=n.HEAPF64.slice(L/b.BYTES_PER_ELEMENT,L/b.BYTES_PER_ELEMENT+m);return n._free(p),n._free(w),n._free(S),n._free(T),n._free(M),n._free(L),n._free(y),{ml:u,mpl:d,mp:b,mpl_new:h,mp_new:C,npred:c,class:["prepmodel"]}}function el(n,e,r,s,l=!0,o=!1){if(!Ft(e))throw new Error("prep_apply: D must be a matrix.");if(Object.keys(s)==0||!s.ml)return e;let a,c;if(l?(a=e.ncols,c=e.nrows-r):(a=e.nrows,c=e.ncols-r),c!==s.npred)throw new Error("prep_apply: D has wrong number of predictors (expected "+s.npred+" got "+c+").");const f=s.ml,u=s.mpl_new,d=s.mp_new,h=u.reduce((L,N)=>L+N,0);if(!f||f.length<1||!u||u.length!==f.length||d.length!==h)throw new Error("prep_apply: wrong structure of the model object.");const v=f.length,m=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const b=n._malloc(f.length*f.BYTES_PER_ELEMENT);n.HEAP32.set(f,b/f.BYTES_PER_ELEMENT);const _=n._malloc(u.length*u.BYTES_PER_ELEMENT);n.HEAP32.set(u,_/u.BYTES_PER_ELEMENT);const p=n._malloc(d.length*d.BYTES_PER_ELEMENT);n.HEAPF64.set(d,p/d.BYTES_PER_ELEMENT);const w=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);if(n.ccall("prepapply_wasm",["number"],["number","number","number","number","number","number","number","number","number","number"],[m,a,c,r,v,b,_,p,w,l])!==1)throw new Error("prep_apply: unexpected error.");const y=n.HEAPF64.slice(w/e.v.BYTES_PER_ELEMENT,w/e.v.BYTES_PER_ELEMENT+e.v.length);n._free(m),n._free(b),n._free(_),n._free(p),n._free(w);const S=new ke(y,e.nrows,e.ncols);if(o){const[L,N,P]=va(S,r,s);return P}return S}function iu(n,e,r,s){e===void 0&&(e=!0),r===void 0&&(r=!1),s===void 0&&(s=!1);function l(f,u,d,h){if(typeof u=="boolean")return u?f.apply(d,2):He([h]).rep(f.ncols);if(!ze(u))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(u.length!==f.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return u}const o=l(n,e,sr,0),a=l(n,r,as,1),c=ke.zeros(n.nrows,n.ncols);for(let f=1;f<=n.ncols;f++){const u=n.getcolref(f),d=c.getcolref(f),h=o.v[f-1],v=1/a.v[f-1];for(let m=0;m<n.nrows;m++)d[m]=(u[m]-h)*v}return s?[c,o,a]:c}function ma(n,e,r){return n<e?["regular","in"]:n>r?["outlier","out"]:["extreme","out"]}function cu(n,e,r,s,l,o,a,c){if(!c||c.length===0)return[0,0];let f=0,u=0;for(let d of c){const h=n[d],[v,m]=ma(h,e,r);o[v]+=1,a[m]+=1,s[d]=v,l[d]=m,f=f+(m==="in"),u=u+(m!=="in")}return[f,u]}function ga(n,e,r,s,l,o,a,c,f){if(!f||f.length===0)return[0,0,0,0,0,0,0,0,0,0];let u=0,d=0;for(let B of f){const Y=n[B],[A,O]=ma(Y,r,s);c[O]+=1,l[B]="alien",a.alien+=1,o[B]=O,u=u+(O!=="in"),d=d+(O==="in")}const h=f.slice();h.sort((B,Y)=>n[B]-n[Y]);let v=h.length;const m=h.map(B=>n[B]);let b=-1,_=0,p=0,w=0,T=0;for(;b<0;)_>0&&(l[h[v-1]]="external",a.alien=a.alien-1,a.external=a.external+1,v=v-1,h.pop(),m.pop()),p=sr(m),w=Fn(m),T=w/(p*p),b=4-2*e*T,_=_+1;const y=(2+Math.sqrt(b))/T,S=y-e,L=p/y,N=r/L,P=1-2*(e+S)*(e+3*S)/(3*(e+2*S)**2),M=(P-1)*(1-3*P),F=(e+2*S)/(e+S)**2,C=1+P*F*(P-1-.5*(2-P)*M*F),k=P*Math.sqrt(2*F)*(1+.5*M*F),j=Gs((Math.pow(N/(e+S),P)-C)/k);return[u,d,j,S,L,P,C,k,e,p]}class tl{#e;get outcomes(){return t(this.#e)}set outcomes(e){R(this.#e,e)}constructor(e,r,s,l,o,a,c){this.d=e,this.ind=r,this.objlabels=s,this.objindices=l,this.classes=o,this.classNames=a,this.nrows=e.length,this.nMembers=r.members.length,this.nStrangers=r.strangers.length,this.nUnknown=r.unknown.length,this.#e=g(()=>c.oCrit&&c.eCrit?this.getOutcomes(c):null)}getOutcomes(e){const r=this.d.apply(F=>F/e.f0*e.Nf).v,s=new Array(this.nrows),l=new Array(this.nrows),o={regular:0,extreme:0,outlier:0,alien:0,external:0},a={in:0,out:0},[c,f]=cu(r,e.eCrit,e.oCrit,l,s,o,a,this.ind.members),[u,d,h,v,m,b,_,p,w,T]=ga(r,e.Nf,e.eCrit,e.oCrit,l,s,o,a,this.ind.strangers);this.nUnknown>0&&ga(r,e.Nf,e.eCrit,e.oCrit,l,s,o,a,this.ind.unknown);const y=c>0?c/(c+f):0,S=u>0?u/(u+d):0,L=1-h,N=Math.sqrt(y*S),P=c>0&&u>0?(c+u)/(c+u+d+f):0,M={sensitivity:y,specificity:S,selectivity:L,efficiency:N,accuracy:P};return{Nf:e.Nf,f:r,decs:s,rols:l,decsNum:a,rolsNum:o,TP:c,FN:f,TN:u,FP:d,beta:h,s:v,f0:m,hz:b,Mz:_,Sz:p,k:w,m:T,stat:M}}toJSON(){return null}static fromJSON(e){return new tl(...e)}}class rn{#e;get alpha(){return t(this.#e)}set alpha(e){R(this.#e,e,!0)}#n;get gamma(){return t(this.#n)}set gamma(e){R(this.#n,e,!0)}#t;get limType(){return t(this.#t)}set limType(e){R(this.#t,e,!0)}#s;get Nf(){return t(this.#s)}set Nf(e){R(this.#s,e)}#a;get f0(){return t(this.#a)}set f0(e){R(this.#a,e)}#l;get eConfLim(){return t(this.#l)}set eConfLim(e){R(this.#l,e)}#r;get oConfLim(){return t(this.#r)}set oConfLim(e){R(this.#r,e)}#o;get eCrit(){return t(this.#o)}set eCrit(e){R(this.#o,e)}#i;get oCrit(){return t(this.#i)}set oCrit(e){R(this.#i,e)}constructor(e,r,s,l,o,a,c,f,u,d,h,v,m,b,_,p="nimca-model"){this.mX=r,this.sX=s,this.nrows=l,this.ncols=o,this.className=e,this.Nfc=a,this.Nfr=c,this.f0c=f,this.f0r=u,this.hash=d,this.class=["nimcamodel"],this.fileName=p,this.center=b,this.scale=_,this.#e=te(Me(h)),this.#n=te(Me(v)),this.#t=te(Me(m)),this.#s=g(()=>this.limType==="classic"?this.Nfc:this.Nfr),this.#a=g(()=>this.limType==="classic"?this.f0c:this.f0r),this.#l=g(()=>1-Number.parseFloat(this.alpha)/100),this.#r=g(()=>Math.pow(1-this.gamma/100,1/l)),this.#o=g(()=>tn(this.eConfLim,this.Nf)),this.#i=g(()=>tn(this.oConfLim,this.Nf))}predict(e){if(!e.values||!Ft(e.values))throw new Error("nimca.predict: 'dataset' does not contain values as Matrix object.");if(e.values.ncols!=this.ncols)throw new Error("nimca.predict: 'dataset' values have wrong number of columns (expect: "+this.ncols+").");const r=rn.getDistance(e.values,this.mX,this.sX),s={members:[],strangers:[],unknown:[]};if(e.classes&&e.classes.length===e.values.nrows)for(let l=0;l<e.classes.length;l++)e.classes[l]===this.className?s.members.push(l):s.strangers.push(l);else s.unknown=Pr(0,e.values.nrows-1);return new tl(r,s,e.objlabels,e.objindices,e.classes,e.classNames,this)}asJSON(){return{__type:"NIMCA",class:this.class,fileName:this.fileName,mX:this.mX,sX:this.sX,nrows:this.nrows,ncols:this.ncols,className:this.className,Nfc:this.Nfc,Nfr:this.Nfr,f0c:this.f0c,f0r:this.f0r,hash:this.hash,center:this.center,scale:this.scale,alpha:this.alpha,gamma:this.gamma,limType:this.limType}}static fit(e,r,s,l={alpha:5,gamma:1,limType:"classic"}){if(!e.values)throw new Error("nimca.fit: parameter 'calset' does not contain values as Matrix object.");if(!e.classNames||e.classNames.length!=1)throw new Error("nimca.fit: parameter 'calset' should contain class labels for a target class only.");let o=e.values;const a=e.classNames[0];if(!Ft(o))throw new Error("nimca.fit: X must be a matrix.");const c=r?o.apply(sr,2):Ee.zeros(o.ncols),f=s?o.apply(as,2):Ee.ones(o.ncols),u=rn.getDistance(o,c,f),d=sr(u),h=Fn(u);let v=Math.round(2*d*d/h);v<1&&(v=1),v>250&&(v=250);const m=Yc(u),b=Dc(u),_=b/m;let p;_>2.685592117?p=1:_<.194565995?p=100:p=Math.round(Math.exp(Math.pow(1.380948*Math.log(2.68631/_),1.185785)));const w=.5*p*(m/tn(.5,p)+b/(tn(.75,p)-tn(.25,p)));return new rn(a,c,f,o.nrows,o.ncols,v,p,d,w,rl(),l.alpha,l.gamma,l.limType,r,s)}static fromJSON(e){const{__type:r,mX:s,sX:l,nrows:o,ncols:a,className:c,Nfc:f,Nfr:u,f0c:d,f0r:h,hash:v,alpha:m,gamma:b,limType:_,fileName:p,center:w,scale:T}=e;return new rn(c,s,l,o,a,f,u,d,h,v,m,b,_,w,T,p)}static getDistance(e,r,s){const l=iu(e,r,s),o=l.nrows,a=l.ncols,c=Ee.zeros(o);for(let f=0;f<a;f++){const u=l.getcolref(f+1);for(let d=0;d<o;d++)c.v[d]+=u[d]**2}return c}}function Pr(n,e,r=1){const s=Math.round((e-n+1)/r),l=Array(s);for(let o=0;o<s;o++)l[o]=n+o*r;return l}function uu(n,e){let r,s,l,o=[];if(e.length>0){const a=n.values.nrows,c=n.objindices,f=a-e.length;r=Array(f),s=Array(f),l=Array(f);let u=0;for(let d=0;d<a;d++)e.includes(d)||(r[u]=c[d],s[u]=n.classes[d],l[u]=n.objlabels[d],(o.length===0||!o.includes(s[u]))&&o.push(s[u]),u=u+1)}else r=n.objindices,l=n.objlabels,s=n.classes,o=n.classNames;return[r,l,s,o]}function rl(){const n=new Date;return`${n.getFullYear()}${(n.getMonth()+1).toString().padStart(2,"0")}${n.getDate().toString().padStart(2,"0")}${n.getHours().toString().padStart(2,"0")}${n.getMinutes().toString().padStart(2,"0")}${n.getSeconds().toString().padStart(2,"0")}${n.getMilliseconds().toString().padStart(3,"0")}`}function nl(n,e,r,s,l=!1){const[o,a]=uu(r,s),c=l&&e.prep&&e.prep.ml&&e.prep.ml.length>0?el(n,r.values,r.nresp,e.prep,!1,!0):r.values,f=nu(n,e,c,r.nresp,s);return f.hash=rl(),f.objindices=o,f.objlabels=a,f.varlabels=e.varlabels,r.nresp>0?f.Yref=s&&s.length>0?r.values.subset(o.map(u=>u+1),We.seq(1,r.nresp)):r.values.subset(null,We.seq(1,r.nresp)):f.Yref=null,f}function fu(n,e="."){return Array.isArray(n)&&n.length>0?e==="."?n.map(r=>Number.parseFloat(r.trim())):n.map(r=>Number.parseFloat(r.trim().replace(e,"."))):e==="."?Number.parseFloat(n.trim()):Number.parseFloat(n.trim().replace(e,"."))}function On(n){return n.some(e=>Number.isNaN(e))}function nn(n){return n.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function pa(n){let e=n.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(r=>r.trim().length>1)}function du(n,e,r,s,l,o,a,c=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const f=e===";"?",":".";let u=pa(n);if(u.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");u=u.filter(A=>A.replaceAll(e,"").trim().length>0);const d=u[0].split(e);if(d.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,v;const m=r!=="no";(m||m===void 0&&On(firstRow))&&(v=d,h=1);const b=u.length-h;if(b<1)throw new Error("Data file should contain at least 1 row with values.");c===-1&&(c=b);let _,p,w,T=Array(b);s?(_=m?nn(v[0]):"",w=Array(b),p=1):(_="",w=[],p=0);let y,S=[],L;l?(y=m?nn(v[p]):"",L=Array(b),p=p+1):(y="",L=[]);const N=d.length-p;if(N<1)throw new Error("Data file should contain at least 1 column with values.");const P=ke.zeros(N,b);for(let A=h;A<b+h;A++){const O=A-h;T[O]=O;let $=u[A].split(e);if(s&&(w[O]=$[0],$.shift()),l){const G=$[0];L[O]=G,$.shift(),(S.length===0||S.indexOf(G)<0)&&S.push(G)}const I=f==="."?$.map((G,J)=>Number.parseFloat(G.trim())):$.map((G,J)=>Number.parseFloat(G.trim().replace(f,".")));if(I.some(G=>Number.isNaN(G)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(I.length!=N)throw new Error("Wrong number of values in row #"+A);P.v.set(new Float64Array(I),(A-h)*N)}if(!s||w.length!==b){w=Array(b);for(let A=0;A<b;A++)w[A]="O"+(A+1)}w=w.map(A=>nn(A)),L=L.map(A=>nn(A)),S=S.map(A=>nn(A));let M,F=Array(N),C=Array(N);if(v&&v.length===N+p){M=v.map(A=>nn(A)).slice(p);for(let A=0;A<N;A++)F[A]=A>=c?A-c:A,C[A]=A>=c?A-c+1:A+1}else{M=Array(N);for(let A=0;A<N;A++)F[A]=A>=c?A-c:A,M[A]=A>=c?"V"+(A-c+1):"Y"+(A+1),C[A]=A>=c?A-c+1:A+1}let k;if(r==="values"){if(k=f==="."?M.map((A,O)=>O<c?O:Number.parseFloat(A.trim())):M.map((A,O)=>O<c?O:Number.parseFloat(A.trim().replace(f,"."))),k.some(A=>Number.isNaN(A)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else k=C;Array.isArray(k)||(k=[]),o||(o=""),a||(a=""),o=k.length>0&&o.length>0?o:"Variables",a=k.length>0&&a.length>0?a:"";const j=o+(a.length>0?", "+a:""),B=k[1]<k[0];return{values:P.t(),nresp:c,header:r,hasLabels:s,hasClassNames:l,labelsVarname:_,classLabelsVarname:y,objlabels:w,objindices:T,varlabels:M,varvalues:k,varindices:F,varrev:B,classes:L,classNames:S,sep:e,dec:f,varvaluesName:o,varvaluesUnits:a,varAxisTitle:j}}function vu(n){if(On(n[0].slice(2)))return!0;const e=n[0].length,r=[];for(let s=2;s<e;s++){let l=[];for(let u=1;u<n.length;u++)l.push(n[u][s]);const o=n[0][s],a=sr(l),c=as(l),f=Math.abs((o-a)/c);r.push(f)}return r.every(s=>s>5)}function hu(n){const r=n[0].split(","),s=n[1].split(","),l=r.length,o=s.length,a=";",c=n[0].split(a),f=n[1].split(a),u=c.length,d=f.length;let h,v;if(l>1&&o>1&&l===o&&l>u)v=",",h=l;else if(u>1&&d>1&&u===d)v=a,h=u;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[v,v===","?".":",",h]}function mu(n,e=0){const r=pa(n),s=r.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,o,a]=hu(r),c=Math.min(a,5),f=Math.min(s,5);let u=r[0].split(l).length,d=r.slice(0,f).map(F=>F.split(l).slice(0,c));d=d.map(F=>F.map(C=>nn(C)));const h=d.map(F=>fu(F.slice(),o));for(let F=1;F<f;F++)if(On(h[F].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const v=vu(h);let m=0;const b=v?1:0,_=b+1,p=d[b][0],w=d[_][0],T=h[b][0],y=h[_][0],S=h[b][1],L=h[_][1];let N=!1,P=!1;if(Number.isNaN(T)&&Number.isNaN(y)&&p!==w?(N=!0,m=m+1):Number.isNaN(S)&&Number.isNaN(L)&&p!==w&&(N=!0,P=!0,m=m+2),!P){const F=N?1:0,C=h[b][F],k=h[_][F];P=On([C,k]),m=m+P}let M="no";if(v){m>0?d[0].slice(m+e):d[e];const F=m>0?h[0].slice(m+e):h[e];M=On(F)?"labels":"values"}return[l,N,P,M,u]}function gu(n){const e=n.values.t(),r=n.sep,s=n.dec;let l=null;n.header!=="no"&&(l=n.header==="values"?n.nresp&&n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp)):n.varvalues.slice():n.varlabels.slice()),l&&n.hasClassNames&&(l=[n.classLabelsVarname,...l]),l&&n.hasLabels&&(l=[n.labelsVarname,...l]);const o=n.classes&&n.classes.length===e.ncols,a=n.objlabels&&n.objlabels.length===e.ncols;let c=l?l.join(r):"";for(let f=0;f<e.ncols;f++){let u=e.getcolref(f+1).join(r);s!=="."&&(u=u.replace(".",s)),o&&(u=n.classes[f]+n.sep+u),a&&(u=n.objlabels[f]+n.sep+u),c=c+`
`+u}return c=c+`
`,s!=="."&&(c=c.replace(/\./g,s)),c}function pu(n,e){const r=gu(n),s=new Blob([r],{type:"text/csv"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download",`${e}.csv`),o.click()}function Vn(n,e){return Ft(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:ze(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e instanceof rn?e.asJSON():e}function sl(n,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return $c(e.v,e.nrows,e.ncols);if(e.__type==="vector")return He(e.v);if(e.__type==="NIMCA")return rn.fromJSON(e);if(e.__type==="NIMCARes")return null;const r=globalThis[e.__type];if(typeof r=="function")return new r(e.data)}return e}function ll(n){const e=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),l=String(n.getHours()).padStart(2,"0"),o=String(n.getMinutes()).padStart(2,"0"),a=String(n.getSeconds()).padStart(2,"0");return`${e}${r}${s}${l}${o}${a}`}function ba(n){return Array.from({length:8},(e,r)=>n>>7-r&1).reverse()}function cs(n,e,r){let s="";for(let l=0;l<e;l++){const o=n.getUint8(r++);if(o===0)break;s+=String.fromCharCode(o)}return s}function bu(n){const e=["A.U.","cm^–1","µm","nm","s","min","Hz","KHz","MHz","M/z","ppm","days","years","cm^–1","eV","","","","","F","C","K","","msec","µsec","nsec","GHz","cm","m","mm","h",""],r=["Arbitrary","Wavenumber","Micrometers","Nanometers","Seconds","Minutes","Hertz","Kilohertz","Megahertz","Mass","Parts per million","Days","Years","Raman shift","Electron Volts","X,Y,Z text labels in fcatxt (old 4Dh version only)","Diode Number","Channel","Degrees","Temperature","Temperature","Temperature","Data Points","Milliseconds","Microseconds","Nanoseconds","Gigahertz","Centimeters","Meters","Millimeters","Hours","Double interferogram (no display labels)"],s=["Arbitrary Intensity","Interferogram","Absorbance","Kubelka-Munk","Counts","Volts","Degrees","Milliamps","Millimeters","Millivolts","Log (1/R)","Percent","Intensity","Relative Intensity","Energy",null,"Decibel",null,null,"Temperature (F)","Temperature (C)","Temperature (K)","Index of Refraction [N]","Extinction Coeff. [K]","Real","Imaginary","Complex"],l=["Transmission","Reflectance","Arbitrary or Single Beam with Valley Peaks","Emission"];let o=0;const a=n.getUint8(o);o+=1;const c=n.getUint8(o);if(o+=1,c===77)throw new Error("SPC file has old format which is not supported.");const f=c===75,u=n.getUint8(o);o+=1;const d=n.getInt8(o);o+=1;const h=n.getUint32(o,f);o+=4;const v=n.getFloat64(o,f);o+=8;const m=n.getFloat64(o,f);o+=8;const b=n.getUint32(o,f);o+=4;const _=n.getUint8(o);o+=1;const p=n.getUint8(o);o+=1;const w=n.getUint8(o);o+=1;const T=n.getUint8(o);o+=1;const y=n.getUint32(o,f);o+=4;const S=cs(n,9,o);o+=9;const L=cs(n,9,o);o+=9;const N=n.getUint16(o,f);o+=2;const P=Array.from({length:8},()=>{const se=n.getFloat32(o,f);return o+=4,se}),M=cs(n,130,o);o+=130;const F=cs(n,30,o);o+=30;const C=n.getUint32(o,f);o+=4;const[k,j,B,Y,A,O,$,I]=ba(a),G=_===255?r[31]:r[_],J=_===255?e[31]:e[_],K=p<=26?s[p]:p>=128&&p<=131?l[p]:"Unknown";return{ftflgsv:a,ftflgs:{TSPREC:k,TCGRAM:j,TMULTI:B,TRANDM:Y,TORDRD:A,TALABS:O,TXYXYS:$,TXVALS:I},fexper:u,fexp:d,fnpts:h,ffirst:v,flast:m,fnsub:b,fxtype:_,fytype:p,fztype:w,fpost:T,fdate:y,fres:S,fsource:L,fpeakpt:N,fspare:P,fcmnt:M,fcatxt:F,flogoff:C,xaxisName:G,xaxisUnit:J,yaxisName:K}}function _u(n,e){const r=ba(n.getUint8(e));e+=1;const s=n.getInt8(e);e+=1;const l=n.getUint16(e,!0);e+=2;const o=n.getFloat32(e,!0);e+=4;const a=n.getFloat32(e,!0);e+=4;const c=n.getFloat32(e,!0);e+=4;const f=n.getInt32(e,!0);e+=4;const u=n.getInt32(e,!0);e+=4;const d=n.getFloat32(e,!0);return e+=4,{flags:r,exp:s,index:l,time:o,next:a,noise:c,nPoints:f,nScans:u,wAxis:d}}async function _a(n){if(n.name.slice(-3).toLowerCase()!=="spc")throw new Error(`One of the selected files is not SPC (${n.name}).`);const r=n.name.slice(0,-4),s=await n.arrayBuffer(),l=new DataView(s);let o=0;const a=bu(l);o+=512;const c=a.fnpts;if(c<2)throw new Error(`Error reading SPC file (${n.name}).`);let f=new Array(c);if(a.ftflgs.TXVALS)for(let h=0;h<c;h++){const v=l.getFloat32(o,!0);o=o+4,f[h]=v}else{(a.flast-a.ffirst)/(c-1);for(let h=0;h<c;h++)f[h]=a.ffirst+h*a.flast}const u=new Float64Array(c*a.fnsub);for(let h=0;h<a.fnsub;h++){_u(l,o),o=o+32;for(let v=0;v<c;v++){const m=l.getFloat32(o,!0);o=o+4,u[h*c+v]=m}}const d=[];return a.fnsub>1?Pr(1,a.fnsub).forEach(v=>{d.push(r+"_"+v)}):d.push(r),{hdr:a,xvalues:f,yvalues:u,objlabels:d}}async function wu(n){if(!(n instanceof FileList||Array.isArray(n)))throw new Error("readSPCFiles: expected FileList or array of files.");const e=n.length,r=[];let s=[],l=[];const o=await _a(n[0]),a=o.xvalues.length;if(r.push(o.yvalues),s=s.concat(o.objlabels),l.push(o.hdr.fnsub),e>1)for(let b=1;b<e;b++){const _=await _a(n[b]);if(_.xvalues.length!==a)throw new Error("Number of spectral values in SPC files is different.");r.push(_.yvalues),s=s.concat(_.objlabels),l.push(_.hdr.fnsub)}const c=l.reduce((b,_)=>b+_,0),f=new Float64Array(c*a);let u=0;for(let b=0;b<r.length;b++)f.set(r[b].slice(),u),u+=l[b]*a;const d=new ke(f,a,c),h=Pr(0,a-1),v=Pr(0,c-1),m=o.xvalues.map(b=>b.toFixed(1));return{values:d.t(),nresp:0,header:"values",hasLabels:!0,hasClassNames:!1,labelsVarname:"",classLabelsVarname:"",classes:[],classNames:[],objlabels:s,objindices:v,varlabels:m,varvalues:o.xvalues,varindices:h,varev:o.xvalues[1]<o.xvalues[0],sep:",",dec:".",varvaluesName:o.hdr.xaxisName,varvaluesUnits:o.hdr.xaxisUnit,varAxisTitle:"",fileName:`${e} SPC files`}}function us(n,e,r){if(!Array.isArray(n))return!1;if(n.length===0)return!0;for(let s=0;s<n.length;s++){const l=n[s];if(l<e||l>r)return!1}return!0}var yu=H('<button tabindex="0" class="button svelte-1to1iow"> </button>');function tt(n,e){let r=z(e,"text",3,"button");var s=yu();s.__click=function(...o){e.onclick?.apply(this,o)};var l=W(s);le(()=>Te(l,r())),E(n,s)}st(["click"]);var xu=H('<button tabindex="0"></button>');function sn(n,e){z(e,"disable",3,!1);var r=xu();r.__click=function(...s){e.onclick?.apply(this,s)},le(()=>{V(r,"title",e.title),V(r,"aria-label",e.title),V(r,"alt",e.title),ct(r,1,`button ${e.className??""}`,"svelte-qbt64")}),E(n,r)}st(["click"]);function ar(n,e){let r=z(e,"title",3,"Reset");sn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-cancel"})}function ku(n,e){let r=z(e,"title",3,"Undo");sn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-undo"})}function Eu(n,e){let r=z(e,"title",3,"Download");sn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-download"})}function Su(n,e){let r=z(e,"title",3,"Add");sn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-add"})}function wa(n,e){let r=z(e,"title",3,"Settings");sn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-settings"})}function Cu(n,e){let r=z(e,"title",3,"Move up");sn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-up"})}function Au(n,e){let r=z(e,"title",3,"Move down");sn(n,{get title(){return r()},get onclick(){return e.onclick},className:"button-down"})}function ft(n){const e={};for(const r of Object.keys(n))e[r]=n[r].default;return e}var Tu=H('<span class="label svelte-1bhp5bp"> </span>'),Pu=H("<div><!> <!></div>");function ie(n,e){let r=z(e,"label",3,null),s=z(e,"name",3,""),l=z(e,"status",3,""),o=z(e,"colors",3,""),a=z(e,"labelWidth",3,12);var c=Pu(),f=W(c);{var u=h=>{var v=Tu(),m=W(v);le(()=>{ot(v,`flex-basis:${a()??""}ch;`),Te(m,r())}),E(h,v)};D(f,h=>{r()&&h(u)})}var d=q(f,2);Cr(d,()=>e.children??yt),le(()=>{ct(c,1,`control-element ${s()??""} ${l()??""}`,"svelte-1bhp5bp"),ot(c,o())}),E(n,c)}var Nu=H('<div role="slider" class="range-slider-container svelte-7wycr" tabindex="0"><div><span> </span></div></div>');function ln(n,e){be(e,!0);let r=z(e,"min",7,0),s=z(e,"max",3,100),l=z(e,"value",31,()=>Me(r())),o=z(e,"decNum",3,1),a=z(e,"step",19,()=>+((s()-r())/100).toFixed(4)),c=z(e,"onchange",3,null);we(()=>{l()<r()&&(l(r()),c()&&c()(l())),l()>s()&&(l(s()),c()&&c()(l())),r()>s()&&r(s())});let f=te(void 0),u=te(void 0),d=te(!1);const h=C=>{const k=r()+C*(s()-r());return+(Math.round(k/a())*a()).toFixed(4)},v=C=>{const k=t(f).getBoundingClientRect(),j=t(u).getBoundingClientRect(),B=k.x,Y=j.x+j.width;return(C.clientX-B)/(Y-B)},m=C=>{const k=v(C);k<0||k>1||R(d,k*100>t(y)-5&&k*100<t(y)+5,!0)},b=C=>{R(d,!1)},_=C=>{R(d,!1);const k=v(C);k<0||k>1||(l(h(k)),c()&&c()(l()))},p=C=>{let k=l()+a()*C.deltaY*.5;k<r()&&(k=r()),k>s()&&(k=s()),l(+(Math.round(k/a())*a()).toFixed(4)),C.preventDefault(),c()&&c()(l())},w=C=>{if(!t(d))return;const k=v(C);k<0||k>1||(l(h(k)),c()&&c()(l()))},T=C=>{if(C.key==="ArrowLeft"){l(l()-a()<r()?r():l()-a()),c()&&c()(l());return}if(C.key==="ArrowRight"){l(l()+a()>s()?s():l()+a()),c()&&c()(l());return}},y=g(()=>r()===s()?100:(l()-r())/(s()-r())*100);var S=Nu();S.__keydown=T,S.__mousemove=w,S.__mousedown=m,S.__mouseup=_,S.__touchmove=w,S.__touchstart=m,S.__touchend=_;var L=W(S);let N;var P=W(L);let M;var F=W(P);$r(L,C=>R(f,C),()=>t(f)),$r(S,C=>R(u,C),()=>t(u)),le(C=>{V(S,"aria-valuenow",l()),V(S,"aria-valuemin",r()),V(S,"aria-valuemax",s()),N=ct(L,1,"range-slider svelte-7wycr",null,N,{"range-slider_right":t(y)<50}),ot(L,`width:${t(y)??""}%`),M=ct(P,1,"range-value svelte-7wycr",null,M,{"range-value_right":t(y)<50}),Te(F,C)},[()=>l().toFixed(o())]),Jr("mousewheel",S,p),Jr("mouseleave",S,b),Jr("touchcancel",S,b),E(n,S),_e()}st(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var Lu=H('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-1lbks0y" tabindex="0"><div><span> </span></div></div>');function zt(n,e){be(e,!0);let r=z(e,"min",3,0),s=z(e,"max",3,10),l=z(e,"value",31,()=>Me(r())),o=z(e,"step",3,1);l()<r()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(r())),l()>s()&&(console.log('RangeDiscrete: the "value" is outside of the provided range.'),l(s())),r()>s()&&console.error("The min and max values must be distinct.");let a=te(void 0),c=te(void 0),f=te(!1);const u=g(()=>r()===s()?0:(l()-r())/(s()-r()+o())),d=g(()=>o()/(s()-r()+o())),h=g(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${t(d)*100}%, var(--bg-color-light2, #e8e8e8) ${t(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*t(d)}%)`:"background: #f0f0f0"),v=C=>{if(C<0||C>1)return l();let k=l();return Math.round(t(d)/C),C<t(u)&&t(u)>0&&(k=l()-o()*Math.ceil((t(u)-C)/t(d))),C>t(u)+t(d)&&t(u)+t(d)<1&&(k=l()+o()*Math.ceil((C-(t(u)+t(d)))/t(d))),k<r()&&(k=r()),k>s()&&(k=s()),k},m=C=>{const k=t(c).getBoundingClientRect(),j=k.x,B=k.x+k.width;return(C.clientX-j)/(B-j)},b=C=>{const k=m(C);k<0||k>1||R(f,k>t(u)&&k<t(d)+t(u),!0)},_=C=>{R(f,!1)},p=C=>{R(f,!1);const k=m(C);if(k<0||k>1)return;const j=v(k);l()!==j&&l(j)},w=C=>{let k=l()+Math.round(C.deltaY*.5)*o();k<r()&&(k=r()),k>s()&&(k=s()),l(k),C.preventDefault()},T=C=>{if(!t(f))return;const k=m(C);if(k<0||k>1)return;const j=v(k);j!=l()&&l(j)},y=C=>{if(C.key==="ArrowLeft"){l(l()-o()<r()?r():l()-o());return}if(C.key==="ArrowRight"){l(l()+o()>s()?s():l()+o());return}};var S=Lu();S.__keydown=y,S.__mousemove=T,S.__mousedown=b,S.__mouseup=p,S.__touchmove=T,S.__touchstart=b,S.__touchend=p;var L=W(S);let N;var P=W(L);let M;var F=W(P);$r(L,C=>R(a,C),()=>t(a)),$r(S,C=>R(c,C),()=>t(c)),le(C=>{V(S,"aria-valuenow",l()),V(S,"aria-valuemin",r()),V(S,"aria-valuemax",s()),ot(S,t(h)),N=ct(L,1,"range-slider svelte-1lbks0y",null,N,{"range-slider_left":t(d)<.1&&t(u)<.5,"range-slider_right":t(d)<.1&&t(u)>=.5}),ot(L,`width: max(2px, ${t(d)*100}%);left:${t(u)*100}%;`),M=ct(P,1,"range-value svelte-1lbks0y",null,M,{"range-value_right":t(d)<.1&&t(u)>.5,"range-value_left":t(d)<.1&&t(u)<=.5}),Te(F,C)},[()=>l().toFixed(0)]),Jr("mousewheel",S,w),Jr("mouseleave",S,_),Jr("touchcancel",S,_),E(n,S),_e()}st(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);var ju=H('<button tabindex="-1"><!></button>'),Mu=H('<div role="radiogroup" tabindex="0"></div> <input class="svelte-bifhtc"/>',1);function Ge(n,e){be(e,!0);let r=z(e,"value",31,()=>Me(e.options[0])),s=z(e,"className",3,"");const l=f=>{if(f.key==="ArrowLeft"){const u=e.options.findIndex(d=>d===r());u>0&&r(e.options[u-1]);return}if(f.key==="ArrowRight"){const u=e.options.findIndex(d=>d===r());u<e.options.length-1&&r(e.options[u+1]);return}};var o=Mu(),a=U(o);a.__keydown=l,Be(a,20,()=>e.options,f=>f,(f,u)=>{var d=ju();d.__click=()=>r(u);let h;var v=W(d);pt(v,()=>u),le(m=>h=ct(d,1,`option option_${m??""}`,"svelte-bifhtc",h,{selected:u==r()}),[()=>u.toString().replace(".","_")]),E(f,d)});var c=q(a,2);le(()=>ct(a,1,`selector ${s()??""}`,"svelte-bifhtc")),Vs(c,r),E(n,o),_e()}st(["keydown","click"]);function Wt(n,e){be(e,!0);let r=z(e,"options",19,()=>["no","yes"]),s=z(e,"value",15,!1),l=te(!0);const o=g(()=>r().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):r());we(()=>R(l,s()?r()[1]:r()[0],!0)),we(()=>s(t(l)===r()[1]));var a=he(),c=U(a);{var f=u=>{Ge(u,{get options(){return t(o)},get value(){return t(l)},set value(d){R(l,d,!0)}})};D(c,u=>{t(o)&&u(f)})}E(n,a),_e()}var qu=H('<input type="file" multiple class="svelte-xoa0sf"/>'),Ru=H('<input type="file" class="svelte-xoa0sf"/>'),Iu=H('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function fs(n,e){be(e,!0);let r=z(e,"file",15),s=z(e,"message",3,"Select CSV file with dataset"),l=z(e,"acceptType",3,".csv"),o=z(e,"multiple",3,!1),a=te(void 0);function c(y){t(a)&&t(a).files.length>0?r(t(a).files.length===1?t(a).files[0]:t(a).files):r(null)}function f(y){(y.type==="click"||y.type==="keydown"&&(y.code==="Space"||y.code==="Enter"))&&t(a).click()}function u(y){t(a).value=null,r(null)}var d=Iu(),h=U(d);h.__keydown=f,h.__click=f;let v;var m=W(h),b=q(m);{var _=y=>{var S=qu();S.__change=c,$r(S,L=>R(a,L),()=>t(a)),le(()=>V(S,"accept",l())),E(y,S)},p=y=>{var S=Ru();S.__change=c,$r(S,L=>R(a,L),()=>t(a)),le(()=>V(S,"accept",l())),E(y,S)};D(b,y=>{o()?y(_):y(p,!1)})}var w=q(h,2);{var T=y=>{ar(y,{onclick:u})};D(w,y=>{r()&&y(T)})}le(()=>{v=ct(h,1,"file-selector svelte-xoa0sf",null,v,{selected:r()}),Te(m,`${(r()?r().length>1?`Selected ${r().length} files`:r().name:s())??""} `)}),E(n,d),_e()}st(["keydown","click","change"]);var Fu=H('<div class="error-message svelte-11e14eb"> </div>'),zu=H('<div><input type="text" class="svelte-11e14eb"/> <!></div>');function ya(n,e){be(e,!0);let r=z(e,"value",15,""),s=z(e,"className",3,""),l=z(e,"placeholder",3,""),o=z(e,"maxLength",3,25),a=z(e,"validator",3,null),c=te("");function f(){a()&&R(c,a()(r()),!0)}var u=zu();let d;var h=W(u);h.__input=f;var v=q(h,2);{var m=b=>{var _=Fu(),p=W(_);le(()=>Te(p,t(c))),E(b,_)};D(v,b=>{t(c)&&t(c).length>0&&b(m)})}le(()=>{d=ct(u,1,`textinput ${s()??""}`,"svelte-11e14eb",d,{error:t(c)&&t(c).length>0}),V(h,"placeholder",l()),V(h,"maxlength",o())}),Vs(h,r),E(n,u),_e()}st(["input"]);var Ou=H('<div class="spinner svelte-wlgijz"></div>');function ol(n){var e=Ou();E(n,e)}var Vu=H('<button tabindex="-1"><!></button>'),Bu=H('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-142p4sy"></div> <input class="svelte-142p4sy"/>',1);function al(n,e){be(e,!0);let r=z(e,"options",19,()=>["p","l","b","h","qq"]),s=z(e,"value",31,()=>Me(r()[0]));const l=h=>{if(h.key==="ArrowLeft"){const v=r().findIndex(m=>m===s());v>0&&s(r()[v-1]);return}if(h.key==="ArrowRight"){const v=r().findIndex(m=>m===s());v<r().length-1&&s(r()[v+1]);return}},o='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var f=Bu(),u=U(f);u.__keydown=l,Be(u,20,r,h=>h,(h,v)=>{var m=Vu();m.__click=()=>s(v);let b;var _=W(m);pt(_,()=>o+a[v]+"</svg>"),le(()=>{b=ct(m,1,"option svelte-142p4sy",null,b,{selected:v==s()}),V(m,"title",c[v])}),E(h,m)});var d=q(u,2);Vs(d,s),E(n,f),_e()}st(["keydown","click"]),st(["keydown","click"]);var Yu=H("<h2> </h2>"),Du=H("<!> <!>",1),Wu=H('<div class="widget"><!></div>');function Hu(n,e){be(e,!0);let r=z(e,"title",3,""),s=z(e,"value",15),l=z(e,"labelWidth",3,13);function o(u){const d={};for(const h of Object.keys(u))d[h]=u[h].default;return d}we(()=>{!s()&&e.options&&s(o(e.options))});var a=Wu(),c=W(a);{var f=u=>{var d=Du(),h=U(d);{var v=b=>{ie(b,{children:(_,p)=>{var w=Yu(),T=W(w);le(()=>Te(T,r())),E(_,w)},$$slots:{default:!0}})};D(h,b=>{r()&&b(v)})}var m=q(h,2);Be(m,17,()=>Object.keys(e.options),Ye,(b,_)=>{const p=g(()=>e.options[t(_)]);var w=he(),T=U(w);{var y=S=>{ie(S,{get name(){return t(p).name},get label(){return t(p).label},get labelWidth(){return l()},children:(L,N)=>{var P=he(),M=U(P);Rn(M,()=>t(p).el,(F,C)=>{C(F,Ir(()=>t(p).props,{get value(){return s()[t(_)]},set value(k){s(s()[t(_)]=k,!0)}}))}),E(L,P)},$$slots:{default:!0}})};D(T,S=>{t(p).hidden||S(y)})}E(b,w)}),E(u,d)};D(c,u=>{s()&&u(f)})}E(n,a),_e()}function ds(n,e,r,s){let l=n.outliers,o=n.exclvars;(!l||!Array.isArray(l))&&(l=[]);const a=e.sep,c=e.values.nrows,f=l.length,u=c-f,d=n.nresp,h=n.nresp_model,v=n.ncomp,m=Array(v).fill(""),b=Array(v).fill(0).map((N,P)=>"LV"+(P+1));function _(N,P){const M=e.objlabels;w+=`
`,w+=[N+": ",...m].join(a)+a+`
`,w+=["object",...b].join(a)+a+`
`;const F=n.v.subarray(P,P+v*u);let C=0;for(let k=0;k<c;k++){if(f>0&&l.includes(k)){w+=[M[k],...Array(v).fill("-")].join(a)+a+`
`;continue}const j=Array(v);for(let B=0;B<v;B++)j[B]=F[B*u+C];w+=[M[k],...j].join(a)+a+`
`,C=C+1}w+=`
`}function p(N){const P=e.objlabels,M=3*v*u+v,F=v*u*h,C=n.v.subarray(M,M+F);let k=0;for(let j=0;j<c;j++){if(f>0&&l.includes(j)){w+=[P[j],...Array(v).fill("-")].join(a)+a+`
`;continue}const B=Array(v);for(let Y=0;Y<v;Y++)B[Y]=C[Y*(u*h)+(N-1)*u+k];w+=[P[j],...B].join(a)+a+`
`,k=k+1}w+=`
`}let w="";if(w+=["Number of LVs:",v,...m].join(a)+`
`,w+=["Optinal number of LVs:",s,...m].join(a)+`
`,w+=["Center:",n.center,...m].join(a)+`
`,w+=["Scale:",n.scale,...m].join(a)+`
`,l.length>0&&(w+=["Removed outliers:",l.length,...m].join(a)+`
`),o.length>0&&(w+=["Excluded variables:",o.length,...m].join(a)+`
`),w+=`
`,d>0){w+=["Variances:","",...m].join(a)+`
`,w+=["",...b].join(a)+a+`
`,w+=["xexpvar:",...n.stat.xexpvar].join(a)+a+`
`,w+=["xcumexpvar",...n.stat.xcumexpvar].join(a)+a+`
`,w+=["yexpvar:",...n.stat.yexpvar].join(a)+a+`
`,w+=["ycumexpvar:",...n.stat.ycumexpvar].join(a)+a+`
`,w+=`
`,w+=`
`;for(let N=1;N<=d;N++)w+=["Response variable:"+a+n.varlabels[N-1],...m].join(a)+`

`,w+=["FoMs:",...b].join(a)+a+`
`,n.stat&&(w+=["RMSE",...n.stat.rmse.getcolref(N)].join(a)+a+`
`,w+=["R2",...n.stat.r2.getcolref(N)].join(a)+a+`
`,w+=["Slope",...n.stat.slope.getcolref(N)].join(a)+a+`
`,w+=["Bias",...n.stat.bias.getcolref(N)].join(a)+a+`
`,w+=`
`),w+=["Predictions:",...b].join(a)+a+`
`,p(N)}else for(let N=1;N<=h;N++)w+=["Response variable:"+a+n.varlabels[N-1],...m].join(a)+`

`,w+=["Predictions:",...b].join(a)+a+`
`,p(N);_("X-scores",0),_("Score distances, h",v*u),_("Orthogonal distances, q",v*u*2),n.stat&&(_("Y-scores",3*v*u+v+u*v*d),_("Orthogonal distances, z",4*v*u+v+u*v*d)),e.dec!=="."&&(w=w.replace(/\./g,e.dec)),w=["Data filename:",e.fileName,...m].join(e.sep)+`
`+w;let T=["PLS results ("+r+")","https://mda.tools/pls/",...m].join(e.sep)+`

`;const y=new Blob([T+w],{type:"text/csv"}),S=window.URL.createObjectURL(y),L=document.createElement("a");L.setAttribute("href",S),L.setAttribute("download",`pls-results-${r}.csv`),L.click()}function xa(n,e,r){n.ncomp_selected=e,n.prep=r;const s=new Blob([JSON.stringify(n,Vn)],{type:"application/json"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download","pls-model.json"),o.click()}var Uu=H('<span class="item svelte-igakmm"> </span>'),Xu=H('<p class="outliers svelte-igakmm"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function il(n,e){be(e,!0);var r=he(),s=U(r);{var l=o=>{ie(o,{children:(a,c)=>{var f=Xu(),u=U(f),d=q(W(u),2);Be(d,17,()=>e.outliers,Ye,(b,_)=>{var p=Uu(),w=W(p);le(()=>Te(w,e.dataset.objlabels[t(_)])),E(b,p)});var h=q(u,2);{var v=b=>{ku(b,{get onclick(){return e.undoOutliers}})};D(h,b=>{e.outliers.length>1&&b(v)})}var m=q(h,2);ar(m,{get onclick(){return e.resetOutliers}}),E(a,f)},$$slots:{default:!0}})};D(s,o=>{e.dataset&&e.outliers&&e.outliers.length>0&&o(l)})}E(n,r),_e()}var Gu=H('<p class="exclvars svelte-12e65an"><span style="color:#a0a0a0;">Excluded</span> <span style="color:#504040;"> </span> <span style="color:#a0a0a0;">variables</span></p> <!>',1);function Ku(n,e){be(e,!0);var r=he(),s=U(r);{var l=o=>{ie(o,{children:(a,c)=>{var f=Gu(),u=U(f),d=q(W(u),2),h=W(d),v=q(u,2);ar(v,{get onclick(){return e.resetExclvars}}),le(()=>Te(h,e.exclvars.length)),E(a,f)},$$slots:{default:!0}})};D(s,o=>{e.exclvars&&e.exclvars.length>0&&o(l)})}E(n,r),_e()}const Ju={small:30,medium:40,large:50,xlarge:60},Zu={small:5,medium:8,large:12,xlarge:15},Qu={small:6,medium:10,large:14,xlarge:18},cl={small:4,medium:6,large:8,xlarge:10},$u={small:12,medium:15,large:19,xlarge:21},ul={small:11,medium:15,large:17,xlarge:19},Bn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},xn=["●","◼","▲","▼","⬥","＋","✳","✕"],ef=.8,ka=.5,tf={small:5,medium:8,large:12,xlarge:15},rf=12,dt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Ea(n){let e=Array(n);for(let r=0;r<n;r++)e[r]=r+1;return e}function Sa(n,e){return Array.isArray(n)&&n.length===e&&!n.some(r=>r===void 0)&&!n.some(r=>isNaN(r))}function Ca(n,e){if(n!=null&&(Array.isArray(n)&&(n=He(n)),!(!ze(n)||n.length<1)))return n.apply(r=>hl((r-e[1])*e[0]+e[2])).v}function lt(n,e){return Ca(n,e.coords)}function Yn(n,e){return Ca(n,e.objects)}function Aa(n,e){if(n!=null&&(Array.isArray(n)&&(n=He(n)),!(!ze(n)||n.length<1)))return n.apply(r=>(r-e[2])/e[0]+e[1]).v}function Ta(n,e){return Aa(n,e.coords)}function Pa(n,e){return Aa(n,e.objects)}function fl(n){return n===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${n.toString()}</tspan>`}function on(n){if(n===Math.round(n))return n;if(Math.abs(n)>10**6)return Math.round(n);if(Math.abs(n)<10**-6)return n;let e=n.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function dl(n){if(n===void 0)return[0,void 0];if(n.length<1)return[0,void 0];if(n.length===1)return[0,[n[0].toString()]];let e=on(Math.abs(It(Zo(n)))),r=0;if(e>=1)return e<100?[0,Array.from(n).map(o=>o.toFixed(0))]:(r=Math.ceil(on(Math.log10(e)))-2,[r,Array.from(n).map(o=>(o/Math.pow(10,r)).toFixed(0))]);let s=Math.ceil(-on(Math.log10(e)));return s<=2?[0,Array.from(n).map(l=>l.toFixed(s))]:(r=s-2,s=2,on(Math.abs(Dt(n)))<=10?[-r,Array.from(n).map(l=>(l*Math.pow(10,r)).toFixed(s))]:[-r,Array.from(n).map(l=>(l/Math.pow(10,r)).toString())])}function Et(n,e,r){return Array.isArray(n)&&(n=He(n)),ze(n)?n.length<1?(console.error(e+": vector with coordinates is empty."),null):r&&n.length!==r?(console.error(e+": vector does not have the expected length of "+r+"."),null):n:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function vl(n,e,r,s){if(!n||!e||n.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=r.coords,o=s.coords;let a="";for(let c=0;c<n.length;c++){const f=hl((n.v[c]-l[1])*l[0]+l[2]),u=hl((e.v[c]-o[1])*o[0]+o[2]);a+=f+","+u+" "}return a}function Na(n,e){return n?Array.isArray(n)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==n.length?[null,"number of tick labels and values should be the same."]:[n.map(r=>zr(r)),""]:[null,"tick labels must be provided as array."]:[null,""]}function La(n,e){if(Array.isArray(n)&&(n=He(n)),!ze(n))return[null,"tick values must be provided as an array or as a vector."];if(n.v.some(a=>isNaN(a)))return[null,"tick values must be numeric"];const r=new Set(n.v);if(n.length!==r.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],o=n.filter(a=>a>=s&a<=l);return o.length!==n.length?[null,"some of ticks values are outside axis limits."]:[o,""]}function ja(n,e,r,s,l,o){l==null&&(l=!1),o===void 0&&(o=1e-4);const a=e[0]<e[1]?e:[e[1],e[0]];if(n)return n;if(typeof a!="object"||a[0]===void 0||a[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const c=Math.abs(a[1]-a[0])*o,f=a[1]-a[0]-2*c,u=Math.floor(Math.log10(f)),d=1/Math.pow(10,u-1),h=Math.round(f*d)/d;let v=nf(h/r);l&&(Math.abs(a[1]-a[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(v<1&&(v=1),v=Math.round(v)));let m=Math.ceil((a[0]+c)/v)*v,b=Math.floor((a[1]-c)/v)*v;Math.abs(a[0]-m)<v/10&&(m=m+v),Math.abs(a[1]-b)<v/10&&(b=b-v),r=Math.ceil(on((b-m)/v))+1,n=Ee.zeros(r);for(let _=0;_<r;_++)n.v[_]=m+v*_;if(Math.abs(v)<1){const _=Math.pow(10,1+Math.round(-Math.log10(v)));n=n.apply(p=>Math.round((p+Number.EPSILON)*_)/_)}return n.filter(_=>_>=a[0]&_<=a[1])}function nf(n,e){const r=Math.floor(Math.log10(n)),s=n/Math.pow(10,r);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,r)}function hl(n){return Math.round(n*10)/10}function sf(n,e){return e<300.2||n<400.2?"small":e<400.2||n<700.2?"medium":e<650.2||n<850.2?"large":"xlarge"}function Ma(n,e){return n<400.2?"small":n<700.2?"medium":n<900.2?"large":"xlarge"}function lf(){const n=new Int32Array(256);for(let e=0;e<256;e++){let r=e;for(let s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;n[e]=r}return n}function of(n){let e=-1,r=lf();for(let s=0;s<n.length;s++)e=r[(e^n[s])&255]^e>>>8;return e^-1}function af(n,e){const r=new Uint8Array(13);e*=39.3701,r[0]=112,r[1]=72,r[2]=89,r[3]=115,r[4]=e>>>24,r[5]=e>>>16,r[6]=e>>>8,r[7]=e&255,r[8]=r[4],r[9]=r[5],r[10]=r[6],r[11]=r[7],r[12]=1;const s=of(r),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;const a=new Uint8Array(54);return a.set(n,0),a.set(o,33),a.set(r,37),a.set(l,50),a}function cf(n,e){const r=n.split(","),s=r[0],l=r[1],o=33/3*4,a=l.substring(0,o),c=l.substring(o),f=atob(a),u=new Uint8Array(f.length);for(let v=0;v<u.length;v++)u[v]=f.charCodeAt(v);const d=af(u,e),h=btoa(String.fromCharCode(...d));return[s,",",h,c].join("")}function uf(n,e,r,s,l){if(r||(r=10),s||(s=10),l||(l=300),r<1||r>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!n||!(n instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const o=r/2.54*l,a=s/2.54*l;setTimeout(()=>{const c=n.clientHeight,f=n.clientWidth;let u=Math.max(o/f,a/c),d=1;u<1&&(d=u,u=1);const h=document.createElement("canvas"),v=h.getContext("2d");h.width=f*(d<1?d:u),h.height=c*(d<1?d:u),n.setAttribute("width",f*u),n.setAttribute("height",c*u),v.fillStyle="white",v.fillRect(0,0,h.width,h.height),v.scale(u,u);const m=new XMLSerializer().serializeToString(n),b=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(b),p=new Image;p.onload=function(){d<0&&(p.width=p.width*d,p.height=p.height*d),v.drawImage(p,0,0,h.width,h.height);const w=h.toDataURL("image/png"),T=cf(w,l),y=document.createElement("a");y.href=T,y.download=`${e}.png`,y.click()},p.src=_},20)}function ff(n,e){if(!n||!(n instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const r=n.clientHeight,s=n.clientWidth;n.setAttribute("width",s+"px"),n.setAttribute("height",r+"px"),n.setAttribute("viewBox",`0 0 ${s} ${r}`);const l=new Blob([n.outerHTML],{type:"image/svg+xml"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.svg`),a.click()}function df(n,e,r,s){const l=n.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":vf(e,r,s)})]).then(()=>{n.classList.add("copied"),n.textContent="✓ done",setTimeout(()=>{n.classList.remove("copied"),n.textContent=l},500)},o=>{console.error(o),n.classList.add("error"),n.textContent="x copy",setTimeout(()=>{n.classList.remove("error"),n.textContent=l},500)}).catch(o=>console.error(o))}async function vf(n,e,r){const s=n.clientHeight,l=n.clientWidth,o=Math.max(e/l,r/s),a=document.createElement("canvas"),c=a.getContext("2d");return a.width=l*o,a.height=s*o,c.scale(o,o),n.setAttribute("width",a.width),n.setAttribute("height",a.height),await new Promise((u,d)=>{const h=new XMLSerializer().serializeToString(n),v=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,b=m.createObjectURL(v),_=new Image;_.onload=function(){c.drawImage(_,0,0,a.width,a.height),m.revokeObjectURL(b),a.toBlob(function(p){p?u(p):d(new Error("Failed to create blob"))},"image/png")},_.onerror=function(p){d(p)},_.src=b})}function ml(n,e){return n>16&&(n=16),[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]][n-1]}function hf(n,e,r,s,l){let o=l.error?null:l.ticks,a=l.error?null:l.tickLabels,c=0;const f=ja(o,n,Zu[r.x],!0,l.whole),u=f.length,d=Pa([cl[r.plot]],s)[0],h=Ee.fill(e[0],u),v=h.add(d),m=Ee.fill(e[1],u);if(a||(o?(c=0,a=o.v.map(M=>on(M).toString())):[c,a]=dl(f.v)),!a||a.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[f,h],[f,m]],_=[[He([n[0]]),He([e[0]])],[He([n[1]]),He([e[0]])]],p=[[f,v],[f,h]],w=(n[1]-n[0])*.01,T=[[null,null],[[n[1]-(c>9?1:0)*w],[h.v[u-1]]]],y=fl(c),S=a.length,L=Math.abs(n[1]>n[0]?n[1]-f.v[S-1]:n[1]-f.v[0]),N=Math.abs(n[1]-n[0]),P=Math.abs(f.v[1]-f.v[0]);if(y.length>0&&L<N*.1&&L<P*.5){const M=n[1]>n[0]?S-1:0;a[M]=" "}return{grid:b,axisLine:_,tickCoords:p,tfCoords:T,ticks:o,tickLabels:a,tickFactor:c,tfLabel:y}}function mf(n,e,r,s,l){let o=l.ticks,a=l.tickLabels,c=0;const f=ja(l.ticks,e,Qu[r.y],!0,l.whole),u=f.length,d=Pa([cl[r.plot]],s)[0],h=Ee.fill(n[0],u),v=h.add(d),m=Ee.fill(n[1],u);if(a||(o?(c=0,a=o.v.map(P=>on(P).toString())):[c,a]=dl(f.v)),a.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[h,f],[m,f]],_=[[He([n[0]]),He([e[0]])],[He([n[0]]),He([e[1]])]],p=[[h,f],[v,f]],w=[[[],[]],[[v.v[u-1]+(Math.abs(c)>9?3:2)*d],[e[1]]]],T=fl(c),y=a.length,S=Math.abs(e[1]>e[0]?e[1]-f.v[y-1]:e[1]-f.v[0]),L=Math.abs(e[1]-e[0]),N=Math.abs(f.v[1]-f.v[0]);if(T.length>0&&S<L*.1&&S<N*.5){const P=e[1]>e[0]?y-1:0;a[P]=" "}return{grid:b,axisLine:_,tickCoords:p,tfCoords:w,ticks:o,tickLabels:a,tickFactor:c,tfLabel:T}}function gf(n){if(!n.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=ze(n.breaks)?n.breaks.v:n.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!n.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(n.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(n.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const r=n.colmap;let s,l;if(n.labels?(s=n.labels,l=0):[l,s]=dl(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const o=s.length===r.length;return{colmap:r,breaks:e,labels:s,isCentered:o,labelsFactor:l,fontSize:n.fontSize,labelColor:n.labelColor}}function pf(n,e,r,s){const l=n.colmap.length,o=e*ef,a=o/l,c=r[1]+(e-o)*.5,f=tf[s.y],u=r[2]+f*ka,d=u+f*(1+ka),h=n.isCentered?a/2:0;return{start:c,top:u,height:f,width:a,dxl:h,ltop:d}}function an(n,e,r){if(!n||!e||!r||typeof r!="function")return;const s=n.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;r(l),n.stopPropagation()}}function bf(n,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(n.replace(/<(.|\n)*?>/g,"")).width}function _f(n,e){const r="Arial",s=e/8,l=e*1.5,o=Array(n.length),a=Array(n.length);let c=0,f=0,u=0;for(let h=0;h<n.length;h++){const v=bf("  "+n[h].label+"  ",e+"px "+r);u=v>u?v:u;const m=e*n[h].labelHeight+2*s;o[h]=m,a[h]=c,c=c+m,f=f+m}const d=l+2*s+u;return[a,o,l,s,f,d]}function wf(n,e,r,s,l){const[o,a,c,f,u,d]=_f(n.items,s*n.fontSize),h=n.position.includes("left")?e[0]+l:n.position.includes("right")?e[1]-d-l:(e[1]+e[0]-d)*.5,v=n.position.includes("top")?r[1]+l:n.position.includes("bottom")?r[0]-u-l:(r[1]+r[0]-u)*.5;return{lgl:h,lgt:v,lgw:d,lgh:u,ely:o,elh:a,elw:c,elp:f}}function zr(n){if(!n||n.length<1)return n;function e(o){return'<tspan font-size="0.75em" dy="-0.5em">'+o+'</tspan><tspan dy="0.4em"> </tspan>'}function r(o){return'<tspan font-size="0.75em" dy="0.5em">'+o+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<n.length;){const o=n[s];if((o==="^"||o==="_")&&s<n.length-1){const a=o==="^";if(s++,n[s]==="("){let c=s+1;for(;c<n.length&&n[c]!==")";)c++;const f=n.slice(s+1,c);l+=a?e(f):r(f),s=c+1}else if(n[s]==="-"||n[s]==="–"){const c=n.slice(s,s+2);l+=a?e(c):r(c),s=s+2}else l+=a?e(n[s]):r(n[s]),s++}else l+=o,s++}return l}var yf=Ae('<line vector-effect="non-scaling-stroke"></line>'),xf=Ae("<g></g>");function gl(n,e){be(e,!0);let r=z(e,"lineCoords",19,()=>[]),s=z(e,"lineColor",19,()=>dt.DARKGRAY),l=z(e,"lineType",3,1),o=z(e,"lineWidth",3,1),a=z(e,"className",3,"");const c=Nt("axes");let f=g(()=>lt(r()[0][0],c.tX())),u=g(()=>lt(r()[1][0],c.tX())),d=g(()=>lt(r()[0][1],c.tY())),h=g(()=>lt(r()[1][1],c.tY())),v=g(()=>`stroke:${s()};stroke-width: ${o()}px;stroke-dasharray:${Bn[c.scales().plot][l()-1]}`);var m=he(),b=U(m);{var _=p=>{var w=xf();Be(w,21,()=>t(f),Ye,(T,y,S)=>{var L=yf();le(()=>{V(L,"x1",t(f)[S]),V(L,"x2",t(u)[S]),V(L,"y1",t(d)[S]),V(L,"y2",t(h)[S]),ot(L,t(v))}),E(T,L)}),le(()=>ct(w,0,Ac(a()))),E(p,w)};D(b,p=>{t(f)&&t(d)&&t(u)&&p(_)})}E(n,m),_e()}var kf=Ae('<text text-anchor="middle"><!></text>'),Ef=Ae("<text><!></text>"),Sf=Ae("<text><!></text>"),Cf=Ae('<g class="tick-labels"><!></g>');function qa(n,e){be(e,!0);let r=z(e,"pos",3,1),s=z(e,"las",3,1),l=g(()=>["middle","middle","start","middle","end"][r()]),o=g(()=>`fill:${e.textColor};`);const a=Nt("axes");let c=g(()=>lt(e.tickCoords[1][0],a.tX())),f=g(()=>lt(e.tickCoords[1][1],a.tY())),u=g(()=>ul[a.scales().plot]),d=g(()=>[0,0,t(u),0,-t(u)][r()]),h=g(()=>[0,t(u),0,-t(u),0][r()]);var v=Cf(),m=W(v);{var b=p=>{var w=he(),T=U(w);Be(T,17,()=>t(c),Ye,(y,S,L)=>{var N=kf();V(N,"data-id",L),V(N,"dx",0);var P=W(N);pt(P,()=>e.tickLabels[L],!0),le(()=>{V(N,"x",t(c)[L]),V(N,"y",t(f)[L]),V(N,"dy",t(d)*1.25),V(N,"transform",`rotate(-90, ${t(c)[L]}, ${t(f)[L]})`)}),E(y,N)}),E(p,w)},_=p=>{var w=he(),T=U(w);{var y=L=>{var N=he(),P=U(N);Be(P,17,()=>t(c),Ye,(M,F,C)=>{var k=Ef();V(k,"data-id",C),V(k,"dy",0),V(k,"text-anchor","end");var j=W(k);pt(j,()=>e.tickLabels[C],!0),le(()=>{V(k,"x",t(c)[C]),V(k,"y",t(f)[C]),V(k,"dx",-t(h)/2),V(k,"transform",`rotate(-90, ${t(c)[C]}, ${t(f)[C]})`)}),E(M,k)}),E(L,N)},S=L=>{var N=he(),P=U(N);Be(P,17,()=>t(c),Ye,(M,F,C)=>{var k=Sf();V(k,"data-id",C);var j=W(k);pt(j,()=>e.tickLabels[C],!0),le(()=>{V(k,"x",t(c)[C]),V(k,"y",t(f)[C]),V(k,"dx",t(d)),V(k,"dy",t(h)),V(k,"text-anchor",t(l))}),E(M,k)}),E(L,N)};D(T,L=>{s()===2&&r()===1?L(y):L(S,!1)},!0)}E(p,w)};D(m,p=>{s()===2&&r()===4?p(b):p(_,!1)})}le(()=>ot(v,t(o))),E(n,v),_e()}const Af=(n,e=yt,r=yt)=>{const s=g(()=>e().colmap.length);var l=qf(),o=U(l);Be(o,17,()=>e().colmap,Ye,(d,h,v)=>{const m=g(()=>r().start+v*r().width);var b=Lf(),_=U(b),p=q(_);V(p,"dy",0);var w=W(p);pt(w,()=>e().labels[v],!0),le(()=>{V(_,"x",t(m)),V(_,"y",r().top),V(_,"width",r().width),V(_,"height",r().height),V(_,"fill",t(h)),V(p,"x",t(m)),V(p,"y",r().ltop),V(p,"dx",r().dxl),V(p,"fill",e().labelColor),V(p,"font-size",e().fontSize+"em")}),E(d,b)});var a=q(o);{var c=d=>{const h=g(()=>r().start+t(s)*r().width);var v=jf();V(v,"dx",0),V(v,"dy",0);var m=W(v);pt(m,()=>e().labels[t(s)],!0),le(()=>{V(v,"x",t(h)),V(v,"y",r().ltop),V(v,"fill",e().labelColor),V(v,"font-size",`${e().fontSize??""}em`)}),E(d,v)};D(a,d=>{e().isCentered||d(c)})}var f=q(a);{var u=d=>{const h=g(()=>r().start+t(s)*r().width);var v=Mf(),m=W(v);pt(m,()=>fl(e().labelsFactor),!0),le(()=>{V(v,"x",t(h)),V(v,"y",r().ltop),V(v,"fill",e().labelColor),V(v,"font-size",`${e().fontSize??""}em`)}),E(d,v)};D(f,d=>{e().labelsFactor!==0&&d(u)})}E(n,l)};var Tf=Ae('<text fill="crimson" text-anchor="middle"> </text>'),Pf=Ae('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Nf=Ae("<!><!><!><!><!>",1),Lf=Ae('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),jf=Ae('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Mf=Ae('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),qf=Ae("<!><!><!>",1),Rf=Ae("<line></line>"),If=Ae('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Ff=Ae('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),zf=Ae('<svg><rect height="100%" width="100%"></rect><!></svg>'),Of=Ae('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Vf=Ae('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Bf=Ae('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Yf=Ae('<g class="plot-labels"><!><!><!></g>'),Df=Ae('<g class="axis x-axis"><!></g>'),Wf=Ae('<g class="axis y-axis"><!></g>'),Hf=Ae('<rect fill="transparent" id="axes-box"></rect>'),Uf=Ae('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Xf=Ae('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Gf=Ae('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Kf=Ae('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1t5q9z1"><!></g><!><!>',1),Jf=H('<p class="message-error svelte-1t5q9z1">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),Zf=H('<div class="download-links svelte-1t5q9z1"><button class="svelte-1t5q9z1">⇩ svg</button> <button class="svelte-1t5q9z1">⇩ png</button> <button class="svelte-1t5q9z1">⧉ copy</button></div>'),Qf=H(`<div><svg class="plot svelte-1t5q9z1" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function pl(n,e){be(e,!0);const r=(Ce,Ze=yt,Je=yt)=>{var Pt=he(),Ot=U(Pt);{var ir=St=>{var nt=he(),Qe=U(nt);{var Lt=ht=>{var at=Tf(),gr=W(at);le(()=>{V(at,"x",t(Se)[0]-10),V(at,"y",t(Le)),V(at,"transform",`rotate(-90, ${t(Se)[0]-10}, ${t(Le)})`),Te(gr,Je().error)}),E(ht,at)},wt=ht=>{var at=Pf(),gr=W(at);le(()=>{V(at,"x",t(xe)),V(at,"y",t(Pe)[0]),Te(gr,Je().error)}),E(ht,at)};D(Qe,ht=>{Je().pos===4?ht(Lt):ht(wt,!1)})}E(St,nt)},Br=St=>{var nt=Nf(),Qe=U(nt);{var Lt=je=>{gl(je,{get lineCoords(){return Ze().grid},get lineColor(){return dt.MIDDLEGRAY},lineType:3})};D(Qe,je=>{Je().showGrid&&je(Lt)})}var wt=q(Qe);gl(wt,{get lineCoords(){return Ze().axisLine},get lineColor(){return dt.DARKGRAY},lineType:1});var ht=q(wt);gl(ht,{get lineCoords(){return Ze().tickCoords},get lineColor(){return dt.DARKGRAY},lineType:1});var at=q(ht);{var gr=je=>{qa(je,{get las(){return Je().las},get pos(){return Je().pos},get tickCoords(){return Ze().tickCoords},get tickLabels(){return Ze().tickLabels},get tickColor(){return dt.DARKGRAY},get hideLast(){return Je().hideLast}})};D(at,je=>{Ze().tickCoords.length===2&&Ze().tickLabels.length===Ze().tickCoords[1][0].length&&je(gr)})}var Xn=q(at);{var et=je=>{{let jt=g(()=>[Ze().tfLabel]);qa(je,{get pos(){return Je().pos},get tickCoords(){return Ze().tfCoords},get tickLabels(){return t(jt)},get textColor(){return dt.DARKGRAY}})}};D(Xn,je=>{Ze().tickFactor!==0&&je(et)})}E(St,nt)};D(Ot,St=>{Je().error?St(ir):St(Br,!1)})}E(Ce,Pt)},s=(Ce,Ze=yt,Je=yt)=>{const Pt=g(()=>Je().elw+2*Je().elp),Ot=g(()=>Je().elp),ir=g(()=>Je().elh),Br=g(()=>Je().ely);var St=zf(),nt=W(St),Qe=q(nt);Be(Qe,17,()=>Ze().items,Ye,(Lt,wt,ht)=>{var at=Ff();V(at,"x",0);var gr=W(at);{var Xn=fn=>{var Ct=Rf();le(()=>{V(Ct,"x1",t(Ot)),V(Ct,"x2",t(Pt)-t(Ot)),V(Ct,"y1",t(ir)[ht]/2),V(Ct,"y2",t(ir)[ht]/2),V(Ct,"stroke",t(wt).line.lineColor),V(Ct,"stroke-width",t(wt).line.lineWidth),V(Ct,"stroke-dasharray",t(I)[t(wt).line.lineType-1])}),E(fn,Ct)};D(gr,fn=>{t(wt).line&&fn(Xn)})}var et=q(gr);{var je=fn=>{var Ct=If(),o1=W(Ct);le(()=>{V(Ct,"x",t(Pt)/2),V(Ct,"y",t(ir)[ht]/2),V(Ct,"fill",t(wt).point.faceColor),V(Ct,"stroke-width",t(wt).point.lineWidth),V(Ct,"stroke",t(wt).point.lineColor),V(Ct,"font-size",`${t(wt).point.markerSize??""}em`),Te(o1,xn[t(wt).point.marker-1])}),E(fn,Ct)};D(et,fn=>{t(wt).point&&fn(je)})}var jt=q(et),l1=W(jt);pt(l1,()=>t(wt).label,!0),le(()=>{V(at,"y",t(Br)[ht]),V(at,"width",Je().lgw),V(at,"height",t(ir)[ht]),V(jt,"x",t(Pt)+t(Ot)),V(jt,"y",t(ir)[ht]/2),V(jt,"fill",dt.LEGEND),V(jt,"font-size",`${Ze().fontSize??""}em`)}),E(Lt,at)}),le(()=>{V(St,"x",Je().lgl),V(St,"y",Je().lgt),V(St,"height",Je().lgh),V(St,"width",Je().lgw),V(nt,"fill",Ze().faceColor),V(nt,"stroke",Ze().lineColor),V(nt,"stroke-width",Ze().lineWidth)}),E(Ce,St)};let l=z(e,"limX",19,()=>[0,1]),o=z(e,"limY",19,()=>[0,1]),a=z(e,"margins",19,()=>[1,1.1,.55,.6]),c=z(e,"downloadLinks",3,"none"),f=z(e,"fileName",3,"plot"),u=z(e,"pngWidth",3,8),d=z(e,"pngHeight",3,8),h=z(e,"pngRes",3,300),v=z(e,"clipboardWidth",3,1200),m=z(e,"clipboardHeight",3,800),b=z(e,"onclick",3,null),_=z(e,"onmousemove",3,null),p=z(e,"onmousedown",3,null),w=z(e,"onmouseup",3,null);function T(Ce,Ze){if(Ze&&Ce.target.id=="axes-box"){const Je=Ta([Ce.offsetX-t(J)],t(fe))[0],Pt=Ta([Ce.offsetY-t(K)],t(pe))[0];Ze(Je,Pt)}}function y(Ce){Ce.preventDefault(),T(Ce,p())}function S(Ce){Ce.preventDefault(),T(Ce,w())}function L(Ce){Ce.preventDefault(),T(Ce,_())}function N(Ce){Ce.preventDefault(),T(Ce,b())}async function P(Ce){df(Ce.target,t(k),v(),m())}function M(){ff(t(k),f())}function F(){uf(t(k),f(),u(),d(),h())}const C="plottingArea"+Math.round(Math.random()*1e4);let k=te(0),j=te(0),B=te(0);const Y=g(()=>({plot:sf(t(j),t(B)),x:Ma(t(j)),y:Ma(t(B))})),A=g(()=>a().map(Ce=>Ce*Ju[t(Y).plot])),O=g(()=>$u[t(Y).plot]),$=g(()=>cl[t(Y).plot]),I=g(()=>Bn[t(Y).plot]),G=g(()=>t(re).show&&t(re).label!==""?t(O)*1.5:0),J=g(()=>t(de).show&&t(de).label!==""?t(O)*1.5:0),K=g(()=>e.title&&e.title!==""?t(O)*1.5:0),se=g(()=>t(j)>t(J)?t(j)-t(J):0),Z=g(()=>t(B)>t(G)+t(K)?t(B)-t(G)-t(K):0),ee=g(()=>t(Z)-t(A)[0]-t(A)[2]),me=g(()=>t(se)-t(A)[1]-t(A)[3]),ce=g(()=>Sa(l(),2)&&Sa(o(),2)&&t(se)>t(A)[1]+t(A)[3]&&t(Z)>t(A)[0]+t(A)[2]),fe=g(()=>t(ce)?{coords:[t(me)/(l()[1]-l()[0]),l()[0],t(A)[1]],objects:[t(me)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),pe=g(()=>t(ce)?{coords:[-t(ee)/(o()[1]-o()[0]),o()[1],t(A)[2]],objects:[t(ee)/(o()[1]-o()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),Le=g(()=>t(ee)*.5+t(K)+t(A)[2]),xe=g(()=>t(me)*.5+t(J)+t(A)[1]),Se=g(()=>t(ce)?lt(l(),t(fe)):[0,1]),Pe=g(()=>t(ce)?lt(o(),t(pe)):[1,0]),Oe=g(()=>zr(e.title)),oe=g(()=>t(Oe)?t(Oe).length===e.title.left?1:1.4:0);let ae=te(Me({show:!1})),re=te(Me({show:!1,error:""})),de=te(Me({show:!1,error:""})),ue=te(Me({show:!1,colmap:null,breaks:null})),ge=te(Me({show:!1,items:null,position:null}));const Ie=g(()=>t(ce)&&t(ue)&&t(ue).show?gf(t(ue)):null),Ve=g(()=>t(ce)&&t(re).show?hf(l(),o(),t(Y),t(pe),t(re)):null),qe=g(()=>t(ce)&&t(de).show?mf(l(),o(),t(Y),t(fe),t(de)):null),X=g(()=>t(ce)&&t(Ie)?pf(t(Ie),t(me),t(A),t(Y)):null),Q=g(()=>t(ce)&&t(ge)&&t(ge).show&&t(Se)?wf(t(ge),t(Se),t(Pe),t(O),t($)):null);Fi("axes",{setBox:Ce=>R(ae,Ce,!0),setXAxis:Ce=>R(re,Ce,!0),setYAxis:Ce=>R(de,Ce,!0),setColmapLegend:Ce=>R(ue,Ce,!0),setGroupLegend:Ce=>R(ge,Ce,!0),scales:()=>t(Y),tX:()=>t(fe),tY:()=>t(pe),limX:()=>l(),limY:()=>o()});var ne=Qf();let ye;var ve=W(ne),Ne=q(W(ve));{var Re=Ce=>{var Ze=Yf(),Je=W(Ze);{var Pt=nt=>{var Qe=Of();V(Qe,"dx",0),V(Qe,"dy",0);var Lt=W(Qe);pt(Lt,()=>t(re).label,!0),le(()=>{V(Qe,"x",t(xe)),V(Qe,"y",t(Z)+t(K))}),E(nt,Qe)};D(Je,nt=>{t(re).show&&t(re).label&&t(re).label!==""&&nt(Pt)})}var Ot=q(Je);{var ir=nt=>{var Qe=Vf();V(Qe,"dx",0),V(Qe,"dy",0);var Lt=W(Qe);pt(Lt,()=>t(de).label,!0),le(()=>{V(Qe,"x",t(O)/1.1*t(de).labelHeight),V(Qe,"y",t(Le)),V(Qe,"transform",`rotate(-90, ${t(O)*t(de).labelHeight/1.1}, ${t(Le)})`)}),E(nt,Qe)};D(Ot,nt=>{t(de).show&&t(de).label&&t(de).label!==""&&nt(ir)})}var Br=q(Ot);{var St=nt=>{var Qe=Bf();V(Qe,"dx",0),V(Qe,"dy",0);var Lt=W(Qe);pt(Lt,()=>t(Oe),!0),le(()=>{V(Qe,"x",t(xe)),V(Qe,"y",t(O)*t(oe))}),E(nt,Qe)};D(Br,nt=>{t(Oe)&&t(Oe)!==""&&nt(St)})}E(Ce,Ze)};D(Ne,Ce=>{t(ce)&&Ce(Re)})}var Fe=q(Ne),De=W(Fe),Ue=W(De),vt=W(Ue),mr=q(De);{var ql=Ce=>{var Ze=Kf(),Je=U(Ze);{var Pt=et=>{var je=Df(),jt=W(je);r(jt,()=>t(Ve),()=>t(re)),E(et,je)};D(Je,et=>{t(re).show&&t(Ve)&&et(Pt)})}var Ot=q(Je);{var ir=et=>{var je=Wf(),jt=W(je);r(jt,()=>t(qe),()=>t(de)),E(et,je)};D(Ot,et=>{t(de).show&&t(qe)&&et(ir)})}var Br=q(Ot),St=W(Br);{var nt=et=>{var je=Hf();je.__keydown=N,je.__click=N,je.__mousemove=L,je.__mousedown=y,je.__mouseup=S,le(()=>{V(je,"stroke",t(ae).lineColor),V(je,"stroke-width",`${t(ae).lineWidth??""}px`),V(je,"x",t(Se)[0]),V(je,"y",t(Pe)[1]),V(je,"width",t(Se)[1]-t(Se)[0]),V(je,"height",t(Pe)[0]-t(Pe)[1])}),E(et,je)},Qe=et=>{var je=Uf();je.__keydown=N,je.__click=N,je.__mousemove=L,je.__mousedown=y,je.__mouseup=S,le(()=>{V(je,"x",t(Se)[0]),V(je,"y",t(Pe)[1]),V(je,"width",t(Se)[1]-t(Se)[0]),V(je,"height",t(Pe)[0]-t(Pe)[1])}),E(et,je)};D(St,et=>{t(ae).show?et(nt):et(Qe,!1)})}var Lt=q(Br),wt=W(Lt);Cr(wt,()=>e.children??yt);var ht=q(Lt);{var at=et=>{var je=Xf(),jt=W(je);Af(jt,()=>t(Ie),()=>t(X)),E(et,je)};D(ht,et=>{t(X)&&et(at)})}var gr=q(ht);{var Xn=et=>{var je=Gf(),jt=W(je);s(jt,()=>t(ge),()=>t(Q)),E(et,je)};D(gr,et=>{t(Q)&&et(Xn)})}le(()=>V(Lt,"clip-path",`url(#${C})`)),E(Ce,Ze)};D(mr,Ce=>{t(ce)&&Ce(ql)})}$r(ve,Ce=>R(k,Ce),()=>t(k));var Tt=q(ve,2);{var _t=Ce=>{var Ze=Jf();E(Ce,Ze)},ut=Ce=>{var Ze=Zf(),Je=W(Ze);Je.__click=M,Je.__keydown=M;var Pt=q(Je,2);Pt.__click=F,Pt.__keydown=F;var Ot=q(Pt,2);Ot.__click=P,Ot.__keydown=P,E(Ce,Ze)};D(Tt,Ce=>{t(ce)?Ce(ut,!1):Ce(_t)})}le(()=>{ye=ct(ne,1,`plot-container show-download-links-${c()??""}`,"svelte-1t5q9z1",ye,{"plot-error":!t(ce)}),ot(ve,`font-size:${t(O)??""}px`),V(Fe,"x",t(J)),V(Fe,"y",t(K)),V(Fe,"width",t(se)),V(Fe,"height",t(Z)),V(Ue,"id",C),V(vt,"x",t(Se)[0]),V(vt,"y",t(Pe)[1]),V(vt,"width",t(Se)[1]-t(Se)[0]),V(vt,"height",t(Pe)[0]-t(Pe)[1])}),Uo(ve,"clientWidth",Ce=>R(j,Ce)),Uo(ve,"clientHeight",Ce=>R(B,Ce)),E(n,ne),_e()}st(["keydown","click","mousemove","mousedown","mouseup"]);function bl(n,e){be(e,!0);let r=z(e,"las",3,1),s=z(e,"whole",3,!1),l=z(e,"show",3,!0),o=z(e,"showGrid",3,!1);const a=Nt("axes");we(()=>{const c=zr(e.label),f=c?c.length===e.label.length?1:1.4:0;let u,d="";e.ticks&&([u,d]=La(e.ticks,a.limX()));let h;!d&&e.tickLabels&&([h,d]=Na(e.tickLabels,u)),a.setXAxis({show:l(),error:d,label:c,ticks:u,labelHeight:f,showGrid:o(),las:r(),whole:s(),tickLabels:h})}),_e()}function _l(n,e){be(e,!0);let r=z(e,"las",3,1),s=z(e,"whole",3,!1),l=z(e,"show",3,!0),o=z(e,"showGrid",3,!1);const a=Nt("axes");we(()=>{const c=zr(e.label),f=c?c.length===e.label.length?1:1.4:0;let u,d="";e.ticks&&([u,d]=La(e.ticks,a.limY()));let h;!d&&e.tickLabels&&([h,d]=Na(e.tickLabels,u)),a.setYAxis({show:l(),error:d,label:c,ticks:u,labelHeight:f,showGrid:o(),las:r(),whole:s(),tickLabels:h,pos:4})}),_e()}function wl(n,e){be(e,!0);let r=z(e,"lineWidth",3,1),s=z(e,"lineColor",3,"#606060");const l=Nt("axes");we(()=>{l.setBox({show:!0,lineWidth:r(),lineColor:s()})}),_e()}var $f=Ae("<rect></rect>"),ed=Ae("<g></g>");function kn(n,e){be(e,!0);let r=z(e,"faceColor",19,()=>dt.PRIMARY),s=z(e,"lineColor",19,r),l=z(e,"lineWidth",3,1),o=z(e,"className",3,"series-rect");const a=g(()=>Et(e.left,"Rectangles (left)")),c=g(()=>t(a)?Et(e.top,"Rectangles (top)",t(a).length):null),f=g(()=>t(c)?typeof e.width!="object"?Ee.fill(e.width,t(a).length):e.width:null),u=g(()=>t(c)?typeof e.height!="object"?Ee.fill(e.height,t(a).length):e.height:null),d=Nt("axes"),h=g(()=>t(a)?lt(t(a),d.tX()):null),v=g(()=>t(c)?lt(t(c),d.tY()):null),m=g(()=>t(f)?Yn(t(f),d.tX()):null),b=g(()=>t(u)?Yn(t(u),d.tY()):null),_=g(()=>`fill:${r()};stroke:${s()};stroke-width:${l()}px;`),p=g(()=>t(h)&&t(v)&&t(m)&&t(b)&&t(m).length===t(h).length&&t(b).length===t(h).length);var w=he(),T=U(w);{var y=S=>{var L=ed();L.__click=N=>an(N,"rect",e.onclick),Be(L,21,()=>e.left,Ye,(N,P,M)=>{var F=$f();le(()=>{V(F,"x",t(h)[M]),V(F,"y",t(v)[M]),V(F,"width",t(m)[M]),V(F,"height",t(b)[M])}),E(N,F)}),le(()=>{ct(L,0,`series ${o()??""}`),ot(L,t(_))}),E(S,L)};D(T,S=>{t(p)&&S(y)})}E(n,w),_e()}st(["click"]);var td=Ae("<line></line>"),rd=Ae('<g class="series series-segment"></g>');function cn(n,e){be(e,!0);let r=z(e,"lineColor",19,()=>dt.PRIMARY),s=z(e,"lineType",3,1),l=z(e,"lineWidth",3,1);const o=g(()=>Et(e.xStart,"Segments")),a=g(()=>t(o)?Et(e.yStart,"Segments",t(o).length):null),c=g(()=>t(a)?Et(e.xEnd,"Segments",t(o).length):null),f=g(()=>t(c)?Et(e.yEnd,"Segments",t(o).length):null),u=Nt("axes"),d=g(()=>t(o)?lt(t(o),u.tX()):null),h=g(()=>t(c)?lt(t(c),u.tX()):null),v=g(()=>t(a)?lt(t(a),u.tY()):null),m=g(()=>t(f)?lt(t(f),u.tY()):null),b=g(()=>`stroke:${r()};stroke-width: ${l()}px;stroke-dasharray:${Bn[u.scales().plot][s()-1]}`),_=g(()=>t(d)&&t(h)&&t(v)&&t(m));var p=he(),w=U(p);{var T=y=>{var S=rd();S.__click=L=>an(L,"line",e.onclick),Be(S,21,()=>t(d),Ye,(L,N,P)=>{var M=td();le(()=>{V(M,"x1",t(d)[P]),V(M,"x2",t(h)[P]),V(M,"y1",t(v)[P]),V(M,"y2",t(m)[P])}),E(L,M)}),le(()=>ot(S,t(b))),E(y,S)};D(w,y=>{t(_)&&y(T)})}E(n,p),_e()}st(["click"]);var nd=Ae("<text><!></text>"),sd=Ae("<text><!></text>"),ld=Ae("<text><!></text>"),od=Ae('<g class="series series-textlabels"><!></g>');function un(n,e){be(e,!0);let r=z(e,"pos",3,0),s=z(e,"faceColor",19,()=>dt.PRIMARY_TEXT),l=z(e,"lineColor",3,"transparent"),o=z(e,"lineWidth",3,0),a=z(e,"textSize",3,1),c=z(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],u=g(()=>Et(e.xValues,"TextLabels")),d=g(()=>t(u)?Et(e.yValues,"TextLabels",t(u).length):null),h=g(()=>t(d)?Array.isArray(e.labels)&&e.labels.length!==t(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),v=g(()=>t(h)?typeof e.labels=="string"&&typeof r()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):r():null),m=Nt("axes"),b=g(()=>t(u)&&t(v)!==null?lt(t(u),m.tX()):null),_=g(()=>t(d)&&t(b)?lt(t(d),m.tY()):null),p=g(()=>ul[m.scales().plot]),w=g(()=>[0,0,-t(p),0,t(p),t(p)]),T=g(()=>[0,t(p),0,-t(p),0,t(p)]),y=g(()=>`fill:${s()};stroke-width:${o()}px;stroke:${l()};font-size:${a()}em;`),S=g(()=>t(b)&&t(_)&&t(v)!==null&&t(h)&&t(b).length===t(_).length);var L=he(),N=U(L);{var P=M=>{var F=od();F.__click=B=>an(B,"text",e.onclick);var C=W(F);{var k=B=>{var Y=he(),A=U(Y);Be(A,17,()=>t(b),Ye,(O,$,I)=>{var G=nd();V(G,"data-id",I);var J=W(G);pt(J,()=>e.labels,!0),le(()=>{V(G,"x",t(b)[I]),V(G,"y",t(_)[I]),V(G,"dx",t(w)[r()]),V(G,"dy",t(T)[r()]),V(G,"transform",c()!==void 0?`rotate(${c()}, ${t(b)[I]+t(w)[r()]}, ${t(_)[I]+t(T)[r()]})`:""),V(G,"text-anchor",f[r()[I]])}),E(O,G)}),E(B,Y)},j=B=>{var Y=he(),A=U(Y);{var O=I=>{var G=he(),J=U(G);Be(J,17,()=>t(b),Ye,(K,se,Z)=>{var ee=sd();V(ee,"data-id",Z);var me=W(ee);pt(me,()=>e.labels[Z],!0),le(()=>{V(ee,"x",t(b)[Z]),V(ee,"y",t(_)[Z]),V(ee,"dx",t(w)[r()[Z]]),V(ee,"dy",t(T)[r()[Z]]),V(ee,"transform",c()!==void 0?`rotate(${c()}, ${t(b)[Z]+t(w)[r()]}, ${t(_)[Z]+t(T)[r()]})`:""),V(ee,"text-anchor",f[r()[Z]])}),E(K,ee)}),E(I,G)},$=I=>{var G=he(),J=U(G);Be(J,17,()=>t(b),Ye,(K,se,Z)=>{var ee=ld();V(ee,"data-id",Z);var me=W(ee);pt(me,()=>e.labels[Z],!0),le(()=>{V(ee,"x",t(b)[Z]),V(ee,"y",t(_)[Z]),V(ee,"dx",t(w)[r()]),V(ee,"dy",t(T)[r()]),V(ee,"transform",c()!==void 0?`rotate(${c()}, ${t(b)[Z]+t(w)[r()]}, ${t(_)[Z]+t(T)[r()]})`:""),V(ee,"text-anchor",f[r()])}),E(K,ee)}),E(I,G)};D(A,I=>{Array.isArray(r())||ArrayBuffer.isView(r())?I(O):I($,!1)},!0)}E(B,Y)};D(C,B=>{typeof e.labels=="string"?B(k):B(j,!1)})}le(()=>ot(F,t(y))),E(M,F)};D(N,M=>{t(S)&&M(P)})}E(n,L),_e()}st(["click"]),st(["click"]);function ad(n,e){be(e,!0);let r=z(e,"barWidth",3,.8),s=z(e,"faceColor",19,()=>dt.PRIMARY),l=z(e,"lineColor",19,()=>dt.PRIMARY),o=z(e,"lineWidth",3,1);const a=g(()=>r()<=0||r()>1?(console.error('Bars: parameter "barWidth" should be between 0 and 1.'),null):r()),c=g(()=>{if(!t(a))return null;const m=Et(e.xValues,"BarSeries");if(!m)return null;const b=m.length;if(b<1)return null;let _;if(e.barWidthExact)_=e.barWidthExact;else{if(b==1)return console.error('Bars: if only one bar must be shown, value for property "barWidthExact" should be provided.'),null;{_=0;let y=0;for(let S=1;S<b;S++)y=Math.abs(m.v[S-1]-m.v[S]),y>_&&(_=y)}}_=_*r();const p=_/2,w=Ee.zeros(b),T=Ee.zeros(b);for(let y=0;y<b;y++)w.v[y]=m.v[y]-p,T.v[y]=_;return{left:w,width:T}}),f=g(()=>{if(!t(c))return null;const m=Et(e.yValues,"BarSeries");if(!m)return null;const b=m.length;if(b!==t(c).left.length)return console.error('BarSeries: parameters "yValues" must be vector of the same length as "xValues".'),null;const _=Ee.zeros(b),p=Ee.zeros(b);for(let w=0;w<b;w++){const T=m.v[w];_.v[w]=T>0?T:0,p.v[w]=Math.abs(T)}return{top:_,height:p}}),u=g(()=>t(c)&&t(f));var d=he(),h=U(d);{var v=m=>{kn(m,{className:"series series-bar",get left(){return t(c).left},get width(){return t(c).width},get top(){return t(f).top},get height(){return t(f).height},get lineWidth(){return o()},get lineColor(){return l()},get faceColor(){return s()},get onclick(){return e.onclick}})};D(h,m=>{t(u)&&m(v)})}E(n,d),_e()}var id=Ae("<text> </text>"),cd=Ae('<g text-anchor="middle"></g>');function ud(n,e){be(e,!0);let r=z(e,"marker",3,1),s=z(e,"faceColor",3,"transparent"),l=z(e,"lineColor",19,()=>dt.PRIMARY),o=z(e,"lineWidth",3,1),a=z(e,"markerSize",3,1);const c=g(()=>typeof r()!="number"||r()<1||r()>xn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+xn.length+"."),null):xn[r()-1]),f=g(()=>Et(e.xValues,"Points")),u=g(()=>t(f)?Et(e.yValues,"Points",t(f).length):null),d=Nt("axes"),h=g(()=>t(f)?lt(t(f),d.tX()):null),v=g(()=>t(h)&&t(u)?lt(t(u),d.tY()):null),m=g(()=>["＋","✳","✕"].includes(t(c))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${a()}em;`:`fill:${s()};stroke-width:${o()}px;stroke:${l()}; font-size:${a()}em;`),b=g(()=>["◼","⬥","＋","✳","✕"].includes(t(c))?"series-points2":"series-points1"),_=g(()=>t(h)&&t(v)&&t(h).length===t(v).length);var p=he(),w=U(p);{var T=y=>{var S=cd();S.__click=L=>an(L,"text",e.onclick),Be(S,21,()=>t(h),Ye,(L,N,P)=>{var M=id(),F=W(M);le(()=>{V(M,"x",t(h)[P]),V(M,"y",t(v)[P]),Te(F,t(c))}),E(L,M)}),le(()=>{ct(S,0,`series series-points ${t(b)??""}`),ot(S,t(m))}),E(y,S)};D(w,y=>{t(_)&&y(T)})}E(n,p),_e()}st(["click"]);var fd=Ae('<g class="series series-line"><polyline class="line"></polyline></g>');function vr(n,e){be(e,!0);let r=z(e,"lineColor",19,()=>dt.PRIMARY),s=z(e,"lineType",3,1),l=z(e,"lineWidth",3,1);const o=g(()=>Et(e.xValues,"Lines")),a=g(()=>t(o)?Et(e.yValues,"Lines",t(o).length):null),c=Nt("axes"),f=g(()=>t(o)&&t(a)?vl(t(o),t(a),c.tX(),c.tY()):null),u=g(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${Bn[c.scales().plot][s()-1]}`);var d=he(),h=U(d);{var v=m=>{var b=fd();b.__click=p=>an(p,"polyline",e.onclick);var _=W(b);le(()=>{ot(b,t(u)),V(_,"points",t(f))}),E(m,b)};D(h,m=>{t(f)&&m(v)})}E(n,d),_e()}st(["click"]);var dd=Ae('<polyline class="line"></polyline>'),vd=Ae('<g class="series series-multiline"></g>');function Ra(n,e){be(e,!0);let r=z(e,"lineColor",19,()=>dt.PRIMARY),s=z(e,"lineType",3,1),l=z(e,"lineWidth",3,1);const o=g(()=>Et(e.xValues,"Multilines")),a=g(()=>t(o)?Ft(e.yValues)?(t(o).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),c=Nt("axes"),f=g(()=>{if(!t(o)||!t(a))return null;const m=new Array(t(a).ncols);for(let b=0;b<m.length;b++)m[b]=vl(t(o),t(a).getcolumn(b+1),c.tX(),c.tY());return m}),u=g(()=>`fill:transparent;stroke:${r()};stroke-width: ${l()}px; stroke-dasharray:${Bn[c.scales().plot][s()-1]}`);var d=he(),h=U(d);{var v=m=>{var b=vd();b.__click=_=>an(_,"polyline",e.onclick),Be(b,21,()=>t(f),Ye,(_,p)=>{var w=dd();le(()=>V(w,"points",t(p))),E(_,w)}),le(()=>ot(b,t(u))),E(m,b)};D(h,m=>{t(f)&&t(f).length>0&&m(v)})}E(n,d),_e()}st(["click"]);function hd(...n){const e=n.length,r=n.map(a=>a.length);let s=Ws(r),l=Array(e),o=1;for(let a=0;a<e;a++){const c=ze(n[a])?n[a]:He(n[a]),f=c.length;s=s/f,l[a]=c.subset(We.seq(1,f).repeach(o).rep(s)),o=o*f}return l}var md=Ae("<rect></rect>"),gd=Ae('<g title="heatmap-group"><!></g>'),pd=Ae('<g class="heatmap" style="stroke:0;stroke-width:0px;"></g>');function bd(n,e){be(e,!0);let r=z(e,"colmap",3,null),s=g(()=>Ft(e.values)&&e.values.nrows>0&&e.values.ncols>0?e.values:null),l=g(()=>t(s)?e.breaks&&Array.isArray(e.breaks)?e.breaks:e.breaks&&ze(e.breaks)?e.breaks.v:os(t(s).v,rf).v:null),o=g(()=>r()?Array.isArray(r())?r().length!==e.breaks.length-1?(console.error("Heatmap: number of color values in colormap does not match number of intervals defined by breaks."),null):r():(console.error('Heatmap: parameter "colmap" must be array with colors.'),null):ml(t(l).length-1)),a=g(()=>t(s)?Ea(t(s).ncols):null),c=g(()=>t(s)?Ea(t(s).nrows):null),f=g(()=>t(a)&&t(c)?hd(t(c),t(a)):null),u=g(()=>{if(!t(f)||!t(l)||!t(o))return null;const[y,S]=t(f),L=S.length,N=t(l).length,P=Array(N).fill().map(()=>[]),M=Array(N).fill().map(()=>[]),F=t(l).slice(),C=F[1]-F[0];F[0]=F[0]-.1*C,F[N-1]=F[N-1]+.1*C;for(let k=0;k<L;k++){const j=t(s).v[k];for(let B=0;B<N-1;B++)if(j>F[B]&&j<=F[B+1]){P[B].push(S.v[k]-.5),M[B].push(t(s).nrows-y.v[k]+1.5);break}}return{rl:P,rt:M}});const d=Nt("axes");let h=g(()=>t(u)?t(u).rl.map(y=>y.length>0?lt(y,d.tX()):[]):null),v=g(()=>t(u)?t(u).rt.map(y=>y.length>0?lt(y,d.tY()):[]):null),m=g(()=>Yn([1],d.tX())),b=g(()=>Yn([1],d.tY())),_=g(()=>t(h)&&t(v)&&t(h).length===t(v).length);var p=he(),w=U(p);{var T=y=>{var S=pd();Be(S,21,()=>t(o),Ye,(L,N,P)=>{var M=gd(),F=W(M);{var C=k=>{var j=he(),B=U(j);Be(B,17,()=>t(h)[P],Ye,(Y,A,O,$)=>{var I=md();le(()=>{V(I,"x",t(h)[P][O]),V(I,"y",t(v)[P][O]),V(I,"width",t(m)),V(I,"height",t(b))}),E(Y,I)}),E(k,j)};D(F,k=>{t(h)[P].length>0&&k(C)})}le(()=>ot(M,`fill:${t(N)??""};`)),E(L,M)}),E(y,S)};D(w,y=>{t(_)&&y(T)})}E(n,p),_e()}function Dn(n,e){be(e,!0);let r=z(e,"show",3,!0),s=z(e,"position",3,"topleft"),l=z(e,"lineColor",19,()=>dt.LEGEND),o=z(e,"lineWidth",3,1),a=z(e,"faceColor",3,"#fff"),c=z(e,"fontSize",3,.85);function f(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function u(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let v=0;v<h.length;v++){const m=h[v];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const b=zr(m.label),_=b.length===m.label?1:1.4;m.label=b,m.labelHeight=_,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(v+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:dt.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=xn.length||console.error('Legend: parameter "marker" for legend item '+(v+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.markerSize=m.point.markerSize?m.point.markerSize:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:dt.PRIMARY)}return h}const d=Nt("axes");we(()=>{const h=u(e.items),v=f(s());d.setGroupLegend(h&&v?{show:r(),position:s(),items:e.items,lineColor:l(),faceColor:a(),lineWidth:o(),fontSize:c()}:{show:!1,position:null,items:null})}),_e()}function Ia(n,e){be(e,!0);let r=z(e,"show",3,!0),s=z(e,"labels",3,null),l=z(e,"labelColor",19,()=>dt.CLEGEND_LABELS),o=z(e,"fontSize",3,.85);const a=Nt("axes");we(()=>{a.setColmapLegend({show:r(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:l(),fontSize:o()})}),_e()}const _d=n=>n;function Fa(n,{delay:e=0,duration:r=400,easing:s=_d}={}){const l=+getComputedStyle(n).opacity;return{delay:e,duration:r,easing:s,css:o=>`opacity: ${o*l}`}}var wd=H('<div><div class="modal svelte-oie633"><div class="header svelte-oie633"><button class="close-button svelte-oie633">✕</button></div> <div class="body svelte-oie633"><!></div></div></div>');function yl(n,e){be(e,!0);let r=z(e,"isDark",3,!1);function s(h){h.key==="Escape"&&e.closeModal()}var l=wd();Jr("keydown",As,s);let o;var a=W(l),c=W(a),f=W(c);f.__click=function(...h){e.closeModal?.apply(this,h)};var u=q(c,2),d=W(u);Cr(d,()=>e.children),le(()=>o=ct(l,1,"drop svelte-oie633",null,o,{isdark:r()})),Yo(7,l,()=>Fa),E(n,l),_e()}st(["click"]);const yd=[1,1.1,.45,.4],Or={cal:1,pv:2,test:2,new:2},Vr={cal:"#2679B2",pv:"#D22C2F",test:"#a05e5e",new:"#5e85a0"},za={cal:"#f0f8ff",pv:"#f4e5e5",test:"#fff0f8",new:"#f0f8ff"},Wn={cal:"#2679B230",pv:"#D22C2F30",test:"#f05e5e30",new:"#5e85a030"},xl="#808090",vs="#a0a0a0",Oa="#909090",Hn="#909090",Va=8,xd=8,kd=8,Ed=600;function Sd(n,e,r){const s=e.length,l=new Array(n.length),o=e[1]-e[0];for(let a=0;a<n.length;a++)for(let c=0;c<s-1;c++){const f=n[a]>=e[c],u=c===s-2?n[a]<e[c+1]+o:n[a]<e[c+1];if(f&&u){l[a]=r[c];break}}return l}function Ba(n,e,r,s){if(!n||!e)return null;const l=n.length;let o=Ee.zeros(l),a=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;if(s==="log")for(let f=0;f<l;f++){const u=Math.log(1+n[f]/r);o.v[f]=u,a=Math.max(a,u),c=Math.min(c,u)}else for(let f=0;f<l;f++){const u=n[f]/r;o.v[f]=u,a=Math.max(a,u),c=Math.min(c,u)}return{values:o,min:c,max:a}}function Ya(n,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[n]+", "+(e==="log"?"log(1 + "+n+"/"+n+"0)":n+"/"+n+"0")}function Da(n,e,r,s){const o=e+r,c=tn(n,o)/r,f=-e/r,u=-c/f,d=Ee.seq(0,u*1,u/100),h=d.apply(v=>v*f+c);return{x:s==="log"?d.apply(v=>Math.log(1+v)):d,y:s==="log"?h.apply(v=>Math.log(1+v)):h}}function Cd(n,e,r,s=4){const l=Math.abs(r-e);let o;return l<1?o=Math.min(Math.round(Math.abs(Math.log10(l))+1),s):l<10?o=2:l<100?o=1:o=0,Array.from(n).map(a=>a.toFixed(o).toString())}function Un(n,e=Wn){return n?n.map(r=>({id:r,label:r,point:{marker:Or[r],faceColor:e[r],lineColor:Vr[r],markerSize:Or[r]===1?.85:.65,lineWidth:1.5}})):null}function Wa(n,e,r){if(!n)return[0,1];if(e==="p")return dr(n);if(e==="h")return n.length<20?[.5,n.length+.5]:dr(n,.05);const s=dr(n,0),l=Math.abs((s[1]-s[0])*.1);return r?[s[1]+l,s[0]-l]:[s[0]-l,s[1]+l]}var Ad=H("<!> <!> <!> <!>",1);function hr(n,e){let r=z(e,"whole",3,!1),s=en(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);pl(n,Ir({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return yd},get pngWidth(){return xd},get pngHeight(){return kd},get pngRes(){return Ed}},()=>s,{children:(l,o)=>{var a=Ad(),c=U(a);Cr(c,()=>e.children);var f=q(c,2);bl(f,{showGrid:!0,get label(){return e.xLabel},get whole(){return r()}});var u=q(f,2);_l(u,{showGrid:!0,get label(){return e.yLabel}});var d=q(u,2);wl(d,{}),E(l,a)},$$slots:{default:!0}}))}var Td=H("<!> <!> <!>",1),Pd=H("<!> <!> <!> <!> <!>",1),Nd=H("<div><!></div>"),Ld=H('<div class="wrapper svelte-1di9qjd"><div class="plot-container svelte-1di9qjd" role="tooltip"><!></div> <div class="msg-select svelte-1di9qjd">click inside the plot to see a variable label</div> <div class="plot-controls svelte-1di9qjd"><div><!></div> <!></div></div>');function kl(n,e){be(e,!0);let r=z(e,"outliers",19,()=>[]),s=z(e,"model_getter",3,eu),l=z(e,"res_getter",3,fa),o=te("residual"),a=te(-1);const c=g(()=>e.res?Object.keys(e.res):null);let f=te(Me(t(c)?t(c)[0]:null));function u(K){if(K.target.tagName!=="rect"){R(a,-1);return}const se=Array.from(K.target.parentNode.children).indexOf(K.target);if(se<0){R(a,-1);return}t(a)!==se&&R(a,se,!0)}const d=g(()=>{if(!e.model)return null;const K=e.model.nresp?e.model.nresp:0,se=He(e.model.varvalues.filter((Le,xe)=>xe>=K)),Z=se.length,ee=(se.v[1]-se.v[0])/2,me=(se.v[Z-1]-se.v[Z-2])/2,ce=[se.v[0],se.v[Z-1]],fe=[ce[0]-ee,ce[1]+me],pe=(ce[1]-ce[0])/Z;return{values:se,lim:fe,width:pe,hwidth:pe*.5}}),h=g(()=>t(d)?t(d).values.apply(K=>K-t(d).hwidth):null),v=g(()=>t(f)?e.res[t(f)]:null),m=g(()=>t(v)?new ke(l()(t(v),"T"),t(v).nrows,t(v).ncomp):null),b=g(()=>t(v)?new ke(l()(t(v),"E"),t(v).nrows,t(v).npred).t():null),_=g(()=>e.model?new ke(s()(e.model,"P"),e.model.npred?e.model.npred:e.model.ncols,e.model.ncomp):null),p=g(()=>e.ncomp?We.seq(1,e.ncomp):null),w=g(()=>e.ncomp<e.model.ncomp?We.seq(e.ncomp+1,e.model.ncomp):null),T=g(()=>t(m)&&t(p)?t(m).subset(null,t(p)):null),y=g(()=>t(m)&&t(p)?t(_).subset(null,t(p)):null),S=g(()=>t(m)&&t(w)?t(m).subset(null,t(w)):null),L=g(()=>t(m)&&t(w)?t(_).subset(null,t(w)):null),N=g(()=>t(T)&&t(y)?sa(t(y),t(T)):null),P=g(()=>t(S)&&t(L)?sa(t(L),t(S)).add(t(b)):t(b)),M=g(()=>t(N)&&t(P)?t(N).add(t(P)):null);let F=g(()=>t(N)?t(N).getcolumn(e.selected+1):null),C=g(()=>t(P)?t(P).getcolumn(e.selected+1):null),k=g(()=>t(M)?t(M).getcolumn(e.selected+1):null),j=g(()=>{if(!t(F)||!t(C)||!t(k))return null;const K=t(o)==="explained"?{all:t(N),sel:t(F),label:"Explained part, TP^T"}:t(o)==="residual"?{all:t(P),sel:t(C),label:"Residuals, E"}:{all:t(M),sel:t(k),label:"Preprocessed data, X"},se=Tr(K.all.v),Z=se[1]-se[0],ee=[se[0]-Z/50,se[1]+Z/12],me=Ee.fill(se[1],K.sel.length);return K.lim=ee,K.top=me,K.height=Z,K});const B=g(()=>t(d)&&t(a)>=0?t(d).values.v[t(a)]:null),Y=g(()=>t(j)&&t(a)>=0?t(j).sel.v[t(a)]:null),A=g(()=>e.model&&t(a)>=0?e.model.varlabels[t(a)]:null),O=g(()=>t(v)&&e.selected>=0?`Object ${t(v).objlabels[e.selected].replace("_","-")}`:null),$=g(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var I=he(),G=U(I);{var J=K=>{yl(K,{get closeModal(){return e.closeModal},children:(se,Z)=>{var ee=Ld(),me=W(ee);me.__click=u;var ce=W(me);hr(ce,{get title(){return t(O)},get yLabel(){return t(j).label},get xLabel(){return t($)},get limY(){return t(j).lim},get limX(){return t(d).lim},fileName:"plot-contributions",children:(Pe,Oe)=>{var oe=Pd(),ae=U(oe);Ra(ae,{get xValues(){return t(d).values},get yValues(){return t(j).all},lineColor:"#e0e0e0"});var re=q(ae,2);{var de=qe=>{var X=he(),Q=U(X);Be(Q,17,r,Ye,(ne,ye)=>{{let ve=g(()=>t(j).all.getcolumn(t(ye)+1));vr(ne,{get xValues(){return t(d).values},get yValues(){return t(ve)},lineColor:"#ffdd88"})}}),E(qe,X)};D(re,qe=>{r().length>0&&qe(de)})}var ue=q(re,2);vr(ue,{get xValues(){return t(d).values},get yValues(){return t(j).sel},lineColor:"crimson"});var ge=q(ue,2);kn(ge,{get left(){return t(h)},get top(){return t(j).top},get height(){return t(j).height},get width(){return t(d).width},faceColor:"transparent",borderColor:"transparent"});var Ie=q(ge,2);{var Ve=qe=>{var X=Td(),Q=U(X);{let ve=g(()=>[t(B)]),Ne=g(()=>[t(j).top.v[0]]),Re=g(()=>[t(A)]);un(Q,{get xValues(){return t(ve)},get yValues(){return t(Ne)},get labels(){return t(Re)},pos:3,textSize:.85})}var ne=q(Q,2);{let ve=g(()=>[t(B)]),Ne=g(()=>[t(Y)]);ud(ne,{get xValues(){return t(ve)},get yValues(){return t(Ne)},faceColor:"crimson",lineColor:"crimson"})}var ye=q(ne,2);{let ve=g(()=>[t(h).v[t(a)]]),Ne=g(()=>[t(j).top.v[t(a)]]);kn(ye,{get left(){return t(ve)},get top(){return t(Ne)},get height(){return t(j).height},get width(){return t(d).width},faceColor:"#ff000015"})}E(qe,X)};D(Ie,qe=>{t(a)>=0&&qe(Ve)})}E(Pe,oe)},$$slots:{default:!0}});var fe=q(me,4),pe=W(fe),Le=W(pe);ie(Le,{label:"Show",children:(Pe,Oe)=>{Ge(Pe,{id:"type",options:["full","explained","residual"],get value(){return t(o)},set value(oe){R(o,oe,!0)}})},$$slots:{default:!0}});var xe=q(pe,2);{var Se=Pe=>{var Oe=Nd(),oe=W(Oe);ie(oe,{label:"For",children:(ae,re)=>{Ge(ae,{id:"type",get options(){return t(c)},get value(){return t(f)},set value(de){R(f,de,!0)}})},$$slots:{default:!0}}),E(Pe,Oe)};D(xe,Pe=>{t(c).length>1&&Pe(Se)})}E(se,ee)},$$slots:{default:!0}})};D(G,K=>{t(d)&&t(j)&&K(J)})}E(n,I),_e()}st(["click"]);function jd(n,e){let r=0,s=0;n.nresp>0&&(r=new Ee(n.values.v.slice(0,n.nresp*n.values.nrows)),s=n.nresp);const l=new ke(n.values.v.slice(s*n.values.nrows),n.values.nrows,n.values.ncols-s).t(),o=l.ncols<e?1:Math.round(l.ncols/e),a=We.seq(1,l.ncols,o),c=l.subset(null,a),f=r?r.subset(a):null,u=n.classes?n.classes.filter((d,h)=>a.v.includes(h)):null;return{classNames:n.classNames,classes:u,resp:f,values:c,varvalues:n.varvalues.filter((d,h)=>h>=s),varindices:n.varindices.filter((d,h)=>h>=s),varaxisLabel:n.varvaluesUnits?n.varvaluesName+" "+n.varvaluesUnits:n.varvaluesName,varaxisUnits:n.varvaluesUnits}}function El(n,e){return{values:e||n.values.copy(),varvalues:n.varvalues,varindices:n.varindices,varaxisLabel:n.varaxisLabel}}function Md(n,e){if(!e||e.nrows!==n.values.nrows||e.ncols!==n.values.ncols)throw new Error("Object with values seems to be wrong for cloning.");const r=structuredClone(n);return r.values=e,r}var qd=H('<span class="info-details svelte-p7c0hz"> <span class="svelte-p7c0hz"><!></span></span>');function Sl(n,e){be(e,!0);var r=he(),s=U(r);{var l=a=>{var c=qd(),f=W(c),u=q(f),d=W(u);pt(d,()=>ou(e.prepmodel)),le(()=>Te(f,`${e.prepmodel.ml.length+" method"+(e.prepmodel.ml.length>1?"s":"")} `)),E(a,c)},o=a=>{var c=vc("skipped");E(a,c)};D(s,a=>{e.prepmodel.ml?a(l):a(o,!1)})}E(n,r),_e()}var Rd=H('<span>file:</span> <span class="file-name svelte-1cde14j"> </span><br/>',1),Id=H('<p class="info-text svelte-1cde14j"><span style="display:inline-block;font-weight:bold;padding-bottom: 0.25em;">Preprocessing model</span><br/> <!> <span style="color:#a0a0a0;">variables</span>, <!></p> <!>',1);function Fd(n,e){be(e,!0);var r=he(),s=U(r);{var l=o=>{ie(o,{name:"info",children:(a,c)=>{var f=Id(),u=U(f),d=q(W(u),3);{var h=p=>{var w=Rd(),T=q(U(w),2),y=W(T);le(()=>{V(T,"title",e.model.fileName),Te(y,e.model.fileName)}),E(p,w)};D(d,p=>{e.model.fileName&&p(h)})}var v=q(d),m=q(v,3);Sl(m,{get prepmodel(){return e.model}});var b=q(u,2);{var _=p=>{ar(p,{get onclick(){return e.reset}})};D(b,p=>{e.reset&&p(_)})}le(()=>Te(v,` ${e.model.npred??""} `)),E(a,f)},$$slots:{default:!0}})};D(s,o=>{e.model&&o(l)})}E(n,r),_e()}var zd=H("<!> <!>",1),Od=H("<p><!></p>"),Vd=H("<!> <!>",1);function Bd(n,e){be(e,!0);let r=z(e,"model",15),s=te(""),l=te("neutral"),o=te("");function a(p){try{const w=JSON.parse(p,sl);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),!Object.keys(w).includes("class")||w.class[0]!=="prepmodel")throw Error("The JSON file you selected does not contain preprocessing model.");w.fileName=t(u),r(w),R(l,"success"),R(o,"")}catch(w){console.log(w),r(null),R(l,"error"),R(o,w,!0)}}function c(p){const w=new FileReader;w.onload=()=>{a(w.result)},w.readAsText(t(s))}function f(){R(s,""),r(null),R(l,"neutral"),R(o,"")}we(()=>{t(s)===null?(r(null),R(l,"neutral"),R(o,"")):(R(l,"neutral"),R(o,""))}),we(()=>{(r()===null||r()===0)&&R(s,"")});let u=g(()=>t(s)?t(s).name.replace(/\.[^/.]+$/,""):"");var d=Vd(),h=U(d);{var v=p=>{var w=zd(),T=U(w);Qr(T,()=>t(s),L=>{ie(L,{name:"file-selector",children:(N,P)=>{fs(N,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return t(s)},set file(M){R(s,M,!0)}})},$$slots:{default:!0}})});var y=q(T,2);{var S=L=>{ie(L,{name:"load-button",label:" ",children:(N,P)=>{tt(N,{onclick:c,text:"Load"})},$$slots:{default:!0}})};D(y,L=>{t(s)&&L(S)})}E(p,w)},m=p=>{Fd(p,{get model(){return r()},reset:f})};D(h,p=>{r()?p(m,!1):p(v)})}var b=q(h,2);{var _=p=>{ie(p,{name:"error",status:"error",children:(w,T)=>{var y=Od(),S=W(y);pt(S,()=>t(o)),E(w,y)},$$slots:{default:!0}})};D(b,p=>{(t(l)==="error"||t(o))&&p(_)})}E(n,d),_e()}var Yd=H('<p class="title"> </p>'),Dd=H("<!>&nbsp;",1),Wd=H("<!> <!>",1),Hd=H('<div class="method-open svelte-10os93"><!> <!> <!></div>'),Ud=H('<p> <span title="Edit" class="svelte-10os93"> </span></p> <!> <!> <!>',1);function En(n,e){be(e,!0);let r=z(e,"cancel",3,null);var s=he(),l=U(s);{var o=c=>{var f=Hd(),u=W(f);ie(u,{children:(v,m)=>{var b=Yd(),_=W(b);le(()=>Te(_,e.title)),E(v,b)},$$slots:{default:!0}});var d=q(u,2);Cr(d,()=>e.children);var h=q(d,2);ie(h,{label:" ",children:(v,m)=>{var b=Wd(),_=U(b);{var p=T=>{var y=Dd(),S=U(y);tt(S,{text:"Cancel",get onclick(){return r()}}),E(T,y)};D(_,T=>{r()&&T(p)})}var w=q(_,2);tt(w,{text:"Save",get onclick(){return e.apply}}),E(v,b)},$$slots:{default:!0}}),Yo(3,f,()=>Fa,()=>({duration:10})),E(c,f)},a=c=>{ie(c,{children:(f,u)=>{var d=Ud(),h=U(d),v=W(h),m=q(v);m.__click=()=>e.open(e.pos);var b=W(m),_=q(h,2);Cu(_,{onclick:()=>e.moveUp(e.pos)});var p=q(_,2);Au(p,{onclick:()=>e.moveDown(e.pos)});var w=q(p,2);ar(w,{onclick:()=>e.remove(e.pos)}),le(()=>{Te(v,`${e.title??""} `),Te(b,e.settings)}),E(f,d)},$$slots:{default:!0}})};D(l,c=>{e.isOpen?c(o):c(a,!1)})}E(n,s),_e()}st(["click"]);var Xd=H("<!> <!>",1);function Gd(n,e){be(e,!0);let r=z(e,"params",31,()=>Me([0,0])),s=z(e,"varind",15),l=z(e,"settings",15),o=z(e,"nvars",3,0),a=en(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","nvars"]);const c={snv:0,area:1,length:2,var:3},f=Object.keys(c);let u=te(Me(f[r()[0]])),d=te(r()[1]+1);const h="Normalization";we(()=>{l(t(u)+(t(u)==="var"?" #"+t(d):""))}),we(()=>{t(u)==="var"?s(s()[0]=r()[1]>0?r()[1]:1,!0):s(s()[0]=-1,!0)}),we(()=>{t(u)==="var"&&e.isOpen?s(s()[0]=r()[1],!0):s(s()[0]=-1,!0)}),we(()=>{t(u)&&r(r()[0]=c[t(u)],!0)}),we(()=>{t(d)&&r(r()[1]=t(d)-1,!0)}),En(n,Ir({id:"norm",title:h,get settings(){return l()},get isOpen(){return e.isOpen}},()=>a,{children:(v,m)=>{var b=Xd(),_=U(b);ie(_,{label:"Type",children:(T,y)=>{Ge(T,{get options(){return f},get value(){return t(u)},set value(S){R(u,S,!0)}})},$$slots:{default:!0}});var p=q(_,2);{var w=T=>{ie(T,{label:"Variable index",children:(y,S)=>{zt(y,{min:1,get max(){return o()},step:1,get value(){return t(d)},set value(L){R(d,L,!0)}})},$$slots:{default:!0}})};D(p,T=>{t(u)==="var"&&T(w)})}E(v,b)},$$slots:{default:!0}})),_e()}var Kd=H("<!> <!> <!>",1);function Jd(n,e){be(e,!0);let r=z(e,"params",31,()=>Me([3,1,0])),s=z(e,"settings",15),l=en(e,["$$slots","$$events","$$legacy","params","settings","nvars"]);const o=g(()=>{if(!e.nvars)return 3;const u=Math.round(e.nvars*.25);return u>39?39:u%2<1?u+1:u}),a=g(()=>r()[1]<2?[0,1]:[0,1,2]),c=g(()=>r()[0]<5?[1,2]:[1,2,3]);we(()=>{r()[0]<5&&r()[1]>2&&r(r()[1]=2,!0)}),we(()=>{r()[2]>r()[1]&&r(r()[2]=r()[1],!0)}),we(()=>{s(r()[0]+", "+r()[1]+", "+r()[2])}),En(n,Ir({id:"savgol",title:"Savitzkiy-Golay",get settings(){return s()}},()=>l,{children:(u,d)=>{var h=Kd(),v=U(h);ie(v,{label:"Width",children:(_,p)=>{zt(_,{min:3,get max(){return t(o)},step:2,get value(){return r()[0]},set value(w){r(r()[0]=w,!0)}})},$$slots:{default:!0}});var m=q(v,2);ie(m,{label:"Polynomial",children:(_,p)=>{Ge(_,{get options(){return t(c)},get value(){return r()[1]},set value(w){r(r()[1]=w,!0)}})},$$slots:{default:!0}});var b=q(m,2);ie(b,{label:"Derivative",children:(_,p)=>{Ge(_,{get options(){return t(a)},get value(){return r()[2]},set value(w){r(r()[2]=w,!0)}})},$$slots:{default:!0}}),E(u,h)},$$slots:{default:!0}})),_e()}var Zd=H("<!> <!>",1);function Qd(n,e){be(e,!0);let r=z(e,"params",31,()=>Me([1,0]));z(e,"varind",27,()=>-1);let s=z(e,"settings",15);z(e,"nvars",3,0);let l=en(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o={no:0,mean:1,median:2},a={no:0,sd:1,iqr:2,range:3,pareto:4},c=Object.keys(o),f=Object.keys(a);let u=te(Me(c[r()[0]])),d=te(Me(f[r()[1]]));const h="Scaling";we(()=>{s(t(u)+"/"+t(d))}),we(()=>{t(u)&&r(r()[0]=o[t(u)],!0)}),we(()=>{t(d)&&r(r()[1]=a[t(d)],!0)}),En(n,Ir({id:"scale",title:h,get settings(){return s()}},()=>l,{children:(v,m)=>{var b=Zd(),_=U(b);ie(_,{label:"Center",children:(w,T)=>{Ge(w,{get options(){return c},get value(){return t(u)},set value(y){R(u,y,!0)}})},$$slots:{default:!0}});var p=q(_,2);ie(p,{label:"Scale",children:(w,T)=>{Ge(w,{get options(){return f},get value(){return t(d)},set value(y){R(d,y,!0)}})},$$slots:{default:!0}}),E(v,b)},$$slots:{default:!0}})),_e()}var $d=H("<!> <!> <!>",1),ev=H("<!> <!> <!>",1);function tv(n,e){be(e,!0);let r=z(e,"params",31,()=>Me([0,1,.1]));z(e,"varind",27,()=>-1);let s=z(e,"settings",15,"");z(e,"nvars",3,0);let l=en(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Baseline correction",a={emsc:0,als:1},c=Object.keys(a);function f(b){const _=Math.ceil(Math.log10(b));return Math.pow(10,_)}let u=te(Me(c[r()[0]])),d=te(Me(r()[2]>0?f(r()[2]).toString():"0.1")),h=g(()=>parseFloat(t(d))),v=g(()=>t(h)/10),m=g(()=>Math.ceil(-Math.log10(t(h)))+1);we(()=>{if(t(u)!=="als")return;const b=parseFloat(t(d));(r()[2]<t(v)||r()[2]>b-t(v))&&r(r()[2]=t(v),!0)}),we(()=>{s(t(u)+" ("+(t(u)=="emsc"?r()[1].toFixed(0):r()[1].toFixed(1)+","+r()[2].toFixed(3))+")")}),we(()=>{t(u)&&r(r()[0]=a[t(u)],!0)}),En(n,Ir({id:"scale",title:o,get settings(){return s()}},()=>l,{children:(b,_)=>{var p=ev(),w=U(p);ie(w,{label:"Type",children:(N,P)=>{Ge(N,{get options(){return c},get value(){return t(u)},set value(M){R(u,M,!0)}})},$$slots:{default:!0}});var T=q(w,2);{var y=N=>{var P=$d(),M=U(P);ie(M,{label:"Lambda",children:(k,j)=>{ln(k,{min:1,max:7,step:.1,get value(){return r()[1]},set value(B){r(r()[1]=B,!0)}})},$$slots:{default:!0}});var F=q(M,2);ie(F,{label:"Penalty range",children:(k,j)=>{Ge(k,{options:["1","0.1","0.01"],get value(){return t(d)},set value(B){R(d,B,!0)}})},$$slots:{default:!0}});var C=q(F,2);ie(C,{label:"Penalty",children:(k,j)=>{{let B=g(()=>t(h)-t(v));ln(k,{get min(){return t(v)},get max(){return t(B)},get step(){return t(v)},get decNum(){return t(m)},get value(){return r()[2]},set value(Y){r(r()[2]=Y,!0)}})}},$$slots:{default:!0}}),E(N,P)};D(T,N=>{t(u)==="als"&&N(y)})}var S=q(T,2);{var L=N=>{ie(N,{label:"Polynomial",children:(P,M)=>{zt(P,{min:0,max:5,step:1,decNum:0,get value(){return r()[1]},set value(F){r(r()[1]=F,!0)}})},$$slots:{default:!0}})};D(S,N=>{t(u)==="emsc"&&N(L)})}E(b,p)},$$slots:{default:!0}})),_e()}var rv=H("<!> <!>",1);function nv(n,e){be(e,!0);let r=z(e,"params",15),s=z(e,"varind",15),l=z(e,"settings",15),o=en(e,["$$slots","$$events","$$legacy","params","varind","settings","isOpen","left","right","nvars"]);const a="Trim tails";let c=te(!1);const f=g(()=>e.nvars?Math.round(e.nvars*.1):1);we(()=>{e.isOpen?((r()[0]===void 0||r()[0]===null||r()[0]<e.left||r()[0]>e.right-t(f))&&r(r()[0]=e.left,!0),(r()[1]===void 0||r()[1]===null||r()[1]>e.right||r()[1]<e.left+t(f))&&r(r()[1]=e.right,!0),s(s()[1]=r()[0],!0),s(s()[2]=r()[1],!0),R(c,!0)):(s(s()[1]=-1,!0),s(s()[2]=-1,!0),R(c,!1))}),we(()=>{l("left: "+r()[0]+" right: "+r()[1])}),En(n,Ir({id:"norm",title:a,get settings(){return l()},get isOpen(){return e.isOpen}},()=>o,{children:(u,d)=>{var h=he(),v=U(h);{var m=b=>{var _=rv(),p=U(_);ie(p,{label:"Left",children:(T,y)=>{{let S=g(()=>e.right-t(f));ln(T,{get min(){return e.left},get max(){return t(S)},step:1,decNum:0,get value(){return r()[0]},set value(L){r(r()[0]=L,!0)}})}},$$slots:{default:!0}});var w=q(p,2);ie(w,{label:"Right",children:(T,y)=>{{let S=g(()=>e.left+t(f));ln(T,{get min(){return t(S)},get max(){return e.right},step:1,decNum:0,get value(){return r()[1]},set value(L){r(r()[1]=L,!0)}})}},$$slots:{default:!0}}),E(b,_)};D(v,b=>{t(c)&&b(m)})}E(u,h)},$$slots:{default:!0}})),_e()}var sv=H("<!> <!>",1);function lv(n,e){be(e,!0);let r=z(e,"params",31,()=>Me([3,5]));z(e,"varind",27,()=>-1);let s=z(e,"settings",15);z(e,"nvars",3,0);let l=en(e,["$$slots","$$events","$$legacy","params","varind","settings","nvars"]);const o="Spike removal";we(()=>{s(r()[0]+"/"+r()[1])}),En(n,Ir({id:"scale",title:o,get settings(){return s()}},()=>l,{children:(a,c)=>{var f=sv(),u=U(f);ie(u,{label:"Window",children:(h,v)=>{zt(h,{min:3,max:15,step:2,get value(){return r()[0]},set value(m){r(r()[0]=m,!0)}})},$$slots:{default:!0}});var d=q(u,2);ie(d,{label:"Threshold",children:(h,v)=>{zt(h,{min:3,max:50,get value(){return r()[1]},set value(m){r(r()[1]=m,!0)}})},$$slots:{default:!0}}),E(a,f)},$$slots:{default:!0}})),_e()}var ov=H("<h2>Selected methods</h2> <!>",1),av=H("<p>No methods selected</p>"),iv=H("<p> </p>"),cv=H("<h2>Available methods</h2>"),uv=H("<p>Maximum number of methods is selected.</p>"),fv=H("<p> </p> <!>",1),dv=H('<div><!> <!> <!></div> <div class="downloads-block"><!></div> <div class="methods-list svelte-9cg1zq"><!> <!></div>',1);function vv(n,e){be(e,!0);let r=z(e,"prepobj",31,()=>Me([])),s=z(e,"meta",15),l=z(e,"varind",31,()=>-1),o=z(e,"rawdataShort",15),a=z(e,"prepdataShort",15),c=z(e,"prepmodel",3,null),f=z(e,"reset",3,null),u=z(e,"finalize",3,null);const d=30,h=8,v={savgol:Jd,norm:Gd,scale:Qd,baseline:tv,trim:nv,spikes:lv};let m=te("neutral"),b=te(""),_=te(void 0),p=te(""),w=te(Me([])),T=te(!1),y=te(Me([])),S=te(Me([]));s(new Array(h).fill(""));const L=g(()=>e.rawdata.values.ncols-e.rawdata.nresp);let N=Me(e.rawdata.values.nrows<3?Object.keys(v).filter(oe=>oe!=="scale"):Object.keys(v));M(),r().length!==0&&P();async function P(){r().length!==0&&R(_,e.WASM().then(oe=>{R(m,"applying");const ae=ha(oe,o().values,0,r(),!0,[]),re=el(oe,o().values,0,ae,!0);a(El(o(),re)),R(m,"success")}).catch(oe=>{a(El(o())),console.error(oe),R(m,"error"),R(b,oe,!0)}),!0)}function M(){const oe=e.rawdata.values.ncols-e.rawdata.nresp;if(!e.rawdata)return;if(!r()||r().length<1){e.setLeft(0),e.setRight(oe),R(y,[],!0),R(S,[],!0);return}let ae=[],re=[],de=0,ue=oe;for(let ge of r())ge.id==="trim"?(ae.push(de),re.push(ue),ge.params[0]<de&&(ge.params[0]=de),ge.params[1]>ue&&(ge.params[1]=ue),de=ge.params[0]>de?ge.params[0]:de,ue=ge.params[1]>0&&ge.params[1]<ue?ge.params[1]:ue):(ae.push(de),re.push(ue));R(y,ae,!0),R(S,re,!0),e.setLeft(de),e.setRight(ue)}function F(oe){const ae=Fr.find(re=>re.id===oe);ae&&(t(y).push(e.left),t(S).push(e.right),r().push({id:ae.id,params:ae.mp}),R(T,!0),R(p,r().length-1))}function C(){r().length<1||(t(y).pop(),t(S).pop(),r().pop(),R(T,!1),R(p,-1))}function k(oe){if(oe<=0)return;const ae=r()[oe],re=r()[oe-1];r(r()[oe-1]=ae,!0),r(r()[oe]=re,!0),O()}function j(oe){if(oe<0||oe===r().length-1)return;const ae=r()[oe],re=r()[oe+1];r(r()[oe+1]=ae,!0),r(r()[oe]=re,!0),O()}function B(oe){oe<0||oe>=r().length||(r(r().filter((ae,re)=>re!==oe)),O())}function Y(oe){R(p,oe,!0)}function A(){R(p,null)}function O(){R(m,"neutral"),R(b,""),R(T,!1),R(p,null),c()&&f()(),M(),P(),l(l()[1]=-1,!0),l(l()[2]=-1,!0)}we(()=>{e.rawdata&&!o()&&o(jd(e.rawdata,d))}),we(()=>{o()&&!a()&&a(El(o()))}),we(()=>{(!r()||r().length===0)&&(R(w,[],!0),a(null),R(y,[],!0),R(S,[],!0),R(p,""),s(new Array(h).fill("")))});var $=dv(),I=U($);let G;var J=W(I);ie(J,{label:"",children:(oe,ae)=>{var re=ov(),de=q(U(re),2);{var ue=ge=>{wa(ge,{text:"edit",get onclick(){return f()}})};D(de,ge=>{c()&&f()&&ge(ue)})}E(oe,re)},$$slots:{default:!0}});var K=q(J,2);{var se=oe=>{ie(oe,{label:"",children:(ae,re)=>{var de=av();E(ae,de)},$$slots:{default:!0}})},Z=oe=>{var ae=he(),re=U(ae);Be(re,17,r,Ye,(de,ue,ge)=>{const Ie=g(()=>v[t(ue).id]);var Ve=he(),qe=U(Ve);{var X=ne=>{var ye=he(),ve=U(ye);{let Ne=g(()=>ge===t(p)),Re=g(()=>t(T)?C:null);Rn(ve,()=>t(Ie),(Fe,De)=>{De(Fe,{get isOpen(){return t(Ne)},get left(){return t(y)[ge]},get right(){return t(S)[ge]},pos:ge,get nvars(){return t(L)},moveUp:k,moveDown:j,apply:O,open:Y,close:A,remove:B,get cancel(){return t(Re)},get params(){return t(ue).params},set params(Ue){t(ue).params=Ue},get varind(){return l()},set varind(Ue){l(Ue)},get settings(){return s()[ge]},set settings(Ue){s(s()[ge]=Ue,!0)}})})}E(ne,ye)},Q=ne=>{var ye=he(),ve=U(ye);{let Ne=g(()=>ge===t(p)),Re=g(()=>t(T)?C:null);Rn(ve,()=>t(Ie),(Fe,De)=>{De(Fe,{pos:ge,get isOpen(){return t(Ne)},get left(){return t(y)[ge]},get right(){return t(S)[ge]},get nvars(){return t(L)},moveUp:k,moveDown:j,apply:O,open:Y,close:A,remove:B,get cancel(){return t(Re)},get params(){return t(ue).params},set params(Ue){t(ue).params=Ue},get settings(){return s()[ge]},set settings(Ue){s(s()[ge]=Ue,!0)}})})}E(ne,ye)};D(qe,ne=>{t(ue).id==="norm"||t(ue).id==="trim"?ne(X):ne(Q,!1)})}E(de,Ve)}),E(oe,ae)};D(K,oe=>{r().length===0?oe(se):oe(Z,!1)})}var ee=q(K,2);{var me=oe=>{ie(oe,{status:"error",children:(ae,re)=>{var de=iv(),ue=W(de);le(()=>Te(ue,t(b))),E(ae,de)},$$slots:{default:!0}})};D(ee,oe=>{(t(m)==="error"||t(b))&&oe(me)})}var ce=q(I,2),fe=W(ce);{var pe=oe=>{ie(oe,{label:" ",children:(ae,re)=>{tt(ae,{get onclick(){return u()},text:"Finalize"})},$$slots:{default:!0}})};D(fe,oe=>{!c()&&!t(p)&&r().length>0&&oe(pe)})}var Le=q(ce,2),xe=W(Le);ie(xe,{label:"",children:(oe,ae)=>{var re=cv();E(oe,re)},$$slots:{default:!0}});var Se=q(xe,2);{var Pe=oe=>{ie(oe,{label:"",children:(ae,re)=>{var de=uv();E(ae,de)},$$slots:{default:!0}})},Oe=oe=>{var ae=he(),re=U(ae);Be(re,17,()=>N,Ye,(de,ue)=>{const ge=g(()=>Fr.find(Ie=>Ie.id===t(ue)));ie(de,{children:(Ie,Ve)=>{var qe=fv(),X=U(qe),Q=W(X),ne=q(X,2);Su(ne,{onclick:()=>F(t(ge).id)}),le(()=>Te(Q,t(ge).title)),E(Ie,qe)},$$slots:{default:!0}})}),E(oe,ae)};D(Se,oe=>{r().length>=h?oe(Pe):oe(Oe,!1)})}le(()=>G=ct(I,1,"selected-methods-list svelte-9cg1zq",null,G,{final:c()!==null&&c()!==void 0})),E(n,$),_e()}var hv=H("<!> <!>",1),mv=H("<!> <!>",1),gv=H("<!> <!>",1),pv=H("<!> <!> <!> <!> <!> <!> <!> <!>",1),bv=H("<h2>Plot settings</h2>"),_v=H('<div class="plot-area svelte-5p9gcx"><div class="plot svelte-5p9gcx"><!></div></div> <div class="plot-controls-area svelte-5p9gcx"><!> <!> <!> <!></div>',1),wv=H('<div class="plot-panel svelte-5p9gcx"><!></div>');function yv(n,e){be(e,!0);let r=te(!0),s=te("none"),l=te(!1);const o=g(()=>(t(r)?"Preprocessed":"Raw")+" data (selected rows)"),a=g(()=>t(r)&&e.prepdata?e.prepdata:e.rawdata),c=g(()=>t(a)?t(a).varaxisLabel:"Variables"),f=g(()=>e.rawdata.varaxisUnits),u=g(()=>e.left>=0||e.right>0&&e.right<t(a).values.nrows),d=g(()=>e.left>=0?e.left+1:1),h=g(()=>e.right>0&&e.right<t(a).values.nrows?e.right:t(a).values.nrows),v=g(()=>t(r)&&t(a)&&t(u)?We.seq(t(d),t(h)):null),m=g(()=>t(v)?t(a).varvalues.filter((M,F)=>F>=t(d)-1&&F<t(h)):t(a).varvalues),b=g(()=>t(v)?t(a).values.subset(t(v),null):t(a).values),_=g(()=>t(b)?dr(t(b).v):null),p=g(()=>t(_)?(t(_)[1]-t(_)[0])*.05:null),w=g(()=>t(_)?[t(_)[0],t(_)[1]+(t(s)!=="none")*t(p)]:[0,1]),T=g(()=>t(a)?dr(t(a).varvalues,t(l)?.005:.1):[0,1]),y=g(()=>t(l)&&t(u)?[t(a).varvalues[t(d)-1],t(a).varvalues[t(h)-1]]:t(T)),S=g(()=>{if(!e.rawdata)return null;const M={none:{colors:"#ff0000"}};if(e.rawdata.classes&&e.rawdata.classNames&&e.rawdata.classNames.length>1){const F=ml(e.rawdata.classNames.length);M.groups={colors:e.rawdata.classes.map(C=>F[e.rawdata.classNames.findIndex(k=>k===C)]),breaks:Pr(0,e.rawdata.classNames.length),labels:e.rawdata.classNames,map:F}}if(e.rawdata.resp&&e.rawdata.resp.length===e.rawdata.values.ncols){const F=os(e.rawdata.resp,8),C=ml(F.length-1);M.response={colors:Sd(e.rawdata.resp.v,F.v,C),labels:null,breaks:F,map:C}}return M});we(()=>{(e.left<1||e.right<1||e.right>=e.left)&&R(l,!1)});var L=wv(),N=W(L);{var P=M=>{var F=_v(),C=U(F),k=W(C),j=W(k);pl(j,{get title(){return t(o)},get limY(){return t(w)},get limX(){return t(y)},fileName:"plot-preprocessed",children:(J,K)=>{var se=pv(),Z=U(se);{var ee=re=>{Ra(re,{get xValues(){return t(m)},get yValues(){return t(b)}})},me=re=>{var de=he(),ue=U(de);Be(ue,17,()=>t(S)[t(s)].colors,Ye,(ge,Ie,Ve)=>{{let qe=g(()=>t(b).getcolumn(Ve+1));vr(ge,{get xValues(){return t(m)},get yValues(){return t(qe)},get lineColor(){return t(Ie)}})}}),E(re,de)};D(Z,re=>{t(s)==="none"?re(ee):re(me,!1)})}var ce=q(Z,2);{var fe=re=>{const de=g(()=>t(a).varvalues[e.varind[0]]);var ue=hv(),ge=U(ue);{let Ve=g(()=>[t(de),t(de)]);vr(ge,{get xValues(){return t(Ve)},get yValues(){return t(w)},lineColor:"#00000060"})}var Ie=q(ge,2);{let Ve=g(()=>[t(de)]),qe=g(()=>[t(w)[1]-t(p)*(t(s)==="none"?1:2)]),X=g(()=>zr(t(de).toFixed(2)+" "+t(f)));un(Ie,{get xValues(){return t(Ve)},get yValues(){return t(qe)},get labels(){return t(X)},textColor:"#a0a0a0",textSize:.8,pos:2})}E(re,ue)};D(ce,re=>{e.varind&&e.varind[0]>0&&re(fe)})}var pe=q(ce,2);{var Le=re=>{const de=g(()=>t(a).varvalues[e.varind[1]]);var ue=mv(),ge=U(ue);{let Ve=g(()=>[t(y)[0]]),qe=g(()=>[t(a).varvalues[e.varind[1]]-t(y)[0]]),X=g(()=>[t(w)[1]]),Q=g(()=>[t(w)[1]-t(w)[0]]);kn(ge,{get left(){return t(Ve)},get width(){return t(qe)},get top(){return t(X)},get height(){return t(Q)},lineColor:"transparent",faceColor:"#00000040"})}var Ie=q(ge,2);{let Ve=g(()=>[t(de)]),qe=g(()=>[t(w)[1]-t(p)*(t(s)==="none"?1:2)]),X=g(()=>zr(t(de).toFixed(2)+" "+t(f)));un(Ie,{get xValues(){return t(Ve)},get yValues(){return t(qe)},get labels(){return t(X)},textColor:"#a0a0a0",textSize:.8,pos:2})}E(re,ue)};D(pe,re=>{e.varind&&e.varind[1]>0&&re(Le)})}var xe=q(pe,2);{var Se=re=>{const de=g(()=>t(a).varvalues[e.varind[2]-1]);var ue=gv(),ge=U(ue);{let Ve=g(()=>[t(a).varvalues[e.varind[2]-1]]),qe=g(()=>[t(y)[1]-t(a).varvalues[e.varind[2]-1]]),X=g(()=>[t(w)[1]]),Q=g(()=>[t(w)[1]-t(w)[0]]);kn(ge,{get left(){return t(Ve)},get width(){return t(qe)},get top(){return t(X)},get height(){return t(Q)},lineColor:"transparent",faceColor:"#00000040"})}var Ie=q(ge,2);{let Ve=g(()=>[t(de)]),qe=g(()=>[t(w)[1]-t(p)*(t(s)==="none"?1:2)]),X=g(()=>zr(t(de).toFixed(2)+" "+t(f)));un(Ie,{get xValues(){return t(Ve)},get yValues(){return t(qe)},get labels(){return t(X)},textColor:"#a0a0a0",textSize:.8,pos:2})}E(re,ue)};D(xe,re=>{e.varind&&e.varind[2]<t(a).varvalues.length&&e.varind[2]>0&&re(Se)})}var Pe=q(xe,2);{let re=g(()=>t(s)!=="none");Ia(Pe,{get show(){return t(re)},get labels(){return t(S)[t(s)].labels},get breaks(){return t(S)[t(s)].breaks},get colmap(){return t(S)[t(s)].map}})}var Oe=q(Pe,2);bl(Oe,{get label(){return t(c)},showGrid:!0});var oe=q(Oe,2);_l(oe,{showGrid:!0});var ae=q(oe,2);wl(ae,{}),E(J,se)},$$slots:{default:!0}});var B=q(C,2),Y=W(B);ie(Y,{label:"",children:(J,K)=>{var se=bv();E(J,se)},$$slots:{default:!0}});var A=q(Y,2);ie(A,{label:"Show",children:(J,K)=>{Wt(J,{options:["raw","preprocessed"],get value(){return t(r)},set value(se){R(r,se,!0)}})},$$slots:{default:!0}});var O=q(A,2);{var $=J=>{ie(J,{label:"Color by",children:(K,se)=>{{let Z=g(()=>Object.keys(t(S)));Ge(K,{get options(){return t(Z)},get value(){return t(s)},set value(ee){R(s,ee,!0)}})}},$$slots:{default:!0}})};D(O,J=>{Object.keys(t(S)).length>1&&J($)})}var I=q(O,2);{var G=J=>{ie(J,{label:"Zoom (x-axis)",children:(K,se)=>{Wt(K,{options:["off","on"],get value(){return t(l)},set value(Z){R(l,Z,!0)}})},$$slots:{default:!0}})};D(I,J=>{e.left>0&&e.right>e.left&&J(G)})}E(M,F)};D(N,M=>{t(m)&&t(b)&&M(P)})}E(n,L),_e()}var xv=H('<div class="widget-container svelte-pth1xe"><div class="app-controls svelte-pth1xe"><div class="prep-creator svelte-pth1xe"><!></div></div> <div class="app-content svelte-pth1xe"><!></div></div>');function kv(n,e){be(e,!0);let r=z(e,"left",15),s=z(e,"right",15),l=z(e,"prepobj",15),o=z(e,"meta",15),a=z(e,"finalize",3,null),c=te(Me([-1,0,0])),f=te(null),u=te(null);function d(y){const S=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&y>=0&&y<S&&y<s()&&r(y)}function h(y){const S=e.rawdata.values.ncols-e.rawdata.nresp;e.rawdata&&y<=S&&y>r()&&s(y)}var v=xv(),m=W(v),b=W(m),_=W(b);vv(_,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},get left(){return r()},get right(){return s()},setLeft:d,",":!0,setRight:h,get finalize(){return a()},get varind(){return t(c)},set varind(y){R(c,y,!0)},get prepobj(){return l()},set prepobj(y){l(y)},get rawdataShort(){return t(f)},set rawdataShort(y){R(f,y,!0)},get prepdataShort(){return t(u)},set prepdataShort(y){R(u,y,!0)},get meta(){return o()},set meta(y){o(y)}});var p=q(m,2),w=W(p);{var T=y=>{yv(y,{get rawdata(){return t(f)},get prepdata(){return t(u)},get left(){return r()},get right(){return s()},get varind(){return t(c)}})};D(w,y=>{t(f)&&y(T)})}E(n,v),_e()}var Ev=H('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> <!></p>'),Sv=H("<!> <!> <!>",1),Cv=H('<p class="info-text"><span style="color:#a0a0a0;">Preprocessing:</span> skipped</p> <div><!></div>',1),Av=H("<!> <!> <!>",1),Tv=H("<p><strong>Preprocessing model</strong></p>"),Pv=H("<!> <!>",1),Nv=H("<p> </p>"),Lv=H('<div class="prep-widget"><!></div> <!> <!>',1);function jv(n,e){be(e,!0);let r=z(e,"prepType",15),s=z(e,"prepobj",15),l=z(e,"prepdata",15),o=z(e,"prepmodel",15),a=z(e,"prepmeta",15),c=te(!1),f=te(0),u=te(Me(e.rawdata?e.rawdata.values.ncols-e.rawdata.nresp:0)),d=te("neutral"),h=te(""),v=te(void 0);async function m(j,B,Y){!B||!j||B.length===0||R(v,e.WASM().then(A=>{R(d,"applying");const O=ha(A,j.values,j.nresp,B,!1,Y);O.info=a(),o(O)}).catch(A=>{o(null),console.error(A),R(d,"error"),R(h,A,!0)}),!0)}async function b(j,B){if(!B||typeof B!="object"){l(null);return}if(Object.keys(B).length===0){l(j);return}R(v,e.WASM().then(Y=>{R(d,"applying");const A=el(Y,j.values,j.nresp,B,!1,!1),O=Md(Ii(j),A);l(au(O,B))}).catch(Y=>{l(null),console.error(Y),R(d,"error"),R(h,Y,!0)}),!0)}function _(){r(null),l(null),o(null),s([]),R(f,0),R(u,e.rawdata.values.ncols-e.rawdata.nresp)}function p(){s()&&s().length>0?m(e.rawdata,s(),e.outliers):(r(null),o(null)),R(c,!1)}function w(){r("create"),l(null),o(null),R(c,!0)}function T(){r("skip"),o({})}we(()=>{o(),e.rawdata&&b(e.rawdata,o())}),we(()=>{r()==="create"&&s()&&!o()&&m(e.rawdata,s(),e.outliers)}),we(()=>{r()==="skip"&&l()===null&&(o({}),s([]),l(e.rawdata))});var y=Lv(),S=U(y),L=W(S);{var N=j=>{ie(j,{name:"info",children:(B,Y)=>{var A=Sv(),O=U(A);{var $=K=>{var se=Ev(),Z=q(W(se),2);Sl(Z,{get prepmodel(){return o()}}),E(K,se)};D(O,K=>{t(c)||K($)})}var I=q(O,2);{var G=K=>{wa(K,{onclick:w})};D(I,K=>{r()==="create"&&K(G)})}var J=q(I,2);ar(J,{onclick:_}),E(B,A)},$$slots:{default:!0}})},P=j=>{var B=he(),Y=U(B);{var A=$=>{ie($,{name:"prep-info",children:(I,G)=>{var J=Cv(),K=q(U(J),2),se=W(K);ar(se,{onclick:_}),E(I,J)},$$slots:{default:!0}})},O=$=>{var I=he(),G=U(I);{var J=se=>{ie(se,{label:"Preprocessing",name:"prep-container",children:(Z,ee)=>{var me=Av(),ce=U(me);tt(ce,{text:"Skip",onclick:T});var fe=q(ce,2);tt(fe,{text:"Load",onclick:()=>r("file")});var pe=q(fe,2);tt(pe,{text:"Create",onclick:w}),E(Z,me)},$$slots:{default:!0}})},K=se=>{var Z=he(),ee=U(Z);{var me=ce=>{var fe=Pv(),pe=U(fe);ie(pe,{children:(xe,Se)=>{var Pe=Tv();E(xe,Pe)},$$slots:{default:!0}});var Le=q(pe,2);Bd(Le,{get model(){return o()},set model(xe){o(xe)},get prepobj(){return s()},set prepobj(xe){s(xe)},get left(){return t(f)},set left(xe){R(f,xe,!0)},get right(){return t(u)},set right(xe){R(u,xe,!0)}}),E(ce,fe)};D(ee,ce=>{r()==="file"&&ce(me)},!0)}E(se,Z)};D(G,se=>{r()?se(K,!1):se(J)},!0)}E($,I)};D(Y,$=>{r()==="skip"?$(A):$(O,!1)},!0)}E(j,B)};D(L,j=>{o()&&l()&&o().ml?j(N):j(P,!1)})}var M=q(S,2);{var F=j=>{yl(j,{closeModal:p,isDark:!0,children:(B,Y)=>{kv(B,{get WASM(){return e.WASM},get rawdata(){return e.rawdata},get outliers(){return e.outliers},finalize:p,get prepobj(){return s()},set prepobj(A){s(A)},get left(){return t(f)},set left(A){R(f,A,!0)},get right(){return t(u)},set right(A){R(u,A,!0)},get meta(){return a()},set meta(A){a(A)}})},$$slots:{default:!0}})};D(M,j=>{t(c)&&j(F)})}var C=q(M,2);{var k=j=>{ie(j,{status:"error",children:(B,Y)=>{var A=Nv(),O=W(A);le(()=>Te(O,t(h))),E(B,A)},$$slots:{default:!0}})};D(C,j=>{(t(d)==="error"||t(h))&&j(k)})}E(n,y),_e()}var Mv=H('<th class="svelte-110ino2"> </th>'),qv=H('<td class="svelte-110ino2"> </td>'),Rv=H('<tr class="svelte-110ino2"></tr>'),Iv=H('<table class="svelte-110ino2"><thead><tr class="svelte-110ino2"></tr></thead><tbody></tbody></table>');function Ha(n,e){be(e,!0);const r=1,s=["xcumexpvar","ycumexpvar"],l=["rmse","r2","slope","bias"];let o=g(()=>{if(!e.res||e.ncomp<0)return null;const u=Object.keys(e.res),d=u.length,h=["",...u];let m=[["#LVs",...Array(d).fill(e.ncomp)]];for(let b of s){let _=[b];for(let p=0;p<d;p++)console.log(e.res[u[p]].stat[b]),console.log(e.ncomp),console.log(e.res[u[p]].stat[b][e.ncomp-1]),_.push(e.res[u[p]].stat[b][e.ncomp-1].toFixed(3));m.push(_)}for(let b of l){let _=[b];for(let p=0;p<d;p++){let w=3;const T=e.res[u[p]].stat[b].getcolref(r)[e.ncomp-1];b==="rmse"&&(w=T<1?3:T>100?1:2),_.push(T.toFixed(w))}m.push(_)}return{header:h,rows:m}});var a=he(),c=U(a);{var f=u=>{var d=Iv(),h=W(d),v=W(h);Be(v,21,()=>t(o).header,Ye,(b,_)=>{var p=Mv(),w=W(p);le(()=>Te(w,t(_))),E(b,p)});var m=q(h);Be(m,21,()=>t(o).rows,Ye,(b,_)=>{var p=Rv();Be(p,21,()=>t(_),Ye,(w,T)=>{var y=qv(),S=W(y);le(()=>Te(S,t(T))),E(w,y)}),E(b,p)}),E(u,d)};D(c,u=>{t(o)&&u(f)})}E(n,a),_e()}var Fv=H("<!> <!> <!> <!>",1),zv=H("<p> </p>"),Ov=H("<!> <p>Computing global model...</p>",1),Vv=H('<p><span style="color:#a0a0a0;">PLS model:</span> </p> <!>',1),Bv=H('<div class="buttons"><!> <!></div>'),Yv=H("<!> <!>",1),Dv=H("<p> </p>"),Wv=H("<!> <!> <!> <!>",1);function Hv(n,e){be(e,!0);let r=z(e,"outliers",19,()=>[]),s=z(e,"exclvars",19,()=>[]),l=z(e,"resobj",15),o=z(e,"model",15),a=z(e,"downloadModel",3,null),c=z(e,"downloadResults",3,null),f=te("neutral"),u=te(""),d=te(1),h=te(!0),v=te(!1),m=te(void 0);async function b(k,j,B,Y){const A=k.nresp,O=k.varindices;R(m,e.WASM().then($=>{R(f,"computing");const I=ru($,k.values,A,j,B,Y,r(),s());I.hash=rl(),I.varlabels=k.varlabels.filter((J,K)=>K<A||!s().includes(O[K])),I.varindices=k.varindices.filter((J,K)=>K<A||!s().includes(O[K])),I.varvalues=k.varvalues.filter((J,K)=>K<A||!s().includes(O[K])),I.xvarlabels=I.varlabels.filter((J,K)=>K+1>A),I.xvarvalues=I.varvalues.filter((J,K)=>K+1>A),I.xvarindices=I.varindices.filter((J,K)=>K+1>A).map(J=>J+1),I.varvaluesName=k.varvaluesName,I.varvaluesUnits=k.varvaluesUnits,I.varrev=k.varrev,I.prep=null;const G=nl($,I,k,r());I.stat={xexpvar:G.stat.xexpvar,yexpvar:G.stat.yexpvar},o(I),l(G),R(f,"success")}).catch($=>{console.error($),o(null),R(f,"error"),R(u,$,!0)}),!0)}function _(k){R(f,"neutral"),R(u,null),b(e.dataset,t(d),t(h),t(v))}function p(){R(f,"neutral"),R(m,null),l(null),o(null),R(u,null)}let w=g(()=>e.dataset?Math.min(e.dataset.values.nrows-2-r().length,e.dataset.values.ncols-e.dataset.nresp-s().length-1,50):null);we(()=>{e.dataset===null&&p()}),we(()=>{R(d,t(w)?Math.min(t(w),20):null,!0)});var T=Wv(),y=U(T);{var S=k=>{var j=Fv(),B=U(j);{var Y=I=>{ie(I,{name:"ncomp",label:"# of LVs",children:(G,J)=>{ln(G,{id:"ncomp",min:1,get max(){return t(w)},step:1,decNum:0,get value(){return t(d)},set value(K){R(d,K,!0)}})},$$slots:{default:!0}})};D(B,I=>{t(d)&&t(w)&&I(Y)})}var A=q(B,2);ie(A,{name:"center",label:"Center",children:(I,G)=>{Wt(I,{id:"center",options:["no","yes"],get value(){return t(h)},set value(J){R(h,J,!0)}})},$$slots:{default:!0}});var O=q(A,2);ie(O,{name:"scale",label:"Scale",children:(I,G)=>{Wt(I,{id:"scale",options:["no","yes"],get value(){return t(v)},set value(J){R(v,J,!0)}})},$$slots:{default:!0}});var $=q(O,2);ie($,{name:"create-model",label:" ",children:(I,G)=>{tt(I,{onclick:_,text:"Create model"})},$$slots:{default:!0}}),E(k,j)};D(y,k=>{e.dataset&&!o()&&t(f)!=="computing"&&k(S)})}var L=q(y,2);{var N=k=>{var j=he(),B=U(j);Fs(B,()=>t(m),Y=>{ie(Y,{name:"spinner",children:(A,O)=>{var $=Ov(),I=U($);ol(I),E(A,$)},$$slots:{default:!0}})},void 0,(Y,A)=>{ie(Y,{name:"error",status:"error",children:(O,$)=>{var I=zv(),G=W(I);le(()=>Te(G,t(A))),E(O,I)},$$slots:{default:!0}})}),E(k,j)};D(L,k=>{t(m)&&k(N)})}var P=q(L,2);{var M=k=>{var j=Yv(),B=U(j);ie(B,{name:"info",children:(O,$)=>{var I=Vv(),G=U(I),J=q(W(G)),K=q(G,2);ar(K,{onclick:p}),le(()=>Te(J,` ${o().ncomp??""} LVs${o().center?", centered":""}${o().scale?", scaled":""}`)),E(O,I)},$$slots:{default:!0}});var Y=q(B,2);{var A=O=>{ie(O,{name:"download-buttons",label:"Download",children:($,I)=>{var G=Bv(),J=W(G);tt(J,{onclick:()=>c()(l(),e.dataset,"train",r()),text:"Results"});var K=q(J,2);tt(K,{onclick:()=>a()(o()),text:"Model"}),E($,G)},$$slots:{default:!0}})};D(Y,O=>{a()&&c()&&O(A)})}E(k,j)};D(P,k=>{o()&&o().ncomp&&k(M)})}var F=q(P,2);{var C=k=>{ie(k,{name:"error",status:"error",children:(j,B)=>{var Y=Dv(),A=W(Y);le(()=>Te(A,t(u))),E(j,Y)},$$slots:{default:!0}})};D(F,k=>{(t(f)==="error"||t(u))&&k(C)})}E(n,T),_e()}var Uv=H("<!> <!> <!>",1),Xv=H('<p class="svelte-7klqqw"> </p>'),Gv=H('<!> <p class="svelte-7klqqw">Computing PV-set...</p>',1),Kv=H('<p class="svelte-7klqqw"><span class="svelte-7klqqw">PV-set:</span> <br/> <span class="svelte-7klqqw">Size:</span> <span class="svelte-7klqqw">(X)</span> <span class="svelte-7klqqw">(Y)</span>,</p> <!> <!>',1),Jv=H('<p class="svelte-7klqqw"> </p>'),Zv=H("<!> <!> <!> <!>",1);function Qv(n,e){be(e,!0);let r=z(e,"outliers",19,()=>[]),s=z(e,"pvset",15),l=z(e,"pvres",15),o=z(e,"pvscalars",15),a=te("neutral"),c=te(""),f=te(Me(["ven","rand","loo"])),u=te("ven"),d=te(void 0),h=e.calset.values.nrows-r().length,v=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(C=>C>=h/(h-e.model.ncomp-1)&&C<=h/2):[],m=te(Me(v.length>0?v[0]:0));we(()=>{v.length===0&&(R(f,["loo"],!0),R(u,"loo"))});async function b(C,k,j,B){R(d,e.WASM().then(Y=>{const A=j.type=="loo"?0:j.type=="rand"?2:1,[O,$]=su(Y,k,C.values,C.nresp,k.ncomp,j.nseg,A,0,B);s({classLabelsVarname:C.classLabelsVarname,classNames:C.classNames,classes:C.classes,dec:C.dec,fileName:C.fileName+"-pcv",hasClassNames:C.hasClassNames,hasLabels:C.hasLabels,header:C.header,labelsVarname:C.labelsVarname,objindices:e.calres.objindices,objlabels:e.calres.objlabels,sep:C.sep,values:O,varAxisTitle:C.varAxisTitle,varindices:k.varindices,varlabels:k.varlabels,varrev:k.varrev,varvalues:k.varvalues,varvaluesName:k.varvaluesName,varvaluesUnits:k.varvaluesUnits,nresp:k.nresp}),l(nl(Y,k,s(),[])),o($)}).catch(Y=>{console.error(Y),s(null),l(null),R(a,"error"),R(c,Y,!0)}),!0)}function _(C){R(a,"neutral"),R(c,""),b(e.calset,e.model,{type:t(u),nseg:t(m)},r())}function p(){R(a,"neutral"),R(c,""),R(d,null),s(null),l(null)}we(()=>{e.model===null&&p()});var w=Zv(),T=U(w);{var y=C=>{var k=Uv(),j=U(k);ie(j,{name:"split",label:"Split type:",children:(O,$)=>{Ge(O,{id:"cvType",get options(){return t(f)},get value(){return t(u)},set value(I){R(u,I,!0)}})},$$slots:{default:!0}});var B=q(j,2);{var Y=O=>{ie(O,{name:"nseg",label:"Segments:",children:($,I)=>{Ge($,{id:"nseg",get options(){return v},get value(){return t(m)},set value(G){R(m,G,!0)}})},$$slots:{default:!0}})};D(B,O=>{t(u)!=="loo"&&O(Y)})}var A=q(B,2);ie(A,{name:"run-button",label:" ",children:(O,$)=>{tt(O,{onclick:_,text:"Compute PV-set"})},$$slots:{default:!0}}),E(C,k)};D(T,C=>{e.model&&!s()&&t(a)!=="busy"&&C(y)})}var S=q(T,2);{var L=C=>{var k=he(),j=U(k);Fs(j,()=>t(d),B=>{ie(B,{name:"spinner",children:(Y,A)=>{var O=Gv(),$=U(O);ol($),E(Y,O)},$$slots:{default:!0}})},void 0,(B,Y)=>{ie(B,{name:"error",status:"error",children:(A,O)=>{var $=Xv(),I=W($);le(()=>Te(I,t(Y))),E(A,$)},$$slots:{default:!0}})}),E(C,k)};D(S,C=>{t(d)&&C(L)})}var N=q(S,2);{var P=C=>{ie(C,{name:"info",children:(k,j)=>{var B=Kv(),Y=U(B),A=q(W(Y)),O=q(A,4),$=q(O,2),I=q(Y,2);Eu(I,{onclick:()=>pu(s(),e.calset.fileName+"-pv")});var G=q(I,2);ar(G,{onclick:p}),le(()=>{Te(A,` ${t(u)??""}
      ${t(u)!=="loo"?t(m)+" seg":""}`),Te(O,` ${s().values.nrows??""}×${s().values.ncols-s().nresp} `),Te($,`,
      ${s().values.nrows??""}×${s().nresp??""} `)}),E(k,B)},$$slots:{default:!0}})};D(N,C=>{s()&&C(P)})}var M=q(N,2);{var F=C=>{ie(C,{name:"error",status:"error",children:(k,j)=>{var B=Jv(),Y=W(B);le(()=>Te(Y,t(c))),E(k,B)},$$slots:{default:!0}})};D(M,C=>{t(a)==="error"&&t(c)&&C(F)})}E(n,w),_e()}var $v=H('<span style="font-weight:bold"> </span><br/>',1),eh=H('<span class="file-size svelte-1uxd0r7"> </span> <span>(X)</span>, <span class="file-size svelte-1uxd0r7"> </span> <span>(Y)</span>',1),th=H('<span class="file-size svelte-1uxd0r7"> </span>'),rh=H('<p class="dataset-info svelte-1uxd0r7"><!> <span>Data file:</span> <span class="file-name svelte-1uxd0r7"> </span><br/> <span>Size:</span> <!></p> <!>',1);function nh(n,e){be(e,!0);let r=z(e,"title",3,"");var s=he(),l=U(s);{var o=a=>{ie(a,{children:(c,f)=>{var u=rh(),d=U(u),h=W(d);{var v=y=>{var S=$v(),L=U(S),N=W(L);le(()=>Te(N,r())),E(y,S)};D(h,y=>{r()&&r()!==""&&y(v)})}var m=q(h,4),b=W(m),_=q(m,5);{var p=y=>{var S=eh(),L=U(S),N=W(L),P=q(L,4),M=W(P);le(()=>{Te(N,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),Te(M,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),E(y,S)},w=y=>{var S=th(),L=W(S);le(()=>Te(L,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),E(y,S)};D(_,y=>{e.dataset.nresp&&e.dataset.nresp>0?y(p):y(w,!1)})}var T=q(d,2);ar(T,{get onclick(){return e.reset}}),le(()=>{V(m,"title",e.dataset.fileName),Te(b,e.dataset.fileName)}),E(c,u)},$$slots:{default:!0}})};D(l,a=>{e.dataset&&a(o)})}E(n,s),_e()}var sh=H("<!> <!>",1),lh=H("<!> <!> <!> <!> <!>",1),oh=H("<!> <!>",1),ah=H("<p> </p>"),ih=H("<!> <p> </p>",1),ch=H("<p> </p>"),uh=H("<!> <!> <!>",1);function Cl(n,e){be(e,!0);let r=z(e,"model",3,null),s=z(e,"outliers",19,()=>[]),l=z(e,"respMandatory",3,!1),o=z(e,"title",3,""),a=z(e,"dataset",15),c=z(e,"resobj",15);const f=[",",";"],u=g(()=>r()?["no","yes"]:["no","labels","values"]);let d=te(void 0),h=te(""),v=te(""),m=!1,b=te(","),_=te("no"),p=te(!1),w=te(0),T=g(()=>l()?1:0),y=te(null),S=te("neutral"),L=te("");function N(Z){R(S,"error"),R(L,Z,!0),console.error(Z)}function P(){R(S,"neural"),R(L,"")}function M(){R(S,"success"),R(L,"")}function F(Z,ee,me){c()||R(y,e.WASM().then(ce=>{c(nl(ce,Z,ee,me,!0)),M()}).catch(ce=>{c(null),N(ce)}),!0)}function C(Z,ee){if(!Z||Z.size<10)return;const ce=Z.slice(0,1e5),fe=new FileReader;fe.onload=()=>{const pe=fe.result;!pe||pe.length<0||((Le=>{var xe=si(Le,5);R(b,xe[0],!0),R(p,xe[1],!0),m=xe[2],R(_,xe[3],!0),R(w,xe[4],!0)})(mu(pe,t(T))),ee&&t(_)!=="no"&&R(_,"yes"),M())},fe.onerror=function(pe){csvString=null,N("Error reading CSV file. "+pe)},fe.readAsText(ce)}function k(Z){try{const ee=du(Z,t(b),t(_)==="yes"?"labels":t(_),t(p),m,t(h),t(v),t(T));if(ee.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(ee.values.ncols-ee.nresp<2)throw new Error("Dataset should habe at least two predictors.");if(r()){const me=r().prep&&r().prep.npred?r().prep.npred:r().npred+r().exclvars.length,ce=l()?me+r().nresp:me;if(ee.values.ncols!==ce)throw new Error("Dataset has different number of columns than the training set.");ee.varrev=r().varrev,ee.header=r().header,ee.varlabels=r().varlabels,ee.varvalues=r().varvalues,ee.varindices=r().varindices,ee.varvaluesName=r().varvaluesName,ee.varvaluesUnits=r().varvaluesUnits}ee.fileName=t(d).name.replace(/\.[^/.]+$/,""),a(ee),M()}catch(ee){a(null),N(ee)}}function j(Z){const ee=new FileReader;ee.onload=()=>{k(ee.result)},ee.readAsText(t(d))}async function B(Z){try{const ee=t(d)instanceof FileList?t(d):[t(d)];a(await wu(ee)),M()}catch(ee){N("Failed to read SPC file: "+ee)}}function Y(){R(d,""),a(null),c(null),R(h,""),R(v,""),P()}we(()=>{if(!(t(d)===0||t(d)===void 0||a())){if(t(d)===null||t(d)===""){Y();return}if(Array.isArray(t(d))){if(t(d).filter(Z=>Z.slice(-4)===".spc").length!==t(d).length){N("Multiple file selection is allowed only for SPC files.");return}B(t(d));return}t(d)&&(t(d).type==="text/csv"||t(d).type==="application/vnd.ms-excel")?(C(t(d),r()),P()):B([t(d)])}}),we(()=>{t(b)&&P()}),we(()=>{if(a()&&r()&&!c()&&!t(L))try{F(r(),a(),s()),M()}catch(Z){a(null),c(null),N(Z)}});var A=uh(),O=U(A);{var $=Z=>{var ee=oh(),me=U(ee);Qr(me,()=>t(d)===void 0,pe=>{ie(pe,{children:(Le,xe)=>{var Se=he(),Pe=U(Se);{var Oe=ae=>{fs(ae,{id:"dataFile",message:"Select CSV file with dataset",get file(){return t(d)},set file(re){R(d,re,!0)}})},oe=ae=>{fs(ae,{id:"dataFile",message:"Select CSV or SPC file with dataset",acceptType:".csv, .spc",multiple:!0,get file(){return t(d)},set file(re){R(d,re,!0)}})};D(Pe,ae=>{l()?ae(Oe):ae(oe,!1)})}E(Le,Se)},$$slots:{default:!0}})});var ce=q(me,2);{var fe=pe=>{var Le=lh(),xe=U(Le);ie(xe,{label:"Delimiter",children:(re,de)=>{Ge(re,{id:"sep",get options(){return f},get value(){return t(b)},set value(ue){R(b,ue,!0)}})},$$slots:{default:!0}});var Se=q(xe,2);ie(Se,{label:"Row labels",children:(re,de)=>{Wt(re,{id:"hasLabels",options:["no","yes"],get value(){return t(p)},set value(ue){R(p,ue,!0)}})},$$slots:{default:!0}});var Pe=q(Se,2);ie(Pe,{label:"Header",children:(re,de)=>{Ge(re,{id:"header",get options(){return t(u)},get value(){return t(_)},set value(ue){R(_,ue,!0)}})},$$slots:{default:!0}});var Oe=q(Pe,2);{var oe=re=>{var de=sh(),ue=U(de);ie(ue,{label:"Header name (predictors)",children:(Ie,Ve)=>{ya(Ie,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return t(h)},set value(qe){R(h,qe,!0)}})},$$slots:{default:!0}});var ge=q(ue,2);ie(ge,{label:"Header units (predictors)",children:(Ie,Ve)=>{ya(Ie,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return t(v)},set value(qe){R(v,qe,!0)}})},$$slots:{default:!0}}),E(re,de)};D(Oe,re=>{t(_)==="values"&&re(oe)})}var ae=q(Oe,2);ie(ae,{label:" ",children:(re,de)=>{tt(re,{text:"Load",onclick:j})},$$slots:{default:!0}}),E(pe,Le)};D(ce,pe=>{t(d)&&!Array.isArray(t(d))&&(t(d).type==="text/csv"||t(d).type==="application/vnd.ms-excel")&&pe(fe)})}E(Z,ee)},I=Z=>{var ee=he(),me=U(ee);{var ce=fe=>{var pe=he(),Le=U(pe);Fs(Le,()=>t(y),xe=>{ie(xe,{children:(Se,Pe)=>{var Oe=ih(),oe=U(Oe);ol(oe);var ae=q(oe,2),re=W(ae);le(()=>Te(re,r()?"Loading data and apply model...":"Loading data...")),E(Se,Oe)},$$slots:{default:!0}})},void 0,(xe,Se)=>{ie(xe,{status:"error",children:(Pe,Oe)=>{var oe=ah(),ae=W(oe);le(()=>Te(ae,t(Se))),E(Pe,oe)},$$slots:{default:!0}})}),E(fe,pe)};D(me,fe=>{t(y)&&fe(ce)})}E(Z,ee)};D(O,Z=>{a()?Z(I,!1):Z($)})}var G=q(O,2);{var J=Z=>{nh(Z,{get dataset(){return a()},reset:Y,get title(){return o()}})};D(G,Z=>{a()&&Z(J)})}var K=q(G,2);{var se=Z=>{ie(Z,{status:"error",children:(ee,me)=>{var ce=ch(),fe=W(ce);le(()=>Te(fe,t(L))),E(ee,ce)},$$slots:{default:!0}})};D(K,Z=>{(t(S)==="error"||t(L))&&Z(se)})}E(n,A),_e()}var fh=H('<div class="msg-select"> </div>'),dh=H('<div class="msg-select"> </div>'),vh=H('<div class="msg-select"> </div>'),hh=H('<div class="msg-select"> </div>'),mh=H('<div class="selected-buttons svelte-188sk7n"><!></div>'),gh=H('<div class="selected-buttons svelte-188sk7n"><!></div>'),ph=H("<!> <!> <!>",1),bh=H("<button> </button>"),_h=H('<div class="plot-panel svelte-188sk7n"><div class="plot-area svelte-188sk7n"><div class="plot svelte-188sk7n"><!></div> <div class="plot-select-msg svelte-188sk7n"><!> <!></div></div> <div class="plot-controls-area svelte-188sk7n"></div></div>');function Al(n,e){be(e,!0);let r=z(e,"selobjText",3,"Click to select an object..."),s=z(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=z(e,"clearText",3,"Click anywhere to remove selection..."),o=z(e,"params",15),a=Me({objects:-1,variables:[]}),c=te(Me(Object.keys(e.plots)[0]));function f(F,C){a.objects=C?C[F]:F}function u(F){a.objects=-1}function d(F){a.variables=F}function h(F){a.variables=[]}let v={objects:{select:f,unselect:u},variables:{select:d,unselect:h},stats:{}},m=g(()=>t(c)?e.plots[t(c)]:null),b=g(()=>t(m)?t(m).component:null);var _=_h(),p=W(_),w=W(p),T=W(w);Rn(T,()=>t(b),(F,C)=>{C(F,{get params(){return o()[t(c)]},get callbacks(){return v[t(m).scope]},get selected(){return a[t(m).scope]},get props(){return e.props}})});var y=q(w,2),S=W(y);{var L=F=>{var C=he(),k=U(C);{var j=Y=>{var A=fh(),O=W(A);le(()=>Te(O,r())),E(Y,A)},B=Y=>{var A=dh(),O=W(A);le(()=>Te(O,l())),E(Y,A)};D(k,Y=>{a[t(m).scope]<0?Y(j):Y(B,!1)})}E(F,C)};D(S,F=>{t(m).scope==="objects"&&o()[t(c)].plotType!=="l"&&r().length>0&&F(L)})}var N=q(S,2);{var P=F=>{var C=he(),k=U(C);{var j=Y=>{var A=vh(),O=W(A);le(()=>Te(O,s())),E(Y,A)},B=Y=>{var A=hh(),O=W(A);le(()=>Te(O,l())),E(Y,A)};D(k,Y=>{a[t(m).scope].length===0?Y(j):Y(B,!1)})}E(F,C)};D(N,F=>{t(m).scope==="variables"&&o()[t(c)].plotType!=="l"&&s().length>0&&F(P)})}var M=q(p,2);Be(M,21,()=>Object.keys(e.plots),Ye,(F,C)=>{var k=he(),j=U(k);{var B=A=>{var O=ph(),$=U(O);Hu($,{get title(){return t(m).label},labelWidth:12,get options(){return e.controls[t(c)]},get value(){return o()[t(c)]},set value(se){o(o()[t(c)]=se,!0)}});var I=q($,2);{var G=se=>{var Z=mh(),ee=W(Z);Cr(ee,()=>t(m).buttons,()=>a.objects),E(se,Z)};D(I,se=>{t(m).scope==="objects"&&t(m).buttons&&a.objects>=0&&se(G)})}var J=q(I,2);{var K=se=>{var Z=gh(),ee=W(Z);Cr(ee,()=>t(m).buttons,()=>a.variables),E(se,Z)};D(J,se=>{t(m).scope==="variables"&&t(m).buttons&&a.variables.length>0&&se(K)})}E(A,O)},Y=A=>{var O=bh();O.__keydown=()=>switchPlot(i),O.__click=()=>R(c,t(C),!0);var $=W(O);le(()=>{ct(O,1,`plot-selector plot-selector-${t(C)??""}`,"svelte-188sk7n"),Te($,e.plots[t(C)].label)}),E(A,O)};D(j,A=>{t(m)&&t(c)===t(C)?A(B):A(Y,!1)})}E(F,k)}),E(n,_),_e()}st(["keydown","click"]);var wh=Ae("<text> </text>"),yh=Ae('<g class="series series-textlabels"></g>'),xh=Ae('<g class="series series-line"><polyline class="line"></polyline></g>'),kh=Ae("<rect></rect>"),Eh=Ae('<g class="series series-bar"></g>'),Sh=Ae("<text> </text>"),Ch=Ae('<g class="series series-points series-points1"></g>'),Ah=Ae('<rect width="100%" height="100%" fill="#ffffff00"></rect>'),Th=Ae('<g class="series series-points series-points1"><text> </text></g>'),Ph=Ae('<g class="series series-bar"><rect></rect></g>'),Nh=Ae('<g class="series series-text"><text> </text></g>'),Lh=Ae("<!><!><!>",1),jh=Ae("<!><!><!><!><!>",1);function Ht(n,e){be(e,!0);let r=z(e,"shortenLabels",3,!0),s=z(e,"lineWidth",3,1),l=z(e,"nBars",3,1),o=z(e,"barNum",3,1),a=z(e,"markerSize",3,null),c=z(e,"markerWidth",3,2),f=z(e,"marker",3,1),u=z(e,"colors",3,void 0),d=z(e,"filled",3,void 0),h=z(e,"mainColor",19,()=>Vr.cal),v=z(e,"faceColor",3,null),m=z(e,"lineColor",19,h),b=z(e,"selected",19,()=>-1),_=z(e,"maskSelected",3,!0),p=z(e,"xRange",15),w=z(e,"yRange",15),T=z(e,"ind",3,null);function y(ae){!e.callbacks||!e.callbacks.select||an(ae,ae.target.tagName,re=>e.callbacks.select(re,T()))}function S(ae){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}const L=Nt("axes"),N=g(()=>Et(e.xValues,"PlotSeries")),P=g(()=>t(N)?Et(e.yValues,"PlotSeries",t(N).length):null);we(()=>{if(T()){const ae=T().map(re=>re+1);p(t(N)?Tr(t(N).subset(ae)):null),w(t(P)?Tr(t(P).subset(ae)):null)}else p(t(N)?Tr(t(N)):null),w(t(P)?Tr(t(P)):null)});const M=g(()=>v()===null?e.plotType==="p"?"transparent":"white":v()),F=[1,.8,.8,.8,.8,.8,.8,.8],C=[.85,.65,.65,.65,.65,.65,.65,.65],k=g(()=>a()?a():e.plotType==="p"?F[f()-1]:C[f()-1]),j=g(()=>xn[f()-1]),B=g(()=>ul[L.scales().plot]),Y=g(()=>lt([0],L.tY())[0]),A=g(()=>Yn([.8],L.tX())[0]),O=g(()=>e.plotType==="h"?t(A)/l():0),$=g(()=>e.plotType==="h"?t(A)/2-(o()-1)*t(O):0),I=g(()=>t(B));let G=g(()=>e.plotType==="l"||e.plotType==="b"?vl(t(N),t(P),L.tX(),L.tY()):null),J=g(()=>t(N)?lt(t(N),L.tX()):null),K=g(()=>t(P)?lt(t(P),L.tY()):null),se=g(()=>e.labels&&Array.isArray(e.labels)?r()?e.labels.map(ae=>ae.slice(0,Va)):e.labels:null);const Z=g(()=>T()?T():Pr(0,t(J).length-1));let ee=g(()=>u()&&u().length===t(N).length?u():Array(t(N).length).fill(h())),me=g(()=>d()&&d().length===t(N).length?d().map(ae=>ae?"ff":"30"):Array(t(N).length).fill("30")),ce=g(()=>u()&&u().length===t(N).length?u().map((ae,re)=>ae+t(me)[re]):Array(t(N).length).fill(v()));const fe=g(()=>`font-size:${t(k)}em;fill:${t(M)};cursor:default;text-anchor:middle;stroke-width:${c()}px;user-select:none;`),pe=`font-size:0.85em;fill:${vs};cursor:default;text-anchor:middle;stroke:${vs};stroke-width:0.1px;user-select:none;`,Le=g(()=>`font-size:${t(k)}em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:2px;user-select:none;`),xe=g(()=>`fill:transparent;stroke-width:${s()}px;`),Se=g(()=>`stroke-width:${s()}px;stroke:${m()}`);we(()=>{b()&&T()&&T().indexOf(b())<0&&e.callbacks.unselect()});var Pe=he(),Oe=U(Pe);{var oe=ae=>{var re=jh(),de=U(re);{var ue=ve=>{var Ne=yh();Be(Ne,21,()=>t(Z),Ye,(Re,Fe)=>{var De=wh(),Ue=W(De);le(()=>{V(De,"opacity",t(Fe)===b()),V(De,"x",t(J)[t(Fe)]-t($)+t(O)/2),V(De,"y",t(K)[t(Fe)]),V(De,"dy",t(P).v[t(Fe)]<0?t(I):-t(I)),Te(Ue,t(se)[t(Fe)])}),E(Re,De)}),le(()=>ot(Ne,pe+(b()>=0?"opacity:0.2;":""))),E(ve,Ne)};D(de,ve=>{e.showLabels&&t(se)&&ve(ue)})}var ge=q(de);{var Ie=ve=>{var Ne=xh(),Re=W(Ne);le(()=>{ot(Ne,t(xe)),V(Re,"points",t(G)),V(Re,"stroke",h())}),E(ve,Ne)};D(ge,ve=>{(e.plotType==="l"||e.plotType==="b")&&ve(Ie)})}var Ve=q(ge);{var qe=ve=>{var Ne=Eh();Ne.__click=y,Be(Ne,21,()=>t(Z),Ye,(Re,Fe)=>{var De=kh();le(()=>{V(De,"x",t(J)[t(Fe)]-t($)),V(De,"y",t(P).v[t(Fe)]<0?t(Y):t(K)[t(Fe)]),V(De,"fill",t(ee)[t(Fe)]),V(De,"width",t(O)),V(De,"height",t(P).v[t(Fe)]<0?t(K)[t(Fe)]-t(Y):t(Y)-t(K)[t(Fe)])}),E(Re,De)}),le(()=>ot(Ne,t(Se)+(b()>=0?"opacity:0.2;":""))),E(ve,Ne)};D(Ve,ve=>{e.plotType==="h"&&ve(qe)})}var X=q(Ve);{var Q=ve=>{var Ne=Ch();Ne.__click=y,Be(Ne,21,()=>t(Z),Ye,(Re,Fe)=>{var De=Sh(),Ue=W(De);le(()=>{V(De,"x",t(J)[t(Fe)]),V(De,"y",t(K)[t(Fe)]),V(De,"fill",t(ce)[t(Fe)]),V(De,"stroke",t(ee)[t(Fe)]),Te(Ue,t(j))}),E(Re,De)}),le(()=>ot(Ne,t(fe)+(b()>=0?"opacity:0.2;":""))),E(ve,Ne)};D(X,ve=>{(e.plotType==="p"||e.plotType==="b")&&ve(Q)})}var ne=q(X);{var ye=ve=>{var Ne=Lh(),Re=U(Ne);{var Fe=Tt=>{var _t=Ah();V(_t,"x",0),V(_t,"y",0),_t.__click=S,E(Tt,_t)};D(Re,Tt=>{_()&&Tt(Fe)})}var De=q(Re);{var Ue=Tt=>{var _t=Th(),ut=W(_t),Ce=W(ut);le(()=>{ot(_t,t(Le)),V(ut,"x",t(J)[b()]),V(ut,"y",t(K)[b()]),V(ut,"stroke",t(ee)[b()]),V(ut,"fill",t(ce)[b()]),Te(Ce,t(j))}),E(Tt,_t)},vt=Tt=>{var _t=Ph(),ut=W(_t);le(()=>{ot(_t,t(Se)),V(ut,"stroke",t(ee)[b()]),V(ut,"fill",t(ee)[b()]),V(ut,"x",t(J)[b()]-t($)),V(ut,"y",t(P).v[b()]<0?t(Y):t(K)[b()]),V(ut,"width",t(O)),V(ut,"height",t(P).v[b()]<0?t(K)[b()]-t(Y):t(Y)-t(K)[b()])}),E(Tt,_t)};D(De,Tt=>{e.plotType!=="h"?Tt(Ue):Tt(vt,!1)})}var mr=q(De);{var ql=Tt=>{var _t=Nh(),ut=W(_t),Ce=W(ut);le(()=>{ot(_t,pe),V(ut,"stroke",Oa),V(ut,"fill",Oa),V(ut,"x",t(J)[b()]),V(ut,"y",t(K)[b()]),V(ut,"dy",t(P).v[b()]<0?t(I):-t(I)),Te(Ce,t(se)[b()])}),E(Tt,_t)};D(mr,Tt=>{e.showLabels&&t(se)&&t(se).length>0&&Tt(ql)})}E(ve,Ne)};D(ne,ve=>{b()>=0&&ve(ye)})}E(ae,re)};D(Oe,ae=>{t(J)&&t(K)&&ae(oe)})}E(n,Pe),_e()}st(["click"]);var Mh=H("<!> <!> <!> <!>",1);function Ua(n,e){be(e,!0);let r=g(()=>e.props?e.props.res:null),s=g(()=>t(r)?Object.keys(t(r)):null),l=g(()=>e.params&&e.params.resID&&t(s)?e.params.resID==="both"?t(s):[e.params.resID]:null),o=g(()=>t(l)?t(r)[t(l)[0]]:null);const a={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"},c=g(()=>e.params.varSet==="X"?"x":"y"),f=g(()=>e.params.varForm==="cumulative"?"cum":""),u=g(()=>e.params.varType==="explained"?"exp":"res"),d=g(()=>t(f)+t(u)+"var"),h=g(()=>t(c)+t(f)+t(u)+"var"),v=g(()=>t(d)?a[t(d)]+" ("+e.params.varSet+")":""),m=g(()=>t(o).ncomp>1?1-t(o).ncomp*.065:-.1),b=g(()=>t(o).ncomp>1?t(o).ncomp*1.065:2.1),_=g(()=>[t(m),t(b)]),p=g(()=>t(o)?t(o).stat.components:null),w=g(()=>t(l)?t(l).map(M=>{const F=t(r)[M].stat[t(h)];return{yValues:He(F),labels:Array.from(F).map(C=>C.toFixed(C<.1?3:2)),faceColor:za[M],mainColor:Vr[M],marker:Or[M]}}):null),T=g(()=>t(w)?It(t(w).map(M=>Math.min(-.05,It(M.yValues)))):0),y=g(()=>[t(T)*1.1,1.1]),S=g(()=>Un(t(l)));var L=he(),N=U(L);{var P=M=>{{let F=g(()=>"plot-"+t(h));hr(M,{get title(){return t(v)},get limX(){return t(_)},get limY(){return t(y)},xLabel:"Number of LVs",yLabel:"Variance",get fileName(){return t(F)},whole:!0,children:(C,k)=>{var j=Mh(),B=U(j);{var Y=G=>{{let J=g(()=>[e.props.ncomp]),K=g(()=>[e.props.ncomp]),se=g(()=>[t(y)[0]]),Z=g(()=>[t(y)[1]]);cn(G,{get xStart(){return t(J)},get xEnd(){return t(K)},get yStart(){return t(se)},get yEnd(){return t(Z)},lineColor:"#a0a0a0"})}};D(B,G=>{e.props.ncomp&&G(Y)})}var A=q(B,2);Be(A,17,()=>t(w),Ye,(G,J)=>{Ht(G,{get xValues(){return t(p)},get yValues(){return t(J).yValues},get labels(){return t(J).labels},get faceColor(){return t(J).faceColor},get mainColor(){return t(J).mainColor},get marker(){return t(J).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var O=q(A,2);{var $=G=>{var J=he(),K=U(J);Be(K,17,()=>t(w),Ye,(se,Z)=>{{let ee=g(()=>[t(p)[e.props.ncomp-1]]),me=g(()=>[t(Z).yValues.v[e.props.ncomp-1]]);Ht(se,{get xValues(){return t(ee)},get yValues(){return t(me)},get faceColor(){return t(Z).faceColor},get mainColor(){return t(Z).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},get marker(){return t(Z).marker},markerWidth:3})}}),E(G,J)};D(O,G=>{e.props.ncomp&&G($)})}var I=q(O,2);Dn(I,{get items(){return t(S)}}),E(C,j)},$$slots:{default:!0}})}};D(N,M=>{t(p)&&t(w)&&M(P)})}E(n,L),_e()}var qh=H("<!> <!> <!> <!>",1);function Xa(n,e){be(e,!0);const r={rmse:"RMSE",r2:"R^2",slope:"Slope"};let s=g(()=>e.props?e.props.res:null),l=g(()=>t(s)?Object.keys(t(s)):null),o=g(()=>e.params&&e.params.resID&&t(l)?e.params.resID==="both"?t(l):[e.params.resID]:null),a=g(()=>t(o)?t(s)[t(o)[0]]:null),c=g(()=>e.params?r[e.params.fom]:""),f=g(()=>e.params?r[e.params.fom]+" ("+t(a).varlabels[e.params.resp-1]+")":""),u=g(()=>t(a).ncomp>1?1-t(a).ncomp*.065:-.1),d=g(()=>t(a).ncomp>1?t(a).ncomp*1.065:2.1),h=g(()=>[t(u),t(d)]),v=g(()=>t(a)?t(a).stat.components:null),m=g(()=>{if(!t(o))return null;let S=0,L=Number.NEGATIVE_INFINITY,N=[];for(let P of t(o)){const M=t(s)[P].stat[e.params.fom].getcolref(e.params.resp);S=Math.min(S,It(M)),L=Math.max(L,Dt(M)),N.push({yValues:He(M),labels:Array.from(M).map(F=>F.toFixed(F<.1?3:2)),faceColor:za[P],mainColor:Vr[P],marker:Or[P]})}return{yMin:S,yMax:L,values:N}}),b=g(()=>Un(t(o)));const _=g(()=>t(m)?(t(m).yMax-t(m).yMin)*.05:0),p=g(()=>t(m)?[t(m).yMin-t(_),t(m).yMax+4*t(_)]:[0,1]);var w=he(),T=U(w);{var y=S=>{{let L=g(()=>"plot-"+e.params.fom);hr(S,{get title(){return t(f)},get limX(){return t(h)},get limY(){return t(p)},get yLabel(){return t(c)},xLabel:"Number of LVs",get fileName(){return t(L)},whole:!0,children:(N,P)=>{var M=qh(),F=U(M);{var C=A=>{{let O=g(()=>[e.props.ncomp]),$=g(()=>[e.props.ncomp]),I=g(()=>[t(p)[0]]),G=g(()=>[t(p)[1]]);cn(A,{get xStart(){return t(O)},get xEnd(){return t($)},get yStart(){return t(I)},get yEnd(){return t(G)},lineColor:"#a0a0a0"})}};D(F,A=>{e.props.ncomp&&A(C)})}var k=q(F,2);Be(k,17,()=>t(m).values,Ye,(A,O)=>{Ht(A,{get xValues(){return t(v)},get yValues(){return t(O).yValues},get labels(){return t(O).labels},get faceColor(){return t(O).faceColor},get mainColor(){return t(O).mainColor},get marker(){return t(O).marker},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var j=q(k,2);{var B=A=>{var O=he(),$=U(O);Be($,17,()=>t(m).values,Ye,(I,G)=>{{let J=g(()=>[t(v)[e.props.ncomp-1]]),K=g(()=>[t(G).yValues.v[e.props.ncomp-1]]);Ht(I,{get xValues(){return t(J)},get yValues(){return t(K)},get faceColor(){return t(G).mainColor},get mainColor(){return t(G).mainColor},get marker(){return t(G).marker},plotType:"b",get showLabels(){return e.params.showLabels},markerWidth:3})}}),E(A,O)};D(j,A=>{e.props.ncomp&&A(B)})}var Y=q(j,2);Dn(Y,{get items(){return t(b)}}),E(N,M)},$$slots:{default:!0}})}};D(T,S=>{t(v)&&t(m)&&S(y)})}E(n,w),_e()}var Rh=H("<!> <!>",1),Ih=H("<!> <!> <!> <!>",1);function Tl(n,e){be(e,!0);const r=g(()=>e.props&&e.props.resgetter?e.props.resgetter:bt),s=g(()=>e.props?e.props.res:null),l=g(()=>t(s)?Object.keys(t(s)):null),o=g(()=>e.params&&e.params.resID&&t(l)?e.params.resID==="both"?t(l):[e.params.resID]:null),a=g(()=>t(o)&&t(s)[t(o)[0]]?t(s)[t(o)[0]]:null),c=g(()=>!!(t(a)&&t(a).Yref)),f=g(()=>e.props.ncomp?" (A = "+e.props.ncomp+")":""),u=g(()=>t(a)?"Predictions for "+t(a).varlabels[e.params.resp-1]+t(f):""),d=g(()=>t(c)?"Reference y-values":"Objects"),h=g(()=>{if(!t(a)||!t(a).stat||!e.params.showStat||e.params.resID==="both")return null;const y=e.params.resID,S=e.props.ncomp?e.props.ncomp:1,L=t(s)[y].stat.rmse.getcolref(e.params.resp)[S-1],N=t(s)[y].stat.r2.getcolref(e.params.resp)[S-1],P=t(s)[y].stat.slope.getcolref(e.params.resp)[S-1];return'<tspan x="5em" dy="1.5em">RMSE: '+L.toFixed(2)+'</tspan><tspan x="5em" dy="1.5em">R2: '+N.toFixed(3)+'</tspan><tspan x="5em" dy="1.5em">Slope: '+P.toFixed(3)+"</tspan></tspan>"}),v=g(()=>{if(!t(o)||!t(a))return null;let y=e.params.resp?Number.POSITIVE_INFINITY:null,S=e.params.resp?Number.NEGATIVE_INFINITY:null,L=0,N=[],P="";for(let M of t(o)){const F=t(s)[M],C=F.Yref?F.Yref.getcolref(e.params.resp):F.objindices.map(Y=>Y+1),k=t(r)(F,"Yp",e.props.ncomp,e.params.resp),j=Qo(C,k)/Fn(C),B=sr(k)-j*sr(C);y=Math.min(y,It(C),It(k)),S=Math.max(S,Dt(C),Dt(k)),L+=C.length,N.push({xValues:He(C),yValues:He(k),lineX:[y,S],lineY:[B+j*y,B+j*S],labels:e.params.showLabels==="labels"?F.objlabels:Cd(k,y,S),faceColor:Wn[M],mainColor:Vr[M],marker:Or[M],stats:P})}return{vMin:y,vMax:S,vNum:L,values:N}});let m=g(()=>Un(t(o)));const b=g(()=>t(v)?(t(v).vMax-t(v).vMin)*.075:null),_=g(()=>t(b)?[t(v).vMin-t(b),t(v).vMax+t(b)]:[0,1]);var p=he(),w=U(p);{var T=y=>{{let S=g(()=>t(c)?t(_):[0,t(v).vNum+1]);hr(y,{get title(){return t(u)},get xLabel(){return t(d)},get limX(){return t(S)},get limY(){return t(_)},yLabel:"Predicted y-values",fileName:"plot-predictions",get onclick(){return e.callbacks.unselectObject},children:(L,N)=>{var P=Ih(),M=U(P);{var F=Y=>{vr(Y,{get xValues(){return t(_)},get yValues(){return t(_)},lineColor:"#d0d0d0"})};D(M,Y=>{t(c)&&Y(F)})}var C=q(M,2);Be(C,17,()=>t(v).values,Ye,(Y,A)=>{var O=Rh(),$=U(O);{var I=J=>{vr(J,{get xValues(){return t(A).lineX},get yValues(){return t(A).lineY},get lineColor(){return t(A).mainColor}})};D($,J=>{t(c)&&J(I)})}var G=q($,2);{let J=g(()=>e.params.showLabels!=="hide"),K=g(()=>t(c)?"p":"h");Ht(G,{get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return t(A).xValues},get yValues(){return t(A).yValues},get faceColor(){return t(A).faceColor},get mainColor(){return t(A).mainColor},get labels(){return t(A).labels},get marker(){return t(A).marker},get showLabels(){return t(J)},get plotType(){return t(K)}})}E(Y,O)});var k=q(C,2);{var j=Y=>{{let A=g(()=>[t(_)[0]]),O=g(()=>[t(_)[1]-t(b)]);un(Y,{textSize:.85,pos:0,get xValues(){return t(A)},get yValues(){return t(O)},get labels(){return t(h)}})}};D(k,Y=>{t(h)&&Y(j)})}var B=q(k,2);Dn(B,{get items(){return t(m)},position:"bottomright"}),E(L,P)},$$slots:{default:!0}})}};D(w,y=>{t(v)&&y(T)})}E(n,p),_e()}var Fh=H("<!> <!>",1),zh=H("<!> <!> <!>",1);function Pl(n,e){be(e,!0);let r=g(()=>e.props?e.props.model:null),s=g(()=>e.props?e.props.res:null),l=g(()=>t(s)?Object.keys(t(s)):null),o=g(()=>e.params&&e.params.resID&&t(l)?e.params.resID==="both"?t(l):[e.params.resID]:null),a=g(()=>t(o)?t(s)[t(o)[0]]:null);const c="Scores";function f(T,y){return T==="X"?"X":T==="Y"?"Y":y==="x"?"X":"Y"}function u(T,y,S,L){return(T==="X"||T==="Y")&&L==="x"?y:S}function d(T,y){const S=f(T.varSet,y),L=u(T.varSet,T.comp1,T.comp2,y),N=t(r).stat[S.toLocaleLowerCase()+"expvar"][L-1]*100;return S+"-scores (LV"+L+", "+N.toFixed(N>1?1:2)+"%)"}let h=g(()=>{if(!t(o)||!t(a))return null;let T=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,L=Number.NEGATIVE_INFINITY,N=[];for(let k of t(o)){const j=t(s)[k],B=e.params.varSet==="X"|e.params.varSet==="XY"?bt(j,"xscores",e.params.varSet==="XY"?e.params.comp2:e.params.comp1):bt(j,"yscores",e.params.comp1),Y=e.params.varSet==="X"?bt(j,"xscores",e.params.comp2):bt(j,"yscores",e.params.comp2);T=Math.min(T,It(B)),y=Math.min(y,It(Y)),S=Math.max(S,Dt(B)),L=Math.max(L,Dt(Y)),N.push({xValues:He(B),yValues:He(Y),labels:j.objlabels,marker:Or[k],faceColor:Wn[k],mainColor:Vr[k]})}const P=(S-T)*.05,M=(L-y)*.05,F=[T-P,S+P],C=[y-M,L+M];return{limX:F,limY:C,values:N}});const v=g(()=>d(e.params,"x")),m=g(()=>d(e.params,"y"));let b=g(()=>Un(t(o)));var _=he(),p=U(_);{var w=T=>{{let y=g(()=>"plot-"+e.params.varSet.toLowerCase()+"scores");hr(T,{title:c,get xLabel(){return t(v)},get yLabel(){return t(m)},get limX(){return t(h).limX},get limY(){return t(h).limY},get fileName(){return t(y)},get onclick(){return e.callbacks.unselectObject},children:(S,L)=>{var N=zh(),P=U(N);{var M=k=>{var j=Fh(),B=U(j);{let A=g(()=>[t(h).limY[0]]),O=g(()=>[t(h).limY[1]]);cn(B,{xStart:[0],xEnd:[0],get yStart(){return t(A)},get yEnd(){return t(O)},get lineColor(){return Hn}})}var Y=q(B,2);{let A=g(()=>[t(h).limX[0]]),O=g(()=>[t(h).limX[1]]);cn(Y,{yStart:[0],yEnd:[0],get xStart(){return t(A)},get xEnd(){return t(O)},get lineColor(){return Hn}})}E(k,j)};D(P,k=>{e.props.ncomp&&k(M)})}var F=q(P,2);Be(F,17,()=>t(h).values,Ye,(k,j)=>{Ht(k,{get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return t(j).xValues},get yValues(){return t(j).yValues},get faceColor(){return t(j).faceColor},get mainColor(){return t(j).mainColor},get marker(){return t(j).marker},get labels(){return t(j).labels},get showLabels(){return e.params.showLabels},plotType:"p",lineWidth:1.5})});var C=q(F,2);Dn(C,{get items(){return t(b)}}),E(S,N)},$$slots:{default:!0}})}};D(p,T=>{t(h)&&T(w)})}E(n,_),_e()}var Oh=H("<!> <!> <!>",1),Vh=H("<!> <!> <!>",1);function Ga(n,e){be(e,!0);function r(ce,fe,pe){if(pe<10)return Math.round(Math.log2(pe)+1);const Le=2*ce/Math.pow(pe,.3333333);return Math.round(fe/Le)}const s=g(()=>e.props&&e.props.resgetter?e.props.resgetter:bt),l={p:"Reference y-values",qq:"Standard normal quantiles, z",h:"Residuals, e"},o={p:"Residuals, e",qq:"Sample quantiles, e",h:"Counts"},a=g(()=>e.props.res[e.params.resID]),c=g(()=>e.props.ncomp?" (A = "+e.props.ncomp+")":""),f=g(()=>t(a)?"Residuals for "+t(a).varlabels[e.params.resp-1]+t(c):""),u=g(()=>l[e.params.plotType]),d=g(()=>o[e.params.plotType]),h=g(()=>t(a)?t(a).Yref.getcolref(e.params.resp):null),v=g(()=>t(a)?t(s)(t(a),"Yp",e.props.ncomp,e.params.resp):null),m=g(()=>t(h)&&t(v)?new Ee(t(h).map((ce,fe)=>ce-t(v)[fe])):null),b=g(()=>t(m)?t(m).sort():null),_=g(()=>t(a)?Wc(t(a).nrows):null),p=g(()=>t(_)?is(t(_)):null),w=g(()=>t(b)?t(b).v[Math.round(t(b).length*.25)]:null),T=g(()=>t(b)?t(b).v[Math.round(t(b).length*.75)]:null),y=g(()=>t(w)&&t(T)?t(T)-t(w):null),S=g(()=>t(y)?t(y)/1.348:1),L=g(()=>t(w)&&t(S)?t(w)+t(S)*.674:0),N=g(()=>[-4*t(S)+t(L),4*t(S)+t(L)]),P=[-4,4],M=g(()=>t(a)?t(a).nrows:1),F=g(()=>t(m)?Tr(t(m)):null),C=g(()=>t(y)&&t(M)&&t(F)?r(t(y),t(F)[1]-t(F)[0],t(M)):10),k=g(()=>t(m)?os(t(m),t(C)):null),j=g(()=>t(k)?Ko(t(m),t(k)):null),B=g(()=>t(k)?Jo(t(k)):null),Y=g(()=>t(m)?Array.from(t(m).sortind().v):null),A=g(()=>e.params.plotType==="p"?t(a).objlabels:t(Y).map(ce=>t(a).objlabels[ce-1])),O=g(()=>t(m)?e.params.plotType==="p"?new Ee(t(h)):e.params.plotType==="qq"?t(p):t(B):null),$=g(()=>t(m)?e.params.plotType==="p"?t(m):e.params.plotType==="qq"?t(b):t(j):null),I=g(()=>Vr[e.params.resID]),G=g(()=>Wn[e.params.resID]),J=g(()=>Or[e.params.resID]),K=g(()=>t(O)?dr(t(O)):[0,1]),se=g(()=>t($)?dr(t($)):[0,1]);var Z=he(),ee=U(Z);{var me=ce=>{hr(ce,{get title(){return t(f)},get xLabel(){return t(u)},get limX(){return t(K)},get limY(){return t(se)},get yLabel(){return t(d)},fileName:"plot-yresiduals",get onclick(){return e.callbacks.unselectObject},children:(fe,pe)=>{var Le=he(),xe=U(Le);{var Se=Oe=>{var oe=Oh(),ae=U(oe);Ht(ae,{get xValues(){return t(O)},get yValues(){return t($)},get mainColor(){return t(I)},get faceColor(){return t(G)},get marker(){return t(J)},plotType:"p"});var re=q(ae,2);vr(re,{get xValues(){return P},get yValues(){return t(N)},lineColor:"#606060"});var de=q(re,2);{var ue=ge=>{un(ge,{get xValues(){return t(O)},get yValues(){return t($)},get labels(){return t(A)},pos:3,textSize:.85,get faceColor(){return vs}})};D(de,ge=>{e.params.showLabels!=="hide"&&ge(ue)})}E(Oe,oe)},Pe=Oe=>{var oe=he(),ae=U(oe);{var re=ue=>{ad(ue,{get xValues(){return t(O)},get yValues(){return t($)},get faceColor(){return t(I)},get lineColor(){return t(I)},barWidth:.95})},de=ue=>{var ge=Vh(),Ie=U(ge);Ht(Ie,{get xValues(){return t(O)},get yValues(){return t($)},get mainColor(){return t(I)},get faceColor(){return t(G)},get marker(){return t(J)},plotType:"p"});var Ve=q(Ie,2);vr(Ve,{get xValues(){return t(K)},yValues:[0,0],lineColor:"#606060"});var qe=q(Ve,2);{var X=Q=>{un(Q,{get xValues(){return t(O)},get yValues(){return t($)},get labels(){return t(A)},pos:3,textSize:.85,get faceColor(){return vs}})};D(qe,Q=>{e.params.showLabels!=="hide"&&Q(X)})}E(ue,ge)};D(ae,ue=>{e.params.plotType==="h"?ue(re):ue(de,!1)},!0)}E(Oe,oe)};D(xe,Oe=>{e.params.plotType==="qq"?Oe(Se):Oe(Pe,!1)})}E(fe,Le)},$$slots:{default:!0}})};D(ee,ce=>{t(O)&&t($)&&ce(me)})}E(n,Z),_e()}var Bh=H("<!> <!> <!>",1);function Yh(n,e){be(e,!0);let r=g(()=>e.props?e.props.model:null);function s(P,M,F){return!P||!M||M<1||M>P.ncomp?null:new Ee(At(P,F,M))}let l=te(void 0),o=te(void 0);const a=g(()=>t(r)?He(t(r).xvarvalues):null),c=g(()=>t(r)?He(t(r).xvarindices):null),f=g(()=>t(r)?t(r).xvarlabels:null),u=g(()=>t(r)?s(t(r),e.params.comp2,e.params.statType):null),d=g(()=>t(r)?s(t(r),e.params.comp1,e.params.statType):null),h=g(()=>!t(r)||!e.params.comp1?null:e.params.plotType==="p"?{values:t(d),label:`LV${e.params.comp1}`}:e.params.plotType==="l"&&t(a)?{values:t(a),label:t(r).varvaluesName+(t(r).varvaluesUnits?", "+t(r).varvaluesUnits:"")}:{values:t(c),label:"Predictors"}),v=g(()=>t(h)?t(h).values:null),m=g(()=>t(h)?t(h).label:null),b=g(()=>t(u)),_=g(()=>`LV${e.params.comp2}`),p=g(()=>{if(t(o)&&t(o)[0]<Number.POSITIVE_INFINITY&&t(o)[1]>Number.NEGATIVE_INFINITY){const P=(t(o)[1]-t(o)[0])*.1;return[t(o)[0]-2*P,t(o)[1]+P]}else return[0,1]}),w=g(()=>{if(t(l)&&t(l)[0]<Number.POSITIVE_INFINITY&&t(l)[1]>Number.NEGATIVE_INFINITY){const P=Math.abs((t(l)[1]-t(l)[0])*.1);return e.params.plotType==="l"&&t(r).varrev?[t(l)[1]+P,t(l)[0]-P]:[t(l)[0]-P,t(l)[1]+P]}else return[0,1]}),T=g(()=>e.params.statType==="xloadings"?"X-loadings":"Weights"),y=g(()=>"plot-"+e.params.statType);var S=he(),L=U(S);{var N=P=>{hr(P,{get xLabel(){return t(m)},get yLabel(){return t(_)},get title(){return t(T)},get fileName(){return t(y)},get limX(){return t(w)},get limY(){return t(p)},children:(M,F)=>{var C=Bh(),k=U(C);{let A=g(()=>[t(w)[0]]),O=g(()=>[t(w)[1]]);cn(k,{get xStart(){return t(A)},get xEnd(){return t(O)},yStart:[0],yEnd:[0],get lineColor(){return Hn}})}var j=q(k,2);{var B=A=>{{let O=g(()=>[t(p)[0]]),$=g(()=>[t(p)[1]]);cn(A,{xStart:[0],xEnd:[0],get yStart(){return t(O)},get yEnd(){return t($)},get lineColor(){return Hn}})}};D(j,A=>{e.params.plotType==="p"&&A(B)})}var Y=q(j,2);Ht(Y,{get xValues(){return t(v)},get yValues(){return t(b)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return t(f)},shortenLabels:!1,get mainColor(){return xl},markerWidth:2,get xRange(){return t(l)},set xRange(A){R(l,A,!0)},get yRange(){return t(o)},set yRange(A){R(o,A,!0)}}),E(M,C)},$$slots:{default:!0}})};D(L,P=>{t(v)&&t(b)&&P(N)})}E(n,S),_e()}var Dh=H("<!> <!> <!> <!>",1);function Nl(n,e){be(e,!0);let r=g(()=>e.props&&e.props.model?e.props.model:null),s=g(()=>e.props&&e.props.res?e.props.res:null),l=g(()=>t(s)?Object.keys(t(s)):null),o=g(()=>e.params&&e.params.resID&&t(l)?e.params.resID==="both"?t(l):[e.params.resID]:null);const a="#909090",c=g(()=>t(r)?e.params.limType==="classic"?{h:At(t(r),"cNh"),q:At(t(r),"cNq"),z:At(t(r),"cNz")}:{h:At(t(r),"rNh"),q:At(t(r),"rNq"),z:At(t(r),"rNz")}:null),f=g(()=>t(r)?e.params.limType==="classic"?{h:At(t(r),"ch0"),q:At(t(r),"cq0"),z:At(t(r),"cz0")}:{h:At(t(r),"rh0"),q:At(t(r),"rq0"),z:At(t(r),"rz0")}:null),u=g(()=>t(c)?{h:t(c).h[e.props.ncomp-1],q:t(c).q[e.props.ncomp-1],z:t(c).z[e.props.ncomp-1]}:null),d=g(()=>t(f)?{h:t(f).h[e.props.ncomp-1],q:t(f).q[e.props.ncomp-1],z:t(f).z[e.props.ncomp-1]}:null),h=g(()=>t(u)?e.params.distType==="h/q"?t(u).h:t(u).h+t(u).q:null),v=g(()=>t(u)?e.params.distType==="h/q"?t(u).q:t(u).z:null),m=g(()=>t(d)?e.params.distType==="h/q"?t(d).h:t(u).h+t(u).q:null),b=g(()=>t(d)?e.params.distType==="h/q"?t(d).q:t(d).z:null),_=g(()=>e.params.alpha?1-e.params.alpha/100:.95),p=g(()=>e.params.gamma?1-e.params.gamma/100:.99);let w=g(()=>t(u)?Da(t(_),t(h),t(v),e.params.transType):null),T=g(()=>t(u)?Da(Math.pow(t(p),1/t(r).nrows),t(h),t(v),e.params.transType):null);const y=g(()=>{if(!t(s)||!t(u)||!t(d))return null;let A=Number.POSITIVE_INFINITY,O=Number.POSITIVE_INFINITY,$=Number.NEGATIVE_INFINITY,I=Number.NEGATIVE_INFINITY;const G=[];for(let J of t(o)){const K=t(s)[J];if(!K)return null;const se=bt(K,"hdist",e.props.ncomp),Z=bt(K,"qdist",e.props.ncomp),ee=bt(K,"zdist",e.props.ncomp),me=e.params.distType==="h/q"?se:se.map((Le,xe)=>Le/t(d).h*t(u).h+Z[xe]/t(d).q*t(u).q),ce=e.params.distType==="h/q"?Z:ee,fe=Ba(me,t(h),t(m),e.params.transType),pe=Ba(ce,t(v),t(b),e.params.transType);A=Math.min(A,fe.min),O=Math.min(O,pe.min),$=Math.max($,fe.max),I=Math.max(I,pe.max),G.push({xValues:fe.values,yValues:pe.values,mainColor:Vr[J],faceColor:Wn[J],marker:Or[J],labels:K.objlabels.map(Le=>Le.slice(0,Va))})}return{values:G,xMin:A,xMax:$,yMin:O,yMax:I}});let S=g(()=>"Distances (A = "+e.props.ncomp+")"),L=g(()=>Ya(e.params.distType==="h/q"?"h":"f",e.params.transType)),N=g(()=>Ya(e.params.distType==="h/q"?"q":"z",e.params.transType)),P=te(void 0),M=te(void 0),F=g(()=>{if(!t(y))return[0,1];const A=Math.max(t(y).xMax,t(T).x.v[t(T).x.v.length-1]);return[-.02*(A-t(y).xMin),1.05*A]}),C=g(()=>{if(!t(y))return[0,1];const A=Math.max(t(y).yMax,t(T).y.v[0]);return[-.02*(A-t(y).yMin),(1.05+.1*(e.params.colorBy!=="none"))*A]}),k=g(()=>Un(t(o)));var j=he(),B=U(j);{var Y=A=>{hr(A,{get title(){return t(S)},get limX(){return t(F)},get limY(){return t(C)},get xLabel(){return t(L)},get yLabel(){return t(N)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(O,$)=>{var I=Dh(),G=U(I);{var J=me=>{vr(me,{get xValues(){return t(w).x},get yValues(){return t(w).y},lineColor:a,lineType:2})};D(G,me=>{t(w)&&me(J)})}var K=q(G,2);{var se=me=>{vr(me,{get xValues(){return t(T).x},get yValues(){return t(T).y},lineColor:a,lineType:3})};D(K,me=>{t(T)&&me(se)})}var Z=q(K,2);Be(Z,17,()=>t(y).values,Ye,(me,ce)=>{Ht(me,{get selected(){return e.selected},get callbacks(){return e.callbacks},get labels(){return t(ce).labels},get mainColor(){return t(ce).mainColor},get faceColor(){return t(ce).faceColor},get marker(){return t(ce).marker},get xValues(){return t(ce).xValues},get yValues(){return t(ce).yValues},plotType:"p",get showLabels(){return e.params.showLabels},get xRange(){return t(P)},set xRange(fe){R(P,fe,!0)},get yRange(){return t(M)},set yRange(fe){R(M,fe,!0)}})});var ee=q(Z,2);Dn(ee,{get items(){return t(k)}}),E(O,I)},$$slots:{default:!0}})};D(B,A=>{t(y)&&A(Y)})}E(n,j),_e()}var Wh=H("<!> <!>",1);function Hh(n,e){be(e,!0);let r=g(()=>e.props?e.props.model:null);const s=g(()=>e.props.ncomp?e.props.ncomp:1);let l=g(()=>t(r)&&t(s)>0?t(r).coeffs.subarray((t(s)-1)*t(r).npred*t(r).nresp,(t(s)-1)*t(r).npred*t(r).nresp+t(r).npred*t(r).nresp):null),o=g(()=>t(l)?new ke(t(l),t(r).npred,t(r).nresp):null);const a=g(()=>t(r)?He(t(r).xvarvalues):null),c=g(()=>t(r)?He(t(r).xvarindices):null),f=g(()=>t(r)?t(r).xvarlabels:null),u=g(()=>t(r)?t(r).varvaluesName+(t(r).varvaluesUnits?", "+t(r).varvaluesUnits:""):""),d=g(()=>e.params.plotType==="h"?t(c):t(a)),h=g(()=>t(o)?t(o).getcolumn(e.params.resp):null),v=g(()=>e.params.plotType==="h"?"Predictors":t(u)),m=g(()=>e.props.ncomp?" (A = "+e.props.ncomp+")":""),b=g(()=>t(r)?"Regression coefficients for "+t(r).varlabels[e.params.resp-1]+t(m):""),_=g(()=>Wa(t(d),e.params.plotType,t(r).varrev)),p=g(()=>t(h)?dr(t(h),.075):[0,1]),w="Coefficients";var T=he(),y=U(T);{var S=L=>{{let N=g(()=>e.params.plotType==="h");hr(L,{get xLabel(){return t(v)},yLabel:w,get limX(){return t(_)},get limY(){return t(p)},get title(){return t(b)},get whole(){return t(N)},fileName:"plot-regcoeffs",children:(P,M)=>{var F=Wh(),C=U(F);{let j=g(()=>[t(_)[0]]),B=g(()=>[t(_)[1]]);cn(C,{get xStart(){return t(j)},get xEnd(){return t(B)},yStart:[0],yEnd:[0],get lineColor(){return Hn}})}var k=q(C,2);Ht(k,{get xValues(){return t(d)},get yValues(){return t(h)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get mainColor(){return xl},get labels(){return t(f)},shortenLabels:!1}),E(P,F)},$$slots:{default:!0}})}};D(y,L=>{t(d)&&t(h)&&L(S)})}E(n,T),_e()}var Uh=H("<!> <!> <!>",1),Xh=H('<div class="svelte-z3o1sd"><!></div>');function Gh(n,e){be(e,!0);let r=g(()=>!0),s=te(!1),l=te(null),o=te(null),a=te(null),c=te(null);const f=g(()=>t(l)!==null&&t(a)!==null?Math.min(t(l),t(a)):null),u=g(()=>t(o)!==null&&t(c)!==null?Math.max(t(o),t(c)):null),d=g(()=>t(l)!==null&&t(a)!==null?Math.abs(t(l)-t(a)):null),h=g(()=>t(o)!==null&&t(c)!==null?Math.abs(t(o)-t(c)):null),v=g(()=>e.props?e.props.model:null),m=g(()=>e.props&&e.props.ncomp>0?e.props.ncomp:1),b=g(()=>t(v)&&t(m)>0?(t(m)-1)*t(v).npred*t(v).nresp:null),_=g(()=>t(b)!==null?t(b)+t(v).npred*t(v).nresp:null),p=g(()=>t(_)!==null?new ke(t(v).sr.subarray(t(b),t(_)),t(v).npred,t(v).nresp):null),w=g(()=>t(_)!==null?new ke(t(v).vip.subarray(t(b),t(_)),t(v).npred,t(v).nresp):null),T=g(()=>t(v)?He(t(v).xvarvalues):null),y=g(()=>t(v)?He(t(v).xvarindices):null),S=g(()=>t(v)?t(v).xvarlabels:null),L=g(()=>t(T)&&t(y)&&t(w)?{values:t(T),indices:t(y),vip:t(w).getcolumn(e.params.resp)}:null),N=g(()=>t(w)&&t(p)?{vip:t(w).getcolumn(e.params.resp),selratio:t(p).getcolumn(e.params.resp)}:null),P=g(()=>t(v)?{values:t(v).varvaluesName+(t(v).varvaluesUnits?", "+t(v).varvaluesUnits:""),indices:"Predictors",vip:"VIP scores"}:null),M=g(()=>t(v)?{vip:"VIP scores",selratio:"Selectivity ratio"}:null),F=g(()=>t(L)?t(L)[e.params.xset]:null),C=g(()=>t(N)?t(N)[e.params.yset]:null),k=g(()=>t(P)?t(P)[e.params.xset]:null),j=g(()=>t(M)?t(M)[e.params.yset]:null),B=g(()=>"Variable importance (A = "+t(m)+")"),Y=g(()=>Wa(t(F),"l",t(v).varrev)),A=g(()=>t(C)?dr(t(C),.075):[0,1]),O=g(()=>t(v)?t(v).npred<30?1:t(v).npred>200?.5:.8:1),$=g(()=>e.selected&&e.selected.length>0?He(e.selected.map(fe=>t(F).v[fe])):null),I=g(()=>e.selected&&e.selected.length>0?He(e.selected.map(fe=>t(C).v[fe])):null);function G(){const fe=t(u)-t(h),pe=t(f)+t(d),Le=[];for(let xe=0;xe<=t(F).length;xe++){const Se=t(F).v[xe],Pe=t(C).v[xe];Se>=t(f)&&Se<=pe&&Pe>=fe&&Pe<=t(u)&&Le.push(xe)}Le.length>0&&e.callbacks.select(Le),R(l,null),R(o,null),R(a,null),R(c,null)}function J(fe,pe){e.callbacks.unselect(),R(s,!0),R(l,fe,!0),R(o,pe,!0),R(a,fe,!0),R(c,pe,!0)}function K(fe,pe){R(s,!1),R(r,!0),G()}function se(fe,pe){t(s)&&(R(a,fe,!0),R(c,pe,!0))}function Z(){if(t(r)){R(r,!1);return}R(s,!1),R(l,null),R(o,null),R(a,null),R(c,null),e.callbacks.unselect()}var ee=he(),me=U(ee);{var ce=fe=>{var pe=Xh(),Le=W(pe);hr(Le,{get xLabel(){return t(k)},get yLabel(){return t(j)},get limX(){return t(Y)},get limY(){return t(A)},get title(){return t(B)},onmousedown:J,onmouseup:K,onmousemove:se,onclick:Z,fileName:"plot-varimp",children:(xe,Se)=>{var Pe=Uh(),Oe=U(Pe);{let ue=g(()=>xl+(e.selected&&e.selected.length>0?"80":""));Ht(Oe,{get xValues(){return t(F)},get yValues(){return t(C)},get markerSize(){return t(O)},get mainColor(){return t(ue)},plotType:"p",get showLabels(){return e.params.showLabels},get labels(){return t(S)},shortenLabels:!1})}var oe=q(Oe,2);{var ae=ue=>{{let ge=g(()=>[t(f)]),Ie=g(()=>[t(u)]),Ve=g(()=>[t(d)]),qe=g(()=>[t(h)]);kn(ue,{get left(){return t(ge)},get top(){return t(Ie)},get width(){return t(Ve)},get height(){return t(qe)},faceColor:"#ff000040"})}};D(oe,ue=>{t(f)&&t(u)&&t(s)&&ue(ae)})}var re=q(oe,2);{var de=ue=>{Ht(ue,{get xValues(){return t($)},get yValues(){return t(I)},get markerSize(){return t(O)},mainColor:"red",plotType:"p",shortenLabels:!1})};D(re,ue=>{t($)&&t(I)&&ue(de)})}E(xe,Pe)},$$slots:{default:!0}}),E(fe,pe)};D(me,fe=>{t(F)&&t(C)&&fe(ce)})}E(n,ee),_e()}var Kh=H("<!> <!> <!> <!> <!>",1);function Jh(n,e){be(e,!0);let r=g(()=>e.props?e.props.scalars:null);const s=[-99999,-2,-1,0,.2,.5,.8,1.2,1.5,1.8,2,2.5,3,99999],l=["#6200DF","#6923FF","#648FFF","#8CCDFD","#D2ECFF","#E8F5FF","#fefeff","#FFF5E5","#FFE5BE","#FFCE85","#FFA34E","#FF8024","#CF5903"],o=s.map(_=>_.toFixed(1));o[0]="&minus;&infin;",o[o.length-1]="&infin;";const a=g(()=>t(r)?t(r).nrows/8:1),c=g(()=>t(r)?[.45,t(r).ncols+.6]:[0,1]),f=g(()=>t(r)?[.45,t(r).nrows+Math.max(.9,t(a))]:[0,1]),u="PV-scalars",d="Segments, k",h="Components, A";var v=he(),m=U(v);{var b=_=>{pl(_,{get limX(){return t(c)},get limY(){return t(f)},title:u,fileName:"plot-pvscalars",children:(p,w)=>{var T=Kh(),y=U(T);bd(y,{get values(){return t(r)},get breaks(){return s},get colmap(){return l}});var S=q(y,2);Ia(S,{get breaks(){return s},get colmap(){return l},get labels(){return o}});var L=q(S,2);bl(L,{label:h,whole:!0});var N=q(L,2);_l(N,{label:d,whole:!0});var P=q(N,2);wl(P,{}),E(p,T)},$$slots:{default:!0}})};D(m,_=>{t(r)&&_(b)})}E(n,v),_e()}function Ka(n){const e=Object.keys(n),r=e.length>1?[...e,"both"]:e,s=e.length>1?"both":e[0];return{resID:{el:Ge,hidden:e.length==1,default:s,label:"Show",props:{options:r}},varSet:{el:Ge,hidden:!1,default:"X",label:"Variance for",props:{options:["X","Y"]}},varType:{el:Ge,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:Ge,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Wt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Ja(n,e,r=["rmse","r2","slope"]){const s=Object.keys(n),l=s.length>1?[...s,"both"]:s,o=s.length>1?"both":s[0];return{resID:{el:Ge,hidden:s.length==1,default:o,label:"Show",props:{options:l}},fom:{el:Ge,hidden:r.length==1,default:r[0],label:"FoM",props:{options:r}},resp:{el:zt,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showLabels:{el:Wt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Ll(n,e){const r=Object.keys(n),s=r.length>1?[...r,"both"]:r,l=n[r[0]],o=r.length>1?"both":r[0];return{resID:{el:Ge,hidden:r.length==1,default:o,label:"Show",props:{options:s}},resp:{el:zt,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showStat:{el:Wt,hidden:l.Yref===null,default:!1,label:"FoM",props:{options:["hide","show"]}},showLabels:{el:Ge,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","labels","values"]}}}}function Za(n,e){const r=Object.keys(n);return{resID:{el:Ge,hidden:r.length==1,default:r[0],label:"Show",props:{options:r}},resp:{el:zt,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},plotType:{el:al,hidden:!1,default:"p",label:"Plot type",props:{options:["p","qq","h"]}},showLabels:{el:Ge,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","show"]}}}}function jl(n){const e=Object.keys(n),r=e.length>1?[...e,"both"]:e,s=n[e[0]],l=s.Yref?["X","Y","XY"]:["X"],o=e.length>1?"both":e[0];return{resID:{el:Ge,hidden:e.length===1,default:o,label:"Show",props:{options:r}},varSet:{el:Ge,hidden:s.Yref===null,default:"X",label:"Scores for",props:{options:l}},comp2:{el:zt,hidden:!1,default:s.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:s.ncomp}},comp1:{el:zt,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:s.ncomp}},showLabels:{el:Wt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Zh(n,e){return{statType:{el:Ge,hidden:!1,default:"xloadings",label:"Show",props:{options:["xloadings","weights"]}},plotType:{el:al,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:zt,hidden:!1,default:n.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:n.ncomp}},comp1:{el:zt,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:n.ncomp}},showLabels:{el:Wt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Ml(n){const e=Object.keys(n),r=e.length>1?[...e,"both"]:e,s=n[e[0]],l=e.length>1?"both":e[0],o=s.Yref?["h/q","f/z"]:["h/q"];return{resID:{el:Ge,hidden:e.length==1,default:l,label:"Show",props:{options:r}},distType:{el:Ge,hidden:s.Yref===null,default:"h/q",label:"Show",props:{options:o}},transType:{el:Ge,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:Ge,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Wt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Qh(n){return{plotType:{el:al,hidden:!1,default:"l",label:"Plot type",props:{options:["l","h"]}},resp:{el:zt,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:Wt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function $h(n){return{yset:{el:Ge,hidden:!1,default:"vip",label:"Y-axis",props:{options:["vip","selratio"]}},xset:{el:Ge,hidden:!1,default:"values",label:"X-axis",props:{options:["values","indices","vip"]}},resp:{el:zt,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:Wt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function em(){return{}}var tm=H("<!> <!>",1),rm=H("<p>can not exclude</p>");function nm(n,e){be(e,!0);const r=(h,v=yt)=>{ie(h,{label:"Selected",children:(m,b)=>{var _=tm(),p=U(_);tt(p,{onclick:()=>e.showContributions(v()),text:"plot"});var w=q(p,2);{var T=y=>{tt(y,{onclick:()=>e.markOutlier(v()),text:"remove"})};D(w,y=>{v()>=0&&y(T)})}E(m,_)},$$slots:{default:!0}})},s=(h,v=yt)=>{ie(h,{label:"Selected",children:(m,b)=>{var _=he(),p=U(_);{var w=y=>{tt(y,{onclick:()=>e.excludeVars(v()),get text(){return`exclude ${v().length??""} variables`}})},T=y=>{var S=rm();E(y,S)};D(p,y=>{e.res.cal.npred-v().length>=2?y(w):y(T,!1)})}E(m,_)},$$slots:{default:!0}})},l=Object.keys(e.res),o=e.res[l[0]].nresp,a=g(()=>({pred:{label:"Predictions",scope:"objects",component:Tl,buttons:r},scores:{label:"Scores",scope:"objects",component:Pl,buttons:r},distance:{label:"Distances",scope:"objects",component:Nl,buttons:r},yresiduals:{label:"Residuals",scope:"stats",component:Ga},loadings:{label:"X-loadings and weights",scope:"stats",component:Yh},regcoeffs:{label:"Regression coefficients",scope:"stats",component:Hh},varsel:{label:"Variable importance",scope:"variables",component:Gh,buttons:s},fom:{label:"Figures of merit",scope:"stats",component:Xa},variance:{label:"Variance",scope:"stats",component:Ua},scalars:{label:"PV scalars",scope:"stats",component:Jh}})),c=Me({pred:Ll(e.res,o),scores:jl(e.res),distance:Ml(e.res),yresiduals:Za(e.res,o),loadings:Zh(e.model,e.ncomp),regcoeffs:Qh(o),varsel:$h(o),fom:Ja(e.res,o),variance:Ka(e.res),scalars:em(e.res)});let f=te(Me({pred:ft(c.pred),scores:ft(c.scores),distance:ft(c.distance),yresiduals:ft(c.yresiduals),loadings:ft(c.loadings),regcoeffs:ft(c.regcoeffs),varsel:ft(c.varsel),fom:ft(c.fom),variance:ft(c.variance),scalars:ft(c.scalars)}));we(()=>{t(f).scores.varSet==="XY"?(c.scores.comp1.hidden=!0,c.scores.comp2.label="LV"):(c.scores.comp2.label="LV (y-axis)",c.scores.comp1.hidden=!1)}),we(()=>{t(f).loadings.plotType!=="p"?c.loadings.comp1.hidden=!0:c.loadings.comp1.hidden=!1}),we(()=>{t(f).pred.resID==="both"?c.pred.showStat.hidden=!0:c.pred.showStat.hidden=!1}),we(()=>{t(f).yresiduals.plotType==="h"?c.yresiduals.showLabels.hidden=!0:c.yresiduals.showLabels.hidden=!1});const u=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),d={markOutlier:e.markOutlier};Al(n,{get plots(){return t(a)},get props(){return t(u)},get controls(){return c},get callbacks(){return d},get params(){return t(f)},set params(h){R(f,h,!0)}}),_e()}var sm=H('<div class="outliers-pane svelte-1mp4dba"><!></div>'),lm=H('<div class="exclvars-pane svelte-1mp4dba"><!></div>'),om=H('<div class="model-calculator svelte-1mp4dba"><!></div>'),am=H('<div class="pcv-calculator svelte-1mp4dba"><!></div>'),im=H('<div class="buttons"><!> <!> <!></div>'),cm=H('<div class="ncomp-selector svelte-1mp4dba"><!> <!></div> <div class="result-stats svelte-1mp4dba"><!></div>',1),um=H(`<p class="svelte-1mp4dba">This tab lets you train a PLS regression model and optimize it using Procrustes cross-validation.
               After that you can save the model to a file, apply it to a test set (tab <strong>Test</strong>)
               or to a new set of samples whose response us unknown (tab <strong>Predict</strong>).</p> <p class="svelte-1mp4dba"><strong>Step 1.</strong></p> <p class="svelte-1mp4dba">Load your training/calibration set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows
               correspond to observations or objects, columns — to variables (both response and predictors).</p> <p class="svelte-1mp4dba">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed
               that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If x-variables
               are signals, e.g. spectra, this part of header can content numeric values, e.g. wavelength or wavenumbers.
               If this is the case, select <em>values</em> option for the header. This will let you to specify
               name of the values (e.g. <em>Wavelength</em>) and the units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-1mp4dba">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — if so, just set
               the corresponding options after selecting the file.</p> <p class="svelte-1mp4dba">The response variable (<em>Y</em>) should be located right after the column with object/row labels. If there are no
               object labels, the response variable is expected to be in the first column. <strong>Response variable is mandatory
               in the training set and in this version of app only single response is supported (PLS1).</strong></p> <p class="svelte-1mp4dba">Here is an example how data structure may look like (note, that row labels and header are optional):</p> <div class="svelte-1mp4dba"><table class="svelte-1mp4dba"><thead class="svelte-1mp4dba"><tr class="svelte-1mp4dba"><td class="svelte-1mp4dba">Name</td><td class="svelte-1mp4dba">y</td><td class="svelte-1mp4dba">x1</td><td class="svelte-1mp4dba">x2</td><td class="svelte-1mp4dba">x3</td></tr></thead><tbody class="svelte-1mp4dba"><tr><td class="svelte-1mp4dba">O1</td><td class="svelte-1mp4dba">96.1</td><td class="svelte-1mp4dba">3.8</td><td class="svelte-1mp4dba">1.3</td><td class="svelte-1mp4dba">13.6</td></tr><tr><td class="svelte-1mp4dba">O2</td><td class="svelte-1mp4dba">88.9</td><td class="svelte-1mp4dba">11.1</td><td class="svelte-1mp4dba">12.3</td><td class="svelte-1mp4dba">3.3</td></tr><tr><td class="svelte-1mp4dba">O3</td><td class="svelte-1mp4dba">56.1</td><td class="svelte-1mp4dba">1.2</td><td class="svelte-1mp4dba">2.3</td><td class="svelte-1mp4dba">4.2</td></tr></tbody></table></div> <p class="svelte-1mp4dba"></p>`,1),fm=H(`<p class="svelte-1mp4dba"><strong>Step 2</strong></p> <p class="svelte-1mp4dba">Next step is to decide how to preprocess the data. You can either skip preprocessing (in the model settings you
               will be able to apply centering and scaling), create the chain of preprocessing methods in special constructor
               (use <em>Create</em> to load the constructor) or load already built preprocessing model from a file. Make your choice.</p>`,1),dm=H(`<p class="svelte-1mp4dba"><strong>Step 3</strong></p> <p class="svelte-1mp4dba">Now you can create a global PLS model for the training set. Use more components/latent variables (LVs) than
               you expect to be optimal. You will have possibility to select the optimal number of components later.</p>`,1),vm=H(`<p class="svelte-1mp4dba"><strong>Step 4</strong></p> <p class="svelte-1mp4dba">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set,
               which will help you to optimize PLS model parameters. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-1mp4dba">After this step PLS model will be created automatically and you will be able to explore it and tune
               its parameters.</p>`,1),hm=H("<!> <!> <!>",1),mm=H('<div class="help-text svelte-1mp4dba"><!></div>'),gm=H('<div class="app-container svelte-1mp4dba"><!> <div class="app-controls svelte-1mp4dba"><div class="data-loader svelte-1mp4dba"><!></div> <!> <!> <!> <!> <!> <!></div> <div class="app-content svelte-1mp4dba"><!></div></div>');function pm(n,e){be(e,!0);const r=g(()=>e.session.train);let s=te(-1),l=te(!1);function o(I){if(I.length<1)return;const G=I.map(J=>t(r).model.varindices[J+t(r).model.nresp]);if(G.length>0){const J=new Set(t(r).exclvars),K=[...new Set(G)].filter(se=>!J.has(se));t(r).exclvars=t(r).exclvars.concat(K),t(r).model=null,t(r).pvres=null,t(r).calres=null,t(r).pvset=null,t(r).ncomp_selected=1}}function a(){t(r).exclvars=[],t(r).model=null,t(r).pvres=null,t(r).calres=null,t(r).pvset=null,t(r).ncomp_selected=1}function c(I){if(I<0||I>t(r).calres.nrows-1)return;const G=t(r).calres.objindices[I];G>=0&&!t(r).outliers.includes(G)&&(t(r).outliers.push(G),t(r).model=null,t(r).pvres=null,t(r).calres=null,t(r).calsetp=null,t(r).prepmodel=null,t(r).pvset=null,t(r).ncomp_selected=1)}function f(){t(r).outliers=[],t(r).model=null,t(r).pvres=null,t(r).calres=null,t(r).calsetp=null,t(r).prepmodel=null,t(r).pvset=null,t(r).ncomp_selected=1}function u(){t(r).outliers.pop(),t(r).model=null,t(r).pvres=null,t(r).calres=null,t(r).calsetp=null,t(r).prepmodel=null,t(r).pvset=null,t(r).ncomp_selected=1}function d(I,G){I<0||(R(s,I,!0),R(l,!0))}function h(){R(l,!1),R(s,-1)}we(()=>{t(r).calset===null&&(t(r).pvres=null,t(r).calres=null,t(r).pvset=null,t(r).calsetp=null,t(r).prepmodel=null,t(r).prepobj=[],t(r).prepType=null,t(r).outliers=[],t(r).exclvars=[],t(r).ncomp_selected=1,t(r).model=null)}),we(()=>{t(r).model===null&&(t(r).calres=null,t(r).pvres=null,t(r).pvset=null,t(r).ncomp_selected=1)}),we(()=>{t(r).prepmodel||(t(r).calres=null,t(r).calsetp=null,t(r).exclvars=[],t(r).ncomp_selected=1)}),we(()=>{t(r).calsetp||(t(r).model=null,t(r).calres=null,t(r).pvres=null,t(r).ncomp_selected=1)}),we(()=>{if(t(r).model&&t(r).model.ncomp&&t(r).pvres&&t(r).pvres.stat){const I=t(r).pvres.stat.rmse.getcolref(1),J=I.map((K,se)=>se>0?1-K*K/I[se-1]**2:1).findIndex(K=>K<=.0975);t(r).ncomp_selected=J<0?t(r).model.ncomp:J}}),we(()=>{const I=nr(()=>JSON.stringify(e.session,Vn));e.backupSession(I,t(r).model,t(r).calset,t(r).calsetp,t(r).pvres)});var v=gm(),m=W(v);{var b=I=>{{let G=g(()=>({cal:t(r).calres,pv:t(r).pvres}));kl(I,{get model_getter(){return At},get res_getter(){return bt},get model(){return t(r).model},get res(){return t(G)},get ncomp(){return t(r).ncomp_selected},get selected(){return t(s)},closeModal:h})}};D(m,I=>{t(l)&&I(b)})}var _=q(m,2),p=W(_),w=W(p);Cl(w,{respMandatory:!0,get dataset(){return t(r).calset},set dataset(I){t(r).calset=I}});var T=q(p,2);{var y=I=>{var G=sm(),J=W(G);il(J,{get outliers(){return t(r).outliers},get dataset(){return t(r).calset},resetOutliers:f,undoOutliers:u}),E(I,G)};D(T,I=>{t(r).outliers&&t(r).outliers.length>0&&I(y)})}var S=q(T,2);{var L=I=>{jv(I,{get WASM(){return e.WASM},get rawdata(){return t(r).calset},get outliers(){return t(r).outliers},get prepType(){return t(r).prepType},set prepType(G){t(r).prepType=G},get prepobj(){return t(r).prepobj},set prepobj(G){t(r).prepobj=G},get prepdata(){return t(r).calsetp},set prepdata(G){t(r).calsetp=G},get prepmeta(){return t(r).prepmeta},set prepmeta(G){t(r).prepmeta=G},get prepmodel(){return t(r).prepmodel},set prepmodel(G){t(r).prepmodel=G}})};D(S,I=>{t(r).calset&&I(L)})}var N=q(S,2);{var P=I=>{var G=lm(),J=W(G);Ku(J,{get exclvars(){return t(r).exclvars},get dataset(){return t(r).calset},resetExclvars:a}),E(I,G)};D(N,I=>{t(r).exclvars&&t(r).exclvars.length>0&&I(P)})}var M=q(N,2);{var F=I=>{var G=om(),J=W(G);Hv(J,{get WASM(){return e.WASM},get dataset(){return t(r).calsetp},get outliers(){return t(r).outliers},get exclvars(){return t(r).exclvars},get model(){return t(r).model},set model(K){t(r).model=K},get resobj(){return t(r).calres},set resobj(K){t(r).calres=K}}),E(I,G)};D(M,I=>{t(r).calsetp&&I(F)})}var C=q(M,2);{var k=I=>{var G=am(),J=W(G);Qv(J,{get WASM(){return e.WASM},get calset(){return t(r).calsetp},get outliers(){return t(r).outliers},get model(){return t(r).model},get calres(){return t(r).calres},get pvset(){return t(r).pvset},set pvset(K){t(r).pvset=K},get pvres(){return t(r).pvres},set pvres(K){t(r).pvres=K},get pvscalars(){return t(r).pvscalars},set pvscalars(K){t(r).pvscalars=K}}),E(I,G)};D(C,I=>{t(r).calsetp&&t(r).model&&I(k)})}var j=q(C,2);{var B=I=>{var G=cm(),J=U(G),K=W(J);ie(K,{name:"ncomp",label:"# of LVs",children:(me,ce)=>{ln(me,{min:1,get max(){return t(r).model.ncomp},step:1,decNum:0,get value(){return t(r).ncomp_selected},set value(fe){t(r).ncomp_selected=fe}})},$$slots:{default:!0}});var se=q(K,2);ie(se,{label:"Download",children:(me,ce)=>{var fe=im(),pe=W(fe);tt(pe,{onclick:()=>ds(t(r).calres,t(r).calset,"train",t(r).ncomp_selected),text:"Res (cal)"});var Le=q(pe,2);tt(Le,{onclick:()=>ds(t(r).pvres,t(r).pvset,"PV",t(r).ncomp_selected),text:"Res (pv)"});var xe=q(Le,2);tt(xe,{onclick:()=>xa(t(r).model,t(r).ncomp_selected,t(r).prepmodel),text:"Model"}),E(me,fe)},$$slots:{default:!0}});var Z=q(J,2),ee=W(Z);{let me=g(()=>({cal:t(r).calres,pv:t(r).pvres}));Ha(ee,{get res(){return t(me)},get ncomp(){return t(r).ncomp_selected}})}E(I,G)};D(j,I=>{t(r).model&&t(r).model.ncomp&&t(r).calres&&t(r).pvres&&t(r).ncomp_selected&&I(B)})}var Y=q(_,2),A=W(Y);{var O=I=>{var G=mm(),J=W(G);{var K=Z=>{var ee=um();E(Z,ee)},se=Z=>{var ee=hm(),me=U(ee);{var ce=Se=>{var Pe=fm();E(Se,Pe)};D(me,Se=>{t(r).calset&&!t(r).prepmodel&&Se(ce)})}var fe=q(me,2);{var pe=Se=>{var Pe=dm();E(Se,Pe)};D(fe,Se=>{t(r).prepmodel&&!t(r).model&&Se(pe)})}var Le=q(fe,2);{var xe=Se=>{var Pe=vm();E(Se,Pe)};D(Le,Se=>{t(r).model&&!t(r).pvset&&Se(xe)})}E(Z,ee)};D(J,Z=>{t(r).calset?Z(se,!1):Z(K)})}E(I,G)},$=I=>{var G=he(),J=U(G);Qr(J,()=>t(r).pvres&&t(r).model,K=>{var se=he(),Z=U(se);{var ee=me=>{{let ce=g(()=>({cal:t(r).calset,pv:t(r).pvset})),fe=g(()=>({cal:t(r).calres,pv:t(r).pvres}));nm(me,{markOutlier:c,showContributions:d,excludeVars:o,get data(){return t(ce)},get res(){return t(fe)},get scalars(){return t(r).pvscalars},get model(){return t(r).model},get ncomp(){return t(r).ncomp_selected}})}};D(Z,me=>{t(r).calres&&t(r).pvres&&t(r).model&&t(r).calset&&t(r).pvset&&me(ee)})}E(K,se)}),E(I,G)};D(A,I=>{!t(r).calres||!t(r).pvres||!t(r).model?I(O):I($,!1)})}E(n,v),_e()}var bm=H("<!> <!>",1),_m=H('<br/><span style="color:#a0a0a0;">Optimal LVs:</span> <span style="color:#a0a0a0;"> </span>',1),wm=H('<br/><span style="color:#a0a0a0;">Preprocessing:</span> <!>',1),ym=H('<br/><span style="color:#a0a0a0;">Excluded</span> <span style="color:#a0a0a0;">variables.</span>',1),xm=H('<p class="info-text svelte-7h7avz"><span>Model file:</span> <span class="file-name svelte-7h7avz"> </span><br/> <span style="color:#a0a0a0;">Model info:</span> <!> <!> <!></p> <!>',1),km=H("<p><!></p>"),Em=H("<!> <!>",1);function Qa(n,e){be(e,!0);let r=z(e,"model",15),s=te(""),l=te("neutral"),o=te("");function a(p){try{const w=JSON.parse(p,sl);if(Array.isArray(w.v)&&(w.v=Float64Array.from(w.v)),w.class[0]!=="plsmodel")throw Error("The JSON file you selected does not contain PLS model.");w.fileName=t(u),r(w),R(l,"success"),R(o,"")}catch(w){console.error(w),r(null),R(l,"error"),R(o,w,!0)}}function c(p){const w=new FileReader;w.onload=()=>{a(w.result)},w.readAsText(t(s))}function f(){R(s,""),r(null),R(l,"neutral"),R(o,"")}we(()=>{t(s)===null?(r(null),R(l,"neutral"),R(o,"")):(R(l,"neutral"),R(o,""))});let u=g(()=>t(s)?t(s).name.replace(/\.[^/.]+$/,""):"");var d=Em(),h=U(d);{var v=p=>{var w=bm(),T=U(w);Qr(T,()=>t(s),L=>{ie(L,{name:"file-selector",children:(N,P)=>{fs(N,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return t(s)},set file(M){R(s,M,!0)}})},$$slots:{default:!0}})});var y=q(T,2);{var S=L=>{ie(L,{name:"load-button",label:" ",children:(N,P)=>{tt(N,{onclick:c,text:"Load"})},$$slots:{default:!0}})};D(y,L=>{t(s)&&L(S)})}E(p,w)},m=p=>{ie(p,{name:"info",class:"info",children:(w,T)=>{var y=xm(),S=U(y),L=q(W(S),2),N=W(L),P=q(L,4),M=q(P);{var F=A=>{var O=_m(),$=q(U(O),3),I=W($);le(()=>Te(I,r().ncomp_selected)),E(A,O)};D(M,A=>{r().ncomp_selected&&A(F)})}var C=q(M,2);{var k=A=>{var O=wm(),$=q(U(O),3);Sl($,{get prepmodel(){return r().prep}}),E(A,O)};D(C,A=>{r().prep&&A(k)})}var j=q(C,2);{var B=A=>{var O=ym(),$=q(U(O),2);le(()=>Te($,` ${r().exclvars.length??""} `)),E(A,O)};D(j,A=>{r().exclvars.length>0&&A(B)})}var Y=q(S,2);ar(Y,{onclick:f}),le(()=>{V(L,"title",r().fileName),Te(N,r().fileName),Te(P,` ${r().ncomp??""} LVs${r().center?", centered":""}${r().scale?", scaled":""} `)}),E(w,y)},$$slots:{default:!0}})};D(h,p=>{r()?p(m,!1):p(v)})}var b=q(h,2);{var _=p=>{ie(p,{name:"error",status:"error",children:(w,T)=>{var y=km(),S=W(y);pt(S,()=>t(o)),E(w,y)},$$slots:{default:!0}})};D(b,p=>{(t(l)==="error"||t(o))&&p(_)})}E(n,d),_e()}var Sm=H("<!> <!>",1);function Cm(n,e){be(e,!0);const r=(d,h=yt)=>{ie(d,{label:"Selected",children:(v,m)=>{var b=Sm(),_=U(b);tt(_,{onclick:()=>e.showContributions(h()),text:"plot"});var p=q(_,2);tt(p,{onclick:()=>e.markOutlier(h()),text:"remove"}),E(v,b)},$$slots:{default:!0}})},s=Object.keys(e.res),l=e.res[s[0]].nresp,o=g(()=>({pred:{label:"Predictions",scope:"objects",component:Tl,buttons:r},scores:{label:"Scores",scope:"objects",component:Pl,buttons:r},distance:{label:"Distances",scope:"objects",component:Nl,buttons:r},yresiduals:{label:"Residuals",scope:"stats",component:Ga},fom:{label:"Figures of merit",scope:"stats",component:Xa},variance:{label:"Variance",scope:"stats",component:Ua}})),a=Me({pred:Ll(e.res,l),scores:jl(e.res),distance:Ml(e.res),yresiduals:Za(e.res,l),fom:Ja(e.res,l),variance:Ka(e.res)});let c=te(Me({pred:ft(a.pred),scores:ft(a.scores),distance:ft(a.distance),yresiduals:ft(a.yresiduals),fom:ft(a.fom),variance:ft(a.variance)}));we(()=>{t(c).scores.varSet==="XY"?(a.scores.comp1.hidden=!0,a.scores.comp2.label="LV"):(a.scores.comp2.label="LV (y-axis)",a.scores.comp1.hidden=!1)}),we(()=>{t(c).pred.resID==="both"?a.pred.showStat.hidden=!0:a.pred.showStat.hidden=!1}),we(()=>{t(c).yresiduals.plotType==="h"?a.yresiduals.showLabels.hidden=!0:a.yresiduals.showLabels.hidden=!1});const f=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),u={markOutlier:e.markOutlier};Al(n,{get plots(){return t(o)},get controls(){return a},get props(){return t(f)},get callbacks(){return u},get params(){return t(c)},set params(d){R(c,d,!0)}}),_e()}var Am=H('<div class="outliers-pane svelte-1w77c1q"><!></div>'),Tm=H('<div class="buttons"><!> <!></div>'),Pm=H('<div class="ncomp-selector svelte-1w77c1q"><!> <!></div> <div class="result-stats svelte-1w77c1q"><!></div>',1),Nm=H('<div class="data-loader svelte-1w77c1q"><!></div> <!> <!>',1),Lm=H(`<p class="svelte-1w77c1q">In this tab you can test a PLS regression model developed in <strong>Train</strong> tab by
               applying it to a test set, which contains both predictors and responses.</p> <p class="svelte-1w77c1q"><strong>Step 1.</strong></p> <p class="svelte-1w77c1q">Load the previously developed PLS model from a JSON file.</p>`,1),jm=H(`<p class="svelte-1w77c1q"><strong>Step 2.</strong></p> <p class="svelte-1w77c1q">Load your test set from a CSV file. The file structure should be the same as the training/calibration set.
               The response variable is mandatory. Here is an example how data structure may look like (note, that row labels
               and header are optional):</p> <div class="svelte-1w77c1q"><table class="svelte-1w77c1q"><thead class="svelte-1w77c1q"><tr class="svelte-1w77c1q"><td class="svelte-1w77c1q">Name</td><td class="svelte-1w77c1q">y</td><td class="svelte-1w77c1q">x1</td><td class="svelte-1w77c1q">x2</td><td class="svelte-1w77c1q">x3</td></tr></thead><tbody class="svelte-1w77c1q"><tr><td class="svelte-1w77c1q">O1</td><td class="svelte-1w77c1q">96.1</td><td class="svelte-1w77c1q">3.8</td><td class="svelte-1w77c1q">1.3</td><td class="svelte-1w77c1q">13.6</td></tr><tr><td class="svelte-1w77c1q">O2</td><td class="svelte-1w77c1q">88.9</td><td class="svelte-1w77c1q">11.1</td><td class="svelte-1w77c1q">12.3</td><td class="svelte-1w77c1q">3.3</td></tr><tr><td class="svelte-1w77c1q">O3</td><td class="svelte-1w77c1q">56.1</td><td class="svelte-1w77c1q">1.2</td><td class="svelte-1w77c1q">2.3</td><td class="svelte-1w77c1q">4.2</td></tr></tbody></table></div> <p class="svelte-1w77c1q"></p>`,1),Mm=H('<div class="help-text svelte-1w77c1q"><!></div>'),qm=H('<div class="app-container svelte-1w77c1q"><!> <div class="app-controls svelte-1w77c1q"><div class="model-loader svelte-1w77c1q"><!></div> <!></div> <div class="app-content svelte-1w77c1q"><!></div></div>');function Rm(n,e){be(e,!0);const r=g(()=>e.session.test);let s=te(-1),l=te(!1);function o(N){if(N<0||N>t(r).testres.nrows-1)return;const P=t(r).testres.objindices[N];P>=0&&!t(r).outliers.includes(P)&&(t(r).outliers.push(P),t(r).testres=null)}function a(){t(r).outliers=[],t(r).testres=null}function c(){t(r).outliers.pop(),t(r).testres=null}function f(N){N<0||(R(s,N,!0),R(l,!0))}function u(){R(l,!1),R(s,-1)}we(()=>{t(r).testset===null&&(t(r).outliers=[],t(r).testres=null),t(r).model===null&&(t(r).testres=null,t(r).testset=null)}),we(()=>{t(r).model&&(t(r).ncomp_selected=t(r).model.ncomp_selected)}),we(()=>{const N=nr(()=>JSON.stringify(e.session,Vn));e.backupSession(N,t(r).model,t(r).testres)});var d=qm(),h=W(d);{var v=N=>{{let P=g(()=>({test:t(r).testres}));kl(N,{get model_getter(){return At},get res_getter(){return bt},get model(){return t(r).model},get res(){return t(P)},get ncomp(){return t(r).ncomp_selected},get selected(){return t(s)},closeModal:u})}};D(h,N=>{t(l)&&N(v)})}var m=q(h,2),b=W(m),_=W(b);Qa(_,{get model(){return t(r).model},set model(N){t(r).model=N}});var p=q(b,2);{var w=N=>{var P=Nm(),M=U(P),F=W(M);Cl(F,{get WASM(){return e.WASM},get outliers(){return t(r).outliers},get model(){return t(r).model},respMandatory:!0,get dataset(){return t(r).testset},set dataset(Y){t(r).testset=Y},get resobj(){return t(r).testres},set resobj(Y){t(r).testres=Y}});var C=q(M,2);{var k=Y=>{var A=Am(),O=W(A);il(O,{get outliers(){return t(r).outliers},get dataset(){return t(r).testset},resetOutliers:a,undoOutliers:c}),E(Y,A)};D(C,Y=>{t(r).outliers&&t(r).outliers.length>0&&Y(k)})}var j=q(C,2);{var B=Y=>{var A=Pm(),O=U(A),$=W(O);ie($,{name:"ncomp",label:"# of LVs",children:(K,se)=>{ln(K,{min:1,get max(){return t(r).model.ncomp},step:1,decNum:0,get value(){return t(r).ncomp_selected},set value(Z){t(r).ncomp_selected=Z}})},$$slots:{default:!0}});var I=q($,2);ie(I,{label:"Download",children:(K,se)=>{var Z=Tm(),ee=W(Z);tt(ee,{onclick:()=>ds(t(r).testres,t(r).testset,"test",t(r).ncomp_selected),text:"Res (test)"});var me=q(ee,2);tt(me,{onclick:()=>xa(t(r).model,t(r).ncomp_selected),text:"Model"}),E(K,Z)},$$slots:{default:!0}});var G=q(O,2),J=W(G);{let K=g(()=>({test:t(r).testres}));Ha(J,{get res(){return t(K)},get ncomp(){return t(r).ncomp_selected}})}E(Y,A)};D(j,Y=>{t(r).model&&t(r).testres&&Y(B)})}E(N,P)};D(p,N=>{t(r).model&&N(w)})}var T=q(m,2),y=W(T);{var S=N=>{var P=Mm(),M=W(P);{var F=k=>{var j=Lm();E(k,j)},C=k=>{var j=he(),B=U(j);{var Y=A=>{var O=jm();E(A,O)};D(B,A=>{t(r).testset||A(Y)},!0)}E(k,j)};D(M,k=>{t(r).model?k(C,!1):k(F)})}E(N,P)},L=N=>{var P=he(),M=U(P);Qr(M,()=>t(r).testres&&t(r).model,F=>{var C=he(),k=U(C);{var j=B=>{{let Y=g(()=>({test:t(r).testset})),A=g(()=>({test:t(r).testres}));Cm(B,{markOutlier:o,showContributions:f,get data(){return t(Y)},get res(){return t(A)},get model(){return t(r).model},get ncomp(){return t(r).ncomp_selected}})}};D(k,B=>{t(r).testres&&t(r).model&&B(j)})}E(F,C)}),E(N,P)};D(y,N=>{t(r).testres?N(L,!1):N(S)})}E(n,d),_e()}var Im=H("<!> <!>",1);function Fm(n,e){be(e,!0);const r=(d,h=yt)=>{ie(d,{label:"Selected",children:(v,m)=>{var b=Im(),_=U(b);tt(_,{onclick:()=>e.showContributions(h()),text:"plot"});var p=q(_,2);tt(p,{onclick:()=>e.markOutlier(h()),text:"remove"}),E(v,b)},$$slots:{default:!0}})},s=Object.keys(e.res),l=e.res[s[0]].nresp,o=g(()=>({pred:{label:"Predictions",scope:"objects",component:Tl,buttons:r},scores:{label:"Scores",scope:"objects",component:Pl,buttons:r},distance:{label:"Distances",scope:"objects",component:Nl,buttons:r}})),a=Me({pred:Ll(e.res,l),scores:jl(e.res),distance:Ml(e.res)});let c=te(Me({pred:ft(a.pred),scores:ft(a.scores),distance:ft(a.distance)}));const f=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),u={markOutlier:e.markOutlier};Al(n,{get plots(){return t(o)},get controls(){return a},get props(){return t(f)},get callbacks(){return u},get params(){return t(c)},set params(d){R(c,d,!0)}}),_e()}var zm=H('<div class="data-loader svelte-1rjc99q"><!></div>'),Om=H('<div class="outliers-pane svelte-1rjc99q"><!></div>'),Vm=H('<div class="buttons"><!></div>'),Bm=H('<div class="ncomp-selector svelte-1rjc99q"><!></div>'),Ym=H(`<p class="svelte-1rjc99q">In this tab you can apply a PLS regression model developed in <strong>Train</strong> tab to
               new set of measurements without known response variable.</p> <p class="svelte-1rjc99q"><strong>Step 1.</strong></p> <p class="svelte-1rjc99q">Load the previously developed PLS model from a JSON file.</p>`,1),Dm=H(`<p class="svelte-1rjc99q"><strong>Step 2.</strong></p> <p class="svelte-1rjc99q">Load your test set. In this case, because dataset should not contain the response variable you
            can load it either from a CSV file or from SPC files.</p> <p class="svelte-1rjc99q">If you load data from a <strong>CSV file</strong>, the file structure should be the same as the training/calibration set but <strong>without the response values</strong> (only predictors). Here is an example how data structure may look like
               (note, that row labels and header are optional):</p> <div class="svelte-1rjc99q"><table class="svelte-1rjc99q"><thead class="svelte-1rjc99q"><tr class="svelte-1rjc99q"><td class="svelte-1rjc99q">Name</td><td class="svelte-1rjc99q">x1</td><td class="svelte-1rjc99q">x2</td><td class="svelte-1rjc99q">x3</td></tr></thead><tbody><tr><td class="svelte-1rjc99q">O1</td><td class="svelte-1rjc99q">3.8</td><td class="svelte-1rjc99q">1.3</td><td class="svelte-1rjc99q">13.6</td></tr><tr><td class="svelte-1rjc99q">O2</td><td class="svelte-1rjc99q">11.1</td><td class="svelte-1rjc99q">12.3</td><td class="svelte-1rjc99q">3.3</td></tr><tr><td class="svelte-1rjc99q">O3</td><td class="svelte-1rjc99q">1.2</td><td class="svelte-1rjc99q">2.3</td><td class="svelte-1rjc99q">4.2</td></tr></tbody></table> <p>If your model uses spectra as predictors, you can also load spectral data directly
                  from Galactic Industries <strong>SPC files</strong>. The app supports both single spectrum in a file and
                  files with multiple spectra, however only 2-way datasets can be loaded. You can select several
                  SPC files to load (hold Ctrl or Shift when selecting), in this case they will be combined together
                  into the same dataset.</p></div> <p class="svelte-1rjc99q"></p>`,1),Wm=H('<div class="help-text svelte-1rjc99q"><!></div>'),Hm=H('<div class="app-container svelte-1rjc99q"><!> <div class="app-controls svelte-1rjc99q"><div class="model-loader svelte-1rjc99q"><!></div> <!> <!> <!></div> <div class="app-content svelte-1rjc99q"><!></div></div>');function Um(n,e){be(e,!0);const r=g(()=>e.session.new);let s=te(-1),l=te(!1);function o(C){if(C<0||C>t(r).newres.nrows-1)return;const k=t(r).newres.objindices[C];k>=0&&!t(r).outliers.includes(k)&&(t(r).outliers.push(k),t(r).newres=null)}function a(){t(r).outliers=[],t(r).newres=null}function c(){t(r).outliers.pop(),t(r).newres=null}function f(C){C<0||(R(s,C,!0),R(l,!0))}function u(){R(l,!1),R(s,-1)}we(()=>{t(r).newset===null&&(t(r).outliers=[],t(r).newres=null),t(r).model===null&&(t(r).newres=null,t(r).newset=null)}),we(()=>{t(r).model&&(t(r).ncomp_selected=t(r).model.ncomp_selected)}),we(()=>{const C=nr(()=>JSON.stringify(e.session,Vn));e.backupSession(C,t(r).model,t(r).newres)});var d=Hm(),h=W(d);{var v=C=>{{let k=g(()=>({new:t(r).newres}));kl(C,{get model_getter(){return At},get res_getter(){return bt},get model(){return t(r).model},get res(){return t(k)},get ncomp(){return t(r).ncomp_selected},get selected(){return t(s)},closeModal:u})}};D(h,C=>{t(l)&&C(v)})}var m=q(h,2),b=W(m),_=W(b);Qa(_,{get model(){return t(r).model},set model(C){t(r).model=C}});var p=q(b,2);{var w=C=>{var k=zm(),j=W(k);Cl(j,{get WASM(){return e.WASM},get outliers(){return t(r).outliers},get model(){return t(r).model},respMandatory:!1,get dataset(){return t(r).newset},set dataset(B){t(r).newset=B},get resobj(){return t(r).newres},set resobj(B){t(r).newres=B}}),E(C,k)};D(p,C=>{t(r).model&&C(w)})}var T=q(p,2);{var y=C=>{var k=Om(),j=W(k);il(j,{get outliers(){return t(r).outliers},get dataset(){return t(r).newset},resetOutliers:a,undoOutliers:c}),E(C,k)};D(T,C=>{t(r).outliers&&t(r).outliers.length>0&&C(y)})}var S=q(T,2);{var L=C=>{var k=Bm(),j=W(k);ie(j,{label:"Download",children:(B,Y)=>{var A=Vm(),O=W(A);tt(O,{onclick:()=>ds(t(r).newres,t(r).newset,"new",t(r).ncomp_selected),text:"Res (new)"}),E(B,A)},$$slots:{default:!0}}),E(C,k)};D(S,C=>{t(r).newres&&C(L)})}var N=q(m,2),P=W(N);{var M=C=>{var k=Wm(),j=W(k);{var B=A=>{var O=Ym();E(A,O)},Y=A=>{var O=he(),$=U(O);{var I=G=>{var J=Dm();E(G,J)};D($,G=>{t(r).newset||G(I)},!0)}E(A,O)};D(j,A=>{t(r).model?A(Y,!1):A(B)})}E(C,k)},F=C=>{var k=he(),j=U(k);Qr(j,()=>t(r).newres&&t(r).model,B=>{var Y=he(),A=U(Y);{var O=$=>{{let I=g(()=>({new:t(r).newset})),G=g(()=>({new:t(r).newres}));Fm($,{markOutlier:o,showContributions:f,get data(){return t(I)},get res(){return t(G)},get model(){return t(r).model},get ncomp(){return t(r).ncomp_selected}})}};D(A,$=>{t(r).newres&&t(r).model&&$(O)})}E(B,Y)}),E(C,k)};D(P,C=>{t(r).newres?C(F,!1):C(M)})}E(n,d),_e()}var Xm=H('<sup style="color:red">β</sup>'),Gm=H('<li><button class="svelte-1josccy"> </button></li>'),Km=H("<div><!></div>"),Jm=H('<div class="info-container svelte-1josccy"><!></div>'),Zm=H('<div class="page svelte-1josccy"><header class="page-header svelte-1josccy"><div class="header-group svelte-1josccy"><img class="logo svelte-1josccy" src="logo.svg"/> <h1 class="svelte-1josccy"> <!></h1> <p class="svelte-1josccy"> </p></div> <ul class="nav svelte-1josccy"></ul></header> <main class="svelte-1josccy"><!></main> <footer class="svelte-1josccy"><div><span class="session-message svelte-1josccy"> </span> <label title="load session from file" class="upload-button svelte-1josccy"><input type="file" class="svelte-1josccy"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1josccy"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1josccy"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1josccy"><button title="Show information about the app" class="button-info svelte-1josccy">info</button> <!></div></footer> <!></div>');function Qm(n,e){be(e,!0);let r=z(e,"tabs",19,()=>[]),s=z(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let o=te(!1),a=te(void 0),c=te("Current session "),f=te(!1);function u(P){R(c,P,!0),R(f,!0),setTimeout(()=>{R(c,"Current session "),R(f,!1)},1e3)}function d(){R(o,!0)}function h(){R(o,!1)}function v(P){t(a).tab=P}function m(){const P=indexedDB.open(l,1);P.onsuccess=M=>{const C=M.target.result.transaction(e.appID,"readwrite");C.objectStore(e.appID).delete("session"),C.oncomplete=()=>{R(a,e.initSession(),!0),u("Session was reinitialzed.")},C.onerror=()=>console.error("Failed to session from DB.")}}function b(P,M){window.localStorage.removeItem(e.appID+"-blocked");const F=indexedDB.open(l,1);F.onsuccess=C=>{const B=C.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);B.put(P,"session"),B.put(ll(new Date),"session-update")}}function _(){new Promise((P,M)=>{const F=indexedDB.open(l,1);F.onsuccess=C=>{const Y=C.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");Y.onsuccess=()=>P(Y.result),Y.onerror=()=>M(Y.error)}}).then(P=>{p(P),R(c,"Last session is restored "),R(f,!0),setTimeout(()=>{R(c,"Current session "),R(f,!1)},1500)}).catch(P=>{console.error(P),R(a,e.initSession(),!0)})}function p(P){if(!P||P==="undefined"){R(a,e.initSession(),!0);return}const M=JSON.parse(P,sl);R(a,e.checkSession(M)?M:e.initSession(e.appID),!0)}function w(){const P=ll(new Date),M=e.appID+"-session-"+P+".json";t(a).date=P;const F=JSON.stringify(t(a),Vn),C=new Blob([F],{type:"text/json"}),k=window.URL.createObjectURL(C),j=document.createElement("a");j.setAttribute("href",k),j.setAttribute("download",M),j.click()}function T(P){const M=new FileReader;M.onload=()=>{p(M.result),P.target.value=""},M.readAsText(P.target.files[0])}function y(){confirm("Are you sure? All current results and models will be lost in all tabs.")&&m()}Oc(()=>{const P=e.appID,M=indexedDB.open(l,1);M.onupgradeneeded=F=>{const C=F.target.result;C.objectStoreNames.contains(P)||C.createObjectStore(P)},M.onsuccess=F=>{_()}});var S=he(),L=U(S);{var N=P=>{var M=Zm(),F=W(M),C=W(F),k=W(C),j=q(k,2),B=W(j),Y=q(B);{var A=ae=>{var re=Xm();E(ae,re)};D(Y,ae=>{s()&&ae(A)})}var O=q(j,2),$=W(O),I=q(C,2);Be(I,21,r,Ye,(ae,re,de)=>{var ue=Gm();let ge;var Ie=W(ue);Ie.__click=()=>v(de),Ie.__keydown=()=>v(de);var Ve=W(Ie);le(()=>{ge=ct(ue,1,"nav-item svelte-1josccy",null,ge,{selected:t(a).tab===de}),Te(Ve,t(re).name)}),E(ae,ue)});var G=q(F,2),J=W(G);Qr(J,()=>t(a).date,ae=>{var re=he(),de=U(re);Be(de,17,r,Ye,(ue,ge,Ie)=>{var Ve=Km();let qe;var X=W(Ve);Rn(X,()=>t(ge).component,(Q,ne)=>{ne(Q,{get WASM(){return e.WASM},get session(){return t(a)},backupSession:b})}),le(()=>qe=ct(Ve,1,`tab-content tab-content-${t(ge).label??""}`,"svelte-1josccy",qe,{hidden:t(a).tab!==Ie})),E(ue,Ve)}),E(ae,re)});var K=q(G,2),se=W(K);let Z;var ee=W(se),me=W(ee),ce=q(ee,2),fe=W(ce);fe.__change=T;var pe=q(ce,2);pe.__click=w;var Le=q(pe,2);Le.__click=y;var xe=q(se,2),Se=W(xe);Se.__click=d,Se.__keydown=d;var Pe=q(Se,2);Cr(Pe,()=>e.footer);var Oe=q(K,2);{var oe=ae=>{yl(ae,{closeModal:h,children:(re,de)=>{var ue=Jm(),ge=W(ue);Cr(ge,()=>e.info),E(re,ue)},$$slots:{default:!0}})};D(Oe,ae=>{t(o)&&ae(oe)})}le(()=>{V(k,"alt",e.appShortTitle),Te(B,e.appTitle),Te($,e.appSlogan),Z=ct(se,1,"session svelte-1josccy",null,Z,{"no-buttons":t(f)}),Te(me,t(c))}),E(P,M)};D(L,P=>{t(a)&&P(N)})}E(n,S),_e()}st(["click","keydown","change"]);const a1="modulepreload",i1=function(n){return"/"+n},c1={},$m=function(e,r,s){let l=Promise.resolve();function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return l.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};async function e1(n={}){var e,r=n,s=!!globalThis.window,l=!!globalThis.WorkerGlobalScope,o=globalThis.process?.versions?.node&&globalThis.process?.type!="renderer";if(o){const{createRequire:X}=await $m(async()=>{const{createRequire:Q}=await Promise.resolve().then(()=>s1);return{createRequire:Q}},void 0);var a=X(pr&&pr.tagName.toUpperCase()==="SCRIPT"&&pr.src||new URL("pls.js",document.baseURI).href)}var c="./this.program",f=(X,Q)=>{throw Q},u=pr&&pr.tagName.toUpperCase()==="SCRIPT"&&pr.src||new URL("pls.js",document.baseURI).href,d="",h,v;if(o){var m=a("node:fs");u.startsWith("file:")&&(d=a("node:path").dirname(a("node:url").fileURLToPath(u))+"/"),v=X=>(X=y(X)?new URL(X):X,m.readFileSync(X)),h=async X=>(X=y(X)?new URL(X):X,m.readFileSync(X,void 0)),1<process.argv.length&&(c=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),f=(X,Q)=>{throw process.exitCode=X,Q}}else if(s||l){try{d=new URL(".",u).href}catch{}l&&(v=X=>{var Q=new XMLHttpRequest;return Q.open("GET",X,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),h=async X=>{if(y(X))return new Promise((ne,ye)=>{var ve=new XMLHttpRequest;ve.open("GET",X,!0),ve.responseType="arraybuffer",ve.onload=()=>{ve.status==200||ve.status==0&&ve.response?ne(ve.response):ye(ve.status)},ve.onerror=ye,ve.send(null)});var Q=await fetch(X,{credentials:"same-origin"});if(Q.ok)return Q.arrayBuffer();throw Error(Q.status+" : "+Q.url)}}var b=console.log.bind(console),_=console.error.bind(console),p,w=!1,T,y=X=>X.startsWith("file://"),S,L,N,P,M,F=!1;function C(){var X=Ie.buffer;N=new Int8Array(X),P=new Uint8Array(X),r.HEAP32=new Int32Array(X),M=new Uint32Array(X),r.HEAPF64=new Float64Array(X),new BigInt64Array(X),new BigUint64Array(X)}function k(X){throw r.onAbort?.(X),X="Aborted("+X+")",_(X),w=!0,X=new WebAssembly.RuntimeError(X+". Build with -sASSERTIONS for more info."),L?.(X),X}var j;async function B(X){if(!p)try{var Q=await h(X);return new Uint8Array(Q)}catch{}if(X==j&&p)X=new Uint8Array(p);else if(v)X=v(X);else throw"both async and sync fetching of the wasm failed";return X}async function Y(X,Q){try{var ne=await B(X);return await WebAssembly.instantiate(ne,Q)}catch(ye){_(`failed to asynchronously prepare wasm: ${ye}`),k(ye)}}async function A(X){var Q=j;if(!p&&!y(Q)&&!o)try{var ne=fetch(Q,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(ne,X)}catch(ye){_(`wasm streaming compile failed: ${ye}`),_("falling back to ArrayBuffer instantiation")}return Y(Q,X)}class O{name="ExitStatus";constructor(Q){this.message=`Program terminated with exit(${Q})`,this.status=Q}}var $=X=>{for(;0<X.length;)X.shift()(r)},I=[],G=[],J=()=>{var X=r.preRun.shift();G.push(X)},K=!0,se=0,Z={},ee=X=>{T=X,K||0<se||(r.onExit?.(X),w=!0),f(X,new O(X))},me=X=>{if(!w)try{X()}catch(Q){Q instanceof O||Q=="unwind"||f(1,Q)}finally{if(!(K||0<se))try{T=X=T,ee(X)}catch(Q){Q instanceof O||Q=="unwind"||f(1,Q)}}},ce=globalThis.TextDecoder&&new TextDecoder,fe=(X,Q=0)=>{for(var ne=Q,ye=ne+void 0;X[ne]&&!(ne>=ye);)++ne;if(16<ne-Q&&X.buffer&&ce)return ce.decode(X.subarray(Q,ne));for(ye="";Q<ne;){var ve=X[Q++];if(ve&128){var Ne=X[Q++]&63;if((ve&224)==192)ye+=String.fromCharCode((ve&31)<<6|Ne);else{var Re=X[Q++]&63;ve=(ve&240)==224?(ve&15)<<12|Ne<<6|Re:(ve&7)<<18|Ne<<12|Re<<6|X[Q++]&63,65536>ve?ye+=String.fromCharCode(ve):(ve-=65536,ye+=String.fromCharCode(55296|ve>>10,56320|ve&1023))}}else ye+=String.fromCharCode(ve)}return ye},pe={},Le=()=>{if(!xe){var X={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(globalThis.navigator?.language??"C").replace("-","_")+".UTF-8",_:c||"./this.program"},Q;for(Q in pe)pe[Q]===void 0?delete X[Q]:X[Q]=pe[Q];var ne=[];for(Q in X)ne.push(`${Q}=${X[Q]}`);xe=ne}return xe},xe,Se=(X,Q,ne)=>{var ye=P;if(!(0<ne))return 0;var ve=Q;ne=Q+ne-1;for(var Ne=0;Ne<X.length;++Ne){var Re=X.codePointAt(Ne);if(127>=Re){if(Q>=ne)break;ye[Q++]=Re}else if(2047>=Re){if(Q+1>=ne)break;ye[Q++]=192|Re>>6,ye[Q++]=128|Re&63}else if(65535>=Re){if(Q+2>=ne)break;ye[Q++]=224|Re>>12,ye[Q++]=128|Re>>6&63,ye[Q++]=128|Re&63}else{if(Q+3>=ne)break;ye[Q++]=240|Re>>18,ye[Q++]=128|Re>>12&63,ye[Q++]=128|Re>>6&63,ye[Q++]=128|Re&63,Ne++}}return ye[Q]=0,Q-ve},Pe=X=>{for(var Q=0,ne=0;ne<X.length;++ne){var ye=X.charCodeAt(ne);127>=ye?Q++:2047>=ye?Q+=2:55296<=ye&&57343>=ye?(Q+=4,++ne):Q+=3}return Q},Oe=[null,[],[]],oe=()=>{if(o){var X=a("node:crypto");return Q=>X.randomFillSync(Q)}return Q=>crypto.getRandomValues(Q)},ae=X=>{(ae=oe())(X)};if(r.noExitRuntime&&(K=r.noExitRuntime),r.print&&(b=r.print),r.printErr&&(_=r.printErr),r.wasmBinary&&(p=r.wasmBinary),r.thisProgram&&(c=r.thisProgram),r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.shift()();r.ccall=(X,Q,ne,ye)=>{var ve={string:Ue=>{var vt=0;if(Ue!=null&&Ue!==0){vt=Pe(Ue)+1;var mr=ue(vt);Se(Ue,mr,vt),vt=mr}return vt},array:Ue=>{var vt=ue(Ue.length);return N.set(Ue,vt),vt}};X=r["_"+X];var Ne=[],Re=0;if(ye)for(var Fe=0;Fe<ye.length;Fe++){var De=ve[ne[Fe]];De?(Re===0&&(Re=ge()),Ne[Fe]=De(ye[Fe])):Ne[Fe]=ye[Fe]}return ne=X(...Ne),ne=(function(Ue){return Re!==0&&de(Re),Q==="string"?Ue?fe(P,Ue):"":Q==="boolean"?!!Ue:Ue})(ne)};var re,de,ue,ge,Ie,Ve={g:()=>k(""),j:()=>{K=!1,se=0},k:(X,Q)=>{if(Z[X]&&(clearTimeout(Z[X].id),delete Z[X]),!Q)return 0;var ne=setTimeout(()=>{delete Z[X],me(()=>re(X,performance.now()))},Q);return Z[X]={id:ne,U:Q},0},a:()=>Date.now(),c:X=>_(X?fe(P,X):""),b:()=>performance.now(),l:X=>{var Q=P.length;if(X>>>=0,2147483648<X)return!1;for(var ne=1;4>=ne;ne*=2){var ye=Q*(1+.2/ne);ye=Math.min(ye,X+100663296);e:{ye=(Math.min(2147483648,65536*Math.ceil(Math.max(X,ye)/65536))-Ie.buffer.byteLength+65535)/65536|0;try{Ie.grow(ye),C();var ve=1;break e}catch{}ve=void 0}if(ve)return!0}return!1},e:(X,Q)=>{var ne=0,ye=0,ve;for(ve of Le()){var Ne=Q+ne;M[X+ye>>2]=Ne,ne+=Se(ve,Ne,1/0)+1,ye+=4}return 0},f:(X,Q)=>{var ne=Le();M[X>>2]=ne.length,X=0;for(var ye of ne)X+=Pe(ye)+1;return M[Q>>2]=X,0},h:(X,Q,ne,ye)=>{for(var ve=0,Ne=0;Ne<ne;Ne++){var Re=M[Q>>2],Fe=M[Q+4>>2];Q+=8;for(var De=0;De<Fe;De++){var Ue=X,vt=P[Re+De],mr=Oe[Ue];vt===0||vt===10?((Ue===1?b:_)(fe(mr)),mr.length=0):mr.push(vt)}ve+=Fe}return M[ye>>2]=ve,0},i:ee,d:(X,Q)=>(ae(P.subarray(X,X+Q)),0)},qe;return qe=await(async function(){function X(ne){return ne=qe=ne.exports,r._plsfit_wasm=ne.o,r._free=ne.p,r._malloc=ne.q,r._plspredict_wasm=ne.r,r._pcvpls_wasm=ne.s,r._prepapply_wasm=ne.t,r._prepfit_wasm=ne.u,re=ne.v,r._strdup=ne.w,r._strndup=ne.x,r.__ZdaPv=ne.y,r.__ZdaPvm=ne.z,r.__ZdlPv=ne.A,r.__ZdlPvm=ne.B,r.__Znaj=ne.C,r.__ZnajSt11align_val_t=ne.D,r.__Znwj=ne.E,r.__ZnwjSt11align_val_t=ne.F,r.___libc_calloc=ne.G,r.___libc_free=ne.H,r.___libc_malloc=ne.I,r.___libc_realloc=ne.J,r._emscripten_builtin_malloc=ne.K,r._emscripten_builtin_calloc=ne.L,r._emscripten_builtin_free=ne.M,r._emscripten_builtin_realloc=ne.N,r._malloc_size=ne.O,r._malloc_usable_size=ne.P,r._reallocf=ne.Q,de=ne.R,ue=ne.S,ge=ne.T,Ie=ne.m,C(),qe}var Q={a:Ve};return r.instantiateWasm?new Promise(ne=>{r.instantiateWasm(Q,(ye,ve)=>{ne(X(ye))})}):(j??=r.locateFile?r.locateFile?r.locateFile("pls_wasm.wasm",d):d+"pls_wasm.wasm":new URL("/pls/pls.wasm",pr&&pr.tagName.toUpperCase()==="SCRIPT"&&pr.src||new URL("pls.js",document.baseURI).href).href,X((await A(Q)).instance))})(),(function(){function X(){if(r.calledRun=!0,!w){if(F=!0,qe.n(),S?.(r),r.onRuntimeInitialized?.(),r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;){var Q=r.postRun.shift();I.push(Q)}$(I)}}if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)J();$(G),r.setStatus?(r.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>r.setStatus(""),1),X()},1)):X()})(),F?e=r:e=new Promise((X,Q)=>{S=X,L=Q}),e}var t1=H('<p>Current release: <span>1.2.9</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="Tecator.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFlyTjYzT1qHeVdhXTe1zKux">video lessons</a></p>'),r1=H(`<h2>Partial Least Squares regression</h2> <p>Interactive web-application for creating, testing and applying PLS models for multivariate regression
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>The application uses <a href="https://doi.org/10.1016/j.aca.2023.341096">Procrustes cross-validation</a> for optimization and quality check on the training stage.</p> <p>Check out YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFlyTjYzT1qHeVdhXTe1zKux">video-lessons</a> for more details. The lessons are based on the Tecator dataset, which
   you can download from the app. These data are recorded on a Tecator Infratec Food and Feed Analyzer working in the wavelength
   range 850—1050 nm by the Near Infrared Transmission (NIT) principle. The response variable is Fat content (original
   dataset also contains moisture and protein content).</p> <h3>v. 1.2.9</h3> <p class="release-info">released 16/02/2026</p> <ul><li>Fixed small bug leading to wrong y-eigenvalues.</li></ul> <h3>v. 1.2.8</h3> <p class="release-info">released 22/01/2026</p> <ul><li>Small improvements and updates.</li></ul> <h3>v. 1.2.7</h3> <p class="release-info">released 04/09/2025</p> <ul><li>Small improvements to session functionality.</li></ul>`,1);function n1(n,e){be(e,!1);function r(o){const a=Object.keys(o);if(!["date","tab","train","test","new"].every(m=>a.includes(m)))return!1;const c=["model","calset","calsetp","calres","pvset","pvres","outliers","exclvars","ncomp_selected","pvscalars","prepType","prepmodel","prepmeta","prepobj"],f=Object.keys(o.train);if(!c.every(m=>f.includes(m)))return!1;const u=["model","testset","testres","outliers","ncomp_selected"],d=Object.keys(o.test);if(!u.every(m=>d.includes(m)))return!1;const h=["model","newset","newres","outliers","ncomp_selected"],v=Object.keys(o.new);return!!h.every(m=>v.includes(m))}function s(){return{date:ll(new Date),tab:0,train:{model:0,calset:0,calsetp:0,calres:0,pvset:0,pvres:0,outliers:[],exclvars:[],ncomp_selected:1,pvscalars:0,prepType:null,prepmodel:0,prepmeta:0,prepobj:[]},test:{model:0,testset:0,testres:0,outliers:[],ncomp_selected:1},new:{model:0,newset:0,newres:0,outliers:[],ncomp_selected:1}}}const l=[{name:"Train",label:"train",component:pm},{name:"Test",label:"test",component:Rm},{name:"Predict",label:"new",component:Um}];Rc(),Qm(n,{appID:"pls",appTitle:"PLS",appShortTitle:"PLS",appSlogan:"Partial least squares regression",get WASM(){return e1},get tabs(){return l},initSession:s,checkSession:r,footer:c=>{var f=t1();E(c,f)},info:c=>{var f=r1();E(c,f)},$$slots:{footer:!0,info:!0}}),_e()}hc(n1,{target:document.body});const s1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pls.js.map
