var Ch=Object.defineProperty;var Aa=Je=>{throw TypeError(Je)};var Lh=(Je,Me,ct)=>Me in Je?Ch(Je,Me,{enumerable:!0,configurable:!0,writable:!0,value:ct}):Je[Me]=ct;var Ir=(Je,Me,ct)=>Lh(Je,typeof Me!="symbol"?Me+"":Me,ct),il=(Je,Me,ct)=>Me.has(Je)||Aa("Cannot "+ct);var dr=(Je,Me,ct)=>(il(Je,Me,"read from private field"),ct?ct.call(Je):Me.get(Je)),wn=(Je,Me,ct)=>Me.has(Je)?Aa("Cannot add the same private member more than once"):Me instanceof WeakSet?Me.add(Je):Me.set(Je,ct),cl=(Je,Me,ct,Fr)=>(il(Je,Me,"write to private field"),Fr?Fr.call(Je,ct):Me.set(Je,ct),ct),Ca=(Je,Me,ct)=>(il(Je,Me,"access private method"),ct);(function(){"use strict";var wr,Jr,bn,Wn,La,Ea;var Je=document.createElement("style");Je.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-vzu0vi{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-vzu0vi:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-vzu0vi:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-vzu0vi:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-vzu0vi{display:none}.control-element.error.svelte-vzu0vi{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-vzu0vi{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-vzu0vi>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-vzu0vi>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-vzu0vi>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-vzu0vi>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-vzu0vi .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-vzu0vi .range-value_left,.control-element.svelte-vzu0vi .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-vzu0vi .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-vzu0vi .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-vzu0vi .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-vzu0vi .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-vzu0vi .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-vzu0vi .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-vzu0vi .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-vzu0vi .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-vzu0vi .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-vzu0vi .textinput>input:active::placeholder,.control-element.svelte-vzu0vi .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-vzu0vi .textinput>input:focus,.control-element.svelte-vzu0vi .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .textinput.error>input,.control-element.svelte-vzu0vi .textinput.error>input:focus,.control-element.svelte-vzu0vi .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-vzu0vi .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-vzu0vi .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-vzu0vi .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-vzu0vi .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-vzu0vi .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-vzu0vi .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-vzu0vi .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}p.svelte-16w7odi{line-height:1.5em}span.svelte-16w7odi{color:#a0a0a0}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.exclvars.svelte-181kelh{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}table.svelte-8wnifa{width:100%;border-collapse:collapse}tr.svelte-8wnifa{width:100%}th.svelte-8wnifa{border-bottom:1px solid #a0a0a0}th.svelte-8wnifa,td.svelte-8wnifa{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}td.svelte-8wnifa:first-of-type{width:25%}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}div.svelte-17oamay{width:100%;height:100%}div.svelte-17oamay .plot .axes{cursor:crosshair}div.svelte-17oamay .plot .axes-content rect{pointer-events:none}.plot-controls-area>.plot-selector-fom,.plot-controls-area>.plot-selector-loadings{margin-top:1em}.info-text.svelte-3v2vv7{line-height:1.5em}.info-text.svelte-3v2vv7>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-3v2vv7>.file-name:where(.svelte-3v2vv7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-b7gdku{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-b7gdku{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-b7gdku{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-b7gdku>div:where(.svelte-b7gdku){border-radius:.25rem}.app-controls.svelte-b7gdku>.result-stats:where(.svelte-b7gdku){background:#e8e8e8}.help-text.svelte-b7gdku{margin-top:.25rem}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku),.help-text.svelte-b7gdku>div:where(.svelte-b7gdku){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-b7gdku table:where(.svelte-b7gdku){border-collapse:collapse}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) td:where(.svelte-b7gdku){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) thead:where(.svelte-b7gdku) tr:where(.svelte-b7gdku) td:where(.svelte-b7gdku){font-weight:700;background:#f8f4e0}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) td:where(.svelte-b7gdku):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) tbody:where(.svelte-b7gdku) td:where(.svelte-b7gdku):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-b7gdku{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-b7gdku{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-b7gdku{grid-template-columns:min(330px,30%) 1fr}}.app-container.svelte-1t4ahqs{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1t4ahqs{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1t4ahqs{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1t4ahqs>div:where(.svelte-1t4ahqs){border-radius:.25rem}.help-text.svelte-1t4ahqs{margin-top:.25rem}.help-text.svelte-1t4ahqs>p:where(.svelte-1t4ahqs),.help-text.svelte-1t4ahqs>div:where(.svelte-1t4ahqs){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1t4ahqs table:where(.svelte-1t4ahqs){border-collapse:collapse}.help-text.svelte-1t4ahqs table:where(.svelte-1t4ahqs) td:where(.svelte-1t4ahqs){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1t4ahqs table:where(.svelte-1t4ahqs) thead:where(.svelte-1t4ahqs) tr:where(.svelte-1t4ahqs) td:where(.svelte-1t4ahqs){font-weight:700;background:#f8f4e0}.help-text.svelte-1t4ahqs table:where(.svelte-1t4ahqs) td:where(.svelte-1t4ahqs):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1t4ahqs table:where(.svelte-1t4ahqs) tbody:where(.svelte-1t4ahqs) td:where(.svelte-1t4ahqs):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1t4ahqs>p:where(.svelte-1t4ahqs):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1t4ahqs>p:where(.svelte-1t4ahqs):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1t4ahqs{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1t4ahqs{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Je);var Me=typeof document<"u"?document.currentScript:null;const ct=!1;var Fr=Array.isArray,Ta=Array.prototype.indexOf,Xn=Array.from,za=Object.defineProperty,fr=Object.getOwnPropertyDescriptor,ul=Object.getOwnPropertyDescriptors,Na=Object.prototype,Pa=Array.prototype,Gn=Object.getPrototypeOf,dl=Object.isExtensible;function jr(r){return typeof r=="function"}const ht=()=>{};function Ra(r){return typeof(r==null?void 0:r.then)=="function"}function Ma(r){return r()}function yn(r){for(var e=0;e<r.length;e++)r[e]()}const Ht=2,fl=4,xn=8,kn=16,sr=32,Vr=64,En=128,Rt=256,Sn=512,Tt=1024,$t=2048,yr=4096,lr=8192,An=16384,vl=32768,Or=65536,Ia=1<<17,Fa=1<<19,hl=1<<20,Kn=1<<21,vr=Symbol("$state"),ml=Symbol("legacy props"),ja=Symbol("");function gl(r){return r===this.v}function bl(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function Va(r,e){return r!==e}function Jn(r){return!bl(r,this.v)}function Oa(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function qa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Da(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Ba(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ya(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function Wa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ha(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ua(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let qr=!1,Xa=!1;function Ga(){qr=!0}const Qn=1,Zn=2,pl=4,Ka=8,Ja=16,Qa=1,Za=2,$a=4,ei=8,ti=16,ri=4,_l=1,ni=2,mt=Symbol(),si="http://www.w3.org/1999/xhtml";function wl(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let qe=null;function Cn(r){qe=r}function Et(r){return yl().get(r)}function li(r,e){return yl().set(r,e),e}function oe(r,e=!1,t){var s=qe={p:qe,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};qr&&!e&&(qe.l={s:null,u:null,r1:[],r2:kr(!1)}),Nl(()=>{s.d=!0})}function ae(r){const e=qe;if(e!==null){const a=e.e;if(a!==null){var t=Oe,s=Ye;e.e=null;try{for(var l=0;l<a.length;l++){var o=a[l];qt(o.effect),zt(o.reaction),$r(o.fn)}}finally{qt(t),zt(s)}}qe=e.p,e.m=!0}return{}}function xr(){return!qr||qe!==null&&qe.l===null}function yl(r){return qe===null&&wl(),qe.c??(qe.c=new Map(oi(qe)||void 0))}function oi(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function Xe(r){if(typeof r!="object"||r===null||vr in r)return r;const e=Gn(r);if(e!==Na&&e!==Pa)return r;var t=new Map,s=Fr(r),l=re(0),o=Ye,a=c=>{var d=Ye;zt(o);var u=c();return zt(d),u};return s&&t.set("length",re(r.length)),new Proxy(r,{defineProperty(c,d,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Wa();var f=t.get(d);return f===void 0?(f=a(()=>re(u.value)),t.set(d,f)):D(f,a(()=>Xe(u.value))),!0},deleteProperty(c,d){var u=t.get(d);if(u===void 0)d in c&&(t.set(d,a(()=>re(mt))),$n(l));else{if(s&&typeof d=="string"){var f=t.get("length"),h=Number(d);Number.isInteger(h)&&h<f.v&&D(f,h)}D(u,mt),$n(l)}return!0},get(c,d,u){var m;if(d===vr)return r;var f=t.get(d),h=d in c;if(f===void 0&&(!h||(m=fr(c,d))!=null&&m.writable)&&(f=a(()=>re(Xe(h?c[d]:mt))),t.set(d,f)),f!==void 0){var v=n(f);return v===mt?void 0:v}return Reflect.get(c,d,u)},getOwnPropertyDescriptor(c,d){var u=Reflect.getOwnPropertyDescriptor(c,d);if(u&&"value"in u){var f=t.get(d);f&&(u.value=n(f))}else if(u===void 0){var h=t.get(d),v=h==null?void 0:h.v;if(h!==void 0&&v!==mt)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(c,d){var v;if(d===vr)return!0;var u=t.get(d),f=u!==void 0&&u.v!==mt||Reflect.has(c,d);if(u!==void 0||Oe!==null&&(!f||(v=fr(c,d))!=null&&v.writable)){u===void 0&&(u=a(()=>re(f?Xe(c[d]):mt)),t.set(d,u));var h=n(u);if(h===mt)return!1}return f},set(c,d,u,f){var z;var h=t.get(d),v=d in c;if(s&&d==="length")for(var m=u;m<h.v;m+=1){var p=t.get(m+"");p!==void 0?D(p,mt):m in c&&(p=a(()=>re(mt)),t.set(m+"",p))}h===void 0?(!v||(z=fr(c,d))!=null&&z.writable)&&(h=a(()=>re(void 0)),D(h,a(()=>Xe(u))),t.set(d,h)):(v=h.v!==mt,D(h,a(()=>Xe(u))));var _=Reflect.getOwnPropertyDescriptor(c,d);if(_!=null&&_.set&&_.set.call(f,u),!v){if(s&&typeof d=="string"){var b=t.get("length"),E=Number(d);Number.isInteger(E)&&E>=b.v&&D(b,E+1)}$n(l)}return!0},ownKeys(c){n(l);var d=Reflect.ownKeys(c).filter(h=>{var v=t.get(h);return v===void 0||v.v!==mt});for(var[u,f]of t)f.v!==mt&&!(u in c)&&d.push(u);return d},setPrototypeOf(){Ha()}})}function $n(r,e=1){D(r,r.v+e)}function Dr(r){var e=Ht|$t,t=Ye!==null&&(Ye.f&Ht)!==0?Ye:null;return Oe===null||t!==null&&(t.f&Rt)!==0?e|=Rt:Oe.f|=hl,{ctx:qe,deps:null,effects:null,equals:gl,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??Oe}}function g(r){const e=Dr(r);return ql(e),e}function xl(r){const e=Dr(r);return e.equals=Jn,e}function kl(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)or(e[t])}}function ai(r){for(var e=r.parent;e!==null;){if((e.f&Ht)===0)return e;e=e.parent}return null}function El(r){var e,t=Oe;qt(ai(r));try{kl(r),e=Hl(r)}finally{qt(t)}return e}function Sl(r){var e=El(r),t=(hr||(r.f&Rt)!==0)&&r.deps!==null?yr:Tt;Xt(r,t),r.equals(e)||(r.v=e,r.wv=Bl())}const Zr=new Map;function kr(r,e){var t={f:0,v:r,reactions:null,equals:gl,rv:0,wv:0};return t}function re(r,e){const t=kr(r);return ql(t),t}function Ln(r,e=!1){var s;const t=kr(r);return e||(t.equals=Jn),qr&&qe!==null&&qe.l!==null&&((s=qe.l).s??(s.s=[])).push(t),t}function D(r,e,t=!1){Ye!==null&&!tr&&xr()&&(Ye.f&(Ht|kn))!==0&&!(St!=null&&St.includes(r))&&Ua();let s=t?Xe(e):e;return Br(r,s)}function Br(r,e){if(!r.equals(e)){var t=r.v;rn?Zr.set(r,e):Zr.set(r,t),r.v=e,(r.f&Ht)!==0&&((r.f&$t)!==0&&El(r),Xt(r,(r.f&Rt)===0?Tt:yr)),r.wv=Bl(),Al(r,$t),xr()&&Oe!==null&&(Oe.f&Tt)!==0&&(Oe.f&(sr|Vr))===0&&(Dt===null?bi([r]):Dt.push(r))}return e}function Al(r,e){var t=r.reactions;if(t!==null)for(var s=xr(),l=t.length,o=0;o<l;o++){var a=t[o],c=a.f;(c&$t)===0&&(!s&&a===Oe||(Xt(a,e),(c&(Tt|Rt))!==0&&((c&Ht)!==0?Al(a,yr):Fn(a))))}}let ii=!1;var es,Cl,Ll,Tl;function ci(){if(es===void 0){es=window,Cl=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Ll=fr(e,"firstChild").get,Tl=fr(e,"nextSibling").get,dl(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),dl(t)&&(t.__t=void 0)}}function ts(r=""){return document.createTextNode(r)}function Mt(r){return Ll.call(r)}function Tn(r){return Tl.call(r)}function B(r,e){return Mt(r)}function Q(r,e){{var t=Mt(r);return t instanceof Comment&&t.data===""?Tn(t):t}}function j(r,e=1,t=!1){let s=r;for(;e--;)s=Tn(s);return s}function ui(r){r.textContent=""}function zl(r){Oe===null&&Ye===null&&Da(),Ye!==null&&(Ye.f&Rt)!==0&&Oe===null&&qa(),rn&&Oa()}function di(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Yr(r,e,t,s=!0){var l=Oe,o={ctx:qe,deps:null,nodes_start:null,nodes_end:null,f:r|$t,first:null,fn:e,last:null,next:null,parent:l,prev:null,teardown:null,transitions:null,wv:0};if(t)try{ls(o),o.f|=vl}catch(d){throw or(o),d}else e!==null&&Fn(o);var a=t&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(hl|En))===0;if(!a&&s&&(l!==null&&di(o,l),Ye!==null&&(Ye.f&Ht)!==0)){var c=Ye;(c.effects??(c.effects=[])).push(o)}return o}function Nl(r){const e=Yr(xn,null,!1);return Xt(e,Tt),e.teardown=r,e}function Ce(r){zl();var e=Oe!==null&&(Oe.f&sr)!==0&&qe!==null&&!qe.m;if(e){var t=qe;(t.e??(t.e=[])).push({fn:r,effect:Oe,reaction:Ye})}else{var s=$r(r);return s}}function fi(r){return zl(),rs(r)}function vi(r){const e=Yr(Vr,r,!0);return(t={})=>new Promise(s=>{t.outro?ar(e,()=>{or(e),s(void 0)}):(or(e),s(void 0))})}function $r(r){return Yr(fl,r,!1)}function rs(r){return Yr(xn,r,!0)}function Z(r,e=[],t=Dr){const s=e.map(t);return Er(()=>r(...s.map(n)))}function Er(r,e=0){return Yr(xn|kn|e,r,!0)}function er(r,e=!0){return Yr(xn|sr,r,!0,e)}function Pl(r){var e=r.teardown;if(e!==null){const t=rn,s=Ye;Ol(!0),zt(null);try{e.call(null)}finally{Ol(t),zt(s)}}}function Rl(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var s=t.next;(t.f&Vr)!==0?t.parent=null:or(t,e),t=s}}function hi(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&sr)===0&&or(e),e=t}}function or(r,e=!0){var t=!1;(e||(r.f&Fa)!==0)&&r.nodes_start!==null&&(Ml(r.nodes_start,r.nodes_end),t=!0),Rl(r,e&&!t),In(r,0),Xt(r,An);var s=r.transitions;if(s!==null)for(const o of s)o.stop();Pl(r);var l=r.parent;l!==null&&l.first!==null&&Il(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function Ml(r,e){for(;r!==null;){var t=r===e?null:Tn(r);r.remove(),r=t}}function Il(r){var e=r.parent,t=r.prev,s=r.next;t!==null&&(t.next=s),s!==null&&(s.prev=t),e!==null&&(e.first===r&&(e.first=s),e.last===r&&(e.last=t))}function ar(r,e){var t=[];ns(r,t,!0),Fl(t,()=>{or(r),e&&e()})}function Fl(r,e){var t=r.length;if(t>0){var s=()=>--t||e();for(var l of r)l.out(s)}else e()}function ns(r,e,t){if((r.f&lr)===0){if(r.f^=lr,r.transitions!==null)for(const a of r.transitions)(a.is_global||t)&&e.push(a);for(var s=r.first;s!==null;){var l=s.next,o=(s.f&Or)!==0||(s.f&sr)!==0;ns(s,e,o?t:!1),s=l}}}function Wr(r){jl(r,!0)}function jl(r,e){if((r.f&lr)!==0){r.f^=lr,(r.f&Tt)===0&&(r.f^=Tt),sn(r)&&(Xt(r,$t),Fn(r));for(var t=r.first;t!==null;){var s=t.next,l=(t.f&Or)!==0||(t.f&sr)!==0;jl(t,l?e:!1),t=s}if(r.transitions!==null)for(const o of r.transitions)(o.is_global||e)&&o.in()}}let en=[],ss=[];function Vl(){var r=en;en=[],yn(r)}function mi(){var r=ss;ss=[],yn(r)}function tn(r){en.length===0&&queueMicrotask(Vl),en.push(r)}function gi(){en.length>0&&Vl(),ss.length>0&&mi()}let zn=!1,Nn=!1,Pn=null,Sr=!1,rn=!1;function Ol(r){rn=r}let nn=[],Th=[],Ye=null,tr=!1;function zt(r){Ye=r}let Oe=null;function qt(r){Oe=r}let St=null;function ql(r){Ye!==null&&Ye.f&Kn&&(St===null?St=[r]:St.push(r))}let At=null,It=0,Dt=null;function bi(r){Dt=r}let Dl=1,Rn=0,hr=!1;function Bl(){return++Dl}function sn(r){var h;var e=r.f;if((e&$t)!==0)return!0;if((e&yr)!==0){var t=r.deps,s=(e&Rt)!==0;if(t!==null){var l,o,a=(e&Sn)!==0,c=s&&Oe!==null&&!hr,d=t.length;if(a||c){var u=r,f=u.parent;for(l=0;l<d;l++)o=t[l],(a||!((h=o==null?void 0:o.reactions)!=null&&h.includes(u)))&&(o.reactions??(o.reactions=[])).push(u);a&&(u.f^=Sn),c&&f!==null&&(f.f&Rt)===0&&(u.f^=Rt)}for(l=0;l<d;l++)if(o=t[l],sn(o)&&Sl(o),o.wv>r.wv)return!0}(!s||Oe!==null&&!hr)&&Xt(r,Tt)}return!1}function pi(r,e){for(var t=e;t!==null;){if((t.f&En)!==0)try{t.fn(r);return}catch{t.f^=En}t=t.parent}throw zn=!1,r}function Yl(r){return(r.f&An)===0&&(r.parent===null||(r.parent.f&En)===0)}function Mn(r,e,t,s){if(zn){if(t===null&&(zn=!1),Yl(e))throw r;return}if(t!==null&&(zn=!0),pi(r,e),Yl(e))throw r}function Wl(r,e,t=!0){var s=r.reactions;if(s!==null)for(var l=0;l<s.length;l++){var o=s[l];St!=null&&St.includes(r)||((o.f&Ht)!==0?Wl(o,e,!1):e===o&&(t?Xt(o,$t):(o.f&Tt)!==0&&Xt(o,yr),Fn(o)))}}function Hl(r){var m;var e=At,t=It,s=Dt,l=Ye,o=hr,a=St,c=qe,d=tr,u=r.f;At=null,It=0,Dt=null,hr=(u&Rt)!==0&&(tr||!Sr||Ye===null),Ye=(u&(sr|Vr))===0?r:null,St=null,Cn(r.ctx),tr=!1,Rn++,r.f|=Kn;try{var f=(0,r.fn)(),h=r.deps;if(At!==null){var v;if(In(r,It),h!==null&&It>0)for(h.length=It+At.length,v=0;v<At.length;v++)h[It+v]=At[v];else r.deps=h=At;if(!hr)for(v=It;v<h.length;v++)((m=h[v]).reactions??(m.reactions=[])).push(r)}else h!==null&&It<h.length&&(In(r,It),h.length=It);if(xr()&&Dt!==null&&!tr&&h!==null&&(r.f&(Ht|yr|$t))===0)for(v=0;v<Dt.length;v++)Wl(Dt[v],r);return l!==null&&l!==r&&(Rn++,Dt!==null&&(s===null?s=Dt:s.push(...Dt))),f}finally{At=e,It=t,Dt=s,Ye=l,hr=o,St=a,Cn(c),tr=d,r.f^=Kn}}function _i(r,e){let t=e.reactions;if(t!==null){var s=Ta.call(t,r);if(s!==-1){var l=t.length-1;l===0?t=e.reactions=null:(t[s]=t[l],t.pop())}}t===null&&(e.f&Ht)!==0&&(At===null||!At.includes(e))&&(Xt(e,yr),(e.f&(Rt|Sn))===0&&(e.f^=Sn),kl(e),In(e,0))}function In(r,e){var t=r.deps;if(t!==null)for(var s=e;s<t.length;s++)_i(r,t[s])}function ls(r){var e=r.f;if((e&An)===0){Xt(r,Tt);var t=Oe,s=qe,l=Sr;Oe=r,Sr=!0;try{(e&kn)!==0?hi(r):Rl(r),Pl(r);var o=Hl(r);r.teardown=typeof o=="function"?o:null,r.wv=Dl;var a=r.deps,c;ct&&Xa&&r.f&$t}catch(d){Mn(d,r,t,s||r.ctx)}finally{Sr=l,Oe=t}}}function wi(){try{Ba()}catch(r){if(Pn!==null)Mn(r,Pn,null);else throw r}}function Ul(){var r=Sr;try{var e=0;for(Sr=!0;nn.length>0;){e++>1e3&&wi();var t=nn,s=t.length;nn=[];for(var l=0;l<s;l++){var o=xi(t[l]);yi(o)}Zr.clear()}}finally{Nn=!1,Sr=r,Pn=null}}function yi(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var s=r[t];if((s.f&(An|lr))===0)try{sn(s)&&(ls(s),s.deps===null&&s.first===null&&s.nodes_start===null&&(s.teardown===null?Il(s):s.fn=null))}catch(l){Mn(l,s,null,s.ctx)}}}function Fn(r){Nn||(Nn=!0,queueMicrotask(Ul));for(var e=Pn=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Vr|sr))!==0){if((t&Tt)===0)return;e.f^=Tt}}nn.push(e)}function xi(r){for(var e=[],t=r;t!==null;){var s=t.f,l=(s&(sr|Vr))!==0,o=l&&(s&Tt)!==0;if(!o&&(s&lr)===0){if((s&fl)!==0)e.push(t);else if(l)t.f^=Tt;else try{sn(t)&&ls(t)}catch(d){Mn(d,t,null,t.ctx)}var a=t.first;if(a!==null){t=a;continue}}var c=t.parent;for(t=t.next;t===null&&c!==null;)t=c.next,c=c.parent}return e}function ki(r){for(var e;;){if(gi(),nn.length===0)return e;Nn=!0,Ul()}}function n(r){var e=r.f,t=(e&Ht)!==0;if(Ye!==null&&!tr){if(!(St!=null&&St.includes(r))){var s=Ye.deps;r.rv<Rn&&(r.rv=Rn,At===null&&s!==null&&s[It]===r?It++:At===null?At=[r]:(!hr||!At.includes(r))&&At.push(r))}}else if(t&&r.deps===null&&r.effects===null){var l=r,o=l.parent;o!==null&&(o.f&Rt)===0&&(l.f^=Rt)}return t&&(l=r,sn(l)&&Sl(l)),rn&&Zr.has(r)?Zr.get(r):r.v}function Ut(r){var e=tr;try{return tr=!0,r()}finally{tr=e}}const Ei=-7169;function Xt(r,e){r.f=r.f&Ei|e}function Si(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(vr in r)os(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&vr in t&&os(t)}}}function os(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let s in r)try{os(r[s],e)}catch{}const t=Gn(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const s=ul(t);for(let l in s){const o=s[l].get;if(o)try{o.call(r)}catch{}}}}}const Ai=["touchstart","touchmove"];function Ci(r){return Ai.includes(r)}let Xl=!1;function Li(){Xl||(Xl=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function as(r){var e=Ye,t=Oe;zt(null),qt(null);try{return r()}finally{zt(e),qt(t)}}function Ti(r,e,t,s=t){r.addEventListener(e,()=>as(t));const l=r.__on_r;l?r.__on_r=()=>{l(),s(!0)}:r.__on_r=()=>s(!0),Li()}const Gl=new Set,is=new Set;function zi(r,e,t,s={}){function l(o){if(s.capture||ln.call(e,o),!o.cancelBubble)return as(()=>t==null?void 0:t.call(this,o))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?tn(()=>{e.addEventListener(r,l,s)}):e.addEventListener(r,l,s),l}function Ar(r,e,t,s,l){var o={capture:s,passive:l},a=zi(r,e,t,o);(e===document.body||e===window||e===document)&&Nl(()=>{e.removeEventListener(r,a,o)})}function rt(r){for(var e=0;e<r.length;e++)Gl.add(r[e]);for(var t of is)t(r)}function ln(r){var z;var e=this,t=e.ownerDocument,s=r.type,l=((z=r.composedPath)==null?void 0:z.call(r))||[],o=l[0]||r.target,a=0,c=r.__root;if(c){var d=l.indexOf(c);if(d!==-1&&(e===document||e===window)){r.__root=e;return}var u=l.indexOf(e);if(u===-1)return;d<=u&&(a=d)}if(o=l[a]||r.target,o!==e){za(r,"currentTarget",{configurable:!0,get(){return o||t}});var f=Ye,h=Oe;zt(null),qt(null);try{for(var v,m=[];o!==null;){var p=o.assignedSlot||o.parentNode||o.host||null;try{var _=o["__"+s];if(_!=null&&(!o.disabled||r.target===o))if(Fr(_)){var[b,...E]=_;b.apply(o,[r,...E])}else _.call(o,r)}catch(y){v?m.push(y):v=y}if(r.cancelBubble||p===e||p===null)break;o=p}if(v){for(let y of m)queueMicrotask(()=>{throw y});throw v}}finally{r.__root=e,delete r.currentTarget,zt(f),qt(h)}}}function cs(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function Hr(r,e){var t=Oe;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function G(r,e){var t=(e&_l)!==0,s=(e&ni)!==0,l,o=!r.startsWith("<!>");return()=>{l===void 0&&(l=cs(o?r:"<!>"+r),t||(l=Mt(l)));var a=s||Cl?document.importNode(l,!0):l.cloneNode(!0);if(t){var c=Mt(a),d=a.lastChild;Hr(c,d)}else Hr(a,a);return a}}function le(r,e,t="svg"){var s=!r.startsWith("<!>"),l=(e&_l)!==0,o=`<${t}>${s?r:"<!>"+r}</${t}>`,a;return()=>{if(!a){var c=cs(o),d=Mt(c);if(l)for(a=document.createDocumentFragment();Mt(d);)a.appendChild(Mt(d));else a=Mt(d)}var u=a.cloneNode(!0);if(l){var f=Mt(u),h=u.lastChild;Hr(f,h)}else Hr(u,u);return u}}function ie(){var r=document.createDocumentFragment(),e=document.createComment(""),t=ts();return r.append(e,t),Hr(e,t),r}function C(r,e){r!==null&&r.before(e)}let us=!0;function he(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function Ni(r,e){return Pi(r,e)}const Ur=new Map;function Pi(r,{target:e,anchor:t,props:s={},events:l,context:o,intro:a=!0}){ci();var c=new Set,d=h=>{for(var v=0;v<h.length;v++){var m=h[v];if(!c.has(m)){c.add(m);var p=Ci(m);e.addEventListener(m,ln,{passive:p});var _=Ur.get(m);_===void 0?(document.addEventListener(m,ln,{passive:p}),Ur.set(m,1)):Ur.set(m,_+1)}}};d(Xn(Gl)),is.add(d);var u=void 0,f=vi(()=>{var h=t??e.appendChild(ts());return er(()=>{if(o){oe({});var v=qe;v.c=o}l&&(s.$$events=l),us=a,u=r(h,s)||{},us=!0,o&&ae()}),()=>{var p;for(var v of c){e.removeEventListener(v,ln);var m=Ur.get(v);--m===0?(document.removeEventListener(v,ln),Ur.delete(v)):Ur.set(v,m)}is.delete(d),h!==t&&((p=h.parentNode)==null||p.removeChild(h))}});return Ri.set(u,f),u}let Ri=new WeakMap;const ds=0,jn=1,fs=2;function vs(r,e,t,s,l){var o=r,a=xr(),c=qe,d=mt,u,f,h,v=(a?kr:Ln)(void 0),m=(a?kr:Ln)(void 0),p=!1;function _(E,z){p=!0,z&&(qt(b),zt(b),Cn(c));try{E===ds&&t&&(u?Wr(u):u=er(()=>t(o))),E===fs&&l&&(h?Wr(h):h=er(()=>l(o,m))),E!==ds&&u&&ar(u,()=>u=null),E!==jn&&f&&ar(f,()=>f=null),E!==fs&&h&&ar(h,()=>h=null)}finally{z&&(Cn(null),zt(null),qt(null),ki())}}var b=Er(()=>{if(d!==(d=e())){if(Ra(d)){var E=d;p=!1,E.then(z=>{E===d&&(Br(v,z),_(jn,!0))},z=>{if(E===d&&(Br(m,z),_(fs,!0),!l))throw m.v}),tn(()=>{p||_(ds,!0)})}else Br(v,d),_(jn,!1);return()=>d=mt}})}function X(r,e,[t,s]=[0,0]){var l=r,o=null,a=null,c=mt,d=t>0?Or:0,u=!1;const f=(v,m=!0)=>{u=!0,h(m,v)},h=(v,m)=>{c!==(c=v)&&(c?(o?Wr(o):m&&(o=er(()=>m(l))),a&&ar(a,()=>{a=null})):(a?Wr(a):m&&(a=er(()=>m(l,[t+1,s]))),o&&ar(o,()=>{o=null})))};Er(()=>{u=!1,e(f),u||h(null,null)},d)}function on(r,e,t){var s=r,l=mt,o,a=xr()?Va:bl;Er(()=>{a(l,l=e())&&(o&&ar(o),o=er(()=>t(s)))})}function Te(r,e){return e}function Mi(r,e,t,s){for(var l=[],o=e.length,a=0;a<o;a++)ns(e[a].e,l,!0);var c=o>0&&l.length===0&&t!==null;if(c){var d=t.parentNode;ui(d),d.append(t),s.clear(),mr(r,e[0].prev,e[o-1].next)}Fl(l,()=>{for(var u=0;u<o;u++){var f=e[u];c||(s.delete(f.k),mr(r,f.prev,f.next)),or(f.e,!c)}})}function Ae(r,e,t,s,l,o=null){var a=r,c={flags:e,items:new Map,first:null},d=(e&pl)!==0;if(d){var u=r;a=u.appendChild(ts())}var f=null,h=!1,v=xl(()=>{var m=t();return Fr(m)?m:m==null?[]:Xn(m)});Er(()=>{var m=n(v),p=m.length;h&&p===0||(h=p===0,Ii(m,c,a,l,e,s,t),o!==null&&(p===0?f?Wr(f):f=er(()=>o(a)):f!==null&&ar(f,()=>{f=null})),n(v))})}function Ii(r,e,t,s,l,o,a){var O,M,I,Y;var c=(l&Ka)!==0,d=(l&(Qn|Zn))!==0,u=r.length,f=e.items,h=e.first,v=h,m,p=null,_,b=[],E=[],z,y,w,S;if(c)for(S=0;S<u;S+=1)z=r[S],y=o(z,S),w=f.get(y),w!==void 0&&((O=w.a)==null||O.measure(),(_??(_=new Set)).add(w));for(S=0;S<u;S+=1){if(z=r[S],y=o(z,S),w=f.get(y),w===void 0){var L=v?v.e.nodes_start:t;p=ji(L,e,p,p===null?e.first:p.next,z,y,S,s,l,a),f.set(y,p),b=[],E=[],v=p.next;continue}if(d&&Fi(w,z,S,l),(w.e.f&lr)!==0&&(Wr(w.e),c&&((M=w.a)==null||M.unfix(),(_??(_=new Set)).delete(w))),w!==v){if(m!==void 0&&m.has(w)){if(b.length<E.length){var A=E[0],T;p=A.prev;var P=b[0],N=b[b.length-1];for(T=0;T<b.length;T+=1)Kl(b[T],A,t);for(T=0;T<E.length;T+=1)m.delete(E[T]);mr(e,P.prev,N.next),mr(e,p,P),mr(e,N,A),v=A,p=N,S-=1,b=[],E=[]}else m.delete(w),Kl(w,v,t),mr(e,w.prev,w.next),mr(e,w,p===null?e.first:p.next),mr(e,p,w),p=w;continue}for(b=[],E=[];v!==null&&v.k!==y;)(v.e.f&lr)===0&&(m??(m=new Set)).add(v),E.push(v),v=v.next;if(v===null)continue;w=v}b.push(w),p=w,v=w.next}if(v!==null||m!==void 0){for(var k=m===void 0?[]:Xn(m);v!==null;)(v.e.f&lr)===0&&k.push(v),v=v.next;var F=k.length;if(F>0){var W=(l&pl)!==0&&u===0?t:null;if(c){for(S=0;S<F;S+=1)(I=k[S].a)==null||I.measure();for(S=0;S<F;S+=1)(Y=k[S].a)==null||Y.fix()}Mi(e,k,W,f)}}c&&tn(()=>{var V;if(_!==void 0)for(w of _)(V=w.a)==null||V.apply()}),Oe.first=e.first&&e.first.e,Oe.last=p&&p.e}function Fi(r,e,t,s){(s&Qn)!==0&&Br(r.v,e),(s&Zn)!==0?Br(r.i,t):r.i=t}function ji(r,e,t,s,l,o,a,c,d,u){var f=(d&Qn)!==0,h=(d&Ja)===0,v=f?h?Ln(l):kr(l):l,m=(d&Zn)===0?a:kr(a),p={i:m,v,k:o,a:null,e:null,prev:t,next:s};try{return p.e=er(()=>c(r,v,m,u),ii),p.e.prev=t&&t.e,p.e.next=s&&s.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),s!==null&&(s.prev=p,s.e.prev=p.e),p}finally{}}function Kl(r,e,t){for(var s=r.next?r.next.e.nodes_start:t,l=e?e.e.nodes_start:t,o=r.e.nodes_start;o!==s;){var a=Tn(o);l.before(o),o=a}}function mr(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function yt(r,e,t=!1,s=!1,l=!1){var o=r,a="";Z(()=>{var c=Oe;if(a!==(a=e()??"")&&(c.nodes_start!==null&&(Ml(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),a!=="")){var d=a+"";t?d=`<svg>${d}</svg>`:s&&(d=`<math>${d}</math>`);var u=cs(d);if((t||s)&&(u=Mt(u)),Hr(Mt(u),u.lastChild),t||s)for(;Mt(u);)o.before(Mt(u));else o.before(u)}})}function gr(r,e,...t){var s=r,l=ht,o;Er(()=>{l!==(l=e())&&(o&&(or(o),o=null),o=er(()=>l(s,...t)))},Or)}function hs(r,e,t){var s=r,l,o;Er(()=>{l!==(l=e())&&(o&&(ar(o),o=null),l&&(o=er(()=>t(s,l))))},Or)}function Jl(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var l=r.length;for(e=0;e<l;e++)r[e]&&(t=Jl(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function Vi(){for(var r,e,t=0,s="",l=arguments.length;t<l;t++)(r=arguments[t])&&(e=Jl(r))&&(s&&(s+=" "),s+=e);return s}function Oi(r){return typeof r=="object"?Vi(r):r??""}const Ql=[...`
\r\f \v\uFEFF`];function qi(r,e,t){var s=r==null?"":""+r;if(e&&(s=s?s+" "+e:e),t){for(var l in t)if(t[l])s=s?s+" "+l:l;else if(s.length)for(var o=l.length,a=0;(a=s.indexOf(l,a))>=0;){var c=a+o;(a===0||Ql.includes(s[a-1]))&&(c===s.length||Ql.includes(s[c]))?s=(a===0?"":s.substring(0,a))+s.substring(c+1):a=c}}return s===""?null:s}function Di(r,e){return r==null?null:String(r)}function ut(r,e,t,s,l,o){var a=r.__className;if(a!==t||a===void 0){var c=qi(t,s,o);c==null?r.removeAttribute("class"):e?r.className=c:r.setAttribute("class",c),r.__className=t}else if(o&&l!==o)for(var d in o){var u=!!o[d];(l==null||u!==!!l[d])&&r.classList.toggle(d,u)}return o}function nt(r,e,t,s){var l=r.__style;if(l!==e){var o=Di(e);o==null?r.removeAttribute("style"):r.style.cssText=o,r.__style=e}return s}const Bi=Symbol("is custom element"),Yi=Symbol("is html");function R(r,e,t,s){var l=Wi(r);l[e]!==(l[e]=t)&&(e==="loading"&&(r[ja]=t),t==null?r.removeAttribute(e):typeof t!="string"&&Hi(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function Wi(r){return r.__attributes??(r.__attributes={[Bi]:r.nodeName.includes("-"),[Yi]:r.namespaceURI===si})}var Zl=new Map;function Hi(r){var e=Zl.get(r.nodeName);if(e)return e;Zl.set(r.nodeName,e=[]);for(var t,s=r,l=Element.prototype;l!==s;){t=ul(s);for(var o in t)t[o].set&&e.push(o);s=Gn(s)}return e}const Ui=()=>performance.now(),ir={tick:r=>requestAnimationFrame(r),now:()=>Ui(),tasks:new Set};function $l(){const r=ir.now();ir.tasks.forEach(e=>{e.c(r)||(ir.tasks.delete(e),e.f())}),ir.tasks.size!==0&&ir.tick($l)}function Xi(r){let e;return ir.tasks.size===0&&ir.tick($l),{promise:new Promise(t=>{ir.tasks.add(e={c:r,f:t})}),abort(){ir.tasks.delete(e)}}}function Vn(r,e){as(()=>{r.dispatchEvent(new CustomEvent(e))})}function Gi(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function eo(r){const e={},t=r.split(";");for(const s of t){const[l,o]=s.split(":");if(!l||o===void 0)break;const a=Gi(l.trim());e[a]=o.trim()}return e}const Ki=r=>r;function Ji(r,e,t,s){var l=(r&ri)!==0,o="both",a,c=e.inert,d=e.style.overflow,u,f;function h(){var b=Ye,E=Oe;zt(null),qt(null);try{return a??(a=t()(e,(s==null?void 0:s())??{},{direction:o}))}finally{zt(b),qt(E)}}var v={is_global:l,in(){e.inert=c,Vn(e,"introstart"),u=ms(e,h(),f,1,()=>{Vn(e,"introend"),u==null||u.abort(),u=a=void 0,e.style.overflow=d})},out(b){e.inert=!0,Vn(e,"outrostart"),f=ms(e,h(),u,0,()=>{Vn(e,"outroend"),b==null||b()})},stop:()=>{u==null||u.abort(),f==null||f.abort()}},m=Oe;if((m.transitions??(m.transitions=[])).push(v),us){var p=l;if(!p){for(var _=m.parent;_&&(_.f&Or)!==0;)for(;(_=_.parent)&&(_.f&kn)===0;);p=!_||(_.f&vl)!==0}p&&$r(()=>{Ut(()=>v.in())})}}function ms(r,e,t,s,l){var o=s===1;if(jr(e)){var a,c=!1;return tn(()=>{if(!c){var b=e({direction:o?"in":"out"});a=ms(r,b,t,s,l)}}),{abort:()=>{c=!0,a==null||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return l(),{abort:ht,deactivate:ht,reset:ht,t:()=>s};const{delay:d=0,css:u,tick:f,easing:h=Ki}=e;var v=[];if(o&&t===void 0&&(f&&f(0,1),u)){var m=eo(u(0,1));v.push(m,m)}var p=()=>1-s,_=r.animate(v,{duration:d});return _.onfinish=()=>{var b=(t==null?void 0:t.t())??1-s;t==null||t.abort();var E=s-b,z=e.duration*Math.abs(E),y=[];if(z>0){var w=!1;if(u)for(var S=Math.ceil(z/16.666666666666668),L=0;L<=S;L+=1){var A=b+E*h(L/S),T=eo(u(A,1-A));y.push(T),w||(w=T.overflow==="hidden")}w&&(r.style.overflow="hidden"),p=()=>{var P=_.currentTime;return b+E*h(P/z)},f&&Xi(()=>{if(_.playState!=="running")return!1;var P=p();return f(P,1-P),!0})}_=r.animate(y,{duration:z,fill:"forwards"}),_.onfinish=()=>{p=()=>s,f==null||f(s,1-s),l()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=ht)},deactivate:()=>{l=ht},reset:()=>{s===0&&(f==null||f(1,0))},t:()=>p()}}function gs(r,e,t=e){var s=xr();Ti(r,"input",l=>{var o=l?r.defaultValue:r.value;if(o=bs(r)?ps(o):o,t(o),s&&o!==(o=e())){var a=r.selectionStart,c=r.selectionEnd;r.value=o??"",c!==null&&(r.selectionStart=a,r.selectionEnd=Math.min(c,r.value.length))}}),Ut(e)==null&&r.value&&t(bs(r)?ps(r.value):r.value),rs(()=>{var l=e();bs(r)&&l===ps(r.value)||r.type==="date"&&!l&&!r.value||l!==r.value&&(r.value=l??"")})}function bs(r){var e=r.type;return e==="number"||e==="range"}function ps(r){return r===""?null:+r}const Hn=class Hn{constructor(e){wn(this,Wn);wn(this,wr,new WeakMap);wn(this,Jr);wn(this,bn);cl(this,bn,e)}observe(e,t){var s=dr(this,wr).get(e)||new Set;return s.add(t),dr(this,wr).set(e,s),Ca(this,Wn,La).call(this).observe(e,dr(this,bn)),()=>{var l=dr(this,wr).get(e);l.delete(t),l.size===0&&(dr(this,wr).delete(e),dr(this,Jr).unobserve(e))}}};wr=new WeakMap,Jr=new WeakMap,bn=new WeakMap,Wn=new WeakSet,La=function(){return dr(this,Jr)??cl(this,Jr,new ResizeObserver(e=>{for(var t of e){Hn.entries.set(t.target,t);for(var s of dr(this,wr).get(t.target)||[])s(t)}}))},Ir(Hn,"entries",new WeakMap);let _s=Hn;var Qi=new _s({box:"border-box"});function to(r,e,t){var s=Qi.observe(r,()=>t(r[e]));$r(()=>(Ut(()=>t(r[e])),s))}function ro(r,e){return r===e||(r==null?void 0:r[vr])===e}function Xr(r={},e,t,s){return $r(()=>{var l,o;return rs(()=>{l=o,o=[],Ut(()=>{r!==t(...o)&&(e(r,...o),l&&ro(t(...l),r)&&e(null,...l))})}),()=>{tn(()=>{o&&ro(t(...o),r)&&e(null,...o)})}}),r}function Zi(r=!1){const e=qe,t=e.l.u;if(!t)return;let s=()=>Si(e.s);if(r){let l=0,o={};const a=Dr(()=>{let c=!1;const d=e.s;for(const u in d)d[u]!==o[u]&&(o[u]=d[u],c=!0);return c&&l++,l});s=()=>n(a)}t.b.length&&fi(()=>{no(e,s),yn(t.b)}),Ce(()=>{const l=Ut(()=>t.m.map(Ma));return()=>{for(const o of l)typeof o=="function"&&o()}}),t.a.length&&Ce(()=>{no(e,s),yn(t.a)})}function no(r,e){if(r.l.s)for(const t of r.l.s)n(t);e()}let On=!1;function $i(r){var e=On;try{return On=!1,[r(),On]}finally{On=e}}const ec={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function tc(r,e,t){return new Proxy({props:r,exclude:e},ec)}const rc={get(r,e){let t=r.props.length;for(;t--;){let s=r.props[t];if(jr(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s)return s[e]}},set(r,e,t){let s=r.props.length;for(;s--;){let l=r.props[s];jr(l)&&(l=l());const o=fr(l,e);if(o&&o.set)return o.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let s=r.props[t];if(jr(s)&&(s=s()),typeof s=="object"&&s!==null&&e in s){const l=fr(s,e);return l&&!l.configurable&&(l.configurable=!0),l}}},has(r,e){if(e===vr||e===ml)return!1;for(let t of r.props)if(jr(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props)if(jr(t)&&(t=t()),!!t){for(const s in t)e.includes(s)||e.push(s);for(const s of Object.getOwnPropertySymbols(t))e.includes(s)||e.push(s)}return e}};function so(...r){return new Proxy({props:r},rc)}function lo(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function H(r,e,t,s){var L;var l=(t&Qa)!==0,o=!qr||(t&Za)!==0,a=(t&ei)!==0,c=(t&ti)!==0,d=!1,u;a?[u,d]=$i(()=>r[e]):u=r[e];var f=vr in r||ml in r,h=a&&(((L=fr(r,e))==null?void 0:L.set)??(f&&e in r&&(A=>r[e]=A)))||void 0,v=s,m=!0,p=!1,_=()=>(p=!0,m&&(m=!1,c?v=Ut(s):v=s),v);u===void 0&&s!==void 0&&(h&&o&&Ya(),u=_(),h&&h(u));var b;if(o)b=()=>{var A=r[e];return A===void 0?_():(m=!0,p=!1,A)};else{var E=(l?Dr:xl)(()=>r[e]);E.f|=Ia,b=()=>{var A=n(E);return A!==void 0&&(v=void 0),A===void 0?v:A}}if((t&$a)===0)return b;if(h){var z=r.$$legacy;return function(A,T){return arguments.length>0?((!o||!T||z||d)&&h(T?b():A),A):b()}}var y=!1,w=Ln(u),S=Dr(()=>{var A=b(),T=n(w);return y?(y=!1,T):w.v=A});return a&&n(S),l||(S.equals=Jn),function(A,T){if(arguments.length>0){const P=T?n(S):o&&a?Xe(A):A;if(!S.equals(P)){if(y=!0,D(w,P),p&&v!==void 0&&(v=P),lo(S))return A;Ut(()=>n(S))}return A}return lo(S)?S.v:n(S)}}function nc(r){qe===null&&wl(),qr&&qe.l!==null?sc(qe).m.push(r):Ce(()=>{const e=Ut(r);if(typeof e=="function")return e})}function sc(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const lc="5";typeof window<"u"&&((Ea=window.__svelte??(window.__svelte={})).v??(Ea.v=new Set)).add(lc),Ga();function oo(r,e){Le(r)&&oo(r.v,e);const t=Gr(r);if(t[0]===t[1])throw new Error('split: values in a vector "x" should vary.');const s=(t[1]-t[0])/e;return We.seq(t[0],t[1],s)}function ao(r){if(Le(r))return ao(r.v);const e=new We.valuesConstructor(r.length-1);for(let t=0;t<r.length-1;t++)e[t]=r[t+1]-r[t];return new We(e)}function io(r,e,t=!1,s=void 0,l=void 0){if(Le(r))return io(r.v,e.v,t,s,l);const o=r.length;if(e.length!==o)throw Error("Vectors 'x' and 'y' must have the same length.");if(o<2)throw Error("Vectors 'x' and 'y' must have at least two values.");s===void 0&&(s=br(r)),l===void 0&&(l=br(e));let a=0;for(let c=0;c<o;c++)a=a+(r[c]-s)*(e[c]-l);return a/(t?o:o-1)}function an(r,e){if(Le(r))return an(r.v,e);e===void 0&&(e=.1);const t=Gr(r),s=(t[1]-t[0])*e;return[t[0]-s,t[1]+s]}function Gr(r){if(Le(r))return Gr(r.v);let e=r[0],t=r[0];for(let s=1;s<r.length;s++)r[s]<e&&(e=r[s]),r[s]>t&&(t=r[s]);return[e,t]}function ws(r,e){return Le(r)?ws(r.v,e):Math.sqrt(ys(r,e))}function ys(r,e){if(e===void 0&&(e=!1),Le(r))return ys(r.v);const t=br(r);let s=0;for(let l=0;l<r.length;l++){const o=r[l]-t;s=s+o*o}return s/(e?r.length:r.length-1)}function br(r){return Le(r)?br(r.v):co(r)/r.length}function co(r){if(Le(r))return co(r.v);let e=0;for(let t=0;t<r.length;t++)e=e+r[t];return e}function xs(r){if(Le(r))return xs(r.v);let e=1;for(let t=0;t<r.length;t++)e=e*r[t];return e}function Ft(r){return Le(r)||Gt(r)?r.v[ks(r.v)-1]:r[ks(r)-1]}function ks(r){if(Le(r)||Gt(r))return ks(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]<t&&(e=s,t=r[s-1]);return e}function Bt(r){return Le(r)||Gt(r)?r.v[Es(r.v)-1]:r[Es(r)-1]}function Es(r){if(Le(r)||Gt(r))return Es(r.v);let e=1,t=r[0];for(let s=2;s<=r.length;s++)r[s-1]>t&&(e=s,t=r[s-1]);return e}const Ss=30,oc=1e-7,ac=1e-7,ic=100;function cc(r,e,t,s,l){l===void 0&&(l=ic);let o=t,a=s,c=(a-o)/l;for(let d=0;d<l;d++){let u,f;for(let m=0;m<l;m++){u=o+m*c,f=o+(m+1)*c;const p=e(u),_=e(f);if(p<=r&&_>=r)break}const h=(u+f)/2,v=e(h);if(Math.abs(v-r)<oc||(o=u,a=f,c=(a-o)/l,c/a<ac))return h}return(o+a)/2}function uo(r,e=0,t=1){let s=We.zeros(r);for(let l=0;l<r;l++)s.v[l]=e+Math.random()*(t-e);return s}function fo(r,e=0,t=1){let s=We.zeros(r);for(let l=0;l<r;l++){const o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random();s.v[l]=o*Math.sin(a)*t+e}return s}function vo(r,e=0,t=1){if(Le(r))return r.apply(l=>vo(l,e,t));const s=1/(Math.sqrt(2)*t);return .5*(1+dc((r-e)*s))}function As(r,e=0,t=1){if(Le(r))return r.apply(W=>As(W,e,t));if(e!==0||t!==1)return As(r)*t+e;if(r<0||r>1)throw Error('Parameter "p" must be between 0 and 1.');if(r<1e-10)return-1/0;if(r>.9999999999)return 1/0;const s=.425,l=5,o=.180625,a=1.6,c=3.3871327179,d=5.0434271938*10,u=1.5929113202*100,f=5.910937472*10,h=1.7895169469*10,v=7.8757757664*10,m=6.71875636*10,p=1.4234372777,_=2.75681539,b=1.3067284816,E=1.7023821103*.1,z=7.370016425*.1,y=1.2021132975*.1,w=6.657905115,S=3.081226386,L=4.2868294337*.1,A=1.7337203997*.01,T=2.4197894225*.1,P=1.2258202635*.01,N=r-.5;let k;if(Math.abs(N)<=s)return k=o-N*N,N*(((f*k+u)*k+d)*k+c)/(((m*k+v)*k+h)*k+1);k=N<0?r:1-r,k=Math.sqrt(-Math.log(k));let F;return k<=l?(k=k-a,F=(((E*k+b)*k+_)*k+p)/((y*k+z)*k+1)):(k=k-l,F=((A*k+L)*k+S+w)/((P*k+T)*k+1)),N<0?-F:F}function ho(r,e){if(Array.isArray(r))return ho(ze(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(d){if(d===0)return 0;if(e===0||e>100&&d>e*2||e>50&&d>e*3||e>10&&d>e*5||e>5&&d>e*8||d>e*30)return 1;const u=d/e,f=Math.pow(u,1/6)-.5*Math.pow(u,1/3)+1/3*Math.pow(u,1/2);return vo(f,t,l)}function a(d){return d===0?0:e===0||e>100&&d>e*2||e>50&&d>e*3||e>10&&d>e*5||e>5&&d>e*8||d>e*30?1:uc(d/2,e/2)/cn(e/2)}const c=e>Ss?o:a;return Le(r)?r.apply(c):c(r)}function mo(r,e){if(Array.isArray(r))return mo(ze(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),s=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),l=Math.sqrt(s);function o(d){if(d===0)return 0;if(d===1)return Inf;if(e===0)return 0;const u=As(d,t,l),f=Math.pow(Math.sqrt(36*u*u-30*u+13)/4+(3*u-3/2)/2+1/8,1/3);return Math.pow(f-3/(4*f)+.5,6)*e}function a(d){return d===0?0:d===1?Inf:e===0?0:cc(d,f=>ho(f,e),0,Ss*10)}const c=e>Ss?o:a;return Le(r)?r.apply(c):c(r)}function cn(r){if(Le(r))return r.apply(cn);if(r<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(r<.5)return Math.PI/(Math.sin(Math.PI*r)+cn(1-r));r=r-1;let t=.9999999999998099;for(let l=0;l<e.length;l++)t=t+e[l]/(r+l+1);const s=r+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(s,r+.5)*Math.exp(-s)*t}function uc(r,e){let l=0;for(let o=0;o<1e4;o++){const a=Math.pow(r,o)/cn(e+o+1);if(isNaN(a)||a<1e-18)break;l+=a}return Math.pow(r,e)*cn(e)*Math.exp(-r)*l}function dc(r){const e=r>=0?1:-1;r=Math.abs(r);const t=.254829592,s=-.284496736,l=1.421413741,o=-1.453152027,a=1.061405429,d=1/(1+.3275911*r),u=1-((((a*d+o)*d+l)*d+s)*d+t)*d*Math.exp(-r*r);return e*u}function go(r){const e=r.nrows,t=r.ncols;if(e<t){const a=go(r.subset([],gt.seq(1,e)));return{Q:a.Q,R:po(a.Q,r)}}let s=ot.eye(e),l=r.t();for(let a=1;a<=t;a++)for(let c=e;c>=a+1;c--){const d=l.v.subarray((c-2)*t,c*t),u=s.v.subarray((c-2)*e,c*e),f=d.slice(),h=u.slice(),[v,m,p]=fc(f[a-1],f[a-1+t]);for(let _=0;_<t;_++)d[_]=f[_]*v+f[_+t]*m,d[_+t]=f[_]*-m+f[_+t]*v,u[_]=h[_]*v+h[_+e]*m,u[_+e]=h[_]*-m+h[_+e]*v;for(let _=t;_<e;_++)u[_]=h[_]*v+h[_+e]*m,u[_+e]=h[_]*-m+h[_+e]*v}const o=gt.seq(1,t);return{Q:e===t?s:s.subset([],o),R:e===t?l.t():l.subset([],o).t()}}function fc(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const o=e/r,a=Math.sqrt(1+o*o),c=1/a;return[c,o*c,r*a]}const t=r/e,s=Math.sqrt(1+t*t),l=1/s;return[t*l,l,e*s]}function bo(r){return typeof r=="number"}function po(r,e){if(e===void 0&&(e=r),!rr(r)||!rr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=r.nrows,s=r.ncols,l=e.nrows,o=e.ncols,a=s,c=o,d=t,u=new Float64Array(a*c);for(let f=0;f<c;f++){const h=e.v.subarray(f*l,(f+1)*l),v=u.subarray(f*a,(f+1)*a);for(let m=0;m<a;m++){const p=r.v.subarray(m*t,(m+1)*t);let _=0;for(let b=0;b<d;b++)_+=p[b]*h[b];v[m]=_}}return new ot(u,a,c)}function _o(r,e,t){if(t===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new We(r.v)}if(r.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new ot(r.v,e,t)}function rr(r){return r&&r.constructor===ot}function vc(r,e,t){return new ot(new Float64Array(r),e,t)}const ke=class ke{constructor(e,t,s){if(!ArrayBuffer.isView(e)||e.constructor!==ke.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||s===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*s)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=s}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return ke.diagm(this.diag().apply(d=>Math.abs(d)>Number.EPSILON?1/d:x));const s=ke.eye(e),l=ke.eye(e),o=this.t(),a=o.v[(e-1)*e+(e-1)],c=e-1;for(let d=0;d<e;d++)l.v[c*e+d]=s.v[c*e+d]/a;for(let d=e-2;d>=0;d--){let u=s.getcolumn(d+1);const f=o.getcolref(d+1);for(let h=d+1;h<e;h++){const v=l.getcolumn(h+1);u=u.subtract(v.mult(f[h]))}l.v.set(u.divide(f[d]).v,d*e)}return l.t()}if(this.islowertriangular()){const s=this.diag();if(xs(s)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const l=ke.eye(e),o=ke.eye(e),a=this.t(),c=0,d=a.v[0];for(let u=0;u<e;u++)o.v[c*e+u]=l.v[c*e+u]/d;for(let u=1;u<e;u++){let f=l.getcolumn(u+1);const h=a.getcolref(u+1);for(let v=0;v<u;v++){const m=o.getcolumn(v+1);f=f.subtract(m.mult(h[v]))}o.v.set(f.divide(h[u]).v,u*e)}return o.t()}const t=go(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>ke.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>ke.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let s=0;s<e;s++)t[s]=this.getcolref(s+1)[s];return new We(t)}t(){const e=this.nrows,t=this.ncols,s=new ke.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let l=0;l<this.ncols;l++){const o=this.v.subarray(l*this.nrows,(l+1)*this.nrows);for(let a=0;a<this.nrows;a++)s[a*t+l]=o[a]}return new ke(s,t,e)}for(let l=0;l<this.nrows;l++){const o=s.subarray(l*t,(l+1)*t);for(let a=0;a<this.ncols;a++)o[a]=this.v[a*this.nrows+l]}return new ke(s,t,e)}dot(e){if(Le(e))return new ke(Ts(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(rr(e))return new ke(Ts(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,s){if(rr(e))return new ke(Cs(this.v,e.v,t),this.nrows,this.ncols);if(bo(e))return new ke(Ls(this.v,e,t),this.nrows,this.ncols);if(!Le(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(s===void 0&&(s=e.length===this.ncols?2:1),s===2&&e.length===this.ncols){const l=new ke.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(Ls(this.getcolref(o+1),e.v[o],t),o*this.nrows);return new ke(l,this.nrows,this.ncols)}if(s===1&&e.length===this.nrows){const l=new ke.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)l.set(Cs(this.getcolref(o+1),e.v,t),o*this.nrows);return new ke(l,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e,t){if(t===void 0&&(t=2),t==2){const s=this.ncols,l=new ke.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.getcolref(o+1));return new We(l)}if(t==1)return this.t().apply(e,2);if(t==0){const s=this.v.length,l=new ke.valuesConstructor(s);for(let o=0;o<s;o++)l[o]=e(this.v[o]);return new ke(l,this.nrows,this.ncols)}}replace(e,t,s){typeof t=="number"&&(t=[t]),t.length===0&&(t=gt.seq(1,this.nrows)),Gt(t)||(t=Kt(t)),typeof s=="number"&&(s=[s]),s.length===0&&(s=gt.seq(1,this.ncols)),Gt(s)||(s=Kt(s));const l=t.length,o=s.length;if(Ft(t)<1||Bt(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(Ft(s)<1||Bt(s)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==l||e.ncols!==o)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let a=0;a<s.length;a++){const c=e.getcolref(a+1),d=(s.v[a]-1)*this.nrows;for(let u=0;u<t.length;u++){const f=t.v[u];this.v[d+f-1]=c[u]}}return this}copy(){return new ke(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new We.valuesConstructor(this.ncols);for(let s=0;s<this.ncols;s++)t[s]=this.getcolref(s+1)[e-1];return new We(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new We(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=Kt([e])),typeof t=="number"&&(t=Kt([t])),Array.isArray(e)&&(e=e.length===0?null:Kt(e)),Array.isArray(t)&&(t=t.length===0?null:Kt(t)),e!==null&&!Gt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!Gt(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(Ft(e)<1||Bt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(Ft(t)<1||Bt(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const c=t.length,d=this.nrows,u=new ke.valuesConstructor(d*c);for(let f=0;f<t.length;f++)u.set(this.v.slice((t.v[f]-1)*this.nrows,t.v[f]*this.nrows),f*this.nrows);return new ke(u,d,c)}if(t==null)return this.t().subset(t,e).t();const s=e.length,l=t.length,o=new ke.valuesConstructor(s*l);let a=new ke.valuesConstructor(s);for(let c=0;c<l;c++){const d=this.v.subarray((t.v[c]-1)*this.nrows,t.v[c]*this.nrows);for(let u=0;u<s;u++)a[u]=d[e.v[u]-1];o.set(a,c*s)}return new ke(o,s,l)}toString(e){function t(a,c){return" ".repeat(c-a.length)+a}e===void 0&&(e=2),this.ncols;const s=Math.round(Math.abs(Math.log10(Bt(this.v))))+e+3;let l="";const o=this.t();for(let a=1;a<=o.ncols;a++)l+=Array.from(o.getcolref(a)).map(c=>t(c.toFixed(e),s)).join(" ")+`
`;return l}toCSV(e,t,s,l){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const o=l!=null&&l.length>0,a=s!=null&&s.length>0;if(o&&l.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(a&&s.length!==this.ncols+(o?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const c=this.t();let d=a?s.join(e)+`
`:"";for(let u=1;u<=c.ncols;u++)d=d+(o?l[u-1]+e:"")+c.getcolref(u).join(e)+`
`;return d=d.replace(/\./g,t),d}static randn(e,t,s,l){return _o(fo(e*t,s,l),e,t)}static rand(e,t,s,l){return _o(uo(e*t,s,l),e,t)}static eye(e,t){t===void 0&&(t=e);const s=new Float64Array(e*t);for(let l=0;l<Math.min(e,t);l++)s[l*e+l]=1;return new ke(s,e,t)}static diagm(e){if(!Le(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,s=new Float64Array(t*t);for(let l=0;l<t;l++)s[l*t+l]=e.v[l];return new ke(s,t,t)}static zeros(e,t){return t===void 0&&(t=e),new ke(new Float64Array(e*t),e,t)}static ones(e,t){return ke.fill(1,e,t)}static fill(e,t,s){s===void 0&&(s=t);const l=new Float64Array(t*s);for(let o=0;o<l.length;o++)l[o]=e;return new ke(l,t,s)}static outer(e,t,s){if(Array.isArray(e)&&(e=ze(e)),Array.isArray(t)&&(t=ze(t)),!Le(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Le(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const l=ke.zeros(e.length,t.length);for(let o=0;o<t.length;o++){const a=t.v[o],c=l.getcolref(o+1);for(let d=0;d<e.length;d++)c[d]=s(e.v[d],a)}return l}static parseCSV(e,t,s,l){function o(b){return b.some(E=>Number.isNaN(Number.parseFloat(E.trim())))}t===void 0&&(t=",");const a=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let c=e.split(/\n/),d=[],u=0;const f=c[0].split(t);(s||s===void 0&&o(f))&&(d=f,u=1),c=c.filter(b=>b.trim().length>1);let h=[],v=0;l&&(v=1);const m=c.length-u,p=f.length-v;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const _=ke.zeros(p,m);for(let b=u;b<m+u;b++){const E=c[b].split(t);let z;if(l?(h[b-u]=E[0],z=E.slice(1).map(y=>Number.parseFloat(y.trim().replace(a,".")))):z=E.map(y=>Number.parseFloat(y.trim().replace(a,"."))),z.some(y=>Number.isNaN(y)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(z.length!=p)throw Error("Wrong number of values in row #"+b);_.v.set(new Float64Array(z),(b-u)*p)}return{values:_.t(),header:d,labels:h,sep:t,dec:a}}};Ir(ke,"valuesConstructor",Float64Array),Ir(ke,"TOLERANCE",Math.pow(10,-9));let ot=ke;function Le(r){return r&&r.constructor===We}function ze(r){return new We(new Float64Array(r))}const st=class st{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new gt.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new gt(t.subarray(0,s))}filter(e){const t=new st.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new st(t.subarray(0,s))}shuffle(){return new st(ko(this.v))}sort(e){return new st(Eo(this.v,e))}sortind(e){return new gt(So(this.v,e))}rep(e){return yo(this,e)}repeach(e){return xo(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=gt.seq(1,this.length)),Gt(t)||(t=Kt(t));const s=t.length;if(Ft(t)<1||Bt(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==s)throw Error('Vector.replace: length of "x" does not match the indices.');for(let l=0;l<t.length;l++){const o=t.v[l];this.v[o-1]=e.v[l]}return this}subset(e){if(typeof e=="number"&&(e=Kt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?gt.bool2ind(e):Kt(e)),!Gt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=st.zeros(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s.v[l]=this.v[e.v[l]-1]}return s}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new st(this.v.slice(e-1,t))}copy(){return new st(this.v.slice())}dot(e){return e===void 0&&(e=this),Ts(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(Le(e))return new st(Cs(this.v,e.v,t));if(bo(e))return new st(Ls(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,s)=>t+s)}subtract(e){return this.op(e,(t,s)=>t-s)}mult(e){return this.op(e,(t,s)=>t*s)}divide(e){return this.op(e,(t,s)=>t/s)}apply(e){const t=this.v.length,s=st.zeros(t);for(let l=0;l<t;l++)s.v[l]=e(this.v[l]);return s}static c(...e){if(e.length===1)return e[0];const t=e.reduce((o,a)=>o+(typeof a=="number"?1:a.length),0),s=new st.valuesConstructor(t);let l=0;for(const o of e)typeof o=="number"?(s[l]=o,l+=1):(s.set(Le(o)?o.v:new st.valuesConstructor(o),l),l+=typeof o=="number"?1:o.length);return new st(s)}static seq(e,t,s){return wo(e,t,s,st)}static randn(e,t,s){return fo(e,t,s)}static rand(e,t,s){return uo(e,t,s)}static zeros(e){return new st(new st.valuesConstructor(e))}static ones(e){return st.fill(1,e)}static fill(e,t){const s=new st.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new st(s)}};Ir(st,"valuesConstructor",Float64Array);let We=st;function Gt(r){return r.constructor===gt}function Kt(r){return new gt(new Int32Array(r))}const ft=class ft{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new ft.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=l+1,s=s+1);return new ft(t.subarray(0,s))}filter(e){const t=new ft.valuesConstructor(this.length);let s=0;for(let l=0;l<this.length;l++)e(this.v[l],l)&&(t[s]=this.v[l],s=s+1);return new ft(t.subarray(0,s))}shuffle(){return new ft(ko(this.v))}sort(e){return new ft(Eo(this.v,e))}sortind(e){return new ft(So(this.v,e))}rep(e){return yo(this,e)}repeach(e){return xo(this,e)}subset(e){if(typeof e=="number"&&(e=Kt([e])),Array.isArray(e)&&(e=Kt(e)),!Gt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,s=new ft.valuesConstructor(t);for(let l=0;l<t;l++){if(e.v[l]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[l]>this.length)throw Error("subset: index exceeds the length of the vector.");s[l]=this.v[e.v[l]-1]}return new ft(s)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new ft(this.v.slice(e-1,t))}static seq(e,t,s){return wo(e,t,s,ft)}static ones(e){return ft.fill(1,e)}static fill(e,t){const s=new ft.valuesConstructor(t);for(let l=0;l<s.length;l++)s[l]=e;return new ft(s)}static bool2ind(e){let t=0;const s=new ft.valuesConstructor(e.length);for(let l=0;l<e.length;l++)e[l]&&(s[t]=l+1,t=t+1);return new ft(s.subarray(0,t))}};Ir(ft,"valuesConstructor",Int32Array);let gt=ft;function wo(r,e,t,s){t===void 0&&(t=r<=e?1:-1);const l=Math.floor((e-r)/t)+1;if(l<1)throw Error("seq: wrong combination of parameters.");const o=new s.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=r+a*t;return new s(o)}function yo(r,e){const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=1;l<=e;l++)for(let o=0;o<r.length;o++)s[(l-1)*r.length+o]=r.v[o];return new r.constructor(s)}function xo(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=r.length*e,s=new r.constructor.valuesConstructor(t);for(let l=0;l<r.length;l++)for(let o=0;o<e;o++)s[l*e+o]=r.v[l];return new r.constructor(s)}function Cs(r,e,t){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e[l]);return s}function Ls(r,e,t){const s=new r.constructor(r.length);for(let l=0;l<r.length;l++)s[l]=t(r[l],e);return s}function Ts(r,e,t,s,l,o){if(s!==l)throw Error("_dot: matrix dimensions do not much.");const a=t,c=o,d=s,u=new r.constructor(a*c);for(let f=0;f<c;f++){const h=e.subarray(f*l,(f+1)*l),v=u.subarray(f*a,(f+1)*a);for(let m=0;m<d;m++){const p=h[m],_=r.subarray(m*t,(m+1)*t);for(let b=0;b<a;b++)v[b]+=_[b]*p}}return u}function ko(r){let e=r.slice(),t=e.length,s,l;for(;t;)l=Math.floor(Math.random()*t--),s=e[t],e[t]=e[l],e[l]=s;return e}function Eo(r,e=!1){return e?r.slice().sort((t,s)=>s-t):r.slice().sort((t,s)=>t-s)}function So(r,e=!1){const t=gt.seq(1,r.length).v;return e?t.sort((s,l)=>r[l-1]-r[s-1]):t.sort((s,l)=>r[s-1]-r[l-1])}function hc(r,e,t){if(!r||!r.class||!r.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const s=r.ncols,l=r.ncomp;let o,a;switch(e){case"mX":o=2,a=s;break;case"sX":o=2+s,a=s;break;case"loadings":case"xloadings":o=2+2*s+(t-1)*s,a=s;break;case"P":o=2+2*s,a=t*s;break;case"eigenvals":case"xeigenvals":o=2+2*s+s*l,a=l;break;case"cq0":o=2+2*s+s*l+l,a=l;break;case"cNq":o=2+2*s+s*l+2*l,a=l;break;case"rq0":o=2+2*s+s*l+3*l,a=l;break;case"rNq":o=2+2*s+s*l+4*l,a=l;break;case"ch0":o=2+2*s+s*l+5*l,a=l;break;case"cNh":o=2+2*s+s*l+6*l,a=l;break;case"rh0":o=2+2*s+s*l+7*l,a=l;break;case"rNh":o=2+2*s+s*l+8*l,a=l;break;case"cr0":o=2+2*s+s*l+9*l,a=l;break;case"cNr":o=2+2*s+s*l+10*l,a=l;break;case"rr0":o=2+2*s+s*l+11*l,a=l;break;case"rNr":o=2+2*s+s*l+12*l,a=l;break;case"cg0":o=2+2*s+s*l+13*l,a=l;break;case"cNg":o=2+2*s+s*l+14*l,a=l;break;case"rg0":o=2+2*s+s*l+15*l,a=l;break;case"rNg":o=2+2*s+s*l+16*l,a=l;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(o,o+a)}function mc(r,e,t){if(!r||!r.class||!r.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const s=r.ncols,l=r.nrows,o=r.ncomp;let a,c;switch(e){case"scores":case"xscores":a=(t-1)*l,c=l;break;case"hdist":a=l*o+(t-1)*l,c=l;break;case"qdist":a=2*l*o+(t-1)*l,c=l;break;case"xcumexpvar":case"cumexpvar":a=3*l*o,c=o;break;case"fdistc":a=3*l*o+o+(t-1)*l,c=l;break;case"fdistr":a=4*l*o+o+(t-1)*l,c=l;break;case"gdist":a=5*l*o+o+(t-1)*s,c=s;break;case"rdist":a=5*l*o+o+s*o+(t-1)*s,c=s;break;case"idistc":a=5*l*o+o+2*s*o+(t-1)*s,c=s;break;case"idistr":a=5*l*o+o+3*s*o+(t-1)*s,c=s;break;default:throw new Error("pcares_get: wrong outcome name.")}return r.v.subarray(a,a+c)}function gc(r,e,t){return r*t+r*t+r*t+t+r*e*t+r*t+r*t+t+e*t+e*t+e*t+e*t}function Ao(r,e,t){return 3+2*(r+e)+r*t+1*t+4*t+4*t+4*t+r*t+e*t+1*t}function qn(r,e,t){if(!Array.isArray(r))return!1;if(r.length===0)return!0;for(let s=0;s<r.length;s++){const l=r[s];if(l<e||l>t)return!1}return!0}function xt(r,e,t){if(!r||!r.class||!r.class.includes("plsmodel"))throw new Error('plsmodel_get: parameter "m" must be JSON with PLS model.');const s=r.npred,l=r.nresp,o=r.ncomp;let a,c=Ao(s,l,o)-s*o-l*o-2*l;switch(e){case"mY":c=3,a=l;break;case"mX":c=3+l,a=s;break;case"sY":c=3+l+s,a=l;break;case"sX":c=3+l+s+l,a=s;break;case"P":c=3+2*(l+s),a=t*s;break;case"loadings":case"xloadings":c=3+2*(l+s)+(t-1)*s,a=s;break;case"eigenvals":case"xeigenvals":c=3+2*(l+s)+o*s,a=o;break;case"cq0":c=3+2*(l+s)+o*s+o,a=o;break;case"cNq":c=3+2*(l+s)+o*s+2*o,a=o;break;case"rq0":c=3+2*(l+s)+o*s+3*o,a=o;break;case"rNq":c=3+2*(l+s)+o*s+4*o,a=o;break;case"ch0":c=3+2*(l+s)+o*s+5*o,a=o;break;case"cNh":c=3+2*(l+s)+o*s+6*o,a=o;break;case"rh0":c=3+2*(l+s)+o*s+7*o,a=o;break;case"rNh":c=3+2*(l+s)+o*s+8*o,a=o;break;case"cz0":c=3+2*(l+s)+o*s+9*o,a=o;break;case"cNz":c=3+2*(l+s)+o*s+10*o,a=o;break;case"rz0":c=3+2*(l+s)+o*s+11*o,a=o;break;case"rNz":c=3+2*(l+s)+o*s+12*o,a=o;break;case"weights":c=3+2*(l+s)+o*s+13*o+(t-1)*s,a=s;break;case"yloadings":c=3+2*(l+s)+o*s+13*o+o*s+(t-1)*l,a=l;break;case"yeigenvals":c=3+2*(l+s)+o*s+13*o+o*s+o*l,a=o;break;default:throw Error("plsmodel_get: wrong outcome name.")}return r.v.subarray(c,c+a)}function Nt(r,e,t,s){if(!r||!r.class||!r.class.includes("plsres"))throw new Error('plsres_get: parameter "r" must be JSON with PLS results.');s||(s=1);const l=r.nrows,o=r.ncomp,a=r.nresp,c=r.nresp_model;let d,u=3*l*o+o;switch(e){case"Yp":u=u+(t-1)*c*l+(s-1)*l,d=l;break;case"yscores":u=u+o*c*l+(t-1)*l,d=l;break;case"zdist":u=u+o*c*l+o*l+(t-1)*l,d=l;break;case"ycumexpvar":u=u+o*c*l+o*l+o*l,d=o;break;case"rmse":u=u+o*c*l+o*l+o*l+o,d=c*o;break;case"r2":u=u+o*c*l+o*l+o*l+o+a*o,d=c*o;break;case"bias":u=u+o*c*l+o*l+o*l+o+2*a*o,d=c*o;break;case"slope":u=u+o*c*l+o*l+o*l+o+3*a*o,d=c*o;break;default:return mc(r,e,t)}return r.v.subarray(u,u+d)}function bc(r,e,t,s,l,o,a,c){if(!rr(e))throw new Error("pls_fit: D must be a matrix.");if(t<1||e.ncols<2+t)throw new Error("pls_fit: training set should have at least 2 predictors and 1 response.");a||(a=[]);const d=a&&Array.isArray(a)?a.length:0;if(!qn(a,0,e.nrows-1))throw new Error('pls_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!qn(c,0,e.ncols-t-1))throw new Error('pls_fit: some indices in "exclvars" array are outside the expected range.');const f=e.nrows-d,h=e.ncols-t-u;if(f<3||h<2)throw new Error("pls_fit: X must have at least 3 rows and 2 predictors.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),s===void 0&&(s=Math.min(f-1,h)),s<1||s>Math.min(f-1,h))throw new Error('pls_fit: the value of "ncomp" does not match the dimension of D.');const v=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,v/e.v.BYTES_PER_ELEMENT);let m=null;if(d>0){const F=new Int32Array(a);m=r._malloc(F.length*F.BYTES_PER_ELEMENT),r.HEAP32.set(F,m/F.BYTES_PER_ELEMENT)}let p=null;if(u>0){const F=new Int32Array(c);p=r._malloc(F.length*F.BYTES_PER_ELEMENT),r.HEAP32.set(F,p/F.BYTES_PER_ELEMENT)}const _=Ao(h,t,s),b=Float64Array,E=r._malloc(_*b.BYTES_PER_ELEMENT),z=h*t*s,y=Float64Array,w=r._malloc(z*b.BYTES_PER_ELEMENT),S=r._malloc(z*b.BYTES_PER_ELEMENT),L=r._malloc(z*b.BYTES_PER_ELEMENT);if(r.ccall("plsfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[v,e.nrows,e.ncols-t,t,s,l,o,E,m,d,p,u,S,w,L])!==1)throw new Error("pls_fit: unexpected error.");const T=r.HEAPF64.slice(E/b.BYTES_PER_ELEMENT,E/b.BYTES_PER_ELEMENT+_),P=r.HEAPF64.slice(S/y.BYTES_PER_ELEMENT,S/y.BYTES_PER_ELEMENT+z),N=r.HEAPF64.slice(w/y.BYTES_PER_ELEMENT,w/y.BYTES_PER_ELEMENT+z),k=r.HEAPF64.slice(L/y.BYTES_PER_ELEMENT,L/y.BYTES_PER_ELEMENT+z);return r._free(v),r._free(E),r._free(S),r._free(w),r._free(L),m&&r._free(m),p&&r._free(p),{class:["plsmodel","pcamodel"],v:T,ncomp:s,nrows:f,npred:h,nresp:t,exclvars:c,center:l,scale:o,coeffs:P,vip:N,sr:k}}function pc(r,e,t,s,l){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pls_predict: parameter "m" must be JSON with PLS results.');if(!rr(t))throw new Error("pls_predict: D must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!qn(l,0,t.nrows-1))throw new Error('pls_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=t.nrows-o;t.ncols-s===e.npred&&(a=0);const d=t.ncols-a-s;if(c<1)throw new Error("pls_predict: D must have at least 1 row.");if(d!==e.npred)throw new Error("pls_predict: D must have the same number of predictors (without excluded ones) as the training set.");const u=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,u/t.v.BYTES_PER_ELEMENT);let f=null;if(o>0){const O=new Int32Array(l);f=r._malloc(O.length*O.BYTES_PER_ELEMENT),r.HEAP32.set(O,f/O.BYTES_PER_ELEMENT)}let h=null;if(a>0){const O=new Int32Array(e.exclvars);h=r._malloc(O.length*O.BYTES_PER_ELEMENT),r.HEAP32.set(O,h/O.BYTES_PER_ELEMENT)}const v=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,v/e.v.BYTES_PER_ELEMENT);const m=gc(c,e.nresp,e.ncomp),p=Float64Array,_=r._malloc(m*p.BYTES_PER_ELEMENT);if(r.ccall("plspredict_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[u,t.nrows,t.ncols-s,s,v,_,f,o,h,a])!==1)throw new Error("pls_predict: unexpected error.");const E=r.HEAPF64.slice(_/p.BYTES_PER_ELEMENT,_/p.BYTES_PER_ELEMENT+m);r._free(u),r._free(v),r._free(_),f&&r._free(f),h&&r._free(h);const z={class:["plsres","pcares"],v:E,ncomp:e.ncomp,nrows:c,npred:d,nresp:s,nresp_model:e.nresp,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},y=new Array(e.ncomp),w=new Array(e.ncomp),S=new Array(e.ncomp),L=new Array(e.ncomp),A=new Array(e.ncomp),T=new Array(e.ncomp),P=new Array(e.ncomp),N=new Array(e.ncomp),k=new Array(e.ncomp),F=Nt(z,"xcumexpvar"),W=Nt(z,"ycumexpvar");if(s>0){y[0]=1,A[0]=F[0],L[0]=1-F[0],w[0]=F[0],S[0]=1-F[0],k[0]=W[0],N[0]=1-W[0],T[0]=W[0],P[0]=1-W[0];for(let V=1;V<e.ncomp;V++)y[V]=V+1,A[V]=F[V],L[V]=1-F[V],w[V]=F[V]-F[V-1],S[V]=1-w[V],k[V]=W[V],N[V]=1-W[V],T[V]=W[V]-W[V-1],P[V]=1-T[V];const O=new ot(Nt(z,"rmse"),e.nresp,e.ncomp),M=new ot(Nt(z,"r2"),e.nresp,e.ncomp),I=new ot(Nt(z,"slope"),e.nresp,e.ncomp),Y=new ot(Nt(z,"bias"),e.nresp,e.ncomp);z.stat={components:y,xresvar:S,xexpvar:w,xcumexpvar:A,xcumresvar:L,yresvar:P,yexpvar:T,ycumexpvar:k,ycumresvar:N,rmse:O.t(),r2:M.t(),slope:I.t(),bias:Y.t()}}else z.stat=null;return z}function _c(r,e,t,s,l,o,a,c,d){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pcvpls: parameter "m" must be JSON with PLS model.');if(!rr(t))throw new Error("pcvpls: D must be a matrix.");if(s<1)throw new Error("pcvpls: D must have at least one response.");d||(d=[]);const u=d&&Array.isArray(d)?d.length:0;if(!qn(d,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const f=e.exclvars.length,h=t.nrows-u,v=t.ncols-s-f;if(h<3)throw new Error("plspcv: D must have at least 3 rows.");if(v<2)throw new Error("plspcv: D must have at least 2 predictors.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('plspcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('plspcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('plspcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>h)throw new Error('plspcv: the value of "cv_nseg" is too large for the given X.');if(a===0&&(o=h),!Number.isInteger(l)||l<1)throw new Error('plspcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?h-2:h-Math.ceil(h/o)-1,v,e.ncomp);if(l>m)throw new Error('pcapcv: the value of "ncomp" is too large.');const p=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,p/t.v.BYTES_PER_ELEMENT);let _=null;if(u>0){const k=new Int32Array(d);_=r._malloc(k.length*k.BYTES_PER_ELEMENT),r.HEAP32.set(k,_/k.BYTES_PER_ELEMENT)}let b=null;if(f>0){const k=new Int32Array(e.exclvars);b=r._malloc(k.length*k.BYTES_PER_ELEMENT),r.HEAP32.set(k,b/k.BYTES_PER_ELEMENT)}const E=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,E/e.v.BYTES_PER_ELEMENT);const z=t.v.constructor,y=h*(s+v),w=r._malloc(y*z.BYTES_PER_ELEMENT),S=o*l,L=t.v.constructor,A=r._malloc(S*L.BYTES_PER_ELEMENT);if(r.ccall("pcvpls_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[p,t.nrows,t.ncols-s,s,l,e.center,e.scale,a,o,c,E,w,A,_,u,b,f])!==1)throw new Error("plspcv: unexpected error.");const P=r.HEAPF64.slice(w/z.BYTES_PER_ELEMENT,w/z.BYTES_PER_ELEMENT+y),N=r.HEAPF64.slice(A/L.BYTES_PER_ELEMENT,A/L.BYTES_PER_ELEMENT+S);return r._free(p),r._free(E),r._free(w),r._free(A),_&&r._free(_),b&&r._free(b),[new ot(P,h,s+v),new ot(N,o,l)]}function wc(r,e){let t,s,l;if(e.length>0){const o=r.values.nrows,a=r.objindices,c=o-e.length;t=Array(c),s=Array(c),l=Array(c);let d=0;for(let u=0;u<o;u++)e.includes(u)||(t[d]=a[u],s[d]=r.classes[u],l[d]=r.objlabels[u],d=d+1)}else t=r.objindices,l=r.objlabels,s=r.classes;return[t,l,s]}function Co(){const r=new Date;return`${r.getFullYear()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}${r.getHours().toString().padStart(2,"0")}${r.getMinutes().toString().padStart(2,"0")}${r.getSeconds().toString().padStart(2,"0")}${r.getMilliseconds().toString().padStart(3,"0")}`}function zs(r,e,t,s){const[l,o,a]=wc(t,s),c=pc(r,e,t.values,t.nresp,s);return c.hash=Co(),c.objindices=l,c.objlabels=o,c.varlabels=e.varlabels,t.nresp>0?c.Yref=s&&s.length>0?t.values.subset(l.map(d=>d+1),gt.seq(1,t.nresp)):t.values.subset(null,gt.seq(1,t.nresp)):c.Yref=null,c}function yc(r,e="."){return Array.isArray(r)&&r.length>0?e==="."?r.map(t=>Number.parseFloat(t.trim())):r.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(r.trim()):Number.parseFloat(r.trim().replace(e,"."))}function un(r){return r.some(e=>Number.isNaN(e))}function Cr(r){return r.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Lo(r){let e=r.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function xc(r,e,t,s,l,o,a,c=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const d=e===";"?",":".";let u=Lo(r);if(u.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");u=u.filter(M=>M.replaceAll(e,"").trim().length>0);const f=u[0].split(e);if(f.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,v;const m=t!=="no";(m||m===void 0&&un(firstRow))&&(v=f,h=1);const p=u.length-h;if(p<1)throw new Error("Data file should contain at least 1 row with values.");let _,b,E,z=Array(p);s?(_=m?Cr(v[0]):"",E=Array(p),b=1):(_="",E=[],b=0);let y,w=[],S;l?(y=m?Cr(v[b]):"",S=Array(p),b=b+1):(y="",S=[]);const L=f.length-b;if(L<1)throw new Error("Data file should contain at least 1 column with values.");const A=ot.zeros(L,p);for(let M=h;M<p+h;M++){const I=M-h;z[I]=I;let Y=u[M].split(e);if(s&&(E[I]=Y[0],Y.shift()),l){const q=Y[0];S[I]=q,Y.shift(),(w.length===0||w.indexOf(q)<0)&&w.push(q)}const V=d==="."?Y.map((q,K)=>Number.parseFloat(q.trim())):Y.map((q,K)=>Number.parseFloat(q.trim().replace(d,".")));if(V.some(q=>Number.isNaN(q)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(V.length!=L)throw new Error("Wrong number of values in row #"+M);A.v.set(new Float64Array(V),(M-h)*L)}if(!s||E.length!==p){E=Array(p);for(let M=0;M<p;M++)E[M]="O"+(M+1)}E=E.map(M=>Cr(M)),S=S.map(M=>Cr(M)),w=w.map(M=>Cr(M));let T,P=Array(L),N=Array(L);if(v&&v.length===L+b){T=v.map(M=>Cr(M)).slice(b);for(let M=0;M<L;M++)P[M]=M>=c?M-c:M,N[M]=M>=c?M-c+1:M+1}else{T=Array(L);for(let M=0;M<L;M++)P[M]=M>=c?M-c:M,T[M]=M>=c?"V"+(M-c+1):"Y"+(M+1),N[M]=M>=c?M-c+1:M+1}let k;if(t==="values"){if(k=d==="."?T.map((M,I)=>I<c?I:Number.parseFloat(M.trim())):T.map((M,I)=>I<c?I:Number.parseFloat(M.trim().replace(d,"."))),k.some(M=>Number.isNaN(M)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else k=N;Array.isArray(k)||(k=[]),o||(o=""),a||(a=""),o=k.length>0&&o.length>0?o:"Variables",a=k.length>0&&a.length>0?a:"";const F=o+(a.length>0?", "+a:""),W=k[1]<k[0];return{values:A.t(),nresp:c,header:t,hasLabels:s,hasClassNames:l,labelsVarname:_,classLabelsVarname:y,objlabels:E,objindices:z,varlabels:T,varvalues:k,varindices:P,varrev:W,classes:S,classNames:w,sep:e,dec:d,varvaluesName:o,varvaluesUnits:a,varAxisTitle:F}}function kc(r){if(un(r[0].slice(2)))return!0;const e=r[0].length,t=[];for(let s=2;s<e;s++){let l=[];for(let u=1;u<r.length;u++)l.push(r[u][s]);const o=r[0][s],a=br(l),c=ws(l),d=Math.abs((o-a)/c);t.push(d)}return t.every(s=>s>5)}function Ec(r){const e=",",t=r[0].split(e),s=r[1].split(e),l=t.length,o=s.length,a=";",c=r[0].split(a),d=r[1].split(a),u=c.length,f=d.length;let h,v;if(l>1&&o>1&&l===o&&l>u)v=e,h=l;else if(u>1&&f>1&&u===f)v=a,h=u;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[v,v===","?".":",",h]}function Sc(r,e=0){const t=Lo(r),s=t.length;if(s<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,o,a]=Ec(t),c=Math.min(a,5),d=Math.min(s,5);let u=t[0].split(l).length,f=t.slice(0,d).map(P=>P.split(l).slice(0,c));f=f.map(P=>P.map(N=>Cr(N)));const h=f.map(P=>yc(P.slice(),o));for(let P=1;P<d;P++)if(un(h[P].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const v=kc(h);let m=0;const p=v?1:0,_=p+1,b=f[p][0],E=f[_][0],z=h[p][0],y=h[_][0],w=h[p][1],S=h[_][1];let L=!1,A=!1;if(Number.isNaN(z)&&Number.isNaN(y)&&b!==E?(L=!0,m=m+1):Number.isNaN(w)&&Number.isNaN(S)&&b!==E&&(L=!0,A=!0,m=m+2),!A){const P=L?1:0,N=h[p][P],k=h[_][P];A=un([N,k]),m=m+A}let T="no";if(v){m>0?f[0].slice(m+e):f[e];const P=m>0?h[0].slice(m+e):h[e];T=un(P)?"labels":"values"}return[l,L,A,T,u]}function Ac(r){const e=r.values.t(),t=r.sep,s=r.dec;let l=null;r.header!=="no"&&(l=r.header==="values"?r.nresp&&r.nresp>0?r.varlabels.slice(0,r.nresp).concat(r.varvalues.slice(r.nresp)):r.varvalues.slice():r.varlabels.slice()),l&&r.hasClassNames&&(l=[r.classLabelsVarname,...l]),l&&r.hasLabels&&(l=[r.labelsVarname,...l]);const o=r.classes&&r.classes.length===e.ncols,a=r.objlabels&&r.objlabels.length===e.ncols;let c=l?l.join(t):"";for(let d=0;d<e.ncols;d++){let u=e.getcolref(d+1).join(t);s!=="."&&(u=u.replace(".",s)),o&&(u=r.classes[d]+r.sep+u),a&&(u=r.objlabels[d]+r.sep+u),c=c+`
`+u}return c=c+`
`,s!=="."&&(c=c.replace(/\./g,s)),c}function Cc(r,e){const t=Ac(r),s=new Blob([t],{type:"text/csv"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download",`${e}.csv`),o.click()}function Lc(r,e){const t=r.nresp?r.nresp:0,s=r.values,l=r.varvalues,o=r.varlabels,a=r.varindices,c=s.nrows,d=s.ncols,u=d-e.length,f=ot.zeros(c,u),h=Array(u),v=Array(u),m=Array(u);let p=0;for(let _=0;_<t;_++){const b=c*_,E=c*p;f.v.set(s.v.slice(b,b+c),E),h[p]=l[_],v[p]=o[_],m[p]=a[_],p=p+1}for(let _=t;_<d;_++){if(e.includes(_-t))continue;const b=c*_,E=c*p;f.v.set(s.v.slice(b,b+c),E),h[p]=l[_],v[p]=o[_],m[p]=a[_],p=p+1}return{values:f,header:r.header,hasLabels:r.hasLabels,hasClassNames:r.hasClassNames,classNames:r.classNames,labelsVarname:r.labelsVarname,classLabelsVarname:r.classLabelsVarname,objlabels:r.objlabels,objindices:r.objindices,varlabels:v,varvalues:h,varindices:m,varrev:r.varrev,classes:r.classes,responses:r.responses,classNames:r.classNames,sep:r.sep,dec:r.dec,varvaluesName:r.varvaluesName,varvaluesUnits:r.varvaluesUnits,varAxisTitle:r.varAxisTitle,fileName:r.fileName,nresp:t}}function dn(r,e){return rr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Le(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function To(r,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return vc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return ze(e.v);const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function Ns(r){const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),l=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0"),a=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${s}${l}${o}${a}`}var Tc=G('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function dt(r,e){let t=H(e,"text",3,"button");var s=Tc();s.__click=function(...o){var a;(a=e.onclick)==null||a.apply(this,o)};var l=B(s);Z(()=>he(l,t())),C(r,s)}rt(["click"]);var zc=G('<button tabindex="0"></button>');function Ps(r,e){var t=zc();t.__click=function(...s){var l;(l=e.onclick)==null||l.apply(this,s)},Z(()=>{R(t,"title",e.title),R(t,"aria-label",e.title),R(t,"alt",e.title),ut(t,1,`button ${e.className??""}`,"svelte-bx9fh5")}),C(r,t)}rt(["click"]);function Lr(r,e){let t=H(e,"title",3,"Reset");Ps(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function Nc(r,e){let t=H(e,"title",3,"Undo");Ps(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function Pc(r,e){let t=H(e,"title",3,"Download");Ps(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-download"})}function bt(r){const e={};for(const t of Object.keys(r))e[t]=r[t].default;return e}var Rc=G('<span class="label svelte-vzu0vi"> </span>'),Mc=G("<div><!> <!></div>");function me(r,e){let t=H(e,"label",3,null),s=H(e,"name",3,""),l=H(e,"status",3,""),o=H(e,"colors",3,""),a=H(e,"labelWidth",3,12);var c=Mc(),d=B(c);{var u=h=>{var v=Rc(),m=B(v);Z(()=>{nt(v,`flex-basis:${a()??""}ch;`),he(m,t())}),C(h,v)};X(d,h=>{t()&&h(u)})}var f=j(d,2);gr(f,()=>e.children??ht),Z(()=>{ut(c,1,`control-element ${s()??""} ${l()??""}`,"svelte-vzu0vi"),nt(c,o())}),C(r,c)}const zo=(r,e,t,s)=>{const l=e(r);l<0||l>1||D(t,l*100>n(s)-5&&l*100<n(s)+5,!0)},No=(r,e,t,s,l,o)=>{D(e,!1);const a=t(r);a<0||a>1||(s(l(a)),o()&&o()(s()))},Po=(r,e,t,s,l,o)=>{if(!n(e))return;const a=t(r);a<0||a>1||(s(l(a)),o()&&o()(s()))},Ic=(r,e,t,s,l,o)=>{if(r.key==="ArrowLeft"){e(e()-t()<s()?s():e()-t()),l()&&l()(e());return}if(r.key==="ArrowRight"){e(e()+t()>o()?o():e()+t()),l()&&l()(e());return}};var Fc=G('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function Rs(r,e){oe(e,!0);let t=H(e,"min",7,0),s=H(e,"max",3,100),l=H(e,"value",31,()=>Xe(t())),o=H(e,"decNum",3,1),a=H(e,"step",19,()=>+((s()-t())/100).toFixed(4)),c=H(e,"onchange",3,null);Ce(()=>{l()<t()&&(l(t()),c()&&c()(l())),l()>s()&&(l(s()),c()&&c()(l())),t()>s()&&t(s())});let d=re(void 0),u=re(void 0),f=re(!1);const h=L=>{const A=t()+L*(s()-t());return+(Math.round(A/a())*a()).toFixed(4)},v=L=>{const A=n(d).getBoundingClientRect(),T=n(u).getBoundingClientRect(),P=A.x,N=T.x+T.width;return(L.clientX-P)/(N-P)},m=L=>{D(f,!1)},p=L=>{let A=l()+a()*L.deltaY*.5;A<t()&&(A=t()),A>s()&&(A=s()),l(+(Math.round(A/a())*a()).toFixed(4)),L.preventDefault(),c()&&c()(l())},_=g(()=>t()===s()?100:(l()-t())/(s()-t())*100);var b=Fc();b.__keydown=[Ic,l,a,t,c,s],b.__mousemove=[Po,f,v,l,h,c],b.__mousedown=[zo,v,f,_],b.__mouseup=[No,f,v,l,h,c],b.__touchmove=[Po,f,v,l,h,c],b.__touchstart=[zo,v,f,_],b.__touchend=[No,f,v,l,h,c];var E=B(b);let z;var y=B(E);let w;var S=B(y);Xr(E,L=>D(d,L),()=>n(d)),Xr(b,L=>D(u,L),()=>n(u)),Z((L,A,T)=>{R(b,"aria-valuenow",l()),R(b,"aria-valuemin",t()),R(b,"aria-valuemax",s()),z=ut(E,1,"range-slider svelte-vhx0r0",null,z,L),nt(E,`width:${n(_)??""}%`),w=ut(y,1,"range-value svelte-vhx0r0",null,w,A),he(S,T)},[()=>({"range-slider_right":n(_)<50}),()=>({"range-value_right":n(_)<50}),()=>l().toFixed(o())]),Ar("mousewheel",b,p),Ar("mouseleave",b,m),Ar("touchcancel",b,m),C(r,b),ae()}rt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Ro=(r,e,t,s,l)=>{const o=e(r);o<0||o>1||D(t,o>n(s)&&o<n(l)+n(s),!0)},Mo=(r,e,t,s,l)=>{D(e,!1);const o=t(r);if(o<0||o>1)return;const a=s(o);l()!==a&&l(a)},Io=(r,e,t,s,l)=>{if(!n(e))return;const o=t(r);if(o<0||o>1)return;const a=s(o);a!=l()&&l(a)},jc=(r,e,t,s,l)=>{if(r.key==="ArrowLeft"){e(e()-t()<s()?s():e()-t());return}if(r.key==="ArrowRight"){e(e()+t()>l()?l():e()+t());return}};var Vc=G('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function pr(r,e){oe(e,!0);let t=H(e,"min",3,0),s=H(e,"max",3,10),l=H(e,"value",31,()=>Xe(t())),o=H(e,"step",3,1);l()<t()&&(console.error('The "value" is outside of the provided range.'),l(t())),l()>s()&&(console.error('The "value" is outside of the provided range.'),l(s())),t()>s()&&console.error("The min and max values must be distinct.");let a=re(void 0),c=re(void 0),d=re(!1);const u=g(()=>t()===s()?0:(l()-t())/(s()-t()+1)),f=g(()=>o()/(s()-t()+1)),h=g(()=>s()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${n(f)*100}%, var(--bg-color-light2, #e8e8e8) ${n(f)*100}%, var(--bg-color-light2, #e8e8e8) ${200*n(f)}%)`:"background: #f0f0f0"),v=L=>{if(L<0||L>1)return l();let A=l();return L<n(u)&&n(u)>0&&(A=l()-Math.ceil((n(u)-L)/n(f))),L>n(u)+n(f)&&n(u)+n(f)<1&&(A=l()+Math.ceil((L-(n(u)+n(f)))/n(f))),A<t()&&(A=t()),A>s()&&(A=s()),A},m=L=>{const A=n(c).getBoundingClientRect(),T=A.x,P=A.x+A.width;return(L.clientX-T)/(P-T)},p=L=>{D(d,!1)},_=L=>{let A=Math.round(l()+L.deltaY*.5*o());A<t()&&(A=t()),A>s()&&(A=s()),l(A),L.preventDefault()};var b=Vc();b.__keydown=[jc,l,o,t,s],b.__mousemove=[Io,d,m,v,l],b.__mousedown=[Ro,m,d,u,f],b.__mouseup=[Mo,d,m,v,l],b.__touchmove=[Io,d,m,v,l],b.__touchstart=[Ro,m,d,u,f],b.__touchend=[Mo,d,m,v,l];var E=B(b);let z;var y=B(E);let w;var S=B(y);Xr(E,L=>D(a,L),()=>n(a)),Xr(b,L=>D(c,L),()=>n(c)),Z((L,A,T)=>{R(b,"aria-valuenow",l()),R(b,"aria-valuemin",t()),R(b,"aria-valuemax",s()),nt(b,n(h)),z=ut(E,1,"range-slider svelte-xdlm7u",null,z,L),nt(E,`width: max(2px, ${n(f)*100}%);left:${n(u)*100}%;`),w=ut(y,1,"range-value svelte-xdlm7u",null,w,A),he(S,T)},[()=>({"range-slider_left":n(f)<.1&&n(u)<.5,"range-slider_right":n(f)<.1&&n(u)>=.5}),()=>({"range-value_right":n(f)<.1&&n(u)>.5,"range-value_left":n(f)<.1&&n(u)<=.5}),()=>l().toFixed(0)]),Ar("mousewheel",b,_),Ar("mouseleave",b,p),Ar("touchcancel",b,p),C(r,b),ae()}rt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Oc=(r,e,t)=>{if(r.key==="ArrowLeft"){const s=e.options.findIndex(l=>l===t());s>0&&t(e.options[s-1]);return}if(r.key==="ArrowRight"){const s=e.options.findIndex(l=>l===t());s<e.options.length-1&&t(e.options[s+1]);return}};var qc=(r,e,t)=>e(t),Dc=G('<button tabindex="-1"><!></button>'),Bc=G('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function et(r,e){oe(e,!0);let t=H(e,"value",31,()=>Xe(e.options[0])),s=H(e,"className",3,"");var l=Bc(),o=Q(l);o.__keydown=[Oc,e,t],Ae(o,20,()=>e.options,c=>c,(c,d)=>{var u=Dc();u.__click=[qc,t,d];let f;var h=B(u);yt(h,()=>d),Z((v,m)=>f=ut(u,1,`option option_${v??""}`,"svelte-1i17tox",f,m),[()=>d.toString().replace(".","_"),()=>({selected:d==t()})]),C(c,u)});var a=j(o,2);Z(()=>ut(o,1,`selector ${s()??""}`,"svelte-1i17tox")),gs(a,t),C(r,l),ae()}rt(["keydown","click"]);function Jt(r,e){oe(e,!0);let t=H(e,"options",19,()=>["no","yes"]),s=H(e,"value",15,!1),l=re(!0);const o=g(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());Ce(()=>D(l,s()?t()[1]:t()[0],!0)),Ce(()=>s(n(l)===t()[1]));var a=ie(),c=Q(a);{var d=u=>{et(u,{get options(){return n(o)},get value(){return n(l)},set value(f){D(l,f,!0)}})};X(c,u=>{n(o)&&u(d)})}C(r,a),ae()}var Yc=G('<div tabindex="0" role="radiogroup"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function Fo(r,e){oe(e,!0);let t=H(e,"file",15),s=H(e,"message",3,"Select CSV file with dataset"),l=H(e,"acceptType",3,".csv"),o;function a(b){o&&o.files.length>0?t(o.files[0]):t(null)}function c(b){(b.type==="click"||b.type==="keydown"&&(b.code==="Space"||b.code==="Enter"))&&o.click()}function d(b){o.value=null,t(null)}var u=Yc(),f=Q(u);f.__keydown=c,f.__click=c;let h;var v=B(f),m=j(v);m.__change=a,Xr(m,b=>o=b,()=>o);var p=j(f,2);{var _=b=>{Lr(b,{onclick:d})};X(p,b=>{t()&&b(_)})}Z(b=>{h=ut(f,1,"file-selector svelte-1k0x7uv",null,h,b),he(v,`${(t()?t().name:s())??""} `),R(m,"accept",l())},[()=>({selected:t()})]),C(r,u),ae()}rt(["keydown","click","change"]);function Wc(r,e,t,s){e()&&D(t,e()(s()),!0)}var Hc=G('<div class="error-message svelte-1qtiwcs"> </div>'),Uc=G('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function jo(r,e){oe(e,!0);let t=H(e,"value",15,""),s=H(e,"className",3,""),l=H(e,"placeholder",3,""),o=H(e,"maxLength",3,25),a=H(e,"validator",3,null),c=re("");var d=Uc();let u;var f=B(d);f.__input=[Wc,a,c,t];var h=j(f,2);{var v=m=>{var p=Hc(),_=B(p);Z(()=>he(_,n(c))),C(m,p)};X(h,m=>{n(c)&&n(c).length>0&&m(v)})}Z(m=>{u=ut(d,1,`textinput ${s()??""}`,"svelte-1qtiwcs",u,m),R(f,"placeholder",l()),R(f,"maxlength",o())},[()=>({error:n(c)&&n(c).length>0})]),gs(f,t),C(r,d),ae()}rt(["input"]);var Xc=G('<div class="spinner svelte-n48urb"></div>');function Ms(r){var e=Xc();C(r,e)}const Gc=(r,e,t)=>{if(r.key==="ArrowLeft"){const s=e().findIndex(l=>l===t());s>0&&t(e()[s-1]);return}if(r.key==="ArrowRight"){const s=e().findIndex(l=>l===t());s<e().length-1&&t(e()[s+1]);return}};var Kc=(r,e,t)=>e(t),Jc=G('<button tabindex="-1"><!></button>'),Qc=G('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an">',1);function Vo(r,e){oe(e,!0);let t=H(e,"options",19,()=>["p","l","b","h"]),s=H(e,"value",31,()=>Xe(t()[0]));const l='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',o={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>'};o.b=o.l+o.p;const a={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar"};var c=Qc(),d=Q(c);d.__keydown=[Gc,t,s],Ae(d,20,t,f=>f,(f,h)=>{var v=Jc();v.__click=[Kc,s,h];let m;var p=B(v);yt(p,()=>l+o[h]+"</svg"),Z(_=>{m=ut(v,1,"option svelte-yf64an",null,m,_),R(v,"title",a[h])},[()=>({selected:h==s()})]),C(f,v)});var u=j(d,2);gs(u,s),C(r,c),ae()}rt(["keydown","click"]),rt(["keydown","click"]);var Zc=G("<h2> </h2>"),$c=G("<!> <!>",1),eu=G('<div class="widget"><!></div>');function tu(r,e){oe(e,!0);let t=H(e,"title",3,""),s=H(e,"value",15),l=H(e,"labelWidth",3,13);function o(u){const f={};for(const h of Object.keys(u))f[h]=u[h].default;return f}Ce(()=>{!s()&&e.options&&s(o(e.options))});var a=eu(),c=B(a);{var d=u=>{var f=$c(),h=Q(f);{var v=p=>{me(p,{children:(_,b)=>{var E=Zc(),z=B(E);Z(()=>he(z,t())),C(_,E)},$$slots:{default:!0}})};X(h,p=>{t()&&p(v)})}var m=j(h,2);Ae(m,17,()=>Object.keys(e.options),Te,(p,_)=>{var b=ie();const E=g(()=>e.options[n(_)]);var z=Q(b);{var y=w=>{me(w,{get name(){return n(E).name},get label(){return n(E).label},get labelWidth(){return l()},children:(S,L)=>{var A=ie(),T=Q(A);hs(T,()=>n(E).el,(P,N)=>{N(P,so(()=>n(E).props,{get value(){return s()[n(_)]},set value(k){s(s()[n(_)]=k,!0)}}))}),C(S,A)},$$slots:{default:!0}})};X(z,w=>{n(E).hidden||w(y)})}C(p,b)}),C(u,f)};X(c,u=>{s()&&u(d)})}C(r,a),ae()}var ru=G("<!> <!> <!> <!>",1),nu=G("<p> </p>"),su=G("<!> <p>Computing global model...</p>",1),lu=G('<p><span style="color:#a0a0a0;">PLS model:</span> </p> <!>',1),ou=G('<div class="buttons"><!> <!></div>'),au=G("<!> <!>",1),iu=G("<p> </p>"),cu=G("<!> <!> <!> <!>",1);function uu(r,e){oe(e,!0);let t=H(e,"outliers",19,()=>[]),s=H(e,"exclvars",19,()=>[]),l=H(e,"resobj",15),o=H(e,"model",15),a=H(e,"downloadModel",3,null),c=H(e,"downloadResults",3,null),d=re("neutral"),u=re(""),f=re(1),h=re(!0),v=re(!1),m=re(void 0);async function p(k,F,W,O){const M=k.nresp,I=k.varindices;D(m,e.WASM().then(Y=>{D(d,"computing");const V=bc(Y,k.values,M,F,W,O,t(),s());V.hash=Co(),V.varlabels=k.varlabels.filter((K,te)=>te<M||!s().includes(I[te])),V.varindices=k.varindices.filter((K,te)=>te<M||!s().includes(I[te])),V.varvalues=k.varvalues.filter((K,te)=>te<M||!s().includes(I[te])),V.xvarlabels=V.varlabels.filter((K,te)=>te+1>M),V.xvarvalues=V.varvalues.filter((K,te)=>te+1>M),V.xvarindices=V.varindices.filter((K,te)=>te+1>M).map(K=>K+1),V.varvaluesName=k.varvaluesName,V.varvaluesUnits=k.varvaluesUnits,V.varrev=k.varrev,V.prep=[];const q=zs(Y,V,k,t());V.stat={xexpvar:q.stat.xexpvar,yexpvar:q.stat.yexpvar},o(V),l(q),D(d,"success")}).catch(Y=>{console.error(Y),o(null),D(d,"error"),D(u,Y,!0)}),!0)}function _(k){D(d,"neutral"),D(u,null),p(e.dataset,n(f),n(h),n(v))}function b(){D(d,"neutral"),D(m,null),l(null),o(null),D(u,null)}let E=g(()=>e.dataset?Math.min(e.dataset.values.nrows-2-t().length,e.dataset.values.ncols-e.dataset.nresp-s().length-1,50):null);Ce(()=>{e.dataset===null&&b()}),Ce(()=>{D(f,n(E)?Math.min(n(E),20):null,!0)});var z=cu(),y=Q(z);{var w=k=>{var F=ru(),W=Q(F);me(W,{name:"ncomp",label:"# of LVs",children:(Y,V)=>{Rs(Y,{id:"ncomp",min:1,get max(){return n(E)},step:1,decNum:0,get value(){return n(f)},set value(q){D(f,q,!0)}})},$$slots:{default:!0}});var O=j(W,2);me(O,{name:"center",label:"Center",children:(Y,V)=>{Jt(Y,{id:"center",options:["no","yes"],get value(){return n(h)},set value(q){D(h,q,!0)}})},$$slots:{default:!0}});var M=j(O,2);me(M,{name:"scale",label:"Scale",children:(Y,V)=>{Jt(Y,{id:"scale",options:["no","yes"],get value(){return n(v)},set value(q){D(v,q,!0)}})},$$slots:{default:!0}});var I=j(M,2);me(I,{name:"create-model",label:" ",children:(Y,V)=>{dt(Y,{onclick:_,text:"Create model"})},$$slots:{default:!0}}),C(k,F)};X(y,k=>{e.dataset&&!o()&&n(d)!=="computing"&&k(w)})}var S=j(y,2);{var L=k=>{var F=ie(),W=Q(F);vs(W,()=>n(m),O=>{me(O,{name:"spinner",children:(M,I)=>{var Y=su(),V=Q(Y);Ms(V),C(M,Y)},$$slots:{default:!0}})},void 0,(O,M)=>{me(O,{name:"error",status:"error",children:(I,Y)=>{var V=nu(),q=B(V);Z(()=>he(q,n(M))),C(I,V)},$$slots:{default:!0}})}),C(k,F)};X(S,k=>{n(m)&&k(L)})}var A=j(S,2);{var T=k=>{var F=au(),W=Q(F);me(W,{name:"info",children:(I,Y)=>{var V=lu(),q=Q(V),K=j(B(q)),te=j(q,2);Lr(te,{onclick:b}),Z(()=>he(K,` ${o().ncomp??""} LVs${o().center?", centered":""}${o().scale?", scaled":""}`)),C(I,V)},$$slots:{default:!0}});var O=j(W,2);{var M=I=>{me(I,{name:"download-buttons",label:"Download",children:(Y,V)=>{var q=ou(),K=B(q);dt(K,{onclick:()=>c()(l(),e.dataset,"train",t()),text:"Results"});var te=j(K,2);dt(te,{onclick:()=>a()(o()),text:"Model"}),C(Y,q)},$$slots:{default:!0}})};X(O,I=>{a()&&c()&&I(M)})}C(k,F)};X(A,k=>{o()&&k(T)})}var P=j(A,2);{var N=k=>{me(k,{name:"error",status:"error",children:(F,W)=>{var O=iu(),M=B(O);Z(()=>he(M,n(u))),C(F,O)},$$slots:{default:!0}})};X(P,k=>{(n(d)==="error"||n(u))&&k(N)})}C(r,z),ae()}var du=G("<!> <!> <!>",1),fu=G('<p class="svelte-16w7odi"> </p>'),vu=G('<!> <p class="svelte-16w7odi">Computing PV-set...</p>',1),hu=G('<p class="svelte-16w7odi"><span class="svelte-16w7odi">PV-set:</span> <br> <span class="svelte-16w7odi">Size:</span> <span class="svelte-16w7odi">(X)</span> <span class="svelte-16w7odi">(Y)</span>,</p> <!> <!>',1),mu=G('<p class="svelte-16w7odi"> </p>'),gu=G("<!> <!> <!> <!>",1);function bu(r,e){oe(e,!0);let t=H(e,"outliers",19,()=>[]),s=H(e,"pvset",15),l=H(e,"pvres",15),o=H(e,"pvscalars",15),a=re("neutral"),c=re(""),d=re(Xe(["ven","rand","loo"])),u=re("ven"),f=re(void 0),h=e.calset.values.nrows-t().length,v=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(N=>N>=h/(h-e.model.ncomp-1)&&N<=h/2):[],m=re(Xe(v.length>0?v[0]:0));Ce(()=>{v.length===0&&(D(d,["loo"],!0),D(u,"loo"))});async function p(N,k,F,W){D(f,e.WASM().then(O=>{const M=F.type=="loo"?0:F.type=="rand"?2:1,[I,Y]=_c(O,k,N.values,N.nresp,k.ncomp,F.nseg,M,0,W);s({classLabelsVarname:N.classLabelsVarname,classNames:N.classNames,classes:N.classes,dec:N.dec,fileName:N.fileName+"-pcv",hasClassNames:N.hasClassNames,hasLabels:N.hasLabels,header:N.header,labelsVarname:N.labelsVarname,objindices:e.calres.objindices,objlabels:e.calres.objlabels,sep:N.sep,values:I,varAxisTitle:N.varAxisTitle,varindices:k.varindices,varlabels:k.varlabels,varrev:k.varrev,varvalues:k.varvalues,varvaluesName:k.varvaluesName,varvaluesUnits:k.varvaluesUnits,nresp:k.nresp}),l(zs(O,k,s(),[])),o(Y)}).catch(O=>{console.error(O),s(null),l(null),D(a,"error"),D(c,O,!0)}),!0)}function _(N){D(a,"neutral"),D(c,""),p(e.calset,e.model,{type:n(u),nseg:n(m)},t())}function b(){D(a,"neutral"),D(c,""),D(f,null),s(null),l(null)}Ce(()=>{e.model===null&&b()});var E=gu(),z=Q(E);{var y=N=>{var k=du(),F=Q(k);me(F,{name:"split",label:"Split type:",children:(I,Y)=>{et(I,{id:"cvType",get options(){return n(d)},get value(){return n(u)},set value(V){D(u,V,!0)}})},$$slots:{default:!0}});var W=j(F,2);{var O=I=>{me(I,{name:"nseg",label:"Segments:",children:(Y,V)=>{et(Y,{id:"nseg",options:v,get value(){return n(m)},set value(q){D(m,q,!0)}})},$$slots:{default:!0}})};X(W,I=>{n(u)!=="loo"&&I(O)})}var M=j(W,2);me(M,{name:"run-button",label:" ",children:(I,Y)=>{dt(I,{onclick:_,text:"Compute PV-set"})},$$slots:{default:!0}}),C(N,k)};X(z,N=>{e.model&&!s()&&n(a)!=="busy"&&N(y)})}var w=j(z,2);{var S=N=>{var k=ie(),F=Q(k);vs(F,()=>n(f),W=>{me(W,{name:"spinner",children:(O,M)=>{var I=vu(),Y=Q(I);Ms(Y),C(O,I)},$$slots:{default:!0}})},void 0,(W,O)=>{me(W,{name:"error",status:"error",children:(M,I)=>{var Y=fu(),V=B(Y);Z(()=>he(V,n(O))),C(M,Y)},$$slots:{default:!0}})}),C(N,k)};X(w,N=>{n(f)&&N(S)})}var L=j(w,2);{var A=N=>{me(N,{name:"info",children:(k,F)=>{var W=hu(),O=Q(W),M=j(B(O)),I=j(M,4),Y=j(I,2),V=j(O,2);Pc(V,{onclick:()=>Cc(s(),e.calset.fileName+"-pv")});var q=j(V,2);Lr(q,{onclick:b}),Z(()=>{he(M,` ${n(u)??""}
      ${n(u)!=="loo"?n(m)+" seg":""}`),he(I,` ${s().values.nrows??""}×${s().values.ncols-s().nresp} `),he(Y,`,
      ${s().values.nrows??""}×${s().nresp??""} `)}),C(k,W)},$$slots:{default:!0}})};X(L,N=>{s()&&N(A)})}var T=j(L,2);{var P=N=>{me(N,{name:"error",status:"error",children:(k,F)=>{var W=mu(),O=B(W);Z(()=>he(O,n(c))),C(k,W)},$$slots:{default:!0}})};X(T,N=>{n(a)==="error"&&n(c)&&N(P)})}C(r,E),ae()}var pu=G('<span style="font-weight:bold"> </span><br>',1),_u=G('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),wu=G('<span class="file-size svelte-gdjwex"> </span>'),yu=G('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <!></p> <!>',1);function xu(r,e){oe(e,!0);let t=H(e,"title",3,"");var s=ie(),l=Q(s);{var o=a=>{me(a,{children:(c,d)=>{var u=yu(),f=Q(u),h=B(f);{var v=y=>{var w=pu(),S=Q(w),L=B(S);Z(()=>he(L,t())),C(y,w)};X(h,y=>{t()&&t()!==""&&y(v)})}var m=j(h,4),p=B(m),_=j(m,5);{var b=y=>{var w=_u(),S=Q(w),L=B(S),A=j(S,4),T=B(A);Z(()=>{he(L,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),he(T,`${e.dataset.nresp??""}×${e.dataset.values.ncols??""}`)}),C(y,w)},E=y=>{var w=wu(),S=B(w);Z(()=>he(S,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),C(y,w)};X(_,y=>{e.dataset.nresp&&e.dataset.nresp>0?y(b):y(E,!1)})}var z=j(f,2);Lr(z,{get onclick(){return e.reset}}),Z(()=>{R(m,"title",e.dataset.fileName),he(p,e.dataset.fileName)}),C(c,u)},$$slots:{default:!0}})};X(l,a=>{e.dataset&&a(o)})}C(r,s),ae()}var ku=G("<!> <!>",1),Eu=G("<!> <!> <!> <!> <!> <!>",1),Su=G("<!> <!>",1),Au=G("<p> </p>"),Cu=G("<!> <p> </p>",1),Lu=G("<p> </p>"),Tu=G("<!> <!> <!>",1);function Is(r,e){oe(e,!0);let t=H(e,"model",3,null),s=H(e,"outliers",19,()=>[]),l=H(e,"respMandatory",3,!1),o=H(e,"title",3,""),a=H(e,"dataset",15),c=H(e,"resobj",15);const d=[",",";"],u=g(()=>t()?["no","yes"]:["no","labels","values"]);let f=re(void 0),h=re(""),v=re(""),m=Xe(l()?1:0),p=!1,_=re(","),b=re("no"),E=re(!1),z=re(0),y=re(null),w=re("neutral"),S=re("");function L(q,K,te){D(y,e.WASM().then(ee=>{c(zs(ee,q,K,te))}).catch(ee=>{console.error(ee),c(null),D(w,"error"),D(S,ee,!0)}),!0)}function A(q,K){if(!q||q.size<10)return;const ee=q.slice(0,1e5),$=new FileReader;$.onload=()=>{const ne=$.result;!ne||ne.length<0||((ve=>{let[xe,ce,_e,be,ge]=ve;D(_,xe,!0),D(E,ce,!0),p=_e,D(b,be,!0),D(z,ge,!0)})(Sc(ne,m)),K&&n(b)!=="no"&&D(b,"yes"))},$.onerror=function(ne){csvString=null,D(w,"error"),D(S,ne,!0),console.error("Error reading CSV file.",ne)},$.readAsText(ee)}function T(q){try{const K=xc(q,n(_),n(b)==="yes"?"labels":n(b),n(E),p,n(h),n(v),m);if(K.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(K.values.ncols-K.nresp<2)throw new Error("Dataset should habe at least two predictors.");if(t()){const te=l()?t().npred+t().exclvars.length+t().nresp:t().npred+t().exclvars.length;if(K.values.ncols!==te)throw new Error("Dataset has different number of columns than the training set.");K.varrev=t().varrev,K.header=t().header,K.varlabels=t().varlabels,K.varvalues=t().varvalues,K.varindices=t().varindices,K.varvaluesName=t().varvaluesName,K.varvaluesUnits=t().varvaluesUnits}K.fileName=n(f).name.replace(/\.[^/.]+$/,""),a(K),D(S,""),D(w,"success")}catch(K){console.error(K),a(null),D(w,"error"),D(S,K,!0)}}function P(q){const K=new FileReader;K.onload=()=>{T(K.result)},K.readAsText(n(f))}function N(){D(f,""),a(null),c(null),D(h,""),D(v,""),D(w,"neutral"),D(S,"")}Ce(()=>{n(f)===null?N():(A(n(f),t()),D(w,"neutral"),D(S,""))}),Ce(()=>{n(_)&&(D(w,"neutral"),D(S,""))}),Ce(()=>{if(a()&&t()&&!c()&&!n(S))try{c(L(t(),a(),s())),D(S,""),D(w,"success")}catch(q){console.error(q),a(null),c(null),D(w,"error"),D(S,q,!0)}});var k=Tu(),F=Q(k);{var W=q=>{var K=Su(),te=Q(K);on(te,()=>n(f)===void 0,ne=>{me(ne,{children:(ve,xe)=>{Fo(ve,{id:"dataFile",message:"Select CSV file with dataset",get file(){return n(f)},set file(ce){D(f,ce,!0)}})},$$slots:{default:!0}})});var ee=j(te,2);{var $=ne=>{var ve=Eu(),xe=Q(ve);me(xe,{label:"Delimiter",children:(de,Ie)=>{et(de,{id:"sep",options:d,get value(){return n(_)},set value(ye){D(_,ye,!0)}})},$$slots:{default:!0}});var ce=j(xe,2);me(ce,{label:"Row labels",children:(de,Ie)=>{Jt(de,{id:"hasLabels",options:["no","yes"],get value(){return n(E)},set value(ye){D(E,ye,!0)}})},$$slots:{default:!0}});var _e=j(ce,2);{var be=de=>{};X(_e,de=>{l()||de(be)})}var ge=j(_e,2);me(ge,{label:"Header",children:(de,Ie)=>{et(de,{id:"header",get options(){return n(u)},get value(){return n(b)},set value(ye){D(b,ye,!0)}})},$$slots:{default:!0}});var Ee=j(ge,2);{var fe=de=>{var Ie=ku(),ye=Q(Ie);me(ye,{label:"Header name (predictors)",children:(De,jt)=>{jo(De,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return n(h)},set value(Ge){D(h,Ge,!0)}})},$$slots:{default:!0}});var Se=j(ye,2);me(Se,{label:"Header units (predictors)",children:(De,jt)=>{jo(De,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return n(v)},set value(Ge){D(v,Ge,!0)}})},$$slots:{default:!0}}),C(de,Ie)};X(Ee,de=>{n(b)==="values"&&de(fe)})}var we=j(Ee,2);me(we,{label:" ",children:(de,Ie)=>{dt(de,{text:"Load",onclick:P})},$$slots:{default:!0}}),C(ne,ve)};X(ee,ne=>{n(f)&&ne($)})}C(q,K)},O=q=>{var K=ie(),te=Q(K);{var ee=$=>{var ne=ie(),ve=Q(ne);vs(ve,()=>n(y),xe=>{me(xe,{children:(ce,_e)=>{var be=Cu(),ge=Q(be);Ms(ge);var Ee=j(ge,2),fe=B(Ee);Z(()=>he(fe,t()?"Loading data and apply model...":"Loading data...")),C(ce,be)},$$slots:{default:!0}})},void 0,(xe,ce)=>{me(xe,{status:"error",children:(_e,be)=>{var ge=Au(),Ee=B(ge);Z(()=>he(Ee,n(ce))),C(_e,ge)},$$slots:{default:!0}})}),C($,ne)};X(te,$=>{n(y)&&$(ee)})}C(q,K)};X(F,q=>{a()?q(O,!1):q(W)})}var M=j(F,2);{var I=q=>{xu(q,{get dataset(){return a()},reset:N,get title(){return o()}})};X(M,q=>{a()&&q(I)})}var Y=j(M,2);{var V=q=>{me(q,{status:"error",children:(K,te)=>{var ee=Lu(),$=B(ee);Z(()=>he($,n(S))),C(K,ee)},$$slots:{default:!0}})};X(Y,q=>{(n(w)==="error"||n(S))&&q(V)})}C(r,k),ae()}var zu=G('<span class="item svelte-1ggez3e"> </span>'),Nu=G('<p class="outliers svelte-1ggez3e"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function Fs(r,e){oe(e,!0);var t=ie(),s=Q(t);{var l=o=>{me(o,{children:(a,c)=>{var d=Nu(),u=Q(d),f=j(B(u),2);Ae(f,17,()=>e.outliers,Te,(p,_)=>{var b=zu(),E=B(b);Z(()=>he(E,e.dataset.objlabels[n(_)])),C(p,b)});var h=j(u,2);{var v=p=>{Nc(p,{get onclick(){return e.undoOutliers}})};X(h,p=>{e.outliers.length>1&&p(v)})}var m=j(h,2);Lr(m,{get onclick(){return e.resetOutliers}}),C(a,d)},$$slots:{default:!0}})};X(s,o=>{e.dataset&&e.outliers&&e.outliers.length>0&&o(l)})}C(r,t),ae()}var Pu=G('<p class="exclvars svelte-181kelh"><span style="color:#a0a0a0;">Excluded</span> <span style="color:#504040;"> </span> <span style="color:#a0a0a0;">variables</span></p> <!>',1);function Ru(r,e){oe(e,!0);var t=ie(),s=Q(t);{var l=o=>{me(o,{children:(a,c)=>{var d=Pu(),u=Q(d),f=j(B(u),2),h=B(f),v=j(u,2);Lr(v,{get onclick(){return e.resetExclvars}}),Z(()=>he(h,e.exclvars.length)),C(a,d)},$$slots:{default:!0}})};X(s,o=>{e.exclvars&&e.exclvars.length>0&&o(l)})}C(r,t),ae()}const Mu={small:30,medium:40,large:50,xlarge:60},Iu={small:5,medium:8,large:12,xlarge:15},Fu={small:6,medium:10,large:14,xlarge:18},js={small:4,medium:6,large:8,xlarge:10},ju={small:12,medium:15,large:19,xlarge:21},Vs={small:11,medium:15,large:17,xlarge:19},fn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},vn=["●","◼","▲","▼","⬥","＋","✳","✕"],Vu=.8,Oo=.5,Ou={small:5,medium:8,large:12,xlarge:15},qu=12,pt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function qo(r){let e=Array(r);for(let t=0;t<r;t++)e[t]=t+1;return e}function Do(r,e){return Array.isArray(r)&&r.length===e&&!r.some(t=>t===void 0)&&!r.some(t=>isNaN(t))}function Bo(r,e){if(r!=null&&(Array.isArray(r)&&(r=ze(r)),!(!Le(r)||r.length<1)))return r.apply(t=>Bs((t-e[1])*e[0]+e[2])).v}function tt(r,e){return Bo(r,e.coords)}function hn(r,e){return Bo(r,e.objects)}function Yo(r,e){if(r!=null&&(Array.isArray(r)&&(r=ze(r)),!(!Le(r)||r.length<1)))return r.apply(t=>(t-e[2])/e[0]+e[1]).v}function Wo(r,e){return Yo(r,e.coords)}function Ho(r,e){return Yo(r,e.objects)}function Os(r){return r===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${r.toString()}</tspan>`}function Tr(r){if(r===Math.round(r))return r;if(Math.abs(r)>10**6)return Math.round(r);if(Math.abs(r)<10**-6)return r;let e=r.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function qs(r){if(r===void 0)return[0,void 0];if(r.length<1)return[0,void 0];if(r.length===1)return[0,[r[0].toString()]];let e=Tr(Math.abs(Ft(ao(r)))),t=0;if(e>=1)return e<100?[0,Array.from(r).map(o=>o.toFixed(0))]:(t=Math.ceil(Tr(Math.log10(e)))-2,[t,Array.from(r).map(o=>(o/Math.pow(10,t)).toFixed(0))]);let s=Math.ceil(-Tr(Math.log10(e)));return s<=2?[0,Array.from(r).map(l=>l.toFixed(s))]:(t=s-2,s=2,Tr(Math.abs(Bt(r)))<=10?[-t,Array.from(r).map(l=>(l*Math.pow(10,t)).toFixed(s))]:[-t,Array.from(r).map(l=>(l/Math.pow(10,t)).toString())])}function Ct(r,e,t){return Array.isArray(r)&&(r=ze(r)),Le(r)?r.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&r.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):r:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Ds(r,e,t,s){if(!r||!e||r.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const l=t.coords,o=s.coords;let a="";for(let c=0;c<r.length;c++){const d=Bs((r.v[c]-l[1])*l[0]+l[2]),u=Bs((e.v[c]-o[1])*o[0]+o[2]);a+=d+","+u+" "}return a}function Uo(r,e){return r?Array.isArray(r)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==r.length?[null,"number of tick labels and values should be the same."]:[r.map(t=>mn(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Xo(r,e){if(Array.isArray(r)&&(r=ze(r)),!Le(r))return[null,"tick values must be provided as an array or as a vector."];if(r.v.some(a=>isNaN(a)))return[null,"tick values must be numeric"];const t=new Set(r.v);if(r.length!==t.size)return[null,"ticks values must be unique."];const s=e[0]<e[1]?e[0]:e[1],l=e[0]<e[1]?e[1]:e[0],o=r.filter(a=>a>=s&a<=l);return o.length!==r.length?[null,"some of ticks values are outside axis limits."]:[o,""]}function Go(r,e,t,s,l,o){l==null&&(l=!1),o===void 0&&(o=1e-4);const a=e[0]<e[1]?e:[e[1],e[0]];if(r)return r;if(typeof a!="object"||a[0]===void 0||a[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const c=Math.abs(a[1]-a[0])*o,d=a[1]-a[0]-2*c,u=Math.floor(Math.log10(d)),f=1/Math.pow(10,u-1),h=Math.round(d*f)/f;let v=Du(h/t);l&&(Math.abs(a[1]-a[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(v<1&&(v=1),v=Math.round(v)));let m=Math.ceil((a[0]+c)/v)*v,p=Math.floor((a[1]-c)/v)*v;Math.abs(a[0]-m)<v/10&&(m=m+v),Math.abs(a[1]-p)<v/10&&(p=p-v),t=Math.ceil(Tr((p-m)/v))+1,r=We.zeros(t);for(let _=0;_<t;_++)r.v[_]=m+v*_;if(Math.abs(v)<1){const _=Math.pow(10,1+Math.round(-Math.log10(v)));r=r.apply(b=>Math.round((b+Number.EPSILON)*_)/_)}return r.filter(_=>_>=a[0]&_<=a[1])}function Du(r,e){const t=Math.floor(Math.log10(r)),s=r/Math.pow(10,t);let l;return s<=1?l=1:s<=2?l=2:s<=5?l=5:l=10,l*Math.pow(10,t)}function Bs(r){return Math.round(r*10)/10}function Bu(r,e){return e<300.2||r<400.2?"small":e<400.2||r<700.2?"medium":e<650.2||r<850.2?"large":"xlarge"}function Ko(r,e){return r<400.2?"small":r<700.2?"medium":r<900.2?"large":"xlarge"}function Yu(){const r=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;r[e]=t}return r}function Wu(r){let e=-1,t=Yu();for(let s=0;s<r.length;s++)e=t[(e^r[s])&255]^e>>>8;return e^-1}function Hu(r,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const s=Wu(t),l=new Uint8Array(4);l[0]=s>>>24,l[1]=s>>>16,l[2]=s>>>8,l[3]=s&255;const o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;const a=new Uint8Array(54);return a.set(r,0),a.set(o,33),a.set(t,37),a.set(l,50),a}function Uu(r,e){const t=r.split(","),s=t[0],l=t[1],o=33/3*4,a=l.substring(0,o),c=l.substring(o),d=atob(a),u=new Uint8Array(d.length);for(let v=0;v<u.length;v++)u[v]=d.charCodeAt(v);const f=Hu(u,e),h=btoa(String.fromCharCode(...f));return[s,",",h,c].join("")}function Xu(r,e,t,s,l){if(t||(t=10),s||(s=10),l||(l=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(s<1||s>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(l<50||l>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!r||!(r instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const o=t/2.54*l,a=s/2.54*l;setTimeout(()=>{const c=r.clientHeight,d=r.clientWidth;let u=Math.max(o/d,a/c),f=1;u<1&&(f=u,u=1);const h=document.createElement("canvas"),v=h.getContext("2d");h.width=d*(f<1?f:u),h.height=c*(f<1?f:u),r.setAttribute("width",d*u),r.setAttribute("height",c*u),v.fillStyle="white",v.fillRect(0,0,h.width,h.height),v.scale(u,u);const m=new XMLSerializer().serializeToString(r),p=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(p),b=new Image;b.onload=function(){f<0&&(b.width=b.width*f,b.height=b.height*f),v.drawImage(b,0,0,h.width,h.height);const E=h.toDataURL("image/png"),z=Uu(E,l),y=document.createElement("a");y.href=z,y.download=`${e}.png`,y.click()},b.src=_},20)}function Gu(r,e){if(!r||!(r instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=r.clientHeight,s=r.clientWidth;r.setAttribute("width",s+"px"),r.setAttribute("height",t+"px"),r.setAttribute("viewBox",`0 0 ${s} ${t}`);const l=new Blob([r.outerHTML],{type:"image/svg+xml"}),o=window.URL.createObjectURL(l),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.svg`),a.click()}function Ku(r,e,t,s){const l=r.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":Ju(e,t,s)})]).then(()=>{r.classList.add("copied"),r.textContent="✓ done",setTimeout(()=>{r.classList.remove("copied"),r.textContent=l},500)},o=>{console.error(o),r.classList.add("error"),r.textContent="x copy",setTimeout(()=>{r.classList.remove("error"),r.textContent=l},500)}).catch(o=>console.error(o))}async function Ju(r,e,t){const s=r.clientHeight,l=r.clientWidth,o=Math.max(e/l,t/s),a=document.createElement("canvas"),c=a.getContext("2d");return a.width=l*o,a.height=s*o,c.scale(o,o),r.setAttribute("width",a.width),r.setAttribute("height",a.height),await new Promise((u,f)=>{const h=new XMLSerializer().serializeToString(r),v=new Blob([h],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,p=m.createObjectURL(v),_=new Image;_.onload=function(){c.drawImage(_,0,0,a.width,a.height),m.revokeObjectURL(p),a.toBlob(function(b){b?u(b):f(new Error("Failed to create blob"))},"image/png")},_.onerror=function(b){f(b)},_.src=p})}function Qu(r,e){r>16&&(r=16);const t=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?t[r-1].map(s=>s+e):t[r-1]}function Zu(r,e,t,s,l){let o=l.ticks,a=l.tickLabels,c=0;const d=Go(o,r,Iu[t.x],!0,l.whole),u=d.length,f=Ho([js[t.plot]],s)[0],h=We.fill(e[0],u),v=h.add(f),m=We.fill(e[1],u);if(a||(o?(c=0,a=o.v.map(T=>Tr(T).toString())):[c,a]=qs(d.v)),!a||a.length!==d.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[d,h],[d,m]],_=[[ze([r[0]]),ze([e[0]])],[ze([r[1]]),ze([e[0]])]],b=[[d,v],[d,h]],E=(r[1]-r[0])*.01,z=[[null,null],[[r[1]-(c>9?1:0)*E],[h.v[u-1]]]],y=Os(c),w=a.length,S=Math.abs(r[1]>r[0]?r[1]-d.v[w-1]:r[1]-d.v[0]),L=Math.abs(r[1]-r[0]),A=Math.abs(d.v[1]-d.v[0]);if(y.length>0&&S<L*.1&&S<A*.5){const T=r[1]>r[0]?w-1:0;a[T]=" "}return{grid:p,axisLine:_,tickCoords:b,tfCoords:z,ticks:o,tickLabels:a,tickFactor:c,tfLabel:y}}function $u(r,e,t,s,l){let o=l.ticks,a=l.tickLabels,c=0;const d=Go(l.ticks,e,Fu[t.y],!0,l.whole),u=d.length,f=Ho([js[t.plot]],s)[0],h=We.fill(r[0],u),v=h.add(f),m=We.fill(r[1],u);if(a||(o?(c=0,a=o.v.map(A=>Tr(A).toString())):[c,a]=qs(d.v)),a.length!==d.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[h,d],[m,d]],_=[[ze([r[0]]),ze([e[0]])],[ze([r[0]]),ze([e[1]])]],b=[[h,d],[v,d]],E=[[[],[]],[[v.v[u-1]+(Math.abs(c)>9?3:2)*f],[e[1]]]],z=Os(c),y=a.length,w=Math.abs(e[1]>e[0]?e[1]-d.v[y-1]:e[1]-d.v[0]),S=Math.abs(e[1]-e[0]),L=Math.abs(d.v[1]-d.v[0]);if(z.length>0&&w<S*.1&&w<L*.5){const A=e[1]>e[0]?y-1:0;a[A]=" "}return{grid:p,axisLine:_,tickCoords:b,tfCoords:E,ticks:o,tickLabels:a,tickFactor:c,tfLabel:z}}function ed(r){if(!r.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Le(r.breaks)?r.breaks.v:r.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!r.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(r.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(r.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=r.colmap;let s,l;if(r.labels?(s=r.labels,l=0):[l,s]=qs(e),!(s.length===e.length-1||s.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const o=s.length===t.length;return{colmap:t,breaks:e,labels:s,isCentered:o,labelsFactor:l,fontSize:r.fontSize,labelColor:r.labelColor}}function td(r,e,t,s){const l=r.colmap.length,o=e*Vu,a=o/l,c=t[1]+(e-o)*.5,d=Ou[s.y],u=t[2]+d*Oo,f=u+d*(1+Oo),h=r.isCentered?a/2:0;return{start:c,top:u,height:d,width:a,dxl:h,ltop:f}}function zr(r,e,t){if(!r||!e||!t||typeof t!="function")return;const s=r.target;if(s.tagName===e){const l=Array.prototype.indexOf.call(s.parentNode.children,s);if(l<0)return;t(l),r.stopPropagation()}}function rd(r,e){const s=document.createElement("canvas").getContext("2d");return s.font=e,s.measureText(r.replace(/<(.|\n)*?>/g,"")).width}function nd(r,e){const t="Arial",s=e/8,l=e*1.5,o=Array(r.length),a=Array(r.length);let c=0,d=0,u=0;for(let h=0;h<r.length;h++){const v=rd("  "+r[h].label+"  ",e+"px "+t);u=v>u?v:u;const m=e*r[h].labelHeight+2*s;o[h]=m,a[h]=c,c=c+m,d=d+m}const f=l+2*s+u;return[a,o,l,s,d,f]}function sd(r,e,t,s,l){const[o,a,c,d,u,f]=nd(r.items,s*r.fontSize),h=r.position.includes("left")?e[0]+l:r.position.includes("right")?e[1]-f-l:(e[1]+e[0]-f)*.5,v=r.position.includes("top")?t[1]+l:r.position.includes("bottom")?t[0]-u-l:(t[1]+t[0]-u)*.5;return{lgl:h,lgt:v,lgw:f,lgh:u,ely:o,elh:a,elw:c,elp:d}}function mn(r){if(!r||r.length<1)return r;function e(o){return'<tspan font-size="0.75em" dy="-0.5em">'+o+'</tspan><tspan dy="0.4em"> </tspan>'}function t(o){return'<tspan font-size="0.75em" dy="0.5em">'+o+'</tspan><tspan dy="-0.4em"> </tspan>'}let s=0,l="";for(;s<r.length;){const o=r[s];if((o==="^"||o==="_")&&s<r.length-1){const a=o==="^";if(s++,r[s]==="("){let c=s+1;for(;c<r.length&&r[c]!==")";)c++;const d=r.slice(s+1,c);l+=a?e(d):t(d),s=c+1}else if(r[s]==="-"||r[s]==="–"){const c=r.slice(s,s+2);l+=a?e(c):t(c),s=s+2}else l+=a?e(r[s]):t(r[s]),s++}else l+=o,s++}return l}var ld=le('<line vector-effect="non-scaling-stroke"></line>'),od=le("<g></g>");function Ys(r,e){oe(e,!0);let t=H(e,"lineCoords",19,()=>[]),s=H(e,"lineColor",19,()=>pt.DARKGRAY),l=H(e,"lineType",3,1),o=H(e,"lineWidth",3,1),a=H(e,"className",3,"");const c=Et("axes");let d=g(()=>tt(t()[0][0],c.tX())),u=g(()=>tt(t()[1][0],c.tX())),f=g(()=>tt(t()[0][1],c.tY())),h=g(()=>tt(t()[1][1],c.tY())),v=g(()=>`stroke:${s()};stroke-width: ${o()}px;stroke-dasharray:${fn[c.scales().plot][l()-1]}`);var m=ie(),p=Q(m);{var _=b=>{var E=od();Ae(E,21,()=>n(d),Te,(z,y,w)=>{var S=ld();Z(()=>{R(S,"x1",n(d)[w]),R(S,"x2",n(u)[w]),R(S,"y1",n(f)[w]),R(S,"y2",n(h)[w]),nt(S,n(v))}),C(z,S)}),Z(()=>ut(E,0,Oi(a()))),C(b,E)};X(p,b=>{n(d)&&n(f)&&n(u)&&b(_)})}C(r,m),ae()}var ad=le('<text text-anchor="middle"><!></text>'),id=le("<text><!></text>"),cd=le("<text><!></text>"),ud=le('<g class="tick-labels"><!></g>');function Jo(r,e){oe(e,!0);let t=H(e,"pos",3,1),s=H(e,"las",3,1),l=g(()=>["middle","middle","start","middle","end"][t()]),o=g(()=>`fill:${e.textColor};`);const a=Et("axes");let c=g(()=>tt(e.tickCoords[1][0],a.tX())),d=g(()=>tt(e.tickCoords[1][1],a.tY())),u=g(()=>Vs[a.scales().plot]),f=g(()=>[0,0,n(u),0,-n(u)][t()]),h=g(()=>[0,n(u),0,-n(u),0][t()]);var v=ud(),m=B(v);{var p=b=>{var E=ie(),z=Q(E);Ae(z,17,()=>n(c),Te,(y,w,S)=>{var L=ad();R(L,"data-id",S),R(L,"dx",0);var A=B(L);yt(A,()=>e.tickLabels[S],!0),Z(()=>{R(L,"x",n(c)[S]),R(L,"y",n(d)[S]),R(L,"dy",n(f)*1.25),R(L,"transform",`rotate(-90, ${n(c)[S]}, ${n(d)[S]})`)}),C(y,L)}),C(b,E)},_=(b,E)=>{{var z=w=>{var S=ie(),L=Q(S);Ae(L,17,()=>n(c),Te,(A,T,P)=>{var N=id();R(N,"data-id",P),R(N,"dy",0),R(N,"text-anchor","end");var k=B(N);yt(k,()=>e.tickLabels[P],!0),Z(()=>{R(N,"x",n(c)[P]),R(N,"y",n(d)[P]),R(N,"dx",-n(h)/2),R(N,"transform",`rotate(-90, ${n(c)[P]}, ${n(d)[P]})`)}),C(A,N)}),C(w,S)},y=w=>{var S=ie(),L=Q(S);Ae(L,17,()=>n(c),Te,(A,T,P)=>{var N=cd();R(N,"data-id",P);var k=B(N);yt(k,()=>e.tickLabels[P],!0),Z(()=>{R(N,"x",n(c)[P]),R(N,"y",n(d)[P]),R(N,"dx",n(f)),R(N,"dy",n(h)),R(N,"text-anchor",n(l))}),C(A,N)}),C(w,S)};X(b,w=>{s()===2&&t()===1?w(z):w(y,!1)},E)}};X(m,b=>{s()===2&&t()===4?b(p):b(_,!1)})}Z(()=>nt(v,n(o))),C(r,v),ae()}const dd=(r,e=ht,t=ht)=>{var s=pd();const l=g(()=>e().colmap.length);var o=Q(s);Ae(o,17,()=>e().colmap,Te,(f,h,v)=>{var m=md();const p=g(()=>t().start+v*t().width);var _=Q(m),b=j(_);R(b,"dy",0);var E=B(b);yt(E,()=>e().labels[v],!0),Z(()=>{R(_,"x",n(p)),R(_,"y",t().top),R(_,"width",t().width),R(_,"height",t().height),R(_,"fill",n(h)),R(b,"x",n(p)),R(b,"y",t().ltop),R(b,"dx",t().dxl),R(b,"fill",e().labelColor),R(b,"font-size",e().fontSize+"em")}),C(f,m)});var a=j(o);{var c=f=>{var h=gd();const v=g(()=>t().start+n(l)*t().width);R(h,"dx",0),R(h,"dy",0);var m=B(h);yt(m,()=>e().labels[n(l)],!0),Z(()=>{R(h,"x",n(v)),R(h,"y",t().ltop),R(h,"fill",e().labelColor),R(h,"font-size",`${e().fontSize??""}em`)}),C(f,h)};X(a,f=>{e().isCentered||f(c)})}var d=j(a);{var u=f=>{var h=bd();const v=g(()=>t().start+n(l)*t().width);var m=B(h);yt(m,()=>Os(e().labelsFactor),!0),Z(()=>{R(h,"x",n(v)),R(h,"y",t().ltop),R(h,"fill",e().labelColor),R(h,"font-size",`${e().fontSize??""}em`)}),C(f,h)};X(d,f=>{e().labelsFactor!==0&&f(u)})}C(r,s)};function Qo(r,e,t){r.preventDefault(),e(r,t())}function Zo(r,e,t){r.preventDefault(),e(r,t())}function $o(r,e,t){r.preventDefault(),e(r,t())}function Dn(r,e,t){r.preventDefault(),e(r,t())}async function ea(r,e,t,s){Ku(r.target,n(e),t(),s())}function ta(r,e,t){Gu(n(e),t())}function ra(r,e,t,s,l,o){Xu(n(e),t(),s(),l(),o())}var fd=le('<text fill="crimson" text-anchor="middle"> </text>'),vd=le('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),hd=le("<!><!><!><!><!>",1),md=le('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),gd=le('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),bd=le('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),pd=le("<!><!><!>",1),_d=le("<line></line>"),wd=le('<text dominant-baseline="middle" text-anchor="middle"> </text>'),yd=le('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),xd=le('<svg><rect height="100%" width="100%"></rect><!></svg>'),kd=le('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Ed=le('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Sd=le('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Ad=le('<g class="plot-labels"><!><!><!></g>'),Cd=le('<g class="axis x-axis"><!></g>'),Ld=le('<g class="axis y-axis"><!></g>'),Td=le('<rect fill="transparent" id="axes-box"></rect>'),zd=le('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Nd=le('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Pd=le('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Rd=le('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Md=G('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),Id=G('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Fd=G(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function na(r,e){oe(e,!0);const t=(pe,Re=ht,Ne=ht)=>{var at=ie(),kt=Q(at);{var Zt=Lt=>{var Ke=ie(),Fe=Q(Ke);{var _t=it=>{var $e=fd(),Wt=B($e);Z(()=>{R($e,"x",n(ne)[0]-10),R($e,"y",n(ee)),R($e,"transform",`rotate(-90, ${n(ne)[0]-10}, ${n(ee)})`),he(Wt,Ne().error)}),C(it,$e)},vt=it=>{var $e=vd(),Wt=B($e);Z(()=>{R($e,"x",n($)),R($e,"y",n(ve)[0]),he(Wt,Ne().error)}),C(it,$e)};X(Fe,it=>{Ne().pos===4?it(_t):it(vt,!1)})}C(Lt,Ke)},Pt=Lt=>{var Ke=hd(),Fe=Q(Ke);{var _t=ue=>{Ys(ue,{get lineCoords(){return Re().grid},get lineColor(){return pt.MIDDLEGRAY},lineType:3})};X(Fe,ue=>{Ne().showGrid&&ue(_t)})}var vt=j(Fe);Ys(vt,{get lineCoords(){return Re().axisLine},get lineColor(){return pt.DARKGRAY},lineType:1});var it=j(vt);Ys(it,{get lineCoords(){return Re().tickCoords},get lineColor(){return pt.DARKGRAY},lineType:1});var $e=j(it);{var Wt=ue=>{Jo(ue,{get las(){return Ne().las},get pos(){return Ne().pos},get tickCoords(){return Re().tickCoords},get tickLabels(){return Re().tickLabels},get tickColor(){return pt.DARKGRAY},get hideLast(){return Ne().hideLast}})};X($e,ue=>{Re().tickCoords.length===2&&Re().tickLabels.length===Re().tickCoords[1][0].length&&ue(Wt)})}var Pr=j($e);{var Be=ue=>{const wt=g(()=>[Re().tfLabel]);Jo(ue,{get pos(){return Ne().pos},get tickCoords(){return Re().tfCoords},get tickLabels(){return n(wt)},get textColor(){return pt.DARKGRAY}})};X(Pr,ue=>{Re().tickFactor!==0&&ue(Be)})}C(Lt,Ke)};X(kt,Lt=>{Ne().error?Lt(Zt):Lt(Pt,!1)})}C(pe,at)},s=(pe,Re=ht,Ne=ht)=>{var at=xd();const kt=g(()=>Ne().elw+2*Ne().elp),Zt=g(()=>Ne().elp),Pt=g(()=>Ne().elh),Lt=g(()=>Ne().ely);var Ke=B(at),Fe=j(Ke);Ae(Fe,17,()=>Re().items,Te,(_t,vt,it)=>{var $e=yd();R($e,"x",0);var Wt=B($e);{var Pr=ur=>{var je=_d();Z(()=>{R(je,"x1",n(Zt)),R(je,"x2",n(kt)-n(Zt)),R(je,"y1",n(Pt)[it]/2),R(je,"y2",n(Pt)[it]/2),R(je,"stroke",n(vt).line.lineColor),R(je,"stroke-width",n(vt).line.lineWidth),R(je,"stroke-dasharray",n(k)[n(vt).line.lineType-1])}),C(ur,je)};X(Wt,ur=>{n(vt).line&&ur(Pr)})}var Be=j(Wt);{var ue=ur=>{var je=wd(),ll=B(je);Z(()=>{R(je,"x",n(kt)/2),R(je,"y",n(Pt)[it]/2),R(je,"fill",n(vt).point.faceColor),R(je,"stroke-width",n(vt).point.lineWidth),R(je,"stroke",n(vt).point.lineColor),R(je,"font-size",n(P)),he(ll,vn[n(vt).point.marker-1])}),C(ur,je)};X(Be,ur=>{n(vt).point&&ur(ue)})}var wt=j(Be),sl=B(wt);yt(sl,()=>n(vt).label,!0),Z(()=>{R($e,"y",n(Lt)[it]),R($e,"width",Ne().lgw),R($e,"height",n(Pt)[it]),R(wt,"x",n(kt)+n(Zt)),R(wt,"y",n(Pt)[it]/2),R(wt,"fill",pt.LEGEND),R(wt,"font-size",`${Re().fontSize??""}em`)}),C(_t,$e)}),Z(()=>{R(at,"x",Ne().lgl),R(at,"y",Ne().lgt),R(at,"height",Ne().lgh),R(at,"width",Ne().lgw),R(Ke,"fill",Re().faceColor),R(Ke,"stroke",Re().lineColor),R(Ke,"stroke-width",Re().lineWidth)}),C(pe,at)};let l=H(e,"limX",19,()=>[0,1]),o=H(e,"limY",19,()=>[0,1]),a=H(e,"margins",19,()=>[1,1.1,.55,.6]),c=H(e,"downloadLinks",3,"none"),d=H(e,"fileName",3,"plot"),u=H(e,"pngWidth",3,8),f=H(e,"pngHeight",3,8),h=H(e,"pngRes",3,300),v=H(e,"clipboardWidth",3,1200),m=H(e,"clipboardHeight",3,800),p=H(e,"onclick",3,null),_=H(e,"onmousemove",3,null),b=H(e,"onmousedown",3,null),E=H(e,"onmouseup",3,null);function z(pe,Re){if(Re&&pe.target.id=="axes-box"){const Ne=Wo([pe.offsetX-n(W)],n(K))[0],at=Wo([pe.offsetY-n(O)],n(te))[0];Re(Ne,at)}}const y="plottingArea"+Math.round(Math.random()*1e4);let w=re(0),S=re(0),L=re(0);const A=g(()=>({plot:Bu(n(S),n(L)),x:Ko(n(S)),y:Ko(n(L))})),T=g(()=>a().map(pe=>pe*Mu[n(A).plot])),P=g(()=>ju[n(A).plot]),N=g(()=>js[n(A).plot]),k=g(()=>fn[n(A).plot]),F=g(()=>n(be).show&&n(be).label!==""?n(P)*1.5:0),W=g(()=>n(ge).show&&n(ge).label!==""?n(P)*1.5:0),O=g(()=>e.title&&e.title!==""?n(P)*1.5:0),M=g(()=>n(S)>n(W)?n(S)-n(W):0),I=g(()=>n(L)>n(F)+n(O)?n(L)-n(F)-n(O):0),Y=g(()=>n(I)-n(T)[0]-n(T)[2]),V=g(()=>n(M)-n(T)[1]-n(T)[3]),q=g(()=>Do(l(),2)&&Do(o(),2)&&n(M)>n(T)[1]+n(T)[3]&&n(I)>n(T)[0]+n(T)[2]),K=g(()=>n(q)?{coords:[n(V)/(l()[1]-l()[0]),l()[0],n(T)[1]],objects:[n(V)/(l()[1]-l()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),te=g(()=>n(q)?{coords:[-n(Y)/(o()[1]-o()[0]),o()[1],n(T)[2]],objects:[n(Y)/(o()[1]-o()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ee=g(()=>n(Y)*.5+n(O)+n(T)[2]),$=g(()=>n(V)*.5+n(W)+n(T)[1]),ne=g(()=>n(q)?tt(l(),n(K)):[0,1]),ve=g(()=>n(q)?tt(o(),n(te)):[1,0]),xe=g(()=>mn(e.title)),ce=g(()=>n(xe)?n(xe).length===e.title.left?1:1.4:0);let _e=re(Xe({show:!1})),be=re(Xe({show:!1,error:""})),ge=re(Xe({show:!1,error:""})),Ee=re(Xe({show:!1,colmap:null,breaks:null})),fe=re(Xe({show:!1,items:null,position:null}));const we=g(()=>n(q)&&n(Ee)&&n(Ee).show?ed(n(Ee)):null),de=g(()=>n(q)&&n(be).show?Zu(l(),o(),n(A),n(te),n(be)):null),Ie=g(()=>n(q)&&n(ge).show?$u(l(),o(),n(A),n(K),n(ge)):null),ye=g(()=>n(q)&&n(we)?td(n(we),n(V),n(T),n(A)):null),Se=g(()=>n(q)&&n(fe)&&n(fe).show&&n(ne)?sd(n(fe),n(ne),n(ve),n(P),n(N)):null);li("axes",{setBox:pe=>D(_e,pe,!0),setXAxis:pe=>D(be,pe,!0),setYAxis:pe=>D(ge,pe,!0),setColmapLegend:pe=>D(Ee,pe,!0),setGroupLegend:pe=>D(fe,pe,!0),scales:()=>n(A),tX:()=>n(K),tY:()=>n(te),limX:()=>l(),limY:()=>o()});var De=Fd();let jt;var Ge=B(De),lt=j(B(Ge));{var Qe=pe=>{var Re=Ad(),Ne=B(Re);{var at=Ke=>{var Fe=kd();R(Fe,"dx",0),R(Fe,"dy",0);var _t=B(Fe);yt(_t,()=>n(be).label,!0),Z(()=>{R(Fe,"x",n($)),R(Fe,"y",n(I)+n(O))}),C(Ke,Fe)};X(Ne,Ke=>{n(be).show&&n(be).label&&n(be).label!==""&&Ke(at)})}var kt=j(Ne);{var Zt=Ke=>{var Fe=Ed();R(Fe,"dx",0),R(Fe,"dy",0);var _t=B(Fe);yt(_t,()=>n(ge).label,!0),Z(()=>{R(Fe,"x",n(P)/1.1*n(ge).labelHeight),R(Fe,"y",n(ee)),R(Fe,"transform",`rotate(-90, ${n(P)*n(ge).labelHeight/1.1}, ${n(ee)})`)}),C(Ke,Fe)};X(kt,Ke=>{n(ge).show&&n(ge).label&&n(ge).label!==""&&Ke(Zt)})}var Pt=j(kt);{var Lt=Ke=>{var Fe=Sd();R(Fe,"dx",0),R(Fe,"dy",0);var _t=B(Fe);yt(_t,()=>n(xe),!0),Z(()=>{R(Fe,"x",n($)),R(Fe,"y",n(P)*n(ce))}),C(Ke,Fe)};X(Pt,Ke=>{n(xe)&&n(xe)!==""&&Ke(Lt)})}C(pe,Re)};X(lt,pe=>{n(q)&&pe(Qe)})}var Yt=j(lt),pn=B(Yt),Un=B(pn);R(Un,"id",y);var Qr=B(Un),$s=j(pn);{var el=pe=>{var Re=Rd(),Ne=Q(Re);{var at=Be=>{var ue=Cd(),wt=B(ue);t(wt,()=>n(de),()=>n(be)),C(Be,ue)};X(Ne,Be=>{n(be).show&&n(de)&&Be(at)})}var kt=j(Ne);{var Zt=Be=>{var ue=Ld(),wt=B(ue);t(wt,()=>n(Ie),()=>n(ge)),C(Be,ue)};X(kt,Be=>{n(ge).show&&n(Ie)&&Be(Zt)})}var Pt=j(kt),Lt=B(Pt);{var Ke=Be=>{var ue=Td();ue.__keydown=[Dn,z,p],ue.__click=[Dn,z,p],ue.__mousemove=[$o,z,_],ue.__mousedown=[Qo,z,b],ue.__mouseup=[Zo,z,E],Z(()=>{R(ue,"stroke",n(_e).lineColor),R(ue,"stroke-width",`${n(_e).lineWidth??""}px`),R(ue,"x",n(ne)[0]),R(ue,"y",n(ve)[1]),R(ue,"width",n(ne)[1]-n(ne)[0]),R(ue,"height",n(ve)[0]-n(ve)[1])}),C(Be,ue)},Fe=Be=>{var ue=zd();ue.__keydown=[Dn,z,p],ue.__click=[Dn,z,p],ue.__mousemove=[$o,z,_],ue.__mousedown=[Qo,z,b],ue.__mouseup=[Zo,z,E],Z(()=>{R(ue,"x",n(ne)[0]),R(ue,"y",n(ve)[1]),R(ue,"width",n(ne)[1]-n(ne)[0]),R(ue,"height",n(ve)[0]-n(ve)[1])}),C(Be,ue)};X(Lt,Be=>{n(_e).show?Be(Ke):Be(Fe,!1)})}var _t=j(Pt);R(_t,"clip-path",`url(#${y})`);var vt=B(_t);gr(vt,()=>e.children??ht);var it=j(_t);{var $e=Be=>{var ue=Nd(),wt=B(ue);dd(wt,()=>n(we),()=>n(ye)),C(Be,ue)};X(it,Be=>{n(ye)&&Be($e)})}var Wt=j(it);{var Pr=Be=>{var ue=Pd(),wt=B(ue);s(wt,()=>n(fe),()=>n(Se)),C(Be,ue)};X(Wt,Be=>{n(Se)&&Be(Pr)})}C(pe,Re)};X($s,pe=>{n(q)&&pe(el)})}Xr(Ge,pe=>D(w,pe),()=>n(w));var tl=j(Ge,2);{var rl=pe=>{var Re=Md();C(pe,Re)},nl=pe=>{var Re=Id(),Ne=B(Re);Ne.__click=[ta,w,d],Ne.__keydown=[ta,w,d];var at=j(Ne,2);at.__click=[ra,w,d,u,f,h],at.__keydown=[ra,w,d,u,f,h];var kt=j(at,2);kt.__click=[ea,w,v,m],kt.__keydown=[ea,w,v,m],C(pe,Re)};X(tl,pe=>{n(q)?pe(nl,!1):pe(rl)})}Z(pe=>{jt=ut(De,1,`plot-container show-download-links-${c()??""}`,"svelte-1jtdxd0",jt,pe),nt(Ge,`font-size:${n(P)??""}px`),R(Yt,"x",n(W)),R(Yt,"y",n(O)),R(Yt,"width",n(M)),R(Yt,"height",n(I)),R(Qr,"x",n(ne)[0]),R(Qr,"y",n(ve)[1]),R(Qr,"width",n(ne)[1]-n(ne)[0]),R(Qr,"height",n(ve)[0]-n(ve)[1])},[()=>({"plot-error":!n(q)})]),to(Ge,"clientWidth",pe=>D(S,pe)),to(Ge,"clientHeight",pe=>D(L,pe)),C(r,De),ae()}rt(["keydown","click","mousemove","mousedown","mouseup"]);function sa(r,e){oe(e,!0);let t=H(e,"tickLabels",7),s=H(e,"las",3,1),l=H(e,"whole",3,!1),o=H(e,"show",3,!0),a=H(e,"showGrid",3,!1);const c=Et("axes");Ce(()=>{const d=mn(e.label),u=d?d.length===e.label.length?1:1.4:0;let f,h="";e.ticks&&([f,h]=Xo(e.ticks,c.limX())),!h&&t()&&(v=>{let[m,p]=v;t(m),h=p})(Uo(t(),f)),c.setXAxis({show:o(),error:h,label:d,ticks:f,labelHeight:u,showGrid:a(),las:s(),whole:l(),tickLabels:t()})}),ae()}function la(r,e){oe(e,!0);let t=H(e,"tickLabels",7),s=H(e,"las",3,1),l=H(e,"whole",3,!1),o=H(e,"show",3,!0),a=H(e,"showGrid",3,!1);const c=Et("axes");Ce(()=>{const d=mn(e.label),u=d?d.length===e.label.length?1:1.4:0;let f,h="";e.ticks&&([f,h]=Xo(e.ticks,c.limY())),!h&&t()&&(v=>{let[m,p]=v;t(m),h=p})(Uo(t(),f)),c.setYAxis({show:o(),error:h,label:d,ticks:f,labelHeight:u,showGrid:a(),las:s(),whole:l(),tickLabels:t(),pos:4})}),ae()}function oa(r,e){oe(e,!0);let t=H(e,"lineWidth",3,1),s=H(e,"lineColor",3,"#606060");const l=Et("axes");Ce(()=>{l.setBox({show:!0,lineWidth:t(),lineColor:s()})}),ae()}var jd=(r,e)=>zr(r,"rect",e.onclick),Vd=le("<rect></rect>"),Od=le("<g></g>");function Ws(r,e){oe(e,!0);let t=H(e,"faceColor",19,()=>pt.PRIMARY),s=H(e,"lineColor",19,t),l=H(e,"lineWidth",3,1),o=H(e,"className",3,"series-rect");const a=g(()=>Ct(e.left,"Rectangles (left)")),c=g(()=>n(a)?Ct(e.top,"Rectangles (top)",n(a).length):null),d=g(()=>n(c)?typeof e.width!="object"?We.fill(e.width,n(a).length):e.width:null),u=g(()=>n(c)?typeof e.height!="object"?We.fill(e.height,n(a).length):e.height:null),f=Et("axes"),h=g(()=>n(a)?tt(n(a),f.tX()):null),v=g(()=>n(c)?tt(n(c),f.tY()):null),m=g(()=>n(d)?hn(n(d),f.tX()):null),p=g(()=>n(u)?hn(n(u),f.tY()):null),_=g(()=>`fill:${t()};stroke:${s()};stroke-width:${l()}px;`),b=g(()=>n(h)&&n(v)&&n(m)&&n(p)&&n(m).length===n(h).length&&n(p).length===n(h).length);var E=ie(),z=Q(E);{var y=w=>{var S=Od();S.__click=[jd,e],Ae(S,21,()=>e.left,Te,(L,A,T)=>{var P=Vd();Z(()=>{R(P,"x",n(h)[T]),R(P,"y",n(v)[T]),R(P,"width",n(m)[T]),R(P,"height",n(p)[T])}),C(L,P)}),Z(()=>{ut(S,0,`series ${o()??""}`),nt(S,n(_))}),C(w,S)};X(z,w=>{n(b)&&w(y)})}C(r,E),ae()}rt(["click"]);var qd=(r,e)=>zr(r,"line",e.onclick),Dd=le("<line></line>"),Bd=le('<g class="series series-segment"></g>');function Nr(r,e){oe(e,!0);let t=H(e,"lineColor",19,()=>pt.PRIMARY),s=H(e,"lineType",3,1),l=H(e,"lineWidth",3,1);const o=g(()=>Ct(e.xStart,"Segments")),a=g(()=>n(o)?Ct(e.yStart,"Segments",n(o).length):null),c=g(()=>n(a)?Ct(e.xEnd,"Segments",n(o).length):null),d=g(()=>n(c)?Ct(e.yEnd,"Segments",n(o).length):null),u=Et("axes"),f=g(()=>n(o)?tt(n(o),u.tX()):null),h=g(()=>n(c)?tt(n(c),u.tX()):null),v=g(()=>n(a)?tt(n(a),u.tY()):null),m=g(()=>n(d)?tt(n(d),u.tY()):null),p=g(()=>`stroke:${t()};stroke-width: ${l()}px;stroke-dasharray:${fn[u.scales().plot][s()-1]}`),_=g(()=>n(f)&&n(h)&&n(v)&&n(m));var b=ie(),E=Q(b);{var z=y=>{var w=Bd();w.__click=[qd,e],Ae(w,21,()=>n(f),Te,(S,L,A)=>{var T=Dd();Z(()=>{R(T,"x1",n(f)[A]),R(T,"x2",n(h)[A]),R(T,"y1",n(v)[A]),R(T,"y2",n(m)[A])}),C(S,T)}),Z(()=>nt(w,n(p))),C(y,w)};X(E,y=>{n(_)&&y(z)})}C(r,b),ae()}rt(["click"]);var Yd=(r,e)=>zr(r,"text",e.onclick),Wd=le("<text><!></text>"),Hd=le("<text><!></text>"),Ud=le("<text><!></text>"),Xd=le('<g class="series series-textlabels"><!></g>');function aa(r,e){oe(e,!0);let t=H(e,"pos",3,0),s=H(e,"faceColor",19,()=>pt.PRIMARY_TEXT),l=H(e,"lineColor",3,"transparent"),o=H(e,"lineWidth",3,0),a=H(e,"textSize",3,1),c=H(e,"rotateAngle",3,0);const d=["middle","middle","start","middle","end"],u=g(()=>Ct(e.xValues,"TextLabels")),f=g(()=>n(u)?Ct(e.yValues,"TextLabels",n(u).length):null),h=g(()=>n(f)?Array.isArray(e.labels)&&e.labels.length!==n(f).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),v=g(()=>n(h)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),m=Et("axes"),p=g(()=>n(u)&&n(v)!==null?tt(n(u),m.tX()):null),_=g(()=>n(f)&&n(p)?tt(n(f),m.tY()):null),b=g(()=>Vs[m.scales().plot]),E=g(()=>[0,0,-n(b),0,n(b),n(b)]),z=g(()=>[0,n(b),0,-n(b),0,n(b)]),y=g(()=>`fill:${s()};stroke-width:${o()}px;stroke:${l()};font-size:${a()}em;`),w=g(()=>n(p)&&n(_)&&n(v)!==null&&n(h)&&n(p).length===n(_).length);var S=ie(),L=Q(S);{var A=T=>{var P=Xd();P.__click=[Yd,e];var N=B(P);{var k=W=>{var O=ie(),M=Q(O);Ae(M,17,()=>n(p),Te,(I,Y,V)=>{var q=Wd();R(q,"data-id",V);var K=B(q);yt(K,()=>e.labels,!0),Z(()=>{R(q,"x",n(p)[V]),R(q,"y",n(_)[V]),R(q,"dx",n(E)[t()]),R(q,"dy",n(z)[t()]),R(q,"transform",c()!==void 0?`rotate(${c()}, ${n(p)[V]+n(E)[t()]}, ${n(_)[V]+n(z)[t()]})`:""),R(q,"text-anchor",d[t()[V]])}),C(I,q)}),C(W,O)},F=(W,O)=>{{var M=Y=>{var V=ie(),q=Q(V);Ae(q,17,()=>n(p),Te,(K,te,ee)=>{var $=Hd();R($,"data-id",ee);var ne=B($);yt(ne,()=>e.labels[ee],!0),Z(()=>{R($,"x",n(p)[ee]),R($,"y",n(_)[ee]),R($,"dx",n(E)[t()[ee]]),R($,"dy",n(z)[t()[ee]]),R($,"transform",c()!==void 0?`rotate(${c()}, ${n(p)[ee]+n(E)[t()]}, ${n(_)[ee]+n(z)[t()]})`:""),R($,"text-anchor",d[t()[ee]])}),C(K,$)}),C(Y,V)},I=Y=>{var V=ie(),q=Q(V);Ae(q,17,()=>n(p),Te,(K,te,ee)=>{var $=Ud();R($,"data-id",ee);var ne=B($);yt(ne,()=>e.labels[ee],!0),Z(()=>{R($,"x",n(p)[ee]),R($,"y",n(_)[ee]),R($,"dx",n(E)[t()]),R($,"dy",n(z)[t()]),R($,"transform",c()!==void 0?`rotate(${c()}, ${n(p)[ee]+n(E)[t()]}, ${n(_)[ee]+n(z)[t()]})`:""),R($,"text-anchor",d[t()])}),C(K,$)}),C(Y,V)};X(W,Y=>{Array.isArray(t())||ArrayBuffer.isView(t())?Y(M):Y(I,!1)},O)}};X(N,W=>{typeof e.labels=="string"?W(k):W(F,!1)})}Z(()=>nt(P,n(y))),C(T,P)};X(L,T=>{n(w)&&T(A)})}C(r,S),ae()}rt(["click"]),rt(["click"]);var Gd=(r,e)=>zr(r,"text",e.onclick),Kd=le("<text> </text>"),Jd=le('<g text-anchor="middle"></g>');function Qd(r,e){oe(e,!0);let t=H(e,"marker",3,1),s=H(e,"faceColor",3,"transparent"),l=H(e,"lineColor",19,()=>pt.PRIMARY),o=H(e,"lineWidth",3,1),a=H(e,"markerSize",3,1);const c=g(()=>typeof t()!="number"||t()<1||t()>vn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+vn.length+"."),null):vn[t()-1]),d=g(()=>Ct(e.xValues,"Points")),u=g(()=>n(d)?Ct(e.yValues,"Points",n(d).length):null),f=Et("axes"),h=g(()=>n(d)?tt(n(d),f.tX()):null),v=g(()=>n(h)&&n(u)?tt(n(u),f.tY()):null),m=g(()=>["＋","✳","✕"].includes(n(c))?`fill:${l()&&l()!=="transparent"?l():s()};stroke-width:0px;font-size:${a()}em;`:`fill:${s()};stroke-width:${o()}px;stroke:${l()}; font-size:${a()}em;`),p=g(()=>["◼","⬥","＋","✳","✕"].includes(n(c))?"series-points2":"series-points1"),_=g(()=>n(h)&&n(v)&&n(h).length===n(v).length);var b=ie(),E=Q(b);{var z=y=>{var w=Jd();w.__click=[Gd,e],Ae(w,21,()=>n(h),Te,(S,L,A)=>{var T=Kd(),P=B(T);Z(()=>{R(T,"x",n(h)[A]),R(T,"y",n(v)[A]),he(P,n(c))}),C(S,T)}),Z(()=>{ut(w,0,`series series-points ${n(p)??""}`),nt(w,n(m))}),C(y,w)};X(E,y=>{n(_)&&y(z)})}C(r,b),ae()}rt(["click"]);var Zd=(r,e)=>zr(r,"polyline",e.onclick),$d=le('<g class="series series-line"><polyline class="line"></polyline></g>');function Kr(r,e){oe(e,!0);let t=H(e,"lineColor",19,()=>pt.PRIMARY),s=H(e,"lineType",3,1),l=H(e,"lineWidth",3,1);const o=g(()=>Ct(e.xValues,"Lines")),a=g(()=>n(o)?Ct(e.yValues,"Lines",n(o).length):null),c=Et("axes"),d=g(()=>n(o)&&n(a)?Ds(n(o),n(a),c.tX(),c.tY()):null),u=g(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${fn[c.scales().plot][s()-1]}`);var f=ie(),h=Q(f);{var v=m=>{var p=$d();p.__click=[Zd,e];var _=B(p);Z(()=>{nt(p,n(u)),R(_,"points",n(d))}),C(m,p)};X(h,m=>{n(d)&&m(v)})}C(r,f),ae()}rt(["click"]);var ef=(r,e)=>zr(r,"polyline",e.onclick),tf=le('<polyline class="line"></polyline>'),rf=le('<g class="series series-multiline"></g>');function nf(r,e){oe(e,!0);let t=H(e,"lineColor",19,()=>pt.PRIMARY),s=H(e,"lineType",3,1),l=H(e,"lineWidth",3,1);const o=g(()=>Ct(e.xValues,"Multilines")),a=g(()=>n(o)?rr(e.yValues)?(n(o).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),c=Et("axes"),d=g(()=>{if(!n(o)||!n(a))return null;const m=new Array(n(a).ncols);for(let p=0;p<m.length;p++)m[p]=Ds(n(o),n(a).getcolumn(p+1),c.tX(),c.tY());return m}),u=g(()=>`fill:transparent;stroke:${t()};stroke-width: ${l()}px; stroke-dasharray:${fn[c.scales().plot][s()-1]}`);var f=ie(),h=Q(f);{var v=m=>{var p=rf();p.__click=[ef,e],Ae(p,21,()=>n(d),Te,(_,b)=>{var E=tf();Z(()=>R(E,"points",n(b))),C(_,E)}),Z(()=>nt(p,n(u))),C(m,p)};X(h,m=>{n(d)&&n(d).length>0&&m(v)})}C(r,f),ae()}rt(["click"]);function sf(...r){const e=r.length,t=r.map(a=>a.length);let s=xs(t),l=Array(e),o=1;for(let a=0;a<e;a++){const c=Le(r[a])?r[a]:ze(r[a]),d=c.length;s=s/d,l[a]=c.subset(gt.seq(1,d).repeach(o).rep(s)),o=o*d}return l}var lf=le("<rect></rect>"),of=le('<g title="heatmap-group"><!></g>'),af=le('<g class="heatmap" style="stroke:0;stroke-width:0px;"></g>');function cf(r,e){oe(e,!0);let t=H(e,"colmap",3,null),s=g(()=>rr(e.values)&&e.values.nrows>0&&e.values.ncols>0?e.values:null),l=g(()=>n(s)?e.breaks&&Array.isArray(e.breaks)?e.breaks:e.breaks&&Le(e.breaks)?e.breaks.v:oo(n(s).v,qu).v:null),o=g(()=>t()?Array.isArray(t())?t().length!==e.breaks.length-1?(console.error("Heatmap: number of color values in colormap does not match number of intervals defined by breaks."),null):t():(console.error('Heatmap: parameter "colmap" must be array with colors.'),null):Qu(n(l).length-1)),a=g(()=>n(s)?qo(n(s).ncols):null),c=g(()=>n(s)?qo(n(s).nrows):null),d=g(()=>n(a)&&n(c)?sf(n(c),n(a)):null),u=g(()=>{if(!n(d)||!n(l)||!n(o))return null;const[y,w]=n(d),S=w.length,L=n(l).length,A=Array(L).fill().map(()=>[]),T=Array(L).fill().map(()=>[]),P=n(l).slice(),N=P[1]-P[0];P[0]=P[0]-.1*N,P[L-1]=P[L-1]+.1*N;for(let k=0;k<S;k++){const F=n(s).v[k];for(let W=0;W<L-1;W++)if(F>P[W]&&F<=P[W+1]){A[W].push(w.v[k]-.5),T[W].push(n(s).nrows-y.v[k]+1.5);break}}return{rl:A,rt:T}});const f=Et("axes");let h=g(()=>n(u)?n(u).rl.map(y=>y.length>0?tt(y,f.tX()):[]):null),v=g(()=>n(u)?n(u).rt.map(y=>y.length>0?tt(y,f.tY()):[]):null),m=g(()=>hn([1],f.tX())),p=g(()=>hn([1],f.tY())),_=g(()=>n(h)&&n(v)&&n(h).length===n(v).length);var b=ie(),E=Q(b);{var z=y=>{var w=af();Ae(w,21,()=>n(o),Te,(S,L,A)=>{var T=of(),P=B(T);{var N=k=>{var F=ie(),W=Q(F);Ae(W,17,()=>n(h)[A],Te,(O,M,I,Y)=>{var V=lf();Z(()=>{R(V,"x",n(h)[A][I]),R(V,"y",n(v)[A][I]),R(V,"width",n(m)),R(V,"height",n(p))}),C(O,V)}),C(k,F)};X(P,k=>{n(h)[A].length>0&&k(N)})}Z(()=>nt(T,`fill:${n(L)??""};`)),C(S,T)}),C(y,w)};X(E,y=>{n(_)&&y(z)})}C(r,b),ae()}function Bn(r,e){oe(e,!0);let t=H(e,"show",3,!0),s=H(e,"position",3,"topleft"),l=H(e,"lineColor",19,()=>pt.LEGEND),o=H(e,"lineWidth",3,1),a=H(e,"faceColor",3,"#fff"),c=H(e,"fontSize",3,.85);function d(h){return typeof h!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(h)?h:(console.error('Legend: wrong value of "position" property'),null)}function u(h){if(!h||!Array.isArray(h)||h.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let v=0;v<h.length;v++){const m=h[v];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=mn(m.label),_=p.length===m.label?1:1.4;m.label=p,m.labelHeight=_,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(v+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:pt.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=vn.length||console.error('Legend: parameter "marker" for legend item '+(v+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:pt.PRIMARY)}return h}const f=Et("axes");Ce(()=>{const h=u(e.items),v=d(s());f.setGroupLegend(h&&v?{show:t(),position:s(),items:e.items,lineColor:l(),faceColor:a(),lineWidth:o(),fontSize:c()}:{show:!1,position:null,items:null})}),ae()}function uf(r,e){oe(e,!0);let t=H(e,"show",3,!0),s=H(e,"labels",3,null),l=H(e,"labelColor",19,()=>pt.CLEGEND_LABELS),o=H(e,"fontSize",3,.85);const a=Et("axes");Ce(()=>{a.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:s(),labelColor:l(),fontSize:o()})}),ae()}function df(r,e,t,s){e===void 0&&(e=!0),t===void 0&&(t=!1),s===void 0&&(s=!1);function l(d,u,f,h){if(typeof u=="boolean")return u?d.apply(f,2):ze([h]).rep(d.ncols);if(!Le(u))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(u.length!==d.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return u}const o=l(r,e,br,0),a=l(r,t,ws,1),c=ot.zeros(r.nrows,r.ncols);for(let d=1;d<=r.ncols;d++){const u=r.getcolref(d),f=c.getcolref(d),h=o.v[d-1],v=1/a.v[d-1];for(let m=0;m<r.nrows;m++)f[m]=(u[m]-h)*v}return s?[c,o,a]:c}const ff=r=>r;function vf(r,{delay:e=0,duration:t=400,easing:s=ff}={}){const l=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:s,css:o=>`opacity: ${o*l}`}}var hf=G('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function ia(r,e){oe(e,!0);function t(u){u.key==="Escape"&&e.closeModal()}var s=hf();Ar("keydown",es,t);var l=B(s),o=B(l),a=B(o);a.__click=function(...u){var f;(f=e.closeModal)==null||f.apply(this,u)};var c=j(o,2),d=B(c);gr(d,()=>e.children),Ji(7,s,()=>vf),C(r,s),ae()}rt(["click"]);const mf=[1,1.1,.45,.4],nr={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",test:"#2679B2",alt:"#2679B2",new:"#2679B2"},_r={cal:"#f0f8ff",pv:"#fff8f0",target:"#f0f8ff",test:"#f0f8ff",alt:"#f0f8ff",new:"#f0f8ff"},ca="#a0a0a0",ua="#909090",gn="#909090",da=8,gf=8,bf=8,pf=600;function fa(r,e,t,s){if(!r||!e)return null;const l=r.length;let o=We.zeros(l),a=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;if(s==="log")for(let d=0;d<l;d++){const u=Math.log(1+r[d]/t);o.v[d]=u,a=Math.max(a,u),c=Math.min(c,u)}else for(let d=0;d<l;d++){const u=r[d]/t;o.v[d]=u,a=Math.max(a,u),c=Math.min(c,u)}return{values:o,min:c,max:a}}function va(r,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[r]+", "+(e==="log"?"log(1 + "+r+"/"+r+"0)":r+"/"+r+"0")}function ha(r,e,t,s){const o=e+t,c=mo(r,o)/t,d=-e/t,u=-c/d,f=We.seq(0,u*1,u/100),h=f.apply(v=>v*d+c);return{x:s==="log"?f.apply(v=>Math.log(1+v)):f,y:s==="log"?h.apply(v=>Math.log(1+v)):h}}function _f(r,e,t,s=4){const l=Math.abs(t-e);let o;return l<1?o=Math.min(Math.round(Math.abs(Math.log10(l))+1),s):l<10?o=2:l<100?o=1:o=0,Array.from(r).map(a=>a.toFixed(o).toString())}var wf=G("<!> <!> <!> <!>",1);function cr(r,e){let t=H(e,"whole",3,!1),s=tc(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);na(r,so({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",margins:mf,pngWidth:gf,pngHeight:bf,pngRes:pf},()=>s,{children:(l,o)=>{var a=wf(),c=Q(a);gr(c,()=>e.children);var d=j(c,2);sa(d,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var u=j(d,2);la(u,{showGrid:!0,get label(){return e.yLabel}});var f=j(u,2);oa(f,{}),C(l,a)},$$slots:{default:!0}}))}function yf(r,e){if(r.target.tagName!=="rect"){D(e,-1);return}const t=Array.from(r.target.parentNode.children).indexOf(r.target);if(t<0){D(e,-1);return}n(e)!==t&&D(e,t,!0)}var xf=G("<!> <!> <!>",1),kf=G("<!> <!> <!> <!> <!>",1),Ef=G('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function Hs(r,e){oe(e,!0);let t=H(e,"outliers",19,()=>[]),s=H(e,"getter",3,hc),l=re("residual"),o=re(-1);const a=g(()=>e.model.npred?e.model.npred:e.model.ncols);function c(k){const F=e.model.exclvars&&e.model.exclvars.length>0?Lc(k,e.model.exclvars):k;if(!F.nresp||F.nresp<1)return F.values;const W=F.nresp*F.values.nrows,O=F.values.nrows,M=F.values.ncols-F.nresp;return new ot(F.values.v.subarray(W),O,M)}const d=g(()=>n(h)&&n(o)>=0?n(h).values.v[n(o)]:null),u=g(()=>n(S)&&n(o)>=0?n(S).sel.v[n(o)]:null),f=g(()=>e.model&&n(o)>=0?e.model.varlabels[n(o)]:null),h=g(()=>{if(!e.model)return null;const k=e.model.nresp?e.model.nresp:0,F=ze(e.model.varvalues.filter((q,K)=>K>=k)),W=F.length,O=(F.v[1]-F.v[0])/2,M=(F.v[W-1]-F.v[W-2])/2,I=[F.v[0],F.v[W-1]],Y=[I[0]-O,I[1]+M],V=(I[1]-I[0])/W;return{values:F,lim:Y,width:V,hwidth:V*.5}}),v=g(()=>n(h)?n(h).values.apply(k=>k-n(h).hwidth):null),m=g(()=>{if(!e.dataset||!e.model)return null;const k=c(e.dataset,e.model.exclvars),F=new We(s()(e.model,"mX")),W=new We(s()(e.model,"sX"));return df(k,F,W).t()}),p=g(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new ot(s()(e.model,"P",e.ncomp),n(a),e.ncomp).t():null),_=g(()=>n(m)&&n(p)?n(p).dot(n(m)):null),b=g(()=>n(_)?po(n(p),n(_)):null),E=g(()=>n(b)?n(m).subtract(n(b)):null);let z=g(()=>n(b)?n(b).getcolumn(e.selected+1):null),y=g(()=>n(E)?n(E).getcolumn(e.selected+1):null),w=g(()=>n(m)?n(m).getcolumn(e.selected+1):null),S=g(()=>{if(!n(z)||!n(y)||!n(w))return null;const k=n(l)==="explained"?{all:n(b),sel:n(z),label:"Explained part, TP^T"}:n(l)==="residual"?{all:n(E),sel:n(y),label:"Residuals, E"}:{all:n(m),sel:n(w),label:"Preprocessed data, X"},F=Gr(k.all.v),W=F[1]-F[0],O=[F[0]-W/50,F[1]+W/12],M=We.fill(F[1],k.sel.length);return k.lim=O,k.top=M,k.height=W,k});const L=g(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),A=g(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var T=ie(),P=Q(T);{var N=k=>{ia(k,{get closeModal(){return e.closeModal},children:(F,W)=>{var O=Ef(),M=B(O);M.__click=[yf,o];var I=B(M);cr(I,{get title(){return n(L)},get yLabel(){return n(S).label},get xLabel(){return n(A)},get limY(){return n(S).lim},get limX(){return n(h).lim},fileName:"plot-contributions",children:(q,K)=>{var te=kf(),ee=Q(te);nf(ee,{get xValues(){return n(h).values},get yValues(){return n(S).all},lineColor:"#e0e0e0"});var $=j(ee,2);{var ne=be=>{var ge=ie(),Ee=Q(ge);Ae(Ee,17,t,Te,(fe,we)=>{const de=g(()=>n(S).all.getcolumn(n(we)+1));Kr(fe,{get xValues(){return n(h).values},get yValues(){return n(de)},lineColor:"#ffdd88"})}),C(be,ge)};X($,be=>{t().length>0&&be(ne)})}var ve=j($,2);Kr(ve,{get xValues(){return n(h).values},get yValues(){return n(S).sel},lineColor:"crimson"});var xe=j(ve,2);Ws(xe,{get left(){return n(v)},get top(){return n(S).top},get height(){return n(S).height},get width(){return n(h).width},faceColor:"transparent",borderColor:"transparent"});var ce=j(xe,2);{var _e=be=>{var ge=xf(),Ee=Q(ge);const fe=g(()=>[n(d)]),we=g(()=>[n(S).top.v[0]]),de=g(()=>[n(f)]);aa(Ee,{get xValues(){return n(fe)},get yValues(){return n(we)},get labels(){return n(de)},pos:3,textSize:.85});var Ie=j(Ee,2);const ye=g(()=>[n(d)]),Se=g(()=>[n(u)]);Qd(Ie,{get xValues(){return n(ye)},get yValues(){return n(Se)},faceColor:"crimson",lineColor:"crimson"});var De=j(Ie,2);const jt=g(()=>[n(v).v[n(o)]]),Ge=g(()=>[n(S).top.v[n(o)]]);Ws(De,{get left(){return n(jt)},get top(){return n(Ge)},get height(){return n(S).height},get width(){return n(h).width},faceColor:"#ff000015"}),C(be,ge)};X(ce,be=>{n(o)>=0&&be(_e)})}C(q,te)},$$slots:{default:!0}});var Y=j(M,4),V=B(Y);me(V,{label:"",children:(q,K)=>{et(q,{id:"type",options:["full","explained","residual"],get value(){return n(l)},set value(te){D(l,te,!0)}})},$$slots:{default:!0}}),C(F,O)},$$slots:{default:!0}})};X(P,k=>{n(h)&&n(S)&&k(N)})}C(r,T),ae()}rt(["click"]);var Sf=G('<th class="svelte-8wnifa"> </th>'),Af=G('<td class="svelte-8wnifa"> </td>'),Cf=G('<tr class="svelte-8wnifa"></tr>'),Lf=G('<table class="svelte-8wnifa"><thead><tr class="svelte-8wnifa"></tr></thead><tbody></tbody></table>');function ma(r,e){oe(e,!0);const t=1,s=["xcumexpvar","ycumexpvar"],l=["rmse","r2","slope","bias"];let o=g(()=>{if(!e.res||e.ncomp<0)return null;const u=Object.keys(e.res),f=u.length,h=["",...u];let m=[["#LVs",...Array(f).fill(e.ncomp)]];for(let p of s){let _=[p];for(let b=0;b<f;b++)_.push(e.res[u[b]].stat[p][e.ncomp-1].toFixed(3));m.push(_)}for(let p of l){let _=[p];for(let b=0;b<f;b++){let E=3;const z=e.res[u[b]].stat[p].getcolref(t)[e.ncomp-1];p==="rmse"&&(E=z<1?3:z>100?1:2),_.push(z.toFixed(E))}m.push(_)}return{header:h,rows:m}});var a=ie(),c=Q(a);{var d=u=>{var f=Lf(),h=B(f),v=B(h);Ae(v,21,()=>n(o).header,Te,(p,_)=>{var b=Sf(),E=B(b);Z(()=>he(E,n(_))),C(p,b)});var m=j(h);Ae(m,21,()=>n(o).rows,Te,(p,_)=>{var b=Cf();Ae(b,21,()=>n(_),Te,(E,z)=>{var y=Af(),w=B(y);Z(()=>he(w,n(z))),C(E,y)}),C(p,b)}),C(u,f)};X(c,u=>{n(o)&&u(d)})}C(r,a),ae()}function Yn(r,e,t,s){const l=r.outliers,o=r.exclvars;(!l||!Array.isArray(l))&&(l=[]);const a=e.sep,c=e.values.nrows,d=l.length,u=c-d,f=r.nresp,h=r.nresp_model,v=r.ncomp,m=v,p=Array(m).fill(""),_=v>m?Array(m-v).fill(""):[],b=Array(v).fill(0).map((T,P)=>"LV"+(P+1));function E(T,P){const N=e.objlabels;y+=`
`,y+=[T+": ",...p].join(a)+`
`,y+=["object",...b,..._].join(a)+`
`;const k=r.v.subarray(P,P+v*u);let F=0;for(let W=0;W<c;W++){if(d>0&&l.includes(W)){y+=[N[W],...Array(v).fill("-"),..._].join(a)+`
`;continue}const O=Array(v);for(let M=0;M<v;M++)O[M]=k[M*u+F];y+=[N[W],...O,_].join(a)+`
`,F=F+1}y+=`
`}function z(T){const P=e.objlabels,N=3*v*u+v,k=v*u*h,F=r.v.subarray(N,N+k);let W=0;for(let O=0;O<c;O++){if(d>0&&l.includes(O)){y+=[P[O],...Array(v).fill("-"),..._].join(a)+`
`;continue}const M=Array(v);for(let I=0;I<v;I++)M[I]=F[I*(u*h)+(T-1)*u+W];y+=[P[O],...M,_].join(a)+`
`,W=W+1}y+=`
`}let y="";if(y+=["Number of LVs:",v,...p].join(a)+`
`,y+=["Optinal number of LVs:",s,...p].join(a)+`
`,y+=["Center: ",r.center,...p].join(a)+`
`,y+=["Scale: ",r.scale,...p].join(a)+`
`,l.length>0&&(y+=["Removed outliers: ",l.length,...p].join(a)+`
`),o.length>0&&(y+=["Excluded variables: ",o.length,...p].join(a)+`
`),y+=`
`,f>0){y+=["Variances: ","",...p].join(a)+`
`,y+=["",...b].join(a)+`
`,y+=["xexpvar:",...r.stat.xexpvar].join(a)+`
`,y+=["xcumexpvar",...r.stat.xcumexpvar].join(a)+`
`,y+=["yexpvar: ",...r.stat.yexpvar,..._].join(a)+`
`,y+=["ycumexpvar: ",...r.stat.ycumexpvar,..._].join(a)+`
`,y+=`
`,y+=`
`;for(let T=1;T<=f;T++)y+=["Response variable: "+e.varlabels[T-1],...p].join(a)+`

`,y+=["FoMs:",...b,..._].join(a)+`
`,r.stat&&(y+=["RMSE ",...r.stat.rmse.getcolref(T),..._].join(a)+`
`,y+=["R2",...r.stat.r2.getcolref(T),..._].join(a)+`
`,y+=["Slope",...r.stat.slope.getcolref(T),..._].join(a)+`
`,y+=["Bias",...r.stat.bias.getcolref(T),..._].join(a)+`
`,y+=`
`),y+=["Predictions:",...b,..._].join(a)+`
`,z(T)}else for(let T=1;T<=h;T++)y+=["Response variable: "+e.varlabels[T-1],...p].join(a)+`

`,y+=["Predictions:",...b,..._].join(a)+`
`,z(T);E("X-scores",0),E("Score distances, h",v*u),E("Orthogonal distances, q",v*u*2),r.stat&&(E("Y-scores",3*v*u+v+u*v*f),E("Orthogonal distances, z",4*v*u+v+u*v*f)),e.dec!=="."&&(y=y.replace(/\./g,e.dec)),y=["Data filename:",e.fileName,...p].join(e.sep)+`
`+y;let w=["PLS results ("+t+")","https://mda.tools/pls/",...p].join(e.sep)+`

`;const S=new Blob([w+y],{type:"text/csv"}),L=window.URL.createObjectURL(S),A=document.createElement("a");A.setAttribute("href",L),A.setAttribute("download",`pls-results-${t}.csv`),A.click()}function ga(r,e){r.ncomp_selected=e;const t=new Blob([JSON.stringify(r,dn)],{type:"application/json"}),s=window.URL.createObjectURL(t),l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download","pls-model.json"),l.click()}var Tf=G('<div class="msg-select"> </div>'),zf=G('<div class="msg-select"> </div>'),Nf=G('<div class="msg-select"> </div>'),Pf=G('<div class="msg-select"> </div>'),Rf=G('<div class="selected-buttons svelte-8mh2yv"><!></div>'),Mf=G('<div class="selected-buttons svelte-8mh2yv"><!></div>'),If=G("<!> <!> <!>",1),Ff=()=>switchPlot(i),jf=(r,e,t)=>D(e,n(t),!0),Vf=G("<button> </button>"),Of=G('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!> <!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function Us(r,e){oe(e,!0);let t=H(e,"selobjText",3,"Click to select an object..."),s=H(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),l=H(e,"clearText",3,"Click anywhere to remove selection..."),o=H(e,"params",15),a=Xe({objects:-1,variables:[]}),c=re(Xe(Object.keys(e.plots)[0]));function d(P){a.objects=P}function u(P){a.objects=-1}function f(P){a.variables=P}function h(P){a.variables=[]}let v={objects:{select:d,unselect:u},variables:{select:f,unselect:h},stats:{}},m=g(()=>n(c)?e.plots[n(c)]:null),p=g(()=>n(m)?n(m).component:null);var _=Of(),b=B(_),E=B(b),z=B(E);hs(z,()=>n(p),(P,N)=>{N(P,{get params(){return o()[n(c)]},get callbacks(){return v[n(m).scope]},get selected(){return a[n(m).scope]},get props(){return e.props}})});var y=j(E,2),w=B(y);{var S=P=>{var N=ie(),k=Q(N);{var F=O=>{var M=Tf(),I=B(M);Z(()=>he(I,t())),C(O,M)},W=O=>{var M=zf(),I=B(M);Z(()=>he(I,l())),C(O,M)};X(k,O=>{a[n(m).scope]<0?O(F):O(W,!1)})}C(P,N)};X(w,P=>{n(m).scope==="objects"&&o()[n(c)].plotType!=="l"&&t().length>0&&P(S)})}var L=j(w,2);{var A=P=>{var N=ie(),k=Q(N);{var F=O=>{var M=Nf(),I=B(M);Z(()=>he(I,s())),C(O,M)},W=O=>{var M=Pf(),I=B(M);Z(()=>he(I,l())),C(O,M)};X(k,O=>{a[n(m).scope].length===0?O(F):O(W,!1)})}C(P,N)};X(L,P=>{n(m).scope==="variables"&&o()[n(c)].plotType!=="l"&&s().length>0&&P(A)})}var T=j(b,2);Ae(T,21,()=>Object.keys(e.plots),Te,(P,N)=>{var k=ie(),F=Q(k);{var W=M=>{var I=If(),Y=Q(I);tu(Y,{get title(){return n(m).label},labelWidth:12,get options(){return e.controls[n(c)]},get value(){return o()[n(c)]},set value(ee){o(o()[n(c)]=ee,!0)}});var V=j(Y,2);{var q=ee=>{var $=Rf(),ne=B($);gr(ne,()=>n(m).buttons,()=>a.objects),C(ee,$)};X(V,ee=>{n(m).scope==="objects"&&n(m).buttons&&a.objects>=0&&ee(q)})}var K=j(V,2);{var te=ee=>{var $=Mf(),ne=B($);gr(ne,()=>n(m).buttons,()=>a.variables),C(ee,$)};X(K,ee=>{n(m).scope==="variables"&&n(m).buttons&&a.variables.length>0&&ee(te)})}C(M,I)},O=M=>{var I=Vf();I.__keydown=[Ff],I.__click=[jf,c,N];var Y=B(I);Z(()=>{ut(I,1,`plot-selector plot-selector-${n(N)??""}`,"svelte-8mh2yv"),he(Y,e.plots[n(N)].label)}),C(M,I)};X(F,M=>{n(m)&&n(c)===n(N)?M(W):M(O,!1)})}C(P,k)}),C(r,_),ae()}rt(["keydown","click"]);function ba(r,e){!e.callbacks||!e.callbacks.select||zr(r,r.target.tagName,e.callbacks.select)}function qf(r,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var Df=le("<text> </text>"),Bf=le('<g class="series series-textlabels"></g>'),Yf=le('<g class="series series-line"><polyline class="line"></polyline></g>'),Wf=le("<rect></rect>"),Hf=le('<g class="series series-bar"></g>'),Uf=le("<text> </text>"),Xf=le('<g class="series series-points series-points1"></g>'),Gf=le('<g class="series series-points series-points1"><text> </text></g>'),Kf=le('<g class="series series-bar"><rect></rect></g>'),Jf=le('<g class="series series-text"><text> </text></g>'),Qf=le('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),Zf=le("<!><!><!><!><!>",1);function Qt(r,e){oe(e,!0);let t=H(e,"shortenLabels",3,!0),s=H(e,"lineWidth",3,1),l=H(e,"markerSize",3,null),o=H(e,"markerWidth",3,2),a=H(e,"pch",3,"●"),c=H(e,"colors",3,void 0),d=H(e,"mainColor",19,()=>nr.cal),u=H(e,"faceColor",3,null),f=H(e,"selected",19,()=>-1),h=H(e,"xRange",15),v=H(e,"yRange",15);const m=Et("axes"),p=g(()=>Ct(e.xValues,"PlotSeries")),_=g(()=>n(p)?Ct(e.yValues,"PlotSeries",n(p).length):null);Ce(()=>{h(n(p)?Gr(n(p)):null),v(n(_)?Gr(n(_)):null)});const b=g(()=>u()===null?e.plotType==="p"?"transparent":"white":u()),E=g(()=>l()?l():e.plotType==="p"?1:.85),z=g(()=>Vs[m.scales().plot]),y=g(()=>tt([0],m.tY())[0]),w=g(()=>hn([.8],m.tX())[0]),S=g(()=>n(w)/2),L=g(()=>n(z));let A=g(()=>e.plotType==="l"||e.plotType==="b"?Ds(n(p),n(_),m.tX(),m.tY()):null),T=g(()=>n(p)?tt(n(p),m.tX()):null),P=g(()=>n(_)?tt(n(_),m.tY()):null),N=g(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(K=>K.slice(0,da)):e.labels:null),k=g(()=>c()&&c().length===n(p).length?c():Array(n(p).length).fill(d()));const F=g(()=>`font-size:${n(E)}em;fill:${n(b)};cursor:default;text-anchor:middle;stroke-width:${o()}px;user-select:none;`),W=`font-size:0.85em;fill:${ca};cursor:default;text-anchor:middle;stroke:${ca};stroke-width:0.1px;user-select:none;`,O="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",M=`fill:transparent;stroke-width: ${s()}px;`,I=`stroke-width:${s()}px;`;var Y=ie(),V=Q(Y);{var q=K=>{var te=Zf(),ee=Q(te);{var $=fe=>{var we=Bf();nt(we,W),Ae(we,21,()=>n(T),Te,(de,Ie,ye)=>{var Se=Df(),De=B(Se);Z(()=>{R(Se,"x",n(T)[ye]),R(Se,"y",n(P)[ye]),R(Se,"dy",n(_).v[ye]<0?n(L):-n(L)),he(De,n(N)[ye])}),C(de,Se)}),C(fe,we)};X(ee,fe=>{e.showLabels&&n(N)&&fe($)})}var ne=j(ee);{var ve=fe=>{var we=Yf();nt(we,M);var de=B(we);Z(()=>{R(de,"points",n(A)),R(de,"stroke",d())}),C(fe,we)};X(ne,fe=>{(e.plotType==="l"||e.plotType==="b")&&fe(ve)})}var xe=j(ne);{var ce=fe=>{var we=Hf();nt(we,I),we.__click=[ba,e],Ae(we,21,()=>n(T),Te,(de,Ie,ye)=>{var Se=Wf();Z(()=>{R(Se,"x",n(T)[ye]-n(S)),R(Se,"y",n(_).v[ye]<0?n(y):n(P)[ye]),R(Se,"fill",n(k)[ye]),R(Se,"width",n(w)),R(Se,"height",n(_).v[ye]<0?n(P)[ye]-n(y):n(y)-n(P)[ye])}),C(de,Se)}),C(fe,we)};X(xe,fe=>{e.plotType==="h"&&fe(ce)})}var _e=j(xe);{var be=fe=>{var we=Xf();we.__click=[ba,e],Ae(we,21,()=>n(T),Te,(de,Ie,ye)=>{var Se=Uf(),De=B(Se);Z(()=>{R(Se,"x",n(T)[ye]),R(Se,"y",n(P)[ye]),R(Se,"fill",u()),R(Se,"stroke",n(k)[ye]),he(De,a())}),C(de,Se)}),Z(()=>nt(we,n(F))),C(fe,we)};X(_e,fe=>{(e.plotType==="p"||e.plotType==="b")&&fe(be)})}var ge=j(_e);{var Ee=fe=>{var we=Qf(),de=Q(we);R(de,"x",0),R(de,"y",0),de.__click=[qf,e];var Ie=j(de);{var ye=Ge=>{var lt=Gf();nt(lt,O);var Qe=B(lt),Yt=B(Qe);Z(()=>{R(Qe,"x",n(T)[f()]),R(Qe,"y",n(P)[f()]),R(Qe,"stroke",n(k)[f()]),he(Yt,a())}),C(Ge,lt)},Se=Ge=>{var lt=Kf();nt(lt,I);var Qe=B(lt);Z(()=>{R(Qe,"stroke",n(k)[f()]),R(Qe,"fill",n(k)[f()]),R(Qe,"x",n(T)[f()]-n(S)),R(Qe,"y",n(_).v[f()]<0?n(y):n(P)[f()]),R(Qe,"width",n(w)),R(Qe,"height",n(_).v[f()]<0?n(P)[f()]-n(y):n(y)-n(P)[f()])}),C(Ge,lt)};X(Ie,Ge=>{e.plotType!=="h"?Ge(ye):Ge(Se,!1)})}var De=j(Ie);{var jt=Ge=>{var lt=Jf();nt(lt,W);var Qe=B(lt);R(Qe,"stroke",ua),R(Qe,"fill",ua);var Yt=B(Qe);Z(()=>{R(Qe,"x",n(T)[f()]),R(Qe,"y",n(P)[f()]),R(Qe,"dy",n(_).v[f()]<0?n(L):-n(L)),he(Yt,n(N)[f()])}),C(Ge,lt)};X(De,Ge=>{e.showLabels&&n(N)&&n(N).length>0&&Ge(jt)})}C(fe,we)};X(ge,fe=>{f()>=0&&fe(Ee)})}C(K,te)};X(V,K=>{n(T)&&n(P)&&K(q)})}C(r,Y),ae()}rt(["click"]);var $f=G("<!> <!> <!> <!>",1);function pa(r,e){oe(e,!0);let t=g(()=>e.props?e.props.res:null),s=g(()=>n(t)?Object.keys(n(t)):null),l=g(()=>e.params&&e.params.resID&&n(s)?e.params.resID==="both"?n(s):[e.params.resID]:null),o=g(()=>n(l)?n(t)[n(l)[0]]:null);const a={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"},c=g(()=>e.params.varSet==="X"?"x":"y"),d=g(()=>e.params.varForm==="cumulative"?"cum":""),u=g(()=>e.params.varType==="explained"?"exp":"res"),f=g(()=>n(d)+n(u)+"var"),h=g(()=>n(c)+n(d)+n(u)+"var"),v=g(()=>n(f)?a[n(f)]+" ("+e.params.varSet+")":""),m=g(()=>n(o).ncomp>1?1-n(o).ncomp*.065:-.1),p=g(()=>n(o).ncomp>1?n(o).ncomp*1.065:2.1),_=g(()=>[n(m),n(p)]),b=g(()=>n(o)?n(o).stat.components:null),E=g(()=>n(l)?n(l).map(T=>{const P=n(t)[T].stat[n(h)];return{yValues:ze(P),labels:Array.from(P).map(N=>N.toFixed(N<.1?3:2)),faceColor:_r[T],mainColor:nr[T]}}):null),z=g(()=>n(E)?Ft(n(E).map(T=>Math.min(-.05,Ft(T.yValues)))):0),y=g(()=>[n(z)*1.1,1.1]),w=g(()=>n(E)?n(l).map(T=>({id:T,label:T,point:{marker:1,faceColor:_r[T],lineColor:nr[T],markerSize:.85,lineWidth:1.5}})):null);var S=ie(),L=Q(S);{var A=T=>{const P=g(()=>"plot-"+n(h));cr(T,{get title(){return n(v)},get limX(){return n(_)},get limY(){return n(y)},xLabel:"Number of LVs",yLabel:"Variance",get fileName(){return n(P)},whole:!0,children:(N,k)=>{var F=$f(),W=Q(F);{var O=q=>{const K=g(()=>[e.props.ncomp]),te=g(()=>[e.props.ncomp]),ee=g(()=>[n(y)[0]]),$=g(()=>[n(y)[1]]);Nr(q,{get xStart(){return n(K)},get xEnd(){return n(te)},get yStart(){return n(ee)},get yEnd(){return n($)},lineColor:"#a0a0a0"})};X(W,q=>{e.props.ncomp&&q(O)})}var M=j(W,2);Ae(M,17,()=>n(E),Te,(q,K)=>{Qt(q,{get xValues(){return n(b)},get yValues(){return n(K).yValues},get labels(){return n(K).labels},get faceColor(){return n(K).faceColor},get mainColor(){return n(K).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var I=j(M,2);{var Y=q=>{var K=ie(),te=Q(K);Ae(te,17,()=>n(E),Te,(ee,$)=>{const ne=g(()=>[n(b)[e.props.ncomp-1]]),ve=g(()=>[n($).yValues.v[e.props.ncomp-1]]);Qt(ee,{get xValues(){return n(ne)},get yValues(){return n(ve)},get faceColor(){return n($).faceColor},get mainColor(){return n($).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},markerSize:1,lineWidth:1.5,markerWidth:3})}),C(q,K)};X(I,q=>{e.props.ncomp&&q(Y)})}var V=j(I,2);Bn(V,{get items(){return n(w)}}),C(N,F)},$$slots:{default:!0}})};X(L,T=>{n(b)&&n(E)&&T(A)})}C(r,S),ae()}var ev=G("<!> <!> <!> <!>",1);function _a(r,e){oe(e,!0);const t={rmse:"RMSE",r2:"R^2",slope:"Slope"};let s=g(()=>e.props?e.props.res:null),l=g(()=>n(s)?Object.keys(n(s)):null),o=g(()=>e.params&&e.params.resID&&n(l)?e.params.resID==="both"?n(l):[e.params.resID]:null),a=g(()=>n(o)?n(s)[n(o)[0]]:null),c=g(()=>e.params?t[e.params.fom]:""),d=g(()=>e.params?t[e.params.fom]+" ("+n(a).varlabels[e.params.resp-1]+")":""),u=g(()=>n(a).ncomp>1?1-n(a).ncomp*.065:-.1),f=g(()=>n(a).ncomp>1?n(a).ncomp*1.065:2.1),h=g(()=>[n(u),n(f)]),v=g(()=>n(a)?n(a).stat.components:null),m=g(()=>{if(!n(o))return null;let w=0,S=Number.NEGATIVE_INFINITY,L=[];for(let A of n(o)){const T=n(s)[A].stat[e.params.fom].getcolref(e.params.resp);w=Math.min(w,Ft(T)),S=Math.max(S,Bt(T)),L.push({yValues:ze(T),labels:Array.from(T).map(P=>P.toFixed(P<.1?3:2)),faceColor:_r[A],mainColor:nr[A]})}return{yMin:w,yMax:S,values:L}}),p=g(()=>n(m)?n(o).map(w=>({id:w,label:w,point:{marker:1,faceColor:_r[w],lineColor:nr[w],markerSize:.85,lineWidth:1.5}})):null);const _=g(()=>n(m)?(n(m).yMax-n(m).yMin)*.05:0),b=g(()=>n(m)?[n(m).yMin-n(_),n(m).yMax+4*n(_)]:[0,1]);var E=ie(),z=Q(E);{var y=w=>{const S=g(()=>"plot-"+e.params.fom);cr(w,{get title(){return n(d)},get limX(){return n(h)},get limY(){return n(b)},get yLabel(){return n(c)},xLabel:"Number of LVs",get fileName(){return n(S)},whole:!0,children:(L,A)=>{var T=ev(),P=Q(T);{var N=M=>{const I=g(()=>[e.props.ncomp]),Y=g(()=>[e.props.ncomp]),V=g(()=>[n(b)[0]]),q=g(()=>[n(b)[1]]);Nr(M,{get xStart(){return n(I)},get xEnd(){return n(Y)},get yStart(){return n(V)},get yEnd(){return n(q)},lineColor:"#a0a0a0"})};X(P,M=>{e.props.ncomp&&M(N)})}var k=j(P,2);Ae(k,17,()=>n(m).values,Te,(M,I)=>{Qt(M,{get xValues(){return n(v)},get yValues(){return n(I).yValues},get labels(){return n(I).labels},get faceColor(){return n(I).faceColor},get mainColor(){return n(I).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var F=j(k,2);{var W=M=>{var I=ie(),Y=Q(I);Ae(Y,17,()=>n(m).values,Te,(V,q)=>{const K=g(()=>[n(v)[e.props.ncomp-1]]),te=g(()=>[n(q).yValues.v[e.props.ncomp-1]]);Qt(V,{get xValues(){return n(K)},get yValues(){return n(te)},get faceColor(){return n(q).faceColor},get mainColor(){return n(q).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},markerSize:1,lineWidth:1.5,markerWidth:3})}),C(M,I)};X(F,M=>{e.props.ncomp&&M(W)})}var O=j(F,2);Bn(O,{get items(){return n(p)}}),C(L,T)},$$slots:{default:!0}})};X(z,w=>{n(v)&&n(m)&&w(y)})}C(r,E),ae()}var tv=G("<!> <!>",1),rv=G("<!> <!> <!> <!>",1);function Xs(r,e){oe(e,!0);const t=g(()=>e.props?e.props.res:null),s=g(()=>n(t)?Object.keys(n(t)):null),l=g(()=>e.params&&e.params.resID&&n(s)?e.params.resID==="both"?n(s):[e.params.resID]:null),o=g(()=>n(l)&&n(t)[n(l)[0]]?n(t)[n(l)[0]]:null),a=g(()=>n(o)&&n(o).Yref),c=g(()=>n(o)?"Predictions for "+n(o).varlabels[e.params.resp-1]+" (A = "+e.props.ncomp+")":""),d=g(()=>n(a)?"Reference y-values":"Objects"),u=g(()=>{if(!n(o)||!n(o).stat||!e.params.showStat||e.params.resID==="both")return null;const E=e.params.resID,z=n(t)[E].stat.rmse.getcolref(e.params.resp)[e.props.ncomp-1],y=n(t)[E].stat.r2.getcolref(e.params.resp)[e.props.ncomp-1],w=n(t)[E].stat.slope.getcolref(e.params.resp)[e.props.ncomp-1];return'<tspan x="5em" dy="1.5em">RMSE: '+z.toFixed(2)+'</tspan><tspan x="5em" dy="1.5em">R2: '+y.toFixed(3)+'</tspan><tspan x="5em" dy="1.5em">Slope: '+w.toFixed(3)+"</tspan></tspan>"}),f=g(()=>{if(!n(l)||!n(o))return null;let E=e.params.resp?Number.POSITIVE_INFINITY:null,z=e.params.resp?Number.NEGATIVE_INFINITY:null,y=[],w="";for(let S of n(l)){const L=n(t)[S],A=L.Yref?L.Yref.getcolref(e.params.resp):L.objindices.map(k=>k+1),T=Nt(L,"Yp",e.props.ncomp,e.params.resp),P=io(A,T)/ys(A),N=br(T)-P*br(A);E=Math.min(E,Ft(A),Ft(T)),z=Math.max(z,Bt(A),Bt(T)),y.push({xValues:ze(A),yValues:ze(T),lineX:[E,z],lineY:[N+P*E,N+P*z],labels:e.params.showLabels==="labels"?L.objlabels:_f(T,E,z),faceColor:_r[S]+"40",mainColor:nr[S],stats:w})}return{vMin:E,vMax:z,values:y}});let h=g(()=>n(f)?n(l).map(E=>({id:E,label:E,point:{marker:1,faceColor:_r[E],lineColor:nr[E],markerSize:.85,lineWidth:1.5}})):null);const v=g(()=>n(f)?(n(f).vMax-n(f).vMin)*.075:null),m=g(()=>n(v)?[n(f).vMin-n(v),n(f).vMax+n(v)]:[0,1]);var p=ie(),_=Q(p);{var b=E=>{cr(E,{get title(){return n(c)},get xLabel(){return n(d)},get limX(){return n(m)},get limY(){return n(m)},yLabel:"Predicted y-values",fileName:"plot-predictions",get onclick(){return e.callbacks.unselectObject},children:(z,y)=>{var w=rv(),S=Q(w);{var L=k=>{Kr(k,{get xValues(){return n(m)},get yValues(){return n(m)},lineColor:"#d0d0d0"})};X(S,k=>{n(a)&&k(L)})}var A=j(S,2);Ae(A,17,()=>n(f).values,Te,(k,F)=>{var W=tv(),O=Q(W);{var M=q=>{Kr(q,{get xValues(){return n(F).lineX},get yValues(){return n(F).lineY},get lineColor(){return n(F).mainColor}})};X(O,q=>{n(a)&&q(M)})}var I=j(O,2);const Y=g(()=>e.params.showLabels!=="hide"),V=g(()=>n(a)?"p":"h");Qt(I,{get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return n(F).xValues},get yValues(){return n(F).yValues},get faceColor(){return n(F).faceColor},get mainColor(){return n(F).mainColor},get labels(){return n(F).labels},get showLabels(){return n(Y)},get plotType(){return n(V)}}),C(k,W)});var T=j(A,2);{var P=k=>{const F=g(()=>[n(m)[0]]),W=g(()=>[n(m)[1]-n(v)]);aa(k,{textSize:.85,pos:0,get xValues(){return n(F)},get yValues(){return n(W)},get labels(){return n(u)}})};X(T,k=>{n(u)&&k(P)})}var N=j(T,2);Bn(N,{get items(){return n(h)},position:"bottomright"}),C(z,w)},$$slots:{default:!0}})};X(_,E=>{n(f)&&E(b)})}C(r,p),ae()}var nv=G("<!> <!>",1),sv=G("<!> <!> <!>",1);function Gs(r,e){oe(e,!0);let t=g(()=>e.props?e.props.model:null),s=g(()=>e.props?e.props.res:null),l=g(()=>n(s)?Object.keys(n(s)):null),o=g(()=>e.params&&e.params.resID&&n(l)?e.params.resID==="both"?n(l):[e.params.resID]:null),a=g(()=>n(o)?n(s)[n(o)[0]]:null);const c="Scores";function d(z,y){return z==="X"?"X":z==="Y"?"Y":y==="x"?"X":"Y"}function u(z,y,w,S){return(z==="X"||z==="Y")&&S==="x"?y:w}function f(z,y){const w=d(z.varSet,y),S=u(z.varSet,z.comp1,z.comp2,y),L=n(t).stat[w.toLocaleLowerCase()+"expvar"][S-1]*100;return w+"-scores (LV"+S+", "+L.toFixed(L>1?1:2)+"%)"}let h=g(()=>{if(!n(o)||!n(a))return null;let z=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,S=Number.NEGATIVE_INFINITY,L=[];for(let k of n(o)){const F=n(s)[k],W=e.params.varSet==="X"|e.params.varSet==="XY"?Nt(F,"xscores",e.params.varSet==="XY"?e.params.comp2:e.params.comp1):Nt(F,"yscores",e.params.comp1),O=e.params.varSet==="X"?Nt(F,"xscores",e.params.comp2):Nt(F,"yscores",e.params.comp2);z=Math.min(z,Ft(W)),y=Math.min(y,Ft(O)),w=Math.max(w,Bt(W)),S=Math.max(S,Bt(O)),L.push({xValues:ze(W),yValues:ze(O),labels:F.objlabels,faceColor:_r[k]+"40",mainColor:nr[k]})}const A=(w-z)*.05,T=(S-y)*.05,P=[z-A,w+A],N=[y-T,S+T];return{limX:P,limY:N,values:L}});const v=g(()=>f(e.params,"x")),m=g(()=>f(e.params,"y"));let p=g(()=>n(h)?n(o).map(z=>({id:z,label:z,point:{marker:1,faceColor:_r[z],lineColor:nr[z],markerSize:.85,lineWidth:1.5}})):null);var _=ie(),b=Q(_);{var E=z=>{const y=g(()=>"plot-"+e.params.varSet.toLowerCase()+"scores");cr(z,{title:c,get xLabel(){return n(v)},get yLabel(){return n(m)},get limX(){return n(h).limX},get limY(){return n(h).limY},get fileName(){return n(y)},get onclick(){return e.callbacks.unselectObject},children:(w,S)=>{var L=sv(),A=Q(L);{var T=k=>{var F=nv(),W=Q(F);const O=g(()=>[n(h).limY[0]]),M=g(()=>[n(h).limY[1]]);Nr(W,{xStart:[0],xEnd:[0],get yStart(){return n(O)},get yEnd(){return n(M)},lineColor:gn});var I=j(W,2);const Y=g(()=>[n(h).limX[0]]),V=g(()=>[n(h).limX[1]]);Nr(I,{yStart:[0],yEnd:[0],get xStart(){return n(Y)},get xEnd(){return n(V)},lineColor:gn}),C(k,F)};X(A,k=>{e.props.ncomp&&k(T)})}var P=j(A,2);Ae(P,17,()=>n(h).values,Te,(k,F)=>{Qt(k,{get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return n(F).xValues},get yValues(){return n(F).yValues},get faceColor(){return n(F).faceColor},get mainColor(){return n(F).mainColor},get labels(){return n(F).labels},get showLabels(){return e.params.showLabels},plotType:"p",lineWidth:1.5})});var N=j(P,2);Bn(N,{get items(){return n(p)}}),C(w,L)},$$slots:{default:!0}})};X(b,z=>{n(h)&&z(E)})}C(r,_),ae()}var lv=G("<!> <!> <!>",1);function ov(r,e){oe(e,!0);let t=g(()=>e.props?e.props.model:null);function s(A,T,P){return!A||!T||T<1||T>A.ncomp?null:new We(xt(A,P,T))}let l=re(void 0),o=re(void 0);const a=g(()=>n(t)?ze(n(t).xvarvalues):null),c=g(()=>n(t)?ze(n(t).xvarindices):null),d=g(()=>n(t)?n(t).xvarlabels:null),u=g(()=>n(t)?s(n(t),e.params.comp2,e.params.statType):null),f=g(()=>n(t)?s(n(t),e.params.comp1,e.params.statType):null),h=g(()=>!n(t)||!e.params.comp1?null:e.params.plotType==="p"?{values:n(f),label:`LV${e.params.comp1}`}:e.params.plotType==="l"&&n(a)?{values:n(a),label:n(t).varvaluesName+(n(t).varvaluesUnits?", "+n(t).varvaluesUnits:"")}:{values:n(c),label:"Predictors"}),v=g(()=>n(h)?n(h).values:null),m=g(()=>n(h)?n(h).label:null),p=g(()=>n(u)),_=g(()=>`LV${e.params.comp2}`),b=g(()=>{if(n(o)&&n(o)[0]<Number.POSITIVE_INFINITY&&n(o)[1]>Number.NEGATIVE_INFINITY){const A=(n(o)[1]-n(o)[0])*.1;return[n(o)[0]-2*A,n(o)[1]+A]}else return[0,1]}),E=g(()=>{if(n(l)&&n(l)[0]<Number.POSITIVE_INFINITY&&n(l)[1]>Number.NEGATIVE_INFINITY){const A=Math.abs((n(l)[1]-n(l)[0])*.1);return e.params.plotType==="l"&&n(t).varrev?[n(l)[1]+A,n(l)[0]-A]:[n(l)[0]-A,n(l)[1]+A]}else return[0,1]}),z=g(()=>e.params.statType==="xloadings"?"X-loadings":"Weights"),y=g(()=>"plot-"+e.params.statType);var w=ie(),S=Q(w);{var L=A=>{cr(A,{get xLabel(){return n(m)},get yLabel(){return n(_)},get title(){return n(z)},get fileName(){return n(y)},get limX(){return n(E)},get limY(){return n(b)},children:(T,P)=>{var N=lv(),k=Q(N);const F=g(()=>[n(E)[0]]),W=g(()=>[n(E)[1]]);Nr(k,{get xStart(){return n(F)},get xEnd(){return n(W)},yStart:[0],yEnd:[0],lineColor:gn});var O=j(k,2);{var M=Y=>{const V=g(()=>[n(b)[0]]),q=g(()=>[n(b)[1]]);Nr(Y,{xStart:[0],xEnd:[0],get yStart(){return n(V)},get yEnd(){return n(q)},lineColor:gn})};X(O,Y=>{e.params.plotType==="p"&&Y(M)})}var I=j(O,2);Qt(I,{get xValues(){return n(v)},get yValues(){return n(p)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return n(d)},shortenLabels:!1,get xRange(){return n(l)},set xRange(Y){D(l,Y,!0)},get yRange(){return n(o)},set yRange(Y){D(o,Y,!0)}}),C(T,N)},$$slots:{default:!0}})};X(S,A=>{n(v)&&n(p)&&A(L)})}C(r,w),ae()}var av=G("<!> <!> <!>",1);function Ks(r,e){oe(e,!0);let t=g(()=>e.props&&e.props.model?e.props.model:null),s=g(()=>e.props&&e.props.res?e.props.res:null),l=g(()=>n(s)?Object.keys(n(s)):null),o=g(()=>e.params&&e.params.resID&&n(l)?e.params.resID==="both"?n(l):[e.params.resID]:null);const a="#909090",c=g(()=>n(t)?e.params.limType==="classic"?{h:xt(n(t),"cNh"),q:xt(n(t),"cNq"),z:xt(n(t),"cNz")}:{h:xt(n(t),"rNh"),q:xt(n(t),"rNq"),z:xt(n(t),"rNz")}:null),d=g(()=>n(t)?e.params.limType==="classic"?{h:xt(n(t),"ch0"),q:xt(n(t),"cq0"),z:xt(n(t),"cz0")}:{h:xt(n(t),"rh0"),q:xt(n(t),"rq0"),z:xt(n(t),"rz0")}:null),u=g(()=>n(c)?{h:n(c).h[e.props.ncomp-1],q:n(c).q[e.props.ncomp-1],z:n(c).z[e.props.ncomp-1]}:null),f=g(()=>n(d)?{h:n(d).h[e.props.ncomp-1],q:n(d).q[e.props.ncomp-1],z:n(d).z[e.props.ncomp-1]}:null),h=g(()=>n(u)?e.params.distType==="h/q"?n(u).h:n(u).h+n(u).q:null),v=g(()=>n(u)?e.params.distType==="h/q"?n(u).q:n(u).z:null),m=g(()=>n(f)?e.params.distType==="h/q"?n(f).h:n(u).h+n(u).q:null),p=g(()=>n(f)?e.params.distType==="h/q"?n(f).q:n(f).z:null),_=g(()=>e.params.alpha?1-e.params.alpha/100:.95),b=g(()=>e.params.gamma?1-e.params.gamma/100:.99);let E=g(()=>n(u)?ha(n(_),n(h),n(v),e.params.transType):null),z=g(()=>n(u)?ha(Math.pow(n(b),1/n(t).nrows),n(h),n(v),e.params.transType):null);const y=g(()=>{if(!n(s)||!n(u)||!n(f))return null;let O=Number.POSITIVE_INFINITY,M=Number.POSITIVE_INFINITY,I=Number.NEGATIVE_INFINITY,Y=Number.NEGATIVE_INFINITY;const V=[];for(let q of n(o)){const K=n(s)[q];if(!K)return null;const te=Nt(K,"hdist",e.props.ncomp),ee=Nt(K,"qdist",e.props.ncomp),$=Nt(K,"zdist",e.props.ncomp),ne=e.params.distType==="h/q"?te:te.map((_e,be)=>_e/n(f).h*n(u).h+ee[be]/n(f).q*n(u).q),ve=e.params.distType==="h/q"?ee:$,xe=fa(ne,n(h),n(m),e.params.transType),ce=fa(ve,n(v),n(p),e.params.transType);O=Math.min(O,xe.min),M=Math.min(M,ce.min),I=Math.max(I,xe.max),Y=Math.max(Y,ce.max),V.push({xValues:xe.values,yValues:ce.values,mainColor:nr[q],labels:K.objlabels.map(_e=>_e.slice(0,da))})}return{values:V,xMin:O,xMax:I,yMin:M,yMax:Y}});let w=g(()=>"Distances (A = "+e.props.ncomp+")"),S=g(()=>va(e.params.distType==="h/q"?"h":"f",e.params.transType)),L=g(()=>va(e.params.distType==="h/q"?"q":"z",e.params.transType)),A=re(void 0),T=re(void 0),P=g(()=>{if(!n(y))return[0,1];const O=Math.max(n(y).xMax,n(z).x.v[n(z).x.v.length-1]);return[-.02*(O-n(y).xMin),1.05*O]}),N=g(()=>{if(!n(y))return[0,1];const O=Math.max(n(y).yMax,n(z).y.v[0]);return[-.02*(O-n(y).yMin),(1.05+.1*(e.params.colorBy!=="none"))*O]});var k=ie(),F=Q(k);{var W=O=>{cr(O,{get title(){return n(w)},get limX(){return n(P)},get limY(){return n(N)},get xLabel(){return n(S)},get yLabel(){return n(L)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(M,I)=>{var Y=av(),V=Q(Y);{var q=$=>{Kr($,{get xValues(){return n(E).x},get yValues(){return n(E).y},lineColor:a,lineType:2})};X(V,$=>{n(E)&&$(q)})}var K=j(V,2);{var te=$=>{Kr($,{get xValues(){return n(z).x},get yValues(){return n(z).y},lineColor:a,lineType:3})};X(K,$=>{n(z)&&$(te)})}var ee=j(K,2);Ae(ee,17,()=>n(y).values,Te,($,ne)=>{Qt($,{get selected(){return e.selected},get callbacks(){return e.callbacks},get labels(){return n(ne).labels},get mainColor(){return n(ne).mainColor},get xValues(){return n(ne).xValues},get yValues(){return n(ne).yValues},plotType:"p",get showLabels(){return e.params.showLabels},get xRange(){return n(A)},set xRange(ve){D(A,ve,!0)},get yRange(){return n(T)},set yRange(ve){D(T,ve,!0)}})}),C(M,Y)},$$slots:{default:!0}})};X(F,O=>{n(y)&&O(W)})}C(r,k),ae()}var iv=G("<!> <!>",1);function cv(r,e){oe(e,!0);let t=g(()=>e.props?e.props.model:null),s=g(()=>n(t)&&e.props.ncomp>0?n(t).coeffs.subarray((e.props.ncomp-1)*n(t).npred*n(t).nresp,(e.props.ncomp-1)*n(t).npred*n(t).nresp+n(t).npred*n(t).nresp):null),l=g(()=>n(s)?new ot(n(s),n(t).npred,n(t).nresp):null);const o=g(()=>n(t)?ze(n(t).xvarvalues):null),a=g(()=>n(t)?ze(n(t).xvarindices):null),c=g(()=>n(t)?n(t).xvarlabels:null),d=g(()=>n(t)?n(t).varvaluesName+(n(t).varvaluesUnits?", "+n(t).varvaluesUnits:""):""),u=g(()=>e.params.plotType==="h"?n(a):n(o)),f=g(()=>n(l)?n(l).getcolumn(e.params.resp):null),h=g(()=>e.params.plotType==="h"?"Predictors":n(d)),v=g(()=>e.params.plotType==="h"&&n(u).length<20?[.5,n(u).length+.5]:n(u)?an(n(u),.05):[0,1]),m=g(()=>n(f)?an(n(f),.075):[0,1]),p=g(()=>"Regression coefficients (A = "+e.props.ncomp+")"),_="Coefficients";var b=ie(),E=Q(b);{var z=y=>{const w=g(()=>e.params.plotType==="h");cr(y,{get xLabel(){return n(h)},yLabel:_,get limX(){return n(v)},get limY(){return n(m)},get title(){return n(p)},get whole(){return n(w)},fileName:"plot-regcoeffs",children:(S,L)=>{var A=iv(),T=Q(A);const P=g(()=>[n(v)[0]]),N=g(()=>[n(v)[1]]);Nr(T,{get xStart(){return n(P)},get xEnd(){return n(N)},yStart:[0],yEnd:[0],lineColor:gn});var k=j(T,2);Qt(k,{get xValues(){return n(u)},get yValues(){return n(f)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return n(c)},shortenLabels:!1}),C(S,A)},$$slots:{default:!0}})};X(E,y=>{n(u)&&n(f)&&y(z)})}C(r,b),ae()}var uv=G("<!> <!> <!>",1),dv=G('<div class="svelte-17oamay"><!></div>');function fv(r,e){oe(e,!0);let t=g(()=>!0),s=re(!1),l=re(null),o=re(null),a=re(null),c=re(null);const d=g(()=>n(l)!==null&&n(a)!==null?Math.min(n(l),n(a)):null),u=g(()=>n(o)!==null&&n(c)!==null?Math.max(n(o),n(c)):null),f=g(()=>n(l)!==null&&n(a)!==null?Math.abs(n(l)-n(a)):null),h=g(()=>n(o)!==null&&n(c)!==null?Math.abs(n(o)-n(c)):null),v=g(()=>e.props?e.props.model:null),m=g(()=>e.props&&e.props.ncomp>0?e.props.ncomp:1),p=g(()=>n(v)&&n(m)>0?(n(m)-1)*n(v).npred*n(v).nresp:null),_=g(()=>n(p)!==null?n(p)+n(v).npred*n(v).nresp:null),b=g(()=>n(_)!==null?new ot(n(v).sr.subarray(n(p),n(_)),n(v).npred,n(v).nresp):null),E=g(()=>n(_)!==null?new ot(n(v).vip.subarray(n(p),n(_)),n(v).npred,n(v).nresp):null),z=g(()=>n(v)?ze(n(v).xvarvalues):null),y=g(()=>n(v)?ze(n(v).xvarindices):null),w=g(()=>n(v)?n(v).xvarlabels:null),S=g(()=>n(z)&&n(y)&&n(E)?{values:n(z),indices:n(y),vip:n(E).getcolumn(e.params.resp)}:null),L=g(()=>n(E)&&n(b)?{vip:n(E).getcolumn(e.params.resp),selratio:n(b).getcolumn(e.params.resp)}:null),A=g(()=>n(v)?{values:n(v).varvaluesName+(n(v).varvaluesUnits?", "+n(v).varvaluesUnits:""),indices:"Predictors",vip:"VIP scores"}:null),T=g(()=>n(v)?{vip:"VIP scores",selratio:"Selectivity ratio"}:null),P=g(()=>n(S)?n(S)[e.params.xset]:null),N=g(()=>n(L)?n(L)[e.params.yset]:null),k=g(()=>n(A)?n(A)[e.params.xset]:null),F=g(()=>n(T)?n(T)[e.params.yset]:null),W=g(()=>"Variable importance (A = "+n(m)+")"),O=g(()=>n(P)?an(n(P),.05):[0,1]),M=g(()=>n(N)?an(n(N),.075):[0,1]),I=g(()=>n(v)?n(v).npred<30?1:n(v).npred>200?.4:.6:1),Y=g(()=>e.selected&&e.selected.length>0?ze(e.selected.map(ce=>n(P).v[ce])):null),V=g(()=>e.selected&&e.selected.length>0?ze(e.selected.map(ce=>n(N).v[ce])):null);function q(){const ce=n(u)-n(h),_e=n(d)+n(f),be=[];for(let ge=0;ge<=n(P).length;ge++){const Ee=n(P).v[ge],fe=n(N).v[ge];Ee>=n(d)&&Ee<=_e&&fe>=ce&&fe<=n(u)&&be.push(ge)}be.length>0&&e.callbacks.select(be),D(l,null),D(o,null),D(a,null),D(c,null)}function K(ce,_e){e.callbacks.unselect(),D(s,!0),D(l,ce,!0),D(o,_e,!0),D(a,ce,!0),D(c,_e,!0)}function te(ce,_e){D(s,!1),D(t,!0),q()}function ee(ce,_e){n(s)&&(D(a,ce,!0),D(c,_e,!0))}function $(){if(n(t)){D(t,!1);return}D(s,!1),D(l,null),D(o,null),D(a,null),D(c,null),e.callbacks.unselect()}var ne=ie(),ve=Q(ne);{var xe=ce=>{var _e=dv(),be=B(_e);cr(be,{get xLabel(){return n(k)},get yLabel(){return n(F)},get limX(){return n(O)},get limY(){return n(M)},get title(){return n(W)},onmousedown:K,onmouseup:te,onmousemove:ee,onclick:$,fileName:"plot-varimp",children:(ge,Ee)=>{var fe=uv(),we=Q(fe);Qt(we,{get xValues(){return n(P)},get yValues(){return n(N)},get markerSize(){return n(I)},plotType:"p",get showLabels(){return e.params.showLabels},get labels(){return n(w)},shortenLabels:!1});var de=j(we,2);{var Ie=De=>{const jt=g(()=>[n(d)]),Ge=g(()=>[n(u)]),lt=g(()=>[n(f)]),Qe=g(()=>[n(h)]);Ws(De,{get left(){return n(jt)},get top(){return n(Ge)},get width(){return n(lt)},get height(){return n(Qe)},faceColor:"#ff000040"})};X(de,De=>{n(d)&&n(u)&&n(s)&&De(Ie)})}var ye=j(de,2);{var Se=De=>{Qt(De,{get xValues(){return n(Y)},get yValues(){return n(V)},get markerSize(){return n(I)},mainColor:"red",plotType:"p",shortenLabels:!1})};X(ye,De=>{n(Y)&&n(V)&&De(Se)})}C(ge,fe)},$$slots:{default:!0}}),C(ce,_e)};X(ve,ce=>{n(P)&&n(N)&&ce(xe)})}C(r,ne),ae()}var vv=G("<!> <!> <!> <!> <!>",1);function hv(r,e){oe(e,!0);let t=g(()=>e.props?e.props.scalars:null);const s=[-99999,-2,-1,0,.2,.5,.8,1.2,1.5,1.8,2,2.5,3,99999],l=["#6200DF","#6923FF","#648FFF","#8CCDFD","#D2ECFF","#E8F5FF","#fefeff","#FFF5E5","#FFE5BE","#FFCE85","#FFA34E","#FF8024","#CF5903"],o=s.map(_=>_.toFixed(1));o[0]="&minus;&infin;",o[o.length-1]="&infin;";const a=g(()=>n(t)?n(t).nrows/8:1),c=g(()=>n(t)?[.45,n(t).ncols+.6]:[0,1]),d=g(()=>n(t)?[.45,n(t).nrows+Math.max(.9,n(a))]:[0,1]),u="PV-scalars",f="Segments, k",h="Components, A";var v=ie(),m=Q(v);{var p=_=>{na(_,{get limX(){return n(c)},get limY(){return n(d)},title:u,fileName:"plot-pvscalars",children:(b,E)=>{var z=vv(),y=Q(z);cf(y,{get values(){return n(t)},breaks:s,colmap:l});var w=j(y,2);uf(w,{breaks:s,colmap:l,labels:o});var S=j(w,2);sa(S,{label:h,whole:!0});var L=j(S,2);la(L,{label:f,whole:!0});var A=j(L,2);oa(A,{}),C(b,z)},$$slots:{default:!0}})};X(m,_=>{n(t)&&_(p)})}C(r,v),ae()}function wa(r){const e=Object.keys(r),t=e.length>1?[...e,"both"]:e,s=e.length>1?"both":e[0];return{resID:{el:et,hidden:e.length==1,default:s,label:"Show",props:{options:t}},varSet:{el:et,hidden:!1,default:"X",label:"Variance for",props:{options:["X","Y"]}},varType:{el:et,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:et,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function ya(r,e){const t=Object.keys(r),s=t.length>1?[...t,"both"]:t,l=["rmse","r2","slope"],o=t.length>1?"both":t[0];return{resID:{el:et,hidden:t.length==1,default:o,label:"Show",props:{options:s}},fom:{el:et,hidden:!1,default:"rmse",label:"FoM",props:{options:l}},resp:{el:pr,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Js(r,e){const t=Object.keys(r),s=t.length>1?[...t,"both"]:t,l=r[t[0]],o=t.length>1?"both":t[0];return{resID:{el:et,hidden:t.length==1,default:o,label:"Show",props:{options:s}},resp:{el:pr,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showStat:{el:Jt,hidden:l.Yref===null,default:!1,label:"FoM",props:{options:["hide","show"]}},showLabels:{el:et,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","labels","values"]}}}}function Qs(r){const e=Object.keys(r),t=e.length>1?[...e,"both"]:e,s=r[e[0]],l=s.Yref?["X","Y","XY"]:["X"],o=e.length>1?"both":e[0];return{resID:{el:et,hidden:e.length===1,default:o,label:"Show",props:{options:t}},varSet:{el:et,hidden:s.Yref===null,default:"X",label:"Scores for",props:{options:l}},comp2:{el:pr,hidden:!1,default:s.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:s.ncomp}},comp1:{el:pr,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:s.ncomp}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function mv(r,e){return{statType:{el:et,hidden:!1,default:"xloadings",label:"Show",props:{options:["xloadings","weights"]}},plotType:{el:Vo,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:pr,hidden:!1,default:r.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:pr,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Zs(r){const e=Object.keys(r),t=e.length>1?[...e,"both"]:e,s=r[e[0]],l=e.length>1?"both":e[0],o=s.Yref?["h/q","f/z"]:["h/q"];return{resID:{el:et,hidden:e.length==1,default:l,label:"Show",props:{options:t}},distType:{el:et,hidden:s.Yref===null,default:"h/q",label:"Show",props:{options:o}},transType:{el:et,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:et,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function gv(r){return{plotType:{el:Vo,hidden:!1,default:"l",label:"Plot type",props:{options:["l","h"]}},resp:{el:pr,hidden:r<2,default:1,label:"Response",props:{min:1,max:r}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function bv(r){return{yset:{el:et,hidden:!1,default:"vip",label:"Y-axis",props:{options:["vip","selratio"]}},xset:{el:et,hidden:!1,default:"values",label:"X-axis",props:{options:["values","indices","vip"]}},resp:{el:pr,hidden:r<2,default:1,label:"Response",props:{min:1,max:r}},showLabels:{el:Jt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function pv(){return{}}var _v=G("<!> <!>",1),wv=G("<p>can not exclude</p>");function yv(r,e){oe(e,!0);const t=(h,v=ht)=>{me(h,{label:"Selected",children:(m,p)=>{var _=_v(),b=Q(_);dt(b,{onclick:()=>e.showContributions(v()),text:"plot"});var E=j(b,2);{var z=y=>{dt(y,{onclick:()=>e.markOutlier(v()),text:"remove"})};X(E,y=>{e.res.cal.nrows-v().length>=2&&y(z)})}C(m,_)},$$slots:{default:!0}})},s=(h,v=ht)=>{me(h,{label:"Selected",children:(m,p)=>{var _=ie(),b=Q(_);{var E=y=>{dt(y,{onclick:()=>e.excludeVars(v()),get text(){return`exclude ${v().length??""} variables`}})},z=y=>{var w=wv();C(y,w)};X(b,y=>{e.res.cal.npred-v().length>=2?y(E):y(z,!1)})}C(m,_)},$$slots:{default:!0}})},l=Object.keys(e.res),o=e.res[l[0]].nresp,a=g(()=>({pred:{label:"Predictions",scope:"objects",component:Xs,buttons:t},scores:{label:"Scores",scope:"objects",component:Gs,buttons:t},distance:{label:"Distance",scope:"objects",component:Ks,buttons:t},loadings:{label:"X-loadings and weights",scope:"stats",component:ov},regcoeffs:{label:"Regression coefficients",scope:"stats",component:cv},varsel:{label:"Variable importance",scope:"variables",component:fv,buttons:s},fom:{label:"Figures of merit",scope:"stats",component:_a},variance:{label:"Variance",scope:"stats",component:pa},scalars:{label:"PV scalars",scope:"stats",component:hv}})),c=Xe({pred:Js(e.res,o),scores:Qs(e.res),distance:Zs(e.res),loadings:mv(e.model,e.ncomp),regcoeffs:gv(o),varsel:bv(o),fom:ya(e.res,o),variance:wa(e.res),scalars:pv(e.res)});let d=re(Xe({pred:bt(c.pred),scores:bt(c.scores),distance:bt(c.distance),loadings:bt(c.loadings),regcoeffs:bt(c.regcoeffs),varsel:bt(c.varsel),fom:bt(c.fom),variance:bt(c.variance),scalars:bt(c.scalars)}));Ce(()=>{n(d).scores.varSet==="XY"?(c.scores.comp1.hidden=!0,c.scores.comp2.label="LV"):(c.scores.comp2.label="LV (y-axis)",c.scores.comp1.hidden=!1)}),Ce(()=>{n(d).loadings.plotType!=="p"?c.loadings.comp1.hidden=!0:c.loadings.comp1.hidden=!1}),Ce(()=>{n(d).pred.resID==="both"?c.pred.showStat.hidden=!0:c.pred.showStat.hidden=!1});const u=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),f={markOutlier:e.markOutlier};Us(r,{get plots(){return n(a)},get props(){return n(u)},get controls(){return c},callbacks:f,get params(){return n(d)},set params(h){D(d,h,!0)}}),ae()}var xv=G('<div class="outliers-pane svelte-b7gdku"><!></div>'),kv=G('<div class="exclvars-pane svelte-b7gdku"><!></div>'),Ev=G('<div class="model-calculator svelte-b7gdku"><!></div>'),Sv=G('<div class="pcv-calculator svelte-b7gdku"><!></div>'),Av=G('<div class="buttons"><!> <!> <!></div>'),Cv=G('<div class="ncomp-selector svelte-b7gdku"><!> <!></div> <div class="result-stats svelte-b7gdku"><!></div>',1),Lv=G(`<p class="svelte-b7gdku">In this tab you can train a PLS regression model and optimize it using Procrustes cross-validation.
               After that you can save the model to a file, apply it to a test set (tab <strong>Test</strong>)
               or to a new set of samples whose response us unknown (tab <strong>Predict</strong>).</p> <p class="svelte-b7gdku"><strong>Step 1.</strong></p> <p class="svelte-b7gdku">Load your training/calibration set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows
               correspond to observations or objects, columns — to variables (both response and predictors).</p> <p class="svelte-b7gdku">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed
               that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If x-variables
               are signals, e.g. spectra, this part of header can content numeric values, e.g. wavelength or wavenumbers.
               If this is the case, select <em>values</em> option for the header. This will let you to specify
               name of the values (e.g. <em>Wavelength</em>) and the units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-b7gdku">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — if so, just set
               the corresponding options after selecting the file.</p> <p class="svelte-b7gdku">The response variable (<em>Y</em>) should be located right after the column with object/row labels. If there are no
               object labels, the response variable is expected to be in the first column. <strong>Response variable is mandatory
               in the training set and in this version of app only single response is supported (PLS1).</strong></p> <p class="svelte-b7gdku">Here is an example how data structure may look like (note, that row labels and header are optional):</p> <div class="svelte-b7gdku"><table class="svelte-b7gdku"><thead class="svelte-b7gdku"><tr class="svelte-b7gdku"><td class="svelte-b7gdku">Name</td><td class="svelte-b7gdku">y</td><td class="svelte-b7gdku">x1</td><td class="svelte-b7gdku">x2</td><td class="svelte-b7gdku">x3</td></tr></thead><tbody class="svelte-b7gdku"><tr><td class="svelte-b7gdku">O1</td><td class="svelte-b7gdku">96.1</td><td class="svelte-b7gdku">3.8</td><td class="svelte-b7gdku">1.3</td><td class="svelte-b7gdku">13.6</td></tr><tr><td class="svelte-b7gdku">O2</td><td class="svelte-b7gdku">88.9</td><td class="svelte-b7gdku">11.1</td><td class="svelte-b7gdku">12.3</td><td class="svelte-b7gdku">3.3</td></tr><tr><td class="svelte-b7gdku">O3</td><td class="svelte-b7gdku">56.1</td><td class="svelte-b7gdku">1.2</td><td class="svelte-b7gdku">2.3</td><td class="svelte-b7gdku">4.2</td></tr></tbody></table></div> <p class="svelte-b7gdku"></p>`,1),Tv=G(`<p class="svelte-b7gdku"><strong>Step 2</strong></p> <p class="svelte-b7gdku">Next step is to create a global PLS model for the training set. Use more components/latent variables (LVs) than
               you expect to be optimal. You will have possibility to select the optimal number of components later.</p>`,1),zv=G(`<p class="svelte-b7gdku"><strong>Step 3</strong></p> <p class="svelte-b7gdku">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set,
               which will help you to optimize PLS model parameters. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-b7gdku">After this step PLS model will be created automatically and you will be able to explore it and tune
               its parameters.</p>`,1),Nv=G("<!> <!>",1),Pv=G('<div class="help-text svelte-b7gdku"><!></div>'),Rv=G('<div class="app-container svelte-b7gdku"><!> <div class="app-controls svelte-b7gdku"><div class="data-loader svelte-b7gdku"><!></div> <!> <!> <!> <!> <!></div> <div class="app-content svelte-b7gdku"><!></div></div>');function Mv(r,e){oe(e,!0);const t=g(()=>e.session.train);let s=re(-1),l=re(!1);function o(I){if(I.length<1)return;const Y=I.map(V=>n(t).model.varindices[V+n(t).model.nresp]);if(Y.length>0){const V=new Set(n(t).exclvars),q=[...new Set(Y)].filter(K=>!V.has(K));n(t).exclvars=n(t).exclvars.concat(q),n(t).model=null,n(t).pvres=null,n(t).calres=null,n(t).pvset=null,n(t).ncomp_selected=1}}function a(){n(t).exclvars=[],n(t).model=null,n(t).pvres=null,n(t).calres=null,n(t).pvset=null,n(t).ncomp_selected=1}function c(I){if(I<0||I>n(t).calres.nrows-1)return;const Y=n(t).calres.objindices[I];Y>=0&&!n(t).outliers.includes(Y)&&(n(t).outliers.push(Y),n(t).model=null,n(t).pvres=null,n(t).calres=null,n(t).pvset=null,n(t).ncomp_selected=1)}function d(){n(t).outliers=[],n(t).model=null,n(t).pvres=null,n(t).calres=null,n(t).pvset=null,n(t).ncomp_selected=1}function u(){n(t).outliers.pop(),n(t).model=null,n(t).pvres=null,n(t).calres=null,n(t).pvset=null,n(t).ncomp_selected=1}function f(I){I<0||(D(s,I,!0),D(l,!0))}function h(){D(l,!1),D(s,-1)}Ce(()=>{n(t).calset===null&&(n(t).model=null,n(t).outliers=[],n(t).exclvars=[],n(t).ncomp_selected=1),n(t).model===null&&(n(t).calres=null,n(t).pvres=null,n(t).pvset=null)}),Ce(()=>{if(n(t).pvres&&n(t).pvres.stat){const I=n(t).pvres.stat.rmse.getcolref(1),V=I.map((q,K)=>K>0?1-q*q/I[K-1]**2:1).findIndex(q=>q<=.0975);n(t).ncomp_selected=V<0?n(t).model.ncomp:V}}),Ce(()=>{const I=Ut(()=>JSON.stringify(e.session,dn));e.backupSession(I,n(t).model,n(t).calset,n(t).pvres)});var v=Rv(),m=B(v);{var p=I=>{Hs(I,{getter:xt,get dataset(){return n(t).calset},get model(){return n(t).model},get ncomp(){return n(t).ncomp_selected},get selected(){return n(s)},closeModal:h})};X(m,I=>{n(l)&&I(p)})}var _=j(m,2),b=B(_),E=B(b);Is(E,{respMandatory:!0,get dataset(){return n(t).calset},set dataset(I){n(t).calset=I}});var z=j(b,2);{var y=I=>{var Y=xv(),V=B(Y);Fs(V,{get outliers(){return n(t).outliers},get dataset(){return n(t).calset},resetOutliers:d,undoOutliers:u}),C(I,Y)};X(z,I=>{n(t).outliers&&n(t).outliers.length>0&&I(y)})}var w=j(z,2);{var S=I=>{var Y=kv(),V=B(Y);Ru(V,{get exclvars(){return n(t).exclvars},get dataset(){return n(t).calset},resetExclvars:a}),C(I,Y)};X(w,I=>{n(t).exclvars&&n(t).exclvars.length>0&&I(S)})}var L=j(w,2);{var A=I=>{var Y=Ev(),V=B(Y);uu(V,{get WASM(){return e.WASM},get dataset(){return n(t).calset},get outliers(){return n(t).outliers},get exclvars(){return n(t).exclvars},get model(){return n(t).model},set model(q){n(t).model=q},get resobj(){return n(t).calres},set resobj(q){n(t).calres=q}}),C(I,Y)};X(L,I=>{n(t).calset&&I(A)})}var T=j(L,2);{var P=I=>{var Y=Sv(),V=B(Y);bu(V,{get WASM(){return e.WASM},get calset(){return n(t).calset},get outliers(){return n(t).outliers},get model(){return n(t).model},get calres(){return n(t).calres},get pvset(){return n(t).pvset},set pvset(q){n(t).pvset=q},get pvres(){return n(t).pvres},set pvres(q){n(t).pvres=q},get pvscalars(){return n(t).pvscalars},set pvscalars(q){n(t).pvscalars=q}}),C(I,Y)};X(T,I=>{n(t).model&&I(P)})}var N=j(T,2);{var k=I=>{var Y=Cv(),V=Q(Y),q=B(V);me(q,{name:"ncomp",label:"# of LVs",children:(ne,ve)=>{Rs(ne,{min:1,get max(){return n(t).model.ncomp},step:1,decNum:0,get value(){return n(t).ncomp_selected},set value(xe){n(t).ncomp_selected=xe}})},$$slots:{default:!0}});var K=j(q,2);me(K,{label:"Download",children:(ne,ve)=>{var xe=Av(),ce=B(xe);dt(ce,{onclick:()=>Yn(n(t).calres,n(t).calset,"train",n(t).ncomp_selected),text:"Res (cal)"});var _e=j(ce,2);dt(_e,{onclick:()=>Yn(n(t).pvres,n(t).pvset,"PV",n(t).ncomp_selected),text:"Res (pv)"});var be=j(_e,2);dt(be,{onclick:()=>ga(n(t).model,n(t).ncomp_selected),text:"Model"}),C(ne,xe)},$$slots:{default:!0}});var te=j(V,2),ee=B(te);const $=g(()=>({cal:n(t).calres,pv:n(t).pvres}));ma(ee,{get res(){return n($)},get ncomp(){return n(t).ncomp_selected}}),C(I,Y)};X(N,I=>{n(t).calres&&n(t).pvres&&I(k)})}var F=j(_,2),W=B(F);{var O=I=>{var Y=Pv(),V=B(Y);{var q=te=>{var ee=Lv();C(te,ee)},K=te=>{var ee=Nv(),$=Q(ee);{var ne=ce=>{var _e=Tv();C(ce,_e)};X($,ce=>{n(t).model||ce(ne)})}var ve=j($,2);{var xe=ce=>{var _e=zv();C(ce,_e)};X(ve,ce=>{n(t).model&&!n(t).pvset&&ce(xe)})}C(te,ee)};X(V,te=>{n(t).calset?te(K,!1):te(q)})}C(I,Y)},M=I=>{var Y=ie(),V=Q(Y);on(V,()=>n(t).pvres&&n(t).model,q=>{var K=ie(),te=Q(K);{var ee=$=>{const ne=g(()=>({cal:n(t).calset,pv:n(t).pvset})),ve=g(()=>({cal:n(t).calres,pv:n(t).pvres}));yv($,{markOutlier:c,showContributions:f,excludeVars:o,get data(){return n(ne)},get res(){return n(ve)},get scalars(){return n(t).pvscalars},get model(){return n(t).model},get ncomp(){return n(t).ncomp_selected}})};X(te,$=>{n(t).pvres&&n(t).model&&$(ee)})}C(q,K)}),C(I,Y)};X(W,I=>{!n(t).calres||!n(t).pvres||!n(t).model?I(O):I(M,!1)})}C(r,v),ae()}var Iv=G("<!> <!>",1),Fv=G('<br><span style="color:#a0a0a0;">Excluded</span> <span style="color:#a0a0a0;">variables.</span>',1),jv=G('<p class="info-text svelte-3v2vv7"><span>Model file:</span> <span class="file-name svelte-3v2vv7"> </span><br> <span style="color:#a0a0a0;">Model info:</span> <!></p> <!>',1),Vv=G("<p><!></p>"),Ov=G("<!> <!>",1);function xa(r,e){oe(e,!0);let t=H(e,"model",15),s=re(""),l=re("neutral"),o=re("");function a(b){try{const E=JSON.parse(b,To);if(Array.isArray(E.v)&&(E.v=Float64Array.from(E.v)),E.class[0]!=="plsmodel")throw Error("The JSON file you selected does not contain PLS model.");E.fileName=n(u),t(E),D(l,"success"),D(o,"")}catch(E){console.log(E),t(null),D(l,"error"),D(o,E,!0)}}function c(b){const E=new FileReader;E.onload=()=>{a(E.result)},E.readAsText(n(s))}function d(){D(s,""),t(null),D(l,"neutral"),D(o,"")}Ce(()=>{n(s)===null?(t(null),D(l,"neutral"),D(o,"")):(D(l,"neutral"),D(o,""))});let u=g(()=>n(s)?n(s).name.replace(/\.[^/.]+$/,""):"");var f=Ov(),h=Q(f);{var v=b=>{var E=Iv(),z=Q(E);on(z,()=>n(s),S=>{me(S,{name:"file-selector",children:(L,A)=>{Fo(L,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return n(s)},set file(T){D(s,T,!0)}})},$$slots:{default:!0}})});var y=j(z,2);{var w=S=>{me(S,{name:"load-button",label:" ",children:(L,A)=>{dt(L,{onclick:c,text:"Load"})},$$slots:{default:!0}})};X(y,S=>{n(s)&&S(w)})}C(b,E)},m=b=>{me(b,{name:"info",class:"info",children:(E,z)=>{var y=jv(),w=Q(y),S=j(B(w),2),L=B(S),A=j(S,4),T=j(A);{var P=k=>{var F=Fv(),W=j(Q(F),2);Z(()=>he(W,` ${t().exclvars.length??""} `)),C(k,F)};X(T,k=>{t().exclvars.length>0&&k(P)})}var N=j(w,2);Lr(N,{onclick:d}),Z(()=>{R(S,"title",t().fileName),he(L,t().fileName),he(A,` ${t().ncomp??""} PCs${t().center?", centered":""}${t().scale?", scaled":""} `)}),C(E,y)},$$slots:{default:!0}})};X(h,b=>{t()?b(m,!1):b(v)})}var p=j(h,2);{var _=b=>{me(b,{name:"error",status:"error",children:(E,z)=>{var y=Vv(),w=B(y);yt(w,()=>n(o)),C(E,y)},$$slots:{default:!0}})};X(p,b=>{(n(l)==="error"||n(o))&&b(_)})}C(r,f),ae()}var qv=G("<!> <!>",1);function Dv(r,e){oe(e,!0);const t=(f,h=ht)=>{me(f,{label:"Selected",children:(v,m)=>{var p=qv(),_=Q(p);dt(_,{onclick:()=>e.showContributions(h()),text:"plot"});var b=j(_,2);dt(b,{onclick:()=>e.markOutlier(h()),text:"remove"}),C(v,p)},$$slots:{default:!0}})},s=Object.keys(e.res),l=e.res[s[0]].nresp,o=g(()=>({pred:{label:"Predictions",scope:"objects",component:Xs,buttons:t},scores:{label:"Scores",scope:"objects",component:Gs,buttons:t},distance:{label:"Distance",scope:"objects",component:Ks,buttons:t},fom:{label:"Figures of merit",scope:"stats",component:_a},variance:{label:"Variance",scope:"stats",component:pa}})),a=Xe({pred:Js(e.res,l),scores:Qs(e.res),distance:Zs(e.res),fom:ya(e.res,l),variance:wa(e.res)});let c=re(Xe({pred:bt(a.pred),scores:bt(a.scores),distance:bt(a.distance),fom:bt(a.fom),variance:bt(a.variance)}));Ce(()=>{n(c).scores.varSet==="XY"?(a.scores.comp1.hidden=!0,a.scores.comp2.label="LV"):(a.scores.comp2.label="LV (y-axis)",a.scores.comp1.hidden=!1)}),Ce(()=>{n(c).pred.resID==="both"?a.pred.showStat.hidden=!0:a.pred.showStat.hidden=!1});const d=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),u={markOutlier:e.markOutlier};Us(r,{get plots(){return n(o)},get controls(){return a},get props(){return n(d)},callbacks:u,get params(){return n(c)},set params(f){D(c,f,!0)}}),ae()}var Bv=G('<div class="outliers-pane svelte-b7gdku"><!></div>'),Yv=G('<div class="buttons"><!> <!></div>'),Wv=G('<div class="ncomp-selector svelte-b7gdku"><!> <!></div> <div class="result-stats svelte-b7gdku"><!></div>',1),Hv=G('<div class="data-loader svelte-b7gdku"><!></div> <!> <!>',1),Uv=G(`<p class="svelte-b7gdku">In this tab you can test a PLS regression model developed in <strong>Train</strong> tab by
               applying it to a test set, which contains both predictors and responses.</p> <p class="svelte-b7gdku"><strong>Step 1.</strong></p> <p class="svelte-b7gdku">Load the previously developed PLS model from a JSON file.</p>`,1),Xv=G(`<p class="svelte-b7gdku"><strong>Step 2.</strong></p> <p class="svelte-b7gdku">Load your test set from a CSV file. The file structure should be the same as the training/calibration set.
               The response variable is mandatory. Here is an example how data structure may look like (note, that row labels
               and header are optional):</p> <div class="svelte-b7gdku"><table class="svelte-b7gdku"><thead class="svelte-b7gdku"><tr class="svelte-b7gdku"><td class="svelte-b7gdku">Name</td><td class="svelte-b7gdku">y</td><td class="svelte-b7gdku">x1</td><td class="svelte-b7gdku">x2</td><td class="svelte-b7gdku">x3</td></tr></thead><tbody class="svelte-b7gdku"><tr><td class="svelte-b7gdku">O1</td><td class="svelte-b7gdku">96.1</td><td class="svelte-b7gdku">3.8</td><td class="svelte-b7gdku">1.3</td><td class="svelte-b7gdku">13.6</td></tr><tr><td class="svelte-b7gdku">O2</td><td class="svelte-b7gdku">88.9</td><td class="svelte-b7gdku">11.1</td><td class="svelte-b7gdku">12.3</td><td class="svelte-b7gdku">3.3</td></tr><tr><td class="svelte-b7gdku">O3</td><td class="svelte-b7gdku">56.1</td><td class="svelte-b7gdku">1.2</td><td class="svelte-b7gdku">2.3</td><td class="svelte-b7gdku">4.2</td></tr></tbody></table></div> <p class="svelte-b7gdku"></p>`,1),Gv=G('<div class="help-text svelte-b7gdku"><!></div>'),Kv=G('<div class="app-container svelte-b7gdku"><!> <div class="app-controls svelte-b7gdku"><div class="model-loader svelte-b7gdku"><!></div> <!></div> <div class="app-content svelte-b7gdku"><!></div></div>');function Jv(r,e){oe(e,!0);const t=g(()=>e.session.test);let s=re(-1),l=re(!1);function o(L){if(L<0||L>n(t).testres.nrows-1)return;const A=n(t).testres.objindices[L];A>=0&&!n(t).outliers.includes(A)&&(n(t).outliers.push(A),n(t).testres=null)}function a(){n(t).outliers=[],n(t).testres=null}function c(){n(t).outliers.pop(),n(t).testres=null}function d(L){L<0||(D(s,L,!0),D(l,!0))}function u(){D(l,!1),D(s,-1)}Ce(()=>{n(t).testset===null&&(n(t).outliers=[],n(t).testres=null),n(t).model===null&&(n(t).testres=null,n(t).testset=null)}),Ce(()=>{n(t).model&&(n(t).ncomp_selected=n(t).model.ncomp_selected)}),Ce(()=>{const L=Ut(()=>JSON.stringify(e.session,dn));e.backupSession(L,n(t).model,n(t).testset)});var f=Kv(),h=B(f);{var v=L=>{Hs(L,{getter:xt,get dataset(){return n(t).testset},get model(){return n(t).model},get ncomp(){return n(t).ncomp_selected},get selected(){return n(s)},closeModal:u})};X(h,L=>{n(l)&&L(v)})}var m=j(h,2),p=B(m),_=B(p);xa(_,{get model(){return n(t).model},set model(L){n(t).model=L}});var b=j(p,2);{var E=L=>{var A=Hv(),T=Q(A),P=B(T);Is(P,{get WASM(){return e.WASM},get outliers(){return n(t).outliers},get model(){return n(t).model},respMandatory:!0,get dataset(){return n(t).testset},set dataset(O){n(t).testset=O},get resobj(){return n(t).testres},set resobj(O){n(t).testres=O}});var N=j(T,2);{var k=O=>{var M=Bv(),I=B(M);Fs(I,{get outliers(){return n(t).outliers},get dataset(){return n(t).testset},resetOutliers:a,undoOutliers:c}),C(O,M)};X(N,O=>{n(t).outliers&&n(t).outliers.length>0&&O(k)})}var F=j(N,2);{var W=O=>{var M=Wv(),I=Q(M),Y=B(I);me(Y,{name:"ncomp",label:"# of LVs",children:(ee,$)=>{Rs(ee,{min:1,get max(){return n(t).model.ncomp},step:1,decNum:0,get value(){return n(t).ncomp_selected},set value(ne){n(t).ncomp_selected=ne}})},$$slots:{default:!0}});var V=j(Y,2);me(V,{label:"Download",children:(ee,$)=>{var ne=Yv(),ve=B(ne);dt(ve,{onclick:()=>Yn(n(t).testres,n(t).testset,"test",n(t).ncomp_selected),text:"Res (test)"});var xe=j(ve,2);dt(xe,{onclick:()=>ga(n(t).model,n(t).ncomp_selected),text:"Model"}),C(ee,ne)},$$slots:{default:!0}});var q=j(I,2),K=B(q);const te=g(()=>({test:n(t).testres}));ma(K,{get res(){return n(te)},get ncomp(){return n(t).ncomp_selected}}),C(O,M)};X(F,O=>{n(t).testres&&O(W)})}C(L,A)};X(b,L=>{n(t).model&&L(E)})}var z=j(m,2),y=B(z);{var w=L=>{var A=Gv(),T=B(A);{var P=k=>{var F=Uv();C(k,F)},N=(k,F)=>{{var W=O=>{var M=Xv();C(O,M)};X(k,O=>{n(t).testset||O(W)},F)}};X(T,k=>{n(t).model?k(N,!1):k(P)})}C(L,A)},S=L=>{var A=ie(),T=Q(A);on(T,()=>n(t).testres&&n(t).model,P=>{var N=ie(),k=Q(N);{var F=W=>{const O=g(()=>({test:n(t).testset})),M=g(()=>({test:n(t).testres}));Dv(W,{markOutlier:o,showContributions:d,get data(){return n(O)},get res(){return n(M)},get model(){return n(t).model},get ncomp(){return n(t).ncomp_selected}})};X(k,W=>{n(t).testres&&n(t).model&&W(F)})}C(P,N)}),C(L,A)};X(y,L=>{n(t).testres?L(S,!1):L(w)})}C(r,f),ae()}var Qv=G("<!> <!>",1);function Zv(r,e){oe(e,!0);const t=(f,h=ht)=>{me(f,{label:"Selected",children:(v,m)=>{var p=Qv(),_=Q(p);dt(_,{onclick:()=>e.showContributions(h()),text:"plot"});var b=j(_,2);dt(b,{onclick:()=>e.markOutlier(h()),text:"remove"}),C(v,p)},$$slots:{default:!0}})},s=Object.keys(e.res),l=e.res[s[0]].nresp,o=g(()=>({pred:{label:"Predictions",scope:"objects",component:Xs,buttons:t},scores:{label:"Scores",scope:"objects",component:Gs,buttons:t},distance:{label:"Distance",scope:"objects",component:Ks,buttons:t}})),a=Xe({pred:Js(e.res,l),scores:Qs(e.res),distance:Zs(e.res)});let c=re(Xe({pred:bt(a.pred),scores:bt(a.scores),distance:bt(a.distance)}));const d=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),u={markOutlier:e.markOutlier};Us(r,{get plots(){return n(o)},get controls(){return a},get props(){return n(d)},callbacks:u,get params(){return n(c)},set params(f){D(c,f,!0)}}),ae()}var $v=G('<div class="data-loader svelte-1t4ahqs"><!></div>'),eh=G('<div class="outliers-pane svelte-1t4ahqs"><!></div>'),th=G('<div class="buttons"><!></div>'),rh=G('<div class="ncomp-selector svelte-1t4ahqs"><!></div>'),nh=G(`<p class="svelte-1t4ahqs">In this tab you can apply a PLS regression model developed in <strong>Train</strong> tab to
               new set of measurements without known response variable.</p> <p class="svelte-1t4ahqs"><strong>Step 1.</strong></p> <p class="svelte-1t4ahqs">Load the previously developed PLS model from a JSON file.</p>`,1),sh=G(`<p class="svelte-1t4ahqs"><strong>Step 2.</strong></p> <p class="svelte-1t4ahqs">Load your test set from a CSV file. The file structure should be the same as the training/calibration set but <strong>should not contain the response variable</strong>. Here is an example how data structure may look like
               (note, that row labels and header are optional):</p> <div class="svelte-1t4ahqs"><table class="svelte-1t4ahqs"><thead class="svelte-1t4ahqs"><tr class="svelte-1t4ahqs"><td class="svelte-1t4ahqs">Name</td><td class="svelte-1t4ahqs">x1</td><td class="svelte-1t4ahqs">x2</td><td class="svelte-1t4ahqs">x3</td></tr></thead><tbody class="svelte-1t4ahqs"><tr><td class="svelte-1t4ahqs">O1</td><td class="svelte-1t4ahqs">3.8</td><td class="svelte-1t4ahqs">1.3</td><td class="svelte-1t4ahqs">13.6</td></tr><tr><td class="svelte-1t4ahqs">O2</td><td class="svelte-1t4ahqs">11.1</td><td class="svelte-1t4ahqs">12.3</td><td class="svelte-1t4ahqs">3.3</td></tr><tr><td class="svelte-1t4ahqs">O3</td><td class="svelte-1t4ahqs">1.2</td><td class="svelte-1t4ahqs">2.3</td><td class="svelte-1t4ahqs">4.2</td></tr></tbody></table></div> <p class="svelte-1t4ahqs"></p>`,1),lh=G('<div class="help-text svelte-1t4ahqs"><!></div>'),oh=G('<div class="app-container svelte-1t4ahqs"><!> <div class="app-controls svelte-1t4ahqs"><div class="model-loader svelte-1t4ahqs"><!></div> <!> <!> <!></div> <div class="app-content svelte-1t4ahqs"><!></div></div>');function ah(r,e){oe(e,!0);const t=g(()=>e.session.new);let s=re(-1),l=re(!1);function o(N){if(N<0||N>n(t).newres.nrows-1)return;const k=n(t).newres.objindices[N];k>=0&&!n(t).outliers.includes(k)&&(n(t).outliers.push(k),n(t).newres=null)}function a(){n(t).outliers=[],n(t).newres=null}function c(){n(t).outliers.pop(),n(t).newres=null}function d(N){N<0||(D(s,N,!0),D(l,!0))}function u(){D(l,!1),D(s,-1)}Ce(()=>{n(t).newset===null&&(n(t).outliers=[],n(t).newres=null),n(t).model===null&&(n(t).newres=null,n(t).newset=null)}),Ce(()=>{n(t).model&&(n(t).ncomp_selected=n(t).model.ncomp_selected)}),Ce(()=>{const N=Ut(()=>JSON.stringify(e.session,dn));e.backupSession(N,n(t).model,n(t).newset)});var f=oh(),h=B(f);{var v=N=>{Hs(N,{getter:xt,get dataset(){return n(t).newset},get model(){return n(t).model},get ncomp(){return n(t).ncomp_selected},get selected(){return n(s)},closeModal:u})};X(h,N=>{n(l)&&N(v)})}var m=j(h,2),p=B(m),_=B(p);xa(_,{get model(){return n(t).model},set model(N){n(t).model=N}});var b=j(p,2);{var E=N=>{var k=$v(),F=B(k);Is(F,{get WASM(){return e.WASM},get outliers(){return n(t).outliers},get model(){return n(t).model},respMandatory:!1,get dataset(){return n(t).newset},set dataset(W){n(t).newset=W},get resobj(){return n(t).newres},set resobj(W){n(t).newres=W}}),C(N,k)};X(b,N=>{n(t).model&&N(E)})}var z=j(b,2);{var y=N=>{var k=eh(),F=B(k);Fs(F,{get outliers(){return n(t).outliers},get dataset(){return n(t).newset},resetOutliers:a,undoOutliers:c}),C(N,k)};X(z,N=>{n(t).outliers&&n(t).outliers.length>0&&N(y)})}var w=j(z,2);{var S=N=>{var k=rh(),F=B(k);me(F,{label:"Download",children:(W,O)=>{var M=th(),I=B(M);dt(I,{onclick:()=>Yn(n(t).newres,n(t).newset,"new"),text:"Res (new)"}),C(W,M)},$$slots:{default:!0}}),C(N,k)};X(w,N=>{n(t).newres&&N(S)})}var L=j(m,2),A=B(L);{var T=N=>{var k=lh(),F=B(k);{var W=M=>{var I=nh();C(M,I)},O=(M,I)=>{{var Y=V=>{var q=sh();C(V,q)};X(M,V=>{n(t).newset||V(Y)},I)}};X(F,M=>{n(t).model?M(O,!1):M(W)})}C(N,k)},P=N=>{var k=ie(),F=Q(k);on(F,()=>n(t).newres&&n(t).model,W=>{var O=ie(),M=Q(O);{var I=Y=>{const V=g(()=>({new:n(t).newset})),q=g(()=>({new:n(t).newres}));Zv(Y,{markOutlier:o,showContributions:d,get data(){return n(V)},get res(){return n(q)},get model(){return n(t).model},get ncomp(){return n(t).ncomp_selected}})};X(M,Y=>{n(t).newres&&n(t).model&&Y(I)})}C(W,O)}),C(N,k)};X(A,N=>{n(t).newres?N(P,!1):N(T)})}C(r,f),ae()}function ka(r,e){D(e,!0)}function ih(r,e,t){const s=Ns(new Date),l=e.appID+"-session-"+s+".json";n(t).date=s;const o=JSON.stringify(n(t),dn),a=new Blob([o],{type:"text/json"}),c=window.URL.createObjectURL(a),d=document.createElement("a");d.setAttribute("href",c),d.setAttribute("download",l),d.click()}function ch(r,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var uh=G('<sup style="color:red">β</sup>'),dh=G('<li><button class="svelte-1cyr8za"> </button></li>'),fh=G("<div><!></div>"),vh=G('<div class="info-container svelte-1cyr8za"><!></div>'),hh=G('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function mh(r,e){oe(e,!0);let t=H(e,"tabs",19,()=>[]),s=H(e,"isBeta",3,!1);const l="mdatools-"+e.appID;let o=re(!1),a=re(void 0),c=re("Current session "),d=re(!1);function u(w){D(c,w,!0),D(d,!0),setTimeout(()=>{D(c,"Current session "),D(d,!1)},1e3)}function f(){D(o,!1)}function h(w){n(a).tab=w}function v(){const w=indexedDB.open(l,1);w.onsuccess=S=>{const A=S.target.result.transaction(e.appID,"readwrite");A.objectStore(e.appID).delete("session"),A.oncomplete=()=>{D(a,e.initSession(),!0),u("Session was reinitialzed.")},A.onerror=()=>console.error("Failed to session from DB.")}}function m(w,S){window.localStorage.removeItem(e.appID+"-blocked");const L=indexedDB.open(l,1);L.onsuccess=A=>{const N=A.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);N.put(w,"session"),N.put(Ns(new Date),"session-update")}}function p(){new Promise((w,S)=>{const L=indexedDB.open(l,1);L.onsuccess=A=>{const k=A.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");k.onsuccess=()=>w(k.result),k.onerror=()=>S(k.error)}}).then(w=>{_(w),D(c,"Last session is restored "),D(d,!0),setTimeout(()=>{D(c,"Current session "),D(d,!1)},1500)}).catch(w=>{console.error(w),D(a,e.initSession(),!0)})}function _(w){if(!w||w==="undefined"){D(a,e.initSession(),!0);return}const S=JSON.parse(w,To);D(a,e.checkSession(S)?S:e.initSession(e.appID),!0)}function b(w){e.resetSession(n(a));const S=new FileReader;S.onload=()=>{_(S.result),w.target.value=""},S.readAsText(w.target.files[0])}nc(()=>{const w=e.appID,S=indexedDB.open(l,1);S.onupgradeneeded=L=>{const A=L.target.result;A.objectStoreNames.contains(w)||A.createObjectStore(w)},S.onsuccess=L=>{p()}});var E=ie(),z=Q(E);{var y=w=>{var S=hh(),L=B(S),A=B(L),T=B(A),P=j(T,2),N=B(P),k=j(N);{var F=Ee=>{var fe=uh();C(Ee,fe)};X(k,Ee=>{s()&&Ee(F)})}var W=j(P,2),O=B(W),M=j(A,2);Ae(M,21,t,Te,(Ee,fe,we)=>{var de=dh();let Ie;var ye=B(de);ye.__click=()=>h(we),ye.__keydown=()=>h(we);var Se=B(ye);Z(De=>{Ie=ut(de,1,"nav-item svelte-1cyr8za",null,Ie,De),he(Se,n(fe).name)},[()=>({selected:n(a).tab===we})]),C(Ee,de)});var I=j(L,2);Ae(I,21,t,Te,(Ee,fe,we)=>{var de=fh();let Ie;var ye=B(de);hs(ye,()=>n(fe).component,(Se,De)=>{De(Se,{get WASM(){return e.WASM},get session(){return n(a)},backupSession:m})}),Z(Se=>Ie=ut(de,1,"tab-content svelte-1cyr8za",null,Ie,Se),[()=>({hidden:n(a).tab!==we})]),C(Ee,de)});var Y=j(I,2),V=B(Y);let q;var K=B(V),te=B(K),ee=j(K,2),$=B(ee);$.__change=b;var ne=j(ee,2);ne.__click=[ih,e,a];var ve=j(ne,2);ve.__click=[ch,v];var xe=j(V,2),ce=B(xe);ce.__click=[ka,o],ce.__keydown=[ka,o];var _e=j(ce,2);gr(_e,()=>e.footer);var be=j(Y,2);{var ge=Ee=>{ia(Ee,{closeModal:f,children:(fe,we)=>{var de=vh(),Ie=B(de);gr(Ie,()=>e.info),C(fe,de)},$$slots:{default:!0}})};X(be,Ee=>{n(o)&&Ee(ge)})}Z(Ee=>{R(T,"alt",e.appShortTitle),he(N,e.appTitle),he(O,e.appSlogan),q=ut(V,1,"session svelte-1cyr8za",null,q,Ee),he(te,n(c))},[()=>({"no-buttons":n(d)})]),C(w,S)};X(z,w=>{n(a)&&w(y)})}C(r,E),ae()}rt(["click","keydown","change"]);const zh="modulepreload",Nh=function(r){return"/"+r},Ph={},gh=function(e,t,s){let l=Promise.resolve();function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return l.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};var bh=async function(r={}){var e,t=r,s,l,o=new Promise((U,J)=>{s=U,l=J}),a=typeof window=="object",c=typeof WorkerGlobalScope<"u",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(d){const{createRequire:U}=await gh(()=>Promise.resolve().then(()=>yh),void 0);var u=U(Me&&Me.tagName.toUpperCase()==="SCRIPT"&&Me.src||new URL("pls.js",document.baseURI).href)}var f=(U,J)=>{throw J},h=Me&&Me.tagName.toUpperCase()==="SCRIPT"&&Me.src||new URL("pls.js",document.baseURI).href,v="";function m(U){return t.locateFile?t.locateFile(U,v):v+U}var p,_;if(d){var b=u("fs"),E=u("path");h.startsWith("file:")&&(v=E.dirname(u("url").fileURLToPath(h))+"/"),_=U=>{U=k(U)?new URL(U):U;var J=b.readFileSync(U);return J},p=async(U,J=!0)=>{U=k(U)?new URL(U):U;var se=b.readFileSync(U,J?void 0:"utf8");return se},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),f=(U,J)=>{throw process.exitCode=U,J}}else if(a||c){try{v=new URL(".",h).href}catch{}c&&(_=U=>{var J=new XMLHttpRequest;return J.open("GET",U,!1),J.responseType="arraybuffer",J.send(null),new Uint8Array(J.response)}),p=async U=>{if(k(U))return new Promise((se,Ve)=>{var Pe=new XMLHttpRequest;Pe.open("GET",U,!0),Pe.responseType="arraybuffer",Pe.onload=()=>{if(Pe.status==200||Pe.status==0&&Pe.response){se(Pe.response);return}Ve(Pe.status)},Pe.onerror=Ve,Pe.send(null)});var J=await fetch(U,{credentials:"same-origin"});if(J.ok)return J.arrayBuffer();throw new Error(J.status+" : "+J.url)}}var z=console.log.bind(console),y=console.error.bind(console),w,S,L=!1,A,T,P,N,k=U=>U.startsWith("file://");function F(){var U=S.buffer;T=new Int8Array(U),P=new Uint8Array(U),t.HEAP32=new Int32Array(U),N=new Uint32Array(U),t.HEAPF64=new Float64Array(U),new BigInt64Array(U),new BigUint64Array(U)}function W(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)de(t.preRun.shift());ge(we)}function O(){je.k()}function M(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)fe(t.postRun.shift());ge(Ee)}var I=0,Y=null;function V(U){var J;I++,(J=t.monitorRunDependencies)==null||J.call(t,I)}function q(U){var se;if(I--,(se=t.monitorRunDependencies)==null||se.call(t,I),I==0&&Y){var J=Y;Y=null,J()}}function K(U){var se;(se=t.onAbort)==null||se.call(t,U),U="Aborted("+U+")",y(U),L=!0,U+=". Build with -sASSERTIONS for more info.";var J=new WebAssembly.RuntimeError(U);throw l(J),J}var te;function ee(){return t.locateFile?m("pls_wasm.wasm"):new URL("/pls/pls.wasm",Me&&Me.tagName.toUpperCase()==="SCRIPT"&&Me.src||new URL("pls.js",document.baseURI).href).href}function $(U){if(U==te&&w)return new Uint8Array(w);if(_)return _(U);throw"both async and sync fetching of the wasm failed"}async function ne(U){if(!w)try{var J=await p(U);return new Uint8Array(J)}catch{}return $(U)}async function ve(U,J){try{var se=await ne(U),Ve=await WebAssembly.instantiate(se,J);return Ve}catch(Pe){y(`failed to asynchronously prepare wasm: ${Pe}`),K(Pe)}}async function xe(U,J,se){if(!U&&typeof WebAssembly.instantiateStreaming=="function"&&!k(J)&&!d)try{var Ve=fetch(J,{credentials:"same-origin"}),Pe=await WebAssembly.instantiateStreaming(Ve,se);return Pe}catch(He){y(`wasm streaming compile failed: ${He}`),y("falling back to ArrayBuffer instantiation")}return ve(J,se)}function ce(){return{a:ur}}async function _e(){function U(He,Ze){return je=He.exports,S=je.j,F(),q(),je}V();function J(He){return U(He.instance)}var se=ce();if(t.instantiateWasm)return new Promise((He,Ze)=>{t.instantiateWasm(se,(Ue,Vt)=>{He(U(Ue))})});te??(te=ee());try{var Ve=await xe(w,te,se),Pe=J(Ve);return Pe}catch(He){return l(He),Promise.reject(He)}}class be{constructor(J){Ir(this,"name","ExitStatus");this.message=`Program terminated with exit(${J})`,this.status=J}}var ge=U=>{for(;U.length>0;)U.shift()(t)},Ee=[],fe=U=>Ee.push(U),we=[],de=U=>we.push(U),Ie=!0,ye=U=>xh(U),Se=()=>Eh(),De=()=>K(""),jt=0,Ge=()=>{Ie=!1,jt=0},lt={},Qe=U=>{if(U instanceof be||U=="unwind")return A;f(1,U)},Yt=()=>Ie||jt>0,pn=U=>{var J;A=U,Yt()||((J=t.onExit)==null||J.call(t,U),L=!0),f(U,new be(U))},Un=(U,J)=>{A=U,pn(U)},Qr=Un,$s=()=>{if(!Yt())try{Qr(A)}catch(U){Qe(U)}},el=U=>{if(!L)try{U(),$s()}catch(J){Qe(J)}},tl=()=>performance.now(),rl=(U,J)=>{if(lt[U]&&(clearTimeout(lt[U].id),delete lt[U]),!J)return 0;var se=setTimeout(()=>{delete lt[U],el(()=>ll(U,tl()))},J);return lt[U]={id:se,timeout_ms:J},0},nl=()=>Date.now(),pe=()=>2147483648,Re=(U,J)=>Math.ceil(U/J)*J,Ne=U=>{var J=S.buffer,se=(U-J.byteLength+65535)/65536|0;try{return S.grow(se),F(),1}catch{}},at=U=>{var J=P.length;U>>>=0;var se=pe();if(U>se)return!1;for(var Ve=1;Ve<=4;Ve*=2){var Pe=J*(1+.2/Ve);Pe=Math.min(Pe,U+100663296);var He=Math.min(se,Re(Math.max(U,Pe),65536)),Ze=Ne(He);if(Ze)return!0}return!1},kt=U=>52;function Zt(U,J,se,Ve){return 70}var Pt=[null,[],[]],Lt=typeof TextDecoder<"u"?new TextDecoder:void 0,Ke=(U,J=0,se=NaN)=>{for(var Ve=J+se,Pe=J;U[Pe]&&!(Pe>=Ve);)++Pe;if(Pe-J>16&&U.buffer&&Lt)return Lt.decode(U.subarray(J,Pe));for(var He="";J<Pe;){var Ze=U[J++];if(!(Ze&128)){He+=String.fromCharCode(Ze);continue}var Ue=U[J++]&63;if((Ze&224)==192){He+=String.fromCharCode((Ze&31)<<6|Ue);continue}var Vt=U[J++]&63;if((Ze&240)==224?Ze=(Ze&15)<<12|Ue<<6|Vt:Ze=(Ze&7)<<18|Ue<<12|Vt<<6|U[J++]&63,Ze<65536)He+=String.fromCharCode(Ze);else{var Rr=Ze-65536;He+=String.fromCharCode(55296|Rr>>10,56320|Rr&1023)}}return He},Fe=(U,J)=>{var se=Pt[U];J===0||J===10?((U===1?z:y)(Ke(se)),se.length=0):se.push(J)},_t=(U,J)=>U?Ke(P,U,J):"",vt=(U,J,se,Ve)=>{for(var Pe=0,He=0;He<se;He++){var Ze=N[J>>2],Ue=N[J+4>>2];J+=8;for(var Vt=0;Vt<Ue;Vt++)Fe(U,P[Ze+Vt]);Pe+=Ue}return N[Ve>>2]=Pe,0},it=U=>{var J=t["_"+U];return J},$e=(U,J)=>{T.set(U,J)},Wt=U=>{for(var J=0,se=0;se<U.length;++se){var Ve=U.charCodeAt(se);Ve<=127?J++:Ve<=2047?J+=2:Ve>=55296&&Ve<=57343?(J+=4,++se):J+=3}return J},Pr=(U,J,se,Ve)=>{if(!(Ve>0))return 0;for(var Pe=se,He=se+Ve-1,Ze=0;Ze<U.length;++Ze){var Ue=U.charCodeAt(Ze);if(Ue>=55296&&Ue<=57343){var Vt=U.charCodeAt(++Ze);Ue=65536+((Ue&1023)<<10)|Vt&1023}if(Ue<=127){if(se>=He)break;J[se++]=Ue}else if(Ue<=2047){if(se+1>=He)break;J[se++]=192|Ue>>6,J[se++]=128|Ue&63}else if(Ue<=65535){if(se+2>=He)break;J[se++]=224|Ue>>12,J[se++]=128|Ue>>6&63,J[se++]=128|Ue&63}else{if(se+3>=He)break;J[se++]=240|Ue>>18,J[se++]=128|Ue>>12&63,J[se++]=128|Ue>>6&63,J[se++]=128|Ue&63}}return J[se]=0,se-Pe},Be=(U,J,se)=>Pr(U,P,J,se),ue=U=>kh(U),wt=U=>{var J=Wt(U)+1,se=ue(J);return Be(U,se,J),se},sl=(U,J,se,Ve,Pe)=>{var He={string:Ot=>{var _n=0;return Ot!=null&&Ot!==0&&(_n=wt(Ot)),_n},array:Ot=>{var _n=ue(Ot.length);return $e(Ot,_n),_n}};function Ze(Ot){return J==="string"?_t(Ot):J==="boolean"?!!Ot:Ot}var Ue=it(U),Vt=[],Rr=0;if(Ve)for(var Mr=0;Mr<Ve.length;Mr++){var Sa=He[se[Mr]];Sa?(Rr===0&&(Rr=Se()),Vt[Mr]=Sa(Ve[Mr])):Vt[Mr]=Ve[Mr]}var al=Ue(...Vt);function Ah(Ot){return Rr!==0&&ye(Rr),Ze(Ot)}return al=Ah(al),al};t.noExitRuntime&&(Ie=t.noExitRuntime),t.print&&(z=t.print),t.printErr&&(y=t.printErr),t.wasmBinary&&(w=t.wasmBinary),t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.ccall=sl;var ur={c:De,b:Ge,d:rl,i:nl,e:at,h:kt,f:Zt,g:vt,a:pn},je=await _e();je.k,t._plsfit_wasm=je.l,t._free=je.m,t._malloc=je.n,t._plspredict_wasm=je.o,t._pcvpls_wasm=je.p;var ll=je.q,xh=je.r,kh=je.s,Eh=je.t;function ol(){if(I>0){Y=ol;return}if(W(),I>0){Y=ol;return}function U(){var J;t.calledRun=!0,!L&&(O(),s(t),(J=t.onRuntimeInitialized)==null||J.call(t),M())}t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),U()},1)):U()}function Sh(){if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.shift()()}return Sh(),ol(),e=o,e},ph=G('<p>Current release: <span>1.0.0</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a></p>'),_h=G(`<h2>Partial Least Squares regression</h2> <p>Interactive web-application for creating, testing and applying PLS models for multivariate regression
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>The application uses <a href="https://doi.org/10.1016/j.aca.2023.341096">Procrustes cross-validation</a> for optimization and quality check on the training stage.</p> <h3>v. 1.0.1</h3> <p class="release-info">released 18/05/2025</p> <ul><li>Fixed a bug caused wrong initial number of LVs when variables are excluded.</li> <li>Added limitation to avoid exclusion of all variables.</li> <li>Small improvements.</li></ul> <h3>v. 1.0.0</h3> <p class="release-info">released 17/05/2025</p> <ul><li>Initial release with basic functionality, including removing outliers, excluding non-important variables, etc.</li></ul>`,1);function wh(r,e){oe(e,!1);function t(a){a.train.calset=null,a.test.model=null,a.new.model=null,a.tab=0}function s(a){const c=Object.keys(a);if(!["date","tab","train","test","new"].every(p=>c.includes(p)))return!1;const d=["model","calset","calres","pvset","pvres","outliers","ncomp_selected"],u=Object.keys(a.train);if(!d.every(p=>u.includes(p)))return!1;const f=["model","testset","testres","outliers","ncomp_selected"],h=Object.keys(a.test);if(!f.every(p=>h.includes(p)))return!1;const v=["model","newset","newres","outliers"],m=Object.keys(a.new);return!!v.every(p=>m.includes(p))}function l(){return{date:Ns(new Date),tab:0,train:{model:0,calset:0,calres:0,pvset:0,pvres:0,outliers:[],exclvars:[],ncomp_selected:1},test:{model:0,testset:0,testres:0,outliers:[],ncomp_selected:1},new:{model:0,newset:0,newres:0,outliers:[],ncomp_selected:1}}}const o=[{name:"Train",label:"train",component:Mv},{name:"Test",label:"test",component:Jv},{name:"Predict",label:"new",component:ah}];Zi(),mh(r,{appID:"pls",appTitle:"PLS",appShortTitle:"PLS",appSlogan:"Partial least squares regression",WASM:bh,tabs:o,initSession:l,checkSession:s,resetSession:t,footer:d=>{var u=ph();C(d,u)},info:d=>{var u=_h();C(d,u)},$$slots:{footer:!0,info:!0}}),ae()}Ni(wh,{target:document.body});const yh=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pls.js.map
