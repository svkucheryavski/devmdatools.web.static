var Vh=Object.defineProperty;var Pa=Ke=>{throw TypeError(Ke)};var Oh=(Ke,Ie,ct)=>Ie in Ke?Vh(Ke,Ie,{enumerable:!0,configurable:!0,writable:!0,value:ct}):Ke[Ie]=ct;var Vr=(Ke,Ie,ct)=>Oh(Ke,typeof Ie!="symbol"?Ie+"":Ie,ct),vs=(Ke,Ie,ct)=>Ie.has(Ke)||Pa("Cannot "+ct);var fr=(Ke,Ie,ct)=>(vs(Ke,Ie,"read from private field"),ct?ct.call(Ke):Ie.get(Ke)),yn=(Ke,Ie,ct)=>Ie.has(Ke)?Pa("Cannot add the same private member more than once"):Ie instanceof WeakSet?Ie.add(Ke):Ie.set(Ke,ct),hs=(Ke,Ie,ct,Or)=>(vs(Ke,Ie,"write to private field"),Or?Or.call(Ke,ct):Ie.set(Ke,ct),ct),Ra=(Ke,Ie,ct)=>(vs(Ke,Ie,"access private method"),ct);(function(){"use strict";var yr,Zr,pn,Yn,Ma,za;var Ke=document.createElement("style");Ke.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-1986c5z{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-1986c5z:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-1986c5z:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-1986c5z:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-1986c5z{display:none}.control-element.error.svelte-1986c5z{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-1986c5z{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-1986c5z>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-1986c5z>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-1986c5z>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-1986c5z>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-1986c5z .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-1986c5z .range-value_left,.control-element.svelte-1986c5z .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-1986c5z .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-1986c5z .button-cancel:hover{background-color:var(--warning-color, #dc143c)}.control-element.svelte-1986c5z .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-1986c5z .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-up{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="110" x2="55" y2="10"/><line x1="20" y1="50" x2="55" y2="10"/><line x1="90" y1="50" x2="55" y2="10"/></svg>')}.control-element.svelte-1986c5z .button-up:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-down{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="100"/><line x1="20" y1="60" x2="55" y2="100"/><line x1="90" y1="60" x2="55" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-down:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-download{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="50" y1="0" x2="50" y2="100"/><line x1="10" y1="60" x2="50" y2="100"/><line x1="90" y1="60" x2="50" y2="100"/></svg>')}.control-element.svelte-1986c5z .button-download:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-add{background-image:url('data:image/svg+xml;utf8,<svg viewBox="0 0 110 110" style="stroke:%23fafafa;stroke-width:1.1em;" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><line x1="55" y1="0" x2="55" y2="110"/><line x1="0" y1="55" x2="110" y2="55"/></svg>')}.control-element.svelte-1986c5z .button-add:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .button-settings{background-size:75%;background-image:url('data:image/svg+xml;utf8,<svg width="16" height="16" viewBox="0 0 16 16"  style="stroke:none;stroke-width:1px;" fill="%23fafafa" stroke-linecap="round" stroke-linejoin="round" xmlns="http://www.w3.org/2000/svg"><path d="M12.2418 6.58543L6.27026 12.5584C5.94986 12.8788 5.54841 13.1061 5.10883 13.216L2.81783 13.7887C2.45164 13.8803 2.11994 13.5486 2.21149 13.1824L2.78424 10.8914C2.89413 10.4518 3.12143 10.0504 3.44183 9.72996L9.41337 3.75701L12.2418 6.58543ZM13.6567 2.3435C14.4378 3.12455 14.4378 4.39088 13.6567 5.17193L12.9489 5.87833L10.1205 3.0499L10.8283 2.3435C11.6093 1.56245 12.8757 1.56245 13.6567 2.3435Z"/></svg>')}.control-element.svelte-1986c5z .button-settings:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-1986c5z .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-1986c5z .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-1986c5z .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-1986c5z .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-1986c5z .textinput>input:active::placeholder,.control-element.svelte-1986c5z .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-1986c5z .textinput>input:focus,.control-element.svelte-1986c5z .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .textinput.error>input,.control-element.svelte-1986c5z .textinput.error>input:focus,.control-element.svelte-1986c5z .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-1986c5z .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-1986c5z .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-1986c5z .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-1986c5z .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-1986c5z .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-1986c5z .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-1986c5z .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}p.svelte-16w7odi{line-height:1.5em}span.svelte-16w7odi{color:#a0a0a0}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.exclvars.svelte-181kelh{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}table.svelte-8wnifa{width:100%;border-collapse:collapse}tr.svelte-8wnifa{width:100%}th.svelte-8wnifa{border-bottom:1px solid #a0a0a0}th.svelte-8wnifa,td.svelte-8wnifa{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}td.svelte-8wnifa:first-of-type{width:25%}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}div.svelte-17oamay{width:100%;height:100%}div.svelte-17oamay .plot .axes{cursor:crosshair}div.svelte-17oamay .plot .axes-content rect{pointer-events:none}.plot-controls-area>.plot-selector-fom,.plot-controls-area>.plot-selector-loadings{margin-top:1em}.info-text.svelte-3v2vv7{line-height:1.5em}.info-text.svelte-3v2vv7>span{vertical-align:top;color:#a0a0a0}.info-text.svelte-3v2vv7>.file-name:where(.svelte-3v2vv7){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.app-container.svelte-b7gdku{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-b7gdku{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-b7gdku{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-b7gdku>div:where(.svelte-b7gdku){border-radius:.25rem}.app-controls.svelte-b7gdku>.result-stats:where(.svelte-b7gdku){background:#e8e8e8}.help-text.svelte-b7gdku{margin-top:.25rem}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku),.help-text.svelte-b7gdku>div:where(.svelte-b7gdku){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-b7gdku table:where(.svelte-b7gdku){border-collapse:collapse}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) td:where(.svelte-b7gdku){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) thead:where(.svelte-b7gdku) tr:where(.svelte-b7gdku) td:where(.svelte-b7gdku){font-weight:700;background:#f8f4e0}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) td:where(.svelte-b7gdku):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-b7gdku table:where(.svelte-b7gdku) tbody:where(.svelte-b7gdku) td:where(.svelte-b7gdku):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-b7gdku>p:where(.svelte-b7gdku):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}.result-stats.svelte-b7gdku{padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}@media (min-width:1300px){.app-container.svelte-b7gdku{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-b7gdku{grid-template-columns:min(330px,30%) 1fr}}.app-container.svelte-1qb9qou{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1qb9qou{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1qb9qou{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1qb9qou>div:where(.svelte-1qb9qou){border-radius:.25rem}.help-text.svelte-1qb9qou{margin-top:.25rem}.help-text.svelte-1qb9qou>p:where(.svelte-1qb9qou),.help-text.svelte-1qb9qou>div:where(.svelte-1qb9qou){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1qb9qou table:where(.svelte-1qb9qou){border-collapse:collapse}.help-text.svelte-1qb9qou table:where(.svelte-1qb9qou) td:where(.svelte-1qb9qou){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1qb9qou table:where(.svelte-1qb9qou) thead:where(.svelte-1qb9qou) tr:where(.svelte-1qb9qou) td:where(.svelte-1qb9qou){font-weight:700;background:#f8f4e0}.help-text.svelte-1qb9qou table:where(.svelte-1qb9qou) td:where(.svelte-1qb9qou):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1qb9qou table:where(.svelte-1qb9qou) tbody:where(.svelte-1qb9qou) td:where(.svelte-1qb9qou):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1qb9qou>p:where(.svelte-1qb9qou):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1qb9qou>p:where(.svelte-1qb9qou):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1qb9qou{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1qb9qou{grid-template-columns:min(330px,30%) 1fr}}.page.svelte-1cyr8za{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1cyr8za{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1cyr8za{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1cyr8za{width:3.5rem;margin:.25rem;padding:.5rem;grid-area:logo}.header-group.svelte-1cyr8za>h1:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1cyr8za>p:where(.svelte-1cyr8za){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1cyr8za{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1cyr8za>div:where(.svelte-1cyr8za){height:100%}footer.svelte-1cyr8za{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) input:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .session-message:where(.svelte-1cyr8za){color:silver;padding-right:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .session-message:where(.svelte-1cyr8za){color:#fafafa}footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session.no-buttons:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){display:none}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za){font-size:.9rem;background:#5e6062;color:silver;box-shadow:none;padding:0;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke-width:.75em;stroke-linecap:round;stroke-linejoin:round;stroke:silver}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za){background:#35332d}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .clear-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .upload-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za),footer.svelte-1cyr8za .session:where(.svelte-1cyr8za):hover .download-button:where(.svelte-1cyr8za) svg:where(.svelte-1cyr8za){stroke:#fafafa}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za){margin-left:.5em}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .upload-button:where(.svelte-1cyr8za):hover,footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .download-button:where(.svelte-1cyr8za):hover{background-color:#6eb8ff}footer.svelte-1cyr8za .session:where(.svelte-1cyr8za) .clear-button:where(.svelte-1cyr8za):hover{background-color:#dc143c}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1cyr8za .info:where(.svelte-1cyr8za) .button-info:where(.svelte-1cyr8za):hover{background-color:#f7db89}footer.svelte-1cyr8za p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1cyr8za span,footer.svelte-1cyr8za a{color:#f8ebc5}.hidden.svelte-1cyr8za{display:none}.nav.svelte-1cyr8za,.nav.svelte-1cyr8za :where(.svelte-1cyr8za){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1cyr8za{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1cyr8za{list-style:none;margin:0;border-bottom:5px solid transparent}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1cyr8za>button:where(.svelte-1cyr8za)>span{color:#888}.nav-item.svelte-1cyr8za:hover{border-bottom:5px solid #80888f50}.nav-item.svelte-1cyr8za:hover>button:where(.svelte-1cyr8za){border-top-left-radius:5px;border-top-right-radius:5px;background:#00000010}.nav-item.selected.svelte-1cyr8za{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1cyr8za>button:where(.svelte-1cyr8za){font-weight:700;cursor:default}.nav-item.selected.svelte-1cyr8za:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1cyr8za>header:where(.svelte-1cyr8za){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1cyr8za>footer:where(.svelte-1cyr8za){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1cyr8za{width:900px}.info-container.svelte-1cyr8za>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1cyr8za>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1cyr8za>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1cyr8za>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1cyr8za>ul{margin:0}.info-container.svelte-1cyr8za>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1cyr8za>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1cyr8za a{color:#ae8032}.info-container.svelte-1cyr8za a:hover{color:#eb9707}.info-container.svelte-1cyr8za:last-child{padding-bottom:1rem}
/*$vite$:1*/`,document.head.appendChild(Ke);var Ie=typeof document<"u"?document.currentScript:null;const ct=!1;var Or=Array.isArray,qa=Array.prototype.indexOf,Un=Array.from,Ia=Object.defineProperty,vr=Object.getOwnPropertyDescriptor,ms=Object.getOwnPropertyDescriptors,ja=Object.prototype,Fa=Array.prototype,Xn=Object.getPrototypeOf,gs=Object.isExtensible;function Br(n){return typeof n=="function"}const gt=()=>{};function Va(n){return typeof(n==null?void 0:n.then)=="function"}function Oa(n){return n()}function xn(n){for(var e=0;e<n.length;e++)n[e]()}function Gn(n,e){if(Array.isArray(n))return n;if(e===void 0||!(Symbol.iterator in n))return Array.from(n);const t=[];for(const l of n)if(t.push(l),t.length===e)break;return t}const Ht=2,bs=4,kn=8,En=16,lr=32,Dr=64,Kn=128,Rt=256,Sn=512,Vt=1024,sr=2048,xr=4096,or=8192,Jn=16384,Qn=32768,Yr=65536,Ba=1<<17,Da=1<<19,ps=1<<20,Zn=1<<21,hr=Symbol("$state"),ws=Symbol("legacy props"),Ya=Symbol("");function _s(n){return n===this.v}function ys(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Wa(n,e){return n!==e}function $n(n){return!ys(n,this.v)}function Ha(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ua(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xa(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Ga(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ka(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ja(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Za(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Wr=!1,$a=!1;function ei(){Wr=!0}const el=1,tl=2,xs=4,ti=8,ri=16,ni=1,li=2,si=4,oi=8,ai=16,ii=4,ks=1,ci=2,pt=Symbol(),ui="http://www.w3.org/1999/xhtml";function Es(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let We=null;function Cn(n){We=n}function At(n){return Ss().get(n)}function di(n,e){return Ss().set(n,e),e}function ie(n,e=!1,t){var l=We={p:We,c:null,d:!1,e:null,m:!1,s:n,x:null,l:null};Wr&&!e&&(We.l={s:null,u:null,r1:[],r2:Er(!1)}),qs(()=>{l.d=!0})}function ce(n){const e=We;if(e!==null){const a=e.e;if(a!==null){var t=Oe,l=je;e.e=null;try{for(var s=0;s<a.length;s++){var o=a[s];Ot(o.effect),Nt(o.reaction),tn(o.fn)}}finally{Ot(t),Nt(l)}}We=e.p,e.m=!0}return{}}function kr(){return!Wr||We!==null&&We.l===null}function Ss(n){return We===null&&Es(),We.c??(We.c=new Map(fi(We)||void 0))}function fi(n){let e=n.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function Je(n){if(typeof n!="object"||n===null||hr in n)return n;const e=Xn(n);if(e!==ja&&e!==Fa)return n;var t=new Map,l=Or(n),s=ne(0),o=je,a=c=>{var d=je;Nt(o);var u=c();return Nt(d),u};return l&&t.set("length",ne(n.length)),new Proxy(n,{defineProperty(c,d,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ja();var f=t.get(d);return f===void 0?f=a(()=>{var v=ne(u.value);return t.set(d,v),v}):B(f,u.value,!0),!0},deleteProperty(c,d){var u=t.get(d);if(u===void 0){if(d in c){const h=a(()=>ne(pt));t.set(d,h),rl(s)}}else{if(l&&typeof d=="string"){var f=t.get("length"),v=Number(d);Number.isInteger(v)&&v<f.v&&B(f,v)}B(u,pt),rl(s)}return!0},get(c,d,u){var m;if(d===hr)return n;var f=t.get(d),v=d in c;if(f===void 0&&(!v||(m=vr(c,d))!=null&&m.writable)&&(f=a(()=>{var b=Je(v?c[d]:pt),p=ne(b);return p}),t.set(d,f)),f!==void 0){var h=r(f);return h===pt?void 0:h}return Reflect.get(c,d,u)},getOwnPropertyDescriptor(c,d){var u=Reflect.getOwnPropertyDescriptor(c,d);if(u&&"value"in u){var f=t.get(d);f&&(u.value=r(f))}else if(u===void 0){var v=t.get(d),h=v==null?void 0:v.v;if(v!==void 0&&h!==pt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(c,d){var h;if(d===hr)return!0;var u=t.get(d),f=u!==void 0&&u.v!==pt||Reflect.has(c,d);if(u!==void 0||Oe!==null&&(!f||(h=vr(c,d))!=null&&h.writable)){u===void 0&&(u=a(()=>{var m=f?Je(c[d]):pt,b=ne(m);return b}),t.set(d,u));var v=r(u);if(v===pt)return!1}return f},set(c,d,u,f){var y;var v=t.get(d),h=d in c;if(l&&d==="length")for(var m=u;m<v.v;m+=1){var b=t.get(m+"");b!==void 0?B(b,pt):m in c&&(b=a(()=>ne(pt)),t.set(m+"",b))}if(v===void 0)(!h||(y=vr(c,d))!=null&&y.writable)&&(v=a(()=>ne(void 0)),B(v,Je(u)),t.set(d,v));else{h=v.v!==pt;var p=a(()=>Je(u));B(v,p)}var w=Reflect.getOwnPropertyDescriptor(c,d);if(w!=null&&w.set&&w.set.call(f,u),!h){if(l&&typeof d=="string"){var _=t.get("length"),A=Number(d);Number.isInteger(A)&&A>=_.v&&B(_,A+1)}rl(s)}return!0},ownKeys(c){r(s);var d=Reflect.ownKeys(c).filter(v=>{var h=t.get(v);return h===void 0||h.v!==pt});for(var[u,f]of t)f.v!==pt&&!(u in c)&&d.push(u);return d},setPrototypeOf(){Qa()}})}function rl(n,e=1){B(n,n.v+e)}function Hr(n){var e=Ht|sr,t=je!==null&&(je.f&Ht)!==0?je:null;return Oe===null||t!==null&&(t.f&Rt)!==0?e|=Rt:Oe.f|=ps,{ctx:We,deps:null,effects:null,equals:_s,f:e,fn:n,reactions:null,rv:0,v:null,wv:0,parent:t??Oe}}function g(n){const e=Hr(n);return Hs(e),e}function Cs(n){const e=Hr(n);return e.equals=$n,e}function As(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)ar(e[t])}}function vi(n){for(var e=n.parent;e!==null;){if((e.f&Ht)===0)return e;e=e.parent}return null}function Ls(n){var e,t=Oe;Ot(vi(n));try{As(n),e=Ks(n)}finally{Ot(t)}return e}function Ts(n){var e=Ls(n);if(n.equals(e)||(n.v=e,n.wv=Xs()),!Kr){var t=(mr||(n.f&Rt)!==0)&&n.deps!==null?xr:Vt;tr(n,t)}}const en=new Map;function Er(n,e){var t={f:0,v:n,reactions:null,equals:_s,rv:0,wv:0};return t}function ne(n,e){const t=Er(n);return Hs(t),t}function An(n,e=!1,t=!0){var s;const l=Er(n);return e||(l.equals=$n),Wr&&t&&We!==null&&We.l!==null&&((s=We.l).s??(s.s=[])).push(l),l}function B(n,e,t=!1){je!==null&&!er&&kr()&&(je.f&(Ht|En))!==0&&!(bt!=null&&bt[1].includes(n)&&bt[0]===je)&&Za();let l=t?Je(e):e;return Ur(n,l)}function Ur(n,e){if(!n.equals(e)){var t=n.v;Kr?en.set(n,e):en.set(n,t),n.v=e,(n.f&Ht)!==0&&((n.f&sr)!==0&&Ls(n),tr(n,(n.f&Rt)===0?Vt:xr)),n.wv=Xs(),zs(n,sr),kr()&&Oe!==null&&(Oe.f&Vt)!==0&&(Oe.f&(lr|Dr))===0&&(Bt===null?Ei([n]):Bt.push(n))}return e}function zs(n,e){var t=n.reactions;if(t!==null)for(var l=kr(),s=t.length,o=0;o<s;o++){var a=t[o],c=a.f;(c&sr)===0&&(!l&&a===Oe||(tr(a,e),(c&(Vt|Rt))!==0&&((c&Ht)!==0?zs(a,xr):cl(a))))}}let hi=!1;var nl,Ns,Ps,Rs;function mi(){if(nl===void 0){nl=window,Ns=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;Ps=vr(e,"firstChild").get,Rs=vr(e,"nextSibling").get,gs(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),gs(t)&&(t.__t=void 0)}}function ll(n=""){return document.createTextNode(n)}function Mt(n){return Ps.call(n)}function Ln(n){return Rs.call(n)}function D(n,e){return Mt(n)}function J(n,e){{var t=Mt(n);return t instanceof Comment&&t.data===""?Ln(t):t}}function F(n,e=1,t=!1){let l=n;for(;e--;)l=Ln(l);return l}function gi(n){n.textContent=""}function Ms(n){Oe===null&&je===null&&Xa(),je!==null&&(je.f&Rt)!==0&&Oe===null&&Ua(),Kr&&Ha()}function bi(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Xr(n,e,t,l=!0){var s=Oe,o={ctx:We,deps:null,nodes_start:null,nodes_end:null,f:n|sr,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(t)try{il(o),o.f|=Qn}catch(d){throw ar(o),d}else e!==null&&cl(o);var a=t&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(ps|Kn))===0;if(!a&&l&&(s!==null&&bi(o,s),je!==null&&(je.f&Ht)!==0)){var c=je;(c.effects??(c.effects=[])).push(o)}return o}function qs(n){const e=Xr(kn,null,!1);return tr(e,Vt),e.teardown=n,e}function Te(n){Ms();var e=Oe!==null&&(Oe.f&lr)!==0&&We!==null&&!We.m;if(e){var t=We;(t.e??(t.e=[])).push({fn:n,effect:Oe,reaction:je})}else{var l=tn(n);return l}}function pi(n){return Ms(),sl(n)}function wi(n){const e=Xr(Dr,n,!0);return(t={})=>new Promise(l=>{t.outro?ir(e,()=>{ar(e),l(void 0)}):(ar(e),l(void 0))})}function tn(n){return Xr(bs,n,!1)}function sl(n){return Xr(kn,n,!0)}function Z(n,e=[],t=Hr){const l=e.map(t);return Sr(()=>n(...l.map(r)))}function Sr(n,e=0){return Xr(kn|En|e,n,!0)}function $t(n,e=!0){return Xr(kn|lr,n,!0,e)}function Is(n){var e=n.teardown;if(e!==null){const t=Kr,l=je;Ws(!0),Nt(null);try{e.call(null)}finally{Ws(t),Nt(l)}}}function js(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var l=t.next;(t.f&Dr)!==0?t.parent=null:ar(t,e),t=l}}function _i(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&lr)===0&&ar(e),e=t}}function ar(n,e=!0){var t=!1;(e||(n.f&Da)!==0)&&n.nodes_start!==null&&n.nodes_end!==null&&(Fs(n.nodes_start,n.nodes_end),t=!0),js(n,e&&!t),Nn(n,0),tr(n,Jn);var l=n.transitions;if(l!==null)for(const o of l)o.stop();Is(n);var s=n.parent;s!==null&&s.first!==null&&Vs(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function Fs(n,e){for(;n!==null;){var t=n===e?null:Ln(n);n.remove(),n=t}}function Vs(n){var e=n.parent,t=n.prev,l=n.next;t!==null&&(t.next=l),l!==null&&(l.prev=t),e!==null&&(e.first===n&&(e.first=l),e.last===n&&(e.last=t))}function ir(n,e){var t=[];ol(n,t,!0),Os(t,()=>{ar(n),e&&e()})}function Os(n,e){var t=n.length;if(t>0){var l=()=>--t||e();for(var s of n)s.out(l)}else e()}function ol(n,e,t){if((n.f&or)===0){if(n.f^=or,n.transitions!==null)for(const a of n.transitions)(a.is_global||t)&&e.push(a);for(var l=n.first;l!==null;){var s=l.next,o=(l.f&Yr)!==0||(l.f&lr)!==0;ol(l,e,o?t:!1),l=s}}}function Gr(n){Bs(n,!0)}function Bs(n,e){if((n.f&or)!==0){n.f^=or;for(var t=n.first;t!==null;){var l=t.next,s=(t.f&Yr)!==0||(t.f&lr)!==0;Bs(t,s?e:!1),t=l}if(n.transitions!==null)for(const o of n.transitions)(o.is_global||e)&&o.in()}}let rn=[],al=[];function Ds(){var n=rn;rn=[],xn(n)}function yi(){var n=al;al=[],xn(n)}function nn(n){rn.length===0&&queueMicrotask(Ds),rn.push(n)}function xi(){rn.length>0&&Ds(),al.length>0&&yi()}function ki(n){var e=Oe;if((e.f&Qn)===0){if((e.f&Kn)===0)throw n;e.fn(n)}else Ys(n,e)}function Ys(n,e){for(;e!==null;){if((e.f&Kn)!==0)try{e.fn(n);return}catch{}e=e.parent}throw n}let ln=!1,sn=null,Cr=!1,Kr=!1;function Ws(n){Kr=n}let on=[],Bh=[],je=null,er=!1;function Nt(n){je=n}let Oe=null;function Ot(n){Oe=n}let bt=null;function Hs(n){je!==null&&je.f&Zn&&(bt===null?bt=[je,[n]]:bt[1].push(n))}let Lt=null,qt=0,Bt=null;function Ei(n){Bt=n}let Us=1,Tn=0,mr=!1;function Xs(){return++Us}function zn(n){var v;var e=n.f;if((e&sr)!==0)return!0;if((e&xr)!==0){var t=n.deps,l=(e&Rt)!==0;if(t!==null){var s,o,a=(e&Sn)!==0,c=l&&Oe!==null&&!mr,d=t.length;if(a||c){var u=n,f=u.parent;for(s=0;s<d;s++)o=t[s],(a||!((v=o==null?void 0:o.reactions)!=null&&v.includes(u)))&&(o.reactions??(o.reactions=[])).push(u);a&&(u.f^=Sn),c&&f!==null&&(f.f&Rt)===0&&(u.f^=Rt)}for(s=0;s<d;s++)if(o=t[s],zn(o)&&Ts(o),o.wv>n.wv)return!0}(!l||Oe!==null&&!mr)&&tr(n,Vt)}return!1}function Gs(n,e,t=!0){var l=n.reactions;if(l!==null)for(var s=0;s<l.length;s++){var o=l[s];bt!=null&&bt[1].includes(n)&&bt[0]===je||((o.f&Ht)!==0?Gs(o,e,!1):e===o&&(t?tr(o,sr):(o.f&Vt)!==0&&tr(o,xr),cl(o)))}}function Ks(n){var m;var e=Lt,t=qt,l=Bt,s=je,o=mr,a=bt,c=We,d=er,u=n.f;Lt=null,qt=0,Bt=null,mr=(u&Rt)!==0&&(er||!Cr||je===null),je=(u&(lr|Dr))===0?n:null,bt=null,Cn(n.ctx),er=!1,Tn++,n.f|=Zn;try{var f=(0,n.fn)(),v=n.deps;if(Lt!==null){var h;if(Nn(n,qt),v!==null&&qt>0)for(v.length=qt+Lt.length,h=0;h<Lt.length;h++)v[qt+h]=Lt[h];else n.deps=v=Lt;if(!mr)for(h=qt;h<v.length;h++)((m=v[h]).reactions??(m.reactions=[])).push(n)}else v!==null&&qt<v.length&&(Nn(n,qt),v.length=qt);if(kr()&&Bt!==null&&!er&&v!==null&&(n.f&(Ht|xr|sr))===0)for(h=0;h<Bt.length;h++)Gs(Bt[h],n);return s!==null&&s!==n&&(Tn++,Bt!==null&&(l===null?l=Bt:l.push(...Bt))),f}catch(b){ki(b)}finally{Lt=e,qt=t,Bt=l,je=s,mr=o,bt=a,Cn(c),er=d,n.f^=Zn}}function Si(n,e){let t=e.reactions;if(t!==null){var l=qa.call(t,n);if(l!==-1){var s=t.length-1;s===0?t=e.reactions=null:(t[l]=t[s],t.pop())}}t===null&&(e.f&Ht)!==0&&(Lt===null||!Lt.includes(e))&&(tr(e,xr),(e.f&(Rt|Sn))===0&&(e.f^=Sn),As(e),Nn(e,0))}function Nn(n,e){var t=n.deps;if(t!==null)for(var l=e;l<t.length;l++)Si(n,t[l])}function il(n){var e=n.f;if((e&Jn)===0){tr(n,Vt);var t=Oe,l=Cr;Oe=n,Cr=!0;try{(e&En)!==0?_i(n):js(n),Is(n);var s=Ks(n);n.teardown=typeof s=="function"?s:null,n.wv=Us;var o;ct&&$a&&(n.f&sr)!==0&&n.deps}finally{Cr=l,Oe=t}}}function Ci(){try{Ga()}catch(n){if(sn!==null)Ys(n,sn);else throw n}}function Js(){var n=Cr;try{var e=0;for(Cr=!0;on.length>0;){e++>1e3&&Ci();var t=on,l=t.length;on=[];for(var s=0;s<l;s++){var o=Li(t[s]);Ai(o)}en.clear()}}finally{ln=!1,Cr=n,sn=null}}function Ai(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var l=n[t];(l.f&(Jn|or))===0&&zn(l)&&(il(l),l.deps===null&&l.first===null&&l.nodes_start===null&&(l.teardown===null?Vs(l):l.fn=null))}}function cl(n){ln||(ln=!0,queueMicrotask(Js));for(var e=sn=n;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Dr|lr))!==0){if((t&Vt)===0)return;e.f^=Vt}}on.push(e)}function Li(n){for(var e=[],t=n;t!==null;){var l=t.f,s=(l&(lr|Dr))!==0,o=s&&(l&Vt)!==0;if(!o&&(l&or)===0){(l&bs)!==0?e.push(t):s?t.f^=Vt:zn(t)&&il(t);var a=t.first;if(a!==null){t=a;continue}}var c=t.parent;for(t=t.next;t===null&&c!==null;)t=c.next,c=c.parent}return e}function Ti(n){for(var e;;){if(xi(),on.length===0)return ln=!1,sn=null,e;ln=!0,Js()}}function r(n){var e=n.f,t=(e&Ht)!==0;if(je!==null&&!er){if(!(bt!=null&&bt[1].includes(n))||bt[0]!==je){var l=je.deps;n.rv<Tn&&(n.rv=Tn,Lt===null&&l!==null&&l[qt]===n?qt++:Lt===null?Lt=[n]:(!mr||!Lt.includes(n))&&Lt.push(n))}}else if(t&&n.deps===null&&n.effects===null){var s=n,o=s.parent;o!==null&&(o.f&Rt)===0&&(s.f^=Rt)}return t&&(s=n,zn(s)&&Ts(s)),Kr&&en.has(n)?en.get(n):n.v}function Ut(n){var e=er;try{return er=!0,n()}finally{er=e}}const zi=-7169;function tr(n,e){n.f=n.f&zi|e}function Ni(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(hr in n)ul(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&hr in t&&ul(t)}}}function ul(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let l in n)try{ul(n[l],e)}catch{}const t=Xn(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const l=ms(t);for(let s in l){const o=l[s].get;if(o)try{o.call(n)}catch{}}}}}const Pi=["touchstart","touchmove"];function Ri(n){return Pi.includes(n)}let Qs=!1;function Mi(){Qs||(Qs=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function dl(n){var e=je,t=Oe;Nt(null),Ot(null);try{return n()}finally{Nt(e),Ot(t)}}function qi(n,e,t,l=t){n.addEventListener(e,()=>dl(t));const s=n.__on_r;s?n.__on_r=()=>{s(),l(!0)}:n.__on_r=()=>l(!0),Mi()}const Zs=new Set,fl=new Set;function Ii(n,e,t,l={}){function s(o){if(l.capture||an.call(e,o),!o.cancelBubble)return dl(()=>t==null?void 0:t.call(this,o))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?nn(()=>{e.addEventListener(n,s,l)}):e.addEventListener(n,s,l),s}function Ar(n,e,t,l,s){var o={capture:l,passive:s},a=Ii(n,e,t,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&qs(()=>{e.removeEventListener(n,a,o)})}function rt(n){for(var e=0;e<n.length;e++)Zs.add(n[e]);for(var t of fl)t(n)}function an(n){var A;var e=this,t=e.ownerDocument,l=n.type,s=((A=n.composedPath)==null?void 0:A.call(n))||[],o=s[0]||n.target,a=0,c=n.__root;if(c){var d=s.indexOf(c);if(d!==-1&&(e===document||e===window)){n.__root=e;return}var u=s.indexOf(e);if(u===-1)return;d<=u&&(a=d)}if(o=s[a]||n.target,o!==e){Ia(n,"currentTarget",{configurable:!0,get(){return o||t}});var f=je,v=Oe;Nt(null),Ot(null);try{for(var h,m=[];o!==null;){var b=o.assignedSlot||o.parentNode||o.host||null;try{var p=o["__"+l];if(p!=null&&(!o.disabled||n.target===o))if(Or(p)){var[w,..._]=p;w.apply(o,[n,..._])}else p.call(o,n)}catch(y){h?m.push(y):h=y}if(n.cancelBubble||b===e||b===null)break;o=b}if(h){for(let y of m)queueMicrotask(()=>{throw y});throw h}}finally{n.__root=e,delete n.currentTarget,Nt(f),Ot(v)}}}function vl(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function Jr(n,e){var t=Oe;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function G(n,e){var t=(e&ks)!==0,l=(e&ci)!==0,s,o=!n.startsWith("<!>");return()=>{s===void 0&&(s=vl(o?n:"<!>"+n),t||(s=Mt(s)));var a=l||Ns?document.importNode(s,!0):s.cloneNode(!0);if(t){var c=Mt(a),d=a.lastChild;Jr(c,d)}else Jr(a,a);return a}}function ji(n,e,t="svg"){var l=!n.startsWith("<!>"),s=(e&ks)!==0,o=`<${t}>${l?n:"<!>"+n}</${t}>`,a;return()=>{if(!a){var c=vl(o),d=Mt(c);if(s)for(a=document.createDocumentFragment();Mt(d);)a.appendChild(Mt(d));else a=Mt(d)}var u=a.cloneNode(!0);if(s){var f=Mt(u),v=u.lastChild;Jr(f,v)}else Jr(u,u);return u}}function se(n,e){return ji(n,e,"svg")}function oe(){var n=document.createDocumentFragment(),e=document.createComment(""),t=ll();return n.append(e,t),Jr(e,t),n}function S(n,e){n!==null&&n.before(e)}let hl=!0;function be(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function Fi(n,e){return Vi(n,e)}const Qr=new Map;function Vi(n,{target:e,anchor:t,props:l={},events:s,context:o,intro:a=!0}){mi();var c=new Set,d=v=>{for(var h=0;h<v.length;h++){var m=v[h];if(!c.has(m)){c.add(m);var b=Ri(m);e.addEventListener(m,an,{passive:b});var p=Qr.get(m);p===void 0?(document.addEventListener(m,an,{passive:b}),Qr.set(m,1)):Qr.set(m,p+1)}}};d(Un(Zs)),fl.add(d);var u=void 0,f=wi(()=>{var v=t??e.appendChild(ll());return $t(()=>{if(o){ie({});var h=We;h.c=o}s&&(l.$$events=s),hl=a,u=n(v,l)||{},hl=!0,o&&ce()}),()=>{var b;for(var h of c){e.removeEventListener(h,an);var m=Qr.get(h);--m===0?(document.removeEventListener(h,an),Qr.delete(h)):Qr.set(h,m)}fl.delete(d),v!==t&&((b=v.parentNode)==null||b.removeChild(v))}});return Oi.set(u,f),u}let Oi=new WeakMap;const ml=0,Pn=1,gl=2;function bl(n,e,t,l,s){var o=n,a=kr(),c=We,d=pt,u,f,v,h=a?Er(void 0):An(void 0,!1,!1),m=a?Er(void 0):An(void 0,!1,!1),b=!1;function p(_,A){b=!0,A&&(Ot(w),Nt(w),Cn(c));try{_===ml&&t&&(u?Gr(u):u=$t(()=>t(o))),_===gl&&s&&(v?Gr(v):v=$t(()=>s(o,m))),_!==ml&&u&&ir(u,()=>u=null),_!==Pn&&f&&ir(f,()=>f=null),_!==gl&&v&&ir(v,()=>v=null)}finally{A&&(Cn(null),Nt(null),Ot(null),Ti())}}var w=Sr(()=>{if(d!==(d=e())){if(Va(d)){var _=d;b=!1,_.then(A=>{_===d&&(Ur(h,A),p(Pn,!0))},A=>{if(_===d&&(Ur(m,A),p(gl,!0),!s))throw m.v}),nn(()=>{b||p(ml,!0)})}else Ur(h,d),p(Pn,!1);return()=>d=pt}})}function U(n,e,[t,l]=[0,0]){var s=n,o=null,a=null,c=pt,d=t>0?Yr:0,u=!1;const f=(h,m=!0)=>{u=!0,v(m,h)},v=(h,m)=>{c!==(c=h)&&(c?(o?Gr(o):m&&(o=$t(()=>m(s))),a&&ir(a,()=>{a=null})):(a?Gr(a):m&&(a=$t(()=>m(s,[t+1,l]))),o&&ir(o,()=>{o=null})))};Sr(()=>{u=!1,e(f),u||v(null,null)},d)}function cn(n,e,t){var l=n,s=pt,o,a=kr()?Wa:ys;Sr(()=>{a(s,s=e())&&(o&&ir(o),o=$t(()=>t(l)))})}function Ne(n,e){return e}function Bi(n,e,t,l){for(var s=[],o=e.length,a=0;a<o;a++)ol(e[a].e,s,!0);var c=o>0&&s.length===0&&t!==null;if(c){var d=t.parentNode;gi(d),d.append(t),l.clear(),gr(n,e[0].prev,e[o-1].next)}Os(s,()=>{for(var u=0;u<o;u++){var f=e[u];c||(l.delete(f.k),gr(n,f.prev,f.next)),ar(f.e,!c)}})}function ze(n,e,t,l,s,o=null){var a=n,c={flags:e,items:new Map,first:null},d=(e&xs)!==0;if(d){var u=n;a=u.appendChild(ll())}var f=null,v=!1,h=Cs(()=>{var m=t();return Or(m)?m:m==null?[]:Un(m)});Sr(()=>{var m=r(h),b=m.length;v&&b===0||(v=b===0,Di(m,c,a,s,e,l,t),o!==null&&(b===0?f?Gr(f):f=$t(()=>o(a)):f!==null&&ir(f,()=>{f=null})),r(h))})}function Di(n,e,t,l,s,o,a){var j,R,M,Y;var c=(s&ti)!==0,d=(s&(el|tl))!==0,u=n.length,f=e.items,v=e.first,h=v,m,b=null,p,w=[],_=[],A,y,k,C;if(c)for(C=0;C<u;C+=1)A=n[C],y=o(A,C),k=f.get(y),k!==void 0&&((j=k.a)==null||j.measure(),(p??(p=new Set)).add(k));for(C=0;C<u;C+=1){if(A=n[C],y=o(A,C),k=f.get(y),k===void 0){var T=h?h.e.nodes_start:t;b=Wi(T,e,b,b===null?e.first:b.next,A,y,C,l,s,a),f.set(y,b),w=[],_=[],h=b.next;continue}if(d&&Yi(k,A,C,s),(k.e.f&or)!==0&&(Gr(k.e),c&&((R=k.a)==null||R.unfix(),(p??(p=new Set)).delete(k))),k!==h){if(m!==void 0&&m.has(k)){if(w.length<_.length){var L=_[0],z;b=L.prev;var P=w[0],N=w[w.length-1];for(z=0;z<w.length;z+=1)$s(w[z],L,t);for(z=0;z<_.length;z+=1)m.delete(_[z]);gr(e,P.prev,N.next),gr(e,b,P),gr(e,N,L),h=L,b=N,C-=1,w=[],_=[]}else m.delete(k),$s(k,h,t),gr(e,k.prev,k.next),gr(e,k,b===null?e.first:b.next),gr(e,b,k),b=k;continue}for(w=[],_=[];h!==null&&h.k!==y;)(h.e.f&or)===0&&(m??(m=new Set)).add(h),_.push(h),h=h.next;if(h===null)continue;k=h}w.push(k),b=k,h=k.next}if(h!==null||m!==void 0){for(var E=m===void 0?[]:Un(m);h!==null;)(h.e.f&or)===0&&E.push(h),h=h.next;var I=E.length;if(I>0){var W=(s&xs)!==0&&u===0?t:null;if(c){for(C=0;C<I;C+=1)(M=E[C].a)==null||M.measure();for(C=0;C<I;C+=1)(Y=E[C].a)==null||Y.fix()}Bi(e,E,W,f)}}c&&nn(()=>{var V;if(p!==void 0)for(k of p)(V=k.a)==null||V.apply()}),Oe.first=e.first&&e.first.e,Oe.last=b&&b.e}function Yi(n,e,t,l){(l&el)!==0&&Ur(n.v,e),(l&tl)!==0?Ur(n.i,t):n.i=t}function Wi(n,e,t,l,s,o,a,c,d,u){var f=(d&el)!==0,v=(d&ri)===0,h=f?v?An(s,!1,!1):Er(s):s,m=(d&tl)===0?a:Er(a),b={i:m,v:h,k:o,a:null,e:null,prev:t,next:l};try{return b.e=$t(()=>c(n,h,m,u),hi),b.e.prev=t&&t.e,b.e.next=l&&l.e,t===null?e.first=b:(t.next=b,t.e.next=b.e),l!==null&&(l.prev=b,l.e.prev=b.e),b}finally{}}function $s(n,e,t){for(var l=n.next?n.next.e.nodes_start:t,s=e?e.e.nodes_start:t,o=n.e.nodes_start;o!==l;){var a=Ln(o);s.before(o),o=a}}function gr(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Et(n,e,t=!1,l=!1,s=!1){var o=n,a="";Z(()=>{var c=Oe;if(a!==(a=e()??"")&&(c.nodes_start!==null&&(Fs(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),a!=="")){var d=a+"";t?d=`<svg>${d}</svg>`:l&&(d=`<math>${d}</math>`);var u=vl(d);if((t||l)&&(u=Mt(u)),Jr(Mt(u),u.lastChild),t||l)for(;Mt(u);)o.before(Mt(u));else o.before(u)}})}function br(n,e,...t){var l=n,s=gt,o;Sr(()=>{s!==(s=e())&&(o&&(ar(o),o=null),o=$t(()=>s(l,...t)))},Yr)}function pl(n,e,t){var l=n,s,o;Sr(()=>{s!==(s=e())&&(o&&(ir(o),o=null),s&&(o=$t(()=>t(l,s))))},Yr)}function eo(n){var e,t,l="";if(typeof n=="string"||typeof n=="number")l+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=eo(n[e]))&&(l&&(l+=" "),l+=t)}else for(t in n)n[t]&&(l&&(l+=" "),l+=t);return l}function Hi(){for(var n,e,t=0,l="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=eo(n))&&(l&&(l+=" "),l+=e);return l}function Ui(n){return typeof n=="object"?Hi(n):n??""}const to=[...`
\r\f \v\uFEFF`];function Xi(n,e,t){var l=n==null?"":""+n;if(e&&(l=l?l+" "+e:e),t){for(var s in t)if(t[s])l=l?l+" "+s:s;else if(l.length)for(var o=s.length,a=0;(a=l.indexOf(s,a))>=0;){var c=a+o;(a===0||to.includes(l[a-1]))&&(c===l.length||to.includes(l[c]))?l=(a===0?"":l.substring(0,a))+l.substring(c+1):a=c}}return l===""?null:l}function Gi(n,e){return n==null?null:String(n)}function ut(n,e,t,l,s,o){var a=n.__className;if(a!==t||a===void 0){var c=Xi(t,l,o);c==null?n.removeAttribute("class"):e?n.className=c:n.setAttribute("class",c),n.__className=t}else if(o&&s!==o)for(var d in o){var u=!!o[d];(s==null||u!==!!s[d])&&n.classList.toggle(d,u)}return o}function nt(n,e,t,l){var s=n.__style;if(s!==e){var o=Gi(e);o==null?n.removeAttribute("style"):n.style.cssText=o,n.__style=e}return l}const Ki=Symbol("is custom element"),Ji=Symbol("is html");function q(n,e,t,l){var s=Qi(n);s[e]!==(s[e]=t)&&(e==="loading"&&(n[Ya]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Zi(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Qi(n){return n.__attributes??(n.__attributes={[Ki]:n.nodeName.includes("-"),[Ji]:n.namespaceURI===ui})}var ro=new Map;function Zi(n){var e=ro.get(n.nodeName);if(e)return e;ro.set(n.nodeName,e=[]);for(var t,l=n,s=Element.prototype;s!==l;){t=ms(l);for(var o in t)t[o].set&&e.push(o);l=Xn(l)}return e}const $i=()=>performance.now(),cr={tick:n=>requestAnimationFrame(n),now:()=>$i(),tasks:new Set};function no(){const n=cr.now();cr.tasks.forEach(e=>{e.c(n)||(cr.tasks.delete(e),e.f())}),cr.tasks.size!==0&&cr.tick(no)}function ec(n){let e;return cr.tasks.size===0&&cr.tick(no),{promise:new Promise(t=>{cr.tasks.add(e={c:n,f:t})}),abort(){cr.tasks.delete(e)}}}function Rn(n,e){dl(()=>{n.dispatchEvent(new CustomEvent(e))})}function tc(n){if(n==="float")return"cssFloat";if(n==="offset")return"cssOffset";if(n.startsWith("--"))return n;const e=n.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function lo(n){const e={},t=n.split(";");for(const l of t){const[s,o]=l.split(":");if(!s||o===void 0)break;const a=tc(s.trim());e[a]=o.trim()}return e}const rc=n=>n;function nc(n,e,t,l){var s=(n&ii)!==0,o="both",a,c=e.inert,d=e.style.overflow,u,f;function v(){var w=je,_=Oe;Nt(null),Ot(null);try{return a??(a=t()(e,(l==null?void 0:l())??{},{direction:o}))}finally{Nt(w),Ot(_)}}var h={is_global:s,in(){e.inert=c,Rn(e,"introstart"),u=wl(e,v(),f,1,()=>{Rn(e,"introend"),u==null||u.abort(),u=a=void 0,e.style.overflow=d})},out(w){e.inert=!0,Rn(e,"outrostart"),f=wl(e,v(),u,0,()=>{Rn(e,"outroend"),w==null||w()})},stop:()=>{u==null||u.abort(),f==null||f.abort()}},m=Oe;if((m.transitions??(m.transitions=[])).push(h),hl){var b=s;if(!b){for(var p=m.parent;p&&(p.f&Yr)!==0;)for(;(p=p.parent)&&(p.f&En)===0;);b=!p||(p.f&Qn)!==0}b&&tn(()=>{Ut(()=>h.in())})}}function wl(n,e,t,l,s){var o=l===1;if(Br(e)){var a,c=!1;return nn(()=>{if(!c){var w=e({direction:o?"in":"out"});a=wl(n,w,t,l,s)}}),{abort:()=>{c=!0,a==null||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return s(),{abort:gt,deactivate:gt,reset:gt,t:()=>l};const{delay:d=0,css:u,tick:f,easing:v=rc}=e;var h=[];if(o&&t===void 0&&(f&&f(0,1),u)){var m=lo(u(0,1));h.push(m,m)}var b=()=>1-l,p=n.animate(h,{duration:d,fill:"forwards"});return p.onfinish=()=>{p.cancel();var w=(t==null?void 0:t.t())??1-l;t==null||t.abort();var _=l-w,A=e.duration*Math.abs(_),y=[];if(A>0){var k=!1;if(u)for(var C=Math.ceil(A/16.666666666666668),T=0;T<=C;T+=1){var L=w+_*v(T/C),z=lo(u(L,1-L));y.push(z),k||(k=z.overflow==="hidden")}k&&(n.style.overflow="hidden"),b=()=>{var P=p.currentTime;return w+_*v(P/A)},f&&ec(()=>{if(p.playState!=="running")return!1;var P=b();return f(P,1-P),!0})}p=n.animate(y,{duration:A,fill:"forwards"}),p.onfinish=()=>{b=()=>l,f==null||f(l,1-l),s()}},{abort:()=>{p&&(p.cancel(),p.effect=null,p.onfinish=gt)},deactivate:()=>{s=gt},reset:()=>{l===0&&(f==null||f(1,0))},t:()=>b()}}function _l(n,e,t=e){var l=kr();qi(n,"input",s=>{var o=s?n.defaultValue:n.value;if(o=yl(n)?xl(o):o,t(o),l&&o!==(o=e())){var a=n.selectionStart,c=n.selectionEnd;n.value=o??"",c!==null&&(n.selectionStart=a,n.selectionEnd=Math.min(c,n.value.length))}}),Ut(e)==null&&n.value&&t(yl(n)?xl(n.value):n.value),sl(()=>{var s=e();yl(n)&&s===xl(n.value)||n.type==="date"&&!s&&!n.value||s!==n.value&&(n.value=s??"")})}function yl(n){var e=n.type;return e==="number"||e==="range"}function xl(n){return n===""?null:+n}const Wn=class Wn{constructor(e){yn(this,Yn);yn(this,yr,new WeakMap);yn(this,Zr);yn(this,pn);hs(this,pn,e)}observe(e,t){var l=fr(this,yr).get(e)||new Set;return l.add(t),fr(this,yr).set(e,l),Ra(this,Yn,Ma).call(this).observe(e,fr(this,pn)),()=>{var s=fr(this,yr).get(e);s.delete(t),s.size===0&&(fr(this,yr).delete(e),fr(this,Zr).unobserve(e))}}};yr=new WeakMap,Zr=new WeakMap,pn=new WeakMap,Yn=new WeakSet,Ma=function(){return fr(this,Zr)??hs(this,Zr,new ResizeObserver(e=>{for(var t of e){Wn.entries.set(t.target,t);for(var l of fr(this,yr).get(t.target)||[])l(t)}}))},Vr(Wn,"entries",new WeakMap);let kl=Wn;var lc=new kl({box:"border-box"});function so(n,e,t){var l=lc.observe(n,()=>t(n[e]));tn(()=>(Ut(()=>t(n[e])),l))}function oo(n,e){return n===e||(n==null?void 0:n[hr])===e}function Lr(n={},e,t,l){return tn(()=>{var s,o;return sl(()=>{s=o,o=[],Ut(()=>{n!==t(...o)&&(e(n,...o),s&&oo(t(...s),n)&&e(null,...s))})}),()=>{nn(()=>{o&&oo(t(...o),n)&&e(null,...o)})}}),n}function sc(n=!1){const e=We,t=e.l.u;if(!t)return;let l=()=>Ni(e.s);if(n){let s=0,o={};const a=Hr(()=>{let c=!1;const d=e.s;for(const u in d)d[u]!==o[u]&&(o[u]=d[u],c=!0);return c&&s++,s});l=()=>r(a)}t.b.length&&pi(()=>{ao(e,l),xn(t.b)}),Te(()=>{const s=Ut(()=>t.m.map(Oa));return()=>{for(const o of s)typeof o=="function"&&o()}}),t.a.length&&Te(()=>{ao(e,l),xn(t.a)})}function ao(n,e){if(n.l.s)for(const t of n.l.s)r(t);e()}let Mn=!1;function oc(n){var e=Mn;try{return Mn=!1,[n(),Mn]}finally{Mn=e}}const ac={get(n,e){if(!n.exclude.includes(e))return n.props[e]},set(n,e){return!1},getOwnPropertyDescriptor(n,e){if(!n.exclude.includes(e)&&e in n.props)return{enumerable:!0,configurable:!0,value:n.props[e]}},has(n,e){return n.exclude.includes(e)?!1:e in n.props},ownKeys(n){return Reflect.ownKeys(n.props).filter(e=>!n.exclude.includes(e))}};function ic(n,e,t){return new Proxy({props:n,exclude:e},ac)}const cc={get(n,e){let t=n.props.length;for(;t--;){let l=n.props[t];if(Br(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l)return l[e]}},set(n,e,t){let l=n.props.length;for(;l--;){let s=n.props[l];Br(s)&&(s=s());const o=vr(s,e);if(o&&o.set)return o.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let l=n.props[t];if(Br(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l){const s=vr(l,e);return s&&!s.configurable&&(s.configurable=!0),s}}},has(n,e){if(e===hr||e===ws)return!1;for(let t of n.props)if(Br(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(Br(t)&&(t=t()),!!t){for(const l in t)e.includes(l)||e.push(l);for(const l of Object.getOwnPropertySymbols(t))e.includes(l)||e.push(l)}return e}};function io(...n){return new Proxy({props:n},cc)}function co(n){var e;return((e=n.ctx)==null?void 0:e.d)??!1}function H(n,e,t,l){var T;var s=(t&ni)!==0,o=!Wr||(t&li)!==0,a=(t&oi)!==0,c=(t&ai)!==0,d=!1,u;a?[u,d]=oc(()=>n[e]):u=n[e];var f=hr in n||ws in n,v=a&&(((T=vr(n,e))==null?void 0:T.set)??(f&&e in n&&(L=>n[e]=L)))||void 0,h=l,m=!0,b=!1,p=()=>(b=!0,m&&(m=!1,c?h=Ut(l):h=l),h);u===void 0&&l!==void 0&&(v&&o&&Ka(),u=p(),v&&v(u));var w;if(o)w=()=>{var L=n[e];return L===void 0?p():(m=!0,b=!1,L)};else{var _=(s?Hr:Cs)(()=>n[e]);_.f|=Ba,w=()=>{var L=r(_);return L!==void 0&&(h=void 0),L===void 0?h:L}}if((t&si)===0&&o)return w;if(v){var A=n.$$legacy;return function(L,z){return arguments.length>0?((!o||!z||A||d)&&v(z?w():L),L):w()}}var y=!1,k=An(u),C=Hr(()=>{var L=w(),z=r(k);return y?(y=!1,z):k.v=L});return a&&r(C),s||(C.equals=$n),function(L,z){if(arguments.length>0){const P=z?r(C):o&&a?Je(L):L;if(!C.equals(P)){if(y=!0,B(k,P),b&&h!==void 0&&(h=P),co(C))return L;Ut(()=>r(C))}return L}return co(C)?C.v:r(C)}}function uc(n){We===null&&Es(),Wr&&We.l!==null?dc(We).m.push(n):Te(()=>{const e=Ut(n);if(typeof e=="function")return e})}function dc(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const fc="5";typeof window<"u"&&((za=window.__svelte??(window.__svelte={})).v??(za.v=new Set)).add(fc),ei();function uo(n,e){if(Le(n))return uo(n.v,Le(e)?e.v:e);const t=e.length;e[t-1]=e[t-1]*1.0001;let l=new Ee.valuesConstructor(t-1);for(let s=0;s<n.length;s++)for(let o=0;o<t-1;o++)n[s]>=e[o]&&n[s]<e[o+1]&&(l[o]+=1);return new Ee(l)}function fo(n){if(Le(n))return fo(n.v);const e=new Ee.valuesConstructor(n.length-1);for(let t=0;t<e.length;t++)e[t]=.5*(n[t]+n[t+1]);return new Ee(e)}function El(n,e){Le(n)&&El(n.v,e);const t=zr(n);if(t[0]===t[1])throw new Error('split: values in a vector "x" should vary.');const l=(t[1]-t[0])/e;return Ee.seq(t[0],t[1],l)}function vo(n){if(Le(n))return vo(n.v);const e=new Ee.valuesConstructor(n.length-1);for(let t=0;t<n.length-1;t++)e[t]=n[t+1]-n[t];return new Ee(e)}function vc(n){const e=n<10?.375:.5,t=new Ee.valuesConstructor(n);for(let l=0;l<n;l++)t[l]=(l+1-e)/(n+(1-e)-e);return new Ee(t)}function ho(n,e,t=!1,l=void 0,s=void 0){if(Le(n))return ho(n.v,e.v,t,l,s);const o=n.length;if(e.length!==o)throw Error("Vectors 'x' and 'y' must have the same length.");if(o<2)throw Error("Vectors 'x' and 'y' must have at least two values.");l===void 0&&(l=pr(n)),s===void 0&&(s=pr(e));let a=0;for(let c=0;c<o;c++)a=a+(n[c]-l)*(e[c]-s);return a/(t?o:o-1)}function Tr(n,e){if(Le(n))return Tr(n.v,e);e===void 0&&(e=.1);const t=zr(n),l=(t[1]-t[0])*e;return[t[0]-l,t[1]+l]}function zr(n){if(Le(n))return zr(n.v);let e=n[0],t=n[0];for(let l=1;l<n.length;l++)n[l]<e&&(e=n[l]),n[l]>t&&(t=n[l]);return[e,t]}function Sl(n,e){return Le(n)?Sl(n.v,e):Math.sqrt(Cl(n,e))}function Cl(n,e){if(e===void 0&&(e=!1),Le(n))return Cl(n.v);const t=pr(n);let l=0;for(let s=0;s<n.length;s++){const o=n[s]-t;l=l+o*o}return l/(e?n.length:n.length-1)}function pr(n){return Le(n)?pr(n.v):mo(n)/n.length}function mo(n){if(Le(n))return mo(n.v);let e=0;for(let t=0;t<n.length;t++)e=e+n[t];return e}function Al(n){if(Le(n))return Al(n.v);let e=1;for(let t=0;t<n.length;t++)e=e*n[t];return e}function It(n){return Le(n)||Xt(n)?n.v[Ll(n.v)-1]:n[Ll(n)-1]}function Ll(n){if(Le(n)||Xt(n))return Ll(n.v);let e=1,t=n[0];for(let l=2;l<=n.length;l++)n[l-1]<t&&(e=l,t=n[l-1]);return e}function Dt(n){return Le(n)||Xt(n)?n.v[Tl(n.v)-1]:n[Tl(n)-1]}function Tl(n){if(Le(n)||Xt(n))return Tl(n.v);let e=1,t=n[0];for(let l=2;l<=n.length;l++)n[l-1]>t&&(e=l,t=n[l-1]);return e}const zl=30,hc=1e-7,mc=1e-7,gc=100;function bc(n,e,t,l,s){s===void 0&&(s=gc);let o=t,a=l,c=(a-o)/s;for(let d=0;d<s;d++){let u,f;for(let m=0;m<s;m++){u=o+m*c,f=o+(m+1)*c;const b=e(u),p=e(f);if(b<=n&&p>=n)break}const v=(u+f)/2,h=e(v);if(Math.abs(h-n)<hc||(o=u,a=f,c=(a-o)/s,c/a<mc))return v}return(o+a)/2}function go(n,e=0,t=1){let l=Ee.zeros(n);for(let s=0;s<n;s++)l.v[s]=e+Math.random()*(t-e);return l}function bo(n,e=0,t=1){let l=Ee.zeros(n);for(let s=0;s<n;s++){const o=Math.sqrt(-2*Math.log(Math.random())),a=2*Math.PI*Math.random();l.v[s]=o*Math.sin(a)*t+e}return l}function po(n,e=0,t=1){if(Le(n))return n.apply(s=>po(s,e,t));const l=1/(Math.sqrt(2)*t);return .5*(1+wc((n-e)*l))}function qn(n,e=0,t=1){if(Le(n))return n.apply(W=>qn(W,e,t));if(e!==0||t!==1)return qn(n)*t+e;if(n<0||n>1)throw Error('Parameter "p" must be between 0 and 1.');if(n<1e-10)return-1/0;if(n>.9999999999)return 1/0;const l=.425,s=5,o=.180625,a=1.6,c=3.3871327179,d=5.0434271938*10,u=1.5929113202*100,f=5.910937472*10,v=1.7895169469*10,h=7.8757757664*10,m=6.71875636*10,b=1.4234372777,p=2.75681539,w=1.3067284816,_=1.7023821103*.1,A=7.370016425*.1,y=1.2021132975*.1,k=6.657905115,C=3.081226386,T=4.2868294337*.1,L=1.7337203997*.01,z=2.4197894225*.1,P=1.2258202635*.01,N=n-.5;let E;if(Math.abs(N)<=l)return E=o-N*N,N*(((f*E+u)*E+d)*E+c)/(((m*E+h)*E+v)*E+1);E=N<0?n:1-n,E=Math.sqrt(-Math.log(E));let I;return E<=s?(E=E-a,I=(((_*E+w)*E+p)*E+b)/((y*E+A)*E+1)):(E=E-s,I=((L*E+T)*E+C+k)/((P*E+z)*E+1)),N<0?-I:I}function wo(n,e){if(Array.isArray(n))return wo(Pe(n),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),s=Math.sqrt(l);function o(d){if(d===0)return 0;if(e===0||e>100&&d>e*2||e>50&&d>e*3||e>10&&d>e*5||e>5&&d>e*8||d>e*30)return 1;const u=d/e,f=Math.pow(u,1/6)-.5*Math.pow(u,1/3)+1/3*Math.pow(u,1/2);return po(f,t,s)}function a(d){return d===0?0:e===0||e>100&&d>e*2||e>50&&d>e*3||e>10&&d>e*5||e>5&&d>e*8||d>e*30?1:pc(d/2,e/2)/un(e/2)}const c=e>zl?o:a;return Le(n)?n.apply(c):c(n)}function _o(n,e){if(Array.isArray(n))return _o(Pe(n),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),s=Math.sqrt(l);function o(d){if(d===0)return 0;if(d===1)return Inf;if(e===0)return 0;const u=qn(d,t,s),f=Math.pow(Math.sqrt(36*u*u-30*u+13)/4+(3*u-3/2)/2+1/8,1/3);return Math.pow(f-3/(4*f)+.5,6)*e}function a(d){return d===0?0:d===1?Inf:e===0?0:bc(d,f=>wo(f,e),0,zl*10)}const c=e>zl?o:a;return Le(n)?n.apply(c):c(n)}function un(n){if(Le(n))return n.apply(un);if(n<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(n<.5)return Math.PI/(Math.sin(Math.PI*n)+un(1-n));n=n-1;let t=.9999999999998099;for(let s=0;s<e.length;s++)t=t+e[s]/(n+s+1);const l=n+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(l,n+.5)*Math.exp(-l)*t}function pc(n,e){let s=0;for(let o=0;o<1e4;o++){const a=Math.pow(n,o)/un(e+o+1);if(isNaN(a)||a<1e-18)break;s+=a}return Math.pow(n,e)*un(e)*Math.exp(-n)*s}function wc(n){const e=n>=0?1:-1;n=Math.abs(n);const t=.254829592,l=-.284496736,s=1.421413741,o=-1.453152027,a=1.061405429,d=1/(1+.3275911*n),u=1-((((a*d+o)*d+s)*d+l)*d+t)*d*Math.exp(-n*n);return e*u}function yo(n){const e=n.nrows,t=n.ncols;if(e<t){const a=yo(n.subset([],wt.seq(1,e)));return{Q:a.Q,R:ko(a.Q,n)}}let l=ot.eye(e),s=n.t();for(let a=1;a<=t;a++)for(let c=e;c>=a+1;c--){const d=s.v.subarray((c-2)*t,c*t),u=l.v.subarray((c-2)*e,c*e),f=d.slice(),v=u.slice(),[h,m,b]=_c(f[a-1],f[a-1+t]);for(let p=0;p<t;p++)d[p]=f[p]*h+f[p+t]*m,d[p+t]=f[p]*-m+f[p+t]*h,u[p]=v[p]*h+v[p+e]*m,u[p+e]=v[p]*-m+v[p+e]*h;for(let p=t;p<e;p++)u[p]=v[p]*h+v[p+e]*m,u[p+e]=v[p]*-m+v[p+e]*h}const o=wt.seq(1,t);return{Q:e===t?l:l.subset([],o),R:e===t?s.t():s.subset([],o).t()}}function _c(n,e){if(n==0)return[0,1,e];if(Math.abs(n)>Math.abs(e)){const o=e/n,a=Math.sqrt(1+o*o),c=1/a;return[c,o*c,n*a]}const t=n/e,l=Math.sqrt(1+t*t),s=1/l;return[t*s,s,e*l]}function xo(n){return typeof n=="number"}function ko(n,e){if(e===void 0&&(e=n),!rr(n)||!rr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=n.nrows,l=n.ncols,s=e.nrows,o=e.ncols,a=l,c=o,d=t,u=new Float64Array(a*c);for(let f=0;f<c;f++){const v=e.v.subarray(f*s,(f+1)*s),h=u.subarray(f*a,(f+1)*a);for(let m=0;m<a;m++){const b=n.v.subarray(m*t,(m+1)*t);let p=0;for(let w=0;w<d;w++)p+=b[w]*v[w];h[m]=p}}return new ot(u,a,c)}function Eo(n,e,t){if(t===void 0){if(e!==n.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new Ee(n.v)}if(n.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new ot(n.v,e,t)}function rr(n){return n&&n.constructor===ot}function yc(n,e,t){return new ot(new Float64Array(n),e,t)}const Ce=class Ce{constructor(e,t,l){if(!ArrayBuffer.isView(e)||e.constructor!==Ce.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||l===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*l)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=l}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Ce.diagm(this.diag().apply(d=>Math.abs(d)>Number.EPSILON?1/d:x));const l=Ce.eye(e),s=Ce.eye(e),o=this.t(),a=o.v[(e-1)*e+(e-1)],c=e-1;for(let d=0;d<e;d++)s.v[c*e+d]=l.v[c*e+d]/a;for(let d=e-2;d>=0;d--){let u=l.getcolumn(d+1);const f=o.getcolref(d+1);for(let v=d+1;v<e;v++){const h=s.getcolumn(v+1);u=u.subtract(h.mult(f[v]))}s.v.set(u.divide(f[d]).v,d*e)}return s.t()}if(this.islowertriangular()){const l=this.diag();if(Al(l)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const s=Ce.eye(e),o=Ce.eye(e),a=this.t(),c=0,d=a.v[0];for(let u=0;u<e;u++)o.v[c*e+u]=s.v[c*e+u]/d;for(let u=1;u<e;u++){let f=s.getcolumn(u+1);const v=a.getcolref(u+1);for(let h=0;h<u;h++){const m=o.getcolumn(h+1);f=f.subtract(m.mult(v[h]))}o.v.set(f.divide(v[u]).v,u*e)}return o.t()}const t=yo(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Ce.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Ce.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let l=0;l<e;l++)t[l]=this.getcolref(l+1)[l];return new Ee(t)}t(){const e=this.nrows,t=this.ncols,l=new Ce.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let s=0;s<this.ncols;s++){const o=this.v.subarray(s*this.nrows,(s+1)*this.nrows);for(let a=0;a<this.nrows;a++)l[a*t+s]=o[a]}return new Ce(l,t,e)}for(let s=0;s<this.nrows;s++){const o=l.subarray(s*t,(s+1)*t);for(let a=0;a<this.ncols;a++)o[a]=this.v[a*this.nrows+s]}return new Ce(l,t,e)}dot(e){if(Le(e))return new Ce(Rl(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(rr(e))return new Ce(Rl(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,l){if(rr(e))return new Ce(Nl(this.v,e.v,t),this.nrows,this.ncols);if(xo(e))return new Ce(Pl(this.v,e,t),this.nrows,this.ncols);if(!Le(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(l===void 0&&(l=e.length===this.ncols?2:1),l===2&&e.length===this.ncols){const s=new Ce.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)s.set(Pl(this.getcolref(o+1),e.v[o],t),o*this.nrows);return new Ce(s,this.nrows,this.ncols)}if(l===1&&e.length===this.nrows){const s=new Ce.valuesConstructor(this.v.length);for(let o=0;o<this.ncols;o++)s.set(Nl(this.getcolref(o+1),e.v,t),o*this.nrows);return new Ce(s,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e,t){if(t===void 0&&(t=2),t==2){const l=this.ncols,s=new Ce.valuesConstructor(l);for(let o=0;o<l;o++)s[o]=e(this.getcolref(o+1));return new Ee(s)}if(t==1)return this.t().apply(e,2);if(t==0){const l=this.v.length,s=new Ce.valuesConstructor(l);for(let o=0;o<l;o++)s[o]=e(this.v[o]);return new Ce(s,this.nrows,this.ncols)}}replace(e,t,l){typeof t=="number"&&(t=[t]),t.length===0&&(t=wt.seq(1,this.nrows)),Xt(t)||(t=Gt(t)),typeof l=="number"&&(l=[l]),l.length===0&&(l=wt.seq(1,this.ncols)),Xt(l)||(l=Gt(l));const s=t.length,o=l.length;if(It(t)<1||Dt(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(It(l)<1||Dt(l)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==s||e.ncols!==o)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let a=0;a<l.length;a++){const c=e.getcolref(a+1),d=(l.v[a]-1)*this.nrows;for(let u=0;u<t.length;u++){const f=t.v[u];this.v[d+f-1]=c[u]}}return this}copy(){return new Ce(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new Ee.valuesConstructor(this.ncols);for(let l=0;l<this.ncols;l++)t[l]=this.getcolref(l+1)[e-1];return new Ee(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new Ee(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=Gt([e])),typeof t=="number"&&(t=Gt([t])),Array.isArray(e)&&(e=e.length===0?null:Gt(e)),Array.isArray(t)&&(t=t.length===0?null:Gt(t)),e!==null&&!Xt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!Xt(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(It(e)<1||Dt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(It(t)<1||Dt(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const c=t.length,d=this.nrows,u=new Ce.valuesConstructor(d*c);for(let f=0;f<t.length;f++)u.set(this.v.slice((t.v[f]-1)*this.nrows,t.v[f]*this.nrows),f*this.nrows);return new Ce(u,d,c)}if(t==null)return this.t().subset(t,e).t();const l=e.length,s=t.length,o=new Ce.valuesConstructor(l*s);let a=new Ce.valuesConstructor(l);for(let c=0;c<s;c++){const d=this.v.subarray((t.v[c]-1)*this.nrows,t.v[c]*this.nrows);for(let u=0;u<l;u++)a[u]=d[e.v[u]-1];o.set(a,c*l)}return new Ce(o,l,s)}toString(e){function t(a,c){return" ".repeat(c-a.length)+a}e===void 0&&(e=2),this.ncols;const l=Math.round(Math.abs(Math.log10(Dt(this.v))))+e+3;let s="";const o=this.t();for(let a=1;a<=o.ncols;a++)s+=Array.from(o.getcolref(a)).map(c=>t(c.toFixed(e),l)).join(" ")+`
`;return s}toCSV(e,t,l,s){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const o=s!=null&&s.length>0,a=l!=null&&l.length>0;if(o&&s.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(a&&l.length!==this.ncols+(o?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const c=this.t();let d=a?l.join(e)+`
`:"";for(let u=1;u<=c.ncols;u++)d=d+(o?s[u-1]+e:"")+c.getcolref(u).join(e)+`
`;return d=d.replace(/\./g,t),d}static randn(e,t,l,s){return Eo(bo(e*t,l,s),e,t)}static rand(e,t,l,s){return Eo(go(e*t,l,s),e,t)}static eye(e,t){t===void 0&&(t=e);const l=new Float64Array(e*t);for(let s=0;s<Math.min(e,t);s++)l[s*e+s]=1;return new Ce(l,e,t)}static diagm(e){if(!Le(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,l=new Float64Array(t*t);for(let s=0;s<t;s++)l[s*t+s]=e.v[s];return new Ce(l,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Ce(new Float64Array(e*t),e,t)}static ones(e,t){return Ce.fill(1,e,t)}static fill(e,t,l){l===void 0&&(l=t);const s=new Float64Array(t*l);for(let o=0;o<s.length;o++)s[o]=e;return new Ce(s,t,l)}static outer(e,t,l){if(Array.isArray(e)&&(e=Pe(e)),Array.isArray(t)&&(t=Pe(t)),!Le(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Le(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const s=Ce.zeros(e.length,t.length);for(let o=0;o<t.length;o++){const a=t.v[o],c=s.getcolref(o+1);for(let d=0;d<e.length;d++)c[d]=l(e.v[d],a)}return s}static parseCSV(e,t,l,s){function o(w){return w.some(_=>Number.isNaN(Number.parseFloat(_.trim())))}t===void 0&&(t=",");const a=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let c=e.split(/\n/),d=[],u=0;const f=c[0].split(t);(l||l===void 0&&o(f))&&(d=f,u=1),c=c.filter(w=>w.trim().length>1);let v=[],h=0;s&&(h=1);const m=c.length-u,b=f.length-h;if(m<1)throw Error("Data file should contain at least 1 row with values.");if(b<1)throw Error("Data file should contain at least 1 column with values.");const p=Ce.zeros(b,m);for(let w=u;w<m+u;w++){const _=c[w].split(t);let A;if(s?(v[w-u]=_[0],A=_.slice(1).map(y=>Number.parseFloat(y.trim().replace(a,".")))):A=_.map(y=>Number.parseFloat(y.trim().replace(a,"."))),A.some(y=>Number.isNaN(y)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(A.length!=b)throw Error("Wrong number of values in row #"+w);p.v.set(new Float64Array(A),(w-u)*b)}return{values:p.t(),header:d,labels:v,sep:t,dec:a}}};Vr(Ce,"valuesConstructor",Float64Array),Vr(Ce,"TOLERANCE",Math.pow(10,-9));let ot=Ce;function Le(n){return n&&n.constructor===Ee}function Pe(n){return new Ee(new Float64Array(n))}const lt=class lt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new wt.valuesConstructor(this.length);let l=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(t[l]=s+1,l=l+1);return new wt(t.subarray(0,l))}filter(e){const t=new lt.valuesConstructor(this.length);let l=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(t[l]=this.v[s],l=l+1);return new lt(t.subarray(0,l))}shuffle(){return new lt(Lo(this.v))}sort(e){return new lt(To(this.v,e))}sortind(e){return new wt(zo(this.v,e))}rep(e){return Co(this,e)}repeach(e){return Ao(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=wt.seq(1,this.length)),Xt(t)||(t=Gt(t));const l=t.length;if(It(t)<1||Dt(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==l)throw Error('Vector.replace: length of "x" does not match the indices.');for(let s=0;s<t.length;s++){const o=t.v[s];this.v[o-1]=e.v[s]}return this}subset(e){if(typeof e=="number"&&(e=Gt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?wt.bool2ind(e):Gt(e)),!Xt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=lt.zeros(t);for(let s=0;s<t;s++){if(e.v[s]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[s]>this.length)throw Error("subset: index exceeds the length of the vector.");l.v[s]=this.v[e.v[s]-1]}return l}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new lt(this.v.slice(e-1,t))}copy(){return new lt(this.v.slice())}dot(e){return e===void 0&&(e=this),Rl(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(Le(e))return new lt(Nl(this.v,e.v,t));if(xo(e))return new lt(Pl(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e){const t=this.v.length,l=lt.zeros(t);for(let s=0;s<t;s++)l.v[s]=e(this.v[s]);return l}static c(...e){if(e.length===1)return e[0];const t=e.reduce((o,a)=>o+(typeof a=="number"?1:a.length),0),l=new lt.valuesConstructor(t);let s=0;for(const o of e)typeof o=="number"?(l[s]=o,s+=1):(l.set(Le(o)?o.v:new lt.valuesConstructor(o),s),s+=typeof o=="number"?1:o.length);return new lt(l)}static seq(e,t,l){return So(e,t,l,lt)}static randn(e,t,l){return bo(e,t,l)}static rand(e,t,l){return go(e,t,l)}static zeros(e){return new lt(new lt.valuesConstructor(e))}static ones(e){return lt.fill(1,e)}static fill(e,t){const l=new lt.valuesConstructor(t);for(let s=0;s<l.length;s++)l[s]=e;return new lt(l)}};Vr(lt,"valuesConstructor",Float64Array);let Ee=lt;function Xt(n){return n.constructor===wt}function Gt(n){return new wt(new Int32Array(n))}const ht=class ht{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new ht.valuesConstructor(this.length);let l=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(t[l]=s+1,l=l+1);return new ht(t.subarray(0,l))}filter(e){const t=new ht.valuesConstructor(this.length);let l=0;for(let s=0;s<this.length;s++)e(this.v[s],s)&&(t[l]=this.v[s],l=l+1);return new ht(t.subarray(0,l))}shuffle(){return new ht(Lo(this.v))}sort(e){return new ht(To(this.v,e))}sortind(e){return new ht(zo(this.v,e))}rep(e){return Co(this,e)}repeach(e){return Ao(this,e)}subset(e){if(typeof e=="number"&&(e=Gt([e])),Array.isArray(e)&&(e=Gt(e)),!Xt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=new ht.valuesConstructor(t);for(let s=0;s<t;s++){if(e.v[s]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[s]>this.length)throw Error("subset: index exceeds the length of the vector.");l[s]=this.v[e.v[s]-1]}return new ht(l)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new ht(this.v.slice(e-1,t))}static seq(e,t,l){return So(e,t,l,ht)}static ones(e){return ht.fill(1,e)}static fill(e,t){const l=new ht.valuesConstructor(t);for(let s=0;s<l.length;s++)l[s]=e;return new ht(l)}static bool2ind(e){let t=0;const l=new ht.valuesConstructor(e.length);for(let s=0;s<e.length;s++)e[s]&&(l[t]=s+1,t=t+1);return new ht(l.subarray(0,t))}};Vr(ht,"valuesConstructor",Int32Array);let wt=ht;function So(n,e,t,l){t===void 0&&(t=n<=e?1:-1);const s=Math.floor((e-n)/t)+1;if(s<1)throw Error("seq: wrong combination of parameters.");const o=new l.valuesConstructor(s);for(let a=0;a<s;a++)o[a]=n+a*t;return new l(o)}function Co(n,e){const t=n.length*e,l=new n.constructor.valuesConstructor(t);for(let s=1;s<=e;s++)for(let o=0;o<n.length;o++)l[(s-1)*n.length+o]=n.v[o];return new n.constructor(l)}function Ao(n,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=n.length*e,l=new n.constructor.valuesConstructor(t);for(let s=0;s<n.length;s++)for(let o=0;o<e;o++)l[s*e+o]=n.v[s];return new n.constructor(l)}function Nl(n,e,t){if(n.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(n.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const l=new n.constructor(n.length);for(let s=0;s<n.length;s++)l[s]=t(n[s],e[s]);return l}function Pl(n,e,t){const l=new n.constructor(n.length);for(let s=0;s<n.length;s++)l[s]=t(n[s],e);return l}function Rl(n,e,t,l,s,o){if(l!==s)throw Error("_dot: matrix dimensions do not much.");const a=t,c=o,d=l,u=new n.constructor(a*c);for(let f=0;f<c;f++){const v=e.subarray(f*s,(f+1)*s),h=u.subarray(f*a,(f+1)*a);for(let m=0;m<d;m++){const b=v[m],p=n.subarray(m*t,(m+1)*t);for(let w=0;w<a;w++)h[w]+=p[w]*b}}return u}function Lo(n){let e=n.slice(),t=e.length,l,s;for(;t;)s=Math.floor(Math.random()*t--),l=e[t],e[t]=e[s],e[s]=l;return e}function To(n,e=!1){return e?n.slice().sort((t,l)=>l-t):n.slice().sort((t,l)=>t-l)}function zo(n,e=!1){const t=wt.seq(1,n.length).v;return e?t.sort((l,s)=>n[s-1]-n[l-1]):t.sort((l,s)=>n[l-1]-n[s-1])}function xc(n,e,t){if(!n||!n.class||!n.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=n.ncols,s=n.ncomp;let o,a;switch(e){case"mX":o=2,a=l;break;case"sX":o=2+l,a=l;break;case"loadings":case"xloadings":o=2+2*l+(t-1)*l,a=l;break;case"P":o=2+2*l,a=t*l;break;case"eigenvals":case"xeigenvals":o=2+2*l+l*s,a=s;break;case"cq0":o=2+2*l+l*s+s,a=s;break;case"cNq":o=2+2*l+l*s+2*s,a=s;break;case"rq0":o=2+2*l+l*s+3*s,a=s;break;case"rNq":o=2+2*l+l*s+4*s,a=s;break;case"ch0":o=2+2*l+l*s+5*s,a=s;break;case"cNh":o=2+2*l+l*s+6*s,a=s;break;case"rh0":o=2+2*l+l*s+7*s,a=s;break;case"rNh":o=2+2*l+l*s+8*s,a=s;break;case"cr0":o=2+2*l+l*s+9*s,a=s;break;case"cNr":o=2+2*l+l*s+10*s,a=s;break;case"rr0":o=2+2*l+l*s+11*s,a=s;break;case"rNr":o=2+2*l+l*s+12*s,a=s;break;case"cg0":o=2+2*l+l*s+13*s,a=s;break;case"cNg":o=2+2*l+l*s+14*s,a=s;break;case"rg0":o=2+2*l+l*s+15*s,a=s;break;case"rNg":o=2+2*l+l*s+16*s,a=s;break;default:throw Error("pcamodel_get: wrong outcome name.")}return n.v.subarray(o,o+a)}function kc(n,e,t){if(!n||!n.class||!n.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const l=n.ncols,s=n.nrows,o=n.ncomp;let a,c;switch(e){case"scores":case"xscores":a=(t-1)*s,c=s;break;case"hdist":a=s*o+(t-1)*s,c=s;break;case"qdist":a=2*s*o+(t-1)*s,c=s;break;case"xcumexpvar":case"cumexpvar":a=3*s*o,c=o;break;case"fdistc":a=3*s*o+o+(t-1)*s,c=s;break;case"fdistr":a=4*s*o+o+(t-1)*s,c=s;break;case"gdist":a=5*s*o+o+(t-1)*l,c=l;break;case"rdist":a=5*s*o+o+l*o+(t-1)*l,c=l;break;case"idistc":a=5*s*o+o+2*l*o+(t-1)*l,c=l;break;case"idistr":a=5*s*o+o+3*l*o+(t-1)*l,c=l;break;default:throw new Error("pcares_get: wrong outcome name.")}return n.v.subarray(a,a+c)}function Ec(n,e,t){return n*t+n*t+n*t+t+n*e*t+n*t+n*t+t+e*t+e*t+e*t+e*t}function No(n,e,t){return 3+2*(n+e)+n*t+1*t+4*t+4*t+4*t+n*t+e*t+1*t}function In(n,e,t){if(!Array.isArray(n))return!1;if(n.length===0)return!0;for(let l=0;l<n.length;l++){const s=n[l];if(s<e||s>t)return!1}return!0}function St(n,e,t){if(!n||!n.class||!n.class.includes("plsmodel"))throw new Error('plsmodel_get: parameter "m" must be JSON with PLS model.');const l=n.npred,s=n.nresp,o=n.ncomp;let a,c=No(l,s,o)-l*o-s*o-2*s;switch(e){case"mY":c=3,a=s;break;case"mX":c=3+s,a=l;break;case"sY":c=3+s+l,a=s;break;case"sX":c=3+s+l+s,a=l;break;case"P":c=3+2*(s+l),a=t*l;break;case"loadings":case"xloadings":c=3+2*(s+l)+(t-1)*l,a=l;break;case"eigenvals":case"xeigenvals":c=3+2*(s+l)+o*l,a=o;break;case"cq0":c=3+2*(s+l)+o*l+o,a=o;break;case"cNq":c=3+2*(s+l)+o*l+2*o,a=o;break;case"rq0":c=3+2*(s+l)+o*l+3*o,a=o;break;case"rNq":c=3+2*(s+l)+o*l+4*o,a=o;break;case"ch0":c=3+2*(s+l)+o*l+5*o,a=o;break;case"cNh":c=3+2*(s+l)+o*l+6*o,a=o;break;case"rh0":c=3+2*(s+l)+o*l+7*o,a=o;break;case"rNh":c=3+2*(s+l)+o*l+8*o,a=o;break;case"cz0":c=3+2*(s+l)+o*l+9*o,a=o;break;case"cNz":c=3+2*(s+l)+o*l+10*o,a=o;break;case"rz0":c=3+2*(s+l)+o*l+11*o,a=o;break;case"rNz":c=3+2*(s+l)+o*l+12*o,a=o;break;case"weights":c=3+2*(s+l)+o*l+13*o+(t-1)*l,a=l;break;case"yloadings":c=3+2*(s+l)+o*l+13*o+o*l+(t-1)*s,a=s;break;case"yeigenvals":c=3+2*(s+l)+o*l+13*o+o*l+o*s,a=o;break;default:throw Error("plsmodel_get: wrong outcome name.")}return n.v.subarray(c,c+a)}function Tt(n,e,t,l){if(!n||!n.class||!n.class.includes("plsres"))throw new Error('plsres_get: parameter "r" must be JSON with PLS results.');l||(l=1);const s=n.nrows,o=n.ncomp,a=n.nresp,c=n.nresp_model;let d,u=3*s*o+o;switch(e){case"Yp":u=u+(t-1)*c*s+(l-1)*s,d=s;break;case"yscores":u=u+o*c*s+(t-1)*s,d=s;break;case"zdist":u=u+o*c*s+o*s+(t-1)*s,d=s;break;case"ycumexpvar":u=u+o*c*s+o*s+o*s,d=o;break;case"rmse":u=u+o*c*s+o*s+o*s+o,d=c*o;break;case"r2":u=u+o*c*s+o*s+o*s+o+a*o,d=c*o;break;case"bias":u=u+o*c*s+o*s+o*s+o+2*a*o,d=c*o;break;case"slope":u=u+o*c*s+o*s+o*s+o+3*a*o,d=c*o;break;default:return kc(n,e,t)}return n.v.subarray(u,u+d)}function Sc(n,e,t,l,s,o,a,c){if(!rr(e))throw new Error("pls_fit: D must be a matrix.");if(t<1||e.ncols<2+t)throw new Error("pls_fit: training set should have at least 2 predictors and 1 response.");a||(a=[]);const d=a&&Array.isArray(a)?a.length:0;if(!In(a,0,e.nrows-1))throw new Error('pls_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const u=c&&Array.isArray(c)?c.length:0;if(!In(c,0,e.ncols-t-1))throw new Error('pls_fit: some indices in "exclvars" array are outside the expected range.');const f=e.nrows-d,v=e.ncols-t-u;if(f<3||v<2)throw new Error("pls_fit: X must have at least 3 rows and 2 predictors.");if(s===void 0&&(s=!0),o===void 0&&(o=!1),l===void 0&&(l=Math.min(f-1,v)),l<1||l>Math.min(f-1,v))throw new Error('pls_fit: the value of "ncomp" does not match the dimension of D.');const h=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);let m=null;if(d>0){const I=new Int32Array(a);m=n._malloc(I.length*I.BYTES_PER_ELEMENT),n.HEAP32.set(I,m/I.BYTES_PER_ELEMENT)}let b=null;if(u>0){const I=new Int32Array(c);b=n._malloc(I.length*I.BYTES_PER_ELEMENT),n.HEAP32.set(I,b/I.BYTES_PER_ELEMENT)}const p=No(v,t,l),w=Float64Array,_=n._malloc(p*w.BYTES_PER_ELEMENT),A=v*t*l,y=Float64Array,k=n._malloc(A*w.BYTES_PER_ELEMENT),C=n._malloc(A*w.BYTES_PER_ELEMENT),T=n._malloc(A*w.BYTES_PER_ELEMENT);if(n.ccall("plsfit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[h,e.nrows,e.ncols-t,t,l,s,o,_,m,d,b,u,C,k,T])!==1)throw new Error("pls_fit: unexpected error.");const z=n.HEAPF64.slice(_/w.BYTES_PER_ELEMENT,_/w.BYTES_PER_ELEMENT+p),P=n.HEAPF64.slice(C/y.BYTES_PER_ELEMENT,C/y.BYTES_PER_ELEMENT+A),N=n.HEAPF64.slice(k/y.BYTES_PER_ELEMENT,k/y.BYTES_PER_ELEMENT+A),E=n.HEAPF64.slice(T/y.BYTES_PER_ELEMENT,T/y.BYTES_PER_ELEMENT+A);return n._free(h),n._free(_),n._free(C),n._free(k),n._free(T),m&&n._free(m),b&&n._free(b),{class:["plsmodel","pcamodel"],v:z,ncomp:l,nrows:f,npred:v,nresp:t,exclvars:c,center:s,scale:o,coeffs:P,vip:N,sr:E}}function Cc(n,e,t,l,s){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pls_predict: parameter "m" must be JSON with PLS results.');if(!rr(t))throw new Error("pls_predict: D must be a matrix.");s||(s=[]);const o=s&&Array.isArray(s)?s.length:0;if(!In(s,0,t.nrows-1))throw new Error('pls_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=t.nrows-o;t.ncols-l===e.npred&&(a=0);const d=t.ncols-a-l;if(c<1)throw new Error("pls_predict: D must have at least 1 row.");if(d!==e.npred)throw new Error("pls_predict: D must have the same number of predictors (without excluded ones) as the training set.");const u=n._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);n.HEAPF64.set(t.v,u/t.v.BYTES_PER_ELEMENT);let f=null;if(o>0){const j=new Int32Array(s);f=n._malloc(j.length*j.BYTES_PER_ELEMENT),n.HEAP32.set(j,f/j.BYTES_PER_ELEMENT)}let v=null;if(a>0){const j=new Int32Array(e.exclvars);v=n._malloc(j.length*j.BYTES_PER_ELEMENT),n.HEAP32.set(j,v/j.BYTES_PER_ELEMENT)}const h=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,h/e.v.BYTES_PER_ELEMENT);const m=Ec(c,e.nresp,e.ncomp),b=Float64Array,p=n._malloc(m*b.BYTES_PER_ELEMENT);if(n.ccall("plspredict_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[u,t.nrows,t.ncols-l,l,h,p,f,o,v,a])!==1)throw new Error("pls_predict: unexpected error.");const _=n.HEAPF64.slice(p/b.BYTES_PER_ELEMENT,p/b.BYTES_PER_ELEMENT+m);n._free(u),n._free(h),n._free(p),f&&n._free(f),v&&n._free(v);const A={class:["plsres","pcares"],v:_,ncomp:e.ncomp,nrows:c,npred:d,nresp:l,nresp_model:e.nresp,outliers:s,exclvars:e.exclvars,center:e.center,scale:e.scale},y=new Array(e.ncomp),k=new Array(e.ncomp),C=new Array(e.ncomp),T=new Array(e.ncomp),L=new Array(e.ncomp),z=new Array(e.ncomp),P=new Array(e.ncomp),N=new Array(e.ncomp),E=new Array(e.ncomp),I=Tt(A,"xcumexpvar"),W=Tt(A,"ycumexpvar");if(l>0){y[0]=1,L[0]=I[0],T[0]=1-I[0],k[0]=I[0],C[0]=1-I[0],E[0]=W[0],N[0]=1-W[0],z[0]=W[0],P[0]=1-W[0];for(let V=1;V<e.ncomp;V++)y[V]=V+1,L[V]=I[V],T[V]=1-I[V],k[V]=I[V]-I[V-1],C[V]=1-k[V],E[V]=W[V],N[V]=1-W[V],z[V]=W[V]-W[V-1],P[V]=1-z[V];const j=new ot(Tt(A,"rmse"),e.nresp,e.ncomp),R=new ot(Tt(A,"r2"),e.nresp,e.ncomp),M=new ot(Tt(A,"slope"),e.nresp,e.ncomp),Y=new ot(Tt(A,"bias"),e.nresp,e.ncomp);A.stat={components:y,xresvar:C,xexpvar:k,xcumexpvar:L,xcumresvar:T,yresvar:P,yexpvar:z,ycumexpvar:E,ycumresvar:N,rmse:j.t(),r2:R.t(),slope:M.t(),bias:Y.t()}}else A.stat=null;return A}function Ac(n,e,t,l,s,o,a,c,d){if(!e||!e.class||!e.class.includes("plsmodel"))throw new Error('pcvpls: parameter "m" must be JSON with PLS model.');if(!rr(t))throw new Error("pcvpls: D must be a matrix.");if(l<1)throw new Error("pcvpls: D must have at least one response.");d||(d=[]);const u=d&&Array.isArray(d)?d.length:0;if(!In(d,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const f=e.exclvars.length,v=t.nrows-u,h=t.ncols-l-f;if(v<3)throw new Error("plspcv: D must have at least 3 rows.");if(h<2)throw new Error("plspcv: D must have at least 2 predictors.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('plspcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('plspcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('plspcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>v)throw new Error('plspcv: the value of "cv_nseg" is too large for the given X.');if(a===0&&(o=v),!Number.isInteger(s)||s<1)throw new Error('plspcv: the value of "ncomp" must be a number >= 1.');const m=Math.min(a===0?v-2:v-Math.ceil(v/o)-1,h,e.ncomp);if(s>m)throw new Error('pcapcv: the value of "ncomp" is too large.');const b=n._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);n.HEAPF64.set(t.v,b/t.v.BYTES_PER_ELEMENT);let p=null;if(u>0){const E=new Int32Array(d);p=n._malloc(E.length*E.BYTES_PER_ELEMENT),n.HEAP32.set(E,p/E.BYTES_PER_ELEMENT)}let w=null;if(f>0){const E=new Int32Array(e.exclvars);w=n._malloc(E.length*E.BYTES_PER_ELEMENT),n.HEAP32.set(E,w/E.BYTES_PER_ELEMENT)}const _=n._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);n.HEAPF64.set(e.v,_/e.v.BYTES_PER_ELEMENT);const A=t.v.constructor,y=v*(l+h),k=n._malloc(y*A.BYTES_PER_ELEMENT),C=o*s,T=t.v.constructor,L=n._malloc(C*T.BYTES_PER_ELEMENT);if(n.ccall("pcvpls_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[b,t.nrows,t.ncols-l,l,s,e.center,e.scale,a,o,c,_,k,L,p,u,w,f])!==1)throw new Error("plspcv: unexpected error.");const P=n.HEAPF64.slice(k/A.BYTES_PER_ELEMENT,k/A.BYTES_PER_ELEMENT+y),N=n.HEAPF64.slice(L/T.BYTES_PER_ELEMENT,L/T.BYTES_PER_ELEMENT+C);return n._free(b),n._free(_),n._free(k),n._free(L),p&&n._free(p),w&&n._free(w),[new ot(P,v,l+h),new ot(N,o,s)]}function Lc(n,e){let t,l,s;if(e.length>0){const o=n.values.nrows,a=n.objindices,c=o-e.length;t=Array(c),l=Array(c),s=Array(c);let d=0;for(let u=0;u<o;u++)e.includes(u)||(t[d]=a[u],l[d]=n.classes[u],s[d]=n.objlabels[u],d=d+1)}else t=n.objindices,s=n.objlabels,l=n.classes;return[t,s,l]}function Po(){const n=new Date;return`${n.getFullYear()}${(n.getMonth()+1).toString().padStart(2,"0")}${n.getDate().toString().padStart(2,"0")}${n.getHours().toString().padStart(2,"0")}${n.getMinutes().toString().padStart(2,"0")}${n.getSeconds().toString().padStart(2,"0")}${n.getMilliseconds().toString().padStart(3,"0")}`}function Ml(n,e,t,l){const[s,o,a]=Lc(t,l),c=Cc(n,e,t.values,t.nresp,l);return c.hash=Po(),c.objindices=s,c.objlabels=o,c.varlabels=e.varlabels,t.nresp>0?c.Yref=l&&l.length>0?t.values.subset(s.map(d=>d+1),wt.seq(1,t.nresp)):t.values.subset(null,wt.seq(1,t.nresp)):c.Yref=null,c}function Tc(n,e="."){return Array.isArray(n)&&n.length>0?e==="."?n.map(t=>Number.parseFloat(t.trim())):n.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(n.trim()):Number.parseFloat(n.trim().replace(e,"."))}function dn(n){return n.some(e=>Number.isNaN(e))}function Nr(n){return n.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function Ro(n){let e=n.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function zc(n,e,t,l,s,o,a,c=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const d=e===";"?",":".";let u=Ro(n);if(u.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");u=u.filter(R=>R.replaceAll(e,"").trim().length>0);const f=u[0].split(e);if(f.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let v=0,h;const m=t!=="no";(m||m===void 0&&dn(firstRow))&&(h=f,v=1);const b=u.length-v;if(b<1)throw new Error("Data file should contain at least 1 row with values.");let p,w,_,A=Array(b);l?(p=m?Nr(h[0]):"",_=Array(b),w=1):(p="",_=[],w=0);let y,k=[],C;s?(y=m?Nr(h[w]):"",C=Array(b),w=w+1):(y="",C=[]);const T=f.length-w;if(T<1)throw new Error("Data file should contain at least 1 column with values.");const L=ot.zeros(T,b);for(let R=v;R<b+v;R++){const M=R-v;A[M]=M;let Y=u[R].split(e);if(l&&(_[M]=Y[0],Y.shift()),s){const O=Y[0];C[M]=O,Y.shift(),(k.length===0||k.indexOf(O)<0)&&k.push(O)}const V=d==="."?Y.map((O,K)=>Number.parseFloat(O.trim())):Y.map((O,K)=>Number.parseFloat(O.trim().replace(d,".")));if(V.some(O=>Number.isNaN(O)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(V.length!=T)throw new Error("Wrong number of values in row #"+R);L.v.set(new Float64Array(V),(R-v)*T)}if(!l||_.length!==b){_=Array(b);for(let R=0;R<b;R++)_[R]="O"+(R+1)}_=_.map(R=>Nr(R)),C=C.map(R=>Nr(R)),k=k.map(R=>Nr(R));let z,P=Array(T),N=Array(T);if(h&&h.length===T+w){z=h.map(R=>Nr(R)).slice(w);for(let R=0;R<T;R++)P[R]=R>=c?R-c:R,N[R]=R>=c?R-c+1:R+1}else{z=Array(T);for(let R=0;R<T;R++)P[R]=R>=c?R-c:R,z[R]=R>=c?"V"+(R-c+1):"Y"+(R+1),N[R]=R>=c?R-c+1:R+1}let E;if(t==="values"){if(E=d==="."?z.map((R,M)=>M<c?M:Number.parseFloat(R.trim())):z.map((R,M)=>M<c?M:Number.parseFloat(R.trim().replace(d,"."))),E.some(R=>Number.isNaN(R)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else E=N;Array.isArray(E)||(E=[]),o||(o=""),a||(a=""),o=E.length>0&&o.length>0?o:"Variables",a=E.length>0&&a.length>0?a:"";const I=o+(a.length>0?", "+a:""),W=E[1]<E[0];return{values:L.t(),nresp:c,header:t,hasLabels:l,hasClassNames:s,labelsVarname:p,classLabelsVarname:y,objlabels:_,objindices:A,varlabels:z,varvalues:E,varindices:P,varrev:W,classes:C,classNames:k,sep:e,dec:d,varvaluesName:o,varvaluesUnits:a,varAxisTitle:I}}function Nc(n){if(dn(n[0].slice(2)))return!0;const e=n[0].length,t=[];for(let l=2;l<e;l++){let s=[];for(let u=1;u<n.length;u++)s.push(n[u][l]);const o=n[0][l],a=pr(s),c=Sl(s),d=Math.abs((o-a)/c);t.push(d)}return t.every(l=>l>5)}function Pc(n){const e=",",t=n[0].split(e),l=n[1].split(e),s=t.length,o=l.length,a=";",c=n[0].split(a),d=n[1].split(a),u=c.length,f=d.length;let v,h;if(s>1&&o>1&&s===o&&s>u)h=e,v=s;else if(u>1&&f>1&&u===f)h=a,v=u;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",v]}function Rc(n,e=0){const t=Ro(n),l=t.length;if(l<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[s,o,a]=Pc(t),c=Math.min(a,5),d=Math.min(l,5);let u=t[0].split(s).length,f=t.slice(0,d).map(P=>P.split(s).slice(0,c));f=f.map(P=>P.map(N=>Nr(N)));const v=f.map(P=>Tc(P.slice(),o));for(let P=1;P<d;P++)if(dn(v[P].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const h=Nc(v);let m=0;const b=h?1:0,p=b+1,w=f[b][0],_=f[p][0],A=v[b][0],y=v[p][0],k=v[b][1],C=v[p][1];let T=!1,L=!1;if(Number.isNaN(A)&&Number.isNaN(y)&&w!==_?(T=!0,m=m+1):Number.isNaN(k)&&Number.isNaN(C)&&w!==_&&(T=!0,L=!0,m=m+2),!L){const P=T?1:0,N=v[b][P],E=v[p][P];L=dn([N,E]),m=m+L}let z="no";if(h){m>0?f[0].slice(m+e):f[e];const P=m>0?v[0].slice(m+e):v[e];z=dn(P)?"labels":"values"}return[s,T,L,z,u]}function Mc(n){const e=n.values.t(),t=n.sep,l=n.dec;let s=null;n.header!=="no"&&(s=n.header==="values"?n.nresp&&n.nresp>0?n.varlabels.slice(0,n.nresp).concat(n.varvalues.slice(n.nresp)):n.varvalues.slice():n.varlabels.slice()),s&&n.hasClassNames&&(s=[n.classLabelsVarname,...s]),s&&n.hasLabels&&(s=[n.labelsVarname,...s]);const o=n.classes&&n.classes.length===e.ncols,a=n.objlabels&&n.objlabels.length===e.ncols;let c=s?s.join(t):"";for(let d=0;d<e.ncols;d++){let u=e.getcolref(d+1).join(t);l!=="."&&(u=u.replace(".",l)),o&&(u=n.classes[d]+n.sep+u),a&&(u=n.objlabels[d]+n.sep+u),c=c+`
`+u}return c=c+`
`,l!=="."&&(c=c.replace(/\./g,l)),c}function qc(n,e){const t=Mc(n),l=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(l),o=document.createElement("a");o.setAttribute("href",s),o.setAttribute("download",`${e}.csv`),o.click()}function Ic(n,e){const t=n.nresp?n.nresp:0,l=n.values,s=n.varvalues,o=n.varlabels,a=n.varindices,c=l.nrows,d=l.ncols,u=d-e.length,f=ot.zeros(c,u),v=Array(u),h=Array(u),m=Array(u);let b=0;for(let p=0;p<t;p++){const w=c*p,_=c*b;f.v.set(l.v.slice(w,w+c),_),v[b]=s[p],h[b]=o[p],m[b]=a[p],b=b+1}for(let p=t;p<d;p++){if(e.includes(p-t))continue;const w=c*p,_=c*b;f.v.set(l.v.slice(w,w+c),_),v[b]=s[p],h[b]=o[p],m[b]=a[p],b=b+1}return{values:f,header:n.header,hasLabels:n.hasLabels,hasClassNames:n.hasClassNames,classNames:n.classNames,labelsVarname:n.labelsVarname,classLabelsVarname:n.classLabelsVarname,objlabels:n.objlabels,objindices:n.objindices,varlabels:h,varvalues:v,varindices:m,varrev:n.varrev,classes:n.classes,responses:n.responses,classNames:n.classNames,sep:n.sep,dec:n.dec,varvaluesName:n.varvaluesName,varvaluesUnits:n.varvaluesUnits,varAxisTitle:n.varAxisTitle,fileName:n.fileName,nresp:t}}function fn(n,e){return rr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Le(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function Mo(n,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return yc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Pe(e.v);const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function ql(n){const e=n.getFullYear(),t=String(n.getMonth()+1).padStart(2,"0"),l=String(n.getDate()).padStart(2,"0"),s=String(n.getHours()).padStart(2,"0"),o=String(n.getMinutes()).padStart(2,"0"),a=String(n.getSeconds()).padStart(2,"0");return`${e}${t}${l}${s}${o}${a}`}var jc=G('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function dt(n,e){let t=H(e,"text",3,"button");var l=jc();l.__click=function(...o){var a;(a=e.onclick)==null||a.apply(this,o)};var s=D(l);Z(()=>be(s,t())),S(n,l)}rt(["click"]);var Fc=G('<button tabindex="0"></button>');function Il(n,e){H(e,"disable",3,!1);var t=Fc();t.__click=function(...l){var s;(s=e.onclick)==null||s.apply(this,l)},Z(()=>{q(t,"title",e.title),q(t,"aria-label",e.title),q(t,"alt",e.title),ut(t,1,`button ${e.className??""}`,"svelte-bx9fh5")}),S(n,t)}rt(["click"]);function Pr(n,e){let t=H(e,"title",3,"Reset");Il(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function Vc(n,e){let t=H(e,"title",3,"Undo");Il(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function Oc(n,e){let t=H(e,"title",3,"Download");Il(n,{get title(){return t()},get onclick(){return e.onclick},className:"button-download"})}function ft(n){const e={};for(const t of Object.keys(n))e[t]=n[t].default;return e}var Bc=G('<span class="label svelte-1986c5z"> </span>'),Dc=G("<div><!> <!></div>");function we(n,e){let t=H(e,"label",3,null),l=H(e,"name",3,""),s=H(e,"status",3,""),o=H(e,"colors",3,""),a=H(e,"labelWidth",3,12);var c=Dc(),d=D(c);{var u=v=>{var h=Bc(),m=D(h);Z(()=>{nt(h,`flex-basis:${a()??""}ch;`),be(m,t())}),S(v,h)};U(d,v=>{t()&&v(u)})}var f=F(d,2);br(f,()=>e.children??gt),Z(()=>{ut(c,1,`control-element ${l()??""} ${s()??""}`,"svelte-1986c5z"),nt(c,o())}),S(n,c)}const qo=(n,e,t,l)=>{const s=e(n);s<0||s>1||B(t,s*100>r(l)-5&&s*100<r(l)+5,!0)},Io=(n,e,t,l,s,o)=>{B(e,!1);const a=t(n);a<0||a>1||(l(s(a)),o()&&o()(l()))},jo=(n,e,t,l,s,o)=>{if(!r(e))return;const a=t(n);a<0||a>1||(l(s(a)),o()&&o()(l()))},Yc=(n,e,t,l,s,o)=>{if(n.key==="ArrowLeft"){e(e()-t()<l()?l():e()-t()),s()&&s()(e());return}if(n.key==="ArrowRight"){e(e()+t()>o()?o():e()+t()),s()&&s()(e());return}};var Wc=G('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div><span> </span></div></div>');function jl(n,e){ie(e,!0);let t=H(e,"min",7,0),l=H(e,"max",3,100),s=H(e,"value",31,()=>Je(t())),o=H(e,"decNum",3,1),a=H(e,"step",19,()=>+((l()-t())/100).toFixed(4)),c=H(e,"onchange",3,null);Te(()=>{s()<t()&&(s(t()),c()&&c()(s())),s()>l()&&(s(l()),c()&&c()(s())),t()>l()&&t(l())});let d=ne(void 0),u=ne(void 0),f=ne(!1);const v=T=>{const L=t()+T*(l()-t());return+(Math.round(L/a())*a()).toFixed(4)},h=T=>{const L=r(d).getBoundingClientRect(),z=r(u).getBoundingClientRect(),P=L.x,N=z.x+z.width;return(T.clientX-P)/(N-P)},m=T=>{B(f,!1)},b=T=>{let L=s()+a()*T.deltaY*.5;L<t()&&(L=t()),L>l()&&(L=l()),s(+(Math.round(L/a())*a()).toFixed(4)),T.preventDefault(),c()&&c()(s())},p=g(()=>t()===l()?100:(s()-t())/(l()-t())*100);var w=Wc();w.__keydown=[Yc,s,a,t,c,l],w.__mousemove=[jo,f,h,s,v,c],w.__mousedown=[qo,h,f,p],w.__mouseup=[Io,f,h,s,v,c],w.__touchmove=[jo,f,h,s,v,c],w.__touchstart=[qo,h,f,p],w.__touchend=[Io,f,h,s,v,c];var _=D(w);let A;var y=D(_);let k;var C=D(y);Lr(_,T=>B(d,T),()=>r(d)),Lr(w,T=>B(u,T),()=>r(u)),Z((T,L,z)=>{q(w,"aria-valuenow",s()),q(w,"aria-valuemin",t()),q(w,"aria-valuemax",l()),A=ut(_,1,"range-slider svelte-vhx0r0",null,A,T),nt(_,`width:${r(p)??""}%`),k=ut(y,1,"range-value svelte-vhx0r0",null,k,L),be(C,z)},[()=>({"range-slider_right":r(p)<50}),()=>({"range-value_right":r(p)<50}),()=>s().toFixed(o())]),Ar("mousewheel",w,b),Ar("mouseleave",w,m),Ar("touchcancel",w,m),S(n,w),ce()}rt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Fo=(n,e,t,l,s)=>{const o=e(n);o<0||o>1||B(t,o>r(l)&&o<r(s)+r(l),!0)},Vo=(n,e,t,l,s)=>{B(e,!1);const o=t(n);if(o<0||o>1)return;const a=l(o);s()!==a&&s(a)},Oo=(n,e,t,l,s)=>{if(!r(e))return;const o=t(n);if(o<0||o>1)return;const a=l(o);a!=s()&&s(a)},Hc=(n,e,t,l,s)=>{if(n.key==="ArrowLeft"){e(e()-t()<l()?l():e()-t());return}if(n.key==="ArrowRight"){e(e()+t()>s()?s():e()+t());return}};var Uc=G('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div><span> </span></div></div>');function ur(n,e){ie(e,!0);let t=H(e,"min",3,0),l=H(e,"max",3,10),s=H(e,"value",31,()=>Je(t())),o=H(e,"step",3,1);s()<t()&&(console.error('The "value" is outside of the provided range.'),s(t())),s()>l()&&(console.error('The "value" is outside of the provided range.'),s(l())),t()>l()&&console.error("The min and max values must be distinct.");let a=ne(void 0),c=ne(void 0),d=ne(!1);const u=g(()=>t()===l()?0:(s()-t())/(l()-t()+o())),f=g(()=>o()/(l()-t()+o())),v=g(()=>l()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${r(f)*100}%, var(--bg-color-light2, #e8e8e8) ${r(f)*100}%, var(--bg-color-light2, #e8e8e8) ${200*r(f)}%)`:"background: #f0f0f0"),h=T=>{if(T<0||T>1)return s();let L=s();return Math.round(r(f)/T),T<r(u)&&r(u)>0&&(L=s()-o()*Math.ceil((r(u)-T)/r(f))),T>r(u)+r(f)&&r(u)+r(f)<1&&(L=s()+o()*Math.ceil((T-(r(u)+r(f)))/r(f))),L<t()&&(L=t()),L>l()&&(L=l()),L},m=T=>{const L=r(c).getBoundingClientRect(),z=L.x,P=L.x+L.width;return(T.clientX-z)/(P-z)},b=T=>{B(d,!1)},p=T=>{let L=s()+Math.round(T.deltaY*.5)*o();L<t()&&(L=t()),L>l()&&(L=l()),s(L),T.preventDefault()};var w=Uc();w.__keydown=[Hc,s,o,t,l],w.__mousemove=[Oo,d,m,h,s],w.__mousedown=[Fo,m,d,u,f],w.__mouseup=[Vo,d,m,h,s],w.__touchmove=[Oo,d,m,h,s],w.__touchstart=[Fo,m,d,u,f],w.__touchend=[Vo,d,m,h,s];var _=D(w);let A;var y=D(_);let k;var C=D(y);Lr(_,T=>B(a,T),()=>r(a)),Lr(w,T=>B(c,T),()=>r(c)),Z((T,L,z)=>{q(w,"aria-valuenow",s()),q(w,"aria-valuemin",t()),q(w,"aria-valuemax",l()),nt(w,r(v)),A=ut(_,1,"range-slider svelte-xdlm7u",null,A,T),nt(_,`width: max(2px, ${r(f)*100}%);left:${r(u)*100}%;`),k=ut(y,1,"range-value svelte-xdlm7u",null,k,L),be(C,z)},[()=>({"range-slider_left":r(f)<.1&&r(u)<.5,"range-slider_right":r(f)<.1&&r(u)>=.5}),()=>({"range-value_right":r(f)<.1&&r(u)>.5,"range-value_left":r(f)<.1&&r(u)<=.5}),()=>s().toFixed(0)]),Ar("mousewheel",w,p),Ar("mouseleave",w,b),Ar("touchcancel",w,b),S(n,w),ce()}rt(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const Xc=(n,e,t)=>{if(n.key==="ArrowLeft"){const l=e.options.findIndex(s=>s===t());l>0&&t(e.options[l-1]);return}if(n.key==="ArrowRight"){const l=e.options.findIndex(s=>s===t());l<e.options.length-1&&t(e.options[l+1]);return}};var Gc=(n,e,t)=>e(t),Kc=G('<button tabindex="-1"><!></button>'),Jc=G('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox"/>',1);function Qe(n,e){ie(e,!0);let t=H(e,"value",31,()=>Je(e.options[0])),l=H(e,"className",3,"");var s=Jc(),o=J(s);o.__keydown=[Xc,e,t],ze(o,20,()=>e.options,c=>c,(c,d)=>{var u=Kc();u.__click=[Gc,t,d];let f;var v=D(u);Et(v,()=>d),Z((h,m)=>f=ut(u,1,`option option_${h??""}`,"svelte-1i17tox",f,m),[()=>d.toString().replace(".","_"),()=>({selected:d==t()})]),S(c,u)});var a=F(o,2);Z(()=>ut(o,1,`selector ${l()??""}`,"svelte-1i17tox")),_l(a,t),S(n,s),ce()}rt(["keydown","click"]);function Kt(n,e){ie(e,!0);let t=H(e,"options",19,()=>["no","yes"]),l=H(e,"value",15,!1),s=ne(!0);const o=g(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());Te(()=>B(s,l()?t()[1]:t()[0],!0)),Te(()=>l(r(s)===t()[1]));var a=oe(),c=J(a);{var d=u=>{Qe(u,{get options(){return r(o)},get value(){return r(s)},set value(f){B(s,f,!0)}})};U(c,u=>{r(o)&&u(d)})}S(n,a),ce()}function Bo(n,e,t){r(e)&&r(e).files.length>0?t(r(e).files.length===1?r(e).files[0]:r(e).files):t(null)}function Do(n,e){(n.type==="click"||n.type==="keydown"&&(n.code==="Space"||n.code==="Enter"))&&r(e).click()}var Qc=G('<input type="file" multiple class="svelte-1k0x7uv"/>'),Zc=G('<input type="file" class="svelte-1k0x7uv"/>'),$c=G('<div tabindex="0" role="radiogroup"> <!></div> <!>',1);function Yo(n,e){ie(e,!0);let t=H(e,"file",15),l=H(e,"message",3,"Select CSV file with dataset"),s=H(e,"acceptType",3,".csv"),o=H(e,"multiple",3,!1),a=ne(void 0);function c(_){r(a).value=null,t(null)}var d=$c(),u=J(d);u.__keydown=[Do,a],u.__click=[Do,a];let f;var v=D(u),h=F(v);{var m=_=>{var A=Qc();A.__change=[Bo,a,t],Lr(A,y=>B(a,y),()=>r(a)),Z(()=>q(A,"accept",s())),S(_,A)},b=_=>{var A=Zc();A.__change=[Bo,a,t],Lr(A,y=>B(a,y),()=>r(a)),Z(()=>q(A,"accept",s())),S(_,A)};U(h,_=>{o()?_(m):_(b,!1)})}var p=F(u,2);{var w=_=>{Pr(_,{onclick:c})};U(p,_=>{t()&&_(w)})}Z(_=>{f=ut(u,1,"file-selector svelte-1k0x7uv",null,f,_),be(v,`${(t()?t().name:l())??""} `)},[()=>({selected:t()})]),S(n,d),ce()}rt(["keydown","click","change"]);function eu(n,e,t,l){e()&&B(t,e()(l()),!0)}var tu=G('<div class="error-message svelte-1qtiwcs"> </div>'),ru=G('<div><input type="text" class="svelte-1qtiwcs"/> <!></div>');function Wo(n,e){ie(e,!0);let t=H(e,"value",15,""),l=H(e,"className",3,""),s=H(e,"placeholder",3,""),o=H(e,"maxLength",3,25),a=H(e,"validator",3,null),c=ne("");var d=ru();let u;var f=D(d);f.__input=[eu,a,c,t];var v=F(f,2);{var h=m=>{var b=tu(),p=D(b);Z(()=>be(p,r(c))),S(m,b)};U(v,m=>{r(c)&&r(c).length>0&&m(h)})}Z(m=>{u=ut(d,1,`textinput ${l()??""}`,"svelte-1qtiwcs",u,m),q(f,"placeholder",s()),q(f,"maxlength",o())},[()=>({error:r(c)&&r(c).length>0})]),_l(f,t),S(n,d),ce()}rt(["input"]);var nu=G('<div class="spinner svelte-n48urb"></div>');function Fl(n){var e=nu();S(n,e)}const lu=(n,e,t)=>{if(n.key==="ArrowLeft"){const l=e().findIndex(s=>s===t());l>0&&t(e()[l-1]);return}if(n.key==="ArrowRight"){const l=e().findIndex(s=>s===t());l<e().length-1&&t(e()[l+1]);return}};var su=(n,e,t)=>e(t),ou=G('<button tabindex="-1"><!></button>'),au=G('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an"/>',1);function Vl(n,e){ie(e,!0);let t=H(e,"options",19,()=>["p","l","b","h","qq"]),l=H(e,"value",31,()=>Je(t()[0]));const s='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',o={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>',qq:'<circle cx="6.5" cy="15.0" r="1" stroke-width="4"/><circle cx="15.2" cy="10" r="1" stroke-width="4"/><circle cx="25" cy="5.8" r="1" stroke-width="4"/>'};o.b=o.l+o.p;const a={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar",qq:"qq-plot"};var c=au(),d=J(c);d.__keydown=[lu,t,l],ze(d,20,t,f=>f,(f,v)=>{var h=ou();h.__click=[su,l,v];let m;var b=D(h);Et(b,()=>s+o[v]+"</svg"),Z(p=>{m=ut(h,1,"option svelte-yf64an",null,m,p),q(h,"title",a[v])},[()=>({selected:v==l()})]),S(f,h)});var u=F(d,2);_l(u,l),S(n,c),ce()}rt(["keydown","click"]),rt(["keydown","click"]);var iu=G("<h2> </h2>"),cu=G("<!> <!>",1),uu=G('<div class="widget"><!></div>');function du(n,e){ie(e,!0);let t=H(e,"title",3,""),l=H(e,"value",15),s=H(e,"labelWidth",3,13);function o(u){const f={};for(const v of Object.keys(u))f[v]=u[v].default;return f}Te(()=>{!l()&&e.options&&l(o(e.options))});var a=uu(),c=D(a);{var d=u=>{var f=cu(),v=J(f);{var h=b=>{we(b,{children:(p,w)=>{var _=iu(),A=D(_);Z(()=>be(A,t())),S(p,_)},$$slots:{default:!0}})};U(v,b=>{t()&&b(h)})}var m=F(v,2);ze(m,17,()=>Object.keys(e.options),Ne,(b,p)=>{var w=oe();const _=g(()=>e.options[r(p)]);var A=J(w);{var y=k=>{we(k,{get name(){return r(_).name},get label(){return r(_).label},get labelWidth(){return s()},children:(C,T)=>{var L=oe(),z=J(L);pl(z,()=>r(_).el,(P,N)=>{N(P,io(()=>r(_).props,{get value(){return l()[r(p)]},set value(E){l(l()[r(p)]=E,!0)}}))}),S(C,L)},$$slots:{default:!0}})};U(A,k=>{r(_).hidden||k(y)})}S(b,w)}),S(u,f)};U(c,u=>{l()&&u(d)})}S(n,a),ce()}var fu=G("<!> <!> <!> <!>",1),vu=G("<p> </p>"),hu=G("<!> <p>Computing global model...</p>",1),mu=G('<p><span style="color:#a0a0a0;">PLS model:</span> </p> <!>',1),gu=G('<div class="buttons"><!> <!></div>'),bu=G("<!> <!>",1),pu=G("<p> </p>"),wu=G("<!> <!> <!> <!>",1);function _u(n,e){ie(e,!0);let t=H(e,"outliers",19,()=>[]),l=H(e,"exclvars",19,()=>[]),s=H(e,"resobj",15),o=H(e,"model",15),a=H(e,"downloadModel",3,null),c=H(e,"downloadResults",3,null),d=ne("neutral"),u=ne(""),f=ne(1),v=ne(!0),h=ne(!1),m=ne(void 0);async function b(E,I,W,j){const R=E.nresp,M=E.varindices;B(m,e.WASM().then(Y=>{B(d,"computing");const V=Sc(Y,E.values,R,I,W,j,t(),l());V.hash=Po(),V.varlabels=E.varlabels.filter((K,te)=>te<R||!l().includes(M[te])),V.varindices=E.varindices.filter((K,te)=>te<R||!l().includes(M[te])),V.varvalues=E.varvalues.filter((K,te)=>te<R||!l().includes(M[te])),V.xvarlabels=V.varlabels.filter((K,te)=>te+1>R),V.xvarvalues=V.varvalues.filter((K,te)=>te+1>R),V.xvarindices=V.varindices.filter((K,te)=>te+1>R).map(K=>K+1),V.varvaluesName=E.varvaluesName,V.varvaluesUnits=E.varvaluesUnits,V.varrev=E.varrev,V.prep=[];const O=Ml(Y,V,E,t());V.stat={xexpvar:O.stat.xexpvar,yexpvar:O.stat.yexpvar},o(V),s(O),B(d,"success")}).catch(Y=>{console.error(Y),o(null),B(d,"error"),B(u,Y,!0)}),!0)}function p(E){B(d,"neutral"),B(u,null),b(e.dataset,r(f),r(v),r(h))}function w(){B(d,"neutral"),B(m,null),s(null),o(null),B(u,null)}let _=g(()=>e.dataset?Math.min(e.dataset.values.nrows-2-t().length,e.dataset.values.ncols-e.dataset.nresp-l().length-1,50):null);Te(()=>{e.dataset===null&&w()}),Te(()=>{B(f,r(_)?Math.min(r(_),20):null,!0)});var A=wu(),y=J(A);{var k=E=>{var I=fu(),W=J(I);we(W,{name:"ncomp",label:"# of LVs",children:(Y,V)=>{jl(Y,{id:"ncomp",min:1,get max(){return r(_)},step:1,decNum:0,get value(){return r(f)},set value(O){B(f,O,!0)}})},$$slots:{default:!0}});var j=F(W,2);we(j,{name:"center",label:"Center",children:(Y,V)=>{Kt(Y,{id:"center",options:["no","yes"],get value(){return r(v)},set value(O){B(v,O,!0)}})},$$slots:{default:!0}});var R=F(j,2);we(R,{name:"scale",label:"Scale",children:(Y,V)=>{Kt(Y,{id:"scale",options:["no","yes"],get value(){return r(h)},set value(O){B(h,O,!0)}})},$$slots:{default:!0}});var M=F(R,2);we(M,{name:"create-model",label:" ",children:(Y,V)=>{dt(Y,{onclick:p,text:"Create model"})},$$slots:{default:!0}}),S(E,I)};U(y,E=>{e.dataset&&!o()&&r(d)!=="computing"&&E(k)})}var C=F(y,2);{var T=E=>{var I=oe(),W=J(I);bl(W,()=>r(m),j=>{we(j,{name:"spinner",children:(R,M)=>{var Y=hu(),V=J(Y);Fl(V),S(R,Y)},$$slots:{default:!0}})},void 0,(j,R)=>{we(j,{name:"error",status:"error",children:(M,Y)=>{var V=vu(),O=D(V);Z(()=>be(O,r(R))),S(M,V)},$$slots:{default:!0}})}),S(E,I)};U(C,E=>{r(m)&&E(T)})}var L=F(C,2);{var z=E=>{var I=bu(),W=J(I);we(W,{name:"info",children:(M,Y)=>{var V=mu(),O=J(V),K=F(D(O)),te=F(O,2);Pr(te,{onclick:w}),Z(()=>be(K,` ${o().ncomp??""} LVs${o().center?", centered":""}${o().scale?", scaled":""}`)),S(M,V)},$$slots:{default:!0}});var j=F(W,2);{var R=M=>{we(M,{name:"download-buttons",label:"Download",children:(Y,V)=>{var O=gu(),K=D(O);dt(K,{onclick:()=>c()(s(),e.dataset,"train",t()),text:"Results"});var te=F(K,2);dt(te,{onclick:()=>a()(o()),text:"Model"}),S(Y,O)},$$slots:{default:!0}})};U(j,M=>{a()&&c()&&M(R)})}S(E,I)};U(L,E=>{o()&&E(z)})}var P=F(L,2);{var N=E=>{we(E,{name:"error",status:"error",children:(I,W)=>{var j=pu(),R=D(j);Z(()=>be(R,r(u))),S(I,j)},$$slots:{default:!0}})};U(P,E=>{(r(d)==="error"||r(u))&&E(N)})}S(n,A),ce()}var yu=G("<!> <!> <!>",1),xu=G('<p class="svelte-16w7odi"> </p>'),ku=G('<!> <p class="svelte-16w7odi">Computing PV-set...</p>',1),Eu=G('<p class="svelte-16w7odi"><span class="svelte-16w7odi">PV-set:</span> <br/> <span class="svelte-16w7odi">Size:</span> <span class="svelte-16w7odi">(X)</span> <span class="svelte-16w7odi">(Y)</span>,</p> <!> <!>',1),Su=G('<p class="svelte-16w7odi"> </p>'),Cu=G("<!> <!> <!> <!>",1);function Au(n,e){ie(e,!0);let t=H(e,"outliers",19,()=>[]),l=H(e,"pvset",15),s=H(e,"pvres",15),o=H(e,"pvscalars",15),a=ne("neutral"),c=ne(""),d=ne(Je(["ven","rand","loo"])),u=ne("ven"),f=ne(void 0),v=e.calset.values.nrows-t().length,h=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(N=>N>=v/(v-e.model.ncomp-1)&&N<=v/2):[],m=ne(Je(h.length>0?h[0]:0));Te(()=>{h.length===0&&(B(d,["loo"],!0),B(u,"loo"))});async function b(N,E,I,W){B(f,e.WASM().then(j=>{const R=I.type=="loo"?0:I.type=="rand"?2:1,[M,Y]=Ac(j,E,N.values,N.nresp,E.ncomp,I.nseg,R,0,W);l({classLabelsVarname:N.classLabelsVarname,classNames:N.classNames,classes:N.classes,dec:N.dec,fileName:N.fileName+"-pcv",hasClassNames:N.hasClassNames,hasLabels:N.hasLabels,header:N.header,labelsVarname:N.labelsVarname,objindices:e.calres.objindices,objlabels:e.calres.objlabels,sep:N.sep,values:M,varAxisTitle:N.varAxisTitle,varindices:E.varindices,varlabels:E.varlabels,varrev:E.varrev,varvalues:E.varvalues,varvaluesName:E.varvaluesName,varvaluesUnits:E.varvaluesUnits,nresp:E.nresp}),s(Ml(j,E,l(),[])),o(Y)}).catch(j=>{console.error(j),l(null),s(null),B(a,"error"),B(c,j,!0)}),!0)}function p(N){B(a,"neutral"),B(c,""),b(e.calset,e.model,{type:r(u),nseg:r(m)},t())}function w(){B(a,"neutral"),B(c,""),B(f,null),l(null),s(null)}Te(()=>{e.model===null&&w()});var _=Cu(),A=J(_);{var y=N=>{var E=yu(),I=J(E);we(I,{name:"split",label:"Split type:",children:(M,Y)=>{Qe(M,{id:"cvType",get options(){return r(d)},get value(){return r(u)},set value(V){B(u,V,!0)}})},$$slots:{default:!0}});var W=F(I,2);{var j=M=>{we(M,{name:"nseg",label:"Segments:",children:(Y,V)=>{Qe(Y,{id:"nseg",get options(){return h},get value(){return r(m)},set value(O){B(m,O,!0)}})},$$slots:{default:!0}})};U(W,M=>{r(u)!=="loo"&&M(j)})}var R=F(W,2);we(R,{name:"run-button",label:" ",children:(M,Y)=>{dt(M,{onclick:p,text:"Compute PV-set"})},$$slots:{default:!0}}),S(N,E)};U(A,N=>{e.model&&!l()&&r(a)!=="busy"&&N(y)})}var k=F(A,2);{var C=N=>{var E=oe(),I=J(E);bl(I,()=>r(f),W=>{we(W,{name:"spinner",children:(j,R)=>{var M=ku(),Y=J(M);Fl(Y),S(j,M)},$$slots:{default:!0}})},void 0,(W,j)=>{we(W,{name:"error",status:"error",children:(R,M)=>{var Y=xu(),V=D(Y);Z(()=>be(V,r(j))),S(R,Y)},$$slots:{default:!0}})}),S(N,E)};U(k,N=>{r(f)&&N(C)})}var T=F(k,2);{var L=N=>{we(N,{name:"info",children:(E,I)=>{var W=Eu(),j=J(W),R=F(D(j)),M=F(R,4),Y=F(M,2),V=F(j,2);Oc(V,{onclick:()=>qc(l(),e.calset.fileName+"-pv")});var O=F(V,2);Pr(O,{onclick:w}),Z(()=>{be(R,` ${r(u)??""}
      ${r(u)!=="loo"?r(m)+" seg":""}`),be(M,` ${l().values.nrows??""}×${l().values.ncols-l().nresp} `),be(Y,`,
      ${l().values.nrows??""}×${l().nresp??""} `)}),S(E,W)},$$slots:{default:!0}})};U(T,N=>{l()&&N(L)})}var z=F(T,2);{var P=N=>{we(N,{name:"error",status:"error",children:(E,I)=>{var W=Su(),j=D(W);Z(()=>be(j,r(c))),S(E,W)},$$slots:{default:!0}})};U(z,N=>{r(a)==="error"&&r(c)&&N(P)})}S(n,_),ce()}var Lu=G('<span style="font-weight:bold"> </span><br/>',1),Tu=G('<span class="file-size svelte-gdjwex"> </span> <span>(X)</span>, <span class="file-size svelte-gdjwex"> </span> <span>(Y)</span>',1),zu=G('<span class="file-size svelte-gdjwex"> </span>'),Nu=G('<p class="dataset-info svelte-gdjwex"><!> <span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br/> <span>Size:</span> <!></p> <!>',1);function Pu(n,e){ie(e,!0);let t=H(e,"title",3,"");var l=oe(),s=J(l);{var o=a=>{we(a,{children:(c,d)=>{var u=Nu(),f=J(u),v=D(f);{var h=y=>{var k=Lu(),C=J(k),T=D(C);Z(()=>be(T,t())),S(y,k)};U(v,y=>{t()&&t()!==""&&y(h)})}var m=F(v,4),b=D(m),p=F(m,5);{var w=y=>{var k=Tu(),C=J(k),T=D(C),L=F(C,4),z=D(L);Z(()=>{be(T,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols-e.dataset.nresp}`),be(z,`${e.dataset.values.nrows??""}×${e.dataset.nresp??""}`)}),S(y,k)},_=y=>{var k=zu(),C=D(k);Z(()=>be(C,`${e.dataset.values.nrows??""}×${e.dataset.values.ncols??""}`)),S(y,k)};U(p,y=>{e.dataset.nresp&&e.dataset.nresp>0?y(w):y(_,!1)})}var A=F(f,2);Pr(A,{get onclick(){return e.reset}}),Z(()=>{q(m,"title",e.dataset.fileName),be(b,e.dataset.fileName)}),S(c,u)},$$slots:{default:!0}})};U(s,a=>{e.dataset&&a(o)})}S(n,l),ce()}var Ru=G("<!> <!>",1),Mu=G("<!> <!> <!> <!> <!> <!>",1),qu=G("<!> <!>",1),Iu=G("<p> </p>"),ju=G("<!> <p> </p>",1),Fu=G("<p> </p>"),Vu=G("<!> <!> <!>",1);function Ol(n,e){ie(e,!0);let t=H(e,"model",3,null),l=H(e,"outliers",19,()=>[]),s=H(e,"respMandatory",3,!1),o=H(e,"title",3,""),a=H(e,"dataset",15),c=H(e,"resobj",15);const d=[",",";"],u=g(()=>t()?["no","yes"]:["no","labels","values"]);let f=ne(void 0),v=ne(""),h=ne(""),m=Je(s()?1:0),b=!1,p=ne(","),w=ne("no"),_=ne(!1),A=ne(0),y=ne(null),k=ne("neutral"),C=ne("");function T(O,K,te){B(y,e.WASM().then($=>{c(Ml($,O,K,te))}).catch($=>{console.error($),c(null),B(k,"error"),B(C,$,!0)}),!0)}function L(O,K){if(!O||O.size<10)return;const $=O.slice(0,1e5),ee=new FileReader;ee.onload=()=>{const re=ee.result;!re||re.length<0||((de=>{var pe=Gn(de,5);B(p,pe[0],!0),B(_,pe[1],!0),b=pe[2],B(w,pe[3],!0),B(A,pe[4],!0)})(Rc(re,m)),K&&r(w)!=="no"&&B(w,"yes"))},ee.onerror=function(re){csvString=null,B(k,"error"),B(C,re,!0),console.error("Error reading CSV file.",re)},ee.readAsText($)}function z(O){try{const K=zc(O,r(p),r(w)==="yes"?"labels":r(w),r(_),b,r(v),r(h),m);if(K.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(K.values.ncols-K.nresp<2)throw new Error("Dataset should habe at least two predictors.");if(t()){const te=s()?t().npred+t().exclvars.length+t().nresp:t().npred+t().exclvars.length;if(K.values.ncols!==te)throw new Error("Dataset has different number of columns than the training set.");K.varrev=t().varrev,K.header=t().header,K.varlabels=t().varlabels,K.varvalues=t().varvalues,K.varindices=t().varindices,K.varvaluesName=t().varvaluesName,K.varvaluesUnits=t().varvaluesUnits}K.fileName=r(f).name.replace(/\.[^/.]+$/,""),a(K),B(C,""),B(k,"success")}catch(K){console.error(K),a(null),B(k,"error"),B(C,K,!0)}}function P(O){const K=new FileReader;K.onload=()=>{z(K.result)},K.readAsText(r(f))}function N(){B(f,""),a(null),c(null),B(v,""),B(h,""),B(k,"neutral"),B(C,"")}Te(()=>{r(f)===null?N():(L(r(f),t()),B(k,"neutral"),B(C,""))}),Te(()=>{r(p)&&(B(k,"neutral"),B(C,""))}),Te(()=>{if(a()&&t()&&!c()&&!r(C))try{c(T(t(),a(),l())),B(C,""),B(k,"success")}catch(O){console.error(O),a(null),c(null),B(k,"error"),B(C,O,!0)}});var E=Vu(),I=J(E);{var W=O=>{var K=qu(),te=J(K);cn(te,()=>r(f)===void 0,re=>{we(re,{children:(de,pe)=>{Yo(de,{id:"dataFile",message:"Select CSV file with dataset",get file(){return r(f)},set file(fe){B(f,fe,!0)}})},$$slots:{default:!0}})});var $=F(te,2);{var ee=re=>{var de=Mu(),pe=J(de);we(pe,{label:"Delimiter",children:(ae,Ae)=>{Qe(ae,{id:"sep",get options(){return d},get value(){return r(p)},set value(_e){B(p,_e,!0)}})},$$slots:{default:!0}});var fe=F(pe,2);we(fe,{label:"Row labels",children:(ae,Ae)=>{Kt(ae,{id:"hasLabels",options:["no","yes"],get value(){return r(_)},set value(_e){B(_,_e,!0)}})},$$slots:{default:!0}});var ke=F(fe,2);{var me=ae=>{};U(ke,ae=>{s()||ae(me)})}var ge=F(ke,2);we(ge,{label:"Header",children:(ae,Ae)=>{Qe(ae,{id:"header",get options(){return r(u)},get value(){return r(w)},set value(_e){B(w,_e,!0)}})},$$slots:{default:!0}});var ye=F(ge,2);{var ue=ae=>{var Ae=Ru(),_e=J(Ae);we(_e,{label:"Header name (predictors)",children:(Be,yt)=>{Wo(Be,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return r(v)},set value(Xe){B(v,Xe,!0)}})},$$slots:{default:!0}});var Se=F(_e,2);we(Se,{label:"Header units (predictors)",children:(Be,yt)=>{Wo(Be,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return r(h)},set value(Xe){B(h,Xe,!0)}})},$$slots:{default:!0}}),S(ae,Ae)};U(ye,ae=>{r(w)==="values"&&ae(ue)})}var ve=F(ye,2);we(ve,{label:" ",children:(ae,Ae)=>{dt(ae,{text:"Load",onclick:P})},$$slots:{default:!0}}),S(re,de)};U($,re=>{r(f)&&re(ee)})}S(O,K)},j=O=>{var K=oe(),te=J(K);{var $=ee=>{var re=oe(),de=J(re);bl(de,()=>r(y),pe=>{we(pe,{children:(fe,ke)=>{var me=ju(),ge=J(me);Fl(ge);var ye=F(ge,2),ue=D(ye);Z(()=>be(ue,t()?"Loading data and apply model...":"Loading data...")),S(fe,me)},$$slots:{default:!0}})},void 0,(pe,fe)=>{we(pe,{status:"error",children:(ke,me)=>{var ge=Iu(),ye=D(ge);Z(()=>be(ye,r(fe))),S(ke,ge)},$$slots:{default:!0}})}),S(ee,re)};U(te,ee=>{r(y)&&ee($)})}S(O,K)};U(I,O=>{a()?O(j,!1):O(W)})}var R=F(I,2);{var M=O=>{Pu(O,{get dataset(){return a()},reset:N,get title(){return o()}})};U(R,O=>{a()&&O(M)})}var Y=F(R,2);{var V=O=>{we(O,{status:"error",children:(K,te)=>{var $=Fu(),ee=D($);Z(()=>be(ee,r(C))),S(K,$)},$$slots:{default:!0}})};U(Y,O=>{(r(k)==="error"||r(C))&&O(V)})}S(n,E),ce()}var Ou=G('<span class="item svelte-1ggez3e"> </span>'),Bu=G('<p class="outliers svelte-1ggez3e"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function Bl(n,e){ie(e,!0);var t=oe(),l=J(t);{var s=o=>{we(o,{children:(a,c)=>{var d=Bu(),u=J(d),f=F(D(u),2);ze(f,17,()=>e.outliers,Ne,(b,p)=>{var w=Ou(),_=D(w);Z(()=>be(_,e.dataset.objlabels[r(p)])),S(b,w)});var v=F(u,2);{var h=b=>{Vc(b,{get onclick(){return e.undoOutliers}})};U(v,b=>{e.outliers.length>1&&b(h)})}var m=F(v,2);Pr(m,{get onclick(){return e.resetOutliers}}),S(a,d)},$$slots:{default:!0}})};U(l,o=>{e.dataset&&e.outliers&&e.outliers.length>0&&o(s)})}S(n,t),ce()}var Du=G('<p class="exclvars svelte-181kelh"><span style="color:#a0a0a0;">Excluded</span> <span style="color:#504040;"> </span> <span style="color:#a0a0a0;">variables</span></p> <!>',1);function Yu(n,e){ie(e,!0);var t=oe(),l=J(t);{var s=o=>{we(o,{children:(a,c)=>{var d=Du(),u=J(d),f=F(D(u),2),v=D(f),h=F(u,2);Pr(h,{get onclick(){return e.resetExclvars}}),Z(()=>be(v,e.exclvars.length)),S(a,d)},$$slots:{default:!0}})};U(l,o=>{e.exclvars&&e.exclvars.length>0&&o(s)})}S(n,t),ce()}const Wu={small:30,medium:40,large:50,xlarge:60},Hu={small:5,medium:8,large:12,xlarge:15},Uu={small:6,medium:10,large:14,xlarge:18},Dl={small:4,medium:6,large:8,xlarge:10},Xu={small:12,medium:15,large:19,xlarge:21},Yl={small:11,medium:15,large:17,xlarge:19},vn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},hn=["●","◼","▲","▼","⬥","＋","✳","✕"],Gu=.8,Ho=.5,Ku={small:5,medium:8,large:12,xlarge:15},Ju=12,vt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function Uo(n){let e=Array(n);for(let t=0;t<n;t++)e[t]=t+1;return e}function Xo(n,e){return Array.isArray(n)&&n.length===e&&!n.some(t=>t===void 0)&&!n.some(t=>isNaN(t))}function Go(n,e){if(n!=null&&(Array.isArray(n)&&(n=Pe(n)),!(!Le(n)||n.length<1)))return n.apply(t=>Xl((t-e[1])*e[0]+e[2])).v}function tt(n,e){return Go(n,e.coords)}function mn(n,e){return Go(n,e.objects)}function Ko(n,e){if(n!=null&&(Array.isArray(n)&&(n=Pe(n)),!(!Le(n)||n.length<1)))return n.apply(t=>(t-e[2])/e[0]+e[1]).v}function Jo(n,e){return Ko(n,e.coords)}function Qo(n,e){return Ko(n,e.objects)}function Wl(n){return n===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${n.toString()}</tspan>`}function Rr(n){if(n===Math.round(n))return n;if(Math.abs(n)>10**6)return Math.round(n);if(Math.abs(n)<10**-6)return n;let e=n.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function Hl(n){if(n===void 0)return[0,void 0];if(n.length<1)return[0,void 0];if(n.length===1)return[0,[n[0].toString()]];let e=Rr(Math.abs(It(vo(n)))),t=0;if(e>=1)return e<100?[0,Array.from(n).map(o=>o.toFixed(0))]:(t=Math.ceil(Rr(Math.log10(e)))-2,[t,Array.from(n).map(o=>(o/Math.pow(10,t)).toFixed(0))]);let l=Math.ceil(-Rr(Math.log10(e)));return l<=2?[0,Array.from(n).map(s=>s.toFixed(l))]:(t=l-2,l=2,Rr(Math.abs(Dt(n)))<=10?[-t,Array.from(n).map(s=>(s*Math.pow(10,t)).toFixed(l))]:[-t,Array.from(n).map(s=>(s/Math.pow(10,t)).toString())])}function _t(n,e,t){return Array.isArray(n)&&(n=Pe(n)),Le(n)?n.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&n.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):n:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function Ul(n,e,t,l){if(!n||!e||n.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const s=t.coords,o=l.coords;let a="";for(let c=0;c<n.length;c++){const d=Xl((n.v[c]-s[1])*s[0]+s[2]),u=Xl((e.v[c]-o[1])*o[0]+o[2]);a+=d+","+u+" "}return a}function Zo(n,e){return n?Array.isArray(n)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==n.length?[null,"number of tick labels and values should be the same."]:[n.map(t=>gn(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function $o(n,e){if(Array.isArray(n)&&(n=Pe(n)),!Le(n))return[null,"tick values must be provided as an array or as a vector."];if(n.v.some(a=>isNaN(a)))return[null,"tick values must be numeric"];const t=new Set(n.v);if(n.length!==t.size)return[null,"ticks values must be unique."];const l=e[0]<e[1]?e[0]:e[1],s=e[0]<e[1]?e[1]:e[0],o=n.filter(a=>a>=l&a<=s);return o.length!==n.length?[null,"some of ticks values are outside axis limits."]:[o,""]}function ea(n,e,t,l,s,o){s==null&&(s=!1),o===void 0&&(o=1e-4);const a=e[0]<e[1]?e:[e[1],e[0]];if(n)return n;if(typeof a!="object"||a[0]===void 0||a[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const c=Math.abs(a[1]-a[0])*o,d=a[1]-a[0]-2*c,u=Math.floor(Math.log10(d)),f=1/Math.pow(10,u-1),v=Math.round(d*f)/f;let h=Qu(v/t);s&&(Math.abs(a[1]-a[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let m=Math.ceil((a[0]+c)/h)*h,b=Math.floor((a[1]-c)/h)*h;Math.abs(a[0]-m)<h/10&&(m=m+h),Math.abs(a[1]-b)<h/10&&(b=b-h),t=Math.ceil(Rr((b-m)/h))+1,n=Ee.zeros(t);for(let p=0;p<t;p++)n.v[p]=m+h*p;if(Math.abs(h)<1){const p=Math.pow(10,1+Math.round(-Math.log10(h)));n=n.apply(w=>Math.round((w+Number.EPSILON)*p)/p)}return n.filter(p=>p>=a[0]&p<=a[1])}function Qu(n,e){const t=Math.floor(Math.log10(n)),l=n/Math.pow(10,t);let s;return l<=1?s=1:l<=2?s=2:l<=5?s=5:s=10,s*Math.pow(10,t)}function Xl(n){return Math.round(n*10)/10}function Zu(n,e){return e<300.2||n<400.2?"small":e<400.2||n<700.2?"medium":e<650.2||n<850.2?"large":"xlarge"}function ta(n,e){return n<400.2?"small":n<700.2?"medium":n<900.2?"large":"xlarge"}function $u(){const n=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let l=0;l<8;l++)t=t&1?3988292384^t>>>1:t>>>1;n[e]=t}return n}function ed(n){let e=-1,t=$u();for(let l=0;l<n.length;l++)e=t[(e^n[l])&255]^e>>>8;return e^-1}function td(n,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const l=ed(t),s=new Uint8Array(4);s[0]=l>>>24,s[1]=l>>>16,s[2]=l>>>8,s[3]=l&255;const o=new Uint8Array(4);o[0]=0,o[1]=0,o[2]=0,o[3]=9;const a=new Uint8Array(54);return a.set(n,0),a.set(o,33),a.set(t,37),a.set(s,50),a}function rd(n,e){const t=n.split(","),l=t[0],s=t[1],o=33/3*4,a=s.substring(0,o),c=s.substring(o),d=atob(a),u=new Uint8Array(d.length);for(let h=0;h<u.length;h++)u[h]=d.charCodeAt(h);const f=td(u,e),v=btoa(String.fromCharCode(...f));return[l,",",v,c].join("")}function nd(n,e,t,l,s){if(t||(t=10),l||(l=10),s||(s=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(l<1||l>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(s<50||s>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!n||!(n instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const o=t/2.54*s,a=l/2.54*s;setTimeout(()=>{const c=n.clientHeight,d=n.clientWidth;let u=Math.max(o/d,a/c),f=1;u<1&&(f=u,u=1);const v=document.createElement("canvas"),h=v.getContext("2d");v.width=d*(f<1?f:u),v.height=c*(f<1?f:u),n.setAttribute("width",d*u),n.setAttribute("height",c*u),h.fillStyle="white",h.fillRect(0,0,v.width,v.height),h.scale(u,u);const m=new XMLSerializer().serializeToString(n),b=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),p=URL.createObjectURL(b),w=new Image;w.onload=function(){f<0&&(w.width=w.width*f,w.height=w.height*f),h.drawImage(w,0,0,v.width,v.height);const _=v.toDataURL("image/png"),A=rd(_,s),y=document.createElement("a");y.href=A,y.download=`${e}.png`,y.click()},w.src=p},20)}function ld(n,e){if(!n||!(n instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=n.clientHeight,l=n.clientWidth;n.setAttribute("width",l+"px"),n.setAttribute("height",t+"px"),n.setAttribute("viewBox",`0 0 ${l} ${t}`);const s=new Blob([n.outerHTML],{type:"image/svg+xml"}),o=window.URL.createObjectURL(s),a=document.createElement("a");a.setAttribute("href",o),a.setAttribute("download",`${e}.svg`),a.click()}function sd(n,e,t,l){const s=n.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":od(e,t,l)})]).then(()=>{n.classList.add("copied"),n.textContent="✓ done",setTimeout(()=>{n.classList.remove("copied"),n.textContent=s},500)},o=>{console.error(o),n.classList.add("error"),n.textContent="x copy",setTimeout(()=>{n.classList.remove("error"),n.textContent=s},500)}).catch(o=>console.error(o))}async function od(n,e,t){const l=n.clientHeight,s=n.clientWidth,o=Math.max(e/s,t/l),a=document.createElement("canvas"),c=a.getContext("2d");return a.width=s*o,a.height=l*o,c.scale(o,o),n.setAttribute("width",a.width),n.setAttribute("height",a.height),await new Promise((u,f)=>{const v=new XMLSerializer().serializeToString(n),h=new Blob([v],{type:"image/svg+xml;charset=utf-8"}),m=window.URL||window.webkitURL||window,b=m.createObjectURL(h),p=new Image;p.onload=function(){c.drawImage(p,0,0,a.width,a.height),m.revokeObjectURL(b),a.toBlob(function(w){w?u(w):f(new Error("Failed to create blob"))},"image/png")},p.onerror=function(w){f(w)},p.src=b})}function ad(n,e){n>16&&(n=16);const t=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?t[n-1].map(l=>l+e):t[n-1]}function id(n,e,t,l,s){let o=s.ticks,a=s.tickLabels,c=0;const d=ea(o,n,Hu[t.x],!0,s.whole),u=d.length,f=Qo([Dl[t.plot]],l)[0],v=Ee.fill(e[0],u),h=v.add(f),m=Ee.fill(e[1],u);if(a||(o?(c=0,a=o.v.map(z=>Rr(z).toString())):[c,a]=Hl(d.v)),!a||a.length!==d.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[d,v],[d,m]],p=[[Pe([n[0]]),Pe([e[0]])],[Pe([n[1]]),Pe([e[0]])]],w=[[d,h],[d,v]],_=(n[1]-n[0])*.01,A=[[null,null],[[n[1]-(c>9?1:0)*_],[v.v[u-1]]]],y=Wl(c),k=a.length,C=Math.abs(n[1]>n[0]?n[1]-d.v[k-1]:n[1]-d.v[0]),T=Math.abs(n[1]-n[0]),L=Math.abs(d.v[1]-d.v[0]);if(y.length>0&&C<T*.1&&C<L*.5){const z=n[1]>n[0]?k-1:0;a[z]=" "}return{grid:b,axisLine:p,tickCoords:w,tfCoords:A,ticks:o,tickLabels:a,tickFactor:c,tfLabel:y}}function cd(n,e,t,l,s){let o=s.ticks,a=s.tickLabels,c=0;const d=ea(s.ticks,e,Uu[t.y],!0,s.whole),u=d.length,f=Qo([Dl[t.plot]],l)[0],v=Ee.fill(n[0],u),h=v.add(f),m=Ee.fill(n[1],u);if(a||(o?(c=0,a=o.v.map(L=>Rr(L).toString())):[c,a]=Hl(d.v)),a.length!==d.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const b=[[v,d],[m,d]],p=[[Pe([n[0]]),Pe([e[0]])],[Pe([n[0]]),Pe([e[1]])]],w=[[v,d],[h,d]],_=[[[],[]],[[h.v[u-1]+(Math.abs(c)>9?3:2)*f],[e[1]]]],A=Wl(c),y=a.length,k=Math.abs(e[1]>e[0]?e[1]-d.v[y-1]:e[1]-d.v[0]),C=Math.abs(e[1]-e[0]),T=Math.abs(d.v[1]-d.v[0]);if(A.length>0&&k<C*.1&&k<T*.5){const L=e[1]>e[0]?y-1:0;a[L]=" "}return{grid:b,axisLine:p,tickCoords:w,tfCoords:_,ticks:o,tickLabels:a,tickFactor:c,tfLabel:A}}function ud(n){if(!n.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Le(n.breaks)?n.breaks.v:n.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!n.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(n.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(n.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=n.colmap;let l,s;if(n.labels?(l=n.labels,s=0):[s,l]=Hl(e),!(l.length===e.length-1||l.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const o=l.length===t.length;return{colmap:t,breaks:e,labels:l,isCentered:o,labelsFactor:s,fontSize:n.fontSize,labelColor:n.labelColor}}function dd(n,e,t,l){const s=n.colmap.length,o=e*Gu,a=o/s,c=t[1]+(e-o)*.5,d=Ku[l.y],u=t[2]+d*Ho,f=u+d*(1+Ho),v=n.isCentered?a/2:0;return{start:c,top:u,height:d,width:a,dxl:v,ltop:f}}function Mr(n,e,t){if(!n||!e||!t||typeof t!="function")return;const l=n.target;if(l.tagName===e){const s=Array.prototype.indexOf.call(l.parentNode.children,l);if(s<0)return;t(s),n.stopPropagation()}}function fd(n,e){const l=document.createElement("canvas").getContext("2d");return l.font=e,l.measureText(n.replace(/<(.|\n)*?>/g,"")).width}function vd(n,e){const t="Arial",l=e/8,s=e*1.5,o=Array(n.length),a=Array(n.length);let c=0,d=0,u=0;for(let v=0;v<n.length;v++){const h=fd("  "+n[v].label+"  ",e+"px "+t);u=h>u?h:u;const m=e*n[v].labelHeight+2*l;o[v]=m,a[v]=c,c=c+m,d=d+m}const f=s+2*l+u;return[a,o,s,l,d,f]}function hd(n,e,t,l,s){const[o,a,c,d,u,f]=vd(n.items,l*n.fontSize),v=n.position.includes("left")?e[0]+s:n.position.includes("right")?e[1]-f-s:(e[1]+e[0]-f)*.5,h=n.position.includes("top")?t[1]+s:n.position.includes("bottom")?t[0]-u-s:(t[1]+t[0]-u)*.5;return{lgl:v,lgt:h,lgw:f,lgh:u,ely:o,elh:a,elw:c,elp:d}}function gn(n){if(!n||n.length<1)return n;function e(o){return'<tspan font-size="0.75em" dy="-0.5em">'+o+'</tspan><tspan dy="0.4em"> </tspan>'}function t(o){return'<tspan font-size="0.75em" dy="0.5em">'+o+'</tspan><tspan dy="-0.4em"> </tspan>'}let l=0,s="";for(;l<n.length;){const o=n[l];if((o==="^"||o==="_")&&l<n.length-1){const a=o==="^";if(l++,n[l]==="("){let c=l+1;for(;c<n.length&&n[c]!==")";)c++;const d=n.slice(l+1,c);s+=a?e(d):t(d),l=c+1}else if(n[l]==="-"||n[l]==="–"){const c=n.slice(l,l+2);s+=a?e(c):t(c),l=l+2}else s+=a?e(n[l]):t(n[l]),l++}else s+=o,l++}return s}var md=se('<line vector-effect="non-scaling-stroke"></line>'),gd=se("<g></g>");function Gl(n,e){ie(e,!0);let t=H(e,"lineCoords",19,()=>[]),l=H(e,"lineColor",19,()=>vt.DARKGRAY),s=H(e,"lineType",3,1),o=H(e,"lineWidth",3,1),a=H(e,"className",3,"");const c=At("axes");let d=g(()=>tt(t()[0][0],c.tX())),u=g(()=>tt(t()[1][0],c.tX())),f=g(()=>tt(t()[0][1],c.tY())),v=g(()=>tt(t()[1][1],c.tY())),h=g(()=>`stroke:${l()};stroke-width: ${o()}px;stroke-dasharray:${vn[c.scales().plot][s()-1]}`);var m=oe(),b=J(m);{var p=w=>{var _=gd();ze(_,21,()=>r(d),Ne,(A,y,k)=>{var C=md();Z(()=>{q(C,"x1",r(d)[k]),q(C,"x2",r(u)[k]),q(C,"y1",r(f)[k]),q(C,"y2",r(v)[k]),nt(C,r(h))}),S(A,C)}),Z(()=>ut(_,0,Ui(a()))),S(w,_)};U(b,w=>{r(d)&&r(f)&&r(u)&&w(p)})}S(n,m),ce()}var bd=se('<text text-anchor="middle"><!></text>'),pd=se("<text><!></text>"),wd=se("<text><!></text>"),_d=se('<g class="tick-labels"><!></g>');function ra(n,e){ie(e,!0);let t=H(e,"pos",3,1),l=H(e,"las",3,1),s=g(()=>["middle","middle","start","middle","end"][t()]),o=g(()=>`fill:${e.textColor};`);const a=At("axes");let c=g(()=>tt(e.tickCoords[1][0],a.tX())),d=g(()=>tt(e.tickCoords[1][1],a.tY())),u=g(()=>Yl[a.scales().plot]),f=g(()=>[0,0,r(u),0,-r(u)][t()]),v=g(()=>[0,r(u),0,-r(u),0][t()]);var h=_d(),m=D(h);{var b=w=>{var _=oe(),A=J(_);ze(A,17,()=>r(c),Ne,(y,k,C)=>{var T=bd();q(T,"data-id",C),q(T,"dx",0);var L=D(T);Et(L,()=>e.tickLabels[C],!0),Z(()=>{q(T,"x",r(c)[C]),q(T,"y",r(d)[C]),q(T,"dy",r(f)*1.25),q(T,"transform",`rotate(-90, ${r(c)[C]}, ${r(d)[C]})`)}),S(y,T)}),S(w,_)},p=(w,_)=>{{var A=k=>{var C=oe(),T=J(C);ze(T,17,()=>r(c),Ne,(L,z,P)=>{var N=pd();q(N,"data-id",P),q(N,"dy",0),q(N,"text-anchor","end");var E=D(N);Et(E,()=>e.tickLabels[P],!0),Z(()=>{q(N,"x",r(c)[P]),q(N,"y",r(d)[P]),q(N,"dx",-r(v)/2),q(N,"transform",`rotate(-90, ${r(c)[P]}, ${r(d)[P]})`)}),S(L,N)}),S(k,C)},y=k=>{var C=oe(),T=J(C);ze(T,17,()=>r(c),Ne,(L,z,P)=>{var N=wd();q(N,"data-id",P);var E=D(N);Et(E,()=>e.tickLabels[P],!0),Z(()=>{q(N,"x",r(c)[P]),q(N,"y",r(d)[P]),q(N,"dx",r(f)),q(N,"dy",r(v)),q(N,"text-anchor",r(s))}),S(L,N)}),S(k,C)};U(w,k=>{l()===2&&t()===1?k(A):k(y,!1)},_)}};U(m,w=>{l()===2&&t()===4?w(b):w(p,!1)})}Z(()=>nt(h,r(o))),S(n,h),ce()}const yd=(n,e=gt,t=gt)=>{var l=Ld();const s=g(()=>e().colmap.length);var o=J(l);ze(o,17,()=>e().colmap,Ne,(f,v,h)=>{var m=Sd();const b=g(()=>t().start+h*t().width);var p=J(m),w=F(p);q(w,"dy",0);var _=D(w);Et(_,()=>e().labels[h],!0),Z(()=>{q(p,"x",r(b)),q(p,"y",t().top),q(p,"width",t().width),q(p,"height",t().height),q(p,"fill",r(v)),q(w,"x",r(b)),q(w,"y",t().ltop),q(w,"dx",t().dxl),q(w,"fill",e().labelColor),q(w,"font-size",e().fontSize+"em")}),S(f,m)});var a=F(o);{var c=f=>{var v=Cd();const h=g(()=>t().start+r(s)*t().width);q(v,"dx",0),q(v,"dy",0);var m=D(v);Et(m,()=>e().labels[r(s)],!0),Z(()=>{q(v,"x",r(h)),q(v,"y",t().ltop),q(v,"fill",e().labelColor),q(v,"font-size",`${e().fontSize??""}em`)}),S(f,v)};U(a,f=>{e().isCentered||f(c)})}var d=F(a);{var u=f=>{var v=Ad();const h=g(()=>t().start+r(s)*t().width);var m=D(v);Et(m,()=>Wl(e().labelsFactor),!0),Z(()=>{q(v,"x",r(h)),q(v,"y",t().ltop),q(v,"fill",e().labelColor),q(v,"font-size",`${e().fontSize??""}em`)}),S(f,v)};U(d,f=>{e().labelsFactor!==0&&f(u)})}S(n,l)};function na(n,e,t){n.preventDefault(),e(n,t())}function la(n,e,t){n.preventDefault(),e(n,t())}function sa(n,e,t){n.preventDefault(),e(n,t())}function jn(n,e,t){n.preventDefault(),e(n,t())}async function oa(n,e,t,l){sd(n.target,r(e),t(),l())}function aa(n,e,t){ld(r(e),t())}function ia(n,e,t,l,s,o){nd(r(e),t(),l(),s(),o())}var xd=se('<text fill="crimson" text-anchor="middle"> </text>'),kd=se('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),Ed=se("<!><!><!><!><!>",1),Sd=se('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Cd=se('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Ad=se('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Ld=se("<!><!><!>",1),Td=se("<line></line>"),zd=se('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Nd=se('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Pd=se('<svg><rect height="100%" width="100%"></rect><!></svg>'),Rd=se('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Md=se('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),qd=se('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),Id=se('<g class="plot-labels"><!><!><!></g>'),jd=se('<g class="axis x-axis"><!></g>'),Fd=se('<g class="axis y-axis"><!></g>'),Vd=se('<rect fill="transparent" id="axes-box"></rect>'),Od=se('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Bd=se('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Dd=se('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Yd=se('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Wd=G('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br/> Check that you defined axes limits and margins correctly.</p>'),Hd=G('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Ud=G(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function ca(n,e){ie(e,!0);const t=(xe,qe=gt,Re=gt)=>{var at=oe(),Ct=J(at);{var Zt=zt=>{var Ge=oe(),Fe=J(Ge);{var xt=it=>{var et=xd(),Wt=D(et);Z(()=>{q(et,"x",r(re)[0]-10),q(et,"y",r($)),q(et,"transform",`rotate(-90, ${r(re)[0]-10}, ${r($)})`),be(Wt,Re().error)}),S(it,et)},mt=it=>{var et=kd(),Wt=D(et);Z(()=>{q(et,"x",r(ee)),q(et,"y",r(de)[0]),be(Wt,Re().error)}),S(it,et)};U(Fe,it=>{Re().pos===4?it(xt):it(mt,!1)})}S(zt,Ge)},Pt=zt=>{var Ge=Ed(),Fe=J(Ge);{var xt=he=>{Gl(he,{get lineCoords(){return qe().grid},get lineColor(){return vt.MIDDLEGRAY},lineType:3})};U(Fe,he=>{Re().showGrid&&he(xt)})}var mt=F(Fe);Gl(mt,{get lineCoords(){return qe().axisLine},get lineColor(){return vt.DARKGRAY},lineType:1});var it=F(mt);Gl(it,{get lineCoords(){return qe().tickCoords},get lineColor(){return vt.DARKGRAY},lineType:1});var et=F(it);{var Wt=he=>{ra(he,{get las(){return Re().las},get pos(){return Re().pos},get tickCoords(){return qe().tickCoords},get tickLabels(){return qe().tickLabels},get tickColor(){return vt.DARKGRAY},get hideLast(){return Re().hideLast}})};U(et,he=>{qe().tickCoords.length===2&&qe().tickLabels.length===qe().tickCoords[1][0].length&&he(Wt)})}var Ir=F(et);{var Ye=he=>{const kt=g(()=>[qe().tfLabel]);ra(he,{get pos(){return Re().pos},get tickCoords(){return qe().tfCoords},get tickLabels(){return r(kt)},get textColor(){return vt.DARKGRAY}})};U(Ir,he=>{qe().tickFactor!==0&&he(Ye)})}S(zt,Ge)};U(Ct,zt=>{Re().error?zt(Zt):zt(Pt,!1)})}S(xe,at)},l=(xe,qe=gt,Re=gt)=>{var at=Pd();const Ct=g(()=>Re().elw+2*Re().elp),Zt=g(()=>Re().elp),Pt=g(()=>Re().elh),zt=g(()=>Re().ely);var Ge=D(at),Fe=F(Ge);ze(Fe,17,()=>qe().items,Ne,(xt,mt,it)=>{var et=Nd();q(et,"x",0);var Wt=D(et);{var Ir=dr=>{var Ve=Td();Z(()=>{q(Ve,"x1",r(Zt)),q(Ve,"x2",r(Ct)-r(Zt)),q(Ve,"y1",r(Pt)[it]/2),q(Ve,"y2",r(Pt)[it]/2),q(Ve,"stroke",r(mt).line.lineColor),q(Ve,"stroke-width",r(mt).line.lineWidth),q(Ve,"stroke-dasharray",r(E)[r(mt).line.lineType-1])}),S(dr,Ve)};U(Wt,dr=>{r(mt).line&&dr(Ir)})}var Ye=F(Wt);{var he=dr=>{var Ve=zd(),us=D(Ve);Z(()=>{q(Ve,"x",r(Ct)/2),q(Ve,"y",r(Pt)[it]/2),q(Ve,"fill",r(mt).point.faceColor),q(Ve,"stroke-width",r(mt).point.lineWidth),q(Ve,"stroke",r(mt).point.lineColor),q(Ve,"font-size",r(P)),be(us,hn[r(mt).point.marker-1])}),S(dr,Ve)};U(Ye,dr=>{r(mt).point&&dr(he)})}var kt=F(Ye),cs=D(kt);Et(cs,()=>r(mt).label,!0),Z(()=>{q(et,"y",r(zt)[it]),q(et,"width",Re().lgw),q(et,"height",r(Pt)[it]),q(kt,"x",r(Ct)+r(Zt)),q(kt,"y",r(Pt)[it]/2),q(kt,"fill",vt.LEGEND),q(kt,"font-size",`${qe().fontSize??""}em`)}),S(xt,et)}),Z(()=>{q(at,"x",Re().lgl),q(at,"y",Re().lgt),q(at,"height",Re().lgh),q(at,"width",Re().lgw),q(Ge,"fill",qe().faceColor),q(Ge,"stroke",qe().lineColor),q(Ge,"stroke-width",qe().lineWidth)}),S(xe,at)};let s=H(e,"limX",19,()=>[0,1]),o=H(e,"limY",19,()=>[0,1]),a=H(e,"margins",19,()=>[1,1.1,.55,.6]),c=H(e,"downloadLinks",3,"none"),d=H(e,"fileName",3,"plot"),u=H(e,"pngWidth",3,8),f=H(e,"pngHeight",3,8),v=H(e,"pngRes",3,300),h=H(e,"clipboardWidth",3,1200),m=H(e,"clipboardHeight",3,800),b=H(e,"onclick",3,null),p=H(e,"onmousemove",3,null),w=H(e,"onmousedown",3,null),_=H(e,"onmouseup",3,null);function A(xe,qe){if(qe&&xe.target.id=="axes-box"){const Re=Jo([xe.offsetX-r(W)],r(K))[0],at=Jo([xe.offsetY-r(j)],r(te))[0];qe(Re,at)}}const y="plottingArea"+Math.round(Math.random()*1e4);let k=ne(0),C=ne(0),T=ne(0);const L=g(()=>({plot:Zu(r(C),r(T)),x:ta(r(C)),y:ta(r(T))})),z=g(()=>a().map(xe=>xe*Wu[r(L).plot])),P=g(()=>Xu[r(L).plot]),N=g(()=>Dl[r(L).plot]),E=g(()=>vn[r(L).plot]),I=g(()=>r(me).show&&r(me).label!==""?r(P)*1.5:0),W=g(()=>r(ge).show&&r(ge).label!==""?r(P)*1.5:0),j=g(()=>e.title&&e.title!==""?r(P)*1.5:0),R=g(()=>r(C)>r(W)?r(C)-r(W):0),M=g(()=>r(T)>r(I)+r(j)?r(T)-r(I)-r(j):0),Y=g(()=>r(M)-r(z)[0]-r(z)[2]),V=g(()=>r(R)-r(z)[1]-r(z)[3]),O=g(()=>Xo(s(),2)&&Xo(o(),2)&&r(R)>r(z)[1]+r(z)[3]&&r(M)>r(z)[0]+r(z)[2]),K=g(()=>r(O)?{coords:[r(V)/(s()[1]-s()[0]),s()[0],r(z)[1]],objects:[r(V)/(s()[1]-s()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),te=g(()=>r(O)?{coords:[-r(Y)/(o()[1]-o()[0]),o()[1],r(z)[2]],objects:[r(Y)/(o()[1]-o()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),$=g(()=>r(Y)*.5+r(j)+r(z)[2]),ee=g(()=>r(V)*.5+r(W)+r(z)[1]),re=g(()=>r(O)?tt(s(),r(K)):[0,1]),de=g(()=>r(O)?tt(o(),r(te)):[1,0]),pe=g(()=>gn(e.title)),fe=g(()=>r(pe)?r(pe).length===e.title.left?1:1.4:0);let ke=ne(Je({show:!1})),me=ne(Je({show:!1,error:""})),ge=ne(Je({show:!1,error:""})),ye=ne(Je({show:!1,colmap:null,breaks:null})),ue=ne(Je({show:!1,items:null,position:null}));const ve=g(()=>r(O)&&r(ye)&&r(ye).show?ud(r(ye)):null),ae=g(()=>r(O)&&r(me).show?id(s(),o(),r(L),r(te),r(me)):null),Ae=g(()=>r(O)&&r(ge).show?cd(s(),o(),r(L),r(K),r(ge)):null),_e=g(()=>r(O)&&r(ve)?dd(r(ve),r(V),r(z),r(L)):null),Se=g(()=>r(O)&&r(ue)&&r(ue).show&&r(re)?hd(r(ue),r(re),r(de),r(P),r(N)):null);di("axes",{setBox:xe=>B(ke,xe,!0),setXAxis:xe=>B(me,xe,!0),setYAxis:xe=>B(ge,xe,!0),setColmapLegend:xe=>B(ye,xe,!0),setGroupLegend:xe=>B(ue,xe,!0),scales:()=>r(L),tX:()=>r(K),tY:()=>r(te),limX:()=>s(),limY:()=>o()});var Be=Ud();let yt;var Xe=D(Be),st=F(D(Xe));{var Ze=xe=>{var qe=Id(),Re=D(qe);{var at=Ge=>{var Fe=Rd();q(Fe,"dx",0),q(Fe,"dy",0);var xt=D(Fe);Et(xt,()=>r(me).label,!0),Z(()=>{q(Fe,"x",r(ee)),q(Fe,"y",r(M)+r(j))}),S(Ge,Fe)};U(Re,Ge=>{r(me).show&&r(me).label&&r(me).label!==""&&Ge(at)})}var Ct=F(Re);{var Zt=Ge=>{var Fe=Md();q(Fe,"dx",0),q(Fe,"dy",0);var xt=D(Fe);Et(xt,()=>r(ge).label,!0),Z(()=>{q(Fe,"x",r(P)/1.1*r(ge).labelHeight),q(Fe,"y",r($)),q(Fe,"transform",`rotate(-90, ${r(P)*r(ge).labelHeight/1.1}, ${r($)})`)}),S(Ge,Fe)};U(Ct,Ge=>{r(ge).show&&r(ge).label&&r(ge).label!==""&&Ge(Zt)})}var Pt=F(Ct);{var zt=Ge=>{var Fe=qd();q(Fe,"dx",0),q(Fe,"dy",0);var xt=D(Fe);Et(xt,()=>r(pe),!0),Z(()=>{q(Fe,"x",r(ee)),q(Fe,"y",r(P)*r(fe))}),S(Ge,Fe)};U(Pt,Ge=>{r(pe)&&r(pe)!==""&&Ge(zt)})}S(xe,qe)};U(st,xe=>{r(O)&&xe(Ze)})}var Yt=F(st),wn=D(Yt),Hn=D(wn),$r=D(Hn),ls=F(wn);{var ss=xe=>{var qe=Yd(),Re=J(qe);{var at=Ye=>{var he=jd(),kt=D(he);t(kt,()=>r(ae),()=>r(me)),S(Ye,he)};U(Re,Ye=>{r(me).show&&r(ae)&&Ye(at)})}var Ct=F(Re);{var Zt=Ye=>{var he=Fd(),kt=D(he);t(kt,()=>r(Ae),()=>r(ge)),S(Ye,he)};U(Ct,Ye=>{r(ge).show&&r(Ae)&&Ye(Zt)})}var Pt=F(Ct),zt=D(Pt);{var Ge=Ye=>{var he=Vd();he.__keydown=[jn,A,b],he.__click=[jn,A,b],he.__mousemove=[sa,A,p],he.__mousedown=[na,A,w],he.__mouseup=[la,A,_],Z(()=>{q(he,"stroke",r(ke).lineColor),q(he,"stroke-width",`${r(ke).lineWidth??""}px`),q(he,"x",r(re)[0]),q(he,"y",r(de)[1]),q(he,"width",r(re)[1]-r(re)[0]),q(he,"height",r(de)[0]-r(de)[1])}),S(Ye,he)},Fe=Ye=>{var he=Od();he.__keydown=[jn,A,b],he.__click=[jn,A,b],he.__mousemove=[sa,A,p],he.__mousedown=[na,A,w],he.__mouseup=[la,A,_],Z(()=>{q(he,"x",r(re)[0]),q(he,"y",r(de)[1]),q(he,"width",r(re)[1]-r(re)[0]),q(he,"height",r(de)[0]-r(de)[1])}),S(Ye,he)};U(zt,Ye=>{r(ke).show?Ye(Ge):Ye(Fe,!1)})}var xt=F(Pt),mt=D(xt);br(mt,()=>e.children??gt);var it=F(xt);{var et=Ye=>{var he=Bd(),kt=D(he);yd(kt,()=>r(ve),()=>r(_e)),S(Ye,he)};U(it,Ye=>{r(_e)&&Ye(et)})}var Wt=F(it);{var Ir=Ye=>{var he=Dd(),kt=D(he);l(kt,()=>r(ue),()=>r(Se)),S(Ye,he)};U(Wt,Ye=>{r(Se)&&Ye(Ir)})}Z(()=>q(xt,"clip-path",`url(#${y})`)),S(xe,qe)};U(ls,xe=>{r(O)&&xe(ss)})}Lr(Xe,xe=>B(k,xe),()=>r(k));var os=F(Xe,2);{var as=xe=>{var qe=Wd();S(xe,qe)},is=xe=>{var qe=Hd(),Re=D(qe);Re.__click=[aa,k,d],Re.__keydown=[aa,k,d];var at=F(Re,2);at.__click=[ia,k,d,u,f,v],at.__keydown=[ia,k,d,u,f,v];var Ct=F(at,2);Ct.__click=[oa,k,h,m],Ct.__keydown=[oa,k,h,m],S(xe,qe)};U(os,xe=>{r(O)?xe(is,!1):xe(as)})}Z(xe=>{yt=ut(Be,1,`plot-container show-download-links-${c()??""}`,"svelte-1jtdxd0",yt,xe),nt(Xe,`font-size:${r(P)??""}px`),q(Yt,"x",r(W)),q(Yt,"y",r(j)),q(Yt,"width",r(R)),q(Yt,"height",r(M)),q(Hn,"id",y),q($r,"x",r(re)[0]),q($r,"y",r(de)[1]),q($r,"width",r(re)[1]-r(re)[0]),q($r,"height",r(de)[0]-r(de)[1])},[()=>({"plot-error":!r(O)})]),so(Xe,"clientWidth",xe=>B(C,xe)),so(Xe,"clientHeight",xe=>B(T,xe)),S(n,Be),ce()}rt(["keydown","click","mousemove","mousedown","mouseup"]);function ua(n,e){ie(e,!0);let t=H(e,"tickLabels",7),l=H(e,"las",3,1),s=H(e,"whole",3,!1),o=H(e,"show",3,!0),a=H(e,"showGrid",3,!1);const c=At("axes");Te(()=>{const d=gn(e.label),u=d?d.length===e.label.length?1:1.4:0;let f,v="";e.ticks&&([f,v]=$o(e.ticks,c.limX())),!v&&t()&&(h=>{var m=Gn(h,2);t(m[0]),v=m[1]})(Zo(t(),f)),c.setXAxis({show:o(),error:v,label:d,ticks:f,labelHeight:u,showGrid:a(),las:l(),whole:s(),tickLabels:t()})}),ce()}function da(n,e){ie(e,!0);let t=H(e,"tickLabels",7),l=H(e,"las",3,1),s=H(e,"whole",3,!1),o=H(e,"show",3,!0),a=H(e,"showGrid",3,!1);const c=At("axes");Te(()=>{const d=gn(e.label),u=d?d.length===e.label.length?1:1.4:0;let f,v="";e.ticks&&([f,v]=$o(e.ticks,c.limY())),!v&&t()&&(h=>{var m=Gn(h,2);t(m[0]),v=m[1]})(Zo(t(),f)),c.setYAxis({show:o(),error:v,label:d,ticks:f,labelHeight:u,showGrid:a(),las:l(),whole:s(),tickLabels:t(),pos:4})}),ce()}function fa(n,e){ie(e,!0);let t=H(e,"lineWidth",3,1),l=H(e,"lineColor",3,"#606060");const s=At("axes");Te(()=>{s.setBox({show:!0,lineWidth:t(),lineColor:l()})}),ce()}var Xd=(n,e)=>Mr(n,"rect",e.onclick),Gd=se("<rect></rect>"),Kd=se("<g></g>");function Fn(n,e){ie(e,!0);let t=H(e,"faceColor",19,()=>vt.PRIMARY),l=H(e,"lineColor",19,t),s=H(e,"lineWidth",3,1),o=H(e,"className",3,"series-rect");const a=g(()=>_t(e.left,"Rectangles (left)")),c=g(()=>r(a)?_t(e.top,"Rectangles (top)",r(a).length):null),d=g(()=>r(c)?typeof e.width!="object"?Ee.fill(e.width,r(a).length):e.width:null),u=g(()=>r(c)?typeof e.height!="object"?Ee.fill(e.height,r(a).length):e.height:null),f=At("axes"),v=g(()=>r(a)?tt(r(a),f.tX()):null),h=g(()=>r(c)?tt(r(c),f.tY()):null),m=g(()=>r(d)?mn(r(d),f.tX()):null),b=g(()=>r(u)?mn(r(u),f.tY()):null),p=g(()=>`fill:${t()};stroke:${l()};stroke-width:${s()}px;`),w=g(()=>r(v)&&r(h)&&r(m)&&r(b)&&r(m).length===r(v).length&&r(b).length===r(v).length);var _=oe(),A=J(_);{var y=k=>{var C=Kd();C.__click=[Xd,e],ze(C,21,()=>e.left,Ne,(T,L,z)=>{var P=Gd();Z(()=>{q(P,"x",r(v)[z]),q(P,"y",r(h)[z]),q(P,"width",r(m)[z]),q(P,"height",r(b)[z])}),S(T,P)}),Z(()=>{ut(C,0,`series ${o()??""}`),nt(C,r(p))}),S(k,C)};U(A,k=>{r(w)&&k(y)})}S(n,_),ce()}rt(["click"]);var Jd=(n,e)=>Mr(n,"line",e.onclick),Qd=se("<line></line>"),Zd=se('<g class="series series-segment"></g>');function qr(n,e){ie(e,!0);let t=H(e,"lineColor",19,()=>vt.PRIMARY),l=H(e,"lineType",3,1),s=H(e,"lineWidth",3,1);const o=g(()=>_t(e.xStart,"Segments")),a=g(()=>r(o)?_t(e.yStart,"Segments",r(o).length):null),c=g(()=>r(a)?_t(e.xEnd,"Segments",r(o).length):null),d=g(()=>r(c)?_t(e.yEnd,"Segments",r(o).length):null),u=At("axes"),f=g(()=>r(o)?tt(r(o),u.tX()):null),v=g(()=>r(c)?tt(r(c),u.tX()):null),h=g(()=>r(a)?tt(r(a),u.tY()):null),m=g(()=>r(d)?tt(r(d),u.tY()):null),b=g(()=>`stroke:${t()};stroke-width: ${s()}px;stroke-dasharray:${vn[u.scales().plot][l()-1]}`),p=g(()=>r(f)&&r(v)&&r(h)&&r(m));var w=oe(),_=J(w);{var A=y=>{var k=Zd();k.__click=[Jd,e],ze(k,21,()=>r(f),Ne,(C,T,L)=>{var z=Qd();Z(()=>{q(z,"x1",r(f)[L]),q(z,"x2",r(v)[L]),q(z,"y1",r(h)[L]),q(z,"y2",r(m)[L])}),S(C,z)}),Z(()=>nt(k,r(b))),S(y,k)};U(_,y=>{r(p)&&y(A)})}S(n,w),ce()}rt(["click"]);var $d=(n,e)=>Mr(n,"text",e.onclick),ef=se("<text><!></text>"),tf=se("<text><!></text>"),rf=se("<text><!></text>"),nf=se('<g class="series series-textlabels"><!></g>');function Vn(n,e){ie(e,!0);let t=H(e,"pos",3,0),l=H(e,"faceColor",19,()=>vt.PRIMARY_TEXT),s=H(e,"lineColor",3,"transparent"),o=H(e,"lineWidth",3,0),a=H(e,"textSize",3,1),c=H(e,"rotateAngle",3,0);const d=["middle","middle","start","middle","end"],u=g(()=>_t(e.xValues,"TextLabels")),f=g(()=>r(u)?_t(e.yValues,"TextLabels",r(u).length):null),v=g(()=>r(f)?Array.isArray(e.labels)&&e.labels.length!==r(f).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=g(()=>r(v)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),m=At("axes"),b=g(()=>r(u)&&r(h)!==null?tt(r(u),m.tX()):null),p=g(()=>r(f)&&r(b)?tt(r(f),m.tY()):null),w=g(()=>Yl[m.scales().plot]),_=g(()=>[0,0,-r(w),0,r(w),r(w)]),A=g(()=>[0,r(w),0,-r(w),0,r(w)]),y=g(()=>`fill:${l()};stroke-width:${o()}px;stroke:${s()};font-size:${a()}em;`),k=g(()=>r(b)&&r(p)&&r(h)!==null&&r(v)&&r(b).length===r(p).length);var C=oe(),T=J(C);{var L=z=>{var P=nf();P.__click=[$d,e];var N=D(P);{var E=W=>{var j=oe(),R=J(j);ze(R,17,()=>r(b),Ne,(M,Y,V)=>{var O=ef();q(O,"data-id",V);var K=D(O);Et(K,()=>e.labels,!0),Z(()=>{q(O,"x",r(b)[V]),q(O,"y",r(p)[V]),q(O,"dx",r(_)[t()]),q(O,"dy",r(A)[t()]),q(O,"transform",c()!==void 0?`rotate(${c()}, ${r(b)[V]+r(_)[t()]}, ${r(p)[V]+r(A)[t()]})`:""),q(O,"text-anchor",d[t()[V]])}),S(M,O)}),S(W,j)},I=(W,j)=>{{var R=Y=>{var V=oe(),O=J(V);ze(O,17,()=>r(b),Ne,(K,te,$)=>{var ee=tf();q(ee,"data-id",$);var re=D(ee);Et(re,()=>e.labels[$],!0),Z(()=>{q(ee,"x",r(b)[$]),q(ee,"y",r(p)[$]),q(ee,"dx",r(_)[t()[$]]),q(ee,"dy",r(A)[t()[$]]),q(ee,"transform",c()!==void 0?`rotate(${c()}, ${r(b)[$]+r(_)[t()]}, ${r(p)[$]+r(A)[t()]})`:""),q(ee,"text-anchor",d[t()[$]])}),S(K,ee)}),S(Y,V)},M=Y=>{var V=oe(),O=J(V);ze(O,17,()=>r(b),Ne,(K,te,$)=>{var ee=rf();q(ee,"data-id",$);var re=D(ee);Et(re,()=>e.labels[$],!0),Z(()=>{q(ee,"x",r(b)[$]),q(ee,"y",r(p)[$]),q(ee,"dx",r(_)[t()]),q(ee,"dy",r(A)[t()]),q(ee,"transform",c()!==void 0?`rotate(${c()}, ${r(b)[$]+r(_)[t()]}, ${r(p)[$]+r(A)[t()]})`:""),q(ee,"text-anchor",d[t()])}),S(K,ee)}),S(Y,V)};U(W,Y=>{Array.isArray(t())||ArrayBuffer.isView(t())?Y(R):Y(M,!1)},j)}};U(N,W=>{typeof e.labels=="string"?W(E):W(I,!1)})}Z(()=>nt(P,r(y))),S(z,P)};U(T,z=>{r(k)&&z(L)})}S(n,C),ce()}rt(["click"]),rt(["click"]);function lf(n,e){ie(e,!0);let t=H(e,"barWidth",3,.8),l=H(e,"faceColor",19,()=>vt.PRIMARY),s=H(e,"lineColor",19,()=>vt.PRIMARY),o=H(e,"lineWidth",3,1);const a=g(()=>t()<=0||t()>1?(console.error('Bars: parameter "barWidth" should be between 0 and 1.'),null):t()),c=g(()=>{if(!r(a))return null;const m=_t(e.xValues,"BarSeries");if(!m)return null;const b=m.length;if(b<1)return null;let p;if(e.barWidthExact)p=e.barWidthExact;else{if(b==1)return console.error('Bars: if only one bar must be shown, value for property "barWidthExact" should be provided.'),null;{p=0;let y=0;for(let k=1;k<b;k++)y=Math.abs(m.v[k-1]-m.v[k]),y>p&&(p=y)}}p=p*t();const w=p/2,_=Ee.zeros(b),A=Ee.zeros(b);for(let y=0;y<b;y++)_.v[y]=m.v[y]-w,A.v[y]=p;return{left:_,width:A}}),d=g(()=>{if(!r(c))return null;const m=_t(e.yValues,"BarSeries");if(!m)return null;const b=m.length;if(b!==r(c).left.length)return console.error('BarSeries: parameters "yValues" must be vector of the same length as "xValues".'),null;const p=Ee.zeros(b),w=Ee.zeros(b);for(let _=0;_<b;_++){const A=m.v[_];p.v[_]=A>0?A:0,w.v[_]=Math.abs(A)}return{top:p,height:w}}),u=g(()=>r(c)&&r(d));var f=oe(),v=J(f);{var h=m=>{Fn(m,{className:"series series-bar",get left(){return r(c).left},get width(){return r(c).width},get top(){return r(d).top},get height(){return r(d).height},get lineWidth(){return o()},get lineColor(){return s()},get faceColor(){return l()},get onclick(){return e.onclick}})};U(v,m=>{r(u)&&m(h)})}S(n,f),ce()}var sf=(n,e)=>Mr(n,"text",e.onclick),of=se("<text> </text>"),af=se('<g text-anchor="middle"></g>');function Kl(n,e){ie(e,!0);let t=H(e,"marker",3,1),l=H(e,"faceColor",3,"transparent"),s=H(e,"lineColor",19,()=>vt.PRIMARY),o=H(e,"lineWidth",3,1),a=H(e,"markerSize",3,1);const c=g(()=>typeof t()!="number"||t()<1||t()>hn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+hn.length+"."),null):hn[t()-1]),d=g(()=>_t(e.xValues,"Points")),u=g(()=>r(d)?_t(e.yValues,"Points",r(d).length):null),f=At("axes"),v=g(()=>r(d)?tt(r(d),f.tX()):null),h=g(()=>r(v)&&r(u)?tt(r(u),f.tY()):null),m=g(()=>["＋","✳","✕"].includes(r(c))?`fill:${s()&&s()!=="transparent"?s():l()};stroke-width:0px;font-size:${a()}em;`:`fill:${l()};stroke-width:${o()}px;stroke:${s()}; font-size:${a()}em;`),b=g(()=>["◼","⬥","＋","✳","✕"].includes(r(c))?"series-points2":"series-points1"),p=g(()=>r(v)&&r(h)&&r(v).length===r(h).length);var w=oe(),_=J(w);{var A=y=>{var k=af();k.__click=[sf,e],ze(k,21,()=>r(v),Ne,(C,T,L)=>{var z=of(),P=D(z);Z(()=>{q(z,"x",r(v)[L]),q(z,"y",r(h)[L]),be(P,r(c))}),S(C,z)}),Z(()=>{ut(k,0,`series series-points ${r(b)??""}`),nt(k,r(m))}),S(y,k)};U(_,y=>{r(p)&&y(A)})}S(n,w),ce()}rt(["click"]);var cf=(n,e)=>Mr(n,"polyline",e.onclick),uf=se('<g class="series series-line"><polyline class="line"></polyline></g>');function wr(n,e){ie(e,!0);let t=H(e,"lineColor",19,()=>vt.PRIMARY),l=H(e,"lineType",3,1),s=H(e,"lineWidth",3,1);const o=g(()=>_t(e.xValues,"Lines")),a=g(()=>r(o)?_t(e.yValues,"Lines",r(o).length):null),c=At("axes"),d=g(()=>r(o)&&r(a)?Ul(r(o),r(a),c.tX(),c.tY()):null),u=g(()=>`fill:transparent;stroke:${t()};stroke-width: ${s()}px; stroke-dasharray:${vn[c.scales().plot][l()-1]}`);var f=oe(),v=J(f);{var h=m=>{var b=uf();b.__click=[cf,e];var p=D(b);Z(()=>{nt(b,r(u)),q(p,"points",r(d))}),S(m,b)};U(v,m=>{r(d)&&m(h)})}S(n,f),ce()}rt(["click"]);var df=(n,e)=>Mr(n,"polyline",e.onclick),ff=se('<polyline class="line"></polyline>'),vf=se('<g class="series series-multiline"></g>');function hf(n,e){ie(e,!0);let t=H(e,"lineColor",19,()=>vt.PRIMARY),l=H(e,"lineType",3,1),s=H(e,"lineWidth",3,1);const o=g(()=>_t(e.xValues,"Multilines")),a=g(()=>r(o)?rr(e.yValues)?(r(o).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),c=At("axes"),d=g(()=>{if(!r(o)||!r(a))return null;const m=new Array(r(a).ncols);for(let b=0;b<m.length;b++)m[b]=Ul(r(o),r(a).getcolumn(b+1),c.tX(),c.tY());return m}),u=g(()=>`fill:transparent;stroke:${t()};stroke-width: ${s()}px; stroke-dasharray:${vn[c.scales().plot][l()-1]}`);var f=oe(),v=J(f);{var h=m=>{var b=vf();b.__click=[df,e],ze(b,21,()=>r(d),Ne,(p,w)=>{var _=ff();Z(()=>q(_,"points",r(w))),S(p,_)}),Z(()=>nt(b,r(u))),S(m,b)};U(v,m=>{r(d)&&r(d).length>0&&m(h)})}S(n,f),ce()}rt(["click"]);function mf(...n){const e=n.length,t=n.map(a=>a.length);let l=Al(t),s=Array(e),o=1;for(let a=0;a<e;a++){const c=Le(n[a])?n[a]:Pe(n[a]),d=c.length;l=l/d,s[a]=c.subset(wt.seq(1,d).repeach(o).rep(l)),o=o*d}return s}var gf=se("<rect></rect>"),bf=se('<g title="heatmap-group"><!></g>'),pf=se('<g class="heatmap" style="stroke:0;stroke-width:0px;"></g>');function wf(n,e){ie(e,!0);let t=H(e,"colmap",3,null),l=g(()=>rr(e.values)&&e.values.nrows>0&&e.values.ncols>0?e.values:null),s=g(()=>r(l)?e.breaks&&Array.isArray(e.breaks)?e.breaks:e.breaks&&Le(e.breaks)?e.breaks.v:El(r(l).v,Ju).v:null),o=g(()=>t()?Array.isArray(t())?t().length!==e.breaks.length-1?(console.error("Heatmap: number of color values in colormap does not match number of intervals defined by breaks."),null):t():(console.error('Heatmap: parameter "colmap" must be array with colors.'),null):ad(r(s).length-1)),a=g(()=>r(l)?Uo(r(l).ncols):null),c=g(()=>r(l)?Uo(r(l).nrows):null),d=g(()=>r(a)&&r(c)?mf(r(c),r(a)):null),u=g(()=>{if(!r(d)||!r(s)||!r(o))return null;const[y,k]=r(d),C=k.length,T=r(s).length,L=Array(T).fill().map(()=>[]),z=Array(T).fill().map(()=>[]),P=r(s).slice(),N=P[1]-P[0];P[0]=P[0]-.1*N,P[T-1]=P[T-1]+.1*N;for(let E=0;E<C;E++){const I=r(l).v[E];for(let W=0;W<T-1;W++)if(I>P[W]&&I<=P[W+1]){L[W].push(k.v[E]-.5),z[W].push(r(l).nrows-y.v[E]+1.5);break}}return{rl:L,rt:z}});const f=At("axes");let v=g(()=>r(u)?r(u).rl.map(y=>y.length>0?tt(y,f.tX()):[]):null),h=g(()=>r(u)?r(u).rt.map(y=>y.length>0?tt(y,f.tY()):[]):null),m=g(()=>mn([1],f.tX())),b=g(()=>mn([1],f.tY())),p=g(()=>r(v)&&r(h)&&r(v).length===r(h).length);var w=oe(),_=J(w);{var A=y=>{var k=pf();ze(k,21,()=>r(o),Ne,(C,T,L)=>{var z=bf(),P=D(z);{var N=E=>{var I=oe(),W=J(I);ze(W,17,()=>r(v)[L],Ne,(j,R,M,Y)=>{var V=gf();Z(()=>{q(V,"x",r(v)[L][M]),q(V,"y",r(h)[L][M]),q(V,"width",r(m)),q(V,"height",r(b))}),S(j,V)}),S(E,I)};U(P,E=>{r(v)[L].length>0&&E(N)})}Z(()=>nt(z,`fill:${r(T)??""};`)),S(C,z)}),S(y,k)};U(_,y=>{r(p)&&y(A)})}S(n,w),ce()}function On(n,e){ie(e,!0);let t=H(e,"show",3,!0),l=H(e,"position",3,"topleft"),s=H(e,"lineColor",19,()=>vt.LEGEND),o=H(e,"lineWidth",3,1),a=H(e,"faceColor",3,"#fff"),c=H(e,"fontSize",3,.85);function d(v){return typeof v!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(v)?v:(console.error('Legend: wrong value of "position" property'),null)}function u(v){if(!v||!Array.isArray(v)||v.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let h=0;h<v.length;h++){const m=v[h];if(!m.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const b=gn(m.label),p=b.length===m.label?1:1.4;m.label=b,m.labelHeight=p,m.line&&(m.line.lineType||(m.line.lineType=1),m.line.lineType>0&&m.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(h+1)+" is incorrect."),m.line.lineColor=m.line.lineColor?m.line.lineColor:vt.PRIMARY,m.line.lineWidth=m.line.lineWidth?m.line.lineWidth:1),m.point&&(m.point.marker||(m.point.marker=1),m.point.marker>0&&m.point.marker<=hn.length||console.error('Legend: parameter "marker" for legend item '+(h+1)+" is incorrect."),m.point.faceColor=m.point.faceColor?m.point.faceColor:"transparent",m.point.lineWidth=m.point.lineWidth?m.point.lineWidth:1,m.point.lineColor=m.point.lineColor?m.point.lineColor:vt.PRIMARY)}return v}const f=At("axes");Te(()=>{const v=u(e.items),h=d(l());f.setGroupLegend(v&&h?{show:t(),position:l(),items:e.items,lineColor:s(),faceColor:a(),lineWidth:o(),fontSize:c()}:{show:!1,position:null,items:null})}),ce()}function _f(n,e){ie(e,!0);let t=H(e,"show",3,!0),l=H(e,"labels",3,null),s=H(e,"labelColor",19,()=>vt.CLEGEND_LABELS),o=H(e,"fontSize",3,.85);const a=At("axes");Te(()=>{a.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:l(),labelColor:s(),fontSize:o()})}),ce()}function yf(n,e,t,l){e===void 0&&(e=!0),t===void 0&&(t=!1),l===void 0&&(l=!1);function s(d,u,f,v){if(typeof u=="boolean")return u?d.apply(f,2):Pe([v]).rep(d.ncols);if(!Le(u))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(u.length!==d.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return u}const o=s(n,e,pr,0),a=s(n,t,Sl,1),c=ot.zeros(n.nrows,n.ncols);for(let d=1;d<=n.ncols;d++){const u=n.getcolref(d),f=c.getcolref(d),v=o.v[d-1],h=1/a.v[d-1];for(let m=0;m<n.nrows;m++)f[m]=(u[m]-v)*h}return l?[c,o,a]:c}const xf=n=>n;function kf(n,{delay:e=0,duration:t=400,easing:l=xf}={}){const s=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:l,css:o=>`opacity: ${o*s}`}}var Ef=G('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function va(n,e){ie(e,!0);function t(u){u.key==="Escape"&&e.closeModal()}var l=Ef();Ar("keydown",nl,t);var s=D(l),o=D(s),a=D(o);a.__click=function(...u){var f;(f=e.closeModal)==null||f.apply(this,u)};var c=F(o,2),d=D(c);br(d,()=>e.children),nc(7,l,()=>kf),S(n,l),ce()}rt(["click"]);const Sf=[1,1.1,.45,.4],Jt={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",test:"#2679B2",alt:"#2679B2",new:"#2679B2"},_r={cal:"#f0f8ff",pv:"#fff8f0",target:"#f0f8ff",test:"#f0f8ff",alt:"#f0f8ff",new:"#f0f8ff"},Bn="#a0a0a0",ha="#909090",bn="#909090",ma=8,Cf=8,Af=8,Lf=600;function ga(n,e,t,l){if(!n||!e)return null;const s=n.length;let o=Ee.zeros(s),a=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;if(l==="log")for(let d=0;d<s;d++){const u=Math.log(1+n[d]/t);o.v[d]=u,a=Math.max(a,u),c=Math.min(c,u)}else for(let d=0;d<s;d++){const u=n[d]/t;o.v[d]=u,a=Math.max(a,u),c=Math.min(c,u)}return{values:o,min:c,max:a}}function ba(n,e){return{z:"Full y-distance",f:"Full x-distance",q:"Orthogonal distance",h:"Score distance"}[n]+", "+(e==="log"?"log(1 + "+n+"/"+n+"0)":n+"/"+n+"0")}function pa(n,e,t,l){const o=e+t,c=_o(n,o)/t,d=-e/t,u=-c/d,f=Ee.seq(0,u*1,u/100),v=f.apply(h=>h*d+c);return{x:l==="log"?f.apply(h=>Math.log(1+h)):f,y:l==="log"?v.apply(h=>Math.log(1+h)):v}}function Tf(n,e,t,l=4){const s=Math.abs(t-e);let o;return s<1?o=Math.min(Math.round(Math.abs(Math.log10(s))+1),l):s<10?o=2:s<100?o=1:o=0,Array.from(n).map(a=>a.toFixed(o).toString())}var zf=G("<!> <!> <!> <!>",1);function nr(n,e){let t=H(e,"whole",3,!1),l=ic(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);ca(n,io({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",get margins(){return Sf},get pngWidth(){return Cf},get pngHeight(){return Af},get pngRes(){return Lf}},()=>l,{children:(s,o)=>{var a=zf(),c=J(a);br(c,()=>e.children);var d=F(c,2);ua(d,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var u=F(d,2);da(u,{showGrid:!0,get label(){return e.yLabel}});var f=F(u,2);fa(f,{}),S(s,a)},$$slots:{default:!0}}))}function Nf(n,e){if(n.target.tagName!=="rect"){B(e,-1);return}const t=Array.from(n.target.parentNode.children).indexOf(n.target);if(t<0){B(e,-1);return}r(e)!==t&&B(e,t,!0)}var Pf=G("<!> <!> <!>",1),Rf=G("<!> <!> <!> <!> <!>",1),Mf=G('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function Jl(n,e){ie(e,!0);let t=H(e,"outliers",19,()=>[]),l=H(e,"getter",3,xc),s=ne("residual"),o=ne(-1);const a=g(()=>e.model.npred?e.model.npred:e.model.ncols);function c(E){const I=e.model.exclvars&&e.model.exclvars.length>0?Ic(E,e.model.exclvars):E;if(!I.nresp||I.nresp<1)return I.values;const W=I.nresp*I.values.nrows,j=I.values.nrows,R=I.values.ncols-I.nresp;return new ot(I.values.v.subarray(W),j,R)}const d=g(()=>r(v)&&r(o)>=0?r(v).values.v[r(o)]:null),u=g(()=>r(C)&&r(o)>=0?r(C).sel.v[r(o)]:null),f=g(()=>e.model&&r(o)>=0?e.model.varlabels[r(o)]:null),v=g(()=>{if(!e.model)return null;const E=e.model.nresp?e.model.nresp:0,I=Pe(e.model.varvalues.filter((O,K)=>K>=E)),W=I.length,j=(I.v[1]-I.v[0])/2,R=(I.v[W-1]-I.v[W-2])/2,M=[I.v[0],I.v[W-1]],Y=[M[0]-j,M[1]+R],V=(M[1]-M[0])/W;return{values:I,lim:Y,width:V,hwidth:V*.5}}),h=g(()=>r(v)?r(v).values.apply(E=>E-r(v).hwidth):null),m=g(()=>{if(!e.dataset||!e.model)return null;const E=c(e.dataset,e.model.exclvars),I=new Ee(l()(e.model,"mX")),W=new Ee(l()(e.model,"sX"));return yf(E,I,W).t()}),b=g(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new ot(l()(e.model,"P",e.ncomp),r(a),e.ncomp).t():null),p=g(()=>r(m)&&r(b)?r(b).dot(r(m)):null),w=g(()=>r(p)?ko(r(b),r(p)):null),_=g(()=>r(w)?r(m).subtract(r(w)):null);let A=g(()=>r(w)?r(w).getcolumn(e.selected+1):null),y=g(()=>r(_)?r(_).getcolumn(e.selected+1):null),k=g(()=>r(m)?r(m).getcolumn(e.selected+1):null),C=g(()=>{if(!r(A)||!r(y)||!r(k))return null;const E=r(s)==="explained"?{all:r(w),sel:r(A),label:"Explained part, TP^T"}:r(s)==="residual"?{all:r(_),sel:r(y),label:"Residuals, E"}:{all:r(m),sel:r(k),label:"Preprocessed data, X"},I=zr(E.all.v),W=I[1]-I[0],j=[I[0]-W/50,I[1]+W/12],R=Ee.fill(I[1],E.sel.length);return E.lim=j,E.top=R,E.height=W,E});const T=g(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),L=g(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var z=oe(),P=J(z);{var N=E=>{va(E,{get closeModal(){return e.closeModal},children:(I,W)=>{var j=Mf(),R=D(j);R.__click=[Nf,o];var M=D(R);nr(M,{get title(){return r(T)},get yLabel(){return r(C).label},get xLabel(){return r(L)},get limY(){return r(C).lim},get limX(){return r(v).lim},fileName:"plot-contributions",children:(O,K)=>{var te=Rf(),$=J(te);hf($,{get xValues(){return r(v).values},get yValues(){return r(C).all},lineColor:"#e0e0e0"});var ee=F($,2);{var re=me=>{var ge=oe(),ye=J(ge);ze(ye,17,t,Ne,(ue,ve)=>{const ae=g(()=>r(C).all.getcolumn(r(ve)+1));wr(ue,{get xValues(){return r(v).values},get yValues(){return r(ae)},lineColor:"#ffdd88"})}),S(me,ge)};U(ee,me=>{t().length>0&&me(re)})}var de=F(ee,2);wr(de,{get xValues(){return r(v).values},get yValues(){return r(C).sel},lineColor:"crimson"});var pe=F(de,2);Fn(pe,{get left(){return r(h)},get top(){return r(C).top},get height(){return r(C).height},get width(){return r(v).width},faceColor:"transparent",borderColor:"transparent"});var fe=F(pe,2);{var ke=me=>{var ge=Pf(),ye=J(ge);const ue=g(()=>[r(d)]),ve=g(()=>[r(C).top.v[0]]),ae=g(()=>[r(f)]);Vn(ye,{get xValues(){return r(ue)},get yValues(){return r(ve)},get labels(){return r(ae)},pos:3,textSize:.85});var Ae=F(ye,2);const _e=g(()=>[r(d)]),Se=g(()=>[r(u)]);Kl(Ae,{get xValues(){return r(_e)},get yValues(){return r(Se)},faceColor:"crimson",lineColor:"crimson"});var Be=F(Ae,2);const yt=g(()=>[r(h).v[r(o)]]),Xe=g(()=>[r(C).top.v[r(o)]]);Fn(Be,{get left(){return r(yt)},get top(){return r(Xe)},get height(){return r(C).height},get width(){return r(v).width},faceColor:"#ff000015"}),S(me,ge)};U(fe,me=>{r(o)>=0&&me(ke)})}S(O,te)},$$slots:{default:!0}});var Y=F(R,4),V=D(Y);we(V,{label:"",children:(O,K)=>{Qe(O,{id:"type",options:["full","explained","residual"],get value(){return r(s)},set value(te){B(s,te,!0)}})},$$slots:{default:!0}}),S(I,j)},$$slots:{default:!0}})};U(P,E=>{r(v)&&r(C)&&E(N)})}S(n,z),ce()}rt(["click"]);var qf=G('<th class="svelte-8wnifa"> </th>'),If=G('<td class="svelte-8wnifa"> </td>'),jf=G('<tr class="svelte-8wnifa"></tr>'),Ff=G('<table class="svelte-8wnifa"><thead><tr class="svelte-8wnifa"></tr></thead><tbody></tbody></table>');function wa(n,e){ie(e,!0);const t=1,l=["xcumexpvar","ycumexpvar"],s=["rmse","r2","slope","bias"];let o=g(()=>{if(!e.res||e.ncomp<0)return null;const u=Object.keys(e.res),f=u.length,v=["",...u];let m=[["#LVs",...Array(f).fill(e.ncomp)]];for(let b of l){let p=[b];for(let w=0;w<f;w++)p.push(e.res[u[w]].stat[b][e.ncomp-1].toFixed(3));m.push(p)}for(let b of s){let p=[b];for(let w=0;w<f;w++){let _=3;const A=e.res[u[w]].stat[b].getcolref(t)[e.ncomp-1];b==="rmse"&&(_=A<1?3:A>100?1:2),p.push(A.toFixed(_))}m.push(p)}return{header:v,rows:m}});var a=oe(),c=J(a);{var d=u=>{var f=Ff(),v=D(f),h=D(v);ze(h,21,()=>r(o).header,Ne,(b,p)=>{var w=qf(),_=D(w);Z(()=>be(_,r(p))),S(b,w)});var m=F(v);ze(m,21,()=>r(o).rows,Ne,(b,p)=>{var w=jf();ze(w,21,()=>r(p),Ne,(_,A)=>{var y=If(),k=D(y);Z(()=>be(k,r(A))),S(_,y)}),S(b,w)}),S(u,f)};U(c,u=>{r(o)&&u(d)})}S(n,a),ce()}function Dn(n,e,t,l){let s=n.outliers,o=n.exclvars;(!s||!Array.isArray(s))&&(s=[]);const a=e.sep,c=e.values.nrows,d=s.length,u=c-d,f=n.nresp,v=n.nresp_model,h=n.ncomp,m=h,b=Array(m).fill(""),p=h>m?Array(m-h).fill(""):[],w=Array(h).fill(0).map((z,P)=>"LV"+(P+1));function _(z,P){const N=e.objlabels;y+=`
`,y+=[z+": ",...b].join(a)+`
`,y+=["object",...w,...p].join(a)+`
`;const E=n.v.subarray(P,P+h*u);let I=0;for(let W=0;W<c;W++){if(d>0&&s.includes(W)){y+=[N[W],...Array(h).fill("-"),...p].join(a)+`
`;continue}const j=Array(h);for(let R=0;R<h;R++)j[R]=E[R*u+I];y+=[N[W],...j,p].join(a)+`
`,I=I+1}y+=`
`}function A(z){const P=e.objlabels,N=3*h*u+h,E=h*u*v,I=n.v.subarray(N,N+E);let W=0;for(let j=0;j<c;j++){if(d>0&&s.includes(j)){y+=[P[j],...Array(h).fill("-"),...p].join(a)+`
`;continue}const R=Array(h);for(let M=0;M<h;M++)R[M]=I[M*(u*v)+(z-1)*u+W];y+=[P[j],...R,p].join(a)+`
`,W=W+1}y+=`
`}let y="";if(y+=["Number of LVs:",h,...b].join(a)+`
`,y+=["Optinal number of LVs:",l,...b].join(a)+`
`,y+=["Center: ",n.center,...b].join(a)+`
`,y+=["Scale: ",n.scale,...b].join(a)+`
`,s.length>0&&(y+=["Removed outliers: ",s.length,...b].join(a)+`
`),o.length>0&&(y+=["Excluded variables: ",o.length,...b].join(a)+`
`),y+=`
`,f>0){y+=["Variances: ","",...b].join(a)+`
`,y+=["",...w].join(a)+`
`,y+=["xexpvar:",...n.stat.xexpvar].join(a)+`
`,y+=["xcumexpvar",...n.stat.xcumexpvar].join(a)+`
`,y+=["yexpvar: ",...n.stat.yexpvar,...p].join(a)+`
`,y+=["ycumexpvar: ",...n.stat.ycumexpvar,...p].join(a)+`
`,y+=`
`,y+=`
`;for(let z=1;z<=f;z++)y+=["Response variable: "+e.varlabels[z-1],...b].join(a)+`

`,y+=["FoMs:",...w,...p].join(a)+`
`,n.stat&&(y+=["RMSE ",...n.stat.rmse.getcolref(z),...p].join(a)+`
`,y+=["R2",...n.stat.r2.getcolref(z),...p].join(a)+`
`,y+=["Slope",...n.stat.slope.getcolref(z),...p].join(a)+`
`,y+=["Bias",...n.stat.bias.getcolref(z),...p].join(a)+`
`,y+=`
`),y+=["Predictions:",...w,...p].join(a)+`
`,A(z)}else for(let z=1;z<=v;z++)y+=["Response variable: "+e.varlabels[z-1],...b].join(a)+`

`,y+=["Predictions:",...w,...p].join(a)+`
`,A(z);_("X-scores",0),_("Score distances, h",h*u),_("Orthogonal distances, q",h*u*2),n.stat&&(_("Y-scores",3*h*u+h+u*h*f),_("Orthogonal distances, z",4*h*u+h+u*h*f)),e.dec!=="."&&(y=y.replace(/\./g,e.dec)),y=["Data filename:",e.fileName,...b].join(e.sep)+`
`+y;let k=["PLS results ("+t+")","https://mda.tools/pls/",...b].join(e.sep)+`

`;const C=new Blob([k+y],{type:"text/csv"}),T=window.URL.createObjectURL(C),L=document.createElement("a");L.setAttribute("href",T),L.setAttribute("download",`pls-results-${t}.csv`),L.click()}function _a(n,e){n.ncomp_selected=e;const t=new Blob([JSON.stringify(n,fn)],{type:"application/json"}),l=window.URL.createObjectURL(t),s=document.createElement("a");s.setAttribute("href",l),s.setAttribute("download","pls-model.json"),s.click()}var Vf=G('<div class="msg-select"> </div>'),Of=G('<div class="msg-select"> </div>'),Bf=G('<div class="msg-select"> </div>'),Df=G('<div class="msg-select"> </div>'),Yf=G('<div class="selected-buttons svelte-8mh2yv"><!></div>'),Wf=G('<div class="selected-buttons svelte-8mh2yv"><!></div>'),Hf=G("<!> <!> <!>",1),Uf=()=>switchPlot(i),Xf=(n,e,t)=>B(e,r(t),!0),Gf=G("<button> </button>"),Kf=G('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!> <!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function Ql(n,e){ie(e,!0);let t=H(e,"selobjText",3,"Click to select an object..."),l=H(e,"selvarText",3,"Make rectangular selection of variable to exclude ..."),s=H(e,"clearText",3,"Click anywhere to remove selection..."),o=H(e,"params",15),a=Je({objects:-1,variables:[]}),c=ne(Je(Object.keys(e.plots)[0]));function d(P){a.objects=P}function u(P){a.objects=-1}function f(P){a.variables=P}function v(P){a.variables=[]}let h={objects:{select:d,unselect:u},variables:{select:f,unselect:v},stats:{}},m=g(()=>r(c)?e.plots[r(c)]:null),b=g(()=>r(m)?r(m).component:null);var p=Kf(),w=D(p),_=D(w),A=D(_);pl(A,()=>r(b),(P,N)=>{N(P,{get params(){return o()[r(c)]},get callbacks(){return h[r(m).scope]},get selected(){return a[r(m).scope]},get props(){return e.props}})});var y=F(_,2),k=D(y);{var C=P=>{var N=oe(),E=J(N);{var I=j=>{var R=Vf(),M=D(R);Z(()=>be(M,t())),S(j,R)},W=j=>{var R=Of(),M=D(R);Z(()=>be(M,s())),S(j,R)};U(E,j=>{a[r(m).scope]<0?j(I):j(W,!1)})}S(P,N)};U(k,P=>{r(m).scope==="objects"&&o()[r(c)].plotType!=="l"&&t().length>0&&P(C)})}var T=F(k,2);{var L=P=>{var N=oe(),E=J(N);{var I=j=>{var R=Bf(),M=D(R);Z(()=>be(M,l())),S(j,R)},W=j=>{var R=Df(),M=D(R);Z(()=>be(M,s())),S(j,R)};U(E,j=>{a[r(m).scope].length===0?j(I):j(W,!1)})}S(P,N)};U(T,P=>{r(m).scope==="variables"&&o()[r(c)].plotType!=="l"&&l().length>0&&P(L)})}var z=F(w,2);ze(z,21,()=>Object.keys(e.plots),Ne,(P,N)=>{var E=oe(),I=J(E);{var W=R=>{var M=Hf(),Y=J(M);du(Y,{get title(){return r(m).label},labelWidth:12,get options(){return e.controls[r(c)]},get value(){return o()[r(c)]},set value($){o(o()[r(c)]=$,!0)}});var V=F(Y,2);{var O=$=>{var ee=Yf(),re=D(ee);br(re,()=>r(m).buttons,()=>a.objects),S($,ee)};U(V,$=>{r(m).scope==="objects"&&r(m).buttons&&a.objects>=0&&$(O)})}var K=F(V,2);{var te=$=>{var ee=Wf(),re=D(ee);br(re,()=>r(m).buttons,()=>a.variables),S($,ee)};U(K,$=>{r(m).scope==="variables"&&r(m).buttons&&a.variables.length>0&&$(te)})}S(R,M)},j=R=>{var M=Gf();M.__keydown=[Uf],M.__click=[Xf,c,N];var Y=D(M);Z(()=>{ut(M,1,`plot-selector plot-selector-${r(N)??""}`,"svelte-8mh2yv"),be(Y,e.plots[r(N)].label)}),S(R,M)};U(I,R=>{r(m)&&r(c)===r(N)?R(W):R(j,!1)})}S(P,E)}),S(n,p),ce()}rt(["keydown","click"]);function ya(n,e){!e.callbacks||!e.callbacks.select||Mr(n,n.target.tagName,e.callbacks.select)}function Jf(n,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var Qf=se("<text> </text>"),Zf=se('<g class="series series-textlabels"></g>'),$f=se('<g class="series series-line"><polyline class="line"></polyline></g>'),ev=se("<rect></rect>"),tv=se('<g class="series series-bar"></g>'),rv=se("<text> </text>"),nv=se('<g class="series series-points series-points1"></g>'),lv=se('<g class="series series-points series-points1"><text> </text></g>'),sv=se('<g class="series series-bar"><rect></rect></g>'),ov=se('<g class="series series-text"><text> </text></g>'),av=se('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),iv=se("<!><!><!><!><!>",1);function Qt(n,e){ie(e,!0);let t=H(e,"shortenLabels",3,!0),l=H(e,"lineWidth",3,1),s=H(e,"markerSize",3,null),o=H(e,"markerWidth",3,2),a=H(e,"pch",3,"●"),c=H(e,"colors",3,void 0),d=H(e,"mainColor",19,()=>Jt.cal),u=H(e,"faceColor",3,null),f=H(e,"selected",19,()=>-1),v=H(e,"xRange",15),h=H(e,"yRange",15);const m=At("axes"),b=g(()=>_t(e.xValues,"PlotSeries")),p=g(()=>r(b)?_t(e.yValues,"PlotSeries",r(b).length):null);Te(()=>{v(r(b)?zr(r(b)):null),h(r(p)?zr(r(p)):null)});const w=g(()=>u()===null?e.plotType==="p"?"transparent":"white":u()),_=g(()=>s()?s():e.plotType==="p"?1:.85),A=g(()=>Yl[m.scales().plot]),y=g(()=>tt([0],m.tY())[0]),k=g(()=>mn([.8],m.tX())[0]),C=g(()=>r(k)/2),T=g(()=>r(A));let L=g(()=>e.plotType==="l"||e.plotType==="b"?Ul(r(b),r(p),m.tX(),m.tY()):null),z=g(()=>r(b)?tt(r(b),m.tX()):null),P=g(()=>r(p)?tt(r(p),m.tY()):null),N=g(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(K=>K.slice(0,ma)):e.labels:null),E=g(()=>c()&&c().length===r(b).length?c():Array(r(b).length).fill(d()));const I=g(()=>`font-size:${r(_)}em;fill:${r(w)};cursor:default;text-anchor:middle;stroke-width:${o()}px;user-select:none;`),W=`font-size:0.85em;fill:${Bn};cursor:default;text-anchor:middle;stroke:${Bn};stroke-width:0.1px;user-select:none;`,j="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",R=`fill:transparent;stroke-width: ${l()}px;`,M=`stroke-width:${l()}px;`;var Y=oe(),V=J(Y);{var O=K=>{var te=iv(),$=J(te);{var ee=ue=>{var ve=Zf();ze(ve,21,()=>r(z),Ne,(ae,Ae,_e)=>{var Se=Qf(),Be=D(Se);Z(()=>{q(Se,"x",r(z)[_e]),q(Se,"y",r(P)[_e]),q(Se,"dy",r(p).v[_e]<0?r(T):-r(T)),be(Be,r(N)[_e])}),S(ae,Se)}),Z(()=>nt(ve,W)),S(ue,ve)};U($,ue=>{e.showLabels&&r(N)&&ue(ee)})}var re=F($);{var de=ue=>{var ve=$f(),ae=D(ve);Z(()=>{nt(ve,R),q(ae,"points",r(L)),q(ae,"stroke",d())}),S(ue,ve)};U(re,ue=>{(e.plotType==="l"||e.plotType==="b")&&ue(de)})}var pe=F(re);{var fe=ue=>{var ve=tv();ve.__click=[ya,e],ze(ve,21,()=>r(z),Ne,(ae,Ae,_e)=>{var Se=ev();Z(()=>{q(Se,"x",r(z)[_e]-r(C)),q(Se,"y",r(p).v[_e]<0?r(y):r(P)[_e]),q(Se,"fill",r(E)[_e]),q(Se,"width",r(k)),q(Se,"height",r(p).v[_e]<0?r(P)[_e]-r(y):r(y)-r(P)[_e])}),S(ae,Se)}),Z(()=>nt(ve,M)),S(ue,ve)};U(pe,ue=>{e.plotType==="h"&&ue(fe)})}var ke=F(pe);{var me=ue=>{var ve=nv();ve.__click=[ya,e],ze(ve,21,()=>r(z),Ne,(ae,Ae,_e)=>{var Se=rv(),Be=D(Se);Z(()=>{q(Se,"x",r(z)[_e]),q(Se,"y",r(P)[_e]),q(Se,"fill",u()),q(Se,"stroke",r(E)[_e]),be(Be,a())}),S(ae,Se)}),Z(()=>nt(ve,r(I))),S(ue,ve)};U(ke,ue=>{(e.plotType==="p"||e.plotType==="b")&&ue(me)})}var ge=F(ke);{var ye=ue=>{var ve=av(),ae=J(ve);q(ae,"x",0),q(ae,"y",0),ae.__click=[Jf,e];var Ae=F(ae);{var _e=Xe=>{var st=lv();nt(st,j);var Ze=D(st),Yt=D(Ze);Z(()=>{q(Ze,"x",r(z)[f()]),q(Ze,"y",r(P)[f()]),q(Ze,"stroke",r(E)[f()]),be(Yt,a())}),S(Xe,st)},Se=Xe=>{var st=sv(),Ze=D(st);Z(()=>{nt(st,M),q(Ze,"stroke",r(E)[f()]),q(Ze,"fill",r(E)[f()]),q(Ze,"x",r(z)[f()]-r(C)),q(Ze,"y",r(p).v[f()]<0?r(y):r(P)[f()]),q(Ze,"width",r(k)),q(Ze,"height",r(p).v[f()]<0?r(P)[f()]-r(y):r(y)-r(P)[f()])}),S(Xe,st)};U(Ae,Xe=>{e.plotType!=="h"?Xe(_e):Xe(Se,!1)})}var Be=F(Ae);{var yt=Xe=>{var st=ov(),Ze=D(st),Yt=D(Ze);Z(()=>{nt(st,W),q(Ze,"stroke",ha),q(Ze,"fill",ha),q(Ze,"x",r(z)[f()]),q(Ze,"y",r(P)[f()]),q(Ze,"dy",r(p).v[f()]<0?r(T):-r(T)),be(Yt,r(N)[f()])}),S(Xe,st)};U(Be,Xe=>{e.showLabels&&r(N)&&r(N).length>0&&Xe(yt)})}S(ue,ve)};U(ge,ue=>{f()>=0&&ue(ye)})}S(K,te)};U(V,K=>{r(z)&&r(P)&&K(O)})}S(n,Y),ce()}rt(["click"]);var cv=G("<!> <!> <!> <!>",1);function xa(n,e){ie(e,!0);let t=g(()=>e.props?e.props.res:null),l=g(()=>r(t)?Object.keys(r(t)):null),s=g(()=>e.params&&e.params.resID&&r(l)?e.params.resID==="both"?r(l):[e.params.resID]:null),o=g(()=>r(s)?r(t)[r(s)[0]]:null);const a={expvar:"Explained variance",resvar:"Residual variance",cumexpvar:"Cumulative explained variance",cumresvar:"Cumulative residual variance"},c=g(()=>e.params.varSet==="X"?"x":"y"),d=g(()=>e.params.varForm==="cumulative"?"cum":""),u=g(()=>e.params.varType==="explained"?"exp":"res"),f=g(()=>r(d)+r(u)+"var"),v=g(()=>r(c)+r(d)+r(u)+"var"),h=g(()=>r(f)?a[r(f)]+" ("+e.params.varSet+")":""),m=g(()=>r(o).ncomp>1?1-r(o).ncomp*.065:-.1),b=g(()=>r(o).ncomp>1?r(o).ncomp*1.065:2.1),p=g(()=>[r(m),r(b)]),w=g(()=>r(o)?r(o).stat.components:null),_=g(()=>r(s)?r(s).map(z=>{const P=r(t)[z].stat[r(v)];return{yValues:Pe(P),labels:Array.from(P).map(N=>N.toFixed(N<.1?3:2)),faceColor:_r[z],mainColor:Jt[z]}}):null),A=g(()=>r(_)?It(r(_).map(z=>Math.min(-.05,It(z.yValues)))):0),y=g(()=>[r(A)*1.1,1.1]),k=g(()=>r(_)?r(s).map(z=>({id:z,label:z,point:{marker:1,faceColor:_r[z],lineColor:Jt[z],markerSize:.85,lineWidth:1.5}})):null);var C=oe(),T=J(C);{var L=z=>{const P=g(()=>"plot-"+r(v));nr(z,{get title(){return r(h)},get limX(){return r(p)},get limY(){return r(y)},xLabel:"Number of LVs",yLabel:"Variance",get fileName(){return r(P)},whole:!0,children:(N,E)=>{var I=cv(),W=J(I);{var j=O=>{const K=g(()=>[e.props.ncomp]),te=g(()=>[e.props.ncomp]),$=g(()=>[r(y)[0]]),ee=g(()=>[r(y)[1]]);qr(O,{get xStart(){return r(K)},get xEnd(){return r(te)},get yStart(){return r($)},get yEnd(){return r(ee)},lineColor:"#a0a0a0"})};U(W,O=>{e.props.ncomp&&O(j)})}var R=F(W,2);ze(R,17,()=>r(_),Ne,(O,K)=>{Qt(O,{get xValues(){return r(w)},get yValues(){return r(K).yValues},get labels(){return r(K).labels},get faceColor(){return r(K).faceColor},get mainColor(){return r(K).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var M=F(R,2);{var Y=O=>{var K=oe(),te=J(K);ze(te,17,()=>r(_),Ne,($,ee)=>{const re=g(()=>[r(w)[e.props.ncomp-1]]),de=g(()=>[r(ee).yValues.v[e.props.ncomp-1]]);Qt($,{get xValues(){return r(re)},get yValues(){return r(de)},get faceColor(){return r(ee).faceColor},get mainColor(){return r(ee).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},markerSize:1,lineWidth:1.5,markerWidth:3})}),S(O,K)};U(M,O=>{e.props.ncomp&&O(Y)})}var V=F(M,2);On(V,{get items(){return r(k)}}),S(N,I)},$$slots:{default:!0}})};U(T,z=>{r(w)&&r(_)&&z(L)})}S(n,C),ce()}var uv=G("<!> <!> <!> <!>",1);function ka(n,e){ie(e,!0);const t={rmse:"RMSE",r2:"R^2",slope:"Slope"};let l=g(()=>e.props?e.props.res:null),s=g(()=>r(l)?Object.keys(r(l)):null),o=g(()=>e.params&&e.params.resID&&r(s)?e.params.resID==="both"?r(s):[e.params.resID]:null),a=g(()=>r(o)?r(l)[r(o)[0]]:null),c=g(()=>e.params?t[e.params.fom]:""),d=g(()=>e.params?t[e.params.fom]+" ("+r(a).varlabels[e.params.resp-1]+")":""),u=g(()=>r(a).ncomp>1?1-r(a).ncomp*.065:-.1),f=g(()=>r(a).ncomp>1?r(a).ncomp*1.065:2.1),v=g(()=>[r(u),r(f)]),h=g(()=>r(a)?r(a).stat.components:null),m=g(()=>{if(!r(o))return null;let k=0,C=Number.NEGATIVE_INFINITY,T=[];for(let L of r(o)){const z=r(l)[L].stat[e.params.fom].getcolref(e.params.resp);k=Math.min(k,It(z)),C=Math.max(C,Dt(z)),T.push({yValues:Pe(z),labels:Array.from(z).map(P=>P.toFixed(P<.1?3:2)),faceColor:_r[L],mainColor:Jt[L]})}return{yMin:k,yMax:C,values:T}}),b=g(()=>r(m)?r(o).map(k=>({id:k,label:k,point:{marker:1,faceColor:_r[k],lineColor:Jt[k],markerSize:.85,lineWidth:1.5}})):null);const p=g(()=>r(m)?(r(m).yMax-r(m).yMin)*.05:0),w=g(()=>r(m)?[r(m).yMin-r(p),r(m).yMax+4*r(p)]:[0,1]);var _=oe(),A=J(_);{var y=k=>{const C=g(()=>"plot-"+e.params.fom);nr(k,{get title(){return r(d)},get limX(){return r(v)},get limY(){return r(w)},get yLabel(){return r(c)},xLabel:"Number of LVs",get fileName(){return r(C)},whole:!0,children:(T,L)=>{var z=uv(),P=J(z);{var N=R=>{const M=g(()=>[e.props.ncomp]),Y=g(()=>[e.props.ncomp]),V=g(()=>[r(w)[0]]),O=g(()=>[r(w)[1]]);qr(R,{get xStart(){return r(M)},get xEnd(){return r(Y)},get yStart(){return r(V)},get yEnd(){return r(O)},lineColor:"#a0a0a0"})};U(P,R=>{e.props.ncomp&&R(N)})}var E=F(P,2);ze(E,17,()=>r(m).values,Ne,(R,M)=>{Qt(R,{get xValues(){return r(h)},get yValues(){return r(M).yValues},get labels(){return r(M).labels},get faceColor(){return r(M).faceColor},get mainColor(){return r(M).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},lineWidth:1.5})});var I=F(E,2);{var W=R=>{var M=oe(),Y=J(M);ze(Y,17,()=>r(m).values,Ne,(V,O)=>{const K=g(()=>[r(h)[e.props.ncomp-1]]),te=g(()=>[r(O).yValues.v[e.props.ncomp-1]]);Qt(V,{get xValues(){return r(K)},get yValues(){return r(te)},get faceColor(){return r(O).faceColor},get mainColor(){return r(O).mainColor},plotType:"b",get showLabels(){return e.params.showLabels},markerSize:1,lineWidth:1.5,markerWidth:3})}),S(R,M)};U(I,R=>{e.props.ncomp&&R(W)})}var j=F(I,2);On(j,{get items(){return r(b)}}),S(T,z)},$$slots:{default:!0}})};U(A,k=>{r(h)&&r(m)&&k(y)})}S(n,_),ce()}var dv=G("<!> <!>",1),fv=G("<!> <!> <!> <!>",1);function Zl(n,e){ie(e,!0);const t=g(()=>e.props?e.props.res:null),l=g(()=>r(t)?Object.keys(r(t)):null),s=g(()=>e.params&&e.params.resID&&r(l)?e.params.resID==="both"?r(l):[e.params.resID]:null),o=g(()=>r(s)&&r(t)[r(s)[0]]?r(t)[r(s)[0]]:null),a=g(()=>r(o)&&r(o).Yref),c=g(()=>r(o)?"Predictions for "+r(o).varlabels[e.params.resp-1]+" (A = "+e.props.ncomp+")":""),d=g(()=>r(a)?"Reference y-values":"Objects"),u=g(()=>{if(!r(o)||!r(o).stat||!e.params.showStat||e.params.resID==="both")return null;const _=e.params.resID,A=r(t)[_].stat.rmse.getcolref(e.params.resp)[e.props.ncomp-1],y=r(t)[_].stat.r2.getcolref(e.params.resp)[e.props.ncomp-1],k=r(t)[_].stat.slope.getcolref(e.params.resp)[e.props.ncomp-1];return'<tspan x="5em" dy="1.5em">RMSE: '+A.toFixed(2)+'</tspan><tspan x="5em" dy="1.5em">R2: '+y.toFixed(3)+'</tspan><tspan x="5em" dy="1.5em">Slope: '+k.toFixed(3)+"</tspan></tspan>"}),f=g(()=>{if(!r(s)||!r(o))return null;let _=e.params.resp?Number.POSITIVE_INFINITY:null,A=e.params.resp?Number.NEGATIVE_INFINITY:null,y=[],k="";for(let C of r(s)){const T=r(t)[C],L=T.Yref?T.Yref.getcolref(e.params.resp):T.objindices.map(E=>E+1),z=Tt(T,"Yp",e.props.ncomp,e.params.resp),P=ho(L,z)/Cl(L),N=pr(z)-P*pr(L);_=Math.min(_,It(L),It(z)),A=Math.max(A,Dt(L),Dt(z)),y.push({xValues:Pe(L),yValues:Pe(z),lineX:[_,A],lineY:[N+P*_,N+P*A],labels:e.params.showLabels==="labels"?T.objlabels:Tf(z,_,A),faceColor:_r[C]+"40",mainColor:Jt[C],stats:k})}return{vMin:_,vMax:A,values:y}});let v=g(()=>r(f)?r(s).map(_=>({id:_,label:_,point:{marker:1,faceColor:_r[_],lineColor:Jt[_],markerSize:.85,lineWidth:1.5}})):null);const h=g(()=>r(f)?(r(f).vMax-r(f).vMin)*.075:null),m=g(()=>r(h)?[r(f).vMin-r(h),r(f).vMax+r(h)]:[0,1]);var b=oe(),p=J(b);{var w=_=>{nr(_,{get title(){return r(c)},get xLabel(){return r(d)},get limX(){return r(m)},get limY(){return r(m)},yLabel:"Predicted y-values",fileName:"plot-predictions",get onclick(){return e.callbacks.unselectObject},children:(A,y)=>{var k=fv(),C=J(k);{var T=E=>{wr(E,{get xValues(){return r(m)},get yValues(){return r(m)},lineColor:"#d0d0d0"})};U(C,E=>{r(a)&&E(T)})}var L=F(C,2);ze(L,17,()=>r(f).values,Ne,(E,I)=>{var W=dv(),j=J(W);{var R=O=>{wr(O,{get xValues(){return r(I).lineX},get yValues(){return r(I).lineY},get lineColor(){return r(I).mainColor}})};U(j,O=>{r(a)&&O(R)})}var M=F(j,2);const Y=g(()=>e.params.showLabels!=="hide"),V=g(()=>r(a)?"p":"h");Qt(M,{get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return r(I).xValues},get yValues(){return r(I).yValues},get faceColor(){return r(I).faceColor},get mainColor(){return r(I).mainColor},get labels(){return r(I).labels},get showLabels(){return r(Y)},get plotType(){return r(V)}}),S(E,W)});var z=F(L,2);{var P=E=>{const I=g(()=>[r(m)[0]]),W=g(()=>[r(m)[1]-r(h)]);Vn(E,{textSize:.85,pos:0,get xValues(){return r(I)},get yValues(){return r(W)},get labels(){return r(u)}})};U(z,E=>{r(u)&&E(P)})}var N=F(z,2);On(N,{get items(){return r(v)},position:"bottomright"}),S(A,k)},$$slots:{default:!0}})};U(p,_=>{r(f)&&_(w)})}S(n,b),ce()}var vv=G("<!> <!>",1),hv=G("<!> <!> <!>",1);function $l(n,e){ie(e,!0);let t=g(()=>e.props?e.props.model:null),l=g(()=>e.props?e.props.res:null),s=g(()=>r(l)?Object.keys(r(l)):null),o=g(()=>e.params&&e.params.resID&&r(s)?e.params.resID==="both"?r(s):[e.params.resID]:null),a=g(()=>r(o)?r(l)[r(o)[0]]:null);const c="Scores";function d(A,y){return A==="X"?"X":A==="Y"?"Y":y==="x"?"X":"Y"}function u(A,y,k,C){return(A==="X"||A==="Y")&&C==="x"?y:k}function f(A,y){const k=d(A.varSet,y),C=u(A.varSet,A.comp1,A.comp2,y),T=r(t).stat[k.toLocaleLowerCase()+"expvar"][C-1]*100;return k+"-scores (LV"+C+", "+T.toFixed(T>1?1:2)+"%)"}let v=g(()=>{if(!r(o)||!r(a))return null;let A=Number.POSITIVE_INFINITY,y=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,C=Number.NEGATIVE_INFINITY,T=[];for(let E of r(o)){const I=r(l)[E],W=e.params.varSet==="X"|e.params.varSet==="XY"?Tt(I,"xscores",e.params.varSet==="XY"?e.params.comp2:e.params.comp1):Tt(I,"yscores",e.params.comp1),j=e.params.varSet==="X"?Tt(I,"xscores",e.params.comp2):Tt(I,"yscores",e.params.comp2);A=Math.min(A,It(W)),y=Math.min(y,It(j)),k=Math.max(k,Dt(W)),C=Math.max(C,Dt(j)),T.push({xValues:Pe(W),yValues:Pe(j),labels:I.objlabels,faceColor:_r[E]+"40",mainColor:Jt[E]})}const L=(k-A)*.05,z=(C-y)*.05,P=[A-L,k+L],N=[y-z,C+z];return{limX:P,limY:N,values:T}});const h=g(()=>f(e.params,"x")),m=g(()=>f(e.params,"y"));let b=g(()=>r(v)?r(o).map(A=>({id:A,label:A,point:{marker:1,faceColor:_r[A],lineColor:Jt[A],markerSize:.85,lineWidth:1.5}})):null);var p=oe(),w=J(p);{var _=A=>{const y=g(()=>"plot-"+e.params.varSet.toLowerCase()+"scores");nr(A,{title:c,get xLabel(){return r(h)},get yLabel(){return r(m)},get limX(){return r(v).limX},get limY(){return r(v).limY},get fileName(){return r(y)},get onclick(){return e.callbacks.unselectObject},children:(k,C)=>{var T=hv(),L=J(T);{var z=E=>{var I=vv(),W=J(I);const j=g(()=>[r(v).limY[0]]),R=g(()=>[r(v).limY[1]]);qr(W,{xStart:[0],xEnd:[0],get yStart(){return r(j)},get yEnd(){return r(R)},get lineColor(){return bn}});var M=F(W,2);const Y=g(()=>[r(v).limX[0]]),V=g(()=>[r(v).limX[1]]);qr(M,{yStart:[0],yEnd:[0],get xStart(){return r(Y)},get xEnd(){return r(V)},get lineColor(){return bn}}),S(E,I)};U(L,E=>{e.props.ncomp&&E(z)})}var P=F(L,2);ze(P,17,()=>r(v).values,Ne,(E,I)=>{Qt(E,{get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return r(I).xValues},get yValues(){return r(I).yValues},get faceColor(){return r(I).faceColor},get mainColor(){return r(I).mainColor},get labels(){return r(I).labels},get showLabels(){return e.params.showLabels},plotType:"p",lineWidth:1.5})});var N=F(P,2);On(N,{get items(){return r(b)}}),S(k,T)},$$slots:{default:!0}})};U(w,A=>{r(v)&&A(_)})}S(n,p),ce()}var mv=G("<!> <!> <!>",1),gv=G("<!> <!> <!>",1);function Ea(n,e){ie(e,!0);function t($,ee,re){if(re<10)return Math.round(Math.log2(re)+1);const de=2*$/Math.pow(re,.3333333);return Math.round(ee/de)}const l={p:"Reference y-values",qq:"Standard normal quantiles, z",h:"Residuals, e"},s={p:"Residuals, e",qq:"Sample quantiles, e",h:"Counts"},o=g(()=>e.props.res[e.params.resID]),a=g(()=>r(o)?"Residuals for "+r(o).varlabels[e.params.resp-1]+" (A = "+e.props.ncomp+")":""),c=g(()=>l[e.params.plotType]),d=g(()=>s[e.params.plotType]),u=g(()=>r(o)?r(o).Yref.getcolref(e.params.resp):null),f=g(()=>r(o)?Tt(r(o),"Yp",e.props.ncomp,e.params.resp):null),v=g(()=>r(u)&&r(f)?new Ee(r(u).map(($,ee)=>$-r(f)[ee])):null),h=g(()=>r(v)?r(v).sort():null),m=g(()=>r(o)?vc(r(o).nrows):null),b=g(()=>r(m)?qn(r(m)):null),p=g(()=>r(h)?r(h).v[Math.round(r(h).length*.25)]:null),w=g(()=>r(h)?r(h).v[Math.round(r(h).length*.75)]:null),_=g(()=>r(p)&&r(w)?r(w)-r(p):null),A=g(()=>r(_)?r(_)/1.348:1),y=g(()=>r(p)&&r(A)?r(p)+r(A)*.674:0),k=g(()=>[-4*r(A)+r(y),4*r(A)+r(y)]),C=[-4,4],T=g(()=>r(o)?r(o).nrows:1),L=g(()=>r(v)?zr(r(v)):null),z=g(()=>r(_)&&r(T)&&r(L)?t(r(_),r(L)[1]-r(L)[0],r(T)):10),P=g(()=>r(v)?El(r(v),r(z)):null),N=g(()=>r(P)?uo(r(v),r(P)):null),E=g(()=>r(P)?fo(r(P)):null),I=g(()=>r(v)?Array.from(r(v).sortind().v):null),W=g(()=>e.params.plotType==="p"?r(o).objlabels:r(I).map($=>r(o).objlabels[$-1])),j=g(()=>r(v)?e.params.plotType==="p"?new Ee(r(u)):e.params.plotType==="qq"?r(b):r(E):null),R=g(()=>r(v)?e.params.plotType==="p"?r(v):e.params.plotType==="qq"?r(h):r(N):null),M=g(()=>Jt[e.params.resID]),Y=g(()=>r(j)?Tr(r(j)):[0,1]),V=g(()=>r(R)?Tr(r(R)):[0,1]);var O=oe(),K=J(O);{var te=$=>{nr($,{get title(){return r(a)},get xLabel(){return r(c)},get limX(){return r(Y)},get limY(){return r(V)},get yLabel(){return r(d)},fileName:"plot-yresiduals",get onclick(){return e.callbacks.unselectObject},children:(ee,re)=>{var de=oe(),pe=J(de);{var fe=me=>{var ge=mv(),ye=J(ge);Kl(ye,{get xValues(){return r(j)},get yValues(){return r(R)},get lineColor(){return r(M)},lineWidth:2});var ue=F(ye,2);wr(ue,{get xValues(){return C},get yValues(){return r(k)},lineColor:"#606060"});var ve=F(ue,2);{var ae=Ae=>{Vn(Ae,{get xValues(){return r(j)},get yValues(){return r(R)},get labels(){return r(W)},pos:3,textSize:.85,get faceColor(){return Bn}})};U(ve,Ae=>{e.params.showLabels!=="hide"&&Ae(ae)})}S(me,ge)},ke=(me,ge)=>{{var ye=ve=>{lf(ve,{get xValues(){return r(j)},get yValues(){return r(R)},get faceColor(){return r(M)},get lineColor(){return r(M)},barWidth:.95})},ue=ve=>{var ae=gv(),Ae=J(ae);Kl(Ae,{get xValues(){return r(j)},get yValues(){return r(R)},get lineColor(){return r(M)},lineWidth:2});var _e=F(Ae,2);wr(_e,{get xValues(){return r(Y)},yValues:[0,0],lineColor:"#606060"});var Se=F(_e,2);{var Be=yt=>{Vn(yt,{get xValues(){return r(j)},get yValues(){return r(R)},get labels(){return r(W)},pos:3,textSize:.85,get faceColor(){return Bn}})};U(Se,yt=>{e.params.showLabels!=="hide"&&yt(Be)})}S(ve,ae)};U(me,ve=>{e.params.plotType==="h"?ve(ye):ve(ue,!1)},ge)}};U(pe,me=>{e.params.plotType==="qq"?me(fe):me(ke,!1)})}S(ee,de)},$$slots:{default:!0}})};U(K,$=>{r(j)&&r(R)&&$(te)})}S(n,O),ce()}var bv=G("<!> <!> <!>",1);function pv(n,e){ie(e,!0);let t=g(()=>e.props?e.props.model:null);function l(L,z,P){return!L||!z||z<1||z>L.ncomp?null:new Ee(St(L,P,z))}let s=ne(void 0),o=ne(void 0);const a=g(()=>r(t)?Pe(r(t).xvarvalues):null),c=g(()=>r(t)?Pe(r(t).xvarindices):null),d=g(()=>r(t)?r(t).xvarlabels:null),u=g(()=>r(t)?l(r(t),e.params.comp2,e.params.statType):null),f=g(()=>r(t)?l(r(t),e.params.comp1,e.params.statType):null),v=g(()=>!r(t)||!e.params.comp1?null:e.params.plotType==="p"?{values:r(f),label:`LV${e.params.comp1}`}:e.params.plotType==="l"&&r(a)?{values:r(a),label:r(t).varvaluesName+(r(t).varvaluesUnits?", "+r(t).varvaluesUnits:"")}:{values:r(c),label:"Predictors"}),h=g(()=>r(v)?r(v).values:null),m=g(()=>r(v)?r(v).label:null),b=g(()=>r(u)),p=g(()=>`LV${e.params.comp2}`),w=g(()=>{if(r(o)&&r(o)[0]<Number.POSITIVE_INFINITY&&r(o)[1]>Number.NEGATIVE_INFINITY){const L=(r(o)[1]-r(o)[0])*.1;return[r(o)[0]-2*L,r(o)[1]+L]}else return[0,1]}),_=g(()=>{if(r(s)&&r(s)[0]<Number.POSITIVE_INFINITY&&r(s)[1]>Number.NEGATIVE_INFINITY){const L=Math.abs((r(s)[1]-r(s)[0])*.1);return e.params.plotType==="l"&&r(t).varrev?[r(s)[1]+L,r(s)[0]-L]:[r(s)[0]-L,r(s)[1]+L]}else return[0,1]}),A=g(()=>e.params.statType==="xloadings"?"X-loadings":"Weights"),y=g(()=>"plot-"+e.params.statType);var k=oe(),C=J(k);{var T=L=>{nr(L,{get xLabel(){return r(m)},get yLabel(){return r(p)},get title(){return r(A)},get fileName(){return r(y)},get limX(){return r(_)},get limY(){return r(w)},children:(z,P)=>{var N=bv(),E=J(N);const I=g(()=>[r(_)[0]]),W=g(()=>[r(_)[1]]);qr(E,{get xStart(){return r(I)},get xEnd(){return r(W)},yStart:[0],yEnd:[0],get lineColor(){return bn}});var j=F(E,2);{var R=Y=>{const V=g(()=>[r(w)[0]]),O=g(()=>[r(w)[1]]);qr(Y,{xStart:[0],xEnd:[0],get yStart(){return r(V)},get yEnd(){return r(O)},get lineColor(){return bn}})};U(j,Y=>{e.params.plotType==="p"&&Y(R)})}var M=F(j,2);Qt(M,{get xValues(){return r(h)},get yValues(){return r(b)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return r(d)},shortenLabels:!1,get xRange(){return r(s)},set xRange(Y){B(s,Y,!0)},get yRange(){return r(o)},set yRange(Y){B(o,Y,!0)}}),S(z,N)},$$slots:{default:!0}})};U(C,L=>{r(h)&&r(b)&&L(T)})}S(n,k),ce()}var wv=G("<!> <!> <!>",1);function es(n,e){ie(e,!0);let t=g(()=>e.props&&e.props.model?e.props.model:null),l=g(()=>e.props&&e.props.res?e.props.res:null),s=g(()=>r(l)?Object.keys(r(l)):null),o=g(()=>e.params&&e.params.resID&&r(s)?e.params.resID==="both"?r(s):[e.params.resID]:null);const a="#909090",c=g(()=>r(t)?e.params.limType==="classic"?{h:St(r(t),"cNh"),q:St(r(t),"cNq"),z:St(r(t),"cNz")}:{h:St(r(t),"rNh"),q:St(r(t),"rNq"),z:St(r(t),"rNz")}:null),d=g(()=>r(t)?e.params.limType==="classic"?{h:St(r(t),"ch0"),q:St(r(t),"cq0"),z:St(r(t),"cz0")}:{h:St(r(t),"rh0"),q:St(r(t),"rq0"),z:St(r(t),"rz0")}:null),u=g(()=>r(c)?{h:r(c).h[e.props.ncomp-1],q:r(c).q[e.props.ncomp-1],z:r(c).z[e.props.ncomp-1]}:null),f=g(()=>r(d)?{h:r(d).h[e.props.ncomp-1],q:r(d).q[e.props.ncomp-1],z:r(d).z[e.props.ncomp-1]}:null),v=g(()=>r(u)?e.params.distType==="h/q"?r(u).h:r(u).h+r(u).q:null),h=g(()=>r(u)?e.params.distType==="h/q"?r(u).q:r(u).z:null),m=g(()=>r(f)?e.params.distType==="h/q"?r(f).h:r(u).h+r(u).q:null),b=g(()=>r(f)?e.params.distType==="h/q"?r(f).q:r(f).z:null),p=g(()=>e.params.alpha?1-e.params.alpha/100:.95),w=g(()=>e.params.gamma?1-e.params.gamma/100:.99);let _=g(()=>r(u)?pa(r(p),r(v),r(h),e.params.transType):null),A=g(()=>r(u)?pa(Math.pow(r(w),1/r(t).nrows),r(v),r(h),e.params.transType):null);const y=g(()=>{if(!r(l)||!r(u)||!r(f))return null;let j=Number.POSITIVE_INFINITY,R=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,Y=Number.NEGATIVE_INFINITY;const V=[];for(let O of r(o)){const K=r(l)[O];if(!K)return null;const te=Tt(K,"hdist",e.props.ncomp),$=Tt(K,"qdist",e.props.ncomp),ee=Tt(K,"zdist",e.props.ncomp),re=e.params.distType==="h/q"?te:te.map((ke,me)=>ke/r(f).h*r(u).h+$[me]/r(f).q*r(u).q),de=e.params.distType==="h/q"?$:ee,pe=ga(re,r(v),r(m),e.params.transType),fe=ga(de,r(h),r(b),e.params.transType);j=Math.min(j,pe.min),R=Math.min(R,fe.min),M=Math.max(M,pe.max),Y=Math.max(Y,fe.max),V.push({xValues:pe.values,yValues:fe.values,mainColor:Jt[O],labels:K.objlabels.map(ke=>ke.slice(0,ma))})}return{values:V,xMin:j,xMax:M,yMin:R,yMax:Y}});let k=g(()=>"Distances (A = "+e.props.ncomp+")"),C=g(()=>ba(e.params.distType==="h/q"?"h":"f",e.params.transType)),T=g(()=>ba(e.params.distType==="h/q"?"q":"z",e.params.transType)),L=ne(void 0),z=ne(void 0),P=g(()=>{if(!r(y))return[0,1];const j=Math.max(r(y).xMax,r(A).x.v[r(A).x.v.length-1]);return[-.02*(j-r(y).xMin),1.05*j]}),N=g(()=>{if(!r(y))return[0,1];const j=Math.max(r(y).yMax,r(A).y.v[0]);return[-.02*(j-r(y).yMin),(1.05+.1*(e.params.colorBy!=="none"))*j]});var E=oe(),I=J(E);{var W=j=>{nr(j,{get title(){return r(k)},get limX(){return r(P)},get limY(){return r(N)},get xLabel(){return r(C)},get yLabel(){return r(T)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(R,M)=>{var Y=wv(),V=J(Y);{var O=ee=>{wr(ee,{get xValues(){return r(_).x},get yValues(){return r(_).y},lineColor:a,lineType:2})};U(V,ee=>{r(_)&&ee(O)})}var K=F(V,2);{var te=ee=>{wr(ee,{get xValues(){return r(A).x},get yValues(){return r(A).y},lineColor:a,lineType:3})};U(K,ee=>{r(A)&&ee(te)})}var $=F(K,2);ze($,17,()=>r(y).values,Ne,(ee,re)=>{Qt(ee,{get selected(){return e.selected},get callbacks(){return e.callbacks},get labels(){return r(re).labels},get mainColor(){return r(re).mainColor},get xValues(){return r(re).xValues},get yValues(){return r(re).yValues},plotType:"p",get showLabels(){return e.params.showLabels},get xRange(){return r(L)},set xRange(de){B(L,de,!0)},get yRange(){return r(z)},set yRange(de){B(z,de,!0)}})}),S(R,Y)},$$slots:{default:!0}})};U(I,j=>{r(y)&&j(W)})}S(n,E),ce()}var _v=G("<!> <!>",1);function yv(n,e){ie(e,!0);let t=g(()=>e.props?e.props.model:null),l=g(()=>r(t)&&e.props.ncomp>0?r(t).coeffs.subarray((e.props.ncomp-1)*r(t).npred*r(t).nresp,(e.props.ncomp-1)*r(t).npred*r(t).nresp+r(t).npred*r(t).nresp):null),s=g(()=>r(l)?new ot(r(l),r(t).npred,r(t).nresp):null);const o=g(()=>r(t)?Pe(r(t).xvarvalues):null),a=g(()=>r(t)?Pe(r(t).xvarindices):null),c=g(()=>r(t)?r(t).xvarlabels:null),d=g(()=>r(t)?r(t).varvaluesName+(r(t).varvaluesUnits?", "+r(t).varvaluesUnits:""):""),u=g(()=>e.params.plotType==="h"?r(a):r(o)),f=g(()=>r(s)?r(s).getcolumn(e.params.resp):null),v=g(()=>e.params.plotType==="h"?"Predictors":r(d)),h=g(()=>e.params.plotType==="h"&&r(u).length<20?[.5,r(u).length+.5]:r(u)?Tr(r(u),.05):[0,1]),m=g(()=>r(f)?Tr(r(f),.075):[0,1]),b=g(()=>"Regression coefficients (A = "+e.props.ncomp+")"),p="Coefficients";var w=oe(),_=J(w);{var A=y=>{const k=g(()=>e.params.plotType==="h");nr(y,{get xLabel(){return r(v)},yLabel:p,get limX(){return r(h)},get limY(){return r(m)},get title(){return r(b)},get whole(){return r(k)},fileName:"plot-regcoeffs",children:(C,T)=>{var L=_v(),z=J(L);const P=g(()=>[r(h)[0]]),N=g(()=>[r(h)[1]]);qr(z,{get xStart(){return r(P)},get xEnd(){return r(N)},yStart:[0],yEnd:[0],get lineColor(){return bn}});var E=F(z,2);Qt(E,{get xValues(){return r(u)},get yValues(){return r(f)},get selected(){return e.selected},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return r(c)},shortenLabels:!1}),S(C,L)},$$slots:{default:!0}})};U(_,y=>{r(u)&&r(f)&&y(A)})}S(n,w),ce()}var xv=G("<!> <!> <!>",1),kv=G('<div class="svelte-17oamay"><!></div>');function Ev(n,e){ie(e,!0);let t=g(()=>!0),l=ne(!1),s=ne(null),o=ne(null),a=ne(null),c=ne(null);const d=g(()=>r(s)!==null&&r(a)!==null?Math.min(r(s),r(a)):null),u=g(()=>r(o)!==null&&r(c)!==null?Math.max(r(o),r(c)):null),f=g(()=>r(s)!==null&&r(a)!==null?Math.abs(r(s)-r(a)):null),v=g(()=>r(o)!==null&&r(c)!==null?Math.abs(r(o)-r(c)):null),h=g(()=>e.props?e.props.model:null),m=g(()=>e.props&&e.props.ncomp>0?e.props.ncomp:1),b=g(()=>r(h)&&r(m)>0?(r(m)-1)*r(h).npred*r(h).nresp:null),p=g(()=>r(b)!==null?r(b)+r(h).npred*r(h).nresp:null),w=g(()=>r(p)!==null?new ot(r(h).sr.subarray(r(b),r(p)),r(h).npred,r(h).nresp):null),_=g(()=>r(p)!==null?new ot(r(h).vip.subarray(r(b),r(p)),r(h).npred,r(h).nresp):null),A=g(()=>r(h)?Pe(r(h).xvarvalues):null),y=g(()=>r(h)?Pe(r(h).xvarindices):null),k=g(()=>r(h)?r(h).xvarlabels:null),C=g(()=>r(A)&&r(y)&&r(_)?{values:r(A),indices:r(y),vip:r(_).getcolumn(e.params.resp)}:null),T=g(()=>r(_)&&r(w)?{vip:r(_).getcolumn(e.params.resp),selratio:r(w).getcolumn(e.params.resp)}:null),L=g(()=>r(h)?{values:r(h).varvaluesName+(r(h).varvaluesUnits?", "+r(h).varvaluesUnits:""),indices:"Predictors",vip:"VIP scores"}:null),z=g(()=>r(h)?{vip:"VIP scores",selratio:"Selectivity ratio"}:null),P=g(()=>r(C)?r(C)[e.params.xset]:null),N=g(()=>r(T)?r(T)[e.params.yset]:null),E=g(()=>r(L)?r(L)[e.params.xset]:null),I=g(()=>r(z)?r(z)[e.params.yset]:null),W=g(()=>"Variable importance (A = "+r(m)+")"),j=g(()=>r(P)?Tr(r(P),.05):[0,1]),R=g(()=>r(N)?Tr(r(N),.075):[0,1]),M=g(()=>r(h)?r(h).npred<30?1:r(h).npred>200?.4:.6:1),Y=g(()=>e.selected&&e.selected.length>0?Pe(e.selected.map(fe=>r(P).v[fe])):null),V=g(()=>e.selected&&e.selected.length>0?Pe(e.selected.map(fe=>r(N).v[fe])):null);function O(){const fe=r(u)-r(v),ke=r(d)+r(f),me=[];for(let ge=0;ge<=r(P).length;ge++){const ye=r(P).v[ge],ue=r(N).v[ge];ye>=r(d)&&ye<=ke&&ue>=fe&&ue<=r(u)&&me.push(ge)}me.length>0&&e.callbacks.select(me),B(s,null),B(o,null),B(a,null),B(c,null)}function K(fe,ke){e.callbacks.unselect(),B(l,!0),B(s,fe,!0),B(o,ke,!0),B(a,fe,!0),B(c,ke,!0)}function te(fe,ke){B(l,!1),B(t,!0),O()}function $(fe,ke){r(l)&&(B(a,fe,!0),B(c,ke,!0))}function ee(){if(r(t)){B(t,!1);return}B(l,!1),B(s,null),B(o,null),B(a,null),B(c,null),e.callbacks.unselect()}var re=oe(),de=J(re);{var pe=fe=>{var ke=kv(),me=D(ke);nr(me,{get xLabel(){return r(E)},get yLabel(){return r(I)},get limX(){return r(j)},get limY(){return r(R)},get title(){return r(W)},onmousedown:K,onmouseup:te,onmousemove:$,onclick:ee,fileName:"plot-varimp",children:(ge,ye)=>{var ue=xv(),ve=J(ue);Qt(ve,{get xValues(){return r(P)},get yValues(){return r(N)},get markerSize(){return r(M)},plotType:"p",get showLabels(){return e.params.showLabels},get labels(){return r(k)},shortenLabels:!1});var ae=F(ve,2);{var Ae=Be=>{const yt=g(()=>[r(d)]),Xe=g(()=>[r(u)]),st=g(()=>[r(f)]),Ze=g(()=>[r(v)]);Fn(Be,{get left(){return r(yt)},get top(){return r(Xe)},get width(){return r(st)},get height(){return r(Ze)},faceColor:"#ff000040"})};U(ae,Be=>{r(d)&&r(u)&&r(l)&&Be(Ae)})}var _e=F(ae,2);{var Se=Be=>{Qt(Be,{get xValues(){return r(Y)},get yValues(){return r(V)},get markerSize(){return r(M)},mainColor:"red",plotType:"p",shortenLabels:!1})};U(_e,Be=>{r(Y)&&r(V)&&Be(Se)})}S(ge,ue)},$$slots:{default:!0}}),S(fe,ke)};U(de,fe=>{r(P)&&r(N)&&fe(pe)})}S(n,re),ce()}var Sv=G("<!> <!> <!> <!> <!>",1);function Cv(n,e){ie(e,!0);let t=g(()=>e.props?e.props.scalars:null);const l=[-99999,-2,-1,0,.2,.5,.8,1.2,1.5,1.8,2,2.5,3,99999],s=["#6200DF","#6923FF","#648FFF","#8CCDFD","#D2ECFF","#E8F5FF","#fefeff","#FFF5E5","#FFE5BE","#FFCE85","#FFA34E","#FF8024","#CF5903"],o=l.map(p=>p.toFixed(1));o[0]="&minus;&infin;",o[o.length-1]="&infin;";const a=g(()=>r(t)?r(t).nrows/8:1),c=g(()=>r(t)?[.45,r(t).ncols+.6]:[0,1]),d=g(()=>r(t)?[.45,r(t).nrows+Math.max(.9,r(a))]:[0,1]),u="PV-scalars",f="Segments, k",v="Components, A";var h=oe(),m=J(h);{var b=p=>{ca(p,{get limX(){return r(c)},get limY(){return r(d)},title:u,fileName:"plot-pvscalars",children:(w,_)=>{var A=Sv(),y=J(A);wf(y,{get values(){return r(t)},get breaks(){return l},get colmap(){return s}});var k=F(y,2);_f(k,{get breaks(){return l},get colmap(){return s},get labels(){return o}});var C=F(k,2);ua(C,{label:v,whole:!0});var T=F(C,2);da(T,{label:f,whole:!0});var L=F(T,2);fa(L,{}),S(w,A)},$$slots:{default:!0}})};U(m,p=>{r(t)&&p(b)})}S(n,h),ce()}function Sa(n){const e=Object.keys(n),t=e.length>1?[...e,"both"]:e,l=e.length>1?"both":e[0];return{resID:{el:Qe,hidden:e.length==1,default:l,label:"Show",props:{options:t}},varSet:{el:Qe,hidden:!1,default:"X",label:"Variance for",props:{options:["X","Y"]}},varType:{el:Qe,hidden:!1,default:"explained",label:"Type",props:{options:["explained","residual"]}},varForm:{el:Qe,hidden:!1,default:"cumulative",label:"Form",props:{options:["individual","cumulative"]}},showLabels:{el:Kt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Ca(n,e){const t=Object.keys(n),l=t.length>1?[...t,"both"]:t,s=["rmse","r2","slope"],o=t.length>1?"both":t[0];return{resID:{el:Qe,hidden:t.length==1,default:o,label:"Show",props:{options:l}},fom:{el:Qe,hidden:!1,default:"rmse",label:"FoM",props:{options:s}},resp:{el:ur,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showLabels:{el:Kt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function ts(n,e){const t=Object.keys(n),l=t.length>1?[...t,"both"]:t,s=n[t[0]],o=t.length>1?"both":t[0];return{resID:{el:Qe,hidden:t.length==1,default:o,label:"Show",props:{options:l}},resp:{el:ur,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},showStat:{el:Kt,hidden:s.Yref===null,default:!1,label:"FoM",props:{options:["hide","show"]}},showLabels:{el:Qe,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","labels","values"]}}}}function Aa(n,e){const t=Object.keys(n);return{resID:{el:Qe,hidden:t.length==1,default:t[0],label:"Show",props:{options:t}},resp:{el:ur,hidden:e<2,default:1,label:"Response",props:{min:1,max:e}},plotType:{el:Vl,hidden:!1,default:"p",label:"Plot type",props:{options:["p","qq","h"]}},showLabels:{el:Qe,hidden:!1,default:"hide",label:"Labels",props:{options:["hide","show"]}}}}function rs(n){const e=Object.keys(n),t=e.length>1?[...e,"both"]:e,l=n[e[0]],s=l.Yref?["X","Y","XY"]:["X"],o=e.length>1?"both":e[0];return{resID:{el:Qe,hidden:e.length===1,default:o,label:"Show",props:{options:t}},varSet:{el:Qe,hidden:l.Yref===null,default:"X",label:"Scores for",props:{options:s}},comp2:{el:ur,hidden:!1,default:l.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:l.ncomp}},comp1:{el:ur,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:l.ncomp}},showLabels:{el:Kt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Av(n,e){return{statType:{el:Qe,hidden:!1,default:"xloadings",label:"Show",props:{options:["xloadings","weights"]}},plotType:{el:Vl,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:ur,hidden:!1,default:n.ncomp>1?2:1,label:"LV (y-axis)",props:{min:1,max:n.ncomp}},comp1:{el:ur,hidden:!1,default:1,label:"LV (x-axis)",props:{min:1,max:n.ncomp}},showLabels:{el:Kt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function ns(n){const e=Object.keys(n),t=e.length>1?[...e,"both"]:e,l=n[e[0]],s=e.length>1?"both":e[0],o=l.Yref?["h/q","f/z"]:["h/q"];return{resID:{el:Qe,hidden:e.length==1,default:s,label:"Show",props:{options:t}},distType:{el:Qe,hidden:l.Yref===null,default:"h/q",label:"Show",props:{options:o}},transType:{el:Qe,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},limType:{el:Qe,hidden:!1,default:"classic",label:"Limits",props:{options:["classic","robust"]}},showLabels:{el:Kt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Lv(n){return{plotType:{el:Vl,hidden:!1,default:"l",label:"Plot type",props:{options:["l","h"]}},resp:{el:ur,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:Kt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function Tv(n){return{yset:{el:Qe,hidden:!1,default:"vip",label:"Y-axis",props:{options:["vip","selratio"]}},xset:{el:Qe,hidden:!1,default:"values",label:"X-axis",props:{options:["values","indices","vip"]}},resp:{el:ur,hidden:n<2,default:1,label:"Response",props:{min:1,max:n}},showLabels:{el:Kt,hidden:!1,default:!1,label:"Labels",props:{options:["hide","show"]}}}}function zv(){return{}}var Nv=G("<!> <!>",1),Pv=G("<p>can not exclude</p>");function Rv(n,e){ie(e,!0);const t=(v,h=gt)=>{we(v,{label:"Selected",children:(m,b)=>{var p=Nv(),w=J(p);dt(w,{onclick:()=>e.showContributions(h()),text:"plot"});var _=F(w,2);{var A=y=>{dt(y,{onclick:()=>e.markOutlier(h()),text:"remove"})};U(_,y=>{h()>=0&&y(A)})}S(m,p)},$$slots:{default:!0}})},l=(v,h=gt)=>{we(v,{label:"Selected",children:(m,b)=>{var p=oe(),w=J(p);{var _=y=>{dt(y,{onclick:()=>e.excludeVars(h()),get text(){return`exclude ${h().length??""} variables`}})},A=y=>{var k=Pv();S(y,k)};U(w,y=>{e.res.cal.npred-h().length>=2?y(_):y(A,!1)})}S(m,p)},$$slots:{default:!0}})},s=Object.keys(e.res),o=e.res[s[0]].nresp,a=g(()=>({pred:{label:"Predictions",scope:"objects",component:Zl,buttons:t},scores:{label:"Scores",scope:"objects",component:$l,buttons:t},distance:{label:"Distances",scope:"objects",component:es,buttons:t},yresiduals:{label:"Residuals",scope:"stats",component:Ea},loadings:{label:"X-loadings and weights",scope:"stats",component:pv},regcoeffs:{label:"Regression coefficients",scope:"stats",component:yv},varsel:{label:"Variable importance",scope:"variables",component:Ev,buttons:l},fom:{label:"Figures of merit",scope:"stats",component:ka},variance:{label:"Variance",scope:"stats",component:xa},scalars:{label:"PV scalars",scope:"stats",component:Cv}})),c=Je({pred:ts(e.res,o),scores:rs(e.res),distance:ns(e.res),yresiduals:Aa(e.res,o),loadings:Av(e.model,e.ncomp),regcoeffs:Lv(o),varsel:Tv(o),fom:Ca(e.res,o),variance:Sa(e.res),scalars:zv(e.res)});let d=ne(Je({pred:ft(c.pred),scores:ft(c.scores),distance:ft(c.distance),yresiduals:ft(c.yresiduals),loadings:ft(c.loadings),regcoeffs:ft(c.regcoeffs),varsel:ft(c.varsel),fom:ft(c.fom),variance:ft(c.variance),scalars:ft(c.scalars)}));Te(()=>{r(d).scores.varSet==="XY"?(c.scores.comp1.hidden=!0,c.scores.comp2.label="LV"):(c.scores.comp2.label="LV (y-axis)",c.scores.comp1.hidden=!1)}),Te(()=>{r(d).loadings.plotType!=="p"?c.loadings.comp1.hidden=!0:c.loadings.comp1.hidden=!1}),Te(()=>{r(d).pred.resID==="both"?c.pred.showStat.hidden=!0:c.pred.showStat.hidden=!1}),Te(()=>{r(d).yresiduals.plotType==="h"?c.yresiduals.showLabels.hidden=!0:c.yresiduals.showLabels.hidden=!1});const u=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),f={markOutlier:e.markOutlier};Ql(n,{get plots(){return r(a)},get props(){return r(u)},get controls(){return c},get callbacks(){return f},get params(){return r(d)},set params(v){B(d,v,!0)}}),ce()}var Mv=G('<div class="outliers-pane svelte-b7gdku"><!></div>'),qv=G('<div class="exclvars-pane svelte-b7gdku"><!></div>'),Iv=G('<div class="model-calculator svelte-b7gdku"><!></div>'),jv=G('<div class="pcv-calculator svelte-b7gdku"><!></div>'),Fv=G('<div class="buttons"><!> <!> <!></div>'),Vv=G('<div class="ncomp-selector svelte-b7gdku"><!> <!></div> <div class="result-stats svelte-b7gdku"><!></div>',1),Ov=G(`<p class="svelte-b7gdku">In this tab you can train a PLS regression model and optimize it using Procrustes cross-validation.
               After that you can save the model to a file, apply it to a test set (tab <strong>Test</strong>)
               or to a new set of samples whose response us unknown (tab <strong>Predict</strong>).</p> <p class="svelte-b7gdku"><strong>Step 1.</strong></p> <p class="svelte-b7gdku">Load your training/calibration set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows
               correspond to observations or objects, columns — to variables (both response and predictors).</p> <p class="svelte-b7gdku">First row in the CSV file can contain variable labels or values (<strong>header</strong>). It is assumed
               that variable lables are text (or have text parts), e.g. <em>"Na"</em>, <em>"OD260"</em>, etc. If x-variables
               are signals, e.g. spectra, this part of header can content numeric values, e.g. wavelength or wavenumbers.
               If this is the case, select <em>values</em> option for the header. This will let you to specify
               name of the values (e.g. <em>Wavelength</em>) and the units (e.g. <em>nm</em>) if necessary.</p> <p class="svelte-b7gdku">First column in the file can contain labels for the objects/observations (<strong>row labels</strong>) — if so, just set
               the corresponding options after selecting the file.</p> <p class="svelte-b7gdku">The response variable (<em>Y</em>) should be located right after the column with object/row labels. If there are no
               object labels, the response variable is expected to be in the first column. <strong>Response variable is mandatory
               in the training set and in this version of app only single response is supported (PLS1).</strong></p> <p class="svelte-b7gdku">Here is an example how data structure may look like (note, that row labels and header are optional):</p> <div class="svelte-b7gdku"><table class="svelte-b7gdku"><thead class="svelte-b7gdku"><tr class="svelte-b7gdku"><td class="svelte-b7gdku">Name</td><td class="svelte-b7gdku">y</td><td class="svelte-b7gdku">x1</td><td class="svelte-b7gdku">x2</td><td class="svelte-b7gdku">x3</td></tr></thead><tbody class="svelte-b7gdku"><tr><td class="svelte-b7gdku">O1</td><td class="svelte-b7gdku">96.1</td><td class="svelte-b7gdku">3.8</td><td class="svelte-b7gdku">1.3</td><td class="svelte-b7gdku">13.6</td></tr><tr><td class="svelte-b7gdku">O2</td><td class="svelte-b7gdku">88.9</td><td class="svelte-b7gdku">11.1</td><td class="svelte-b7gdku">12.3</td><td class="svelte-b7gdku">3.3</td></tr><tr><td class="svelte-b7gdku">O3</td><td class="svelte-b7gdku">56.1</td><td class="svelte-b7gdku">1.2</td><td class="svelte-b7gdku">2.3</td><td class="svelte-b7gdku">4.2</td></tr></tbody></table></div> <p class="svelte-b7gdku"></p>`,1),Bv=G(`<p class="svelte-b7gdku"><strong>Step 2</strong></p> <p class="svelte-b7gdku">Next step is to create a global PLS model for the training set. Use more components/latent variables (LVs) than
               you expect to be optimal. You will have possibility to select the optimal number of components later.</p>`,1),Dv=G(`<p class="svelte-b7gdku"><strong>Step 3</strong></p> <p class="svelte-b7gdku">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set,
               which will help you to optimize PLS model parameters. The parameters are the same as for conventional
               cross-validation: type of splits and number of segments. It is recommended to use fewer number of
               segments (e.g. 3, 4 or 5).</p> <p class="svelte-b7gdku">After this step PLS model will be created automatically and you will be able to explore it and tune
               its parameters.</p>`,1),Yv=G("<!> <!>",1),Wv=G('<div class="help-text svelte-b7gdku"><!></div>'),Hv=G('<div class="app-container svelte-b7gdku"><!> <div class="app-controls svelte-b7gdku"><div class="data-loader svelte-b7gdku"><!></div> <!> <!> <!> <!> <!></div> <div class="app-content svelte-b7gdku"><!></div></div>');function Uv(n,e){ie(e,!0);const t=g(()=>e.session.train);let l=ne(-1),s=ne(!1);function o(M){if(M.length<1)return;const Y=M.map(V=>r(t).model.varindices[V+r(t).model.nresp]);if(Y.length>0){const V=new Set(r(t).exclvars),O=[...new Set(Y)].filter(K=>!V.has(K));r(t).exclvars=r(t).exclvars.concat(O),r(t).model=null,r(t).pvres=null,r(t).calres=null,r(t).pvset=null,r(t).ncomp_selected=1}}function a(){r(t).exclvars=[],r(t).model=null,r(t).pvres=null,r(t).calres=null,r(t).pvset=null,r(t).ncomp_selected=1}function c(M){if(M<0||M>r(t).calres.nrows-1)return;const Y=r(t).calres.objindices[M];Y>=0&&!r(t).outliers.includes(Y)&&(r(t).outliers.push(Y),r(t).model=null,r(t).pvres=null,r(t).calres=null,r(t).pvset=null,r(t).ncomp_selected=1)}function d(){r(t).outliers=[],r(t).model=null,r(t).pvres=null,r(t).calres=null,r(t).pvset=null,r(t).ncomp_selected=1}function u(){r(t).outliers.pop(),r(t).model=null,r(t).pvres=null,r(t).calres=null,r(t).pvset=null,r(t).ncomp_selected=1}function f(M){M<0||(B(l,M,!0),B(s,!0))}function v(){B(s,!1),B(l,-1)}Te(()=>{r(t).calset===null&&(r(t).model=null,r(t).outliers=[],r(t).exclvars=[],r(t).ncomp_selected=1),r(t).model===null&&(r(t).calres=null,r(t).pvres=null,r(t).pvset=null)}),Te(()=>{if(r(t).pvres&&r(t).pvres.stat){const M=r(t).pvres.stat.rmse.getcolref(1),V=M.map((O,K)=>K>0?1-O*O/M[K-1]**2:1).findIndex(O=>O<=.0975);r(t).ncomp_selected=V<0?r(t).model.ncomp:V}}),Te(()=>{const M=Ut(()=>JSON.stringify(e.session,fn));e.backupSession(M,r(t).model,r(t).calset,r(t).pvres)});var h=Hv(),m=D(h);{var b=M=>{Jl(M,{get getter(){return St},get dataset(){return r(t).calset},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected},get selected(){return r(l)},closeModal:v})};U(m,M=>{r(s)&&M(b)})}var p=F(m,2),w=D(p),_=D(w);Ol(_,{respMandatory:!0,get dataset(){return r(t).calset},set dataset(M){r(t).calset=M}});var A=F(w,2);{var y=M=>{var Y=Mv(),V=D(Y);Bl(V,{get outliers(){return r(t).outliers},get dataset(){return r(t).calset},resetOutliers:d,undoOutliers:u}),S(M,Y)};U(A,M=>{r(t).outliers&&r(t).outliers.length>0&&M(y)})}var k=F(A,2);{var C=M=>{var Y=qv(),V=D(Y);Yu(V,{get exclvars(){return r(t).exclvars},get dataset(){return r(t).calset},resetExclvars:a}),S(M,Y)};U(k,M=>{r(t).exclvars&&r(t).exclvars.length>0&&M(C)})}var T=F(k,2);{var L=M=>{var Y=Iv(),V=D(Y);_u(V,{get WASM(){return e.WASM},get dataset(){return r(t).calset},get outliers(){return r(t).outliers},get exclvars(){return r(t).exclvars},get model(){return r(t).model},set model(O){r(t).model=O},get resobj(){return r(t).calres},set resobj(O){r(t).calres=O}}),S(M,Y)};U(T,M=>{r(t).calset&&M(L)})}var z=F(T,2);{var P=M=>{var Y=jv(),V=D(Y);Au(V,{get WASM(){return e.WASM},get calset(){return r(t).calset},get outliers(){return r(t).outliers},get model(){return r(t).model},get calres(){return r(t).calres},get pvset(){return r(t).pvset},set pvset(O){r(t).pvset=O},get pvres(){return r(t).pvres},set pvres(O){r(t).pvres=O},get pvscalars(){return r(t).pvscalars},set pvscalars(O){r(t).pvscalars=O}}),S(M,Y)};U(z,M=>{r(t).model&&M(P)})}var N=F(z,2);{var E=M=>{var Y=Vv(),V=J(Y),O=D(V);we(O,{name:"ncomp",label:"# of LVs",children:(re,de)=>{jl(re,{min:1,get max(){return r(t).model.ncomp},step:1,decNum:0,get value(){return r(t).ncomp_selected},set value(pe){r(t).ncomp_selected=pe}})},$$slots:{default:!0}});var K=F(O,2);we(K,{label:"Download",children:(re,de)=>{var pe=Fv(),fe=D(pe);dt(fe,{onclick:()=>Dn(r(t).calres,r(t).calset,"train",r(t).ncomp_selected),text:"Res (cal)"});var ke=F(fe,2);dt(ke,{onclick:()=>Dn(r(t).pvres,r(t).pvset,"PV",r(t).ncomp_selected),text:"Res (pv)"});var me=F(ke,2);dt(me,{onclick:()=>_a(r(t).model,r(t).ncomp_selected),text:"Model"}),S(re,pe)},$$slots:{default:!0}});var te=F(V,2),$=D(te);const ee=g(()=>({cal:r(t).calres,pv:r(t).pvres}));wa($,{get res(){return r(ee)},get ncomp(){return r(t).ncomp_selected}}),S(M,Y)};U(N,M=>{r(t).calres&&r(t).pvres&&M(E)})}var I=F(p,2),W=D(I);{var j=M=>{var Y=Wv(),V=D(Y);{var O=te=>{var $=Ov();S(te,$)},K=te=>{var $=Yv(),ee=J($);{var re=fe=>{var ke=Bv();S(fe,ke)};U(ee,fe=>{r(t).model||fe(re)})}var de=F(ee,2);{var pe=fe=>{var ke=Dv();S(fe,ke)};U(de,fe=>{r(t).model&&!r(t).pvset&&fe(pe)})}S(te,$)};U(V,te=>{r(t).calset?te(K,!1):te(O)})}S(M,Y)},R=M=>{var Y=oe(),V=J(Y);cn(V,()=>r(t).pvres&&r(t).model,O=>{var K=oe(),te=J(K);{var $=ee=>{const re=g(()=>({cal:r(t).calset,pv:r(t).pvset})),de=g(()=>({cal:r(t).calres,pv:r(t).pvres}));Rv(ee,{markOutlier:c,showContributions:f,excludeVars:o,get data(){return r(re)},get res(){return r(de)},get scalars(){return r(t).pvscalars},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected}})};U(te,ee=>{r(t).pvres&&r(t).model&&ee($)})}S(O,K)}),S(M,Y)};U(W,M=>{!r(t).calres||!r(t).pvres||!r(t).model?M(j):M(R,!1)})}S(n,h),ce()}var Xv=G("<!> <!>",1),Gv=G('<br/><span style="color:#a0a0a0;">Excluded</span> <span style="color:#a0a0a0;">variables.</span>',1),Kv=G('<p class="info-text svelte-3v2vv7"><span>Model file:</span> <span class="file-name svelte-3v2vv7"> </span><br/> <span style="color:#a0a0a0;">Model info:</span> <!></p> <!>',1),Jv=G("<p><!></p>"),Qv=G("<!> <!>",1);function La(n,e){ie(e,!0);let t=H(e,"model",15),l=ne(""),s=ne("neutral"),o=ne("");function a(w){try{const _=JSON.parse(w,Mo);if(Array.isArray(_.v)&&(_.v=Float64Array.from(_.v)),_.class[0]!=="plsmodel")throw Error("The JSON file you selected does not contain PLS model.");_.fileName=r(u),t(_),B(s,"success"),B(o,"")}catch(_){console.log(_),t(null),B(s,"error"),B(o,_,!0)}}function c(w){const _=new FileReader;_.onload=()=>{a(_.result)},_.readAsText(r(l))}function d(){B(l,""),t(null),B(s,"neutral"),B(o,"")}Te(()=>{r(l)===null?(t(null),B(s,"neutral"),B(o,"")):(B(s,"neutral"),B(o,""))});let u=g(()=>r(l)?r(l).name.replace(/\.[^/.]+$/,""):"");var f=Qv(),v=J(f);{var h=w=>{var _=Xv(),A=J(_);cn(A,()=>r(l),C=>{we(C,{name:"file-selector",children:(T,L)=>{Yo(T,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return r(l)},set file(z){B(l,z,!0)}})},$$slots:{default:!0}})});var y=F(A,2);{var k=C=>{we(C,{name:"load-button",label:" ",children:(T,L)=>{dt(T,{onclick:c,text:"Load"})},$$slots:{default:!0}})};U(y,C=>{r(l)&&C(k)})}S(w,_)},m=w=>{we(w,{name:"info",class:"info",children:(_,A)=>{var y=Kv(),k=J(y),C=F(D(k),2),T=D(C),L=F(C,4),z=F(L);{var P=E=>{var I=Gv(),W=F(J(I),2);Z(()=>be(W,` ${t().exclvars.length??""} `)),S(E,I)};U(z,E=>{t().exclvars.length>0&&E(P)})}var N=F(k,2);Pr(N,{onclick:d}),Z(()=>{q(C,"title",t().fileName),be(T,t().fileName),be(L,` ${t().ncomp??""} PCs${t().center?", centered":""}${t().scale?", scaled":""} `)}),S(_,y)},$$slots:{default:!0}})};U(v,w=>{t()?w(m,!1):w(h)})}var b=F(v,2);{var p=w=>{we(w,{name:"error",status:"error",children:(_,A)=>{var y=Jv(),k=D(y);Et(k,()=>r(o)),S(_,y)},$$slots:{default:!0}})};U(b,w=>{(r(s)==="error"||r(o))&&w(p)})}S(n,f),ce()}var Zv=G("<!> <!>",1);function $v(n,e){ie(e,!0);const t=(f,v=gt)=>{we(f,{label:"Selected",children:(h,m)=>{var b=Zv(),p=J(b);dt(p,{onclick:()=>e.showContributions(v()),text:"plot"});var w=F(p,2);dt(w,{onclick:()=>e.markOutlier(v()),text:"remove"}),S(h,b)},$$slots:{default:!0}})},l=Object.keys(e.res),s=e.res[l[0]].nresp,o=g(()=>({pred:{label:"Predictions",scope:"objects",component:Zl,buttons:t},scores:{label:"Scores",scope:"objects",component:$l,buttons:t},distance:{label:"Distances",scope:"objects",component:es,buttons:t},yresiduals:{label:"Residuals",scope:"stats",component:Ea},fom:{label:"Figures of merit",scope:"stats",component:ka},variance:{label:"Variance",scope:"stats",component:xa}})),a=Je({pred:ts(e.res,s),scores:rs(e.res),distance:ns(e.res),yresiduals:Aa(e.res,s),fom:Ca(e.res,s),variance:Sa(e.res)});let c=ne(Je({pred:ft(a.pred),scores:ft(a.scores),distance:ft(a.distance),yresiduals:ft(a.yresiduals),fom:ft(a.fom),variance:ft(a.variance)}));Te(()=>{r(c).scores.varSet==="XY"?(a.scores.comp1.hidden=!0,a.scores.comp2.label="LV"):(a.scores.comp2.label="LV (y-axis)",a.scores.comp1.hidden=!1)}),Te(()=>{r(c).pred.resID==="both"?a.pred.showStat.hidden=!0:a.pred.showStat.hidden=!1}),Te(()=>{r(c).yresiduals.plotType==="h"?a.yresiduals.showLabels.hidden=!0:a.yresiduals.showLabels.hidden=!1});const d=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),u={markOutlier:e.markOutlier};Ql(n,{get plots(){return r(o)},get controls(){return a},get props(){return r(d)},get callbacks(){return u},get params(){return r(c)},set params(f){B(c,f,!0)}}),ce()}var eh=G('<div class="outliers-pane svelte-b7gdku"><!></div>'),th=G('<div class="buttons"><!> <!></div>'),rh=G('<div class="ncomp-selector svelte-b7gdku"><!> <!></div> <div class="result-stats svelte-b7gdku"><!></div>',1),nh=G('<div class="data-loader svelte-b7gdku"><!></div> <!> <!>',1),lh=G(`<p class="svelte-b7gdku">In this tab you can test a PLS regression model developed in <strong>Train</strong> tab by
               applying it to a test set, which contains both predictors and responses.</p> <p class="svelte-b7gdku"><strong>Step 1.</strong></p> <p class="svelte-b7gdku">Load the previously developed PLS model from a JSON file.</p>`,1),sh=G(`<p class="svelte-b7gdku"><strong>Step 2.</strong></p> <p class="svelte-b7gdku">Load your test set from a CSV file. The file structure should be the same as the training/calibration set.
               The response variable is mandatory. Here is an example how data structure may look like (note, that row labels
               and header are optional):</p> <div class="svelte-b7gdku"><table class="svelte-b7gdku"><thead class="svelte-b7gdku"><tr class="svelte-b7gdku"><td class="svelte-b7gdku">Name</td><td class="svelte-b7gdku">y</td><td class="svelte-b7gdku">x1</td><td class="svelte-b7gdku">x2</td><td class="svelte-b7gdku">x3</td></tr></thead><tbody class="svelte-b7gdku"><tr><td class="svelte-b7gdku">O1</td><td class="svelte-b7gdku">96.1</td><td class="svelte-b7gdku">3.8</td><td class="svelte-b7gdku">1.3</td><td class="svelte-b7gdku">13.6</td></tr><tr><td class="svelte-b7gdku">O2</td><td class="svelte-b7gdku">88.9</td><td class="svelte-b7gdku">11.1</td><td class="svelte-b7gdku">12.3</td><td class="svelte-b7gdku">3.3</td></tr><tr><td class="svelte-b7gdku">O3</td><td class="svelte-b7gdku">56.1</td><td class="svelte-b7gdku">1.2</td><td class="svelte-b7gdku">2.3</td><td class="svelte-b7gdku">4.2</td></tr></tbody></table></div> <p class="svelte-b7gdku"></p>`,1),oh=G('<div class="help-text svelte-b7gdku"><!></div>'),ah=G('<div class="app-container svelte-b7gdku"><!> <div class="app-controls svelte-b7gdku"><div class="model-loader svelte-b7gdku"><!></div> <!></div> <div class="app-content svelte-b7gdku"><!></div></div>');function ih(n,e){ie(e,!0);const t=g(()=>e.session.test);let l=ne(-1),s=ne(!1);function o(T){if(T<0||T>r(t).testres.nrows-1)return;const L=r(t).testres.objindices[T];L>=0&&!r(t).outliers.includes(L)&&(r(t).outliers.push(L),r(t).testres=null)}function a(){r(t).outliers=[],r(t).testres=null}function c(){r(t).outliers.pop(),r(t).testres=null}function d(T){T<0||(B(l,T,!0),B(s,!0))}function u(){B(s,!1),B(l,-1)}Te(()=>{r(t).testset===null&&(r(t).outliers=[],r(t).testres=null),r(t).model===null&&(r(t).testres=null,r(t).testset=null)}),Te(()=>{r(t).model&&(r(t).ncomp_selected=r(t).model.ncomp_selected)}),Te(()=>{const T=Ut(()=>JSON.stringify(e.session,fn));e.backupSession(T,r(t).model,r(t).testres)});var f=ah(),v=D(f);{var h=T=>{Jl(T,{get getter(){return St},get dataset(){return r(t).testset},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected},get selected(){return r(l)},closeModal:u})};U(v,T=>{r(s)&&T(h)})}var m=F(v,2),b=D(m),p=D(b);La(p,{get model(){return r(t).model},set model(T){r(t).model=T}});var w=F(b,2);{var _=T=>{var L=nh(),z=J(L),P=D(z);Ol(P,{get WASM(){return e.WASM},get outliers(){return r(t).outliers},get model(){return r(t).model},respMandatory:!0,get dataset(){return r(t).testset},set dataset(j){r(t).testset=j},get resobj(){return r(t).testres},set resobj(j){r(t).testres=j}});var N=F(z,2);{var E=j=>{var R=eh(),M=D(R);Bl(M,{get outliers(){return r(t).outliers},get dataset(){return r(t).testset},resetOutliers:a,undoOutliers:c}),S(j,R)};U(N,j=>{r(t).outliers&&r(t).outliers.length>0&&j(E)})}var I=F(N,2);{var W=j=>{var R=rh(),M=J(R),Y=D(M);we(Y,{name:"ncomp",label:"# of LVs",children:($,ee)=>{jl($,{min:1,get max(){return r(t).model.ncomp},step:1,decNum:0,get value(){return r(t).ncomp_selected},set value(re){r(t).ncomp_selected=re}})},$$slots:{default:!0}});var V=F(Y,2);we(V,{label:"Download",children:($,ee)=>{var re=th(),de=D(re);dt(de,{onclick:()=>Dn(r(t).testres,r(t).testset,"test",r(t).ncomp_selected),text:"Res (test)"});var pe=F(de,2);dt(pe,{onclick:()=>_a(r(t).model,r(t).ncomp_selected),text:"Model"}),S($,re)},$$slots:{default:!0}});var O=F(M,2),K=D(O);const te=g(()=>({test:r(t).testres}));wa(K,{get res(){return r(te)},get ncomp(){return r(t).ncomp_selected}}),S(j,R)};U(I,j=>{r(t).testres&&j(W)})}S(T,L)};U(w,T=>{r(t).model&&T(_)})}var A=F(m,2),y=D(A);{var k=T=>{var L=oh(),z=D(L);{var P=E=>{var I=lh();S(E,I)},N=(E,I)=>{{var W=j=>{var R=sh();S(j,R)};U(E,j=>{r(t).testset||j(W)},I)}};U(z,E=>{r(t).model?E(N,!1):E(P)})}S(T,L)},C=T=>{var L=oe(),z=J(L);cn(z,()=>r(t).testres&&r(t).model,P=>{var N=oe(),E=J(N);{var I=W=>{const j=g(()=>({test:r(t).testset})),R=g(()=>({test:r(t).testres}));$v(W,{markOutlier:o,showContributions:d,get data(){return r(j)},get res(){return r(R)},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected}})};U(E,W=>{r(t).testres&&r(t).model&&W(I)})}S(P,N)}),S(T,L)};U(y,T=>{r(t).testres?T(C,!1):T(k)})}S(n,f),ce()}var ch=G("<!> <!>",1);function uh(n,e){ie(e,!0);const t=(f,v=gt)=>{we(f,{label:"Selected",children:(h,m)=>{var b=ch(),p=J(b);dt(p,{onclick:()=>e.showContributions(v()),text:"plot"});var w=F(p,2);dt(w,{onclick:()=>e.markOutlier(v()),text:"remove"}),S(h,b)},$$slots:{default:!0}})},l=Object.keys(e.res),s=e.res[l[0]].nresp,o=g(()=>({pred:{label:"Predictions",scope:"objects",component:Zl,buttons:t},scores:{label:"Scores",scope:"objects",component:$l,buttons:t},distance:{label:"Distance",scope:"objects",component:es,buttons:t}})),a=Je({pred:ts(e.res,s),scores:rs(e.res),distance:ns(e.res)});let c=ne(Je({pred:ft(a.pred),scores:ft(a.scores),distance:ft(a.distance)}));const d=g(()=>({res:e.res,model:e.model,data:e.data,ncomp:e.ncomp,scalars:e.scalars})),u={markOutlier:e.markOutlier};Ql(n,{get plots(){return r(o)},get controls(){return a},get props(){return r(d)},get callbacks(){return u},get params(){return r(c)},set params(f){B(c,f,!0)}}),ce()}var dh=G('<div class="data-loader svelte-1qb9qou"><!></div>'),fh=G('<div class="outliers-pane svelte-1qb9qou"><!></div>'),vh=G('<div class="buttons"><!></div>'),hh=G('<div class="ncomp-selector svelte-1qb9qou"><!></div>'),mh=G(`<p class="svelte-1qb9qou">In this tab you can apply a PLS regression model developed in <strong>Train</strong> tab to
               new set of measurements without known response variable.</p> <p class="svelte-1qb9qou"><strong>Step 1.</strong></p> <p class="svelte-1qb9qou">Load the previously developed PLS model from a JSON file.</p>`,1),gh=G(`<p class="svelte-1qb9qou"><strong>Step 2.</strong></p> <p class="svelte-1qb9qou">Load your test set from a CSV file. The file structure should be the same as the training/calibration set but <strong>should not contain the response variable</strong>. Here is an example how data structure may look like
               (note, that row labels and header are optional):</p> <div class="svelte-1qb9qou"><table class="svelte-1qb9qou"><thead class="svelte-1qb9qou"><tr class="svelte-1qb9qou"><td class="svelte-1qb9qou">Name</td><td class="svelte-1qb9qou">x1</td><td class="svelte-1qb9qou">x2</td><td class="svelte-1qb9qou">x3</td></tr></thead><tbody class="svelte-1qb9qou"><tr><td class="svelte-1qb9qou">O1</td><td class="svelte-1qb9qou">3.8</td><td class="svelte-1qb9qou">1.3</td><td class="svelte-1qb9qou">13.6</td></tr><tr><td class="svelte-1qb9qou">O2</td><td class="svelte-1qb9qou">11.1</td><td class="svelte-1qb9qou">12.3</td><td class="svelte-1qb9qou">3.3</td></tr><tr><td class="svelte-1qb9qou">O3</td><td class="svelte-1qb9qou">1.2</td><td class="svelte-1qb9qou">2.3</td><td class="svelte-1qb9qou">4.2</td></tr></tbody></table></div> <p class="svelte-1qb9qou"></p>`,1),bh=G('<div class="help-text svelte-1qb9qou"><!></div>'),ph=G('<div class="app-container svelte-1qb9qou"><!> <div class="app-controls svelte-1qb9qou"><div class="model-loader svelte-1qb9qou"><!></div> <!> <!> <!></div> <div class="app-content svelte-1qb9qou"><!></div></div>');function wh(n,e){ie(e,!0);const t=g(()=>e.session.new);let l=ne(-1),s=ne(!1);function o(N){if(N<0||N>r(t).newres.nrows-1)return;const E=r(t).newres.objindices[N];E>=0&&!r(t).outliers.includes(E)&&(r(t).outliers.push(E),r(t).newres=null)}function a(){r(t).outliers=[],r(t).newres=null}function c(){r(t).outliers.pop(),r(t).newres=null}function d(N){N<0||(B(l,N,!0),B(s,!0))}function u(){B(s,!1),B(l,-1)}Te(()=>{r(t).newset===null&&(r(t).outliers=[],r(t).newres=null),r(t).model===null&&(r(t).newres=null,r(t).newset=null)}),Te(()=>{r(t).model&&(r(t).ncomp_selected=r(t).model.ncomp_selected)}),Te(()=>{const N=Ut(()=>JSON.stringify(e.session,fn));e.backupSession(N,r(t).model,r(t).newres)});var f=ph(),v=D(f);{var h=N=>{Jl(N,{get getter(){return St},get dataset(){return r(t).newset},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected},get selected(){return r(l)},closeModal:u})};U(v,N=>{r(s)&&N(h)})}var m=F(v,2),b=D(m),p=D(b);La(p,{get model(){return r(t).model},set model(N){r(t).model=N}});var w=F(b,2);{var _=N=>{var E=dh(),I=D(E);Ol(I,{get WASM(){return e.WASM},get outliers(){return r(t).outliers},get model(){return r(t).model},respMandatory:!1,get dataset(){return r(t).newset},set dataset(W){r(t).newset=W},get resobj(){return r(t).newres},set resobj(W){r(t).newres=W}}),S(N,E)};U(w,N=>{r(t).model&&N(_)})}var A=F(w,2);{var y=N=>{var E=fh(),I=D(E);Bl(I,{get outliers(){return r(t).outliers},get dataset(){return r(t).newset},resetOutliers:a,undoOutliers:c}),S(N,E)};U(A,N=>{r(t).outliers&&r(t).outliers.length>0&&N(y)})}var k=F(A,2);{var C=N=>{var E=hh(),I=D(E);we(I,{label:"Download",children:(W,j)=>{var R=vh(),M=D(R);dt(M,{onclick:()=>Dn(r(t).newres,r(t).newset,"new"),text:"Res (new)"}),S(W,R)},$$slots:{default:!0}}),S(N,E)};U(k,N=>{r(t).newres&&N(C)})}var T=F(m,2),L=D(T);{var z=N=>{var E=bh(),I=D(E);{var W=R=>{var M=mh();S(R,M)},j=(R,M)=>{{var Y=V=>{var O=gh();S(V,O)};U(R,V=>{r(t).newset||V(Y)},M)}};U(I,R=>{r(t).model?R(j,!1):R(W)})}S(N,E)},P=N=>{var E=oe(),I=J(E);cn(I,()=>r(t).newres&&r(t).model,W=>{var j=oe(),R=J(j);{var M=Y=>{const V=g(()=>({new:r(t).newset})),O=g(()=>({new:r(t).newres}));uh(Y,{markOutlier:o,showContributions:d,get data(){return r(V)},get res(){return r(O)},get model(){return r(t).model},get ncomp(){return r(t).ncomp_selected}})};U(R,Y=>{r(t).newres&&r(t).model&&Y(M)})}S(W,j)}),S(N,E)};U(L,N=>{r(t).newres?N(P,!1):N(z)})}S(n,f),ce()}function Ta(n,e){B(e,!0)}function _h(n,e,t){const l=ql(new Date),s=e.appID+"-session-"+l+".json";r(t).date=l;const o=JSON.stringify(r(t),fn),a=new Blob([o],{type:"text/json"}),c=window.URL.createObjectURL(a),d=document.createElement("a");d.setAttribute("href",c),d.setAttribute("download",s),d.click()}function yh(n,e){confirm("Are you sure? All current results and models will be lost in all tabs.")&&e()}var xh=G('<sup style="color:red">β</sup>'),kh=G('<li><button class="svelte-1cyr8za"> </button></li>'),Eh=G("<div><!></div>"),Sh=G('<div class="info-container svelte-1cyr8za"><!></div>'),Ch=G('<div class="page svelte-1cyr8za"><header class="page-header svelte-1cyr8za"><div class="header-group svelte-1cyr8za"><img class="logo svelte-1cyr8za" src="logo.svg"/> <h1 class="svelte-1cyr8za"> <!></h1> <p class="svelte-1cyr8za"> </p></div> <ul class="nav svelte-1cyr8za"></ul></header> <main class="svelte-1cyr8za"></main> <footer class="svelte-1cyr8za"><div><span class="session-message svelte-1cyr8za"> </span> <label title="load session from file" class="upload-button svelte-1cyr8za"><input type="file" class="svelte-1cyr8za"/> <svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="40" x2="50" y2="25"></line><line x1="70" y1="40" x2="50" y2="25"></line></svg></label> <button title="download session as a file" class="download-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="50" y1="25" x2="50" y2="75"></line><line x1="30" y1="60" x2="50" y2="75"></line><line x1="70" y1="60" x2="50" y2="75"></line></svg></button> <button title="reset all sessions" class="clear-button svelte-1cyr8za"><svg xmlns="http://www.w3.org/2000/svg" version="2.0" width="20px" height="20px" viewBox="0 0 100 100" class="svelte-1cyr8za"><line x1="25" y1="25" x2="75" y2="75"></line><line x1="25" y1="75" x2="75" y2="25"></line></svg></button></div> <div class="info svelte-1cyr8za"><button title="Show information about the app" class="button-info svelte-1cyr8za">info</button> <!></div></footer> <!></div>');function Ah(n,e){ie(e,!0);let t=H(e,"tabs",19,()=>[]),l=H(e,"isBeta",3,!1);const s="mdatools-"+e.appID;let o=ne(!1),a=ne(void 0),c=ne("Current session "),d=ne(!1);function u(k){B(c,k,!0),B(d,!0),setTimeout(()=>{B(c,"Current session "),B(d,!1)},1e3)}function f(){B(o,!1)}function v(k){r(a).tab=k}function h(){const k=indexedDB.open(s,1);k.onsuccess=C=>{const L=C.target.result.transaction(e.appID,"readwrite");L.objectStore(e.appID).delete("session"),L.oncomplete=()=>{B(a,e.initSession(),!0),u("Session was reinitialzed.")},L.onerror=()=>console.error("Failed to session from DB.")}}function m(k,C){window.localStorage.removeItem(e.appID+"-blocked");const T=indexedDB.open(s,1);T.onsuccess=L=>{const N=L.target.result.transaction(e.appID,"readwrite").objectStore(e.appID);N.put(k,"session"),N.put(ql(new Date),"session-update")}}function b(){new Promise((k,C)=>{const T=indexedDB.open(s,1);T.onsuccess=L=>{const E=L.target.result.transaction(e.appID,"readonly").objectStore(e.appID).get("session");E.onsuccess=()=>k(E.result),E.onerror=()=>C(E.error)}}).then(k=>{p(k),B(c,"Last session is restored "),B(d,!0),setTimeout(()=>{B(c,"Current session "),B(d,!1)},1500)}).catch(k=>{console.error(k),B(a,e.initSession(),!0)})}function p(k){if(!k||k==="undefined"){B(a,e.initSession(),!0);return}const C=JSON.parse(k,Mo);B(a,e.checkSession(C)?C:e.initSession(e.appID),!0)}function w(k){e.resetSession(r(a));const C=new FileReader;C.onload=()=>{p(C.result),k.target.value=""},C.readAsText(k.target.files[0])}uc(()=>{const k=e.appID,C=indexedDB.open(s,1);C.onupgradeneeded=T=>{const L=T.target.result;L.objectStoreNames.contains(k)||L.createObjectStore(k)},C.onsuccess=T=>{b()}});var _=oe(),A=J(_);{var y=k=>{var C=Ch(),T=D(C),L=D(T),z=D(L),P=F(z,2),N=D(P),E=F(N);{var I=ye=>{var ue=xh();S(ye,ue)};U(E,ye=>{l()&&ye(I)})}var W=F(P,2),j=D(W),R=F(L,2);ze(R,21,t,Ne,(ye,ue,ve)=>{var ae=kh();let Ae;var _e=D(ae);_e.__click=()=>v(ve),_e.__keydown=()=>v(ve);var Se=D(_e);Z(Be=>{Ae=ut(ae,1,"nav-item svelte-1cyr8za",null,Ae,Be),be(Se,r(ue).name)},[()=>({selected:r(a).tab===ve})]),S(ye,ae)});var M=F(T,2);ze(M,21,t,Ne,(ye,ue,ve)=>{var ae=Eh();let Ae;var _e=D(ae);pl(_e,()=>r(ue).component,(Se,Be)=>{Be(Se,{get WASM(){return e.WASM},get session(){return r(a)},backupSession:m})}),Z(Se=>Ae=ut(ae,1,"tab-content svelte-1cyr8za",null,Ae,Se),[()=>({hidden:r(a).tab!==ve})]),S(ye,ae)});var Y=F(M,2),V=D(Y);let O;var K=D(V),te=D(K),$=F(K,2),ee=D($);ee.__change=w;var re=F($,2);re.__click=[_h,e,a];var de=F(re,2);de.__click=[yh,h];var pe=F(V,2),fe=D(pe);fe.__click=[Ta,o],fe.__keydown=[Ta,o];var ke=F(fe,2);br(ke,()=>e.footer);var me=F(Y,2);{var ge=ye=>{va(ye,{closeModal:f,children:(ue,ve)=>{var ae=Sh(),Ae=D(ae);br(Ae,()=>e.info),S(ue,ae)},$$slots:{default:!0}})};U(me,ye=>{r(o)&&ye(ge)})}Z(ye=>{q(z,"alt",e.appShortTitle),be(N,e.appTitle),be(j,e.appSlogan),O=ut(V,1,"session svelte-1cyr8za",null,O,ye),be(te,r(c))},[()=>({"no-buttons":r(d)})]),S(k,C)};U(A,k=>{r(a)&&k(y)})}S(n,_),ce()}rt(["click","keydown","change"]);const Dh="modulepreload",Yh=function(n){return"/"+n},Wh={},Lh=function(e,t,l){let s=Promise.resolve();function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})};var Th=async function(n={}){var e,t=n,l,s,o=new Promise((X,Q)=>{l=X,s=Q}),a=typeof window=="object",c=typeof WorkerGlobalScope<"u",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(d){const{createRequire:X}=await Lh(()=>Promise.resolve().then(()=>Rh),void 0);var u=X(Ie&&Ie.tagName.toUpperCase()==="SCRIPT"&&Ie.src||new URL("pls.js",document.baseURI).href)}var f=(X,Q)=>{throw Q},v=Ie&&Ie.tagName.toUpperCase()==="SCRIPT"&&Ie.src||new URL("pls.js",document.baseURI).href,h="";function m(X){return t.locateFile?t.locateFile(X,h):h+X}var b,p;if(d){var w=u("fs"),_=u("path");v.startsWith("file:")&&(h=_.dirname(u("url").fileURLToPath(v))+"/"),p=X=>{X=E(X)?new URL(X):X;var Q=w.readFileSync(X);return Q},b=async(X,Q=!0)=>{X=E(X)?new URL(X):X;var le=w.readFileSync(X,Q?void 0:"utf8");return le},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),f=(X,Q)=>{throw process.exitCode=X,Q}}else if(a||c){try{h=new URL(".",v).href}catch{}c&&(p=X=>{var Q=new XMLHttpRequest;return Q.open("GET",X,!1),Q.responseType="arraybuffer",Q.send(null),new Uint8Array(Q.response)}),b=async X=>{if(E(X))return new Promise((le,De)=>{var Me=new XMLHttpRequest;Me.open("GET",X,!0),Me.responseType="arraybuffer",Me.onload=()=>{if(Me.status==200||Me.status==0&&Me.response){le(Me.response);return}De(Me.status)},Me.onerror=De,Me.send(null)});var Q=await fetch(X,{credentials:"same-origin"});if(Q.ok)return Q.arrayBuffer();throw new Error(Q.status+" : "+Q.url)}}var A=console.log.bind(console),y=console.error.bind(console),k,C,T=!1,L,z,P,N,E=X=>X.startsWith("file://");function I(){var X=C.buffer;z=new Int8Array(X),P=new Uint8Array(X),t.HEAP32=new Int32Array(X),N=new Uint32Array(X),t.HEAPF64=new Float64Array(X),new BigInt64Array(X),new BigUint64Array(X)}function W(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)ae(t.preRun.shift());ge(ve)}function j(){Ve.k()}function R(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)ue(t.postRun.shift());ge(ye)}var M=0,Y=null;function V(X){var Q;M++,(Q=t.monitorRunDependencies)==null||Q.call(t,M)}function O(X){var le;if(M--,(le=t.monitorRunDependencies)==null||le.call(t,M),M==0&&Y){var Q=Y;Y=null,Q()}}function K(X){var le;(le=t.onAbort)==null||le.call(t,X),X="Aborted("+X+")",y(X),T=!0,X+=". Build with -sASSERTIONS for more info.";var Q=new WebAssembly.RuntimeError(X);throw s(Q),Q}var te;function $(){return t.locateFile?m("pls_wasm.wasm"):new URL("/pls/pls.wasm",Ie&&Ie.tagName.toUpperCase()==="SCRIPT"&&Ie.src||new URL("pls.js",document.baseURI).href).href}function ee(X){if(X==te&&k)return new Uint8Array(k);if(p)return p(X);throw"both async and sync fetching of the wasm failed"}async function re(X){if(!k)try{var Q=await b(X);return new Uint8Array(Q)}catch{}return ee(X)}async function de(X,Q){try{var le=await re(X),De=await WebAssembly.instantiate(le,Q);return De}catch(Me){y(`failed to asynchronously prepare wasm: ${Me}`),K(Me)}}async function pe(X,Q,le){if(!X&&typeof WebAssembly.instantiateStreaming=="function"&&!E(Q)&&!d)try{var De=fetch(Q,{credentials:"same-origin"}),Me=await WebAssembly.instantiateStreaming(De,le);return Me}catch(He){y(`wasm streaming compile failed: ${He}`),y("falling back to ArrayBuffer instantiation")}return de(Q,le)}function fe(){return{a:dr}}async function ke(){function X(He,$e){return Ve=He.exports,C=Ve.j,I(),O(),Ve}V();function Q(He){return X(He.instance)}var le=fe();if(t.instantiateWasm)return new Promise((He,$e)=>{t.instantiateWasm(le,(Ue,jt)=>{He(X(Ue))})});te??(te=$());try{var De=await pe(k,te,le),Me=Q(De);return Me}catch(He){return s(He),Promise.reject(He)}}class me{constructor(Q){Vr(this,"name","ExitStatus");this.message=`Program terminated with exit(${Q})`,this.status=Q}}var ge=X=>{for(;X.length>0;)X.shift()(t)},ye=[],ue=X=>ye.push(X),ve=[],ae=X=>ve.push(X),Ae=!0,_e=X=>Mh(X),Se=()=>Ih(),Be=()=>K(""),yt=0,Xe=()=>{Ae=!1,yt=0},st={},Ze=X=>{if(X instanceof me||X=="unwind")return L;f(1,X)},Yt=()=>Ae||yt>0,wn=X=>{var Q;L=X,Yt()||((Q=t.onExit)==null||Q.call(t,X),T=!0),f(X,new me(X))},Hn=(X,Q)=>{L=X,wn(X)},$r=Hn,ls=()=>{if(!Yt())try{$r(L)}catch(X){Ze(X)}},ss=X=>{if(!T)try{X(),ls()}catch(Q){Ze(Q)}},os=()=>performance.now(),as=(X,Q)=>{if(st[X]&&(clearTimeout(st[X].id),delete st[X]),!Q)return 0;var le=setTimeout(()=>{delete st[X],ss(()=>us(X,os()))},Q);return st[X]={id:le,timeout_ms:Q},0},is=()=>Date.now(),xe=()=>2147483648,qe=(X,Q)=>Math.ceil(X/Q)*Q,Re=X=>{var Q=C.buffer,le=(X-Q.byteLength+65535)/65536|0;try{return C.grow(le),I(),1}catch{}},at=X=>{var Q=P.length;X>>>=0;var le=xe();if(X>le)return!1;for(var De=1;De<=4;De*=2){var Me=Q*(1+.2/De);Me=Math.min(Me,X+100663296);var He=Math.min(le,qe(Math.max(X,Me),65536)),$e=Re(He);if($e)return!0}return!1},Ct=X=>52;function Zt(X,Q,le,De){return 70}var Pt=[null,[],[]],zt=typeof TextDecoder<"u"?new TextDecoder:void 0,Ge=(X,Q=0,le=NaN)=>{for(var De=Q+le,Me=Q;X[Me]&&!(Me>=De);)++Me;if(Me-Q>16&&X.buffer&&zt)return zt.decode(X.subarray(Q,Me));for(var He="";Q<Me;){var $e=X[Q++];if(!($e&128)){He+=String.fromCharCode($e);continue}var Ue=X[Q++]&63;if(($e&224)==192){He+=String.fromCharCode(($e&31)<<6|Ue);continue}var jt=X[Q++]&63;if(($e&240)==224?$e=($e&15)<<12|Ue<<6|jt:$e=($e&7)<<18|Ue<<12|jt<<6|X[Q++]&63,$e<65536)He+=String.fromCharCode($e);else{var jr=$e-65536;He+=String.fromCharCode(55296|jr>>10,56320|jr&1023)}}return He},Fe=(X,Q)=>{var le=Pt[X];Q===0||Q===10?((X===1?A:y)(Ge(le)),le.length=0):le.push(Q)},xt=(X,Q)=>X?Ge(P,X,Q):"",mt=(X,Q,le,De)=>{for(var Me=0,He=0;He<le;He++){var $e=N[Q>>2],Ue=N[Q+4>>2];Q+=8;for(var jt=0;jt<Ue;jt++)Fe(X,P[$e+jt]);Me+=Ue}return N[De>>2]=Me,0},it=X=>{var Q=t["_"+X];return Q},et=(X,Q)=>{z.set(X,Q)},Wt=X=>{for(var Q=0,le=0;le<X.length;++le){var De=X.charCodeAt(le);De<=127?Q++:De<=2047?Q+=2:De>=55296&&De<=57343?(Q+=4,++le):Q+=3}return Q},Ir=(X,Q,le,De)=>{if(!(De>0))return 0;for(var Me=le,He=le+De-1,$e=0;$e<X.length;++$e){var Ue=X.charCodeAt($e);if(Ue>=55296&&Ue<=57343){var jt=X.charCodeAt(++$e);Ue=65536+((Ue&1023)<<10)|jt&1023}if(Ue<=127){if(le>=He)break;Q[le++]=Ue}else if(Ue<=2047){if(le+1>=He)break;Q[le++]=192|Ue>>6,Q[le++]=128|Ue&63}else if(Ue<=65535){if(le+2>=He)break;Q[le++]=224|Ue>>12,Q[le++]=128|Ue>>6&63,Q[le++]=128|Ue&63}else{if(le+3>=He)break;Q[le++]=240|Ue>>18,Q[le++]=128|Ue>>12&63,Q[le++]=128|Ue>>6&63,Q[le++]=128|Ue&63}}return Q[le]=0,le-Me},Ye=(X,Q,le)=>Ir(X,P,Q,le),he=X=>qh(X),kt=X=>{var Q=Wt(X)+1,le=he(Q);return Ye(X,le,Q),le},cs=(X,Q,le,De,Me)=>{var He={string:Ft=>{var _n=0;return Ft!=null&&Ft!==0&&(_n=kt(Ft)),_n},array:Ft=>{var _n=he(Ft.length);return et(Ft,_n),_n}};function $e(Ft){return Q==="string"?xt(Ft):Q==="boolean"?!!Ft:Ft}var Ue=it(X),jt=[],jr=0;if(De)for(var Fr=0;Fr<De.length;Fr++){var Na=He[le[Fr]];Na?(jr===0&&(jr=Se()),jt[Fr]=Na(De[Fr])):jt[Fr]=De[Fr]}var fs=Ue(...jt);function Fh(Ft){return jr!==0&&_e(jr),$e(Ft)}return fs=Fh(fs),fs};t.noExitRuntime&&(Ae=t.noExitRuntime),t.print&&(A=t.print),t.printErr&&(y=t.printErr),t.wasmBinary&&(k=t.wasmBinary),t.arguments&&t.arguments,t.thisProgram&&t.thisProgram,t.ccall=cs;var dr={c:Be,b:Xe,d:as,i:is,e:at,h:Ct,f:Zt,g:mt,a:wn},Ve=await ke();Ve.k,t._plsfit_wasm=Ve.l,t._free=Ve.m,t._malloc=Ve.n,t._plspredict_wasm=Ve.o,t._pcvpls_wasm=Ve.p;var us=Ve.q,Mh=Ve.r,qh=Ve.s,Ih=Ve.t;function ds(){if(M>0){Y=ds;return}if(W(),M>0){Y=ds;return}function X(){var Q;t.calledRun=!0,!T&&(j(),l(t),(Q=t.onRuntimeInitialized)==null||Q.call(t),R())}t.setStatus?(t.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>t.setStatus(""),1),X()},1)):X()}function jh(){if(t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.shift()()}return jh(),ds(),e=o,e},zh=G('<p>Current release: <span>1.1.0</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a></p>'),Nh=G(`<h2>Partial Least Squares regression</h2> <p>Interactive web-application for creating, testing and applying PLS models for multivariate regression
      directly in your browser. The app does not send any information to the server,
      all calculations are done locally on your device.</p> <p>The application uses <a href="https://doi.org/10.1016/j.aca.2023.341096">Procrustes cross-validation</a> for optimization and quality check on the training stage.</p> <h3>v. 1.1.0</h3> <p class="release-info">released 18/05/2025</p> <ul><li>Fixed a couple of small bugs.</li> <li>Added Y-residuals plot.</li></ul> <h3>v. 1.0.1</h3> <p class="release-info">released 18/05/2025</p> <ul><li>Fixed a bug caused wrong initial number of LVs when variables are excluded.</li> <li>Added limitation to avoid exclusion of all variables.</li> <li>Small improvements.</li></ul>`,1);function Ph(n,e){ie(e,!1);function t(a){a.train.calset=null,a.test.model=null,a.new.model=null,a.tab=0}function l(a){const c=Object.keys(a);if(!["date","tab","train","test","new"].every(b=>c.includes(b)))return!1;const d=["model","calset","calres","pvset","pvres","outliers","exclvars","ncomp_selected","pvscalars"],u=Object.keys(a.train);if(!d.every(b=>u.includes(b)))return!1;const f=["model","testset","testres","outliers","ncomp_selected"],v=Object.keys(a.test);if(!f.every(b=>v.includes(b)))return!1;const h=["model","newset","newres","outliers"],m=Object.keys(a.new);return!!h.every(b=>m.includes(b))}function s(){return{date:ql(new Date),tab:0,train:{model:0,calset:0,calres:0,pvset:0,pvres:0,outliers:[],exclvars:[],ncomp_selected:1},test:{model:0,testset:0,testres:0,outliers:[],ncomp_selected:1},new:{model:0,newset:0,newres:0,outliers:[],ncomp_selected:1}}}const o=[{name:"Train",label:"train",component:Uv},{name:"Test",label:"test",component:ih},{name:"Predict",label:"new",component:wh}];sc(),Ah(n,{appID:"pls",appTitle:"PLS",appShortTitle:"PLS",appSlogan:"Partial least squares regression",get WASM(){return Th},get tabs(){return o},initSession:s,checkSession:l,resetSession:t,footer:d=>{var u=zh();S(d,u)},info:d=>{var u=Nh();S(d,u)},$$slots:{footer:!0,info:!0}}),ce()}Fi(Ph,{target:document.body});const Rh=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=pls.js.map
