var Q1=Object.defineProperty;var Ja=We=>{throw TypeError(We)};var J1=(We,Se,nt)=>Se in We?Q1(We,Se,{enumerable:!0,configurable:!0,writable:!0,value:nt}):We[Se]=nt;var Dr=(We,Se,nt)=>J1(We,typeof Se!="symbol"?Se+"":Se,nt),Ol=(We,Se,nt)=>Se.has(We)||Ja("Cannot "+nt);var _r=(We,Se,nt)=>(Ol(We,Se,"read from private field"),nt?nt.call(We):Se.get(We)),Nn=(We,Se,nt)=>Se.has(We)?Ja("Cannot add the same private member more than once"):Se instanceof WeakSet?Se.add(We):Se.set(We,nt),Dl=(We,Se,nt,Vr)=>(Ol(We,Se,"write to private field"),Vr?Vr.call(We,nt):Se.set(We,nt),nt),Za=(We,Se,nt)=>(Ol(We,Se,"access private method"),nt);(function(){"use strict";var Mr,ln,kn,is,$a;var We=document.createElement("style");We.textContent=`button.svelte-ymtj5z{display:inline-block;font-size:.9em;padding:0 .5em;line-height:1.5em;border-radius:.25em;box-shadow:none;margin:0;text-align:center;border:1px solid}.button.svelte-ymtj5z:focus-visible{outline:solid 2px;outline-offset:2px}button.svelte-bx9fh5{display:inline-block;font-size:1em;width:1.3em;height:1.3em;border:none;border-radius:50%;box-shadow:none;margin:0 .25em;text-align:center;padding:0;background-size:45% 45%;background-position:50%;background-repeat:no-repeat}button.svelte-bx9fh5:last-of-type{margin-right:0}.button.svelte-bx9fh5:focus-visible{outline:solid 2px;outline-offset:2px}.control-element.svelte-h4yni9{font-size:.85em;background:var(--container-bg-color, #fff);color:var(--text-color-dark, #606570);padding:.5em .5em .5em 1em;border-radius:0;display:flex;justify-items:flex-start;justify-content:flex-start;align-items:center;margin-bottom:.5px}.control-element.svelte-h4yni9:hover{background:var(--container-bg-color, #fafdff)}.control-element.svelte-h4yni9:first-child{margin-top:.25rem;border-top-left-radius:.25rem;border-top-right-radius:.25rem}.control-element.svelte-h4yni9:last-child{margin-bottom:.25rem;border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem}.hidden.svelte-h4yni9{display:none}.control-element.error.svelte-h4yni9{background:var(--warning-color, crimson);color:var(--warning-text-color, #fefefe)}.label.svelte-h4yni9{padding-right:.75em;flex-grow:0;flex-shrink:1;color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9>.wrapper{flex:1 1 auto;position:relative;box-sizing:border-box;display:inline-block;margin:0;padding:0;width:auto;align-items:flex-start;justify-content:center;justify-items:flex-start}.control-element.svelte-h4yni9>h2{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:1.1em}.control-element.svelte-h4yni9>p{text-align:left;flex-grow:1;padding:0 .25em 0 0;margin:0;font-size:max(12px,.9em)}.control-element.error p{color:var(--warning-text-color, #fefafa)}.control-element.error a{color:var(--warning-link-color, #ffeeaa)}.control-element.error a:hover{color:var(--warning-link-hover-color, #ffee80)}.control-element.svelte-h4yni9>.title{font-size:1.05em;font-weight:700;color:var(--text-color-dark, #606570);flex-grow:1;padding:.3em 0;margin:0}.control-element.svelte-h4yni9>.range-slider-container{outline-color:var(--outline-color, #ccc);background:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9>.range-slider-container:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .range-slider{color:var(--text-color-light, #fafafa);background-color:var(--main-color1, #6eb8ff);border-right-color:var(--main-color2, #528abe)}.control-element.svelte-h4yni9 .range-value{color:var(--text-color-light, #fafafa)}.control-element.svelte-h4yni9 .range-value_left,.control-element.svelte-h4yni9 .range-value_right{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .button{border-color:transparent;background-color:var(--bg-color-dark, #606570);color:var(--text-color-light, #fafafa);outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .button:hover{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #5086b9)}.control-element.svelte-h4yni9 .button-cancel{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" version="2.0" viewBox="0 0 100 100" style="stroke:%23fafafa;stroke-width:1em;" ><line x1="0" y1="0" x2="100" y2="100"/><line x1="0" y1="100" x2="100" y2="0"/></svg>')}.control-element.svelte-h4yni9 .button-cancel:hover{background-color:var(--warning-color, crimson)}.control-element.svelte-h4yni9 .button-undo{background-image:url('data:image/svg+xml;utf8,<svg width="99px" height="99px" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><g stroke-linecap="round" stroke-linejoin="round" ><path d="M6 7L7 6L4.70711 3.70711L5.19868 3.21553C5.97697 2.43724 7.03256 2 8.13323 2C11.361 2 14 4.68015 14 7.93274C14 11.2589 11.3013 14 8 14C6.46292 14 4.92913 13.4144 3.75736 12.2426L2.34315 13.6569C3.90505 15.2188 5.95417 16 8 16C12.4307 16 16 12.3385 16 7.93274C16 3.60052 12.4903 0 8.13323 0C6.50213 0 4.93783 0.647954 3.78447 1.80132L3.29289 2.29289L1 0L0 1V7H6Z" fill="%23fafafa"></path> </g></svg>')}.control-element.svelte-h4yni9 .button-undo:hover{background-color:var(--main-color1,#6eb8ff)}.control-element.svelte-h4yni9 .selector:focus-visible{outline:2px solid;outline-offset:2px;outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .selector>.option{color:var(--text-color-dark, #606570);background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .plot-selector>.option>svg{stroke:var(--main-color1, #606570)}.control-element.svelte-h4yni9 .plot-selector>.option.selected>svg{stroke:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .selector>.option.selected{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .selector>.option:not(.selected):hover{border:1px solid var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .selector>.option:not(.selected):hover>svg{stroke:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .file-selector:before{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .file-selector.selected:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .file-selector:focus-visible{outline-color:var(--outline-color, #ccc)}.control-element.svelte-h4yni9 .file-selector:focus-visible:before{outline-color:var(--outline-color, #ccc);color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .file-selector:hover:before{color:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .textinput>input{background-color:var(--main-color1, #6eb8ff);color:var(--text-color-light, #fefefe)}.control-element.svelte-h4yni9 .textinput>input:placeholder-shown{color:var(--text-color-dark, #a0a0a0);background-color:var(--bg-color-light, #f0f0f0);border-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .textinput>input::placeholder{color:#a0a0a0}.control-element.svelte-h4yni9 .textinput>input:active::placeholder,.control-element.svelte-h4yni9 .textinput>input:focus::placeholder{color:transparent}.control-element.svelte-h4yni9 .textinput>input:focus,.control-element.svelte-h4yni9 .textinput>input:active{border-color:var(--main-color1, #6eb8ff);background-color:var(--main-color1-light, #6eb8ff20);color:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .textinput.error>input,.control-element.svelte-h4yni9 .textinput.error>input:focus,.control-element.svelte-h4yni9 .textinput.error>input:active{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce);border-color:var(--warning-color, crimson)}.control-element.svelte-h4yni9 .textinput.error>.error-message{color:var(--warning-color, crimson);background-color:var(--warning-color-light, #ffd5ce)}.control-element.svelte-h4yni9 .spinner:after{border-color:var(--main-color1, #6eb8ff) transparent var(--main-color1, #6eb8ff) transparent}.control-element.svelte-h4yni9 .number-container{background-color:var(--bg-color-light, #f0f0f0)}.control-element.svelte-h4yni9 .number-container>.value{color:var(--text-color-dark, #606570)}.control-element.svelte-h4yni9 .number-container>.button-small>svg>polygon{fill:var(--main-color2, #4777a4)}.control-element.svelte-h4yni9 .number-container>.button-small:hover>svg>polygon{fill:var(--main-color1, #6eb8ff)}.control-element.svelte-h4yni9 .number-container:focus-visible{outline-color:var(--outline-color, #ccc)}.range-slider-container.svelte-vhx0r0{position:relative;box-sizing:border-box;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-vhx0r0:focus-visible{outline:solid 2px #ccc;outline-offset:2px}.range-slider.svelte-vhx0r0{position:relative;display:flex;justify-content:right;align-items:center;box-sizing:border-box;border-radius:2px;border-right:solid 5px;text-align:right;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_right.svelte-vhx0r0{justify-content:left}.range-value.svelte-vhx0r0{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;position:relative;user-select:none;-webkit-user-select:none;-moz-user-select:none;right:.25em}.range-value_right.svelte-vhx0r0{left:calc(100% + 5px + .25em)}.range-slider-container.svelte-xdlm7u{position:relative;box-sizing:border-box;display:inline-block;flex:1 1 auto;height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;cursor:default;display:flex;align-items:center;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider-container.svelte-xdlm7u:focus-visible{outline:solid 2px;outline-offset:2px}.range-slider.svelte-xdlm7u{position:relative;display:flex;justify-content:center;align-items:center;box-sizing:border-box;border-radius:2px;text-align:center;margin:0;padding:0;height:100%;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-slider_left.svelte-xdlm7u{justify-content:left}.range-slider_right.svelte-xdlm7u{justify-content:right}.range-value.svelte-xdlm7u{display:inline-block;margin:0;padding:0;cursor:default;font-size:.85em;user-select:none;-webkit-user-select:none;-moz-user-select:none}.range-value_left.svelte-xdlm7u{position:relative;left:calc(100% + .25em)}.range-value_right.svelte-xdlm7u{position:relative;right:calc(100% + .25em)}input.svelte-1i17tox{display:none}.selector.svelte-1i17tox{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.selector.svelte-1i17tox:focus-visible{outline:solid 2px;outline-offset:2px}.option.svelte-1i17tox{cursor:default;padding:.25em .5em;margin:0 .3em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em}.option.svelte-1i17tox:not(.selected):hover{border:1px solid}.file-selector.svelte-1k0x7uv>input:where(.svelte-1k0x7uv){display:none}.file-selector.svelte-1k0x7uv{display:flex;align-items:baseline;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:1 1;min-width:0;border-radius:2px;cursor:default}.file-selector.svelte-1k0x7uv:focus-visible{outline:solid 2px;outline-offset:2px}.file-selector.svelte-1k0x7uv:before{display:inline-block;content:"⇪";font-size:1.1em;margin:0 .5em 0 0;padding:0}.file-selector.selected.svelte-1k0x7uv:before{content:"☷";font-size:1.3em;letter-spacing:-.2em;font-weight:700}.textinput.svelte-1qtiwcs{box-sizing:border-box;flex:1 1 auto;font-size:1em;line-height:1.5em;margin:0;padding:.15em 0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex;position:relative}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs){flex:1 1 auto;font-size:.9em;width:100%;cursor:default;padding:.25em .5em;border:1px solid;border-radius:.3em;outline:none}.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):focus,.textinput.svelte-1qtiwcs>input:where(.svelte-1qtiwcs):active{border:1px solid}.error-message.svelte-1qtiwcs{position:absolute;left:0;bottom:calc(100% + 2px);border-radius:.3em;line-height:1em;font-size:.75em;padding:.5em}.spinner.svelte-n48urb{display:inline-block;height:1.5em;line-height:1.5em;width:1.5em;margin:0 .5em}.spinner.svelte-n48urb:after{content:" ";display:block;width:.8em;height:.8em;margin:.1em;border-radius:50%;border:.2em solid;animation:svelte-n48urb-spinner 1.2s linear infinite}@keyframes svelte-n48urb-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}input.svelte-yf64an{display:none}.selector.svelte-yf64an{position:relative;box-sizing:border-box;flex:1 1 auto;font-size:1em;margin:0;padding:0;width:auto;border-radius:2px;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:flex}.option.svelte-yf64an{cursor:default;padding:0;padding-inline:0;padding-block:0;margin:0 .2em 0 0;border:1px solid transparent;border-radius:.3em;font-size:.85em;height:auto;display:flex;justify-content:center}.option.svelte-yf64an:not(.selected):hover{border:1px solid}.number-container.svelte-giqvuu{box-sizing:border-box;flex:0 1 auto;height:1.5em;margin:0 5px 0 0;padding:0;width:auto;border-radius:2px;cursor:default;user-select:none;-webkit-user-select:none;-moz-user-select:none;display:grid;grid-template-areas:"value up" "value down";grid-template-columns:1fr 1em;grid-template-rows:1fr 1fr;justify-items:center;align-items:center}.number-container.svelte-giqvuu:focus-visible{outline:solid 2px;outline-offset:2px}.value.svelte-giqvuu{grid-area:value;box-sizing:border-box;height:100%;display:block;padding:.1em .1em .1em .3em;text-align:right}.button-small.svelte-giqvuu{padding:0;margin:0;border:none;background:none;outline:none;width:.6em;height:.6em;box-sizing:border-box;font-size:inherit;display:flex;align-items:center;justify-content:center}.button-small.svelte-giqvuu>svg:where(.svelte-giqvuu){font-size:inherit;width:.6em;height:.6em}.button-up.svelte-giqvuu{grid-area:up}.button-down.svelte-giqvuu{grid-area:down}.color-picker.svelte-1ajmk4v{width:3em;height:1.25em;margin-right:2px;background:#000;border:3px solid #f0f0f0;border-radius:2px}input[type=color i].svelte-1ajmk4v{width:0;height:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:transparent}.dataset-info.svelte-gdjwex{line-height:1.5em}.dataset-info.svelte-gdjwex>span{vertical-align:middle;color:#a0a0a0}.dataset-info.svelte-gdjwex>.file-name:where(.svelte-gdjwex),.dataset-info.svelte-gdjwex>.file-size:where(.svelte-gdjwex){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}.outliers.svelte-1ggez3e{line-height:1.5em;text-align:left;padding:.5em 0;flex:0 0 80%}.outliers.svelte-1ggez3e>.item:where(.svelte-1ggez3e){color:#dc143c;background:#dc143c20;display:inline-block;white-space:nowrap;vertical-align:middle;max-width:10ch;overflow:hidden;text-overflow:ellipsis;padding:.1em .5em;margin:.2em .1em;border-radius:.2em}.show-download-links-none.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){display:none}.show-download-links-hover.svelte-1jtdxd0:hover>.download-links:where(.svelte-1jtdxd0){bottom:0}.show-download-links-fixed.svelte-1jtdxd0>.download-links:where(.svelte-1jtdxd0){bottom:0}.download-links.svelte-1jtdxd0{position:absolute;font-size:.8em;bottom:-50%;right:0;z-index:10;padding:.5em 1em;background:#fefefe;border-radius:.5em;transition:bottom .35s ease;box-shadow:0 0 .75em #00000060;margin:.6em;box-sizing:border-box;display:flex;align-items:center;justify-content:center}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0){box-sizing:border-box;color:#606060;border:none;box-shadow:none;background:#fafafa;border-radius:.35em;padding:.25em .5em}.download-links.svelte-1jtdxd0>button:where(.svelte-1jtdxd0):hover{background:#433;color:#fafafa}.download-links.svelte-1jtdxd0>button.error{background:#e43}.download-links.svelte-1jtdxd0>button.copied{background:#48e}.plot-container.svelte-1jtdxd0{font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;position:relative;min-width:100px;min-height:50px;width:100%;height:100%;padding:0;margin:0;overflow:hidden;background:#fff}.plot-error.svelte-1jtdxd0{display:flex;justify-content:center;align-items:center}.message-error.svelte-1jtdxd0{font-size:1.2em;color:#dc143c;padding:1em;box-sizing:border-box;text-align:center}.plot.svelte-1jtdxd0{display:block;box-sizing:border-box;position:absolute;padding:0;margin:0;left:0;top:0;bottom:0;right:0;width:100%;height:100%}.axes-content.svelte-1jtdxd0{padding:0;margin:0;height:100%;width:100%;max-height:100%;max-width:100%;min-height:100%;min-width:100%}.drop.svelte-1vipsv{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#000000a0}.modal.svelte-1vipsv{border-radius:.5rem;background-color:#fff;display:grid;grid-template-areas:"header" "body";grid-template-rows:30px 1fr;width:auto;height:auto;border-radius:.25rem}.body.svelte-1vipsv{grid-area:body;box-sizing:border-box;padding:0 1em .5em;width:100%;height:100%}.header.svelte-1vipsv{grid-area:header}.close-button.svelte-1vipsv{cursor:pointer;border:none;box-shadow:none;background:transparent;font-size:inherit;font-weight:700;color:#f8ebc5;border-radius:50%;width:20px;height:20px;background-color:#9ea0a2;float:right;text-align:center;padding:0;line-height:20px;font-size:12px;margin:5px}.close-button.svelte-1vipsv:hover{background-color:#4e5052}.wrapper.svelte-ha02r1{width:95vw;height:90vh;display:grid;grid-template-areas:"plot" "message" "controls";grid-template-rows:1fr 15px min-content}.plot-container.svelte-ha02r1{grid-area:plot}.plot-controls.svelte-ha02r1{grid-area:controls;display:flex;width:100%;justify-content:center;border-radius:.5rem}.plot-controls.svelte-ha02r1>.control-element{background:transparent}.msg-select.svelte-ha02r1{grid-area:message;height:15px;font-size:12px;color:#aaa;text-align:center}.selected-buttons.svelte-8mh2yv>.control-element{background:#fff0c8}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type{color:#fff;border-color:#dc143c;background:#dc143c;margin-left:5px}.selected-buttons.svelte-8mh2yv>.control-element button:last-of-type:hover{background:#dc143c20;border-color:#dc143c80;color:#dc143c}.plot-panel.svelte-8mh2yv{width:100%;height:100%;box-sizing:border-box;padding:0;display:grid;grid-template-rows:1fr;grid-template-columns:1fr minmax(270px,30%)}.plot-area.svelte-8mh2yv{padding:1em;margin-top:.25rem;border-radius:.25em;background:#fefefe}.plot-controls-area.svelte-8mh2yv{padding:0 .25em 0 .5em}.plot-selector.svelte-8mh2yv{cursor:pointer;color:#606060;background:#fffef480;box-sizing:border-box;padding:.5em 1em;margin:.25em 0;border-radius:.25rem;box-shadow:none;border:none;width:100%;text-align:left;font-size:1rem}.plot-selector.svelte-8mh2yv:hover{background:#e0e0e0;color:#403020}div.plot-container.off-screen{position:absolute;top:0;left:50%;width:650px;height:600px;background:#fff;z-index:999}.plot.svelte-8mh2yv{width:100%;height:calc(100% - 15px)}.plot-select-msg.svelte-8mh2yv{height:15px;font-size:12px;color:#aaa;text-align:center}@media (min-width:1100px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr minmax(285px,30%)}}@media (min-width:1300px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr max(300px,30%)}}@media (min-width:1600px){.plot-panel.svelte-8mh2yv{grid-template-columns:1fr 400px}}.app-container.svelte-1wcgq1z{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-1wcgq1z{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-1wcgq1z{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-1wcgq1z>div:where(.svelte-1wcgq1z){border-radius:.25rem}.app-controls.svelte-1wcgq1z>.model-stats:where(.svelte-1wcgq1z),.app-controls.svelte-1wcgq1z>.result-stats:where(.svelte-1wcgq1z){background:#e8e8e8}.app-controls.svelte-1wcgq1z>.model-stats:where(.svelte-1wcgq1z),.app-controls.svelte-1wcgq1z>.result-stats:where(.svelte-1wcgq1z){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-1wcgq1z{margin-top:.25rem}.help-text.svelte-1wcgq1z>p:where(.svelte-1wcgq1z),.help-text.svelte-1wcgq1z>div:where(.svelte-1wcgq1z){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-1wcgq1z table:where(.svelte-1wcgq1z){border-collapse:collapse}.help-text.svelte-1wcgq1z table:where(.svelte-1wcgq1z) td:where(.svelte-1wcgq1z){padding:.25em .5em;background:#e0f0fa;text-align:right;border:1px solid white}.help-text.svelte-1wcgq1z table:where(.svelte-1wcgq1z) thead:where(.svelte-1wcgq1z) tr:where(.svelte-1wcgq1z) td:where(.svelte-1wcgq1z){font-weight:700;background:#f8f4e0}.help-text.svelte-1wcgq1z table:where(.svelte-1wcgq1z) td:where(.svelte-1wcgq1z):first-child{font-weight:700;background:#f8f4e0;padding-right:1em}.help-text.svelte-1wcgq1z table:where(.svelte-1wcgq1z) tbody:where(.svelte-1wcgq1z) td:where(.svelte-1wcgq1z):nth-child(2){background:#e0e8f0;padding-right:1em}.help-text.svelte-1wcgq1z>p:where(.svelte-1wcgq1z):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-1wcgq1z>p:where(.svelte-1wcgq1z):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-1wcgq1z{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-1wcgq1z{grid-template-columns:min(320px,30%) 1fr}}.model-info.svelte-1l40o0h{line-height:1.5em}.model-info.svelte-1l40o0h>span{vertical-align:top;color:#a0a0a0}.model-info.svelte-1l40o0h>.file-name:where(.svelte-1l40o0h){display:inline-block;padding:0;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:25ch;color:#222}table.svelte-kg0b31{width:100%;border-collapse:collapse}tr.svelte-kg0b31{width:100%}th.svelte-kg0b31{border-bottom:1px solid #a0a0a0}th.svelte-kg0b31,td.svelte-kg0b31{text-align:right;padding:.2em .5em .2em .1em;color:#404040;margin:0}.label.svelte-kg0b31{text-align:left;padding:.1em .5em}.app-container.svelte-rpbnyb{font-family:Helvetica,Arial,sans-serif;font-size:1rem;color:#404040;box-sizing:border-box;margin:0 auto;padding:.35em .25em;width:100%;height:100%;display:grid;grid-template-areas:"controls content";grid-template-rows:100%;grid-template-columns:min(310px,30%) 1fr}.app-controls.svelte-rpbnyb{box-sizing:border-box;padding:.25em .5em}.app-content.svelte-rpbnyb{box-sizing:border-box;padding:.25em;height:100%}.app-controls.svelte-rpbnyb>div:where(.svelte-rpbnyb){border-radius:.25rem}.app-controls.svelte-rpbnyb>.model-stats:where(.svelte-rpbnyb),.app-controls.svelte-rpbnyb>.result-stats:where(.svelte-rpbnyb){background:#e8e8e8}.app-controls.svelte-rpbnyb>.model-stats:where(.svelte-rpbnyb),.app-controls.svelte-rpbnyb>.result-stats:where(.svelte-rpbnyb){padding:.5rem 1rem;margin-top:.25rem;font-size:.85em}.help-text.svelte-rpbnyb{margin-top:.25rem}.help-text.svelte-rpbnyb>p:where(.svelte-rpbnyb){background:#fafafa;padding:0 1.5em .5em;color:#606060;line-height:1.5em;margin:0 1em 0 0}.help-text.svelte-rpbnyb>p:where(.svelte-rpbnyb):first-child{border-top-left-radius:.25rem;border-top-right-radius:.25rem;padding-top:1.5em}.help-text.svelte-rpbnyb>p:where(.svelte-rpbnyb):last-child{border-bottom-left-radius:.25rem;border-bottom-right-radius:.25rem;padding-bottom:1.5em}@media (min-width:1300px){.app-container.svelte-rpbnyb{grid-template-columns:min(340px,30%) 1fr}}@media (min-width:1100px){.app-container.svelte-rpbnyb{grid-template-columns:min(320px,30%) 1fr}}.page.svelte-1946064{width:100%;height:100%;margin:0 auto;padding:0;min-width:1020px;min-height:590px;max-width:1900px;display:flex;flex-direction:column}header.svelte-1946064{display:flex;justify-content:flex-start;flex-direction:row;background:#f8f6f4}.header-group.svelte-1946064{width:min-content;min-width:400px;margin:0 0 0 .25rem;display:grid;align-items:center;grid-template-columns:min-content 1fr;grid-template-rows:min-content min-content min-content min-content;grid-template-areas:"logo ." "logo title" "logo subtitle" "logo ."}.logo.svelte-1946064{width:5rem;margin:.25rem;grid-area:logo}.header-group.svelte-1946064>h1:where(.svelte-1946064){margin:0;padding:0;text-align:left;font-size:1.6rem;color:#4e5052;white-space:nowrap;grid-area:title}.header-group.svelte-1946064>p:where(.svelte-1946064){margin:0;padding:0;text-align:left;font-size:1.1rem;color:#7e8082;grid-area:subtitle}main.svelte-1946064{flex-basis:auto;flex-grow:1;flex-shrink:1;box-sizing:border-box;padding:.2rem 0}main.svelte-1946064>div:where(.svelte-1946064){height:100%}footer.svelte-1946064{display:grid;grid-template-columns:20% 60% 20%;grid-template-areas:"session info .";align-items:center;justify-content:center;font-size:.9rem;flex-basis:min-content;flex-grow:0;flex-shrink:0;background:#4e5052;color:silver;padding:.5em}footer.svelte-1946064 .session:where(.svelte-1946064){grid-area:session;padding-left:.5em;display:flex;align-items:center}footer.svelte-1946064 .session:where(.svelte-1946064) input:where(.svelte-1946064){display:none}footer.svelte-1946064 .session:where(.svelte-1946064) .session-message:where(.svelte-1946064){color:silver;padding-right:.5em}footer.svelte-1946064 .session:where(.svelte-1946064):hover .session-message:where(.svelte-1946064){color:#f8ebc5}footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .clear-button:where(.svelte-1946064),footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .upload-button:where(.svelte-1946064),footer.svelte-1946064 .session.no-buttons:where(.svelte-1946064) .download-button:where(.svelte-1946064){display:none}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064),footer.svelte-1946064 .session:where(.svelte-1946064) .upload-button:where(.svelte-1946064),footer.svelte-1946064 .session:where(.svelte-1946064) .download-button:where(.svelte-1946064){font-size:1em;font-weight:700;background:#5e6062;color:silver;box-shadow:none;padding:0 .5em;margin:0 0 0 .2em;border-radius:3px;border:none;height:20px;box-sizing:border-box;display:inline-block}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064){margin-left:.5em}footer.svelte-1946064 .session:where(.svelte-1946064) .upload-button:where(.svelte-1946064):hover,footer.svelte-1946064 .session:where(.svelte-1946064) .download-button:where(.svelte-1946064):hover{background-color:#f8ebc5;color:#4e5052}footer.svelte-1946064 .session:where(.svelte-1946064) .clear-button:where(.svelte-1946064):hover{background-color:#f96666;color:#4e5052}footer.svelte-1946064 .info:where(.svelte-1946064){grid-area:info;display:flex;justify-content:center;align-items:center}footer.svelte-1946064 .info:where(.svelte-1946064) .button-info:where(.svelte-1946064){cursor:default;border:none;box-shadow:none;background:transparent;font-weight:700;color:#4e5052;border-radius:.2em;padding:.25em .5em;text-align:center;line-height:1em;margin-left:.25em;margin-right:.5em;background-color:#f8ebc5}footer.svelte-1946064 p{margin:0 .5em;text-align:center;padding:.15em}footer.svelte-1946064 span,footer.svelte-1946064 a{color:#f8ebc5}.hidden.svelte-1946064{display:none}.nav.svelte-1946064,.nav.svelte-1946064 :where(.svelte-1946064){-webkit-user-select:none;user-select:none;-moz-user-select:none}.nav.svelte-1946064{display:flex;flex-direction:row;justify-content:flex-end;list-style:none;margin:0 100px 0 auto;padding:0;align-self:flex-end}.nav-item.svelte-1946064{list-style:none;margin:0 2px;border-bottom:5px solid transparent}.nav-item.svelte-1946064>button:where(.svelte-1946064){cursor:pointer;padding:.5em 1em;border:none;box-shadow:none;background:transparent;font-size:inherit}.nav-item.svelte-1946064>button:where(.svelte-1946064)>span{color:#888}.nav-item.selected.svelte-1946064{border-bottom:5px solid #80888f}.nav-item.selected.svelte-1946064>button:where(.svelte-1946064){font-weight:700;cursor:default}.nav-item.selected.svelte-1946064:hover{border-bottom:5px solid #80888f}@media (min-width: 1600px){.page.svelte-1946064>header:where(.svelte-1946064){border-bottom-right-radius:.25rem;border-bottom-left-radius:.25rem}.page.svelte-1946064>footer:where(.svelte-1946064){border-top-right-radius:.25rem;border-top-left-radius:.25rem}}.info-container.svelte-1946064{width:900px}.info-container.svelte-1946064>p{font-size:1.15em;line-height:1.35em;padding:0 1em .5em;margin:0}.info-container.svelte-1946064>.release-info{font-size:1em;color:gray;line-height:1.25em;padding:0 1.2em .5em;margin:0}.info-container.svelte-1946064>h2{font-size:1.5em;line-height:1.25em;padding:0em 1rem .5em;margin:0}.info-container.svelte-1946064>h3{font-size:1.15em;line-height:1.25em;padding:1rem 1em .25em;margin:0}.info-container.svelte-1946064>ul{margin:0}.info-container.svelte-1946064>ul>li{font-size:1.15em;line-height:1.25em;padding:0 .5em .5em 0;margin:0}.info-container.svelte-1946064>ul>li>span{font-size:.9em;color:gray;line-height:1.25em;padding:0 .25em;margin:0}.info-container.svelte-1946064 a{color:#ae8032}.info-container.svelte-1946064 a:hover{color:#eb9707}.info-container.svelte-1946064:last-child{padding-bottom:2rem}
/*$vite$:1*/`,document.head.appendChild(We);var Se=typeof document<"u"?document.currentScript:null;const nt=!1;var Vr=Array.isArray,ei=Array.prototype.indexOf,ps=Array.from,ti=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,Vl=Object.getOwnPropertyDescriptors,ri=Object.prototype,ni=Array.prototype,bs=Object.getPrototypeOf;function Br(r){return typeof r=="function"}const dt=()=>{};function si(r){return typeof(r==null?void 0:r.then)=="function"}function li(r){return r()}function _s(r){for(var e=0;e<r.length;e++)r[e]()}const Ht=2,Bl=4,Sn=8,Mn=16,ur=32,on=64,Tn=128,Ft=256,Pn=512,yt=1024,fr=2048,Yr=4096,dr=8192,In=16384,Yl=32768,Wr=65536,oi=1<<17,ai=1<<19,Wl=1<<20,yr=Symbol("$state"),Ul=Symbol("legacy props"),ii=Symbol("");function Hl(r){return r===this.v}function Gl(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function ci(r,e){return r!==e}function ws(r){return!Gl(r,this.v)}function ui(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function di(r){throw new Error("https://svelte.dev/e/effect_orphan")}function vi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function mi(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function hi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function gi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function pi(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function bi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Ur=!1,_i=!1;function wi(){Ur=!0}const ys=1,xs=2,Kl=4,yi=8,xi=16,ki=1,Ei=2,Ci=4,Ai=8,Ni=16,Si=4,Xl=1,Mi=2,ht=Symbol();function ks(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ze=null;function Rn(r){ze=r}function At(r){return Ql().get(r)}function Ti(r,e){return Ql().set(r,e),e}function he(r,e=!1,t){ze={p:ze,c:null,e:null,m:!1,s:r,x:null,l:null},Ur&&!e&&(ze.l={s:null,u:null,r1:[],r2:xt(!1)})}function ge(r){const e=ze;if(e!==null){const c=e.e;if(c!==null){var t=Oe,l=Ye;e.e=null;try{for(var o=0;o<c.length;o++){var a=c[o];Vt(a.effect),Dt(a.reaction),an(a.fn)}}finally{Vt(t),Dt(l)}}ze=e.p,e.m=!0}return{}}function Tr(){return!Ur||ze!==null&&ze.l===null}function Ql(r){return ze===null&&ks(),ze.c??(ze.c=new Map(Pi(ze)||void 0))}function Pi(r){let e=r.p;for(;e!==null;){const t=e.c;if(t!==null)return t;e=e.p}return null}function xt(r,e){var t={f:0,v:r,reactions:null,equals:Hl,rv:0,wv:0};return t}function le(r){return Ii(xt(r))}function Ln(r,e=!1){var l;const t=xt(r);return e||(t.equals=ws),Ur&&ze!==null&&ze.l!==null&&((l=ze.l).s??(l.s=[])).push(t),t}function Ii(r){return Ye!==null&&!sr&&Ye.f&Ht&&(lr===null?Yi([r]):lr.push(r)),r}function G(r,e){return Ye!==null&&!sr&&Tr()&&Ye.f&(Ht|Mn)&&(lr===null||!lr.includes(r))&&bi(),Hr(r,e)}function Hr(r,e){return r.equals(e)||(r.v,r.v=e,r.wv=po(),Jl(r,fr),Tr()&&Oe!==null&&Oe.f&yt&&!(Oe.f&(ur|on))&&(mr===null?Wi([r]):mr.push(r))),e}function Jl(r,e){var t=r.reactions;if(t!==null)for(var l=Tr(),o=t.length,a=0;a<o;a++){var c=t[a],v=c.f;v&fr||!l&&c===Oe||(or(c,e),v&(yt|Ft)&&(v&Ht?Jl(c,Yr):Wn(c)))}}let Es=!1;function ee(r,e=null,t){if(typeof r!="object"||r===null||yr in r)return r;const l=bs(r);if(l!==ri&&l!==ni)return r;var o=new Map,a=Vr(r),c=xt(0);a&&o.set("length",xt(r.length));var v;return new Proxy(r,{defineProperty(f,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&hi();var m=o.get(u);return m===void 0?(m=xt(d.value),o.set(u,m)):G(m,ee(d.value,v)),!0},deleteProperty(f,u){var d=o.get(u);if(d===void 0)u in f&&o.set(u,xt(ht));else{if(a&&typeof u=="string"){var m=o.get("length"),h=Number(u);Number.isInteger(h)&&h<m.v&&G(m,h)}G(d,ht),Zl(c)}return!0},get(f,u,d){var p;if(u===yr)return r;var m=o.get(u),h=u in f;if(m===void 0&&(!h||(p=wr(f,u))!=null&&p.writable)&&(m=xt(ee(h?f[u]:ht,v)),o.set(u,m)),m!==void 0){var g=s(m);return g===ht?void 0:g}return Reflect.get(f,u,d)},getOwnPropertyDescriptor(f,u){var d=Reflect.getOwnPropertyDescriptor(f,u);if(d&&"value"in d){var m=o.get(u);m&&(d.value=s(m))}else if(d===void 0){var h=o.get(u),g=h==null?void 0:h.v;if(h!==void 0&&g!==ht)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return d},has(f,u){var g;if(u===yr)return!0;var d=o.get(u),m=d!==void 0&&d.v!==ht||Reflect.has(f,u);if(d!==void 0||Oe!==null&&(!m||(g=wr(f,u))!=null&&g.writable)){d===void 0&&(d=xt(m?ee(f[u],v):ht),o.set(u,d));var h=s(d);if(h===ht)return!1}return m},set(f,u,d,m){var N;var h=o.get(u),g=u in f;if(a&&u==="length")for(var p=d;p<h.v;p+=1){var _=o.get(p+"");_!==void 0?G(_,ht):p in f&&(_=xt(ht),o.set(p+"",_))}h===void 0?(!g||(N=wr(f,u))!=null&&N.writable)&&(h=xt(void 0),G(h,ee(d,v)),o.set(u,h)):(g=h.v!==ht,G(h,ee(d,v)));var b=Reflect.getOwnPropertyDescriptor(f,u);if(b!=null&&b.set&&b.set.call(m,d),!g){if(a&&typeof u=="string"){var A=o.get("length"),E=Number(u);Number.isInteger(E)&&E>=A.v&&G(A,E+1)}Zl(c)}return!0},ownKeys(f){s(c);var u=Reflect.ownKeys(f).filter(h=>{var g=o.get(h);return g===void 0||g.v!==ht});for(var[d,m]of o)m.v!==ht&&!(d in f)&&u.push(d);return u},setPrototypeOf(){gi()}})}function Zl(r,e=1){G(r,r.v+e)}var qn,$l,eo,to;function Ri(){if(qn===void 0){qn=window,$l=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype;eo=wr(e,"firstChild").get,to=wr(e,"nextSibling").get,r.__click=void 0,r.__className="",r.__attributes=null,r.__styles=null,r.__e=void 0,Text.prototype.__t=void 0}}function Cs(r=""){return document.createTextNode(r)}function Rt(r){return eo.call(r)}function zn(r){return to.call(r)}function F(r,e){return Rt(r)}function Z(r,e){{var t=Rt(r);return t instanceof Comment&&t.data===""?zn(t):t}}function I(r,e=1,t=!1){let l=r;for(;e--;)l=zn(l);return l}function Li(r){r.textContent=""}function y(r){var e=Ht|fr,t=Ye!==null&&Ye.f&Ht?Ye:null;return Oe===null||t!==null&&t.f&Ft?e|=Ft:Oe.f|=Wl,{ctx:ze,deps:null,effects:null,equals:Hl,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??Oe}}function ro(r){const e=y(r);return e.equals=ws,e}function no(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)nr(e[t])}}function qi(r){for(var e=r.parent;e!==null;){if(!(e.f&Ht))return e;e=e.parent}return null}function zi(r){var e,t=Oe;Vt(qi(r));try{no(r),e=_o(r)}finally{Vt(t)}return e}function so(r){var e=zi(r),t=(kr||r.f&Ft)&&r.deps!==null?Yr:yt;or(r,t),r.equals(e)||(r.v=e,r.wv=po())}function lo(r){Oe===null&&Ye===null&&di(),Ye!==null&&Ye.f&Ft&&Oe===null&&fi(),Ms&&ui()}function ji(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Gr(r,e,t,l=!0){var o=(r&on)!==0,a=Oe,c={ctx:ze,deps:null,nodes_start:null,nodes_end:null,f:r|fr,first:null,fn:e,last:null,next:null,parent:o?null:a,prev:null,teardown:null,transitions:null,wv:0};if(t){var v=Kr;try{mo(!0),Ts(c),c.f|=Yl}catch(d){throw nr(c),d}finally{mo(v)}}else e!==null&&Wn(c);var f=t&&c.deps===null&&c.first===null&&c.nodes_start===null&&c.teardown===null&&(c.f&(Wl|Tn))===0;if(!f&&!o&&l&&(a!==null&&ji(c,a),Ye!==null&&Ye.f&Ht)){var u=Ye;(u.effects??(u.effects=[])).push(c)}return c}function Fi(r){const e=Gr(Sn,null,!1);return or(e,yt),e.teardown=r,e}function pe(r){lo();var e=Oe!==null&&(Oe.f&ur)!==0&&ze!==null&&!ze.m;if(e){var t=ze;(t.e??(t.e=[])).push({fn:r,effect:Oe,reaction:Ye})}else{var l=an(r);return l}}function jn(r){return lo(),As(r)}function Oi(r){const e=Gr(on,r,!0);return(t={})=>new Promise(l=>{t.outro?vr(e,()=>{nr(e),l(void 0)}):(nr(e),l(void 0))})}function an(r){return Gr(Bl,r,!1)}function As(r){return Gr(Sn,r,!0)}function se(r,e=[],t=y){const l=e.map(t);return xr(()=>r(...l.map(s)))}function xr(r,e=0){return Gr(Sn|Mn|e,r,!0)}function Ot(r,e=!0){return Gr(Sn|ur,r,!0,e)}function oo(r){var e=r.teardown;if(e!==null){const t=Ms,l=Ye;ho(!0),Dt(null);try{e.call(null)}finally{ho(t),Dt(l)}}}function ao(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var l=t.next;nr(t,e),t=l}}function Di(r){for(var e=r.first;e!==null;){var t=e.next;e.f&ur||nr(e),e=t}}function nr(r,e=!0){var t=!1;if((e||r.f&ai)&&r.nodes_start!==null){for(var l=r.nodes_start,o=r.nodes_end;l!==null;){var a=l===o?null:zn(l);l.remove(),l=a}t=!0}ao(r,e&&!t),Yn(r,0),or(r,In);var c=r.transitions;if(c!==null)for(const f of c)f.stop();oo(r);var v=r.parent;v!==null&&v.first!==null&&io(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function io(r){var e=r.parent,t=r.prev,l=r.next;t!==null&&(t.next=l),l!==null&&(l.prev=t),e!==null&&(e.first===r&&(e.first=l),e.last===r&&(e.last=t))}function vr(r,e){var t=[];Ns(r,t,!0),co(t,()=>{nr(r),e&&e()})}function co(r,e){var t=r.length;if(t>0){var l=()=>--t||e();for(var o of r)o.out(l)}else e()}function Ns(r,e,t){if(!(r.f&dr)){if(r.f^=dr,r.transitions!==null)for(const c of r.transitions)(c.is_global||t)&&e.push(c);for(var l=r.first;l!==null;){var o=l.next,a=(l.f&Wr)!==0||(l.f&ur)!==0;Ns(l,e,a?t:!1),l=o}}}function Pr(r){uo(r,!0)}function uo(r,e){if(r.f&dr){r.f^=dr,r.f&yt||(r.f^=yt),dn(r)&&(or(r,fr),Wn(r));for(var t=r.first;t!==null;){var l=t.next,o=(t.f&Wr)!==0||(t.f&ur)!==0;uo(t,o?e:!1),t=l}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}let Fn=!1,Ss=[];function fo(){Fn=!1;const r=Ss.slice();Ss=[],_s(r)}function cn(r){Fn||(Fn=!0,queueMicrotask(fo)),Ss.push(r)}function Vi(){Fn&&fo()}const vo=0,Bi=1;let On=!1,Dn=vo,un=!1,fn=null,Kr=!1,Ms=!1;function mo(r){Kr=r}function ho(r){Ms=r}let Ir=[],Xr=0,Z1=[],Ye=null,sr=!1;function Dt(r){Ye=r}let Oe=null;function Vt(r){Oe=r}let lr=null;function Yi(r){lr=r}let kt=null,Lt=0,mr=null;function Wi(r){mr=r}let go=1,Vn=0,kr=!1;function po(){return++go}function dn(r){var m;var e=r.f;if(e&fr)return!0;if(e&Yr){var t=r.deps,l=(e&Ft)!==0;if(t!==null){var o,a,c=(e&Pn)!==0,v=l&&Oe!==null&&!kr,f=t.length;if(c||v){var u=r,d=u.parent;for(o=0;o<f;o++)a=t[o],(c||!((m=a==null?void 0:a.reactions)!=null&&m.includes(u)))&&(a.reactions??(a.reactions=[])).push(u);c&&(u.f^=Pn),v&&d!==null&&!(d.f&Ft)&&(u.f^=Ft)}for(o=0;o<f;o++)if(a=t[o],dn(a)&&so(a),a.wv>r.wv)return!0}(!l||Oe!==null&&!kr)&&or(r,yt)}return!1}function Ui(r,e){for(var t=e;t!==null;){if(t.f&Tn)try{t.fn(r);return}catch{t.f^=Tn}t=t.parent}throw On=!1,r}function Hi(r){return(r.f&In)===0&&(r.parent===null||(r.parent.f&Tn)===0)}function Bn(r,e,t,l){if(On){if(t===null&&(On=!1),Hi(e))throw r;return}t!==null&&(On=!0);{Ui(r,e);return}}function bo(r,e,t=!0){var l=r.reactions;if(l!==null)for(var o=0;o<l.length;o++){var a=l[o];a.f&Ht?bo(a,e,!1):e===a&&(t?or(a,fr):a.f&yt&&or(a,Yr),Wn(a))}}function _o(r){var g;var e=kt,t=Lt,l=mr,o=Ye,a=kr,c=lr,v=ze,f=sr,u=r.f;kt=null,Lt=0,mr=null,Ye=u&(ur|on)?null:r,kr=(u&Ft)!==0&&(!Kr||o===null||f),lr=null,Rn(r.ctx),sr=!1,Vn++;try{var d=(0,r.fn)(),m=r.deps;if(kt!==null){var h;if(Yn(r,Lt),m!==null&&Lt>0)for(m.length=Lt+kt.length,h=0;h<kt.length;h++)m[Lt+h]=kt[h];else r.deps=m=kt;if(!kr)for(h=Lt;h<m.length;h++)((g=m[h]).reactions??(g.reactions=[])).push(r)}else m!==null&&Lt<m.length&&(Yn(r,Lt),m.length=Lt);if(Tr()&&mr!==null&&!sr&&m!==null&&!(r.f&(Ht|Yr|fr)))for(h=0;h<mr.length;h++)bo(mr[h],r);return o!==null&&Vn++,d}finally{kt=e,Lt=t,mr=l,Ye=o,kr=a,lr=c,Rn(v),sr=f}}function Gi(r,e){let t=e.reactions;if(t!==null){var l=ei.call(t,r);if(l!==-1){var o=t.length-1;o===0?t=e.reactions=null:(t[l]=t[o],t.pop())}}t===null&&e.f&Ht&&(kt===null||!kt.includes(e))&&(or(e,Yr),e.f&(Ft|Pn)||(e.f^=Pn),no(e),Yn(e,0))}function Yn(r,e){var t=r.deps;if(t!==null)for(var l=e;l<t.length;l++)Gi(r,t[l])}function Ts(r){var e=r.f;if(!(e&In)){or(r,yt);var t=Oe,l=ze;Oe=r;try{e&Mn?Di(r):ao(r),oo(r);var o=_o(r);r.teardown=typeof o=="function"?o:null,r.wv=go;var a=r.deps,c;nt&&_i&&r.f&fr}catch(v){Bn(v,r,t,l||r.ctx)}finally{Oe=t}}}function wo(){if(Xr>1e3){Xr=0;try{vi()}catch(r){if(fn!==null)Bn(r,fn,null);else throw r}}Xr++}function yo(r){var e=r.length;if(e!==0){wo();var t=Kr;Kr=!0;try{for(var l=0;l<e;l++){var o=r[l];o.f&yt||(o.f^=yt);var a=Qi(o);Ki(a)}}finally{Kr=t}}}function Ki(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var l=r[t];if(!(l.f&(In|dr)))try{dn(l)&&(Ts(l),l.deps===null&&l.first===null&&l.nodes_start===null&&(l.teardown===null?io(l):l.fn=null))}catch(o){Bn(o,l,null,l.ctx)}}}function Xi(){if(un=!1,Xr>1001)return;const r=Ir;Ir=[],yo(r),un||(Xr=0,fn=null)}function Wn(r){Dn===vo&&(un||(un=!0,queueMicrotask(Xi))),fn=r;for(var e=r;e.parent!==null;){e=e.parent;var t=e.f;if(t&(on|ur)){if(!(t&yt))return;e.f^=yt}}Ir.push(e)}function Qi(r){var e=[],t=r.first;e:for(;t!==null;){var l=t.f,o=(l&ur)!==0,a=o&&(l&yt)!==0,c=t.next;if(!a&&!(l&dr)){if(l&Bl)e.push(t);else if(o)t.f^=yt;else{var v=Ye;try{Ye=t,dn(t)&&Ts(t)}catch(d){Bn(d,t,null,t.ctx)}finally{Ye=v}}var f=t.first;if(f!==null){t=f;continue}}if(c===null){let d=t.parent;for(;d!==null;){if(r===d)break e;var u=d.next;if(u!==null){t=u;continue e}d=d.parent}}t=c}return e}function xo(r){var e=Dn,t=Ir;try{wo();const o=[];Dn=Bi,Ir=o,un=!1,yo(t);var l=r==null?void 0:r();return Vi(),(Ir.length>0||o.length>0)&&xo(),Xr=0,fn=null,l}finally{Dn=e,Ir=t}}function s(r){var e=r.f,t=(e&Ht)!==0;if(Ye!==null&&!sr){lr!==null&&lr.includes(r)&&pi();var l=Ye.deps;r.rv<Vn&&(r.rv=Vn,kt===null&&l!==null&&l[Lt]===r?Lt++:kt===null?kt=[r]:(!kr||!kt.includes(r))&&kt.push(r))}else if(t&&r.deps===null&&r.effects===null){var o=r,a=o.parent;a!==null&&!(a.f&Ft)&&(o.f^=Ft)}return t&&(o=r,dn(o)&&so(o)),r.v}function Nt(r){var e=sr;try{return sr=!0,r()}finally{sr=e}}const Ji=-7169;function or(r,e){r.f=r.f&Ji|e}function Zi(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(yr in r)Ps(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&yr in t&&Ps(t)}}}function Ps(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let l in r)try{Ps(r[l],e)}catch{}const t=bs(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const l=Vl(t);for(let o in l){const a=l[o].get;if(a)try{a.call(r)}catch{}}}}}const $i=["touchstart","touchmove"];function ec(r){return $i.includes(r)}let ko=!1;function tc(){ko||(ko=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function Is(r){var e=Ye,t=Oe;Dt(null),Vt(null);try{return r()}finally{Dt(e),Vt(t)}}function rc(r,e,t,l=t){r.addEventListener(e,()=>Is(t));const o=r.__on_r;o?r.__on_r=()=>{o(),l(!0)}:r.__on_r=()=>l(!0),tc()}const Eo=new Set,Rs=new Set;function nc(r,e,t,l={}){function o(a){if(l.capture||vn.call(e,a),!a.cancelBubble)return Is(()=>t==null?void 0:t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?cn(()=>{e.addEventListener(r,o,l)}):e.addEventListener(r,o,l),o}function Er(r,e,t,l,o){var a={capture:l,passive:o},c=nc(r,e,t,a);(e===document.body||e===window||e===document)&&Fi(()=>{e.removeEventListener(r,c,a)})}function $e(r){for(var e=0;e<r.length;e++)Eo.add(r[e]);for(var t of Rs)t(r)}function vn(r){var E;var e=this,t=e.ownerDocument,l=r.type,o=((E=r.composedPath)==null?void 0:E.call(r))||[],a=o[0]||r.target,c=0,v=r.__root;if(v){var f=o.indexOf(v);if(f!==-1&&(e===document||e===window)){r.__root=e;return}var u=o.indexOf(e);if(u===-1)return;f<=u&&(c=f)}if(a=o[c]||r.target,a!==e){ti(r,"currentTarget",{configurable:!0,get(){return a||t}});var d=Ye,m=Oe;Dt(null),Vt(null);try{for(var h,g=[];a!==null;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var _=a["__"+l];if(_!==void 0&&!a.disabled)if(Vr(_)){var[b,...A]=_;b.apply(a,[r,...A])}else _.call(a,r)}catch(N){h?g.push(N):h=N}if(r.cancelBubble||p===e||p===null)break;a=p}if(h){for(let N of g)queueMicrotask(()=>{throw N});throw h}}finally{r.__root=e,delete r.currentTarget,Dt(d),Vt(m)}}}function Ls(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function Qr(r,e){var t=Oe;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function $(r,e){var t=(e&Xl)!==0,l=(e&Mi)!==0,o,a=!r.startsWith("<!>");return()=>{o===void 0&&(o=Ls(a?r:"<!>"+r),t||(o=Rt(o)));var c=l||$l?document.importNode(o,!0):o.cloneNode(!0);if(t){var v=Rt(c),f=c.lastChild;Qr(v,f)}else Qr(c,c);return c}}function _e(r,e,t="svg"){var l=!r.startsWith("<!>"),o=(e&Xl)!==0,a=`<${t}>${l?r:"<!>"+r}</${t}>`,c;return()=>{if(!c){var v=Ls(a),f=Rt(v);if(o)for(c=document.createDocumentFragment();Rt(f);)c.appendChild(Rt(f));else c=Rt(f)}var u=c.cloneNode(!0);if(o){var d=Rt(u),m=u.lastChild;Qr(d,m)}else Qr(u,u);return u}}function me(){var r=document.createDocumentFragment(),e=document.createComment(""),t=Cs();return r.append(e,t),Qr(e,t),r}function T(r,e){r!==null&&r.before(e)}let qs=!0;function de(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function sc(r,e){return lc(r,e)}const Jr=new Map;function lc(r,{target:e,anchor:t,props:l={},events:o,context:a,intro:c=!0}){Ri();var v=new Set,f=m=>{for(var h=0;h<m.length;h++){var g=m[h];if(!v.has(g)){v.add(g);var p=ec(g);e.addEventListener(g,vn,{passive:p});var _=Jr.get(g);_===void 0?(document.addEventListener(g,vn,{passive:p}),Jr.set(g,1)):Jr.set(g,_+1)}}};f(ps(Eo)),Rs.add(f);var u=void 0,d=Oi(()=>{var m=t??e.appendChild(Cs());return Ot(()=>{if(a){he({});var h=ze;h.c=a}o&&(l.$$events=o),qs=c,u=r(m,l)||{},qs=!0,a&&ge()}),()=>{var p;for(var h of v){e.removeEventListener(h,vn);var g=Jr.get(h);--g===0?(document.removeEventListener(h,vn),Jr.delete(h)):Jr.set(h,g)}Rs.delete(f),m!==t&&((p=m.parentNode)==null||p.removeChild(m))}});return oc.set(u,d),u}let oc=new WeakMap;const zs=0,Un=1,js=2;function Fs(r,e,t,l,o){var a=r,c=Tr(),v=ze,f=ht,u,d,m,h=(c?xt:Ln)(void 0),g=(c?xt:Ln)(void 0),p=!1;function _(A,E){p=!0,E&&(Vt(b),Dt(b),Rn(v));try{A===zs&&t&&(u?Pr(u):u=Ot(()=>t(a))),A===Un&&l&&(d?Pr(d):d=Ot(()=>l(a,h))),A===js&&o&&(m?Pr(m):m=Ot(()=>o(a,g))),A!==zs&&u&&vr(u,()=>u=null),A!==Un&&d&&vr(d,()=>d=null),A!==js&&m&&vr(m,()=>m=null)}finally{E&&(Rn(null),Dt(null),Vt(null),xo())}}var b=xr(()=>{if(f!==(f=e())){if(si(f)){var A=f;p=!1,A.then(E=>{A===f&&(Hr(h,E),_(Un,!0))},E=>{if(A===f&&(Hr(g,E),_(js,!0),!o))throw g.v}),cn(()=>{p||_(zs,!0)})}else Hr(h,f),_(Un,!1);return()=>f=ht}})}function H(r,e,t=!1){var l=r,o=null,a=null,c=ht,v=t?Wr:0,f=!1;const u=(m,h=!0)=>{f=!0,d(h,m)},d=(m,h)=>{c!==(c=m)&&(c?(o?Pr(o):h&&(o=Ot(()=>h(l))),a&&vr(a,()=>{a=null})):(a?Pr(a):h&&(a=Ot(()=>h(l))),o&&vr(o,()=>{o=null})))};xr(()=>{f=!1,e(u),f||d(null,null)},v)}function mn(r,e,t){var l=r,o=ht,a,c=Tr()?ci:Gl;xr(()=>{c(o,o=e())&&(a&&vr(a),a=Ot(()=>t(l)))})}function je(r,e){return e}function ac(r,e,t,l){for(var o=[],a=e.length,c=0;c<a;c++)Ns(e[c].e,o,!0);var v=a>0&&o.length===0&&t!==null;if(v){var f=t.parentNode;Li(f),f.append(t),l.clear(),Cr(r,e[0].prev,e[a-1].next)}co(o,()=>{for(var u=0;u<a;u++){var d=e[u];v||(l.delete(d.k),Cr(r,d.prev,d.next)),nr(d.e,!v)}})}function Ie(r,e,t,l,o,a=null){var c=r,v={flags:e,items:new Map,first:null},f=(e&Kl)!==0;if(f){var u=r;c=u.appendChild(Cs())}var d=null,m=!1,h=ro(()=>{var g=t();return Vr(g)?g:g==null?[]:ps(g)});xr(()=>{var g=s(h),p=g.length;m&&p===0||(m=p===0,ic(g,v,c,o,e,l,t),a!==null&&(p===0?d?Pr(d):d=Ot(()=>a(c)):d!==null&&vr(d,()=>{d=null})),s(h))})}function ic(r,e,t,l,o,a,c){var Y,D,S,O;var v=(o&yi)!==0,f=(o&(ys|xs))!==0,u=r.length,d=e.items,m=e.first,h=m,g,p=null,_,b=[],A=[],E,N,C,k;if(v)for(k=0;k<u;k+=1)E=r[k],N=a(E,k),C=d.get(N),C!==void 0&&((Y=C.a)==null||Y.measure(),(_??(_=new Set)).add(C));for(k=0;k<u;k+=1){if(E=r[k],N=a(E,k),C=d.get(N),C===void 0){var q=h?h.e.nodes_start:t;p=uc(q,e,p,p===null?e.first:p.next,E,N,k,l,o,c),d.set(N,p),b=[],A=[],h=p.next;continue}if(f&&cc(C,E,k,o),C.e.f&dr&&(Pr(C.e),v&&((D=C.a)==null||D.unfix(),(_??(_=new Set)).delete(C))),C!==h){if(g!==void 0&&g.has(C)){if(b.length<A.length){var M=A[0],w;p=M.prev;var P=b[0],U=b[b.length-1];for(w=0;w<b.length;w+=1)Co(b[w],M,t);for(w=0;w<A.length;w+=1)g.delete(A[w]);Cr(e,P.prev,U.next),Cr(e,p,P),Cr(e,U,M),h=M,p=U,k-=1,b=[],A=[]}else g.delete(C),Co(C,h,t),Cr(e,C.prev,C.next),Cr(e,C,p===null?e.first:p.next),Cr(e,p,C),p=C;continue}for(b=[],A=[];h!==null&&h.k!==N;)h.e.f&dr||(g??(g=new Set)).add(h),A.push(h),h=h.next;if(h===null)continue;C=h}b.push(C),p=C,h=C.next}if(h!==null||g!==void 0){for(var z=g===void 0?[]:ps(g);h!==null;)h.e.f&dr||z.push(h),h=h.next;var W=z.length;if(W>0){var V=o&Kl&&u===0?t:null;if(v){for(k=0;k<W;k+=1)(S=z[k].a)==null||S.measure();for(k=0;k<W;k+=1)(O=z[k].a)==null||O.fix()}ac(e,z,V,d)}}v&&cn(()=>{var L;if(_!==void 0)for(C of _)(L=C.a)==null||L.apply()}),Oe.first=e.first&&e.first.e,Oe.last=p&&p.e}function cc(r,e,t,l){l&ys&&Hr(r.v,e),l&xs?Hr(r.i,t):r.i=t}function uc(r,e,t,l,o,a,c,v,f,u){var d=(f&ys)!==0,m=(f&xi)===0,h=d?m?Ln(o):xt(o):o,g=f&xs?xt(c):c,p={i:g,v:h,k:a,a:null,e:null,prev:t,next:l};try{return p.e=Ot(()=>v(r,h,g,u),Es),p.e.prev=t&&t.e,p.e.next=l&&l.e,t===null?e.first=p:(t.next=p,t.e.next=p.e),l!==null&&(l.prev=p,l.e.prev=p.e),p}finally{}}function Co(r,e,t){for(var l=r.next?r.next.e.nodes_start:t,o=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==l;){var c=zn(a);o.before(a),a=c}}function Cr(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function bt(r,e,t,l,o){var a=r,c="",v;xr(()=>{c!==(c=e()??"")&&(v!==void 0&&(nr(v),v=void 0),c!==""&&(v=Ot(()=>{var f=c+"";t&&(f=`<svg>${f}</svg>`);var u=Ls(f);if((t||l)&&(u=Rt(u)),Qr(Rt(u),u.lastChild),t||l)for(;Rt(u);)a.before(Rt(u));else a.before(u)})))})}function Rr(r,e,...t){var l=r,o=dt,a;xr(()=>{o!==(o=e())&&(a&&(nr(a),a=null),a=Ot(()=>o(l,...t)))},Wr)}function Os(r,e,t){var l=r,o,a;xr(()=>{o!==(o=e())&&(a&&(vr(a),a=null),o&&(a=Ot(()=>t(l,o))))},Wr)}function Ao(r){var e,t,l="";if(typeof r=="string"||typeof r=="number")l+=r;else if(typeof r=="object")if(Array.isArray(r)){var o=r.length;for(e=0;e<o;e++)r[e]&&(t=Ao(r[e]))&&(l&&(l+=" "),l+=t)}else for(t in r)r[t]&&(l&&(l+=" "),l+=t);return l}function fc(){for(var r,e,t=0,l="",o=arguments.length;t<o;t++)(r=arguments[t])&&(e=Ao(r))&&(l&&(l+=" "),l+=e);return l}function dc(r){return typeof r=="object"?fc(r):r??""}function R(r,e,t,l){var o=r.__attributes??(r.__attributes={});o[e]!==(o[e]=t)&&(e==="style"&&"__styles"in r&&(r.__styles={}),e==="loading"&&(r[ii]=t),t==null?r.removeAttribute(e):typeof t!="string"&&vc(r).includes(e)?r[e]=t:r.setAttribute(e,t))}var No=new Map;function vc(r){var e=No.get(r.nodeName);if(e)return e;No.set(r.nodeName,e=[]);for(var t,l=r,o=Element.prototype;o!==l;){t=Vl(l);for(var a in t)t[a].set&&e.push(a);l=bs(l)}return e}function Ds(r,e,t){var l=r.__className,o=So(e);(l!==o||Es)&&(o===""?r.removeAttribute("class"):r.setAttribute("class",o),r.__className=o)}function Zr(r,e,t){var l=r.__className,o=So(e);(l!==o||Es)&&(e==null?r.removeAttribute("class"):r.className=o,r.__className=o)}function So(r,e){return(r??"")+""}function St(r,e,t){if(t){if(r.classList.contains(e))return;r.classList.add(e)}else{if(!r.classList.contains(e))return;r.classList.remove(e)}}const mc=()=>performance.now(),hr={tick:r=>requestAnimationFrame(r),now:()=>mc(),tasks:new Set};function Mo(){const r=hr.now();hr.tasks.forEach(e=>{e.c(r)||(hr.tasks.delete(e),e.f())}),hr.tasks.size!==0&&hr.tick(Mo)}function hc(r){let e;return hr.tasks.size===0&&hr.tick(Mo),{promise:new Promise(t=>{hr.tasks.add(e={c:r,f:t})}),abort(){hr.tasks.delete(e)}}}function Hn(r,e){Is(()=>{r.dispatchEvent(new CustomEvent(e))})}function gc(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const e=r.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function To(r){const e={},t=r.split(";");for(const l of t){const[o,a]=l.split(":");if(!o||a===void 0)break;const c=gc(o.trim());e[c]=a.trim()}return e}const pc=r=>r;function bc(r,e,t,l){var o=(r&Si)!==0,a="both",c,v=e.inert,f=e.style.overflow,u,d;function m(){var b=Ye,A=Oe;Dt(null),Vt(null);try{return c??(c=t()(e,(l==null?void 0:l())??{},{direction:a}))}finally{Dt(b),Vt(A)}}var h={is_global:o,in(){e.inert=v,Hn(e,"introstart"),u=Vs(e,m(),d,1,()=>{Hn(e,"introend"),u==null||u.abort(),u=c=void 0,e.style.overflow=f})},out(b){e.inert=!0,Hn(e,"outrostart"),d=Vs(e,m(),u,0,()=>{Hn(e,"outroend"),b==null||b()})},stop:()=>{u==null||u.abort(),d==null||d.abort()}},g=Oe;if((g.transitions??(g.transitions=[])).push(h),qs){var p=o;if(!p){for(var _=g.parent;_&&_.f&Wr;)for(;(_=_.parent)&&!(_.f&Mn););p=!_||(_.f&Yl)!==0}p&&an(()=>{Nt(()=>h.in())})}}function Vs(r,e,t,l,o){var a=l===1;if(Br(e)){var c,v=!1;return cn(()=>{if(!v){var b=e({direction:a?"in":"out"});c=Vs(r,b,t,l,o)}}),{abort:()=>{v=!0,c==null||c.abort()},deactivate:()=>c.deactivate(),reset:()=>c.reset(),t:()=>c.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return o(),{abort:dt,deactivate:dt,reset:dt,t:()=>l};const{delay:f=0,css:u,tick:d,easing:m=pc}=e;var h=[];if(a&&t===void 0&&(d&&d(0,1),u)){var g=To(u(0,1));h.push(g,g)}var p=()=>1-l,_=r.animate(h,{duration:f});return _.onfinish=()=>{var b=(t==null?void 0:t.t())??1-l;t==null||t.abort();var A=l-b,E=e.duration*Math.abs(A),N=[];if(E>0){var C=!1;if(u)for(var k=Math.ceil(E/16.666666666666668),q=0;q<=k;q+=1){var M=b+A*m(q/k),w=To(u(M,1-M));N.push(w),C||(C=w.overflow==="hidden")}C&&(r.style.overflow="hidden"),p=()=>{var P=_.currentTime;return b+A*m(P/E)},d&&hc(()=>{if(_.playState!=="running")return!1;var P=p();return d(P,1-P),!0})}_=r.animate(N,{duration:E,fill:"forwards"}),_.onfinish=()=>{p=()=>l,d==null||d(l,1-l),o()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=dt)},deactivate:()=>{o=dt},reset:()=>{l===0&&(d==null||d(1,0))},t:()=>p()}}function Bs(r,e,t=e){var l=Tr();rc(r,"input",o=>{var a=o?r.defaultValue:r.value;if(a=Ys(r)?Ws(a):a,t(a),l&&a!==(a=e())){var c=r.selectionStart,v=r.selectionEnd;r.value=a??"",v!==null&&(r.selectionStart=c,r.selectionEnd=Math.min(v,r.value.length))}}),Nt(e)==null&&r.value&&t(Ys(r)?Ws(r.value):r.value),As(()=>{var o=e();Ys(r)&&o===Ws(r.value)||r.type==="date"&&!o&&!r.value||o!==r.value&&(r.value=o??"")})}function Ys(r){var e=r.type;return e==="number"||e==="range"}function Ws(r){return r===""?null:+r}const cs=class cs{constructor(e){Nn(this,is);Nn(this,Mr,new WeakMap);Nn(this,ln);Nn(this,kn);Dl(this,kn,e)}observe(e,t){var l=_r(this,Mr).get(e)||new Set;return l.add(t),_r(this,Mr).set(e,l),Za(this,is,$a).call(this).observe(e,_r(this,kn)),()=>{var o=_r(this,Mr).get(e);o.delete(t),o.size===0&&(_r(this,Mr).delete(e),_r(this,ln).unobserve(e))}}};Mr=new WeakMap,ln=new WeakMap,kn=new WeakMap,is=new WeakSet,$a=function(){return _r(this,ln)??Dl(this,ln,new ResizeObserver(e=>{for(var t of e){cs.entries.set(t.target,t);for(var l of _r(this,Mr).get(t.target)||[])l(t)}}))},Dr(cs,"entries",new WeakMap);let Us=cs;var _c=new Us({box:"border-box"});function Po(r,e,t){var l=_c.observe(r,()=>t(r[e]));an(()=>(Nt(()=>t(r[e])),l))}function Io(r,e){return r===e||(r==null?void 0:r[yr])===e}function $r(r={},e,t,l){return an(()=>{var o,a;return As(()=>{o=a,a=[],Nt(()=>{r!==t(...a)&&(e(r,...a),o&&Io(t(...o),r)&&e(null,...o))})}),()=>{cn(()=>{a&&Io(t(...a),r)&&e(null,...a)})}}),r}function wc(r=!1){const e=ze,t=e.l.u;if(!t)return;let l=()=>Zi(e.s);if(r){let o=0,a={};const c=y(()=>{let v=!1;const f=e.s;for(const u in f)f[u]!==a[u]&&(a[u]=f[u],v=!0);return v&&o++,o});l=()=>s(c)}t.b.length&&jn(()=>{Ro(e,l),_s(t.b)}),pe(()=>{const o=Nt(()=>t.m.map(li));return()=>{for(const a of o)typeof a=="function"&&a()}}),t.a.length&&pe(()=>{Ro(e,l),_s(t.a)})}function Ro(r,e){if(r.l.s)for(const t of r.l.s)s(t);e()}let Gn=!1;function yc(r){var e=Gn;try{return Gn=!1,[r(),Gn]}finally{Gn=e}}const xc={get(r,e){if(!r.exclude.includes(e))return r.props[e]},set(r,e){return!1},getOwnPropertyDescriptor(r,e){if(!r.exclude.includes(e)&&e in r.props)return{enumerable:!0,configurable:!0,value:r.props[e]}},has(r,e){return r.exclude.includes(e)?!1:e in r.props},ownKeys(r){return Reflect.ownKeys(r.props).filter(e=>!r.exclude.includes(e))}};function kc(r,e,t){return new Proxy({props:r,exclude:e},xc)}const Ec={get(r,e){let t=r.props.length;for(;t--;){let l=r.props[t];if(Br(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l)return l[e]}},set(r,e,t){let l=r.props.length;for(;l--;){let o=r.props[l];Br(o)&&(o=o());const a=wr(o,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(r,e){let t=r.props.length;for(;t--;){let l=r.props[t];if(Br(l)&&(l=l()),typeof l=="object"&&l!==null&&e in l){const o=wr(l,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(r,e){if(e===yr||e===Ul)return!1;for(let t of r.props)if(Br(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(r){const e=[];for(let t of r.props){Br(t)&&(t=t());for(const l in t)e.includes(l)||e.push(l)}return e}};function Lr(...r){return new Proxy({props:r},Ec)}function K(r,e,t,l){var q;var o=(t&ki)!==0,a=!Ur||(t&Ei)!==0,c=(t&Ai)!==0,v=(t&Ni)!==0,f=!1,u;c?[u,f]=yc(()=>r[e]):u=r[e];var d=yr in r||Ul in r,m=c&&(((q=wr(r,e))==null?void 0:q.set)??(d&&e in r&&(M=>r[e]=M)))||void 0,h=l,g=!0,p=!1,_=()=>(p=!0,g&&(g=!1,v?h=Nt(l):h=l),h);u===void 0&&l!==void 0&&(m&&a&&mi(),u=_(),m&&m(u));var b;if(a)b=()=>{var M=r[e];return M===void 0?_():(g=!0,p=!1,M)};else{var A=(o?y:ro)(()=>r[e]);A.f|=oi,b=()=>{var M=s(A);return M!==void 0&&(h=void 0),M===void 0?h:M}}if(!(t&Ci))return b;if(m){var E=r.$$legacy;return function(M,w){return arguments.length>0?((!a||!w||E||f)&&m(w?b():M),M):b()}}var N=!1,C=Ln(u),k=y(()=>{var M=b(),w=s(C);return N?(N=!1,w):C.v=M});return o||(k.equals=ws),function(M,w){if(arguments.length>0){const P=w?s(k):a&&c?ee(M):M;return k.equals(P)||(N=!0,G(C,P),p&&h!==void 0&&(h=P),Nt(()=>s(k))),M}return s(k)}}function Lo(r){ze===null&&ks(),Ur&&ze.l!==null?Ac(ze).m.push(r):pe(()=>{const e=Nt(r);if(typeof e=="function")return e})}function Cc(r){ze===null&&ks(),Lo(()=>()=>Nt(r))}function Ac(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Nc="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Nc),wi();function qo(r){if(Me(r))return qo(r.v);const e=new xe.valuesConstructor(r.length-1);for(let t=0;t<r.length-1;t++)e[t]=r[t+1]-r[t];return new xe(e)}function zo(r,e){if(Me(r))return zo(r.v,e);const t=en(r),l=(t[1]-t[0])*e;return[t[0]-l,t[1]+l]}function en(r){if(Me(r))return en(r.v);let e=r[0],t=r[0];for(let l=1;l<r.length;l++)r[l]<e&&(e=r[l]),r[l]>t&&(t=r[l]);return[e,t]}function Hs(r,e){return Me(r)?Hs(r.v,e):Math.sqrt(Gs(r,e))}function Gs(r,e){if(e===void 0&&(e=!1),Me(r))return Gs(r.v);const t=hn(r);let l=0;for(let o=0;o<r.length;o++){const a=r[o]-t;l=l+a*a}return l/(e?r.length:r.length-1)}function hn(r){return Me(r)?hn(r.v):jo(r)/r.length}function jo(r){if(Me(r))return jo(r.v);let e=0;for(let t=0;t<r.length;t++)e=e+r[t];return e}function Fo(r){if(Me(r))return Fo(r.v);let e=1;for(let t=0;t<r.length;t++)e=e*r[t];return e}function tn(r){return Me(r)||Kt(r)?r.v[Ks(r.v)-1]:r[Ks(r)-1]}function Ks(r){if(Me(r)||Kt(r))return Ks(r.v);let e=1,t=r[0];for(let l=2;l<=r.length;l++)r[l-1]<t&&(e=l,t=r[l-1]);return e}function qt(r){return Me(r)||Kt(r)?r.v[Xs(r.v)-1]:r[Xs(r)-1]}function Xs(r){if(Me(r)||Kt(r))return Xs(r.v);let e=1,t=r[0];for(let l=2;l<=r.length;l++)r[l-1]>t&&(e=l,t=r[l-1]);return e}const Qs=30,Sc=1e-7,Mc=1e-7,Oo=1e-13,Do=1e3,Tc=100;function Vo(r,e,t,l,o){l===void 0&&(l=Do),t===void 0&&(t=Oo),o===void 0&&(o=Tc);let a=t,c=l,v=(c-a)/o;for(let f=0;f<o;f++){let u,d;for(let g=0;g<o;g++){u=a+g*v,d=a+(g+1)*v;const p=e(u),_=e(d);if(p<=r&&_>=r)break}const m=(u+d)/2,h=e(m);if(Math.abs(h-r)<Sc||(a=u,c=d,v=(c-a)/o,v/c<Mc))return m}return(a+c)/2}function Bo(r,e=0,t=1){let l=xe.zeros(r);for(let o=0;o<r;o++)l.v[o]=e+Math.random()*(t-e);return l}function Yo(r,e=0,t=1){let l=xe.zeros(r);for(let o=0;o<r;o++){const a=Math.sqrt(-2*Math.log(Math.random())),c=2*Math.PI*Math.random();l.v[o]=a*Math.sin(c)*t+e}return l}function Kn(r,e=0,t=1){if(Me(r))return r.apply(o=>Kn(o,e,t));const l=1/(Math.sqrt(2)*t);return .5*(1+Ic((r-e)*l))}function Xn(r,e=0,t=1){if(Me(r))return r.apply(V=>Xn(V,e,t));if(e!==0||t!==1)return Xn(r)*t+e;if(r<0||r>1)throw Error('Parameter "p" must be between 0 and 1.');if(r<1e-10)return-1/0;if(r>.9999999999)return 1/0;const l=.425,o=5,a=.180625,c=1.6,v=3.3871327179,f=5.0434271938*10,u=1.5929113202*100,d=5.910937472*10,m=1.7895169469*10,h=7.8757757664*10,g=6.71875636*10,p=1.4234372777,_=2.75681539,b=1.3067284816,A=1.7023821103*.1,E=7.370016425*.1,N=1.2021132975*.1,C=6.657905115,k=3.081226386,q=4.2868294337*.1,M=1.7337203997*.01,w=2.4197894225*.1,P=1.2258202635*.01,U=r-.5;let z;if(Math.abs(U)<=l)return z=a-U*U,U*(((d*z+u)*z+f)*z+v)/(((g*z+h)*z+m)*z+1);z=U<0?r:1-r,z=Math.sqrt(-Math.log(z));let W;return z<=o?(z=z-c,W=(((A*z+b)*z+_)*z+p)/((N*z+E)*z+1)):(z=z-o,W=((M*z+q)*z+k+C)/((P*z+w)*z+1)),U<0?-W:W}function Js(r,e,t){if(t<=0)throw new Error('pf: parameters "df1" and "df2" must be positive numbers.');if(Array.isArray(r))return Js(Ge(r),e,t);if(Me(r))return r.apply(l=>Js(l,e,t));if(r<=0)return 0;if(t<=0&&ML_ERR_return_NAN,t==Number.POSITIVE_INFINITY){if(e==Number.POSITIVE_INFINITY){if(r<1)return 0;if(r==1)return .5;if(r>1)return 1}return Qn(r*e,e)}return e==Number.POSITIVE_INFINITY?1-Qn(t/r,t):e*r>t?1-Jn(t/(t+e*r),t/2,e/2):Jn(e*r/(t+e*r),e/2,t/2)}function Wo(r,e,t){if(r===0)return 0;if(r===1)return Inf;if(t<=0)return NaN;let l=Do,o=Oo;if(r>.9997&&t===1?(l=1e7,o=6e5,r=.9997):r>.9992&&t===1?(l=1e7,o=6e5):r>.997&&t===1?(l=1e6,o=45e3):r>.992&&t===1?(l=1e5,o=5e3):r>.97&&t===1&&(l=1e4,o=400),Array.isArray(r))return Wo(Ge(r),e,t);const a=v=>Js(v,e,t);function c(v,f,u){return v===0?0:v===1?Inf:f===0?NaN:u===0?NaN:Vo(v,a,o,l)}return Me(r)?r.apply(c,e,t):c(r,e,t)}function Qn(r,e){if(Array.isArray(r))return Qn(Ge(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(l);function a(f){if(f===0)return 0;if(e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30)return 1;const u=f/e,d=Math.pow(u,1/6)-.5*Math.pow(u,1/3)+1/3*Math.pow(u,1/2);return Kn(d,t,o)}function c(f){return f===0?0:e===0||e>100&&f>e*2||e>50&&f>e*3||e>10&&f>e*5||e>5&&f>e*8||f>e*30?1:Pc(f/2,e/2)/gn(e/2)}const v=e>Qs?a:c;return Me(r)?r.apply(v):v(r)}function Bt(r,e){if(Array.isArray(r))return Bt(Ge(r),e);const t=5/6-1/(9*e)-7/(648*e*e)+25/(2187*e*e*e),l=1/(18*e)+1/(162*e*e)-37/(1164*e*e*e),o=Math.sqrt(l);function a(f){if(f===0)return 0;if(f===1)return Inf;if(e===0)return 0;const u=Xn(f,t,o),d=Math.pow(Math.sqrt(36*u*u-30*u+13)/4+(3*u-3/2)/2+1/8,1/3);return Math.pow(d-3/(4*d)+.5,6)*e}function c(f){return f===0?0:f===1?Inf:e===0?0:Vo(f,d=>Qn(d,e),0,Qs*10)}const v=e>Qs?a:c;return Me(r)?r.apply(v):v(r)}function Jn(r,e,t){if(Array.isArray(r))return Jn(Ge(r),e,t);if(Me(r))return r.apply(o=>Jn(o,e,t));if(r<=0)return 0;if(r>=1)return 1;if(e==0||t==0||!Number.isFinite(e)||!Number.isFinite(t))return e==0&&t==0?.5:e==0||e/t==0?1:t==0||t/e==0||r<.5?0:1;const l=.5-r+.5;return Wc(e,t,r,l)}function gn(r){if(Me(r))return r.apply(gn);if(r<=0)throw new Error("gamma: the function only works with arguments > 0.");const e=[676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23];if(r<.5)return Math.PI/(Math.sin(Math.PI*r)+gn(1-r));r=r-1;let t=.9999999999998099;for(let o=0;o<e.length;o++)t=t+e[o]/(r+o+1);const l=r+e.length-.5;return Math.sqrt(2*Math.PI)*Math.pow(l,r+.5)*Math.exp(-l)*t}function Pc(r,e){let o=0;for(let a=0;a<1e4;a++){const c=Math.pow(r,a)/gn(e+a+1);if(isNaN(c)||c<1e-18)break;o+=c}return Math.pow(r,e)*gn(e)*Math.exp(-r)*o}function Ic(r){const e=r>=0?1:-1;r=Math.abs(r);const t=.254829592,l=-.284496736,o=1.421413741,a=-1.453152027,c=1.061405429,f=1/(1+.3275911*r),u=1-((((c*f+a)*f+o)*f+l)*f+t)*f*Math.exp(-r*r);return e*u}function Uo(r,e){const t=.564189583547756,l=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],o=[.00301048631703895,.0538971687740286,.375795757275549],a=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],c=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],v=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],f=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let u,d,m,h,g=Math.abs(e);if(g<=.5)return d=e*e,h=(((l[0]*d+l[1])*d+l[2])*d+l[3])*d+l[4]+1,m=((o[0]*d+o[1])*d+o[2])*d+1,u=.5-e*(h/m)+.5,u=Math.exp(d)*u,u;if(g<=4)h=((((((a[0]*g+a[1])*g+a[2])*g+a[3])*g+a[4])*g+a[5])*g+a[6])*g+a[7],m=((((((c[0]*g+c[1])*g+c[2])*g+c[3])*g+c[4])*g+c[5])*g+c[6])*g+c[7],u=h/m;else{if(e<=-5.6)return u=2,u=Math.exp(e*e)*2,u;d=1/(e*e),h=(((v[0]*d+v[1])*d+v[2])*d+v[3])*d+v[4],m=(((f[0]*d+f[1])*d+f[2])*d+f[3])*d+1,u=(t-d*h/m)/g}return e<0&&(u=Math.exp(e*e)*2-u),u}function Ho(r,e){let t=r+e-2;return t<=.25?Yt(t+1):t<=1.25?Yt(t)+Nr(t):Yt(t-1)+Math.log(t*(t+1))}function Zn(r,e){const t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;let f,u,d,m,h,g,p,_,b,A,E,N,C,k,q;return d=Math.min(r,e),m=Math.max(r,e),g=d/m,h=g/(g+1),b=1/(g+1),N=b*b,A=b+N+1,E=b+N*A+1,C=b+N*E+1,k=b+N*C+1,q=b+N*k+1,u=1/m,p=u*u,_=((((v*q*p+c*k)*p+a*C)*p+o*E)*p+l*A)*p+t,_*=h/m,u=1/d,p=u*u,f=(((((v*p+c)*p+a)*p+o)*p+l)*p+t)/d+_,f}function Ze(r){let e,t,l,o,a;if(t=r,e=r-.5,e>0&&(t=e-.5),t<0){const c=[-.422784335098468,-.771330383816272,-.244757765222226,.118378989872749,.000930357293360349,-.0118290993445146,.00223047661158249,.000266505979058923,-.000132674909766242],v=.273076135303957,f=.0559398236957378;return a=(((((((c[8]*t+c[7])*t+c[6])*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],o=(f*t+v)*t+1,l=a/o,e>0?t*l/r:r*(l+.5+.5)}else{if(t==0)return 0;{const c=[.577215664901533,-.409078193005776,-.230975380857675,.0597275330452234,.0076696818164949,-.00514889771323592,.000589597428611429],v=[1,.427569613095214,.158451672430138,.0261132021441447,.00423244297896961];return a=(((((c[6]*t+c[5])*t+c[4])*t+c[3])*t+c[2])*t+c[1])*t+c[0],o=(((v[4]*t+v[3])*t+v[2])*t+v[1])*t+1,l=a/o,e>0?t/r*(l-.5-.5):r*l}}}function Rc(r,e,t){let l,o,a,c;if(r<-1.1||r>1.1)return Number.NaN;c=r*2,a=o=0,l=0;for(let v=1;v<=t;v++)a=o,o=l,l=c*o-a+e[t-v];return(l-a)*.5}function Go(r){const e=[1.037869356274377,-.13364301504908918,.019408249135520562,-.0030107551127535777,.0004869461479715485,-8105488189317536e-20,13778847799559525e-21,-2380221089435897e-21,41640416213865184e-23,-7359582837807599e-23,13117611876241675e-24,-23546709317742423e-25,42522773276035e-23,-771908941348408e-25,1407574648135907e-26,-25769072058024682e-28,4734240666629442e-28,-8724901267474264e-29,1612461490274055e-29,-29875652015665774e-31,5548070120908289e-31,-10324619158271569e-32,19250239203049852e-33,-3595507346526515e-33,6726454253787686e-34,-1260262416873522e-34,2364488440860621e-35,-44419377050807936e-37,8354659446403425e-37,-15731559416479563e-38,29653128740247425e-39,-5594958348181595e-39,1056635426883568e-39,-19972483680670205e-41,3778297781883936e-41,-7153158688908174e-42,13552488463674214e-43,-25694673048487566e-44,48747756066216946e-45,-9254211253084972e-45,1757859784176024e-45,-3341002667773101e-46,6353393618023618e-47],t=22,l=-.999999985;if(r==0)return 0;if(r==-1)return Number.NEGATIVE_INFINITY;if(r<-1)return Number.NaN;if(Math.abs(r)<=.375)return Math.abs(r)<.5*Number.EPSILON?r:0<r&&r<1e-8||-1e-9<r&&r<0?r*(1-.5*r):r*(1-r*Rc(r/.375,e,t));if(r<l)throw new Error("log1p: error evaluating the functio value.");return Math.log(1+r)}function Ar(r,e){const t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;let f,u,d,m,h,g,p,_,b,A,E,N,C,k;return r>e?(d=e/r,f=1/(d+1),_=d/(d+1),u=r+(e-.5)):(d=r/e,f=d/(d+1),_=1/(d+1),u=e+(r-.5)),E=_*_,b=_+E+1,A=_+E*b+1,N=_+E*A+1,C=_+E*N+1,k=_+E*C+1,m=1/(e*e),p=((((v*k*m+c*C)*m+a*N)*m+o*A)*m+l*b)*m+t,p*=f/e,h=u*Nr(r/e),g=r*(Math.log(e)-1),h>g?p-g-h:p-h-g}function Yt(r){if(r<.6){const p=((((((-.00271935708322958*r+-.0673562214325671)*r+-.402055799310489)*r+-.780427615533591)*r+-.168860593646662)*r+.844203922187225)*r+.577215664901533)/((((((.000667465618796164*r+.0325038868253937)*r+.361951990101499)*r+1.56875193295039)*r+3.12755088914843)*r+2.88743195473681)*r+1);return-r*p}else{const e=.422784335098467,t=.848044614534529,l=.565221050691933,o=.156513060486551,a=.017050248402265,c=.000497958207639485,v=1.24313399877507,f=.548042109832463,u=.10155218743983,d=.00713309612391,m=.000116165475989616,h=r-.5-.5,g=(((((c*h+a)*h+o)*h+l)*h+t)*h+e)/(((((m*h+d)*h+u)*h+f)*h+v)*h+1);return h*g}}function Gt(r){const e=.418938533204673,t=.0833333333333333,l=-.00277777777760991,o=.00079365066682539,a=-.00059520293135187,c=.000837308034031215,v=-.00165322962780713;if(r<=.8)return Yt(r)-Math.log(r);if(r<=2.25)return Yt(r-.5-.5);if(r<10){let d=Math.round(r-1.25),m=r,h=1;for(let g=1;g<=d;++g)m+=-1,h*=m;return Yt(m-1)+Math.log(h)}let f=1/(r*r),u=(((((v*f+c)*f+a)*f+o)*f+l)*f+t)/r;return e+u+(r-.5)*(Math.log(r)-1)}function Zs(r,e){const t=.918938533204673;let l=Math.min(r,e),o=Math.max(r,e);function a(c,v,f){let u=Math.round(f-1),d=1;for(let m=1;m<=u;++m)f+=-1,d*=f/(v+f);return c+Math.log(d)+(Gt(v)+(Gt(f)-Ho(v,f)))}if(l<8){if(l<1)return o<8?Gt(l)+(Gt(o)-Gt(l+o)):Gt(l)+Ar(l,o);let c;if(l<2)return o<=2?Gt(l)+Gt(o)-Ho(l,o):o<8?(c=0,a(c,l,o)):Gt(l)+Ar(l,o);if(o<=1e3){let v=Math.round(l-1);c=1;for(let f=1;f<=v;++f){l+=-1;let u=l/o;c*=u/(u+1)}return c=Math.log(c),o>=8?c+Gt(l)+Ar(l,o):a(c,l,o)}else{let v=Math.round(l-1);c=1;for(let f=1;f<=v;++f)l+=-1,c*=l/(l/o+1);return log(c)-v*log(o)+(Gt(l)+Ar(l,o))}}else{let c=Zn(l,o),v=l/o,f=-(l-.5)*Math.log(v/(v+1)),u=o*Nr(v);return f>u?Math.log(o)*-.5+t+c-u-f:Math.log(o)*-.5+t+c-f-u}}function Ko(r){return(r==0?1024:-300)*.69314718055995*.99999}function rn(r){const e=.0566749439387324,t=.0456512608815524,l=.333333333333333,o=-.224696413112536,a=.00620886815375787,c=-1.27408923933623,v=.354508718369557;let f,u,d,m,h;return r<-.39||r>.57?(m=r+.5+.5,r-Math.log(m)):(r<-.18?(f=r+.3,f/=.7,h=e-f*.3):r>.18?(f=r*.75-.25,h=t+f/3):(f=r,h=0),u=f/(f+2),d=u*u,m=((a*d+o)*d+l)/((v*d+c)*d+1),d*2*(1/(1-u)-u*m)+h)}function Nr(r){if(Math.abs(r)>.375)return Math.log(1+r);const e=-1.29418923021993,t=.405303492862024,l=-.0178874546012214,o=-1.62752256355323,a=.747811014037616,c=-.0845104217945565;let v=r/(r+2),f=v*v,u=(((l*f+t)*f+e)*f+1)/(((c*f+a)*f+o)*f+1);return v*2*u}function Lc(r){const e=.564189583547756,t=[77105849500132e-18,-.00133733772997339,.0323076579225834,.0479137145607681,.128379167095513],l=[.00301048631703895,.0538971687740286,.375795757275549],o=[-136864857382717e-21,.564195517478974,7.21175825088309,43.1622272220567,152.98928504694,339.320816734344,451.918953711873,300.459261020162],a=[1,12.7827273196294,77.0001529352295,277.585444743988,638.980264465631,931.35409485061,790.950925327898,300.459260956983],c=[2.10144126479064,26.2370141675169,21.3688200555087,4.6580782871847,.282094791773523],v=[94.153775055546,187.11481179959,99.0191814623914,18.0124575948747];let f,u,d,m,h;if(d=Math.abs(r),d<=.5)return f=r*r,h=(((t[0]*f+t[1])*f+t[2])*f+t[3])*f+t[4]+1,m=((l[0]*f+l[1])*f+l[2])*f+1,r*(h/m);if(d<=4){h=((((((o[0]*d+o[1])*d+o[2])*d+o[3])*d+o[4])*d+o[5])*d+o[6])*d+o[7],m=((((((a[0]*d+a[1])*d+a[2])*d+a[3])*d+a[4])*d+a[5])*d+a[6])*d+a[7];let p=.5-Math.exp(-r*r)*h/m+.5;return r<0?-p:p}if(d>=5.8)return r>0?1:-1;u=r*r,f=1/u,h=(((c[0]*f+c[1])*f+c[2])*f+c[3])*f+c[4],m=(((v[0]*f+v[1])*f+v[2])*f+v[3])*f+1,f=(e-h/(u*m))/d;let g=.5-Math.exp(-u)*f+.5;return r<0?-g:g}function qc(r){const e=914041914819518e-24,t=.0238082361044469,l=-.499999999085958,o=.107141568980644,a=-.0119041179760821,c=.000595130811860248;if(Math.abs(r)<=.15)return r*(((t*r+e)*r+1)/((((c*r+a)*r+o)*r+l)*r+1));{let v=Math.exp(r);return r>0?v*(.5-1/v+.5):v-.5-.5}}function pn(r,e){let t;if(e>0){if(r>0||(t=r+e,t<0))return Math.exp(r)*Math.exp(e)}else if(r<0||(t=r+e,t>0))return Math.exp(r)*Math.exp(e);return Math.exp(t)}function zc(r){const e=.785398163397448,t=1.4616321449683622,l=[.0089538502298197,4.77762828042627,142.441585084029,1186.45200713425,3633.51846806499,4138.10161269013,1305.60269827897],o=[44.8452573429826,520.752771467162,2210.0079924783,3641.27349079381,1908.310765963,691091682714533e-20],a=[-2.12940445131011,-7.01677227766759,-4.48616543918019,-.648157123766197],c=[32.2703493791143,89.2920700481861,54.6117738103215,7.77788548522962];let v,f,u,d,m,h,g,p,_,b,A,E,N;if(A=Number.MAX_SAFE_INTEGER,d=.5/(.5*Number.EPSILON),A>d&&(A=d),N=1e-9,p=0,r<.5){if(fabs(r)<=N){if(r==0)return 0;p=-1/r}else{if(m=-r,_=e,m<=0&&(m=-m,_=-_),m>=A)return 0;if(u=Math.round(m),m-=u,u=Math.round(m*4),m=(m-u*.25)*4,f=u/2,f+f!=u&&(m=1-m),h=e*m,v=f/2,v+v!=f&&(_=-_),f=(u+1)/2,v=f/2,v+=v,v==f){if(h==0)return 0;p=_*(cos(h)/sin(h)*4)}else p=_*(sin(h)/cos(h)*4)}r=1-r}if(r<=3){g=r,E=l[0]*r;for(let C=1;C<=5;++C)g=(g+o[C-1])*r,E=(E+l[C])*r;return g=(E+l[6])/(g+o[5]),b=r-t,g*b+p}if(r<A){m=1/(r*r),g=m,E=a[0]*m;for(let C=1;C<=3;++C)g=(g+c[C-1])*m,E=(E+a[C])*m;p=E/(g+c[3])-.5/r+p}return p+log(r)}function jc(r,e,t,l){let o,a,c,v,f,u;if(r>l*.001){if(v=r*Math.log(t),v<Math.exparg(1))return 0;o=Math.exp(v)}else o=1;for(o*=e/r,u=l/r,f=r+1,v=t,c=v/f,f+=1,v=t*v,a=v/f,c+=a;Math.abs(t)>u;)f+=1,v=t*v,a=v/f,c+=a;return o*=r*c+1,o}function Fc(r,e,t,l){const o=.577215664901533;let a,c,v,f,u,d,m=e*t;for(u=t-m,c=e*l<=.02?Math.log(t)+zc(e)+o+u:Math.log(m)+o+u,a=l*5*Math.abs(c),v=1,f=0,v+=1,u*=t-m/v,d=u/v,f+=d;Math.abs(d)>a;)v+=1,u*=t-m/v,d=u/v,f+=d;return-r*(c+f)}function $s(r,e,t,l){let o,a,c,v,f,u,d,m,h;if(t==0)return 0;if(d=Math.min(r,e),d>=1)u=r*Math.log(t)-Zs(r,e),a=Math.exp(u)/r;else if(m=Math.max(r,e),m<8)if(m<=1){if(a=Math.pow(t,r),a==0)return a;h=r+e,h>1?(f=r+e-1,u=(Ze(f)+1)/h):u=Ze(h)+1,c=(Ze(r)+1)*(Ze(e)+1)/u,a*=c*(e/h)}else{if(f=Yt(d),o=Math.round(m-1),o>=1){c=1;for(let A=1;A<=o;++A)m+=-1,c*=m/(d+m);f+=Math.log(c)}u=r*Math.log(t)-f,m+=-1,h=d+m,h>1?(f=d+m-1,v=(Ze(f)+1)/h):v=Ze(h)+1,a=Math.exp(u)*(d/r)*(Ze(m)+1)/v}else f=Yt(d)+Ar(d,m),u=r*Math.log(t)-f,a=d/r*Math.exp(u);if(a==0||r<=l*.1)return a;let g=l/r,p=0,_=0,b;for(c=1,p+=1,c*=(.5-e/p+.5)*t,b=c/(r+p),_+=b;p<1e7&&Math.abs(b)>g;)p+=1,c*=(.5-e/p+.5)*t,b=c/(r+p),_+=b;return r*_>-1?a*=r*_+1:a=0,a}function $n(r,e,t,l,o,a){let c,v,f,u,d,m=r+e,h=r+1;if(o>1&&r>=1&&m>=h*1.1?(f=Math.round(Math.abs(Ko(1))),v=Math.round(Ko(0)),f>v&&(f=v),u=Math.exp(-f)):(f=0,u=1),c=Vc(f,r,e,t,l)/r,o==1||c==0)return c;let g=o-1,p=u;if(v=0,e>1){if(l>1e-4){let _=(e-1)*t/l-r;_>=1&&(v=_<g?Math.round(_):g)}else v=g;for(let _=0;_<v;++_)d=_,u*=(m+d)/(h+d)*t,p+=u}for(let _=v;_<g&&(d=_,u*=(m+d)/(h+d)*t,p+=u,!(u<=a*p));++_);return c*=p,c}function Oc(r,e,t,l,o,a){let c,v,f,u,d,m,h,g,p,_,b,A,E,N,C,k,q,M,w;if(!Number.isFinite(o)||(w=Dc(r,e,t,l),Number.isNaN(w)))return Number.NaN;if(w==0)return 0;for(c=o+1,p=e/r,_=1/r+1,N=l+1,f=0,u=1,m=r+1,A=0,E=1,C=1,k=c/_,d=_/c,f+=1,h=f/r,g=f*(e-f)*t,v=r/m,M=u*(u+p)*v*v*(g*t),v=(h+1)/(_+h+h),q=f+g/m+v*(c+f*N),u=h+1,m+=2,h=M*A+q*C,A=C,C=h,h=M*E+q*k,E=k,k=h,b=d,d=C/k,A/=k,E/=k,C=d,k=1;f<1e4&&(f+=1,h=f/r,g=f*(e-f)*t,v=r/m,M=u*(u+p)*v*v*(g*t),v=(h+1)/(_+h+h),q=f+g/m+v*(c+f*N),u=h+1,m+=2,h=M*A+q*C,A=C,C=h,h=M*E+q*k,E=k,k=h,b=d,d=C/k,!(Math.abs(d-b)<=a*d));)A/=k,E/=k,C=d,k=1;return w*d}function Dc(r,e,t,l){const o=.398942280401433;let a,c,v,f,u,d,m,h,g;if(t==0||l==0)return 0;if(m=Math.min(r,e),m<8){let p,_;if(t<=.375?(p=Math.log(t),_=Nr(-t)):l>.375?(p=Math.log(t),_=Math.log(l)):(p=Nr(-l),_=Math.log(l)),d=r*p+e*_,m>=1)return d-=Zs(r,e),Math.exp(d);if(h=Math.max(r,e),h>=8)return f=Yt(m)+Ar(m,h),m*Math.exp(d-f);if(h<=1){let A=Math.exp(d);return A==0?0:(g=r+e,g>1?(f=r+e-1,d=(Ze(f)+1)/g):d=Ze(g)+1,c=(Ze(r)+1)*(Ze(e)+1)/d,A*(m*c)/(m/h+1))}if(f=Yt(m),a=Math.round(h-1),a>=1){c=1;for(let A=1;A<=a;++A)h+=-1,c*=h/(m+h);f=Math.log(c)+f}d-=f,h+=-1,g=m+h;let b;return g>1?(f=m+h-1,b=(Ze(f)+1)/g):b=Ze(g)+1,m*Math.exp(d)*(Ze(h)+1)/b}else{let p,_,b,A;return r<=e?(p=r/e,_=p/(p+1),b=1/(p+1),A=r-(r+e)*t):(p=e/r,_=1/(p+1),b=p/(p+1),A=(r+e)*l-e),v=-A/r,f=Math.abs(v)>.6?v-Math.log(t/_):rn(v),v=A/e,u=Math.abs(v)<=.6?rn(v):v-Math.log(l/b),d=Math.exp(-(r*f+e*u)),o*Math.sqrt(e*_)*d*Math.exp(-Zn(r,e))}}function Vc(r,e,t,l,o){const a=.398942280401433;let c,v,f,u,d,m,h,g;if(m=Math.min(e,t),m<8){let p,_;if(l<=.375?(p=Math.log(l),_=Nr(-l)):o>.375?(p=Math.log(l),_=Math.log(o)):(p=Nr(-o),_=Math.log(o)),d=e*p+t*_,m>=1)return d-=Zs(e,t),pn(r,d);if(h=Math.max(e,t),h>=8)return f=Yt(m)+Ar(m,h),m*pn(r,d-f);if(h<=1){let A=pn(r,d);return A==0?A:(g=e+t,g>1?(f=e+t-1,d=(Ze(f)+1)/g):d=Ze(g)+1,c=(Ze(e)+1)*(Ze(t)+1)/d,A*(m*c)/(m/h+1))}f=Yt(m);let b=Math.round(h-1);if(b>=1){c=1;for(let A=1;A<=b;++A)h+=-1,c*=h/(m+h);f+=Math.log(c)}return d-=f,h+=-1,g=m+h,v=g>1?(Ze(g-1)+1)/g:Ze(g)+1,m*pn(r,d)*(Ze(h)+1)/v}else{let p,_,b,A;e>t?(p=t/e,_=1/(p+1),b=p/(p+1),A=(e+t)*o-t):(p=e/t,_=p/(p+1),b=1/(p+1),A=e-(e+t)*l),-Go(t/e);let E=-A/e;return f=Math.abs(E)>.6?E-Math.log(l/_):rn(E),E=A/t,u=Math.abs(E)>.6?E-Math.log(o/b):rn(E),d=pn(r,-(e*f+t*u)),a*Math.sqrt(t*_)*d*Math.exp(-Zn(e,t))}}function el(r,e,t,l,o,a){let v=Array(30),f=Array(30),u=e-.5-.5,d=r+u*.5,m=l>.375?Math.log(t):Nr(-l),h=-d*m;if(e*h==0)throw new Error("bgrat: expansion can not be computed.");let g=Math.log(e)+Go(Ze(e))+e*Math.log(h)+d*m,p=g-(Ar(e,r)+e*Math.log(d)),_=Math.exp(p);if(p==Number.NEGATIVE_INFINITY)throw new Error("bgrat: expansion can not be computed.");let b=_==0,A=o==0?0:Math.exp(Math.log(o)-p),E=Bc(e,h,g,a),N=.25/(d*d),C=m*.25*m,k=E,q=k,M=1,w=1,P=0;for(let U=1;U<=30;++U){let z=e+P;k=(z*(z+1)*k+(h+z+1)*M)*N,P+=2,M*=C,w/=P*(P+1);let W=U-1;v[W]=w;let V=0;if(U>1){let D=e-U;for(let S=1;S<=W;++S)V+=D*v[S-1]*f[W-S],D+=e}f[W]=u*w+V/U;let Y=f[W]*k;if(q+=Y,q<=0)throw new Error("bgrat: expansion can not be computed.");if(Math.abs(Y)<=a*(q+A))break}return o+=b?Math.exp(p+Math.log(q)):_*q,o}function Bc(r,e,t,l){const o=1.772453850905516;if(r*e==0)return e<=r?Math.exp(-t):0;if(r==.5){if(e<.25)return(.5-Lc(Math.sqrt(e))+.5)*Math.exp(-t);{let a=Math.sqrt(e);return Uo(1,a)/a*o}}else if(e<1.1){let a=3,c=e,v=e/(r+3),f=l*.1/(r+1),u;for(a+=1,c*=-(e/a),u=c/(r+a),v+=u;Math.abs(u)>f;)a+=1,c*=-(e/a),u=c/(r+a),v+=u;let d=r*e*((v/6-.5/(r+2))*e+1/(r+1)),m=r*Math.log(e),h=Ze(r),g=h+1;if(e>=.25&&r<e/2.59||m>-.13394){let p=qc(m),_=((p+.5+.5)*d-p)*g-h;return _<=0?0:_*Math.exp(-t)}else return(.5-Math.exp(m)*g*(.5-d+.5)+.5)*Math.exp(-t)}else{let a=1,c=1,v=e,f=e+(1-r),u=1,d,m;a=e*c+u*a,v=e*f+u*v,d=a/v,u+=1;let h=u-r;for(c=a+h*c,f=v+h*f,m=c/f;Math.abs(m-d)>=l*m;)a=e*c+u*a,v=e*f+u*v,d=a/v,u+=1,h=u-r,c=a+h*c,f=v+h*f,m=c/f;return m}}function Yc(r,e,t,l){const a=1.12837916709551,c=.353553390593274,v=Array(21),f=Array(21),u=Array(21),d=Array(21);let m=r*rn(-t/r)+e*rn(t/e),h;if(h=Math.exp(-m),h==0)return 0;let g=Math.sqrt(m),p=g/c*.5,_=m+m,b,A,E,N;r<e?(b=r/e,A=1/(b+1),E=(e-r)/e,N=1/Math.sqrt(r*(b+1))):(b=e/r,A=1/(b+1),E=(e-r)/r,N=1/Math.sqrt(e*(b+1))),v[0]=E*.6666666666666666,u[0]=v[0]*-.5,d[0]=-u[0];let C=.5/a*Uo(1,g),k=c,q=C+d[0]*N*k,M=1,w=b*b,P=1,U=N,z=p,W=_;for(let Y=2;Y<=20;Y+=2){P*=w,v[Y-1]=A*2*(b*P+1)/(Y+2);let D=Y+1;M+=P,v[D-1]=E*2*M/(Y+3);for(let L=Y;L<=D;++L){let j=(L+1)*-.5;f[0]=j*v[0];for(let Q=2;Q<=L;++Q){let ne=0;for(let re=1;re<=Q-1;++re){let te=Q-re;ne+=(re*j-te)*v[re-1]*f[te-1]}f[Q-1]=j*v[Q-1]+ne/Q}u[L-1]=f[L-1]/(L+1);let X=0;for(let Q=1;Q<=L-1;++Q)X+=d[L-Q-1]*u[Q-1];d[L-1]=-(X+u[L-1])}C=c*z+(Y-1)*C,k=c*W+Y*k,z=_*z,W=_*W,U*=N;let S=d[Y-1]*U*C;U*=N;let O=d[D-1]*U*k;if(q+=S+O,Math.abs(S)+Math.abs(O)<=l*q)break}let V=Math.exp(-Zn(r,e));return a*h*V*q}function Wc(r,e,t,l){let a=0,c=0;function v(b,A,E,N){const C=$s(b,A,E,1e-15);return N?.5-C+.5:C}function f(b,A,E,N){const C=$s(A,b,E,1e-15);return N?C:.5-C+.5}function u(b,A,E,N,C,k){const q=Oc(b,A,E,N,C,15000000000000002e-30);return k?.5-q+.5:q}function d(b,A,E,N,C){let k=Math.round(A);A=A-k,A===0&&(k=k-1,A=1);let q=$n(A,b,N,E,k,1e-15);return E<=.7?(q=q+$s(b,A,E,1e-15),C?.5-q+.5:q):(b<=15&&(k=20,q=q+$n(b,A,E,N,k,1e-15),b=b+k),q=el(b,A,E,N,q,15*1e-15),C?.5-q+.5:q)}if(r<1e-15*.001&&e<1e-15*.001)return e/(r+e);let m,h,g,p,_;if(r<=1||e<=1){if(t>.5?(_=!0,m=e,g=l,h=r,p=t):(_=!1,m=r,g=t,h=e,p=l),h<Math.min(1e-15,1e-15*m))return a=jc(m,h,g,1e-15),_?.5-a+.5:a;if(m<Math.min(1e-15,1e-15*h)&&h*g<=1)return c=Fc(m,h,g,1e-15),_?c:.5-c+.5;if(Math.max(m,h)>1){if(h<=1)return v(m,h,g,_);if(g>=.29)return f(m,h,p,_);if(g<.1&&Math.pow(g*h,m)<=.7)return v(m,h,g,_)}else{if(m>=Math.min(.2,h)||Math.pow(g,m)<=.9)return v(m,h,g,_);if(g>=.3)return f(m,h,p,_)}let b=!1;return Math.max(m,h)>1&&h>15?c=0:(b=!0,c=$n(h,m,p,g,20,1e-15),h+=20),c=el(h,m,p,g,c,15*1e-15),c==0||0<c&&c<Number.MIN_VALUE?(b?c=$n(h-n,m,p,g,n,1e-15):c=Number.NEGATIVE_INFINITY,c=el(h,m,p,g,c,15*1e-15),a=-expm1(c),_?.5-a+.5:a):(a=.5-c+.5,_?.5-a+.5:a)}else{let b=Number.isFinite(r+e)?r>e?(r+e)*l-e:r-(r+e)*t:r*l-e*t;const A=b<0;let E,N,C,k;if(A?(b=-b,E=e,C=l,N=r,k=t):(E=r,C=t,N=e,k=l),N<40)return N*C<=.7?v(E,N,C,A):d(E,N,C,k,A);if(E>N){if(N<=100||b>N*.03)return u(E,N,C,k,b,A)}else{if(E<=100)return u(E,N,C,k,b,A);if(b>E*.03)return u(E,N,C,k,b,A)}return a=Yc(E,N,b,1e-15*100),A?.5-a+.5:a}}function Xo(r){const e=r.nrows,t=r.ncols;if(e<t){const c=Xo(r.subset([],Mt.seq(1,e)));return{Q:c.Q,R:Gc(c.Q,r)}}let l=Wt.eye(e),o=r.t();for(let c=1;c<=t;c++)for(let v=e;v>=c+1;v--){const f=o.v.subarray((v-2)*t,v*t),u=l.v.subarray((v-2)*e,v*e),d=f.slice(),m=u.slice(),[h,g,p]=Uc(d[c-1],d[c-1+t]);for(let _=0;_<t;_++)f[_]=d[_]*h+d[_+t]*g,f[_+t]=d[_]*-g+d[_+t]*h,u[_]=m[_]*h+m[_+e]*g,u[_+e]=m[_]*-g+m[_+e]*h;for(let _=t;_<e;_++)u[_]=m[_]*h+m[_+e]*g,u[_+e]=m[_]*-g+m[_+e]*h}const a=Mt.seq(1,t);return{Q:e===t?l:l.subset([],a),R:e===t?o.t():o.subset([],a).t()}}function Uc(r,e){if(r==0)return[0,1,e];if(Math.abs(r)>Math.abs(e)){const a=e/r,c=Math.sqrt(1+a*a),v=1/c;return[v,a*v,r*c]}const t=r/e,l=Math.sqrt(1+t*t),o=1/l;return[t*o,o,e*l]}function Qo(r){return typeof r=="number"}function Hc(r,e){e===void 0&&(e=r);const t=r.nrows,l=r.ncols,o=e.nrows;e.ncols;const a=t,c=o,v=l,f=new Float64Array(a*c);for(let u=0;u<v;u++){const d=r.v.subarray(u*t,(u+1)*t),m=e.v.subarray(u*o,(u+1)*o);for(let h=0;h<c;h++){const g=f.subarray(h*a,(h+1)*a);for(let p=0;p<a;p++)g[p]+=d[p]*m[h]}}return new Wt(f,a,c)}function Gc(r,e){if(e===void 0&&(e=r),!gr(r)||!gr(e))throw Error("crossprod: both X and Y must be instance of Matrix class.");const t=r.nrows,l=r.ncols,o=e.nrows,a=e.ncols,c=l,v=a,f=t,u=new Float64Array(c*v);for(let d=0;d<v;d++){const m=e.v.subarray(d*o,(d+1)*o),h=u.subarray(d*c,(d+1)*c);for(let g=0;g<c;g++){const p=r.v.subarray(g*t,(g+1)*t);let _=0;for(let b=0;b<f;b++)_+=p[b]*m[b];h[g]=_}}return new Wt(u,c,v)}function Jo(r,e,t){if(t===void 0){if(e!==r.v.length)throw Error("reshape: provided dimension does not match number of values in the object.");return new xe(r.v)}if(r.v.length!==e*t)throw Error("reshape: provided dimension does not match number of values in the object.");return new Wt(r.v,e,t)}function gr(r){return r&&r.constructor===Wt}function Kc(r,e,t){return new Wt(new Float64Array(r),e,t)}const Ne=class Ne{constructor(e,t,l){if(!ArrayBuffer.isView(e)||e.constructor!==Ne.valuesConstructor)throw Error('Matrix: parameter "values" must be Float64Array.');if(t===0||l===0)throw Error("Matrix: can not create matrix with zero rows or columns.");if(e.length!==t*l)throw Error('Matrix: number elements in "values" is not equal to "nrows" x "ncols".');this.v=e,this.nrows=t,this.ncols=l}inv(){if(this.nrows!==this.ncols)throw Error("inv: only squared matrices can be inverted.");const e=this.ncols;if(this.isuppertriangular()){if(this.islowertriangular())return Ne.diagm(this.diag().apply(f=>Math.abs(f)>Number.EPSILON?1/f:x));const l=Ne.eye(e),o=Ne.eye(e),a=this.t(),c=a.v[(e-1)*e+(e-1)],v=e-1;for(let f=0;f<e;f++)o.v[v*e+f]=l.v[v*e+f]/c;for(let f=e-2;f>=0;f--){let u=l.getcolumn(f+1);const d=a.getcolref(f+1);for(let m=f+1;m<e;m++){const h=o.getcolumn(m+1);u=u.subtract(h.mult(d[m]))}o.v.set(u.divide(d[f]).v,f*e)}return o.t()}if(this.islowertriangular()){const l=this.diag();if(Fo(l)<Number.EPSILON)throw Error("inv: the matrix is not invertible.");const o=Ne.eye(e),a=Ne.eye(e),c=this.t(),v=0,f=c.v[0];for(let u=0;u<e;u++)a.v[v*e+u]=o.v[v*e+u]/f;for(let u=1;u<e;u++){let d=o.getcolumn(u+1);const m=c.getcolref(u+1);for(let h=0;h<u;h++){const g=a.getcolumn(h+1);d=d.subtract(g.mult(m[h]))}a.v.set(d.divide(m[u]).v,u*e)}return a.t()}const t=Xo(this);if(!t.R.isuppertriangular())throw Error("inv: QR decomposition of the matrix returned incorrect result.");return t.R.inv().dot(t.Q.t())}islowertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=1;e<this.ncols;e++)for(let t=0;t<e;t++)if(Math.abs(this.v[e*this.nrows+t])>Ne.TOLERANCE)return!1;return!0}isuppertriangular(){if(this.nrows!==this.ncols)return!1;for(let e=0;e<this.ncols;e++)for(let t=e+1;t<this.nrows;t++)if(Math.abs(this.v[e*this.nrows+t])>Ne.TOLERANCE)return!1;return!0}diag(){const e=Math.min(this.nrows,this.ncols),t=new Float64Array(e);for(let l=0;l<e;l++)t[l]=this.getcolref(l+1)[l];return new xe(t)}t(){const e=this.nrows,t=this.ncols,l=new Ne.valuesConstructor(this.v.length);if(this.ncols<this.nrows){for(let o=0;o<this.ncols;o++){const a=this.v.subarray(o*this.nrows,(o+1)*this.nrows);for(let c=0;c<this.nrows;c++)l[c*t+o]=a[c]}return new Ne(l,t,e)}for(let o=0;o<this.nrows;o++){const a=l.subarray(o*t,(o+1)*t);for(let c=0;c<this.ncols;c++)a[c]=this.v[c*this.nrows+o]}return new Ne(l,t,e)}dot(e){if(Me(e))return new Ne(nl(this.v,e.v,this.nrows,this.ncols,e.length,1),this.nrows,1);if(gr(e))return new Ne(nl(this.v,e.v,this.nrows,this.ncols,e.nrows,e.ncols),this.nrows,e.ncols);throw Error("dot: argument 'X' must be a matrix or a vector.")}op(e,t,l){if(gr(e))return new Ne(tl(this.v,e.v,t),this.nrows,this.ncols);if(Qo(e))return new Ne(rl(this.v,e,t),this.nrows,this.ncols);if(!Me(e))throw new Error('op: argument "x" must be a matrix, a vector or a number.');if(l===void 0&&(l=e.length===this.ncols?2:1),l===2&&e.length===this.ncols){const o=new Ne.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(rl(this.getcolref(a+1),e.v[a],t),a*this.nrows);return new Ne(o,this.nrows,this.ncols)}if(l===1&&e.length===this.nrows){const o=new Ne.valuesConstructor(this.v.length);for(let a=0;a<this.ncols;a++)o.set(tl(this.getcolref(a+1),e.v,t),a*this.nrows);return new Ne(o,this.nrows,this.ncols)}throw new Error('op: length of vector "X" does not match number of rows nor number of columns of the maytrix.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e,t){if(t===void 0&&(t=2),t==2){const l=this.ncols,o=new Ne.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=e(this.getcolref(a+1));return new xe(o)}if(t==1)return this.t().apply(e,2);if(t==0){const l=this.v.length,o=new Ne.valuesConstructor(l);for(let a=0;a<l;a++)o[a]=e(this.v[a]);return new Ne(o,this.nrows,this.ncols)}}replace(e,t,l){typeof t=="number"&&(t=[t]),t.length===0&&(t=Mt.seq(1,this.nrows)),Kt(t)||(t=Xt(t)),typeof l=="number"&&(l=[l]),l.length===0&&(l=Mt.seq(1,this.ncols)),Kt(l)||(l=Xt(l));const o=t.length,a=l.length;if(tn(t)<1||qt(t)>this.nrows)throw Error("Matrix.replace: row indices do not match the dimension of matrix.");if(tn(l)<1||qt(l)>this.ncols)throw Error("Matrix.replace: column indices do not match the dimension of matrix.");if(e.nrows!==o||e.ncols!==a)throw Error('Matrix.replace: dimension of "X" does not match the indices.');for(let c=0;c<l.length;c++){const v=e.getcolref(c+1),f=(l.v[c]-1)*this.nrows;for(let u=0;u<t.length;u++){const d=t.v[u];this.v[f+d-1]=v[u]}}return this}copy(){return new Ne(this.v.slice(),this.nrows,this.ncols)}getrow(e){if(e<1||e>this.nrows)throw Error("getrow: wrong row index.");const t=new xe.valuesConstructor(this.ncols);for(let l=0;l<this.ncols;l++)t[l]=this.getcolref(l+1)[e-1];return new xe(t)}getcolumn(e){if(e<1||e>this.ncols)throw Error("getcolumn: wrong column index.");return new xe(this.v.slice((e-1)*this.nrows,e*this.nrows))}getcolref(e){return this.v.subarray((e-1)*this.nrows,e*this.nrows)}subset(e,t){if(typeof e=="number"&&(e=Xt([e])),typeof t=="number"&&(t=Xt([t])),Array.isArray(e)&&(e=e.length===0?null:Xt(e)),Array.isArray(t)&&(t=t.length===0?null:Xt(t)),e!==null&&!Kt(e))throw Error('subset: parameter "rind" can be a number, null or instance of Index.');if(t!==null&&!Kt(t))throw Error('subset: parameter "cind" can be a number, null or instance of Index.');if(e!==null&&(tn(e)<1||qt(e)>this.nrows))throw Error('subset: parameter "rind" does not match size of the matrix.');if(t!==null&&(tn(t)<1||qt(t)>this.ncols))throw Error('subset: parameter "cind" does not match size of the matrix.');if(e===null){const v=t.length,f=this.nrows,u=new Ne.valuesConstructor(f*v);for(let d=0;d<t.length;d++)u.set(this.v.slice((t.v[d]-1)*this.nrows,t.v[d]*this.nrows),d*this.nrows);return new Ne(u,f,v)}if(t==null)return this.t().subset(t,e).t();const l=e.length,o=t.length,a=new Ne.valuesConstructor(l*o);let c=new Ne.valuesConstructor(l);for(let v=0;v<o;v++){const f=this.v.subarray((t.v[v]-1)*this.nrows,t.v[v]*this.nrows);for(let u=0;u<l;u++)c[u]=f[e.v[u]-1];a.set(c,v*l)}return new Ne(a,l,o)}toString(e){function t(c,v){return" ".repeat(v-c.length)+c}e===void 0&&(e=2),this.ncols;const l=Math.round(Math.abs(Math.log10(qt(this.v))))+e+3;let o="";const a=this.t();for(let c=1;c<=a.ncols;c++)o+=Array.from(a.getcolref(c)).map(v=>t(v.toFixed(e),l)).join(" ")+`
`;return o}toCSV(e,t,l,o){e===void 0&&(e=","),t===void 0&&(t=e===";"?",":".");const a=o!=null&&o.length>0,c=l!=null&&l.length>0;if(a&&o.length!==this.nrows)throw Error("Matrix.toCSV: number of elements in labels array must match number of rows in the matrix.");if(c&&l.length!==this.ncols+(a?1:0))throw Error("Matrix.toCSV: number of elements in header must match number of columns in the matrix.");const v=this.t();let f=c?l.join(e)+`
`:"";for(let u=1;u<=v.ncols;u++)f=f+(a?o[u-1]+e:"")+v.getcolref(u).join(e)+`
`;return f=f.replace(/\./g,t),f}static randn(e,t,l,o){return Jo(Yo(e*t,l,o),e,t)}static rand(e,t,l,o){return Jo(Bo(e*t,l,o),e,t)}static eye(e,t){t===void 0&&(t=e);const l=new Float64Array(e*t);for(let o=0;o<Math.min(e,t);o++)l[o*e+o]=1;return new Ne(l,e,t)}static diagm(e){if(!Me(e))throw Error('diagm: the argument "x" must be a Vector.');const t=e.length,l=new Float64Array(t*t);for(let o=0;o<t;o++)l[o*t+o]=e.v[o];return new Ne(l,t,t)}static zeros(e,t){return t===void 0&&(t=e),new Ne(new Float64Array(e*t),e,t)}static ones(e,t){return Ne.fill(1,e,t)}static fill(e,t,l){l===void 0&&(l=t);const o=new Float64Array(t*l);for(let a=0;a<o.length;a++)o[a]=e;return new Ne(o,t,l)}static outer(e,t,l){if(Array.isArray(e)&&(e=Ge(e)),Array.isArray(t)&&(t=Ge(t)),!Me(e))throw Error('Matrix.outer: parameter "x" must be a vector or an array with numbers.');if(!Me(t))throw Error('Matrix.outer: parameter "y" must be a vector or an array with numbers.');const o=Ne.zeros(e.length,t.length);for(let a=0;a<t.length;a++){const c=t.v[a],v=o.getcolref(a+1);for(let f=0;f<e.length;f++)v[f]=l(e.v[f],c)}return o}static parseCSV(e,t,l,o){function a(b){return b.some(A=>Number.isNaN(Number.parseFloat(A.trim())))}t===void 0&&(t=",");const c=t===";"?",":".";e=e.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,""),e=e.replace(/\r/gm,"");let v=e.split(/\n/),f=[],u=0;const d=v[0].split(t);(l||l===void 0&&a(d))&&(f=d,u=1),v=v.filter(b=>b.trim().length>1);let m=[],h=0;o&&(h=1);const g=v.length-u,p=d.length-h;if(g<1)throw Error("Data file should contain at least 1 row with values.");if(p<1)throw Error("Data file should contain at least 1 column with values.");const _=Ne.zeros(p,g);for(let b=u;b<g+u;b++){const A=v[b].split(t);let E;if(o?(m[b-u]=A[0],E=A.slice(1).map(N=>Number.parseFloat(N.trim().replace(c,".")))):E=A.map(N=>Number.parseFloat(N.trim().replace(c,"."))),E.some(N=>Number.isNaN(N)))throw Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(E.length!=p)throw Error("Wrong number of values in row #"+b);_.v.set(new Float64Array(E),(b-u)*p)}return{values:_.t(),header:f,labels:m,sep:t,dec:c}}};Dr(Ne,"valuesConstructor",Float64Array),Dr(Ne,"TOLERANCE",Math.pow(10,-9));let Wt=Ne;function Me(r){return r&&r.constructor===xe}function Ge(r){return new xe(new Float64Array(r))}const tt=class tt{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Float64Array)throw Error('Vector: parameter "values" must be Float64Array.');this.v=e,this.length=e.length}which(e){const t=new Mt.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=o+1,l=l+1);return new Mt(t.subarray(0,l))}filter(e){const t=new tt.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=this.v[o],l=l+1);return new tt(t.subarray(0,l))}shuffle(){return new tt(ta(this.v))}sort(e){return new tt(ra(this.v,e))}sortind(e){return new Mt(na(this.v,e))}rep(e){return $o(this,e)}repeach(e){return ea(this,e)}replace(e,t){typeof t=="number"&&(t=[t]),t.length===0&&(t=Mt.seq(1,this.length)),Kt(t)||(t=Xt(t));const l=t.length;if(tn(t)<1||qt(t)>this.length)throw Error("Vector.replace: indices do not match the lenght of the vector.");if(e.length!==l)throw Error('Vector.replace: length of "x" does not match the indices.');for(let o=0;o<t.length;o++){const a=t.v[o];this.v[a-1]=e.v[o]}return this}subset(e){if(typeof e=="number"&&(e=Xt([e])),Array.isArray(e)&&(e=typeof e[0]=="boolean"?Mt.bool2ind(e):Xt(e)),!Kt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=tt.zeros(t);for(let o=0;o<t;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");l.v[o]=this.v[e.v[o]-1]}return l}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new tt(this.v.slice(e-1,t))}copy(){return new tt(this.v.slice())}dot(e){return e===void 0&&(e=this),nl(this.v,e.v,1,this.length,e.length,1)[0]}op(e,t){if(Me(e))return new tt(tl(this.v,e.v,t));if(Qo(e))return new tt(rl(this.v,e,t));throw new Error('op: argument "x" must be a vector or a number.')}add(e){return this.op(e,(t,l)=>t+l)}subtract(e){return this.op(e,(t,l)=>t-l)}mult(e){return this.op(e,(t,l)=>t*l)}divide(e){return this.op(e,(t,l)=>t/l)}apply(e){const t=this.v.length,l=tt.zeros(t);for(let o=0;o<t;o++)l.v[o]=e(this.v[o]);return l}static c(...e){if(e.length===1)return e[0];const t=e.reduce((a,c)=>a+(typeof c=="number"?1:c.length),0),l=new tt.valuesConstructor(t);let o=0;for(const a of e)typeof a=="number"?(l[o]=a,o+=1):(l.set(Me(a)?a.v:new tt.valuesConstructor(a),o),o+=typeof a=="number"?1:a.length);return new tt(l)}static seq(e,t,l){return Zo(e,t,l,tt)}static randn(e,t,l){return Yo(e,t,l)}static rand(e,t,l){return Bo(e,t,l)}static zeros(e){return new tt(new tt.valuesConstructor(e))}static ones(e){return tt.fill(1,e)}static fill(e,t){const l=new tt.valuesConstructor(t);for(let o=0;o<l.length;o++)l[o]=e;return new tt(l)}};Dr(tt,"valuesConstructor",Float64Array);let xe=tt;function Kt(r){return r.constructor===Mt}function Xt(r){return new Mt(new Int32Array(r))}const ct=class ct{constructor(e){if(!ArrayBuffer.isView(e)||e.constructor!==Int32Array)throw Error('Index: parameter "values" must be Int32Array.');this.v=e,this.length=e.length}which(e){const t=new ct.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=o+1,l=l+1);return new ct(t.subarray(0,l))}filter(e){const t=new ct.valuesConstructor(this.length);let l=0;for(let o=0;o<this.length;o++)e(this.v[o],o)&&(t[l]=this.v[o],l=l+1);return new ct(t.subarray(0,l))}shuffle(){return new ct(ta(this.v))}sort(e){return new ct(ra(this.v,e))}sortind(e){return new ct(na(this.v,e))}rep(e){return $o(this,e)}repeach(e){return ea(this,e)}subset(e){if(typeof e=="number"&&(e=Xt([e])),Array.isArray(e)&&(e=Xt(e)),!Kt(e))throw Error('subset: parameter "ind" must be number, array of instance of class Index.');const t=e.length,l=new ct.valuesConstructor(t);for(let o=0;o<t;o++){if(e.v[o]<1)throw Error("subset: indices must start with 1 (not 0).");if(e.v[o]>this.length)throw Error("subset: index exceeds the length of the vector.");l[o]=this.v[e.v[o]-1]}return new ct(l)}slice(e,t){if(e===null&&(e=1),t==null&&(t=this.length),e<1)throw Error("slice: indices must start with 1 (not 0).");if(t>this.length)throw Error("slice: index exceeds the length of the vector.");if(t<e)throw Error('slice: "end" must not be smaller than "start".');return new ct(this.v.slice(e-1,t))}static seq(e,t,l){return Zo(e,t,l,ct)}static ones(e){return ct.fill(1,e)}static fill(e,t){const l=new ct.valuesConstructor(t);for(let o=0;o<l.length;o++)l[o]=e;return new ct(l)}static bool2ind(e){let t=0;const l=new ct.valuesConstructor(e.length);for(let o=0;o<e.length;o++)e[o]&&(l[t]=o+1,t=t+1);return new ct(l.subarray(0,t))}};Dr(ct,"valuesConstructor",Int32Array);let Mt=ct;function Zo(r,e,t,l){t===void 0&&(t=r<=e?1:-1);const o=Math.floor((e-r)/t)+1;if(o<1)throw Error("seq: wrong combination of parameters.");const a=new l.valuesConstructor(o);for(let c=0;c<o;c++)a[c]=r+c*t;return new l(a)}function $o(r,e){const t=r.length*e,l=new r.constructor.valuesConstructor(t);for(let o=1;o<=e;o++)for(let a=0;a<r.length;a++)l[(o-1)*r.length+a]=r.v[a];return new r.constructor(l)}function ea(r,e){if(e<1||Math.round(e)!==e)throw Error('rep: parameter "n" must be an integer number > 1.');const t=r.length*e,l=new r.constructor.valuesConstructor(t);for(let o=0;o<r.length;o++)for(let a=0;a<e;a++)l[o*e+a]=r.v[o];return new r.constructor(l)}function tl(r,e,t){if(r.length!==e.length)throw new Error("_opvv: arrays sizes do not match.");if(r.constructor!==e.constructor)throw new Error("_opvv: array types do not match.");const l=new r.constructor(r.length);for(let o=0;o<r.length;o++)l[o]=t(r[o],e[o]);return l}function rl(r,e,t){const l=new r.constructor(r.length);for(let o=0;o<r.length;o++)l[o]=t(r[o],e);return l}function nl(r,e,t,l,o,a){if(l!==o)throw Error("_dot: matrix dimensions do not much.");const c=t,v=a,f=l,u=new r.constructor(c*v);for(let d=0;d<v;d++){const m=e.subarray(d*o,(d+1)*o),h=u.subarray(d*c,(d+1)*c);for(let g=0;g<f;g++){const p=m[g],_=r.subarray(g*t,(g+1)*t);for(let b=0;b<c;b++)h[b]+=_[b]*p}}return u}function ta(r){let e=r.slice(),t=e.length,l,o;for(;t;)o=Math.floor(Math.random()*t--),l=e[t],e[t]=e[o],e[o]=l;return e}function ra(r,e=!1){return e?r.slice().sort((t,l)=>l-t):r.slice().sort((t,l)=>t-l)}function na(r,e=!1){const t=Mt.seq(1,r.length).v;return e?t.sort((l,o)=>r[o-1]-r[l-1]):t.sort((l,o)=>r[l-1]-r[o-1])}function Xc(r,e,t){return 5*r*e+e+4*t*e}function Qc(r,e){return 2+2*r+r*e+17*e}function Ke(r,e,t){if(!r||!r.class||!r.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=r.ncols,o=r.ncomp;let a,c;switch(e){case"mX":a=2,c=l;break;case"sX":a=2+l,c=l;break;case"loadings":case"xloadings":a=2+2*l+(t-1)*l,c=l;break;case"P":a=2+2*l,c=t*l;break;case"eigenvals":case"xeigenvals":a=2+2*l+l*o,c=o;break;case"cq0":a=2+2*l+l*o+o,c=o;break;case"cNq":a=2+2*l+l*o+2*o,c=o;break;case"rq0":a=2+2*l+l*o+3*o,c=o;break;case"rNq":a=2+2*l+l*o+4*o,c=o;break;case"ch0":a=2+2*l+l*o+5*o,c=o;break;case"cNh":a=2+2*l+l*o+6*o,c=o;break;case"rh0":a=2+2*l+l*o+7*o,c=o;break;case"rNh":a=2+2*l+l*o+8*o,c=o;break;case"cr0":a=2+2*l+l*o+9*o,c=o;break;case"cNr":a=2+2*l+l*o+10*o,c=o;break;case"rr0":a=2+2*l+l*o+11*o,c=o;break;case"rNr":a=2+2*l+l*o+12*o,c=o;break;case"cg0":a=2+2*l+l*o+13*o,c=o;break;case"cNg":a=2+2*l+l*o+14*o,c=o;break;case"rg0":a=2+2*l+l*o+15*o,c=o;break;case"rNg":a=2+2*l+l*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(a,a+c)}function ar(r,e,t){if(!r||!r.class||!r.class.includes("pcares"))throw new Error('pcares_get: parameter "r" must be JSON with PCA results.');const l=r.ncols,o=r.nrows,a=r.ncomp;let c,v;switch(e){case"scores":case"xscores":c=(t-1)*o,v=o;break;case"hdist":c=o*a+(t-1)*o,v=o;break;case"qdist":c=2*o*a+(t-1)*o,v=o;break;case"xcumexpvar":case"cumexpvar":c=3*o*a,v=a;break;case"fdistc":c=3*o*a+a+(t-1)*o,v=o;break;case"fdistr":c=4*o*a+a+(t-1)*o,v=o;break;case"gdist":c=5*o*a+a+(t-1)*l,v=l;break;case"rdist":c=5*o*a+a+l*a+(t-1)*l,v=l;break;case"idistc":c=5*o*a+a+2*l*a+(t-1)*l,v=l;break;case"idistr":c=5*o*a+a+3*l*a+(t-1)*l,v=l;break;default:throw new Error("pcares_get: wrong outcome name.")}return r.v.subarray(c,c+v)}function es(r,e,t){if(!Array.isArray(r))return!1;if(r.length===0)return!0;for(let l=0;l<r.length;l++){const o=r[l];if(o<e||o>t)return!1}return!0}function Jc(r,e,t,l,o,a,c){if(!gr(e))throw new Error("pca_fit: X must be a matrix.");a||(a=[]);const v=a&&Array.isArray(a)?a.length:0;if(!es(a,0,e.nrows-1))throw new Error('pca_fit: some indices in "outliers" array are outside the expected range.');c||(c=[]);const f=c&&Array.isArray(c)?c.length:0;if(!es(c,0,e.ncols-1))throw new Error('pca_fit: some indices in "exclvars" array are outside the expected range.');const u=e.nrows-v,d=e.ncols-f;if(u<3||d<2)throw new Error("pca_fit: X must have at least 3 rows and 2 columns.");if(l===void 0&&(l=!0),o===void 0&&(o=!1),t===void 0&&(t=Math.min(e.nrows-v-1,e.ncols-f)),t<1||t>Math.min(u-1,d))throw new Error('pca_fit: the value of "ncomp" does not match the dimension of X.');const m=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);let h=null;if(v>0){const N=new Int32Array(a);h=r._malloc(N.length*N.BYTES_PER_ELEMENT),r.HEAP32.set(N,h/N.BYTES_PER_ELEMENT)}let g=null;if(f>0){const N=new Int32Array(c);g=r._malloc(N.length*N.BYTES_PER_ELEMENT),r.HEAP32.set(N,g/N.BYTES_PER_ELEMENT)}const p=Qc(d,t),_=Float64Array,b=r._malloc(p*_.BYTES_PER_ELEMENT);if(r.ccall("pcafit_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number"],[m,e.nrows,e.ncols,t,l,o,b,h,v,g,f])!==1)throw new Error("pca_fit: PCA failed.");const E=r.HEAPF64.slice(b/_.BYTES_PER_ELEMENT,b/_.BYTES_PER_ELEMENT+p);return r._free(m),r._free(b),h&&r._free(h),g&&r._free(g),{class:["pcamodel"],v:E,ncomp:t,nrows:u,ncols:d,exclvars:c,center:l,scale:o}}function Zc(r,e,t,l){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pca_predict: parameter "m" must be JSON with PCA model.');if(!gr(t))throw new Error("pca_predict: X must be a matrix.");l||(l=[]);const o=l&&Array.isArray(l)?l.length:0;if(!es(l,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');let a=e.exclvars.length;e.exclvars;const c=t.nrows-o;t.ncols===e.ncols&&(a=0);const v=t.ncols-a;if(c<1)throw new Error("pca_predict: X must have at least 1 row.");if(v!==e.ncols)throw new Error("pca_predict: X must have the same number of columns (without excluded ones) as the training set.");const f=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,f/t.v.BYTES_PER_ELEMENT);let u=null;if(o>0){const w=new Int32Array(l);u=r._malloc(w.length*w.BYTES_PER_ELEMENT),r.HEAP32.set(w,u/w.BYTES_PER_ELEMENT)}let d=null;if(a>0){const w=new Int32Array(e.exclvars);d=r._malloc(w.length*w.BYTES_PER_ELEMENT),r.HEAP32.set(w,d/w.BYTES_PER_ELEMENT)}const m=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,m/e.v.BYTES_PER_ELEMENT);const h=Xc(t.nrows-o,e.ncomp,t.ncols-a),g=Float64Array,p=r._malloc(h*g.BYTES_PER_ELEMENT);if(r.ccall("pcapredict_wasm",["number"],["number","number","number","number","number","number","number","number","number"],[f,t.nrows,t.ncols,m,p,u,o,d,a])!==1)throw new Error("pca_predict: PCA prediction failed.");const b=r.HEAPF64.slice(p/g.BYTES_PER_ELEMENT,p/g.BYTES_PER_ELEMENT+h);r._free(f),r._free(m),r._free(p),u&&r._free(u),d&&r._free(d);const A={class:["pcares"],v:b,ncomp:e.ncomp,nrows:c,ncols:v,outliers:l,exclvars:e.exclvars,center:e.center,scale:e.scale},E=new Array(e.ncomp),N=new Array(e.ncomp),C=new Array(e.ncomp),k=new Array(e.ncomp),q=new Array(e.ncomp),M=ar(A,"xcumexpvar");q[0]=1,k[0]=M[0],C[0]=1-M[0],E[0]=M[0],N[0]=1-M[0];for(let w=1;w<e.ncomp;w++)q[w]=w+1,k[w]=M[w],C[w]=1-M[w],E[w]=M[w]-M[w-1],N[w]=1-E[w];return A.stat={components:q,resvar:N,expvar:E,cumexpvar:k,cumresvar:C},A}function $c(r,e,t,l,o,a,c,v){if(!e||!e.class||!e.class.includes("pcamodel"))throw new Error('pcapcv: parameter "m" must be JSON with PCA results.');if(!gr(t))throw new Error("pcapcv: X must be a matrix.");v||(v=[]);const f=v&&Array.isArray(v)?v.length:0;if(!es(v,0,t.nrows-1))throw new Error('pca_predict: some indices in "outliers" array are outside the expected range.');const u=e.exclvars.length,d=t.nrows-f,m=t.ncols-u;if(d<3)throw new Error("pcapcv: X must have at least 3 rows.");if(m!==e.ncols)throw new Error("pcapcv: X must have the same number of columns as the training set.");if(!Number.isInteger(a)||![0,1,2].includes(a))throw new Error('pcapcv: parameter "cv_type" must be one of 0 ("loo"), 1 ("ven"), 2 ("rand).');if(!Number.isInteger(c)||![0,1].includes(c))throw new Error('pcapcv: parameter "cv_scope" must be 0 ("global") or 1 ("local").');if(a>0&&(!Number.isInteger(o)||o<2))throw new Error('pcapcv: parameter "cv_nseg" must be a number ≥ 2.');if(a>0&&o>d)throw new Error('pcapcv: the value of "cv_nseg" is too large for the given X.');if(!Number.isInteger(l)||l<1)throw new Error('pcapcv: the value of "ncomp" must be a number >= 1.');const h=Math.min(a===0?d-2:d-Math.ceil(d/o)-1,m,e.ncomp);if(l>h)throw new Error('pcapcv: the value of "ncomp" is too large.');const g=r._malloc(t.v.length*t.v.BYTES_PER_ELEMENT);r.HEAPF64.set(t.v,g/t.v.BYTES_PER_ELEMENT);let p=null;if(f>0){const q=new Int32Array(v);p=r._malloc(q.length*q.BYTES_PER_ELEMENT),r.HEAP32.set(q,p/q.BYTES_PER_ELEMENT)}let _=null;if(u>0){const q=new Int32Array(e.exclvars);_=r._malloc(q.length*q.BYTES_PER_ELEMENT),r.HEAP32.set(q,_/q.BYTES_PER_ELEMENT)}const b=r._malloc(e.v.length*e.v.BYTES_PER_ELEMENT);r.HEAPF64.set(e.v,b/e.v.BYTES_PER_ELEMENT);const A=d*m,E=t.v.constructor,N=r._malloc(A*E.BYTES_PER_ELEMENT);if(r.ccall("pcvpca_wasm",["number"],["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"],[g,t.nrows,t.ncols,l,e.center,e.scale,a,o,c,b,N,p,f,_,u])!==1)throw new Error("pcapcv: PCVPCA failed.");const k=r.HEAPF64.slice(N/E.BYTES_PER_ELEMENT,N/E.BYTES_PER_ELEMENT+A);return r._free(g),r._free(b),r._free(N),p&&r._free(p),_&&r._free(_),new Wt(k,d,m)}function eu(r,e){let t,l,o;if(e.length>0){const a=r.values.nrows,c=r.objindices,v=a-e.length;t=Array(v),l=Array(v),o=Array(v);let f=0;for(let u=0;u<a;u++)e.includes(u)||(t[f]=c[u],l[f]=r.classes[u],o[f]=r.objlabels[u],f=f+1)}else t=r.objindices,o=r.objlabels,l=r.classes;return[t,o,l]}function sl(){const r=new Date;return`${r.getFullYear()}${(r.getMonth()+1).toString().padStart(2,"0")}${r.getDate().toString().padStart(2,"0")}${r.getHours().toString().padStart(2,"0")}${r.getMinutes().toString().padStart(2,"0")}${r.getSeconds().toString().padStart(2,"0")}${r.getMilliseconds().toString().padStart(3,"0")}`}function ll(r,e,t,l){const[o,a,c]=eu(t,l),v=Zc(r,e,t.values,l);v.hash=sl(),v.objindices=o,v.objlabels=a,v.classes=c,v.classNames=t.classNames,v.varlabels=t.varlabels,v.eigenvals=Ke(e,"eigenvals"),v.cNh=Ke(e,"cNh"),v.cNq=Ke(e,"cNq"),v.ch0=Ke(e,"ch0"),v.cq0=Ke(e,"cq0"),v.rNh=Ke(e,"rNh"),v.rNq=Ke(e,"rNq"),v.rh0=Ke(e,"rh0"),v.rq0=Ke(e,"rq0");const f=e.nrows;return v.T2lim=2*(f-1)/(f-2)*Wo(.95,2,f-2),v}function tu(r,e="."){return Array.isArray(r)&&r.length>0?e==="."?r.map(t=>Number.parseFloat(t.trim())):r.map(t=>Number.parseFloat(t.trim().replace(e,"."))):e==="."?Number.parseFloat(r.trim()):Number.parseFloat(r.trim().replace(e,"."))}function bn(r){return r.some(e=>Number.isNaN(e))}function qr(r){return r.replace("	","").trim().replace(/^(['"])(.*)\1$/,"$2")}function sa(r){let e=r.replace(/^\uFEFF/gm,"").replace(/^\u00EF?\u00BB\u00BF/gm,"");return e=e.replace(/\r/gm,""),e.split(/\n/).filter(t=>t.trim().length>1)}function ru(r,e,t,l,o,a,c,v=0){if(e===void 0&&(e=","),!(e===","||e===";"))throw new Error("Values separator can be either comma or semicolon.");const u=e===";"?",":".";let d=sa(r);if(d.length<1)throw new Error("Could not find non-empty rows with values, check your CSV file and try again.");d=d.filter(S=>S.replaceAll(e,"").trim().length>0);const m=d[0].split(e);if(m.length<2)throw new Error("Found only one column, looks like your delimiter is not correct.");let h=0,g;const p=t!=="no";(p||p===void 0&&bn(firstRow))&&(g=m,h=1);const _=d.length-h;if(_<1)throw new Error("Data file should contain at least 1 row with values.");let b,A,E,N=Array(_);l?(b=p?qr(g[0]):"",E=Array(_),A=1):(b="",E=[],A=0);let C,k=[],q;o?(C=p?qr(g[A]):"",q=Array(_),A=A+1):(C="",q=[]);const M=m.length-A;if(M<1)throw new Error("Data file should contain at least 1 column with values.");const w=Wt.zeros(M,_);for(let S=h;S<_+h;S++){const O=S-h;N[O]=O;let L=d[S].split(e);if(l&&(E[O]=L[0],L.shift()),o){const X=L[0];q[O]=X,L.shift(),(k.length===0||k.indexOf(X)<0)&&k.push(X)}const j=u==="."?L.map(X=>Number.parseFloat(X.trim())):L.map(X=>Number.parseFloat(X.trim().replace(u,".")));if(j.some(X=>Number.isNaN(X)))throw new Error("Some of the values can not be converted to numbers, check your CSV file and try again.");if(j.length!=M)throw new Error("Wrong number of values in row #"+S);w.v.set(new Float64Array(j),(S-h)*M)}if(!l||E.length!==_){E=Array(_);for(let S=0;S<_;S++)E[S]="O"+(S+1)}E=E.map(S=>qr(S)),q=q.map(S=>qr(S)),k=k.map(S=>qr(S));let P,U=Array(M),z=Array(M);if(g&&g.length===M+A){P=g.map(S=>qr(S)).slice(A);for(let S=0;S<M;S++)U[S]=S,z[S]=S+1}else{P=Array(M);for(let S=0;S<M;S++)U[S]=S,P[S]="V"+(S+1),z[S]=S+1}let W;if(t==="values"){if(W=u==="."?P.map(S=>Number.parseFloat(S.trim())):P.map(S=>Number.parseFloat(S.trim().replace(u,"."))),W.some(S=>Number.isNaN(S)))throw new Error("Some of the header values can not be converted to numbers, check your CSV file and try again.")}else W=z;Array.isArray(W)||(W=[]),a||(a=""),c||(c=""),a=W.length>0&&a.length>0?a:"Variables",c=W.length>0&&c.length>0?c:"";const V=a+(c.length>0?", "+c:""),Y=W[1]<W[0];return{values:w.t(),header:t,hasLabels:l,hasClassNames:o,labelsVarname:b,classLabelsVarname:C,objlabels:E,objindices:N,varlabels:P,varvalues:W,varindices:U,varrev:Y,classes:q,responses:null,classNames:k,sep:e,dec:u,varvaluesName:a,varvaluesUnits:c,varAxisTitle:V}}function nu(r){if(bn(r[0].slice(2)))return!0;const e=r[0].length,t=[];for(let l=2;l<e;l++){let o=[];for(let u=1;u<r.length;u++)o.push(r[u][l]);const a=r[0][l],c=hn(o),v=Hs(o),f=Math.abs((a-c)/v);t.push(f)}return t.every(l=>l>5)}function su(r){const e=",",t=r[0].split(e),l=r[1].split(e),o=t.length,a=l.length,c=";",v=r[0].split(c),f=r[1].split(c),u=v.length,d=f.length;let m,h;if(o>1&&a>1&&o===a&&o>u)h=e,m=o;else if(u>1&&d>1&&u===d)h=c,m=a;else throw new Error("Values in the CSV file should be separated by coma or by semicolon.");return[h,h===","?".":",",m]}function lu(r){const e=sa(r),t=e.length;if(t<3)throw new Error("It looks like the dataset has less then three rows, minimum three is needed, check your CSV file and try again.");const[l,o,a]=su(e),c=Math.min(a,5),v=Math.min(t,5);let f=e.slice(0,v).map(M=>M.split(l).slice(0,c));f=f.map(M=>M.map(w=>qr(w)));const u=f.map(M=>tu(M.slice(),o));for(let M=1;M<v;M++)if(bn(u[M].slice(2)))throw new Error("Some of the data values expected to be numeric are not, check your CSV file.");const d=nu(u);let m=0;const h=d?1:0,g=h+1,p=f[h][0],_=f[g][0],b=u[h][0],A=u[g][0],E=u[h][1],N=u[g][1];let C=!1,k=!1;if(Number.isNaN(b)&&Number.isNaN(A)&&p!==_?(C=!0,m=m+1):Number.isNaN(E)&&Number.isNaN(N)&&p!==_&&(C=!0,k=!0,m=m+2),!k){const M=C?1:0,w=u[h][M],P=u[g][M];k=bn([w,P]),m=m+k}let q="no";if(d){m>0?f[0].slice(m):f[0];const M=m>0?u[0].slice(m):u[0];q=bn(M)?"labels":"values"}return[l,C,k,q]}function ou(r){if(!r.length)return"";r.sort((o,a)=>o-a);let e=[],t=r[0],l=t;for(let o=1;o<r.length;o++)r[o]===l+1?l=r[o]:(t===l?e.push(`${t}`):e.push(`${t}-${l}`),t=r[o],l=t);return t===l?e.push(`${t}`):e.push(`${t}-${l}`),e.join(" ")}function ol(r,e){return gr(e)?{__type:"matrix",nrows:e.nrows,ncols:e.ncols,v:Array.from(e.v)}:Me(e)?{__type:"vector",length:e.length,v:Array.from(e.v)}:ArrayBuffer.isView(e)?{__type:e.constructor.name,data:Array.from(e)}:e}function la(r,e){if(e&&typeof e=="object"&&e.__type){if(e.__type==="matrix")return Kc(e.v,e.nrows,e.ncols);if(e.__type==="vector")return Ge(e.v);const t=globalThis[e.__type];if(typeof t=="function")return new t(e.data)}return e}function al(r){const e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),o=String(r.getHours()).padStart(2,"0"),a=String(r.getMinutes()).padStart(2,"0"),c=String(r.getSeconds()).padStart(2,"0");return`${e}${t}${l}${o}${a}${c}`}function ts(r,e){return Object.keys(r).reduce((t,l)=>(t[l]=e(r,l),t),{})}function au(r,e,t,l,o){const a=r.ncomp,c=r.nrows,v=new Array(a),f=new Array(a),u=new Array(a),d=new Array(a);for(let m=0;m<a;m++){const h=ar(r,e==="robust"?"fdistr":"fdistc",m+1),g=oa(!1,h,l[m],o[m]);let p=r.nrows;const _=l[m],b=t[m],A=new xe(h);let E=A.sort(),N=A.sortind();const C=Array.from({length:c},()=>"alien");let k=-1,q=0,M=0,w=0,P=0;for(;k<0;)q>0&&(C[N.v[p-1]-1]="external",p=p-1,N=N.slice(1,p),E=E.slice(1,p)),M=hn(E),w=Gs(E,!0),P=w/(M*M),k=4-2*b*P,q=q+1;const U=(2+Math.sqrt(k))/P,z=U-b,W=M/U,V=_/W,Y=1-2*(b+z)*(b+3*z)/(3*(b+2*z)**2),D=(Y-1)*(1-3*Y),S=(b+2*z)/(b+z)**2,O=1+Y*S*(Y-1-.5*(2-Y)*D*S),L=Y*Math.sqrt(2*S)*(1+.5*D*S),j=Kn((Math.pow(V/(b+z),Y)-O)/L);v[m]=g,v[m].beta=j,v[m].s=z,v[m].k=b,v[m].Mz=O,v[m].Sz=L,v[m].m=M,v[m].f0=W,v[m].hz=Y,v[m].anum={aliens:p,external:c-p},v[m].a=C,u[m]=1-j,f[m]=g.TN/(g.TN+g.FP),d[m]=m+1}return{class:["simcares"],classes:r.classes,classNames:r.classNames,target:!1,v,nrows:r.nrows,stat:{specificity:f,selectivity:u,components:d}}}function oa(r,e,t,l){const o=e.length,a=new Array(o),c=new Array(o),v={regular:0,extreme:0,outliers:0},f={in:0,out:0};let u=0,d=0,m=0,h=0;for(let g=0;g<o;g++){const p=e[g];p<t?(a[g]="regular",c[g]="in",v.regular+=1,f.in+=1):p>l?(a[g]="outlier",c[g]="out",v.outliers+=1,f.out+=1):(a[g]="extreme",c[g]="out",v.extreme+=1,f.out+=1),u=u+(c[g]==="in"&&r),h=h+(c[g]!=="in"&&r),m=m+(c[g]!=="in"&&!r),d=d+(c[g]==="in"&&!r)}return{f:e,c:a,d:c,cnum:v,dnum:f,TP:u,TN:m,FN:h,FP:d}}function il(r,e,t,l){const o=r.ncomp,a=new Array(o),c=new Array(o),v=new Array(o);for(let f=0;f<o;f++){const u=ar(r,e==="robust"?"fdistr":"fdistc",f+1),d=oa(!0,u,t[f],l[f]);c[f]=d.TP/(d.TP+d.FN),v[f]=f+1,a[f]=d}return{class:["simcares"],classes:r.classes,target:!0,v:a,nrows:r.nrows,stat:{sensitivity:c,components:v}}}function rs(r,e,t,l,o,a,c){(!a||!Array.isArray(a))&&(a=[]),(!c||!Array.isArray(c))&&(c=[]);const v=l.values.nrows,f=a.length,u=v-f,d=e.ncomp,m=ar(t.pca,"qdist",d),h=ar(t.pca,"hdist",d),g=e.limType==="classic"?"c":"r",p=ar(t.pca,"fdist"+g,d),_=Ke(r,g+"Nh")[d-1],b=Ke(r,g+"Nq")[d-1],A=Ke(r,g+"h0")[d-1],E=Ke(r,g+"q0")[d-1],N=_+b,C=t.simca.v[d-1],k=l.sep,q=t.simca.classes&&t.simca.classes.length===u,M=q?["","","","",""]:["","","",""];let w="";if(w+=["Reference classes:",q?"provided":"not provided",...M].join(k)+`
`,w+=["Number of components:",d,...M].join(k)+`
`,w+=["Alpha:",(e.alpha/100).toFixed(3),...M].join(k)+`
`,w+=["Limits estimator:",e.limType,...M].join(k)+`
`,w+=`
`,w+=["Nh:",_,...M].join(k)+`
`,w+=["Nq:",b,...M].join(k)+`
`,w+=["Nf:",N,...M].join(k)+`
`,w+=`
`,w+=["F crit (extremes):",e.eCrit[d-1],...M].join(k)+`
`,w+=["F crit (outliers):",e.oCrit[d-1],...M].join(k)+`
`,w+=`
`,c.length>0&&(w+=["Number of excluded varibles:",c.length,...M].join(k)+`
`,w+=["Indices of excluded varibles:",ou(c),...M].join(k)+`
`,w+=`
`),C.beta!==null&&C.beta!==void 0){w+=["Objects treated as from non-target class","",...M].join(k)+`
`,w+=["Objects:",v,...M].join(k)+`
`,w+=["In:",C.dnum.in,...M].join(k)+`
`,w+=["Out:",C.dnum.out,...M].join(k)+`
`,w+=["Aliens:",C.anum.aliens,...M].join(k)+`
`,w+=["External:",C.anum.external,...M].join(k)+`
`,w+=["Specificity:",t.simca.stat.specificity?t.simca.stat.specificity[d-1]:"-",...M].join(k)+`
`,w+=["Selectivity:",t.simca.stat.selectivity?t.simca.stat.selectivity[d-1]:"-",...M].join(k)+`
`,w+=["Beta:",C.beta,...M].join(k)+`
`,w+=["Non-centrality, s:",C.s,...M].join(k)+`
`,w+=["Scaling, f0:",C.f0,...M].join(k)+`
`,w+=`
`,w+=["","object","class","role","decision","h/h0","q/q0","f"].join(k)+`
`;for(let V=0;V<v;V++)w+=["",l.objlabels[V],t.simca.classes[V],C.a[V],C.d[V],h[V]/A,m[V]/E,p[V]].join(k)+`
`}else{w+=["Objects treated as from target class","",...M].join(k)+`
`,w+=["Objects:",v,...M].join(k)+`
`,w+=["Removed:",f,...M].join(k)+`
`,w+=["In:",C.dnum.in,...M].join(k)+`
`,w+=["Out:",C.dnum.out,...M].join(k)+`
`,w+=["Regular:",C.cnum.regular,...M].join(k)+`
`,w+=["Extreme:",C.cnum.extreme,...M].join(k)+`
`,w+=["Outliers:",C.cnum.outliers,...M].join(k)+`
`,w+=["Sensitivity:",t.simca.stat.sensitivity?t.simca.stat.sensitivity[d-1]:"-",...M].join(k)+`
`,w+=`
`,w+=["","object","class","role","decision","h/h0","q/q0","f"].join(k)+`
`;let V=0;for(let Y=0;Y<v;Y++){if(f>0&&a.includes(Y)){w+=["",l.objlabels[Y],"-","removed","-","-","-","-"].join(k)+`
`;continue}w+=["",l.objlabels[V],t.pca.classes[V],C.c[V],C.d[V],h[V]/A,m[V]/E,p[V]].join(k)+`
`,V=V+1}}w+=`
`,l.dec!=="."&&(w=w.replace(/\./g,l.dec)),w=["Target class:",e.className,...M].join(k)+`
`+w,w=["Data filename:",l.fileName,...M].join(k)+`
`+w;let P=["DD-SIMCA results ("+o+")","https://mda.tools/ddsimca/",...M].join(k)+`

`;const U=new Blob([P+w],{type:"text/csv"}),z=window.URL.createObjectURL(U),W=document.createElement("a");W.setAttribute("href",z),W.setAttribute("download",`ddsimca-results-${o}.csv`),W.click()}function cl(r,e){const t=new Blob([JSON.stringify({pca:r,simca:e},ol)],{type:"application/json"}),l=window.URL.createObjectURL(t),o=document.createElement("a");o.setAttribute("href",l),o.setAttribute("download","ddsimca-model.json"),o.click()}var iu=$('<button tabindex="0" class="button svelte-ymtj5z"> </button>');function at(r,e){let t=K(e,"text",3,"button");var l=iu();l.__click=function(...a){var c;(c=e.onclick)==null||c.apply(this,a)};var o=F(l);se(()=>de(o,t())),T(r,l)}$e(["click"]);var cu=$('<button tabindex="0"></button>');function aa(r,e){var t=cu();t.__click=function(...l){var o;(o=e.onclick)==null||o.apply(this,l)},se(()=>{R(t,"title",e.title),R(t,"aria-label",e.title),R(t,"alt",e.title),Zr(t,`button ${e.className??""} svelte-bx9fh5`)}),T(r,t)}$e(["click"]);function nn(r,e){let t=K(e,"title",3,"Reset");aa(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-cancel"})}function uu(r,e){let t=K(e,"title",3,"Undo");aa(r,{get title(){return t()},get onclick(){return e.onclick},className:"button-undo"})}function it(r){const e={};for(const t of Object.keys(r))e[t]=r[t].default;return e}var fu=$('<span class="label svelte-h4yni9"> </span>'),du=$("<div><!> <!></div>");function Ee(r,e){let t=K(e,"label",3,null),l=K(e,"name",3,""),o=K(e,"status",3,""),a=K(e,"colors",3,""),c=K(e,"labelWidth",3,12);var v=du(),f=F(v);{var u=m=>{var h=fu(),g=F(h);se(()=>{R(h,"style",`flex-basis:${c()??""}ch;`),de(g,t())}),T(m,h)};H(f,m=>{t()&&m(u)})}var d=I(f,2);Rr(d,()=>e.children??dt),se(()=>{Zr(v,`control-element ${l()??""} ${o()??""} svelte-h4yni9`),R(v,"style",a())}),T(r,v)}const ia=(r,e,t,l)=>{const o=e(r);o<0||o>1||G(t,ee(o*100>s(l)-5&&o*100<s(l)+5))},ca=(r,e,t,l,o,a)=>{G(e,!1);const c=t(r);c<0||c>1||(l(o(c)),a()&&a()(l()))},ua=(r,e,t,l,o,a)=>{if(!s(e))return;const c=t(r);c<0||c>1||(l(o(c)),a()&&a()(l()))},vu=(r,e,t,l,o,a)=>{if(r.key==="ArrowLeft"){e(e()-t()<l()?l():e()-t()),o()&&o()(e());return}if(r.key==="ArrowRight"){e(e()+t()>a()?a():e()+t()),o()&&o()(e());return}};var mu=$('<div role="slider" class="range-slider-container svelte-vhx0r0" tabindex="0"><div class="range-slider svelte-vhx0r0"><span class="range-value svelte-vhx0r0"> </span></div></div>');function fa(r,e){he(e,!0);let t=K(e,"min",7,0),l=K(e,"max",3,100),o=K(e,"value",31,()=>ee(t())),a=K(e,"decNum",3,1),c=K(e,"step",19,()=>+((l()-t())/100).toFixed(4)),v=K(e,"onchange",3,null);pe(()=>{o()<t()&&(o(t()),v()&&v()(o())),o()>l()&&(o(l()),v()&&v()(o())),t()>l()&&t(l())});let f=le(void 0),u=le(void 0),d=le(!1);const m=C=>{const k=t()+C*(l()-t());return+(Math.round(k/c())*c()).toFixed(4)},h=C=>{const k=s(f).getBoundingClientRect(),q=s(u).getBoundingClientRect(),M=k.x,w=q.x+q.width;return(C.clientX-M)/(w-M)},g=C=>{G(d,!1)},p=C=>{let k=o()+c()*C.deltaY*.5;k<t()&&(k=t()),k>l()&&(k=l()),o(+(Math.round(k/c())*c()).toFixed(4)),C.preventDefault(),v()&&v()(o())},_=y(()=>t()===l()?100:(o()-t())/(l()-t())*100);var b=mu();b.__keydown=[vu,o,c,t,v,l],b.__mousemove=[ua,d,h,o,m,v],b.__mousedown=[ia,h,d,_],b.__mouseup=[ca,d,h,o,m,v],b.__touchmove=[ua,d,h,o,m,v],b.__touchstart=[ia,h,d,_],b.__touchend=[ca,d,h,o,m,v];var A=F(b),E=F(A),N=F(E);$r(A,C=>G(f,C),()=>s(f)),$r(b,C=>G(u,C),()=>s(u)),se(C=>{R(b,"aria-valuenow",o()),R(b,"aria-valuemin",t()),R(b,"aria-valuemax",l()),R(A,"style",`width:${s(_)??""}%`),St(A,"range-slider_right",s(_)<50),St(E,"range-value_right",s(_)<50),de(N,C)},[()=>o().toFixed(a())]),Er("mousewheel",b,p),Er("mouseleave",b,g),Er("touchcancel",b,g),T(r,b),ge()}$e(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const da=(r,e,t,l,o)=>{const a=e(r);a<0||a>1||G(t,ee(a>s(l)&&a<s(o)+s(l)))},va=(r,e,t,l,o)=>{G(e,!1);const a=t(r);if(a<0||a>1)return;const c=l(a);o()!==c&&o(c)},ma=(r,e,t,l,o)=>{if(!s(e))return;const a=t(r);if(a<0||a>1)return;const c=l(a);c!=o()&&o(c)},hu=(r,e,t,l,o)=>{if(r.key==="ArrowLeft"){e(e()-t()<l()?l():e()-t());return}if(r.key==="ArrowRight"){e(e()+t()>o()?o():e()+t());return}};var gu=$('<div role="slider" class="range-slider-container range-slider-container_discrete svelte-xdlm7u" tabindex="0"><div class="range-slider svelte-xdlm7u"><span class="range-value svelte-xdlm7u"> </span></div></div>');function _n(r,e){he(e,!0);let t=K(e,"min",3,0),l=K(e,"max",3,10),o=K(e,"value",31,()=>ee(t())),a=K(e,"step",3,1);o()<t()&&(console.error('The "value" is outside of the provided range.'),o(t())),o()>l()&&(console.error('The "value" is outside of the provided range.'),o(l())),t()>l()&&console.error("The min and max values must be distinct.");let c=le(void 0),v=le(void 0),f=le(!1);const u=y(()=>t()===l()?0:(o()-t())/(l()-t()+1)),d=y(()=>a()/(l()-t()+1)),m=y(()=>l()<100?`background: repeating-linear-gradient(to right, var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4), var(--bg-color-light, #f4f4f4) ${s(d)*100}%, var(--bg-color-light2, #e8e8e8) ${s(d)*100}%, var(--bg-color-light2, #e8e8e8) ${200*s(d)}%)`:"background: #f0f0f0"),h=C=>{if(C<0||C>1)return o();let k=o();return C<s(u)&&s(u)>0&&(k=o()-Math.ceil((s(u)-C)/s(d))),C>s(u)+s(d)&&s(u)+s(d)<1&&(k=o()+Math.ceil((C-(s(u)+s(d)))/s(d))),k<t()&&(k=t()),k>l()&&(k=l()),k},g=C=>{const k=s(v).getBoundingClientRect(),q=k.x,M=k.x+k.width;return(C.clientX-q)/(M-q)},p=C=>{G(f,!1)},_=C=>{let k=Math.round(o()+C.deltaY*.5*a());k<t()&&(k=t()),k>l()&&(k=l()),o(k),C.preventDefault()};var b=gu();b.__keydown=[hu,o,a,t,l],b.__mousemove=[ma,f,g,h,o],b.__mousedown=[da,g,f,u,d],b.__mouseup=[va,f,g,h,o],b.__touchmove=[ma,f,g,h,o],b.__touchstart=[da,g,f,u,d],b.__touchend=[va,f,g,h,o];var A=F(b),E=F(A),N=F(E);$r(A,C=>G(c,C),()=>s(c)),$r(b,C=>G(v,C),()=>s(v)),se(C=>{R(b,"aria-valuenow",o()),R(b,"aria-valuemin",t()),R(b,"aria-valuemax",l()),R(b,"style",s(m)),R(A,"style",`width: max(2px, ${s(d)*100}%);left:${s(u)*100}%;`),St(A,"range-slider_left",s(d)<.1&&s(u)<.5),St(A,"range-slider_right",s(d)<.1&&s(u)>=.5),St(E,"range-value_right",s(d)<.1&&s(u)>.5),St(E,"range-value_left",s(d)<.1&&s(u)<=.5),de(N,C)},[()=>o().toFixed(0)]),Er("mousewheel",b,_),Er("mouseleave",b,p),Er("touchcancel",b,p),T(r,b),ge()}$e(["keydown","mousemove","mousedown","mouseup","touchmove","touchstart","touchend"]);const pu=(r,e,t)=>{if(r.key==="ArrowLeft"){const l=e.options.findIndex(o=>o===t());l>0&&t(e.options[l-1]);return}if(r.key==="ArrowRight"){const l=e.options.findIndex(o=>o===t());l<e.options.length-1&&t(e.options[l+1]);return}};var bu=(r,e,t)=>e(t),_u=$('<button tabindex="-1"><!></button>'),wu=$('<div role="radiogroup" tabindex="0"></div> <input class="svelte-1i17tox">',1);function et(r,e){he(e,!0);let t=K(e,"value",31,()=>ee(e.options[0])),l=K(e,"className",3,"");var o=wu(),a=Z(o);a.__keydown=[pu,e,t],Ie(a,20,()=>e.options,v=>v,(v,f)=>{var u=_u();u.__click=[bu,t,f];var d=F(u);bt(d,()=>f,!1,!1),se(m=>{Zr(u,`option option_${m??""} svelte-1i17tox`),St(u,"selected",f==t())},[()=>f.toString().replace(".","_")]),T(v,u)});var c=I(a,2);se(()=>Zr(a,`selector ${l()??""} svelte-1i17tox`)),Bs(c,t),T(r,o),ge()}$e(["keydown","click"]);function Qt(r,e){he(e,!0);let t=K(e,"options",19,()=>["no","yes"]),l=K(e,"value",15,!1),o=le(!0);const a=y(()=>t().length!=2?(console.error('Switch: parameter "option" must gave two values.'),null):t());pe(()=>G(o,ee(l()?t()[1]:t()[0]))),pe(()=>l(s(o)===t()[1]));var c=me(),v=Z(c);{var f=u=>{et(u,{get options(){return s(a)},get value(){return s(o)},set value(d){G(o,ee(d))}})};H(v,u=>{s(a)&&u(f)})}T(r,c),ge()}var yu=$('<div tabindex="0" role="radiogroup" class="file-selector svelte-1k0x7uv"> <input type="file" class="svelte-1k0x7uv"></div> <!>',1);function ha(r,e){he(e,!0);let t=K(e,"file",15),l=K(e,"message",3,"Select CSV file with dataset"),o=K(e,"acceptType",3,".csv"),a;function c(_){a&&a.files.length>0?t(a.files[0]):t(null)}function v(_){(_.type==="click"||_.type==="keydown"&&(_.code==="Space"||_.code==="Enter"))&&a.click()}function f(_){a.value=null,t(null)}var u=yu(),d=Z(u);d.__keydown=v,d.__click=v;var m=F(d),h=I(m);h.__change=c,$r(h,_=>a=_,()=>a);var g=I(d,2);{var p=_=>{nn(_,{onclick:f})};H(g,_=>{t()&&_(p)})}se(()=>{St(d,"selected",t()),de(m,`${(t()?t().name:l())??""} `),R(h,"accept",o())}),T(r,u),ge()}$e(["keydown","click","change"]);function xu(r,e,t,l){e()&&G(t,ee(e()(l())))}var ku=$('<div class="error-message svelte-1qtiwcs"> </div>'),Eu=$('<div><input type="text" class="svelte-1qtiwcs"> <!></div>');function ga(r,e){he(e,!0);let t=K(e,"value",15,""),l=K(e,"className",3,""),o=K(e,"placeholder",3,""),a=K(e,"maxLength",3,25),c=K(e,"validator",3,null),v=le("");var f=Eu(),u=F(f);u.__input=[xu,c,v,t];var d=I(u,2);{var m=h=>{var g=ku(),p=F(g);se(()=>de(p,s(v))),T(h,g)};H(d,h=>{s(v)&&s(v).length>0&&h(m)})}se(()=>{Zr(f,`textinput ${l()??""} svelte-1qtiwcs`),St(f,"error",s(v)&&s(v).length>0),R(u,"placeholder",o()),R(u,"maxlength",a())}),Bs(u,t),T(r,f),ge()}$e(["input"]);var Cu=$('<div class="spinner svelte-n48urb"></div>');function ul(r){var e=Cu();T(r,e)}const Au=(r,e,t)=>{if(r.key==="ArrowLeft"){const l=e().findIndex(o=>o===t());l>0&&t(e()[l-1]);return}if(r.key==="ArrowRight"){const l=e().findIndex(o=>o===t());l<e().length-1&&t(e()[l+1]);return}};var Nu=(r,e,t)=>e(t),Su=$('<button tabindex="-1" class="option svelte-yf64an"><!></button>'),Mu=$('<div role="radiogroup" tabindex="0" class="selector plot-selector svelte-yf64an"></div> <input class="svelte-yf64an">',1);function pa(r,e){he(e,!0);let t=K(e,"options",19,()=>["p","l","b","h"]),l=K(e,"value",31,()=>ee(t()[0]));const o='<svg width="3em" height="1.5em" viewBox="0 0 32 20" fill="transparent" xmlns="http://www.w3.org/2000/svg">',a={bp:'<rect x="8" y="5" width="16" height="10" stroke-width="2"/><line x1="15" y1="14" x2="15" y2="4" stroke-width="2"/><line x1="30" y1="10" x2="25" y2="10" stroke-width="2"/><line x1="8" y1="10" x2="2" y2="10" stroke-width="2"/>',hm:'<rect x="5" y="4" width="23" height="12"stroke-width="2"/><line x1="13" y1="16" x2="13" y2="3" stroke-width="2"/><line x1="21" y1="16" x2="21" y2="3" stroke-width="2"/><line x1="28" y1="10" x2="5" y2="10" stroke-width="2"/>',l:'<path d="M4.23178 14.3598L15.5 5" stroke-width="2"/><line x1="14.4846" y1="5.17692" x2="26.4846" y2="10.1769" stroke-width="2"/>',p:'<circle cx="6.5" cy="12.5" r="1" stroke-width="4"/><circle cx="15.2" cy="5.8" r="1" stroke-width="4"/><circle cx="25" cy="10" r="1" stroke-width="4"/>',h:'<line x1="9" y1="15" x2="9" y2="9" stroke-width="6"/><line x1="17" y1="15" x2="17" y2="3" stroke-width="6"/><line x1="25" y1="15" x2="25" y2="7" stroke-width="6"/>'};a.b=a.l+a.p;const c={bp:"boxplot",hm:"heatmap",l:"line",p:"scatter",b:"line + scatter",h:"bar"};var v=Mu(),f=Z(v);f.__keydown=[Au,t,l],Ie(f,20,t,d=>d,(d,m)=>{var h=Su();h.__click=[Nu,l,m];var g=F(h);bt(g,()=>o+a[m]+"</svg",!1,!1),se(()=>{R(h,"title",c[m]),St(h,"selected",m==l())}),T(d,h)});var u=I(f,2);Bs(u,l),T(r,v),ge()}$e(["keydown","click"]),$e(["keydown","click"]);var Tu=$("<h2> </h2>"),Pu=$("<!> <!>",1),Iu=$('<div class="widget"><!></div>');function Ru(r,e){he(e,!0);let t=K(e,"title",3,""),l=K(e,"value",15),o=K(e,"labelWidth",3,13);function a(u){const d={};for(const m of Object.keys(u))d[m]=u[m].default;return d}pe(()=>{!l()&&e.options&&l(a(e.options))});var c=Iu(),v=F(c);{var f=u=>{var d=Pu(),m=Z(d);{var h=p=>{Ee(p,{children:(_,b)=>{var A=Tu(),E=F(A);se(()=>de(E,t())),T(_,A)},$$slots:{default:!0}})};H(m,p=>{t()&&p(h)})}var g=I(m,2);Ie(g,17,()=>Object.keys(e.options),je,(p,_)=>{var b=me();const A=y(()=>e.options[s(_)]);var E=Z(b);{var N=C=>{Ee(C,{get label(){return s(A).label},get labelWidth(){return o()},children:(k,q)=>{var M=me(),w=Z(M);Os(w,()=>s(A).el,(P,U)=>{U(P,Lr(()=>s(A).props,{get value(){return l()[s(_)]},set value(z){l(l()[s(_)]=z,!0)}}))}),T(k,M)},$$slots:{default:!0}})};H(E,C=>{s(A).hidden||C(N)})}T(p,b)}),T(u,d)};H(v,u=>{l()&&u(f)})}T(r,c),ge()}var Lu=$('<p class="dataset-info svelte-gdjwex"><span>Data file:</span> <span class="file-name svelte-gdjwex"> </span><br> <span>Size:</span> <span class="file-size svelte-gdjwex"> </span></p> <!>',1);function ba(r,e){he(e,!0);var t=me(),l=Z(t);{var o=a=>{Ee(a,{children:(c,v)=>{var f=Lu(),u=Z(f),d=I(F(u),2),m=F(d),h=I(d,5),g=F(h),p=I(u,2);nn(p,{get onclick(){return e.reset}}),se(()=>{R(d,"title",e.dataset.fileName),de(m,e.dataset.fileName),de(g,`${e.dataset.values.nrows??""} × ${e.dataset.values.ncols??""}`)}),T(c,f)},$$slots:{default:!0}})};H(l,a=>{e.dataset&&a(o)})}T(r,t),ge()}var qu=$("<!> <!>",1),zu=$("<!> <!> <!> <!> <!> <!>",1),ju=$("<!> <!>",1),Fu=$("<p> </p>"),Ou=$("<!> <p> </p>",1),Du=$("<p> </p>"),Vu=$("<!> <!>",1);function fl(r,e){he(e,!0);let t=K(e,"model",3,null),l=K(e,"outliers",19,()=>[]),o=K(e,"className",3,"Class"),a=K(e,"classMandatory",3,!1),c=K(e,"classUnique",3,!1),v=K(e,"dataset",15),f=K(e,"resobj",15);const u=[",",";"],d=y(()=>t()?["no","yes"]:["no","labels","values"]);let m=le(void 0),h=le(""),g=le(""),p=le(","),_=le("no"),b=le(!1),A=le(!1),E=le(null),N=le("neutral"),C=le("");function k(S,O,L){G(E,ee(e.WASM().then(j=>{f(ll(j,S,O,L))}).catch(j=>{console.error(j),f(null),G(N,"error"),G(C,ee(j))})))}function q(S,O){if(!S||S.size<10)return;const j=S.slice(0,1e5),X=new FileReader;X.onload=()=>{const Q=X.result;!Q||Q.length<0||((ne=>(G(p,ee(ne[0])),G(b,ee(ne[1])),G(A,ee(ne[2])),G(_,ee(ne[3]))))(lu(Q)),G(A,ee(a()||s(A))),O&&s(_)!=="no"&&G(_,"yes"))},X.onerror=function(Q){csvString=null,G(N,"error"),G(C,ee(Q)),console.error("Error reading CSV file.",Q)},X.readAsText(j)}function M(S){try{const O=ru(S,s(p),s(_)==="yes"?"labels":s(_),s(b),s(A),s(h),s(g));if(O.values.nrows<1)throw new Error("Dataset must have at least 1 row.");if(t()&&O.values.ncols!==t().ncols+t().exclvars.length)throw new Error("Dataset has different number of columns than the training set.");if(O.classNames.length>O.values.nrows/2)throw new Error("Dataset has too many unique "+o().toLowerCase()+" labels ("+O.classNames.length+"), check your CSV file.");if(a()&&O.classNames.length===0)throw new Error("Dataset set must have a column filled with class names.");if(c()&&O.classNames.length>1)throw new Error("Dataset set must have a column filled with only single (target) class name.");O.fileName=s(m).name.replace(/\.[^/.]+$/,""),t()&&(O.varrev=t().varrev,O.header=t().header,O.varlabels=t().varlabels,O.varvalues=t().varvalues,O.varvaluesName=t().varvaluesName,O.varvaluesUnits=t().varvaluesUnits),v(O),G(C,""),G(N,"success")}catch(O){v(null),G(N,"error"),G(C,ee(O))}}function w(S){const O=new FileReader;O.onload=()=>{M(O.result)},O.readAsText(s(m))}function P(){G(m,""),v(null),f(null),G(h,""),G(g,""),G(N,"neutral"),G(C,"")}pe(()=>{s(m)===null?P():(q(s(m),t()),G(N,"neutral"),G(C,""))}),pe(()=>{s(p)&&(G(N,"neutral"),G(C,""))}),pe(()=>{if(v()&&t()&&!f()&&!s(C))try{f(k(t(),v(),l())),G(C,""),G(N,"success")}catch(S){v(null),f(null),G(N,"error"),G(C,ee(S))}});var U=Vu(),z=Z(U);{var W=S=>{var O=ju(),L=Z(O);mn(L,()=>s(m)===void 0,Q=>{Ee(Q,{children:(ne,re)=>{ha(ne,{id:"dataFile",message:"Select CSV file with dataset",get file(){return s(m)},set file(te){G(m,ee(te))}})},$$slots:{default:!0}})});var j=I(L,2);{var X=Q=>{var ne=zu(),re=Z(ne);Ee(re,{label:"Delimiter",children:(ve,fe)=>{et(ve,{id:"sep",options:u,get value(){return s(p)},set value(Ae){G(p,ee(Ae))}})},$$slots:{default:!0}});var te=I(re,2);Ee(te,{label:"Row labels",children:(ve,fe)=>{Qt(ve,{id:"hasLabels",options:["no","yes"],get value(){return s(b)},set value(Ae){G(b,ee(Ae))}})},$$slots:{default:!0}});var ae=I(te,2);{var ye=ve=>{Ee(ve,{get label(){return`${o()??""} labels`},children:(fe,Ae)=>{Qt(fe,{id:"hasLabels",options:["no","yes"],get value(){return s(A)},set value(Ue){G(A,ee(Ue))}})},$$slots:{default:!0}})};H(ae,ve=>{a()||ve(ye)})}var ue=I(ae,2);Ee(ue,{label:"Header",children:(ve,fe)=>{et(ve,{id:"header",get options(){return s(d)},get value(){return s(_)},set value(Ae){G(_,ee(Ae))}})},$$slots:{default:!0}});var we=I(ue,2);{var ie=ve=>{var fe=qu(),Ae=Z(fe);Ee(Ae,{label:"Header name",children:(De,Le)=>{ga(De,{id:"varvaluesName",placeholder:"e.g. Wavelength",get value(){return s(h)},set value(mt){G(h,ee(mt))}})},$$slots:{default:!0}});var Ue=I(Ae,2);Ee(Ue,{label:"Header units",children:(De,Le)=>{ga(De,{id:"varvaluesUnits",maxLength:10,placeholder:"e.g. nm",get value(){return s(g)},set value(mt){G(g,ee(mt))}})},$$slots:{default:!0}}),T(ve,fe)};H(we,ve=>{s(_)==="values"&&ve(ie)})}var oe=I(we,2);Ee(oe,{label:" ",children:(ve,fe)=>{at(ve,{text:"Load",onclick:w})},$$slots:{default:!0}}),T(Q,ne)};H(j,Q=>{s(m)&&Q(X)})}T(S,O)},V=S=>{var O=me(),L=Z(O);{var j=Q=>{var ne=me(),re=Z(ne);Fs(re,()=>s(E),te=>{Ee(te,{children:(ae,ye)=>{var ue=Ou(),we=Z(ue);ul(we);var ie=I(we,2),oe=F(ie);se(()=>de(oe,t()?"Loading data and apply model...":"Loading data...")),T(ae,ue)},$$slots:{default:!0}})},(te,ae)=>{var ye=me(),ue=Z(ye);{var we=ie=>{ba(ie,{get dataset(){return v()},reset:P})};H(ue,ie=>{v()!==null&&ie(we)})}T(te,ye)},(te,ae)=>{Ee(te,{status:"error",children:(ye,ue)=>{var we=Fu(),ie=F(we);se(()=>de(ie,s(ae))),T(ye,we)},$$slots:{default:!0}})}),T(Q,ne)},X=Q=>{var ne=me(),re=Z(ne);{var te=ae=>{ba(ae,{get dataset(){return v()},reset:P})};H(re,ae=>{v()&&ae(te)})}T(Q,ne)};H(L,Q=>{s(E)?Q(j):Q(X,!1)})}T(S,O)};H(z,S=>{v()?S(V,!1):S(W)})}var Y=I(z,2);{var D=S=>{Ee(S,{status:"error",children:(O,L)=>{var j=Du(),X=F(j);se(()=>de(X,s(C))),T(O,j)},$$slots:{default:!0}})};H(Y,S=>{(s(N)==="error"||s(C))&&S(D)})}T(r,U),ge()}var Bu=$('<span class="item svelte-1ggez3e"> </span>'),Yu=$('<p class="outliers svelte-1ggez3e"><span style="color:#a0a0a0;">Removed:</span> <!></p> <!> <!>',1);function dl(r,e){he(e,!0);var t=me(),l=Z(t);{var o=a=>{Ee(a,{children:(c,v)=>{var f=Yu(),u=Z(f),d=I(F(u),2);Ie(d,17,()=>e.outliers,je,(p,_)=>{var b=Bu(),A=F(b);se(()=>de(A,e.dataset.objlabels[s(_)])),T(p,b)});var m=I(u,2);{var h=p=>{uu(p,{get onclick(){return e.undoOutliers}})};H(m,p=>{e.outliers.length>1&&p(h)})}var g=I(m,2);nn(g,{get onclick(){return e.resetOutliers}}),T(c,f)},$$slots:{default:!0}})};H(l,a=>{e.dataset&&e.outliers&&e.outliers.length>0&&a(o)})}T(r,t),ge()}const Wu={small:30,medium:40,large:50,xlarge:60},Uu={small:5,medium:8,large:12,xlarge:15},Hu={small:6,medium:10,large:14,xlarge:18},vl={small:4,medium:6,large:8,xlarge:10},Gu={small:12,medium:15,large:19,xlarge:21},ml={small:11,medium:15,large:17,xlarge:19},wn={small:["0","3,3","1,1","3,1,1,1"],medium:["0","5,5","2,2","5,2,2,2"],large:["0","7,7","3,3","7,3,2,3"],xlarge:["0","9,9","4,4","9,3,3,3"]},yn=["●","◼","▲","▼","⬥","＋","✳","✕"],Ku=.8,_a=.5,Xu={small:5,medium:8,large:12,xlarge:15},vt={MIDDLEGRAY:"#dadada",DARKGRAY:"#606060",LEGEND:"#303030",PRIMARY:"#2679B2",PRIMARY_TEXT:"#333",CLEGEND_LABELS:"#808080"};function wa(r,e){return Array.isArray(r)&&r.length===e&&!r.some(t=>t===void 0)&&!r.some(t=>isNaN(t))}function ya(r,e){if(r!=null&&(Array.isArray(r)&&(r=Ge(r)),!(!Me(r)||r.length<1)))return r.apply(t=>wl((t-e[1])*e[0]+e[2])).v}function st(r,e){return ya(r,e.coords)}function hl(r,e){return ya(r,e.objects)}function xa(r,e){if(r!=null&&(Array.isArray(r)&&(r=Ge(r)),!(!Me(r)||r.length<1)))return r.apply(t=>(t-e[2])/e[0]+e[1]).v}function ka(r,e){return xa(r,e.coords)}function Ea(r,e){return xa(r,e.objects)}function gl(r){return r===0?"":`<tspan>&times;10</tspan><tspan font-size="0.75em" dy="-0.5em">${r.toString()}</tspan>`}function zr(r){if(r===Math.round(r))return r;if(Math.abs(r)>10**6)return Math.round(r);if(Math.abs(r)<10**-6)return r;let e=r.toPrecision(10);return e=e.replace(/\.?0+$/,""),parseFloat(e)}function pl(r){if(r===void 0)return[0,void 0];if(r.length<1)return[0,void 0];if(r.length===1)return[0,[r[0].toString()]];let e=zr(Math.abs(tn(qo(r)))),t=0;if(e>=1)return e<100?[0,Array.from(r).map(a=>a.toFixed(0))]:(t=Math.ceil(zr(Math.log10(e)))-2,[t,Array.from(r).map(a=>(a/Math.pow(10,t)).toFixed(0))]);let l=Math.ceil(-zr(Math.log10(e)));return l<=2?[0,Array.from(r).map(o=>o.toFixed(l))]:(t=l-2,l=2,zr(Math.abs(qt(r)))<=10?[-t,Array.from(r).map(o=>(o*Math.pow(10,t)).toFixed(l))]:[-t,Array.from(r).map(o=>(o/Math.pow(10,t)).toString())])}function Et(r,e,t){return Array.isArray(r)&&(r=Ge(r)),Me(r)?r.length<1?(console.error(e+": vector with coordinates is empty."),null):t&&r.length!==t?(console.error(e+": vector does not have the expected length of "+t+"."),null):r:(console.error(e+": coordinates must be provided as array or instance of Vector class."),null)}function bl(r,e,t,l){if(!r||!e||r.length!==e.length)return console.error("val2p: provided coordinate values are not correct."),null;const o=t.coords,a=l.coords;let c="";for(let v=0;v<r.length;v++){const f=wl((r.v[v]-o[1])*o[0]+o[2]),u=wl((e.v[v]-a[1])*a[0]+a[2]);c+=f+","+u+" "}return c}function Ca(r,e){return r?Array.isArray(r)?!e||e.length<1?[null,"tick labels must be accompanied with tick values."]:e.v.length!==r.length?[null,"number of tick labels and values should be the same."]:[r.map(t=>xn(t)),""]:[null,"tick labels must be provided as array."]:[null,""]}function Aa(r,e){if(Array.isArray(r)&&(r=Ge(r)),!Me(r))return[null,"tick values must be provided as an array or as a vector."];if(r.v.some(c=>isNaN(c)))return[null,"tick values must be numeric"];const t=new Set(r.v);if(r.length!==t.size)return[null,"ticks values must be unique."];const l=e[0]<e[1]?e[0]:e[1],o=e[0]<e[1]?e[1]:e[0],a=r.filter(c=>c>=l&c<=o);return a.length!==r.length?[null,"some of ticks values are outside axis limits."]:[a,""]}function _l(r,e,t,l,o,a){o==null&&(o=!1),a===void 0&&(a=1e-4);const c=e[0]<e[1]?e:[e[1],e[0]];if(r)return r;if(typeof c!="object"||c[0]===void 0||c[1]===void 0){console.error("getAxisTicks: provided axis limits are not valid.");return}const v=Math.abs(c[1]-c[0])*a,f=c[1]-c[0]-2*v,u=Math.floor(Math.log10(f)),d=1/Math.pow(10,u-1),m=Math.round(f*d)/d;let h=Qu(m/t);o&&(Math.abs(c[1]-c[0])<=1?console.error('getAxisTicks: parameter "whole" will be ignored as axis limits are too narrow to fit whole ticks.'):(h<1&&(h=1),h=Math.round(h)));let g=Math.ceil((c[0]+v)/h)*h,p=Math.floor((c[1]-v)/h)*h;Math.abs(c[0]-g)<h/10&&(g=g+h),Math.abs(c[1]-p)<h/10&&(p=p-h),t=Math.ceil(zr((p-g)/h))+1,r=xe.zeros(t);for(let _=0;_<t;_++)r.v[_]=g+h*_;if(Math.abs(h)<1){const _=Math.pow(10,1+Math.round(-Math.log10(h)));r=r.apply(b=>Math.round((b+Number.EPSILON)*_)/_)}return r.filter(_=>_>=c[0]&_<=c[1])}function Qu(r,e){const t=Math.floor(Math.log10(r)),l=r/Math.pow(10,t);let o;return l<=1?o=1:l<=2?o=2:l<=5?o=5:o=10,o*Math.pow(10,t)}function wl(r){return Math.round(r*10)/10}function Ju(r,e){return e<300.2||r<400.2?"small":e<400.2||r<700.2?"medium":e<650.2||r<850.2?"large":"xlarge"}function Na(r,e){return r<400.2?"small":r<700.2?"medium":r<900.2?"large":"xlarge"}function Zu(){const r=new Int32Array(256);for(let e=0;e<256;e++){let t=e;for(let l=0;l<8;l++)t=t&1?3988292384^t>>>1:t>>>1;r[e]=t}return r}function $u(r){let e=-1,t=Zu();for(let l=0;l<r.length;l++)e=t[(e^r[l])&255]^e>>>8;return e^-1}function ef(r,e){const t=new Uint8Array(13);e*=39.3701,t[0]=112,t[1]=72,t[2]=89,t[3]=115,t[4]=e>>>24,t[5]=e>>>16,t[6]=e>>>8,t[7]=e&255,t[8]=t[4],t[9]=t[5],t[10]=t[6],t[11]=t[7],t[12]=1;const l=$u(t),o=new Uint8Array(4);o[0]=l>>>24,o[1]=l>>>16,o[2]=l>>>8,o[3]=l&255;const a=new Uint8Array(4);a[0]=0,a[1]=0,a[2]=0,a[3]=9;const c=new Uint8Array(54);return c.set(r,0),c.set(a,33),c.set(t,37),c.set(o,50),c}function tf(r,e){const t=r.split(","),l=t[0],o=t[1],a=33/3*4,c=o.substring(0,a),v=o.substring(a),f=atob(c),u=new Uint8Array(f.length);for(let h=0;h<u.length;h++)u[h]=f.charCodeAt(h);const d=ef(u,e),m=btoa(String.fromCharCode(...d));return[l,",",m,v].join("")}function rf(r,e,t,l,o){if(t||(t=10),l||(l=10),o||(o=300),t<1||t>30)return console.error('Parameter "width" must be between 1 and 30 (cm).'),null;if(l<1||l>30)return console.error('Parameter "height" must be between 1 and 30 (cm).'),null;if(o<50||o>1200)return console.error('Parameter "res" must be between 50 and 1200 (ppi).'),null;if(!r||!(r instanceof SVGElement))return console.error('Parameter "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const a=t/2.54*o,c=l/2.54*o;setTimeout(()=>{const v=r.clientHeight,f=r.clientWidth;let u=Math.max(a/f,c/v),d=1;u<1&&(d=u,u=1);const m=document.createElement("canvas"),h=m.getContext("2d");m.width=f*(d<1?d:u),m.height=v*(d<1?d:u),r.setAttribute("width",f*u),r.setAttribute("height",v*u),h.fillStyle="white",h.fillRect(0,0,m.width,m.height),h.scale(u,u);const g=new XMLSerializer().serializeToString(r),p=new Blob([g],{type:"image/svg+xml;charset=utf-8"}),_=URL.createObjectURL(p),b=new Image;b.onload=function(){d<0&&(b.width=b.width*d,b.height=b.height*d),h.drawImage(b,0,0,m.width,m.height);const A=m.toDataURL("image/png"),E=tf(A,o),N=document.createElement("a");N.href=E,N.download=`${e}.png`,N.click()},b.src=_},20)}function nf(r,e){if(!r||!(r instanceof SVGElement))return console.error('Variable "svg" is not an instance of SVGElement.'),null;(!e||e.trim()==="")&&(e="plot");const t=r.clientHeight,l=r.clientWidth;r.setAttribute("width",l+"px"),r.setAttribute("height",t+"px"),r.setAttribute("viewBox",`0 0 ${l} ${t}`);const o=new Blob([r.outerHTML],{type:"image/svg+xml"}),a=window.URL.createObjectURL(o),c=document.createElement("a");c.setAttribute("href",a),c.setAttribute("download",`${e}.svg`),c.click()}function sf(r,e,t,l){const o=r.textContent;navigator.clipboard.write([new ClipboardItem({"image/png":lf(e,t,l)})]).then(()=>{r.classList.add("copied"),r.textContent="✓ done",setTimeout(()=>{r.classList.remove("copied"),r.textContent=o},500)},a=>{console.error(a),r.classList.add("error"),r.textContent="x copy",setTimeout(()=>{r.classList.remove("error"),r.textContent=o},500)}).catch(a=>console.error(a))}async function lf(r,e,t){const l=r.clientHeight,o=r.clientWidth,a=Math.max(e/o,t/l),c=document.createElement("canvas"),v=c.getContext("2d");return c.width=o*a,c.height=l*a,v.scale(a,a),r.setAttribute("width",c.width),r.setAttribute("height",c.height),await new Promise((u,d)=>{const m=new XMLSerializer().serializeToString(r),h=new Blob([m],{type:"image/svg+xml;charset=utf-8"}),g=window.URL||window.webkitURL||window,p=g.createObjectURL(h),_=new Image;_.onload=function(){v.drawImage(_,0,0,c.width,c.height),g.revokeObjectURL(p),c.toBlob(function(b){b?u(b):d(new Error("Failed to create blob"))},"image/png")},_.onerror=function(b){d(b)},_.src=p})}function yl(r,e){r>16&&(r=16);const t=[["#2679B2"],["#2679B2","#D22C2F"],["#2679B2","#92B42A","#D22C2F"],["#2679B2","#2E9658","#F2B825","#D22C2F"],["#2679B2","#22988A","#92B42A","#F79426","#D22C2F"],["#2679B2","#1C9AA8","#379531","#EED524","#FB7F28","#D22C2F"],["#2679B2","#1D94A9","#2E9658","#92B42A","#F2B825","#F47129","#D22C2F"],["#2679B2","#1E90AA","#279775","#519E2F","#D3CB25","#F5A326","#EF672A","#D22C2F"],["#2679B2","#1F8DAB","#22988A","#33953F","#92B42A","#EFCA24","#F79426","#EB5F2A","#D22C2F"],["#2679B2","#208BAC","#1E999A","#2E9658","#5FA32E","#C5C626","#F2B825","#F98827","#E85A2B","#D22C2F"],["#2679B2","#2089AD","#1C9AA8","#29976C","#379531","#92B42A","#EED524","#F4AA26","#FB7F28","#E6552B","#D22C2F"],["#2679B2","#2188AD","#1C97A8","#25987C","#329546","#68A62D","#BCC327","#F0C524","#F69E26","#F77728","#E4512B","#D22C2F"],["#2679B2","#2186AD","#1D94A9","#22988A","#2E9658","#469A2F","#92B42A","#DECF25","#F2B825","#F79426","#F47129","#E34E2C","#D22C2F"],["#2679B2","#2285AE","#1E92AA","#209995","#2A9767","#34953A","#6FA82D","#B5C128","#EFCE24","#F3AD25","#F98C27","#F16B29","#E14B2C","#D22C2F"],["#2679B2","#2284AE","#1E90AA","#1D999F","#279775","#31964A","#519E2F","#92B42A","#D3CB25","#F0C224","#F5A326","#FA8527","#EF672A","#E0492C","#D22C2F"],["#2679B2","#2283AE","#1F8FAB","#1C9AA8","#249880","#2E9658","#379531","#73AA2C","#B0BF28","#EDD424","#F2B825","#F69B26","#FB7F28","#ED632A","#DF472C","#D22C2F"]];return e?t[r-1].map(l=>l+e):t[r-1]}function of(r,e,t,l,o){let a=o.ticks,c=o.tickLabels,v=0;const f=_l(a,r,Uu[t.x],!0,o.whole),u=f.length,d=Ea([vl[t.plot]],l)[0],m=xe.fill(e[0],u),h=m.add(d),g=xe.fill(e[1],u);if(c||(a?(v=0,c=a.v.map(w=>zr(w).toString())):[v,c]=pl(f.v)),!c||c.length!==f.length)return console.error('XAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[f,m],[f,g]],_=[[Ge([r[0]]),Ge([e[0]])],[Ge([r[1]]),Ge([e[0]])]],b=[[f,h],[f,m]],A=(r[1]-r[0])*.01,E=[[null,null],[[r[1]-(v>9?1:0)*A],[m.v[u-1]]]],N=gl(v),C=c.length,k=Math.abs(r[1]>r[0]?r[1]-f.v[C-1]:r[1]-f.v[0]),q=Math.abs(r[1]-r[0]),M=Math.abs(f.v[1]-f.v[0]);if(N.length>0&&k<q*.1&&k<M*.5){const w=r[1]>r[0]?C-1:0;c[w]=" "}return{grid:p,axisLine:_,tickCoords:b,tfCoords:E,ticks:a,tickLabels:c,tickFactor:v,tfLabel:N}}function af(r,e,t,l,o){let a=o.ticks,c=o.tickLabels,v=0;const f=_l(o.ticks,e,Hu[t.y],!0,o.whole),u=f.length,d=Ea([vl[t.plot]],l)[0],m=xe.fill(r[0],u),h=m.add(d),g=xe.fill(r[1],u);if(c||(a?(v=0,c=a.v.map(M=>zr(M).toString())):[v,c]=pl(f.v)),c.length!==f.length)return console.error('YAxis: "tickLabels" must be a array of the same size as ticks.'),null;const p=[[m,f],[g,f]],_=[[Ge([r[0]]),Ge([e[0]])],[Ge([r[0]]),Ge([e[1]])]],b=[[m,f],[h,f]],A=[[[],[]],[[h.v[u-1]+(Math.abs(v)>9?3:2)*d],[e[1]]]],E=gl(v),N=c.length,C=Math.abs(e[1]>e[0]?e[1]-f.v[N-1]:e[1]-f.v[0]),k=Math.abs(e[1]-e[0]),q=Math.abs(f.v[1]-f.v[0]);if(E.length>0&&C<k*.1&&C<q*.5){const M=e[1]>e[0]?N-1:0;c[M]=" "}return{grid:p,axisLine:_,tickCoords:b,tfCoords:A,ticks:a,tickLabels:c,tickFactor:v,tfLabel:E}}function cf(r){if(!r.breaks)return console.error("ColormapLegend: breaks values must be provided."),null;const e=Me(r.breaks)?r.breaks.v:r.breaks;if(e.length<2)return console.error("ColormapLegend: incorrect breaks values."),null;if(!r.colmap)return console.error('ColormapLegend: values for "colmap" parameter must be provided.'),null;if(!Array.isArray(r.colmap))return console.error('ColormapLegend: parameter "colmap" must be array with colors.'),null;if(r.colmap.length!==e.length-1)return console.error('ColormapLegend: number of color values in "colmap" does not match number of intervals defined by breaks.'),null;const t=r.colmap;let l,o;if(r.labels?(l=r.labels,o=0):[o,l]=pl(e),!(l.length===e.length-1||l.length===e.length))return console.error('ColormapLegend: number of values in "labels" should be equal to or by one less than number of values in "breaks".'),null;const a=l.length===t.length;return{colmap:t,breaks:e,labels:l,isCentered:a,labelsFactor:o,fontSize:r.fontSize,labelColor:r.labelColor}}function uf(r,e,t,l){const o=r.colmap.length,a=e*Ku,c=a/o,v=t[1]+(e-a)*.5,f=Xu[l.y],u=t[2]+f*_a,d=u+f*(1+_a),m=r.isCentered?c/2:0;return{start:v,top:u,height:f,width:c,dxl:m,ltop:d}}function jr(r,e,t){if(!r||!e||!t||typeof t!="function")return;const l=r.target;if(l.tagName===e){const o=Array.prototype.indexOf.call(l.parentNode.children,l);if(o<0)return;t(o),r.stopPropagation()}}function ff(r,e){const l=document.createElement("canvas").getContext("2d");return l.font=e,l.measureText(r.replace(/<(.|\n)*?>/g,"")).width}function df(r,e){const t="Arial",l=e/8,o=e*1.5,a=Array(r.length),c=Array(r.length);let v=0,f=0,u=0;for(let m=0;m<r.length;m++){const h=ff("  "+r[m].label+"  ",e+"px "+t);u=h>u?h:u;const g=e*r[m].labelHeight+2*l;a[m]=g,c[m]=v,v=v+g,f=f+g}const d=o+2*l+u;return[c,a,o,l,f,d]}function vf(r,e,t,l,o){const[a,c,v,f,u,d]=df(r.items,l*r.fontSize),m=r.position.includes("left")?e[0]+o:r.position.includes("right")?e[1]-d-o:(e[1]+e[0]-d)*.5,h=r.position.includes("top")?t[1]+o:r.position.includes("bottom")?t[0]-u-o:(t[1]+t[0]-u)*.5;return{lgl:m,lgt:h,lgw:d,lgh:u,ely:a,elh:c,elw:v,elp:f}}function xn(r){if(!r||r.length<1)return r;function e(a){return'<tspan font-size="0.75em" dy="-0.5em">'+a+'</tspan><tspan dy="0.4em"> </tspan>'}function t(a){return'<tspan font-size="0.75em" dy="0.5em">'+a+'</tspan><tspan dy="-0.4em"> </tspan>'}let l=0,o="";for(;l<r.length;){const a=r[l];if((a==="^"||a==="_")&&l<r.length-1){const c=a==="^";if(l++,r[l]==="("){let v=l+1;for(;v<r.length&&r[v]!==")";)v++;const f=r.slice(l+1,v);o+=c?e(f):t(f),l=v+1}else if(r[l]==="-"||r[l]==="–"){const v=r.slice(l,l+2);o+=c?e(v):t(v),l=l+2}else o+=c?e(r[l]):t(r[l]),l++}else o+=a,l++}return o}var mf=_e('<line vector-effect="non-scaling-stroke"></line>'),hf=_e("<g></g>");function xl(r,e){he(e,!0);let t=K(e,"lineCoords",19,()=>[]),l=K(e,"lineColor",19,()=>vt.DARKGRAY),o=K(e,"lineType",3,1),a=K(e,"lineWidth",3,1),c=K(e,"className",3,"");const v=At("axes");let f=y(()=>st(t()[0][0],v.tX())),u=y(()=>st(t()[1][0],v.tX())),d=y(()=>st(t()[0][1],v.tY())),m=y(()=>st(t()[1][1],v.tY())),h=y(()=>`stroke:${l()};stroke-width: ${a()}px;stroke-dasharray:${wn[v.scales().plot][o()-1]}`);var g=me(),p=Z(g);{var _=b=>{var A=hf();Ie(A,21,()=>s(f),je,(E,N,C)=>{var k=mf();se(()=>{R(k,"x1",s(f)[C]),R(k,"x2",s(u)[C]),R(k,"y1",s(d)[C]),R(k,"y2",s(m)[C]),R(k,"style",s(h))}),T(E,k)}),se(()=>Ds(A,dc(c()))),T(b,A)};H(p,b=>{s(f)&&s(d)&&s(u)&&b(_)})}T(r,g),ge()}var gf=_e('<text text-anchor="middle"><!></text>'),pf=_e("<text><!></text>"),bf=_e("<text><!></text>"),_f=_e('<g class="tick-labels"><!></g>');function Sa(r,e){he(e,!0);let t=K(e,"pos",3,1),l=K(e,"las",3,1),o=y(()=>["middle","middle","start","middle","end"][t()]),a=y(()=>`fill:${e.textColor};`);const c=At("axes");let v=y(()=>st(e.tickCoords[1][0],c.tX())),f=y(()=>st(e.tickCoords[1][1],c.tY())),u=y(()=>ml[c.scales().plot]),d=y(()=>[0,0,s(u),0,-s(u)][t()]),m=y(()=>[0,s(u),0,-s(u),0][t()]);var h=_f(),g=F(h);{var p=b=>{var A=me(),E=Z(A);Ie(E,17,()=>s(v),je,(N,C,k)=>{var q=gf();R(q,"data-id",k),R(q,"dx",0);var M=F(q);bt(M,()=>e.tickLabels[k],!0,!1),se(()=>{R(q,"x",s(v)[k]),R(q,"y",s(f)[k]),R(q,"dy",s(d)*1.25),R(q,"transform",`rotate(-90, ${s(v)[k]}, ${s(f)[k]})`)}),T(N,q)}),T(b,A)},_=b=>{var A=me(),E=Z(A);{var N=k=>{var q=me(),M=Z(q);Ie(M,17,()=>s(v),je,(w,P,U)=>{var z=pf();R(z,"data-id",U),R(z,"dy",0),R(z,"text-anchor","end");var W=F(z);bt(W,()=>e.tickLabels[U],!0,!1),se(()=>{R(z,"x",s(v)[U]),R(z,"y",s(f)[U]),R(z,"dx",-s(m)/2),R(z,"transform",`rotate(-90, ${s(v)[U]}, ${s(f)[U]})`)}),T(w,z)}),T(k,q)},C=k=>{var q=me(),M=Z(q);Ie(M,17,()=>s(v),je,(w,P,U)=>{var z=bf();R(z,"data-id",U);var W=F(z);bt(W,()=>e.tickLabels[U],!0,!1),se(()=>{R(z,"x",s(v)[U]),R(z,"y",s(f)[U]),R(z,"dx",s(d)),R(z,"dy",s(m)),R(z,"text-anchor",s(o))}),T(w,z)}),T(k,q)};H(E,k=>{l()===2&&t()===1?k(N):k(C,!1)},!0)}T(b,A)};H(g,b=>{l()===2&&t()===4?b(p):b(_,!1)})}se(()=>R(h,"style",s(a))),T(r,h),ge()}const wf=(r,e=dt,t=dt)=>{var l=Nf();const o=y(()=>e().colmap.length);var a=Z(l);Ie(a,17,()=>e().colmap,je,(d,m,h)=>{var g=Ef();const p=y(()=>t().start+h*t().width);var _=Z(g),b=I(_);R(b,"dy",0);var A=F(b);bt(A,()=>e().labels[h],!0,!1),se(()=>{R(_,"x",s(p)),R(_,"y",t().top),R(_,"width",t().width),R(_,"height",t().height),R(_,"fill",s(m)),R(b,"x",s(p)),R(b,"y",t().ltop),R(b,"dx",t().dxl),R(b,"fill",e().labelColor),R(b,"font-size",e().fontSize+"em")}),T(d,g)});var c=I(a);{var v=d=>{var m=Cf();const h=y(()=>t().start+s(o)*t().width);R(m,"dx",0),R(m,"dy",0);var g=F(m);bt(g,()=>e().labels[s(o)],!0,!1),se(()=>{R(m,"x",s(h)),R(m,"y",t().ltop),R(m,"fill",e().labelColor),R(m,"font-size",`${e().fontSize??""}em`)}),T(d,m)};H(c,d=>{e().isCentered||d(v)})}var f=I(c);{var u=d=>{var m=Af();const h=y(()=>t().start+s(o)*t().width);var g=F(m);bt(g,()=>gl(e().labelsFactor),!0,!1),se(()=>{R(m,"x",s(h)),R(m,"y",t().ltop),R(m,"fill",e().labelColor),R(m,"font-size",`${e().fontSize??""}em`)}),T(d,m)};H(f,d=>{e().labelsFactor!==0&&d(u)})}T(r,l)};function Ma(r,e,t){e(r,t())}function Ta(r,e,t){e(r,t())}function Pa(r,e,t){e(r,t())}function ns(r,e,t){e(r,t())}async function Ia(r,e,t,l){sf(r.target,s(e),t(),l())}function Ra(r,e,t){nf(s(e),t())}function La(r,e,t,l,o,a){rf(s(e),t(),l(),o(),a())}var yf=_e('<text fill="crimson" text-anchor="middle"> </text>'),xf=_e('<text dy="10px" fill="crimson" text-anchor="middle" dominant-baseline="hanging"> </text>'),kf=_e("<!><!><!><!><!>",1),Ef=_e('<rect></rect><text dominant-baseline="hanging" text-anchor="middle"><!></text>',1),Cf=_e('<text dominant-baseline="hanging" text-anchor="middle"><!></text>'),Af=_e('<text dx="1.2em" dy="-0.25em" dominant-baseline="hanging" text-anchor="right"><!></text>'),Nf=_e("<!><!><!>",1),Sf=_e("<line></line>"),Mf=_e('<text dominant-baseline="middle" text-anchor="middle"> </text>'),Tf=_e('<svg><!><!><text class="legend-text" xml:space="preserve" dominant-baseline="middle" text-anchor="start"><!></text></svg>'),Pf=_e('<svg><rect height="100%" width="100%"></rect><!></svg>'),If=_e('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Rf=_e('<text dominant-baseline="middle" style="font-size:1.1em;"><!></text>'),Lf=_e('<text dominant-baseline="middle" style="font-size:1.2em;"><!></text>'),qf=_e('<g class="plot-labels"><!><!><!></g>'),zf=_e('<g class="axis x-axis"><!></g>'),jf=_e('<g class="axis y-axis"><!></g>'),Ff=_e('<rect fill="transparent" id="axes-box"></rect>'),Of=_e('<rect stroke="transparent" fill="transparent" id="axes-box"></rect>'),Df=_e('<g class="colormap-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Vf=_e('<g class="group-legend" style="stroke:0;stroke-width:0px;"><!></g>'),Bf=_e('<!><!><g class="axes-box"><!></g><g class="axes-content svelte-1jtdxd0"><!></g><!><!>',1),Yf=$('<p class="message-error svelte-1jtdxd0">Axes component was not properly initialized. <br> Check that you defined axes limits and margins correctly.</p>'),Wf=$('<div class="download-links svelte-1jtdxd0"><button class="svelte-1jtdxd0">⇩ svg</button> <button class="svelte-1jtdxd0">⇩ png</button> <button class="svelte-1jtdxd0">⧉ copy</button></div>'),Uf=$(`<div><svg class="plot svelte-1jtdxd0" xmlns="http://www.w3.org/2000/svg"><style>.plot {
            font-family: Arial, Helvetica, sans-serif;
         }

         .plot-labels text {
            font-weight:bold;
            text-anchor:middle;
            user-select: none;
         }

         .series-points text {
            /* dominant-baseline: central;
            alignment-baseline: central */
         }

         .tick-labels text,
         .tick-labels tspan,
         .series-textlabels text,
         .series-textlabels tspan,
         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }


         .colormap-legend text,
         .colormap-legend tspan,
         .series-points text,
         .series-points tspan {
            cursor: default;
            user-select: none;
            -webkit-user-select: none;
         }

         .series-points1 text,
         .series-points1 tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
         }

         .series-points2 text,
         .series-points2 tspan {
            dominant-baseline: central;
            alignment-baseline: central;
         }

         .series-text text,
         .series-text tspan {
            dominant-baseline: middle;
            alignment-baseline: middle;
            text-anchor: middle;
            user-select: none;
            -webkit-user-select: none;
         }

         .tick-labels text,
         .tick-labels tspan {
            user-select: none;
            -webkit-user-select: none;
         }</style><!><svg preserveAspectRatio="none" class="axes"><defs><clipPath><rect></rect></clipPath></defs><!></svg></svg> <!></div>`);function Hf(r,e){he(e,!0);const t=(Ce,Pe=dt,Te=dt)=>{var lt=me(),wt=Z(lt);{var er=Pt=>{var He=me(),Re=Z(He);{var gt=ot=>{var Je=yf(),jt=F(Je);se(()=>{R(Je,"x",s(te)[0]-10),R(Je,"y",s(ne)),R(Je,"transform",`rotate(-90, ${s(te)[0]-10}, ${s(ne)})`),de(jt,Te().error)}),T(ot,Je)},ft=ot=>{var Je=xf(),jt=F(Je);se(()=>{R(Je,"x",s(re)),R(Je,"y",s(ae)[0]),de(jt,Te().error)}),T(ot,Je)};H(Re,ot=>{Te().pos===4?ot(gt):ot(ft,!1)})}T(Pt,He)},Tt=Pt=>{var He=kf(),Re=Z(He);{var gt=ke=>{xl(ke,{get lineCoords(){return Pe().grid},get lineColor(){return vt.MIDDLEGRAY},lineType:3})};H(Re,ke=>{Te().showGrid&&ke(gt)})}var ft=I(Re);xl(ft,{get lineCoords(){return Pe().axisLine},get lineColor(){return vt.DARKGRAY},lineType:1});var ot=I(ft);xl(ot,{get lineCoords(){return Pe().tickCoords},get lineColor(){return vt.DARKGRAY},lineType:1});var Je=I(ot);{var jt=ke=>{Sa(ke,{get las(){return Te().las},get pos(){return Te().pos},get tickCoords(){return Pe().tickCoords},get tickLabels(){return Pe().tickLabels},get tickColor(){return vt.DARKGRAY},get hideLast(){return Te().hideLast}})};H(Je,ke=>{Pe().tickCoords.length===2&&Pe().tickLabels.length===Pe().tickCoords[1][0].length&&ke(jt)})}var Or=I(Je);{var Fe=ke=>{const pt=y(()=>[Pe().tfLabel]);Sa(ke,{get pos(){return Te().pos},get tickCoords(){return Pe().tfCoords},get tickLabels(){return s(pt)},get textColor(){return vt.DARKGRAY}})};H(Or,ke=>{Pe().tickFactor!==0&&ke(Fe)})}T(Pt,He)};H(wt,Pt=>{Te().error?Pt(er):Pt(Tt,!1)})}T(Ce,lt)},l=(Ce,Pe=dt,Te=dt)=>{var lt=Pf();const wt=y(()=>Te().elw+2*Te().elp),er=y(()=>Te().elp),Tt=y(()=>Te().elh),Pt=y(()=>Te().ely);var He=F(lt),Re=I(He);Ie(Re,17,()=>Pe().items,je,(gt,ft,ot)=>{var Je=Tf();R(Je,"x",0);var jt=F(Je);{var Or=br=>{var qe=Sf();se(()=>{R(qe,"x1",s(er)),R(qe,"x2",s(wt)-s(er)),R(qe,"y1",s(Tt)[ot]/2),R(qe,"y2",s(Tt)[ot]/2),R(qe,"stroke",s(ft).line.lineColor),R(qe,"stroke-width",s(ft).line.lineWidth),R(qe,"stroke-dasharray",s(z)[s(ft).line.lineType-1])}),T(br,qe)};H(jt,br=>{s(ft).line&&br(Or)})}var Fe=I(jt);{var ke=br=>{var qe=Mf(),ms=F(qe);se(()=>{R(qe,"x",s(wt)/2),R(qe,"y",s(Tt)[ot]/2),R(qe,"fill",s(ft).point.faceColor),R(qe,"stroke-width",s(ft).point.lineWidth),R(qe,"stroke",s(ft).point.lineColor),R(qe,"font-size",s(P)),de(ms,yn[s(ft).point.marker-1])}),T(br,qe)};H(Fe,br=>{s(ft).point&&br(ke)})}var pt=I(Fe),jl=F(pt);bt(jl,()=>s(ft).label,!0,!1),se(()=>{R(Je,"y",s(Pt)[ot]),R(Je,"width",Te().lgw),R(Je,"height",s(Tt)[ot]),R(pt,"x",s(wt)+s(er)),R(pt,"y",s(Tt)[ot]/2),R(pt,"fill",vt.LEGEND),R(pt,"font-size",`${Pe().fontSize??""}em`)}),T(gt,Je)}),se(()=>{R(lt,"x",Te().lgl),R(lt,"y",Te().lgt),R(lt,"height",Te().lgh),R(lt,"width",Te().lgw),R(He,"fill",Pe().faceColor),R(He,"stroke",Pe().lineColor),R(He,"stroke-width",Pe().lineWidth)}),T(Ce,lt)};let o=K(e,"limX",19,()=>[0,1]),a=K(e,"limY",19,()=>[0,1]),c=K(e,"margins",19,()=>[1,1.1,.55,.6]),v=K(e,"downloadLinks",3,"none"),f=K(e,"fileName",3,"plot"),u=K(e,"pngWidth",3,8),d=K(e,"pngHeight",3,8),m=K(e,"pngRes",3,300),h=K(e,"clipboardWidth",3,1200),g=K(e,"clipboardHeight",3,800),p=K(e,"onclick",3,null),_=K(e,"onmousemove",3,null),b=K(e,"onmousedown",3,null),A=K(e,"onmouseup",3,null);function E(Ce,Pe){if(Pe&&Ce.target.id=="axes-box"){const Te=ka([Ce.offsetX-s(V)],s(X))[0],lt=ka([Ce.offsetY-s(Y)],s(Q))[0];Pe(Te,lt)}}const N="plottingArea"+Math.round(Math.random()*1e4);let C=le(0),k=le(0),q=le(0);const M=y(()=>({plot:Ju(s(k),s(q)),x:Na(s(k)),y:Na(s(q))})),w=y(()=>c().map(Ce=>Ce*Wu[s(M).plot])),P=y(()=>Gu[s(M).plot]),U=y(()=>vl[s(M).plot]),z=y(()=>wn[s(M).plot]),W=y(()=>s(ie).show&&s(ie).label!==""?s(P)*1.5:0),V=y(()=>s(oe).show&&s(oe).label!==""?s(P)*1.5:0),Y=y(()=>e.title&&e.title!==""?s(P)*1.5:0),D=y(()=>s(k)>s(V)?s(k)-s(V):0),S=y(()=>s(q)>s(W)+s(Y)?s(q)-s(W)-s(Y):0),O=y(()=>s(S)-s(w)[0]-s(w)[2]),L=y(()=>s(D)-s(w)[1]-s(w)[3]),j=y(()=>wa(o(),2)&&wa(a(),2)&&s(D)>s(w)[1]+s(w)[3]&&s(S)>s(w)[0]+s(w)[2]),X=y(()=>s(j)?{coords:[s(L)/(o()[1]-o()[0]),o()[0],s(w)[1]],objects:[s(L)/(o()[1]-o()[0]),0,0]}:{coords:[1,0,0],objects:[1,0,0]}),Q=y(()=>s(j)?{coords:[-s(O)/(a()[1]-a()[0]),a()[1],s(w)[2]],objects:[s(O)/(a()[1]-a()[0]),0,0]}:{coords:[0,1,0],objects:[0,1,0]}),ne=y(()=>s(O)*.5+s(Y)+s(w)[2]),re=y(()=>s(L)*.5+s(V)+s(w)[1]),te=y(()=>s(j)?st(o(),s(X)):[0,1]),ae=y(()=>s(j)?st(a(),s(Q)):[1,0]),ye=y(()=>xn(e.title)),ue=y(()=>s(ye)?s(ye).length===e.title.left?1:1.4:0);let we=le(ee({show:!1})),ie=le(ee({show:!1,error:""})),oe=le(ee({show:!1,error:""})),ve=le(ee({show:!1,colmap:null,breaks:null})),fe=le(ee({show:!1,items:null,position:null}));const Ae=y(()=>s(j)&&s(ve)&&s(ve).show?cf(s(ve)):null),Ue=y(()=>s(j)&&s(ie).show?of(o(),a(),s(M),s(Q),s(ie)):null),De=y(()=>s(j)&&s(oe).show?af(o(),a(),s(M),s(X),s(oe)):null),Le=y(()=>s(j)&&s(Ae)?uf(s(Ae),s(L),s(w),s(M)):null),mt=y(()=>s(j)&&s(fe)&&s(fe).show&&s(te)?vf(s(fe),s(te),s(ae),s(P),s(U)):null);Ti("axes",{setBox:Ce=>G(we,ee(Ce)),setXAxis:Ce=>G(ie,ee(Ce)),setYAxis:Ce=>G(oe,ee(Ce)),setColmapLegend:Ce=>G(ve,ee(Ce)),setGroupLegend:Ce=>G(fe,ee(Ce)),scales:()=>s(M),tX:()=>s(X),tY:()=>s(Q),limX:()=>o(),limY:()=>a()});var pr=Uf(),ut=F(pr),_t=I(F(ut));{var rt=Ce=>{var Pe=qf(),Te=F(Pe);{var lt=He=>{var Re=If();R(Re,"dx",0),R(Re,"dy",0);var gt=F(Re);bt(gt,()=>s(ie).label,!0,!1),se(()=>{R(Re,"x",s(re)),R(Re,"y",s(S)+s(Y))}),T(He,Re)};H(Te,He=>{s(ie).show&&s(ie).label&&s(ie).label!==""&&He(lt)})}var wt=I(Te);{var er=He=>{var Re=Rf();R(Re,"dx",0),R(Re,"dy",0);var gt=F(Re);bt(gt,()=>s(oe).label,!0,!1),se(()=>{R(Re,"x",s(P)/1.1*s(oe).labelHeight),R(Re,"y",s(ne)),R(Re,"transform",`rotate(-90, ${s(P)*s(oe).labelHeight/1.1}, ${s(ne)})`)}),T(He,Re)};H(wt,He=>{s(oe).show&&s(oe).label&&s(oe).label!==""&&He(er)})}var Tt=I(wt);{var Pt=He=>{var Re=Lf();R(Re,"dx",0),R(Re,"dy",0);var gt=F(Re);bt(gt,()=>s(ye),!0,!1),se(()=>{R(Re,"x",s(re)),R(Re,"y",s(P)*s(ue))}),T(He,Re)};H(Tt,He=>{s(ye)&&s(ye)!==""&&He(Pt)})}T(Ce,Pe)};H(_t,Ce=>{s(j)&&Ce(rt)})}var $t=I(_t),En=F($t),us=F(En);R(us,"id",N);var cr=F(us),fs=I(En);{var ds=Ce=>{var Pe=Bf(),Te=Z(Pe);{var lt=Fe=>{var ke=zf(),pt=F(ke);t(pt,()=>s(Ue),()=>s(ie)),T(Fe,ke)};H(Te,Fe=>{s(ie).show&&s(Ue)&&Fe(lt)})}var wt=I(Te);{var er=Fe=>{var ke=jf(),pt=F(ke);t(pt,()=>s(De),()=>s(oe)),T(Fe,ke)};H(wt,Fe=>{s(oe).show&&s(De)&&Fe(er)})}var Tt=I(wt),Pt=F(Tt);{var He=Fe=>{var ke=Ff();ke.__keydown=[ns,E,p],ke.__click=[ns,E,p],ke.__mousemove=[Pa,E,_],ke.__mousedown=[Ma,E,b],ke.__mouseup=[Ta,E,A],se(()=>{R(ke,"stroke",s(we).lineColor),R(ke,"stroke-width",`${s(we).lineWidth??""}px`),R(ke,"x",s(te)[0]),R(ke,"y",s(ae)[1]),R(ke,"width",s(te)[1]-s(te)[0]),R(ke,"height",s(ae)[0]-s(ae)[1])}),T(Fe,ke)},Re=Fe=>{var ke=Of();ke.__keydown=[ns,E,p],ke.__click=[ns,E,p],ke.__mousemove=[Pa,E,_],ke.__mousedown=[Ma,E,b],ke.__mouseup=[Ta,E,A],se(()=>{R(ke,"x",s(te)[0]),R(ke,"y",s(ae)[1]),R(ke,"width",s(te)[1]-s(te)[0]),R(ke,"height",s(ae)[0]-s(ae)[1])}),T(Fe,ke)};H(Pt,Fe=>{s(we).show?Fe(He):Fe(Re,!1)})}var gt=I(Tt);R(gt,"clip-path",`url(#${N??""})`);var ft=F(gt);Rr(ft,()=>e.children??dt);var ot=I(gt);{var Je=Fe=>{var ke=Df(),pt=F(ke);wf(pt,()=>s(Ae),()=>s(Le)),T(Fe,ke)};H(ot,Fe=>{s(Le)&&Fe(Je)})}var jt=I(ot);{var Or=Fe=>{var ke=Vf(),pt=F(ke);l(pt,()=>s(fe),()=>s(mt)),T(Fe,ke)};H(jt,Fe=>{s(mt)&&Fe(Or)})}T(Ce,Pe)};H(fs,Ce=>{s(j)&&Ce(ds)})}$r(ut,Ce=>G(C,Ce),()=>s(C));var vs=I(ut,2);{var ql=Ce=>{var Pe=Yf();T(Ce,Pe)},zl=Ce=>{var Pe=Wf(),Te=F(Pe);Te.__click=[Ra,C,f],Te.__keydown=[Ra,C,f];var lt=I(Te,2);lt.__click=[La,C,f,u,d,m],lt.__keydown=[La,C,f,u,d,m];var wt=I(lt,2);wt.__click=[Ia,C,h,g],wt.__keydown=[Ia,C,h,g],T(Ce,Pe)};H(vs,Ce=>{s(j)?Ce(zl,!1):Ce(ql)})}se(()=>{Zr(pr,`plot-container show-download-links-${v()??""} svelte-1jtdxd0`),St(pr,"plot-error",!s(j)),R(ut,"style",`font-size:${s(P)??""}px`),R($t,"x",s(V)),R($t,"y",s(Y)),R($t,"width",s(D)),R($t,"height",s(S)),R(cr,"x",s(te)[0]),R(cr,"y",s(ae)[1]),R(cr,"width",s(te)[1]-s(te)[0]),R(cr,"height",s(ae)[0]-s(ae)[1])}),Po(ut,"clientWidth",Ce=>G(k,Ce)),Po(ut,"clientHeight",Ce=>G(q,Ce)),T(r,pr),ge()}$e(["keydown","click","mousemove","mousedown","mouseup"]);function Gf(r,e){he(e,!0);let t=K(e,"tickLabels",7),l=K(e,"las",3,1),o=K(e,"whole",3,!1),a=K(e,"show",3,!0),c=K(e,"showGrid",3,!1);const v=At("axes");pe(()=>{const f=xn(e.label),u=f?f.length===e.label.length?1:1.4:0;let d,m="";e.ticks&&([d,m]=Aa(e.ticks,v.limX())),!m&&t()&&(h=>(t(h[0]),m=h[1]))(Ca(t(),d)),v.setXAxis({show:a(),error:m,label:f,ticks:d,labelHeight:u,showGrid:c(),las:l(),whole:o(),tickLabels:t()})}),ge()}function Kf(r,e){he(e,!0);let t=K(e,"tickLabels",7),l=K(e,"las",3,1),o=K(e,"whole",3,!1),a=K(e,"show",3,!0),c=K(e,"showGrid",3,!1);const v=At("axes");pe(()=>{const f=xn(e.label),u=f?f.length===e.label.length?1:1.4:0;let d,m="";e.ticks&&([d,m]=Aa(e.ticks,v.limY())),!m&&t()&&(h=>(t(h[0]),m=h[1]))(Ca(t(),d)),v.setYAxis({show:a(),error:m,label:f,ticks:d,labelHeight:u,showGrid:c(),las:l(),whole:o(),tickLabels:t(),pos:4})}),ge()}function Xf(r,e){he(e,!0);let t=K(e,"lineWidth",3,1),l=K(e,"lineColor",3,"#606060");const o=At("axes");pe(()=>{o.setBox({show:!0,lineWidth:t(),lineColor:l()})}),ge()}var Qf=(r,e)=>jr(r,"rect",e.onclick),Jf=_e("<rect></rect>"),Zf=_e("<g></g>");function kl(r,e){he(e,!0);let t=K(e,"faceColor",19,()=>vt.PRIMARY),l=K(e,"lineColor",19,t),o=K(e,"lineWidth",3,1),a=K(e,"className",3,"series-rect");const c=y(()=>Et(e.left,"Rectangles (left)")),v=y(()=>s(c)?Et(e.top,"Rectangles (top)",s(c).length):null),f=y(()=>s(v)?typeof e.width!="object"?xe.fill(e.width,s(c).length):e.width:null),u=y(()=>s(v)?typeof e.height!="object"?xe.fill(e.height,s(c).length):e.height:null),d=At("axes"),m=y(()=>s(c)?st(s(c),d.tX()):null),h=y(()=>s(v)?st(s(v),d.tY()):null),g=y(()=>s(f)?hl(s(f),d.tX()):null),p=y(()=>s(u)?hl(s(u),d.tY()):null),_=y(()=>`fill:${t()};stroke:${l()};stroke-width:${o()}px;`),b=y(()=>s(m)&&s(h)&&s(g)&&s(p)&&s(g).length===s(m).length&&s(p).length===s(m).length);var A=me(),E=Z(A);{var N=C=>{var k=Zf();k.__click=[Qf,e],Ie(k,21,()=>e.left,je,(q,M,w)=>{var P=Jf();se(()=>{R(P,"x",s(m)[w]),R(P,"y",s(h)[w]),R(P,"width",s(g)[w]),R(P,"height",s(p)[w])}),T(q,P)}),se(()=>{Ds(k,`series ${a()??""}`),R(k,"style",s(_))}),T(C,k)};H(E,C=>{s(b)&&C(N)})}T(r,A),ge()}$e(["click"]);var $f=(r,e)=>jr(r,"line",e.onclick),ed=_e("<line></line>"),td=_e('<g class="series series-segment"></g>');function Jt(r,e){he(e,!0);let t=K(e,"lineColor",19,()=>vt.PRIMARY),l=K(e,"lineType",3,1),o=K(e,"lineWidth",3,1);const a=y(()=>Et(e.xStart,"Segments")),c=y(()=>s(a)?Et(e.yStart,"Segments",s(a).length):null),v=y(()=>s(c)?Et(e.xEnd,"Segments",s(a).length):null),f=y(()=>s(v)?Et(e.yEnd,"Segments",s(a).length):null),u=At("axes"),d=y(()=>s(a)?st(s(a),u.tX()):null),m=y(()=>s(v)?st(s(v),u.tX()):null),h=y(()=>s(c)?st(s(c),u.tY()):null),g=y(()=>s(f)?st(s(f),u.tY()):null),p=y(()=>`stroke:${t()};stroke-width: ${o()}px;stroke-dasharray:${wn[u.scales().plot][l()-1]}`),_=y(()=>s(d)&&s(m)&&s(h)&&s(g));var b=me(),A=Z(b);{var E=N=>{var C=td();C.__click=[$f,e],Ie(C,21,()=>s(d),je,(k,q,M)=>{var w=ed();se(()=>{R(w,"x1",s(d)[M]),R(w,"x2",s(m)[M]),R(w,"y1",s(h)[M]),R(w,"y2",s(g)[M])}),T(k,w)}),se(()=>R(C,"style",s(p))),T(N,C)};H(A,N=>{s(_)&&N(E)})}T(r,b),ge()}$e(["click"]);var rd=(r,e)=>jr(r,"text",e.onclick),nd=_e("<text><!></text>"),sd=_e("<text><!></text>"),ld=_e("<text><!></text>"),od=_e('<g class="series series-textlabels"><!></g>');function ad(r,e){he(e,!0);let t=K(e,"pos",3,0),l=K(e,"faceColor",19,()=>vt.PRIMARY_TEXT),o=K(e,"lineColor",3,"transparent"),a=K(e,"lineWidth",3,0),c=K(e,"textSize",3,1),v=K(e,"rotateAngle",3,0);const f=["middle","middle","start","middle","end"],u=y(()=>Et(e.xValues,"TextLabels")),d=y(()=>s(u)?Et(e.yValues,"TextLabels",s(u).length):null),m=y(()=>s(d)?Array.isArray(e.labels)&&e.labels.length!==s(d).length?(console.error('TextLabels: number of elements in "labels" does not match number of coordinates'),null):e.labels:null),h=y(()=>s(m)?typeof e.labels=="string"&&typeof t()!="number"?(console.error('TextLabels: parameter "labels" is provided as single string, so "pos" must be a single number.'),null):t():null),g=At("axes"),p=y(()=>s(u)&&s(h)!==null?st(s(u),g.tX()):null),_=y(()=>s(d)&&s(p)?st(s(d),g.tY()):null),b=y(()=>ml[g.scales().plot]),A=y(()=>[0,0,-s(b),0,s(b),s(b)]),E=y(()=>[0,s(b),0,-s(b),0,s(b)]),N=y(()=>`fill:${l()};stroke-width:${a()}px;stroke:${o()};font-size:${c()}em;`),C=y(()=>s(p)&&s(_)&&s(h)!==null&&s(m)&&s(p).length===s(_).length);var k=me(),q=Z(k);{var M=w=>{var P=od();P.__click=[rd,e];var U=F(P);{var z=V=>{var Y=me(),D=Z(Y);Ie(D,17,()=>s(p),je,(S,O,L)=>{var j=nd();R(j,"data-id",L);var X=F(j);bt(X,()=>e.labels,!0,!1),se(()=>{R(j,"x",s(p)[L]),R(j,"y",s(_)[L]),R(j,"dx",s(A)[t()]),R(j,"dy",s(E)[t()]),R(j,"transform",v()!==void 0?`rotate(${v()}, ${s(p)[L]+s(A)[t()]}, ${s(_)[L]+s(E)[t()]})`:""),R(j,"text-anchor",f[t()[L]])}),T(S,j)}),T(V,Y)},W=V=>{var Y=me(),D=Z(Y);{var S=L=>{var j=me(),X=Z(j);Ie(X,17,()=>s(p),je,(Q,ne,re)=>{var te=sd();R(te,"data-id",re);var ae=F(te);bt(ae,()=>e.labels[re],!0,!1),se(()=>{R(te,"x",s(p)[re]),R(te,"y",s(_)[re]),R(te,"dx",s(A)[t()[re]]),R(te,"dy",s(E)[t()[re]]),R(te,"transform",v()!==void 0?`rotate(${v()}, ${s(p)[re]+s(A)[t()]}, ${s(_)[re]+s(E)[t()]})`:""),R(te,"text-anchor",f[t()[re]])}),T(Q,te)}),T(L,j)},O=L=>{var j=me(),X=Z(j);Ie(X,17,()=>s(p),je,(Q,ne,re)=>{var te=ld();R(te,"data-id",re);var ae=F(te);bt(ae,()=>e.labels[re],!0,!1),se(()=>{R(te,"x",s(p)[re]),R(te,"y",s(_)[re]),R(te,"dx",s(A)[t()]),R(te,"dy",s(E)[t()]),R(te,"transform",v()!==void 0?`rotate(${v()}, ${s(p)[re]+s(A)[t()]}, ${s(_)[re]+s(E)[t()]})`:""),R(te,"text-anchor",f[t()])}),T(Q,te)}),T(L,j)};H(D,L=>{Array.isArray(t())||ArrayBuffer.isView(t())?L(S):L(O,!1)},!0)}T(V,Y)};H(U,V=>{typeof e.labels=="string"?V(z):V(W,!1)})}se(()=>R(P,"style",s(N))),T(w,P)};H(q,w=>{s(C)&&w(M)})}T(r,k),ge()}$e(["click"]),$e(["click"]);var id=(r,e)=>jr(r,"text",e.onclick),cd=_e("<text> </text>"),ud=_e('<g text-anchor="middle"></g>');function qa(r,e){he(e,!0);let t=K(e,"marker",3,1),l=K(e,"faceColor",3,"transparent"),o=K(e,"lineColor",19,()=>vt.PRIMARY),a=K(e,"lineWidth",3,1),c=K(e,"markerSize",3,1);const v=y(()=>typeof t()!="number"||t()<1||t()>yn.length?(console.error('Points: parameter "marker" must be a number from 1 to '+yn.length+"."),null):yn[t()-1]),f=y(()=>Et(e.xValues,"Points")),u=y(()=>s(f)?Et(e.yValues,"Points",s(f).length):null),d=At("axes"),m=y(()=>s(f)?st(s(f),d.tX()):null),h=y(()=>s(m)&&s(u)?st(s(u),d.tY()):null),g=y(()=>["＋","✳","✕"].includes(s(v))?`fill:${o()&&o()!=="transparent"?o():l()};stroke-width:0px;font-size:${c()}em;`:`fill:${l()};stroke-width:${a()}px;stroke:${o()}; font-size:${c()}em;`),p=y(()=>["◼","⬥","＋","✳","✕"].includes(s(v))?"series-points2":"series-points1"),_=y(()=>s(m)&&s(h)&&s(m).length===s(h).length);var b=me(),A=Z(b);{var E=N=>{var C=ud();C.__click=[id,e],Ie(C,21,()=>s(m),je,(k,q,M)=>{var w=cd(),P=F(w);se(()=>{R(w,"x",s(m)[M]),R(w,"y",s(h)[M]),de(P,s(v))}),T(k,w)}),se(()=>{Ds(C,`series series-points ${s(p)??""}`),R(C,"style",s(g))}),T(N,C)};H(A,N=>{s(_)&&N(E)})}T(r,b),ge()}$e(["click"]);var fd=(r,e)=>jr(r,"polyline",e.onclick),dd=_e('<g class="series series-line"><polyline class="line"></polyline></g>');function Ut(r,e){he(e,!0);let t=K(e,"lineColor",19,()=>vt.PRIMARY),l=K(e,"lineType",3,1),o=K(e,"lineWidth",3,1);const a=y(()=>Et(e.xValues,"Lines")),c=y(()=>s(a)?Et(e.yValues,"Lines",s(a).length):null),v=At("axes"),f=y(()=>s(a)&&s(c)?bl(s(a),s(c),v.tX(),v.tY()):null),u=y(()=>`fill:transparent;stroke:${t()};stroke-width: ${o()}px; stroke-dasharray:${wn[v.scales().plot][l()-1]}`);var d=me(),m=Z(d);{var h=g=>{var p=dd();p.__click=[fd,e];var _=F(p);se(()=>{R(p,"style",s(u)),R(_,"points",s(f))}),T(g,p)};H(m,g=>{s(f)&&g(h)})}T(r,d),ge()}$e(["click"]);var vd=(r,e)=>jr(r,"polyline",e.onclick),md=_e('<polyline class="line"></polyline>'),hd=_e('<g class="series series-multiline"></g>');function gd(r,e){he(e,!0);let t=K(e,"lineColor",19,()=>vt.PRIMARY),l=K(e,"lineType",3,1),o=K(e,"lineWidth",3,1);const a=y(()=>Et(e.xValues,"Multilines")),c=y(()=>s(a)?gr(e.yValues)?(s(a).length!==e.yValues.nrows&&console.error('Multilines: parameter "xValues" must have the same number of values as number of rows in "yValues".'),e.yValues):(console.error('Multilines: parameter "yValues" must be a matrix.'),null):null),v=At("axes"),f=y(()=>{if(!s(a)||!s(c))return null;const g=new Array(s(c).ncols);for(let p=0;p<g.length;p++)g[p]=bl(s(a),s(c).getcolumn(p+1),v.tX(),v.tY());return g}),u=y(()=>`fill:transparent;stroke:${t()};stroke-width: ${o()}px; stroke-dasharray:${wn[v.scales().plot][l()-1]}`);var d=me(),m=Z(d);{var h=g=>{var p=hd();p.__click=[vd,e],Ie(p,21,()=>s(f),je,(_,b)=>{var A=md();se(()=>R(A,"points",s(b))),T(_,A)}),se(()=>R(p,"style",s(u))),T(g,p)};H(m,g=>{s(f)&&s(f).length>0&&g(h)})}T(r,d),ge()}$e(["click"]);function sn(r,e){he(e,!0);let t=K(e,"show",3,!0),l=K(e,"position",3,"topleft"),o=K(e,"lineColor",19,()=>vt.LEGEND),a=K(e,"lineWidth",3,1),c=K(e,"faceColor",3,"#fff"),v=K(e,"fontSize",3,.85);function f(m){return typeof m!="string"?(console.error('Legend: value of "position" must be a string.'),null):["top","left","right","topleft","topright","bottom","bottomleft","bottomright"].includes(m)?m:(console.error('Legend: wrong value of "position" property'),null)}function u(m){if(!m||!Array.isArray(m)||m.length<1)return console.error('Legend: property "items" must be provided as array of JSONs.'),null;for(let h=0;h<m.length;h++){const g=m[h];if(!g.label)return console.error('Legend: all elements of "items" must include at least one field: "label".'),null;const p=xn(g.label),_=p.length===g.label?1:1.4;g.label=p,g.labelHeight=_,g.line&&(g.line.lineType||(g.line.lineType=1),g.line.lineType>0&&g.line.lineType<=4||console.error('Legend: parameter "lineType" for legend item '+(h+1)+" is incorrect."),g.line.lineColor=g.line.lineColor?g.line.lineColor:vt.PRIMARY,g.line.lineWidth=g.line.lineWidth?g.line.lineWidth:1),g.point&&(g.point.marker||(g.point.marker=1),g.point.marker>0&&g.point.marker<=yn.length||console.error('Legend: parameter "marker" for legend item '+(h+1)+" is incorrect."),g.point.faceColor=g.point.faceColor?g.point.faceColor:"transparent",g.point.lineWidth=g.point.lineWidth?g.point.lineWidth:1,g.point.lineColor=g.point.lineColor?g.point.lineColor:vt.PRIMARY)}return m}const d=At("axes");pe(()=>{const m=u(e.items),h=f(l());d.setGroupLegend(m&&h?{show:t(),position:l(),items:e.items,lineColor:o(),faceColor:c(),lineWidth:a(),fontSize:v()}:{show:!1,position:null,items:null})}),ge()}function za(r,e){he(e,!0);let t=K(e,"show",3,!0),l=K(e,"labels",3,null),o=K(e,"labelColor",19,()=>vt.CLEGEND_LABELS),a=K(e,"fontSize",3,.85);const c=At("axes");pe(()=>{c.setColmapLegend({show:t(),breaks:e.breaks,colmap:e.colmap,labels:l(),labelColor:o(),fontSize:a()})}),ge()}function pd(r,e,t,l){e===void 0&&(e=!0),t===void 0&&(t=!1),l===void 0&&(l=!1);function o(f,u,d,m){if(typeof u=="boolean")return u?f.apply(d,2):Ge([m]).rep(f.ncols);if(!Me(u))throw Error("scale: parameters 'center' and 'scale' must be boolean or vectors with numeric values.");if(u.length!==f.ncols)throw Error("scale: number of values for centring and scaling must be the same as number of columns in the matrix.");return u}const a=o(r,e,hn,0),c=o(r,t,Hs,1),v=Wt.zeros(r.nrows,r.ncols);for(let f=1;f<=r.ncols;f++){const u=r.getcolref(f),d=v.getcolref(f),m=a.v[f-1],h=1/c.v[f-1];for(let g=0;g<r.nrows;g++)d[g]=(u[g]-m)*h}return l?[v,a,c]:v}function El(r,e,t){if(!r||!r.class||!r.class.includes("pcamodel"))throw new Error('pcamodel_get: parameter "m" must be JSON with PCA model.');const l=r.ncols,o=r.ncomp;let a,c;switch(e){case"mX":a=2,c=l;break;case"sX":a=2+l,c=l;break;case"loadings":case"xloadings":a=2+2*l+(t-1)*l,c=l;break;case"P":a=2+2*l,c=t*l;break;case"eigenvals":case"xeigenvals":a=2+2*l+l*o,c=o;break;case"cq0":a=2+2*l+l*o+o,c=o;break;case"cNq":a=2+2*l+l*o+2*o,c=o;break;case"rq0":a=2+2*l+l*o+3*o,c=o;break;case"rNq":a=2+2*l+l*o+4*o,c=o;break;case"ch0":a=2+2*l+l*o+5*o,c=o;break;case"cNh":a=2+2*l+l*o+6*o,c=o;break;case"rh0":a=2+2*l+l*o+7*o,c=o;break;case"rNh":a=2+2*l+l*o+8*o,c=o;break;case"cr0":a=2+2*l+l*o+9*o,c=o;break;case"cNr":a=2+2*l+l*o+10*o,c=o;break;case"rr0":a=2+2*l+l*o+11*o,c=o;break;case"rNr":a=2+2*l+l*o+12*o,c=o;break;case"cg0":a=2+2*l+l*o+13*o,c=o;break;case"cNg":a=2+2*l+l*o+14*o,c=o;break;case"rg0":a=2+2*l+l*o+15*o,c=o;break;case"rNg":a=2+2*l+l*o+16*o,c=o;break;default:throw Error("pcamodel_get: wrong outcome name.")}return r.v.subarray(a,a+c)}const bd=r=>r;function _d(r,{delay:e=0,duration:t=400,easing:l=bd}={}){const o=+getComputedStyle(r).opacity;return{delay:e,duration:t,easing:l,css:a=>`opacity: ${a*o}`}}var wd=$('<div class="drop svelte-1vipsv"><div class="modal svelte-1vipsv"><div class="header svelte-1vipsv"><button class="close-button svelte-1vipsv">✕</button></div> <div class="body svelte-1vipsv"><!></div></div></div>');function ja(r,e){he(e,!0);function t(u){u.key==="Escape"&&e.closeModal()}var l=wd();Er("keydown",qn,t);var o=F(l),a=F(o),c=F(a);c.__click=function(...u){var d;(d=e.closeModal)==null||d.apply(this,u)};var v=I(a,2),f=F(v);Rr(f,()=>e.children),bc(7,l,()=>_d),T(r,l),ge()}$e(["click"]);const yd=[1,1.1,.45,.4],Sr={regular:"#2679B2",extreme:"#F2B825",outlier:"#D22C2F",aliens:"#2679B2",external:"#D22C2F"},zt={cal:"#2679B2",pv:"#D22C2F",target:"#2679B2",alt:"#2679B2",new:"#2679B2"},Fr={cal:"#f0f8ff",pv:"#fff8f0",target:"#f0f8ff",alt:"#f0f8ff",new:"#f0f8ff"},Fa="#a0a0a0",Oa="#909090",ss="#909090",ls=8,xd=8,kd=8,Ed=600;function Da(r,e){return!r||!e||e<0||e>r.ncomp?"":`PC${e} (${(r.stat.expvar[e-1]*100).toFixed(1)}%)`}function Cd(r,e){if(r.length===e.length)return r;const t=e.length,l=new r.constructor(t);for(let o in e)l[o]=r[e[o]];return l}function Ad(r,e){let t=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;for(let c=0;c<r.length;c++)l=Math.min(l,r[c]),t=Math.max(t,r[c]);let o=_l(void 0,[l,t],e-1,!0,!1,0).v;const a=o[1]-o[0];if(o[0]>l){const c=o[0]-a;o=[c<l?c:l,...o]}if(o[o.length-1]<t){const c=o[o.length-1]+a;o=[...o,c>t?c:t]}return o}function Nd(r){const e=r.length;if(e<1||e>16)throw Error("getClassColors: can not create color map for more than 16 categories.");const t=yl(e);return r.reduce((o,a,c)=>(o[a]=t[c],o),{})}function Sd(r,e,t){const l=e.length,o=new Array(r.length),a=e[1]-e[0];for(let c=0;c<r.length;c++)for(let v=0;v<l-1;v++){const f=r[c]>=e[v],u=v===l-2?r[c]<e[v+1]+a:r[c]<e[v+1];if(f&&u){o[c]=t[v];break}}return o}function Va(r,e,t,l,o="cal",a){if(!e)return null;let c,v,f,u,d;if(a){const m=a.values;c=a.labels;const h=a.classColmap;v=Object.keys(h).map(g=>h[g]),u=m.map(g=>h[g]),f=new Array(c.length+1).map((g,p)=>p-.5),d=null}else if(t==="groups"&&e.classNames){const m=Nd(e.classNames);v=Object.keys(m).map(h=>m[h]),c=e.classNames,u=e.classes.map(h=>m[h]),f=new Array(c.length+1).map((h,g)=>g-.5),d=null}else if(t==="variable"){const m=Cd(r.values.getcolref(l),e.objindices);d=r.varlabels[l-1],d.length>30&&(d=d.substring(0,29)+"..."),f=Ad(m,10),v=yl(f.length-1),u=Sd(m,f,v)}else c=null,f=null,v=null,u=Array(e.nrows).fill(zt[o]);return{labels:c,map:v,breaks:f,colors:u,varname:d}}function Md(r,e,t=.95){const o=2*Math.PI/99,[a,c,v]=r,f=Math.sqrt((a+v)**2-4*(a*v-c*c));let u=.5*(a+v-f),d=.5*(a+v+f);if(u<d){let M=u;u=d,d=M}const m=Bt(t,2),h=Math.sqrt(m*u),g=Math.sqrt(m*d);let p;if(Math.abs(c)<1e-7)p=0;else{let M=-c/(a-u),w=1;const P=Math.sqrt(M*M+w*w);M=M/P,w=w/P,p=Math.atan2(w,M),p<0&&(p=p+2*Math.PI)}const _=Math.cos(p),b=Math.sin(p),A=xe.zeros(100),E=xe.zeros(100);let N=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY;for(let M=0;M<100;M++){const w=M*o,P=h*Math.cos(w),U=g*Math.sin(w),z=P*_-U*b+e[0],W=P*b+U*_+e[1];A.v[M]=z,E.v[M]=W,N=Math.min(N,z),C=Math.max(C,z),k=Math.min(k,W),q=Math.max(q,W)}return[A,E,N,C,k,q]}function Td(r,e,t,l,o,a){if(!r||!e||!t||!l||!o)return null;const c=r.length,v=l.length,f=new Array(v).fill(0),u=new Array(v*2).fill(0);for(let b=0;b<c;b++){const A=l.indexOf(t[b]);f[A]+=1,u[A*2]+=r.v[b],u[A*2+1]+=e.v[b]}for(let b=0;b<v;b++)u[b*2]=u[b*2]/f[b],u[b*2+1]=u[b*2+1]/f[b];const d=new Array(v*3).fill(0);for(let b=0;b<c;b++){const A=l.indexOf(t[b]),E=r.v[b]-u[A*2],N=e.v[b]-u[A*2+1];d[A*3]+=E*E,d[A*3+1]+=E*N,d[A*3+2]+=N*N}let m=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY;const _=Array(v);for(let b=0;b<v;b++){const[A,E,N,C,k,q]=Md([d[b*3]/(f[b]-1),d[b*3+1]/(f[b]-1),d[b*3+2]/(f[b]-1)],[u[b*2],u[b*2+1]],a);_[b]={x:A,y:E,c:o[b]},m=Math.min(m,N),h=Math.max(h,C),g=Math.min(g,k),p=Math.max(p,q)}return{ellipses:_,xRange:[m,h],yRange:[g,p]}}var Pd=$("<!> <!> <!> <!>",1);function ir(r,e){let t=K(e,"whole",3,!1),l=kc(e,["$$slots","$$events","$$legacy","title","limX","limY","xLabel","yLabel","whole","fileName","children"]);Hf(r,Lr({get title(){return e.title},get limX(){return e.limX},get limY(){return e.limY},get fileName(){return e.fileName},downloadLinks:"hover",margins:yd,pngWidth:xd,pngHeight:kd,pngRes:Ed},()=>l,{children:(o,a)=>{var c=Pd(),v=Z(c);Rr(v,()=>e.children);var f=I(v,2);Gf(f,{showGrid:!0,get label(){return e.xLabel},get whole(){return t()}});var u=I(f,2);Kf(u,{showGrid:!0,get label(){return e.yLabel}});var d=I(u,2);Xf(d,{}),T(o,c)},$$slots:{default:!0}}))}function Id(r,e){if(r.target.tagName!=="rect"){G(e,-1);return}const t=Array.from(r.target.parentNode.children).indexOf(r.target);if(t<0){G(e,-1);return}s(e)!==t&&G(e,ee(t))}var Rd=$("<!> <!> <!>",1),Ld=$("<!> <!> <!> <!> <!>",1),qd=$('<div class="wrapper svelte-ha02r1"><div class="plot-container svelte-ha02r1" role="tooltip"><!></div> <div class="msg-select svelte-ha02r1">click inside the plot to see a variable label</div> <div class="plot-controls svelte-ha02r1"><!></div></div>');function Cl(r,e){he(e,!0);let t=K(e,"outliers",19,()=>[]),l=le("residual"),o=le(-1),a=y(()=>s(f)&&s(o)>=0?s(f).values.v[s(o)]:null),c=y(()=>s(E)&&s(o)>=0?s(E).sel.v[s(o)]:null),v=y(()=>e.model&&s(o)>=0?e.model.varlabels[s(o)]:null),f=y(()=>{if(!e.model)return null;const w=Ge(e.model.varvalues),P=w.length,U=(w.v[1]-w.v[0])/2,z=(w.v[P-2]-w.v[P-1])/2,W=[w.v[0],w.v[P-1]],V=[W[0]-U,W[1]+z],Y=(W[1]-W[0])/P;return{values:w,lim:V,width:Y,hwidth:Y*.5}}),u=y(()=>s(f)?s(f).values.apply(w=>w-s(f).hwidth):null),d=y(()=>{if(!e.dataset||!e.model)return null;const w=e.dataset.values,P=new xe(El(e.model,"mX")),U=new xe(El(e.model,"sX"));return pd(w,P,U).t()}),m=y(()=>e.model&&e.ncomp>0&&e.ncomp<=e.model.ncomp?new Wt(El(e.model,"P",e.ncomp),e.model.ncols,e.ncomp):null),h=y(()=>s(m)?Hc(s(m),s(m)):null),g=y(()=>s(d)&&s(h)?s(h).dot(s(d)):null),p=y(()=>s(g)?s(d).subtract(s(g)):null),_=y(()=>s(g)?s(g).getcolumn(e.selected+1):null),b=y(()=>s(p)?s(p).getcolumn(e.selected+1):null),A=y(()=>s(d)?s(d).getcolumn(e.selected+1):null),E=y(()=>{if(!s(_)||!s(b)||!s(A))return null;const w=s(l)==="explained"?{all:s(g),sel:s(_),label:"Explained part, TP^T"}:s(l)==="residual"?{all:s(p),sel:s(b),label:"Residuals, E"}:{all:s(d),sel:s(A),label:"Data, X"},P=en(w.all.v),U=P[1]-P[0],z=[P[0]-U/50,P[1]+U/12],W=xe.fill(P[1],w.sel.length);return w.lim=z,w.top=W,w.height=U,w});const N=y(()=>e.dataset&&e.selected>=0?`Object ${e.dataset.objlabels[e.selected].replace("_","-")}`:null),C=y(()=>e.model?e.model.varvaluesName+(e.model.varvaluesUnits?", "+e.model.varvaluesUnits:""):null);var k=me(),q=Z(k);{var M=w=>{ja(w,{get closeModal(){return e.closeModal},children:(P,U)=>{var z=qd(),W=F(z);W.__click=[Id,o];var V=F(W);ir(V,{get title(){return s(N)},get yLabel(){return s(E).label},get xLabel(){return s(C)},get limY(){return s(E).lim},get limX(){return s(f).lim},fileName:"plot-contributions",children:(S,O)=>{var L=Ld(),j=Z(L);gd(j,{get xValues(){return s(f).values},get yValues(){return s(E).all},lineColor:"#e0e0e0"});var X=I(j,2);{var Q=ye=>{var ue=me(),we=Z(ue);Ie(we,17,t,je,(ie,oe)=>{const ve=y(()=>s(E).all.getcolumn(s(oe)+1));Ut(ie,{get xValues(){return s(f).values},get yValues(){return s(ve)},lineColor:"#ffdd88"})}),T(ye,ue)};H(X,ye=>{t().length>0&&ye(Q)})}var ne=I(X,2);Ut(ne,{get xValues(){return s(f).values},get yValues(){return s(E).sel},lineColor:"crimson"});var re=I(ne,2);kl(re,{get left(){return s(u)},get top(){return s(E).top},get height(){return s(E).height},get width(){return s(f).width},faceColor:"transparent",borderColor:"transparent"});var te=I(re,2);{var ae=ye=>{var ue=Rd(),we=Z(ue);const ie=y(()=>[s(a)]),oe=y(()=>[s(E).top.v[0]]),ve=y(()=>[s(v)]);ad(we,{get xValues(){return s(ie)},get yValues(){return s(oe)},get labels(){return s(ve)},pos:3,textSize:.85});var fe=I(we,2);const Ae=y(()=>[s(a)]),Ue=y(()=>[s(c)]);qa(fe,{get xValues(){return s(Ae)},get yValues(){return s(Ue)},faceColor:"crimson",lineColor:"crimson"});var De=I(fe,2);const Le=y(()=>[s(u).v[s(o)]]),mt=y(()=>[s(E).top.v[s(o)]]);kl(De,{get left(){return s(Le)},get top(){return s(mt)},get height(){return s(E).height},get width(){return s(f).width},faceColor:"#ff000015"}),T(ye,ue)};H(te,ye=>{s(o)>=0&&ye(ae)})}T(S,L)},$$slots:{default:!0}});var Y=I(W,4),D=F(Y);Ee(D,{label:"",children:(S,O)=>{et(S,{id:"type",options:["full","explained","residual"],get value(){return s(l)},set value(L){G(l,ee(L))}})},$$slots:{default:!0}}),T(P,z)},$$slots:{default:!0}})};H(q,w=>{s(f)&&s(E)&&w(M)})}T(r,k),ge()}$e(["click"]);var zd=$("<!> <!> <!> <!>",1),jd=$("<p> </p>"),Fd=$("<!> <p>Computing global model...</p>",1),Od=$('<p><span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),Dd=$('<div class="buttons"><!> <!></div>'),Vd=$("<!> <!>",1),Bd=$("<p> </p>"),Yd=$("<!> <!> <!> <!>",1);function Wd(r,e){he(e,!0);let t=K(e,"resobj",15),l=K(e,"model",15),o=K(e,"downloadModel",3,null),a=K(e,"downloadResults",3,null),c=le("neutral"),v=le(""),f=le(1),u=le(!0),d=le(!1),m=le(void 0);async function h(P,U,z,W){G(m,ee(e.WASM().then(V=>{G(c,"computing");const Y=Jc(V,P.values,U,z,W,e.outliers);Y.hash=sl(),Y.exclvars=[],Y.varlabels=P.varlabels,Y.varindices=P.varindices,Y.varvalues=P.varvalues,Y.varvaluesName=P.varvaluesName,Y.varvaluesUnits=P.varvaluesUnits,Y.varrev=P.varrev,Y.exclvars=[],Y.prep=[];const D=ll(V,Y,P,e.outliers);l(Y),t(D),G(c,"success")}).catch(V=>{l(null),G(c,"error"),console.error(V),G(v,ee(V))})))}function g(P){G(c,"neutral"),G(v,null),h(e.dataset,s(f),s(u),s(d))}function p(){G(c,"neutral"),G(m,null),t(null),l(null),G(v,null)}let _=y(()=>e.dataset?Math.min(e.dataset.values.nrows-2-e.outliers.length,e.dataset.values.ncols-1,50):null);pe(()=>{e.dataset===null&&p()}),pe(()=>{G(f,ee(s(_)?Math.min(s(_),20):null))});var b=Yd(),A=Z(b);{var E=P=>{var U=zd(),z=Z(U);Ee(z,{name:"ncomp",label:"# of PCs",children:(D,S)=>{fa(D,{id:"ncomp",min:1,get max(){return s(_)},step:1,decNum:0,get value(){return s(f)},set value(O){G(f,ee(O))}})},$$slots:{default:!0}});var W=I(z,2);Ee(W,{name:"center",label:"Center",children:(D,S)=>{Qt(D,{id:"center",options:["no","yes"],get value(){return s(u)},set value(O){G(u,ee(O))}})},$$slots:{default:!0}});var V=I(W,2);Ee(V,{name:"scale",label:"Scale",children:(D,S)=>{Qt(D,{id:"scale",options:["no","yes"],get value(){return s(d)},set value(O){G(d,ee(O))}})},$$slots:{default:!0}});var Y=I(V,2);Ee(Y,{name:"create-model",label:" ",children:(D,S)=>{at(D,{onclick:g,text:"Create model"})},$$slots:{default:!0}}),T(P,U)};H(A,P=>{e.dataset&&!l()&&s(c)!=="computing"&&P(E)})}var N=I(A,2);{var C=P=>{var U=me(),z=Z(U);Fs(z,()=>s(m),W=>{Ee(W,{name:"spinner",children:(V,Y)=>{var D=Fd(),S=Z(D);ul(S),T(V,D)},$$slots:{default:!0}})},void 0,(W,V)=>{Ee(W,{name:"error",status:"error",children:(Y,D)=>{var S=jd(),O=F(S);se(()=>de(O,s(V))),T(Y,S)},$$slots:{default:!0}})}),T(P,U)};H(N,P=>{s(m)&&P(C)})}var k=I(N,2);{var q=P=>{var U=Vd(),z=Z(U);Ee(z,{name:"info",children:(Y,D)=>{var S=Od(),O=Z(S),L=I(F(O)),j=I(O,2);nn(j,{onclick:p}),se(()=>de(L,` ${l().ncomp??""} PCs${(l().center?", centered":"")??""}${(l().scale?", scaled":"")??""}`)),T(Y,S)},$$slots:{default:!0}});var W=I(z,2);{var V=Y=>{Ee(Y,{name:"download-buttons",label:"Download",children:(D,S)=>{var O=Dd(),L=F(O);at(L,{onclick:()=>a()(t(),e.dataset,"train",e.outliers,l()),text:"Results"});var j=I(L,2);at(j,{onclick:()=>o()(l()),text:"Model"}),T(D,O)},$$slots:{default:!0}})};H(W,Y=>{o()&&a()&&Y(V)})}T(P,U)};H(k,P=>{l()&&P(q)})}var M=I(k,2);{var w=P=>{Ee(P,{name:"error",status:"error",children:(U,z)=>{var W=Bd(),V=F(W);se(()=>de(V,s(v))),T(U,W)},$$slots:{default:!0}})};H(M,P=>{(s(c)==="error"||s(v))&&P(w)})}T(r,b),ge()}var Ud=$('<tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Crit (outliers)</td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"> </td></tr>'),Hd=$('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">h</th><th class="svelte-kg0b31">q</th><th class="svelte-kg0b31">f</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">DoF (Nu)</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Mean (u0)</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"></td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Crit (extreme)</td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"></td><td class="svelte-kg0b31"> </td></tr><!></tbody></table>');function Al(r,e){he(e,!0);let t=K(e,"isAlt",3,!1),l=y(()=>e.simca?e.simca.limType==="classic"?"c":"r":null),o=y(()=>e.model&&s(l)?Ke(e.model,s(l)+"Nh"):null),a=y(()=>e.model&&s(l)?Ke(e.model,s(l)+"Nq"):null),c=y(()=>e.model&&s(l)?Ke(e.model,s(l)+"h0"):null),v=y(()=>e.model&&s(l)?Ke(e.model,s(l)+"q0"):null),f=y(()=>e.simca?e.simca.ncomp:null);var u=me(),d=Z(u);{var m=h=>{var g=Hd(),p=I(F(g)),_=F(p),b=I(F(_)),A=F(b),E=I(b),N=F(E),C=I(E),k=F(C),q=I(_),M=I(F(q)),w=F(M),P=I(M),U=F(P),z=I(q),W=I(F(z),3),V=F(W),Y=I(z);{var D=S=>{var O=Ud(),L=I(F(O),3),j=F(L);se(X=>de(j,X),[()=>e.simca.oCrit[s(f)-1].toFixed(1)]),T(S,O)};H(Y,S=>{t()||S(D)})}se((S,O,L)=>{de(A,s(o)[s(f)-1]),de(N,s(a)[s(f)-1]),de(k,s(o)[s(f)-1]+s(a)[s(f)-1]),de(w,S),de(U,O),de(V,L)},[()=>s(c)[s(f)-1].toFixed(3),()=>s(v)[s(f)-1].toFixed(s(v)[s(f)-1]>99?0:3),()=>e.simca.eCrit[s(f)-1].toFixed(1)]),T(h,g)};H(d,h=>{e.model&&e.simca&&s(f)>0&&h(m)})}T(r,u),ge()}var Gd=$('<p class="title"> </p>'),Kd=$("<!> <!> <!> <!> <!>",1);function Nl(r,e){he(e,!0);let t=K(e,"isAlt",3,!1),l=K(e,"simca",15),o=le(void 0),a=le(void 0);if(!l()&&e.model){const g="classic",p=Ke(e.model,"cNh"),_=Ke(e.model,"cNq"),b=p.map((k,q)=>k+_[q]),A=1-5/100,E=Math.pow(1-1/100,1/e.model.nrows),N=b.map(k=>Bt(A,k)),C=b.map(k=>Bt(E,k));G(o,5),G(a,1),l({ncomp:1,alpha:5,gamma:1,limType:g,Nf:b,eCrit:N,oCrit:C,className:e.className,hash:sl()})}const c=[10,5,1,.1],v=[5,1,.1,.01];pe(()=>{if(l().alpha&&s(o)!==l().alpha){const m=1-l().alpha/100;l(l().eCrit=l().Nf.map(h=>Bt(m,h)),!0),G(o,ee(l().alpha))}if(l().gamma&&s(a)!==l().gamma){const m=Math.pow(1-l().gamma/100,1/e.model.nrows);l(l().oCrit=l().Nf.map(h=>Bt(m,h)),!0),G(a,ee(l().gamma))}}),pe(()=>{const m=l().limType.charAt(0),h=Ke(e.model,m+"Nh"),g=Ke(e.model,m+"Nq"),p=h.map((N,C)=>N+g[C]),_=1-l().alpha/100,b=Math.pow(1-l().gamma/100,1/e.model.nrows),A=p.map(N=>Bt(_,N)),E=p.map(N=>Bt(b,N));l(l().Nf=p,!0),l(l().eCrit=A,!0),l(l().oCrit=E,!0)});var f=me(),u=Z(f);{var d=m=>{var h=Kd(),g=Z(h);Ee(g,{name:"target-class",label:"",children:(N,C)=>{var k=Gd(),q=F(k);se(()=>de(q,`Target class: ${l().className??""}`)),T(N,k)},$$slots:{default:!0}});var p=I(g,2);Ee(p,{name:"ncomp",label:"# of PCs",children:(N,C)=>{fa(N,{min:1,get max(){return e.model.ncomp},step:1,decNum:0,get value(){return l().ncomp},set value(k){l(l().ncomp=k,!0)}})},$$slots:{default:!0}});var _=I(p,2);Ee(_,{name:"alpha",label:"Alpha, %:",children:(N,C)=>{et(N,{options:c,get value(){return l().alpha},set value(k){l(l().alpha=k,!0)}})},$$slots:{default:!0}});var b=I(_,2);{var A=N=>{Ee(N,{name:"gamma",label:"Gamma, %:",children:(C,k)=>{et(C,{options:v,get value(){return l().gamma},set value(q){l(l().gamma=q,!0)}})},$$slots:{default:!0}})};H(b,N=>{t()||N(A)})}var E=I(b,2);Ee(E,{name:"limits",label:"Limits:",children:(N,C)=>{et(N,{options:["classic","robust"],get value(){return l().limType},set value(k){l(l().limType=k,!0)}})},$$slots:{default:!0}}),T(m,h)};H(u,m=>{l()&&m(d)})}T(r,f),ge()}var Xd=$('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">Cal</th><th class="svelte-kg0b31">PV</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extremes</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Outliers</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Sensitivity</td><td class="svelte-kg0b31"> </td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function Qd(r,e){he(e,!0);let t=y(()=>e.calres?e.calres.v[0].c.length:0);var l=me(),o=Z(l);{var a=c=>{var v=Xd(),f=I(F(v)),u=F(f),d=I(F(u)),m=F(d),h=I(d),g=F(h),p=I(u),_=I(F(p)),b=F(_),A=I(_),E=F(A),N=I(p),C=I(F(N)),k=F(C),q=I(C),M=F(q),w=I(N),P=I(F(w)),U=F(P),z=I(P),W=F(z);se((V,Y)=>{de(m,s(t)),de(g,s(t)),de(b,e.calres.v[e.ncomp-1].cnum.extreme),de(E,e.pvres.v[e.ncomp-1].cnum.extreme),de(k,e.calres.v[e.ncomp-1].cnum.outliers),de(M,e.pvres.v[e.ncomp-1].cnum.outliers),de(U,V),de(W,Y)},[()=>e.calres.stat.sensitivity[e.ncomp-1].toFixed(3),()=>e.pvres.stat.sensitivity[e.ncomp-1].toFixed(3)]),T(c,v)};H(o,c=>{e.calres&&e.pvres&&c(a)})}T(r,l),ge()}var Jd=$("<!> <!> <!>",1),Zd=$("<p> </p>"),$d=$("<!> <p>Computing PV-set...</p>",1),ev=$('<p><span style="color:#a0a0a0;">PV-set:</span> </p> <!>',1),tv=$("<p> </p>"),rv=$("<!> <!> <!> <!>",1);function nv(r,e){he(e,!0);let t=K(e,"pvset",15),l=K(e,"pvres",15),o=le("neutral"),a=le(""),c=le(ee(["ven","rand","loo"])),v=le("ven"),f=le(void 0),u=e.calset.values.nrows-e.outliers.length,d=e.calset&&e.calset.values.nrows>0?[3,4,5,10,20].filter(w=>w>=u/(u-e.model.ncomp-1)&&w<=u/2):[],m=le(ee(d.length>0?d[0]:0));pe(()=>{d.length===0&&(G(c,ee(["loo"])),G(v,"loo"))});async function h(w,P,U){G(f,ee(e.WASM().then(z=>{const W=U.type=="loo"?0:U.type=="rand"?2:1,V=$c(z,P,w.values,P.ncomp,U.nseg,W,0,e.outliers);t({values:V,header:w.header,objindices:e.calres.objindices,objlabels:e.calres.objlabels,varlabels:P.varlabels,varindices:P.varindices,varvalues:P.varvalues,varvaluesName:P.varvaluesName,varvaluesUnits:P.varvaluesUnits,classes:e.calres.classes,sep:w.sep,dec:w.dec}),l(ll(z,P,t(),[]))}).catch(z=>{t(null),l(null),G(o,"error"),G(a,ee(z))})))}function g(w){G(o,"neutral"),G(a,""),h(e.calset,e.model,{type:s(v),nseg:s(m)})}function p(){G(o,"neutral"),G(a,""),G(f,null),t(null),l(null)}pe(()=>{e.model===null&&p()});var _=rv(),b=Z(_);{var A=w=>{var P=Jd(),U=Z(P);Ee(U,{name:"split",label:"Split type:",children:(Y,D)=>{et(Y,{id:"cvType",get options(){return s(c)},get value(){return s(v)},set value(S){G(v,ee(S))}})},$$slots:{default:!0}});var z=I(U,2);{var W=Y=>{Ee(Y,{name:"nseg",label:"Segments:",children:(D,S)=>{et(D,{id:"nseg",options:d,get value(){return s(m)},set value(O){G(m,ee(O))}})},$$slots:{default:!0}})};H(z,Y=>{s(v)!=="loo"&&Y(W)})}var V=I(z,2);Ee(V,{name:"run-button",label:" ",children:(Y,D)=>{at(Y,{onclick:g,text:"Compute PV-set"})},$$slots:{default:!0}}),T(w,P)};H(b,w=>{e.model&&!t()&&s(o)!=="busy"&&w(A)})}var E=I(b,2);{var N=w=>{var P=me(),U=Z(P);Fs(U,()=>s(f),z=>{Ee(z,{name:"spinner",children:(W,V)=>{var Y=$d(),D=Z(Y);ul(D),T(W,Y)},$$slots:{default:!0}})},void 0,(z,W)=>{Ee(z,{name:"error",status:"error",children:(V,Y)=>{var D=Zd(),S=F(D);se(()=>de(S,s(W))),T(V,D)},$$slots:{default:!0}})}),T(w,P)};H(E,w=>{s(f)&&w(N)})}var C=I(E,2);{var k=w=>{Ee(w,{name:"info",children:(P,U)=>{var z=ev(),W=Z(z),V=I(F(W)),Y=I(W,2);nn(Y,{onclick:p}),se(()=>de(V,` ${t().values.nrows??""} × ${t().values.ncols??""}, ${s(v)??""}
      ${(s(v)!=="loo"?s(m)+" seg":"")??""}`)),T(P,z)},$$slots:{default:!0}})};H(C,w=>{t()&&w(k)})}var q=I(C,2);{var M=w=>{Ee(w,{name:"error",status:"error",children:(P,U)=>{var z=tv(),W=F(z);se(()=>de(W,s(a))),T(P,z)},$$slots:{default:!0}})};H(q,w=>{s(o)==="error"&&s(a)&&w(M)})}T(r,_),ge()}var sv=$('<div class="msg-select">Click to select an object...</div>'),lv=$('<div class="msg-select">Click anywhere to remove selection...</div>'),ov=$('<div class="selected-buttons svelte-8mh2yv"><!></div>'),av=$("<!> <!>",1),iv=()=>switchPlot(i),cv=(r,e,t)=>G(e,ee(s(t))),uv=$('<button class="plot-selector svelte-8mh2yv"> </button>'),fv=$('<div class="plot-panel svelte-8mh2yv"><div class="plot-area svelte-8mh2yv"><div class="plot svelte-8mh2yv"><!></div> <div class="plot-select-msg svelte-8mh2yv"><!></div></div> <div class="plot-controls-area svelte-8mh2yv"></div></div>');function Sl(r,e){he(e,!0);let t=K(e,"params",15),l=ee({objects:-1,variables:-1}),o=le(ee(Object.keys(e.plots)[0]));function a(E){l.objects=E}function c(E){l.objects=-1}let v={objects:{select:a,unselect:c},variables:{},stats:{}},f=y(()=>s(o)?e.plots[s(o)]:null),u=y(()=>s(f)?s(f).component:null);var d=fv(),m=F(d),h=F(m),g=F(h);Os(g,()=>s(u),(E,N)=>{N(E,{get params(){return t()[s(o)]},get callbacks(){return v[s(f).scope]},get selected(){return l[s(f).scope]},get props(){return e.props}})});var p=I(h,2),_=F(p);{var b=E=>{var N=me(),C=Z(N);{var k=M=>{var w=sv();T(M,w)},q=M=>{var w=lv();T(M,w)};H(C,M=>{l[s(f).scope]<0?M(k):M(q,!1)})}T(E,N)};H(_,E=>{s(f).scope==="objects"&&t()[s(o)].plotType!=="l"&&E(b)})}var A=I(m,2);Ie(A,21,()=>Object.keys(e.plots),je,(E,N)=>{var C=me(),k=Z(C);{var q=w=>{var P=av(),U=Z(P);Ru(U,{get title(){return s(f).label},labelWidth:12,get options(){return e.controls[s(o)]},get value(){return t()[s(o)]},set value(V){t(t()[s(o)]=V,!0)}});var z=I(U,2);{var W=V=>{var Y=ov(),D=F(Y);Rr(D,()=>s(f).buttons,()=>l.objects),T(V,Y)};H(z,V=>{s(f).buttons&&l.objects>=0&&V(W)})}T(w,P)},M=w=>{var P=uv();P.__keydown=[iv],P.__click=[cv,o,N];var U=F(P);se(()=>de(U,e.plots[s(N)].label)),T(w,P)};H(k,w=>{s(f)&&s(o)===s(N)?w(q):w(M,!1)})}T(E,C)}),T(r,d),ge()}$e(["keydown","click"]);function Ba(r,e){!e.callbacks||!e.callbacks.select||jr(r,r.target.tagName,e.callbacks.select)}function dv(r,e){!e.callbacks||!e.callbacks.unselect||e.callbacks.unselect()}var vv=_e("<text> </text>"),mv=_e('<g class="series series-textlabels"></g>'),hv=_e('<g class="series series-line"><polyline class="line"></polyline></g>'),gv=_e("<rect></rect>"),pv=_e('<g class="series series-bar"></g>'),bv=_e("<text> </text>"),_v=_e('<g class="series series-points series-points1"></g>'),wv=_e('<g class="series series-points series-points1"><text> </text></g>'),yv=_e('<g class="series series-bar"><rect></rect></g>'),xv=_e('<g class="series series-text"><text> </text></g>'),kv=_e('<rect width="100%" height="100%" fill="#ffffffa0"></rect><!><!>',1),Ev=_e("<!><!><!><!><!>",1);function Zt(r,e){he(e,!0);let t=K(e,"shortenLabels",3,!0),l=K(e,"lineWidth",3,1),o=K(e,"markerSize",3,null),a=K(e,"pch",3,"●"),c=K(e,"colors",3,void 0),v=K(e,"mainColor",19,()=>zt.cal),f=K(e,"faceColor",3,null),u=K(e,"selected",19,()=>-1),d=K(e,"xRange",15),m=K(e,"yRange",15);const h=At("axes"),g=y(()=>Et(e.xValues,"PlotSeries")),p=y(()=>s(g)?Et(e.yValues,"PlotSeries",s(g).length):null);pe(()=>{d(s(g)?en(s(g)):null),m(s(p)?en(s(p)):null)});const _=y(()=>f()===null?e.plotType==="p"?"transparent":"white":f()),b=y(()=>o()?o():e.plotType==="p"?1:.85),A=y(()=>ml[h.scales().plot]),E=y(()=>st([0],h.tY())[0]),N=y(()=>hl([.8],h.tX())[0]),C=y(()=>s(N)/2),k=y(()=>s(A));let q=y(()=>e.plotType==="l"||e.plotType==="b"?bl(s(g),s(p),h.tX(),h.tY()):null),M=y(()=>s(g)?st(s(g),h.tX()):null),w=y(()=>s(p)?st(s(p),h.tY()):null),P=y(()=>e.labels&&Array.isArray(e.labels)?t()?e.labels.map(j=>j.slice(0,ls)):e.labels:null),U=y(()=>c()&&c().length===s(g).length?c():Array(s(g).length).fill(v()));const z=y(()=>`font-size:${s(b)}em;fill:${s(_)};cursor:default;text-anchor:middle;stroke-width:2px;user-select:none;`),W=`font-size:0.85em;fill:${Fa};cursor:default;text-anchor:middle;stroke:${Fa};stroke-width:0.1px;user-select:none;`,V="font-size:1.2em;fill:none;text-anchor:middle;text-anchor:middle;cursor:default;stroke-width:3px;user-select:none;",Y=`fill:transparent;stroke-width: ${l()}px;`,D=`stroke-width:${l()}px;`;var S=me(),O=Z(S);{var L=j=>{var X=Ev(),Q=Z(X);{var ne=ve=>{var fe=mv();R(fe,"style",W),Ie(fe,21,()=>s(M),je,(Ae,Ue,De)=>{var Le=vv(),mt=F(Le);se(()=>{R(Le,"x",s(M)[De]),R(Le,"y",s(w)[De]),R(Le,"dy",s(p).v[De]<0?s(k):-s(k)),de(mt,s(P)[De])}),T(Ae,Le)}),T(ve,fe)};H(Q,ve=>{e.showLabels&&s(P)&&ve(ne)})}var re=I(Q);{var te=ve=>{var fe=hv();R(fe,"style",Y);var Ae=F(fe);se(()=>{R(Ae,"points",s(q)),R(Ae,"stroke",v())}),T(ve,fe)};H(re,ve=>{(e.plotType==="l"||e.plotType==="b")&&ve(te)})}var ae=I(re);{var ye=ve=>{var fe=pv();R(fe,"style",D),fe.__click=[Ba,e],Ie(fe,21,()=>s(M),je,(Ae,Ue,De)=>{var Le=gv();se(()=>{R(Le,"x",s(M)[De]-s(C)),R(Le,"y",s(p).v[De]<0?s(E):s(w)[De]),R(Le,"fill",s(U)[De]),R(Le,"width",s(N)),R(Le,"height",s(p).v[De]<0?s(w)[De]-s(E):s(E)-s(w)[De])}),T(Ae,Le)}),T(ve,fe)};H(ae,ve=>{e.plotType==="h"&&ve(ye)})}var ue=I(ae);{var we=ve=>{var fe=_v();fe.__click=[Ba,e],Ie(fe,21,()=>s(M),je,(Ae,Ue,De)=>{var Le=bv(),mt=F(Le);se(()=>{R(Le,"x",s(M)[De]),R(Le,"y",s(w)[De]),R(Le,"fill",f()),R(Le,"stroke",s(U)[De]),de(mt,a())}),T(Ae,Le)}),se(()=>R(fe,"style",s(z))),T(ve,fe)};H(ue,ve=>{(e.plotType==="p"||e.plotType==="b")&&ve(we)})}var ie=I(ue);{var oe=ve=>{var fe=kv(),Ae=Z(fe);R(Ae,"x",0),R(Ae,"y",0),Ae.__click=[dv,e];var Ue=I(Ae);{var De=ut=>{var _t=wv();R(_t,"style",V);var rt=F(_t),$t=F(rt);se(()=>{R(rt,"x",s(M)[u()]),R(rt,"y",s(w)[u()]),R(rt,"stroke",s(U)[u()]),de($t,a())}),T(ut,_t)},Le=ut=>{var _t=yv();R(_t,"style",D);var rt=F(_t);se(()=>{R(rt,"stroke",s(U)[u()]),R(rt,"fill",s(U)[u()]),R(rt,"x",s(M)[u()]-s(C)),R(rt,"y",s(p).v[u()]<0?s(E):s(w)[u()]),R(rt,"width",s(N)),R(rt,"height",s(p).v[u()]<0?s(w)[u()]-s(E):s(E)-s(w)[u()])}),T(ut,_t)};H(Ue,ut=>{e.plotType!=="h"?ut(De):ut(Le,!1)})}var mt=I(Ue);{var pr=ut=>{var _t=xv();R(_t,"style",W);var rt=F(_t);R(rt,"stroke",Oa),R(rt,"fill",Oa);var $t=F(rt);se(()=>{R(rt,"x",s(M)[u()]),R(rt,"y",s(w)[u()]),R(rt,"dy",s(p).v[u()]<0?s(k):-s(k)),de($t,s(P)[u()])}),T(ut,_t)};H(mt,ut=>{e.showLabels&&s(P)&&s(P).length>0&&ut(pr)})}T(ve,fe)};H(ie,ve=>{u()>=0&&ve(oe)})}T(j,X)};H(O,j=>{s(M)&&s(w)&&j(L)})}T(r,S),ge()}$e(["click"]);var Cv=$("<!> <!> <!> <!>",1);function Ml(r,e){he(e,!0);let t=y(()=>e.props&&e.props.data?e.props.data:null),l=y(()=>e.props&&e.props.res?e.props.res:null),o=y(()=>e.params&&e.params.resID?s(l)[e.params.resID]:null),a=y(()=>e.params&&e.params.resID?s(t)[e.params.resID]:null);const c="#909090",v=100;function f(j,X,Q,ne){if(!j||!X)return null;const re=j.length;let te=xe.zeros(re),ae=Number.NEGATIVE_INFINITY,ye=Number.POSITIVE_INFINITY;if(ne==="log")for(let ue=0;ue<re;ue++){const we=Math.log(1+j[ue]/Q);te.v[ue]=we,ae=Math.max(ae,we),ye=Math.min(ye,we)}else for(let ue=0;ue<re;ue++){const we=j[ue]/Q;te.v[ue]=we,ae=Math.max(ae,we),ye=Math.min(ye,we)}return{values:te,min:ye,max:ae}}function u(j,X){return{q:"Orthogonal distance",h:"Score distance"}[j]+", "+(X==="log"?"log(1 + "+j+"/"+j+"0)":j+"/"+j+"0")}function d(j,X,Q,ne){const re=X+Q,ae=Bt(j,re)/Q,ye=-X/Q,ue=-ae/ye,we=xe.seq(0,ue*1,ue/v),ie=we.apply(oe=>oe*ye+ae);return{x:ne==="log"?we.apply(oe=>Math.log(1+oe)):we,y:ne==="log"?ie.apply(oe=>Math.log(1+oe)):ie}}let m=y(()=>e.params.limType==="classic"?{h:s(o).cNh,q:s(o).cNq}:{h:s(o).rNh,q:s(o).rNq}),h=y(()=>e.params.limType==="classic"?{h:s(o).ch0,q:s(o).cq0}:{h:s(o).rh0,q:s(o).rq0}),g=y(()=>({h:s(m).h[e.params.ncomp-1],q:s(m).q[e.params.ncomp-1]})),p=y(()=>({h:s(h).h[e.params.ncomp-1],q:s(h).q[e.params.ncomp-1]})),_=y(()=>e.params.alpha?1-e.params.alpha/100:.95),b=y(()=>e.params.gamma?1-e.params.gamma/100:.99),A=y(()=>d(s(_),s(g).h,s(g).q,e.params.transType)),E=y(()=>d(Math.pow(s(b),1/s(o).nrows),s(g).h,s(g).q,e.params.transType)),N=y(()=>Va(s(a),s(o),e.params.colorBy,e.params.colorByVar,e.params.resID,e.params.colorByObj)),C=y(()=>s(o)?ar(s(o),"hdist",e.params.ncomp):null),k=y(()=>s(o)?ar(s(o),"qdist",e.params.ncomp):null),q=y(()=>f(s(C),s(g).h,s(p).h,e.params.transType)),M=y(()=>f(s(k),s(g).q,s(p).q,e.params.transType)),w=y(()=>s(o)?s(o).objlabels.map(j=>j.slice(0,ls)):null),P=y(()=>e.params.title?e.params.title:"Distances (A = "+e.params.ncomp+")"),U=y(()=>u("h",e.params.transType)),z=y(()=>u("q",e.params.transType)),W=le(void 0),V=le(void 0),Y=y(()=>{if(!s(q)||!s(W))return[0,1];const j=Math.max(s(q).max,s(E).x.v[v-1]);return[-.02*(j-s(W)[0]),1.05*j]}),D=y(()=>{if(!s(M)||!s(V))return[0,1];const j=Math.max(s(M).max,s(E).y.v[0]);return[-.02*(j-s(V)[0]),(1.05+.1*(e.params.colorBy!=="none"))*j]});var S=me(),O=Z(S);{var L=j=>{ir(j,{get title(){return s(P)},get limX(){return s(Y)},get limY(){return s(D)},get xLabel(){return s(U)},get yLabel(){return s(z)},fileName:"plot-distance",get onclick(){return e.callbacks.unselectObject},children:(X,Q)=>{var ne=Cv(),re=Z(ne);{var te=oe=>{Ut(oe,{get xValues(){return s(A).x},get yValues(){return s(A).y},lineColor:c,lineType:2})};H(re,oe=>{s(A)&&oe(te)})}var ae=I(re,2);{var ye=oe=>{Ut(oe,{get xValues(){return s(E).x},get yValues(){return s(E).y},lineColor:c,lineType:3})};H(ae,oe=>{s(E)&&oe(ye)})}var ue=I(ae,2);Zt(ue,{get labels(){return s(w)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return s(q).values},get yValues(){return s(M).values},plotType:"p",get showLabels(){return e.params.showLabels},get colors(){return s(N).colors},get xRange(){return s(W)},set xRange(oe){G(W,ee(oe))},get yRange(){return s(V)},set yRange(oe){G(V,ee(oe))}});var we=I(ue,2);{var ie=oe=>{const ve=y(()=>s(N).breaks!==null);za(oe,{get show(){return s(ve)},get colmap(){return s(N).map},get breaks(){return s(N).breaks},get labels(){return s(N).labels}})};H(we,oe=>{s(N)&&oe(ie)})}T(X,ne)},$$slots:{default:!0}})};H(O,j=>{s(q)&&s(M)&&j(L)})}T(r,S),ge()}var Av=$("<!> <!> <!> <!>",1);function Tl(r,e){he(e,!0);const t="Objects",l="topright",o={q:"Orthogonal distance, q/q0",h:"Score distance, h/h0",f:"Full distance, f/f0"},a="#909090",c=y(()=>e.props&&e.props.res?e.props.res:null),v=y(()=>e.props&&e.props.simca?e.props.simca:null),f=y(()=>e.props&&e.props.model?e.props.model:null),u=y(()=>s(c)?s(c)[Object.keys(s(c))[0]]:null),d=y(()=>s(v)?s(v).ncomp:null),m=y(()=>s(v)?s(v).Nf:null),h=y(()=>s(v)?s(v).limType.charAt(0):null),g=y(()=>s(f)?Ke(s(f),s(h)+"h0"):null),p=y(()=>s(f)?Ke(s(f),s(h)+"q0"):null),_=(L,j,X,Q)=>new xe(ar(L,j,X).map(ne=>ne/Q)),b=y(()=>s(c)&&s(d)?ts(s(c),(L,j)=>_(L[j],"hdist",s(d),s(g)[s(d)-1])):null),A=y(()=>s(c)&&s(d)?ts(s(c),(L,j)=>_(L[j],"qdist",s(d),s(p)[s(d)-1])):null),E=y(()=>s(c)&&s(d)?ts(s(c),(L,j)=>_(L[j],"fdist"+s(h),s(d),s(m)[s(d)-1])):null),N=y(()=>s(b)&&s(A)&&s(E)?{h:s(b),q:s(A),f:s(E)}:null),C=y(()=>{if(!s(N))return null;if(e.params.resID==="both")return ts(s(N)[e.params.distType],(j,X)=>({values:j[X],color:zt[X],max:qt(j[X])}));if(e.params.resID==="diff"){const j=s(N)[e.params.distType].cal,X=s(N)[e.params.distType].pv,Q=j.subtract(X).apply(ne=>Math.abs(ne));return{"abs(cal - pv)":{values:Q,color:"#a0a0a0",max:qt(Q)}}}const L={};return L[e.params.resID]={values:s(N)[e.params.distType][e.params.resID],color:zt[e.params.resID],max:qt(s(N)[e.params.distType][e.params.resID])},L});let k=y(()=>s(C)?Object.keys(s(C)).map(L=>({id:L,label:L,point:{marker:e.params.resID==="diff"?2:1,faceColor:e.params.resID==="diff"?s(C)[L].color:"white",lineColor:s(C)[L].color,markerSize:.85,lineWidth:1.5}})):null);const q=y(()=>s(v)&&e.params.distType==="f"&&e.params.resID!=="diff"?s(v).eCrit[s(d)-1]/s(m)[s(d)-1]:0),M=y(()=>s(v)&&e.params.distType==="f"&&e.params.resID!=="diff"?s(v).oCrit[s(d)-1]/s(m)[s(d)-1]:0),w=y(()=>s(C)?qt(Object.keys(s(C)).map(L=>s(C)[L].max).concat([s(M)])):null),P=y(()=>s(u)?xe.seq(1,s(u).nrows):null),U=y(()=>s(u)?[0,s(u).nrows+1]:[0,1]),z=y(()=>s(w)?[-s(w)*.05,s(w)*1.2]:[0,1]),W=y(()=>o[e.params.distType]),V=y(()=>s(u)?s(u).objlabels.map(L=>L.slice(0,ls)):null),Y=y(()=>e.params.title?e.params.title:"Distances (A = "+s(d)+")");var D=me(),S=Z(D);{var O=L=>{ir(L,{get title(){return s(Y)},get limX(){return s(U)},get limY(){return s(z)},xLabel:t,get yLabel(){return s(W)},fileName:"plot-distances",get onclick(){return e.callbacks.unselectObject},children:(j,X)=>{var Q=Av(),ne=Z(Q);{var re=ie=>{const oe=y(()=>[s(q),s(q)]);Ut(ie,{get xValues(){return s(U)},get yValues(){return s(oe)},lineColor:a,lineType:2})};H(ne,ie=>{s(q)>0&&ie(re)})}var te=I(ne,2);{var ae=ie=>{const oe=y(()=>[s(M),s(M)]);Ut(ie,{get xValues(){return s(U)},get yValues(){return s(oe)},lineColor:a,lineType:3})};H(te,ie=>{s(M)>0&&ie(ae)})}var ye=I(te,2);Ie(ye,17,()=>Object.keys(s(C)),je,(ie,oe)=>{const ve=y(()=>e.params.resID==="diff"?"h":"p");Zt(ie,{get labels(){return s(V)},get selected(){return e.selected},get callbacks(){return e.callbacks},get xValues(){return s(P)},get yValues(){return s(C)[s(oe)].values},get mainColor(){return s(C)[s(oe)].color},get plotType(){return s(ve)},get showLabels(){return e.params.showLabels}})});var ue=I(ye,2);{var we=ie=>{sn(ie,{get items(){return s(k)},position:l})};H(ue,ie=>{s(k)&&s(k).length>0&&ie(we)})}T(j,Q)},$$slots:{default:!0}})};H(S,L=>{s(P)&&s(C)&&L(O)})}T(r,D),ge()}var Nv=$("<!> <!> <!> <!>",1);function Sv(r,e){he(e,!0);const t="Components",l="Degrees of freedom, Nu",o="DoF",a="plot-dof",c={Nh:"#2679B2",Nq:"#D22C2F"},v={Nh:"#f0f8ff",Nq:"#fff8f0"};let f=y(()=>e.props&&e.props.simca?e.props.simca:null),u=y(()=>e.props&&e.props.model?e.props.model:null),d=y(()=>s(f)?s(f).ncomp:null),m=y(()=>e.params.dfID!=="both"?[e.params.dfID]:["Nh","Nq"]),h=y(()=>e.params.legendPosition?e.params.legendPosition:"topleft"),g=y(()=>s(m)?s(m).map(k=>({id:k,label:k,point:{marker:1,lineColor:c[k],faceColor:"white",markerSize:.85,lineWidth:1.5},line:{lineColor:c[k],lineWidth:1.5}})):null),p=y(()=>s(u)?xe.seq(1,s(u).ncomp):null),_=y(()=>s(f)&&s(m)?s(m).reduce((k,q)=>{const M=s(f).limType==="classic"?"c":"r";return k[q]=new xe(Ke(s(u),M+q)),k},{}):null),b=y(()=>s(u)?[.5,s(u).ncomp+.5]:[0,1]),A=y(()=>{const k=Object.keys(s(_));if(k.length<1)return[0,1];const q=k.map(M=>qt(s(_)[M]));return[0,qt(q)*1.2]});var E=me(),N=Z(E);{var C=k=>{ir(k,{title:o,xLabel:t,yLabel:l,get limX(){return s(b)},get limY(){return s(A)},fileName:a,whole:!0,children:(q,M)=>{var w=Nv(),P=Z(w);{var U=S=>{const O=y(()=>[s(d)]),L=y(()=>[s(d)]),j=y(()=>[s(A)[0]]),X=y(()=>[s(A)[1]]);Jt(S,{get xStart(){return s(O)},get xEnd(){return s(L)},get yStart(){return s(j)},get yEnd(){return s(X)},lineColor:"#a0a0a0"})};H(P,S=>{s(d)&&S(U)})}var z=I(P,2);Ie(z,17,()=>s(m),je,(S,O)=>{Zt(S,{get xValues(){return s(p)},get yValues(){return s(_)[s(O)]},plotType:"b",showLabels:!1,get faceColor(){return v[s(O)]},get mainColor(){return c[s(O)]},lineWidth:1.5})});var W=I(z,2);{var V=S=>{var O=me(),L=Z(O);Ie(L,17,()=>s(m),je,(j,X)=>{const Q=y(()=>[s(p).v[s(d)-1]]),ne=y(()=>[s(_)[s(X)].v[s(d)-1]]);Zt(j,{get xValues(){return s(Q)},get yValues(){return s(ne)},plotType:"p",showLabels:!1,get faceColor(){return c[s(X)]},mainColor:"#a0a0a0",markerSize:1.2,lineWidth:1})}),T(S,O)};H(W,S=>{s(d)&&S(V)})}var Y=I(W,2);{var D=S=>{sn(S,{get items(){return s(g)},get position(){return s(h)}})};H(Y,S=>{s(g)&&s(g).length>0&&S(D)})}T(q,w)},$$slots:{default:!0}})};H(N,k=>{s(p)&&s(_)&&k(C)})}T(r,E),ge()}var Mv=$("<!> <!> <!>",1),Tv=$("<!> <!> <!>",1);function Ya(r,e){he(e,!0);const t="#e0e0e0",l="Number of extremes (expected)",o="Number of extremes (observed)",a="plot-extremes";function c(w){const P=xe.zeros(w+1),U=xe.zeros(w+1),z=xe.zeros(w+1),W=xe.zeros(w+1);for(let V=1;V<w;V++){const Y=V/w,D=2*Math.sqrt(V*(1-Y));P.v[V]=V,z.v[V]=V,U.v[V]=V-D,W.v[V]=V+D}return P.v[w]=w,z.v[w]=w,U.v[w]=w,W.v[w]=w,{xStart:P,xEnd:z,yStart:U,yEnd:W}}function v(w,P,U){const z=w.v[U-1].f,W=P.Nf[U-1],V=z.length,Y=xe.zeros(V);for(let D=1;D<=V;D++){const S=D/V,O=Bt(1-S,W);let L=0;for(let j=0;j<V;j++)z[j]>O&&(L+=1);Y.v[D-1]=L}return Y}let f=y(()=>e.props&&e.props.classres?e.props.classres:null),u=y(()=>e.props&&e.props.simca?e.props.simca:null),d=y(()=>e.props&&e.props.ncomp?e.props.ncomp:null),m=y(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(f))),h=y(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),g=y(()=>s(m)?s(m).map(w=>({id:w,label:w,point:{marker:1,lineColor:zt[w],faceColor:Fr[w],markerSize:.85,lineWidth:1.5}})):null),p=y(()=>s(f)&&s(m)?s(m).reduce((w,P)=>(w[P]=xe.seq(1,s(f)[P].nrows),w),{}):null),_=y(()=>s(f)&&s(m)&&s(d)?s(m).reduce((w,P)=>(w[P]=v(s(f)[P],s(u),s(d)),w),{}):null),b=y(()=>s(m)?s(m).reduce((w,P)=>Math.max(w,s(p)[P].length),0):1),A=y(()=>s(b)>1?c(s(b)):null),E=y(()=>s(p)?[-1,s(b)+2]:[0,1]),N=y(()=>s(p)?[-1,s(b)+2]:[0,1]),C=y(()=>s(d)?`Extremes (A = ${s(d)})`:"Extremes");var k=me(),q=Z(k);{var M=w=>{ir(w,{get title(){return s(C)},xLabel:l,yLabel:o,get limX(){return s(E)},get limY(){return s(N)},fileName:a,whole:!0,children:(P,U)=>{var z=Tv(),W=Z(z);{var V=O=>{var L=Mv(),j=Z(L);Jt(j,Lr(()=>s(A),{lineColor:t}));var X=I(j,2);Ut(X,{get xValues(){return s(A).xStart},get yValues(){return s(A).yStart},lineColor:t});var Q=I(X,2);Ut(Q,{get xValues(){return s(A).xEnd},get yValues(){return s(A).yEnd},lineColor:t}),T(O,L)};H(W,O=>{s(A)&&O(V)})}var Y=I(W,2);Ie(Y,17,()=>s(m),je,(O,L)=>{Zt(O,{get xValues(){return s(p)[s(L)]},get yValues(){return s(_)[s(L)]},plotType:"p",showLabels:!1,get faceColor(){return Fr[s(L)]},get mainColor(){return zt[s(L)]},lineWidth:1.5})});var D=I(Y,2);{var S=O=>{sn(O,{get items(){return s(g)},get position(){return s(h)}})};H(D,O=>{s(g)&&s(g).length>0&&O(S)})}T(P,z)},$$slots:{default:!0}})};H(q,w=>{s(f)&&w(M)})}T(r,k),ge()}var Pv=$("<!> <!>",1),Iv=$("<!> <!> <!> <!> <!>",1);function os(r,e){he(e,!0);let t=y(()=>"plot-"+e.params.statName),l=y(()=>e.props&&e.props.classres?e.props.classres:null),o=y(()=>e.props&&e.props.ncomp?e.props.ncomp:null),a=y(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(l))),c=y(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),v=y(()=>s(a)?s(a).map(E=>({id:E,label:E,point:{marker:1,lineColor:zt[E],faceColor:Fr[E],markerSize:.85,lineWidth:1.5},line:{lineType:1,lineColor:zt[E]}})):null),f=y(()=>e.params.ci&&Array.isArray(e.params.ci)&&e.params.ci.length===2?e.params.ci:null);const u=y(()=>s(l)?s(l)[s(a)[0]].stat.components.length:1),d=y(()=>s(u)>10?s(u)*.05:.5),m=y(()=>s(u)>1?1:0),h=y(()=>s(u)>1?s(u):2),g=y(()=>[s(m)-s(d),s(h)+s(d)]);let p=y(()=>{if(!e.params.zoom)return[0,1.1];if(!s(a)||s(a).length<1)return[0,1];const E=s(a).map(N=>en(s(l)[N].stat[e.params.statName]));return zo(E.flat(),.2)});var _=me(),b=Z(_);{var A=E=>{ir(E,{get title(){return e.params.title},xLabel:"Components",get yLabel(){return e.params.title},get limX(){return s(g)},get limY(){return s(p)},get fileName(){return s(t)},whole:!0,children:(N,C)=>{var k=Iv(),q=Z(k);{var M=D=>{const S=y(()=>[s(o)]),O=y(()=>[s(o)]),L=y(()=>[s(p)[0]]),j=y(()=>[s(p)[1]]);Jt(D,{get xStart(){return s(S)},get xEnd(){return s(O)},get yStart(){return s(L)},get yEnd(){return s(j)},lineColor:"#a0a0a0"})};H(q,D=>{s(o)&&D(M)})}var w=I(q,2);{var P=D=>{var S=Pv();const O=y(()=>s(g)[1]-s(g)[0]);var L=Z(S);const j=y(()=>[s(g)[0]]),X=y(()=>[s(f)[0]+s(f)[1]]),Q=y(()=>[2*s(f)[1]]),ne=y(()=>[s(O)]);kl(L,{get left(){return s(j)},get top(){return s(X)},get height(){return s(Q)},get width(){return s(ne)},lineColor:"#transparent",faceColor:"#00000010"});var re=I(L,2);const te=y(()=>[s(g)[0]]),ae=y(()=>[s(O)]),ye=y(()=>[s(f)[0]]),ue=y(()=>[s(f)[0]]);Jt(re,{get xStart(){return s(te)},get xEnd(){return s(ae)},get yStart(){return s(ye)},get yEnd(){return s(ue)},lineColor:"#a0a0a0",lineType:2}),T(D,S)};H(w,D=>{s(f)&&D(P)})}var U=I(w,2);Ie(U,17,()=>s(a),je,(D,S)=>{Zt(D,{get xValues(){return s(l)[s(S)].stat.components},get yValues(){return s(l)[s(S)].stat[e.params.statName]},plotType:"b",showLabels:!1,get faceColor(){return Fr[s(S)]},get mainColor(){return zt[s(S)]},lineWidth:1.5})});var z=I(U,2);{var W=D=>{var S=me(),O=Z(S);Ie(O,17,()=>s(a),je,(L,j)=>{const X=y(()=>[s(l)[s(j)].stat.components[s(o)-1]]),Q=y(()=>[s(l)[s(j)].stat[e.params.statName][s(o)-1]]);Zt(L,{get xValues(){return s(X)},get yValues(){return s(Q)},plotType:"b",showLabels:!1,get faceColor(){return zt[s(j)]},mainColor:"#a0a0a0",markerSize:1.2,lineWidth:1})}),T(D,S)};H(z,D=>{s(o)&&D(W)})}var V=I(z,2);{var Y=D=>{sn(D,{get items(){return s(v)},get position(){return s(c)}})};H(V,D=>{s(v)&&s(v).length>0&&D(Y)})}T(N,k)},$$slots:{default:!0}})};H(b,E=>{s(l)&&E(A)})}T(r,_),ge()}function Rv(r,e){he(e,!0);let t=K(e,"lineColor",3,"#606060"),l=K(e,"lineType",3,2),o=K(e,"alpha",3,.05),a=K(e,"xRange",15),c=K(e,"yRange",15);const v=xe.seq(0,2*Math.PI,.05);function f(b,A,E,N){const C=b.eigenvals[A-1],k=Bt(1-o(),2),q=Math.sqrt(k*C),M=xe.zeros(N.length);for(let w=0;w<N.length;w++)M.v[w]=q*E(N.v[w]);return[M,-q,q]}let u=y(()=>e.comp?e.comp[0]:null),d=y(()=>s(u)?f(e.resobj,s(u),Math.cos,v):null);pe(()=>{a(s(d)?[s(d)[1],s(d)[2]]:null)});let m=y(()=>e.comp?e.comp[1]:null),h=y(()=>s(m)?f(e.resobj,s(m),Math.sin,v):null);pe(()=>{c(s(h)?[s(h)[1],s(h)[2]]:null)});var g=me(),p=Z(g);{var _=b=>{Ut(b,{get xValues(){return s(d)[0]},get yValues(){return s(h)[0]},get lineColor(){return t()},get lineType(){return l()}})};H(p,b=>{s(d)&&s(h)&&b(_)})}T(r,g),ge()}function Lv(r,e){he(e,!0);let t=K(e,"confLevel",3,.95),l=K(e,"xRange",15),o=K(e,"yRange",15),a=y(()=>Td(e.xValues,e.yValues,e.groups,e.groupNames,e.groupColors,t()));pe(()=>{s(a)?(l(s(a).xRange),o(s(a).yRange)):(l(null),o(null))});var c=me(),v=Z(c);{var f=u=>{var d=me(),m=Z(d);Ie(m,17,()=>s(a).ellipses,je,(h,g,p)=>{Ut(h,{get xValues(){return s(g).x},get yValues(){return s(g).y},get lineColor(){return e.groupColors[p]}})}),T(u,d)};H(v,u=>{s(a)&&s(a).ellipses&&u(f)})}T(r,c),ge()}var qv=$("<!> <!> <!> <!> <!> <!>",1);function Pl(r,e){he(e,!0);let t=K(e,"alpha",3,.05),l=y(()=>e.props&&e.props.data?e.props.data:null),o=y(()=>e.props&&e.props.res?e.props.res:null),a=y(()=>e.params&&e.params.resID?s(o)[e.params.resID]:null),c=y(()=>e.params&&e.params.resID?s(l)[e.params.resID]:null);function v(S,O,L,j,X){if(!L)return null;let Q=L[0],ne=L[1];S&&j&&(Q=Math.min(Q,j[0]),ne=Math.max(ne,j[1])),O!=="none"&&X&&(Q=Math.min(Q,X[0]),ne=Math.max(ne,X[1]));const re=(ne-Q)*.1;return{min:Q,max:ne,d:re}}function f(S,O){if(!(!S||!O||O<1||O>S.ncomp))return new xe(ar(S,"scores",O))}let u=le(void 0),d=le(void 0),m=le(void 0),h=le(void 0),g=le(void 0),p=le(void 0),_=y(()=>s(o)?Ge(s(a).objindices):null),b=y(()=>s(a)?s(a).objlabels.map(S=>S.slice(0,ls)):null),A=y(()=>f(s(a),e.params.comp1)),E=y(()=>e.params.plotType==="p"?s(A):s(_)),N=y(()=>e.params.comp2?e.params.comp2:null),C=y(()=>f(s(a),s(N))),k=y(()=>Va(s(c),s(a),e.params.colorBy,e.params.colorByVar,e.params.resID)),q=y(()=>e.params.plotType==="p"?Da(s(a),e.params.comp1):"Objects"),M=y(()=>Da(s(a),e.params.comp2)),w=y(()=>v(e.params.showEllipse,e.params.confEllipse,s(u),s(m),s(g))),P=y(()=>s(w)?[s(w).min-s(w).d,s(w).max+s(w).d]:[0,1]),U=y(()=>v(e.params.showEllipse,e.params.confEllipse,s(d),s(h),s(p))),z=y(()=>s(U)?[s(U).min-s(U).d,s(U).max+s(U).d*(1+(e.params.colorBy!=="none"))]:[0,1]),W=y(()=>e.params.plotType==="l"||e.params.colorBy==="none"||!s(k)?"Scores":e.params.colorBy==="groups"?"Scores (colored by groups)":"Scores (colored by "+s(k).varname+(s(c).varvaluesUnits?" "+s(c).varvaluesUnits:"")+")");var V=me(),Y=Z(V);{var D=S=>{ir(S,{get title(){return s(W)},get limX(){return s(P)},get limY(){return s(z)},get xLabel(){return s(q)},get yLabel(){return s(M)},fileName:"plot-scores",get onclick(){return e.callbacks.unselectObject},children:(O,L)=>{var j=qv(),X=Z(j);const Q=y(()=>[s(P)[0]]),ne=y(()=>[s(P)[1]]);Jt(X,{get xStart(){return s(Q)},get xEnd(){return s(ne)},yStart:[0],yEnd:[0],lineColor:ss});var re=I(X,2);{var te=fe=>{const Ae=y(()=>[s(z)[0]]),Ue=y(()=>[s(z)[1]]);Jt(fe,{xStart:[0],xEnd:[0],get yStart(){return s(Ae)},get yEnd(){return s(Ue)},lineColor:ss})};H(re,fe=>{e.params.plotType==="p"&&fe(te)})}var ae=I(re,2);{var ye=fe=>{const Ae=y(()=>[e.params.comp1,e.params.comp2]);Rv(fe,{get alpha(){return t()},get resobj(){return s(a)},get comp(){return s(Ae)},get xRange(){return s(m)},set xRange(Ue){G(m,ee(Ue))},get yRange(){return s(h)},set yRange(Ue){G(h,ee(Ue))}})};H(ae,fe=>{e.params.showEllipse&&e.params.plotType==="p"&&fe(ye)})}var ue=I(ae,2);{var we=fe=>{const Ae=y(()=>Number.parseInt(e.params.confEllipse)/100);Lv(fe,{get xValues(){return s(E)},get yValues(){return s(C)},get confLevel(){return s(Ae)},get groups(){return s(a).classes},get groupNames(){return s(a).classNames},get groupColors(){return s(k).map},get xRange(){return s(g)},set xRange(Ue){G(g,ee(Ue))},get yRange(){return s(p)},set yRange(Ue){G(p,ee(Ue))}})};H(ue,fe=>{e.params.colorBy==="groups"&&e.params.confEllipse!=="none"&&e.params.plotType==="p"&&s(k)&&fe(we)})}var ie=I(ue,2);Zt(ie,{get xValues(){return s(E)},get yValues(){return s(C)},get labels(){return s(b)},get selected(){return e.selected},get callbacks(){return e.callbacks},get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get colors(){return s(k).colors},get xRange(){return s(u)},set xRange(fe){G(u,ee(fe))},get yRange(){return s(d)},set yRange(fe){G(d,ee(fe))}});var oe=I(ie,2);{var ve=fe=>{const Ae=y(()=>s(k).breaks!==null);za(fe,{get show(){return s(Ae)},get colmap(){return s(k).map},get breaks(){return s(k).breaks},get labels(){return s(k).labels}})};H(oe,fe=>{s(k)&&fe(ve)})}T(O,j)},$$slots:{default:!0}})};H(Y,S=>{s(E)&&s(C)&&S(D)})}T(r,V),ge()}var zv=$("<!> <!> <!>",1);function jv(r,e){he(e,!0);let t=y(()=>e.props?e.props.model:null);function l(C,k){return!C||!k||k<1||k>C.ncomp?null:new xe(Ke(C,"loadings",k))}let o=le(void 0),a=le(void 0),c=y(()=>s(t)?Ge(s(t).varvalues):null),v=y(()=>s(t)?Ge(s(t).varindices):null),f=y(()=>l(s(t),e.params.comp1)),u=y(()=>!s(t)||!e.params.comp1?null:e.params.plotType==="p"?{values:s(f),label:`PC${e.params.comp1}`}:e.params.plotType==="l"&&s(c)?{values:s(c),label:s(t).varvaluesName+(s(t).varvaluesUnits?", "+s(t).varvaluesUnits:"")}:{values:s(v),label:"Variables"}),d=y(()=>s(u)?s(u).values:null),m=y(()=>s(u)?s(u).label:null),h=y(()=>l(s(t),e.params.comp2)),g=y(()=>`PC${e.params.comp2}`),p=y(()=>{if(s(a)&&s(a)[0]<Number.POSITIVE_INFINITY&&s(a)[1]>Number.NEGATIVE_INFINITY){const C=(s(a)[1]-s(a)[0])*.1;return[s(a)[0]-C,s(a)[1]+C]}else return[0,1]}),_=y(()=>{if(s(o)&&s(o)[0]<Number.POSITIVE_INFINITY&&s(o)[1]>Number.NEGATIVE_INFINITY){const C=(s(o)[1]-s(o)[0])*.1;return e.params.plotType==="l"&&s(t).varrev?[s(o)[1]+C,s(o)[0]-C]:[s(o)[0]-C,s(o)[1]+C]}else return[0,1]}),b=y(()=>{if(e.params.axesEqual)if(e.params.plotType==="p"){const C=Math.max(Math.abs(s(_)[0]),Math.abs(s(p)[0]),s(_)[1],s(p)[1])*1.05;return{x:[-C,C],y:[-C,C]}}else{const C=Math.max(Math.abs(s(p)[0]),s(p)[1])*1.05;return{x:s(_),y:[-C,C]}}return{x:s(_),y:s(p)}});var A=me(),E=Z(A);{var N=C=>{ir(C,{title:"Loadings",fileName:"plot-loadings",get xLabel(){return s(m)},get yLabel(){return s(g)},get limX(){return s(b).x},get limY(){return s(b).y},children:(k,q)=>{var M=zv(),w=Z(M);const P=y(()=>[s(b).x[0]]),U=y(()=>[s(b).x[1]]);Jt(w,{get xStart(){return s(P)},get xEnd(){return s(U)},yStart:[0],yEnd:[0],lineColor:ss});var z=I(w,2);{var W=Y=>{const D=y(()=>[s(b).y[0]]),S=y(()=>[s(b).y[1]]);Jt(Y,{xStart:[0],xEnd:[0],get yStart(){return s(D)},get yEnd(){return s(S)},lineColor:ss})};H(z,Y=>{e.params.plotType==="p"&&Y(W)})}var V=I(z,2);Zt(V,{get xValues(){return s(d)},get yValues(){return s(h)},get selected(){return e.selected},seriesTitle:"loadings",get plotType(){return e.params.plotType},get showLabels(){return e.params.showLabels},get labels(){return s(t).varlabels},shortenLabels:!1,get xRange(){return s(o)},set xRange(Y){G(o,ee(Y))},get yRange(){return s(a)},set yRange(Y){G(a,ee(Y))}}),T(k,M)},$$slots:{default:!0}})};H(E,C=>{s(d)&&s(h)&&C(N)})}T(r,A),ge()}function Il(r){const e=Object.keys(r);return{resID:{el:et,hidden:e.length==1,default:e[0],label:"Result",props:{options:e}},transType:{el:et,hidden:!1,default:"no",label:"Transform",props:{options:["no","log"]}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},colorBy:{el:et,hidden:!0,default:"roles",label:"Color by",props:{options:["roles","classes"]}}}}function as(r){return{resID:{el:et,hidden:r.length==1,default:r[0],label:"Show",props:{options:r}},zoom:{el:Qt,hidden:!1,default:!1,label:"Zoom",props:{options:["off","on"]}}}}function Rl(r){const e=Object.keys(r),t=e.concat(["both","diff"]);return{resID:{el:et,hidden:e.length==1,default:e[0],label:"Result",props:{options:t}},distType:{el:et,hidden:!1,default:"h",label:"Distance",props:{options:["h","q","f"]}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}}}}function Fv(){return{dfID:{el:et,hidden:!1,default:"both",label:"DoF type",props:{options:["both","Nh","Nq"]}}}}function Ov(r){return{resID:{el:et,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Dv(r){return{resID:{el:et,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Wa(r){return{resID:{el:et,hidden:r.length==1,default:r[0],label:"Results",props:{options:r}}}}function Vv(r){return{plotType:{el:pa,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:_n,hidden:!1,default:r.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:r.ncomp}},comp1:{el:_n,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:r.ncomp}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},axesEqual:{el:Qt,hidden:!1,default:!1,label:"Axes",props:{options:["normal","equal"]}}}}function Ll(r){const e=Object.keys(r),t=r[e[0]],l=t.classNames&&t.classNames.length>1?["none","groups","variable"]:["none","variable"];return{plotType:{el:pa,hidden:!1,default:"p",label:"Plot type",props:{options:["p","l","h"]}},comp2:{el:_n,hidden:!1,default:t.ncomp>1?2:1,label:"PC (y-axis)",props:{min:1,max:t.ncomp}},comp1:{el:_n,hidden:!1,default:1,label:"PC (x-axis)",props:{min:1,max:t.ncomp}},resID:{el:et,hidden:e.length==1,default:e[0],label:"Show",props:{options:e}},showLabels:{el:Qt,hidden:!1,default:!1,label:"Show labels",props:{options:["hide","show"]}},showEllipse:{el:Qt,hidden:!1,default:!1,label:"T2 ellipse",props:{options:["hide","show"]}},colorBy:{el:et,hidden:!1,default:"none",label:"Color by",props:{options:l}},colorByVar:{el:_n,hidden:!0,default:1,label:"Variable",props:{min:1,max:t.ncols}},confEllipse:{el:et,hidden:!0,default:"none",label:"Conf ellipse",props:{options:["none","90","95","99"]}}}}var Bv=$("<!> <!>",1);function Yv(r,e){he(e,!0);const t=(g,p=dt)=>{Ee(g,{label:"Selected",children:(_,b)=>{at(_,{onclick:()=>e.markOutlier(p()),text:"remove"})},$$slots:{default:!0}})},l=(g,p=dt)=>{Ee(g,{label:"Selected",children:(_,b)=>{var A=Bv(),E=Z(A);at(E,{onclick:()=>e.showContributions(p()),text:"plot"});var N=I(E,2);at(N,{onclick:()=>e.markOutlier(p()),text:"remove"}),T(_,A)},$$slots:{default:!0}})},o={cal:e.calres.pca,pv:e.pvres.pca},a={cal:e.calset,pv:e.pvset},c=y(()=>({cal:e.calres.simca,pv:e.pvres.simca})),v={regular:Sr.regular,extreme:Sr.extreme,outlier:Sr.outlier},f=y(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Ml,buttons:l},distances:{label:"Distances",scope:"objects",component:Tl,buttons:l},dof:{label:"DoF",scope:"stats",component:Sv},extremes:{label:"Extremes",scope:"stats",component:Ya},sensitivity:{label:"Sensitivity",scope:"stats",component:os},loadings:{label:"Loadings",scope:"variables",component:jv},scores:{label:"Scores",scope:"objects",component:Pl,buttons:t}})),u=ee({acceptance:Il(o),distances:Rl(o),dof:Fv(),extremes:Wa(["cal","pv","both"]),sensitivity:as(["cal","pv","both"]),scores:Ll(o),loadings:Vv(e.model)});let d=le(ee({acceptance:it(u.acceptance),distances:it(u.distances),dof:it(u.dof),extremes:it(u.extremes),sensitivity:it(u.sensitivity),scores:it(u.scores),loadings:it(u.loadings)}));pe(()=>{s(d).sensitivity.title="Sensitivity",s(d).sensitivity.statName="sensitivity"}),pe(()=>{const g=e.calres.pca.nrows,p=1-e.simca.alpha/100,b=1.96*Math.sqrt(g*p*(1-p))/g;s(d).sensitivity.ci=[p,b]}),pe(()=>{s(d).acceptance.ncomp=e.simca.ncomp,s(d).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(d).acceptance.limType=e.simca.limType,s(d).acceptance.alpha=e.simca.alpha,s(d).acceptance.gamma=e.simca.gamma}),pe(()=>{if(e.simca.limType){const p={cal:e.calres.simca,pv:e.pvres.simca}[s(d).acceptance.resID].v[e.simca.ncomp-1];s(d).acceptance.colorByObj={classColmap:v,labels:[`regular: ${p.cnum.regular}`,`extreme: ${p.cnum.extreme}`,`outliers: ${p.cnum.outliers}`],values:p.c}}}),pe(()=>{s(d).scores.plotType!=="p"?(u.scores.comp1.hidden=!0,u.scores.showEllipse.hidden=!0,s(d).scores.showEllipse=!1):(u.scores.comp1.hidden=!1,u.scores.showEllipse.hidden=!1),s(d).scores.plotType==="l"||s(d).scores.plotType==="b"?(u.scores.colorBy.hidden=!0,s(d).scores.colorBy="none"):u.scores.colorBy.hidden=!1,s(d).scores.colorBy==="variable"?u.scores.colorByVar.hidden=!1:u.scores.colorByVar.hidden=!0,s(d).scores.colorBy==="groups"&&s(d).scores.plotType==="p"?u.scores.confEllipse.hidden=!1:(u.scores.confEllipse.hidden=!0,s(d).scores.confEllipse="none")}),pe(()=>{s(d).loadings.plotType!=="p"?u.loadings.comp1.hidden=!0:u.loadings.comp1.hidden=!1});const m=y(()=>({res:o,classres:s(c),model:e.model,simca:e.simca,data:a,ncomp:e.simca.ncomp})),h={markOutlier:e.markOutlier,showContributions:e.showContributions};Sl(r,{get plots(){return s(f)},get controls(){return u},get props(){return s(m)},callbacks:h,get params(){return s(d)},set params(g){G(d,ee(g))}}),ge()}var Wv=$('<div class="outliers-pane svelte-1wcgq1z"><!></div>'),Uv=$('<div class="model-calculator svelte-1wcgq1z"><!></div>'),Hv=$('<div class="pcv-calculator svelte-1wcgq1z"><!></div>'),Gv=$('<div class="buttons"><!> <!> <!></div>'),Kv=$('<div class="model-stats svelte-1wcgq1z"><!></div> <div class="result-stats svelte-1wcgq1z"><!></div>',1),Xv=$(`<p class="svelte-1wcgq1z">In this tab you can train a DD-SIMCA model and optimize its parameters using Procrustes cross-validation. After creating the model you can save it to a file and use it in other tabs. For example, validate and tune it using test set with target class members (tab <strong>Predict: Target</strong>) or apply it to a dataset with non-target class members (tab <strong>Predict: New</strong>).</p> <p class="svelte-1wcgq1z"><strong>Step 1.</strong></p> <p class="svelte-1wcgq1z">Load your training set from a CSV file. The file should contain data as numeric values delimited
               by comma (with dot as decimal separator) or by semicolon (with comma as decimal separator). Rows correspond to observations or objects, columns — to variables.</p> <p class="svelte-1wcgq1z">First column must contain class names for each row. All rows in the training set should belong to the target class, so it is expected that the class names are the same (you will get error message if not).</p> <p class="svelte-1wcgq1z">First row can contain variable names (<strong>header</strong>) and first column can contain labels for the objects/observations (<strong>row labels</strong>) — just set the corresponding options after selecting the file. In this case it is assumed that column with the class names is located next to the column with row labels. Here is an example:</p> <div class="svelte-1wcgq1z"><table class="svelte-1wcgq1z"><thead class="svelte-1wcgq1z"><tr class="svelte-1wcgq1z"><td class="svelte-1wcgq1z">Name</td><td class="svelte-1wcgq1z">Class</td><td class="svelte-1wcgq1z">x1</td><td class="svelte-1wcgq1z">x2</td><td class="svelte-1wcgq1z">x3</td></tr></thead><tbody class="svelte-1wcgq1z"><tr><td class="svelte-1wcgq1z">O1</td><td class="svelte-1wcgq1z">A</td><td class="svelte-1wcgq1z">3.8</td><td class="svelte-1wcgq1z">1.3</td><td class="svelte-1wcgq1z">13.6</td></tr><tr><td class="svelte-1wcgq1z">O2</td><td class="svelte-1wcgq1z">A</td><td class="svelte-1wcgq1z">11.1</td><td class="svelte-1wcgq1z">12.3</td><td class="svelte-1wcgq1z">3.3</td></tr><tr><td class="svelte-1wcgq1z">O3</td><td class="svelte-1wcgq1z">A</td><td class="svelte-1wcgq1z">1.2</td><td class="svelte-1wcgq1z">2.3</td><td class="svelte-1wcgq1z">4.2</td></tr></tbody></table></div> <p class="svelte-1wcgq1z"></p>`,1),Qv=$(`<p class="svelte-1wcgq1z"><strong>Step 2</strong></p> <p class="svelte-1wcgq1z">Next step is to create a global PCA model for the calibration set, which will be the basis for the SIMCA model. Use more components/latent variables (PCs) than you expect to be optimal. You will have possibility to set
               optimal number later.</p>`,1),Jv=$('<p class="svelte-1wcgq1z"><strong>Step 3</strong></p> <p class="svelte-1wcgq1z">Now set necessary parameters for Procrustes cross-validation and click button to compute the PV-set, which will help you to optimize SIMCA model parameters. The parameters are the same as for conventional cross-validation: type of splits and number of segments. It is recommended to use fewer number of segments (e.g. 3, 4 or 5).</p> <p class="svelte-1wcgq1z">After this step SIMCA model will be created automatically and you will be able to tune its parameters.</p>',1),Zv=$("<!> <!>",1),$v=$('<div class="help-text svelte-1wcgq1z"><!></div>'),e1=$('<!> <div class="app-container svelte-1wcgq1z"><div class="app-controls svelte-1wcgq1z"><div class="data-loader svelte-1wcgq1z"><!></div> <!> <!> <!> <div class="simca-settings svelte-1wcgq1z"><!> <!></div> <!></div> <div class="app-content svelte-1wcgq1z"><!></div></div>',1);function t1(r,e){he(e,!0);let t=K(e,"s",15),l=le(-1),o=le(!1);function a(L){if(L<0||L>t().calres.pca.nrows-1)return;const j=t().calres.pca.objindices[L];j>=0&&!t().outliers.includes(j)&&(t().outliers.push(j),t(t().pvres.simca=null,!0),t(t().calres.simca=null,!0),t(t().simca=null,!0),t(t().pvres.pca=null,!0),t(t().pvset=null,!0),t(t().calres.pca=null,!0),t(t().model=null,!0))}function c(L){L<0||(G(l,ee(L)),G(o,!0))}function v(){G(o,!1),G(l,-1)}function f(){t(t().outliers=[],!0),t(t().model=null,!0)}function u(){t().outliers.pop(),t(t().model=null,!0)}jn(()=>{t().calset===null?(t(t().model=null,!0),t(t().className=null,!0),t(t().outliers=[],!0)):t().calset&&!t().className&&t(t().className=t().calset.classNames[0],!0),t().model===null&&(t(t().calres.simca=null,!0),t(t().simca=null,!0),t(t().calres.pca=null,!0),t(t().pvset=null,!0)),t().pvset===null&&(t(t().pvres.simca=null,!0),t(t().pvres.pca=null,!0))}),pe(()=>{t().model===null&&(t(t().pvres={pca:null,scima:null},!0),t(t().calres={pca:null,simca:null},!0),t(t().simca=null,!0),t(t().pvset=null,!0))}),pe(()=>{t().calset===null?(t(t().pvres={pca:null,scima:null},!0),t(t().calres={pca:null,simca:null},!0),t(t().simca=null,!0),t(t().pvset=null,!0),t(t().className=null,!0),t(t().outliers=[],!0),t(t().model=null,!0)):t().calset&&!t().className&&t(t().className=t().calset.classNames[0],!0)}),pe(()=>{t().pvset===null&&t(t().pvres={pca:null,scima:null},!0)}),pe(()=>{t().calres.pca&&t().simca&&t(t().calres.simca=il(t().calres.pca,Nt(()=>t().simca.limType),t().simca.eCrit,t().simca.oCrit),!0)}),pe(()=>{t().pvres.pca&&t().simca&&t(t().pvres.simca=il(t().pvres.pca,Nt(()=>t().simca.limType),t().simca.eCrit,t().simca.oCrit),!0)});var d=e1(),m=Z(d);{var h=L=>{Cl(L,{get dataset(){return t().calset},get model(){return t().model},get ncomp(){return t().simca.ncomp},get outliers(){return t().outliers},get selected(){return s(l)},closeModal:v})};H(m,L=>{s(o)&&L(h)})}var g=I(m,2),p=F(g),_=F(p),b=F(_);fl(b,{className:"Class",get dataset(){return t().calset},set dataset(L){t(t().calset=L,!0)}});var A=I(_,2);{var E=L=>{var j=Wv(),X=F(j);dl(X,{get outliers(){return t().outliers},get dataset(){return t().calset},resetOutliers:f,undoOutliers:u}),T(L,j)};H(A,L=>{t().outliers&&t().outliers.length>0&&L(E)})}var N=I(A,2);{var C=L=>{var j=Uv(),X=F(j);Wd(X,{get WASM(){return e.WASM},get dataset(){return t().calset},get outliers(){return t().outliers},get model(){return t().model},set model(Q){t(t().model=Q,!0)},get resobj(){return t().calres.pca},set resobj(Q){t(t().calres.pca=Q,!0)}}),T(L,j)};H(N,L=>{t().calset&&L(C)})}var k=I(N,2);{var q=L=>{var j=Hv(),X=F(j);nv(X,{get WASM(){return e.WASM},get calset(){return t().calset},get outliers(){return t().outliers},get model(){return t().model},get calres(){return t().calres.pca},get pvset(){return t().pvset},set pvset(Q){t(t().pvset=Q,!0)},get pvres(){return t().pvres.pca},set pvres(Q){t(t().pvres.pca=Q,!0)}}),T(L,j)};H(k,L=>{t().model&&L(q)})}var M=I(k,2),w=F(M);{var P=L=>{Nl(L,{get model(){return t().model},get className(){return t().className},get simca(){return t().simca},set simca(j){t(t().simca=j,!0)}})};H(w,L=>{t().model&&t().pvres.pca&&t().calres.pca&&L(P)})}var U=I(w,2);{var z=L=>{Ee(L,{label:"Download",children:(j,X)=>{var Q=Gv(),ne=F(Q);at(ne,{onclick:()=>rs(t().model,t().simca,t().calres,t().calset,"train",t().outliers),text:"Res (cal)"});var re=I(ne,2);at(re,{onclick:()=>rs(t().model,t().simca,t().pvres,t().pvset,"PV",t().outliers),text:"Res (pv)"});var te=I(re,2);at(te,{onclick:()=>cl(t().model,t().simca),text:"Model"}),T(j,Q)},$$slots:{default:!0}})};H(U,L=>{t().pvres.simca&&t().calres.simca&&L(z)})}var W=I(M,2);{var V=L=>{var j=Kv(),X=Z(j),Q=F(X);Al(Q,{get model(){return t().model},get simca(){return t().simca}});var ne=I(X,2),re=F(ne);Qd(re,{get calres(){return t().calres.simca},get pvres(){return t().pvres.simca},get ncomp(){return t().simca.ncomp}}),T(L,j)};H(W,L=>{t().pvres.simca&&t().calres.simca&&L(V)})}var Y=I(p,2),D=F(Y);{var S=L=>{var j=$v(),X=F(j);{var Q=re=>{var te=Xv();T(re,te)},ne=re=>{var te=Zv(),ae=Z(te);{var ye=ie=>{var oe=Qv();T(ie,oe)};H(ae,ie=>{t().model||ie(ye)})}var ue=I(ae,2);{var we=ie=>{var oe=Jv();T(ie,oe)};H(ue,ie=>{t().model&&!t().pvset&&ie(we)})}T(re,te)};H(X,re=>{t().calset?re(ne,!1):re(Q)})}T(L,j)},O=L=>{var j=me(),X=Z(j);{var Q=ne=>{var re=me(),te=Z(re);mn(te,()=>t().pvset.pca,ae=>{Yv(ae,Lr({markOutlier:a,showContributions:c},t))}),T(ne,re)};H(X,ne=>{t().pvres.simca!==null&&ne(Q)},!0)}T(L,j)};H(D,L=>{!t().pvres.simca||!t().calres.simca?L(S):L(O,!1)})}T(r,d),ge()}var r1=$("<!> <!>",1),n1=$('<p class="model-info svelte-1l40o0h"><span>Model file:</span> <span class="file-name svelte-1l40o0h"> </span><br> <span style="color:#a0a0a0;">PCA model:</span> </p> <!>',1),s1=$("<p><!></p>"),l1=$("<!> <!>",1);function Ua(r,e){he(e,!0);let t=K(e,"model",15),l=K(e,"simca",15),o=le(""),a=le("neutral"),c=le("");function v(A){try{const E=JSON.parse(A,la);if(!Object.keys(E).includes("pca","simca")||E.pca.class[0]!=="pcamodel")throw Error("The JSON file you selected does not contain SIMCA mdel.");if(!Object.keys(E.pca).includes("hash"))throw Error('you try to load model incompatible with this app version, create a new model or use <a href="/ddsimca-old/">old version</a> of the app.');Array.isArray(E.pca.v)&&(E.pca.v=Float64Array.from(E.pca.v)),E.pca.fileName=s(d),t(E.pca),l(E.simca),G(a,"success"),G(c,"")}catch(E){t(null),G(a,"error"),G(c,ee(E))}}function f(A){const E=new FileReader;E.onload=()=>{v(E.result)},E.readAsText(s(o))}function u(){G(o,""),t(null),G(a,"neutral"),G(c,"")}pe(()=>{s(o)===null?(t(null),G(a,"neutral"),G(c,"")):(G(a,"neutral"),G(c,""))});let d=y(()=>s(o)?s(o).name.replace(/\.[^/.]+$/,""):"");var m=l1(),h=Z(m);{var g=A=>{var E=r1(),N=Z(E);mn(N,()=>s(o),q=>{Ee(q,{children:(M,w)=>{ha(M,{id:"modelFile",acceptType:".json",message:"Select file with model",get file(){return s(o)},set file(P){G(o,ee(P))}})},$$slots:{default:!0}})});var C=I(N,2);{var k=q=>{Ee(q,{label:" ",children:(M,w)=>{at(M,{onclick:f,text:"Load"})},$$slots:{default:!0}})};H(C,q=>{s(o)&&q(k)})}T(A,E)},p=A=>{Ee(A,{children:(E,N)=>{var C=n1(),k=Z(C),q=I(F(k),2),M=F(q),w=I(q,4),P=I(k,2);nn(P,{onclick:u}),se(()=>{R(q,"title",t().fileName),de(M,t().fileName),de(w,` ${t().ncomp??""} PCs${(t().center?", centered":"")??""}${(t().scale?", scaled":"")??""}`)}),T(E,C)},$$slots:{default:!0}})};H(h,A=>{t()?A(p,!1):A(g)})}var _=I(h,2);{var b=A=>{Ee(A,{status:"error",children:(E,N)=>{var C=s1(),k=F(C);bt(k,()=>s(c),!1,!1),T(E,C)},$$slots:{default:!0}})};H(_,A=>{(s(a)==="error"||s(c))&&A(b)})}T(r,m),ge()}var o1=$('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">Target</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extremes</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Outliers</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Sensitivity</td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function a1(r,e){he(e,!0);var t=me(),l=Z(t);{var o=a=>{var c=o1(),v=I(F(c)),f=F(v),u=I(F(f)),d=F(u),m=I(f),h=I(F(m)),g=F(h),p=I(m),_=I(F(p)),b=F(_),A=I(p),E=I(F(A)),N=F(E);se(C=>{de(d,e.res.v[0].c.length),de(g,e.res.v[e.ncomp-1].cnum.extreme),de(b,e.res.v[e.ncomp-1].cnum.outliers),de(N,C)},[()=>e.res.stat.sensitivity[e.ncomp-1].toFixed(3)]),T(a,c)};H(l,a=>{e.res&&a(o)})}T(r,t),ge()}var i1=$("<!> <!>",1);function c1(r,e){he(e,!0);const t=(g,p=dt)=>{Ee(g,{label:"Selected",children:(_,b)=>{at(_,{onclick:()=>e.markOutlier(p()),text:"remove"})},$$slots:{default:!0}})},l=(g,p=dt)=>{Ee(g,{label:"Selected",children:(_,b)=>{var A=i1(),E=Z(A);at(E,{onclick:()=>e.showContributions(p()),text:"plot"});var N=I(E,2);at(N,{onclick:()=>e.markOutlier(p()),text:"remove"}),T(_,A)},$$slots:{default:!0}})},o={target:e.testres.pca},a={target:e.testset},c=y(()=>({target:e.testres.simca})),v={regular:Sr.regular,extreme:Sr.extreme,outlier:Sr.outlier},f=y(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Ml,buttons:l},distances:{label:"Distances",scope:"objects",component:Tl,buttons:l},extremes:{label:"Extremes",scope:"stats",component:Ya},sensitivity:{label:"Sensitivity",scope:"stats",component:os},scores:{label:"Scores",scope:"objects",component:Pl,buttons:t}})),u=ee({acceptance:Il(o),distances:Rl(o),extremes:Wa(["target"]),sensitivity:as(["target"]),scores:Ll(o)});let d=le(ee({acceptance:it(u.acceptance),distances:it(u.distances),extremes:it(u.extremes),sensitivity:it(u.sensitivity),scores:it(u.scores)}));pe(()=>{s(d).sensitivity.title="Sensitivity",s(d).sensitivity.statName="sensitivity"}),pe(()=>{const g=e.testres.pca.nrows,p=1-e.simca.alpha/100,b=1.96*Math.sqrt(g*p*(1-p))/g;s(d).sensitivity.ci=[p,b]}),pe(()=>{s(d).acceptance.ncomp=e.simca.ncomp,s(d).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(d).acceptance.limType=e.simca.limType,s(d).acceptance.alpha=e.simca.alpha,s(d).acceptance.gamma=e.simca.gamma}),pe(()=>{if(e.simca.limType){const p={target:e.testres.simca}[s(d).acceptance.resID].v[e.simca.ncomp-1];s(d).acceptance.colorByObj={classColmap:v,labels:[`regular: ${p.cnum.regular}`,`extreme: ${p.cnum.extreme}`,`outliers: ${p.cnum.outliers}`],values:p.c}}}),pe(()=>{s(d).scores.plotType!=="p"?(u.scores.comp1.hidden=!0,u.scores.showEllipse.hidden=!0,s(d).scores.showEllipse=!1):(u.scores.comp1.hidden=!1,u.scores.showEllipse.hidden=!1),s(d).scores.plotType==="l"||s(d).scores.plotType==="b"?(u.scores.colorBy.hidden=!0,s(d).scores.colorBy="none"):u.scores.colorBy.hidden=!1,s(d).scores.colorBy==="variable"?u.scores.colorByVar.hidden=!1:u.scores.colorByVar.hidden=!0,s(d).scores.colorBy==="groups"&&s(d).scores.plotType==="p"?u.scores.confEllipse.hidden=!1:(u.scores.confEllipse.hidden=!0,s(d).scores.confEllipse="none")});const m=y(()=>({res:o,classres:s(c),model:e.model,simca:e.simca,data:a,ncomp:e.simca.ncomp})),h={markOutlier:e.markOutlier,showContributions:e.showContributions};Sl(r,{get plots(){return s(f)},get controls(){return u},get props(){return s(m)},callbacks:h,get params(){return s(d)},set params(g){G(d,ee(g))}}),ge()}var u1=$('<div class="data-loader svelte-rpbnyb"><!></div>'),f1=$('<div class="outliers-pane svelte-rpbnyb"><!></div>'),d1=$('<div class="buttons"><!> <!></div>'),v1=$('<div class="model-stats svelte-rpbnyb"><!></div> <div class="result-stats svelte-rpbnyb"><!></div>',1),m1=$('<p class="svelte-rpbnyb"><strong>Step 1</strong></p> <p class="svelte-rpbnyb">Load previously trained DD-SIMCA model from file.</p>',1),h1=$(`<p class="svelte-rpbnyb"><strong>Step 2</strong></p> <p class="svelte-rpbnyb">Load testset set from CSV file. The requirements to the file are the same as for the
               training set. The testset may contain class labels for each row (you need to select this option in settings after selecting CSV file) but it is not necessary, as in any case the labels will be ignored and model will assume that all samples are from the target class.</p>`,1),g1=$(`<div class="help-text svelte-rpbnyb"><p class="svelte-rpbnyb">In this tab you can apply previously trained DD-SIMCA model to a dataset consisting of target class members (at least
            the app will assume this, you can of course provide any dataset). You can use it for testing performance
            of the model, or tune its parameters, if necessary.</p> <!></div>`),p1=$('<!> <div class="app-container svelte-rpbnyb"><div class="app-controls svelte-rpbnyb"><div class="model-loader svelte-rpbnyb"><!></div> <!> <!> <div class="simca-settings svelte-rpbnyb"><!> <!></div> <!></div> <div class="app-content svelte-rpbnyb"><!></div></div>',1);function b1(r,e){he(e,!0);let t=K(e,"s",15),l=le(-1),o=le(!1);function a(S){if(S<0||S>t().testres.pca.nrows-1)return;const O=t().testres.pca.objindices[S];O>=0&&!t().outliers.includes(O)&&(t().outliers.push(O),t(t().testres.simca=null,!0),t(t().testres.pca=null,!0))}function c(S){S<0||(G(l,ee(S)),G(o,!0))}function v(){G(o,!1),G(l,-1)}function f(){t(t().outliers=[],!0),t(t().testres.simca=null,!0),t(t().testres.pca=null,!0)}function u(){t().outliers.pop(),t(t().testres.simca=null,!0),t(t().testres.pca=null,!0)}jn(()=>{t().testset===null&&(t(t().outliers=[],!0),t(t().testres.simca=null,!0),t(t().testres.pca=null,!0)),t().model===null&&(t(t().outliers=[],!0),t(t().simca=null,!0),t(t().testres.simca=null,!0),t(t().testres.pca=null,!0),t(t().testset=null,!0))}),pe(()=>{t().model===null&&(t(t().outliers=[],!0),t(t().testres.simca=null,!0),t(t().testres.pca=null,!0),t(t().testset=null,!0))}),pe(()=>{t().testset===null&&(t(t().outliers=[],!0),t(t().testres.simca=null,!0),t(t().testres.pca=null,!0))}),pe(()=>{t().testres.pca&&t().simca&&t(t().testres.simca=il(t().testres.pca,Nt(()=>t().simca.limType),t().simca.eCrit,t().simca.oCrit),!0)});var d=p1(),m=Z(d);{var h=S=>{Cl(S,{get dataset(){return t().testset},get model(){return t().model},get ncomp(){return t().simca.ncomp},get outliers(){return t().outliers},get selected(){return s(l)},closeModal:v})};H(m,S=>{s(o)&&S(h)})}var g=I(m,2),p=F(g),_=F(p),b=F(_);Ua(b,{get model(){return t().model},set model(S){t(t().model=S,!0)},get simca(){return t().simca},set simca(S){t(t().simca=S,!0)}});var A=I(_,2);{var E=S=>{var O=u1(),L=F(O);fl(L,{get outliers(){return t().outliers},get WASM(){return e.WASM},get model(){return t().model},className:"Class",get dataset(){return t().testset},set dataset(j){t(t().testset=j,!0)},get resobj(){return t().testres.pca},set resobj(j){t(t().testres.pca=j,!0)}}),T(S,O)};H(A,S=>{t().model&&S(E)})}var N=I(A,2);{var C=S=>{var O=f1(),L=F(O);dl(L,{get outliers(){return t().outliers},get dataset(){return t().testset},resetOutliers:f,undoOutliers:u}),T(S,O)};H(N,S=>{t().outliers&&t().outliers.length>0&&S(C)})}var k=I(N,2),q=F(k);{var M=S=>{Nl(S,{get model(){return t().model},get className(){return t().className},get simca(){return t().simca},set simca(O){t(t().simca=O,!0)}})};H(q,S=>{t().model&&t().testres.pca&&S(M)})}var w=I(q,2);{var P=S=>{Ee(S,{label:"Download",children:(O,L)=>{var j=d1(),X=F(j);at(X,{onclick:()=>rs(t().model,t().simca,t().testres,t().testset,"target",t().outliers),text:"Res"});var Q=I(X,2);at(Q,{onclick:()=>cl(t().model,t().simca),text:"Model"}),T(O,j)},$$slots:{default:!0}})};H(w,S=>{t().testres.simca&&S(P)})}var U=I(k,2);{var z=S=>{var O=v1(),L=Z(O),j=F(L);Al(j,{get model(){return t().model},get simca(){return t().simca}});var X=I(L,2),Q=F(X);a1(Q,{get res(){return t().testres.simca},get ncomp(){return t().simca.ncomp}}),T(S,O)};H(U,S=>{t().testres.simca&&S(z)})}var W=I(p,2),V=F(W);{var Y=S=>{var O=g1(),L=I(F(O),2);{var j=Q=>{var ne=m1();T(Q,ne)},X=Q=>{var ne=me(),re=Z(ne);{var te=ae=>{var ye=h1();T(ae,ye)};H(re,ae=>{t().testset||ae(te)})}T(Q,ne)};H(L,Q=>{t().model?Q(X,!1):Q(j)})}T(S,O)},D=S=>{var O=me(),L=Z(O);mn(L,()=>t().testres.pca,j=>{c1(j,Lr({markOutlier:a,showContributions:c},t))}),T(S,O)};H(V,S=>{t().testres.simca?S(D,!1):S(Y)})}T(r,d),ge()}var _1=$('<table class="svelte-kg0b31"><thead><tr class="svelte-kg0b31"><th class="svelte-kg0b31"></th><th class="svelte-kg0b31">New</th></tr></thead><tbody><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Objects</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">In</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Out</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Aliens</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Extrenal</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Specificity</td><td class="svelte-kg0b31"> </td></tr><tr class="svelte-kg0b31"><td class="label svelte-kg0b31">Selectivity</td><td class="svelte-kg0b31"> </td></tr></tbody></table>');function w1(r,e){he(e,!0);var t=me(),l=Z(t);{var o=a=>{var c=_1(),v=I(F(c)),f=F(v),u=I(F(f)),d=F(u),m=I(f),h=I(F(m)),g=F(h),p=I(m),_=I(F(p)),b=F(_),A=I(p),E=I(F(A)),N=F(E),C=I(A),k=I(F(C)),q=F(k),M=I(C),w=I(F(M)),P=F(w),U=I(M),z=I(F(U)),W=F(z);se((V,Y)=>{de(d,e.res.v[0].c.length),de(g,e.res.v[e.ncomp-1].dnum.in),de(b,e.res.v[e.ncomp-1].dnum.out),de(N,e.res.v[e.ncomp-1].anum.aliens),de(q,e.res.v[e.ncomp-1].anum.external),de(P,V),de(W,Y)},[()=>e.res.stat.specificity[e.ncomp-1].toFixed(3),()=>e.res.stat.selectivity[e.ncomp-1].toFixed(3)]),T(a,c)};H(l,a=>{e.res&&a(o)})}T(r,t),ge()}var y1=$("<!> <!> <!>",1),x1=$("<!> <!> <!>",1);function k1(r,e){he(e,!0);const t="#e0e0e0",l="Number of aliens (expected)",o="Number of aliens (observed)",a="plot-aliens";function c(w){const P=xe.zeros(w+1),U=xe.zeros(w+1),z=xe.zeros(w+1),W=xe.zeros(w+1);for(let V=1;V<w;V++){const Y=V/w,D=2*Math.sqrt(V*(1-Y));P.v[V]=V,z.v[V]=V,U.v[V]=V-D,W.v[V]=V+D}return P.v[w]=w,z.v[w]=w,U.v[w]=w,W.v[w]=w,{xStart:P,xEnd:z,yStart:U,yEnd:W}}function v(w,P,U){const z=w.v[U-1],W=z.anum.aliens,V=w.nrows,Y=xe.zeros(W);for(let D=1;D<=W;D++){const S=D/W,O=Xn(S),L=z.m*Math.pow(z.Sz*O+z.Mz,1/z.hz);let j=0;for(let X=0;X<V;X++)z.a[X]==="alien"&&z.f[X]<L&&(j+=1);Y.v[D-1]=j}return Y}let f=y(()=>e.props&&e.props.classres?e.props.classres:null),u=y(()=>e.props&&e.props.simca?e.props.simca:null),d=y(()=>e.props&&e.props.ncomp?e.props.ncomp:null),m=y(()=>e.params.resID!=="both"?[e.params.resID]:Object.keys(s(f))),h=y(()=>e.params.legendPosition?e.params.legendPosition:"bottomright"),g=y(()=>s(m)?s(m).map(w=>({id:w,label:w,point:{marker:1,lineColor:zt[w],faceColor:Fr[w],markerSize:.85,lineWidth:1.5}})):null),p=y(()=>s(f)&&s(m)?s(m).reduce((w,P)=>(w[P]=xe.seq(1,s(f)[P].v[s(d)-1].anum.aliens),w),{}):null),_=y(()=>s(f)&&s(m)&&s(d)?s(m).reduce((w,P)=>(w[P]=v(s(f)[P],s(u),s(d)),w),{}):null),b=y(()=>s(m)?s(m).reduce((w,P)=>Math.max(w,s(p)[P].length),0):1),A=y(()=>s(b)>1?c(s(b)):null),E=y(()=>s(p)?[-1,s(b)+2]:[0,1]),N=y(()=>s(p)?[-1,s(b)+2]:[0,1]),C=y(()=>s(d)?`Aliens (A = ${s(d)})`:"Aliens");var k=me(),q=Z(k);{var M=w=>{ir(w,{get title(){return s(C)},xLabel:l,yLabel:o,get limX(){return s(E)},get limY(){return s(N)},fileName:a,whole:!0,children:(P,U)=>{var z=x1(),W=Z(z);{var V=O=>{var L=y1(),j=Z(L);Jt(j,Lr(()=>s(A),{lineColor:t}));var X=I(j,2);Ut(X,{get xValues(){return s(A).xStart},get yValues(){return s(A).yStart},lineColor:t});var Q=I(X,2);Ut(Q,{get xValues(){return s(A).xEnd},get yValues(){return s(A).yEnd},lineColor:t}),T(O,L)};H(W,O=>{s(A)&&O(V)})}var Y=I(W,2);Ie(Y,17,()=>s(m),je,(O,L)=>{Zt(O,{get xValues(){return s(p)[s(L)]},get yValues(){return s(_)[s(L)]},plotType:"p",showLabels:!1,get faceColor(){return Fr[s(L)]},get mainColor(){return zt[s(L)]},lineWidth:1.5})});var D=I(Y,2);{var S=O=>{sn(O,{get items(){return s(g)},get position(){return s(h)}})};H(D,O=>{s(g)&&s(g).length>0&&O(S)})}T(P,z)},$$slots:{default:!0}})};H(q,w=>{s(f)&&w(M)})}T(r,k),ge()}var E1=$("<!> <!> <!> <!> <!>",1);function C1(r,e){he(e,!0);const t="1 – selectivity, β",l="Expected sensitivity, 1 – ɑ",o="plot-selectivity-integral",a=[-.05,1.05],c=[-.05,1.05],v="bottomright",f=y(()=>e.props&&e.props.classres?e.props.classres:null),u=y(()=>e.props&&e.props.simca?e.props.simca:null),d=y(()=>s(f)?Object.keys(s(f))[0]:null),m=141;function h(z){const W=xe.zeros(m),V=xe.zeros(m);W.v[0]=1,V.v[0]=1;let Y=1,D=0;for(let S=.001;S<.1;S=S+.002){const O=z(S);W.v[Y]=O,V.v[Y]=1-S,D=D+O*.002,Y=Y+1}for(let S=.1;S<.9;S=S+.02){const O=z(S);W.v[Y]=O,V.v[Y]=1-S,D=D+O*.02,Y=Y+1}for(let S=.9;S<1;S=S+.002){const O=z(S);W.v[Y]=O,V.v[Y]=1-S,D=D+O*.002,Y=Y+1}return W.v[Y]=0,V.v[Y]=0,{x:W,y:V,auc:1-D}}let g=le(void 0),p=le(void 0),_=le(void 0);pe(()=>{(s(p)!==s(u).ncomp||s(_)!==s(u).limType)&&(G(p,ee(s(u).ncomp)),G(_,ee(s(u).limType)),G(g,ee(s(f)[s(d)].v[s(u).ncomp-1])))});const b=y(()=>s(g)?1/(s(g).k+s(g).s):null),A=y(()=>s(g)?1/s(g).Sz:null);function E(z){if(!s(g))return null;const V=Bt(1-z,s(g).k)/s(g).f0;return Kn((Math.pow(V*s(b),s(g).hz)-s(g).Mz)*s(A))}const N=y(()=>s(u).alpha/100),C=y(()=>E(s(N))),k=y(()=>h(E));let q=y(()=>s(d)?[s(d)].map(z=>({id:z,label:z,point:{marker:1,lineColor:zt[z],faceColor:Fr[z],markerSize:.85,lineWidth:1.5}})):null),M=y(()=>s(u).ncomp?`Selecitivity (A = ${s(u).ncomp}, AUC = ${s(k).auc.toFixed(4)})`:"Selectivity");var w=me(),P=Z(w);{var U=z=>{ir(z,{get title(){return s(M)},xLabel:t,yLabel:l,limX:a,limY:c,fileName:o,children:(W,V)=>{var Y=E1(),D=Z(Y);Jt(D,{xStart:[0],xEnd:[1],yStart:[0],yEnd:[1],lineColor:"#a0a0a0",lineType:3});var S=I(D,2);Zt(S,{get xValues(){return s(k).x},get yValues(){return s(k).y},plotType:"l",showLabels:!1,lineWidth:1.5});var O=I(S,2);const L=y(()=>[a[0]]),j=y(()=>[a[1]]),X=y(()=>[1-s(N)]),Q=y(()=>[1-s(N)]);Jt(O,{get xStart(){return s(L)},get xEnd(){return s(j)},get yStart(){return s(X)},get yEnd(){return s(Q)},lineColor:"#a0a0a0"});var ne=I(O,2);const re=y(()=>[s(C)]),te=y(()=>[1-s(N)]);qa(ne,{get xValues(){return s(re)},get yValues(){return s(te)},lineColor:"#a0a0a0",lineWidth:2,get faceColor(){return vt.PRIMARY}});var ae=I(ne,2);{var ye=ue=>{sn(ue,{get items(){return s(q)},position:v})};H(ae,ue=>{s(q)&&s(q).length>0&&ue(ye)})}T(W,Y)},$$slots:{default:!0}})};H(P,z=>{s(k)&&z(U)})}T(r,w),ge()}function A1(r,e){he(e,!0);const t={alt:e.altres.pca},l={alt:e.altset},o=y(()=>({alt:e.altres.simca})),a={alien:Sr.aliens,external:Sr.external};let c=null;if(e.altres.simca.classNames&&e.altres.simca.classNames.length>1){const h=e.altres.simca.classNames?e.altres.simca.classNames.length:0,g=h>0?yl(h):null;c=e.altres.simca.classNames.reduce((p,_,b)=>(p[_]=g[b],p),{})}const v=y(()=>({acceptance:{label:"Acceptance",scope:"objects",component:Ml},distances:{label:"Distances",scope:"objects",component:Tl},aliens:{label:"Aliens",scope:"stat",component:k1},specificity:{label:"Specificity",scope:"stat",component:os},selectivity:{label:"Selectivity (vs PCs)",scope:"stat",component:os},selectivityInt:{label:"Selecitivity (integral)",scope:"stat",component:C1},scores:{label:"Scores",scope:"objects",component:Pl}})),f=ee({acceptance:Il(t),distances:Rl(t),aliens:Dv(["alt"]),specificity:as(["alt"]),selectivity:as(["alt"]),selectivityInt:Ov(["alt"]),scores:Ll(t)});let u=le(ee({acceptance:it(f.acceptance),distances:it(f.distances),aliens:it(f.aliens),specificity:it(f.specificity),selectivity:it(f.selectivity),selectivityInt:it(f.selectivityInt),scores:it(f.scores)}));pe(()=>{s(u).specificity.title="Specificity",s(u).specificity.statName="specificity"}),pe(()=>{s(u).selectivity.title="Selectivity",s(u).selectivity.statName="selectivity"}),pe(()=>{s(u).acceptance.ncomp=e.simca.ncomp,s(u).acceptance.title=`Acceptance (A = ${e.simca.ncomp})`,s(u).acceptance.limType=e.simca.limType,s(u).acceptance.alpha=e.simca.alpha,s(u).acceptance.gamma=e.simca.gamma}),pe(()=>{s(u)&&s(u).acceptance&&(f.acceptance.colorBy.hidden=c===null)}),pe(()=>{if(e.simca.limType){const g={alt:e.altres.simca}[s(u).acceptance.resID].v[e.simca.ncomp-1];s(u).acceptance.colorBy==="classes"?s(u).acceptance.colorByObj={classColmap:c,labels:e.altres.simca.classNames,values:e.altres.simca.classes}:s(u).acceptance.colorByObj={classColmap:a,labels:[`aliens: ${g.anum.aliens}`,`external: ${g.anum.external}`],values:g.a}}}),pe(()=>{s(u).scores.plotType!=="p"?(f.scores.comp1.hidden=!0,f.scores.showEllipse.hidden=!0,s(u).scores.showEllipse=!1):(f.scores.comp1.hidden=!1,f.scores.showEllipse.hidden=!1),s(u).scores.plotType==="l"||s(u).scores.plotType==="b"?(f.scores.colorBy.hidden=!0,s(u).scores.colorBy="none"):f.scores.colorBy.hidden=!1,s(u).scores.colorBy==="variable"?f.scores.colorByVar.hidden=!1:f.scores.colorByVar.hidden=!0,s(u).scores.colorBy==="groups"&&s(u).scores.plotType==="p"?f.scores.confEllipse.hidden=!1:(f.scores.confEllipse.hidden=!0,s(u).scores.confEllipse="none")});const d=y(()=>({res:t,classres:s(o),model:e.model,simca:e.simca,data:l,ncomp:e.simca.ncomp})),m={markOutlier:e.markOutlier,showContributions:e.showContributions};Sl(r,{get plots(){return s(v)},get controls(){return f},get props(){return s(d)},callbacks:m,get params(){return s(u)},set params(h){G(u,ee(h))}}),ge()}var N1=$('<div class="data-loader svelte-rpbnyb"><!></div>'),S1=$('<div class="outliers-pane svelte-rpbnyb"><!></div>'),M1=$('<div class="buttons"><!> <!></div>'),T1=$('<div class="model-stats svelte-rpbnyb"><!></div> <div class="result-stats svelte-rpbnyb"><!></div>',1),P1=$('<p class="svelte-rpbnyb"><strong>Step 1</strong></p> <p class="svelte-rpbnyb">Load previously trained DD-SIMCA model from file.</p>',1),I1=$(`<p class="svelte-rpbnyb"><strong>Step 2</strong></p> <p class="svelte-rpbnyb">Load data set from CSV file. The requirements to the file are the same as for the
               training set. The data may contain class labels for each row (you need to select this option in settings after selecting CSV file) but it is not necessary, as in any case the labels will be ignored and model will assume that all samples are from non-target classes.</p>`,1),R1=$('<div class="help-text svelte-rpbnyb"><p class="svelte-rpbnyb">In this tab you can apply previously trained DD-SIMCA model to a dataset consisting of non-target (alternative) class members (at least the app will assume this, you can of course provide any dataset). You can use it for testing performance of the model on the alternative classes, or tune its parameters, if necessary.</p> <!></div>'),L1=$('<!> <div class="app-container svelte-rpbnyb"><div class="app-controls svelte-rpbnyb"><div class="model-loader svelte-rpbnyb"><!></div> <!> <!> <div class="simca-settings svelte-rpbnyb"><!> <!></div> <!></div> <div class="app-content svelte-rpbnyb"><!></div></div>',1);function q1(r,e){he(e,!0);let t=K(e,"s",15),l=le(-1),o=le(!1);function a(D){if(D<0||D>t().altres.pca.nrows-1)return;const S=t().altres.pca.objindices[D];S>=0&&!t().outliers.includes(S)&&(t().outliers.push(S),t(t().altres.simca=null,!0),t(t().altres.pca=null,!0))}function c(D){D<0||(G(l,ee(D)),G(o,!0))}function v(){G(o,!1),G(l,-1)}function f(){t(t().outliers=[],!0),t(t().altres.simca=null,!0),t(t().altres.pca=null,!0)}jn(()=>{t().altset===null&&(t(t().outliers=[],!0),t(t().altres.simca=null,!0),t(t().altres.pca=null,!0)),t().model===null&&(t(t().outliers=[],!0),t(t().simca=null,!0),t(t().altres.simca=null,!0),t(t().altres.pca=null,!0),t(t().altset=null,!0))}),pe(()=>{t().model===null&&(t(t().outliers=[],!0),t(t().altres.simca=null,!0),t(t().altres.pca=null,!0),t(t().altset=null,!0))}),pe(()=>{t().altset===null&&(t(t().outliers=[],!0),t(t().altres.simca=null,!0),t(t().altres.pca=null,!0))}),pe(()=>{t().altres.pca&&t().simca&&t(t().altres.simca=au(t().altres.pca,Nt(()=>t().simca.limType),Nt(()=>t().simca.Nf),t().simca.eCrit,t().simca.oCrit),!0)});var u=L1(),d=Z(u);{var m=D=>{Cl(D,{get dataset(){return t().altset},get model(){return t().model},get ncomp(){return t().simca.ncomp},get outliers(){return t().outliers},get selected(){return s(l)},closeModal:v})};H(d,D=>{s(o)&&D(m)})}var h=I(d,2),g=F(h),p=F(g),_=F(p);Ua(_,{get model(){return t().model},set model(D){t(t().model=D,!0)},get simca(){return t().simca},set simca(D){t(t().simca=D,!0)}});var b=I(p,2);{var A=D=>{var S=N1(),O=F(S);fl(O,{get outliers(){return t().outliers},get WASM(){return e.WASM},get model(){return t().model},className:"Class",get dataset(){return t().altset},set dataset(L){t(t().altset=L,!0)},get resobj(){return t().altres.pca},set resobj(L){t(t().altres.pca=L,!0)}}),T(D,S)};H(b,D=>{t().model&&D(A)})}var E=I(b,2);{var N=D=>{var S=S1(),O=F(S);dl(O,{get outliers(){return t().outliers},get dataset(){return t().altset},resetOutliers:f}),T(D,S)};H(E,D=>{t().outliers&&t().outliers.length>0&&D(N)})}var C=I(E,2),k=F(C);{var q=D=>{Nl(D,{get model(){return t().model},get className(){return t().className},isAlt:!0,get simca(){return t().simca},set simca(S){t(t().simca=S,!0)}})};H(k,D=>{t().model&&t().altres.pca&&D(q)})}var M=I(k,2);{var w=D=>{Ee(D,{label:"Download",children:(S,O)=>{var L=M1(),j=F(L);at(j,{onclick:()=>rs(t().model,t().simca,t().altres,t().altset,"new",t().outliers),text:"Res"});var X=I(j,2);at(X,{onclick:()=>cl(t().model,t().simca),text:"Model"}),T(S,L)},$$slots:{default:!0}})};H(M,D=>{t().altres.simca&&D(w)})}var P=I(C,2);{var U=D=>{var S=T1(),O=Z(S),L=F(O);Al(L,{get model(){return t().model},get simca(){return t().simca},isAlt:!0});var j=I(O,2),X=F(j);w1(X,{get res(){return t().altres.simca},get ncomp(){return t().simca.ncomp}}),T(D,S)};H(P,D=>{t().altres.simca&&D(U)})}var z=I(g,2),W=F(z);{var V=D=>{var S=R1(),O=I(F(S),2);{var L=X=>{var Q=P1();T(X,Q)},j=X=>{var Q=me(),ne=Z(Q);{var re=te=>{var ae=I1();T(te,ae)};H(ne,te=>{t().altset||te(re)})}T(X,Q)};H(O,X=>{t().model?X(j,!1):X(L)})}T(D,S)},Y=D=>{var S=me(),O=Z(S);mn(O,()=>t().altres.pca,L=>{A1(L,Lr({markOutlier:a,showContributions:c},t))}),T(D,S)};H(W,D=>{t().altres.simca?D(Y,!1):D(V)})}T(r,u),ge()}function Ha(r,e){G(e,!0)}function z1(r,e,t){window.localStorage.removeItem(e.appID+"-blocked"),window.localStorage.removeItem(e.appID),G(t,ee(e.initSession()))}function j1(r,e,t){const l=al(new Date),o=e.appID+"-session-"+l+".json";s(t).date=l;const a=JSON.stringify(s(t),ol),c=new Blob([a],{type:"text/json"}),v=window.URL.createObjectURL(c),f=document.createElement("a");f.setAttribute("href",v),f.setAttribute("download",o),f.click()}var F1=$('<sup style="color:red">β</sup>'),O1=$('<li class="nav-item svelte-1946064"><button class="svelte-1946064"> </button></li>'),D1=$('<div class="tab-content svelte-1946064"><!></div>'),V1=$('<div class="info-container svelte-1946064"><!></div>'),B1=$('<div class="page svelte-1946064"><header class="page-header svelte-1946064"><div class="header-group svelte-1946064"><img class="logo svelte-1946064" src="logo.svg"> <h1 class="svelte-1946064"> <!></h1> <p class="svelte-1946064"> </p></div> <ul class="nav svelte-1946064"></ul></header> <main class="svelte-1946064"></main> <footer class="svelte-1946064"><div class="session svelte-1946064"><span class="session-message svelte-1946064"> </span> <label title="load session from file" class="upload-button svelte-1946064"><input type="file" class="svelte-1946064">⬆</label> <button title="download session as a file" class="download-button svelte-1946064">⬇</button> <button title="reset all sessions" class="clear-button svelte-1946064">✖</button></div> <div class="info svelte-1946064"><button class="button-info svelte-1946064">info</button> <!></div></footer> <!></div>');function Y1(r,e){he(e,!0);let t=K(e,"tabs",19,()=>[]),l=K(e,"isBeta",3,!1),o=le(!1),a=le(void 0),c=le("Current session "),v=le(!1);function f(){G(o,!1)}function u(A){s(a).tab=A}function d(){s(a).date=al(new Date),window.localStorage.setItem(e.appID,JSON.stringify(s(a),ol)),window.localStorage.removeItem(e.appID+"-blocked")}function m(){if(window.localStorage.getItem(e.appID+"-blocked")){G(a,ee(e.initSession()));return}h(window.localStorage.getItem(e.appID)),window.localStorage.setItem(e.appID+"-blocked","yes"),G(c,"Last session is restored "),G(v,!0),setTimeout(()=>{G(c,"Current session "),G(v,!1)},2e3)}function h(A){if(!A||A==="undefined"){G(a,ee(e.initSession()));return}const E=JSON.parse(A,la);G(a,ee(e.checkSession(E)?E:e.initSession(e.appID)))}function g(A){e.resetSession(s(a));const E=new FileReader;E.onload=()=>{h(E.result),A.target.value=""},E.readAsText(A.target.files[0])}Cc(()=>{d()}),Lo(()=>{m()});var p=me();Er("beforeunload",qn,d);var _=Z(p);{var b=A=>{var E=B1(),N=F(E),C=F(N),k=F(C),q=I(k,2),M=F(q),w=I(M);{var P=ue=>{var we=F1();T(ue,we)};H(w,ue=>{l()&&ue(P)})}var U=I(q,2),z=F(U),W=I(C,2);Ie(W,21,t,je,(ue,we,ie)=>{var oe=O1(),ve=F(oe);ve.__click=()=>u(ie),ve.__keydown=()=>u(ie);var fe=F(ve);se(()=>{St(oe,"selected",s(a).tab===ie),de(fe,s(we).name)}),T(ue,oe)});var V=I(N,2);Ie(V,21,t,je,(ue,we,ie)=>{var oe=D1(),ve=F(oe);Os(ve,()=>s(we).component,(fe,Ae)=>{Ae(fe,{get WASM(){return e.WASM},get s(){return s(a)[s(we).label]}})}),se(()=>St(oe,"hidden",s(a).tab!==ie)),T(ue,oe)});var Y=I(V,2),D=F(Y),S=F(D),O=F(S),L=I(S,2),j=F(L);j.__change=g;var X=I(L,2);X.__click=[j1,e,a];var Q=I(X,2);Q.__click=[z1,e,a];var ne=I(D,2),re=F(ne);re.__click=[Ha,o],re.__keydown=[Ha,o];var te=I(re,2);Rr(te,()=>e.footer);var ae=I(Y,2);{var ye=ue=>{ja(ue,{closeModal:f,children:(we,ie)=>{var oe=V1(),ve=F(oe);Rr(ve,()=>e.info),T(we,oe)},$$slots:{default:!0}})};H(ae,ue=>{s(o)&&ue(ye)})}se(()=>{R(k,"alt",e.appShortTitle),de(M,e.appTitle),de(z,e.appSlogan),St(D,"no-buttons",s(v)),de(O,s(c))}),T(A,E)};H(_,A=>{s(a)&&A(b)})}T(r,p),ge()}$e(["click","keydown","change"]);const $1="modulepreload",em=function(r){return"/"+r},tm={},W1=function(e,t,l){let o=Promise.resolve();function a(c){const v=new Event("vite:preloadError",{cancelable:!0});if(v.payload=c,window.dispatchEvent(v),!v.defaultPrevented)throw c}return o.then(c=>{for(const v of c||[])v.status==="rejected"&&a(v.reason);return e().catch(a)})};var U1=(()=>{var r=Se&&Se.tagName.toUpperCase()==="SCRIPT"&&Se.src||new URL("ddsimca.js",document.baseURI).href;return async function(e={}){var t,l=e,o,a,c=new Promise((B,J)=>{o=B,a=J}),v=typeof window=="object",f=typeof WorkerGlobalScope<"u",u=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";if(u){const{createRequire:B}=await W1(()=>Promise.resolve().then(()=>X1),void 0);let J=Se&&Se.tagName.toUpperCase()==="SCRIPT"&&Se.src||new URL("ddsimca.js",document.baseURI).href;J.startsWith("data:")&&(J="/");var d=B(J)}var m=Object.assign({},l),h=(B,J)=>{throw J},g="";function p(B){return l.locateFile?l.locateFile(B,g):g+B}var _,b;if(u){var A=d("fs"),E=d("path");(Se&&Se.tagName.toUpperCase()==="SCRIPT"&&Se.src||new URL("ddsimca.js",document.baseURI).href).startsWith("data:")||(g=E.dirname(d("url").fileURLToPath(Se&&Se.tagName.toUpperCase()==="SCRIPT"&&Se.src||new URL("ddsimca.js",document.baseURI).href))+"/"),b=B=>{B=ue(B)?new URL(B):E.normalize(B);var J=A.readFileSync(B);return J},_=(B,J=!0)=>(B=ue(B)?new URL(B):E.normalize(B),new Promise((ce,be)=>{A.readFile(B,J?void 0:"utf8",(Xe,Qe)=>{Xe?be(Xe):ce(J?Qe.buffer:Qe)})})),!l.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),h=(B,J)=>{throw process.exitCode=B,J}}else(v||f)&&(f?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),r&&(g=r),g.startsWith("blob:")?g="":g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1),f&&(b=B=>{var J=new XMLHttpRequest;return J.open("GET",B,!1),J.responseType="arraybuffer",J.send(null),new Uint8Array(J.response)}),_=B=>ue(B)?new Promise((J,ce)=>{var be=new XMLHttpRequest;be.open("GET",B,!0),be.responseType="arraybuffer",be.onload=()=>{if(be.status==200||be.status==0&&be.response){J(be.response);return}ce(be.status)},be.onerror=ce,be.send(null)}):fetch(B,{credentials:"same-origin"}).then(J=>J.ok?J.arrayBuffer():Promise.reject(new Error(J.status+" : "+J.url))));l.print||console.log.bind(console);var N=l.printErr||console.error.bind(console);Object.assign(l,m),m=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram;var C=l.wasmBinary,k,q=!1,M,w,P;function U(){var B=k.buffer;l.HEAP8=w=new Int8Array(B),l.HEAP16=new Int16Array(B),l.HEAPU8=P=new Uint8Array(B),l.HEAPU16=new Uint16Array(B),l.HEAP32=new Int32Array(B),l.HEAPU32=new Uint32Array(B),l.HEAPF32=new Float32Array(B),l.HEAPF64=new Float64Array(B)}var z=[],W=[],V=[];function Y(){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)O(l.preRun.shift());mt(z)}function D(){mt(W)}function S(){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)j(l.postRun.shift());mt(V)}function O(B){z.unshift(B)}function L(B){W.unshift(B)}function j(B){V.unshift(B)}var X=0,Q=null;function ne(B){var J;X++,(J=l.monitorRunDependencies)==null||J.call(l,X)}function re(B){var ce;if(X--,(ce=l.monitorRunDependencies)==null||ce.call(l,X),X==0&&Q){var J=Q;Q=null,J()}}function te(B){var ce;(ce=l.onAbort)==null||ce.call(l,B),B="Aborted("+B+")",N(B),q=!0,B+=". Build with -sASSERTIONS for more info.";var J=new WebAssembly.RuntimeError(B);throw a(J),J}var ae="data:application/octet-stream;base64,",ye=B=>B.startsWith(ae),ue=B=>B.startsWith("file://");function we(){if(l.locateFile){var B="pca_wasm.wasm";return ye(B)?B:p(B)}return new URL("/ddsimca/ddsimca.wasm",Se&&Se.tagName.toUpperCase()==="SCRIPT"&&Se.src||new URL("ddsimca.js",document.baseURI).href).href}var ie;function oe(B){if(B==ie&&C)return new Uint8Array(C);if(b)return b(B);throw"both async and sync fetching of the wasm failed"}function ve(B){return C?Promise.resolve().then(()=>oe(B)):_(B).then(J=>new Uint8Array(J),()=>oe(B))}function fe(B,J,ce){return ve(B).then(be=>WebAssembly.instantiate(be,J)).then(ce,be=>{N(`failed to asynchronously prepare wasm: ${be}`),te(be)})}function Ae(B,J,ce,be){return!B&&typeof WebAssembly.instantiateStreaming=="function"&&!ye(J)&&!ue(J)&&!u&&typeof fetch=="function"?fetch(J,{credentials:"same-origin"}).then(Xe=>{var Qe=WebAssembly.instantiateStreaming(Xe,ce);return Qe.then(be,function(Ve){return N(`wasm streaming compile failed: ${Ve}`),N("falling back to ArrayBuffer instantiation"),fe(J,ce,be)})}):fe(J,ce,be)}function Ue(){return{a:br}}function De(){var B=Ue();function J(be,Xe){return qe=be.exports,k=qe.h,U(),L(qe.i),re(),qe}ne();function ce(be){J(be.instance)}if(l.instantiateWasm)try{return l.instantiateWasm(B,J)}catch(be){N(`Module.instantiateWasm callback failed with error: ${be}`),a(be)}return ie??(ie=we()),Ae(C,ie,B,ce).catch(a),{}}class Le{constructor(J){Dr(this,"name","ExitStatus");this.message=`Program terminated with exit(${J})`,this.status=J}}var mt=B=>{for(;B.length>0;)B.shift()(l)},pr=l.noExitRuntime||!0,ut=B=>Ga(B),_t=()=>Xa(),rt=()=>{te("")},$t=(B,J,ce)=>P.copyWithin(B,J,J+ce),En=0,us=()=>{pr=!1,En=0},cr={},fs=B=>{if(B instanceof Le||B=="unwind")return M;h(1,B)},ds=()=>pr||En>0,vs=B=>{var J;M=B,ds()||((J=l.onExit)==null||J.call(l,B),q=!0),h(B,new Le(B))},ql=(B,J)=>{M=B,vs(B)},zl=ql,Ce=()=>{if(!ds())try{zl(M)}catch(B){fs(B)}},Pe=B=>{if(!q)try{B(),Ce()}catch(J){fs(J)}},Te=()=>performance.now(),lt=(B,J)=>{if(cr[B]&&(clearTimeout(cr[B].id),delete cr[B]),!J)return 0;var ce=setTimeout(()=>{delete cr[B],Pe(()=>ms(B,Te()))},J);return cr[B]={id:ce,timeout_ms:J},0},wt=()=>Date.now(),er=()=>2147483648,Tt=(B,J)=>Math.ceil(B/J)*J,Pt=B=>{var J=k.buffer,ce=(B-J.byteLength+65535)/65536|0;try{return k.grow(ce),U(),1}catch{}},He=B=>{var J=P.length;B>>>=0;var ce=er();if(B>ce)return!1;for(var be=1;be<=4;be*=2){var Xe=J*(1+.2/be);Xe=Math.min(Xe,B+100663296);var Qe=Math.min(ce,Tt(Math.max(B,Xe),65536)),Ve=Pt(Qe);if(Ve)return!0}return!1},Re=B=>{var J=l["_"+B];return J},gt=(B,J)=>{w.set(B,J)},ft=B=>{for(var J=0,ce=0;ce<B.length;++ce){var be=B.charCodeAt(ce);be<=127?J++:be<=2047?J+=2:be>=55296&&be<=57343?(J+=4,++ce):J+=3}return J},ot=(B,J,ce,be)=>{if(!(be>0))return 0;for(var Xe=ce,Qe=ce+be-1,Ve=0;Ve<B.length;++Ve){var Be=B.charCodeAt(Ve);if(Be>=55296&&Be<=57343){var It=B.charCodeAt(++Ve);Be=65536+((Be&1023)<<10)|It&1023}if(Be<=127){if(ce>=Qe)break;J[ce++]=Be}else if(Be<=2047){if(ce+1>=Qe)break;J[ce++]=192|Be>>6,J[ce++]=128|Be&63}else if(Be<=65535){if(ce+2>=Qe)break;J[ce++]=224|Be>>12,J[ce++]=128|Be>>6&63,J[ce++]=128|Be&63}else{if(ce+3>=Qe)break;J[ce++]=240|Be>>18,J[ce++]=128|Be>>12&63,J[ce++]=128|Be>>6&63,J[ce++]=128|Be&63}}return J[ce]=0,ce-Xe},Je=(B,J,ce)=>ot(B,P,J,ce),jt=B=>Ka(B),Or=B=>{var J=ft(B)+1,ce=jt(J);return Je(B,ce,J),ce},Fe=typeof TextDecoder<"u"?new TextDecoder:void 0,ke=(B,J=0,ce=NaN)=>{for(var be=J+ce,Xe=J;B[Xe]&&!(Xe>=be);)++Xe;if(Xe-J>16&&B.buffer&&Fe)return Fe.decode(B.subarray(J,Xe));for(var Qe="";J<Xe;){var Ve=B[J++];if(!(Ve&128)){Qe+=String.fromCharCode(Ve);continue}var Be=B[J++]&63;if((Ve&224)==192){Qe+=String.fromCharCode((Ve&31)<<6|Be);continue}var It=B[J++]&63;if((Ve&240)==224?Ve=(Ve&15)<<12|Be<<6|It:Ve=(Ve&7)<<18|Be<<12|It<<6|B[J++]&63,Ve<65536)Qe+=String.fromCharCode(Ve);else{var tr=Ve-65536;Qe+=String.fromCharCode(55296|tr>>10,56320|tr&1023)}}return Qe},pt=(B,J)=>B?ke(P,B,J):"",jl=(B,J,ce,be,Xe)=>{var Qe={string:Ct=>{var An=0;return Ct!=null&&Ct!==0&&(An=Or(Ct)),An},array:Ct=>{var An=jt(Ct.length);return gt(Ct,An),An}};function Ve(Ct){return J==="string"?pt(Ct):J==="boolean"?!!Ct:Ct}var Be=Re(B),It=[],tr=0;if(be)for(var rr=0;rr<be.length;rr++){var gs=Qe[ce[rr]];gs?(tr===0&&(tr=_t()),It[rr]=gs(be[rr])):It[rr]=be[rr]}var Cn=Be(...It);function Fl(Ct){return tr!==0&&ut(tr),Ve(Ct)}return Cn=Fl(Cn),Cn},br={c:rt,f:$t,b:us,d:lt,g:wt,e:He,a:vs},qe=De();l._pcafit_wasm=(B,J,ce,be,Xe,Qe,Ve,Be,It,tr,rr)=>(l._pcafit_wasm=qe.j)(B,J,ce,be,Xe,Qe,Ve,Be,It,tr,rr),l._malloc=B=>(l._malloc=qe.k)(B),l._free=B=>(l._free=qe.l)(B),l._pcapredict_wasm=(B,J,ce,be,Xe,Qe,Ve,Be,It)=>(l._pcapredict_wasm=qe.m)(B,J,ce,be,Xe,Qe,Ve,Be,It),l._pcvpca_wasm=(B,J,ce,be,Xe,Qe,Ve,Be,It,tr,rr,gs,Cn,Fl,Ct)=>(l._pcvpca_wasm=qe.n)(B,J,ce,be,Xe,Qe,Ve,Be,It,tr,rr,gs,Cn,Fl,Ct);var ms=(B,J)=>(ms=qe.p)(B,J),Ga=B=>(Ga=qe.q)(B),Ka=B=>(Ka=qe.r)(B),Xa=()=>(Xa=qe.s)();l.ccall=jl;var hs;Q=function B(){hs||Qa(),hs||(Q=B)};function Qa(){if(X>0||(Y(),X>0))return;function B(){var J;hs||(hs=!0,l.calledRun=!0,!q&&(D(),o(l),(J=l.onRuntimeInitialized)==null||J.call(l),S()))}l.setStatus?(l.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>l.setStatus(""),1),B()},1)):B()}if(l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();return Qa(),t=c,t}})(),H1=$('<p>Current release: <span>2.1.3</span> Feedback: <a class="paper-link" href="mailto:help@mda.tools?subject=PCA app">help@mda.tools</a> Tutorial: <a class="paper-link" href="Wines.zip" download="">dataset</a> | <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFnCpcLEwI63Zj1YJZrVL0WH">video lessons</a></p>'),G1=$(`<h2>Data Driven SIMCA</h2> <p>Authors: <em>Sergey Kucheryavskiy, Oxana Rodionova, Alexey Pomerantsev</em></p> <p>Interactive web-application for creating and using DD-SIMCA one class classifier
      directly in your browser. The app does not send any information to a server,
      all calculations are done locally on your device.</p> <p>Check our open access <a href="https://doi.org/10.1002/cem.3556">tutorial paper</a> and YouTube <a href="https://www.youtube.com/playlist?list=PLep7KM9cEyFmoOR8sWDt7vJdnOCHvPEo2">video-lessons</a></p><p>Related theory: <a href="https://doi.org/10.1002/cem.2506">10.1002/cem.2506</a>, <a href="https://doi.org/10.1002/cem.2610">10.1002/cem.2610</a>, <a href="https://doi.org/10.1002/cem.3250">10.1002/cem.3250</a>, <a href="https://doi.org/10.1016/j.aca.2024.343352">10.1016/j.aca.2024.343352</a>.</p> <h3>v. 2.1.3</h3> <p class="release-info">released 10/03/2025</p> <ul><li>Small improvements and bug fixes.</li></ul> <h3>v. 2.1.1</h3> <p class="release-info">released 04/03/2025</p> <ul><li>App now remembers the plot settings when you switch between plots.</li> <li>Introducing sessons — app states, including model, results, datasets, and outliers
         (in all tabs). When you close tab or app window or click on reboot button, the current
         session is saved to browser's local storage and then is restored automatically. You can
         also download session as a file and load it from file.</li> <li>Added undo option for outliers (if more than one is removed).</li> <li>More robust CSV converter which filters out empty rows created by some versions of MS Excel.</li> <li>Results for alternative set also contains parameters <em>s</em> and <em>f'<sub>0</sub></em> for LoD estimation.</li> <li>Many small improvements to plots and control elements.</li></ul>`,1);function K1(r,e){he(e,!1);function t(c){c.train.dataset=null,c.target.model=null,c.new.model=null,c.tab=0}function l(c){const v=Object.keys(c);if(!["date","tab","train","target","new"].every(m=>v.includes(m)))return!1;/*!!!!change because in this case different tabs have different fields!!!*/const f=Object.keys(c.train);if(!["model","simca","calset","pvset","calres","pvres","outliers"].every(m=>f.includes(m)))return!1;const u=Object.keys(c.target);if(!["model","simca","testset","testres","outliers"].every(m=>u.includes(m)))return!1;const d=Object.keys(c.new);return!!["model","simca","altset","altres","outliers"].every(m=>d.includes(m))}function o(){return{date:al(new Date),tab:0,train:{model:0,simca:0,calset:0,pvset:0,calres:{pca:0,simca:0},pvres:{pca:0,simca:0},outliers:[]},target:{model:0,simca:0,testset:0,testres:{pca:0,simca:0},outliers:[]},new:{model:0,simca:0,altset:0,altres:{pca:0,simca:0},outliers:[]}}}const a=[{name:"Train",label:"train",component:t1},{name:"Predict: Target",label:"target",component:b1},{name:"Predict: New",label:"new",component:q1}];wc(),Y1(r,{appID:"ddsimca",appTitle:"Data Driven SIMCA",appShortTitle:"DD-SIMCA",appSlogan:"One class classifier",WASM:U1,tabs:a,initSession:o,checkSession:l,resetSession:t,footer:f=>{var u=H1();T(f,u)},info:f=>{var u=G1();T(f,u)},$$slots:{footer:!0,info:!0}}),ge()}sc(K1,{target:document.body});const X1=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=ddsimca.js.map
